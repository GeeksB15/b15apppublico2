import{_ as Q,br as uo,bv as K,bw as Z,r as T,o as f,d as C,w as s,f as t,A as I,O as W,h as R,H as j,Q as b,N as M,i as L,k as _,E as J,C as d,e as y,p as v,F as q,x as P,t as k,D as X,P as mo,S as B,T as F,U as A,v as G,bq as po,j as V,dh as oo,d6 as Y,Y as fo,Z as ho,di as bo,dj as go,dk as Co,bN as vo,aX as $,au as Vo,m as D,as as E,z as H,W as O,a_ as To,a$ as x,b4 as yo,b5 as N,l as _o,at as S,u as wo,av as ko,b7 as So,K as qo}from"./index.d6b972b7.js";import{I as Eo}from"./Icone.341e2aab.js";import{S as Uo,a as Ao}from"./SeletorPais.f2d3ad7d.js";import{o as Po}from"./open-url.c2afdfcd.js";const Do={computed:{metaDados(){return uo}},data(){return{contatoTmp:{},enderecoTmp:{},selecionarCertificado:!1,certificadoPadrao:"07660198000189 35 SP;",certificado:"",opcoesCertificados:[],cnpj:"",uf:"",erros:[],show:!1}},methods:{async consultarCadastroBrasilAPI(){const a=`https://brasilapi.com.br/api/cnpj/v1/${this.cnpj}`,e=await fetch(a),i=await e.json();if(!e.ok)throw new Error("N\xE3o foi poss\xEDvel realizar a consulta no Brasil API");let c=i.data_inicio_atividade;c&&(c=new Date(c),c=new Date(c.setDate(c.getDate()+1)),c=c.toJSON()),this.limpar(),this.contatoTmp.nome=i.razao_social,this.contatoTmp.apelido=i.nome_fantasia,this.contatoTmp.numeroDocumentoEstadual="",this.contatoTmp.regime=i.opcao_pelo_simples?"SIMPLES NACIONAL":"NORMAL",this.contatoTmp.dataAbertura=c,this.contatoTmp.situacao=i.descricao_situacao_cadastral,this.enderecoTmp.cep=i.cep||"",this.enderecoTmp.numero=i.numero||"",this.enderecoTmp.pais="Brasil",this.enderecoTmp.codigoPais=1058;let o={};try{o=(await $utils.buscarEndereco(this.enderecoTmp.cep)).data||{}}catch(r){console.log("Erro no buscarEndereco",r)}if(this.enderecoTmp.bairro=i.bairro||o.bairro||"",this.enderecoTmp.ibgeCod=String(i.codigo_municipio_ibge||o.ibge||""),this.enderecoTmp.logradouro=((i.descricao_tipo_de_logradouro||"")+" "+(i.logradouro||"")).trim()||o.logradouro||"",this.enderecoTmp.complemento=i.complemento||o.complemento||"",this.enderecoTmp.municipio=i.municipio||o.localidade||"",this.enderecoTmp.uf=i.uf||o.uf||"",this.enderecoTmp.ufCod=$utils.mapearEstadoCodigo[this.enderecoTmp.uf],this.enderecoTmp.ibgeCod){const r=await $db.cidade.le({cidadeCodIbge:this.enderecoTmp.ibgeCod,ativo:!0});this.enderecoTmp.cidadeCodChave=(r.find(u=>u.cod)||{}).cod}this.show=!0},async consultarCadastroSefaz(){let a="";this.opcoesCertificados=[];const i=(await $erp().empresa.toArray()).filter(n=>n.idContato).map(n=>n.idContato),c=await $erp().contato.where("id").anyOf(i).toArray(),o=await $erp().contatoEndereco.where("idContato").anyOf(i).toArray();for(const n of c){const g=o.filter(U=>U.idContato===n.id);let p=g.find(U=>U.grupo==="Principal");p||(p=g[0]);const w=this.$utils.filtrarDigitos(n.numeroDocumentoNacional),z=String(this.$utils.mapearEstadoCodigo[p.uf]);if(w.length===14&&z.length===2&&p.uf.length===2){const U=w+" "+z+" "+p.uf+";";a+=U,this.opcoesCertificados.push({valor:U,rotulo:n.apelido,sublabel:n.numeroDocumentoNacional})}}this.opcoesCertificados.push({valor:this.certificadoPadrao,rotulo:""}),a+=this.certificadoPadrao;const r=K.consultarCadastroContribuinte(this.cnpj,""),u=await Z.consultarCadastroContribuinte(a,r,this.cnpj);if(u.status==="Erro")throw u.mensagem&&(this.erros=u.mensagem.split(`
`)),new Error("N\xE3o foi poss\xEDvel realizar a consulta no Sefaz");await this.preencherTemplateDadosSefaz(u.xml)},async consultarCadastroSefazCertificado(){try{$q.loading.show({message:"Consultando cadastro de CNPJ"});const a=K.consultarCadastroContribuinte(this.cnpj,this.uf),e=await Z.consultarCadastroContribuinte(this.certificado,a,this.cnpj);if(e.status==="Erro"){e.mensagem&&(this.erros=e.mensagem.split(`
`));return}await this.preencherTemplateDadosSefaz(e.xml),$q.notifyPositive("Consulta realizada pelo Certificado Digital")}finally{$q.loading.hide()}},async consultar(a){try{if($q.loading.show({message:"Consultando cadastro de CNPJ"}),this.cnpj=a.replace(/[^\d]/g,""),!$utils.validarDocumentoNacional(this.cnpj)){let e=function(i,c,o,r,u,n){return n?c+"."+o+"."+r+"/"+u+"-"+n:u?c+"."+o+"."+r+"/"+u:r?c+"."+o+"."+r:o?c+"."+o:c};throw this.cnpj=this.cnpj.replace(/(\d{0,2})(\d{0,3})(\d{0,3})(\d{0,4})(\d{0,2})$/,e),new Error(`CNPJ ${this.cnpj} inv\xE1lido`)}try{await this.consultarCadastroSefaz(),$q.notifyPositive("Consulta realizada pelo cadastro na SEFAZ");return}catch(e){console.log(e.message)}try{await this.consultarCadastroBrasilAPI(),$q.notifyPositive("Consulta realizada pela Brasil API");return}catch(e){console.log(e.message)}this.certificado=this.certificadoPadrao,this.uf=(this.opcoesCertificados[0].valor||"").substr(18,2),this.selecionarCertificado=!0,this.show=!0}catch(e){throw new Error(e)}finally{$q.loading.hide()}},limpar(){this.contatoTmp={},this.enderecoTmp=[],this.selecionarCertificado=!1},async preencherTemplateDadosSefaz(a){const c=new DOMParser().parseFromString(a,"application/xml").getElementsByTagName("infCons")[0].getElementsByTagName("infCad")[0],o=c.getElementsByTagName("ender")[0],r=(u,n)=>(u.getElementsByTagName(n)[0]||{}).innerHTML||"";this.limpar(),this.contatoTmp.apelido=r(c,"xFant")||r(c,"xNome"),this.contatoTmp.nome=r(c,"xNome"),this.contatoTmp.numeroDocumentoEstadual=r(c,"IE"),this.contatoTmp.regime=r(c,"xRegApur"),this.contatoTmp.dataAbertura=r(c,"dIniAtiv"),this.contatoTmp.situacao=r(c,"cSit")>0?"ATIVA":"BAIXADA",this.enderecoTmp.bairro=r(o,"xBairro"),this.enderecoTmp.cep=r(o,"CEP").padStart(8,"0").replace(/(\d{5})(\d{3})/g,"$1-$2"),this.enderecoTmp.complemento=r(o,"xCpl"),this.enderecoTmp.ibgeCod=r(o,"cMun"),this.enderecoTmp.logradouro=r(o,"xLgr"),this.enderecoTmp.municipio=r(o,"xMun"),this.enderecoTmp.numero=r(o,"nro"),this.enderecoTmp.uf=r(c,"UF"),this.enderecoTmp.pais="Brasil",this.enderecoTmp.codigoPais=1058;try{const n=(await $utils.buscarEndereco(this.enderecoTmp.cep)).data;if(this.enderecoTmp.bairro=n.bairro,this.enderecoTmp.ibgeCod=n.ibge,this.enderecoTmp.logradouro=n.logradouro,this.enderecoTmp.municipio=n.localidade,this.enderecoTmp.uf=n.uf,this.enderecoTmp.ufCod=$utils.mapearEstadoCodigo[n.uf],this.enderecoTmp.complemento||(this.enderecoTmp.complemento=n.complemento),n.ibge){const g=await $db.cidade.le({cidadeCodIbge:n.ibge.toString(),ativo:!0});this.enderecoTmp.cidadeCodChave=(g.find(p=>p.cod)||{}).cod}}catch(u){console.error(u)}this.show=!0},salvar(){var i;this.contato.apelido=this.contatoTmp.apelido||this.contatoTmp.nome,this.contato.nome=this.contatoTmp.nome,this.contato.numeroDocumentoEstadual=this.contatoTmp.numeroDocumentoEstadual,this.contato.dataAbertura=this.contatoTmp.dataAbertura,this.contato.observacao=`${this.contatoTmp.situacao} | `+((i=this.contato.observacao)!=null?i:""),this.contato.regime=this.contatoTmp.regime.includes("SIMPLES NACIONAL")?"SimplesNacional":"Normal";const a=this.endereco.find(c=>c.bairro===this.enderecoTmp.bairro&&c.cep===this.enderecoTmp.cep&&c.complemento===this.enderecoTmp.complemento&&c.ibgeCod===this.enderecoTmp.ibgeCod&&c.logradouro===this.enderecoTmp.logradouro&&c.municipio===this.enderecoTmp.municipio&&c.numero===this.enderecoTmp.numero&&c.uf===this.enderecoTmp.uf),e=this.endereco.find(c=>c.grupo==="Principal");a||this.endereco.push({...this.enderecoTmp,grupo:e?void 0:"Principal",id:$utils.uuid(),idContato:this.contato.id}),this.show=!1}},props:{contato:Object,endereco:Array}},xo={class:"q-px-lg q-py-md"},No={class:"row q-col-gutter-x-sm"},Fo={class:"row q-col-gutter-x-sm"},Oo={class:"row q-col-gutter-x-sm q-ml-xs"},Ro={class:"row justify-end"},Lo={class:"q-px-lg q-py-md"},Io={class:"row justify-end"};function jo(a,e,i,c,o,r){const u=T("campo");return f(),C(X,{modelValue:o.show,"onUpdate:modelValue":e[16]||(e[16]=n=>o.show=n),"content-css":{maxWidth:"800px"}},{default:s(()=>[t(I,null,{default:s(()=>[t(W,null,{default:s(()=>[t(R,null,{default:s(()=>[j(t(b,{dense:"",flat:"",icon:"arrow_back",round:""},null,512),[[M]]),t(L,null,{default:s(()=>e[17]||(e[17]=[_("Cadastro CNPJ")])),_:1})]),_:1}),o.selecionarCertificado?y("",!0):(f(),C(J,{key:0,onSubmit:r.salvar},{default:s(()=>[d("div",xo,[t(u,{modelValue:o.contatoTmp.nome,"onUpdate:modelValue":e[0]||(e[0]=n=>o.contatoTmp.nome=n),"somente-leitura":"",class:"row",rotulo:"Raz\xE3o social"},null,8,["modelValue"]),t(u,{modelValue:o.contatoTmp.apelido,"onUpdate:modelValue":e[1]||(e[1]=n=>o.contatoTmp.apelido=n),"somente-leitura":"",class:"row",rotulo:"Fantasia"},null,8,["modelValue"]),d("div",No,[t(u,{modelValue:o.contatoTmp.numeroDocumentoEstadual,"onUpdate:modelValue":e[2]||(e[2]=n=>o.contatoTmp.numeroDocumentoEstadual=n),"somente-leitura":"",class:"col-12 col-md-6",rotulo:"IE"},null,8,["modelValue"]),t(u,{modelValue:o.contatoTmp.dataAbertura,"onUpdate:modelValue":e[3]||(e[3]=n=>o.contatoTmp.dataAbertura=n),"somente-leitura":"",class:"col-12 col-md-6",rotulo:"Data de abertura",tipo:"data"},null,8,["modelValue"])]),d("div",Fo,[t(u,{modelValue:o.contatoTmp.regime,"onUpdate:modelValue":e[4]||(e[4]=n=>o.contatoTmp.regime=n),"somente-leitura":"",class:"col-12 col-md-6",rotulo:"Regime"},null,8,["modelValue"]),t(u,{modelValue:o.contatoTmp.situacao,"onUpdate:modelValue":e[5]||(e[5]=n=>o.contatoTmp.situacao=n),"somente-leitura":"",class:"col-12 col-md-6",rotulo:"Situa\xE7\xE3o"},null,8,["modelValue"])]),e[18]||(e[18]=d("div",{class:"row q-mt-lg q-mb-sm q-ml-sm text-subtitle1"},"Endere\xE7o",-1)),d("div",Oo,[t(u,{modelValue:o.enderecoTmp.cep,"onUpdate:modelValue":e[6]||(e[6]=n=>o.enderecoTmp.cep=n),"somente-leitura":"",class:"col-6 col-sm-4",rotulo:"CEP",mask:"#####-###"},null,8,["modelValue"]),t(u,{modelValue:o.enderecoTmp.uf,"onUpdate:modelValue":e[7]||(e[7]=n=>o.enderecoTmp.uf=n),"somente-leitura":"",class:"col-2 col-sm-2",rotulo:"UF"},null,8,["modelValue"]),t(u,{modelValue:o.enderecoTmp.municipio,"onUpdate:modelValue":e[8]||(e[8]=n=>o.enderecoTmp.municipio=n),"somente-leitura":"",class:"col-10 col-sm-6",rotulo:"Cidade",ajuda:o.enderecoTmp.ibgeCod?"C\xF3digo IBGE: "+o.enderecoTmp.ibgeCod:""},null,8,["modelValue","ajuda"]),t(u,{modelValue:o.enderecoTmp.logradouro,"onUpdate:modelValue":e[9]||(e[9]=n=>o.enderecoTmp.logradouro=n),"somente-leitura":"",class:"col-12 col-sm-7",rotulo:"Endere\xE7o"},null,8,["modelValue"]),t(u,{modelValue:o.enderecoTmp.numero,"onUpdate:modelValue":e[10]||(e[10]=n=>o.enderecoTmp.numero=n),"somente-leitura":"",class:"col-12 col-sm-2",rotulo:"N\xFAmero"},null,8,["modelValue"]),t(u,{modelValue:o.enderecoTmp.complemento,"onUpdate:modelValue":e[11]||(e[11]=n=>o.enderecoTmp.complemento=n),"somente-leitura":"",class:"col-12 col-sm-3",rotulo:"Complemento"},null,8,["modelValue"]),t(u,{modelValue:o.enderecoTmp.bairro,"onUpdate:modelValue":e[12]||(e[12]=n=>o.enderecoTmp.bairro=n),"somente-leitura":"",class:"col-12 col-sm-6",rotulo:"Bairro"},null,8,["modelValue"]),t(u,{modelValue:o.enderecoTmp.pais,"onUpdate:modelValue":e[13]||(e[13]=n=>o.enderecoTmp.pais=n),"somente-leitura":"",class:"col-12 col-sm-6",rotulo:"Pa\xEDs"},null,8,["modelValue"])])]),t(R,{color:"light"},{default:s(()=>[t(L,null,{default:s(()=>[d("div",Ro,[j(t(b,{flat:"",color:"tertiary",label:"Cancelar"},null,512),[[M]]),t(b,{unelevated:"",color:"primary",type:"submit",label:"Confirmar"})])]),_:1})]),_:1})]),_:1},8,["onSubmit"])),o.selecionarCertificado?(f(),C(J,{key:1,onSubmit:r.consultarCadastroSefazCertificado},{default:s(()=>[d("div",Lo,[(f(!0),v(q,null,P(o.erros,(n,g)=>(f(),v("div",{class:"row q-py-xs text-negative",key:g},k(n),1))),128)),t(u,{modelValue:o.certificado,"onUpdate:modelValue":e[14]||(e[14]=n=>o.certificado=n),class:"row q-mt-md",rotulo:"Certificado",tipo:"seletor",opcoes:o.opcoesCertificados},null,8,["modelValue","opcoes"]),t(u,{modelValue:o.uf,"onUpdate:modelValue":e[15]||(e[15]=n=>o.uf=n),class:"row",rotulo:"UF do Sefaz para consulta",tipo:"seletor",opcoes:r.metaDados.infNFe.emit.enderEmit.UF._enumeration},null,8,["modelValue","opcoes"])]),t(R,{color:"light"},{default:s(()=>[t(L,null,{default:s(()=>[d("div",Io,[t(b,{flat:"",color:"primary",type:"submit",label:"Nova consulta"})])]),_:1})]),_:1})]),_:1},8,["onSubmit"])):y("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])}var zo=Q(Do,[["render",jo]]);const Bo={computed:{registrosEncontrados(){return!!this.itens.length}},data(){return{itens:[],redeSocialCampo:"",visivel:!1,idContato:""}},methods:{adicionar(){this.redeSocialErro=!1,this.redeSocialErroDescricao="";const a=this.redeSocialCampo.toLowerCase();if(!a)return!1;if(this.itens.find(e=>e.link===a))return this.redeSocialErro=!0,this.redeSocialErroDescricao="Rede social j\xE1 cadastrada.",!1;try{this.itens.push({...$utils.analisarRedeSocialLink(a),id:$utils.uuid(),idContato:this.idContato}),this.redeSocialCampo=""}catch{this.redeSocialErro=!0,this.redeSocialErroDescricao="Insira uma URL v\xE1lida."}},remover(a){this.$q.dialog({cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},title:"Remover",message:"Ao continuar voc\xEA ir\xE1 remover esta rede social.",ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{a>=0&&(this.termo=this.itens[a].link,this.itens.splice(a,1))})},onHide(){this.resolve(this.itens)},onShow(){this.$refs.redeSocialCampo.focus()},async show(a){return this.itens=a.itens,this.idContato=a.idContato,this.visivel=!0,new Promise((e,i)=>{this.resolve=e})}}};function Mo(a,e,i,c,o,r){return f(),C(X,{modelValue:o.visivel,"onUpdate:modelValue":e[1]||(e[1]=u=>o.visivel=u),onHide:e[2]||(e[2]=u=>r.onHide()),onShow:e[3]||(e[3]=u=>r.onShow()),"content-css":"{ minWidth: '80vw' }"},{default:s(()=>[t(I,null,{default:s(()=>[t(R,{class:"bg-primary text-white"},{default:s(()=>[t(L,null,{default:s(()=>e[4]||(e[4]=[_("Redes Sociais")])),_:1}),j(t(b,{dense:"",flat:"",icon:"close",round:""},null,512),[[M]])]),_:1}),t(W,null,{default:s(()=>[t(mo,{"no-border":"",separator:""},{default:s(()=>[(f(!0),v(q,null,P(o.itens,(u,n)=>(f(),C(B,{class:"animate-pop q-px-none",key:n},{default:s(()=>[t(F,null,{default:s(()=>[_(k(u.tipo),1),t(A,null,{default:s(()=>[_(k(u.link),1)]),_:2},1024)]),_:2},1024),t(A,null,{default:s(()=>[t(b,{color:"negative",size:"xs",icon:"remove",outline:"",round:"",onClick:g=>r.remover(n)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(G,{color:"green",placeholder:"Insira a URL aqui.",type:"url",modelValue:o.redeSocialCampo,"onUpdate:modelValue":e[0]||(e[0]=u=>o.redeSocialCampo=u),ref:"redeSocialCampo",onKeyup:po(r.adicionar,["enter"])},{append:s(()=>[t(V,{name:"done",onClick:r.adicionar,class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onKeyup"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var Qo=Q(Bo,[["render",Mo]]);const Ho={data(){return{visivel:!1}},methods:{trocarFoto(a){oo(a[0],{crop:!0,outputFormat:"jpg",targetHeight:200,targetWidth:200},(e,i)=>{this.resolve(i),this.visivel=!1})},onHide(){this.resolve()},async show(){return this.visivel=!0,new Promise((a,e)=>{this.resolve=a})}},props:{modelValue:{type:String}}};function Jo(a,e,i,c,o,r){return f(),C(X,{modelValue:o.visivel,"onUpdate:modelValue":e[0]||(e[0]=u=>o.visivel=u),onHide:e[1]||(e[1]=u=>r.onHide())},{default:s(()=>[t(I,null,{default:s(()=>[t(R,null,{default:s(()=>[t(L,null,{default:s(()=>e[2]||(e[2]=[_("Alterar foto")])),_:1}),j(t(b,{dense:"",flat:"",icon:"close",round:""},null,512),[[M]])]),_:1}),t(Y,{"auto-expand":"",color:"none",class:"mobile-only",label:"Foto","hide-upload-button":"","hide-upload-progress":"","dark-light":"",url:"",ref:"fotoCampo",factory:r.trocarFoto},null,8,["factory"]),t(Y,{"auto-expand":"",color:"none",class:"mobile-hide",extensions:".jpg,.jpeg",label:"Foto","hide-upload-button":"","hide-upload-progress":"","dark-light":"",url:"",ref:"fotoCampo",factory:r.trocarFoto},null,8,["factory"])]),_:1})]),_:1},8,["modelValue"])}var Go=Q(Ho,[["render",Jo]]);const Wo={components:{Avatar:fo,Badge:ho,Icone:Eo,SeletorCampoTabela:bo,SeletorCidade:Uo,SeletorPais:Ao,ConsultaCNPJ:zo,ContatoCriar:go,RedesSociaisModal:Qo,PromptGrupoUnico:Co,modalTrocarFoto:Go,Arquivo:vo},computed:{badgeCor(){return this.contato.ativo?this.contato.condutaRestricao?"negative":this.contato.condutaObservacao?"orange":"positive":"tertiary"},ehEmpresa(){const a=this.contato.numeroDocumentoNacional;return a?a.length>14:!1},idade(){let a=this.contato.dataAbertura;if(!a)return 0;a=new Date(a);const e=new Date(Date.now()-a.getTime());return Math.abs(e.getUTCFullYear()-1970)},segmentoProfissao(){const a=this.contato.numeroDocumentoNacional||"";return a.length>14?"Segmento":a.length>=11?"Profiss\xE3o":"Segmento/Profiss\xE3o"},temRedeSocial(){return this.redeSocial&&!!this.redeSocial.length}},data(){return{contato:{},contatoOriginal:{},endereco:[],enderecoEstrangeiro:{},telefone:[],redeSocial:[],consulta:[],grupo:[],filhos:[],filhosId:{},arquivo:[],tab:"profile-tab-1",consultaDescricao:"",descricaoAssistente:"",descricaoFormaPagamento:"",descricaoItemTabelaPreco:"",descricaoTransportadora:"",descricaoEmpresaCarteira:"",descricaoContatoLider:"",descricaoVendedor:"",filhoCampo:"",contatoUsuario:{},somenteCarteira:!1,podeAlterarVendedorAssistente:!1,opcoesDependentes:[],opcoesTabelaPreco:[],enderecoTipos:[{label:"Principal",value:"Principal",icon:"star",color:"orange"},{label:"Cobran\xE7a",value:"Cobran\xE7a",icon:"attach_money"},{label:"Comercial",value:"Comercial",icon:"business"},{label:"Correspond\xEAncia",value:"Correspond\xEAncia",icon:"mail"},{label:"Entrega",value:"Entrega",icon:"local_shipping"},{label:"Instala\xE7\xE3o",value:"Instala\xE7\xE3o",icon:"build"},{label:"Residencial",value:"Residencial",icon:"store_mall_directory"},{label:"Outros",value:"Outros",icon:"location_city"}],regimes:[{label:"Normal",value:"Normal"},{label:"Simples Nacional",value:"SimplesNacional"},{label:"Simples Nacional - MEI",value:"MEI"}],sexos:[{label:"Masculino",value:"Masculino"},{label:"Feminino",value:"Feminino"},{label:"Outro",value:"Outro"}],telefoneTipos:[{label:"Principal",value:"Principal",color:"orange",icon:"star"},{label:"Comercial",value:"Comercial",color:"dark",icon:"phone"},{label:"Celular",value:"Celular",color:"dark",icon:"phone_iphone"},{label:"Fixo",value:"Fixo",color:"dark",icon:"phone"},{label:"WhatsApp",value:"WhatsApp",color:"positive",icon:"mdi-whatsapp",ix:"duo"}],permissoes:{},configuracoes:{},rules:{}}},methods:{async atualizar({id:a}){var e;$q.loading.show();try{if(a||(a=this.$route.params.id),this.somenteCarteira=!1,this.contatoUsuario={},!$db.usuario.logado.administrador&&await $db.permissao.objetoClienteSistema("Diretiva_Contatos_AcessaTodosContatos")&&!await $db.permissao.objeto("Diretiva_Contatos_AcessaTodosContatos")){let o=$db.usuario.logado.codigoContato;o&&(this.contatoUsuario=(await $erp().contato.where({codigoContato:o}).toArray()).find(r=>r.id)),this.somenteCarteira=!0}this.podeAlterarVendedorAssistente=!1,!$db.usuario.logado.administrador&&await $db.permissao.objetoClienteSistema("Diretiva_Contatos_AlterarVendedorEAssistente")&&!await $db.permissao.objeto("Diretiva_Contatos_AlterarVendedorEAssistente")&&(this.podeAlterarVendedorAssistente=!0);const i=await $db.contato.leCompletoV3(a);this.contato=i.contato;for(let o=0;o<i.endereco.length;o++)this.enderecoEstrangeiro[o]=!1,((e=i.endereco[o].uf)!=null?e:"").toUpperCase()==="EX"&&(this.enderecoEstrangeiro[o]=!0);this.arquivoOriginal=await $db.arquivo.lista({tipoArquivo:"contatoImagem",idTabelaMaster:this.contato.id}),this.arquivo=$utils.clonarV2(this.arquivoOriginal),this.endereco=i.endereco,this.telefone=i.telefone,this.redeSocial=i.redeSocial,this.filhos=i.filhos,this.consulta=i.consulta,this.grupo=i.grupo.map(o=>({...o,label:o.descricao})),this.contatoOriginal=$utils.clonarV2(i.contato),this.enderecoOriginal=$utils.clonarV2(i.endereco),this.telefoneOriginal=$utils.clonarV2(i.telefone),this.redeSocialOriginal=$utils.clonarV2(i.redeSocial),this.filhosOriginal=$utils.clonarV2(i.filhos),this.consultaOriginal=$utils.clonarV2(i.consulta),this.grupoOriginal=$utils.clonarV2(i.grupo),a===""&&(i.contato.id=$utils.uuid(),this.contatoOriginal={});const c=i.contato;this.descricaoAssistente=(await $erp().contato.get(c.idContatoAssistente||"")||{}).apelido||"",this.descricaoTransportadora=(await $erp().contato.get(c.idContatoTransportadora||"")||{}).apelido||"",this.descricaoEmpresaCarteira=(await $erp().contato.get(c.idEmpresaCarteira||"")||{}).apelido||"",this.descricaoContatoLider=(await $erp().contato.get(c.idContatoLider||"")||{}).apelido||"",this.descricaoVendedor=(await $erp().contato.get(c.idContatoVendedor||"")||{}).apelido||"",this.descricaoFormaPagamento=(await $erp().formaPagamento.get(c.idFormaPagamento||"")||{}).descricao||"",this.descricaoItemTabelaPreco=(await $erp().itemTabelaPreco.get(c.idItemTabelaPreco||"")||{}).descricao||"";for(const o of i.filhos)this.filhosId[o.idContatoRelacionado]=await $db.contato.le({id:o.idContatoRelacionado});this.atualizarTabelaPreco()}catch(i){this.$q.notifyError("Ocorreu um erro ao obter contato.",i)}finally{$q.loading.hide()}},async restaurarContato(){try{$q.loading.show(),this.contato.ativo=!0,await this.salvarContato(),this.$q.notifyPositive("O contato foi restaurado com sucesso.")}catch{$q.notify("Ocorreu um erro ao restaurar.")}finally{$q.loading.hide()}},validateEmail(a){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(a).toLowerCase())},async salvarContato(){var i,c;const a=await $db.hibrido.lista({table:"configuracoes",columns:["valor"],where:{nome:"venda.codigoconsumidor"}});if(Number((c=(i=a==null?void 0:a[0])==null?void 0:i.valor)!=null?c:0)===$db.contato.selecionado.codigoContato){$q.notifyError("N\xE3o \xE9 poss\xEDvel editar/remover a ficha Consumidor!");return}if(!this.verificarSeAlterouCampos())return this.$q.notifyPositive("N\xE3o h\xE1 dados alterados.");try{this.$q.loading.show();const o=this.contato.id,r=$utils.clonarV2(this.grupo).map(n=>(n.descricao=n.label,n.idContato=o,delete n.label,n)),u={dadosOriginais:{contato:this.contatoOriginal,endereco:this.enderecoOriginal,telefone:this.telefoneOriginal,redeSocial:this.redeSocialOriginal,filhos:this.filhosOriginal,consulta:this.consultaOriginal,grupo:this.grupoOriginal},contato:this.contato,endereco:this.endereco,telefone:this.telefone,redeSocial:this.redeSocial,filhos:this.filhos,consulta:this.consulta,grupo:r};await $db.contato.grava(u),await $db.arquivo.remove(this.arquivoOriginal.filter(n=>!this.arquivo.find(g=>g.id===n.id)));for(const n of this.arquivo){let g={};Object.keys(this.arquivoOriginal).length?g={original:this.arquivoOriginal.find(p=>p.id===n.id)||[{}],atual:n}:g={atual:n},(n==null?void 0:n.name)&&(n==null?void 0:n.editado)&&await $db.arquivo.edita(g),n!=null&&n.name||await $db.arquivo.grava(g)}await this.atualizar({id:o}),$db.contato.selecionado=await $db.contato.le({id:o}),$utils.emitter.emit("carregarContatoAtendimentoLayout"),$q.notifyPositive("Os dados do contato foram salvos com sucesso.")}catch(o){$q.notifyError("Ocorreu um erro ao salvar.",o)}finally{$q.loading.hide()}},async contatoRemover(){var c,o;let a=!1;const e=await $db.hibrido.lista({table:"configuracoes",columns:["valor"],where:{nome:"venda.codigoconsumidor"}});if(Number((o=(c=e==null?void 0:e[0])==null?void 0:c.valor)!=null?o:0)===$db.contato.selecionado.codigoContato&&(a=!0,$q.notifyError("N\xE3o \xE9 poss\xEDvel editar/remover a ficha Consumidor!")),this.$refs.form.getValidationComponents().forEach(r=>{!r.validate()&&!a&&(a=!0)}),!a){try{if($q.loading.show(),await $db.financeiroTitulo.verificaTituloAbertoContato(this.contato.id)&&!await $db.permissao.objeto("Diretiva_Contato_InativarContatoTituloEmAberto")){$q.notifyError("N\xE3o \xE9 poss\xEDvel remover contato com t\xEDtulos em aberto. Usu\xE1rio sem permiss\xE3o!");return}}catch(r){$q.notifyError("Ocorreu um erro ao remover",r)}finally{$q.loading.hide()}await this.removerConfirma();try{$q.loading.show();const r=$utils.clonar(this.contato),u=r.id;r.ativo=!1;const n={dadosOriginais:{contato:this.contatoOriginal},contato:r};await $db.contato.grava(n),await this.atualizar({id:u}),$db.contato.selecionado=await $db.contato.le({id:u}),$utils.emitter.emit("carregarContatoAtendimentoLayout"),$q.notifyPositive("O contato foi exclu\xEDdo com sucesso.")}catch(r){$q.notifyError("Ocorreu um erro ao remover",r)}finally{$q.loading.hide()}}},aoCancelar(){if(!this.verificarSeAlterouCampos()){this.$q.notifyPositive("N\xE3o h\xE1 dados alterados.");return}this.$q.dialog({cancel:{label:"Manter",push:!0,color:"tertiary",flat:!0},title:"Tem certeza?",message:"Ao continuar voc\xEA ir\xE1 perder todas as modifica\xE7\xF5es.",ok:{label:"Continuar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{this.atualizar({id:this.contato.id})})},async dependenteCriar(){const a=await this.$refs.promptCriarDependente.mostrar();$lodash.get(a,"nome")&&this.filhoAdicionar({data:a})},async filhosBuscar(a,e){try{if(a=a.trim(),this.opcoesDependentes=[],a.length>1){const i=(await $db.contato.ler({filtros:{termoBusca:a,ativo:!0}})).data;this.opcoesDependentes=i.map(c=>({data:c,label:`${c.apelido} | ${c.nome}`,stamp:"#0000000",sublabel:c.nome,value:c.nome}))}e()}catch{e(),this.$q.notify("Ocorreu um erro ao obter os contatos.")}},async filhoRemover(a){await this.removerConfirma();const e=this.filhos.filter(i=>!(i.idContato===a.idContato&&i.idContatoRelacionado===a.idContatoRelacionado||i.idContato===a.idContatoRelacionado&&i.idContatoRelacionado===a.idContato));this.filhos=e},async filhoAdicionar(a){const e=a.data;this.filhoCampo="",this.filhosId[e.id]=await $db.contato.le({id:e.id}),this.filhos.push({id:$utils.uuid(),idContato:this.contato.id,idContatoRelacionado:e.id,socio:!1,cobranca:!1}),this.filhos.push({id:$utils.uuid(),idContato:e.id,idContatoRelacionado:this.contato.id,socio:!1,cobranca:!1}),this.filhos=$.exports.orderBy(this.filhos,"apelido")},async btSelecionarVendedor_click(){var c,o;const a=$utils.clonarV2(this.contato),e=this.descricaoVendedor,i=await $g.promptContato.show({filtro:{ativo:!0,vendedores:!0},placeholder:"Selecione o vendedor"});i!=null&&i.id&&(this.contato.idContatoVendedor=i.id,this.descricaoVendedor=i.apelido||""),(a==null?void 0:a.idContatoVendedor)&&((c=this.contato)==null?void 0:c.idContatoVendedor)&&(a==null?void 0:a.idContatoVendedor)!==((o=this.contato)==null?void 0:o.idContatoVendedor)&&$q.dialog({cancel:{label:"Apenas Este",push:!0,class:"bg-negative",textColor:"white",flat:!0},title:"Alterar Vendedor",message:`Deseja alterar o Vendedor em todos os Clientes de '${e}'' para '${this.descricaoVendedor}'?`,ok:{label:"Todos",push:!0,color:"tertiary",flat:!0}}).onOk(async()=>{try{$q.loading.show();const r=await $db.hibrido.lista({table:"contato",whereFilter:{idContatoVendedor:a==null?void 0:a.idContatoVendedor}}),u=$utils.clonarV2(r);u.map(n=>{var g;n.idContatoVendedor=(g=this.contato)==null?void 0:g.idContatoVendedor});for(let n=0;n<u.length;n++)try{await $db.contato.grava({dadosOriginais:{contato:r[n]},contato:u[n]})}catch(g){console.error(g)}}catch(r){console.log(r.message),$q.notifyError("Ocorreu um erro ao alterar Vendedor",r)}finally{$q.loading.hide()}})},vendedorLimpar(){this.contato.idContatoVendedor="",this.descricaoVendedor=""},async btSelecionarAssistente_click(){const a=await $g.promptContato.show({filtro:{ativo:!0,vendedores:!0},placeholder:"Selecione a empresa"});$lodash.get(a,"id")&&(this.contato.idContatoAssistente=a.id,this.descricaoAssistente=a.apelido||"")},assistenteLimpar(){this.contato.idContatoAssistente="",this.descricaoAssistente=""},async btSelecionaFormaPagamento_click(){const a=await this.$root.$refs.promptFormaPagamento.show();!$lodash.get(a,"id")||(this.contato.idFormaPagamento=a.id,this.descricaoFormaPagamento=a.descricao||"")},formaPagamentoLimpar(){this.contato.idFormaPagamento="",this.descricaoFormaPagamento=""},async btSelecionarTransportadora_click(){const a=await $g.promptContato.show({filtro:{ativo:!0,transportadoras:!0},placeholder:"Transportadora"});$lodash.get(a,"id")&&(this.contato.idContatoTransportadora=a.id,this.descricaoTransportadora=a.apelido||"")},transportadoraLimpar(){this.contato.idContatoTransportadora="",this.descricaoTransportadora=""},async btSelecionarEmpresaCarteira_click(){const a=await $g.promptContato.show({filtro:{ativo:!0,empresas:!0},placeholder:"Empresa Carteira"});$lodash.get(a,"id")&&(this.contato.idEmpresaCarteira=a.id,this.descricaoEmpresaCarteira=a.apelido||"")},empresaCarteiraLimpar(){this.contato.idEmpresaCarteira="",this.descricaoEmpresaCarteira=""},async btSelecionarContatoLider_click(){const a=await $g.promptContato.show({filtro:{ativo:!0},placeholder:"Contato L\xEDder"});!a.id||(this.contato.idContatoLider=a.id,this.descricaoContatoLider=a.apelido||"")},contatoLiderLimpar(){this.contato.idContatoLider="",this.descricaoContatoLider=""},async btRedeSocialadicionar_click(){const a=await this.$refs.modalRedesSociais.show({idContato:this.contato.id,itens:this.redeSocial});this.redeSocial=a},consultaAdicionar(){try{if(!this.consultaDescricao){this.$q.notifyError("Informar a descri\xE7\xE3o da consulta de cadastro");return}const a=this.consultaDescricao+` (Cadastro realizado pelo usu\xE1rio: ${$db.usuario.logado.nome} - CPF: ${this.$filters.cpfCnpj($db.usuario.logado.numeroDocumentoNacional)})`;this.consulta.push({id:$utils.uuid(),idContato:this.contato.id,dataConsulta:$utils.dataAtual(),descricao:a}),this.consulta=$.exports.orderBy(this.consulta,"dataConsulta","desc"),this.consultaDescricao=""}catch(a){this.$q.notifyError("Ocorreu um erro ao adicionar",a)}},async fotoTrocar_click(){const a=await this.$refs.modalTrocarFoto.show();a&&(this.contato.imagem=a)},uploadClick(){this.$refs.Upload.click()},async abrirArquivo(a){const e=this.$refs.Upload.files;if(FileReader&&e&&e.length){var i=new FileReader;i.onload=()=>{oo(e[0],{crop:!0,outputFormat:"jpg",targetHeight:200,targetWidth:200},(c,o)=>{this.contato.imagem=o})},i.readAsDataURL(e[0])}},async grupoSelecionar_Click(){const a=await this.$refs.PromptGrupoUnico.show();!a.descricao||this.grupo.push({id:$utils.uuid(),label:a.descricao})},async atualizarTabelaPreco(a,e,i){const c=await $db.itemTabelaPreco.le({tabelaMaster:!0})||[];for(const o of c)o.empresa=(await $db.contato.le({id:o.idEmpresa})).nome;this.opcoesTabelaPreco=c,typeof e=="function"&&e()},telefoneAdicionar(){this.telefone.push({id:$utils.uuid(),idContato:this.contato.id})},async telefoneAbrir(a){if(!a.telefone)return;const e=a.tipoTelefone==="WhatsApp"?"https://api.whatsapp.com/send?phone=":"tel:+";this.abrirURL(e+await $utils.formatarTelefone(a))},async telefoneRemover(a){await this.removerConfirma(),a>=0&&this.telefone.splice(a,1)},enderecoAdicionar(){this.endereco.push({id:$utils.uuid(),idContato:this.contato.id}),this.enderecoEstrangeiro[this.endereco.length-1]=!1},async enderecoRemover(a){await this.removerConfirma(),a>=0&&this.endereco.splice(a,1)},enderecoIcone(a){const e=this.enderecoTipos.find(i=>i.label===a)||{};return{color:e.color||"dark",name:e.icon||"store_mall_directory",size:a==="Principal"?"18px":"24px"}},consultarCep(a){const e=this.endereco[a];if(!e.cep||this.enderecoEstrangeiro[a])return;const i=e.cep.replace(/[^0-9]/g,"");i.length<8||$utils.buscarEndereco(i).then(async({data:c})=>{if(e.bairro=c.bairro,e.complemento=c.complemento,e.ibgeCod=c.ibge,e.logradouro=c.logradouro,e.municipio=c.localidade,e.pais="Brasil",e.codigoPais=1058,e.uf=c.uf,e.ufCod=$utils.mapearEstadoCodigo[c.uf],c.ibge){const o=await $db.cidade.le({cidadeCodIbge:c.ibge.toString(),ativo:!0});e.cidadeCodChave=(o.find(r=>r.cod)||{}).cod}})},async selecionarCidade(a,e){const i=this.endereco[e];i.municipio=a.municipio||"",i.ibgeCod=a.ibgeCod||"",i.uf=a.uf||"",i.ufCod=a.ufCod||"",i.cidadeCodChave=a.cidadeCodChave||"",i.codigoPais=1058,i.pais="Brasil"},async selecionarPais(a,e){const i=this.endereco[e];i.pais=a.nome,i.codigoPais=a.codigo,this.enderecoEstrangeiro[e]=!1,a.codigo!==1058&&(this.enderecoEstrangeiro[e]=!0,this.setarEstrangeiro(e))},removerConfirma(){return new Promise((a,e)=>{this.$q.dialog({cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},title:"Remover",message:"Ao continuar voc\xEA ir\xE1 remover este contato.",ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{a()})})},verificarSeAlterouCampos(){const a={contato:this.contatoOriginal,endereco:this.enderecoOriginal,telefone:this.telefoneOriginal,redeSocial:this.redeSocialOriginal,filhos:this.filhosOriginal,consulta:this.consultaOriginal,grupo:this.grupoOriginal};for(const o of this.arquivoOriginal)if(!this.arquivo.some(r=>r.id===o.id))return!0;for(const o of this.arquivo)if(!this.arquivoOriginal.some(u=>u.id===o.id)||this.arquivoOriginal.find(u=>u.id===o.id).nome!==o.nome)return!0;const e=$utils.clonarV2(this.grupo).map(o=>(o.descricao=o.label,o.idContato=this.contato.id,delete o.label,o)),i={contato:this.contato,endereco:this.endereco,telefone:this.telefone,redeSocial:this.redeSocial,filhos:this.filhos,consulta:this.consulta,grupo:e},c=$utils.diferenca(a,i);return $utils.gconsole.log("ContatoFicha","verificarSeAlterouCampos",c!==null,c),c!==null},abrirURL(a){Po(a)},async configRules(){await $db.contato.carregarMemoria(),this.rules={numeroDocumentoNacional:[()=>{const a=(this.contato.numeroDocumentoNacional||"").replace(/\D/g,"");if(!a.trim())return!0;if(!$utils.validarDocumentoNacional(a))return"Documento inv\xE1lido";for(const e of $db.contato.contatos){if(e.id===this.contato.id)continue;const i=(e.numeroDocumentoNacional||"").replace(/\D/g,"");if(!!i&&a===i)return"Documento j\xE1 existente"}return!0}]}},setarEstrangeiro(a){this.endereco[a].municipio="Exterior",this.endereco[a].ibgeCod="9999999",this.endereco[a].cep="99999-999",this.endereco[a].uf="EX"},abrirBuscaCep(){window.open("https://buscacepinter.correios.com.br/app/localidade_logradouro/index.php","_blank")}},watch:{"campos.nome"(a,e){this.campos.apelido===e&&(this.campos.apelido=a)},"$route.params.id"(){this.atualizar({id:this.$route.params.id})}},created(){this.configRules(),this.permissoes={editarLimiteCredito:!1,editarCondutaRestricao:!1},this.configuracoes={descontoCondicionado:!1},$db.configuracoes.le({nome:"usa.DescontoCondicionado"}).then(a=>{var e;this.configuracoes.descontoCondicionado=Number((e=a[0])==null?void 0:e.valor)||!1}),$db.permissao.objeto("Diretiva_Contatos_EditaLimiteCredito").then(a=>{this.permissoes.editarLimiteCredito=a}),$db.permissao.objeto("Diretiva_Contatos_EditaCondutaRestricao").then(a=>{this.permissoes.editarCondutaRestricao=a}),this.atualizar({id:this.id||""})},props:{id:{required:!1,default:null}}},Xo={class:"col-12 col-md-3 text-center"},Ko={class:"group q-mt-md"},Zo={class:"col-12 col-md-6"},Yo={key:0,class:"text-right"},$o={class:"col-12 col-sm-4"},oe={class:"col-12 col-sm-4"},ee={class:"col-12 col-sm-4"},te={class:"col-6 col-sm-4"},ae={class:"col-6 col-sm-4"},le={class:"col-10 col-sm-3"},re={class:"mlmobile34"},ie={class:"col-2 col-sm-1 text-right"},ne={class:"q-mt-md text-center"},se={class:"col-8"},ce={class:"col-4"},de={class:"col-5"},ue={class:"col-2"},me={class:"col-5"},pe={class:"col-12 col-sm-5"},fe={class:"col-3 col-sm-2"},he={class:"col-9 col-sm-5"},be={class:"col-5 col-sm-6"},ge={class:"col-5"},Ce={class:"col-2 col-sm-1 text-right"},ve={class:"q-my-md text-center"},Ve={class:"col-12 col-md-3"},Te={class:"col-12 col-sm-4"},ye={class:"col-12 col-sm-4"},_e={class:"col-12 col-sm-4"},we={class:"col-12 col-sm"},ke={key:0,class:"col-12 col-sm"},Se={class:"col-12 col-sm"},qe={class:"col-12 col-sm"},Ee={class:"col-12 col-sm-6"},Ue={class:"col-12 col-sm-6"},Ae={class:"col-12 q-mt-sm"},Pe={class:"q-mt-lg"},De={class:"col-auto"},xe={class:"col"},Ne={class:"q-mb-none"},Fe={class:"q-mb-none"},Oe={class:"q-mb-none"},Re={class:"hideondesktop"},Le={class:"hideondesktop"},Ie={class:"col-12 col-md hideonmobile"},je={class:"col-12 col-md-auto hideonmobile",style:{"justify-content":"flex-start !important"}},ze={class:"col-12 col-md-auto"},Be={class:"col"},Me={class:"col-auto text-right"},Qe={class:"col-12 col-sm-6"},He={class:"col-12 col-sm-6"},Je={class:"q-col-gutter-sm items-center row"},Ge={class:"col-12 col-sm-4"},We={class:"col-12 col-sm-4"},Xe={class:"q-pa-md"},Ke={class:"items-center justify-around q-my-lg row"},Ze={key:0},Ye={key:1},$e={class:"u-container relative-position"},ot={key:1,class:"q-py-sm"};function et(a,e,i,c,o,r){const u=T("avatar"),n=T("icone"),g=T("badge"),p=T("campo"),w=T("row"),z=T("SeletorCidade"),U=T("SeletorPais"),eo=T("SeletorCampoTabela"),to=T("gchips"),ao=T("arquivo"),lo=T("contato-criar"),ro=T("RedesSociaisModal"),io=T("modalTrocarFoto"),no=T("ConsultaCNPJ"),so=T("PromptGrupoUnico"),co=Vo("mask");return f(),v(q,null,[t(J,{ref:"form",onSubmit:r.salvarContato,class:"ContatoFicha q-mt-md"},{default:s(()=>[t(I,{class:"bg-white no-shadow q-px-md q-py-md"},{default:s(()=>[t(w,{class:"q-col-gutter-x-md justify-around"},{default:s(()=>[d("div",Xo,[t(u,{imagem:o.contato.imagem,rotulo:o.contato.apelido,tamanho:"160",onClick:r.uploadClick},null,8,["imagem","rotulo","onClick"]),d("input",{ref:"Upload",type:"file",id:"Upload",onChange:e[0]||(e[0]=(...l)=>r.abrirArquivo&&r.abrirArquivo(...l)),style:{visibility:"hidden"}},null,544),d("div",Ko,[(f(!0),v(q,null,P(o.redeSocial,(l,h)=>(f(),C(b,{color:l.tipo==="link"?"primary":l.tipo,key:h,round:"",size:"sm",onClick:m=>r.abrirURL(l.link),class:"q-mx-xs"},{default:s(()=>[l.tipo==="link"?(f(),C(V,{key:0,name:"launch"})):(f(),C(n,{key:1,nome:l.tipo,tamanho:"12"},null,8,["nome"]))]),_:2},1032,["color","onClick"]))),128)),t(b,{color:"positive",icon:"add",outline:"",round:r.temRedeSocial,size:"sm",class:"q-mx-xs",onClick:r.btRedeSocialadicionar_click},null,8,["round","onClick"])])]),d("div",Zo,[o.contato&&o.contato.codigoContato?(f(),v("div",Yo,[t(g,{cor:r.badgeCor,escuro:""},{default:s(()=>[_("#"+k((o.contato.codigoContato||0).toString().padStart(6,"0")),1)]),_:1},8,["cor"])])):y("",!0),t(p,{tipo:"texto",class:"q-title",placeholder:r.ehEmpresa?"Fantasia":"Apelido",autogrow:"","class-campo":"q-pb-sm",modelValue:o.contato.apelido,"onUpdate:modelValue":e[1]||(e[1]=l=>o.contato.apelido=l),rules:[l=>l&&l.length>2||"obrigat\xF3rio."],dense:""},null,8,["placeholder","modelValue","rules"]),t(p,{tipo:"texto",rotulo:r.ehEmpresa?"Raz\xE3o social":"Nome completo",modelValue:o.contato.nome,"onUpdate:modelValue":e[2]||(e[2]=l=>o.contato.nome=l),autogrow:"","class-campo":"q-pb-sm",rules:[l=>l&&l.length>2||"O nome \xE9 obrigat\xF3rio."],dense:""},null,8,["rotulo","modelValue","rules"]),t(w,{class:"q-col-gutter-sm"},{default:s(()=>[d("div",$o,[j((f(),C(G,{label:r.ehEmpresa?"CNPJ":"CPF/CNPJ",class:"q-pb-xs",modelValue:o.contato.numeroDocumentoNacional,"onUpdate:modelValue":e[4]||(e[4]=l=>o.contato.numeroDocumentoNacional=l),rules:o.rules.numeroDocumentoNacional,dense:""},{append:s(()=>[(o.contato.numeroDocumentoNacional||"").length===18&&a.$utils.validarDocumentoNacional(o.contato.numeroDocumentoNacional)?(f(),C(b,{key:0,dense:"",flat:"",round:"",icon:"mdi-arrow-down-bold-circle",color:"positive",onClick:e[3]||(e[3]=l=>a.$refs.consultaCNPJ.consultar(o.contato.numeroDocumentoNacional))},{default:s(()=>[t(D,null,{default:s(()=>e[44]||(e[44]=[_("Consultar cadastro")])),_:1})]),_:1})):y("",!0)]),_:1},8,["label","modelValue","rules"])),[[co,["###.###.###-##","##.###.###/####-##"]]])]),d("div",oe,[t(p,{rotulo:r.ehEmpresa?"Inscri\xE7\xE3o estadual":"RG/IE",modelValue:o.contato.numeroDocumentoEstadual,"onUpdate:modelValue":e[5]||(e[5]=l=>o.contato.numeroDocumentoEstadual=l),class:"q-pb-xs"},null,8,["rotulo","modelValue"])]),d("div",ee,[t(p,{rotulo:"Inscri\xE7\xE3o municipal",modelValue:o.contato.numeroDocumentoMunicipal,"onUpdate:modelValue":e[6]||(e[6]=l=>o.contato.numeroDocumentoMunicipal=l),class:"q-pb-xs"},null,8,["modelValue"])])]),_:1}),e[46]||(e[46]=d("div",{class:"text-subtitle1 q-mt-lg"},"Telefones",-1)),(f(!0),v(q,null,P(o.telefone,(l,h)=>(f(),v("div",{key:h,class:"q-mt-md"},[t(w,null,{default:s(()=>[d("div",te,[t(E,{modelValue:l.tipoTelefone,"onUpdate:modelValue":m=>l.tipoTelefone=m,options:o.telefoneTipos,"option-value":"value","option-label":"label","emit-value":"","map-options":"",dense:"",label:"Tipo"},{before:s(()=>[t(b,{flat:"",round:"",icon:(o.telefoneTipos.find(m=>m.value===l.tipoTelefone)||{}).icon||"star",color:"tertiary",size:"sm",onClick:m=>r.telefoneAbrir(l)},null,8,["icon","onClick"])]),option:s(m=>[t(B,H({ref_for:!0},m.itemProps),{default:s(()=>[t(F,{avatar:""},{default:s(()=>[t(V,{name:m.opt.icon},null,8,["name"])]),_:2},1024),t(F,null,{default:s(()=>[t(A,{innerHTML:m.opt.label},null,8,["innerHTML"])]),_:2},1024)]),_:2},1040)]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),d("div",ae,[t(p,{rotulo:"Telefone",modelValue:l.telefone,"onUpdate:modelValue":m=>l.telefone=m},null,8,["modelValue","onUpdate:modelValue"])]),d("div",le,[d("div",re,[t(p,{rotulo:"Descri\xE7\xE3o",modelValue:l.observacao,"onUpdate:modelValue":m=>l.observacao=m},null,8,["modelValue","onUpdate:modelValue"])])]),d("div",ie,[t(b,{onClick:m=>r.telefoneRemover(h),icon:"delete",flat:"",round:"",dense:"",color:"tertiary",class:"q-mt-sm"},null,8,["onClick"])])]),_:2},1024)]))),128)),d("div",ne,[t(b,{color:"positive",icon:"add",label:"Telefone",outline:"",size:"sm",onClick:r.telefoneAdicionar},null,8,["onClick"])]),e[47]||(e[47]=d("div",{class:"text-subtitle1 q-mt-lg"},"Endere\xE7os",-1)),(f(!0),v(q,null,P(o.endereco,(l,h)=>(f(),v("div",{class:"u-separador animate-pop q-mt-md",key:h},[t(w,null,{default:s(()=>[d("div",se,[t(E,{modelValue:l.grupo,"onUpdate:modelValue":m=>l.grupo=m,options:o.enderecoTipos,"option-value":"value","option-label":"label",class:"q-pb-md","emit-value":"","map-options":"",dense:"",label:"Grupo"},{before:s(()=>[t(V,H({ref_for:!0},r.enderecoIcone(l.grupo),{color:"tertiary",size:"xs",class:"q-mx-xs"}),null,16)]),option:s(m=>[t(B,H({ref_for:!0},m.itemProps),{default:s(()=>[t(F,{avatar:""},{default:s(()=>[t(V,{name:m.opt.icon},null,8,["name"])]),_:2},1024),t(F,null,{default:s(()=>[t(A,{innerHTML:m.opt.label},null,8,["innerHTML"])]),_:2},1024)]),_:2},1040)]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),d("div",ce,[t(O,{modelValue:l.estrangeiro,"onUpdate:modelValue":[m=>l.estrangeiro=m,m=>r.setarEstrangeiro(h)],val:!1,label:"Estrangeiro",class:"q-pl-none"},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024),t(w,null,{default:s(()=>[d("div",de,[t(G,{modelValue:l.cep,"onUpdate:modelValue":m=>l.cep=m,onChange:m=>r.consultarCep(h),readonly:o.enderecoEstrangeiro[h],rules:[m=>m&&m.replace(/\D/g,"").length===8||"O CEP est\xE1 muito curto."],type:"texto",label:"CEP",mask:"#####-###",debounce:"500",dense:"",class:"q-pb-none"},{append:s(()=>[t(b,{onClick:e[7]||(e[7]=m=>r.abrirBuscaCep()),disabled:o.enderecoEstrangeiro[h],icon:"not_listed_location",flat:"",round:"",dense:""},{default:s(()=>[t(D,{anchor:"bottom middle",self:"center middle"},{default:s(()=>e[45]||(e[45]=[_("N\xE3o sei CEP")])),_:1})]),_:2},1032,["disabled"])]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","readonly","rules"])]),d("div",ue,[t(p,{"class-campo":"q-pb-none ",rotulo:"UF",maxlength:"2",modelValue:l.uf,"onUpdate:modelValue":m=>l.uf=m,onBlur:o.endereco.$touch,dense:"",rules:[m=>m&&m.length===2||"Insira um UF."],"somente-leitura":o.enderecoEstrangeiro[h]},null,8,["modelValue","onUpdate:modelValue","onBlur","rules","somente-leitura"])]),d("div",me,[t(z,{ibgeCod:l.ibgeCod,onSelecionar:m=>r.selecionarCidade(m,h),required:"","somente-leitura":o.enderecoEstrangeiro[h]},null,8,["ibgeCod","onSelecionar","somente-leitura"])]),d("div",pe,[t(p,{"class-campo":"q-pb-md",rotulo:"Endere\xE7o",modelValue:l.logradouro,"onUpdate:modelValue":m=>l.logradouro=m,autogrow:"",onBlur:o.endereco.$touch,dense:""},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),d("div",fe,[t(p,{"class-campo":"q-pb-md",rotulo:"N\xFAmero",modelValue:l.numero,"onUpdate:modelValue":m=>l.numero=m,onBlur:o.endereco.$touch,dense:""},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),d("div",he,[t(p,{rotulo:"Complemento",modelValue:l.complemento,"onUpdate:modelValue":m=>l.complemento=m,onBlur:o.endereco.$touch,"class-campo":"q-pb-md",dense:""},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),d("div",be,[t(p,{rotulo:"Bairro",modelValue:l.bairro,"onUpdate:modelValue":m=>l.bairro=m,onBlur:o.endereco.$touch,"class-campo":"q-pb-sm",dense:""},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),d("div",ge,[t(U,{codigoPais:l.codigoPais,onSelecionar:m=>r.selecionarPais(m,h),required:""},null,8,["codigoPais","onSelecionar"])]),d("div",Ce,[t(b,{onClick:m=>r.enderecoRemover(h),icon:"delete",flat:"",round:"",dense:"",color:"tertiary",class:"q-mt-sm"},null,8,["onClick"])])]),_:2},1024)]))),128)),d("div",ve,[t(b,{color:"positive",icon:"add",label:"Endere\xE7o",outline:"",size:"sm",onClick:r.enderecoAdicionar},null,8,["onClick"])])]),d("div",Ve,[t(p,{rotulo:"Observa\xE7\xF5es",rows:"10",tipo:"textoArea",modelValue:o.contato.observacao,"onUpdate:modelValue":e[8]||(e[8]=l=>o.contato.observacao=l)},null,8,["modelValue"])])]),_:1})]),_:1}),t(To,{modelValue:o.tab,"onUpdate:modelValue":e[9]||(e[9]=l=>o.tab=l),class:"bg-transparent q-mt-lg text-primary",color:"transparent",align:"left"},{default:s(()=>[t(x,{label:"Dados Adicionais",name:"profile-tab-1"}),t(x,{label:"Dependentes / Empresa",name:"profile-tab-2"}),t(x,{label:"Consulta de cadastro",name:"profile-tab-3"}),t(x,{label:"Conduta",name:"profile-tab-4"}),t(x,{label:"Configura\xE7\xF5es comerciais",name:"profile-tab-5"}),t(x,{label:"Arquivos",name:"profile-arquivos"})]),_:1},8,["modelValue"]),t(yo,{modelValue:o.tab,"onUpdate:modelValue":e[43]||(e[43]=l=>o.tab=l),animated:""},{default:s(()=>[t(N,{class:"bg-white",name:"profile-tab-1"},{default:s(()=>[t(w,{class:"q-col-gutter-sm"},{default:s(()=>[d("div",Te,[t(p,{modelValue:o.contato.email,"onUpdate:modelValue":e[10]||(e[10]=l=>o.contato.email=l),before:[{icon:"alternate_email"}],rotulo:"E-mail",rules:[l=>r.validateEmail(l)||(l||"").length===0||"email inv\xE1lido"]},null,8,["modelValue","rules"])]),d("div",ye,[t(p,{modelValue:o.contato.site,"onUpdate:modelValue":e[11]||(e[11]=l=>o.contato.site=l),before:[{icon:"language"}],rotulo:"Site"},null,8,["modelValue"])]),d("div",_e,[t(eo,{modelValue:o.contato.segmento,"onUpdate:modelValue":e[12]||(e[12]=l=>o.contato.segmento=l),tabela:"contato",campo:"segmento",label:r.segmentoProfissao,buscarSemCaractere:!0,enableAdd:""},null,8,["modelValue","label"])]),r.ehEmpresa?(f(),v(q,{key:0},[d("div",we,[t(p,{tipo:"seletor",dense:"","rotulo-fixo":"Regime",options:o.regimes,modelValue:o.contato.regime,"onUpdate:modelValue":e[13]||(e[13]=l=>o.contato.regime=l)},null,8,["options","modelValue"])]),o.contato.regime==="Normal"?(f(),v("div",ke,[t(p,{modelValue:o.contato.tributacao,"onUpdate:modelValue":e[14]||(e[14]=l=>o.contato.tributacao=l),tipo:"seletor","rotulo-fixo":"Tributa\xE7\xE3o",opcoes:[{rotulo:"",valor:""},{rotulo:"Lucro real",valor:"1"},{rotulo:"Lucro presumido",valor:"2"}]},null,8,["modelValue"])])):y("",!0),d("div",Se,[t(p,{modelValue:o.contato.tributacaoSetor,"onUpdate:modelValue":e[15]||(e[15]=l=>o.contato.tributacaoSetor=l),opcoes:[{rotulo:"",valor:""},{rotulo:"Ind\xFAstria",valor:"1"},{rotulo:"Outros",valor:"99"}],"rotulo-fixo":"Setor tributa\xE7\xE3o",tipo:"seletor"},null,8,["modelValue"])]),d("div",qe,[t(p,{modelValue:o.contato.dataAbertura,"onUpdate:modelValue":e[16]||(e[16]=l=>o.contato.dataAbertura=l),rotulo:"Data de abertura",clearable:"",suffix:o.contato.dataAbertura?`${r.idade} anos`:"",max:Date.now(),tipo:"data"},null,8,["modelValue","suffix","max"])])],64)):(f(),v(q,{key:1},[d("div",Ee,[t(p,{tipo:"seletor","rotulo-fixo":"Sexo",options:o.sexos,modelValue:o.contato.sexo,"onUpdate:modelValue":e[17]||(e[17]=l=>o.contato.sexo=l)},null,8,["options","modelValue"])]),d("div",Ue,[t(p,{modelValue:o.contato.dataAbertura,"onUpdate:modelValue":e[18]||(e[18]=l=>o.contato.dataAbertura=l),rotulo:"Data de nascimento",clearable:"",suffix:o.contato.dataAbertura?`${r.idade} anos`:"",max:Date.now(),tipo:"data"},null,8,["modelValue","suffix","max"])])],64))]),_:1}),t(w,null,{default:s(()=>[d("div",Ae,[t(to,{modelValue:o.grupo,"onUpdate:modelValue":e[19]||(e[19]=l=>o.grupo=l),rotulo:"Grupos",dense:"",before:[{icon:"local_offer",handler(){r.grupoSelecionar_Click()}}]},null,8,["modelValue","before"])])]),_:1})]),_:1}),t(N,{class:"bg-white",name:"profile-tab-2"},{default:s(()=>[t(w,null,{default:s(()=>[t(E,{modelValue:o.filhoCampo,"onUpdate:modelValue":[e[20]||(e[20]=l=>o.filhoCampo=l),r.filhoAdicionar],"use-input":"","input-debounce":"500",label:"Dependentes",options:o.opcoesDependentes,outlined:"",onFilter:r.filhosBuscar},{append:s(()=>[t(b,{color:"tertiary",size:"lg",icon:"person_add",dense:"",flat:"",round:"",onClick:r.dependenteCriar},{default:s(()=>[t(D,null,{default:s(()=>e[48]||(e[48]=[_("Criar contato")])),_:1})]),_:1},8,["onClick"])]),_:1},8,["modelValue","options","onFilter","onUpdate:modelValue"])]),_:1}),d("div",Pe,[(f(!0),v(q,null,P(o.filhos.filter(l=>l.idContato===o.contato.id),l=>(f(),v(q,{key:l.id},[t(w,{class:"q-col-gutter-x-md items-center"},{default:s(()=>[d("div",De,[t(u,{imagem:(o.filhosId[l.idContatoRelacionado]||{}).imagem,rotulo:(o.filhosId[l.idContatoRelacionado]||{}).apelido},null,8,["imagem","rotulo"])]),d("div",xe,[d("p",Ne,k((o.filhosId[l.idContatoRelacionado]||{}).apelido),1),d("p",Fe,k((o.filhosId[l.idContatoRelacionado]||{}).nome),1),d("p",Oe,k((o.filhosId[l.idContatoRelacionado]||{}).numeroDocumentoNacional||""),1),d("span",Re,[t(p,{modelValue:l.observacao,"onUpdate:modelValue":h=>l.observacao=h,rotulo:"Observacao"},null,8,["modelValue","onUpdate:modelValue"])]),d("span",Le,[t(O,{modelValue:l.socio,"onUpdate:modelValue":h=>l.socio=h,val:!0,label:"S\xF3cio",class:"q-pl-none"},null,8,["modelValue","onUpdate:modelValue"]),t(O,{modelValue:l.cobranca,"onUpdate:modelValue":h=>l.cobranca=h,val:!0,label:"Cobran\xE7a",class:"q-pl-none"},null,8,["modelValue","onUpdate:modelValue"])])]),d("div",Ie,[t(p,{modelValue:l.observacao,"onUpdate:modelValue":h=>l.observacao=h,rotulo:"Observacao",autogrow:"",filled:""},null,8,["modelValue","onUpdate:modelValue"])]),d("div",je,[t(O,{modelValue:l.socio,"onUpdate:modelValue":h=>l.socio=h,val:!0,label:"S\xF3cio"},null,8,["modelValue","onUpdate:modelValue"]),t(O,{modelValue:l.cobranca,"onUpdate:modelValue":h=>l.cobranca=h,val:!0,label:"Cobran\xE7a"},null,8,["modelValue","onUpdate:modelValue"])]),d("div",ze,[t(w,{class:"justify-end"},{default:s(()=>[!o.somenteCarteira||o.somenteCarteira&&o.contatoUsuario.id&&(o.filhosId[l.idContatoRelacionado]||{}).idContatoVendedor===o.contatoUsuario.id?(f(),C(b,{key:0,to:{name:"AtendimentoContato",params:{id:l.idContatoRelacionado}},icon:"edit",flat:"",round:"",dense:"",color:"tertiary",class:"q-mr-sm"},{default:s(()=>[t(D,null,{default:s(()=>e[49]||(e[49]=[_("Editar contato")])),_:1})]),_:2},1032,["to"])):y("",!0),t(b,{onClick:h=>r.filhoRemover(l),icon:"delete",flat:"",round:"",dense:"",color:"tertiary",class:"q-mr-sm"},{default:s(()=>[t(D,null,{default:s(()=>e[50]||(e[50]=[_("Remover")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024),t(_o)],64))),128))])]),_:1}),t(N,{class:"bg-white",name:"profile-tab-3"},{default:s(()=>[t(w,{class:"q-col-gutter-sm"},{default:s(()=>[d("div",Be,[t(p,{rotulo:"Descri\xE7\xE3o",modelValue:o.consultaDescricao,"onUpdate:modelValue":e[21]||(e[21]=l=>o.consultaDescricao=l),modelModifiers:{trim:!0}},null,8,["modelValue"])]),d("div",Me,[t(b,{color:"positive",icon:"add",label:"Consulta",outline:"",size:"sm",onClick:r.consultaAdicionar},null,8,["onClick"])])]),_:1}),(f(!0),v(q,null,P(o.consulta,(l,h)=>(f(),C(I,{class:"animate-pop q-mt-md shadow-1",key:h},{default:s(()=>[t(W,null,{default:s(()=>[d("div",null,k(l.descricao),1),d("span",null,[e[51]||(e[51]=_("Consulta realizada em ")),d("strong",null,k(a.$filters.dataHora(l.dataConsulta)),1)])]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(N,{modelValue:o.tab,"onUpdate:modelValue":e[24]||(e[24]=l=>o.tab=l),class:"bg-white",name:"profile-tab-4"},{default:s(()=>[t(w,{class:"q-col-gutter-sm q-pb-sm"},{default:s(()=>[d("div",Qe,[t(p,{rows:"3",rotulo:"Observa\xE7\xF5es",tipo:"textoArea",modelValue:o.contato.condutaObservacao,"onUpdate:modelValue":e[22]||(e[22]=l=>o.contato.condutaObservacao=l),"class-campo":"q-mb-sm",ajuda:"Este conte\xFAdo ser\xE1 exibido sempre que um documento for criado para este contato."},null,8,["modelValue"])]),d("div",He,[t(p,{rows:"3",rotulo:"Restri\xE7\xE3o",tipo:"textoArea",modelValue:o.contato.condutaRestricao,"onUpdate:modelValue":e[23]||(e[23]=l=>o.contato.condutaRestricao=l),"class-campo":"q-mb-sm",somenteLeitura:!o.permissoes.editarCondutaRestricao,ajuda:"Ao preencher este campo, o contato n\xE3o poder\xE1 comprar e o operador visualizar\xE1 esta mensagem."},null,8,["modelValue","somenteLeitura"])])]),_:1})]),_:1},8,["modelValue"]),t(N,{modelValue:o.tab,"onUpdate:modelValue":e[41]||(e[41]=l=>o.tab=l),class:"bg-white",name:"profile-tab-5"},{default:s(()=>[d("div",Je,[t(E,{dense:"",rounded:"",modelValue:o.descricaoVendedor,"onUpdate:modelValue":e[25]||(e[25]=l=>o.descricaoVendedor=l),label:"Vendedor",options:["a","b"],disable:o.podeAlterarVendedorAssistente,onFilter:r.btSelecionarVendedor_click,class:"col-12 col-sm-4"},{append:s(()=>[o.descricaoVendedor!==""?(f(),C(V,{key:0,name:"close",onClick:S(r.vendedorLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):y("",!0),t(V,{name:"search",onClick:S(r.btSelecionarVendedor_click,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","disable","onFilter"]),t(E,{dense:"",rounded:"",modelValue:o.descricaoAssistente,"onUpdate:modelValue":e[26]||(e[26]=l=>o.descricaoAssistente=l),label:"Assistente",options:["a","b"],disable:o.podeAlterarVendedorAssistente,onFilter:r.btSelecionarAssistente_click,class:"col-12 col-sm-4"},{append:s(()=>[o.descricaoAssistente!==""?(f(),C(V,{key:0,name:"close",onClick:S(r.assistenteLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):y("",!0),t(V,{name:"search",onClick:S(r.btSelecionarAssistente_click,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","disable","onFilter"]),t(E,{dense:"",rounded:"",modelValue:o.descricaoContatoLider,"onUpdate:modelValue":e[27]||(e[27]=l=>o.descricaoContatoLider=l),label:"Contato L\xEDder",options:["a","b"],onFilter:r.btSelecionarContatoLider_click,class:"col-12 col-sm-4"},{append:s(()=>[o.descricaoContatoLider!==""?(f(),C(V,{key:0,name:"close",onClick:S(r.contatoLiderLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):y("",!0),t(V,{name:"search",onClick:S(r.btSelecionarContatoLider_click,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onFilter"]),t(E,{dense:"",rounded:"",modelValue:o.descricaoEmpresaCarteira,"onUpdate:modelValue":e[28]||(e[28]=l=>o.descricaoEmpresaCarteira=l),label:"Empresa Carteira",options:["a","b"],onFilter:r.btSelecionarEmpresaCarteira_click,class:"col-12 col-sm-4"},{append:s(()=>[o.descricaoEmpresaCarteira!==""?(f(),C(V,{key:0,name:"close",onClick:S(r.empresaCarteiraLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):y("",!0),t(V,{name:"search",onClick:S(r.btSelecionarEmpresaCarteira_click,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onFilter"]),t(p,{class:"col-12 col-sm-4",modelValue:o.contato.origemMarketing,"onUpdate:modelValue":e[29]||(e[29]=l=>o.contato.origemMarketing=l),rotulo:"Origem Marketing"},null,8,["modelValue"]),t(p,{class:"col-12 col-sm-4",modelValue:o.contato.grupoEconomico,"onUpdate:modelValue":e[30]||(e[30]=l=>o.contato.grupoEconomico=l),rotulo:"Grupo Econ\xF4mico"},null,8,["modelValue"]),t(p,{class:"col-12 col-sm-4",modelValue:o.contato.rotaVendedor,"onUpdate:modelValue":e[31]||(e[31]=l=>o.contato.rotaVendedor=l),rotulo:"Rota Vendedor"},null,8,["modelValue"]),t(p,{class:"col-12 col-sm-4",modelValue:o.contato.rotaEntrega,"onUpdate:modelValue":e[32]||(e[32]=l=>o.contato.rotaEntrega=l),rotulo:"Rota Entrega"},null,8,["modelValue"]),t(E,{dense:"",rounded:"",modelValue:o.descricaoTransportadora,"onUpdate:modelValue":e[33]||(e[33]=l=>o.descricaoTransportadora=l),label:"Transportadora",options:["a","b"],onFilter:r.btSelecionarTransportadora_click,class:"col-12 col-sm-4"},{append:s(()=>[o.descricaoTransportadora!==""?(f(),C(V,{key:0,name:"close",onClick:S(r.transportadoraLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):y("",!0),t(V,{name:"search",onClick:S(r.btSelecionarTransportadora_click,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onFilter"]),t(E,{dense:"",rounded:"",modelValue:o.contato.idItemTabelaPreco,"onUpdate:modelValue":e[35]||(e[35]=l=>o.contato.idItemTabelaPreco=l),label:"Tabela de pre\xE7o",options:o.opcoesTabelaPreco,"option-value":"id","option-label":"descricao",onFilter:r.atualizarTabelaPreco,"emit-value":"","map-options":"",class:"col-12 col-sm-4"},wo({option:s(l=>[t(B,ko(So(l.itemProps)),{default:s(()=>[t(F,null,{default:s(()=>[t(A,{innerHTML:l.opt.descricao},null,8,["innerHTML"]),t(A,{caption:""},{default:s(()=>[e[52]||(e[52]=d("strong",null,"Empresa: ",-1)),_(k(l.opt.empresa),1)]),_:2},1024),l.opt.fatorPercentual?(f(),C(A,{key:0,caption:"",sublabel:""},{default:s(()=>[e[53]||(e[53]=d("strong",null,"Fator (%): ",-1)),_(k(a.$filters.numero(l.opt.fatorPercentual,2))+" %",1)]),_:2},1024)):y("",!0),t(A,{caption:""},{default:s(()=>[e[54]||(e[54]=d("strong",null,"Arredondamento: ",-1)),_(k(l.opt.arredondamento?"Sim":"N\xE3o"),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:2},[o.contato.idItemTabelaPreco?{name:"append",fn:s(()=>[t(V,{name:"close",onClick:e[34]||(e[34]=S(l=>{o.contato.idItemTabelaPreco="",o.contato.codigoItemTabelaPreco=""},["stop"])),class:"cursor-pointer"})]),key:"0"}:void 0]),1032,["modelValue","options","onFilter"]),t(E,{dense:"",rounded:"",modelValue:o.descricaoFormaPagamento,"onUpdate:modelValue":e[36]||(e[36]=l=>o.descricaoFormaPagamento=l),label:"Forma de pagamento",options:["a","b"],onFilter:r.btSelecionaFormaPagamento_click,class:"col-12 col-sm-4"},{append:s(()=>[o.descricaoFormaPagamento!==""?(f(),C(V,{key:0,name:"close",onClick:S(r.formaPagamentoLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):y("",!0),t(V,{name:"search",onClick:S(r.btSelecionaFormaPagamento_click,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onFilter"]),t(p,{class:"col-12 col-sm-4",modelValue:o.contato.limiteCredito,"onUpdate:modelValue":e[37]||(e[37]=l=>o.contato.limiteCredito=l),decimals:"2",rotulo:"Limite de cr\xE9dito",tipo:"decimal","somente-leitura":!o.permissoes.editarLimiteCredito},null,8,["modelValue","somente-leitura"]),d("div",Ge,[t(p,{rotulo:"E-mail NFe",modelValue:o.contato.emailNfe,"onUpdate:modelValue":e[38]||(e[38]=l=>o.contato.emailNfe=l)},null,8,["modelValue"])]),d("div",We,[t(p,{rotulo:"Observa\xE7\xF5es na NFe",modelValue:o.contato.observacaoNFE,"onUpdate:modelValue":e[39]||(e[39]=l=>o.contato.observacaoNFE=l)},null,8,["modelValue"])]),o.configuracoes.descontoCondicionado?(f(),C(p,{key:0,class:"col-12 col-sm-4",modelValue:o.contato.descontoCondicionadoPercentual,"onUpdate:modelValue":e[40]||(e[40]=l=>o.contato.descontoCondicionadoPercentual=l),decimals:"2",suffix:"%",rotulo:"Desconto Condicionado",tipo:"decimal"},null,8,["modelValue"])):y("",!0)])]),_:1},8,["modelValue"]),t(N,{modelValue:o.tab,"onUpdate:modelValue":e[42]||(e[42]=l=>o.tab=l),class:"bg-white",name:"profile-arquivos"},{default:s(()=>[d("div",Xe,[t(ao,{resize:{crop:!0,width:1e3,height:1e3},idTabelaMaster:o.contato.id,tipoArquivo:"contatoImagem",arquivo:o.arquivo},null,8,["idTabelaMaster","arquivo"])])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),d("div",Ke,[o.contato.dataCadastro?(f(),v("small",Ze,"Data do cadastro: "+k(a.$filters.dataHora(o.contato.dataCadastro)),1)):y("",!0),o.contato.dataAlteracao?(f(),v("small",Ye,"\xDAltima altera\xE7\xE3o: "+k(a.$filters.dataHora(o.contato.dataAlteracao)),1)):y("",!0)]),t(qo,{class:"bg-light no-shadow q-pa-sm text-right u-bordaCima"},{default:s(()=>[d("div",$e,[o.contato.ativo?(f(),v(q,{key:0},[t(b,{color:"tertiary",flat:"",label:"Cancelar",onClick:r.aoCancelar},null,8,["onClick"]),t(b,{class:"q-ml-sm no-shadow",color:"primary",unelevated:"",label:"Salvar",type:"submit"}),t(b,{color:"tertiary",flat:"",icon:"delete",round:"",onClick:r.contatoRemover},{default:s(()=>[t(D,null,{default:s(()=>e[55]||(e[55]=[_("Remover")])),_:1})]),_:1},8,["onClick"])],64)):(f(),v("div",ot,[e[56]||(e[56]=d("span",{class:"text-tertiary"},"N\xE3o \xE9 poss\xEDvel editar informa\xE7\xF5es de um contato exclu\xEDdo.",-1)),t(b,{class:"q-ml-sm text-white",unelevated:"",color:"primary",onClick:r.restaurarContato,label:"Restaurar contato"},null,8,["onClick"])]))])]),_:1})]),_:1},8,["onSubmit"]),t(lo,{ref:"promptCriarDependente","cpf-cnpj":"","data-nascimento":"",observacao:""},null,512),t(ro,{ref:"modalRedesSociais"},null,512),t(io,{ref:"modalTrocarFoto"},null,512),t(no,{ref:"consultaCNPJ",contato:o.contato,endereco:o.endereco},null,8,["contato","endereco"]),t(so,{ref:"PromptGrupoUnico"},null,512)],64)}var it=Q(Wo,[["render",et]]);export{it as default};
