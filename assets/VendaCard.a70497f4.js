import{_ as we,b9 as xe,r as B,o as i,p as w,F,d as u,w as e,f as t,C as b,h as qe,i as Ve,U as g,k as n,t as m,cL as Y,j as k,H as z,cM as ke,e as f,m as T,l as J,P as X,x as A,S as _,T as l,Q as P,be as Z,N as O,A as Fe,bI as De,b3 as ye}from"./index.2cdc9160.js";import{e as Ee}from"./emitirNFe.35117289.js";import{D as Ie}from"./DocumentosFiscais.e07dd091.js";import{M as ze}from"./ModalHistoricoStatus.58278941.js";const He={components:{DocumentosFiscais:Ie,ModalHistoricoStatus:ze,VendaModal:xe},computed:{config(){return $db.configuracoes.valores},podeMigrarFatura(){return!~["Aguardando Estoque","Aguardando Financeiro","Aguardando Aprova\xE7\xE3o","Aguardando Pagamento","Cancelado","N\xE3o Aprovado","Or\xE7amento","Faturado"].indexOf(this.dados.venda.status)}},data(){return{dbUsuario:$db.usuario,width:0,dados:{venda:{}},fatura:{},status:{"Aguardando Confer\xEAncia":"orange","Aguardando Embalagem":"orange","Aguardando Entrega":"orange","Aguardando Libera\xE7\xE3o":"orange","Aguardando Separa\xE7\xE3o":"orange","Aguardando Estoque":"orange","Aguardando Financeiro":"orange","Aguardando Aprova\xE7\xE3o":"orange","Aguardando Pagamento":"tertiary","Aguardando Faturamento":"tertiary","Em Confer\xEAncia":"orange","Em Separa\xE7\xE3o":"orange",Faturado:"positive",Entregue:"positive",Cancelado:"red","N\xE3o Aprovado":"amber",Or\u00E7amento:"orange"},contatos:{},faturasAbertas:[],detalhesVisivel:!1,visibilidade:{botao:{editar:!1,remover:!1}},modalDevolucaoGarantia:{visivel:!1,item:{},orcamento:{}},sistemaPai:"",configImpressaoOrcamento:[],configImpressosWhatsapp:[],documentoItemKit:{},quantidadeProdutos:0}},emits:["executar","carregou","verificarListaLayout"],mixins:[Ee],props:{id:{type:String,required:!0},dadosVenda:{type:Object,required:!1},vendasCompletas:{type:Object,required:!1},resetarEnvio:{type:Function,required:!1},layout:{type:String,default:"card"}},methods:{async duplicarVenda(){try{await new Promise((d,o)=>{this.$q.dialog({message:"Duplicar este pedido?",cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(()=>{d()}).onCancel(()=>{o()})})}catch{return}try{const d=await $db.venda.duplicarVenda(this.id);this.$refs.vendaModal.mostrar({id:d}),this.$q.notify({type:"positive",message:"Pedido duplicado"})}catch(d){let o="N\xE3o foi poss\xEDvel realizar a opera\xE7\xE3o";/^GError:.+/.test(d.message)&&(o=d.message.slice(7)),this.$q.notify({type:"negative",message:o}),console.error(d)}},irParaAtendimentoFatura(d){this.$router.push({name:"AtendimentoFatura",params:{id:d}})},async migrarFatura(d){try{await new Promise((o,C)=>{this.$q.dialog({message:"Esta a\xE7\xE3o ir\xE1 migrar esta venda para outra fatura.",noRefocus:!0,preventClose:!0,title:"Tem certeza?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(()=>{o()}).onCancel(()=>{C()})})}catch{return}d||(d=$db.fatura.criar(this.dados.venda),await $db.fatura.grava({fatura:d})),d.id?(await $db.documento.grava({atual:{id:this.dados.venda.id,idFatura:d.id},original:{id:this.dados.venda.id}}),localStorage.setItem("idFatura",d.id),this.dados.venda.idContato&&(this.$emit("executar","atualizar"),this.irParaAtendimentoFatura(this.dados.venda.idContato))):this.$q.notify("N\xE3o foi poss\xEDvel realizar a opera\xE7\xE3o")},alternarDetalhes(d){this.detalhesVisivel=!this.detalhesVisivel,this.layout==="lista"&&this.$emit("verificarListaLayout",{id:d,acao:"detalhes",estado:this.detalhesVisivel})},async atualizar(){var C;const d=await $db.venda.leCompleto(this.id);d.carrinho.sort((c,a)=>new Date(c.dataHoraEmissao)<new Date(a.dataHoraEmissao)?-1:1),d.oss.sort((c,a)=>new Date(c.documento.dataHoraEmissao)<new Date(a.documento.dataHoraEmissao)?-1:1),d.customs.sort((c,a)=>new Date(c.documento.dataHoraEmissao)<new Date(a.documento.dataHoraEmissao)?-1:1),d.kits.sort((c,a)=>new Date(c.documento.dataHoraEmissao)<new Date(a.documento.dataHoraEmissao)?-1:1),(C=d.venda)!=null&&C.idFatura&&(this.fatura=await $db.hibrido.le({table:"documento",id:d.venda.idFatura}));for(const c of d.kits){const a=c.documentosItem.find(v=>v.operacaoFator===-1&&v.operacao!=="Manipula\xE7\xE3o");this.documentoItemKit[c.documento.id]=a}if((d.venda||{}).idContato&&(d.venda||{}).idEmpresa){let c=[];c=await $db.fatura.obterAbertas(d.venda.idContato,d.venda.idEmpresa),this.faturasAbertas=c.sort((a,v)=>!a.numero||a.numero<v.numero?-1:1)}const o={};if(d.venda.idContato){const c=d.venda.idContato;o[c]||(o[c]=await $db.contato.le({id:c}))}if(d.venda.idContatoVendedor){const c=d.venda.idContatoVendedor;o[c]||(o[c]=await $db.contato.le({id:c}))}this.configuraImpressaoOrcamento(d.venda.idEmpresa),this.configuraImpressosWhatsapp(d.venda),this.contatos=o,this.dados=d,await this.$nextTick(),d.venda.id===localStorage.getItem("idVenda")&&(this.$refs.vendaModal.mostrar({id:d.venda.id}),localStorage.removeItem("idVenda"))},async atualizarComDados(){var o,C,c,a;const d=await $db.venda.preparaDados(this.dadosVenda);d.carrinho.sort((v,D)=>new Date(v.dataHoraEmissao)<new Date(D.dataHoraEmissao)?-1:1),d.oss.sort((v,D)=>new Date(v.documento.dataHoraEmissao)<new Date(D.documento.dataHoraEmissao)?-1:1),d.customs.sort((v,D)=>new Date(v.documento.dataHoraEmissao)<new Date(D.documento.dataHoraEmissao)?-1:1),d.kits.sort((v,D)=>new Date(v.documento.dataHoraEmissao)<new Date(D.documento.dataHoraEmissao)?-1:1),(o=d.venda)!=null&&o.idFatura&&(this.fatura=await $db.hibrido.le({table:"documento",id:d.venda.idFatura}));for(const v of d.kits){const D=v.documentosItem.find(U=>U.operacaoFator===-1&&U.operacao!=="Manipula\xE7\xE3o");this.documentoItemKit[v.documento.id]=D}this.faturasAbertas=((c=(C=this.vendasCompletas)==null?void 0:C.faturasAbertas)==null?void 0:c.filter(v=>v.idEmpresa===d.venda.idEmpresa))||[],this.configuraImpressaoOrcamento(d.venda.idEmpresa),this.configuraImpressosWhatsapp(d.venda),this.contatos=((a=this.vendasCompletas)==null?void 0:a.dadosContatos)||{},this.dados=d,await this.$nextTick(),d.venda.id===localStorage.getItem("idVenda")&&(this.$refs.vendaModal.mostrar({id:d.venda.id}),localStorage.removeItem("idVenda"))},async configuraImpressaoOrcamento(d){const o=await $db.configuracoes.porNome("impressao.venda",d),C=[{valor:"invoice",texto:"Or\xE7amento/Venda (Invoice)"}];this.sistemaPai==="optisoul"&&C.push({valor:"orcamento",texto:"Or\xE7amento (Antigo)"},{valor:"termoGarantia",texto:"Termo de Garantia"}),this.configImpressaoOrcamento=[...o.length?o.map(c=>({texto:"Imprimir Or\xE7amento",...c})):C]},async configuraImpressosWhatsapp(d){const o=await $db.configuracoes.le({prefixoNome:"venda.whatsapp.enviar.",idEmpresa:d.idEmpresa});this.configImpressosWhatsapp=o.map(C=>({...C,idVenda:d.id}))},async dialogEnviar(d){var o,C;try{const c=await $db.hibrido.le({table:"documento",id:d.idVenda});$utils.verificarErro(!(c!=null&&c.id),"Erro ao obter dados");const a=await $db.contato.leCompleto(c.idContato),v=(((o=a==null?void 0:a.telefone)==null?void 0:o.find(D=>D.tipoTelefone==="WhatsApp"))||((C=a==null?void 0:a.telefone)==null?void 0:C.find(D=>D.tipoTelefone==="Principal"))||(a==null?void 0:a.telefone[0])||{}).telefone.trim()||"";$q.dialog({title:"Enviar impresso pelo Whatsapp?",preventClose:!0,prompt:{label:"Enviar para este n\xFAmero:",model:v||"",hint:"Ou adicione um novo n\xFAmero, ex: 19988776655",isValid:D=>D.length>0,type:"text"},cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(async D=>{var le;c.telefoneContato=D.replace(/\D/g,"");const U=await $db.venda.enviaImpressaoPdfwhatsapp({documento:c,nomeImpresso:d.nome.replace("venda.whatsapp.enviar.",""),mensagem:(le=d.texto)!=null?le:`Voc\xEA est\xE1 recebendo o ${d.valor} da empresa ${c.descricaoEmpresa} (${c.numeroDocumentoEmpresa}).`})})}catch{$q.notifyError("Erro ao enviar.",erro)}},copiarUid(){const d=this.$refs.uid;d.type="text";try{d.select(),document.execCommand("copy"),this.$q.notify({message:"UID copiado para a \xE1rea de transfer\xEAncia.",type:"info"})}catch{this.$q.notify("Erro ao copiar.")}d.type="hidden",window.getSelection().removeAllRanges()},async devolucaoGarantia(d){let o=await $db.hibrido.lista({table:"documento",where:{idContato:$db.contato.selecionado.id,tipo:"Venda",status:"Or\xE7amento"}});if(o=$lodash.orderBy(o,"dataHoraEmissao","desc"),!o.length){this.$q.notify({message:"Crie um or\xE7amento para inclus\xE3o de devolu\xE7\xE3o/garantia.",type:"info"});return}this.modalDevolucaoGarantia={visivel:!0,item:d,orcamento:o[0]}},editar(){this.$refs.vendaModal.mostrar({id:this.dados.venda.id})},executar(d){switch(d){case"atualizar":this.atualizar();break;case"cancelar":case"finalizar":case"reprovar":this.$emit("executar","atualizar");break;case"retornarOrcamento":this.$emit("executar",d);break}},async finalizaDevolucaoGarantia(d,o,C){const c=$utils.clonar(d);o==="devolucao"&&(c.operacao="Devolu\xE7\xE3o de Venda"),o==="garantia"&&(c.operacao="Garantia de Venda",c.motivo=C),c.idDocumentoItemVenda=c.id,c.idDocumentoVenda=c.idDocumento,c.id=$utils.uuid(),c.idDocumento=this.modalDevolucaoGarantia.orcamento.id,c.status="Or\xE7amento",c.operacaoFator=1,c.codigoCfop=20,c.idCfop=(await $db.cfop.le({codigoCfop:20}))[0].id,c.dataHoraEmissao=$utils.dataAtual(),c.dataHoraFinalizado="",c.subTotal=c.subTotal*-1,c.total=c.total*-1,c.valorItem=c.valorItem*-1,c.descontoSubTotal=0,delete c.codigoCfop,delete c.codigoDocumento,delete c.codigoDocumentoItem,delete c.codigoItem,delete c.codigoPlanoContaDestino,delete c.codigoPlanoContaEstoque,await $db.documentoItem.grava({atual:c}),this.$q.notify({message:"Item adicionado ao or\xE7amento.",type:"positive"}),localStorage.setItem("idVenda",this.modalDevolucaoGarantia.orcamento.id),this.$emit("executar","atualizar")},async remover(){this.$q.dialog({message:"Esta a\xE7\xE3o ir\xE1 remover esta venda da fatura",title:"Tem certeza?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(async()=>{try{await $db.venda.checarConflitoStatus({id:this.dados.venda.id,status:this.dados.venda.status})}catch(d){return $q.notifyError(d.message),!1}await $db.documento.grava({atual:{id:this.dados.venda.id,idFatura:""},original:{id:this.dados.venda.id}}),this.$emit("executar","remover")})},onResize(){this.width=window.innerWidth}},watch:{async dados(d){var C;this.visibilidade.botao.editar=!1,this.visibilidade.botao.visualizar=!1,this.visibilidade.botao.remover=!1;let o=(C=this.vendasCompletas)==null?void 0:C.contatosEmpresa;if(!o){const a=(await $db.hibrido.lista({table:"empresa",columns:["idContato"],whereFilter:{ativo:!0}})).map(({idContato:v})=>v);o=await $db.hibrido.lista({table:"contato",columns:["id"],whereIn:{id:a},whereFilter:{ativo:!0}})}!o.find(c=>c.id===d.venda.idEmpresa)||(d.venda.idFatura&&this.faturasAbertas.find(c=>c.id===d.venda.idFatura)&&(this.visibilidade.botao.remover=await $db.permissao.objeto("Diretiva_Vendas_RemoverVendaFatura")),!~["Cancelado","N\xE3o Aprovado"].indexOf(d.venda.status)&&!d.venda.idFatura&&(this.visibilidade.botao.editar=!0),this.visibilidade.botao.editar||(this.visibilidade.botao.visualizar=!0))}},async mounted(){var d,o,C,c,a,v,D,U;this.sistemaPai=$utils.sistemaPai(),this.dadosVenda&&this.vendasCompletas?await this.atualizarComDados():await this.atualizar(),this.quantidadeProdutos=(((o=(d=this.dados)==null?void 0:d.carrinho)==null?void 0:o.length)||0)+(((c=(C=this.dados)==null?void 0:C.customs)==null?void 0:c.length)||0)+(((v=(a=this.dados)==null?void 0:a.oss)==null?void 0:v.length)||0)+(((U=(D=this.dados)==null?void 0:D.kits)==null?void 0:U.length)||0)||0,this.$emit("carregou")}},Se={id:"VendaCard"},Oe={class:"col-12 col-md-6 q-pl-none"},Ae={class:"q-item-section"},Ne={class:"col-6 col-md hideonmobile"},Me={class:"text-left q-my-none"},Pe={class:"col-4 col-md hideonmobile"},Te={class:"text-left q-my-none"},Re={class:"col-4 col-md hideonmobile"},Qe={class:"text-left q-my-none"},We={class:"col-6 col-md hideonmobile"},Ge={class:"text-right text-h5 text-positive text-weight-bold q-my-none"},Ue={class:"text-right text-weight-normal text-tertiary text-body2 q-my-none"},Be={class:"col-12 hideondesktop"},Ke={class:"text-left q-my-none"},Le={class:"col-12 col-md-6"},je={class:"col-12 col-md-6 full-height items-end hideonmobile"},Je={class:"col-6"},Xe={class:"text-left q-my-none"},Ye={class:"text-left q-my-none"},Ze={class:"col-6"},$e={class:"text-right text-weight-normal text-tertiary text-body2 q-my-none"},ea={class:"text-right text-h5 text-positive text-weight-bold q-my-none"},aa={class:"col-12 full-height items-end"},ta={class:"col-12 col-md-6"},oa={class:"text-subtitle1 text-weight-bold q-ma-none items-center"},da={class:"q-ma-none"},ia={key:0},na={class:"col-6 col-md-4"},la={class:"q-ma-none"},sa={class:"col-6 col-md-2 text-right"},ra={class:"q-ma-none"},ua={class:"mw80 text-center"},ma={key:0},ca={key:1},fa={style:{"margin-left":"14px"}},va={style:{"margin-left":"14px"}},pa={class:"float-right text-weight-medium text-right q-ml-sm",style:{"min-width":"70px"}};function ba(d,o,C,c,a,v){var re,ue,me,ce,fe,ve,pe,be;const D=B("avatar"),U=B("row"),le=B("documentos-fiscais"),se=B("BadgeCopiarUid"),$=B("badge"),S=B("g-label"),M=B("g-col"),K=B("g-row"),_e=B("DocumentosFiscais"),he=B("VendaModal"),Ce=B("ModalHistoricoStatus");return i(),w("div",Se,[C.layout==="card"?(i(),w(F,{key:0},[a.dados.venda.id?(i(),u(Fe,{key:0,class:"extratoItem bg-white q-pa-sm no-shadow"},{default:e(()=>[t(U,{class:"items-center justify-between q-mx-none q-px-none q-mb-sm"},{default:e(()=>{var s;return[b("div",Oe,[t(qe,{class:"q-pa-none"},{default:e(()=>{var r;return[t(D,{imagem:(r=a.contatos[a.dados.venda.idContato])==null?void 0:r.imagem,rotulo:a.dados.venda.descricaoContato,tamanho:"40",style:{float:"left"}},null,8,["imagem","rotulo"]),t(Ve,null,{default:e(()=>[b("div",Ae,[t(g,null,{default:e(()=>{var y;return[n(m((y=a.contatos[a.dados.venda.idContato])==null?void 0:y.apelido),1)]}),_:1}),t(g,{caption:""},{default:e(()=>{var y;return[n(m((y=a.contatos[a.dados.venda.idContato])==null?void 0:y.nome),1)]}),_:1})])]),_:1}),t(Y,{rounded:"",color:"tertiary",small:""},{default:e(()=>[n(m(a.dados.venda.status),1)]),_:1}),t(Y,{class:"q-ml-sm",color:"positive",escuro:"",onClick:v.copiarUid},{default:e(()=>[n(" #"+m(parseInt(a.dados.venda.numero)||(a.dados.venda.id||"").slice(-6))+" ",1),t(k,{class:"q-ml-sm",name:"shopping_cart"}),z(b("input",{type:"hidden","onUpdate:modelValue":o[0]||(o[0]=y=>a.dados.venda.id=y),ref:"uid"},null,512),[[ke,a.dados.venda.id]])]),_:1},8,["onClick"])]}),_:1})]),b("div",Ne,[b("p",Me,[a.contatos[a.dados.venda.idContatoVendedor]?(i(),u(k,{key:0,name:"mdi-account-tie"})):f("",!0),n(" "+m((s=a.contatos[a.dados.venda.idContatoVendedor])==null?void 0:s.apelido)+" ",1),t(T,null,{default:e(()=>o[25]||(o[25]=[n(" Vendedor(a) ")])),_:1})])]),b("div",Pe,[b("p",Te,[a.dados.venda.dataHoraEmissao?(i(),u(k,{key:0,name:"mdi-calendar-today "})):f("",!0),n(" "+m(d.$filters.data(a.dados.venda.dataHoraEmissao))+" ",1),t(T,null,{default:e(()=>o[26]||(o[26]=[n(" Emiss\xE3o ")])),_:1})])]),b("div",Re,[b("p",Qe,[a.dados.venda.dataHoraFinalizado?(i(),u(k,{key:0,name:"mdi-calendar-check"})):f("",!0),n(" "+m(d.$filters.data(a.dados.venda.dataHoraFinalizado))+" ",1),a.dados.venda.dataHoraFinalizado?(i(),u(T,{key:1},{default:e(()=>o[27]||(o[27]=[n(" Finalizado ")])),_:1})):f("",!0)])]),b("div",We,[b("p",Ge,m(d.$filters.numero(a.dados.venda.totalDocumento,2)),1),b("p",Ue,m(d.$filters.numero(a.dados.venda.subTotal,2)),1)])]}),_:1}),t(J,{class:"hideondesktop q-mb-sm"}),t(U,{class:"q-mx-none q-px-none items-center"},{default:e(()=>{var s;return[b("div",Be,[b("p",Ke,[a.contatos[a.dados.venda.idContatoVendedor]?(i(),u(k,{key:0,name:"mdi-account-tie"})):f("",!0),n(" "+m((s=a.contatos[a.dados.venda.idContatoVendedor])==null?void 0:s.apelido)+" ",1),t(T,null,{default:e(()=>o[28]||(o[28]=[n(" Vendedor(a) ")])),_:1})])]),b("div",Le,[t(X,{class:"no-border text-tertiary"},{default:e(()=>[(i(!0),w(F,null,A(a.dados.carrinho,r=>(i(),u(_,{key:r.id,class:"q-pa-none q-mb-xs",style:{"min-height":"auto"}},{default:e(()=>[t(l,{avatar:"",class:"mw80"},{default:e(()=>[t(g,null,{default:e(()=>[n(m(r.quantidade)+"x",1)]),_:2},1024)]),_:2},1024),t(l,null,{default:e(()=>[t(g,null,{default:e(()=>[n(m(r.descricaoItem),1)]),_:2},1024)]),_:2},1024),t(l,{side:"",top:""},{default:e(()=>[t(g,null,{default:e(()=>[n(m(d.$filters.numero(r.total,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),(i(!0),w(F,null,A(a.dados.customs,r=>(i(),u(_,{key:r.documento.id,class:"q-pa-none q-mb-xs",style:{"min-height":"auto"}},{default:e(()=>[t(l,{avatar:"",class:"mw80"},{default:e(()=>[t(g,null,{default:e(()=>[n(m(r.documento.numero)+"x ",1)]),_:2},1024)]),_:2},1024),t(l,null,{default:e(()=>[t(g,null,{default:e(()=>[n(m(r.documento.descricao),1)]),_:2},1024)]),_:2},1024),t(l,{side:"",top:""},{default:e(()=>[t(g,null,{default:e(()=>[n(m(d.$filters.numero(r.documento.totalDocumento,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),(i(!0),w(F,null,A(a.dados.oss,r=>(i(),u(_,{key:r.documento.id,class:"q-pa-none q-mb-xs",style:{"min-height":"auto"}},{default:e(()=>[t(l,{avatar:"",class:"mw80"},{default:e(()=>[t(g,null,{default:e(()=>[o[29]||(o[29]=n(" OS ")),t(Y,{color:"tertiary",small:""},{default:e(()=>[n("#"+m(r.documento.numero),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),t(l,null,{default:e(()=>[t(g,null,{default:e(()=>[n(m(r.documento.descricao),1)]),_:2},1024)]),_:2},1024),t(l,{avatar:"",class:"mw50"},{default:e(()=>[r.documento.status!=="Or\xE7amento"?(i(),u(Y,{key:0,rounded:"",color:"tertiary",small:""},{default:e(()=>[n(m(r.documento.status),1)]),_:2},1024)):f("",!0)]),_:2},1024),t(l,{right:"",top:""},{default:e(()=>[t(g,null,{default:e(()=>[n(m(d.$filters.numero(r.documento.totalDocumento,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),(i(!0),w(F,null,A(a.dados.kits,r=>(i(),u(_,{key:r.documento.id,class:"q-pa-none q-mb-xs",style:{"min-height":"auto"}},{default:e(()=>[t(l,{avatar:"",class:"mw80"},{default:e(()=>[t(g,null,{default:e(()=>[n(m(d.$filters.numero(a.documentoItemKit[r.documento.id].quantidade,4))+"x",1)]),_:2},1024)]),_:2},1024),t(l,null,{default:e(()=>[t(g,null,{default:e(()=>[n(m(a.documentoItemKit[r.documento.id].descricaoItem),1)]),_:2},1024)]),_:2},1024),t(l,{side:"",top:""},{default:e(()=>[t(g,null,{default:e(()=>[n(m(d.$filters.numero(a.documentoItemKit[r.documento.id].total,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),b("div",je,[t(J,{class:"hideondesktop q-mb-sm q-mt-xs"}),t(P,{rounded:"",dense:"",flat:"",icon:"more_vert",color:"tertiary",class:"no-shadow q-mx-xs",size:"md",style:{float:"right"}},{default:e(()=>[t(Z,null,{default:e(()=>[z((i(),u(X,{link:"",separator:""},{default:e(()=>[d.$utils.mapearStatus(a.dados.venda).permiteNota?(i(),w(F,{key:0},[z((i(),u(_,{clickable:"",onClick:o[1]||(o[1]=r=>d.emitirNFeV2({idVenda:a.dados.venda.id},1,"Venda"))},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"account_balance"})]),_:1}),t(l,null,{default:e(()=>o[30]||(o[30]=[n("NFe de Sa\xEDda/Venda")])),_:1})]),_:1})),[[O]]),z((i(),u(_,{clickable:"",onClick:o[2]||(o[2]=r=>d.emitirNFeV2({idVenda:a.dados.venda.id},0,"Devolu\xE7\xE3o"))},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"account_balance"})]),_:1}),t(l,null,{default:e(()=>o[31]||(o[31]=[n("NFe de Entrada/Devolu\xE7\xE3o")])),_:1})]),_:1})),[[O]]),z((i(),u(_,{clickable:"",onClick:o[3]||(o[3]=r=>d.emitirNFeV2({idVenda:a.dados.venda.id},1,"Remessa"))},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"account_balance"})]),_:1}),t(l,null,{default:e(()=>o[32]||(o[32]=[n("NFe de Remessa")])),_:1})]),_:1})),[[O]])],64)):f("",!0),v.podeMigrarFatura?(i(),w(F,{key:1},[(i(!0),w(F,null,A(a.faturasAbertas.filter(r=>r.id!==a.dados.venda.idFatura),r=>z((i(),u(_,{clickable:"",key:r.id,onClick:y=>v.migrarFatura(r)},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"mdi-folder-move"})]),_:1}),t(l,null,{default:e(()=>[n(m("Migrar para fatura #"+(r.numero||r.id.slice(-6))),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[O]])),128)),z((i(),u(_,{clickable:"",onClick:o[4]||(o[4]=r=>v.migrarFatura())},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"mdi-folder-move"})]),_:1}),t(l,null,{default:e(()=>o[33]||(o[33]=[n("Migrar para nova fatura")])),_:1})]),_:1})),[[O]])],64)):f("",!0),t(_,{clickable:"",onClick:o[5]||(o[5]=r=>d.$refs.modalHistoricoStatus.mostrar({idDocumento:a.dados.venda.id}))},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"history"})]),_:1}),t(l,null,{default:e(()=>o[34]||(o[34]=[n("Hist\xF3rico do Status")])),_:1})]),_:1}),t(_,{clickable:"",onClick:v.duplicarVenda},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"mdi-content-duplicate"})]),_:1}),t(l,null,{default:e(()=>o[35]||(o[35]=[n("Duplicar Pedido")])),_:1})]),_:1},8,["onClick"]),(i(!0),w(F,null,A(a.configImpressosWhatsapp.filter(r=>r.valor),r=>(i(),u(_,{clickable:"",key:r.valor,onClick:y=>v.dialogEnviar(r)},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"mdi-whatsapp"})]),_:1}),t(l,null,{default:e(()=>[n(m(r.valor),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),C.resetarEnvio&&a.dados.venda.rotaJson&&a.dados.venda.rotaJson.length>0?(i(),u(_,{key:2,clickable:"",onClick:o[6]||(o[6]=r=>C.resetarEnvio(a.dados.venda))},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"restart_alt"})]),_:1}),t(l,null,{default:e(()=>o[36]||(o[36]=[n("Resetar Envio")])),_:1})]),_:1})):f("",!0)]),_:1})),[[O]])]),_:1})]),_:1}),a.visibilidade.botao.remover?(i(),u(P,{key:0,rounded:"",dense:"",flat:"",icon:"clear",color:"tertiary",class:"no-shadow q-mx-xs",size:"md",onClick:v.remover,style:{float:"right"}},null,8,["onClick"])):f("",!0),a.visibilidade.botao.editar?(i(),u(P,{key:1,rounded:"",dense:"",flat:"",icon:"edit",color:"primary",class:"no-shadow q-mx-xs",size:"md",onClick:v.editar,style:{float:"right"}},null,8,["onClick"])):f("",!0),a.visibilidade.botao.visualizar?(i(),u(P,{key:2,rounded:"",dense:"",flat:"",icon:"remove_red_eye",color:"primary",class:"no-shadow q-mx-xs",size:"md",onClick:v.editar,style:{float:"right"}},null,8,["onClick"])):f("",!0),t(P,{rounded:"",dense:"",flat:"",icon:"print",color:"primary",class:"no-shadow q-mx-xs",size:"md",style:{float:"right"}},{default:e(()=>[t(Z,null,{default:e(()=>[t(X,{link:"",separator:""},{default:e(()=>[(i(!0),w(F,null,A(a.configImpressaoOrcamento.filter(r=>r.valor),r=>(i(),u(_,{clickable:"",key:r.valor,onClick:y=>d.$imprimir(r.valor,{id:(a.dados.venda||{}).id||"0",Oculto:"0"})},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"print"})]),_:1}),t(l,null,{default:e(()=>[t(g,null,{default:e(()=>[n(m(r.texto),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),t(P,{rounded:"",dense:"",flat:"",icon:a.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down",size:"md",class:"no-shadow q-mx-xs",color:"tertiary",style:{float:"right"},onClick:v.alternarDetalhes},null,8,["icon","onClick"])])]}),_:1}),t(J,{class:"hideondesktop q-mb-sm q-mt-xs"}),t(U,{class:"q-mx-none q-px-none hideondesktop"},{default:e(()=>[b("div",Je,[b("p",Xe,[a.dados.venda.dataHoraEmissao?(i(),u(k,{key:0,name:"mdi-calendar-today"})):f("",!0),n(" "+m(d.$filters.data(a.dados.venda.dataHoraEmissao))+" ",1),t(T,null,{default:e(()=>o[37]||(o[37]=[n(" Emiss\xE3o ")])),_:1})]),b("p",Ye,[a.dados.venda.dataHoraFinalizado?(i(),u(k,{key:0,name:"mdi-calendar-check"})):f("",!0),n(" "+m(d.$filters.data(a.dados.venda.dataHoraFinalizado))+" ",1),a.dados.venda.dataHoraFinalizado?(i(),u(T,{key:1},{default:e(()=>o[38]||(o[38]=[n(" Finalizado ")])),_:1})):f("",!0)])]),b("div",Ze,[b("p",$e,m(d.$filters.numero(a.dados.venda.subTotal,2)),1),b("p",ea,m(d.$filters.numero(a.dados.venda.totalDocumento,2)),1)]),b("div",aa,[t(J,{class:"hideondesktop q-mb-sm q-mt-xs"}),t(P,{rounded:"",dense:"",flat:"",icon:"more_vert",color:"tertiary",class:"no-shadow q-mx-xs",size:"md",style:{float:"right"}},{default:e(()=>[t(Z,null,{default:e(()=>[z((i(),u(X,{link:"",separator:""},{default:e(()=>[d.$utils.mapearStatus(a.dados.venda).permiteNota?(i(),w(F,{key:0},[z((i(),u(_,{clickable:"",onClick:o[7]||(o[7]=s=>d.emitirNFeV2({idVenda:a.dados.venda.id},1,"Venda"))},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"account_balance"})]),_:1}),t(l,null,{default:e(()=>o[39]||(o[39]=[n("NFe de Sa\xEDda/Venda")])),_:1})]),_:1})),[[O]]),z((i(),u(_,{clickable:"",onClick:o[8]||(o[8]=s=>d.emitirNFeV2({idVenda:a.dados.venda.id},0,"Devolu\xE7\xE3o"))},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"account_balance"})]),_:1}),t(l,null,{default:e(()=>o[40]||(o[40]=[n("NFe de Entrada/Devolu\xE7\xE3o")])),_:1})]),_:1})),[[O]]),z((i(),u(_,{clickable:"",onClick:o[9]||(o[9]=s=>d.emitirNFeV2({idVenda:a.dados.venda.id},1,"Remessa"))},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"account_balance"})]),_:1}),t(l,null,{default:e(()=>o[41]||(o[41]=[n("NFe de Remessa")])),_:1})]),_:1})),[[O]])],64)):f("",!0),v.podeMigrarFatura?(i(),w(F,{key:1},[(i(!0),w(F,null,A(a.faturasAbertas.filter(s=>s.id!==a.dados.venda.idFatura),s=>z((i(),u(_,{key:s.id,onClick:r=>v.migrarFatura(s)},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"mdi-folder-move"})]),_:1}),t(l,null,{default:e(()=>[n(m("Migrar para fatura #"+(s.numero||s.id.slice(-6))),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[O]])),128)),z((i(),u(_,{onClick:o[10]||(o[10]=s=>v.migrarFatura())},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"mdi-folder-move"})]),_:1}),t(l,null,{default:e(()=>o[42]||(o[42]=[n("Migrar para nova fatura")])),_:1})]),_:1})),[[O]])],64)):f("",!0),t(_,{clickable:"",onClick:o[11]||(o[11]=s=>d.$refs.modalHistoricoStatus.mostrar({idDocumento:a.dados.venda.id}))},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"history"})]),_:1}),t(l,null,{default:e(()=>o[43]||(o[43]=[n("Hist\xF3rico do Status")])),_:1})]),_:1}),(i(!0),w(F,null,A(a.configImpressosWhatsapp.filter(s=>s.valor),s=>(i(),u(_,{clickable:"",key:s.valor,onClick:r=>v.dialogEnviar(s)},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"mdi-whatsapp"})]),_:1}),t(l,null,{default:e(()=>[n(m(s.valor),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})),[[O]])]),_:1})]),_:1}),a.visibilidade.botao.remover?(i(),u(P,{key:0,rounded:"",dense:"",flat:"",icon:"clear",color:"tertiary",class:"no-shadow q-mx-xs",size:"md",onClick:v.remover,style:{float:"right"}},null,8,["onClick"])):f("",!0),a.visibilidade.botao.editar?(i(),u(P,{key:1,rounded:"",dense:"",flat:"",icon:"edit",color:"primary",class:"no-shadow q-mx-xs",size:"md",onClick:v.editar,style:{float:"right"}},null,8,["onClick"])):f("",!0),t(P,{rounded:"",dense:"",flat:"",icon:"print",color:"primary",class:"no-shadow q-mx-xs",size:"md",style:{float:"right"}},{default:e(()=>[t(Z,null,{default:e(()=>[t(X,{link:"",separator:""},{default:e(()=>[(i(!0),w(F,null,A(a.configImpressaoOrcamento.filter(s=>s.valor),s=>(i(),u(_,{clickable:"",key:s.valor,onClick:r=>d.$imprimir(s.valor,{id:(a.dados.venda||{}).id||"0",Oculto:"0"})},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"print"})]),_:1}),t(l,null,{default:e(()=>[t(g,null,{default:e(()=>[n(m(s.texto),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),t(P,{rounded:"",dense:"",flat:"",icon:a.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down",size:"md",class:"no-shadow q-mx-xs",color:"tertiary",style:{float:"right"},onClick:v.alternarDetalhes},null,8,["icon","onClick"])])]),_:1}),a.detalhesVisivel?(i(),u(J,{key:0,class:"hideondesktop q-my-sm"})):f("",!0),a.detalhesVisivel?(i(),u(U,{key:1,class:"items-start q-mx-none q-px-none q-mt-md"},{default:e(()=>[b("div",ta,[b("p",oa,[t(k,{name:"business"}),n(" "+m(a.dados.venda.descricaoEmpresa),1)]),b("div",da,[a.fatura.id?(i(),w("div",ia,[o[44]||(o[44]=n(" Fatura ")),t(Y,{color:"positive",escuro:"",onClick:v.copiarUid},{default:e(()=>[n(" #"+m(parseInt(a.fatura.numero)||(a.fatura.id||"").slice(-6))+" ",1),t(k,{class:"q-ml-sm",name:"mdi-glasses"}),z(b("input",{type:"hidden","onUpdate:modelValue":o[12]||(o[12]=s=>a.fatura.id=s),ref:"uid"},null,512),[[ke,a.fatura.id]])]),_:1},8,["onClick"]),t(Y,{class:"q-ml-sm",rounded:"",color:"tertiary",small:""},{default:e(()=>[n(m(a.fatura.status),1)]),_:1})])):f("",!0),b("div",null,m(a.dados.venda.observacao),1),b("div",null,m(a.dados.venda.observacaoInterna),1),b("div",null,m(a.dados.venda.motivoCancelamento),1),b("div",null,m(a.dados.venda.observacaoCancelamento),1)]),t(le,{idVenda:a.dados.venda.id},null,8,["idVenda"])]),b("div",na,[o[45]||(o[45]=b("p",{class:"text-subtitle1 text-weight-bold q-ma-none"}," Faturamento ",-1)),b("div",la,m(a.dados.venda.observacaoFaturamento),1)]),b("div",sa,[o[46]||(o[46]=b("p",{class:"text-subtitle1 text-weight-bold q-ma-none"}," Desconto ",-1)),b("p",ra,m(d.$filters.numero(a.dados.venda.totalDesconto,2)),1)])]),_:1})):f("",!0)]),_:1})):f("",!0)],64)):f("",!0),C.layout==="lista"?(i(),w(F,{key:1},[t(De,{onResize:v.onResize},null,8,["onResize"]),(ue=(re=a.dados)==null?void 0:re.venda)!=null&&ue.id?(i(),u(_,{key:0,clickable:"","manual-focus":"",class:"q-py-sm q-px-xs items-center"},{default:e(()=>[t(l,{class:"hideonmobile col-auto no-margin"},{default:e(()=>{var s,r,y,V;return[b("div",ua,[t(se,{numero:(r=(s=a.dados)==null?void 0:s.venda)==null?void 0:r.numero,id:(V=(y=a.dados)==null?void 0:y.venda)==null?void 0:V.id,cor:"positive"},null,8,["numero","id"])])]}),_:1}),t(l,{onClick:o[13]||(o[13]=s=>v.editar()),class:"col-md col-lg col-xl no-margin"},{default:e(()=>[t(_,{class:"q-pa-none"},{default:e(()=>[t(l,{class:"col-auto items-center"},{default:e(()=>{var s,r,y,V,E;return[t(D,{imagem:(y=a.contatos[(r=(s=a.dados)==null?void 0:s.venda)==null?void 0:r.idContato]||{})==null?void 0:y.imagem,tamanho:"40",rotulo:(E=(V=a.dados)==null?void 0:V.venda)==null?void 0:E.descricaoContato,style:{display:"flex","align-self":"center"}},null,8,["imagem","rotulo"])]}),_:1}),t(l,{class:"col"},{default:e(()=>{var s,r,y,V,E,H,R,Q,L,ee,ae,te;return[t(g,{lines:"2",class:"text-weight-bold"},{default:e(()=>{var I,p,x;return[b("span",null,[n(m((x=a.contatos[(p=(I=a.dados)==null?void 0:I.venda)==null?void 0:p.idContato])==null?void 0:x.apelido)+" ",1),t(T,{anchor:"bottom middle",self:"center middle"},{default:e(()=>o[47]||(o[47]=[n("Nome Fantasia")])),_:1})])]}),_:1}),((y=a.contatos[(r=(s=a.dados)==null?void 0:s.venda)==null?void 0:r.idContato])==null?void 0:y.nome)!==((H=a.contatos[(E=(V=a.dados)==null?void 0:V.venda)==null?void 0:E.idContato])==null?void 0:H.apelido)?(i(),u(g,{key:0,caption:"",lines:"2"},{default:e(()=>{var I,p,x;return[b("span",null,[n(m((x=a.contatos[(p=(I=a.dados)==null?void 0:I.venda)==null?void 0:p.idContato])==null?void 0:x.nome)+" ",1),t(T,{anchor:"bottom middle",self:"center middle"},{default:e(()=>o[48]||(o[48]=[n("Raz\xE3o Social")])),_:1})])]}),_:1})):f("",!0),t(g,{caption:"",class:"hideondesktop"},{default:e(()=>{var I,p,x,q,h,N,W,G,j,oe,de,ie,ne;return[t(se,{id:(p=(I=a.dados)==null?void 0:I.venda)==null?void 0:p.id,numero:(q=(x=a.dados)==null?void 0:x.venda)==null?void 0:q.numero,cor:"positive",escuro:"",class:"q-mr-sm"},null,8,["id","numero"]),(N=(h=a.dados)==null?void 0:h.venda)!=null&&N.status?(i(),u($,{key:0,escuro:"",dica:"Status",class:"col-auto q-mx-auto",rotulo:(j=((G=(W=a.dados)==null?void 0:W.venda)==null?void 0:G.status)||"")==null?void 0:j.replace("Aguardando ","Ag. "),cor:(de=(oe=a.dados)==null?void 0:oe.venda)!=null&&de.status?a.status[(ne=(ie=a.dados)==null?void 0:ie.venda)==null?void 0:ne.status]:"tertiary"},null,8,["rotulo","cor"])):f("",!0)]}),_:1}),(Q=(R=a.dados)==null?void 0:R.venda)!=null&&Q.descricaoEmpresa?(i(),u(g,{key:1,caption:"",lines:"2"},{default:e(()=>{var I,p;return[b("span",null,[t(k,{name:"business"}),n(" "+m((p=(I=a.dados)==null?void 0:I.venda)==null?void 0:p.descricaoEmpresa)+" ",1),t(T,{anchor:"bottom middle",self:"center middle"},{default:e(()=>o[49]||(o[49]=[n(" Empresa ")])),_:1})])]}),_:1})):f("",!0),a.contatos[(ee=(L=a.dados)==null?void 0:L.venda)==null?void 0:ee.idContatoVendedor]||a.contatos[(te=(ae=a.dados)==null?void 0:ae.venda)==null?void 0:te.idContatoDigitador]?(i(),u(g,{key:2,caption:"",lines:"2"},{default:e(()=>{var I,p,x,q,h,N,W,G,j,oe,de,ie,ne,ge;return[t(k,{name:"mdi-account-tie",style:{"margin-right":"2px"}}),a.contatos[(p=(I=a.dados)==null?void 0:I.venda)==null?void 0:p.idContatoVendedor]?(i(),w("span",ma,[n(m((h=a.contatos[(q=(x=a.dados)==null?void 0:x.venda)==null?void 0:q.idContatoVendedor])==null?void 0:h.apelido)+" ",1),t(T,{anchor:"bottom middle",self:"center middle"},{default:e(()=>o[50]||(o[50]=[n(" Vendedor ")])),_:1})])):f("",!0),a.contatos[(W=(N=a.dados)==null?void 0:N.venda)==null?void 0:W.idContatoDigitador]&&a.contatos[(j=(G=a.dados)==null?void 0:G.venda)==null?void 0:j.idContatoDigitador]!==a.contatos[(de=(oe=a.dados)==null?void 0:oe.venda)==null?void 0:de.idContatoVendedor]?(i(),w("span",ca,[n(" | "+m((ge=a.contatos[(ne=(ie=a.dados)==null?void 0:ie.venda)==null?void 0:ne.idContatoDigitador])==null?void 0:ge.apelido)+" ",1),t(T,{anchor:"bottom middle",self:"center middle"},{default:e(()=>o[51]||(o[51]=[n(" Digitador ")])),_:1})])):f("",!0)]}),_:1})):f("",!0),t(l,{class:"hideondesktop q-mt-sm"},{default:e(()=>[t(_,{class:"q-pa-none",style:{"min-height":"36px!important"}},{default:e(()=>[t(l,{top:"",class:"col-5 no-margin"},{default:e(()=>{var I,p,x,q;return[(p=(I=a.dados)==null?void 0:I.venda)!=null&&p.dataHoraEmissao?(i(),u(g,{key:0,caption:""},{default:e(()=>{var h,N;return[t(k,{name:"mdi-calendar-today",style:{position:"absolute","margin-top":"2px"}}),b("span",fa,m(d.$filters.data((N=(h=a.dados)==null?void 0:h.venda)==null?void 0:N.dataHoraEmissao)),1)]}),_:1})):f("",!0),(q=(x=a.dados)==null?void 0:x.venda)!=null&&q.dataHoraFinalizado?(i(),u(g,{key:1,caption:""},{default:e(()=>{var h,N;return[t(k,{name:"mdi-calendar",style:{position:"absolute","margin-top":"2px"}}),b("span",va,m(d.$filters.data((N=(h=a.dados)==null?void 0:h.venda)==null?void 0:N.dataHoraFinalizado)),1)]}),_:1})):f("",!0)]}),_:1}),t(l,{top:"",class:"col-7 no-margin text-right"},{default:e(()=>{var I,p,x,q,h,N;return[(p=(I=a.dados)==null?void 0:I.venda)!=null&&p.totalDocumento?(i(),u(g,{key:0,caption:"",class:"text-weight-bold"},{default:e(()=>{var W,G;return[n(m(d.$filters.numero((G=(W=a.dados)==null?void 0:W.venda)==null?void 0:G.totalDocumento,2)),1)]}),_:1})):f("",!0),((q=(x=a.dados)==null?void 0:x.venda)==null?void 0:q.subTotal)!==((N=(h=a.dados)==null?void 0:h.venda)==null?void 0:N.totalDocumento)?(i(),u(g,{key:1,caption:""},{default:e(()=>{var W,G;return[n(m(d.$filters.numero((G=(W=a.dados)==null?void 0:W.venda)==null?void 0:G.subTotal,2)),1)]}),_:1})):f("",!0)]}),_:1})]),_:1})]),_:1})]}),_:1})]),_:1})]),_:1}),t(l,{onClick:o[14]||(o[14]=s=>v.editar()),class:"hideonmobile maxw100 q-pl-sm no-margin"},{default:e(()=>{var s,r,y,V;return[(r=(s=a.dados)==null?void 0:s.venda)!=null&&r.dataHoraEmissao?(i(),u(g,{key:0,caption:"",lines:"2",class:"text-weight-medium"},{default:e(()=>{var E,H;return[b("span",null,[t(k,{name:"mdi-calendar-today"}),n(" "+m(d.$filters.data((H=(E=a.dados)==null?void 0:E.venda)==null?void 0:H.dataHoraEmissao))+" ",1),t(T,{anchor:"bottom middle",self:"center middle"},{default:e(()=>{var R,Q;return[n(" Emitido \xE0s "+m(d.$filters.hora((Q=(R=a.dados)==null?void 0:R.venda)==null?void 0:Q.dataHoraEmissao)),1)]}),_:1})])]}),_:1})):f("",!0),(V=(y=a.dados)==null?void 0:y.venda)!=null&&V.dataHoraFinalizado?(i(),u(g,{key:1,caption:"",lines:"2",class:"text-weight-medium"},{default:e(()=>{var E,H;return[b("span",null,[t(k,{name:"mdi-calendar"}),n(" "+m(d.$filters.data((H=(E=a.dados)==null?void 0:E.venda)==null?void 0:H.dataHoraFinalizado))+" ",1),t(T,{anchor:"bottom middle",self:"center middle"},{default:e(()=>{var R,Q;return[n(" Finalizado \xE1s "+m(d.$filters.hora((Q=(R=a.dados)==null?void 0:R.venda)==null?void 0:Q.dataHoraFinalizado)),1)]}),_:1})])]}),_:1})):f("",!0)]}),_:1}),t(l,{onClick:o[15]||(o[15]=s=>v.editar()),class:"hideonmobile maxw120 q-pl-sm no-margin"},{default:e(()=>{var s,r,y,V,E,H,R,Q,L;return[(r=(s=a.dados)==null?void 0:s.venda)!=null&&r.status?(i(),u($,{key:0,escuro:"",dica:"Status",class:"col-auto q-mx-auto",rotulo:(E=((V=(y=a.dados)==null?void 0:y.venda)==null?void 0:V.status)||"")==null?void 0:E.replace("Aguardando ","Ag. "),cor:(R=(H=a.dados)==null?void 0:H.venda)!=null&&R.status?a.status[(L=(Q=a.dados)==null?void 0:Q.venda)==null?void 0:L.status]:"tertiary"},null,8,["rotulo","cor"])):f("",!0)]}),_:1}),t(l,{onClick:o[16]||(o[16]=s=>v.editar()),class:"hideonmobile maxw120 q-pl-sm no-margin"},{default:e(()=>{var s,r,y,V;return[(r=(s=a.dados)==null?void 0:s.venda)!=null&&r.totalDocumento?(i(),u(g,{key:0,class:"text-weight-bold text-right"},{default:e(()=>{var E,H;return[b("span",null,[n(m(d.$filters.numero((H=(E=a.dados)==null?void 0:E.venda)==null?void 0:H.totalDocumento,2))+" ",1),t(T,{anchor:"bottom middle",self:"center middle"},{default:e(()=>o[52]||(o[52]=[n(" Total ")])),_:1})])]}),_:1})):f("",!0),(V=(y=a.dados)==null?void 0:y.venda)!=null&&V.subTotal?(i(),u(g,{key:1,class:"text-caption text-right"},{default:e(()=>{var E,H;return[b("span",null,[n(m(d.$filters.numero((H=(E=a.dados)==null?void 0:E.venda)==null?void 0:H.subTotal,2))+" ",1),t(T,{anchor:"bottom middle",self:"center middle"},{default:e(()=>o[53]||(o[53]=[n(" Subtotal ")])),_:1})])]}),_:1})):f("",!0)]}),_:1}),t(l,{class:"col-auto q-pl-sm no-margin"},{default:e(()=>[t(_,{class:"q-pa-none"},{default:e(()=>[t(l,{class:"no-margin hideonmobile",style:{width:"32px"}},{default:e(()=>[t(P,{onClick:o[17]||(o[17]=s=>{var r,y;return v.alternarDetalhes((y=(r=a.dados)==null?void 0:r.venda)==null?void 0:y.id)}),icon:a.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down",rounded:"",dense:"",flat:"",size:"md",color:"tertiary"},null,8,["icon"])]),_:1}),t(l,{class:"no-margin hideonmobile",style:{width:"32px"}},{default:e(()=>[a.visibilidade.botao.editar?(i(),u(P,{key:0,onClick:v.editar,rounded:"",dense:"",flat:"",icon:"edit",size:"md",color:"primary"},null,8,["onClick"])):f("",!0),a.visibilidade.botao.visualizar?(i(),u(P,{key:1,onClick:v.editar,rounded:"",dense:"",flat:"",icon:"remove_red_eye",size:"md",color:"primary"},null,8,["onClick"])):f("",!0)]),_:1}),t(l,{class:"no-margin hideonmobile",style:{width:"32px"}},{default:e(()=>[t(P,{icon:"print",size:"md",round:"",flat:"",dense:""},{default:e(()=>[t(Z,null,{default:e(()=>[z((i(),u(X,{link:"","no-border":"",separator:""},{default:e(()=>[(i(!0),w(F,null,A(a.configImpressaoOrcamento.filter(s=>s.valor),s=>(i(),u(_,{onClick:r=>{var y,V;return d.$imprimir(s.valor,{id:((V=(y=a.dados)==null?void 0:y.venda)==null?void 0:V.id)||"0",Oculto:"0"})},key:s.valor,clickable:""},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"print"})]),_:1}),t(l,null,{default:e(()=>[n(m(s.texto),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})),[[O]])]),_:1})]),_:1})]),_:1}),t(l,{class:"no-margin",style:{width:"32px"}},{default:e(()=>[t(P,{icon:"more_vert",size:"md",round:"",flat:"",dense:""},{default:e(()=>[t(Z,null,{default:e(()=>[z((i(),u(X,{link:"","no-border":"",separator:""},{default:e(()=>[a.visibilidade.botao.remover?(i(),u(_,{key:0,onClick:v.remover,clickable:""},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"delete"})]),_:1}),t(l,null,{default:e(()=>[t(g,null,{default:e(()=>o[54]||(o[54]=[n("Remover")])),_:1}),t(g,{caption:""},{default:e(()=>o[55]||(o[55]=[n("Venda")])),_:1})]),_:1})]),_:1},8,["onClick"])):f("",!0),a.visibilidade.botao.editar||a.visibilidade.botao.visualizar?(i(),u(_,{key:1,onClick:v.editar,clickable:"",class:"hideondesktop"},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[a.visibilidade.botao.editar?(i(),u(k,{key:0,name:"edit"})):f("",!0),a.visibilidade.botao.visualizar?(i(),u(k,{key:1,name:"remove_red_eye"})):f("",!0)]),_:1}),t(l,null,{default:e(()=>[a.visibilidade.botao.editar?(i(),u(g,{key:0},{default:e(()=>o[56]||(o[56]=[n(" Editar ")])),_:1})):f("",!0),a.visibilidade.botao.visualizar?(i(),u(g,{key:1},{default:e(()=>o[57]||(o[57]=[n(" Visualizar ")])),_:1})):f("",!0),t(g,{caption:""},{default:e(()=>o[58]||(o[58]=[n("Venda")])),_:1})]),_:1})]),_:1},8,["onClick"])):f("",!0),t(_,{onClick:o[18]||(o[18]=s=>{var r,y;return v.alternarDetalhes((y=(r=a.dados)==null?void 0:r.venda)==null?void 0:y.id)}),clickable:"",class:"hideondesktop"},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:a.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])]),_:1}),t(l,null,{default:e(()=>[t(g,null,{default:e(()=>o[59]||(o[59]=[n("Ver Detalhes")])),_:1}),t(g,{caption:""},{default:e(()=>o[60]||(o[60]=[n("Venda")])),_:1})]),_:1})]),_:1}),d.$utils.mapearStatus(a.dados.venda).permiteNota?(i(),w(F,{key:2},[z((i(),u(_,{onClick:o[19]||(o[19]=s=>d.emitirNFeV2({idVenda:a.dados.venda.id},1,"Venda")),clickable:""},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"account_balance"})]),_:1}),t(l,null,{default:e(()=>[t(g,null,{default:e(()=>o[61]||(o[61]=[n("NFe")])),_:1}),t(g,{caption:""},{default:e(()=>o[62]||(o[62]=[n("Sa\xEDda/Venda")])),_:1})]),_:1})]),_:1})),[[O]]),z((i(),u(_,{onClick:o[20]||(o[20]=s=>d.emitirNFeV2({idVenda:a.dados.venda.id},0,"Devolu\xE7\xE3o")),clickable:""},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"account_balance"})]),_:1}),t(l,null,{default:e(()=>[t(g,null,{default:e(()=>o[63]||(o[63]=[n("NFe")])),_:1}),t(g,{caption:""},{default:e(()=>o[64]||(o[64]=[n("Entrada/Devolu\xE7\xE3o")])),_:1})]),_:1})]),_:1})),[[O]]),z((i(),u(_,{onClick:o[21]||(o[21]=s=>d.emitirNFeV2({idVenda:a.dados.venda.id},1,"Remessa")),clickable:""},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"account_balance"})]),_:1}),t(l,null,{default:e(()=>[t(g,null,{default:e(()=>o[65]||(o[65]=[n("NFe")])),_:1}),t(g,{caption:""},{default:e(()=>o[66]||(o[66]=[n("Remessa")])),_:1})]),_:1})]),_:1})),[[O]])],64)):f("",!0),v.podeMigrarFatura?(i(),w(F,{key:3},[(i(!0),w(F,null,A(a.faturasAbertas.filter(s=>{var r,y;return s.id!==((y=(r=a.dados)==null?void 0:r.venda)==null?void 0:y.idFatura)}),s=>z((i(),u(_,{key:s.id,onClick:r=>v.migrarFatura(s),clickable:""},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"mdi-folder-move"})]),_:1}),t(l,null,{default:e(()=>[t(g,null,{default:e(()=>[n(m("#"+(s.numero||s.id.slice(-6))),1)]),_:2},1024),t(g,{caption:""},{default:e(()=>o[67]||(o[67]=[n("Migrar para fatura")])),_:1})]),_:2},1024)]),_:2},1032,["onClick"])),[[O]])),128)),z((i(),u(_,{onClick:o[22]||(o[22]=s=>v.migrarFatura()),clickable:""},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"mdi-folder-move"})]),_:1}),t(l,null,{default:e(()=>[t(g,null,{default:e(()=>o[68]||(o[68]=[n("Migrar")])),_:1}),t(g,{caption:""},{default:e(()=>o[69]||(o[69]=[n("Para nova fatura")])),_:1})]),_:1})]),_:1})),[[O]])],64)):f("",!0),t(_,{onClick:o[23]||(o[23]=s=>d.$refs.modalHistoricoStatus.mostrar({idDocumento:a.dados.venda.id})),clickable:""},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"history"})]),_:1}),t(l,null,{default:e(()=>[t(g,null,{default:e(()=>o[70]||(o[70]=[n("Hist\xF3rico")])),_:1}),t(g,{caption:""},{default:e(()=>o[71]||(o[71]=[n("De Status")])),_:1})]),_:1})]),_:1}),t(_,{onClick:v.duplicarVenda,clickable:""},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"mdi-content-duplicate"})]),_:1}),t(l,null,{default:e(()=>o[72]||(o[72]=[n("Duplicar Pedido")])),_:1})]),_:1},8,["onClick"]),(i(!0),w(F,null,A(a.configImpressosWhatsapp.filter(s=>s.valor),s=>(i(),u(_,{key:s.valor,onClick:r=>v.dialogEnviar(s),clickable:""},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"mdi-whatsapp"})]),_:1}),t(l,null,{default:e(()=>[n(m(s.valor),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),C.resetarEnvio&&a.dados.venda.rotaJson&&a.dados.venda.rotaJson.length>0?(i(),u(_,{key:4,onClick:o[24]||(o[24]=s=>C.resetarEnvio(a.dados.venda)),clickable:""},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"restart_alt"})]),_:1}),t(l,null,{default:e(()=>o[73]||(o[73]=[n("Resetar Envio")])),_:1})]),_:1})):f("",!0),(i(!0),w(F,null,A(a.configImpressaoOrcamento.filter(s=>s.valor),s=>(i(),u(_,{onClick:r=>{var y,V;return d.$imprimir(s.valor,{id:((V=(y=a.dados)==null?void 0:y.venda)==null?void 0:V.id)||"0",Oculto:"0"})},key:s.valor,clickable:"",class:"hideondesktop"},{default:e(()=>[t(l,{avatar:""},{default:e(()=>[t(k,{name:"print"})]),_:1}),t(l,null,{default:e(()=>[n(m(s.texto),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})),[[O]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):f("",!0),z(t(J,{class:"q-ma-sm"},null,512),[[ye,((ce=(me=a.dados)==null?void 0:me.venda)==null?void 0:ce.id)&&a.detalhesVisivel]]),z(t(K,null,{default:e(()=>[t(M,null,{default:e(()=>{var s,r,y,V,E,H,R,Q,L,ee,ae,te,I;return[((s=a.fatura)==null?void 0:s.id)||((y=(r=a.dados)==null?void 0:r.venda)==null?void 0:y.totalDesconto)?(i(),u(K,{key:0,gutter:"md-x"},{default:e(()=>{var p,x;return[t(M,{col:"xs12 sm"},{default:e(()=>{var q,h,N,W,G,j;return[(q=a.fatura)!=null&&q.id?(i(),u(S,{key:0,text:"sub2 medium",inline:"",icon:`request_quote ${a.width<=992?"15px":"xs"} tertiary`,caption:a.width<=992},{default:e(()=>o[74]||(o[74]=[n(" Fatura ")])),_:1},8,["icon","caption"])):f("",!0),(h=a.fatura)!=null&&h.id?(i(),u(se,{key:1,id:(N=a.fatura)==null?void 0:N.id,escuro:"",numero:(W=a.fatura)==null?void 0:W.numero,cor:"positive",class:"q-mx-sm"},null,8,["id","numero"])):f("",!0),(G=a.fatura)!=null&&G.id?(i(),u($,{key:2,rotulo:(j=a.fatura)==null?void 0:j.status,escuro:"",dica:"Status",cor:"tertiary"},null,8,["rotulo"])):f("",!0)]}),_:1}),(x=(p=a.dados)==null?void 0:p.venda)!=null&&x.totalDesconto?(i(),u(M,{key:0,col:"xs12 sm-shrink"},{default:e(()=>[t(S,{text:"sub2 regular",class:"q-pr-sm",caption:a.width<=992},{default:e(()=>{var q,h;return[o[75]||(o[75]=n(" Desconto: ")),b("span",pa,m(d.$filters.numero((h=(q=a.dados)==null?void 0:q.venda)==null?void 0:h.totalDesconto,2)),1)]}),_:1},8,["caption"])]),_:1})):f("",!0)]}),_:1})):f("",!0),t(K,{gutter:"md"},{default:e(()=>[t(M,{col:"xs12 md6",bordered:""},{default:e(()=>[t(S,{icon:`extension ${a.width<=992?"14px":"xs"} tertiary`,caption:a.width<=992,text:"sub2 medium",class:"q-mb-md"},{default:e(()=>o[76]||(o[76]=[n(" Itens ")])),_:1},8,["icon","caption"]),(i(!0),w(F,null,A(a.dados.carrinho,p=>(i(),u(K,{key:p.id,gutter:"none",bordered:`${a.quantidadeProdutos>1?"bottom":!1}`},{default:e(()=>[t(M,null,{default:e(()=>[t(S,{lines:"1",caption:a.width<=992},{default:e(()=>[t(S,{inline:"",text:"medium",class:"q-mr-xs"},{default:e(()=>[n(m(p.quantidade)+"x ",1)]),_:2},1024),n(" "+m(p.descricaoItem),1)]),_:2},1032,["caption"])]),_:2},1024),t(M,{col:"auto",class:"mw120"},{default:e(()=>[t(S,{text:"medium right",caption:a.width<=992},{default:e(()=>[n(m(d.$filters.numero(p.total,2)),1)]),_:2},1032,["caption"])]),_:2},1024)]),_:2},1032,["bordered"]))),128)),(i(!0),w(F,null,A(a.dados.customs,p=>(i(),u(K,{key:p.documento.id,gutter:"none",bordered:`${a.quantidadeProdutos>1?"bottom":!1}`},{default:e(()=>[t(M,null,{default:e(()=>[t(S,{lines:"1",caption:a.width<=992},{default:e(()=>[t(S,{inline:"",text:"medium",class:"q-mr-xs"},{default:e(()=>[n(m(p.documento.numero)+"x ",1)]),_:2},1024),n(" "+m(p.documento.descricao),1)]),_:2},1032,["caption"])]),_:2},1024),t(M,{col:"auto",class:"mw120"},{default:e(()=>[t(S,{text:"medium right",caption:a.width<=992},{default:e(()=>[n(m(d.$filters.numero(p.documento.totalDocumento,2)),1)]),_:2},1032,["caption"])]),_:2},1024)]),_:2},1032,["bordered"]))),128)),(i(!0),w(F,null,A(a.dados.oss,p=>(i(),u(K,{key:p.documento.id,gutter:"none",bordered:`${a.quantidadeProdutos>1?"bottom":!1}`},{default:e(()=>[t(M,null,{default:e(()=>[t(S,{lines:"1",caption:a.width<=992},{default:e(()=>[t($,{rotulo:"OS #"+p.documento.numero,dica:"O.S.",escuro:"",cor:"tertiary",class:"q-mr-xs"},null,8,["rotulo"]),p.documento.status!=="Or\xE7amento"?(i(),u($,{key:0,rotulo:p.documento.status,cor:"positive",escuro:"",class:"q-mr-xs"},null,8,["rotulo"])):f("",!0),n(" "+m(p.documento.descricao),1)]),_:2},1032,["caption"])]),_:2},1024),t(M,{col:"auto",class:"mw120"},{default:e(()=>[t(S,{text:"medium right",caption:a.width<=992},{default:e(()=>[n(m(d.$filters.numero(p.documento.totalDocumento,2)),1)]),_:2},1032,["caption"])]),_:2},1024)]),_:2},1032,["bordered"]))),128)),(i(!0),w(F,null,A(a.dados.kits,p=>(i(),u(K,{key:p.documento.id,gutter:"none",bordered:`${a.quantidadeProdutos>1?"bottom":!1}`},{default:e(()=>[t(M,null,{default:e(()=>[t(S,{lines:"1",caption:a.width<=992},{default:e(()=>[t(S,{inline:"",text:"medium",class:"q-mr-xs"},{default:e(()=>[n(m(d.$filters.numero(a.documentoItemKit[p.documento.id].quantidade,4))+"x ",1)]),_:2},1024),n(" "+m(a.documentoItemKit[p.documento.id].descricaoItem),1)]),_:2},1032,["caption"])]),_:2},1024),t(M,{col:"auto",class:"mw120"},{default:e(()=>[t(S,{text:"medium right",caption:a.width<=992},{default:e(()=>[n(m(d.$filters.numero(a.documentoItemKit[p.documento.id].total,2)),1)]),_:2},1032,["caption"])]),_:2},1024)]),_:2},1032,["bordered"]))),128))]),_:1}),t(M,{col:"xs12 md6",bordered:""},{default:e(()=>{var p;return[t(_e,{idFatura:(p=a.fatura)==null?void 0:p.id,ref:"documentosFiscais"},null,8,["idFatura"])]}),_:1})]),_:1}),((E=(V=a.dados)==null?void 0:V.venda)==null?void 0:E.observacaoFaturamento)||((R=(H=a.dados)==null?void 0:H.venda)==null?void 0:R.observacao)||((L=(Q=a.dados)==null?void 0:Q.venda)==null?void 0:L.observacaoInterna)||((ae=(ee=a.dados)==null?void 0:ee.venda)==null?void 0:ae.motivoCancelamento)||((I=(te=a.dados)==null?void 0:te.venda)==null?void 0:I.observacaoCancelamento)?(i(),u(K,{key:1,gutter:"md"},{default:e(()=>[t(M,{col:"xs12 md4",bordered:""},{default:e(()=>{var p,x;return[t(S,{text:"sub2 regular",caption:a.width<=992},{default:e(()=>{var q,h;return[o[77]||(o[77]=b("span",{class:"text-weight-medium q-mr-sm"},"Obs.:",-1)),n(" "+m((h=(q=a.dados)==null?void 0:q.venda)==null?void 0:h.observacao),1)]}),_:1},8,["caption"]),(x=(p=a.dados)==null?void 0:p.venda)!=null&&x.motivoCancelamento?(i(),u(S,{key:0,caption:a.width<=992,text:"sub2 regular"},{default:e(()=>{var q,h;return[o[78]||(o[78]=b("span",{class:"text-weight-medium q-mr-sm"},"Obs. Motivo Cancelamento:",-1)),n(" "+m((h=(q=a.dados)==null?void 0:q.venda)==null?void 0:h.motivoCancelamento),1)]}),_:1},8,["caption"])):f("",!0)]}),_:1}),t(M,{col:"xs12 md4",bordered:""},{default:e(()=>{var p,x;return[t(S,{text:"sub2 regular",caption:a.width<=992},{default:e(()=>{var q,h;return[o[79]||(o[79]=b("span",{class:"text-weight-medium q-mr-sm"},"Obs. Interna:",-1)),n(" "+m((h=(q=a.dados)==null?void 0:q.venda)==null?void 0:h.observacaoInterna),1)]}),_:1},8,["caption"]),(x=(p=a.dados)==null?void 0:p.venda)!=null&&x.observacaoCancelamento?(i(),u(S,{key:0,caption:a.width<=992,text:"sub2 regular"},{default:e(()=>{var q,h;return[o[80]||(o[80]=b("span",{class:"text-weight-medium q-mr-sm"},"Obs. Cancelamento:",-1)),n(" "+m((h=(q=a.dados)==null?void 0:q.venda)==null?void 0:h.observacaoCancelamento),1)]}),_:1},8,["caption"])):f("",!0)]}),_:1}),t(M,{col:"xs12 md4",bordered:""},{default:e(()=>[t(S,{text:"sub2 regular",caption:a.width<=992},{default:e(()=>{var p,x;return[o[81]||(o[81]=b("span",{class:"text-weight-medium q-mr-sm"},"Obs. Faturamento:",-1)),n(" "+m((x=(p=a.dados)==null?void 0:p.venda)==null?void 0:x.observacaoFaturamento),1)]}),_:1},8,["caption"])]),_:1})]),_:1})):f("",!0)]}),_:1})]),_:1},512),[[ye,((ve=(fe=a.dados)==null?void 0:fe.venda)==null?void 0:ve.id)&&a.detalhesVisivel]]),(be=(pe=a.dados)==null?void 0:pe.venda)!=null&&be.id?(i(),u(J,{key:1})):f("",!0)],64)):f("",!0),t(he,{onExecutar:v.executar,ref:"vendaModal"},null,8,["onExecutar"]),t(Ce,{ref:"modalHistoricoStatus"},null,512)])}var ha=we(He,[["render",ba]]);export{ha as V};
