import{_ as oe,Y as ie,Z as le,$ as se,bh as re,di as ne,bj as W,bi as R,bk as de,ar as ue,bm as T,ax as me,r as _,o as c,p as C,f as o,w as a,M as ce,G as fe,h as B,H as te,Q as q,N as ae,i as $,k as n,I as pe,J as he,bI as ge,C as f,t as p,e as b,d as g,v as K,aU as j,m as L,l as N,F as P,x as H,K as be,D as ve,P as X,S as M,T as w,aN as Y,U as Q,j as S,d7 as ee,be as ye}from"./index.2badb43a.js";import{L as ke}from"./Lista.71d9b58a.js";import{P as xe}from"./ItensManipulacaoApontamento.d1c5e805.js";const Ie={components:{Avatar:ie,Badge:le,BadgeCopiarUid:se,PromptItemV2:re,PromptApontamento:xe,SeletorCampoTabela:ne},data(){return{itens:{},documentoAnterior:{},documentoItensAnterior:[],documento:{id:"",codigoDocumento:"",idEmpresa:"",codigoEmpresa:"",descricaoEmpresa:"",numeroDocumentoEmpresa:"",inscricaoMunicipalEmpresa:"",operacao:"Manipulacao",tipo:"Produ\xE7\xE3o",status:"",dataEmissao:W(),dataFinalizacao:"",observacao:""},documentoItens:[],adicionar:{modal:{name:"",value:!1}},listaApontamentos:[],apontamento:{modal:{name:"",value:!1}},totalOrigem:0,totalDestino:0,visivel:!1,promptApontamento:{},equipamentos:[],composicoes:[],quantidadeOriginal:0,contatos:[],dataPrevistaEntrega:"",horaPrevistaEntrega:"",lote:{show:!1,readonly:!1,value:""},tela:{width:0}}},emits:["atualizar"],methods:{onHide(){this.$router.replace({params:{id:""}})},zerarCampos(){this.documentoAnterior={},this.documentoItensAnterior=[],this.documento={id:R(),idEmpresa:"",descricaoEmpresa:"",operacao:"Manipula\xE7\xE3o",tipo:"Produ\xE7\xE3o",status:"Digita\xE7\xE3o",dataHoraEmissao:W(),dataHoraFinalizado:"",observacao:""},this.documentoItens=[],this.totalOrigem=0,this.totalDestino=0,this.dataPrevistaEntrega="",this.horaPrevistaEntrega="",this.lote={show:!1,readonly:!1,value:""}},async atualizar(i){var e,r;if(this.zerarCampos(),i){if(this.documentoAnterior=await $db.itemManipulacao.le({id:i}),this.documento=$utils.clonarV2(this.documentoAnterior),this.documentoItensAnterior=await $db.itemManipulacao.leItens({idDocumento:i}),this.documentoItens=de(this.documentoItensAnterior),(e=this.documento)!=null&&e.idContato){const m=this.documento.idContato;this.contatos[m]||(this.contatos[m]=await $db.contato.le({id:m}))}if((r=this.documento)!=null&&r.idEmpresa){const m=this.documento.idEmpresa;this.contatos[m]||(this.contatos[m]=await $db.contato.le({id:m}))}this.documento.dataHoraPrevisto&&(this.dataPrevistaEntrega=this.documento.dataHoraPrevisto.slice(0,10),this.horaPrevistaEntrega=this.documento.dataHoraPrevisto.slice(11,16));for(const m of this.documentoItens){if(!this.lote.value&&m.operacaoFator===1&&m.loteEmpresa&&(this.lote.value=m.loteEmpresa),!m.idItem)continue;const t=await $erp().item.get(m.idItem);!t||t.id in this.itens||(this.itens[t.id]={codigoItem:t.codigoItem,referencia:t.referencia})}}else{let m,t,u;if(t=(await $db.contato.ler({filtros:{ativo:!0,empresas:!0}})).data,!(t.length>0)){this.$q.notify({message:"N\xE3o h\xE1 empresa configurada",timeout:0,type:"negative",closeBtn:!0});return}if(m=t[0],t.length>1){const y={ativo:!0,empresas:!0};if(m=await $g.promptContato.show({filtro:y,placeholder:"Selecione"}),!m){this.visivel=!1,this.$q.notifyError("Empresa n\xE3o selecionada");return}}if(u=(await $erp().empresa.where({idContato:m.id}).toArray())[0],!u){this.visivel=!1,this.$q.notifyError("Erro ao selecionar empresa");return}this.documento.descricaoEmpresa=u.nome,this.documento.idEmpresa=u.idContato,this.documento.numeroDocumentoEmpresa=u.numeroDocumentoNacional,this.documento.inscricaoMunicipalEmpresa=u.numeroDocumentoMunicipal}this.somarValorTotal(),this.buscarApontamentos(),await this.configLote()},async configLote(){var e,r;let i;this.usaLote=!1,this.pcpLote="",i=await $db.configuracoes.le({nome:"usa.lote"}),i=(e=i.find(m=>m.idEmpresa===this.documento.idEmpresa))!=null?e:i.find(m=>!m.idEmpresa),this.usaLote=(i==null?void 0:i.valor)==="1",i=await $db.configuracoes.le({nome:"pcp.lote"}),i=(r=i.find(m=>m.idEmpresa===this.documento.idEmpresa))!=null?r:i.find(m=>!m.idEmpresa),this.pcpLote=i==null?void 0:i.valor,this.lote.show=this.usaLote,this.lote.readonly=!!this.pcpLote,!this.lote.value&&this.pcpLote&&(this.lote.value=this.pcpLote)},async salvar(i,e){try{if(this.dataPrevistaEntrega){const r=`${this.dataPrevistaEntrega} ${this.horaPrevistaEntrega||"00:00:00"}`;this.documento.dataHoraPrevisto=ue.formatDate(r)}if(this.dataPrevistaEntrega===null&&(this.documento.dataHoraPrevisto=""),this.lote.value!==this.pcpLote)for(const r of this.documentoItens)r.operacaoFator===1&&(!r.idItem||(r.loteEmpresa=this.lote.value));await $db.itemManipulacao.grava({documentoAnterior:this.documentoAnterior,documento:this.documento,documentoItensAnterior:this.documentoItensAnterior,documentoItens:this.documentoItens})}catch(r){this.$q.notifyError("Erro ao salvar",r)}await this.atualizar(this.documento.id),e&&this.$q.notify(e),i||this.$emit("atualizar"),this.visivel=i},async aguardarGeracaoNroPCP(){var r,m;let i=!0,e=0;$q.loading.show({message:"Aguardando gera\xE7\xE3o do n\xFAmero do PCP para composi\xE7\xE3o do n\xFAmero do lote."}),this.numeroPCP=null;do{await new Promise((t,u)=>setTimeout(t,1e3));try{const t=await this.$utils.geeksApi({consultaNumero:{funcao:"185D6D10-9A2A-4965-8C86-90FA2F7F73A2",id:this.documento.id}});(m=(r=t==null?void 0:t.data)==null?void 0:r.consultaNumero)!=null&&m.numero&&(this.numeroPCP=t==null?void 0:t.data.consultaNumero.numero,i=!1),++e===10&&(i=!1)}catch(t){console.error(t)}}while(i);if($q.loading.hide(),!this.numeroPCP){const t="N\xE3o foi poss\xEDvel obter o n\xFAmero do lote. Por favor, tente novamente.";throw $q.notify({type:"negative",message:t}),new Error(t)}},async gerarNroLote(){const i=new Date;if(this.pcpLote){let e=this.pcpLote;e=e.replace("AAAA",i.toISOString().slice(0,4)),e=e.replace("AA",i.toISOString().slice(2,4)),e=e.replace("MM",i.toISOString().slice(5,7)),e=e.replace("DD",i.toISOString().slice(8,10)),e=e.replace("PCP",String(this.numeroPCP)),this.lote.value=e}},async finalizar(){let i;if(i=this.verificarTotal(),!!i){if(this.usaLote&&this.pcpLote){let e=!0;for(let r of this.documentoItens)if(r.operacaoFator===1&&r.loteEmpresa){e=!1;break}e&&(await this.salvar(!0),await this.aguardarGeracaoNroPCP(),await this.gerarNroLote())}this.documento.status="Finalizado",this.documento.dataHoraFinalizado=W();for(let e of this.documentoItens)e.status="Finalizado",e.dataHoraFinalizado=W();this.salvar(!1,"Produ\xE7\xE3o Finalizada")}},reabrir(){try{this.documento.status="Digita\xE7\xE3o",this.documento.dataHoraFinalizado="";for(let i of this.documentoItens)i.status="Digita\xE7\xE3o",i.dataHoraFinalizado="";this.salvar(!0,"Produ\xE7\xE3o reaberta")}catch(i){this.$q.notifyError("Erro ao reabrir",i)}},async excluirItem(i){this.documentoItens=this.documentoItens.filter(e=>e.id!==i),this.somarValorTotal()},async removerTodosItens(i){$q.dialog({title:"Remover todos os itens",message:`Deseja remover todos os itens de ${i}`,cancel:!0,persistent:!0}).onOk(()=>{let e=[];const r=i==="Destino"?1:-1;e=this.documentoItens.filter(m=>m.operacaoFator===r);for(const m of e)this.excluirItem(m.id)})},async recalcularTotal(i,e=!1){if(i.subTotal=T(i.quantidade*i.valorItem),i.total=T(i.quantidade*i.valorItem),e){let r={titulo:"Composi\xE7\xE3o",msg:"Deseja recalcular a origem?"};i.operacaoFator===1&&await this.verificarComposicao(i.idItem,i.quantidade,r)}this.somarValorTotal()},async recalcularQuantidade(i){i.quantidade=T(i.subTotal/i.valorItem),i.total=i.subTotal,this.somarValorTotal()},async recalcularValorItem(i){i.valorItem=T(i.subTotal/i.quantidade),i.total=i.subTotal,this.somarValorTotal()},somarValorTotal(){const i=this.documentoItens.filter(r=>r.operacaoFator===-1).reduce((r,m)=>r+=m.total,0),e=this.documentoItens.filter(r=>r.operacaoFator===1).reduce((r,m)=>r+=m.total,0);this.totalOrigem=$utils.arredondar(i,2),this.totalDestino=$utils.arredondar(e,2)},verificarTotal(){return this.documentoItens.length===0&&this.totalDestino===0&&this.totalOrigem===0?(this.$q.notifyError("Selecione alguns itens na lista"),!1):this.totalOrigem!==this.totalDestino?(this.$q.notifyError("Valores Totais de Origem e Destino devem ser iguais!"),!1):!0},async abrirModal(i,e=""){let r={},m=[];const t=i==="Destino"?1:-1;e?m=this.documentoItens.filter(u=>u.idItem===e):m=this.documentoItens.filter(u=>u.operacaoFator===t);for(const u of m)r[u.idItem]={item:await me().item.get(u.idItem)||{},quantidade:u.quantidade};this.$refs.promptItem.itensSelecionados=r,this.$refs.promptItem.termo=e,this.$refs.promptItem.atualizar(),this.adicionar.modal.value=!0,this.adicionar.modal.name=i},async selecionarItens(i){var m,t,u;let e={};const r=this.adicionar.modal.name==="Destino"?1:-1;for(const y in i){let I=await $db.estoqueSaldoProdutoEmpresa.le({idEmpresa:this.documento.idEmpresa,tipoEstoque:"Dispon\xEDvel",idItem:y});I=I[0];const x=await $db.configuracoes.porNome("vendas.checaestoque",this.documento.idEmpresa),s=!!Number((m=x.find(d=>d.id))==null?void 0:m.valor),k=i[y].item||{},v=i[y].quantidade||0,z=(t=(I==null?void 0:I.valorCustoMedio)||(k==null?void 0:k.valorCustoReposicao))!=null?t:0;if(k.id in this.itens||(this.itens[k.id]={codigoItem:k.codigoItem,referencia:k.referencia}),s&&r===-1&&(!(I!=null&&I.saldo)||v>(I==null?void 0:I.saldo))){this.$q.notifyError(`${k.descricao} n\xE3o dispon\xEDvel no estoque`);continue}let A=this.documentoItens.find(d=>d.idItem===y);A?(A.quantidade=v,A.quantidadeRealizado=v,A.subTotal=T(v*z),A.total=T(v*z)):this.documentoItens.push({dataHoraEmissao:W(),dataHoraFinalizado:"",descricaoItem:k.descricao,id:R(),idDocumento:this.documento.id,idItem:k.id,operacao:"Manipula\xE7\xE3o",operacaoFator:r,quantidade:v,quantidadeRealizado:v,status:"Digita\xE7\xE3o",tipoItem:k.tipo,subTotal:T(v*z),total:T(v*z),unidade:k.unidade,valorCustoMedio:(u=I==null?void 0:I.valorCustoMedio)!=null?u:0,valorItem:z,valorOriginal:z});let O=await $db.item.leCompleto({id:k.id});!this.composicoes.includes(O.atual.composicao[0].idItemUtilizado)&&O.atual.composicao[0].idItemUtilizado!==""?(e={titulo:"Composi\xE7\xE3o",msg:"O item selecionado possui itens de composi\xE7\xE3o, deseja preencher?"},r===1&&await this.verificarComposicao(k.id,v,e)):e={}}this.somarValorTotal()},async verificarComposicao(i,e,r){var y,I;let m=[],t=await $db.item.leCompleto({id:i});(I=(y=t==null?void 0:t.atual)==null?void 0:y.composicao)==null||I.sort((x,s)=>x.ordem<s.ordem?-1:1);for(let x of t.atual.composicao)x.idItemUtilizado&&(x.quantidade=x.quantidade*e,m.push(x),this.composicoes.push(x.idItemUtilizado));const u=m.reduce((x,s)=>(x[s.idItemUtilizado]||(x[s.idItemUtilizado]=s),x),{});r.titulo?$q.dialog({title:r.titulo,message:r.msg,cancel:!0,persistent:!0}).onOk(()=>{this.adicionar.modal.name="Origem",this.selecionarItens(u),r.titulo=""}):(this.adicionar.modal.name="Origem",this.selecionarItens(u))},async abrirModalApontamento(){this.$refs.promptApontamento.show()},async incluirApontamento(i){let e={id:R(),documentoItemIdContato:i.operador,idItem:i.equipamento,tipoItem:"ApontamentoPCP",quantidade:i.quantidade,dataHoraEmissao:i.dataIni,dataHoraFinalizado:i.dataFim,peso:i.peso,idDocumento:this.documento.id};try{await $db.documentoItem.grava({atual:e})}catch(r){this.$q.notifyError("Erro ao salvar",r)}this.buscarApontamentos()},async buscarApontamentos(){try{this.listaApontamentos=[],(await $db.documentoItem.leApontamento({tipoItem:"ApontamentoPCP",idDocumento:this.documento.id})).forEach((e,r)=>{this.listaApontamentos[r]={id:e.id,operador:e.documentoItemIdContato,equipamento:e.idItem,quantidade:e.quantidade,dataIni:e.dataHoraEmissao,dataFim:e.dataHoraFinalizado,peso:e.peso,idDocumento:e.idDocumento}})}catch(i){this.$q.notifyError("Erro ao consultar apontamentos",i)}},async carregarEquipamentos(){let i=await $db.item.leRefatorado({filtros:{tipo:"Servi\xE7o"}});this.equipamentos=i.data.map(e=>({descricao:e.descricao,id:e.id}))},buscaEquipamentoApontado(i){let e=this.equipamentos.find(r=>r.id===i);return e?e.descricao:""},async carregarOperadores(){let i=await $db.contato.leRefatorado({filtros:{}});this.operadores=i.data.map(e=>({nome:e.nome,id:e.id}))},async carregarOperacoes(){let i=await $db.hibrido.lista({table:"documento",where:{tipo:"Produ\xE7\xE3o"}});this.documento.operacoes=i.map(e=>({rotulo:e.operacao,valor:e.operacao}))},buscaOperadorApontado(i){let e=this.operadores.find(r=>r.id===i);return e?e.nome:""},calculoHorasProducao(i,e){let r=new Date(i)-new Date(e),m=Math.floor(r%864e5/36e5),t=Math.round(r%864e5%36e5/6e4);return m+"h "+t+"m"},async removerTodosApontamentos(){$q.dialog({title:"Remover todos os apontamentos",message:"Deseja remover todos os apontamentos de produ\xE7\xE3o",cancel:!0,persistent:!0}).onOk(()=>{for(const i of this.listaApontamentos)this.excluirApontamento(i.id)})},async excluirApontamento(i){try{await $db.documentoItem.removeApontamento(i),this.listaApontamentos=this.listaApontamentos.filter(e=>e.id!==i),this.$q.notify("Apontamento removido!")}catch{this.$q.notifyError("N\xE3o foi possivel remover o apontamento!")}},qtdOriginal(i=0){this.quantidadeOriginal=i},async abrirModalContato(){const i=await this.selecionarContato({placeholder:"Selecione o cliente",filtro:{ativo:!0}});i.id&&(this.documento.idContato=i.id),i.nome&&(this.documento.descricaoContato=i.nome),this.contatos[i.id]||(this.contatos[i.id]=await $db.contato.le({id:i.id}))},async selecionarContato(i){const{placeholder:e,filtro:r}={placeholder:"Selecione o contato",filtro:{ativo:!0},...i},m=await $g.promptContato.show({filtro:r,placeholder:e});if(!m)throw new Error("Contato n\xE3o selecionado");return m},obterWidth(){const i=document.getElementById("ItensManipulacao");i&&(this.tela.width=i.offsetWidth)}},async beforeMount(){await this.carregarEquipamentos(),await this.carregarOperadores()}},we={id:"ItensManipulacao"},Ce={class:"text-weight-medium q-ml-xs"},qe={key:0,class:"q-ml-sm"},Ee={class:"text-weight-medium"},_e={ref:"form"},Ae={key:0},Ve={key:1},De={key:0},Fe={key:1},ze={class:"q-pr-sm"},Le={key:0},Pe={key:1},Oe={key:0},Me={key:1},Se={class:"q-mr-sm"},Te={class:"text-weight-medium"},He={class:"text-weight-medium"},Ue={class:"text-weight-medium"},Be={class:"text-weight-medium"},Qe={class:"text-weight-medium"},Ne={class:"text-weight-medium"};function We(i,e,r,m,t,u){const y=_("badge"),I=_("BadgeCopiarUid"),x=_("avatar"),s=_("g-col"),k=_("campo"),v=_("g-row"),z=_("SeletorCampoTabela"),A=_("g-label"),O=_("PromptItemV2"),d=_("PromptApontamento");return c(),C("div",we,[o(ve,{modelValue:t.visivel,"onUpdate:modelValue":e[18]||(e[18]=l=>t.visivel=l),onHide:u.onHide,maximized:""},{default:a(()=>[o(ce,{container:"",view:"hHh LpR fFf",class:"bg-light"},{default:a(()=>[o(fe,null,{default:a(()=>[o(B,null,{default:a(()=>[te(o(q,{icon:"arrow_back",dense:"",flat:"",round:""},null,512),[[ae]]),o($,null,{default:a(()=>e[20]||(e[20]=[n("Produ\xE7\xE3o (PCP)")])),_:1}),o(q,{onClick:e[0]||(e[0]=l=>u.salvar(!1,"Produ\xE7\xE3o salva!")),unelevated:"",label:"Salvar",color:"white","text-color":"primary"})]),_:1})]),_:1}),o(pe,null,{default:a(()=>[o(he,{class:"u-container q-pa-sm"},{default:a(()=>[o(ge,{onResize:e[1]||(e[1]=l=>u.obterWidth())}),o(B,{color:"none"},{default:a(()=>[o($,{class:"text-body2"},{default:a(()=>[e[22]||(e[22]=n(" Emiss\xE3o: ")),f("span",Ce,p(i.$filters.data(t.documento.dataHoraEmissao)),1),t.documento.dataHoraFinalizado?(c(),C("span",qe,[e[21]||(e[21]=n(" | Cancelamento: ")),f("span",Ee,p(i.$filters.data(t.documento.dataHoraFinalizado)),1)])):b("",!0)]),_:1}),t.documento.status?(c(),g(y,{key:0,rotulo:t.documento.status,cor:"positive",icone:"flag",escuro:"",class:"q-mr-xs"},null,8,["rotulo"])):b("",!0),t.documento.numero?(c(),g(y,{key:1,cor:"tertiary",escuro:"",rotulo:`#${t.documento.numero.toString().padStart(6,"0")}`},null,8,["rotulo"])):(c(),g(I,{key:2,id:t.documento.id,numero:t.documento.id.slice(-8),cor:"tertiary"},null,8,["id","numero"]))]),_:1}),o(v,{gutter:"md",mg:"md-y",bg:"bg-white"},{default:a(()=>[o(s,{col:"12"},{default:a(()=>[f("form",_e,[o(v,null,{default:a(()=>[o(s,{col:"12 sm6"},{default:a(()=>[o(v,{mg:"md-b"},{default:a(()=>[o(s,{col:"shrink"},{default:a(()=>{var l,V,h,E;return[o(x,{imagem:(V=(l=t.contatos[t.documento.idEmpresa])==null?void 0:l.imagem)!=null?V:"",rotulo:(E=(h=t.contatos[t.documento.idEmpresa])==null?void 0:h.nome)!=null?E:"",tamanho:"30",style:{display:"flex","align-self":"center"}},null,8,["imagem","rotulo"])]}),_:1}),o(s,null,{default:a(()=>[o(k,{modelValue:t.documento.descricaoEmpresa,"onUpdate:modelValue":e[2]||(e[2]=l=>t.documento.descricaoEmpresa=l),somenteLeitura:"",rotulo:"Empresa",tipo:"texto"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),o(s,{col:"12 sm6"},{default:a(()=>[o(v,{mg:"md-b"},{default:a(()=>[o(s,{col:"shrink"},{default:a(()=>{var l,V,h,E;return[o(x,{imagem:(V=(l=t.contatos[t.documento.idContato])==null?void 0:l.imagem)!=null?V:"",rotulo:(E=(h=t.contatos[t.documento.idEmpresa])==null?void 0:h.nome)!=null?E:"",tamanho:"30",style:{display:"flex","align-self":"center"}},null,8,["imagem","rotulo"])]}),_:1}),o(s,null,{default:a(()=>[o(k,{modelValue:t.documento.descricaoContato,"onUpdate:modelValue":e[3]||(e[3]=l=>t.documento.descricaoContato=l),somenteLeitura:"",after:[{icon:"search",handler(){u.abrirModalContato()}}],placeholder:"Cliente",rotulo:"Cliente",tipo:"texto"},null,8,["modelValue","after"])]),_:1})]),_:1})]),_:1})]),_:1}),o(v,null,{default:a(()=>[t.lote.show?(c(),g(s,{key:0,col:"12 sm4"},{default:a(()=>[o(k,{modelValue:t.lote.value,"onUpdate:modelValue":e[4]||(e[4]=l=>t.lote.value=l),"somente-leitura":t.lote.readonly,rotulo:"Lote",tipo:"texto"},null,8,["modelValue","somente-leitura"])]),_:1})):b("",!0),o(s,{onClick:u.carregarOperacoes,col:t.lote.show?"12 sm4":"12 sm6"},{default:a(()=>[o(z,{modelValue:t.documento.operacao,"onUpdate:modelValue":e[5]||(e[5]=l=>t.documento.operacao=l),enableAdd:"",filtro:{tipo:"Produ\xE7\xE3o"},buscarSemCaractere:!0,tabela:"documento",campo:"operacao",label:"Opera\xE7\xE3o"},null,8,["modelValue"])]),_:1},8,["onClick","col"]),o(s,{col:t.lote.show?"12 sm4":"12 sm6"},{default:a(()=>[o(v,null,{default:a(()=>[o(s,{col:"6"},{default:a(()=>[o(K,{modelValue:t.dataPrevistaEntrega,"onUpdate:modelValue":e[6]||(e[6]=l=>t.dataPrevistaEntrega=l),"stack-label":"",dense:"",clearable:"",type:"date",label:"Data Prevista de Entrega",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1}),o(s,{col:"6"},{default:a(()=>[o(K,{modelValue:t.horaPrevistaEntrega,"onUpdate:modelValue":e[7]||(e[7]=l=>t.horaPrevistaEntrega=l),"stack-label":"",dense:"",clearable:"",type:"time",label:"Hora Prevista de Entrega",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["col"]),o(s,{col:"12"},{default:a(()=>[o(k,{modelValue:t.documento.observacao,"onUpdate:modelValue":e[8]||(e[8]=l=>t.documento.observacao=l),rows:"1",tipo:"textoArea",rotulo:"Observa\xE7\xE3o"},null,8,["modelValue"])]),_:1})]),_:1})],512)]),_:1})]),_:1}),o(v,{gutter:"md",mg:"md-y",bg:"bg-white"},{default:a(()=>[o(s,{col:"12 sm6"},{default:a(()=>[o(B,{class:"q-px-none"},{default:a(()=>[o(A,{icon:"shopping_cart sm tertiary left",text:"sub1 medium"},{default:a(()=>e[23]||(e[23]=[n("Origem")])),_:1}),o(j),t.documento.status==="Digita\xE7\xE3o"?(c(),g(q,{key:0,onClick:e[9]||(e[9]=l=>u.removerTodosItens("Origem")),icon:"delete",color:"tertiary",dense:"",flat:"",round:""},{default:a(()=>[o(L,{anchor:"bottom middle",self:"center middle"},{default:a(()=>e[24]||(e[24]=[n(" Remover todos ")])),_:1})]),_:1})):b("",!0),t.documento.status==="Digita\xE7\xE3o"?(c(),g(q,{key:1,onClick:e[10]||(e[10]=l=>u.abrirModal("Origem")),icon:"add",color:"positive",dense:"",flat:"",round:""},{default:a(()=>[o(L,{anchor:"bottom middle",self:"center middle"},{default:a(()=>e[25]||(e[25]=[n(" Adicionar item ")])),_:1})]),_:1})):b("",!0)]),_:1}),o(v,{gutter:"sm-x none-y",text:"caption medium",class:"hideonmobile"},{default:a(()=>[o(s,{col:"sm"},{default:a(()=>e[26]||(e[26]=[n("Ref/C\xF3d.")])),_:1}),o(s,{col:"sm4"},{default:a(()=>e[27]||(e[27]=[n("Descri\xE7\xE3o")])),_:1}),o(s,{col:"sm",text:"right"},{default:a(()=>e[28]||(e[28]=[n("Quantidade")])),_:1}),o(s,{col:"sm",text:"right"},{default:a(()=>e[29]||(e[29]=[n("Valor")])),_:1}),o(s,{col:"sm",text:"right"},{default:a(()=>e[30]||(e[30]=[n("Total")])),_:1}),o(s,{col:"sm",maxWidth:"42px",text:"right"},{default:a(()=>e[31]||(e[31]=[n("A\xE7\xF5es")])),_:1})]),_:1}),o(N,{class:"q-mx-xs q-mb-sm"}),(c(!0),C(P,null,H(t.documentoItens,(l,V)=>(c(),C(P,{key:V},[l.operacaoFator===-1?(c(),g(v,{key:0,gutter:"sm-x xs-y",items:"center"},{default:a(()=>[o(s,{col:"10",class:"hideondesktop"},{default:a(()=>[o(v,null,{default:a(()=>[o(s,{col:"12"},{default:a(()=>{var h,E,D,F;return[(h=t.itens[l.idItem])!=null&&h.referencia?(c(),C("span",Ae,[e[32]||(e[32]=f("span",{class:"text-weight-medium q-pr-xs"},"Ref.:",-1)),n(" "+p((E=t.itens[l.idItem])==null?void 0:E.referencia),1)])):(D=t.itens[l.idItem])!=null&&D.codigoItem?(c(),C("span",Ve,[e[33]||(e[33]=f("span",{class:"text-weight-medium q-pr-xs"},"C\xF3d.:",-1)),n(" #"+p((F=t.itens[l.idItem])==null?void 0:F.codigoItem),1)])):b("",!0)]}),_:2},1024),o(s,{col:"12"},{default:a(()=>[e[34]||(e[34]=f("span",{class:"text-weight-medium q-pr-xs"},"Desc.:",-1)),n(" "+p(l.descricaoItem||"-"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),t.documento.status==="Digita\xE7\xE3o"?(c(),g(s,{key:0,col:"2",text:"center",class:"hideondesktop"},{default:a(()=>[o(q,{onClick:h=>u.excluirItem(l.id),icon:"delete",dense:"",flat:"",round:""},null,8,["onClick"])]),_:2},1024)):b("",!0),o(s,{col:"sm",class:"hideonmobile"},{default:a(()=>[o(A,{lines:"2"},{default:a(()=>{var h,E,D,F;return[(h=t.itens[l.idItem])!=null&&h.referencia?(c(),C("span",De,p((E=t.itens[l.idItem])==null?void 0:E.referencia),1)):(D=t.itens[l.idItem])!=null&&D.codigoItem?(c(),C("span",Fe," #"+p((F=t.itens[l.idItem])==null?void 0:F.codigoItem),1)):b("",!0)]}),_:2},1024)]),_:2},1024),o(s,{col:"sm4",class:"hideonmobile"},{default:a(()=>[o(A,{lines:"2"},{default:a(()=>[n(p(l.descricaoItem||"-"),1)]),_:2},1024)]),_:2},1024),o(s,{col:"12 sm",text:"right"},{default:a(()=>[o(k,{modelValue:l.quantidade,"onUpdate:modelValue":h=>l.quantidade=h,onBlur:h=>u.recalcularTotal(l,!0),filled:"",somenteLeitura:t.documento.status==="Finalizado",decimals:"4",tipo:"decimal",rotulo:t.tela.width<992?"Quantidade":""},null,8,["modelValue","onUpdate:modelValue","onBlur","somenteLeitura","rotulo"])]),_:2},1024),o(s,{col:"12 sm",text:"right"},{default:a(()=>[o(k,{modelValue:l.valorItem,"onUpdate:modelValue":h=>l.valorItem=h,onBlur:h=>u.recalcularTotal(l),disable:"",filled:"",somenteLeitura:t.documento.status==="Finalizado",decimals:"4",tipo:"decimal",rotulo:t.tela.width<992?"Valor":""},null,8,["modelValue","onUpdate:modelValue","onBlur","somenteLeitura","rotulo"])]),_:2},1024),o(s,{col:"12 sm",text:"right"},{default:a(()=>[o(k,{modelValue:l.subTotal,"onUpdate:modelValue":h=>l.subTotal=h,onBlur:h=>u.recalcularQuantidade(l),filled:"",somenteLeitura:t.documento.status==="Finalizado",decimals:"4",tipo:"decimal",rotulo:t.tela.width<992?"Total":""},null,8,["modelValue","onUpdate:modelValue","onBlur","somenteLeitura","rotulo"])]),_:2},1024),t.documento.status==="Digita\xE7\xE3o"?(c(),g(s,{key:1,col:"sm",maxWidth:"42px",text:"center",class:"hideonmobile"},{default:a(()=>[o(q,{onClick:h=>u.excluirItem(l.id),icon:"delete",dense:"",flat:"",round:""},null,8,["onClick"])]),_:2},1024)):b("",!0)]),_:2},1024)):b("",!0),l.operacaoFator===-1?(c(),g(N,{key:1,class:"q-my-sm q-mx-xs"})):b("",!0)],64))),128)),o(v,{gutter:"sm-x none-y",text:"caption medium",class:"hideonmobile"},{default:a(()=>[o(s,{col:"sm"},{default:a(()=>e[35]||(e[35]=[n("\xA0")])),_:1}),o(s,{col:"sm4"},{default:a(()=>e[36]||(e[36]=[n("\xA0")])),_:1}),o(s,{col:"sm"},{default:a(()=>e[37]||(e[37]=[n("\xA0")])),_:1}),o(s,{col:"sm"},{default:a(()=>e[38]||(e[38]=[n("\xA0")])),_:1}),o(s,{col:"sm",text:"right"},{default:a(()=>[n(p(i.$filters.numero(t.totalOrigem,2)),1)]),_:1}),o(s,{col:"sm",maxWidth:"42px"},{default:a(()=>e[39]||(e[39]=[n("\xA0")])),_:1})]),_:1}),o(v,{gutter:"sm-x none-y",text:"body2 bold right",class:"hideondesktop"},{default:a(()=>[o(s,{col:"12"},{default:a(()=>[f("span",ze,p(i.$filters.numero(t.totalOrigem,2)),1)]),_:1})]),_:1}),o(v,{gutter:"sm-x none-y",text:"center",mg:t.tela.width<992?"md-t xl-b":"md-t"},{default:a(()=>[o(s,{col:"12"},{default:a(()=>[o(q,{onClick:e[11]||(e[11]=l=>u.abrirModal("Origem")),outline:"",size:"sm",label:"Adicionar item",icon:"add",color:"positive"})]),_:1})]),_:1},8,["mg"])]),_:1}),o(s,{col:"12 sm6"},{default:a(()=>[o(B,{class:"q-px-none"},{default:a(()=>[o(A,{icon:"shopping_cart sm tertiary left",text:"sub1 medium"},{default:a(()=>e[40]||(e[40]=[n("Destino")])),_:1}),o(j),t.documento.status==="Digita\xE7\xE3o"?(c(),g(q,{key:0,onClick:e[12]||(e[12]=l=>u.removerTodosItens("Destino")),icon:"delete",color:"tertiary",dense:"",flat:"",round:""},{default:a(()=>[o(L,{anchor:"bottom middle",self:"center middle"},{default:a(()=>e[41]||(e[41]=[n(" Remover todos ")])),_:1})]),_:1})):b("",!0),t.documento.status==="Digita\xE7\xE3o"?(c(),g(q,{key:1,onClick:e[13]||(e[13]=l=>u.abrirModal("Destino")),icon:"add",color:"positive",dense:"",flat:"",round:""},{default:a(()=>[o(L,{anchor:"bottom middle",self:"center middle"},{default:a(()=>e[42]||(e[42]=[n(" Adicionar Item ")])),_:1})]),_:1})):b("",!0)]),_:1}),o(v,{gutter:"sm-x none-y",text:"caption medium",class:"hideonmobile"},{default:a(()=>[o(s,{col:"sm"},{default:a(()=>e[43]||(e[43]=[n("Ref/C\xF3d.")])),_:1}),o(s,{col:"sm4"},{default:a(()=>e[44]||(e[44]=[n("Descri\xE7\xE3o")])),_:1}),o(s,{col:"sm",text:"right"},{default:a(()=>e[45]||(e[45]=[n("Quantidade")])),_:1}),o(s,{col:"sm",text:"right"},{default:a(()=>e[46]||(e[46]=[n("Valor")])),_:1}),o(s,{col:"sm",text:"right"},{default:a(()=>e[47]||(e[47]=[n("Total")])),_:1}),o(s,{col:"sm",maxWidth:"42px",text:"right"},{default:a(()=>e[48]||(e[48]=[n("A\xE7\xF5es")])),_:1})]),_:1}),o(N,{class:"q-mx-xs q-mb-sm"}),(c(!0),C(P,null,H(t.documentoItens,(l,V)=>(c(),C(P,{key:V},[l.operacaoFator===1?(c(),g(v,{key:0,gutter:"sm-x xs-y",items:"center"},{default:a(()=>[o(s,{col:"10",class:"hideondesktop"},{default:a(()=>[o(v,null,{default:a(()=>[o(s,{col:"12"},{default:a(()=>{var h,E,D,F;return[(h=t.itens[l.idItem])!=null&&h.referencia?(c(),C("span",Le,[e[49]||(e[49]=f("span",{class:"text-weight-medium q-pr-xs"},"Ref.:",-1)),n(" "+p((E=t.itens[l.idItem])==null?void 0:E.referencia),1)])):(D=t.itens[l.idItem])!=null&&D.codigoItem?(c(),C("span",Pe,[e[50]||(e[50]=f("span",{class:"text-weight-medium q-pr-xs"},"C\xF3d.:",-1)),n(" #"+p((F=t.itens[l.idItem])==null?void 0:F.codigoItem),1)])):b("",!0)]}),_:2},1024),o(s,{col:"12"},{default:a(()=>[e[51]||(e[51]=f("span",{class:"text-weight-medium q-pr-xs"},"Desc.:",-1)),l.unidade?(c(),g(y,{key:0,rotulo:l.unidade,cor:"tertiary",escuro:""},null,8,["rotulo"])):b("",!0),n(" "+p(l.descricaoItem||"-"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),t.documento.status==="Digita\xE7\xE3o"?(c(),g(s,{key:0,col:"2",text:"center",class:"hideondesktop"},{default:a(()=>[o(q,{onClick:h=>u.excluirItem(l.id),icon:"delete",dense:"",flat:"",round:""},null,8,["onClick"])]),_:2},1024)):b("",!0),o(s,{col:"sm",class:"hideonmobile"},{default:a(()=>[o(A,{lines:"2"},{default:a(()=>{var h,E,D,F;return[(h=t.itens[l.idItem])!=null&&h.referencia?(c(),C("span",Oe,p((E=t.itens[l.idItem])==null?void 0:E.referencia),1)):(D=t.itens[l.idItem])!=null&&D.codigoItem?(c(),C("span",Me," #"+p((F=t.itens[l.idItem])==null?void 0:F.codigoItem),1)):b("",!0)]}),_:2},1024)]),_:2},1024),o(s,{col:"sm4",class:"hideonmobile"},{default:a(()=>[o(A,{lines:"2"},{default:a(()=>[l.unidade?(c(),g(y,{key:0,rotulo:l.unidade,cor:"tertiary",escuro:""},null,8,["rotulo"])):b("",!0),n(" "+p(l.descricaoItem||"-"),1)]),_:2},1024)]),_:2},1024),o(s,{col:"12 sm",text:"right"},{default:a(()=>[o(k,{modelValue:l.quantidade,"onUpdate:modelValue":h=>l.quantidade=h,onMouseover:h=>u.qtdOriginal(l.quantidade),onBlur:h=>u.recalcularTotal(l,l.quantidade!==t.quantidadeOriginal),filled:"",somenteLeitura:t.documento.status==="Finalizado",decimals:"4",tipo:"decimal",rotulo:t.tela.width<992?"Quantidade":""},null,8,["modelValue","onUpdate:modelValue","onMouseover","onBlur","somenteLeitura","rotulo"])]),_:2},1024),o(s,{col:"12 sm",text:"right"},{default:a(()=>[o(k,{modelValue:l.valorItem,"onUpdate:modelValue":h=>l.valorItem=h,onBlur:h=>u.recalcularTotal(l),filled:"",somenteLeitura:t.documento.status==="Finalizado",decimals:"4",tipo:"decimal",rotulo:t.tela.width<992?"Valor":""},null,8,["modelValue","onUpdate:modelValue","onBlur","somenteLeitura","rotulo"])]),_:2},1024),o(s,{col:"12 sm",text:"right"},{default:a(()=>[o(k,{modelValue:l.subTotal,"onUpdate:modelValue":h=>l.subTotal=h,onBlur:h=>u.recalcularValorItem(l),filled:"",somenteLeitura:t.documento.status==="Finalizado",decimals:"4",tipo:"decimal",rotulo:t.tela.width<992?"Total":""},null,8,["modelValue","onUpdate:modelValue","onBlur","somenteLeitura","rotulo"])]),_:2},1024),t.documento.status==="Digita\xE7\xE3o"?(c(),g(s,{key:1,col:"sm",maxWidth:"42px",text:"center",class:"hideonmobile"},{default:a(()=>[o(q,{onClick:h=>u.excluirItem(l.id),icon:"delete",dense:"",flat:"",round:""},null,8,["onClick"])]),_:2},1024)):b("",!0)]),_:2},1024)):b("",!0),l.operacaoFator===1?(c(),g(N,{key:1,class:"q-my-sm q-mx-xs"})):b("",!0)],64))),128)),o(v,{gutter:"sm-x none-y",text:"caption medium",class:"hideonmobile"},{default:a(()=>[o(s,{col:"sm"},{default:a(()=>e[52]||(e[52]=[n("\xA0")])),_:1}),o(s,{col:"sm4"},{default:a(()=>e[53]||(e[53]=[n("\xA0")])),_:1}),o(s,{col:"sm"},{default:a(()=>e[54]||(e[54]=[n("\xA0")])),_:1}),o(s,{col:"sm",text:"right"},{default:a(()=>[n(p(i.$filters.numero(t.totalDestino,2)),1)]),_:1}),o(s,{col:"sm",maxWidth:"42px"},{default:a(()=>e[55]||(e[55]=[n("\xA0")])),_:1})]),_:1}),o(v,{gutter:"sm-x none-y",text:"body2 bold right",class:"hideondesktop"},{default:a(()=>[o(s,{col:"12"},{default:a(()=>[f("span",Se,p(i.$filters.numero(t.totalDestino,2)),1)]),_:1})]),_:1}),o(v,{gutter:"sm-x none-y",text:"center",mg:t.tela.width<992?"md-t xl-b":"md-t"},{default:a(()=>[o(s,{col:"12"},{default:a(()=>[o(q,{onClick:e[14]||(e[14]=l=>u.abrirModal("Destino")),outline:"",size:"sm",label:"Adicionar item",icon:"add",color:"positive"})]),_:1})]),_:1},8,["mg"])]),_:1})]),_:1}),o(v,{gutter:"md",mg:"md-y",bg:"bg-white"},{default:a(()=>[o(s,{col:"12"},{default:a(()=>[o(B,{class:"q-px-none",color:"none","text-color":"black"},{default:a(()=>[o(A,{icon:"content_paste sm tertiary left",text:"sub1 medium"},{default:a(()=>e[56]||(e[56]=[n("Apontamentos")])),_:1}),o(j),t.documento.status==="Digita\xE7\xE3o"?(c(),g(q,{key:0,onClick:e[15]||(e[15]=l=>u.removerTodosApontamentos()),icon:"delete",color:"tertiary",dense:"",flat:"",round:""},{default:a(()=>[o(L,{anchor:"bottom middle",self:"center middle"},{default:a(()=>e[57]||(e[57]=[n(" Remover todos ")])),_:1})]),_:1})):b("",!0),t.documento.status==="Digita\xE7\xE3o"?(c(),g(q,{key:1,onClick:e[16]||(e[16]=l=>u.abrirModalApontamento()),icon:"add",color:"positive",dense:"",flat:"",round:""},{default:a(()=>[o(L,{anchor:"bottom middle",self:"center middle"},{default:a(()=>e[58]||(e[58]=[n(" Adicionar apontamento ")])),_:1})]),_:1})):b("",!0)]),_:1}),o(v,{gutter:"sm-x none-y",text:"caption medium",class:"hideonmobile"},{default:a(()=>[o(s,{col:"sm",maxWidth:"145px"},{default:a(()=>e[59]||(e[59]=[n("Data hora inicio")])),_:1}),o(s,{col:"sm",maxWidth:"145px"},{default:a(()=>e[60]||(e[60]=[n("Data hora fim")])),_:1}),o(s,{col:"sm",maxWidth:"110px"},{default:a(()=>e[61]||(e[61]=[n("Tempo total")])),_:1}),o(s,{col:"sm"},{default:a(()=>e[62]||(e[62]=[n("Equipamentos")])),_:1}),o(s,{col:"sm"},{default:a(()=>e[63]||(e[63]=[n("Operador")])),_:1}),o(s,{col:"sm",maxWidth:"120px",text:"center"},{default:a(()=>e[64]||(e[64]=[n("Quantidade")])),_:1}),o(s,{col:"sm",maxWidth:"120px",text:"center"},{default:a(()=>e[65]||(e[65]=[n("Peso")])),_:1}),o(s,{col:"shrink",text:"center"},{default:a(()=>e[66]||(e[66]=[n("A\xE7\xF5es")])),_:1})]),_:1}),o(N,{class:"q-my-xs"}),(c(!0),C(P,null,H(t.listaApontamentos,(l,V)=>(c(),g(v,{key:V,gutter:"sm-x sm-y",items:"center","rounded-borders":"",bordered:t.tela.width<992,mg:t.tela.width<992?"md-t md-b":""},{default:a(()=>[o(s,{col:"sm",maxWidth:"145px",class:"hideonmobile"},{default:a(()=>[f("span",Te,p(i.$filters.data(l.dataIni))+", ",1),n(" "+p(i.$filters.hora(l.dataIni)),1)]),_:2},1024),o(s,{col:"4",class:"hideondesktop"},{default:a(()=>[e[67]||(e[67]=f("span",{class:"hideondesktop"},[n("Data inicio"),f("br")],-1)),f("span",He,p(i.$filters.data(l.dataIni))+", ",1),n(" "+p(i.$filters.hora(l.dataIni)),1)]),_:2},1024),o(s,{col:"sm",maxWidth:"145px",class:"hideonmobile"},{default:a(()=>[f("span",Ue,p(i.$filters.data(l.dataFim))+", ",1),n(" "+p(i.$filters.hora(l.dataFim)),1)]),_:2},1024),o(s,{col:"4",class:"hideondesktop"},{default:a(()=>[e[68]||(e[68]=f("span",{class:"hideondesktop"},[n("Data fim"),f("br")],-1)),f("span",Be,p(i.$filters.data(l.dataFim))+", ",1),n(" "+p(i.$filters.hora(l.dataFim)),1)]),_:2},1024),o(s,{col:"sm",maxWidth:"110px",text:"right",class:"hideonmobile"},{default:a(()=>[f("span",Qe,p(u.calculoHorasProducao(l.dataFim,l.dataIni)),1),e[69]||(e[69]=f("span",{class:"hideondesktop"},[f("br"),n("\xA0")],-1))]),_:2},1024),o(s,{col:"4",text:"right",class:"hideondesktop"},{default:a(()=>[e[70]||(e[70]=f("span",{class:"hideondesktop"},[n("Tempo total"),f("br")],-1)),f("span",Ne,p(u.calculoHorasProducao(l.dataFim,l.dataIni)),1),e[71]||(e[71]=f("span",{class:"hideondesktop"},[f("br"),n("\xA0")],-1))]),_:2},1024),o(s,{col:"12",bordered:"top",class:"hideondesktop no-padding"}),o(s,{col:"12 sm"},{default:a(()=>[e[72]||(e[72]=f("span",{class:"hideondesktop"},[n("Equipamentos"),f("br")],-1)),n(" "+p(u.buscaEquipamentoApontado(l.equipamento)||"-"),1)]),_:2},1024),o(s,{col:"12",bordered:"top",class:"hideondesktop no-padding"}),o(s,{col:"12 sm"},{default:a(()=>[e[73]||(e[73]=f("span",{class:"hideondesktop"},[n("Operador"),f("br")],-1)),n(" "+p(u.buscaOperadorApontado(l.operador)||"-"),1)]),_:2},1024),o(s,{col:"12",bordered:"top",class:"hideondesktop no-padding"}),o(s,{col:"xs",maxWidth:"120px",text:"center",class:"hideonmobile"},{default:a(()=>[e[74]||(e[74]=f("span",{class:"hideondesktop"},[n("Quantidade"),f("br")],-1)),n(" "+p(i.$filters.numeroZerosDireita(l.quantidade,4,0)),1)]),_:2},1024),o(s,{col:"xs",class:"hideondesktop"},{default:a(()=>[e[75]||(e[75]=f("span",{class:"hideondesktop"},[n("Quantidade"),f("br")],-1)),n(" "+p(i.$filters.numeroZerosDireita(l.quantidade,4,0)),1)]),_:2},1024),o(s,{col:"xs",maxWidth:"120px",text:"center",class:"hideonmobile"},{default:a(()=>[e[76]||(e[76]=f("span",{class:"hideondesktop"},[n("Peso"),f("br")],-1)),n(" "+p(i.$filters.numeroZerosDireita(l.peso,4,0)),1)]),_:2},1024),o(s,{col:"xs",class:"hideondesktop"},{default:a(()=>[e[77]||(e[77]=f("span",{class:"hideondesktop"},[n("Peso"),f("br")],-1)),n(" "+p(i.$filters.numeroZerosDireita(l.peso,4,0)),1)]),_:2},1024),o(s,{col:"shrink",text:"center"},{default:a(()=>[o(q,{onClick:h=>u.excluirApontamento(l.id),icon:"delete",dense:"",flat:"",round:""},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["bordered","mg"]))),128)),o(v,{gutter:"sm-x none-y",mg:"md-t"},{default:a(()=>[o(s,{col:"12",text:"center"},{default:a(()=>[o(q,{onClick:e[17]||(e[17]=l=>u.abrirModalApontamento()),outline:"",size:"sm",icon:"add",label:"Adicionar apontamento",color:"positive"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),o(be,{class:"bg-white shadow-1",bordered:""},{default:a(()=>[o(B,{class:"u-container"},{default:a(()=>[o(j),t.documento.status==="Finalizado"?(c(),g(q,{key:0,onClick:u.reabrir,color:"primary",label:"Reabrir"},null,8,["onClick"])):b("",!0),t.documento.status==="Digita\xE7\xE3o"?(c(),g(q,{key:1,onClick:u.finalizar,color:"primary",label:"Finalizar"},null,8,["onClick"])):b("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]),o(O,{modelValue:t.adicionar.modal.value,"onUpdate:modelValue":e[19]||(e[19]=l=>t.adicionar.modal.value=l),habilitarQuantidade:!0,onSelecionarItens:u.selecionarItens,exibirValorVenda:!1,filtro:{ativo:!0,idEmpresa:t.documento.idEmpresa},ref:"promptItem"},null,8,["modelValue","onSelecionarItens","filtro"]),o(d,{onIncluirApontamento:u.incluirApontamento,habilitarQuantidade:!0,ref:"promptApontamento"},null,8,["onIncluirApontamento"])])}var je=oe(Ie,[["render",We]]);const Re={components:{Lista:ke,ItensManipulacao:je},data(){return{usuario:"",permissao:{vendedoresDigitadores:!1,outrasEmpresas:!1},listaLayout:{},lista:[],mostrar:{header:!0,barraTopo:!0,toolbarTitulo:!0,icone:"mdi-set-center-right",titulo:"Produ\xE7\xE3o (PCP)",buscar:!0,filtroAvancado:!0,btnAjuda:!0,btnAtualizar:!0,btnNovo:!0,toolbarAcoes:!0,checkBox:!1,btnRemover:!1,btnRestaurar:!1,centralizaTabs:!1,btnDetalhes:!0,btnExportaXLS:!1,btnMenuMais:!1,toolbarAdicao:!1,bannerMsg:"",conexao:{icone:"hibrido",iconeTamanho:"xs",cor:"grey-5",rotulo:null,dica:"H\xEDbrido",denso:!0,flat:!0,escuro:!1}},busca:"",filtrosOriginal:{},filtros:{idEmpresa:null,periodoEmissao:{ini:"",fim:""},periodoFinalizado:{ini:"",fim:""},ordenacao:"numero",direcao:"desc"},empresaOpcoes:[],ordenacaoOpcoes:[{value:"numero",label:"N\xFAmero"},{value:"dataHoraEmissao",label:"Data de Emiss\xE3o"},{value:"dataHoraFinalizado",label:"Data Finalizado"}],direcaoOpcoes:[{value:"asc",label:"Crescente"},{value:"desc",label:"Decrescente"}],detalhes:!1,checkBox:!1,tabSelecionada:{valor:"Ativo"},tabs:[{valor:"Ativo",rotulo:"Digita\xE7\xE3o"},{valor:"Finalizado",rotulo:"Finalizados"},{valor:"Todos",rotulo:"Todos"}],paginacao:{atual:1,minimo:1,maximo:1,total:1,limite:25},configImpressao:[]}},watch:{showFilters:function(i){i===!0?this.showList=!1:(this.section===!0||this.kanban===!0||this.gantt===!0)&&(this.showList=!0)}},methods:{async atualizar(i){var r;const e=$utils.logarIni("ListaItensManipulacao");await $tryLoading(async()=>{var v,z,A,O,d,l,V,h,E,D,F,Z,G,J;this.lista=[],this.tabSelecionadaAnt!==this.tabSelecionada.valor&&(this.paginacao.atual=1),this.tabSelecionadaAnt=this.tabSelecionada.valor;let{buscarDadosRecentes:m}=i!=null?i:{},t={},u={};m&&(t=await $utils.localIDB.getItem({objectStore:"dadosRecentes",id:"ListaItensManipulacao_"+((v=this.usuario)==null?void 0:v.id)}),t!=null&&t._id&&(this.tabSelecionada.valor=(t==null?void 0:t.tabSelecionada)||"Ativo",this.busca=(t==null?void 0:t.busca)||null,this.filtros={idEmpresa:((z=t==null?void 0:t.filtros)==null?void 0:z.idEmpresa)||null,periodoEmissao:{ini:((O=(A=t==null?void 0:t.filtros)==null?void 0:A.periodoEmissao)==null?void 0:O.ini)||"",fim:((l=(d=t==null?void 0:t.filtros)==null?void 0:d.periodoEmissao)==null?void 0:l.fim)||""},periodoFinalizado:{ini:((h=(V=t==null?void 0:t.filtros)==null?void 0:V.periodoFinalizado)==null?void 0:h.ini)||"",fim:((D=(E=t==null?void 0:t.filtros)==null?void 0:E.periodoFinalizado)==null?void 0:D.fim)||""},ordenacao:((F=t==null?void 0:t.filtros)==null?void 0:F.ordenacao)||"numero",direcao:((Z=t==null?void 0:t.filtros)==null?void 0:Z.direcao)||"desc"},this.compareObject(this.filtrosOriginal,this.filtros,["status","ordenacao","direcao"])&&(this.$refs.listaItensManipulacao.filtros=!0))),u=this.$utils.eliminarVazios(this.filtros),this.mostrar.checkBox=!1,this.tabSelecionada.valor==="Ativo"?(u.status="Digita\xE7\xE3o",this.mostrar.checkBox=!0):this.tabSelecionada.valor==="Finalizado"&&(u.status="Finalizado"),this.busca&&(this.paginacao.atual=1,/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test(this.busca)?(this.tabSelecionada.valor="Todos",this.mostrar.checkBox=!1,u={id:this.busca}):u.termoBusca=this.busca);const y=[this.filtros.ordenacao],I=[this.filtros.direcao],x=await $db.itemManipulacao.leListaCompleta({filtros:u,limit:this.paginacao.limite,page:this.paginacao.atual,sort:y,dir:I});let s=!0,k=!0;for(const U of x.data)this.listaLayout.hasOwnProperty(U.id)||(this.listaLayout[U.id]={detalhes:!1,remover:!1}),this.listaLayout[U.id].remover||(s=!1),this.listaLayout[U.id].detalhes||(k=!1);this.$refs.listaItensManipulacao.checkbox=(G=x==null?void 0:x.data)!=null&&G.length?s:!1,this.$refs.listaItensManipulacao.detalhes=(J=x==null?void 0:x.data)!=null&&J.length?k:!1,this.lista=x.data,this.paginacao.total=x.total,this.paginacao.maximo=x.totalPages,this.calcularPorcentagem(this.lista),this.configuraImpressao(this.filtros.idEmpresa),t={_id:"ListaItensManipulacao_"+this.usuario.id,tabSelecionada:this.tabSelecionada.valor,busca:this.busca||"",filtros:$utils.clonar(this.filtros)},await $utils.localIDB.setItem({objectStore:"dadosRecentes",data:t})},{mensagem:"Carregando...",erro:"Ocorreu um erro ao consultar"}),$utils.logarFim(e,((r=this.lista)==null?void 0:r.length)||0)},async limparFiltrosClick(){this.filtros=$utils.clonar(this.filtrosOriginal),await this.atualizar()},compareObject(i,e,r=[]){const m=Object.keys(i);for(const t of m)if(!r.includes(t)){if(typeof i[t]=="object"&&i[t]!==null){if(!this.compareObject(i[t],e[t],r))continue;return!0}else if(i[t]!==e[t])return!0}return!1},checkBoxClick(){for(const i of this.lista)this.listaLayout[i.id].remover=this.checkBox,this.mostrar.btnRemover=this.checkBox},async removerClick(){$q.dialog({title:"Remover itens",message:"Deseja remover todos os itens selecionados?",cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(async()=>{try{$q.loading.show();for(const[i,e]of Object.entries(this.listaLayout))e.remover&&await $db.itemManipulacao.remove(i);await this.atualizar(),$q.notifyPositive("Os itens foram removidos com sucesso.")}catch(i){$q.notifyError("Ocorreu um erro ao remover itens",i)}finally{$q.loading.hide()}})},remover(i){$q.dialog({title:"Remover",message:"Ao continuar voc\xEA ir\xE1 remover este item.",cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(async()=>{try{$q.loading.show(),await $db.itemManipulacao.remove(i),await this.atualizar(),$q.notifyPositive("O item foi removido com sucesso.")}catch(e){$q.notifyError("Ocorreu um erro ao remover item",e)}finally{$q.loading.hide()}})},detalhesClick(){this.detalhes=!this.detalhes,this.lista.forEach(i=>{this.abrirDetalhes(i,this.detalhes)})},async abrirDetalhes(i,e){let r=await $db.hibrido.lista({table:"documentoItem",where:{idDocumento:i.id}});if(i.documentoItens=r,this.listaLayout[i.id].detalhes=e||!this.listaLayout[i.id].detalhes,this.listaLayout[i.id].detalhes){let m=await $db.item.leCompleto(i.id);this.listaLayout[i.id].fornecedor=m.atual.fornecedor}this.verificarListaLayout("detalhes")},verificarListaLayout(i){{let e=!0;for(const r of this.lista)this.listaLayout[r.id].remover||(e=!1);this.checkbox=e,this.$refs.listaItensManipulacao.checkbox=e,this.mostrar.btnRemover=Object.values(this.listaLayout).some(r=>r.remover===!0)}{let e=!0;for(const r of this.lista)this.listaLayout[r.id].detalhes||(e=!1);this.detalhes=e,this.$refs.listaItensManipulacao.detalhes=e}},async criarClick(){await this.$refs.itensManipulacao.atualizar(),this.$refs.itensManipulacao.visivel=!0},async abrir(i){this.$router.replace({params:{id:i}}),await this.$refs.itensManipulacao.atualizar(i),this.$refs.itensManipulacao.visivel=!0},async configurarPermissao(){this.permissao={vendedoresDigitadores:await $db.permissao.objeto("Diretiva_RelatorioVenda_VerTodos"),outrasEmpresas:await $db.permissao.objeto("Diretiva_Venda/Fatura_OutrasLojas_VerTodos")}},async configurarEmpresas(){const i=[];let e=[];if(!this.permissao.outrasEmpresas){e=(await $db.contato.ler({filtros:{ativo:!0,empresas:!0}})).data;for(const r of e)i.push({label:r.nome,value:r.id})}if(this.permissao.outrasEmpresas){e=await $db.empresa.ler({filtro:{ativo:!0}});for(const r of e)i.push({label:r.nome,value:r.idContato})}this.empresaOpcoes=i==null?void 0:i.sort((r,m)=>{var t;return(t=r==null?void 0:r.label)==null?void 0:t.localeCompare(m==null?void 0:m.label)})},async configuraImpressao(i){const e=await $db.configuracoes.porNome("impressao.producao",i);this.configImpressao=[...e.length?e.map(r=>({texto:"Imprimir Composi\xE7\xE3o",...r})):[{valor:"Impressao-ordem-producao",texto:"Ordem de Produ\xE7\xE3o"},{valor:"impressao-etiqueta-pcp1",texto:"Etiq. 2 - Semi Acabado"},{valor:"impressao-etiqueta-pcp2",texto:"Etiq. 1 - Acabado"}]]},async calcularPorcentagem(i){for(let e=0;e<i.length;e++){let r=0,m=0,t=await $db.hibrido.lista({table:"documentoItem",where:{idDocumento:i[e].id}}),u=t.filter(({tipoItem:y})=>y==="ApontamentoPCP");t.forEach((y,I)=>{y?y.operacaoFator===1&&(r+=y.quantidade):r+=0}),u.forEach((y,I)=>{y?y.tipoItem==="ApontamentoPCP"&&(m+=y.quantidade):m+=0}),r===0?(i[e].porcentagemApontamento=0,i[e].porcentagemApontamentoLabel="0 %"):(i[e].porcentagemApontamento=m/r,i[e].porcentagemApontamentoLabel=`${Math.round(m/r*100)} %`)}}},async mounted(){this.usuario=JSON.parse(localStorage.getItem("usuario")),this.filtrosOriginal=$utils.clonar(this.filtros),await this.configurarPermissao(),await this.configurarEmpresas(),this.$route.params.id&&this.$route.params.id.length?(this.$refs.itensManipulacao.atualizar(this.$route.params.id),this.$refs.itensManipulacao.visivel=!0,this.busca=this.$route.params.id,await this.atualizar()):await this.atualizar({buscarDadosRecentes:!0})}},Ze={id:"ListaItensManipulacao"},Ge={class:"mw80 text-center"},Je={class:"text-weight-medium q-mr-xs"},$e={class:"text-weight-medium q-mr-xs"},Ke={class:"absolute-full flex flex-center"},Xe={class:"absolute-full flex flex-center"},Ye={class:"text-weight-bold"},eo={class:"text-weight-bold"};function oo(i,e,r,m,t,u){const y=_("campo"),I=_("BadgeCopiarUid"),x=_("avatar"),s=_("badge"),k=_("g-label"),v=_("g-col"),z=_("g-row"),A=_("Lista"),O=_("ItensManipulacao");return c(),C("div",Ze,[o(A,{ref:"listaItensManipulacao",busca:t.busca,"onUpdate:busca":e[10]||(e[10]=d=>t.busca=d),checkBox:t.checkBox,"onUpdate:checkBox":e[11]||(e[11]=d=>t.checkBox=d),onAtualizar:u.atualizar,onCheckBoxClick:u.checkBoxClick,onCriarClick:u.criarClick,onDetalhesClick:u.detalhesClick,onLimparFiltrosClick:u.limparFiltrosClick,onRemoverClick:u.removerClick,lista:t.lista,tabSelecionada:t.tabSelecionada,tabs:t.tabs,paginacao:t.paginacao,mostrar:t.mostrar},{filtroCampos:a(()=>[o(y,{modelValue:t.filtros.idEmpresa,"onUpdate:modelValue":e[0]||(e[0]=d=>t.filtros.idEmpresa=d),options:t.empresaOpcoes,clearable:"",dense:"",tipo:"seletor",rotulo:"Por empresa",class:"q-mt-sm"},null,8,["modelValue","options"]),o(y,{modelValue:t.filtros.periodoEmissao.ini,"onUpdate:modelValue":e[1]||(e[1]=d=>t.filtros.periodoEmissao.ini=d),dense:"",clearable:"",tipo:"data",rotulo:"Emiss\xE3o de",class:"q-mt-xl"},null,8,["modelValue"]),o(y,{modelValue:t.filtros.periodoEmissao.fim,"onUpdate:modelValue":e[2]||(e[2]=d=>t.filtros.periodoEmissao.fim=d),dense:"",clearable:"",tipo:"data",rotulo:"At\xE9",class:"q-mt-xs"},null,8,["modelValue"]),o(y,{modelValue:t.filtros.periodoFinalizado.ini,"onUpdate:modelValue":e[3]||(e[3]=d=>t.filtros.periodoFinalizado.ini=d),dense:"",clearable:"",tipo:"data",rotulo:"Finalizado de",class:"q-mt-xl"},null,8,["modelValue"]),o(y,{modelValue:t.filtros.periodoFinalizado.fim,"onUpdate:modelValue":e[4]||(e[4]=d=>t.filtros.periodoFinalizado.fim=d),dense:"",clearable:"",tipo:"data",rotulo:"At\xE9",class:"q-mt-xs"},null,8,["modelValue"]),o(y,{modelValue:t.filtros.ordenacao,"onUpdate:modelValue":e[5]||(e[5]=d=>t.filtros.ordenacao=d),options:t.ordenacaoOpcoes,dense:"",rotuloFixo:"Ordenar por",tipo:"seletor",class:"q-mt-xl"},null,8,["modelValue","options"]),o(y,{modelValue:t.filtros.direcao,"onUpdate:modelValue":e[6]||(e[6]=d=>t.filtros.direcao=d),options:t.direcaoOpcoes,dense:"",rotuloFixo:"Dire\xE7\xE3o",tipo:"seletor",class:"q-mt-sm"},null,8,["modelValue","options"]),o(y,{modelValue:t.paginacao.limite,"onUpdate:modelValue":e[7]||(e[7]=d=>t.paginacao.limite=d),tipo:"quantidade",dense:"",min:"1",rotulo:"Quantidade por p\xE1gina",class:"q-mt-xl q-mb-md"},null,8,["modelValue"])]),itemLista:a(()=>[o(X,{bordered:"",class:"bg-white q-mb-xs rounded-borders"},{default:a(()=>[(c(!0),C(P,null,H(t.lista,d=>(c(),C("div",{key:d.id,class:"itemHover"},[o(M,{"manual-focus":"",class:"q-py-sm q-px-xs items-center d-flex"},{default:a(()=>[o(w,{class:"hideonmobile col-auto no-margin"},{default:a(()=>[o(M,{class:"q-pa-none"},{default:a(()=>[this.mostrar.checkBox?(c(),g(w,{key:0,side:"",class:"col-auto q-pa-none"},{default:a(()=>[o(Y,{modelValue:t.listaLayout[d.id].remover,"onUpdate:modelValue":l=>t.listaLayout[d.id].remover=l,onClick:e[8]||(e[8]=l=>u.verificarListaLayout("checkbox"))},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):b("",!0),o(w,{side:"",class:"col-auto q-pa-none"},{default:a(()=>[f("div",Ge,[o(I,{id:d.id,numero:d.numero,cor:d.status==="Finalizado"?"positive":"tertiary",dica:d.numero?"N\xFAmero":"ID"},null,8,["id","numero","cor","dica"])])]),_:2},1024)]),_:2},1024)]),_:2},1024),o(w,{class:"col-md col-lg col-xl no-margin"},{default:a(()=>[o(M,{class:"q-pa-none"},{default:a(()=>[o(w,{class:"col-auto items-center"},{default:a(()=>[o(x,{onClick:l=>u.abrir(d.id),imagem:d.imagem,rotulo:d.descricaoEmpresa,tamanho:"40",class:"cursor-pointer",style:{display:"flex","align-self":"center"}},null,8,["onClick","imagem","rotulo"]),this.mostrar.checkBox?(c(),g(Y,{key:0,modelValue:t.listaLayout[d.id].remover,"onUpdate:modelValue":l=>t.listaLayout[d.id].remover=l,onClick:e[9]||(e[9]=l=>u.verificarListaLayout("checkbox")),class:"hideondesktop q-mt-md"},null,8,["modelValue","onUpdate:modelValue"])):b("",!0)]),_:2},1024),o(w,{onClick:l=>u.abrir(d.id),class:"col cursor-pointer"},{default:a(()=>[o(Q,{lines:"2",class:"text-weight-bold"},{default:a(()=>[f("span",null,[n(p(d.descricaoEmpresa)+" ",1),o(L,{anchor:"bottom middle",self:"center middle"},{default:a(()=>e[12]||(e[12]=[n(" Empresa ")])),_:1})])]),_:2},1024),d.descricaoContato?(c(),g(Q,{key:0,caption:"",lines:"2"},{default:a(()=>[f("span",null,[o(S,{name:"person"}),n(" "+p(d.descricaoContato)+" ",1),o(L,{anchor:"bottom middle",self:"center middle"},{default:a(()=>e[13]||(e[13]=[n("Respons\xE1vel")])),_:1})])]),_:2},1024)):b("",!0),d.id||d.numero||d.operacao?(c(),g(w,{key:1,class:"hideondesktop no-margin q-pt-sm"},{default:a(()=>[f("div",null,[o(I,{id:d.id,numero:d.numero,dica:"ID Item",cor:d.status==="Finalizado"?"positive":"tertiary",class:"col-auto q-mr-sm"},null,8,["id","numero","cor"]),o(s,{rotulo:d.operacao,escuro:"",cor:"tertiary",dica:"Opera\xE7\xE3o",class:"col-auto"},null,8,["rotulo"])])]),_:2},1024)):b("",!0),d.dataHoraEmissao||d.dataHoraFinalizado?(c(),g(w,{key:2,class:"hideondesktop no-margin"},{default:a(()=>[o(M,{class:"q-pa-none"},{default:a(()=>[o(w,{class:"no-margin"},{default:a(()=>[d.dataHoraEmissao?(c(),g(Q,{key:0,caption:""},{default:a(()=>[o(S,{name:"mdi-calendar-today",style:{"margin-right":"2px"}}),f("span",Je,p(i.$filters.data(d.dataHoraEmissao)),1),n(" "+p(i.$filters.hora(d.dataHoraEmissao)),1)]),_:2},1024)):b("",!0)]),_:2},1024),o(w,{class:"no-margin"},{default:a(()=>[t.tabSelecionada.valor!=="digitacao"&&d.dataHoraFinalizado?(c(),g(Q,{key:0,caption:""},{default:a(()=>[o(S,{name:"mdi-calendar",style:{"margin-right":"2px"}}),f("span",$e,p(i.$filters.data(d.dataHoraFinalizado)),1),n(" "+p(i.$filters.hora(d.dataHoraFinalizado)),1)]),_:2},1024)):b("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)):b("",!0),d.porcentagemApontamento>0?(c(),g(w,{key:3,class:"hideondesktop no-margin"},{default:a(()=>[o(ee,{stripe:"",rounded:"",value:d.porcentagemApontamento,size:"28px",color:"positive"},{default:a(()=>[f("div",Ke,[o(s,{rotulo:d.porcentagemApontamentoLabel,cor:"white",dark:""},null,8,["rotulo"])])]),_:2},1032,["value"])]),_:2},1024)):b("",!0)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024),o(w,{onClick:l=>u.abrir(d.id),class:"hideonmobile maxw100 q-pl-sm no-margin"},{default:a(()=>[d.dataHoraEmissao?(c(),g(Q,{key:0,caption:"",class:"text-weight-medium"},{default:a(()=>[f("span",null,[o(S,{name:"mdi-calendar-today"}),n(" "+p(i.$filters.data(d.dataHoraEmissao))+" ",1),o(L,{anchor:"bottom middle",self:"center middle"},{default:a(()=>[n(" Emitido \xE0s "+p(i.$filters.hora(d.dataHoraEmissao)),1)]),_:2},1024)])]),_:2},1024)):b("",!0),t.tabSelecionada.valor!=="digitacao"&&d.dataHoraFinalizado?(c(),g(Q,{key:1,caption:"",class:"text-weight-medium"},{default:a(()=>[f("span",null,[o(S,{name:"mdi-calendar"}),n(" "+p(i.$filters.data(d.dataHoraFinalizado))+" ",1),o(L,{anchor:"bottom middle",self:"center middle"},{default:a(()=>[n(" Finalizado \xE1s "+p(i.$filters.hora(d.dataHoraFinalizado)),1)]),_:2},1024)])]),_:2},1024)):b("",!0)]),_:2},1032,["onClick"]),o(w,{onClick:l=>u.abrir(d.id),class:"hideonmobile maxw160 q-pl-sm no-margin"},{default:a(()=>[d.porcentagemApontamento>0?(c(),g(ee,{key:0,stripe:"",rounded:"",value:d.porcentagemApontamento,size:"28px",color:"positive"},{default:a(()=>[f("div",Xe,[o(s,{rotulo:d.operacao,cor:"white",dark:""},null,8,["rotulo"])]),o(L,{anchor:"bottom middle",self:"center middle"},{default:a(()=>[n(p(d.porcentagemApontamentoLabel)+" Conclu\xEDda ",1)]),_:2},1024)]),_:2},1032,["value"])):(c(),g(s,{key:1,rotulo:d.operacao,escuro:"",cor:"tertiary",dica:"Opera\xE7\xE3o",class:"col-auto q-mx-auto"},null,8,["rotulo"]))]),_:2},1032,["onClick"]),o(w,{class:"col-auto no-margin"},{default:a(()=>[o(M,{class:"q-pa-none"},{default:a(()=>[o(w,{class:"no-margin hideonmobile",style:{width:"32px"}},{default:a(()=>[o(q,{onClick:l=>u.abrirDetalhes(d),dense:"",flat:"",round:"",color:"tertiary",size:"md",icon:t.listaLayout[d.id].detalhes?"keyboard_arrow_up":"keyboard_arrow_down",class:"hideonmobile"},null,8,["onClick","icon"])]),_:2},1024),o(w,{class:"no-margin hideonmobile",style:{width:"32px"}},{default:a(()=>[o(q,{onClick:l=>u.abrir(d.id),dense:"",flat:"",round:"",icon:"edit",size:"md",color:"primary",class:"hideonmobile"},null,8,["onClick"])]),_:2},1024),o(w,{class:"no-margin",style:{width:"32px"}},{default:a(()=>[o(q,{icon:"more_vert",size:"md",round:"",flat:"",dense:""},{default:a(()=>[o(ye,null,{default:a(()=>[te((c(),g(X,{link:"","no-border":"",separator:""},{default:a(()=>[o(M,{onClick:l=>u.abrir(d.id),clickable:"",class:"hideondesktop"},{default:a(()=>[o(w,{avatar:""},{default:a(()=>[o(S,{name:"edit"})]),_:1}),o(w,null,{default:a(()=>e[14]||(e[14]=[n("Editar")])),_:1})]),_:2},1032,["onClick"]),o(M,{onClick:l=>u.abrirDetalhes(d),clickable:"",class:"hideondesktop"},{default:a(()=>[o(w,{avatar:""},{default:a(()=>[o(S,{name:t.listaLayout[d.id].detalhes?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])]),_:2},1024),o(w,null,{default:a(()=>e[15]||(e[15]=[n("Ver detalhes")])),_:1})]),_:2},1032,["onClick"]),t.tabSelecionada.valor==="Ativo"?(c(),g(M,{key:0,onClick:l=>u.remover(d.id),clickable:""},{default:a(()=>[o(w,{avatar:""},{default:a(()=>[o(S,{name:"delete"})]),_:1}),o(w,null,{default:a(()=>e[16]||(e[16]=[n("Remover")])),_:1})]),_:2},1032,["onClick"])):b("",!0),(c(!0),C(P,null,H(t.configImpressao.filter(l=>l.valor),l=>(c(),g(M,{key:l.valor,onClick:V=>i.$imprimir(l.valor,(d||{}).id||"0"),clickable:""},{default:a(()=>[o(w,{avatar:""},{default:a(()=>[o(S,{name:"print"})]),_:1}),o(w,null,{default:a(()=>[n(p(l.texto),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:2},1024)),[[ae]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),t.listaLayout[d.id].detalhes?(c(),g(z,{key:0,gutter:"md-x lg-y"},{default:a(()=>[o(v,{col:"12 sm6",bordered:""},{default:a(()=>[o(k,{icon:"flag xs tertiary left"},{default:a(()=>e[17]||(e[17]=[n("Origem")])),_:1}),(c(!0),C(P,null,H(d.documentoItens,l=>(c(),C(P,{key:l.id},[l.operacaoFator===-1?(c(),g(k,{key:0,class:"q-pl-lg q-pt-sm"},{default:a(()=>[f("span",Ye,p(l.quantidade),1),l.unidade?(c(),g(s,{key:0,rotulo:l.unidade,cor:"tertiary",escuro:"",class:"col-auto q-mx-sm"},null,8,["rotulo"])):b("",!0),f("span",null,p(l.descricaoItem),1)]),_:2},1024)):b("",!0)],64))),128))]),_:2},1024),o(v,{col:"12 sm6",bordered:""},{default:a(()=>[o(k,{icon:"location_on xs tertiary left"},{default:a(()=>e[18]||(e[18]=[n("Destino")])),_:1}),(c(!0),C(P,null,H(d.documentoItens,l=>(c(),C(P,{key:l.id},[l.operacaoFator===1?(c(),g(k,{key:0,class:"q-pl-lg q-pt-sm"},{default:a(()=>[f("span",eo,p(l.quantidade),1),l.unidade?(c(),g(s,{key:0,rotulo:l.unidade,cor:"tertiary",escuro:"",class:"col-auto q-mx-sm"},null,8,["rotulo"])):b("",!0),f("span",null,p(l.descricaoItem),1)]),_:2},1024)):b("",!0)],64))),128))]),_:2},1024)]),_:2},1024)):b("",!0),d.id?(c(),g(N,{key:1})):b("",!0)]))),128))]),_:1})]),_:1},8,["busca","checkBox","onAtualizar","onCheckBoxClick","onCriarClick","onDetalhesClick","onLimparFiltrosClick","onRemoverClick","lista","tabSelecionada","tabs","paginacao","mostrar"]),o(O,{onAtualizar:u.atualizar,ref:"itensManipulacao"},null,8,["onAtualizar"])])}var lo=oe(Re,[["render",oo]]);export{lo as default};
