import{_ as oa,ar as A,r as h,o as p,p as x,f as e,bI as la,w as l,P as $,F as O,u as ta,d as D,S as k,T as m,C,U as b,k as n,t as c,m as q,j as g,e as w,Q as S,be as ia,H as sa,N as na,l as ra,M as da,L as ua,E as ma,G as ca,h as fa,i as pa,I as ba,J as Va,K as ga,bq as va,D as Ca}from"./index.e4706d50.js";import{L as ha}from"./Lista.82deb5a1.js";import{S as xa}from"./SeletorEmpresa.ee55f79a.js";const wa=()=>{const a=new Date;a.setDate(a.getDate()+1),a.setHours(0,0,0,0);const d=60,V=new Date;return V.setDate(V.getDate()+d),V.setHours(0,0,0,0),{visivel:!0,dadosEmpresa:{},id:$utils.uuid(),nomeCliente:"",cpfCliente:"",whatsappCliente:"",diasMinimoUso:1,dataInicioValidade:A.formatDate(a),diasExpiracao:d,dataVencimento:A.formatDate(V),valor:1,valorMinimoVenda:10,observacao:"",textoRegras:""}},ya={components:{Lista:ha,SeletorEmpresa:xa},data(){return{usuario:"",lista:[],mostrar:{header:!0,barraTopo:!0,toolbarTitulo:!0,icone:"",titulo:"",buscar:!0,filtroAvancado:!0,btnAjuda:!0,btnAtualizar:!0,btnNovo:!0,toolbarAcoes:!0,checkBox:!1,btnRemover:!1,btnRestaurar:!1,centralizaTabs:!1,btnDetalhes:!0,btnExportaXLS:!1,btnMenuMais:!1,toolbarAdicao:!1,bannerMsg:""},busca:"",contatoEmpresas:[],filtrosOriginal:{},filtros:{tokenBonus:"",cliente:"",cpfCliente:"",whatsappCliente:"",idEmpresa:"",idVendedor:"",idDocumentoOrigem:"",dataVencimento:{ini:"",fim:""},dataHoraCriacao:{ini:"",fim:""},dataInicioValidade:{ini:"",fim:""},dataHoraFinalizado:{ini:"",fim:""},valor:0,valorMinimoVenda:0,ordenacao:"dataHoraCriacao",direcao:"desc"},opcoesVendedores:[],ordenacaoOpcoes:[{value:"dataHoraCriacao",label:"Data Cria\xE7\xE3o"},{value:"dataInicioValidade",label:"Data Cria\xE7\xE3o"},{value:"dataHoraFinalizado",label:"Data Finalizado"},{value:"dataVencimento",label:"Data Vencimento"}],direcaoOpcoes:[{value:"asc",label:"Crescente"},{value:"desc",label:"Decrescente"}],detalhes:!1,tabSelecionada:{valor:"Ativo"},tabs:[{valor:"Ativo",rotulo:"Ativos"},{valor:"Utilizado",rotulo:"Utilizados"},{valor:"Vencido",rotulo:"Vencidos"},{valor:"Cancelado",rotulo:"Cancelados"},{valor:"Todos",rotulo:"Todos"}],paginacao:{atual:1,maximo:1,total:1,limite:25},bonus:{},tela:{width:0,heihgt:0}}},methods:{async atualizar(s){var a,d,V,t,u,r,U,y,z,B,v,f,E,M,o,F,L,Q,N,T,P,j,W,K,J,G,X,Y,Z;try{$q.loading.show(),this.lista=[],this.tabSelecionadaAnt!==this.tabSelecionada.valor&&(this.paginacao.atual=1),this.tabSelecionadaAnt=this.tabSelecionada.valor;let{buscarDadosRecentes:_}=s!=null?s:{},i={},I={};_&&(i=await $utils.localIDB.getItem({objectStore:"dadosRecentes",id:"BonusLista_"+((a=this.usuario)==null?void 0:a.id)}),i!=null&&i._id&&(this.tabSelecionada.valor=(i==null?void 0:i.tabSelecionada)||"Ativo",this.busca=(i==null?void 0:i.busca)||"",this.filtros={tokenBonus:((d=i==null?void 0:i.filtros)==null?void 0:d.tokenBonus)||"",cliente:((V=i==null?void 0:i.filtros)==null?void 0:V.cliente)||"",cpfCliente:((t=i==null?void 0:i.filtros)==null?void 0:t.cpfCliente)||"",whatsappCliente:((u=i==null?void 0:i.filtros)==null?void 0:u.whatsappCliente)||"",idEmpresa:((r=i==null?void 0:i.filtros)==null?void 0:r.idEmpresa)||"",idVendedor:((U=i==null?void 0:i.filtros)==null?void 0:U.idVendedor)||"",idDocumentoOrigem:((y=i==null?void 0:i.filtros)==null?void 0:y.idDocumentoOrigem)||"",dataVencimento:{ini:((B=(z=i==null?void 0:i.filtros)==null?void 0:z.dataVencimento)==null?void 0:B.ini)||"",fim:((f=(v=i==null?void 0:i.filtros)==null?void 0:v.dataVencimento)==null?void 0:f.fim)||""},dataHoraCriacao:{ini:((M=(E=i==null?void 0:i.filtros)==null?void 0:E.dataHoraCriacao)==null?void 0:M.ini)||"",fim:((F=(o=i==null?void 0:i.filtros)==null?void 0:o.dataHoraCriacao)==null?void 0:F.fim)||""},dataInicioValidade:{ini:((Q=(L=i==null?void 0:i.filtros)==null?void 0:L.dataInicioValidade)==null?void 0:Q.ini)||"",fim:((T=(N=i==null?void 0:i.filtros)==null?void 0:N.dataInicioValidade)==null?void 0:T.fim)||""},dataHoraFinalizado:{ini:((j=(P=i==null?void 0:i.filtros)==null?void 0:P.dataHoraFinalizado)==null?void 0:j.ini)||"",fim:((K=(W=i==null?void 0:i.filtros)==null?void 0:W.dataHoraFinalizado)==null?void 0:K.fim)||""},valor:((J=i==null?void 0:i.filtros)==null?void 0:J.idEmpresa)||0,valorMinimoVenda:((G=i==null?void 0:i.filtros)==null?void 0:G.idEmpresa)||0,ordenacao:((X=i==null?void 0:i.filtros)==null?void 0:X.ordenacao)||"dataHoraCriacao",direcao:((Y=i==null?void 0:i.filtros)==null?void 0:Y.direcao)||"desc"},this.compareObject(this.filtrosOriginal,this.filtros,["ordenacao","direcao"])&&(this.$refs.bonusLista.filtros=!0))),I=$utils.eliminarVazios(this.filtros),delete I.status,this.tabSelecionada.valor!=="Todos"&&(I.status=this.tabSelecionada.valor);const aa=[this.filtros.ordenacao],ea=[this.filtros.direcao],H=await $db.bonus.leListaCompleta({filtros:I,limit:this.paginacao.limite,page:this.paginacao.atual,sort:aa,dir:ea});for(const R of H.data)R.detalhes=!1;this.$refs.bonusLista.detalhes=!1,this.lista=H.data,this.paginacao.total=H.total,this.paginacao.maximo=H.totalPages,i={_id:"BonusLista_"+((Z=this.usuario)==null?void 0:Z.id),tabSelecionada:this.tabSelecionada.valor,busca:this.busca,filtros:$utils.clonar(this.filtros)},await $utils.localIDB.setItem({objectStore:"dadosRecentes",data:i})}catch(_){$q.notifyError("Erro iniciar",_)}finally{$q.loading.hide()}},async contatoEmpresasCarregar(){this.contatoEmpresas=await $db.contatoEmpresa.listaCache()},async criarClick(){this.bonus=wa(),this.bonus.dadosEmpresa=this.contatoEmpresas[0]},fecharBonus(){this.bonus={}},async salvarBonus(){await $tryLoading("Salvando...",async()=>{var s,a;await $utils.geeksApi({geraBonusManual:{funcao:"8FC942DF-1793-48EA-8DEE-9D19909EF233",valor:this.bonus.valor,funcao:"8FC942DF-1793-48EA-8DEE-9D19909EF233",dataInicioValidade:this.bonus.dataInicioValidade,dataVencimento:this.bonus.dataVencimento,cnpjEmissor:(s=this.bonus.dadosEmpresa)==null?void 0:s.numeroDocumentoNacional,nomeEmissor:(a=this.bonus.dadosEmpresa)==null?void 0:a.apelido,cpfCliente:this.bonus.cpfCliente,nomeCliente:this.bonus.nomeCliente,whatsappCliente:this.bonus.whatsappCliente,valor:this.bonus.valor,valorMinimoVenda:this.bonus.valorMinimoVenda,observacao:this.bonus.observacao,textoRegras:this.bonus.textoRegras}}),this.bonus={},await this.atualizar(),$q.notifyPositive("B\xF4nus criado com sucesso")})},async cancelarBonus(s){!await $q.dialogSimNao({title:"Cancelar B\xF4nus",message:`Deseja cancelar o B\xF4nus de R$ ${$filters.numero(s.valor,2)} para ${s.nomeCliente}?`})||await $tryLoading("Cancelando...",async()=>{var d,V;const a=await $utils.geeksApi({cancelaBonus:{funcao:"459C0A26-6F81-4B5D-B427-B915142C6283",id:s.id}});$q.notifyPositive(((V=(d=a.data)==null?void 0:d.cancelaBonus)==null?void 0:V.mensagem)||"B\xF4nus cancelado com sucesso"),await this.atualizar()})},detalhesClick(){this.detalhes=!this.detalhes,this.lista.forEach(s=>{s.detalhes=this.detalhes})},abrirFecharDetalhes(s){s.detalhes=!s.detalhes},async limparFiltrosClick(){this.filtros=$utils.clonar(this.filtrosOriginal),await this.atualizar()},async abrirModalCliente(){var a,d;const s=await $g.promptContato.show({filtro:{ativo:!0}});!(s!=null&&s.id)||(this.bonus.cpfCliente=s.numeroDocumentoNacional,this.bonus.nomeCliente=s.nome,this.bonus.whatsappCliente=(d=(a=await $db.hibrido.lista({table:"contatoTelefone",where:{idContato:s==null?void 0:s.id},whereFilter:{tipoTelefone:"WhatsApp"}}))==null?void 0:a[0])==null?void 0:d.telefone)},async abrirModalContatoFiltro(){const s=await $g.promptContato.show({filtro:{ativo:!0}});!(s!=null&&s.id)||(this.filtros.cliente=s.nome)},recalcularDiasExpiracao(s){const a=new Date(s.dataVencimento);if(!a||isNaN(a))return;const d=a-new Date;s.diasExpiracao=Math.ceil(d/1e3/60/60/24)},recalcularVencimento(s){const a=Number(s.diasExpiracao),d=new Date;d.setDate(d.getDate()+a),d.setHours(0,0,0,0),s.dataVencimento=A.formatDate(d)},recalcularDiasMinimoUso(s){const a=new Date(s.dataInicioValidade);if(!a||isNaN(a))return;const d=a-new Date;s.diasMinimoUso=Math.ceil(d/1e3/60/60/24)},recalcularInicioValidade(s){const a=Number(s.diasMinimoUso),d=new Date;d.setDate(d.getDate()+a),d.setHours(0,0,0,0),s.dataInicioValidade=A.formatDate(d)},compareObject(s,a,d=[]){const V=Object.keys(s);for(const t of V)if(!d.includes(t)){if(typeof s[t]=="object"&&s[t]!==null){if(!this.compareObject(s[t],a[t],d))continue;return!0}else if(s[t]!==a[t])return!0}return!1},resize(){const s=document.getElementById("BonusLista");s&&(this.tela={width:s.offsetWidth,height:s.offsetHeight})}},async mounted(){this.usuario=JSON.parse(localStorage.getItem("usuario")),this.filtrosOriginal=$utils.clonar(this.filtros),this.contatoEmpresasCarregar(),await this.atualizar({buscarDadosRecentes:!0})}},Da={id:"BonusLista"},ka={class:"mw80 text-center"},qa={key:0},Ea={key:1},Ua={key:0},Ba={class:"text-weight-medium q-pl-xs"},Fa={key:1},za={class:"text-weight-medium q-px-sm"},Ma={class:"text-center"};function Ia(s,a,d,V,t,u){const r=h("campo"),U=h("SeletorEmpresa"),y=h("BadgeCopiarUid"),z=h("avatar"),B=h("badge"),v=h("g-label"),f=h("g-col"),E=h("g-row"),M=h("Lista");return p(),x("div",Da,[e(la,{onResize:a[0]||(a[0]=o=>u.resize())}),e(M,{ref:"bonusLista",busca:t.busca,"onUpdate:busca":a[20]||(a[20]=o=>t.busca=o),onAtualizar:u.atualizar,onCriarClick:u.criarClick,onDetalhesClick:u.detalhesClick,onLimparFiltrosClick:u.limparFiltrosClick,lista:t.lista,tabSelecionada:t.tabSelecionada,tabs:t.tabs,paginacao:t.paginacao,mostrar:t.mostrar},{filtroCampos:l(()=>[e(r,{modelValue:t.filtros.tokenBonus,"onUpdate:modelValue":a[1]||(a[1]=o=>t.filtros.tokenBonus=o),clearable:"",dense:"",tipo:"texto",rotulo:"Token do B\xF4nus",class:"q-mt-sm q-mb-md"},null,8,["modelValue"]),e(r,{modelValue:t.filtros.cliente,"onUpdate:modelValue":a[2]||(a[2]=o=>t.filtros.cliente=o),debounce:500,dense:"",before:[{icon:"search",handler:u.abrirModalContatoFiltro}],rotulo:"Cliente",class:"col-12 q-mt-md"},null,8,["modelValue","before"]),e(r,{modelValue:t.filtros.whatsappCliente,"onUpdate:modelValue":a[3]||(a[3]=o=>t.filtros.whatsappCliente=o),clearable:"",dense:"",tipo:"numero",rotulo:"WhatsApp",class:"q-mt-lg"},null,8,["modelValue"]),e(U,{modelValue:t.filtros.dadosEmpresa,"onUpdate:modelValue":a[4]||(a[4]=o=>t.filtros.dadosEmpresa=o),rotulo:"Por empresa",chaves:["id","nome","apelido","numeroDocumentoNacional"],class:"q-mt-md"},null,8,["modelValue"]),e(r,{modelValue:t.filtros.idVendedor,"onUpdate:modelValue":a[5]||(a[5]=o=>t.filtros.idVendedor=o),options:t.opcoesVendedores,clearable:"",dense:"",tipo:"seletor",rotulo:"Vendedor"},null,8,["modelValue","options"]),e(r,{modelValue:t.filtros.idDocumentoOrigem,"onUpdate:modelValue":a[6]||(a[6]=o=>t.filtros.idDocumentoOrigem=o),clearable:"",dense:"",tipo:"texto",rotulo:"ID Doc. Origem",class:"q-mt-md"},null,8,["modelValue"]),e(r,{modelValue:t.filtros.dataVencimento.ini,"onUpdate:modelValue":a[7]||(a[7]=o=>t.filtros.dataVencimento.ini=o),clearable:"",dense:"",tipo:"data",rotulo:"Vencimento de",class:"col-12 q-mt-xl"},null,8,["modelValue"]),e(r,{modelValue:t.filtros.dataVencimento.fim,"onUpdate:modelValue":a[8]||(a[8]=o=>t.filtros.dataVencimento.fim=o),clearable:"",dense:"",tipo:"data",rotulo:"at\xE9",class:"col-12 q-mt-xs"},null,8,["modelValue"]),e(r,{modelValue:t.filtros.dataHoraCriacao.ini,"onUpdate:modelValue":a[9]||(a[9]=o=>t.filtros.dataHoraCriacao.ini=o),clearable:"",dense:"",tipo:"data",rotulo:"Emiss\xE3o de",class:"col-12 q-mt-xl"},null,8,["modelValue"]),e(r,{modelValue:t.filtros.dataHoraCriacao.fim,"onUpdate:modelValue":a[10]||(a[10]=o=>t.filtros.dataHoraCriacao.fim=o),clearable:"",dense:"",tipo:"data",rotulo:"at\xE9",class:"col-12 q-mt-xs"},null,8,["modelValue"]),e(r,{modelValue:t.filtros.dataInicioValidade.ini,"onUpdate:modelValue":a[11]||(a[11]=o=>t.filtros.dataInicioValidade.ini=o),clearable:"",dense:"",tipo:"data",rotulo:"Emiss\xE3o de",class:"col-12 q-mt-xl"},null,8,["modelValue"]),e(r,{modelValue:t.filtros.dataInicioValidade.fim,"onUpdate:modelValue":a[12]||(a[12]=o=>t.filtros.dataInicioValidade.fim=o),clearable:"",dense:"",tipo:"data",rotulo:"at\xE9",class:"col-12 q-mt-xs"},null,8,["modelValue"]),e(r,{modelValue:t.filtros.dataHoraFinalizado.ini,"onUpdate:modelValue":a[13]||(a[13]=o=>t.filtros.dataHoraFinalizado.ini=o),clearable:"",dense:"",tipo:"data",rotulo:"Finalizado de",class:"col-12 q-mt-xl"},null,8,["modelValue"]),e(r,{modelValue:t.filtros.dataHoraFinalizado.fim,"onUpdate:modelValue":a[14]||(a[14]=o=>t.filtros.dataHoraFinalizado.fim=o),clearable:"",dense:"",tipo:"data",rotulo:"at\xE9",class:"col-12 q-mt-xs"},null,8,["modelValue"]),e(r,{modelValue:t.filtros.valor,"onUpdate:modelValue":a[15]||(a[15]=o=>t.filtros.valor=o),dense:"",tipo:"decimal",min:"0",decimals:"4",zerosDireita:"2",rotulo:"Valor venda",class:"col-12 q-mt-xl"},null,8,["modelValue"]),e(r,{modelValue:t.filtros.valorMinimoVenda,"onUpdate:modelValue":a[16]||(a[16]=o=>t.filtros.valorMinimoVenda=o),dense:"",tipo:"decimal",min:"0",decimals:"4",zerosDireita:"2",rotulo:"Valor m\xEDnimo da compra",class:"col-12 q-mt-sm"},null,8,["modelValue"]),e(r,{modelValue:t.filtros.ordenacao,"onUpdate:modelValue":a[17]||(a[17]=o=>t.filtros.ordenacao=o),options:t.ordenacaoOpcoes,dense:"",rotuloFixo:"Ordenar por",tipo:"seletor",class:"q-mt-xl"},null,8,["modelValue","options"]),e(r,{modelValue:t.filtros.direcao,"onUpdate:modelValue":a[18]||(a[18]=o=>t.filtros.direcao=o),options:t.direcaoOpcoes,dense:"",rotuloFixo:"Dire\xE7\xE3o",tipo:"seletor",class:"q-mt-sm"},null,8,["modelValue","options"]),e(r,{modelValue:t.paginacao.limite,"onUpdate:modelValue":a[19]||(a[19]=o=>t.paginacao.limite=o),tipo:"quantidade",min:"1",dense:"",rotulo:"Quantidade por p\xE1gina",class:"q-mt-xl q-mb-md"},null,8,["modelValue"])]),itemLista:l(()=>[e($,{bordered:"",class:"bg-white q-mb-xs rounded-borders"},{default:l(()=>[(p(!0),x(O,null,ta(t.lista,o=>(p(),x("div",{key:o.id,class:"itemHover"},[o.id?(p(),D(k,{key:0,"manual-focus":"",class:"q-py-sm q-px-xs items-center"},{default:l(()=>[e(m,{class:"hideonmobile col-auto no-margin"},{default:l(()=>[e(k,{class:"q-pa-none"},{default:l(()=>[e(m,{side:"",class:"col-auto q-pa-none"},{default:l(()=>[C("div",ka,[e(y,{cor:o.status==="Ativo"?"positive":"tertiary",id:o.id,escuro:"",dica:"ID B\xF4nus"},null,8,["cor","id"])])]),_:2},1024)]),_:2},1024)]),_:2},1024),e(m,{class:"col-xs col-sm no-margin"},{default:l(()=>[e(k,{class:"q-pa-none"},{default:l(()=>[e(m,{class:"col-auto items-center cursor-pointer"},{default:l(()=>[e(z,{rotulo:o.nomeCliente,tamanho:"40",style:{display:"flex","align-self":"center"}},null,8,["rotulo"])]),_:2},1024),e(m,{class:"col"},{default:l(()=>[e(b,{lines:"3",class:"text-weight-bold cursor-pointer"},{default:l(()=>[o.cpfCliente?(p(),x("span",qa,[n(c(o.nomeCliente||o.cpfCliente)+" ",1),e(q,{anchor:"bottom middle",self:"center middle"},{default:l(()=>a[40]||(a[40]=[n("Cliente")])),_:1})])):(p(),x("span",Ea," Qualquer cliente "))]),_:2},1024),e(b,{caption:"",lines:"3",class:"cursor-pointer"},{default:l(()=>[o.cnpjEmissor?(p(),x("span",Ua,[e(g,{name:"business",class:"q-mr-xs"}),n(" "+c(o.nomeEmissor)+" ",1),C("span",Ba,"("+c(o.cnpjEmissor)+")",1),e(q,{anchor:"bottom middle",self:"center middle"},{default:l(()=>a[41]||(a[41]=[n("Emissor")])),_:1})])):(p(),x("span",Fa,[e(g,{name:"business",class:"q-mr-xs"}),a[42]||(a[42]=n(" Todas as empresas "))]))]),_:2},1024),e(b,{caption:"",lines:"3"},{default:l(()=>[C("span",null,[e(g,{name:"person"}),C("span",za,c(o.nomeUsuarioEmissor),1),e(q,{anchor:"bottom start",self:"center start"},{default:l(()=>a[43]||(a[43]=[n("Usuario")])),_:1})])]),_:2},1024),e(m,{class:"hideondesktop"},{default:l(()=>[e(b,{caption:"",class:"q-my-sm"},{default:l(()=>[e(y,{id:o.id,escuro:"",cor:o.status==="Ativo"?"positive":"tertiary",class:"col-auto q-mr-sm"},null,8,["id","cor"]),e(y,{id:o.tokenBonus,escuro:"",cor:o.status==="Ativo"?"positive":"tertiary",dica:"Token do B\xF4nus",class:"col-auto q-mr-auto"},null,8,["id","cor"]),e(B,{cor:o.status==="Ativo"?"positive":"tertiary",rotulo:o.status,escuro:""},null,8,["cor","rotulo"])]),_:2},1024),e(k,{class:"no-padding no-margin",style:{"min-height":"15px"}},{default:l(()=>[e(m,{class:"col no-margin text-weight-medium"},{default:l(()=>[e(b,{caption:""},{default:l(()=>[e(g,{name:"mdi-calendar-today"}),n(" "+c(s.$filters.data(o.dataInicioValidade)),1)]),_:2},1024),e(b,{caption:""},{default:l(()=>[e(g,{name:"mdi-calendar-today"}),n(" "+c(s.$filters.data(o.dataVencimento)),1)]),_:2},1024)]),_:2},1024),e(m,{top:"",class:"col no-margin text-weight-medium"},{default:l(()=>[o.dataHoraFinalizado?(p(),D(b,{key:0,caption:""},{default:l(()=>[e(g,{name:"mdi-calendar"}),n(" "+c(s.$filters.data(o.dataHoraFinalizado)),1)]),_:2},1024)):w("",!0)]),_:2},1024)]),_:2},1024),e(k,{class:"no-padding no-margin",style:{"min-height":"32px"}},{default:l(()=>[e(m,{class:"col no-margin"},{default:l(()=>[o.valor?(p(),x(O,{key:0},[e(b,{caption:""},{default:l(()=>a[44]||(a[44]=[n(" Valor B\xF4nus ")])),_:1}),e(b,{caption:"",class:"text-weight-bold"},{default:l(()=>[n(c(s.$filters.numero(o.valor,2)),1)]),_:2},1024)],64)):w("",!0)]),_:2},1024),e(m,{class:"col no-margin"},{default:l(()=>[o.valorMinimoVenda?(p(),x(O,{key:0},[e(b,{caption:""},{default:l(()=>a[45]||(a[45]=[n(" Valor m\xEDnimo da compra ")])),_:1}),e(b,{caption:"",class:"text-weight-medium"},{default:l(()=>[n(c(s.$filters.numero(o.valorMinimoVenda,2)),1)]),_:2},1024)],64)):w("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(m,{class:"hideonmobile maxw80 no-margin cursor-pointer"},{default:l(()=>[C("div",Ma,[e(y,{id:o.tokenBonus,dica:"Token do B\xF4nus",escuro:"",cor:o.status==="Ativo"?"positive":"tertiary"},null,8,["id","cor"]),e(B,{cor:o.status==="Ativo"?"positive":"tertiary",rotulo:o.status,escuro:""},null,8,["cor","rotulo"])])]),_:2},1024),e(m,{class:"hideonmobile maxw100 no-margin cursor-pointer"},{default:l(()=>[e(b,{caption:"",class:"text-center text-weight-medium"},{default:l(()=>[C("span",null,[e(g,{name:"mdi-calendar-today"}),n(" "+c(s.$filters.data(o.dataInicioValidade))+" ",1),e(q,{anchor:"bottom middle",self:"center middle"},{default:l(()=>a[46]||(a[46]=[n(" V\xE1lido de ")])),_:1})])]),_:2},1024),e(b,{caption:"",class:"text-center text-weight-medium"},{default:l(()=>[C("span",null,[e(g,{name:"mdi-calendar"}),n(" "+c(s.$filters.data(o.dataVencimento))+" ",1),e(q,{anchor:"bottom middle",self:"center middle"},{default:l(()=>a[47]||(a[47]=[n(" V\xE1lido at\xE9 ")])),_:1})])]),_:2},1024)]),_:2},1024),e(m,{class:"hideonmobile maxw100 no-margin cursor-pointer"},{default:l(()=>[o.dataHoraFinalizado?(p(),D(b,{key:0,caption:"",class:"text-center text-weight-medium"},{default:l(()=>[C("span",null,[e(g,{name:"mdi-calendar"}),n(" "+c(s.$filters.data(o.dataHoraFinalizado))+" ",1),e(q,{anchor:"bottom middle",self:"center middle"},{default:l(()=>[n(c(o.status)+" \xE0s "+c(s.$filters.hora(o.dataHoraFinalizado)),1)]),_:2},1024)])]),_:2},1024)):w("",!0)]),_:2},1024),e(m,{class:"hideonmobile maxw100 q-pl-sm no-margin cursor-pointer"},{default:l(()=>[o.valor?(p(),D(b,{key:0,class:"text-weight-bold text-right"},{default:l(()=>[C("span",null,[n(c(s.$filters.numero(o.valor,2))+" ",1),e(q,{anchor:"bottom middle",self:"center middle"},{default:l(()=>a[48]||(a[48]=[n(" Valor B\xF4nus ")])),_:1})])]),_:2},1024)):w("",!0),o.valorMinimoVenda?(p(),D(b,{key:1,caption:"",class:"text-weight-medium text-right"},{default:l(()=>[C("span",null,[n(c(s.$filters.numero(o.valorMinimoVenda,2))+" ",1),e(q,{anchor:"bottom middle",self:"center middle"},{default:l(()=>a[49]||(a[49]=[n(" Valor m\xEDnimo da compra ")])),_:1})])]),_:2},1024)):w("",!0)]),_:2},1024),e(m,{class:"col-auto no-margin"},{default:l(()=>[e(k,{class:"q-pa-none"},{default:l(()=>[e(m,{class:"hideonmobile no-margin",style:{"max-width":"32px"}},{default:l(()=>[e(S,{onClick:F=>u.abrirFecharDetalhes(o),size:"md",color:"tertiary",round:"",flat:"",dense:"",icon:o.detalhes?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"])]),_:2},1024),e(m,{class:"no-margin"},{default:l(()=>[e(S,{icon:"more_vert",size:"md",round:"",flat:"",dense:""},{default:l(()=>[e(ia,null,{default:l(()=>[sa((p(),D($,{link:"","no-border":"",separator:""},{default:l(()=>[e(k,{onClick:F=>u.cancelarBonus(o),clickable:""},{default:l(()=>[e(m,{avatar:""},{default:l(()=>[e(g,{name:"delete"})]),_:1}),e(m,null,{default:l(()=>[e(b,null,{default:l(()=>a[50]||(a[50]=[n(" Cancelar ")])),_:1})]),_:1})]),_:2},1032,["onClick"]),e(k,{onClick:F=>u.abrirFecharDetalhes(o),clickable:"",class:"hideondesktop"},{default:l(()=>[e(m,{avatar:""},{default:l(()=>[e(g,{name:o.detalhes?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])]),_:2},1024),e(m,null,{default:l(()=>a[51]||(a[51]=[n("Mais Detalhes")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)),[[na]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):w("",!0),o.detalhes?(p(),D(E,{key:1,gutter:"md-x lg-y"},{default:l(()=>[e(f,{col:"12 sm5 md3",bordered:""},{default:l(()=>[e(v,{icon:"description xs tertiary left",text:"medium"},{default:l(()=>a[52]||(a[52]=[n("CPF")])),_:1}),e(v,{class:"q-pl-lg"},{default:l(()=>[n(c(o.cpfCliente),1)]),_:2},1024),e(v,{icon:"mdi-whatsapp xs tertiary left",text:"medium"},{default:l(()=>a[53]||(a[53]=[n("WhatsApp")])),_:1}),e(v,{class:"q-pl-lg"},{default:l(()=>[n(c(o.whatsappCliente),1)]),_:2},1024)]),_:2},1024),e(f,{col:"12 sm7 md9",bordered:""},{default:l(()=>[e(v,{icon:"description xs tertiary left",text:"medium"},{default:l(()=>a[54]||(a[54]=[n("Regras")])),_:1}),e(v,{class:"q-pl-lg"},{default:l(()=>[n(c(o.textoRegras),1)]),_:2},1024),e(v,{icon:"description xs tertiary left",text:"medium"},{default:l(()=>a[55]||(a[55]=[n("Observa\xE7\xE3o")])),_:1}),e(v,{class:"q-pl-lg"},{default:l(()=>[n(c(o.observacao),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)):w("",!0),o.id?(p(),D(ra,{key:2})):w("",!0)]))),128))]),_:1})]),_:1},8,["busca","onAtualizar","onCriarClick","onDetalhesClick","onLimparFiltrosClick","lista","tabSelecionada","tabs","paginacao","mostrar"]),e(Ca,{modelValue:t.bonus.visivel,"onUpdate:modelValue":a[38]||(a[38]=o=>t.bonus.visivel=o),onKeyup:a[39]||(a[39]=va(o=>u.fecharBonus(),["esc"])),maximized:t.tela.width<=992},{default:l(()=>[e(da,{container:"",view:"hHh LpR fFf",class:"bg-white rounded-borders",style:ua(t.tela.width<=992?"":"max-width:600px;height:100%;max-height:600px;")},{default:l(()=>[e(ma,{onSubmit:u.salvarBonus,autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false",novalidate:""},{default:l(()=>[e(ca,null,{default:l(()=>[e(fa,null,{default:l(()=>[e(g,{name:"edit_note",size:"md"}),e(pa,null,{default:l(()=>a[56]||(a[56]=[n("Novo B\xF4nus")])),_:1}),e(y,{id:t.bonus.id,cor:"positive",class:"float-right"},null,8,["id"])]),_:1})]),_:1}),e(ba,null,{default:l(()=>[e(Va,null,{default:l(()=>[e(E,{gutter:"md",items:"center",justify:"center"},{default:l(()=>[e(f,{col:"12"},{default:l(()=>[e(E,{items:"center"},{default:l(()=>[e(f,{col:"xs"},{default:l(()=>[e(r,{modelValue:t.bonus.nomeCliente,"onUpdate:modelValue":a[21]||(a[21]=o=>t.bonus.nomeCliente=o),debounce:500,dense:"",filled:"",before:[{icon:"person",handler:u.abrirModalCliente}],after:[{icon:"search",handler:u.abrirModalCliente}],rotulo:"Cliente","input-class":"cursor-pointer"},null,8,["modelValue","before","after"])]),_:1})]),_:1}),e(E,{items:"center"},{default:l(()=>[e(f,{col:"xs"},{default:l(()=>[e(r,{modelValue:t.bonus.cpfCliente,"onUpdate:modelValue":a[22]||(a[22]=o=>t.bonus.cpfCliente=o),dense:"",filled:"",rotulo:"CPF"},null,8,["modelValue"])]),_:1}),e(f,{col:"xs"},{default:l(()=>[e(r,{modelValue:t.bonus.whatsappCliente,"onUpdate:modelValue":a[23]||(a[23]=o=>t.bonus.whatsappCliente=o),dense:"",filled:"",rotulo:"WhatsApp"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,{col:"12"},{default:l(()=>[e(U,{modelValue:t.bonus.dadosEmpresa,"onUpdate:modelValue":a[24]||(a[24]=o=>t.bonus.dadosEmpresa=o),filled:"",dense:"",chaves:["id","nome","apelido","numeroDocumentoNacional"]},null,8,["modelValue"])]),_:1}),e(f,{col:"6"},{default:l(()=>[e(r,{modelValue:t.bonus.diasMinimoUso,"onUpdate:modelValue":[a[25]||(a[25]=o=>t.bonus.diasMinimoUso=o),a[26]||(a[26]=o=>u.recalcularInicioValidade(t.bonus))],filled:"",dense:"",tipo:"quantidade",rotulo:"Dias m\xEDnimos para uso",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1}),e(f,{col:"6"},{default:l(()=>[e(r,{modelValue:t.bonus.dataInicioValidade,"onUpdate:modelValue":[a[27]||(a[27]=o=>t.bonus.dataInicioValidade=o),a[28]||(a[28]=o=>u.recalcularDiasMinimoUso(t.bonus))],filled:"",dense:"",tipo:"data",rotulo:"Data de in\xEDcio da Validade",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1}),e(f,{col:"6"},{default:l(()=>[e(r,{modelValue:t.bonus.diasExpiracao,"onUpdate:modelValue":[a[29]||(a[29]=o=>t.bonus.diasExpiracao=o),a[30]||(a[30]=o=>u.recalcularVencimento(t.bonus))],filled:"",dense:"",rotulo:"Expira em (dias)",tipo:"quantidade",rules:[o=>o&&parseFloat(o)>0||"Obrigat\xF3rio (maior que 0)"]},null,8,["modelValue","rules"])]),_:1}),e(f,{col:"6"},{default:l(()=>[e(r,{modelValue:t.bonus.dataVencimento,"onUpdate:modelValue":[a[31]||(a[31]=o=>t.bonus.dataVencimento=o),a[32]||(a[32]=o=>u.recalcularDiasExpiracao(t.bonus))],filled:"",dense:"",tipo:"data",rotulo:"Data de Vencimento",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1}),e(f,{col:"12 sm"},{default:l(()=>[e(r,{modelValue:t.bonus.valor,"onUpdate:modelValue":a[33]||(a[33]=o=>t.bonus.valor=o),filled:"",dense:"",prefix:"R$",rotulo:"Valor",tipo:"decimal",decimals:"2",rules:[o=>o&&parseFloat(o)>0||"Obrigat\xF3rio (maior que 0)"]},null,8,["modelValue","rules"])]),_:1}),e(f,{col:"12 sm"},{default:l(()=>[e(r,{modelValue:t.bonus.valorMinimoVenda,"onUpdate:modelValue":a[34]||(a[34]=o=>t.bonus.valorMinimoVenda=o),prefix:"R$",rotulo:"Valor m\xEDnimo da compra",tipo:"decimal",decimals:"2",filled:"",dense:"",rules:[o=>o&&parseFloat(o)>0||"Obrigat\xF3rio (maior que 0)"]},null,8,["modelValue","rules"])]),_:1}),e(f,{col:"12"},{default:l(()=>[e(r,{modelValue:t.bonus.textoRegras,"onUpdate:modelValue":a[35]||(a[35]=o=>t.bonus.textoRegras=o),filled:"",dense:"",rotulo:"Regras:",tipo:"textoArea",class:"q-mb-lg"},null,8,["modelValue"])]),_:1}),e(f,{col:"12"},{default:l(()=>[e(r,{modelValue:t.bonus.observacao,"onUpdate:modelValue":a[36]||(a[36]=o=>t.bonus.observacao=o),filled:"",dense:"",rotulo:"Observa\xE7\xE3o:",tipo:"textoArea",class:"q-mb-lg"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(ga,{class:"bg-light border-top q-px-md q-py-sm text-right"},{default:l(()=>[e(S,{onClick:a[37]||(a[37]=o=>u.fecharBonus()),flat:"",label:"Cancelar",color:"tertiary"}),e(S,{type:"submit",unelevated:"",dark:"",color:"primary",label:"Salvar",class:"q-ml-sm"})]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["style"])]),_:1},8,["modelValue","maximized"])])}var _a=oa(ya,[["render",Ia]]);export{_a as default};
