import{_ as ea,ar as A,r as h,o as p,p as x,f as o,bI as la,w as l,P as $,F as O,u as ta,d as D,S as k,T as m,C,U as b,k as n,t as c,m as q,j as g,e as w,Q as S,be as ia,H as sa,N as na,l as ra,M as da,L as ua,E as ma,G as ca,h as fa,i as pa,I as ba,J as Va,K as ga,bq as va,D as Ca}from"./index.74676fd3.js";import{L as ha}from"./Lista.f8d7adfc.js";import{S as xa}from"./SeletorEmpresa.c43521db.js";const wa=()=>{const a=new Date;a.setDate(a.getDate()+1),a.setHours(0,0,0,0);const r=60,V=new Date(a);return V.setDate(V.getDate()+r),V.setHours(0,0,0,0),{visivel:!0,dadosEmpresa:{},id:$utils.uuid(),nomeCliente:"",cpfCliente:"",whatsappCliente:"",diasMinimoUso:1,dataInicioValidade:A.formatDate(a),diasExpiracao:r,dataVencimento:A.formatDate(V),valor:1,valorMinimoVenda:10,observacao:"",textoRegras:""}},ya={components:{Lista:ha,SeletorEmpresa:xa},data(){return{usuario:"",lista:[],mostrar:{header:!0,barraTopo:!0,toolbarTitulo:!0,icone:"",titulo:"",buscar:!0,filtroAvancado:!0,btnAjuda:!0,btnAtualizar:!0,btnNovo:!0,toolbarAcoes:!0,checkBox:!1,btnRemover:!1,btnRestaurar:!1,centralizaTabs:!1,btnDetalhes:!0,btnExportaXLS:!1,btnMenuMais:!1,toolbarAdicao:!1,bannerMsg:""},busca:"",contatoEmpresas:[],filtrosOriginal:{},filtros:{tokenBonus:"",nomeCliente:"",cpfCliente:"",whatsappCliente:"",idEmpresa:"",cpfUsuarioEmissor:"",idDocumentoOrigem:"",dataVencimento:{ini:"",fim:""},dataHoraCriacao:{ini:"",fim:""},dataInicioValidade:{ini:"",fim:""},dataHoraFinalizado:{ini:"",fim:""},valor:0,valorMinimoVenda:0,ordenacao:"dataHoraCriacao",direcao:"desc"},opcoesVendedores:[],ordenacaoOpcoes:[{value:"dataHoraCriacao",label:"Data Cria\xE7\xE3o"},{value:"dataInicioValidade",label:"Data Cria\xE7\xE3o"},{value:"dataHoraFinalizado",label:"Data Finalizado"},{value:"dataVencimento",label:"Data Vencimento"}],direcaoOpcoes:[{value:"asc",label:"Crescente"},{value:"desc",label:"Decrescente"}],detalhes:!1,tabSelecionada:{valor:"Ativo"},tabs:[{valor:"Ativo",rotulo:"Ativos"},{valor:"Utilizado",rotulo:"Utilizados"},{valor:"Vencido",rotulo:"Vencidos"},{valor:"Cancelado",rotulo:"Cancelados"},{valor:"Todos",rotulo:"Todos"}],paginacao:{atual:1,maximo:1,total:1,limite:25},bonus:{},tela:{width:0,heihgt:0}}},methods:{async atualizar(i){var a,r,V,t,u,d,U,y,z,B,v,f,E,M,e,F,L,N,Q,T,P,j,W,K,J,G,X,Y,Z;try{$q.loading.show(),this.lista=[],this.tabSelecionadaAnt!==this.tabSelecionada.valor&&(this.paginacao.atual=1),this.tabSelecionadaAnt=this.tabSelecionada.valor;let{buscarDadosRecentes:_}=i!=null?i:{},s={},I={};_&&(s=await $utils.localIDB.getItem({objectStore:"dadosRecentes",id:"BonusLista_"+((a=this.usuario)==null?void 0:a.id)}),s!=null&&s._id&&(this.tabSelecionada.valor=(s==null?void 0:s.tabSelecionada)||"Ativo",this.busca=(s==null?void 0:s.busca)||"",this.filtros={tokenBonus:((r=s==null?void 0:s.filtros)==null?void 0:r.tokenBonus)||"",nomeCliente:((V=s==null?void 0:s.filtros)==null?void 0:V.nomeCliente)||"",cpfCliente:((t=s==null?void 0:s.filtros)==null?void 0:t.cpfCliente)||"",whatsappCliente:((u=s==null?void 0:s.filtros)==null?void 0:u.whatsappCliente)||"",idEmpresa:((d=s==null?void 0:s.filtros)==null?void 0:d.idEmpresa)||"",cpfUsuarioEmissor:((U=s==null?void 0:s.filtros)==null?void 0:U.cpfUsuarioEmissor)||"",idDocumentoOrigem:((y=s==null?void 0:s.filtros)==null?void 0:y.idDocumentoOrigem)||"",dataVencimento:{ini:((B=(z=s==null?void 0:s.filtros)==null?void 0:z.dataVencimento)==null?void 0:B.ini)||"",fim:((f=(v=s==null?void 0:s.filtros)==null?void 0:v.dataVencimento)==null?void 0:f.fim)||""},dataHoraCriacao:{ini:((M=(E=s==null?void 0:s.filtros)==null?void 0:E.dataHoraCriacao)==null?void 0:M.ini)||"",fim:((F=(e=s==null?void 0:s.filtros)==null?void 0:e.dataHoraCriacao)==null?void 0:F.fim)||""},dataInicioValidade:{ini:((N=(L=s==null?void 0:s.filtros)==null?void 0:L.dataInicioValidade)==null?void 0:N.ini)||"",fim:((T=(Q=s==null?void 0:s.filtros)==null?void 0:Q.dataInicioValidade)==null?void 0:T.fim)||""},dataHoraFinalizado:{ini:((j=(P=s==null?void 0:s.filtros)==null?void 0:P.dataHoraFinalizado)==null?void 0:j.ini)||"",fim:((K=(W=s==null?void 0:s.filtros)==null?void 0:W.dataHoraFinalizado)==null?void 0:K.fim)||""},valor:((J=s==null?void 0:s.filtros)==null?void 0:J.valor)||0,valorMinimoVenda:((G=s==null?void 0:s.filtros)==null?void 0:G.valorMinimoVenda)||0,ordenacao:((X=s==null?void 0:s.filtros)==null?void 0:X.ordenacao)||"dataHoraCriacao",direcao:((Y=s==null?void 0:s.filtros)==null?void 0:Y.direcao)||"desc"},this.compareObject(this.filtrosOriginal,this.filtros,["ordenacao","direcao"])&&(this.$refs.bonusLista.filtros=!0))),I=$utils.eliminarVazios(this.filtros),delete I.status,this.tabSelecionada.valor!=="Todos"&&(I.status=this.tabSelecionada.valor);const aa=[this.filtros.ordenacao],oa=[this.filtros.direcao],H=await $db.bonus.leListaCompleta({filtros:I,limit:this.paginacao.limite,page:this.paginacao.atual,sort:aa,dir:oa});for(const R of H.data)R.detalhes=!1;this.$refs.bonusLista.detalhes=!1,this.lista=H.data,this.paginacao.total=H.total,this.paginacao.maximo=H.totalPages,s={_id:"BonusLista_"+((Z=this.usuario)==null?void 0:Z.id),tabSelecionada:this.tabSelecionada.valor,busca:this.busca,filtros:$utils.clonar(this.filtros)},await $utils.localIDB.setItem({objectStore:"dadosRecentes",data:s})}catch(_){$q.notifyError("Erro iniciar",_)}finally{$q.loading.hide()}},async contatoEmpresasCarregar(){this.contatoEmpresas=await $db.contatoEmpresa.listaCache()},async criarClick(){this.bonus=wa(),this.bonus.dadosEmpresa=this.contatoEmpresas[0]},fecharBonus(){this.bonus={}},async salvarBonus(){await $tryLoading("Salvando...",async()=>{var i,a;await $utils.geeksApi({geraBonusManual:{funcao:"8FC942DF-1793-48EA-8DEE-9D19909EF233",valor:this.bonus.valor,funcao:"8FC942DF-1793-48EA-8DEE-9D19909EF233",dataInicioValidade:this.bonus.dataInicioValidade,dataVencimento:this.bonus.dataVencimento,cnpjEmissor:(i=this.bonus.dadosEmpresa)==null?void 0:i.numeroDocumentoNacional,nomeEmissor:(a=this.bonus.dadosEmpresa)==null?void 0:a.apelido,cpfCliente:this.bonus.cpfCliente,nomeCliente:this.bonus.nomeCliente,whatsappCliente:this.bonus.whatsappCliente,valor:this.bonus.valor,valorMinimoVenda:this.bonus.valorMinimoVenda,observacao:this.bonus.observacao,textoRegras:this.bonus.textoRegras}}),this.bonus={},await this.atualizar(),$q.notifyPositive("B\xF4nus criado com sucesso")})},async cancelarBonus(i){!await $q.dialogSimNao({title:"Cancelar B\xF4nus",message:`Deseja cancelar o B\xF4nus de R$ ${$filters.numero(i.valor,2)} para ${i.nomeCliente}?`})||await $tryLoading("Cancelando...",async()=>{var r,V;const a=await $utils.geeksApi({cancelaBonus:{funcao:"459C0A26-6F81-4B5D-B427-B915142C6283",id:i.id}});$q.notifyPositive(((V=(r=a.data)==null?void 0:r.cancelaBonus)==null?void 0:V.mensagem)||"B\xF4nus cancelado com sucesso"),await this.atualizar()})},detalhesClick(){this.detalhes=!this.detalhes,this.lista.forEach(i=>{i.detalhes=this.detalhes})},abrirFecharDetalhes(i){i.detalhes=!i.detalhes},async limparFiltrosClick(){this.filtros=$utils.clonar(this.filtrosOriginal),await this.atualizar()},async abrirModalCliente(){var a,r;const i=await $g.promptContato.show({filtro:{ativo:!0}});!(i!=null&&i.id)||(this.bonus.cpfCliente=i.numeroDocumentoNacional,this.bonus.nomeCliente=i.nome,this.bonus.whatsappCliente=(r=(a=await $db.hibrido.lista({table:"contatoTelefone",where:{idContato:i==null?void 0:i.id},whereFilter:{tipoTelefone:"WhatsApp"}}))==null?void 0:a[0])==null?void 0:r.telefone)},async abrirModalContatoFiltro(){const i=await $g.promptContato.show({filtro:{ativo:!0}});!(i!=null&&i.id)||(this.filtros.nomeCliente=i.nome)},recalcularDiasExpiracao(i){const a=new Date(i.dataVencimento);if(!a||isNaN(a))return;const r=a-new Date(i.dataInicioValidade);i.diasExpiracao=Math.ceil(r/1e3/60/60/24)},recalcularVencimento(i){const a=Number(i.diasExpiracao),r=new Date(i.dataInicioValidade);r.setDate(r.getDate()+a),r.setHours(0,0,0,0),i.dataVencimento=A.formatDate(r)},recalcularDiasMinimoUso(i){const a=new Date(i.dataInicioValidade);if(!a||isNaN(a))return;const r=a-new Date;i.diasMinimoUso=Math.ceil(r/1e3/60/60/24)},recalcularInicioValidade(i){const a=Number(i.diasMinimoUso),r=new Date;r.setDate(r.getDate()+a),r.setHours(0,0,0,0),i.dataInicioValidade=A.formatDate(r)},compareObject(i,a,r=[]){const V=Object.keys(i);for(const t of V)if(!r.includes(t)){if(typeof i[t]=="object"&&i[t]!==null){if(!this.compareObject(i[t],a[t],r))continue;return!0}else if(i[t]!==a[t])return!0}return!1},async configurarVendedores(){const i=(await $db.contato.ler({filtros:{ativo:!0,vendedores:!0}})).data;i==null||i.sort((a,r)=>{var V;return(V=a==null?void 0:a.nome)==null?void 0:V.localeCompare(r==null?void 0:r.nome)}),i.forEach(a=>{this.opcoesVendedores.push({label:a.nome,value:a.numeroDocumentoNacional})})},resize(){const i=document.getElementById("BonusLista");i&&(this.tela={width:i.offsetWidth,height:i.offsetHeight})}},async mounted(){this.usuario=JSON.parse(localStorage.getItem("usuario")),this.filtrosOriginal=$utils.clonar(this.filtros),this.contatoEmpresasCarregar(),await this.configurarVendedores(),await this.atualizar({buscarDadosRecentes:!0})}},Da={id:"BonusLista"},ka={class:"mw80 text-center"},qa={key:0},Ea={key:1},Ua={key:0},Ba={class:"text-weight-medium q-pl-xs"},Fa={key:1},za={class:"text-weight-medium q-px-sm"},Ma={class:"text-center"};function Ia(i,a,r,V,t,u){const d=h("campo"),U=h("SeletorEmpresa"),y=h("BadgeCopiarUid"),z=h("avatar"),B=h("badge"),v=h("g-label"),f=h("g-col"),E=h("g-row"),M=h("Lista");return p(),x("div",Da,[o(la,{onResize:a[0]||(a[0]=e=>u.resize())}),o(M,{ref:"bonusLista",busca:t.busca,"onUpdate:busca":a[20]||(a[20]=e=>t.busca=e),onAtualizar:u.atualizar,onCriarClick:u.criarClick,onDetalhesClick:u.detalhesClick,onLimparFiltrosClick:u.limparFiltrosClick,lista:t.lista,tabSelecionada:t.tabSelecionada,tabs:t.tabs,paginacao:t.paginacao,mostrar:t.mostrar},{filtroCampos:l(()=>[o(d,{modelValue:t.filtros.tokenBonus,"onUpdate:modelValue":a[1]||(a[1]=e=>t.filtros.tokenBonus=e),clearable:"",dense:"",tipo:"texto",rotulo:"Token do B\xF4nus",class:"q-mt-sm q-mb-md"},null,8,["modelValue"]),o(d,{modelValue:t.filtros.nomeCliente,"onUpdate:modelValue":a[2]||(a[2]=e=>t.filtros.nomeCliente=e),debounce:500,dense:"",before:[{icon:"search",handler:u.abrirModalContatoFiltro}],rotulo:"Cliente",class:"col-12 q-mt-md"},null,8,["modelValue","before"]),o(d,{modelValue:t.filtros.whatsappCliente,"onUpdate:modelValue":a[3]||(a[3]=e=>t.filtros.whatsappCliente=e),clearable:"",dense:"",tipo:"numero",rotulo:"WhatsApp",class:"q-mt-lg"},null,8,["modelValue"]),o(U,{modelValue:t.filtros.dadosEmpresa,"onUpdate:modelValue":a[4]||(a[4]=e=>t.filtros.dadosEmpresa=e),rotulo:"Por empresa",chaves:["id","nome","apelido","numeroDocumentoNacional"],class:"q-mt-md"},null,8,["modelValue"]),o(d,{modelValue:t.filtros.cpfUsuarioEmissor,"onUpdate:modelValue":a[5]||(a[5]=e=>t.filtros.cpfUsuarioEmissor=e),options:t.opcoesVendedores,clearable:"",dense:"",tipo:"seletor",rotulo:"Vendedor"},null,8,["modelValue","options"]),o(d,{modelValue:t.filtros.idDocumentoOrigem,"onUpdate:modelValue":a[6]||(a[6]=e=>t.filtros.idDocumentoOrigem=e),clearable:"",dense:"",tipo:"texto",rotulo:"ID Doc. Origem",class:"q-mt-md"},null,8,["modelValue"]),o(d,{modelValue:t.filtros.dataVencimento.ini,"onUpdate:modelValue":a[7]||(a[7]=e=>t.filtros.dataVencimento.ini=e),clearable:"",dense:"",tipo:"data",rotulo:"Vencimento de",class:"col-12 q-mt-xl"},null,8,["modelValue"]),o(d,{modelValue:t.filtros.dataVencimento.fim,"onUpdate:modelValue":a[8]||(a[8]=e=>t.filtros.dataVencimento.fim=e),clearable:"",dense:"",tipo:"data",rotulo:"at\xE9",class:"col-12 q-mt-xs"},null,8,["modelValue"]),o(d,{modelValue:t.filtros.dataHoraCriacao.ini,"onUpdate:modelValue":a[9]||(a[9]=e=>t.filtros.dataHoraCriacao.ini=e),clearable:"",dense:"",tipo:"data",rotulo:"Emiss\xE3o de",class:"col-12 q-mt-xl"},null,8,["modelValue"]),o(d,{modelValue:t.filtros.dataHoraCriacao.fim,"onUpdate:modelValue":a[10]||(a[10]=e=>t.filtros.dataHoraCriacao.fim=e),clearable:"",dense:"",tipo:"data",rotulo:"at\xE9",class:"col-12 q-mt-xs"},null,8,["modelValue"]),o(d,{modelValue:t.filtros.dataInicioValidade.ini,"onUpdate:modelValue":a[11]||(a[11]=e=>t.filtros.dataInicioValidade.ini=e),clearable:"",dense:"",tipo:"data",rotulo:"Inicio validade de",class:"col-12 q-mt-xl"},null,8,["modelValue"]),o(d,{modelValue:t.filtros.dataInicioValidade.fim,"onUpdate:modelValue":a[12]||(a[12]=e=>t.filtros.dataInicioValidade.fim=e),clearable:"",dense:"",tipo:"data",rotulo:"at\xE9",class:"col-12 q-mt-xs"},null,8,["modelValue"]),o(d,{modelValue:t.filtros.dataHoraFinalizado.ini,"onUpdate:modelValue":a[13]||(a[13]=e=>t.filtros.dataHoraFinalizado.ini=e),clearable:"",dense:"",tipo:"data",rotulo:"Finalizado de",class:"col-12 q-mt-xl"},null,8,["modelValue"]),o(d,{modelValue:t.filtros.dataHoraFinalizado.fim,"onUpdate:modelValue":a[14]||(a[14]=e=>t.filtros.dataHoraFinalizado.fim=e),clearable:"",dense:"",tipo:"data",rotulo:"at\xE9",class:"col-12 q-mt-xs"},null,8,["modelValue"]),o(d,{modelValue:t.filtros.valor,"onUpdate:modelValue":a[15]||(a[15]=e=>t.filtros.valor=e),dense:"",tipo:"decimal",min:"0",decimals:"4",zerosDireita:"2",rotulo:"Valor b\xF4nus",class:"col-12 q-mt-xl"},null,8,["modelValue"]),o(d,{modelValue:t.filtros.valorMinimoVenda,"onUpdate:modelValue":a[16]||(a[16]=e=>t.filtros.valorMinimoVenda=e),dense:"",tipo:"decimal",min:"0",decimals:"4",zerosDireita:"2",rotulo:"Valor m\xEDnimo da compra",class:"col-12 q-mt-sm"},null,8,["modelValue"]),o(d,{modelValue:t.filtros.ordenacao,"onUpdate:modelValue":a[17]||(a[17]=e=>t.filtros.ordenacao=e),options:t.ordenacaoOpcoes,dense:"",rotuloFixo:"Ordenar por",tipo:"seletor",class:"q-mt-xl"},null,8,["modelValue","options"]),o(d,{modelValue:t.filtros.direcao,"onUpdate:modelValue":a[18]||(a[18]=e=>t.filtros.direcao=e),options:t.direcaoOpcoes,dense:"",rotuloFixo:"Dire\xE7\xE3o",tipo:"seletor",class:"q-mt-sm"},null,8,["modelValue","options"]),o(d,{modelValue:t.paginacao.limite,"onUpdate:modelValue":a[19]||(a[19]=e=>t.paginacao.limite=e),tipo:"quantidade",min:"1",dense:"",rotulo:"Quantidade por p\xE1gina",class:"q-mt-xl q-mb-md"},null,8,["modelValue"])]),itemLista:l(()=>[o($,{bordered:"",class:"bg-white q-mb-xs rounded-borders"},{default:l(()=>[(p(!0),x(O,null,ta(t.lista,e=>(p(),x("div",{key:e.id,class:"itemHover"},[e.id?(p(),D(k,{key:0,"manual-focus":"",class:"q-py-sm q-px-xs items-center"},{default:l(()=>[o(m,{class:"hideonmobile col-auto no-margin"},{default:l(()=>[o(k,{class:"q-pa-none"},{default:l(()=>[o(m,{side:"",class:"col-auto q-pa-none"},{default:l(()=>[C("div",ka,[o(y,{cor:e.status==="Ativo"?"positive":"tertiary",id:e.id,escuro:"",dica:"ID B\xF4nus"},null,8,["cor","id"])])]),_:2},1024)]),_:2},1024)]),_:2},1024),o(m,{class:"col-xs col-sm no-margin"},{default:l(()=>[o(k,{class:"q-pa-none"},{default:l(()=>[o(m,{class:"col-auto items-center cursor-pointer"},{default:l(()=>[o(z,{rotulo:e.nomeCliente,tamanho:"40",style:{display:"flex","align-self":"center"}},null,8,["rotulo"])]),_:2},1024),o(m,{class:"col"},{default:l(()=>[o(b,{lines:"3",class:"text-weight-bold cursor-pointer"},{default:l(()=>[e.cpfCliente?(p(),x("span",qa,[n(c(e.nomeCliente||e.cpfCliente)+" ",1),o(q,{anchor:"bottom middle",self:"center middle"},{default:l(()=>a[40]||(a[40]=[n("Cliente")])),_:1})])):(p(),x("span",Ea,c(e.nomeCliente?e.nomeCliente+" - ":"")+" Utiliza\xE7\xE3o para qualquer cliente ",1))]),_:2},1024),o(b,{caption:"",lines:"3",class:"cursor-pointer"},{default:l(()=>[e.cnpjEmissor?(p(),x("span",Ua,[o(g,{name:"business",class:"q-mr-xs"}),n(" "+c(e.nomeEmissor)+" ",1),C("span",Ba,"("+c(e.cnpjEmissor)+")",1),o(q,{anchor:"bottom middle",self:"center middle"},{default:l(()=>a[41]||(a[41]=[n("Emissor")])),_:1})])):(p(),x("span",Fa,[o(g,{name:"business",class:"q-mr-xs"}),a[42]||(a[42]=n(" Todas as empresas "))]))]),_:2},1024),o(b,{caption:"",lines:"3"},{default:l(()=>[C("span",null,[o(g,{name:"person"}),C("span",za,c(e.nomeUsuarioEmissor),1),o(q,{anchor:"bottom start",self:"center start"},{default:l(()=>a[43]||(a[43]=[n("Usuario")])),_:1})])]),_:2},1024),o(m,{class:"hideondesktop"},{default:l(()=>[o(b,{caption:"",class:"q-my-sm"},{default:l(()=>[o(y,{id:e.id,escuro:"",cor:e.status==="Ativo"?"positive":"tertiary",class:"col-auto q-mr-sm"},null,8,["id","cor"]),o(y,{id:e.tokenBonus,escuro:"",cor:e.status==="Ativo"?"positive":"tertiary",dica:"Token do B\xF4nus",class:"col-auto q-mr-auto"},null,8,["id","cor"]),o(B,{cor:e.status==="Ativo"?"positive":"tertiary",rotulo:e.status,escuro:""},null,8,["cor","rotulo"])]),_:2},1024),o(k,{class:"no-padding no-margin",style:{"min-height":"15px"}},{default:l(()=>[o(m,{class:"col no-margin text-weight-medium"},{default:l(()=>[o(b,{caption:""},{default:l(()=>[o(g,{name:"mdi-calendar-today"}),n(" "+c(i.$filters.data(e.dataInicioValidade)),1)]),_:2},1024),o(b,{caption:""},{default:l(()=>[o(g,{name:"mdi-calendar-today"}),n(" "+c(i.$filters.data(e.dataVencimento)),1)]),_:2},1024)]),_:2},1024),o(m,{top:"",class:"col no-margin text-weight-medium"},{default:l(()=>[e.dataHoraFinalizado?(p(),D(b,{key:0,caption:""},{default:l(()=>[o(g,{name:"mdi-calendar"}),n(" "+c(i.$filters.data(e.dataHoraFinalizado)),1)]),_:2},1024)):w("",!0)]),_:2},1024)]),_:2},1024),o(k,{class:"no-padding no-margin",style:{"min-height":"32px"}},{default:l(()=>[o(m,{class:"col no-margin"},{default:l(()=>[e.valor?(p(),x(O,{key:0},[o(b,{caption:""},{default:l(()=>a[44]||(a[44]=[n(" Valor B\xF4nus ")])),_:1}),o(b,{caption:"",class:"text-weight-bold"},{default:l(()=>[n(c(i.$filters.numero(e.valor,2)),1)]),_:2},1024)],64)):w("",!0)]),_:2},1024),o(m,{class:"col no-margin"},{default:l(()=>[e.valorMinimoVenda?(p(),x(O,{key:0},[o(b,{caption:""},{default:l(()=>a[45]||(a[45]=[n(" Valor m\xEDnimo da compra ")])),_:1}),o(b,{caption:"",class:"text-weight-medium"},{default:l(()=>[n(c(i.$filters.numero(e.valorMinimoVenda,2)),1)]),_:2},1024)],64)):w("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),o(m,{class:"hideonmobile maxw80 no-margin cursor-pointer"},{default:l(()=>[C("div",Ma,[o(y,{id:e.tokenBonus,dica:"Token do B\xF4nus",escuro:"",cor:e.status==="Ativo"?"positive":"tertiary"},null,8,["id","cor"]),o(B,{cor:e.status==="Ativo"?"positive":"tertiary",rotulo:e.status,escuro:""},null,8,["cor","rotulo"])])]),_:2},1024),o(m,{class:"hideonmobile maxw100 no-margin cursor-pointer"},{default:l(()=>[o(b,{caption:"",class:"text-center text-weight-medium"},{default:l(()=>[C("span",null,[o(g,{name:"mdi-calendar-today"}),n(" "+c(i.$filters.data(e.dataInicioValidade))+" ",1),o(q,{anchor:"bottom middle",self:"center middle"},{default:l(()=>a[46]||(a[46]=[n(" V\xE1lido de ")])),_:1})])]),_:2},1024),o(b,{caption:"",class:"text-center text-weight-medium"},{default:l(()=>[C("span",null,[o(g,{name:"mdi-calendar"}),n(" "+c(i.$filters.data(e.dataVencimento))+" ",1),o(q,{anchor:"bottom middle",self:"center middle"},{default:l(()=>a[47]||(a[47]=[n(" V\xE1lido at\xE9 ")])),_:1})])]),_:2},1024)]),_:2},1024),o(m,{class:"hideonmobile maxw100 no-margin cursor-pointer"},{default:l(()=>[e.dataHoraFinalizado?(p(),D(b,{key:0,caption:"",class:"text-center text-weight-medium"},{default:l(()=>[C("span",null,[o(g,{name:"mdi-calendar"}),n(" "+c(i.$filters.data(e.dataHoraFinalizado))+" ",1),o(q,{anchor:"bottom middle",self:"center middle"},{default:l(()=>[n(c(e.status)+" \xE0s "+c(i.$filters.hora(e.dataHoraFinalizado)),1)]),_:2},1024)])]),_:2},1024)):w("",!0)]),_:2},1024),o(m,{class:"hideonmobile maxw100 q-pl-sm no-margin cursor-pointer"},{default:l(()=>[e.valor?(p(),D(b,{key:0,class:"text-weight-bold text-right"},{default:l(()=>[C("span",null,[n(c(i.$filters.numero(e.valor,2))+" ",1),o(q,{anchor:"bottom middle",self:"center middle"},{default:l(()=>a[48]||(a[48]=[n(" Valor B\xF4nus ")])),_:1})])]),_:2},1024)):w("",!0),e.valorMinimoVenda?(p(),D(b,{key:1,caption:"",class:"text-weight-medium text-right"},{default:l(()=>[C("span",null,[n(c(i.$filters.numero(e.valorMinimoVenda,2))+" ",1),o(q,{anchor:"bottom middle",self:"center middle"},{default:l(()=>a[49]||(a[49]=[n(" Valor m\xEDnimo da compra ")])),_:1})])]),_:2},1024)):w("",!0)]),_:2},1024),o(m,{class:"col-auto no-margin"},{default:l(()=>[o(k,{class:"q-pa-none"},{default:l(()=>[o(m,{class:"hideonmobile no-margin",style:{"max-width":"32px"}},{default:l(()=>[o(S,{onClick:F=>u.abrirFecharDetalhes(e),size:"md",color:"tertiary",round:"",flat:"",dense:"",icon:e.detalhes?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"])]),_:2},1024),o(m,{class:"no-margin"},{default:l(()=>[o(S,{icon:"more_vert",size:"md",round:"",flat:"",dense:""},{default:l(()=>[o(ia,null,{default:l(()=>[sa((p(),D($,{link:"","no-border":"",separator:""},{default:l(()=>[o(k,{onClick:F=>u.cancelarBonus(e),clickable:""},{default:l(()=>[o(m,{avatar:""},{default:l(()=>[o(g,{name:"delete"})]),_:1}),o(m,null,{default:l(()=>[o(b,null,{default:l(()=>a[50]||(a[50]=[n(" Cancelar ")])),_:1})]),_:1})]),_:2},1032,["onClick"]),o(k,{onClick:F=>u.abrirFecharDetalhes(e),clickable:"",class:"hideondesktop"},{default:l(()=>[o(m,{avatar:""},{default:l(()=>[o(g,{name:e.detalhes?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])]),_:2},1024),o(m,null,{default:l(()=>a[51]||(a[51]=[n("Mais Detalhes")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)),[[na]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):w("",!0),e.detalhes?(p(),D(E,{key:1,gutter:"md-x lg-y"},{default:l(()=>[o(f,{col:"12 sm5 md3",bordered:""},{default:l(()=>[o(v,{icon:"description xs tertiary left",text:"medium"},{default:l(()=>a[52]||(a[52]=[n("CPF")])),_:1}),o(v,{class:"q-pl-lg"},{default:l(()=>[n(c(e.cpfCliente),1)]),_:2},1024),o(v,{icon:"mdi-whatsapp xs tertiary left",text:"medium"},{default:l(()=>a[53]||(a[53]=[n("WhatsApp")])),_:1}),o(v,{class:"q-pl-lg"},{default:l(()=>[n(c(e.whatsappCliente),1)]),_:2},1024)]),_:2},1024),o(f,{col:"12 sm7 md9",bordered:""},{default:l(()=>[o(v,{icon:"description xs tertiary left",text:"medium"},{default:l(()=>a[54]||(a[54]=[n("Regras")])),_:1}),o(v,{class:"q-pl-lg"},{default:l(()=>[n(c(e.textoRegras),1)]),_:2},1024),o(v,{icon:"description xs tertiary left",text:"medium"},{default:l(()=>a[55]||(a[55]=[n("Observa\xE7\xE3o")])),_:1}),o(v,{class:"q-pl-lg"},{default:l(()=>[n(c(e.observacao),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)):w("",!0),e.id?(p(),D(ra,{key:2})):w("",!0)]))),128))]),_:1})]),_:1},8,["busca","onAtualizar","onCriarClick","onDetalhesClick","onLimparFiltrosClick","lista","tabSelecionada","tabs","paginacao","mostrar"]),o(Ca,{modelValue:t.bonus.visivel,"onUpdate:modelValue":a[38]||(a[38]=e=>t.bonus.visivel=e),onKeyup:a[39]||(a[39]=va(e=>u.fecharBonus(),["esc"])),maximized:t.tela.width<=992},{default:l(()=>[o(da,{container:"",view:"hHh LpR fFf",class:"bg-white rounded-borders",style:ua(t.tela.width<=992?"":"max-width:600px;height:100%;max-height:600px;")},{default:l(()=>[o(ma,{onSubmit:u.salvarBonus,autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false",novalidate:""},{default:l(()=>[o(ca,null,{default:l(()=>[o(fa,null,{default:l(()=>[o(g,{name:"edit_note",size:"md"}),o(pa,null,{default:l(()=>a[56]||(a[56]=[n("Novo B\xF4nus")])),_:1}),o(y,{id:t.bonus.id,cor:"positive",class:"float-right"},null,8,["id"])]),_:1})]),_:1}),o(ba,null,{default:l(()=>[o(Va,null,{default:l(()=>[o(E,{gutter:"md",items:"center",justify:"center"},{default:l(()=>[o(f,{col:"12"},{default:l(()=>[o(E,{items:"center"},{default:l(()=>[o(f,{col:"xs"},{default:l(()=>[o(d,{modelValue:t.bonus.nomeCliente,"onUpdate:modelValue":a[21]||(a[21]=e=>t.bonus.nomeCliente=e),debounce:500,dense:"",filled:"",before:[{icon:"person",handler:u.abrirModalCliente}],after:[{icon:"search",handler:u.abrirModalCliente}],rotulo:"Cliente","input-class":"cursor-pointer"},null,8,["modelValue","before","after"])]),_:1})]),_:1}),o(E,{items:"center"},{default:l(()=>[o(f,{col:"xs"},{default:l(()=>[o(d,{modelValue:t.bonus.cpfCliente,"onUpdate:modelValue":a[22]||(a[22]=e=>t.bonus.cpfCliente=e),dense:"",filled:"",rotulo:"CPF",mask:"###.###.###-##"},null,8,["modelValue"])]),_:1}),o(f,{col:"xs"},{default:l(()=>[o(d,{modelValue:t.bonus.whatsappCliente,"onUpdate:modelValue":a[23]||(a[23]=e=>t.bonus.whatsappCliente=e),dense:"",filled:"",rotulo:"WhatsApp"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),o(f,{col:"12"},{default:l(()=>[o(U,{modelValue:t.bonus.dadosEmpresa,"onUpdate:modelValue":a[24]||(a[24]=e=>t.bonus.dadosEmpresa=e),filled:"",dense:"",permiteNull:!1,chaves:["id","nome","apelido","numeroDocumentoNacional"]},null,8,["modelValue"])]),_:1}),o(f,{col:"6"},{default:l(()=>[o(d,{modelValue:t.bonus.diasMinimoUso,"onUpdate:modelValue":[a[25]||(a[25]=e=>t.bonus.diasMinimoUso=e),a[26]||(a[26]=e=>u.recalcularInicioValidade(t.bonus))],filled:"",dense:"",tipo:"quantidade",rotulo:"Dias m\xEDnimos para uso",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1}),o(f,{col:"6"},{default:l(()=>[o(d,{modelValue:t.bonus.dataInicioValidade,"onUpdate:modelValue":[a[27]||(a[27]=e=>t.bonus.dataInicioValidade=e),a[28]||(a[28]=e=>u.recalcularDiasMinimoUso(t.bonus))],filled:"",dense:"",tipo:"data",rotulo:"Data de in\xEDcio da Validade",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1}),o(f,{col:"6"},{default:l(()=>[o(d,{modelValue:t.bonus.diasExpiracao,"onUpdate:modelValue":[a[29]||(a[29]=e=>t.bonus.diasExpiracao=e),a[30]||(a[30]=e=>u.recalcularVencimento(t.bonus))],filled:"",dense:"",rotulo:"Expira em (dias)",tipo:"quantidade",rules:[e=>e&&parseFloat(e)>0||"Obrigat\xF3rio (maior que 0)"]},null,8,["modelValue","rules"])]),_:1}),o(f,{col:"6"},{default:l(()=>[o(d,{modelValue:t.bonus.dataVencimento,"onUpdate:modelValue":[a[31]||(a[31]=e=>t.bonus.dataVencimento=e),a[32]||(a[32]=e=>u.recalcularDiasExpiracao(t.bonus))],filled:"",dense:"",tipo:"data",rotulo:"Data de Vencimento",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1}),o(f,{col:"12 sm"},{default:l(()=>[o(d,{modelValue:t.bonus.valor,"onUpdate:modelValue":a[33]||(a[33]=e=>t.bonus.valor=e),filled:"",dense:"",prefix:"R$",rotulo:"Valor",tipo:"decimal",decimals:"2",rules:[e=>e&&parseFloat(e)>0||"Obrigat\xF3rio (maior que 0)"]},null,8,["modelValue","rules"])]),_:1}),o(f,{col:"12 sm"},{default:l(()=>[o(d,{modelValue:t.bonus.valorMinimoVenda,"onUpdate:modelValue":a[34]||(a[34]=e=>t.bonus.valorMinimoVenda=e),prefix:"R$",rotulo:"Valor m\xEDnimo da compra",tipo:"decimal",decimals:"2",filled:"",dense:"",rules:[e=>e&&parseFloat(e)>0||"Obrigat\xF3rio (maior que 0)"]},null,8,["modelValue","rules"])]),_:1}),o(f,{col:"12"},{default:l(()=>[o(d,{modelValue:t.bonus.textoRegras,"onUpdate:modelValue":a[35]||(a[35]=e=>t.bonus.textoRegras=e),filled:"",dense:"",rotulo:"Regras:",tipo:"textoArea",class:"q-mb-lg"},null,8,["modelValue"])]),_:1}),o(f,{col:"12"},{default:l(()=>[o(d,{modelValue:t.bonus.observacao,"onUpdate:modelValue":a[36]||(a[36]=e=>t.bonus.observacao=e),filled:"",dense:"",rotulo:"Observa\xE7\xE3o:",tipo:"textoArea",class:"q-mb-lg"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),o(ga,{class:"bg-light border-top q-px-md q-py-sm text-right"},{default:l(()=>[o(S,{onClick:a[37]||(a[37]=e=>u.fecharBonus()),flat:"",label:"Cancelar",color:"tertiary"}),o(S,{type:"submit",unelevated:"",dark:"",color:"primary",label:"Salvar",class:"q-ml-sm"})]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["style"])]),_:1},8,["modelValue","maximized"])])}var _a=ea(ya,[["render",Ia]]);export{_a as default};
