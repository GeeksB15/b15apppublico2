import{_ as B,de as f,ai as v,df as I,ak as M,dg as N,o as Q,d as j,w as o,f as s,j as b,S as k,av as z,b8 as L,T as _,U as y,k as h,t as E,as as O}from"./index.4ea15c5f.js";const P={__name:"SeletorEmpresa",props:f({chaves:Array,desabilitado:{type:Boolean,default:!1},rotulo:{type:String,default:"Empresa"},somenteLeitura:{type:Boolean,default:!1},permiteNull:{type:Boolean,default:!0},rules:{type:Array,default:()=>[]}},{modelValue:{type:[Object,null]},modelModifiers:{}}),emits:f(["update:modelValue"],["update:modelValue"]),setup(u,{emit:S}){const n=v(null),i=v(null),d=I(u,"modelValue"),g=S,l=u;let r=[];function x(t){let e=null;t&&(e=r.find(a=>a.id===t.value),l.chaves&&Object.keys(e).forEach(a=>{l.chaves.includes(a)||delete e[a]})),g("update:modelValue",e)}function V(t,e,a){if(i.value!==null){e();return}e(p)}function c(t){let e;if(t&&(e=r.find(a=>a.id===t)),!e){n.value=null;return}n.value={label:e.nome,value:e.id}}async function p(){var t;if(r=(await $db.contato.ler({filtros:{ativo:!0,empresas:!0}})).data,l.chaves)for(const e of r)Object.keys(e).forEach(a=>{["id","nome",...l.chaves].includes(a)||delete e[a]});i.value=r.map(e=>{var a,m;return{value:e.id,label:(a=e.apelido)!=null?a:e.nome,description:(m=e.numeroDocumentoNacional)!=null?m:""}}),c((t=d.value)==null?void 0:t.id)}return M(d,t=>{var a;const e=t==null?void 0:t.id;e!==((a=n.value)==null?void 0:a.value)&&c(e)}),N(p),(t,e)=>(Q(),j(O,{modelValue:n.value,"onUpdate:modelValue":[e[0]||(e[0]=a=>n.value=a),x],options:i.value,onFilter:V,label:l.rotulo,rules:l.rules,readonly:l.somenteLeitura,disable:l.desabilitado,clearable:l.permiteNull,dense:"","hide-bottom-space":"","input-class":"no-wrap",class:"q-field--with-bottom"},{prepend:o(()=>[s(b,{name:"business",size:"20px"})]),option:o(a=>[s(k,z(L(a.itemProps)),{default:o(()=>[s(_,{avatar:"",class:"no-margin"},{default:o(()=>[s(b,{name:"business",size:"20px"})]),_:1}),s(_,{class:"no-margin"},{default:o(()=>[s(y,null,{default:o(()=>[h(E(a.opt.label),1)]),_:2},1024),s(y,{caption:""},{default:o(()=>[h(E(a.opt.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","label","rules","readonly","disable","clearable"]))}};var w=B(P,[["__scopeId","data-v-2e10a158"]]);export{w as S};
