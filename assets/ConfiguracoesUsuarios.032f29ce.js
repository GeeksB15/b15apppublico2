import{_ as oo,r as S,o as _,p as U,f as o,w as a,Q as h,be as R,P as z,H as m,d as x,S as w,T as p,j as E,k as c,N as A,F as P,x as O,C as j,U as y,t as C,m as V,l as Q,b3 as b,A as eo,O as M,as as ao,v as B,R as io,D as L,M as J,G as X,h as T,i as K,aN as k,I as W,q as F,aU as so,e as Y,cL as ro}from"./index.2badb43a.js";import{o as Z}from"./open-url.0f1fa417.js";import{L as to}from"./Lista.71d9b58a.js";const lo={components:{Lista:to},data(){return{lista:[],mostrar:{header:!1,barraTopo:!1,toolbarTitulo:!0,icone:"",titulo:"",buscar:!0,filtroAvancado:!1,btnAjuda:!0,btnAtualizar:!0,btnNovo:!0,toolbarAcoes:!0,checkBox:!1,btnRemover:!1,btnRestaurar:!1,centralizaTabs:!1,btnDetalhes:!1,btnExportaXLS:!1,btnMenuMais:!1,toolbarAdicao:!1,bannerMsg:"",conexao:{icone:"online",iconeTamanho:"xs",cor:"grey-5",rotulo:null,dica:"Online",denso:!0,flat:!0,escuro:!1}},busca:"",tabSelecionada:{valor:"Todos"},tabs:[],paginacao:{atual:1,maximo:1,total:1,limite:25},grupo:[],usuarios:[],telaAdicionarUsuario:{codigoGrupo:"",codigoContato:"",nome:"",cpf:"",senha:"",mostraSenha:!0,mostrar:!1},permissao:{titulo:"",mostrar:!1,buscaPermissao:"",expandirPermissao:!0,pais:[],ret:[],u:{},tipo:"",codigoGrupo:0},empresaUsuarios:{empresa:"",usuario:[],mostrar:!1}}},computed:{permissaoUsuarioCheckboxTodos(){return this.permissao.ret.itens.reduce((s,e)=>s!==e.permissaoUsuario?null:s,this.permissao.ret.itens[0].permissaoUsuario)},permissaoGrupoCheckboxTodos(){return this.permissao.ret.itens.reduce((s,e)=>s!==e.permissaoGrupo?null:s,this.permissao.ret.itens[0].permissaoGrupo)}},methods:{async atualizar(){try{$q.loading.show(),this.clienteSistema=JSON.parse(localStorage.getItem("clienteSistema"))||{};const s=await $utils.geeksApi({grupo:{funcao:"9C93290F-BEDD-4051-A0F5-FA01D961CCF4",codigoClienteSistema:this.clienteSistema.codigoClienteSistema},usuario:{funcao:"E4E43C26-D0B7-4CFB-9F13-BBFA9F11E847",codigoClienteSistema:this.clienteSistema.codigoClienteSistema,termoBusca:this.busca}});this.grupo=s.data.grupo.sort((e,t)=>{var u,i;return((u=e.descricao)==null?void 0:u.toLowerCase())<((i=t.descricao)==null?void 0:i.toLowerCase())?-1:1}),this.usuario=s.data.usuario.sort((e,t)=>{var u,i;return((u=e.nome)==null?void 0:u.toLowerCase())<((i=t.nome)==null?void 0:i.toLowerCase())?-1:1}),this.tabs=[];for(const e of this.grupo)this.tabs.push({valor:e.codigoGrupo,rotulo:e.descricao});this.tabs.push({valor:"Todos",rotulo:"Todos"}),this.tabs.push({valor:"Grupos",rotulo:"Grupos"}),this.tabSelecionada.valor==="Todos"?this.lista=this.usuario:this.lista=this.usuario.filter(e=>e.codigoGrupo===this.tabSelecionada.valor),this.tabSelecionada.valor==="Grupos"?this.lista.total=this.grupo.length:this.lista.total||(this.lista.total=this.lista.total=this.lista.length),this.paginacao.total=this.lista.total}catch(s){$q.notifyError("Erro iniciar",s)}finally{$q.loading.hide()}},permissao_filtro_atualiza(){for(const t of this.permissao.ret.itens)t.mostrar=this.permissao.buscaPermissao.length<=2||!!t.descricao.toLowerCase().match(this.permissao.buscaPermissao.toLowerCase());const s=this.permissao.ret.itens;function e(t){const u=s.find(i=>t.codigoPai===i.codigoObjeto);if(!u){console.log("Orf\xE3o",t.codigoObjeto,t.descricao);return}u.mostrar=!0,u.codigoPai&&e(u)}for(const t of s)t.mostrar&&t.codigoPai&&e(t)},async grupo_incluir_click(){$q.dialog({title:"Qual o nome do grupo?",preventClose:!0,prompt:{model:"",isValid:s=>s.length>0,type:"text"},cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Criar",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(async s=>{try{$q.loading.show();const e=await $utils.geeksApi({grupo:{funcao:"240A354B-DADC-4133-B359-F578E28572F5",descricao:s,codigoClienteSistema:this.clienteSistema.codigoClienteSistema}});if(e.data.grupo.erro){$q.notifyError(e.data.grupo.erro),$q.loading.hide();return}await this.atualizar()}catch(e){$q.notifyError("Erro ao cadastrar grupo.",e)}finally{$q.loading.hide()}})},async grupo_editar_click(s){$q.dialog({title:"Novo nome do grupo:",preventClose:!0,prompt:{model:"",isValid:e=>e.length>0,type:"text"},cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Editar",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(async e=>{try{$q.loading.show();const t=await $utils.geeksApi({grupo:{funcao:"9A886DAF-E5D4-4DAC-9933-6168074CE916",codigoGrupo:s.codigoGrupo,descricao:e,codigoClienteSistema:this.clienteSistema.codigoClienteSistema}});if(t.data.grupo.erro){$q.notifyError(t.data.grupo.erro),$q.loading.hide();return}await this.atualizar()}catch(t){$q.notifyError("Erro ao editar nome do grupo.",t)}finally{$q.loading.hide()}})},async grupo_excluir_click(s){$q.dialog({title:"Remover grupo",message:`Deseja remover o grupo: ${s.descricao}?`,cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(async()=>{try{const e=await $utils.geeksApi({grupo:{funcao:"D328D819-AA47-453D-B455-1620E229BFFC",codigoGrupo:s.codigoGrupo}});if(e.data.grupo.erro){$q.notifyError(e.data.grupo.erro);return}await this.atualizar()}catch{$q.notifyError("Houve um erro ao remover o grupo. Tente novamente")}})},async usuario_seleciona_click(){const s=await $g.promptContato.show({filtro:{ativo:!0},placeholder:"Selecione um usu\xE1rio"});s&&(this.telaAdicionarUsuario.nome=s.nome,this.telaAdicionarUsuario.cpf=s.numeroDocumentoNacional,this.telaAdicionarUsuario.codigoContato=s.codigoContato)},async usuario_incluir_show(s){if(!(!!$db.usuario.logado.administrador&&[1,2].includes($db.usuario.logado.grupoInterno))&&$utils.sistemaPai()==="b15"){console.log("Encaminhar para Suporte"),Z("https://api.whatsapp.com/send?phone="+"551621116161");return}const t=this.telaAdicionarUsuario;if(s===void 0){t.codigoUsuario=null,t.codigoGrupo="",t.nome="",t.cpf="",t.senha="",t.mostrar=!0;return}t.codigoUsuario=null,t.codigoGrupo=s.codigoGrupo,t.nome=s.nome,t.cpf=s.numeroDocumentoNacional,t.mostrar=!0},async usuario_editar_show(s){const e=this.telaAdicionarUsuario;e.codigoUsuario=s.codigoUsuario,e.codigoGrupo=s.codigoGrupo,e.nome=s.nome,e.cpf=s.numeroDocumentoNacional,e.mostrar=!0},async usuario_alterar_senha_show(s){$q.dialog({title:"Informe a nova senha:",preventClose:!0,prompt:{model:"",isValid:e=>e.length>=6,type:"password",hint:"* A senha deve conter no m\xEDnimo 6 caracteres"},cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Atualizar",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(async e=>{try{$q.loading.show(),await $utils.geeksApi({grupo:{funcao:"96C436BE-FCDE-4595-BFFC-AFA4D6E75802",senha:e,codigoUsuario:this.telaAdicionarUsuario.codigoUsuario}})}catch(t){$q.notifyError("Erro ao alterar senha.",t)}finally{$q.loading.hide(),this.telaAdicionarUsuario.mostrar=!1}})},async usuario_gravar_click(){try{$q.loading.show();const s=$utils.clonar(this.telaAdicionarUsuario);s.funcao="00937915-77BD-4FFD-9681-313CC6031C30",s.codigoClienteSistema=this.clienteSistema.codigoClienteSistema,s.numeroDocumentoNacional=s.cpf;const e=await $utils.geeksApi({gravarUsuario:s});if(e.data.gravarUsuario.erro!==""){$q.notifyError(e.data.gravarUsuario.erro),$q.loading.hide();return}await this.atualizar()}catch(s){$q.notifyError("Erro ao adicionar usu\xE1rio ao grupo",s)}finally{$q.loading.hide()}},async usuario_excluir_click(s){if(!(!!$db.usuario.logado.administrador&&[1,2].includes($db.usuario.logado.grupoInterno))&&$utils.sistemaPai()==="b15"){console.log("Encaminhar para Suporte"),Z("https://api.whatsapp.com/send?phone="+"551621116161");return}$q.dialog({title:"Remover usu\xE1rio",message:`Deseja remover o usu\xE1rio: ${s.nome} do grupo?`,cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(async()=>{try{$q.loading.show(),await $utils.geeksApi({usuarioRemover:{funcao:"ED2D686D-D3ED-4777-BBEE-2C5A9CC4EBB0",codigoUsuario:s.codigoUsuario,codigoClienteSistema:this.clienteSistema.codigoClienteSistema}}),await this.atualizar()}catch(t){$q.notifyError("Houve um erro ao remover o usu\xE1rio do grupo",t)}finally{$q.loading.hide()}})},async permissoes_atualiza({codigoClienteSistema:s,codigoUsuario:e,codigoGrupo:t}){const u=(await $utils.geeksApi({itens:{funcao:"1C308EF4-D1FC-49E5-9195-71112132823E",codigoClienteSistema:s},permissaoUsuario:{funcao:"54493700-6637-4007-84D5-21573F039170",codigoClienteSistema:s,codigoUsuario:e},permissaoGrupo:{funcao:"004DB447-F92F-4A91-852B-5895B64E93E9",codigoGrupo:t}})).data;for(const i of u.itens)i.permissaoUsuario=!!u.permissaoUsuario.find(l=>l.codigoObjeto===i.codigoObjeto),i.permissaoGrupo=!!u.permissaoGrupo.find(l=>l.codigoObjeto===i.codigoObjeto),i.permissaoUsuarioOriginal=!!u.permissaoUsuario.find(l=>l.codigoObjeto===i.codigoObjeto),i.permissaoGrupoOriginal=!!u.permissaoGrupo.find(l=>l.codigoObjeto===i.codigoObjeto),i.mostrar=!0,i.aberto=!0;u.itens=$lodash.orderBy(u.itens,["ordem","descricao"],["asc","asc"]),globalThis.itens=u.itens,this.permissao.ret=u},async grupo_permissao_show(s){s.codigoUsuario=0,this.permissao.titulo=s.descricao,this.permissao.codigoGrupo=s.codigoGrupo,await this.permissoes_atualiza(s),this.permissao.tipo="grupo",this.permissao_filtro_atualiza(),this.permissao.mostrar=!0},async grupo_permissao_gravar_click(){const s=[],e=[];for(const t of this.grupoPermissao.permissaoOriginal)this.grupoPermissao.permissao.find(u=>u===t)||e.push(this.grupoPermissao.ret.find(u=>u.descricao===t).codigoGrupoPermissao);for(const t of this.grupoPermissao.permissao)this.grupoPermissao.permissaoOriginal.find(u=>u===t)||s.push(this.grupoPermissao.ret.find(u=>u.descricao===t).codigoGrupoPermissao);console.log("ativar",s,s.join(",")),console.log("inativar",e,e.join(",")),(await $utils.geeksApi({ret:{funcao:"53385537-7D4E-460B-8113-FED2D02D7017",ativar:s,inativar:e}})).data.ret,this.grupo_permissao_show(this.grupoPermissao.g)},async usuario_permissao_show(s){this.permissao.titulo=`${s.nome} - ${this.grupo.find(e=>e.codigoGrupo===s.codigoGrupo).descricao}`,this.permissao.codigoGrupo=s.codigoGrupo,this.permissao.u=s,await this.permissoes_atualiza(s),this.permissao.tipo="usuario",this.permissao.mostrar=!0},async usuario_permissao_gravar_click(){if(this.permissao.tipo==="usuario"){const t=[],u=[];for(const i of this.permissao.ret.itens)i.permissaoUsuario!==i.permissaoUsuarioOriginal&&(i.permissaoUsuario?t.push(i.codigoObjeto):u.push(i.codigoObjeto));console.log("ativar",t,t.join(",")),console.log("inativar",u,u.join(",")),(await $utils.geeksApi({ret:{funcao:"EDB935DC-96C9-48A0-8D7B-6EA6534C9DBD",ativar:t,inativar:u,codigoUsuario:this.permissao.u.codigoUsuario,codigoClienteSistema:this.clienteSistema.codigoClienteSistema}})).data.ret}const s=[],e=[];for(const t of this.permissao.ret.itens)t.permissaoGrupo!==t.permissaoGrupoOriginal&&(t.permissaoGrupo?s.push(t.codigoObjeto):e.push(t.codigoObjeto));console.log("grupo ativa",s,s.join(",")),console.log("grupo inativar",e,e.join(",")),s.length+e.length>0&&await $utils.geeksApi({ret:{funcao:"53385537-7D4E-460B-8113-FED2D02D7017",ativar:s,inativar:e,codigoGrupo:this.permissao.codigoGrupo}}),this.permissao.mostrar=!1},usuario_permissao_pai_usuario_click(s){for(const e of this.permissao.ret.itens.filter(t=>t.codigoPai===s.codigoPai))e.permissaoUsuario=s.usuarioPermissao},usuario_permissao_pai_grupo_click(s){for(const e of this.permissao.ret.itens.filter(t=>t.codigoPai===s.codigoPai))e.permissaoGrupo=s.grupoPermissao},usuario_permissao_pai_atualizar(s){const e=this.permissao.ret.itens.filter(i=>i.codigoPai===s.codigoPai)[0];let t=e.permissaoUsuario,u=e.permissaoGrupo;for(const i of this.permissao.ret.itens.filter(l=>l.codigoPai===s.codigoPai))if(i.permissaoGrupo!==u){u=null;break}for(const i of this.permissao.ret.itens.filter(l=>l.codigoPai===s.codigoPai))if(i.permissaoUsuario!==t){t=null;break}s.grupoPermissao=u,s.usuarioPermissao=t},async usuario_permissao_empresa_show(s){const e=(await $db.empresa.leOnlinePlat({codigoClienteSistema:this.clienteSistema.codigoClienteSistema})).sort((u,i)=>{var l,G;return((l=u.nome)==null?void 0:l.toLowerCase())<((G=i.nome)==null?void 0:G.toLowerCase())?-1:1}),t=await $utils.geeksApi({permissao:{funcao:"E0982E1C-87EC-4506-8293-675407D3312C",usuarioCpf:s.numeroDocumentoNacional}});for(const u of e)u.ativo=!!t.data.permissao.find(i=>i.empresaCnpj===u.numeroDocumentoNacional),u.ativoOriginal=u.ativo;this.empresaUsuarios.empresa=e,this.empresaUsuarios.usuario=s,this.usuario_permissao_empresa_atualizar_pai(),this.empresaUsuarios.mostrar=!this.empresaUsuarios.mostrar},async usuario_permissao_empresa_gravar(){const s=[],e=[];for(const t of this.empresaUsuarios.empresa)t.ativo!==t.ativoOriginal&&(t.ativo?s.push(t.numeroDocumentoNacional):e.push(t.numeroDocumentoNacional));console.log("ativar",s,s.join(",")),console.log("inativar",e,e.join(",")),await $utils.geeksApi({ret:{funcao:"46CC046D-A712-4C46-A1FF-98ED27C403B7",ativar:s,inativar:e,usuarioCpf:this.empresaUsuarios.usuario.numeroDocumentoNacional}})},usuario_permissao_empresa_atualizar_pai(){this.empresaUsuarios.usuario.ativo=this.empresaUsuarios.empresa[0].ativo;for(const s of this.empresaUsuarios.empresa)if(this.empresaUsuarios.usuario.ativo!==s.ativo){this.empresaUsuarios.usuario.ativo=null;break}},permissao_ativar_todos_click(s,e){let t="permissaoUsuario";s==="grupo"&&(t="permissaoGrupo");const u=this.permissao.ret.itens;function i(l){const G=u.filter(D=>l.codigoObjeto===D.codigoPai);for(const D of G)D[t]=l[t],i(D)}if(e[t]===!0&&u.filter(l=>e.codigoObjeto===l.codigoPai).length>0){$q.dialog({title:"Ativar todas as permiss\xF5es",preventClose:!0,cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(async()=>{i(e)});return}i(e)}},async mounted(){await this.atualizar()}},uo={id:"UsuarioLista"},no={class:"mw80 text-center"},co={class:"mw80 text-center"},mo={class:"u-container"};function po(s,e,t,u,i,l){const G=S("BadgeCopiarUid"),D=S("Avatar"),I=S("badge"),$=S("Lista"),v=S("g-label"),g=S("g-col"),q=S("g-row"),H=S("avatar");return _(),U("div",uo,[o($,{ref:"usuarioLista",busca:i.busca,"onUpdate:busca":e[4]||(e[4]=r=>i.busca=r),onAtualizar:l.atualizar,lista:i.lista,tabSelecionada:i.tabSelecionada,tabs:i.tabs,paginacao:i.paginacao,mostrar:i.mostrar,style:{"margin-top":"-16px"}},{botaoNovo:a(()=>[o(h,{unelevated:"",icon:"add",label:"Novo",color:"primary","text-color":"white",class:"hideonmobile"},{default:a(()=>[o(R,null,{default:a(()=>[o(z,{link:"","no-border":"",separator:""},{default:a(()=>[m((_(),x(w,{onClick:e[0]||(e[0]=r=>l.grupo_incluir_click()),clickable:""},{default:a(()=>[o(p,{avatar:""},{default:a(()=>[o(E,{name:"add"})]),_:1}),o(p,null,{default:a(()=>e[22]||(e[22]=[c("Grupo")])),_:1})]),_:1})),[[A]]),m((_(),x(w,{onClick:e[1]||(e[1]=r=>l.usuario_incluir_show(i.grupo.find(n=>n.codigoGrupo===i.tabSelecionada.valor))),clickable:""},{default:a(()=>[o(p,{avatar:""},{default:a(()=>[o(E,{name:"add"})]),_:1}),o(p,null,{default:a(()=>e[23]||(e[23]=[c("Usu\xE1rio")])),_:1})]),_:1})),[[A]])]),_:1})]),_:1})]),_:1}),o(h,{unelevated:"",round:"",icon:"add",color:"primary","text-color":"white",class:"hideondesktop"},{default:a(()=>[o(R,null,{default:a(()=>[o(z,{link:"","no-border":"",separator:""},{default:a(()=>[m((_(),x(w,{onClick:e[2]||(e[2]=r=>l.grupo_incluir_click()),clickable:""},{default:a(()=>[o(p,{avatar:""},{default:a(()=>[o(E,{name:"add"})]),_:1}),o(p,null,{default:a(()=>e[24]||(e[24]=[c("Grupo")])),_:1})]),_:1})),[[A]]),m((_(),x(w,{onClick:e[3]||(e[3]=r=>l.usuario_incluir_show(i.grupo.find(n=>n.codigoGrupo===i.tabSelecionada.valor))),clickable:""},{default:a(()=>[o(p,{avatar:""},{default:a(()=>[o(E,{name:"add"})]),_:1}),o(p,null,{default:a(()=>e[25]||(e[25]=[c("Usu\xE1rio")])),_:1})]),_:1})),[[A]])]),_:1})]),_:1})]),_:1})]),itemLista:a(()=>[o(z,{bordered:"",class:"bg-white q-mb-xs rounded-borders"},{default:a(()=>[(_(!0),U(P,null,O(i.lista,(r,n)=>(_(),U("div",{key:n,class:"itemHover"},[o(w,{"manual-focus":"",class:"q-py-sm q-px-xs",style:{"flex-wrap":"wrap!important"}},{default:a(()=>[o(p,{class:"hideonmobile col-auto q-pr-sm no-margin"},{default:a(()=>[j("div",no,[o(G,{id:String(r.codigoContato),numero:r.codigoContato,cor:"positive",dica:"C\xF3digo Contato"},null,8,["id","numero"])])]),_:2},1024),o(p,{class:"col-12 col-sm no-margin"},{default:a(()=>[o(w,{class:"q-pa-none"},{default:a(()=>[o(p,{class:"col-auto items-center"},{default:a(()=>[o(D,{imagem:null,rotulo:r.apelido,tamanho:"40",style:{display:"flex","align-self":"center"}},null,8,["rotulo"])]),_:2},1024),o(p,{class:"col"},{default:a(()=>[o(y,{lines:"2",class:"text-weight-bold ellipsis-2-lines"},{default:a(()=>[j("span",null,[c(C(r.nome)+" ",1),o(V,{anchor:"bottom middle",self:"center middle"},{default:a(()=>e[26]||(e[26]=[c("Nome")])),_:1})])]),_:2},1024),o(y,{caption:"",lines:"1",class:"ellipsis"},{default:a(()=>[j("span",null,[c(C(r.apelido)+" ",1),o(V,{anchor:"bottom middle",self:"center middle"},{default:a(()=>e[27]||(e[27]=[c("Apelido")])),_:1})])]),_:2},1024),o(y,{class:"hideondesktop"},{default:a(()=>[o(G,{id:String(r.codigoContato),numero:r.codigoContato,cor:"positive",dica:"C\xF3digo Contato"},null,8,["id","numero"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),o(p,{class:"col-grow col-sm-3 col-md-2 colq-pl-sm no-margin"},{default:a(()=>[o(y,{lines:"1",color:"tertiary",class:"ellipsis"},{default:a(()=>[j("span",null,[c(C(r.numeroDocumentoNacional)+" ",1),o(V,{anchor:"bottom middle",self:"center middle"},{default:a(()=>e[28]||(e[28]=[c("CPF/CNPJ")])),_:1})])]),_:2},1024),o(y,{caption:"",lines:"1",color:"tertiary",class:"ellipsis"},{default:a(()=>{var d;return[o(I,{rotulo:(d=i.grupo.find(f=>f.codigoGrupo===r.codigoGrupo))==null?void 0:d.descricao,cor:"tertiary",escuro:"",dica:"Grupo"},null,8,["rotulo"])]}),_:2},1024)]),_:2},1024),o(p,{class:"col-shrink q-pl-sm no-margin"},{default:a(()=>[o(y,{class:"text-weight-bold text-right"},{default:a(()=>[o(h,{onClick:d=>l.usuario_editar_show(r),icon:"edit",size:"md",rounded:"",flat:"",dense:"",color:"primary",class:"q-mr-sm"},{default:a(()=>[o(V,{anchor:"bottom middle",self:"center middle"},{default:a(()=>e[29]||(e[29]=[c("Editar usu\xE1rio")])),_:1})]),_:2},1032,["onClick"]),o(h,{onClick:d=>l.usuario_permissao_show(r),icon:"admin_panel_settings",size:"md",rounded:"",flat:"",dense:"",color:"primary",class:"q-mr-sm"},{default:a(()=>[o(V,{anchor:"bottom middle",self:"center middle"},{default:a(()=>e[30]||(e[30]=[c("Editar permiss\xF5es")])),_:1})]),_:2},1032,["onClick"]),o(h,{onClick:d=>l.usuario_permissao_empresa_show(r),icon:"business",size:"md",rounded:"",flat:"",dense:"",color:"primary",class:"q-mr-sm"},{default:a(()=>[o(V,{anchor:"bottom middle",self:"center middle"},{default:a(()=>e[31]||(e[31]=[c("Permiss\xE3o empresa")])),_:1})]),_:2},1032,["onClick"]),o(h,{onClick:d=>l.usuario_excluir_click(r),icon:"delete",size:"md",rounded:"",flat:"",dense:"",color:"tertiary"},{default:a(()=>[o(V,{anchor:"bottom middle",self:"center middle"},{default:a(()=>e[32]||(e[32]=[c("Excluir usu\xE1rio")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),o(Q)]))),128)),(_(!0),U(P,null,O(i.grupo,(r,n)=>m((_(),U("div",{key:n,class:"itemHover"},[o(w,{"manual-focus":"",class:"q-py-sm q-px-xs",style:{"flex-wrap":"wrap!important"}},{default:a(()=>[o(p,{class:"hideonmobile col-auto q-pr-sm no-margin"},{default:a(()=>[j("div",co,[o(G,{id:String(r.codigoGrupo),numero:r.codigoGrupo,cor:"positive",dica:"C\xF3digo Contato"},null,8,["id","numero"])])]),_:2},1024),o(p,{class:"col-12 col-sm no-margin"},{default:a(()=>[o(w,{class:"q-pa-none"},{default:a(()=>[o(p,{class:"col-auto items-center"},{default:a(()=>[o(D,{imagem:null,rotulo:r.descricao,tamanho:"40",style:{display:"flex","align-self":"center"}},null,8,["rotulo"])]),_:2},1024),o(p,{class:"col"},{default:a(()=>[o(y,{lines:"2",class:"text-weight-bold ellipsis-2-lines"},{default:a(()=>[c(C(r.descricao),1)]),_:2},1024),o(y,{class:"hideondesktop"},{default:a(()=>[o(G,{id:String(r.codigoGrupo),numero:r.codigoGrupo,cor:"positive",dica:"C\xF3digo Contato"},null,8,["id","numero"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),o(p,{class:"col-12 col-sm-shrink q-pl-sm no-margin"},{default:a(()=>[o(y,{class:"text-weight-bold text-right"},{default:a(()=>[o(h,{onClick:d=>l.grupo_editar_click(r),icon:"edit",size:"md",rounded:"",flat:"",dense:"",color:"primary",class:"q-mr-sm"},{default:a(()=>[o(V,{anchor:"bottom middle",self:"center middle"},{default:a(()=>e[33]||(e[33]=[c("Editar grupo")])),_:1})]),_:2},1032,["onClick"]),o(h,{onClick:d=>l.grupo_permissao_show(r),icon:"admin_panel_settings",size:"md",rounded:"",flat:"",dense:"",color:"primary",class:"q-mr-sm"},{default:a(()=>[o(V,{anchor:"bottom middle",self:"center middle"},{default:a(()=>e[34]||(e[34]=[c("Editar permiss\xF5es")])),_:1})]),_:2},1032,["onClick"]),o(h,{onClick:d=>l.grupo_excluir_click(r),icon:"delete",size:"md",rounded:"",flat:"",dense:"",color:"tertiary"},{default:a(()=>[o(V,{anchor:"bottom middle",self:"center middle"},{default:a(()=>e[35]||(e[35]=[c("Excluir grupo")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),o(Q)])),[[b,i.tabSelecionada.valor==="Grupos"]])),128))]),_:1})]),_:1},8,["busca","onAtualizar","lista","tabSelecionada","tabs","paginacao","mostrar"]),o(L,{modelValue:i.telaAdicionarUsuario.mostrar,"onUpdate:modelValue":e[10]||(e[10]=r=>i.telaAdicionarUsuario.mostrar=r),persistent:""},{default:a(()=>[o(eo,{style:{width:"500px","max-width":"80vw"}},{default:a(()=>[o(M,null,{default:a(()=>[m(o(v,{text:"h6"},{default:a(()=>e[36]||(e[36]=[c("Adicionar usu\xE1rio")])),_:1},512),[[b,!i.telaAdicionarUsuario.codigoUsuario]]),m(o(v,{text:"h6"},{default:a(()=>e[37]||(e[37]=[c("Atualizar usu\xE1rio")])),_:1},512),[[b,i.telaAdicionarUsuario.codigoUsuario]])]),_:1}),o(M,{class:"q-py-none"},{default:a(()=>[o(ao,{modelValue:i.telaAdicionarUsuario.codigoGrupo,"onUpdate:modelValue":e[5]||(e[5]=r=>i.telaAdicionarUsuario.codigoGrupo=r),options:i.grupo,"option-value":"codigoGrupo","option-label":r=>r===null?"":r.descricao,label:"Grupo","map-options":"","emit-value":"",filled:"",dense:"",hint:"",class:"q-mb-md"},null,8,["modelValue","options","option-label"]),o(B,{modelValue:i.telaAdicionarUsuario.nome,"onUpdate:modelValue":e[6]||(e[6]=r=>i.telaAdicionarUsuario.nome=r),onClick:l.usuario_seleciona_click,label:"Nome",filled:"",dense:"",readonly:"",disable:!!i.telaAdicionarUsuario.codigoUsuario,hint:i.telaAdicionarUsuario.codigoUsuario?"":"Clique para selecionar o usu\xE1rio",class:"q-mb-md"},{append:a(()=>[o(E,{onClick:l.usuario_seleciona_click,name:"search",class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onClick","disable","hint"]),o(B,{modelValue:i.telaAdicionarUsuario.cpf,"onUpdate:modelValue":e[7]||(e[7]=r=>i.telaAdicionarUsuario.cpf=r),label:"CPF",filled:"",dense:"",readonly:"",disable:!!i.telaAdicionarUsuario.codigoUsuario,hint:i.telaAdicionarUsuario.codigoUsuario?"":"* CPF obrigat\xF3rio (preenchido ao selecionar usu\xE1rio)",class:"q-mb-md"},null,8,["modelValue","disable","hint"]),m(o(B,{modelValue:i.telaAdicionarUsuario.senha,"onUpdate:modelValue":e[9]||(e[9]=r=>i.telaAdicionarUsuario.senha=r),type:i.telaAdicionarUsuario.mostraSenha?"password":"text",label:"Senha",filled:"",dense:"",hint:"* A senha deve conter no m\xEDnimo 6 caracteres",rules:[r=>r.length>=6||"A senha deve conter no m\xEDnimo 6 caracteres"]},{append:a(()=>[o(E,{onClick:e[8]||(e[8]=r=>i.telaAdicionarUsuario.mostraSenha=!i.telaAdicionarUsuario.mostraSenha),name:i.telaAdicionarUsuario.mostraSenha?"visibility_off":"visibility",class:"cursor-pointer"},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),[[b,!i.telaAdicionarUsuario.codigoUsuario]])]),_:1}),o(io,{align:"right",class:"text-primary"},{default:a(()=>[m(o(h,{label:"Cancelar",flat:"",color:"tertiary"},null,512),[[A]]),m(o(h,{onClick:l.usuario_gravar_click,label:"Adicionar",color:"primary"},null,8,["onClick"]),[[A]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(L,{modelValue:i.permissao.mostrar,"onUpdate:modelValue":e[18]||(e[18]=r=>i.permissao.mostrar=r),maximized:""},{default:a(()=>[o(J,{container:"",class:"bg-white"},{default:a(()=>[o(X,{class:"bg-white text-tertiary"},{default:a(()=>[o(T,{class:"bg-primary text-white"},{default:a(()=>[m(o(h,{icon:"arrow_back",round:"",flat:"",dense:""},null,512),[[A]]),o(K,null,{default:a(()=>[o(v,{lines:"1"},{default:a(()=>[c("Alterar permiss\xF5es de: "+C(i.permissao.titulo),1)]),_:1})]),_:1}),m(o(h,{onClick:l.usuario_permissao_gravar_click,label:"Salvar",color:"white","text-color":"primary",unelevated:""},null,8,["onClick"]),[[A]])]),_:1}),j("div",mo,[o(q,{gutter:"sm-x",justify:"center"},{default:a(()=>[o(g,{col:"12 sm10 md7",bordered:"bottom"},{default:a(()=>[o(T,{class:"no-padding"},{default:a(()=>[o(B,{modelValue:i.permissao.buscaPermissao,"onUpdate:modelValue":[e[11]||(e[11]=r=>i.permissao.buscaPermissao=r),l.permissao_filtro_atualiza],onClear:e[12]||(e[12]=r=>i.permissao.buscaPermissao=""),debounce:500,placeholder:"Filtrar","clear-icon":"close",standout:"",filled:"",clearable:"",dense:""},{prepend:a(()=>[o(E,{name:"mdi-filter",color:"grey-6"})]),after:a(()=>[o(h,{onClick:l.atualizar,icon:"refresh",size:"17.5px",round:"",flat:"",dense:"",color:"grey-6",class:"q-ml-xs"},null,8,["onClick"])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),o(q,{items:"center"},{default:a(()=>[o(g,{col:"xs"},{default:a(()=>[o(h,{onClick:e[13]||(e[13]=()=>{const r=!i.permissao.ret.itens.find(n=>n.codigoPai===0).aberto;i.permissao.ret.itens.forEach(n=>n.aberto=r)}),icon:i.permissao.ret.itens.find(r=>r.codigoPai===0).aberto?"expand_less":"expand_more",size:"17.5px",round:"",flat:"",dense:"",color:"grey-6"},null,8,["icon"])]),_:1}),m(o(g,{col:"xs-shrink",text:"center"},{default:a(()=>[o(k,{onClick:e[14]||(e[14]=()=>{s.v=!i.permissao.ret.itens[0].permissaoUsuario,i.permissao.ret.itens.forEach(r=>r.permissaoUsuario=s.v)}),modelValue:l.permissaoUsuarioCheckboxTodos,"onUpdate:modelValue":e[15]||(e[15]=r=>l.permissaoUsuarioCheckboxTodos=r)},null,8,["modelValue"]),o(v,{style:{"font-size":"11px"}},{default:a(()=>e[38]||(e[38]=[c("Usu\xE1rio")])),_:1})]),_:1},512),[[b,i.permissao.tipo==="usuario"]]),o(g,{col:"xs-shrink",text:"center"},{default:a(()=>[o(k,{onClick:e[16]||(e[16]=()=>{s.v=!i.permissao.ret.itens[0].permissaoGrupo,i.permissao.ret.itens.forEach(r=>r.permissaoGrupo=s.v)}),modelValue:l.permissaoGrupoCheckboxTodos,"onUpdate:modelValue":e[17]||(e[17]=r=>l.permissaoGrupoCheckboxTodos=r)},null,8,["modelValue"]),o(v,{style:{"font-size":"11px"}},{default:a(()=>e[39]||(e[39]=[c("Grupo")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}),o(W,{class:"u-container"},{default:a(()=>[o(q,{gutter:"sm-x",mg:"lg-y",justify:"center"},{default:a(()=>[o(g,{col:"12 sm10 md7"},{default:a(()=>[(_(!0),U(P,null,O(i.permissao.ret.itens.filter(r=>r.codigoPai===0),r=>m((_(),x(q,{key:r.codigoObjeto,mg:"md-b"},{default:a(()=>[o(g,{col:"12"},{default:a(()=>[o(q,{bg:"bg-grey-3",items:"center"},{default:a(()=>[o(g,{col:"xs",onClick:()=>{r.aberto=!r.aberto},class:F(i.permissao.ret.itens.filter(n=>n.codigoPai===r.codigoObjeto).length>0?"cursor-pointer":"")},{default:a(()=>[o(v,{icon:i.permissao.ret.itens.filter(n=>n.codigoPai===r.codigoObjeto).length>0?r.aberto?"expand_less xs":"expand_more xs":"",class:F(i.permissao.ret.itens.filter(n=>n.codigoPai===r.codigoObjeto).length>0?"":"g-mg-left"),text:"medium"},{default:a(()=>[c(C(r.descricao),1)]),_:2},1032,["icon","class"])]),_:2},1032,["onClick","class"]),o(g,{col:"xs-shrink"},{default:a(()=>[m(o(k,{modelValue:r.permissaoUsuario,"onUpdate:modelValue":n=>r.permissaoUsuario=n,onClick:n=>l.permissao_ativar_todos_click("usuario",r)},null,8,["modelValue","onUpdate:modelValue","onClick"]),[[b,i.permissao.tipo==="usuario"]])]),_:2},1024),o(g,{col:"xs-shrink"},{default:a(()=>[o(k,{modelValue:r.permissaoGrupo,"onUpdate:modelValue":n=>r.permissaoGrupo=n,onClick:n=>l.permissao_ativar_todos_click("grupo",r)},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),m(o(g,{col:"12"},{default:a(()=>[(_(!0),U(P,null,O(i.permissao.ret.itens.filter(n=>n.codigoPai===r.codigoObjeto),n=>m((_(),x(q,{key:n.codigoObjeto,items:"center",class:"g-mg-left"},{default:a(()=>[o(g,{col:"xs",onClick:()=>{n.aberto=!n.aberto},class:F(i.permissao.ret.itens.filter(d=>d.codigoPai===n.codigoObjeto).length>0?"cursor-pointer":"")},{default:a(()=>[o(v,{icon:i.permissao.ret.itens.filter(d=>d.codigoPai===n.codigoObjeto).length>0?n.aberto?"expand_less xs":"expand_more xs":"",text:"medium"},{default:a(()=>[c(C(n.descricao),1)]),_:2},1032,["icon"])]),_:2},1032,["onClick","class"]),o(g,{col:"xs-shrink"},{default:a(()=>[m(o(k,{modelValue:n.permissaoUsuario,"onUpdate:modelValue":d=>n.permissaoUsuario=d,onClick:d=>l.permissao_ativar_todos_click("usuario",n)},null,8,["modelValue","onUpdate:modelValue","onClick"]),[[b,i.permissao.tipo==="usuario"]])]),_:2},1024),o(g,{col:"xs-shrink"},{default:a(()=>[o(k,{modelValue:n.permissaoGrupo,"onUpdate:modelValue":d=>n.permissaoGrupo=d,onClick:d=>l.permissao_ativar_todos_click("grupo",n)},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1024),m(o(g,{col:"12"},{default:a(()=>[(_(!0),U(P,null,O(i.permissao.ret.itens.filter(d=>d.codigoPai===n.codigoObjeto),d=>m((_(),x(q,{key:d.codigoObjeto,items:"center",class:"g-mg-left g-mg-bottom"},{default:a(()=>[o(g,{col:"xs",onClick:()=>{d.aberto=!d.aberto},class:F(i.permissao.ret.itens.filter(f=>f.codigoPai===d.codigoObjeto).length>0?"cursor-pointer":"")},{default:a(()=>[o(v,{icon:i.permissao.ret.itens.filter(f=>f.codigoPai===d.codigoObjeto).length>0?d.aberto?"expand_less xs":"expand_more xs":"subdirectory_arrow_right",text:i.permissao.ret.itens.filter(f=>f.codigoPai===d.codigoObjeto).length>0?"medium":""},{default:a(()=>[c(C(d.descricao),1)]),_:2},1032,["icon","text"])]),_:2},1032,["onClick","class"]),o(g,{col:"xs-shrink"},{default:a(()=>[m(o(k,{modelValue:d.permissaoUsuario,"onUpdate:modelValue":f=>d.permissaoUsuario=f,onClick:f=>l.permissao_ativar_todos_click("usuario",d)},null,8,["modelValue","onUpdate:modelValue","onClick"]),[[b,i.permissao.tipo==="usuario"]])]),_:2},1024),o(g,{col:"xs-shrink"},{default:a(()=>[o(k,{modelValue:d.permissaoGrupo,"onUpdate:modelValue":f=>d.permissaoGrupo=f,onClick:f=>l.permissao_ativar_todos_click("grupo",d)},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1024),m(o(g,{col:"12"},{default:a(()=>[(_(!0),U(P,null,O(i.permissao.ret.itens.filter(f=>f.codigoPai===d.codigoObjeto),f=>m((_(),x(q,{key:f.codigoObjeto,items:"center",class:"g-mg-left g-mg-bottom"},{default:a(()=>[o(g,{col:"xs"},{default:a(()=>[o(v,{icon:"subdirectory_arrow_right"},{default:a(()=>[c(C(f.descricao),1)]),_:2},1024)]),_:2},1024),o(g,{col:"xs-shrink"},{default:a(()=>[m(o(k,{modelValue:f.permissaoUsuario,"onUpdate:modelValue":N=>f.permissaoUsuario=N},null,8,["modelValue","onUpdate:modelValue"]),[[b,i.permissao.tipo==="usuario"]])]),_:2},1024),o(g,{col:"xs-shrink"},{default:a(()=>[o(k,{modelValue:f.permissaoGrupo,"onUpdate:modelValue":N=>f.permissaoGrupo=N},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)),[[b,f.mostrar]])),128))]),_:2},1536),[[b,d.aberto]])]),_:2},1024)),[[b,d.mostrar]])),128))]),_:2},1536),[[b,n.aberto]])]),_:2},1024)),[[b,n.mostrar]])),128))]),_:2},1536),[[b,r.aberto]])]),_:2},1024)),[[b,r.mostrar]])),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(L,{modelValue:i.empresaUsuarios.mostrar,"onUpdate:modelValue":e[21]||(e[21]=r=>i.empresaUsuarios.mostrar=r),maximized:""},{default:a(()=>[o(J,{container:"",class:"bg-light"},{default:a(()=>[o(X,{class:"bg-light text-tertiary"},{default:a(()=>[o(T,{class:"bg-primary text-white q-pa-sm"},{default:a(()=>[m(o(h,{dense:"",flat:"",icon:"arrow_back",round:""},null,512),[[A]]),o(K,null,{default:a(()=>e[40]||(e[40]=[c("Permiss\xE3o de usu\xE1rios")])),_:1}),o(so),m(o(h,{onClick:l.usuario_permissao_empresa_gravar,label:"Salvar","text-color":"primary",color:"white",unelevated:""},null,8,["onClick"]),[[A]])]),_:1}),o(q,{gutter:"sm",items:"center"},{default:a(()=>[o(g,{col:"xs-shrink"},{default:a(()=>[o(H,{imagem:i.empresaUsuarios.usuario.imagem,rotulo:i.empresaUsuarios.usuario.apelido,tamanho:"40",style:{display:"flex","align-self":"center"}},null,8,["imagem","rotulo"])]),_:1}),o(g,{col:"xs"},{default:a(()=>[o(v,{text:"body1 medium"},{default:a(()=>[c(C(i.empresaUsuarios.usuario.apelido),1)]),_:1}),o(v,{text:"caption"},{default:a(()=>[c(C(i.empresaUsuarios.usuario.numeroDocumentoNacional),1)]),_:1})]),_:1}),o(g,{col:"xs-shrink"},{default:a(()=>[o(k,{modelValue:i.empresaUsuarios.usuario.ativo,"onUpdate:modelValue":e[19]||(e[19]=r=>i.empresaUsuarios.usuario.ativo=r),onClick:e[20]||(e[20]=()=>{this.empresaUsuarios.empresa.forEach(r=>{r.ativo=this.empresaUsuarios.usuario.ativo})})},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),o(W,null,{default:a(()=>[o(z,{bordered:"",class:"bg-white q-ma-xs rounded-borders"},{default:a(()=>[(_(!0),U(P,null,O(i.empresaUsuarios.empresa,(r,n)=>(_(),U("div",{key:n,class:"itemHover"},[o(w,{clickable:"","manual-focus":"",class:"q-py-sm q-px-xs"},{default:a(()=>[o(p,{class:"col-xs no-margin"},{default:a(()=>[o(w,{class:"q-pa-none"},{default:a(()=>[o(p,{class:"col-auto items-center"},{default:a(()=>[o(H,{imagem:r.imagem,rotulo:r.nome,tamanho:"40",style:{display:"flex","align-self":"center"}},null,8,["imagem","rotulo"])]),_:2},1024),o(p,{class:"col"},{default:a(()=>[o(y,{lines:"2",class:"text-tertiary text-weight-bold ellipsis-2-lines"},{default:a(()=>[c(C(r.nome),1)]),_:2},1024),o(y,{caption:"",lines:"2",class:"text-tertiary ellipsis"},{default:a(()=>[c(C(r.apelido),1)]),_:2},1024),o(p,{class:"hideondesktop q-mt-sm"},{default:a(()=>[j("div",null,[r.numeroDocumentoNacional?(_(),x(I,{key:0,cor:"tertiary",escuro:"",class:"q-mr-xs"},{default:a(()=>[c(C(r.numeroDocumentoNacional),1)]),_:2},1024)):Y("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),o(p,{class:"hideonmobile maxw180 q-pl-sm no-margin"},{default:a(()=>[r.numeroDocumentoNacional?(_(),x(ro,{key:0,color:"tertiary","multi-line":"",class:"col-auto q-mx-auto q-py-xs"},{default:a(()=>[c(C(r.numeroDocumentoNacional),1)]),_:2},1024)):Y("",!0)]),_:2},1024),o(p,{class:"col-xs-shrink no-margin"},{default:a(()=>[o(k,{modelValue:r.ativo,"onUpdate:modelValue":d=>r.ativo=d,onClick:l.usuario_permissao_empresa_atualizar_pai},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1024)]),_:2},1024),o(Q)]))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var ho=oo(lo,[["render",po]]);export{ho as default};
