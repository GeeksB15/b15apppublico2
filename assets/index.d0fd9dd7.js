const Qz=function(){const t=document.createElement("link").relList;return t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}(),F4={},Xz="/",Ke=function(t,o){return!o||o.length===0?t():Promise.all(o.map(r=>{if(r=`${Xz}${r}`,r in F4)return;F4[r]=!0;const a=r.endsWith(".css"),i=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${i}`))return;const n=document.createElement("link");if(n.rel=a?"stylesheet":Qz,a||(n.as="script",n.crossOrigin=""),n.href=r,document.head.appendChild(n),a)return new Promise((s,l)=>{n.addEventListener("load",s),n.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())};/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function kn(e){const t=Object.create(null);for(const o of e.split(","))t[o]=1;return o=>o in t}const Mo={},Yf=[],Hr=()=>{},V0=()=>!1,qd=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),dw=e=>e.startsWith("onUpdate:"),Ro=Object.assign,fw=(e,t)=>{const o=e.indexOf(t);o>-1&&e.splice(o,1)},Kz=Object.prototype.hasOwnProperty,oa=(e,t)=>Kz.call(e,t),Ot=Array.isArray,Jf=e=>Fm(e)==="[object Map]",Ld=e=>Fm(e)==="[object Set]",M4=e=>Fm(e)==="[object Date]",Yz=e=>Fm(e)==="[object RegExp]",ao=e=>typeof e=="function",_o=e=>typeof e=="string",ln=e=>typeof e=="symbol",pa=e=>e!==null&&typeof e=="object",mw=e=>(pa(e)||ao(e))&&ao(e.then)&&ao(e.catch),r8=Object.prototype.toString,Fm=e=>r8.call(e),Jz=e=>Fm(e).slice(8,-1),s_=e=>Fm(e)==="[object Object]",pw=e=>_o(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Zc=kn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Zz=kn("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),l_=e=>{const t=Object.create(null);return o=>t[o]||(t[o]=e(o))},eH=/-(\w)/g,Da=l_(e=>e.replace(eH,(t,o)=>o?o.toUpperCase():"")),tH=/\B([A-Z])/g,on=l_(e=>e.replace(tH,"-$1").toLowerCase()),gu=l_(e=>e.charAt(0).toUpperCase()+e.slice(1)),md=l_(e=>e?`on${gu(e)}`:""),Ni=(e,t)=>!Object.is(e,t),Zf=(e,...t)=>{for(let o=0;o<e.length;o++)e[o](...t)},i8=(e,t,o,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:o})},tg=e=>{const t=parseFloat(e);return isNaN(t)?e:t},og=e=>{const t=_o(e)?Number(e):NaN;return isNaN(t)?e:t};let N4;const c_=()=>N4||(N4=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});function oH(e,t){return e+JSON.stringify(t,(o,r)=>typeof r=="function"?r.toString():r)}const aH="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",rH=kn(aH);function _u(e){if(Ot(e)){const t={};for(let o=0;o<e.length;o++){const r=e[o],a=_o(r)?n8(r):_u(r);if(a)for(const i in a)t[i]=a[i]}return t}else if(_o(e)||pa(e))return e}const iH=/;(?![^(]*\))/g,nH=/:([^]+)/,sH=/\/\*[^]*?\*\//g;function n8(e){const t={};return e.replace(sH,"").split(iH).forEach(o=>{if(o){const r=o.split(nH);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Li(e){let t="";if(_o(e))t=e;else if(Ot(e))for(let o=0;o<e.length;o++){const r=Li(e[o]);r&&(t+=r+" ")}else if(pa(e))for(const o in e)e[o]&&(t+=o+" ");return t.trim()}function u_(e){if(!e)return null;let{class:t,style:o}=e;return t&&!_o(t)&&(e.class=Li(t)),o&&(e.style=_u(o)),e}const lH="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",cH="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",uH="annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics",dH="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",fH=kn(lH),mH=kn(cH),pH=kn(uH),hH=kn(dH),vH="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",gH=kn(vH);function s8(e){return!!e||e===""}function _H(e,t){if(e.length!==t.length)return!1;let o=!0;for(let r=0;o&&r<e.length;r++)o=lu(e[r],t[r]);return o}function lu(e,t){if(e===t)return!0;let o=M4(e),r=M4(t);if(o||r)return o&&r?e.getTime()===t.getTime():!1;if(o=ln(e),r=ln(t),o||r)return e===t;if(o=Ot(e),r=Ot(t),o||r)return o&&r?_H(e,t):!1;if(o=pa(e),r=pa(t),o||r){if(!o||!r)return!1;const a=Object.keys(e).length,i=Object.keys(t).length;if(a!==i)return!1;for(const n in e){const s=e.hasOwnProperty(n),l=t.hasOwnProperty(n);if(s&&!l||!s&&l||!lu(e[n],t[n]))return!1}}return String(e)===String(t)}function d_(e,t){return e.findIndex(o=>lu(o,t))}const l8=e=>!!(e&&e.__v_isRef===!0),le=e=>_o(e)?e:e==null?"":Ot(e)||pa(e)&&(e.toString===r8||!ao(e.toString))?l8(e)?le(e.value):JSON.stringify(e,c8,2):String(e),c8=(e,t)=>l8(t)?c8(e,t.value):Jf(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((o,[r,a],i)=>(o[z2(r,i)+" =>"]=a,o),{})}:Ld(t)?{[`Set(${t.size})`]:[...t.values()].map(o=>z2(o))}:ln(t)?z2(t):pa(t)&&!Ot(t)&&!s_(t)?String(t):t,z2=(e,t="")=>{var o;return ln(e)?`Symbol(${(o=e.description)!=null?o:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Fi;class f_{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Fi,!t&&Fi&&(this.index=(Fi.scopes||(Fi.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,o;if(this.scopes)for(t=0,o=this.scopes.length;t<o;t++)this.scopes[t].pause();for(t=0,o=this.effects.length;t<o;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,o;if(this.scopes)for(t=0,o=this.scopes.length;t<o;t++)this.scopes[t].resume();for(t=0,o=this.effects.length;t<o;t++)this.effects[t].resume()}}run(t){if(this._active){const o=Fi;try{return Fi=this,t()}finally{Fi=o}}}on(){Fi=this}off(){Fi=this.parent}stop(t){if(this._active){this._active=!1;let o,r;for(o=0,r=this.effects.length;o<r;o++)this.effects[o].stop();for(this.effects.length=0,o=0,r=this.cleanups.length;o<r;o++)this.cleanups[o]();if(this.cleanups.length=0,this.scopes){for(o=0,r=this.scopes.length;o<r;o++)this.scopes[o].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function u8(e){return new f_(e)}function hw(){return Fi}function d8(e,t=!1){Fi&&Fi.cleanups.push(e)}let Ia;const H2=new WeakSet;class vm{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Fi&&Fi.active&&Fi.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,H2.has(this)&&(H2.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||m8(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,k4(this),p8(this);const t=Ia,o=As;Ia=this,As=!0;try{return this.fn()}finally{h8(this),Ia=t,As=o,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)_w(t);this.deps=this.depsTail=void 0,k4(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?H2.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ix(this)&&this.run()}get dirty(){return ix(this)}}let f8=0,J0,Z0;function m8(e,t=!1){if(e.flags|=8,t){e.next=Z0,Z0=e;return}e.next=J0,J0=e}function vw(){f8++}function gw(){if(--f8>0)return;if(Z0){let t=Z0;for(Z0=void 0;t;){const o=t.next;t.next=void 0,t.flags&=-9,t=o}}let e;for(;J0;){let t=J0;for(J0=void 0;t;){const o=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=o}}if(e)throw e}function p8(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function h8(e){let t,o=e.depsTail,r=o;for(;r;){const a=r.prevDep;r.version===-1?(r===o&&(o=a),_w(r),bH(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=a}e.deps=t,e.depsTail=o}function ix(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(v8(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function v8(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===hp))return;e.globalVersion=hp;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!ix(e)){e.flags&=-3;return}const o=Ia,r=As;Ia=e,As=!0;try{p8(e);const a=e.fn(e._value);(t.version===0||Ni(a,e._value))&&(e._value=a,t.version++)}catch(a){throw t.version++,a}finally{Ia=o,As=r,h8(e),e.flags&=-3}}function _w(e,t=!1){const{dep:o,prevSub:r,nextSub:a}=e;if(r&&(r.nextSub=a,e.prevSub=void 0),a&&(a.prevSub=r,e.nextSub=void 0),o.subs===e&&(o.subs=r,!r&&o.computed)){o.computed.flags&=-5;for(let i=o.computed.deps;i;i=i.nextDep)_w(i,!0)}!t&&!--o.sc&&o.map&&o.map.delete(o.key)}function bH(e){const{prevDep:t,nextDep:o}=e;t&&(t.nextDep=o,e.prevDep=void 0),o&&(o.prevDep=t,e.nextDep=void 0)}function g8(e,t){e.effect instanceof vm&&(e=e.effect.fn);const o=new vm(e);t&&Ro(o,t);try{o.run()}catch(a){throw o.stop(),a}const r=o.run.bind(o);return r.effect=o,r}function _8(e){e.effect.stop()}let As=!0;const b8=[];function bu(){b8.push(As),As=!1}function yu(){const e=b8.pop();As=e===void 0?!0:e}function k4(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const o=Ia;Ia=void 0;try{t()}finally{Ia=o}}}let hp=0;class yH{constructor(t,o){this.sub=t,this.dep=o,this.version=o.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class m_{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Ia||!As||Ia===this.computed)return;let o=this.activeLink;if(o===void 0||o.sub!==Ia)o=this.activeLink=new yH(Ia,this),Ia.deps?(o.prevDep=Ia.depsTail,Ia.depsTail.nextDep=o,Ia.depsTail=o):Ia.deps=Ia.depsTail=o,y8(o);else if(o.version===-1&&(o.version=this.version,o.nextDep)){const r=o.nextDep;r.prevDep=o.prevDep,o.prevDep&&(o.prevDep.nextDep=r),o.prevDep=Ia.depsTail,o.nextDep=void 0,Ia.depsTail.nextDep=o,Ia.depsTail=o,Ia.deps===o&&(Ia.deps=r)}return o}trigger(t){this.version++,hp++,this.notify(t)}notify(t){vw();try{for(let o=this.subs;o;o=o.prevSub)o.sub.notify()&&o.sub.dep.notify()}finally{gw()}}}function y8(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)y8(r)}const o=e.dep.subs;o!==e&&(e.prevSub=o,o&&(o.nextSub=e)),e.dep.subs=e}}const ag=new WeakMap,pd=Symbol(""),nx=Symbol(""),vp=Symbol("");function vi(e,t,o){if(As&&Ia){let r=ag.get(e);r||ag.set(e,r=new Map);let a=r.get(o);a||(r.set(o,a=new m_),a.map=r,a.key=o),a.track()}}function Vl(e,t,o,r,a,i){const n=ag.get(e);if(!n){hp++;return}const s=l=>{l&&l.trigger()};if(vw(),t==="clear")n.forEach(s);else{const l=Ot(e),u=l&&pw(o);if(l&&o==="length"){const c=Number(r);n.forEach((d,f)=>{(f==="length"||f===vp||!ln(f)&&f>=c)&&s(d)})}else switch((o!==void 0||n.has(void 0))&&s(n.get(o)),u&&s(n.get(vp)),t){case"add":l?u&&s(n.get("length")):(s(n.get(pd)),Jf(e)&&s(n.get(nx)));break;case"delete":l||(s(n.get(pd)),Jf(e)&&s(n.get(nx)));break;case"set":Jf(e)&&s(n.get(pd));break}}gw()}function xH(e,t){const o=ag.get(e);return o&&o.get(t)}function vf(e){const t=go(e);return t===e?t:(vi(t,"iterate",vp),sn(e)?t:t.map(gi))}function p_(e){return vi(e=go(e),"iterate",vp),e}const CH={__proto__:null,[Symbol.iterator](){return j2(this,Symbol.iterator,gi)},concat(...e){return vf(this).concat(...e.map(t=>Ot(t)?vf(t):t))},entries(){return j2(this,"entries",e=>(e[1]=gi(e[1]),e))},every(e,t){return El(this,"every",e,t,void 0,arguments)},filter(e,t){return El(this,"filter",e,t,o=>o.map(gi),arguments)},find(e,t){return El(this,"find",e,t,gi,arguments)},findIndex(e,t){return El(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return El(this,"findLast",e,t,gi,arguments)},findLastIndex(e,t){return El(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return El(this,"forEach",e,t,void 0,arguments)},includes(...e){return G2(this,"includes",e)},indexOf(...e){return G2(this,"indexOf",e)},join(e){return vf(this).join(e)},lastIndexOf(...e){return G2(this,"lastIndexOf",e)},map(e,t){return El(this,"map",e,t,void 0,arguments)},pop(){return v0(this,"pop")},push(...e){return v0(this,"push",e)},reduce(e,...t){return R4(this,"reduce",e,t)},reduceRight(e,...t){return R4(this,"reduceRight",e,t)},shift(){return v0(this,"shift")},some(e,t){return El(this,"some",e,t,void 0,arguments)},splice(...e){return v0(this,"splice",e)},toReversed(){return vf(this).toReversed()},toSorted(e){return vf(this).toSorted(e)},toSpliced(...e){return vf(this).toSpliced(...e)},unshift(...e){return v0(this,"unshift",e)},values(){return j2(this,"values",gi)}};function j2(e,t,o){const r=p_(e),a=r[t]();return r!==e&&!sn(e)&&(a._next=a.next,a.next=()=>{const i=a._next();return i.value&&(i.value=o(i.value)),i}),a}const wH=Array.prototype;function El(e,t,o,r,a,i){const n=p_(e),s=n!==e&&!sn(e),l=n[t];if(l!==wH[t]){const d=l.apply(e,i);return s?gi(d):d}let u=o;n!==e&&(s?u=function(d,f){return o.call(this,gi(d),f,e)}:o.length>2&&(u=function(d,f){return o.call(this,d,f,e)}));const c=l.call(n,u,r);return s&&a?a(c):c}function R4(e,t,o,r){const a=p_(e);let i=o;return a!==e&&(sn(e)?o.length>3&&(i=function(n,s,l){return o.call(this,n,s,l,e)}):i=function(n,s,l){return o.call(this,n,gi(s),l,e)}),a[t](i,...r)}function G2(e,t,o){const r=go(e);vi(r,"iterate",vp);const a=r[t](...o);return(a===-1||a===!1)&&eh(o[0])?(o[0]=go(o[0]),r[t](...o)):a}function v0(e,t,o=[]){bu(),vw();const r=go(e)[t].apply(e,o);return gw(),yu(),r}const EH=kn("__proto__,__v_isRef,__isVue"),x8=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ln));function SH(e){ln(e)||(e=String(e));const t=go(this);return vi(t,"has",e),t.hasOwnProperty(e)}class C8{constructor(t=!1,o=!1){this._isReadonly=t,this._isShallow=o}get(t,o,r){if(o==="__v_skip")return t.__v_skip;const a=this._isReadonly,i=this._isShallow;if(o==="__v_isReactive")return!a;if(o==="__v_isReadonly")return a;if(o==="__v_isShallow")return i;if(o==="__v_raw")return r===(a?i?T8:A8:i?I8:S8).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const n=Ot(t);if(!a){let l;if(n&&(l=CH[o]))return l;if(o==="hasOwnProperty")return SH}const s=Reflect.get(t,o,br(t)?t:r);return(ln(o)?x8.has(o):EH(o))||(a||vi(t,"get",o),i)?s:br(s)?n&&pw(o)?s:s.value:pa(s)?a?v_(s):rs(s):s}}class w8 extends C8{constructor(t=!1){super(!1,t)}set(t,o,r,a){let i=t[o];if(!this._isShallow){const l=Jl(i);if(!sn(r)&&!Jl(r)&&(i=go(i),r=go(r)),!Ot(t)&&br(i)&&!br(r))return l?!1:(i.value=r,!0)}const n=Ot(t)&&pw(o)?Number(o)<t.length:oa(t,o),s=Reflect.set(t,o,r,br(t)?t:a);return t===go(a)&&(n?Ni(r,i)&&Vl(t,"set",o,r):Vl(t,"add",o,r)),s}deleteProperty(t,o){const r=oa(t,o);t[o];const a=Reflect.deleteProperty(t,o);return a&&r&&Vl(t,"delete",o,void 0),a}has(t,o){const r=Reflect.has(t,o);return(!ln(o)||!x8.has(o))&&vi(t,"has",o),r}ownKeys(t){return vi(t,"iterate",Ot(t)?"length":pd),Reflect.ownKeys(t)}}class E8 extends C8{constructor(t=!1){super(!0,t)}set(t,o){return!0}deleteProperty(t,o){return!0}}const IH=new w8,AH=new E8,TH=new w8(!0),DH=new E8(!0),sx=e=>e,F1=e=>Reflect.getPrototypeOf(e);function OH(e,t,o){return function(...r){const a=this.__v_raw,i=go(a),n=Jf(i),s=e==="entries"||e===Symbol.iterator&&n,l=e==="keys"&&n,u=a[e](...r),c=o?sx:t?lx:gi;return!t&&vi(i,"iterate",l?nx:pd),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:s?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function M1(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function PH(e,t){const o={get(a){const i=this.__v_raw,n=go(i),s=go(a);e||(Ni(a,s)&&vi(n,"get",a),vi(n,"get",s));const{has:l}=F1(n),u=t?sx:e?lx:gi;if(l.call(n,a))return u(i.get(a));if(l.call(n,s))return u(i.get(s));i!==n&&i.get(a)},get size(){const a=this.__v_raw;return!e&&vi(go(a),"iterate",pd),Reflect.get(a,"size",a)},has(a){const i=this.__v_raw,n=go(i),s=go(a);return e||(Ni(a,s)&&vi(n,"has",a),vi(n,"has",s)),a===s?i.has(a):i.has(a)||i.has(s)},forEach(a,i){const n=this,s=n.__v_raw,l=go(s),u=t?sx:e?lx:gi;return!e&&vi(l,"iterate",pd),s.forEach((c,d)=>a.call(i,u(c),u(d),n))}};return Ro(o,e?{add:M1("add"),set:M1("set"),delete:M1("delete"),clear:M1("clear")}:{add(a){!t&&!sn(a)&&!Jl(a)&&(a=go(a));const i=go(this);return F1(i).has.call(i,a)||(i.add(a),Vl(i,"add",a,a)),this},set(a,i){!t&&!sn(i)&&!Jl(i)&&(i=go(i));const n=go(this),{has:s,get:l}=F1(n);let u=s.call(n,a);u||(a=go(a),u=s.call(n,a));const c=l.call(n,a);return n.set(a,i),u?Ni(i,c)&&Vl(n,"set",a,i):Vl(n,"add",a,i),this},delete(a){const i=go(this),{has:n,get:s}=F1(i);let l=n.call(i,a);l||(a=go(a),l=n.call(i,a)),s&&s.call(i,a);const u=i.delete(a);return l&&Vl(i,"delete",a,void 0),u},clear(){const a=go(this),i=a.size!==0,n=a.clear();return i&&Vl(a,"clear",void 0,void 0),n}}),["keys","values","entries",Symbol.iterator].forEach(a=>{o[a]=OH(a,e,t)}),o}function h_(e,t){const o=PH(e,t);return(r,a,i)=>a==="__v_isReactive"?!e:a==="__v_isReadonly"?e:a==="__v_raw"?r:Reflect.get(oa(o,a)&&a in r?o:r,a,i)}const FH={get:h_(!1,!1)},MH={get:h_(!1,!0)},NH={get:h_(!0,!1)},kH={get:h_(!0,!0)},S8=new WeakMap,I8=new WeakMap,A8=new WeakMap,T8=new WeakMap;function RH(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function VH(e){return e.__v_skip||!Object.isExtensible(e)?0:RH(Jz(e))}function rs(e){return Jl(e)?e:g_(e,!1,IH,FH,S8)}function Zp(e){return g_(e,!1,TH,MH,I8)}function v_(e){return g_(e,!0,AH,NH,A8)}function D8(e){return g_(e,!0,DH,kH,T8)}function g_(e,t,o,r,a){if(!pa(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=a.get(e);if(i)return i;const n=VH(e);if(n===0)return e;const s=new Proxy(e,n===2?r:o);return a.set(e,s),s}function jl(e){return Jl(e)?jl(e.__v_raw):!!(e&&e.__v_isReactive)}function Jl(e){return!!(e&&e.__v_isReadonly)}function sn(e){return!!(e&&e.__v_isShallow)}function eh(e){return e?!!e.__v_raw:!1}function go(e){const t=e&&e.__v_raw;return t?go(t):e}function $d(e){return!oa(e,"__v_skip")&&Object.isExtensible(e)&&i8(e,"__v_skip",!0),e}const gi=e=>pa(e)?rs(e):e,lx=e=>pa(e)?v_(e):e;function br(e){return e?e.__v_isRef===!0:!1}function Ue(e){return O8(e,!1)}function __(e){return O8(e,!0)}function O8(e,t){return br(e)?e:new BH(e,t)}class BH{constructor(t,o){this.dep=new m_,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=o?t:go(t),this._value=o?t:gi(t),this.__v_isShallow=o}get value(){return this.dep.track(),this._value}set value(t){const o=this._rawValue,r=this.__v_isShallow||sn(t)||Jl(t);t=r?t:go(t),Ni(t,o)&&(this._rawValue=t,this._value=r?t:gi(t),this.dep.trigger())}}function P8(e){e.dep&&e.dep.trigger()}function Ts(e){return br(e)?e.value:e}function F8(e){return ao(e)?e():Ts(e)}const qH={get:(e,t,o)=>t==="__v_raw"?e:Ts(Reflect.get(e,t,o)),set:(e,t,o,r)=>{const a=e[t];return br(a)&&!br(o)?(a.value=o,!0):Reflect.set(e,t,o,r)}};function b_(e){return jl(e)?e:new Proxy(e,qH)}class LH{constructor(t){this.__v_isRef=!0,this._value=void 0;const o=this.dep=new m_,{get:r,set:a}=t(o.track.bind(o),o.trigger.bind(o));this._get=r,this._set=a}get value(){return this._value=this._get()}set value(t){this._set(t)}}function bw(e){return new LH(e)}function M8(e){const t=Ot(e)?new Array(e.length):{};for(const o in e)t[o]=k8(e,o);return t}class $H{constructor(t,o,r){this._object=t,this._key=o,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return xH(go(this._object),this._key)}}class UH{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function N8(e,t,o){return br(e)?e:ao(e)?new UH(e):pa(e)&&arguments.length>1?k8(e,t,o):Ue(e)}function k8(e,t,o){const r=e[t];return br(r)?r:new $H(e,t,o)}class zH{constructor(t,o,r){this.fn=t,this.setter=o,this._value=void 0,this.dep=new m_(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=hp-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!o,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ia!==this)return m8(this,!0),!0}get value(){const t=this.dep.track();return v8(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function HH(e,t,o=!1){let r,a;return ao(e)?r=e:(r=e.get,a=e.set),new zH(r,a,o)}const R8={GET:"get",HAS:"has",ITERATE:"iterate"},V8={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},N1={},rg=new WeakMap;let kc;function B8(){return kc}function yw(e,t=!1,o=kc){if(o){let r=rg.get(o);r||rg.set(o,r=[]),r.push(e)}}function jH(e,t,o=Mo){const{immediate:r,deep:a,once:i,scheduler:n,augmentJob:s,call:l}=o,u=w=>a?w:sn(w)||a===!1||a===0?Bl(w,1):Bl(w);let c,d,f,m,p=!1,v=!1;if(br(e)?(d=()=>e.value,p=sn(e)):jl(e)?(d=()=>u(e),p=!0):Ot(e)?(v=!0,p=e.some(w=>jl(w)||sn(w)),d=()=>e.map(w=>{if(br(w))return w.value;if(jl(w))return u(w);if(ao(w))return l?l(w,2):w()})):ao(e)?t?d=l?()=>l(e,2):e:d=()=>{if(f){bu();try{f()}finally{yu()}}const w=kc;kc=c;try{return l?l(e,3,[m]):e(m)}finally{kc=w}}:d=Hr,t&&a){const w=d,S=a===!0?1/0:a;d=()=>Bl(w(),S)}const g=hw(),x=()=>{c.stop(),g&&g.active&&fw(g.effects,c)};if(i&&t){const w=t;t=(...S)=>{w(...S),x()}}let b=v?new Array(e.length).fill(N1):N1;const _=w=>{if(!(!(c.flags&1)||!c.dirty&&!w))if(t){const S=c.run();if(a||p||(v?S.some((D,M)=>Ni(D,b[M])):Ni(S,b))){f&&f();const D=kc;kc=c;try{const M=[S,b===N1?void 0:v&&b[0]===N1?[]:b,m];l?l(t,3,M):t(...M),b=S}finally{kc=D}}}else c.run()};return s&&s(_),c=new vm(d),c.scheduler=n?()=>n(_,!1):_,m=w=>yw(w,!1,c),f=c.onStop=()=>{const w=rg.get(c);if(w){if(l)l(w,4);else for(const S of w)S();rg.delete(c)}},t?r?_(!0):b=c.run():n?n(_.bind(null,!0),!0):c.run(),x.pause=c.pause.bind(c),x.resume=c.resume.bind(c),x.stop=x,x}function Bl(e,t=1/0,o){if(t<=0||!pa(e)||e.__v_skip||(o=o||new Set,o.has(e)))return e;if(o.add(e),t--,br(e))Bl(e.value,t,o);else if(Ot(e))for(let r=0;r<e.length;r++)Bl(e[r],t,o);else if(Ld(e)||Jf(e))e.forEach(r=>{Bl(r,t,o)});else if(s_(e)){for(const r in e)Bl(e[r],t,o);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Bl(e[r],t,o)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const q8=[];function GH(e){q8.push(e)}function WH(){q8.pop()}function L8(e,t){}const $8={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},QH={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",[0]:"setup function",[1]:"render function",[2]:"watcher getter",[3]:"watcher callback",[4]:"watcher cleanup function",[5]:"native event handler",[6]:"component event handler",[7]:"vnode hook",[8]:"directive hook",[9]:"transition hook",[10]:"app errorHandler",[11]:"app warnHandler",[12]:"ref function",[13]:"async component loader",[14]:"scheduler flush",[15]:"component update",[16]:"app unmount cleanup function"};function Ud(e,t,o,r){try{return r?e(...r):e()}catch(a){xu(a,t,o)}}function Mn(e,t,o,r){if(ao(e)){const a=Ud(e,t,o,r);return a&&mw(a)&&a.catch(i=>{xu(i,t,o)}),a}if(Ot(e)){const a=[];for(let i=0;i<e.length;i++)a.push(Mn(e[i],t,o,r));return a}}function xu(e,t,o,r=!0){const a=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:n}=t&&t.appContext.config||Mo;if(t){let s=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${o}`;for(;s;){const c=s.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](e,l,u)===!1)return}s=s.parent}if(i){bu(),Ud(i,null,10,[e,l,u]),yu();return}}XH(e,o,a,r,n)}function XH(e,t,o,r=!0,a=!1){if(a)throw e;console.error(e)}const ki=[];let Gs=-1;const em=[];let Rc=null,Bf=0;const U8=Promise.resolve();let ig=null;function Ao(e){const t=ig||U8;return e?t.then(this?e.bind(this):e):t}function KH(e){let t=Gs+1,o=ki.length;for(;t<o;){const r=t+o>>>1,a=ki[r],i=gp(a);i<e||i===e&&a.flags&2?t=r+1:o=r}return t}function xw(e){if(!(e.flags&1)){const t=gp(e),o=ki[ki.length-1];!o||!(e.flags&2)&&t>=gp(o)?ki.push(e):ki.splice(KH(t),0,e),e.flags|=1,z8()}}function z8(){ig||(ig=U8.then(H8))}function gm(e){Ot(e)?em.push(...e):Rc&&e.id===-1?Rc.splice(Bf+1,0,e):e.flags&1||(em.push(e),e.flags|=1),z8()}function V4(e,t,o=Gs+1){for(;o<ki.length;o++){const r=ki[o];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;ki.splice(o,1),o--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function ng(e){if(em.length){const t=[...new Set(em)].sort((o,r)=>gp(o)-gp(r));if(em.length=0,Rc){Rc.push(...t);return}for(Rc=t,Bf=0;Bf<Rc.length;Bf++){const o=Rc[Bf];o.flags&4&&(o.flags&=-2),o.flags&8||o(),o.flags&=-2}Rc=null,Bf=0}}const gp=e=>e.id==null?e.flags&2?-1:1/0:e.id;function H8(e){const t=Hr;try{for(Gs=0;Gs<ki.length;Gs++){const o=ki[Gs];o&&!(o.flags&8)&&(o.flags&4&&(o.flags&=-2),Ud(o,o.i,o.i?15:14),o.flags&4||(o.flags&=-2))}}finally{for(;Gs<ki.length;Gs++){const o=ki[Gs];o&&(o.flags&=-2)}Gs=-1,ki.length=0,ng(),ig=null,(ki.length||em.length)&&H8()}}let qf,k1=[];function j8(e,t){var o,r;qf=e,qf?(qf.enabled=!0,k1.forEach(({event:a,args:i})=>qf.emit(a,...i)),k1=[]):typeof window!="undefined"&&window.HTMLElement&&!((r=(o=window.navigator)==null?void 0:o.userAgent)!=null&&r.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(i=>{j8(i,t)}),setTimeout(()=>{qf||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,k1=[])},3e3)):k1=[]}let Fr=null,y_=null;function _p(e){const t=Fr;return Fr=e,y_=e&&e.type.__scopeId||null,t}function G8(e){y_=e}function W8(){y_=null}const Q8=e=>C;function C(e,t=Fr,o){if(!t||e._n)return e;const r=(...a)=>{r._d&&ug(-1);const i=_p(t);let n;try{n=e(...a)}finally{_p(i),r._d&&ug(1)}return n};return r._n=!0,r._c=!0,r._d=!0,r}function Ee(e,t){if(Fr===null)return e;const o=lh(Fr),r=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[i,n,s,l=Mo]=t[a];i&&(ao(i)&&(i={mounted:i,updated:i}),i.deep&&Bl(n),r.push({dir:i,instance:o,value:n,oldValue:void 0,arg:s,modifiers:l}))}return e}function Qs(e,t,o,r){const a=e.dirs,i=t&&t.dirs;for(let n=0;n<a.length;n++){const s=a[n];i&&(s.oldValue=i[n].value);let l=s.dir[r];l&&(bu(),Mn(l,o,8,[e.el,s,e,t]),yu())}}const X8=Symbol("_vte"),K8=e=>e.__isTeleport,ep=e=>e&&(e.disabled||e.disabled===""),B4=e=>e&&(e.defer||e.defer===""),q4=e=>typeof SVGElement!="undefined"&&e instanceof SVGElement,L4=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,cx=(e,t)=>{const o=e&&e.to;return _o(o)?t?t(o):null:o},Y8={name:"Teleport",__isTeleport:!0,process(e,t,o,r,a,i,n,s,l,u){const{mc:c,pc:d,pbc:f,o:{insert:m,querySelector:p,createText:v,createComment:g}}=u,x=ep(t.props);let{shapeFlag:b,children:_,dynamicChildren:w}=t;if(e==null){const S=t.el=v(""),D=t.anchor=v("");m(S,o,r),m(D,o,r);const M=(T,I)=>{b&16&&(a&&a.isCE&&(a.ce._teleportTarget=T),c(_,T,I,a,i,n,s,l))},O=()=>{const T=t.target=cx(t.props,p),I=J8(T,t,v,m);T&&(n!=="svg"&&q4(T)?n="svg":n!=="mathml"&&L4(T)&&(n="mathml"),x||(M(T,I),Sv(t,!1)))};x&&(M(o,D),Sv(t,!0)),B4(t.props)?Er(()=>{O(),t.el.__isMounted=!0},i):O()}else{if(B4(t.props)&&!e.el.__isMounted){Er(()=>{Y8.process(e,t,o,r,a,i,n,s,l,u),delete e.el.__isMounted},i);return}t.el=e.el,t.targetStart=e.targetStart;const S=t.anchor=e.anchor,D=t.target=e.target,M=t.targetAnchor=e.targetAnchor,O=ep(e.props),T=O?o:D,I=O?S:M;if(n==="svg"||q4(D)?n="svg":(n==="mathml"||L4(D))&&(n="mathml"),w?(f(e.dynamicChildren,w,T,a,i,n,s),Vw(e,t,!0)):l||d(e,t,T,I,a,i,n,s,!1),x)O?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):R1(t,o,S,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const N=t.target=cx(t.props,p);N&&R1(t,N,null,u,0)}else O&&R1(t,D,M,u,1);Sv(t,x)}},remove(e,t,o,{um:r,o:{remove:a}},i){const{shapeFlag:n,children:s,anchor:l,targetStart:u,targetAnchor:c,target:d,props:f}=e;if(d&&(a(u),a(c)),i&&a(l),n&16){const m=i||!ep(f);for(let p=0;p<s.length;p++){const v=s[p];r(v,t,o,m,!!v.dynamicChildren)}}},move:R1,hydrate:YH};function R1(e,t,o,{o:{insert:r},m:a},i=2){i===0&&r(e.targetAnchor,t,o);const{el:n,anchor:s,shapeFlag:l,children:u,props:c}=e,d=i===2;if(d&&r(n,t,o),(!d||ep(c))&&l&16)for(let f=0;f<u.length;f++)a(u[f],t,o,2);d&&r(s,t,o)}function YH(e,t,o,r,a,i,{o:{nextSibling:n,parentNode:s,querySelector:l,insert:u,createText:c}},d){const f=t.target=cx(t.props,l);if(f){const m=ep(t.props),p=f._lpa||f.firstChild;if(t.shapeFlag&16)if(m)t.anchor=d(n(e),t,s(e),o,r,a,i),t.targetStart=p,t.targetAnchor=p&&n(p);else{t.anchor=n(e);let v=p;for(;v;){if(v&&v.nodeType===8){if(v.data==="teleport start anchor")t.targetStart=v;else if(v.data==="teleport anchor"){t.targetAnchor=v,f._lpa=t.targetAnchor&&n(t.targetAnchor);break}}v=n(v)}t.targetAnchor||J8(f,t,c,u),d(p&&n(p),t,f,o,r,a,i)}Sv(t,m)}return t.anchor&&n(t.anchor)}const Cw=Y8;function Sv(e,t){const o=e.ctx;if(o&&o.ut){let r,a;for(t?(r=e.el,a=e.anchor):(r=e.targetStart,a=e.targetAnchor);r&&r!==a;)r.nodeType===1&&r.setAttribute("data-v-owner",o.uid),r=r.nextSibling;o.ut()}}function J8(e,t,o,r){const a=t.targetStart=o(""),i=t.targetAnchor=o("");return a[X8]=i,e&&(r(a,e),r(i,e)),i}const Vc=Symbol("_leaveCb"),V1=Symbol("_enterCb");function x_(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Va(()=>{e.isMounted=!0}),Vo(()=>{e.isUnmounting=!0}),e}const Qn=[Function,Array],C_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Qn,onEnter:Qn,onAfterEnter:Qn,onEnterCancelled:Qn,onBeforeLeave:Qn,onLeave:Qn,onAfterLeave:Qn,onLeaveCancelled:Qn,onBeforeAppear:Qn,onAppear:Qn,onAfterAppear:Qn,onAppearCancelled:Qn},Z8=e=>{const t=e.subTree;return t.component?Z8(t.component):t},JH={name:"BaseTransition",props:C_,setup(e,{slots:t}){const o=xt(),r=x_();return()=>{const a=t.default&&th(t.default(),!0);if(!a||!a.length)return;const i=e9(a),n=go(e),{mode:s}=n;if(r.isLeaving)return W2(i);const l=$4(i);if(!l)return W2(i);let u=Td(l,n,r,o,d=>u=d);l.type!==ur&&nl(l,u);let c=o.subTree&&$4(o.subTree);if(c&&c.type!==ur&&!Es(l,c)&&Z8(o).type!==ur){let d=Td(c,n,r,o);if(nl(c,d),s==="out-in"&&l.type!==ur)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,o.job.flags&8||o.update(),delete d.afterLeave,c=void 0},W2(i);s==="in-out"&&l.type!==ur?d.delayLeave=(f,m,p)=>{const v=t9(r,c);v[String(c.key)]=c,f[Vc]=()=>{m(),f[Vc]=void 0,delete u.delayedLeave,c=void 0},u.delayedLeave=()=>{p(),delete u.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return i}}};function e9(e){let t=e[0];if(e.length>1){for(const o of e)if(o.type!==ur){t=o;break}}return t}const ww=JH;function t9(e,t){const{leavingVNodes:o}=e;let r=o.get(t.type);return r||(r=Object.create(null),o.set(t.type,r)),r}function Td(e,t,o,r,a){const{appear:i,mode:n,persisted:s=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:f,onLeave:m,onAfterLeave:p,onLeaveCancelled:v,onBeforeAppear:g,onAppear:x,onAfterAppear:b,onAppearCancelled:_}=t,w=String(e.key),S=t9(o,e),D=(T,I)=>{T&&Mn(T,r,9,I)},M=(T,I)=>{const N=I[1];D(T,I),Ot(T)?T.every(P=>P.length<=1)&&N():T.length<=1&&N()},O={mode:n,persisted:s,beforeEnter(T){let I=l;if(!o.isMounted)if(i)I=g||l;else return;T[Vc]&&T[Vc](!0);const N=S[w];N&&Es(e,N)&&N.el[Vc]&&N.el[Vc](),D(I,[T])},enter(T){let I=u,N=c,P=d;if(!o.isMounted)if(i)I=x||u,N=b||c,P=_||d;else return;let F=!1;const L=T[V1]=z=>{F||(F=!0,z?D(P,[T]):D(N,[T]),O.delayedLeave&&O.delayedLeave(),T[V1]=void 0)};I?M(I,[T,L]):L()},leave(T,I){const N=String(e.key);if(T[V1]&&T[V1](!0),o.isUnmounting)return I();D(f,[T]);let P=!1;const F=T[Vc]=L=>{P||(P=!0,I(),L?D(v,[T]):D(p,[T]),T[Vc]=void 0,S[N]===e&&delete S[N])};S[N]=e,m?M(m,[T,F]):F()},clone(T){const I=Td(T,t,o,r,a);return a&&a(I),I}};return O}function W2(e){if(oh(e))return e=Ps(e),e.children=null,e}function $4(e){if(!oh(e))return K8(e.type)&&e.children?e9(e.children):e;const{shapeFlag:t,children:o}=e;if(o){if(t&16)return o[0];if(t&32&&ao(o.default))return o.default()}}function nl(e,t){e.shapeFlag&6&&e.component?(e.transition=t,nl(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function th(e,t=!1,o){let r=[],a=0;for(let i=0;i<e.length;i++){let n=e[i];const s=o==null?n.key:String(o)+String(n.key!=null?n.key:i);n.type===Qe?(n.patchFlag&128&&a++,r=r.concat(th(n.children,t,s))):(t||n.type!==ur)&&r.push(s!=null?Ps(n,{key:s}):n)}if(a>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function zd(e,t){return ao(e)?(()=>Ro({name:e.name},t,{setup:e}))():e}function o9(){const e=xt();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function Ew(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function a9(e){const t=xt(),o=__(null);if(t){const a=t.refs===Mo?t.refs={}:t.refs;Object.defineProperty(a,e,{enumerable:!0,get:()=>o.value,set:i=>o.value=i})}return o}function bp(e,t,o,r,a=!1){if(Ot(e)){e.forEach((p,v)=>bp(p,t&&(Ot(t)?t[v]:t),o,r,a));return}if(eu(r)&&!a){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&bp(e,t,o,r.component.subTree);return}const i=r.shapeFlag&4?lh(r.component):r.el,n=a?null:i,{i:s,r:l}=e,u=t&&t.r,c=s.refs===Mo?s.refs={}:s.refs,d=s.setupState,f=go(d),m=d===Mo?()=>!1:p=>oa(f,p);if(u!=null&&u!==l&&(_o(u)?(c[u]=null,m(u)&&(d[u]=null)):br(u)&&(u.value=null)),ao(l))Ud(l,s,12,[n,c]);else{const p=_o(l),v=br(l);if(p||v){const g=()=>{if(e.f){const x=p?m(l)?d[l]:c[l]:l.value;a?Ot(x)&&fw(x,i):Ot(x)?x.includes(i)||x.push(i):p?(c[l]=[i],m(l)&&(d[l]=c[l])):(l.value=[i],e.k&&(c[e.k]=l.value))}else p?(c[l]=n,m(l)&&(d[l]=n)):v&&(l.value=n,e.k&&(c[e.k]=n))};n?(g.id=-1,Er(g,o)):g()}}}let U4=!1;const gf=()=>{U4||(console.error("Hydration completed but contains mismatches."),U4=!0)},ZH=e=>e.namespaceURI.includes("svg")&&e.tagName!=="foreignObject",ej=e=>e.namespaceURI.includes("MathML"),B1=e=>{if(e.nodeType===1){if(ZH(e))return"svg";if(ej(e))return"mathml"}},jf=e=>e.nodeType===8;function tj(e){const{mt:t,p:o,o:{patchProp:r,createText:a,nextSibling:i,parentNode:n,remove:s,insert:l,createComment:u}}=e,c=(_,w)=>{if(!w.hasChildNodes()){o(null,_,w),ng(),w._vnode=_;return}d(w.firstChild,_,null,null,null),ng(),w._vnode=_},d=(_,w,S,D,M,O=!1)=>{O=O||!!w.dynamicChildren;const T=jf(_)&&_.data==="[",I=()=>v(_,w,S,D,M,T),{type:N,ref:P,shapeFlag:F,patchFlag:L}=w;let z=_.nodeType;w.el=_,L===-2&&(O=!1,w.dynamicChildren=null);let H=null;switch(N){case Gl:z!==3?w.children===""?(l(w.el=a(""),n(_),_),H=_):H=I():(_.data!==w.children&&(gf(),_.data=w.children),H=i(_));break;case ur:b(_)?(H=i(_),x(w.el=_.content.firstChild,_,S)):z!==8||T?H=I():H=i(_);break;case tu:if(T&&(_=i(_),z=_.nodeType),z===1||z===3){H=_;const X=!w.children.length;for(let Y=0;Y<w.staticCount;Y++)X&&(w.children+=H.nodeType===1?H.outerHTML:H.data),Y===w.staticCount-1&&(w.anchor=H),H=i(H);return T?i(H):H}else I();break;case Qe:T?H=p(_,w,S,D,M,O):H=I();break;default:if(F&1)(z!==1||w.type.toLowerCase()!==_.tagName.toLowerCase())&&!b(_)?H=I():H=f(_,w,S,D,M,O);else if(F&6){w.slotScopeIds=M;const X=n(_);if(T?H=g(_):jf(_)&&_.data==="teleport start"?H=g(_,_.data,"teleport end"):H=i(_),t(w,X,null,S,D,B1(X),O),eu(w)&&!w.type.__asyncResolved){let Y;T?(Y=h(Qe),Y.anchor=H?H.previousSibling:X.lastChild):Y=_.nodeType===3?K(""):h("div"),Y.el=_,w.component.subTree=Y}}else F&64?z!==8?H=I():H=w.type.hydrate(_,w,S,D,M,O,e,m):F&128&&(H=w.type.hydrate(_,w,S,D,B1(n(_)),M,O,e,d))}return P!=null&&bp(P,null,D,w),H},f=(_,w,S,D,M,O)=>{O=O||!!w.dynamicChildren;const{type:T,props:I,patchFlag:N,shapeFlag:P,dirs:F,transition:L}=w,z=T==="input"||T==="option";if(z||N!==-1){F&&Qs(w,null,S,"created");let H=!1;if(b(_)){H=L9(null,L)&&S&&S.vnode.props&&S.vnode.props.appear;const Y=_.content.firstChild;H&&L.beforeEnter(Y),x(Y,_,S),w.el=_=Y}if(P&16&&!(I&&(I.innerHTML||I.textContent))){let Y=m(_.firstChild,w,_,S,D,M,O);for(;Y;){q1(_,1)||gf();const de=Y;Y=Y.nextSibling,s(de)}}else if(P&8){let Y=w.children;Y[0]===`
`&&(_.tagName==="PRE"||_.tagName==="TEXTAREA")&&(Y=Y.slice(1)),_.textContent!==Y&&(q1(_,0)||gf(),_.textContent=w.children)}if(I){if(z||!O||N&48){const Y=_.tagName.includes("-");for(const de in I)(z&&(de.endsWith("value")||de==="indeterminate")||qd(de)&&!Zc(de)||de[0]==="."||Y)&&r(_,de,null,I[de],void 0,S)}else if(I.onClick)r(_,"onClick",null,I.onClick,void 0,S);else if(N&4&&jl(I.style))for(const Y in I.style)I.style[Y]}let X;(X=I&&I.onVnodeBeforeMount)&&Ji(X,S,w),F&&Qs(w,null,S,"beforeMount"),((X=I&&I.onVnodeMounted)||F||H)&&K9(()=>{X&&Ji(X,S,w),H&&L.enter(_),F&&Qs(w,null,S,"mounted")},D)}return _.nextSibling},m=(_,w,S,D,M,O,T)=>{T=T||!!w.dynamicChildren;const I=w.children,N=I.length;for(let P=0;P<N;P++){const F=T?I[P]:I[P]=Zi(I[P]),L=F.type===Gl;_?(L&&!T&&P+1<N&&Zi(I[P+1]).type===Gl&&(l(a(_.data.slice(F.children.length)),S,i(_)),_.data=F.children),_=d(_,F,D,M,O,T)):L&&!F.children?l(F.el=a(""),S):(q1(S,1)||gf(),o(null,F,S,null,D,M,B1(S),O))}return _},p=(_,w,S,D,M,O)=>{const{slotScopeIds:T}=w;T&&(M=M?M.concat(T):T);const I=n(_),N=m(i(_),w,I,S,D,M,O);return N&&jf(N)&&N.data==="]"?i(w.anchor=N):(gf(),l(w.anchor=u("]"),I,N),N)},v=(_,w,S,D,M,O)=>{if(q1(_.parentElement,1)||gf(),w.el=null,O){const N=g(_);for(;;){const P=i(_);if(P&&P!==N)s(P);else break}}const T=i(_),I=n(_);return s(_),o(null,w,I,T,S,D,B1(I),M),S&&(S.vnode.el=w.el,S_(S,w.el)),T},g=(_,w="[",S="]")=>{let D=0;for(;_;)if(_=i(_),_&&jf(_)&&(_.data===w&&D++,_.data===S)){if(D===0)return i(_);D--}return _},x=(_,w,S)=>{const D=w.parentNode;D&&D.replaceChild(_,w);let M=S;for(;M;)M.vnode.el===w&&(M.vnode.el=M.subTree.el=_),M=M.parent},b=_=>_.nodeType===1&&_.tagName==="TEMPLATE";return[c,d]}const z4="data-allow-mismatch",oj={[0]:"text",[1]:"children",[2]:"class",[3]:"style",[4]:"attribute"};function q1(e,t){if(t===0||t===1)for(;e&&!e.hasAttribute(z4);)e=e.parentElement;const o=e&&e.getAttribute(z4);if(o==null)return!1;if(o==="")return!0;{const r=o.split(",");return t===0&&r.includes("children")?!0:o.split(",").includes(oj[t])}}const aj=c_().requestIdleCallback||(e=>setTimeout(e,1)),rj=c_().cancelIdleCallback||(e=>clearTimeout(e)),r9=(e=1e4)=>t=>{const o=aj(t,{timeout:e});return()=>rj(o)};function ij(e){const{top:t,left:o,bottom:r,right:a}=e.getBoundingClientRect(),{innerHeight:i,innerWidth:n}=window;return(t>0&&t<i||r>0&&r<i)&&(o>0&&o<n||a>0&&a<n)}const i9=e=>(t,o)=>{const r=new IntersectionObserver(a=>{for(const i of a)if(!!i.isIntersecting){r.disconnect(),t();break}},e);return o(a=>{if(a instanceof Element){if(ij(a))return t(),r.disconnect(),!1;r.observe(a)}}),()=>r.disconnect()},n9=e=>t=>{if(e){const o=matchMedia(e);if(o.matches)t();else return o.addEventListener("change",t,{once:!0}),()=>o.removeEventListener("change",t)}},s9=(e=[])=>(t,o)=>{_o(e)&&(e=[e]);let r=!1;const a=n=>{r||(r=!0,i(),t(),n.target.dispatchEvent(new n.constructor(n.type,n)))},i=()=>{o(n=>{for(const s of e)n.removeEventListener(s,a)})};return o(n=>{for(const s of e)n.addEventListener(s,a,{once:!0})}),i};function nj(e,t){if(jf(e)&&e.data==="["){let o=1,r=e.nextSibling;for(;r;){if(r.nodeType===1){if(t(r)===!1)break}else if(jf(r))if(r.data==="]"){if(--o===0)break}else r.data==="["&&o++;r=r.nextSibling}}else t(e)}const eu=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function l9(e){ao(e)&&(e={loader:e});const{loader:t,loadingComponent:o,errorComponent:r,delay:a=200,hydrate:i,timeout:n,suspensible:s=!0,onError:l}=e;let u=null,c,d=0;const f=()=>(d++,u=null,m()),m=()=>{let p;return u||(p=u=t().catch(v=>{if(v=v instanceof Error?v:new Error(String(v)),l)return new Promise((g,x)=>{l(v,()=>g(f()),()=>x(v),d+1)});throw v}).then(v=>p!==u&&u?u:(v&&(v.__esModule||v[Symbol.toStringTag]==="Module")&&(v=v.default),c=v,v)))};return zd({name:"AsyncComponentWrapper",__asyncLoader:m,__asyncHydrate(p,v,g){const x=i?()=>{const b=i(g,_=>nj(p,_));b&&(v.bum||(v.bum=[])).push(b)}:g;c?x():m().then(()=>!v.isUnmounted&&x())},get __asyncResolved(){return c},setup(){const p=Dr;if(Ew(p),c)return()=>Q2(c,p);const v=_=>{u=null,xu(_,p,13,!r)};if(s&&p.suspense||_m)return m().then(_=>()=>Q2(_,p)).catch(_=>(v(_),()=>r?h(r,{error:_}):null));const g=Ue(!1),x=Ue(),b=Ue(!!a);return a&&setTimeout(()=>{b.value=!1},a),n!=null&&setTimeout(()=>{if(!g.value&&!x.value){const _=new Error(`Async component timed out after ${n}ms.`);v(_),x.value=_}},n),m().then(()=>{g.value=!0,p.parent&&oh(p.parent.vnode)&&p.parent.update()}).catch(_=>{v(_),x.value=_}),()=>{if(g.value&&c)return Q2(c,p);if(x.value&&r)return h(r,{error:x.value});if(o&&!b.value)return h(o)}}})}function Q2(e,t){const{ref:o,props:r,children:a,ce:i}=t.vnode,n=h(e,r,a);return n.ref=o,n.ce=i,delete t.vnode.ce,n}const oh=e=>e.type.__isKeepAlive,sj={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const o=xt(),r=o.ctx;if(!r.renderer)return()=>{const b=t.default&&t.default();return b&&b.length===1?b[0]:b};const a=new Map,i=new Set;let n=null;const s=o.suspense,{renderer:{p:l,m:u,um:c,o:{createElement:d}}}=r,f=d("div");r.activate=(b,_,w,S,D)=>{const M=b.component;u(b,_,w,0,s),l(M.vnode,b,_,w,M,s,S,b.slotScopeIds,D),Er(()=>{M.isDeactivated=!1,M.a&&Zf(M.a);const O=b.props&&b.props.onVnodeMounted;O&&Ji(O,M.parent,b)},s)},r.deactivate=b=>{const _=b.component;lg(_.m),lg(_.a),u(b,f,null,1,s),Er(()=>{_.da&&Zf(_.da);const w=b.props&&b.props.onVnodeUnmounted;w&&Ji(w,_.parent,b),_.isDeactivated=!0},s)};function m(b){X2(b),c(b,o,s,!0)}function p(b){a.forEach((_,w)=>{const S=yx(_.type);S&&!b(S)&&v(w)})}function v(b){const _=a.get(b);_&&(!n||!Es(_,n))?m(_):n&&X2(n),a.delete(b),i.delete(b)}ct(()=>[e.include,e.exclude],([b,_])=>{b&&p(w=>B0(b,w)),_&&p(w=>!B0(_,w))},{flush:"post",deep:!0});let g=null;const x=()=>{g!=null&&(cg(o.subTree.type)?Er(()=>{a.set(g,L1(o.subTree))},o.subTree.suspense):a.set(g,L1(o.subTree)))};return Va(x),km(x),Vo(()=>{a.forEach(b=>{const{subTree:_,suspense:w}=o,S=L1(_);if(b.type===S.type&&b.key===S.key){X2(S);const D=S.component.da;D&&Er(D,w);return}m(b)})}),()=>{if(g=null,!t.default)return n=null;const b=t.default(),_=b[0];if(b.length>1)return n=null,b;if(!sl(_)||!(_.shapeFlag&4)&&!(_.shapeFlag&128))return n=null,_;let w=L1(_);if(w.type===ur)return n=null,w;const S=w.type,D=yx(eu(w)?w.type.__asyncResolved||{}:S),{include:M,exclude:O,max:T}=e;if(M&&(!D||!B0(M,D))||O&&D&&B0(O,D))return w.shapeFlag&=-257,n=w,_;const I=w.key==null?S:w.key,N=a.get(I);return w.el&&(w=Ps(w),_.shapeFlag&128&&(_.ssContent=w)),g=I,N?(w.el=N.el,w.component=N.component,w.transition&&nl(w,w.transition),w.shapeFlag|=512,i.delete(I),i.add(I)):(i.add(I),T&&i.size>parseInt(T,10)&&v(i.values().next().value)),w.shapeFlag|=256,n=w,cg(_.type)?_:w}}},Sw=sj;function B0(e,t){return Ot(e)?e.some(o=>B0(o,t)):_o(e)?e.split(",").includes(t):Yz(e)?(e.lastIndex=0,e.test(t)):!1}function ac(e,t){c9(e,"a",t)}function Bs(e,t){c9(e,"da",t)}function c9(e,t,o=Dr){const r=e.__wdc||(e.__wdc=()=>{let a=o;for(;a;){if(a.isDeactivated)return;a=a.parent}return e()});if(w_(t,r,o),o){let a=o.parent;for(;a&&a.parent;)oh(a.parent.vnode)&&lj(r,t,o,a),a=a.parent}}function lj(e,t,o,r){const a=w_(t,e,r,!0);Hd(()=>{fw(r[t],a)},o)}function X2(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function L1(e){return e.shapeFlag&128?e.ssContent:e}function w_(e,t,o=Dr,r=!1){if(o){const a=o[e]||(o[e]=[]),i=t.__weh||(t.__weh=(...n)=>{bu();const s=Od(o),l=Mn(t,o,e,n);return s(),yu(),l});return r?a.unshift(i):a.push(i),i}}const rc=e=>(t,o=Dr)=>{(!_m||e==="sp")&&w_(e,(...r)=>t(...r),o)},Mm=rc("bm"),Va=rc("m"),Nm=rc("bu"),km=rc("u"),Vo=rc("bum"),Hd=rc("um"),Iw=rc("sp"),Aw=rc("rtg"),Tw=rc("rtc");function Dw(e,t=Dr){w_("ec",e,t)}const Ow="components",cj="directives";function Ve(e,t){return Pw(Ow,e,!0,t)||e}const u9=Symbol.for("v-ndc");function d9(e){return _o(e)?Pw(Ow,e,!1)||e:e||u9}function ah(e){return Pw(cj,e)}function Pw(e,t,o=!0,r=!1){const a=Fr||Dr;if(a){const i=a.type;if(e===Ow){const s=yx(i,!1);if(s&&(s===t||s===Da(t)||s===gu(Da(t))))return i}const n=H4(a[e]||i[e],t)||H4(a.appContext[e],t);return!n&&r?i:n}}function H4(e,t){return e&&(e[t]||e[Da(t)]||e[gu(Da(t))])}function qt(e,t,o,r){let a;const i=o&&o[r],n=Ot(e);if(n||_o(e)){const s=n&&jl(e);let l=!1;s&&(l=!sn(e),e=p_(e)),a=new Array(e.length);for(let u=0,c=e.length;u<c;u++)a[u]=t(l?gi(e[u]):e[u],u,void 0,i&&i[u])}else if(typeof e=="number"){a=new Array(e);for(let s=0;s<e;s++)a[s]=t(s+1,s,void 0,i&&i[s])}else if(pa(e))if(e[Symbol.iterator])a=Array.from(e,(s,l)=>t(s,l,void 0,i&&i[l]));else{const s=Object.keys(e);a=new Array(s.length);for(let l=0,u=s.length;l<u;l++){const c=s[l];a[l]=t(e[c],c,l,i&&i[l])}}else a=[];return o&&(o[r]=a),a}function rh(e,t){for(let o=0;o<t.length;o++){const r=t[o];if(Ot(r))for(let a=0;a<r.length;a++)e[r[a].name]=r[a].fn;else r&&(e[r.name]=r.key?(...a)=>{const i=r.fn(...a);return i&&(i.key=r.key),i}:r.fn)}return e}function ih(e,t,o={},r,a){if(Fr.ce||Fr.parent&&eu(Fr.parent)&&Fr.parent.ce)return t!=="default"&&(o.name=t),B(),oe(Qe,null,[h("slot",o,r&&r())],64);let i=e[t];i&&i._c&&(i._d=!1),B();const n=i&&Fw(i(o)),s=o.key||n&&n.key,l=oe(Qe,{key:(s&&!ln(s)?s:`_${t}`)+(!n&&r?"_fb":"")},n||(r?r():[]),n&&e._===1?64:-2);return!a&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function Fw(e){return e.some(t=>sl(t)?!(t.type===ur||t.type===Qe&&!Fw(t.children)):!0)?e:null}function f9(e,t){const o={};for(const r in e)o[t&&/[A-Z]/.test(r)?`on:${r}`:md(r)]=e[r];return o}const ux=e=>e?aF(e)?lh(e):ux(e.parent):null,tp=Ro(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ux(e.parent),$root:e=>ux(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Mw(e),$forceUpdate:e=>e.f||(e.f=()=>{xw(e.update)}),$nextTick:e=>e.n||(e.n=Ao.bind(e.proxy)),$watch:e=>Sj.bind(e)}),K2=(e,t)=>e!==Mo&&!e.__isScriptSetup&&oa(e,t),dx={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:o,setupState:r,data:a,props:i,accessCache:n,type:s,appContext:l}=e;let u;if(t[0]!=="$"){const m=n[t];if(m!==void 0)switch(m){case 1:return r[t];case 2:return a[t];case 4:return o[t];case 3:return i[t]}else{if(K2(r,t))return n[t]=1,r[t];if(a!==Mo&&oa(a,t))return n[t]=2,a[t];if((u=e.propsOptions[0])&&oa(u,t))return n[t]=3,i[t];if(o!==Mo&&oa(o,t))return n[t]=4,o[t];fx&&(n[t]=0)}}const c=tp[t];let d,f;if(c)return t==="$attrs"&&vi(e.attrs,"get",""),c(e);if((d=s.__cssModules)&&(d=d[t]))return d;if(o!==Mo&&oa(o,t))return n[t]=4,o[t];if(f=l.config.globalProperties,oa(f,t))return f[t]},set({_:e},t,o){const{data:r,setupState:a,ctx:i}=e;return K2(a,t)?(a[t]=o,!0):r!==Mo&&oa(r,t)?(r[t]=o,!0):oa(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=o,!0)},has({_:{data:e,setupState:t,accessCache:o,ctx:r,appContext:a,propsOptions:i}},n){let s;return!!o[n]||e!==Mo&&oa(e,n)||K2(t,n)||(s=i[0])&&oa(s,n)||oa(r,n)||oa(tp,n)||oa(a.config.globalProperties,n)},defineProperty(e,t,o){return o.get!=null?e._.accessCache[t]=0:oa(o,"value")&&this.set(e,t,o.value,null),Reflect.defineProperty(e,t,o)}},uj=Ro({},dx,{get(e,t){if(t!==Symbol.unscopables)return dx.get(e,t,e)},has(e,t){return t[0]!=="_"&&!rH(t)}});function m9(){return null}function p9(){return null}function h9(e){}function v9(e){}function g9(){return null}function _9(){}function b9(e,t){return null}function y9(){return C9().slots}function x9(){return C9().attrs}function C9(){const e=xt();return e.setupContext||(e.setupContext=sF(e))}function yp(e){return Ot(e)?e.reduce((t,o)=>(t[o]=null,t),{}):e}function w9(e,t){const o=yp(e);for(const r in t){if(r.startsWith("__skip"))continue;let a=o[r];a?Ot(a)||ao(a)?a=o[r]={type:a,default:t[r]}:a.default=t[r]:a===null&&(a=o[r]={default:t[r]}),a&&t[`__skip_${r}`]&&(a.skipFactory=!0)}return o}function E9(e,t){return!e||!t?e||t:Ot(e)&&Ot(t)?e.concat(t):Ro({},yp(e),yp(t))}function S9(e,t){const o={};for(const r in e)t.includes(r)||Object.defineProperty(o,r,{enumerable:!0,get:()=>e[r]});return o}function I9(e){const t=xt();let o=e();return gx(),mw(o)&&(o=o.catch(r=>{throw Od(t),r})),[o,()=>Od(t)]}let fx=!0;function dj(e){const t=Mw(e),o=e.proxy,r=e.ctx;fx=!1,t.beforeCreate&&j4(t.beforeCreate,e,"bc");const{data:a,computed:i,methods:n,watch:s,provide:l,inject:u,created:c,beforeMount:d,mounted:f,beforeUpdate:m,updated:p,activated:v,deactivated:g,beforeDestroy:x,beforeUnmount:b,destroyed:_,unmounted:w,render:S,renderTracked:D,renderTriggered:M,errorCaptured:O,serverPrefetch:T,expose:I,inheritAttrs:N,components:P,directives:F,filters:L}=t;if(u&&fj(u,r,null),n)for(const X in n){const Y=n[X];ao(Y)&&(r[X]=Y.bind(o))}if(a){const X=a.call(o,o);pa(X)&&(e.data=rs(X))}if(fx=!0,i)for(const X in i){const Y=i[X],de=ao(Y)?Y.bind(o,o):ao(Y.get)?Y.get.bind(o,o):Hr,ye=!ao(Y)&&ao(Y.set)?Y.set.bind(o):Hr,W=j({get:de,set:ye});Object.defineProperty(r,X,{enumerable:!0,configurable:!0,get:()=>W.value,set:re=>W.value=re})}if(s)for(const X in s)A9(s[X],r,o,X);if(l){const X=ao(l)?l.call(o):l;Reflect.ownKeys(X).forEach(Y=>{rl(Y,X[Y])})}c&&j4(c,e,"c");function H(X,Y){Ot(Y)?Y.forEach(de=>X(de.bind(o))):Y&&X(Y.bind(o))}if(H(Mm,d),H(Va,f),H(Nm,m),H(km,p),H(ac,v),H(Bs,g),H(Dw,O),H(Tw,D),H(Aw,M),H(Vo,b),H(Hd,w),H(Iw,T),Ot(I))if(I.length){const X=e.exposed||(e.exposed={});I.forEach(Y=>{Object.defineProperty(X,Y,{get:()=>o[Y],set:de=>o[Y]=de})})}else e.exposed||(e.exposed={});S&&e.render===Hr&&(e.render=S),N!=null&&(e.inheritAttrs=N),P&&(e.components=P),F&&(e.directives=F),T&&Ew(e)}function fj(e,t,o=Hr){Ot(e)&&(e=mx(e));for(const r in e){const a=e[r];let i;pa(a)?"default"in a?i=kr(a.from||r,a.default,!0):i=kr(a.from||r):i=kr(a),br(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:n=>i.value=n}):t[r]=i}}function j4(e,t,o){Mn(Ot(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,o)}function A9(e,t,o,r){let a=r.includes(".")?H9(o,r):()=>o[r];if(_o(e)){const i=t[e];ao(i)&&ct(a,i)}else if(ao(e))ct(a,e.bind(o));else if(pa(e))if(Ot(e))e.forEach(i=>A9(i,t,o,r));else{const i=ao(e.handler)?e.handler.bind(o):t[e.handler];ao(i)&&ct(a,i,e)}}function Mw(e){const t=e.type,{mixins:o,extends:r}=t,{mixins:a,optionsCache:i,config:{optionMergeStrategies:n}}=e.appContext,s=i.get(t);let l;return s?l=s:!a.length&&!o&&!r?l=t:(l={},a.length&&a.forEach(u=>sg(l,u,n,!0)),sg(l,t,n)),pa(t)&&i.set(t,l),l}function sg(e,t,o,r=!1){const{mixins:a,extends:i}=t;i&&sg(e,i,o,!0),a&&a.forEach(n=>sg(e,n,o,!0));for(const n in t)if(!(r&&n==="expose")){const s=mj[n]||o&&o[n];e[n]=s?s(e[n],t[n]):t[n]}return e}const mj={data:G4,props:W4,emits:W4,methods:q0,computed:q0,beforeCreate:Oi,created:Oi,beforeMount:Oi,mounted:Oi,beforeUpdate:Oi,updated:Oi,beforeDestroy:Oi,beforeUnmount:Oi,destroyed:Oi,unmounted:Oi,activated:Oi,deactivated:Oi,errorCaptured:Oi,serverPrefetch:Oi,components:q0,directives:q0,watch:hj,provide:G4,inject:pj};function G4(e,t){return t?e?function(){return Ro(ao(e)?e.call(this,this):e,ao(t)?t.call(this,this):t)}:t:e}function pj(e,t){return q0(mx(e),mx(t))}function mx(e){if(Ot(e)){const t={};for(let o=0;o<e.length;o++)t[e[o]]=e[o];return t}return e}function Oi(e,t){return e?[...new Set([].concat(e,t))]:t}function q0(e,t){return e?Ro(Object.create(null),e,t):t}function W4(e,t){return e?Ot(e)&&Ot(t)?[...new Set([...e,...t])]:Ro(Object.create(null),yp(e),yp(t!=null?t:{})):t}function hj(e,t){if(!e)return t;if(!t)return e;const o=Ro(Object.create(null),e);for(const r in t)o[r]=Oi(e[r],t[r]);return o}function T9(){return{app:null,config:{isNativeTag:V0,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let vj=0;function gj(e,t){return function(r,a=null){ao(r)||(r=Ro({},r)),a!=null&&!pa(a)&&(a=null);const i=T9(),n=new WeakSet,s=[];let l=!1;const u=i.app={_uid:vj++,_component:r,_props:a,_container:null,_context:i,_instance:null,version:Hw,get config(){return i.config},set config(c){},use(c,...d){return n.has(c)||(c&&ao(c.install)?(n.add(c),c.install(u,...d)):ao(c)&&(n.add(c),c(u,...d))),u},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),u},component(c,d){return d?(i.components[c]=d,u):i.components[c]},directive(c,d){return d?(i.directives[c]=d,u):i.directives[c]},mount(c,d,f){if(!l){const m=u._ceVNode||h(r,a);return m.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),d&&t?t(m,c):e(m,c,f),l=!0,u._container=c,c.__vue_app__=u,lh(m.component)}},onUnmount(c){s.push(c)},unmount(){l&&(Mn(s,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(c,d){return i.provides[c]=d,u},runWithContext(c){const d=hd;hd=u;try{return c()}finally{hd=d}}};return u}}let hd=null;function rl(e,t){if(Dr){let o=Dr.provides;const r=Dr.parent&&Dr.parent.provides;r===o&&(o=Dr.provides=Object.create(r)),o[e]=t}}function kr(e,t,o=!1){const r=Dr||Fr;if(r||hd){const a=hd?hd._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(a&&e in a)return a[e];if(arguments.length>1)return o&&ao(t)?t.call(r&&r.proxy):t}}function D9(){return!!(Dr||Fr||hd)}const O9={},P9=()=>Object.create(O9),F9=e=>Object.getPrototypeOf(e)===O9;function _j(e,t,o,r=!1){const a={},i=P9();e.propsDefaults=Object.create(null),M9(e,t,a,i);for(const n in e.propsOptions[0])n in a||(a[n]=void 0);o?e.props=r?a:Zp(a):e.type.props?e.props=a:e.props=i,e.attrs=i}function bj(e,t,o,r){const{props:a,attrs:i,vnode:{patchFlag:n}}=e,s=go(a),[l]=e.propsOptions;let u=!1;if((r||n>0)&&!(n&16)){if(n&8){const c=e.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(E_(e.emitsOptions,f))continue;const m=t[f];if(l)if(oa(i,f))m!==i[f]&&(i[f]=m,u=!0);else{const p=Da(f);a[p]=px(l,s,p,m,e,!1)}else m!==i[f]&&(i[f]=m,u=!0)}}}else{M9(e,t,a,i)&&(u=!0);let c;for(const d in s)(!t||!oa(t,d)&&((c=on(d))===d||!oa(t,c)))&&(l?o&&(o[d]!==void 0||o[c]!==void 0)&&(a[d]=px(l,s,d,void 0,e,!0)):delete a[d]);if(i!==s)for(const d in i)(!t||!oa(t,d)&&!0)&&(delete i[d],u=!0)}u&&Vl(e.attrs,"set","")}function M9(e,t,o,r){const[a,i]=e.propsOptions;let n=!1,s;if(t)for(let l in t){if(Zc(l))continue;const u=t[l];let c;a&&oa(a,c=Da(l))?!i||!i.includes(c)?o[c]=u:(s||(s={}))[c]=u:E_(e.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,n=!0)}if(i){const l=go(o),u=s||Mo;for(let c=0;c<i.length;c++){const d=i[c];o[d]=px(a,l,d,u[d],e,!oa(u,d))}}return n}function px(e,t,o,r,a,i){const n=e[o];if(n!=null){const s=oa(n,"default");if(s&&r===void 0){const l=n.default;if(n.type!==Function&&!n.skipFactory&&ao(l)){const{propsDefaults:u}=a;if(o in u)r=u[o];else{const c=Od(a);r=u[o]=l.call(null,t),c()}}else r=l;a.ce&&a.ce._setProp(o,r)}n[0]&&(i&&!s?r=!1:n[1]&&(r===""||r===on(o))&&(r=!0))}return r}const yj=new WeakMap;function N9(e,t,o=!1){const r=o?yj:t.propsCache,a=r.get(e);if(a)return a;const i=e.props,n={},s=[];let l=!1;if(!ao(e)){const c=d=>{l=!0;const[f,m]=N9(d,t,!0);Ro(n,f),m&&s.push(...m)};!o&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!i&&!l)return pa(e)&&r.set(e,Yf),Yf;if(Ot(i))for(let c=0;c<i.length;c++){const d=Da(i[c]);Q4(d)&&(n[d]=Mo)}else if(i)for(const c in i){const d=Da(c);if(Q4(d)){const f=i[c],m=n[d]=Ot(f)||ao(f)?{type:f}:Ro({},f),p=m.type;let v=!1,g=!0;if(Ot(p))for(let x=0;x<p.length;++x){const b=p[x],_=ao(b)&&b.name;if(_==="Boolean"){v=!0;break}else _==="String"&&(g=!1)}else v=ao(p)&&p.name==="Boolean";m[0]=v,m[1]=g,(v||oa(m,"default"))&&s.push(d)}}const u=[n,s];return pa(e)&&r.set(e,u),u}function Q4(e){return e[0]!=="$"&&!Zc(e)}const k9=e=>e[0]==="_"||e==="$stable",Nw=e=>Ot(e)?e.map(Zi):[Zi(e)],xj=(e,t,o)=>{if(t._n)return t;const r=C((...a)=>Nw(t(...a)),o);return r._c=!1,r},R9=(e,t,o)=>{const r=e._ctx;for(const a in e){if(k9(a))continue;const i=e[a];if(ao(i))t[a]=xj(a,i,r);else if(i!=null){const n=Nw(i);t[a]=()=>n}}},V9=(e,t)=>{const o=Nw(t);e.slots.default=()=>o},B9=(e,t,o)=>{for(const r in t)(o||r!=="_")&&(e[r]=t[r])},Cj=(e,t,o)=>{const r=e.slots=P9();if(e.vnode.shapeFlag&32){const a=t._;a?(B9(r,t,o),o&&i8(r,"_",a,!0)):R9(t,r)}else t&&V9(e,t)},wj=(e,t,o)=>{const{vnode:r,slots:a}=e;let i=!0,n=Mo;if(r.shapeFlag&32){const s=t._;s?o&&s===1?i=!1:B9(a,t,o):(i=!t.$stable,R9(t,a)),n=t}else t&&(V9(e,t),n={default:1});if(i)for(const s in a)!k9(s)&&n[s]==null&&delete a[s]},Er=K9;function kw(e){return q9(e)}function Rw(e){return q9(e,tj)}function q9(e,t){const o=c_();o.__VUE__=!0;const{insert:r,remove:a,patchProp:i,createElement:n,createText:s,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:f,setScopeId:m=Hr,insertStaticContent:p}=e,v=(U,Z,Ce,Q=null,V=null,R=null,ee=void 0,ce=null,se=!!Z.dynamicChildren)=>{if(U===Z)return;U&&!Es(U,Z)&&(Q=he(U),re(U,V,R,!0),U=null),Z.patchFlag===-2&&(se=!1,Z.dynamicChildren=null);const{type:pe,ref:we,shapeFlag:Ne}=Z;switch(pe){case Gl:g(U,Z,Ce,Q);break;case ur:x(U,Z,Ce,Q);break;case tu:U==null&&b(Z,Ce,Q,ee);break;case Qe:P(U,Z,Ce,Q,V,R,ee,ce,se);break;default:Ne&1?S(U,Z,Ce,Q,V,R,ee,ce,se):Ne&6?F(U,Z,Ce,Q,V,R,ee,ce,se):(Ne&64||Ne&128)&&pe.process(U,Z,Ce,Q,V,R,ee,ce,se,J)}we!=null&&V&&bp(we,U&&U.ref,R,Z||U,!Z)},g=(U,Z,Ce,Q)=>{if(U==null)r(Z.el=s(Z.children),Ce,Q);else{const V=Z.el=U.el;Z.children!==U.children&&u(V,Z.children)}},x=(U,Z,Ce,Q)=>{U==null?r(Z.el=l(Z.children||""),Ce,Q):Z.el=U.el},b=(U,Z,Ce,Q)=>{[U.el,U.anchor]=p(U.children,Z,Ce,Q,U.el,U.anchor)},_=({el:U,anchor:Z},Ce,Q)=>{let V;for(;U&&U!==Z;)V=f(U),r(U,Ce,Q),U=V;r(Z,Ce,Q)},w=({el:U,anchor:Z})=>{let Ce;for(;U&&U!==Z;)Ce=f(U),a(U),U=Ce;a(Z)},S=(U,Z,Ce,Q,V,R,ee,ce,se)=>{Z.type==="svg"?ee="svg":Z.type==="math"&&(ee="mathml"),U==null?D(Z,Ce,Q,V,R,ee,ce,se):T(U,Z,V,R,ee,ce,se)},D=(U,Z,Ce,Q,V,R,ee,ce)=>{let se,pe;const{props:we,shapeFlag:Ne,transition:Ge,dirs:Ze}=U;if(se=U.el=n(U.type,R,we&&we.is,we),Ne&8?c(se,U.children):Ne&16&&O(U.children,se,null,Q,V,Y2(U,R),ee,ce),Ze&&Qs(U,null,Q,"created"),M(se,U,U.scopeId,ee,Q),we){for(const Pt in we)Pt!=="value"&&!Zc(Pt)&&i(se,Pt,null,we[Pt],R,Q);"value"in we&&i(se,"value",null,we.value,R),(pe=we.onVnodeBeforeMount)&&Ji(pe,Q,U)}Ze&&Qs(U,null,Q,"beforeMount");const ot=L9(V,Ge);ot&&Ge.beforeEnter(se),r(se,Z,Ce),((pe=we&&we.onVnodeMounted)||ot||Ze)&&Er(()=>{pe&&Ji(pe,Q,U),ot&&Ge.enter(se),Ze&&Qs(U,null,Q,"mounted")},V)},M=(U,Z,Ce,Q,V)=>{if(Ce&&m(U,Ce),Q)for(let R=0;R<Q.length;R++)m(U,Q[R]);if(V){let R=V.subTree;if(Z===R||cg(R.type)&&(R.ssContent===Z||R.ssFallback===Z)){const ee=V.vnode;M(U,ee,ee.scopeId,ee.slotScopeIds,V.parent)}}},O=(U,Z,Ce,Q,V,R,ee,ce,se=0)=>{for(let pe=se;pe<U.length;pe++){const we=U[pe]=ce?Bc(U[pe]):Zi(U[pe]);v(null,we,Z,Ce,Q,V,R,ee,ce)}},T=(U,Z,Ce,Q,V,R,ee)=>{const ce=Z.el=U.el;let{patchFlag:se,dynamicChildren:pe,dirs:we}=Z;se|=U.patchFlag&16;const Ne=U.props||Mo,Ge=Z.props||Mo;let Ze;if(Ce&&Ru(Ce,!1),(Ze=Ge.onVnodeBeforeUpdate)&&Ji(Ze,Ce,Z,U),we&&Qs(Z,U,Ce,"beforeUpdate"),Ce&&Ru(Ce,!0),(Ne.innerHTML&&Ge.innerHTML==null||Ne.textContent&&Ge.textContent==null)&&c(ce,""),pe?I(U.dynamicChildren,pe,ce,Ce,Q,Y2(Z,V),R):ee||Y(U,Z,ce,null,Ce,Q,Y2(Z,V),R,!1),se>0){if(se&16)N(ce,Ne,Ge,Ce,V);else if(se&2&&Ne.class!==Ge.class&&i(ce,"class",null,Ge.class,V),se&4&&i(ce,"style",Ne.style,Ge.style,V),se&8){const ot=Z.dynamicProps;for(let Pt=0;Pt<ot.length;Pt++){const $t=ot[Pt],fo=Ne[$t],He=Ge[$t];(He!==fo||$t==="value")&&i(ce,$t,fo,He,V,Ce)}}se&1&&U.children!==Z.children&&c(ce,Z.children)}else!ee&&pe==null&&N(ce,Ne,Ge,Ce,V);((Ze=Ge.onVnodeUpdated)||we)&&Er(()=>{Ze&&Ji(Ze,Ce,Z,U),we&&Qs(Z,U,Ce,"updated")},Q)},I=(U,Z,Ce,Q,V,R,ee)=>{for(let ce=0;ce<Z.length;ce++){const se=U[ce],pe=Z[ce],we=se.el&&(se.type===Qe||!Es(se,pe)||se.shapeFlag&70)?d(se.el):Ce;v(se,pe,we,null,Q,V,R,ee,!0)}},N=(U,Z,Ce,Q,V)=>{if(Z!==Ce){if(Z!==Mo)for(const R in Z)!Zc(R)&&!(R in Ce)&&i(U,R,Z[R],null,V,Q);for(const R in Ce){if(Zc(R))continue;const ee=Ce[R],ce=Z[R];ee!==ce&&R!=="value"&&i(U,R,ce,ee,V,Q)}"value"in Ce&&i(U,"value",Z.value,Ce.value,V)}},P=(U,Z,Ce,Q,V,R,ee,ce,se)=>{const pe=Z.el=U?U.el:s(""),we=Z.anchor=U?U.anchor:s("");let{patchFlag:Ne,dynamicChildren:Ge,slotScopeIds:Ze}=Z;Ze&&(ce=ce?ce.concat(Ze):Ze),U==null?(r(pe,Ce,Q),r(we,Ce,Q),O(Z.children||[],Ce,we,V,R,ee,ce,se)):Ne>0&&Ne&64&&Ge&&U.dynamicChildren?(I(U.dynamicChildren,Ge,Ce,V,R,ee,ce),(Z.key!=null||V&&Z===V.subTree)&&Vw(U,Z,!0)):Y(U,Z,Ce,we,V,R,ee,ce,se)},F=(U,Z,Ce,Q,V,R,ee,ce,se)=>{Z.slotScopeIds=ce,U==null?Z.shapeFlag&512?V.ctx.activate(Z,Ce,Q,ee,se):L(Z,Ce,Q,V,R,ee,se):z(U,Z,se)},L=(U,Z,Ce,Q,V,R,ee)=>{const ce=U.component=oF(U,Q,V);if(oh(U)&&(ce.ctx.renderer=J),rF(ce,!1,ee),ce.asyncDep){if(V&&V.registerDep(ce,H,ee),!U.el){const se=ce.subTree=h(ur);x(null,se,Z,Ce)}}else H(ce,U,Z,Ce,V,R,ee)},z=(U,Z,Ce)=>{const Q=Z.component=U.component;if(Oj(U,Z,Ce))if(Q.asyncDep&&!Q.asyncResolved){X(Q,Z,Ce);return}else Q.next=Z,Q.update();else Z.el=U.el,Q.vnode=Z},H=(U,Z,Ce,Q,V,R,ee)=>{const ce=()=>{if(U.isMounted){let{next:Ne,bu:Ge,u:Ze,parent:ot,vnode:Pt}=U;{const $e=$9(U);if($e){Ne&&(Ne.el=Pt.el,X(U,Ne,ee)),$e.asyncDep.then(()=>{U.isUnmounted||ce()});return}}let $t=Ne,fo;Ru(U,!1),Ne?(Ne.el=Pt.el,X(U,Ne,ee)):Ne=Pt,Ge&&Zf(Ge),(fo=Ne.props&&Ne.props.onVnodeBeforeUpdate)&&Ji(fo,ot,Ne,Pt),Ru(U,!0);const He=Iv(U),tt=U.subTree;U.subTree=He,v(tt,He,d(tt.el),he(tt),U,V,R),Ne.el=He.el,$t===null&&S_(U,He.el),Ze&&Er(Ze,V),(fo=Ne.props&&Ne.props.onVnodeUpdated)&&Er(()=>Ji(fo,ot,Ne,Pt),V)}else{let Ne;const{el:Ge,props:Ze}=Z,{bm:ot,m:Pt,parent:$t,root:fo,type:He}=U,tt=eu(Z);if(Ru(U,!1),ot&&Zf(ot),!tt&&(Ne=Ze&&Ze.onVnodeBeforeMount)&&Ji(Ne,$t,Z),Ru(U,!0),Ge&&ne){const $e=()=>{U.subTree=Iv(U),ne(Ge,U.subTree,U,V,null)};tt&&He.__asyncHydrate?He.__asyncHydrate(Ge,U,$e):$e()}else{fo.ce&&fo.ce._injectChildStyle(He);const $e=U.subTree=Iv(U);v(null,$e,Ce,Q,U,V,R),Z.el=$e.el}if(Pt&&Er(Pt,V),!tt&&(Ne=Ze&&Ze.onVnodeMounted)){const $e=Z;Er(()=>Ji(Ne,$t,$e),V)}(Z.shapeFlag&256||$t&&eu($t.vnode)&&$t.vnode.shapeFlag&256)&&U.a&&Er(U.a,V),U.isMounted=!0,Z=Ce=Q=null}};U.scope.on();const se=U.effect=new vm(ce);U.scope.off();const pe=U.update=se.run.bind(se),we=U.job=se.runIfDirty.bind(se);we.i=U,we.id=U.uid,se.scheduler=()=>xw(we),Ru(U,!0),pe()},X=(U,Z,Ce)=>{Z.component=U;const Q=U.vnode.props;U.vnode=Z,U.next=null,bj(U,Z.props,Q,Ce),wj(U,Z.children,Ce),bu(),V4(U),yu()},Y=(U,Z,Ce,Q,V,R,ee,ce,se=!1)=>{const pe=U&&U.children,we=U?U.shapeFlag:0,Ne=Z.children,{patchFlag:Ge,shapeFlag:Ze}=Z;if(Ge>0){if(Ge&128){ye(pe,Ne,Ce,Q,V,R,ee,ce,se);return}else if(Ge&256){de(pe,Ne,Ce,Q,V,R,ee,ce,se);return}}Ze&8?(we&16&&Ie(pe,V,R),Ne!==pe&&c(Ce,Ne)):we&16?Ze&16?ye(pe,Ne,Ce,Q,V,R,ee,ce,se):Ie(pe,V,R,!0):(we&8&&c(Ce,""),Ze&16&&O(Ne,Ce,Q,V,R,ee,ce,se))},de=(U,Z,Ce,Q,V,R,ee,ce,se)=>{U=U||Yf,Z=Z||Yf;const pe=U.length,we=Z.length,Ne=Math.min(pe,we);let Ge;for(Ge=0;Ge<Ne;Ge++){const Ze=Z[Ge]=se?Bc(Z[Ge]):Zi(Z[Ge]);v(U[Ge],Ze,Ce,null,V,R,ee,ce,se)}pe>we?Ie(U,V,R,!0,!1,Ne):O(Z,Ce,Q,V,R,ee,ce,se,Ne)},ye=(U,Z,Ce,Q,V,R,ee,ce,se)=>{let pe=0;const we=Z.length;let Ne=U.length-1,Ge=we-1;for(;pe<=Ne&&pe<=Ge;){const Ze=U[pe],ot=Z[pe]=se?Bc(Z[pe]):Zi(Z[pe]);if(Es(Ze,ot))v(Ze,ot,Ce,null,V,R,ee,ce,se);else break;pe++}for(;pe<=Ne&&pe<=Ge;){const Ze=U[Ne],ot=Z[Ge]=se?Bc(Z[Ge]):Zi(Z[Ge]);if(Es(Ze,ot))v(Ze,ot,Ce,null,V,R,ee,ce,se);else break;Ne--,Ge--}if(pe>Ne){if(pe<=Ge){const Ze=Ge+1,ot=Ze<we?Z[Ze].el:Q;for(;pe<=Ge;)v(null,Z[pe]=se?Bc(Z[pe]):Zi(Z[pe]),Ce,ot,V,R,ee,ce,se),pe++}}else if(pe>Ge)for(;pe<=Ne;)re(U[pe],V,R,!0),pe++;else{const Ze=pe,ot=pe,Pt=new Map;for(pe=ot;pe<=Ge;pe++){const Ut=Z[pe]=se?Bc(Z[pe]):Zi(Z[pe]);Ut.key!=null&&Pt.set(Ut.key,pe)}let $t,fo=0;const He=Ge-ot+1;let tt=!1,$e=0;const dt=new Array(He);for(pe=0;pe<He;pe++)dt[pe]=0;for(pe=Ze;pe<=Ne;pe++){const Ut=U[pe];if(fo>=He){re(Ut,V,R,!0);continue}let gt;if(Ut.key!=null)gt=Pt.get(Ut.key);else for($t=ot;$t<=Ge;$t++)if(dt[$t-ot]===0&&Es(Ut,Z[$t])){gt=$t;break}gt===void 0?re(Ut,V,R,!0):(dt[gt-ot]=pe+1,gt>=$e?$e=gt:tt=!0,v(Ut,Z[gt],Ce,null,V,R,ee,ce,se),fo++)}const Rt=tt?Ej(dt):Yf;for($t=Rt.length-1,pe=He-1;pe>=0;pe--){const Ut=ot+pe,gt=Z[Ut],po=Ut+1<we?Z[Ut+1].el:Q;dt[pe]===0?v(null,gt,Ce,po,V,R,ee,ce,se):tt&&($t<0||pe!==Rt[$t]?W(gt,Ce,po,2):$t--)}}},W=(U,Z,Ce,Q,V=null)=>{const{el:R,type:ee,transition:ce,children:se,shapeFlag:pe}=U;if(pe&6){W(U.component.subTree,Z,Ce,Q);return}if(pe&128){U.suspense.move(Z,Ce,Q);return}if(pe&64){ee.move(U,Z,Ce,J);return}if(ee===Qe){r(R,Z,Ce);for(let Ne=0;Ne<se.length;Ne++)W(se[Ne],Z,Ce,Q);r(U.anchor,Z,Ce);return}if(ee===tu){_(U,Z,Ce);return}if(Q!==2&&pe&1&&ce)if(Q===0)ce.beforeEnter(R),r(R,Z,Ce),Er(()=>ce.enter(R),V);else{const{leave:Ne,delayLeave:Ge,afterLeave:Ze}=ce,ot=()=>r(R,Z,Ce),Pt=()=>{Ne(R,()=>{ot(),Ze&&Ze()})};Ge?Ge(R,ot,Pt):Pt()}else r(R,Z,Ce)},re=(U,Z,Ce,Q=!1,V=!1)=>{const{type:R,props:ee,ref:ce,children:se,dynamicChildren:pe,shapeFlag:we,patchFlag:Ne,dirs:Ge,cacheIndex:Ze}=U;if(Ne===-2&&(V=!1),ce!=null&&bp(ce,null,Ce,U,!0),Ze!=null&&(Z.renderCache[Ze]=void 0),we&256){Z.ctx.deactivate(U);return}const ot=we&1&&Ge,Pt=!eu(U);let $t;if(Pt&&($t=ee&&ee.onVnodeBeforeUnmount)&&Ji($t,Z,U),we&6)ke(U.component,Ce,Q);else{if(we&128){U.suspense.unmount(Ce,Q);return}ot&&Qs(U,null,Z,"beforeUnmount"),we&64?U.type.remove(U,Z,Ce,J,Q):pe&&!pe.hasOnce&&(R!==Qe||Ne>0&&Ne&64)?Ie(pe,Z,Ce,!1,!0):(R===Qe&&Ne&384||!V&&we&16)&&Ie(se,Z,Ce),Q&&_e(U)}(Pt&&($t=ee&&ee.onVnodeUnmounted)||ot)&&Er(()=>{$t&&Ji($t,Z,U),ot&&Qs(U,null,Z,"unmounted")},Ce)},_e=U=>{const{type:Z,el:Ce,anchor:Q,transition:V}=U;if(Z===Qe){ve(Ce,Q);return}if(Z===tu){w(U);return}const R=()=>{a(Ce),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if(U.shapeFlag&1&&V&&!V.persisted){const{leave:ee,delayLeave:ce}=V,se=()=>ee(Ce,R);ce?ce(U.el,R,se):se()}else R()},ve=(U,Z)=>{let Ce;for(;U!==Z;)Ce=f(U),a(U),U=Ce;a(Z)},ke=(U,Z,Ce)=>{const{bum:Q,scope:V,job:R,subTree:ee,um:ce,m:se,a:pe}=U;lg(se),lg(pe),Q&&Zf(Q),V.stop(),R&&(R.flags|=8,re(ee,U,Z,Ce)),ce&&Er(ce,Z),Er(()=>{U.isUnmounted=!0},Z),Z&&Z.pendingBranch&&!Z.isUnmounted&&U.asyncDep&&!U.asyncResolved&&U.suspenseId===Z.pendingId&&(Z.deps--,Z.deps===0&&Z.resolve())},Ie=(U,Z,Ce,Q=!1,V=!1,R=0)=>{for(let ee=R;ee<U.length;ee++)re(U[ee],Z,Ce,Q,V)},he=U=>{if(U.shapeFlag&6)return he(U.component.subTree);if(U.shapeFlag&128)return U.suspense.next();const Z=f(U.anchor||U.el),Ce=Z&&Z[X8];return Ce?f(Ce):Z};let De=!1;const Te=(U,Z,Ce)=>{U==null?Z._vnode&&re(Z._vnode,null,null,!0):v(Z._vnode||null,U,Z,null,null,null,Ce),Z._vnode=U,De||(De=!0,V4(),ng(),De=!1)},J={p:v,um:re,m:W,r:_e,mt:L,mc:O,pc:Y,pbc:I,n:he,o:e};let q,ne;return t&&([q,ne]=t(J)),{render:Te,hydrate:q,createApp:gj(Te,q)}}function Y2({type:e,props:t},o){return o==="svg"&&e==="foreignObject"||o==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:o}function Ru({effect:e,job:t},o){o?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function L9(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Vw(e,t,o=!1){const r=e.children,a=t.children;if(Ot(r)&&Ot(a))for(let i=0;i<r.length;i++){const n=r[i];let s=a[i];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=a[i]=Bc(a[i]),s.el=n.el),!o&&s.patchFlag!==-2&&Vw(n,s)),s.type===Gl&&(s.el=n.el)}}function Ej(e){const t=e.slice(),o=[0];let r,a,i,n,s;const l=e.length;for(r=0;r<l;r++){const u=e[r];if(u!==0){if(a=o[o.length-1],e[a]<u){t[r]=a,o.push(r);continue}for(i=0,n=o.length-1;i<n;)s=i+n>>1,e[o[s]]<u?i=s+1:n=s;u<e[o[i]]&&(i>0&&(t[r]=o[i-1]),o[i]=r)}}for(i=o.length,n=o[i-1];i-- >0;)o[i]=n,n=t[n];return o}function $9(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:$9(t)}function lg(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Bw=Symbol.for("v-scx"),qw=()=>kr(Bw);function U9(e,t){return nh(e,null,t)}function z9(e,t){return nh(e,null,{flush:"post"})}function Lw(e,t){return nh(e,null,{flush:"sync"})}function ct(e,t,o){return nh(e,t,o)}function nh(e,t,o=Mo){const{immediate:r,deep:a,flush:i,once:n}=o,s=Ro({},o),l=t&&r||!t&&i!=="post";let u;if(_m){if(i==="sync"){const m=qw();u=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=Hr,m.resume=Hr,m.pause=Hr,m}}const c=Dr;s.call=(m,p,v)=>Mn(m,c,p,v);let d=!1;i==="post"?s.scheduler=m=>{Er(m,c&&c.suspense)}:i!=="sync"&&(d=!0,s.scheduler=(m,p)=>{p?m():xw(m)}),s.augmentJob=m=>{t&&(m.flags|=4),d&&(m.flags|=2,c&&(m.id=c.uid,m.i=c))};const f=jH(e,t,s);return _m&&(u?u.push(f):l&&f()),f}function Sj(e,t,o){const r=this.proxy,a=_o(e)?e.includes(".")?H9(r,e):()=>r[e]:e.bind(r,r);let i;ao(t)?i=t:(i=t.handler,o=t);const n=Od(this),s=nh(a,i.bind(r),o);return n(),s}function H9(e,t){const o=t.split(".");return()=>{let r=e;for(let a=0;a<o.length&&r;a++)r=r[o[a]];return r}}function j9(e,t,o=Mo){const r=xt(),a=Da(t),i=on(t),n=G9(e,a),s=bw((l,u)=>{let c,d=Mo,f;return Lw(()=>{const m=e[a];Ni(c,m)&&(c=m,u())}),{get(){return l(),o.get?o.get(c):c},set(m){const p=o.set?o.set(m):m;if(!Ni(p,c)&&!(d!==Mo&&Ni(m,d)))return;const v=r.vnode.props;v&&(t in v||a in v||i in v)&&(`onUpdate:${t}`in v||`onUpdate:${a}`in v||`onUpdate:${i}`in v)||(c=m,u()),r.emit(`update:${t}`,p),Ni(m,p)&&Ni(m,d)&&!Ni(p,f)&&u(),d=m,f=p}}});return s[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?n||Mo:s,done:!1}:{done:!0}}}},s}const G9=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Da(t)}Modifiers`]||e[`${on(t)}Modifiers`];function Ij(e,t,...o){if(e.isUnmounted)return;const r=e.vnode.props||Mo;let a=o;const i=t.startsWith("update:"),n=i&&G9(r,t.slice(7));n&&(n.trim&&(a=o.map(c=>_o(c)?c.trim():c)),n.number&&(a=o.map(tg)));let s,l=r[s=md(t)]||r[s=md(Da(t))];!l&&i&&(l=r[s=md(on(t))]),l&&Mn(l,e,6,a);const u=r[s+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,Mn(u,e,6,a)}}function W9(e,t,o=!1){const r=t.emitsCache,a=r.get(e);if(a!==void 0)return a;const i=e.emits;let n={},s=!1;if(!ao(e)){const l=u=>{const c=W9(u,t,!0);c&&(s=!0,Ro(n,c))};!o&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!i&&!s?(pa(e)&&r.set(e,null),null):(Ot(i)?i.forEach(l=>n[l]=null):Ro(n,i),pa(e)&&r.set(e,n),n)}function E_(e,t){return!e||!qd(t)?!1:(t=t.slice(2).replace(/Once$/,""),oa(e,t[0].toLowerCase()+t.slice(1))||oa(e,on(t))||oa(e,t))}function Iv(e){const{type:t,vnode:o,proxy:r,withProxy:a,propsOptions:[i],slots:n,attrs:s,emit:l,render:u,renderCache:c,props:d,data:f,setupState:m,ctx:p,inheritAttrs:v}=e,g=_p(e);let x,b;try{if(o.shapeFlag&4){const w=a||r,S=w;x=Zi(u.call(S,w,c,d,m,f,p)),b=s}else{const w=t;x=Zi(w.length>1?w(d,{attrs:s,slots:n,emit:l}):w(d,null)),b=t.props?s:Tj(s)}}catch(w){op.length=0,xu(w,e,1),x=h(ur)}let _=x;if(b&&v!==!1){const w=Object.keys(b),{shapeFlag:S}=_;w.length&&S&7&&(i&&w.some(dw)&&(b=Dj(b,i)),_=Ps(_,b,!1,!0))}return o.dirs&&(_=Ps(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(o.dirs):o.dirs),o.transition&&nl(_,o.transition),x=_,_p(g),x}function Aj(e,t=!0){let o;for(let r=0;r<e.length;r++){const a=e[r];if(sl(a)){if(a.type!==ur||a.children==="v-if"){if(o)return;o=a}}else return}return o}const Tj=e=>{let t;for(const o in e)(o==="class"||o==="style"||qd(o))&&((t||(t={}))[o]=e[o]);return t},Dj=(e,t)=>{const o={};for(const r in e)(!dw(r)||!(r.slice(9)in t))&&(o[r]=e[r]);return o};function Oj(e,t,o){const{props:r,children:a,component:i}=e,{props:n,children:s,patchFlag:l}=t,u=i.emitsOptions;if(t.dirs||t.transition)return!0;if(o&&l>=0){if(l&1024)return!0;if(l&16)return r?X4(r,n,u):!!n;if(l&8){const c=t.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(n[f]!==r[f]&&!E_(u,f))return!0}}}else return(a||s)&&(!s||!s.$stable)?!0:r===n?!1:r?n?X4(r,n,u):!0:!!n;return!1}function X4(e,t,o){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let a=0;a<r.length;a++){const i=r[a];if(t[i]!==e[i]&&!E_(o,i))return!0}return!1}function S_({vnode:e,parent:t},o){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=o,t=t.parent;else break}}const cg=e=>e.__isSuspense;let hx=0;const Pj={name:"Suspense",__isSuspense:!0,process(e,t,o,r,a,i,n,s,l,u){if(e==null)Fj(t,o,r,a,i,n,s,l,u);else{if(i&&i.deps>0&&!e.suspense.isInFallback){t.suspense=e.suspense,t.suspense.vnode=t,t.el=e.el;return}Mj(e,t,o,r,a,n,s,l,u)}},hydrate:Nj,normalize:kj},Q9=Pj;function xp(e,t){const o=e.props&&e.props[t];ao(o)&&o()}function Fj(e,t,o,r,a,i,n,s,l){const{p:u,o:{createElement:c}}=l,d=c("div"),f=e.suspense=X9(e,a,r,t,d,o,i,n,s,l);u(null,f.pendingBranch=e.ssContent,d,null,r,f,i,n),f.deps>0?(xp(e,"onPending"),xp(e,"onFallback"),u(null,e.ssFallback,t,o,r,null,i,n),tm(f,e.ssFallback)):f.resolve(!1,!0)}function Mj(e,t,o,r,a,i,n,s,{p:l,um:u,o:{createElement:c}}){const d=t.suspense=e.suspense;d.vnode=t,t.el=e.el;const f=t.ssContent,m=t.ssFallback,{activeBranch:p,pendingBranch:v,isInFallback:g,isHydrating:x}=d;if(v)d.pendingBranch=f,Es(f,v)?(l(v,f,d.hiddenContainer,null,a,d,i,n,s),d.deps<=0?d.resolve():g&&(x||(l(p,m,o,r,a,null,i,n,s),tm(d,m)))):(d.pendingId=hx++,x?(d.isHydrating=!1,d.activeBranch=v):u(v,a,d),d.deps=0,d.effects.length=0,d.hiddenContainer=c("div"),g?(l(null,f,d.hiddenContainer,null,a,d,i,n,s),d.deps<=0?d.resolve():(l(p,m,o,r,a,null,i,n,s),tm(d,m))):p&&Es(f,p)?(l(p,f,o,r,a,d,i,n,s),d.resolve(!0)):(l(null,f,d.hiddenContainer,null,a,d,i,n,s),d.deps<=0&&d.resolve()));else if(p&&Es(f,p))l(p,f,o,r,a,d,i,n,s),tm(d,f);else if(xp(t,"onPending"),d.pendingBranch=f,f.shapeFlag&512?d.pendingId=f.component.suspenseId:d.pendingId=hx++,l(null,f,d.hiddenContainer,null,a,d,i,n,s),d.deps<=0)d.resolve();else{const{timeout:b,pendingId:_}=d;b>0?setTimeout(()=>{d.pendingId===_&&d.fallback(m)},b):b===0&&d.fallback(m)}}function X9(e,t,o,r,a,i,n,s,l,u,c=!1){const{p:d,m:f,um:m,n:p,o:{parentNode:v,remove:g}}=u;let x;const b=Rj(e);b&&t&&t.pendingBranch&&(x=t.pendingId,t.deps++);const _=e.props?og(e.props.timeout):void 0,w=i,S={vnode:e,parent:t,parentComponent:o,namespace:n,container:r,hiddenContainer:a,deps:0,pendingId:hx++,timeout:typeof _=="number"?_:-1,activeBranch:null,pendingBranch:null,isInFallback:!c,isHydrating:c,isUnmounted:!1,effects:[],resolve(D=!1,M=!1){const{vnode:O,activeBranch:T,pendingBranch:I,pendingId:N,effects:P,parentComponent:F,container:L}=S;let z=!1;S.isHydrating?S.isHydrating=!1:D||(z=T&&I.transition&&I.transition.mode==="out-in",z&&(T.transition.afterLeave=()=>{N===S.pendingId&&(f(I,L,i===w?p(T):i,0),gm(P))}),T&&(v(T.el)===L&&(i=p(T)),m(T,F,S,!0)),z||f(I,L,i,0)),tm(S,I),S.pendingBranch=null,S.isInFallback=!1;let H=S.parent,X=!1;for(;H;){if(H.pendingBranch){H.effects.push(...P),X=!0;break}H=H.parent}!X&&!z&&gm(P),S.effects=[],b&&t&&t.pendingBranch&&x===t.pendingId&&(t.deps--,t.deps===0&&!M&&t.resolve()),xp(O,"onResolve")},fallback(D){if(!S.pendingBranch)return;const{vnode:M,activeBranch:O,parentComponent:T,container:I,namespace:N}=S;xp(M,"onFallback");const P=p(O),F=()=>{!S.isInFallback||(d(null,D,I,P,T,null,N,s,l),tm(S,D))},L=D.transition&&D.transition.mode==="out-in";L&&(O.transition.afterLeave=F),S.isInFallback=!0,m(O,T,null,!0),L||F()},move(D,M,O){S.activeBranch&&f(S.activeBranch,D,M,O),S.container=D},next(){return S.activeBranch&&p(S.activeBranch)},registerDep(D,M,O){const T=!!S.pendingBranch;T&&S.deps++;const I=D.vnode.el;D.asyncDep.catch(N=>{xu(N,D,0)}).then(N=>{if(D.isUnmounted||S.isUnmounted||S.pendingId!==D.suspenseId)return;D.asyncResolved=!0;const{vnode:P}=D;_x(D,N,!1),I&&(P.el=I);const F=!I&&D.subTree.el;M(D,P,v(I||D.subTree.el),I?null:p(D.subTree),S,n,O),F&&g(F),S_(D,P.el),T&&--S.deps===0&&S.resolve()})},unmount(D,M){S.isUnmounted=!0,S.activeBranch&&m(S.activeBranch,o,D,M),S.pendingBranch&&m(S.pendingBranch,o,D,M)}};return S}function Nj(e,t,o,r,a,i,n,s,l){const u=t.suspense=X9(t,r,o,e.parentNode,document.createElement("div"),null,a,i,n,s,!0),c=l(e,u.pendingBranch=t.ssContent,o,u,i,n);return u.deps===0&&u.resolve(!1,!0),c}function kj(e){const{shapeFlag:t,children:o}=e,r=t&32;e.ssContent=K4(r?o.default:o),e.ssFallback=r?K4(o.fallback):h(ur)}function K4(e){let t;if(ao(e)){const o=Dd&&e._c;o&&(e._d=!1,B()),e=e(),o&&(e._d=!0,t=bi,Y9())}return Ot(e)&&(e=Aj(e)),e=Zi(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(o=>o!==e)),e}function K9(e,t){t&&t.pendingBranch?Ot(e)?t.effects.push(...e):t.effects.push(e):gm(e)}function tm(e,t){e.activeBranch=t;const{vnode:o,parentComponent:r}=e;let a=t.el;for(;!a&&t.component;)t=t.component.subTree,a=t.el;o.el=a,r&&r.subTree===o&&(r.vnode.el=a,S_(r,a))}function Rj(e){const t=e.props&&e.props.suspensible;return t!=null&&t!==!1}const Qe=Symbol.for("v-fgt"),Gl=Symbol.for("v-txt"),ur=Symbol.for("v-cmt"),tu=Symbol.for("v-stc"),op=[];let bi=null;function B(e=!1){op.push(bi=e?null:[])}function Y9(){op.pop(),bi=op[op.length-1]||null}let Dd=1;function ug(e,t=!1){Dd+=e,e<0&&bi&&t&&(bi.hasOnce=!0)}function J9(e){return e.dynamicChildren=Dd>0?bi||Yf:null,Y9(),Dd>0&&bi&&bi.push(e),e}function be(e,t,o,r,a,i){return J9(A(e,t,o,r,a,i,!0))}function oe(e,t,o,r,a){return J9(h(e,t,o,r,a,!0))}function sl(e){return e?e.__v_isVNode===!0:!1}function Es(e,t){return e.type===t.type&&e.key===t.key}function Z9(e){}const eF=({key:e})=>e!=null?e:null,Av=({ref:e,ref_key:t,ref_for:o})=>(typeof e=="number"&&(e=""+e),e!=null?_o(e)||br(e)||ao(e)?{i:Fr,r:e,k:t,f:!!o}:e:null);function A(e,t=null,o=null,r=0,a=null,i=e===Qe?0:1,n=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&eF(t),ref:t&&Av(t),scopeId:y_,slotScopeIds:null,children:o,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Fr};return s?($w(l,o),i&128&&e.normalize(l)):o&&(l.shapeFlag|=_o(o)?8:16),Dd>0&&!n&&bi&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&bi.push(l),l}const h=Vj;function Vj(e,t=null,o=null,r=0,a=null,i=!1){if((!e||e===u9)&&(e=ur),sl(e)){const s=Ps(e,t,!0);return o&&$w(s,o),Dd>0&&!i&&bi&&(s.shapeFlag&6?bi[bi.indexOf(e)]=s:bi.push(s)),s.patchFlag=-2,s}if(Uj(e)&&(e=e.__vccOpts),t){t=sh(t);let{class:s,style:l}=t;s&&!_o(s)&&(t.class=Li(s)),pa(l)&&(eh(l)&&!Ot(l)&&(l=Ro({},l)),t.style=_u(l))}const n=_o(e)?1:cg(e)?128:K8(e)?64:pa(e)?4:ao(e)?2:0;return A(e,t,o,r,a,n,i,!0)}function sh(e){return e?eh(e)||F9(e)?Ro({},e):e:null}function Ps(e,t,o=!1,r=!1){const{props:a,ref:i,patchFlag:n,children:s,transition:l}=e,u=t?ou(a||{},t):a,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&eF(u),ref:t&&t.ref?o&&i?Ot(i)?i.concat(Av(t)):[i,Av(t)]:Av(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Qe?n===-1?16:n|16:n,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ps(e.ssContent),ssFallback:e.ssFallback&&Ps(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&nl(c,l.clone(c)),c}function K(e=" ",t=0){return h(Gl,null,e,t)}function tF(e,t){const o=h(tu,null,e);return o.staticCount=t,o}function ie(e="",t=!1){return t?(B(),oe(ur,null,e)):h(ur,null,e)}function Zi(e){return e==null||typeof e=="boolean"?h(ur):Ot(e)?h(Qe,null,e.slice()):sl(e)?Bc(e):h(Gl,null,String(e))}function Bc(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ps(e)}function $w(e,t){let o=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Ot(t))o=16;else if(typeof t=="object")if(r&65){const a=t.default;a&&(a._c&&(a._d=!1),$w(e,a()),a._c&&(a._d=!0));return}else{o=32;const a=t._;!a&&!F9(t)?t._ctx=Fr:a===3&&Fr&&(Fr.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ao(t)?(t={default:t,_ctx:Fr},o=32):(t=String(t),r&64?(o=16,t=[K(t)]):o=8);e.children=t,e.shapeFlag|=o}function ou(...e){const t={};for(let o=0;o<e.length;o++){const r=e[o];for(const a in r)if(a==="class")t.class!==r.class&&(t.class=Li([t.class,r.class]));else if(a==="style")t.style=_u([t.style,r.style]);else if(qd(a)){const i=t[a],n=r[a];n&&i!==n&&!(Ot(i)&&i.includes(n))&&(t[a]=i?[].concat(i,n):n)}else a!==""&&(t[a]=r[a])}return t}function Ji(e,t,o,r=null){Mn(e,t,7,[o,r])}const Bj=T9();let qj=0;function oF(e,t,o){const r=e.type,a=(t?t.appContext:e.appContext)||Bj,i={uid:qj++,vnode:e,type:r,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new f_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:N9(r,a),emitsOptions:W9(r,a),emit:null,emitted:null,propsDefaults:Mo,inheritAttrs:r.inheritAttrs,ctx:Mo,data:Mo,props:Mo,attrs:Mo,slots:Mo,refs:Mo,setupState:Mo,setupContext:null,suspense:o,suspenseId:o?o.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Ij.bind(null,i),e.ce&&e.ce(i),i}let Dr=null;const xt=()=>Dr||Fr;let dg,vx;{const e=c_(),t=(o,r)=>{let a;return(a=e[o])||(a=e[o]=[]),a.push(r),i=>{a.length>1?a.forEach(n=>n(i)):a[0](i)}};dg=t("__VUE_INSTANCE_SETTERS__",o=>Dr=o),vx=t("__VUE_SSR_SETTERS__",o=>_m=o)}const Od=e=>{const t=Dr;return dg(e),e.scope.on(),()=>{e.scope.off(),dg(t)}},gx=()=>{Dr&&Dr.scope.off(),dg(null)};function aF(e){return e.vnode.shapeFlag&4}let _m=!1;function rF(e,t=!1,o=!1){t&&vx(t);const{props:r,children:a}=e.vnode,i=aF(e);_j(e,r,i,t),Cj(e,a,o);const n=i?Lj(e,t):void 0;return t&&vx(!1),n}function Lj(e,t){const o=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,dx);const{setup:r}=o;if(r){bu();const a=e.setupContext=r.length>1?sF(e):null,i=Od(e),n=Ud(r,e,0,[e.props,a]),s=mw(n);if(yu(),i(),(s||e.sp)&&!eu(e)&&Ew(e),s){if(n.then(gx,gx),t)return n.then(l=>{_x(e,l,t)}).catch(l=>{xu(l,e,0)});e.asyncDep=n}else _x(e,n,t)}else nF(e,t)}function _x(e,t,o){ao(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:pa(t)&&(e.setupState=b_(t)),nF(e,o)}let fg,bx;function Uw(e){fg=e,bx=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,uj))}}const iF=()=>!fg;function nF(e,t,o){const r=e.type;if(!e.render){if(!t&&fg&&!r.render){const a=r.template||Mw(e).template;if(a){const{isCustomElement:i,compilerOptions:n}=e.appContext.config,{delimiters:s,compilerOptions:l}=r,u=Ro(Ro({isCustomElement:i,delimiters:s},n),l);r.render=fg(a,u)}}e.render=r.render||Hr,bx&&bx(e)}{const a=Od(e);bu();try{dj(e)}finally{yu(),a()}}}const $j={get(e,t){return vi(e,"get",""),e[t]}};function sF(e){const t=o=>{e.exposed=o||{}};return{attrs:new Proxy(e.attrs,$j),slots:e.slots,emit:e.emit,expose:t}}function lh(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(b_($d(e.exposed)),{get(t,o){if(o in t)return t[o];if(o in tp)return tp[o](e)},has(t,o){return o in t||o in tp}})):e.proxy}function yx(e,t=!0){return ao(e)?e.displayName||e.name:e.name||t&&e.__name}function Uj(e){return ao(e)&&"__vccOpts"in e}const j=(e,t)=>HH(e,t,_m);function G(e,t,o){const r=arguments.length;return r===2?pa(t)&&!Ot(t)?sl(t)?h(e,null,[t]):h(e,t):h(e,null,t):(r>3?o=Array.prototype.slice.call(arguments,2):r===3&&sl(o)&&(o=[o]),h(e,t,o))}function lF(){}function cF(e,t,o,r){const a=o[r];if(a&&zw(a,e))return a;const i=t();return i.memo=e.slice(),i.cacheIndex=r,o[r]=i}function zw(e,t){const o=e.memo;if(o.length!=t.length)return!1;for(let r=0;r<o.length;r++)if(Ni(o[r],t[r]))return!1;return Dd>0&&bi&&bi.push(e),!0}const Hw="3.5.13",uF=Hr,dF=QH,fF=qf,mF=j8,zj={createComponentInstance:oF,setupComponent:rF,renderComponentRoot:Iv,setCurrentRenderingInstance:_p,isVNode:sl,normalizeVNode:Zi,getComponentPublicInstance:lh,ensureValidVNode:Fw,pushWarningContext:GH,popWarningContext:WH},pF=zj,hF=null,vF=null,gF=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let xx;const Y4=typeof window!="undefined"&&window.trustedTypes;if(Y4)try{xx=Y4.createPolicy("vue",{createHTML:e=>e})}catch{}const _F=xx?e=>xx.createHTML(e):e=>e,Hj="http://www.w3.org/2000/svg",jj="http://www.w3.org/1998/Math/MathML",Fl=typeof document!="undefined"?document:null,J4=Fl&&Fl.createElement("template"),Gj={insert:(e,t,o)=>{t.insertBefore(e,o||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,o,r)=>{const a=t==="svg"?Fl.createElementNS(Hj,e):t==="mathml"?Fl.createElementNS(jj,e):o?Fl.createElement(e,{is:o}):Fl.createElement(e);return e==="select"&&r&&r.multiple!=null&&a.setAttribute("multiple",r.multiple),a},createText:e=>Fl.createTextNode(e),createComment:e=>Fl.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Fl.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,o,r,a,i){const n=o?o.previousSibling:t.lastChild;if(a&&(a===i||a.nextSibling))for(;t.insertBefore(a.cloneNode(!0),o),!(a===i||!(a=a.nextSibling)););else{J4.innerHTML=_F(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const s=J4.content;if(r==="svg"||r==="mathml"){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}t.insertBefore(s,o)}return[n?n.nextSibling:t.firstChild,o?o.previousSibling:t.lastChild]}},_c="transition",g0="animation",bm=Symbol("_vtc"),bF={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},yF=Ro({},C_,bF),Wj=e=>(e.displayName="Transition",e.props=yF,e),Or=Wj((e,{slots:t})=>G(ww,xF(e),t)),Vu=(e,t=[])=>{Ot(e)?e.forEach(o=>o(...t)):e&&e(...t)},Z4=e=>e?Ot(e)?e.some(t=>t.length>1):e.length>1:!1;function xF(e){const t={};for(const P in e)P in bF||(t[P]=e[P]);if(e.css===!1)return t;const{name:o="v",type:r,duration:a,enterFromClass:i=`${o}-enter-from`,enterActiveClass:n=`${o}-enter-active`,enterToClass:s=`${o}-enter-to`,appearFromClass:l=i,appearActiveClass:u=n,appearToClass:c=s,leaveFromClass:d=`${o}-leave-from`,leaveActiveClass:f=`${o}-leave-active`,leaveToClass:m=`${o}-leave-to`}=e,p=Qj(a),v=p&&p[0],g=p&&p[1],{onBeforeEnter:x,onEnter:b,onEnterCancelled:_,onLeave:w,onLeaveCancelled:S,onBeforeAppear:D=x,onAppear:M=b,onAppearCancelled:O=_}=t,T=(P,F,L,z)=>{P._enterCancelled=z,Ac(P,F?c:s),Ac(P,F?u:n),L&&L()},I=(P,F)=>{P._isLeaving=!1,Ac(P,d),Ac(P,m),Ac(P,f),F&&F()},N=P=>(F,L)=>{const z=P?M:b,H=()=>T(F,P,L);Vu(z,[F,H]),eD(()=>{Ac(F,P?l:i),js(F,P?c:s),Z4(z)||tD(F,r,v,H)})};return Ro(t,{onBeforeEnter(P){Vu(x,[P]),js(P,i),js(P,n)},onBeforeAppear(P){Vu(D,[P]),js(P,l),js(P,u)},onEnter:N(!1),onAppear:N(!0),onLeave(P,F){P._isLeaving=!0;const L=()=>I(P,F);js(P,d),P._enterCancelled?(js(P,f),Cx()):(Cx(),js(P,f)),eD(()=>{!P._isLeaving||(Ac(P,d),js(P,m),Z4(w)||tD(P,r,g,L))}),Vu(w,[P,L])},onEnterCancelled(P){T(P,!1,void 0,!0),Vu(_,[P])},onAppearCancelled(P){T(P,!0,void 0,!0),Vu(O,[P])},onLeaveCancelled(P){I(P),Vu(S,[P])}})}function Qj(e){if(e==null)return null;if(pa(e))return[J2(e.enter),J2(e.leave)];{const t=J2(e);return[t,t]}}function J2(e){return og(e)}function js(e,t){t.split(/\s+/).forEach(o=>o&&e.classList.add(o)),(e[bm]||(e[bm]=new Set)).add(t)}function Ac(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const o=e[bm];o&&(o.delete(t),o.size||(e[bm]=void 0))}function eD(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Xj=0;function tD(e,t,o,r){const a=e._endId=++Xj,i=()=>{a===e._endId&&r()};if(o!=null)return setTimeout(i,o);const{type:n,timeout:s,propCount:l}=CF(e,t);if(!n)return r();const u=n+"end";let c=0;const d=()=>{e.removeEventListener(u,f),i()},f=m=>{m.target===e&&++c>=l&&d()};setTimeout(()=>{c<l&&d()},s+1),e.addEventListener(u,f)}function CF(e,t){const o=window.getComputedStyle(e),r=p=>(o[p]||"").split(", "),a=r(`${_c}Delay`),i=r(`${_c}Duration`),n=oD(a,i),s=r(`${g0}Delay`),l=r(`${g0}Duration`),u=oD(s,l);let c=null,d=0,f=0;t===_c?n>0&&(c=_c,d=n,f=i.length):t===g0?u>0&&(c=g0,d=u,f=l.length):(d=Math.max(n,u),c=d>0?n>u?_c:g0:null,f=c?c===_c?i.length:l.length:0);const m=c===_c&&/\b(transform|all)(,|$)/.test(r(`${_c}Property`).toString());return{type:c,timeout:d,propCount:f,hasTransform:m}}function oD(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((o,r)=>aD(o)+aD(e[r])))}function aD(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Cx(){return document.body.offsetHeight}function Kj(e,t,o){const r=e[bm];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):o?e.setAttribute("class",t):e.className=t}const mg=Symbol("_vod"),wF=Symbol("_vsh"),Eo={beforeMount(e,{value:t},{transition:o}){e[mg]=e.style.display==="none"?"":e.style.display,o&&t?o.beforeEnter(e):_0(e,t)},mounted(e,{value:t},{transition:o}){o&&t&&o.enter(e)},updated(e,{value:t,oldValue:o},{transition:r}){!t!=!o&&(r?t?(r.beforeEnter(e),_0(e,!0),r.enter(e)):r.leave(e,()=>{_0(e,!1)}):_0(e,t))},beforeUnmount(e,{value:t}){_0(e,t)}};function _0(e,t){e.style.display=t?e[mg]:"none",e[wF]=!t}function Yj(){Eo.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const EF=Symbol("");function SF(e){const t=xt();if(!t)return;const o=t.ut=(a=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(i=>pg(i,a))},r=()=>{const a=e(t.proxy);t.ce?pg(t.ce,a):wx(t.subTree,a),o(a)};Nm(()=>{gm(r)}),Va(()=>{ct(r,Hr,{flush:"post"});const a=new MutationObserver(r);a.observe(t.subTree.el.parentNode,{childList:!0}),Hd(()=>a.disconnect())})}function wx(e,t){if(e.shapeFlag&128){const o=e.suspense;e=o.activeBranch,o.pendingBranch&&!o.isHydrating&&o.effects.push(()=>{wx(o.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)pg(e.el,t);else if(e.type===Qe)e.children.forEach(o=>wx(o,t));else if(e.type===tu){let{el:o,anchor:r}=e;for(;o&&(pg(o,t),o!==r);)o=o.nextSibling}}function pg(e,t){if(e.nodeType===1){const o=e.style;let r="";for(const a in t)o.setProperty(`--${a}`,t[a]),r+=`--${a}: ${t[a]};`;o[EF]=r}}const Jj=/(^|;)\s*display\s*:/;function Zj(e,t,o){const r=e.style,a=_o(o);let i=!1;if(o&&!a){if(t)if(_o(t))for(const n of t.split(";")){const s=n.slice(0,n.indexOf(":")).trim();o[s]==null&&Tv(r,s,"")}else for(const n in t)o[n]==null&&Tv(r,n,"");for(const n in o)n==="display"&&(i=!0),Tv(r,n,o[n])}else if(a){if(t!==o){const n=r[EF];n&&(o+=";"+n),r.cssText=o,i=Jj.test(o)}}else t&&e.removeAttribute("style");mg in e&&(e[mg]=i?r.display:"",e[wF]&&(r.display="none"))}const rD=/\s*!important$/;function Tv(e,t,o){if(Ot(o))o.forEach(r=>Tv(e,t,r));else if(o==null&&(o=""),t.startsWith("--"))e.setProperty(t,o);else{const r=eG(e,t);rD.test(o)?e.setProperty(on(r),o.replace(rD,""),"important"):e[r]=o}}const iD=["Webkit","Moz","ms"],Z2={};function eG(e,t){const o=Z2[t];if(o)return o;let r=Da(t);if(r!=="filter"&&r in e)return Z2[t]=r;r=gu(r);for(let a=0;a<iD.length;a++){const i=iD[a]+r;if(i in e)return Z2[t]=i}return t}const nD="http://www.w3.org/1999/xlink";function sD(e,t,o,r,a,i=gH(t)){r&&t.startsWith("xlink:")?o==null?e.removeAttributeNS(nD,t.slice(6,t.length)):e.setAttributeNS(nD,t,o):o==null||i&&!s8(o)?e.removeAttribute(t):e.setAttribute(t,i?"":ln(o)?String(o):o)}function lD(e,t,o,r,a){if(t==="innerHTML"||t==="textContent"){o!=null&&(e[t]=t==="innerHTML"?_F(o):o);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const s=i==="OPTION"?e.getAttribute("value")||"":e.value,l=o==null?e.type==="checkbox"?"on":"":String(o);(s!==l||!("_value"in e))&&(e.value=l),o==null&&e.removeAttribute(t),e._value=o;return}let n=!1;if(o===""||o==null){const s=typeof e[t];s==="boolean"?o=s8(o):o==null&&s==="string"?(o="",n=!0):s==="number"&&(o=0,n=!0)}try{e[t]=o}catch{}n&&e.removeAttribute(a||t)}function ql(e,t,o,r){e.addEventListener(t,o,r)}function tG(e,t,o,r){e.removeEventListener(t,o,r)}const cD=Symbol("_vei");function oG(e,t,o,r,a=null){const i=e[cD]||(e[cD]={}),n=i[t];if(r&&n)n.value=r;else{const[s,l]=aG(t);if(r){const u=i[t]=nG(r,a);ql(e,s,u,l)}else n&&(tG(e,s,n,l),i[t]=void 0)}}const uD=/(?:Once|Passive|Capture)$/;function aG(e){let t;if(uD.test(e)){t={};let r;for(;r=e.match(uD);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):on(e.slice(2)),t]}let ey=0;const rG=Promise.resolve(),iG=()=>ey||(rG.then(()=>ey=0),ey=Date.now());function nG(e,t){const o=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=o.attached)return;Mn(sG(r,o.value),t,5,[r])};return o.value=e,o.attached=iG(),o}function sG(e,t){if(Ot(t)){const o=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{o.call(e),e._stopped=!0},t.map(r=>a=>!a._stopped&&r&&r(a))}else return t}const dD=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,lG=(e,t,o,r,a,i)=>{const n=a==="svg";t==="class"?Kj(e,r,n):t==="style"?Zj(e,o,r):qd(t)?dw(t)||oG(e,t,o,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):cG(e,t,r,n))?(lD(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&sD(e,t,r,n,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!_o(r))?lD(e,Da(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),sD(e,t,r,n))};function cG(e,t,o,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&dD(t)&&ao(o));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const a=e.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return dD(t)&&_o(o)?!1:t in e}const fD={};/*! #__NO_SIDE_EFFECTS__ */function jw(e,t,o){const r=zd(e,t);s_(r)&&Ro(r,t);class a extends ch{constructor(n){super(r,n,o)}}return a.def=r,a}/*! #__NO_SIDE_EFFECTS__ */const IF=(e,t)=>jw(e,t,Yw),uG=typeof HTMLElement!="undefined"?HTMLElement:class{};class ch extends uG{constructor(t,o={},r=Pd){super(),this._def=t,this._props=o,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==Pd?this._root=this.shadowRoot:t.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let t=this;for(;t=t&&(t.parentNode||t.host);)if(t instanceof ch){this._parent=t;break}this._instance||(this._resolved?(this._setParent(),this._update()):t&&t._pendingResolve?this._pendingResolve=t._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(t=this._parent){t&&(this._instance.parent=t._instance,this._instance.provides=t._instance.provides)}disconnectedCallback(){this._connected=!1,Ao(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const a of r)this._setAttr(a.attributeName)}),this._ob.observe(this,{attributes:!0});const t=(r,a=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:i,styles:n}=r;let s;if(i&&!Ot(i))for(const l in i){const u=i[l];(u===Number||u&&u.type===Number)&&(l in this._props&&(this._props[l]=og(this._props[l])),(s||(s=Object.create(null)))[Da(l)]=!0)}this._numberProps=s,a&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(n),this._mount(r)},o=this._def.__asyncLoader;o?this._pendingResolve=o().then(r=>t(this._def=r,!0)):t(this._def)}_mount(t){this._app=this._createApp(t),t.configureApp&&t.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const o=this._instance&&this._instance.exposed;if(!!o)for(const r in o)oa(this,r)||Object.defineProperty(this,r,{get:()=>Ts(o[r])})}_resolveProps(t){const{props:o}=t,r=Ot(o)?o:Object.keys(o||{});for(const a of Object.keys(this))a[0]!=="_"&&r.includes(a)&&this._setProp(a,this[a]);for(const a of r.map(Da))Object.defineProperty(this,a,{get(){return this._getProp(a)},set(i){this._setProp(a,i,!0,!0)}})}_setAttr(t){if(t.startsWith("data-v-"))return;const o=this.hasAttribute(t);let r=o?this.getAttribute(t):fD;const a=Da(t);o&&this._numberProps&&this._numberProps[a]&&(r=og(r)),this._setProp(a,r,!1,!0)}_getProp(t){return this._props[t]}_setProp(t,o,r=!0,a=!1){if(o!==this._props[t]&&(o===fD?delete this._props[t]:(this._props[t]=o,t==="key"&&this._app&&(this._app._ceVNode.key=o)),a&&this._instance&&this._update(),r)){const i=this._ob;i&&i.disconnect(),o===!0?this.setAttribute(on(t),""):typeof o=="string"||typeof o=="number"?this.setAttribute(on(t),o+""):o||this.removeAttribute(on(t)),i&&i.observe(this,{attributes:!0})}}_update(){Kw(this._createVNode(),this._root)}_createVNode(){const t={};this.shadowRoot||(t.onVnodeMounted=t.onVnodeUpdated=this._renderSlots.bind(this));const o=h(this._def,Ro(t,this._props));return this._instance||(o.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const a=(i,n)=>{this.dispatchEvent(new CustomEvent(i,s_(n[0])?Ro({detail:n},n[0]):{detail:n}))};r.emit=(i,...n)=>{a(i,n),on(i)!==i&&a(on(i),n)},this._setParent()}),o}_applyStyles(t,o){if(!t)return;if(o){if(o===this._def||this._styleChildren.has(o))return;this._styleChildren.add(o)}const r=this._nonce;for(let a=t.length-1;a>=0;a--){const i=document.createElement("style");r&&i.setAttribute("nonce",r),i.textContent=t[a],this.shadowRoot.prepend(i)}}_parseSlots(){const t=this._slots={};let o;for(;o=this.firstChild;){const r=o.nodeType===1&&o.getAttribute("slot")||"default";(t[r]||(t[r]=[])).push(o),this.removeChild(o)}}_renderSlots(){const t=(this._teleportTarget||this).querySelectorAll("slot"),o=this._instance.type.__scopeId;for(let r=0;r<t.length;r++){const a=t[r],i=a.getAttribute("name")||"default",n=this._slots[i],s=a.parentNode;if(n)for(const l of n){if(o&&l.nodeType===1){const u=o+"-s",c=document.createTreeWalker(l,1);l.setAttribute(u,"");let d;for(;d=c.nextNode();)d.setAttribute(u,"")}s.insertBefore(l,a)}else for(;a.firstChild;)s.insertBefore(a.firstChild,a);s.removeChild(a)}}_injectChildStyle(t){this._applyStyles(t.styles,t)}_removeChildStyle(t){}}function Gw(e){const t=xt(),o=t&&t.ce;return o||null}function AF(){const e=Gw();return e&&e.shadowRoot}function TF(e="$style"){{const t=xt();if(!t)return Mo;const o=t.type.__cssModules;if(!o)return Mo;const r=o[e];return r||Mo}}const DF=new WeakMap,OF=new WeakMap,hg=Symbol("_moveCb"),mD=Symbol("_enterCb"),dG=e=>(delete e.props.mode,e),fG=dG({name:"TransitionGroup",props:Ro({},yF,{tag:String,moveClass:String}),setup(e,{slots:t}){const o=xt(),r=x_();let a,i;return km(()=>{if(!a.length)return;const n=e.moveClass||`${e.name||"v"}-move`;if(!vG(a[0].el,o.vnode.el,n))return;a.forEach(mG),a.forEach(pG);const s=a.filter(hG);Cx(),s.forEach(l=>{const u=l.el,c=u.style;js(u,n),c.transform=c.webkitTransform=c.transitionDuration="";const d=u[hg]=f=>{f&&f.target!==u||(!f||/transform$/.test(f.propertyName))&&(u.removeEventListener("transitionend",d),u[hg]=null,Ac(u,n))};u.addEventListener("transitionend",d)})}),()=>{const n=go(e),s=xF(n);let l=n.tag||Qe;if(a=[],i)for(let u=0;u<i.length;u++){const c=i[u];c.el&&c.el instanceof Element&&(a.push(c),nl(c,Td(c,s,r,o)),DF.set(c,c.el.getBoundingClientRect()))}i=t.default?th(t.default()):[];for(let u=0;u<i.length;u++){const c=i[u];c.key!=null&&nl(c,Td(c,s,r,o))}return h(l,null,i)}}}),Ww=fG;function mG(e){const t=e.el;t[hg]&&t[hg](),t[mD]&&t[mD]()}function pG(e){OF.set(e,e.el.getBoundingClientRect())}function hG(e){const t=DF.get(e),o=OF.get(e),r=t.left-o.left,a=t.top-o.top;if(r||a){const i=e.el.style;return i.transform=i.webkitTransform=`translate(${r}px,${a}px)`,i.transitionDuration="0s",e}}function vG(e,t,o){const r=e.cloneNode(),a=e[bm];a&&a.forEach(s=>{s.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),o.split(/\s+/).forEach(s=>s&&r.classList.add(s)),r.style.display="none";const i=t.nodeType===1?t:t.parentNode;i.appendChild(r);const{hasTransform:n}=CF(r);return i.removeChild(r),n}const cu=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Ot(t)?o=>Zf(t,o):t};function gG(e){e.target.composing=!0}function pD(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ns=Symbol("_assign"),Cp={created(e,{modifiers:{lazy:t,trim:o,number:r}},a){e[ns]=cu(a);const i=r||a.props&&a.props.type==="number";ql(e,t?"change":"input",n=>{if(n.target.composing)return;let s=e.value;o&&(s=s.trim()),i&&(s=tg(s)),e[ns](s)}),o&&ql(e,"change",()=>{e.value=e.value.trim()}),t||(ql(e,"compositionstart",gG),ql(e,"compositionend",pD),ql(e,"change",pD))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,oldValue:o,modifiers:{lazy:r,trim:a,number:i}},n){if(e[ns]=cu(n),e.composing)return;const s=(i||e.type==="number")&&!/^0\d/.test(e.value)?tg(e.value):e.value,l=t==null?"":t;s!==l&&(document.activeElement===e&&e.type!=="range"&&(r&&t===o||a&&e.value.trim()===l)||(e.value=l))}},mi={deep:!0,created(e,t,o){e[ns]=cu(o),ql(e,"change",()=>{const r=e._modelValue,a=ym(e),i=e.checked,n=e[ns];if(Ot(r)){const s=d_(r,a),l=s!==-1;if(i&&!l)n(r.concat(a));else if(!i&&l){const u=[...r];u.splice(s,1),n(u)}}else if(Ld(r)){const s=new Set(r);i?s.add(a):s.delete(a),n(s)}else n(PF(e,i))})},mounted:hD,beforeUpdate(e,t,o){e[ns]=cu(o),hD(e,t,o)}};function hD(e,{value:t,oldValue:o},r){e._modelValue=t;let a;if(Ot(t))a=d_(t,r.props.value)>-1;else if(Ld(t))a=t.has(r.props.value);else{if(t===o)return;a=lu(t,PF(e,!0))}e.checked!==a&&(e.checked=a)}const I_={created(e,{value:t},o){e.checked=lu(t,o.props.value),e[ns]=cu(o),ql(e,"change",()=>{e[ns](ym(e))})},beforeUpdate(e,{value:t,oldValue:o},r){e[ns]=cu(r),t!==o&&(e.checked=lu(t,r.props.value))}},Qw={deep:!0,created(e,{value:t,modifiers:{number:o}},r){const a=Ld(t);ql(e,"change",()=>{const i=Array.prototype.filter.call(e.options,n=>n.selected).map(n=>o?tg(ym(n)):ym(n));e[ns](e.multiple?a?new Set(i):i:i[0]),e._assigning=!0,Ao(()=>{e._assigning=!1})}),e[ns]=cu(r)},mounted(e,{value:t}){vD(e,t)},beforeUpdate(e,t,o){e[ns]=cu(o)},updated(e,{value:t}){e._assigning||vD(e,t)}};function vD(e,t){const o=e.multiple,r=Ot(t);if(!(o&&!r&&!Ld(t))){for(let a=0,i=e.options.length;a<i;a++){const n=e.options[a],s=ym(n);if(o)if(r){const l=typeof s;l==="string"||l==="number"?n.selected=t.some(u=>String(u)===String(s)):n.selected=d_(t,s)>-1}else n.selected=t.has(s);else if(lu(ym(n),t)){e.selectedIndex!==a&&(e.selectedIndex=a);return}}!o&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function ym(e){return"_value"in e?e._value:e.value}function PF(e,t){const o=t?"_trueValue":"_falseValue";return o in e?e[o]:t}const Xw={created(e,t,o){$1(e,t,o,null,"created")},mounted(e,t,o){$1(e,t,o,null,"mounted")},beforeUpdate(e,t,o,r){$1(e,t,o,r,"beforeUpdate")},updated(e,t,o,r){$1(e,t,o,r,"updated")}};function FF(e,t){switch(e){case"SELECT":return Qw;case"TEXTAREA":return Cp;default:switch(t){case"checkbox":return mi;case"radio":return I_;default:return Cp}}}function $1(e,t,o,r,a){const n=FF(e.tagName,o.props&&o.props.type)[a];n&&n(e,t,o,r)}function _G(){Cp.getSSRProps=({value:e})=>({value:e}),I_.getSSRProps=({value:e},t)=>{if(t.props&&lu(t.props.value,e))return{checked:!0}},mi.getSSRProps=({value:e},t)=>{if(Ot(e)){if(t.props&&d_(e,t.props.value)>-1)return{checked:!0}}else if(Ld(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},Xw.getSSRProps=(e,t)=>{if(typeof t.type!="string")return;const o=FF(t.type.toUpperCase(),t.props&&t.props.type);if(o.getSSRProps)return o.getSSRProps(e,t)}}const bG=["ctrl","shift","alt","meta"],yG={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>bG.some(o=>e[`${o}Key`]&&!t.includes(o))},rt=(e,t)=>{const o=e._withMods||(e._withMods={}),r=t.join(".");return o[r]||(o[r]=(a,...i)=>{for(let n=0;n<t.length;n++){const s=yG[t[n]];if(s&&s(a,t))return}return e(a,...i)})},xG={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},jr=(e,t)=>{const o=e._withKeys||(e._withKeys={}),r=t.join(".");return o[r]||(o[r]=a=>{if(!("key"in a))return;const i=on(a.key);if(t.some(n=>n===i||xG[n]===i))return e(a)})},MF=Ro({patchProp:lG},Gj);let ap,gD=!1;function NF(){return ap||(ap=kw(MF))}function kF(){return ap=gD?ap:Rw(MF),gD=!0,ap}const Kw=(...e)=>{NF().render(...e)},RF=(...e)=>{kF().hydrate(...e)},Pd=(...e)=>{const t=NF().createApp(...e),{mount:o}=t;return t.mount=r=>{const a=BF(r);if(!a)return;const i=t._component;!ao(i)&&!i.render&&!i.template&&(i.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const n=o(a,!1,VF(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),n},t},Yw=(...e)=>{const t=kF().createApp(...e),{mount:o}=t;return t.mount=r=>{const a=BF(r);if(a)return o(a,!0,VF(a))},t};function VF(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function BF(e){return _o(e)?document.querySelector(e):e}let _D=!1;const qF=()=>{_D||(_D=!0,_G(),Yj())};var CG=Object.freeze(Object.defineProperty({__proto__:null,Transition:Or,TransitionGroup:Ww,VueElement:ch,createApp:Pd,createSSRApp:Yw,defineCustomElement:jw,defineSSRCustomElement:IF,hydrate:RF,initDirectivesForSSR:qF,render:Kw,useCssModule:TF,useCssVars:SF,useHost:Gw,useShadowRoot:AF,vModelCheckbox:mi,vModelDynamic:Xw,vModelRadio:I_,vModelSelect:Qw,vModelText:Cp,vShow:Eo,withKeys:jr,withModifiers:rt,EffectScope:f_,ReactiveEffect:vm,TrackOpTypes:R8,TriggerOpTypes:V8,customRef:bw,effect:g8,effectScope:u8,getCurrentScope:hw,getCurrentWatcher:B8,isProxy:eh,isReactive:jl,isReadonly:Jl,isRef:br,isShallow:sn,markRaw:$d,onScopeDispose:d8,onWatcherCleanup:yw,proxyRefs:b_,reactive:rs,readonly:v_,ref:Ue,shallowReactive:Zp,shallowReadonly:D8,shallowRef:__,stop:_8,toRaw:go,toRef:N8,toRefs:M8,toValue:F8,triggerRef:P8,unref:Ts,camelize:Da,capitalize:gu,normalizeClass:Li,normalizeProps:u_,normalizeStyle:_u,toDisplayString:le,toHandlerKey:md,BaseTransition:ww,BaseTransitionPropsValidators:C_,Comment:ur,DeprecationTypes:gF,ErrorCodes:$8,ErrorTypeStrings:dF,Fragment:Qe,KeepAlive:Sw,Static:tu,Suspense:Q9,Teleport:Cw,Text:Gl,assertNumber:L8,callWithAsyncErrorHandling:Mn,callWithErrorHandling:Ud,cloneVNode:Ps,compatUtils:vF,computed:j,createBlock:oe,createCommentVNode:ie,createElementBlock:be,createElementVNode:A,createHydrationRenderer:Rw,createPropsRestProxy:S9,createRenderer:kw,createSlots:rh,createStaticVNode:tF,createTextVNode:K,createVNode:h,defineAsyncComponent:l9,defineComponent:zd,defineEmits:p9,defineExpose:h9,defineModel:_9,defineOptions:v9,defineProps:m9,defineSlots:g9,devtools:fF,getCurrentInstance:xt,getTransitionRawChildren:th,guardReactiveProps:sh,h:G,handleError:xu,hasInjectionContext:D9,hydrateOnIdle:r9,hydrateOnInteraction:s9,hydrateOnMediaQuery:n9,hydrateOnVisible:i9,initCustomFormatter:lF,inject:kr,isMemoSame:zw,isRuntimeOnly:iF,isVNode:sl,mergeDefaults:w9,mergeModels:E9,mergeProps:ou,nextTick:Ao,onActivated:ac,onBeforeMount:Mm,onBeforeUnmount:Vo,onBeforeUpdate:Nm,onDeactivated:Bs,onErrorCaptured:Dw,onMounted:Va,onRenderTracked:Tw,onRenderTriggered:Aw,onServerPrefetch:Iw,onUnmounted:Hd,onUpdated:km,openBlock:B,popScopeId:W8,provide:rl,pushScopeId:G8,queuePostFlushCb:gm,registerRuntimeCompiler:Uw,renderList:qt,renderSlot:ih,resolveComponent:Ve,resolveDirective:ah,resolveDynamicComponent:d9,resolveFilter:hF,resolveTransitionHooks:Td,setBlockTracking:ug,setDevtoolsHook:mF,setTransitionHooks:nl,ssrContextKey:Bw,ssrUtils:pF,toHandlers:f9,transformVNodeArgs:Z9,useAttrs:x9,useId:o9,useModel:j9,useSSRContext:qw,useSlots:y9,useTemplateRef:a9,useTransitionState:x_,version:Hw,warn:uF,watch:ct,watchEffect:U9,watchPostEffect:z9,watchSyncEffect:Lw,withAsyncContext:I9,withCtx:C,withDefaults:b9,withDirectives:Ee,withMemo:cF,withScopeId:Q8},Symbol.toStringTag,{value:"Module"}));/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const wG=()=>{};var EG=Object.freeze(Object.defineProperty({__proto__:null,compile:wG,EffectScope:f_,ReactiveEffect:vm,TrackOpTypes:R8,TriggerOpTypes:V8,customRef:bw,effect:g8,effectScope:u8,getCurrentScope:hw,getCurrentWatcher:B8,isProxy:eh,isReactive:jl,isReadonly:Jl,isRef:br,isShallow:sn,markRaw:$d,onScopeDispose:d8,onWatcherCleanup:yw,proxyRefs:b_,reactive:rs,readonly:v_,ref:Ue,shallowReactive:Zp,shallowReadonly:D8,shallowRef:__,stop:_8,toRaw:go,toRef:N8,toRefs:M8,toValue:F8,triggerRef:P8,unref:Ts,camelize:Da,capitalize:gu,normalizeClass:Li,normalizeProps:u_,normalizeStyle:_u,toDisplayString:le,toHandlerKey:md,BaseTransition:ww,BaseTransitionPropsValidators:C_,Comment:ur,DeprecationTypes:gF,ErrorCodes:$8,ErrorTypeStrings:dF,Fragment:Qe,KeepAlive:Sw,Static:tu,Suspense:Q9,Teleport:Cw,Text:Gl,assertNumber:L8,callWithAsyncErrorHandling:Mn,callWithErrorHandling:Ud,cloneVNode:Ps,compatUtils:vF,computed:j,createBlock:oe,createCommentVNode:ie,createElementBlock:be,createElementVNode:A,createHydrationRenderer:Rw,createPropsRestProxy:S9,createRenderer:kw,createSlots:rh,createStaticVNode:tF,createTextVNode:K,createVNode:h,defineAsyncComponent:l9,defineComponent:zd,defineEmits:p9,defineExpose:h9,defineModel:_9,defineOptions:v9,defineProps:m9,defineSlots:g9,devtools:fF,getCurrentInstance:xt,getTransitionRawChildren:th,guardReactiveProps:sh,h:G,handleError:xu,hasInjectionContext:D9,hydrateOnIdle:r9,hydrateOnInteraction:s9,hydrateOnMediaQuery:n9,hydrateOnVisible:i9,initCustomFormatter:lF,inject:kr,isMemoSame:zw,isRuntimeOnly:iF,isVNode:sl,mergeDefaults:w9,mergeModels:E9,mergeProps:ou,nextTick:Ao,onActivated:ac,onBeforeMount:Mm,onBeforeUnmount:Vo,onBeforeUpdate:Nm,onDeactivated:Bs,onErrorCaptured:Dw,onMounted:Va,onRenderTracked:Tw,onRenderTriggered:Aw,onServerPrefetch:Iw,onUnmounted:Hd,onUpdated:km,openBlock:B,popScopeId:W8,provide:rl,pushScopeId:G8,queuePostFlushCb:gm,registerRuntimeCompiler:Uw,renderList:qt,renderSlot:ih,resolveComponent:Ve,resolveDirective:ah,resolveDynamicComponent:d9,resolveFilter:hF,resolveTransitionHooks:Td,setBlockTracking:ug,setDevtoolsHook:mF,setTransitionHooks:nl,ssrContextKey:Bw,ssrUtils:pF,toHandlers:f9,transformVNodeArgs:Z9,useAttrs:x9,useId:o9,useModel:j9,useSSRContext:qw,useSlots:y9,useTemplateRef:a9,useTransitionState:x_,version:Hw,warn:uF,watch:ct,watchEffect:U9,watchPostEffect:z9,watchSyncEffect:Lw,withAsyncContext:I9,withCtx:C,withDefaults:b9,withDirectives:Ee,withMemo:cF,withScopeId:Q8,Transition:Or,TransitionGroup:Ww,VueElement:ch,createApp:Pd,createSSRApp:Yw,defineCustomElement:jw,defineSSRCustomElement:IF,hydrate:RF,initDirectivesForSSR:qF,render:Kw,useCssModule:TF,useCssVars:SF,useHost:Gw,useShadowRoot:AF,vModelCheckbox:mi,vModelDynamic:Xw,vModelRadio:I_,vModelSelect:Qw,vModelText:Cp,vShow:Eo,withKeys:jr,withModifiers:rt},Symbol.toStringTag,{value:"Module"}));function an(e,t,o,r){return Object.defineProperty(e,t,{get:o,set:r,enumerable:!0}),e}function SG(e,t){for(const o in t)an(e,o,t[o]);return e}const ss=Ue(!1);let Ex;function IG(e,t){const o=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(vivaldi)[\/]([\w.]+)/.exec(e)||/(chrome|crios)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(e)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(e)||/(firefox|fxios)[\/]([\w.]+)/.exec(e)||/(webkit)[\/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(e)||[];return{browser:o[5]||o[3]||o[1]||"",version:o[4]||o[2]||"0",platform:t[0]||""}}function AG(e){return/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(silk)/.exec(e)||/(android)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||/(playbook)/.exec(e)||/(bb)/.exec(e)||/(blackberry)/.exec(e)||[]}const LF="ontouchstart"in window||window.navigator.maxTouchPoints>0;function TG(e){const t=e.toLowerCase(),o=AG(t),r=IG(t,o),a={};r.browser&&(a[r.browser]=!0,a.version=r.version,a.versionNumber=parseInt(r.version,10)),r.platform&&(a[r.platform]=!0);const i=a.android||a.ios||a.bb||a.blackberry||a.ipad||a.iphone||a.ipod||a.kindle||a.playbook||a.silk||a["windows phone"];if(i===!0||t.indexOf("mobile")!==-1?a.mobile=!0:a.desktop=!0,a["windows phone"]&&(a.winphone=!0,delete a["windows phone"]),a.edga||a.edgios||a.edg?(a.edge=!0,r.browser="edge"):a.crios?(a.chrome=!0,r.browser="chrome"):a.fxios&&(a.firefox=!0,r.browser="firefox"),(a.ipod||a.ipad||a.iphone)&&(a.ios=!0),a.vivaldi&&(r.browser="vivaldi",a.vivaldi=!0),(a.chrome||a.opr||a.safari||a.vivaldi||a.mobile===!0&&a.ios!==!0&&i!==!0)&&(a.webkit=!0),a.opr&&(r.browser="opera",a.opera=!0),a.safari&&(a.blackberry||a.bb?(r.browser="blackberry",a.blackberry=!0):a.playbook?(r.browser="playbook",a.playbook=!0):a.android?(r.browser="android",a.android=!0):a.kindle?(r.browser="kindle",a.kindle=!0):a.silk&&(r.browser="silk",a.silk=!0)),a.name=r.browser,a.platform=r.platform,t.indexOf("electron")!==-1)a.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)a.bex=!0;else{if(window.Capacitor!==void 0?(a.capacitor=!0,a.nativeMobile=!0,a.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(a.cordova=!0,a.nativeMobile=!0,a.nativeMobileWrapper="cordova"),ss.value===!0&&(Ex={is:{...a}}),LF===!0&&a.mac===!0&&(a.desktop===!0&&a.safari===!0||a.nativeMobile===!0&&a.android!==!0&&a.ios!==!0&&a.ipad!==!0)){delete a.mac,delete a.desktop;const n=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(a,{mobile:!0,ios:!0,platform:n,[n]:!0})}a.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete a.desktop,a.mobile=!0)}return a}const bD=navigator.userAgent||navigator.vendor||window.opera,DG={has:{touch:!1,webStorage:!1},within:{iframe:!1}},Ho={userAgent:bD,is:TG(bD),has:{touch:LF},within:{iframe:window.self!==window.top}},vg={install(e){const{$q:t}=e;ss.value===!0?(e.onSSRHydrated.push(()=>{Object.assign(t.platform,Ho),ss.value=!1}),t.platform=rs(this)):t.platform=this}};{let e;an(Ho.has,"webStorage",()=>{if(e!==void 0)return e;try{if(window.localStorage)return e=!0,!0}catch{}return e=!1,!1}),Object.assign(vg,Ho),ss.value===!0&&(Object.assign(vg,Ex,DG),Ex=null)}function Ct(e){return $d(zd(e))}function uh(e){return $d(e)}const dh=(e,t)=>{const o=rs(e);for(const r in e)an(t,r,()=>o[r],a=>{o[r]=a});return t},er={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const e=Object.defineProperty({},"passive",{get(){Object.assign(er,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,e),window.removeEventListener("qtest",null,e)}catch{}function Fs(){}function Jw(e){return e.button===0}function ls(e){return e.touches&&e.touches[0]?e=e.touches[0]:e.changedTouches&&e.changedTouches[0]?e=e.changedTouches[0]:e.targetTouches&&e.targetTouches[0]&&(e=e.targetTouches[0]),{top:e.clientY,left:e.clientX}}function OG(e){if(e.path)return e.path;if(e.composedPath)return e.composedPath();const t=[];let o=e.target;for(;o;){if(t.push(o),o.tagName==="HTML")return t.push(document),t.push(window),t;o=o.parentElement}}function en(e){e.stopPropagation()}function Vi(e){e.cancelable!==!1&&e.preventDefault()}function zo(e){e.cancelable!==!1&&e.preventDefault(),e.stopPropagation()}function om(e,t){if(e===void 0||t===!0&&e.__dragPrevented===!0)return;const o=t===!0?r=>{r.__dragPrevented=!0,r.addEventListener("dragstart",Vi,er.notPassiveCapture)}:r=>{delete r.__dragPrevented,r.removeEventListener("dragstart",Vi,er.notPassiveCapture)};e.querySelectorAll("a, img").forEach(o)}function Ir(e,t,o){const r=`__q_${t}_evt`;e[r]=e[r]!==void 0?e[r].concat(o):o,o.forEach(a=>{a[0].addEventListener(a[1],e[a[2]],er[a[3]])})}function Fn(e,t){const o=`__q_${t}_evt`;e[o]!==void 0&&(e[o].forEach(r=>{r[0].removeEventListener(r[1],e[r[2]],er[r[3]])}),e[o]=void 0)}function A_(e,t=250,o){let r=null;function a(){const i=arguments,n=()=>{r=null,o!==!0&&e.apply(this,i)};r!==null?clearTimeout(r):o===!0&&e.apply(this,i),r=setTimeout(n,t)}return a.cancel=()=>{r!==null&&clearTimeout(r)},a}const ty=["sm","md","lg","xl"],{passive:yD}=er;var $F=dh({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:Fs,setDebounce:Fs,install({$q:e,onSSRHydrated:t}){if(e.screen=this,this.__installed===!0){e.config.screen!==void 0&&(e.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:o}=window,r=o||window,a=document.scrollingElement||document.documentElement,i=o===void 0||Ho.is.mobile===!0?()=>[Math.max(window.innerWidth,a.clientWidth),Math.max(window.innerHeight,a.clientHeight)]:()=>[o.width*o.scale+window.innerWidth-a.clientWidth,o.height*o.scale+window.innerHeight-a.clientHeight],n=e.config.screen!==void 0&&e.config.screen.bodyClasses===!0;this.__update=d=>{const[f,m]=i();if(m!==this.height&&(this.height=m),f!==this.width)this.width=f;else if(d!==!0)return;let p=this.sizes;this.gt.xs=f>=p.sm,this.gt.sm=f>=p.md,this.gt.md=f>=p.lg,this.gt.lg=f>=p.xl,this.lt.sm=f<p.sm,this.lt.md=f<p.md,this.lt.lg=f<p.lg,this.lt.xl=f<p.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,p=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",p!==this.name&&(n===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${p}`)),this.name=p)};let s,l={},u=16;this.setSizes=d=>{ty.forEach(f=>{d[f]!==void 0&&(l[f]=d[f])})},this.setDebounce=d=>{u=d};const c=()=>{const d=getComputedStyle(document.body);d.getPropertyValue("--q-size-sm")&&ty.forEach(f=>{this.sizes[f]=parseInt(d.getPropertyValue(`--q-size-${f}`),10)}),this.setSizes=f=>{ty.forEach(m=>{f[m]&&(this.sizes[m]=f[m])}),this.__update(!0)},this.setDebounce=f=>{s!==void 0&&r.removeEventListener("resize",s,yD),s=f>0?A_(this.__update,f):this.__update,r.addEventListener("resize",s,yD)},this.setDebounce(u),Object.keys(l).length!==0?(this.setSizes(l),l=void 0):this.__update(),n===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};ss.value===!0?t.push(c):c()}});const di=dh({isActive:!1,mode:!1},{__media:void 0,set(e){di.mode=e,e==="auto"?(di.__media===void 0&&(di.__media=window.matchMedia("(prefers-color-scheme: dark)"),di.__updateMedia=()=>{di.set("auto")},di.__media.addListener(di.__updateMedia)),e=di.__media.matches):di.__media!==void 0&&(di.__media.removeListener(di.__updateMedia),di.__media=void 0),di.isActive=e===!0,document.body.classList.remove(`body--${e===!0?"light":"dark"}`),document.body.classList.add(`body--${e===!0?"dark":"light"}`)},toggle(){di.set(di.isActive===!1)},install({$q:e,ssrContext:t}){const{dark:o}=e.config;e.dark=this,this.__installed!==!0&&this.set(o!==void 0?o:!1)}});function PG(e,t,o=document.body){if(typeof e!="string")throw new TypeError("Expected a string as propName");if(typeof t!="string")throw new TypeError("Expected a string as value");if(!(o instanceof Element))throw new TypeError("Expected a DOM element");o.style.setProperty(`--q-${e}`,t)}let UF=!1;function FG(e){UF=e.isComposing===!0}function T_(e){return UF===!0||e!==Object(e)||e.isComposing===!0||e.qKeyEvent===!0}function cs(e,t){return T_(e)===!0?!1:[].concat(t).includes(e.keyCode)}function zF(e){if(e.ios===!0)return"ios";if(e.android===!0)return"android"}function MG({is:e,has:t,within:o},r){const a=[e.desktop===!0?"desktop":"mobile",`${t.touch===!1?"no-":""}touch`];if(e.mobile===!0){const i=zF(e);i!==void 0&&a.push("platform-"+i)}if(e.nativeMobile===!0){const i=e.nativeMobileWrapper;a.push(i),a.push("native-mobile"),e.ios===!0&&(r[i]===void 0||r[i].iosStatusBarPadding!==!1)&&a.push("q-ios-padding")}else e.electron===!0?a.push("electron"):e.bex===!0&&a.push("bex");return o.iframe===!0&&a.push("within-iframe"),a}function NG(){const{is:e}=Ho,t=document.body.className,o=new Set(t.replace(/ {2}/g," ").split(" "));if(e.nativeMobile!==!0&&e.electron!==!0&&e.bex!==!0){if(e.desktop===!0)o.delete("mobile"),o.delete("platform-ios"),o.delete("platform-android"),o.add("desktop");else if(e.mobile===!0){o.delete("desktop"),o.add("mobile"),o.delete("platform-ios"),o.delete("platform-android");const a=zF(e);a!==void 0&&o.add(`platform-${a}`)}}Ho.has.touch===!0&&(o.delete("no-touch"),o.add("touch")),Ho.within.iframe===!0&&o.add("within-iframe");const r=Array.from(o).join(" ");t!==r&&(document.body.className=r)}function kG(e){for(const t in e)PG(t,e[t])}var RG={install(e){if(this.__installed!==!0){if(ss.value===!0)NG();else{const{$q:t}=e;t.config.brand!==void 0&&kG(t.config.brand);const o=MG(Ho,t.config);document.body.classList.add.apply(document.body.classList,o)}Ho.is.ios===!0&&document.body.addEventListener("touchstart",Fs),window.addEventListener("keydown",FG,!0)}}};const HF=()=>!0;function VG(e){return typeof e=="string"&&e!==""&&e!=="/"&&e!=="#/"}function BG(e){return e.startsWith("#")===!0&&(e=e.substring(1)),e.startsWith("/")===!1&&(e="/"+e),e.endsWith("/")===!0&&(e=e.substring(0,e.length-1)),"#"+e}function qG(e){if(e.backButtonExit===!1)return()=>!1;if(e.backButtonExit==="*")return HF;const t=["#/"];return Array.isArray(e.backButtonExit)===!0&&t.push(...e.backButtonExit.filter(VG).map(BG)),()=>t.includes(window.location.hash)}var wp={__history:[],add:Fs,remove:Fs,install({$q:e}){if(this.__installed===!0)return;const{cordova:t,capacitor:o}=Ho.is;if(t!==!0&&o!==!0)return;const r=e.config[t===!0?"cordova":"capacitor"];if(r!==void 0&&r.backButton===!1||o===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=n=>{n.condition===void 0&&(n.condition=HF),this.__history.push(n)},this.remove=n=>{const s=this.__history.indexOf(n);s>=0&&this.__history.splice(s,1)};const a=qG(Object.assign({backButtonExit:!0},r)),i=()=>{if(this.__history.length){const n=this.__history[this.__history.length-1];n.condition()===!0&&(this.__history.pop(),n.handler())}else a()===!0?navigator.app.exitApp():window.history.back()};t===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",i,!1)}):window.Capacitor.Plugins.App.addListener("backButton",i)}},Sx={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:e=>e?`Expand "${e}"`:"Expand",collapse:e=>e?`Collapse "${e}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days"},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:e=>e===1?"1 record selected.":(e===0?"No":e)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(e,t,o)=>e+"-"+t+" of "+o,columns:"Columns"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function xD(){const e=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof e=="string")return e.split(/[-_]/).map((t,o)=>o===0?t.toLowerCase():o>1||t.length<4?t.toUpperCase():t[0].toUpperCase()+t.slice(1).toLowerCase()).join("-")}const Ks=dh({__qLang:{}},{getLocale:xD,set(e=Sx,t){const o={...e,rtl:e.rtl===!0,getLocale:xD};{if(o.set=Ks.set,Ks.__langConfig===void 0||Ks.__langConfig.noHtmlAttrs!==!0){const r=document.documentElement;r.setAttribute("dir",o.rtl===!0?"rtl":"ltr"),r.setAttribute("lang",o.isoName)}Object.assign(Ks.__qLang,o)}},install({$q:e,lang:t,ssrContext:o}){e.lang=Ks.__qLang,Ks.__langConfig=e.config.lang,this.__installed===!0?t!==void 0&&this.set(t):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys(r){return Reflect.ownKeys(r).filter(a=>a!=="set"&&a!=="getLocale")}}),this.set(t||Sx))}});var LG={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}};const gg=dh({iconMapFn:null,__qIconSet:{}},{set(e,t){const o={...e};o.set=gg.set,Object.assign(gg.__qIconSet,o)},install({$q:e,iconSet:t,ssrContext:o}){e.config.iconMapFn!==void 0&&(this.iconMapFn=e.config.iconMapFn),e.iconSet=this.__qIconSet,an(e,"iconMapFn",()=>this.iconMapFn,r=>{this.iconMapFn=r}),this.__installed===!0?t!==void 0&&this.set(t):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys(r){return Reflect.ownKeys(r).filter(a=>a!=="set")}}),this.set(t||LG))}}),$G="_q_",Rm="_q_l_",jF="_q_pc_",jke="_q_f_",GF="_q_fo_",WF="_q_tabs_",Gke="_q_u_";function cr(){}const _g={};let QF=!1;function UG(){QF=!0}function Ys(e,t){if(e===t)return!0;if(e!==null&&t!==null&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;let o,r;if(e.constructor===Array){if(o=e.length,o!==t.length)return!1;for(r=o;r--!==0;)if(Ys(e[r],t[r])!==!0)return!1;return!0}if(e.constructor===Map){if(e.size!==t.size)return!1;let i=e.entries();for(r=i.next();r.done!==!0;){if(t.has(r.value[0])!==!0)return!1;r=i.next()}for(i=e.entries(),r=i.next();r.done!==!0;){if(Ys(r.value[1],t.get(r.value[0]))!==!0)return!1;r=i.next()}return!0}if(e.constructor===Set){if(e.size!==t.size)return!1;const i=e.entries();for(r=i.next();r.done!==!0;){if(t.has(r.value[0])!==!0)return!1;r=i.next()}return!0}if(e.buffer!=null&&e.buffer.constructor===ArrayBuffer){if(o=e.length,o!==t.length)return!1;for(r=o;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const a=Object.keys(e).filter(i=>e[i]!==void 0);if(o=a.length,o!==Object.keys(t).filter(i=>t[i]!==void 0).length)return!1;for(r=o;r--!==0;){const i=a[r];if(Ys(e[i],t[i])!==!0)return!1}return!0}return e!==e&&t!==t}function ei(e){return e!==null&&typeof e=="object"&&Array.isArray(e)!==!0}function bg(e){return Object.prototype.toString.call(e)==="[object Date]"}function Ep(e){return typeof e=="number"&&isFinite(e)}const CD=[vg,RG,di,$F,wp,Ks,gg];function Zw(e,t){const o=Pd(e);o.config.globalProperties=t.config.globalProperties;const{reload:r,...a}=t._context;return Object.assign(o._context,a),o}function wD(e,t){t.forEach(o=>{o.install(e),o.__installed=!0})}function zG(e,t,o){e.config.globalProperties.$q=o.$q,e.provide($G,o.$q),wD(o,CD),t.components!==void 0&&Object.values(t.components).forEach(r=>{ei(r)===!0&&r.name!==void 0&&e.component(r.name,r)}),t.directives!==void 0&&Object.values(t.directives).forEach(r=>{ei(r)===!0&&r.name!==void 0&&e.directive(r.name,r)}),t.plugins!==void 0&&wD(o,Object.values(t.plugins).filter(r=>typeof r.install=="function"&&CD.includes(r)===!1)),ss.value===!0&&(o.$q.onSSRHydrated=()=>{o.onSSRHydrated.forEach(r=>{r()}),o.$q.onSSRHydrated=()=>{}})}var HG=function(e,t={}){const o={version:"2.16.4"};QF===!1?(t.config!==void 0&&Object.assign(_g,t.config),o.config={..._g},UG()):o.config=t.config||{},zG(e,t,{parentApp:e,$q:o,lang:t.lang,iconSet:t.iconSet,onSSRHydrated:[]})},jG={name:"Quasar",version:"2.16.4",install:HG,lang:Ks,iconSet:gg};function Ix(e,t){const o=e.style;for(const r in t)o[r]=t[r]}function GG(e){if(e==null)return;if(typeof e=="string")try{return document.querySelector(e)||void 0}catch{return}const t=Ts(e);if(t)return t.$el||t}function XF(e,t){if(e==null||e.contains(t)===!0)return!0;for(let o=e.nextElementSibling;o!==null;o=o.nextElementSibling)if(o.contains(t))return!0;return!1}const D_=[Element,String],WG=[null,document,document.body,document.scrollingElement,document.documentElement];function O_(e,t){let o=GG(t);if(o===void 0){if(e==null)return window;o=e.closest(".scroll,.scroll-y,.overflow-auto")}return WG.includes(o)?window:o}function eE(e){return e===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:e.scrollTop}function tE(e){return e===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:e.scrollLeft}function KF(e,t,o=0){const r=arguments[3]===void 0?performance.now():arguments[3],a=eE(e);if(o<=0){a!==t&&Ax(e,t);return}requestAnimationFrame(i=>{const n=i-r,s=a+(t-a)/Math.max(n,o)*n;Ax(e,s),s!==t&&KF(e,t,o-n,i)})}function YF(e,t,o=0){const r=arguments[3]===void 0?performance.now():arguments[3],a=tE(e);if(o<=0){a!==t&&Tx(e,t);return}requestAnimationFrame(i=>{const n=i-r,s=a+(t-a)/Math.max(n,o)*n;Tx(e,s),s!==t&&YF(e,t,o-n,i)})}function Ax(e,t){if(e===window){window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t);return}e.scrollTop=t}function Tx(e,t){if(e===window){window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0);return}e.scrollLeft=t}function ED(e,t,o){if(o){KF(e,t,o);return}Ax(e,t)}function oy(e,t,o){if(o){YF(e,t,o);return}Tx(e,t)}let U1;function Dv(){if(U1!==void 0)return U1;const e=document.createElement("p"),t=document.createElement("div");Ix(e,{width:"100%",height:"200px"}),Ix(t,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);const o=e.offsetWidth;t.style.overflow="scroll";let r=e.offsetWidth;return o===r&&(r=t.clientWidth),t.remove(),U1=o-r,U1}function QG(e,t=!0){return!e||e.nodeType!==Node.ELEMENT_NODE?!1:t?e.scrollHeight>e.clientHeight&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-y"])):e.scrollWidth>e.clientWidth&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-x"]))}const{passive:SD}=er,XG=["both","horizontal","vertical"];var JF=Ct({name:"QScrollObserver",props:{axis:{type:String,validator:e=>XG.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:D_},emits:["scroll"],setup(e,{emit:t}){const o={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let r=null,a,i;ct(()=>e.scrollTarget,()=>{l(),s()});function n(){r!==null&&r();const d=Math.max(0,eE(a)),f=tE(a),m={top:d-o.position.top,left:f-o.position.left};if(e.axis==="vertical"&&m.top===0||e.axis==="horizontal"&&m.left===0)return;const p=Math.abs(m.top)>=Math.abs(m.left)?m.top<0?"up":"down":m.left<0?"left":"right";o.position={top:d,left:f},o.directionChanged=o.direction!==p,o.delta=m,o.directionChanged===!0&&(o.direction=p,o.inflectionPoint=o.position),t("scroll",{...o})}function s(){a=O_(i,e.scrollTarget),a.addEventListener("scroll",u,SD),u(!0)}function l(){a!==void 0&&(a.removeEventListener("scroll",u,SD),a=void 0)}function u(d){if(d===!0||e.debounce===0||e.debounce==="0")n();else if(r===null){const[f,m]=e.debounce?[setTimeout(n,e.debounce),clearTimeout]:[requestAnimationFrame(n),cancelAnimationFrame];r=()=>{m(f),r=null}}}const{proxy:c}=xt();return ct(()=>c.$q.lang.rtl,n),Va(()=>{i=c.$el.parentNode,s()}),Vo(()=>{r!==null&&r(),l()}),Object.assign(c,{trigger:u,getPosition:()=>o}),Fs}});function KG(){const e=Ue(!ss.value);return e.value===!1&&Va(()=>{e.value=!0}),{isHydrated:e}}const ZF=typeof ResizeObserver!="undefined",ID=ZF===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"};var fr=Ct({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(e,{emit:t}){let o=null,r,a={width:-1,height:-1};function i(l){l===!0||e.debounce===0||e.debounce==="0"?n():o===null&&(o=setTimeout(n,e.debounce))}function n(){if(o!==null&&(clearTimeout(o),o=null),r){const{offsetWidth:l,offsetHeight:u}=r;(l!==a.width||u!==a.height)&&(a={width:l,height:u},t("resize",a))}}const{proxy:s}=xt();if(s.trigger=i,ZF===!0){let l;const u=c=>{r=s.$el.parentNode,r?(l=new ResizeObserver(i),l.observe(r),n()):c!==!0&&Ao(()=>{u(!0)})};return Va(()=>{u()}),Vo(()=>{o!==null&&clearTimeout(o),l!==void 0&&(l.disconnect!==void 0?l.disconnect():r&&l.unobserve(r))}),Fs}else{let c=function(){o!==null&&(clearTimeout(o),o=null),u!==void 0&&(u.removeEventListener!==void 0&&u.removeEventListener("resize",i,er.passive),u=void 0)},d=function(){c(),r&&r.contentDocument&&(u=r.contentDocument.defaultView,u.addEventListener("resize",i,er.passive),n())};const{isHydrated:l}=KG();let u;return Va(()=>{Ao(()=>{r=s.$el,r&&d()})}),Vo(c),()=>{if(l.value===!0)return G("object",{class:"q--avoid-card-border",style:ID.style,tabindex:-1,type:"text/html",data:ID.url,"aria-hidden":"true",onLoad:d})}}}});function uo(e,t){return e!==void 0&&e()||t}function oE(e,t){if(e!==void 0){const o=e();if(o!=null)return o.slice()}return t}function Mr(e,t){return e!==void 0?t.concat(e()):t}function e5(e,t){return e===void 0?t:t!==void 0?t.concat(e()):e()}function Fd(e,t,o,r,a,i){t.key=r+a;const n=G(e,t,o);return a===!0?Ee(n,i()):n}var To=Ct({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:t,emit:o}){const{proxy:{$q:r}}=xt(),a=Ue(null),i=Ue(r.screen.height),n=Ue(e.container===!0?0:r.screen.width),s=Ue({position:0,direction:"down",inflectionPoint:0}),l=Ue(0),u=Ue(ss.value===!0?0:Dv()),c=j(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),d=j(()=>e.container===!1?{minHeight:r.screen.height+"px"}:null),f=j(()=>u.value!==0?{[r.lang.rtl===!0?"left":"right"]:`${u.value}px`}:null),m=j(()=>u.value!==0?{[r.lang.rtl===!0?"right":"left"]:0,[r.lang.rtl===!0?"left":"right"]:`-${u.value}px`,width:`calc(100% + ${u.value}px)`}:null);function p(w){if(e.container===!0||document.qScrollPrevented!==!0){const S={position:w.position.top,direction:w.direction,directionChanged:w.directionChanged,inflectionPoint:w.inflectionPoint.top,delta:w.delta.top};s.value=S,e.onScroll!==void 0&&o("scroll",S)}}function v(w){const{height:S,width:D}=w;let M=!1;i.value!==S&&(M=!0,i.value=S,e.onScrollHeight!==void 0&&o("scrollHeight",S),x()),n.value!==D&&(M=!0,n.value=D),M===!0&&e.onResize!==void 0&&o("resize",w)}function g({height:w}){l.value!==w&&(l.value=w,x())}function x(){if(e.container===!0){const w=i.value>l.value?Dv():0;u.value!==w&&(u.value=w)}}let b=null;const _={instances:{},view:j(()=>e.view),isContainer:j(()=>e.container),rootRef:a,height:i,containerHeight:l,scrollbarWidth:u,totalWidth:j(()=>n.value+u.value),rows:j(()=>{const w=e.view.toLowerCase().split(" ");return{top:w[0].split(""),middle:w[1].split(""),bottom:w[2].split("")}}),header:rs({size:0,offset:0,space:!1}),right:rs({size:300,offset:0,space:!1}),footer:rs({size:0,offset:0,space:!1}),left:rs({size:300,offset:0,space:!1}),scroll:s,animate(){b!==null?clearTimeout(b):document.body.classList.add("q-body--layout-animate"),b=setTimeout(()=>{b=null,document.body.classList.remove("q-body--layout-animate")},155)},update(w,S,D){_[w][S]=D}};if(rl(Rm,_),Dv()>0){let D=function(){w=null,S.classList.remove("hide-scrollbar")},M=function(){if(w===null){if(S.scrollHeight>r.screen.height)return;S.classList.add("hide-scrollbar")}else clearTimeout(w);w=setTimeout(D,300)},O=function(T){w!==null&&T==="remove"&&(clearTimeout(w),D()),window[`${T}EventListener`]("resize",M)},w=null;const S=document.body;ct(()=>e.container!==!0?"add":"remove",O),e.container!==!0&&O("add"),Hd(()=>{O("remove")})}return()=>{const w=Mr(t.default,[G(JF,{onScroll:p}),G(fr,{onResize:v})]),S=G("div",{class:c.value,style:d.value,ref:e.container===!0?void 0:a,tabindex:-1},w);return e.container===!0?G("div",{class:"q-layout-container overflow-hidden",ref:a},[G(fr,{onResize:g}),G("div",{class:"absolute-full",style:f.value},[G("div",{class:"scroll",style:m.value},[S])])]):S}}});function YG(e){const t=document.getElementById(e);return{width:t==null?void 0:t.offsetWidth,height:t==null?void 0:t.offsetHeight}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Lo=function(){return Lo=Object.assign||function(t){for(var o,r=1,a=arguments.length;r<a;r++){o=arguments[r];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},Lo.apply(this,arguments)};function Dx(e,t,o){if(o||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var ka=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,yr=Object.keys,yi=Array.isArray;typeof Promise!="undefined"&&!ka.Promise&&(ka.Promise=Promise);function $i(e,t){return typeof t!="object"||yr(t).forEach(function(o){e[o]=t[o]}),e}var Sp=Object.getPrototypeOf,JG={}.hasOwnProperty;function Nn(e,t){return JG.call(e,t)}function xm(e,t){typeof t=="function"&&(t=t(Sp(e))),(typeof Reflect=="undefined"?yr:Reflect.ownKeys)(t).forEach(function(o){Zl(e,o,t[o])})}var t5=Object.defineProperty;function Zl(e,t,o,r){t5(e,t,$i(o&&Nn(o,"get")&&typeof o.get=="function"?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},r))}function Vm(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Zl(e.prototype,"constructor",e),{extend:xm.bind(null,e.prototype)}}}}var ZG=Object.getOwnPropertyDescriptor;function aE(e,t){var o=ZG(e,t),r;return o||(r=Sp(e))&&aE(r,t)}var eW=[].slice;function P_(e,t,o){return eW.call(e,t,o)}function o5(e,t){return t(e)}function L0(e){if(!e)throw new Error("Assertion Failed")}function a5(e){ka.setImmediate?setImmediate(e):setTimeout(e,0)}function r5(e,t){return e.reduce(function(o,r,a){var i=t(r,a);return i&&(o[i[0]]=i[1]),o},{})}function tW(e,t,o){try{e.apply(null,o)}catch(r){t&&t(r)}}function Wl(e,t){if(Nn(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var o=[],r=0,a=t.length;r<a;++r){var i=Wl(e,t[r]);o.push(i)}return o}var n=t.indexOf(".");if(n!==-1){var s=e[t.substr(0,n)];return s===void 0?void 0:Wl(s,t.substr(n+1))}}function Ds(e,t,o){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){L0(typeof o!="string"&&"length"in o);for(var r=0,a=t.length;r<a;++r)Ds(e,t[r],o[r])}else{var i=t.indexOf(".");if(i!==-1){var n=t.substr(0,i),s=t.substr(i+1);if(s==="")o===void 0?yi(e)&&!isNaN(parseInt(n))?e.splice(n,1):delete e[n]:e[n]=o;else{var l=e[n];(!l||!Nn(e,n))&&(l=e[n]={}),Ds(l,s,o)}}else o===void 0?yi(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=o}}function oW(e,t){typeof t=="string"?Ds(e,t,void 0):"length"in t&&[].map.call(t,function(o){Ds(e,o,void 0)})}function i5(e){var t={};for(var o in e)Nn(e,o)&&(t[o]=e[o]);return t}var aW=[].concat;function n5(e){return aW.apply([],e)}var s5="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(n5([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return ka[e]}),rW=s5.map(function(e){return ka[e]});r5(s5,function(e){return[e,!0]});var qc=null;function fh(e){qc=typeof WeakMap!="undefined"&&new WeakMap;var t=Ox(e);return qc=null,t}function Ox(e){if(!e||typeof e!="object")return e;var t=qc&&qc.get(e);if(t)return t;if(yi(e)){t=[],qc&&qc.set(e,t);for(var o=0,r=e.length;o<r;++o)t.push(Ox(e[o]))}else if(rW.indexOf(e.constructor)>=0)t=e;else{var a=Sp(e);t=a===Object.prototype?{}:Object.create(a),qc&&qc.set(e,t);for(var i in e)Nn(e,i)&&(t[i]=Ox(e[i]))}return t}var iW={}.toString;function Px(e){return iW.call(e).slice(8,-1)}var Fx=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator",nW=typeof Fx=="symbol"?function(e){var t;return e!=null&&(t=e[Fx])&&t.apply(e)}:function(){return null},Lf={};function Ll(e){var t,o,r,a;if(arguments.length===1){if(yi(e))return e.slice();if(this===Lf&&typeof e=="string")return[e];if(a=nW(e)){for(o=[];r=a.next(),!r.done;)o.push(r.value);return o}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(o=new Array(t);t--;)o[t]=e[t];return o}return[e]}for(t=arguments.length,o=new Array(t);t--;)o[t]=arguments[t];return o}var rE=typeof Symbol!="undefined"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ul=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function l5(e,t){ul=e,c5=t}var c5=function(){return!0},sW=!new Error("").stack;function jd(){if(sW)try{throw jd.arguments,new Error}catch(e){return e}return new Error}function Mx(e,t){var o=e.stack;return o?(t=t||0,o.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),o.split(`
`).slice(t).filter(c5).map(function(r){return`
`+r}).join("")):""}var lW=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],u5=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],iE=lW.concat(u5),cW={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Bm(e,t){this._e=jd(),this.name=e,this.message=t}Vm(Bm).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Mx(this._e,2))}},toString:function(){return this.name+": "+this.message}});function d5(e,t){return e+". Errors: "+Object.keys(t).map(function(o){return t[o].toString()}).filter(function(o,r,a){return a.indexOf(o)===r}).join(`
`)}function yg(e,t,o,r){this._e=jd(),this.failures=t,this.failedKeys=r,this.successCount=o,this.message=d5(e,t)}Vm(yg).from(Bm);function rp(e,t){this._e=jd(),this.name="BulkError",this.failures=Object.keys(t).map(function(o){return t[o]}),this.failuresByPos=t,this.message=d5(e,t)}Vm(rp).from(Bm);var nE=iE.reduce(function(e,t){return e[t]=t+"Error",e},{}),uW=Bm,co=iE.reduce(function(e,t){var o=t+"Error";function r(a,i){this._e=jd(),this.name=o,a?typeof a=="string"?(this.message=""+a+(i?`
 `+i:""),this.inner=i||null):typeof a=="object"&&(this.message=a.name+" "+a.message,this.inner=a):(this.message=cW[t]||o,this.inner=null)}return Vm(r).from(uW),e[t]=r,e},{});co.Syntax=SyntaxError;co.Type=TypeError;co.Range=RangeError;var AD=u5.reduce(function(e,t){return e[t+"Error"]=co[t],e},{});function dW(e,t){if(!e||e instanceof Bm||e instanceof TypeError||e instanceof SyntaxError||!e.name||!AD[e.name])return e;var o=new AD[e.name](t||e.message,e);return"stack"in e&&Zl(o,"stack",{get:function(){return this.inner.stack}}),o}var F_=iE.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=co[t]),e},{});F_.ModifyError=yg;F_.DexieError=Bm;F_.BulkError=rp;function wa(){}function mh(e){return e}function fW(e,t){return e==null||e===mh?t:function(o){return t(e(o))}}function Md(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function mW(e,t){return e===wa?t:function(){var o=e.apply(this,arguments);o!==void 0&&(arguments[0]=o);var r=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Md(r,this.onsuccess):r),a&&(this.onerror=this.onerror?Md(a,this.onerror):a),i!==void 0?i:o}}function pW(e,t){return e===wa?t:function(){e.apply(this,arguments);var o=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?Md(o,this.onsuccess):o),r&&(this.onerror=this.onerror?Md(r,this.onerror):r)}}function hW(e,t){return e===wa?t:function(o){var r=e.apply(this,arguments);$i(o,r);var a=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var n=t.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?Md(a,this.onsuccess):a),i&&(this.onerror=this.onerror?Md(i,this.onerror):i),r===void 0?n===void 0?void 0:n:$i(r,n)}}function vW(e,t){return e===wa?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function sE(e,t){return e===wa?t:function(){var o=e.apply(this,arguments);if(o&&typeof o.then=="function"){for(var r=this,a=arguments.length,i=new Array(a);a--;)i[a]=arguments[a];return o.then(function(){return t.apply(r,i)})}return t.apply(this,arguments)}}var Ip={},gW=100,_W=20,f5=100,lE=typeof Promise=="undefined"?[]:function(){var e=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[e,Sp(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,Sp(t),e]}(),Nx=lE[0],xg=lE[1],kx=lE[2],m5=xg&&xg.then,Ov=Nx&&Nx.constructor,cE=!!kx,Rx=!1,bW=kx?function(){kx.then(z1)}:ka.setImmediate?setImmediate.bind(null,z1):ka.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){z1(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(z1,0)},Ap=function(e,t){$0.push([e,t]),Cg&&(bW(),Cg=!1)},Vx=!0,Cg=!0,vd=[],Pv=[],Bx=null,qx=mh,am={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:OD,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{OD(e[0],e[1])}catch{}})}},Jt=am,$0=[],gd=0,Fv=[];function Vt(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=wa,this._lib=!1;var t=this._PSD=Jt;if(ul&&(this._stackHolder=jd(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==Ip)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&$x(this,this._value);return}this._state=null,this._value=null,++t.ref,h5(this,e)}var Lx={get:function(){var e=Jt,t=wg;function o(r,a){var i=this,n=!e.global&&(e!==Jt||t!==wg),s=n&&!ec(),l=new Vt(function(u,c){uE(i,new p5(Sg(r,e,n,s),Sg(a,e,n,s),u,c,e))});return ul&&_5(l,this),l}return o.prototype=Ip,o},set:function(e){Zl(this,"then",e&&e.prototype===Ip?Lx:{get:function(){return e},set:Lx.set})}};xm(Vt.prototype,{then:Lx,_then:function(e,t){uE(this,new p5(null,null,e,t,Jt))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],o=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?o(r):Mv(r)}):this.then(null,function(r){return r&&r.name===t?o(r):Mv(r)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),Mv(t)})},stack:{get:function(){if(this._stack)return this._stack;try{Rx=!0;var e=g5(this,[],_W),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{Rx=!1}}},timeout:function(e,t){var o=this;return e<1/0?new Vt(function(r,a){var i=setTimeout(function(){return a(new co.Timeout(t))},e);o.then(r,a).finally(clearTimeout.bind(null,i))}):this}});typeof Symbol!="undefined"&&Symbol.toStringTag&&Zl(Vt.prototype,Symbol.toStringTag,"Dexie.Promise");am.env=b5();function p5(e,t,o,r,a){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=o,this.reject=r,this.psd=a}xm(Vt,{all:function(){var e=Ll.apply(null,arguments).map(Eg);return new Vt(function(t,o){e.length===0&&t([]);var r=e.length;e.forEach(function(a,i){return Vt.resolve(a).then(function(n){e[i]=n,--r||t(e)},o)})})},resolve:function(e){if(e instanceof Vt)return e;if(e&&typeof e.then=="function")return new Vt(function(o,r){e.then(o,r)});var t=new Vt(Ip,!0,e);return _5(t,Bx),t},reject:Mv,race:function(){var e=Ll.apply(null,arguments).map(Eg);return new Vt(function(t,o){e.map(function(r){return Vt.resolve(r).then(t,o)})})},PSD:{get:function(){return Jt},set:function(e){return Jt=e}},totalEchoes:{get:function(){return wg}},newPSD:uu,usePSD:Lm,scheduler:{get:function(){return Ap},set:function(e){Ap=e}},rejectionMapper:{get:function(){return qx},set:function(e){qx=e}},follow:function(e,t){return new Vt(function(o,r){return uu(function(a,i){var n=Jt;n.unhandleds=[],n.onunhandled=i,n.finalize=Md(function(){var s=this;xW(function(){s.unhandleds.length===0?a():i(s.unhandleds[0])})},n.finalize),e()},t,o,r)})}});Ov&&(Ov.allSettled&&Zl(Vt,"allSettled",function(){var e=Ll.apply(null,arguments).map(Eg);return new Vt(function(t){e.length===0&&t([]);var o=e.length,r=new Array(o);e.forEach(function(a,i){return Vt.resolve(a).then(function(n){return r[i]={status:"fulfilled",value:n}},function(n){return r[i]={status:"rejected",reason:n}}).then(function(){return--o||t(r)})})})}),Ov.any&&typeof AggregateError!="undefined"&&Zl(Vt,"any",function(){var e=Ll.apply(null,arguments).map(Eg);return new Vt(function(t,o){e.length===0&&o(new AggregateError([]));var r=e.length,a=new Array(r);e.forEach(function(i,n){return Vt.resolve(i).then(function(s){return t(s)},function(s){a[n]=s,--r||o(new AggregateError(a))})})})}));function h5(e,t){try{t(function(o){if(e._state===null){if(o===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&ph();o&&typeof o.then=="function"?h5(e,function(a,i){o instanceof Vt?o._then(a,i):o.then(a,i)}):(e._state=!0,e._value=o,v5(e)),r&&hh()}},$x.bind(null,e))}catch(o){$x(e,o)}}function $x(e,t){if(Pv.push(t),e._state===null){var o=e._lib&&ph();t=qx(t),e._state=!1,e._value=t,ul&&t!==null&&typeof t=="object"&&!t._promise&&tW(function(){var r=aE(t,"stack");t._promise=e,Zl(t,"stack",{get:function(){return Rx?r&&(r.get?r.get.apply(t):r.value):e.stack}})}),CW(e),v5(e),o&&hh()}}function v5(e){var t=e._listeners;e._listeners=[];for(var o=0,r=t.length;o<r;++o)uE(e,t[o]);var a=e._PSD;--a.ref||a.finalize(),gd===0&&(++gd,Ap(function(){--gd===0&&dE()},[]))}function uE(e,t){if(e._state===null){e._listeners.push(t);return}var o=e._state?t.onFulfilled:t.onRejected;if(o===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++gd,Ap(yW,[o,e,t])}function yW(e,t,o){try{Bx=t;var r,a=t._value;t._state?r=e(a):(Pv.length&&(Pv=[]),r=e(a),Pv.indexOf(a)===-1&&wW(t)),o.resolve(r)}catch(i){o.reject(i)}finally{Bx=null,--gd===0&&dE(),--o.psd.ref||o.psd.finalize()}}function g5(e,t,o){if(t.length===o)return t;var r="";if(e._state===!1){var a=e._value,i,n;a!=null?(i=a.name||"Error",n=a.message||a,r=Mx(a,0)):(i=a,n=""),t.push(i+(n?": "+n:"")+r)}return ul&&(r=Mx(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&g5(e._prev,t,o)),t}function _5(e,t){var o=t?t._numPrev+1:0;o<gW&&(e._prev=t,e._numPrev=o)}function z1(){ph()&&hh()}function ph(){var e=Vx;return Vx=!1,Cg=!1,e}function hh(){var e,t,o;do for(;$0.length>0;)for(e=$0,$0=[],o=e.length,t=0;t<o;++t){var r=e[t];r[0].apply(null,r[1])}while($0.length>0);Vx=!0,Cg=!0}function dE(){var e=vd;vd=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=Fv.slice(0),o=t.length;o;)t[--o]()}function xW(e){function t(){e(),Fv.splice(Fv.indexOf(t),1)}Fv.push(t),++gd,Ap(function(){--gd===0&&dE()},[])}function CW(e){vd.some(function(t){return t._value===e._value})||vd.push(e)}function wW(e){for(var t=vd.length;t;)if(vd[--t]._value===e._value){vd.splice(t,1);return}}function Mv(e){return new Vt(Ip,!1,e)}function Ga(e,t){var o=Jt;return function(){var r=ph(),a=Jt;try{return du(o,!0),e.apply(this,arguments)}catch(i){t&&t(i)}finally{du(a,!1),r&&hh()}}}var _i={awaits:0,echoes:0,id:0},EW=0,Nv=[],ay=0,wg=0,SW=0;function uu(e,t,o,r){var a=Jt,i=Object.create(a);i.parent=a,i.ref=0,i.global=!1,i.id=++SW;var n=am.env;i.env=cE?{Promise:Vt,PromiseProp:{value:Vt,configurable:!0,writable:!0},all:Vt.all,race:Vt.race,allSettled:Vt.allSettled,any:Vt.any,resolve:Vt.resolve,reject:Vt.reject,nthen:TD(n.nthen,i),gthen:TD(n.gthen,i)}:{},t&&$i(i,t),++a.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=Lm(i,e,o,r);return i.ref===0&&i.finalize(),s}function qm(){return _i.id||(_i.id=++EW),++_i.awaits,_i.echoes+=f5,_i.id}function ec(){return _i.awaits?(--_i.awaits===0&&(_i.id=0),_i.echoes=_i.awaits*f5,!0):!1}(""+m5).indexOf("[native code]")===-1&&(qm=ec=wa);function Eg(e){return _i.echoes&&e&&e.constructor===Ov?(qm(),e.then(function(t){return ec(),t},function(t){return ec(),Rr(t)})):e}function IW(e){++wg,(!_i.echoes||--_i.echoes===0)&&(_i.echoes=_i.id=0),Nv.push(Jt),du(e,!0)}function AW(){var e=Nv[Nv.length-1];Nv.pop(),du(e,!1)}function du(e,t){var o=Jt;if((t?_i.echoes&&(!ay++||e!==Jt):ay&&(!--ay||e!==Jt))&&y5(t?IW.bind(null,e):AW),e!==Jt&&(Jt=e,o===am&&(am.env=b5()),cE)){var r=am.env.Promise,a=e.env;xg.then=a.nthen,r.prototype.then=a.gthen,(o.global||e.global)&&(Object.defineProperty(ka,"Promise",a.PromiseProp),r.all=a.all,r.race=a.race,r.resolve=a.resolve,r.reject=a.reject,a.allSettled&&(r.allSettled=a.allSettled),a.any&&(r.any=a.any))}}function b5(){var e=ka.Promise;return cE?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(ka,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:xg.then,gthen:e.prototype.then}:{}}function Lm(e,t,o,r,a){var i=Jt;try{return du(e,!0),t(o,r,a)}finally{du(i,!1)}}function y5(e){m5.call(Nx,e)}function Sg(e,t,o,r){return typeof e!="function"?e:function(){var a=Jt;o&&qm(),du(t,!0);try{return e.apply(this,arguments)}finally{du(a,!1),r&&y5(ec)}}}function TD(e,t){return function(o,r){return e.call(this,Sg(o,t),Sg(r,t))}}var DD="unhandledrejection";function OD(e,t){var o;try{o=t.onuncatched(e)}catch{}if(o!==!1)try{var r,a={promise:t,reason:e};if(ka.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(DD,!0,!0),$i(r,a)):ka.CustomEvent&&(r=new CustomEvent(DD,{detail:a}),$i(r,a)),r&&ka.dispatchEvent&&(dispatchEvent(r),!ka.PromiseRejectionEvent&&ka.onunhandledrejection))try{ka.onunhandledrejection(r)}catch{}ul&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch{}}var Rr=Vt.reject;function Ux(e,t,o,r){if(!e.idbdb||!e._state.openComplete&&!Jt.letThrough&&!e._vip){if(e._state.openComplete)return Rr(new co.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return Rr(new co.DatabaseClosed);e.open().catch(wa)}return e._state.dbReadyPromise.then(function(){return Ux(e,t,o,r)})}else{var a=e._createTransaction(t,o,e._dbSchema);try{a.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===nE.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return Ux(e,t,o,r)})):Rr(i)}return a._promise(t,function(i,n){return uu(function(){return Jt.trans=a,r(i,n,a)})}).then(function(i){return a._completion.then(function(){return i})})}}var PD="3.2.4",ad=String.fromCharCode(65535),zx=-1/0,Sl="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",x5="String expected.",ip=[],M_=typeof navigator!="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),TW=M_,DW=M_,C5=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},N_="__dbnames",ry="readonly",iy="readwrite";function Nd(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var w5={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function H1(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=fh(t),delete t[e]),t}:function(t){return t}}var OW=function(){function e(){}return e.prototype._trans=function(t,o,r){var a=this._tx||Jt.trans,i=this.name;function n(l,u,c){if(!c.schema[i])throw new co.NotFound("Table "+i+" not part of transaction");return o(c.idbtrans,c)}var s=ph();try{return a&&a.db===this.db?a===Jt.trans?a._promise(t,n,r):uu(function(){return a._promise(t,n,r)},{trans:a,transless:Jt.transless||Jt}):Ux(this.db,t,[this.name],n)}finally{s&&hh()}},e.prototype.get=function(t,o){var r=this;return t&&t.constructor===Object?this.where(t).first(o):this._trans("readonly",function(a){return r.core.get({trans:a,key:t}).then(function(i){return r.hook.reading.fire(i)})}).then(o)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(yi(t))return new this.db.WhereClause(this,"["+t.join("+")+"]");var o=yr(t);if(o.length===1)return this.where(o[0]).equals(t[o[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(c){return c.compound&&o.every(function(d){return c.keyPath.indexOf(d)>=0})&&c.keyPath.every(function(d){return o.indexOf(d)>=0})})[0];if(r&&this.db._maxKey!==ad)return this.where(r.name).equals(r.keyPath.map(function(c){return t[c]}));!r&&ul&&console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a "+("compound index ["+o.join("+")+"]"));var a=this.schema.idxByName,i=this.db._deps.indexedDB;function n(c,d){try{return i.cmp(c,d)===0}catch{return!1}}var s=o.reduce(function(c,d){var f=c[0],m=c[1],p=a[d],v=t[d];return[f||p,f||!p?Nd(m,p&&p.multi?function(g){var x=Wl(g,d);return yi(x)&&x.some(function(b){return n(v,b)})}:function(g){return n(v,Wl(g,d))}):m]},[null,null]),l=s[0],u=s[1];return l?this.where(l.name).equals(t[l.keyPath]).filter(u):r?this.filter(u):this.where(o).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,yi(t)?"["+t.join("+")+"]":t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){this.schema.mappedClass=t;var o=function(r){if(!r)return r;var a=Object.create(t.prototype);for(var i in r)if(Nn(r,i))try{a[i]=r[i]}catch{}return a};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=o,this.hook("reading",o),t},e.prototype.defineClass=function(){function t(o){$i(this,o)}return this.mapToClass(t)},e.prototype.add=function(t,o){var r=this,a=this.schema.primKey,i=a.auto,n=a.keyPath,s=t;return n&&i&&(s=H1(n)(t)),this._trans("readwrite",function(l){return r.core.mutate({trans:l,type:"add",keys:o!=null?[o]:null,values:[s]})}).then(function(l){return l.numFailures?Vt.reject(l.failures[0]):l.lastResult}).then(function(l){if(n)try{Ds(t,n,l)}catch{}return l})},e.prototype.update=function(t,o){if(typeof t=="object"&&!yi(t)){var r=Wl(t,this.schema.primKey.keyPath);if(r===void 0)return Rr(new co.InvalidArgument("Given object does not contain its primary key"));try{typeof o!="function"?yr(o).forEach(function(a){Ds(t,a,o[a])}):o(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(o)}else return this.where(":id").equals(t).modify(o)},e.prototype.put=function(t,o){var r=this,a=this.schema.primKey,i=a.auto,n=a.keyPath,s=t;return n&&i&&(s=H1(n)(t)),this._trans("readwrite",function(l){return r.core.mutate({trans:l,type:"put",values:[s],keys:o!=null?[o]:null})}).then(function(l){return l.numFailures?Vt.reject(l.failures[0]):l.lastResult}).then(function(l){if(n)try{Ds(t,n,l)}catch{}return l})},e.prototype.delete=function(t){var o=this;return this._trans("readwrite",function(r){return o.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?Vt.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(o){return t.core.mutate({trans:o,type:"deleteRange",range:w5})}).then(function(o){return o.numFailures?Vt.reject(o.failures[0]):void 0})},e.prototype.bulkGet=function(t){var o=this;return this._trans("readonly",function(r){return o.core.getMany({keys:t,trans:r}).then(function(a){return a.map(function(i){return o.hook.reading.fire(i)})})})},e.prototype.bulkAdd=function(t,o,r){var a=this,i=Array.isArray(o)?o:void 0;r=r||(i?void 0:o);var n=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var l=a.schema.primKey,u=l.auto,c=l.keyPath;if(c&&i)throw new co.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new co.InvalidArgument("Arguments objects and keys must have the same length");var d=t.length,f=c&&u?t.map(H1(c)):t;return a.core.mutate({trans:s,type:"add",keys:i,values:f,wantResults:n}).then(function(m){var p=m.numFailures,v=m.results,g=m.lastResult,x=m.failures,b=n?v:g;if(p===0)return b;throw new rp(a.name+".bulkAdd(): "+p+" of "+d+" operations failed",x)})})},e.prototype.bulkPut=function(t,o,r){var a=this,i=Array.isArray(o)?o:void 0;r=r||(i?void 0:o);var n=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var l=a.schema.primKey,u=l.auto,c=l.keyPath;if(c&&i)throw new co.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new co.InvalidArgument("Arguments objects and keys must have the same length");var d=t.length,f=c&&u?t.map(H1(c)):t;return a.core.mutate({trans:s,type:"put",keys:i,values:f,wantResults:n}).then(function(m){var p=m.numFailures,v=m.results,g=m.lastResult,x=m.failures,b=n?v:g;if(p===0)return b;throw new rp(a.name+".bulkPut(): "+p+" of "+d+" operations failed",x)})})},e.prototype.bulkDelete=function(t){var o=this,r=t.length;return this._trans("readwrite",function(a){return o.core.mutate({trans:a,type:"delete",keys:t})}).then(function(a){var i=a.numFailures,n=a.lastResult,s=a.failures;if(i===0)return n;throw new rp(o.name+".bulkDelete(): "+i+" of "+r+" operations failed",s)})},e}();function vh(e){var t={},o=function(s,l){if(l){for(var u=arguments.length,c=new Array(u-1);--u;)c[u-1]=arguments[u];return t[s].subscribe.apply(null,c),e}else if(typeof s=="string")return t[s]};o.addEventType=i;for(var r=1,a=arguments.length;r<a;++r)i(arguments[r]);return o;function i(s,l,u){if(typeof s=="object")return n(s);l||(l=vW),u||(u=wa);var c={subscribers:[],fire:u,subscribe:function(d){c.subscribers.indexOf(d)===-1&&(c.subscribers.push(d),c.fire=l(c.fire,d))},unsubscribe:function(d){c.subscribers=c.subscribers.filter(function(f){return f!==d}),c.fire=c.subscribers.reduce(l,u)}};return t[s]=o[s]=c,c}function n(s){yr(s).forEach(function(l){var u=s[l];if(yi(u))i(l,s[l][0],s[l][1]);else if(u==="asap")var c=i(l,mh,function(){for(var f=arguments.length,m=new Array(f);f--;)m[f]=arguments[f];c.subscribers.forEach(function(p){a5(function(){p.apply(null,m)})})});else throw new co.InvalidArgument("Invalid event config")})}}function gh(e,t){return Vm(t).from({prototype:e}),t}function PW(e){return gh(OW.prototype,function(o,r,a){this.db=e,this._tx=a,this.name=o,this.schema=r,this.hook=e._allTables[o]?e._allTables[o].hook:vh(null,{creating:[mW,wa],reading:[fW,mh],updating:[hW,wa],deleting:[pW,wa]})})}function _f(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function ny(e,t){e.filter=Nd(e.filter,t)}function sy(e,t,o){var r=e.replayFilter;e.replayFilter=r?function(){return Nd(r(),t())}:t,e.justLimit=o&&!r}function FW(e,t){e.isMatch=Nd(e.isMatch,t)}function kv(e,t){if(e.isPrimKey)return t.primaryKey;var o=t.getIndexByKeyPath(e.index);if(!o)throw new co.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return o}function FD(e,t,o){var r=kv(e,t.schema);return t.openCursor({trans:o,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function j1(e,t,o,r){var a=e.replayFilter?Nd(e.filter,e.replayFilter()):e.filter;if(e.or){var i={},n=function(s,l,u){if(!a||a(l,u,function(f){return l.stop(f)},function(f){return l.fail(f)})){var c=l.primaryKey,d=""+c;d==="[object ArrayBuffer]"&&(d=""+new Uint8Array(c)),Nn(i,d)||(i[d]=!0,t(s,l,u))}};return Promise.all([e.or._iterate(n,o),MD(FD(e,r,o),e.algorithm,n,!e.keysOnly&&e.valueMapper)])}else return MD(FD(e,r,o),Nd(e.algorithm,a),t,!e.keysOnly&&e.valueMapper)}function MD(e,t,o,r){var a=r?function(n,s,l){return o(r(n),s,l)}:o,i=Ga(a);return e.then(function(n){if(n)return n.start(function(){var s=function(){return n.continue()};(!t||t(n,function(l){return s=l},function(l){n.stop(l),s=wa},function(l){n.fail(l),s=wa}))&&i(n.value,n,function(l){return s=l}),s()})})}function Bi(e,t){try{var o=ND(e),r=ND(t);if(o!==r)return o==="Array"?1:r==="Array"?-1:o==="binary"?1:r==="binary"?-1:o==="string"?1:r==="string"?-1:o==="Date"?1:r!=="Date"?NaN:-1;switch(o){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return NW(kD(e),kD(t));case"Array":return MW(e,t)}}catch{}return NaN}function MW(e,t){for(var o=e.length,r=t.length,a=o<r?o:r,i=0;i<a;++i){var n=Bi(e[i],t[i]);if(n!==0)return n}return o===r?0:o<r?-1:1}function NW(e,t){for(var o=e.length,r=t.length,a=o<r?o:r,i=0;i<a;++i)if(e[i]!==t[i])return e[i]<t[i]?-1:1;return o===r?0:o<r?-1:1}function ND(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var o=Px(e);return o==="ArrayBuffer"?"binary":o}function kD(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var kW=function(){function e(){}return e.prototype._read=function(t,o){var r=this._ctx;return r.error?r.table._trans(null,Rr.bind(null,r.error)):r.table._trans("readonly",t).then(o)},e.prototype._write=function(t){var o=this._ctx;return o.error?o.table._trans(null,Rr.bind(null,o.error)):o.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var o=this._ctx;o.algorithm=Nd(o.algorithm,t)},e.prototype._iterate=function(t,o){return j1(this._ctx,t,o,this._ctx.table.core)},e.prototype.clone=function(t){var o=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&$i(r,t),o._ctx=r,o},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var o=this._ctx;return this._read(function(r){return j1(o,t,r,o.table.core)})},e.prototype.count=function(t){var o=this;return this._read(function(r){var a=o._ctx,i=a.table.core;if(_f(a,!0))return i.count({trans:r,query:{index:kv(a,i.schema),range:a.range}}).then(function(s){return Math.min(s,a.limit)});var n=0;return j1(a,function(){return++n,!1},r,i).then(function(){return n})}).then(t)},e.prototype.sortBy=function(t,o){var r=t.split(".").reverse(),a=r[0],i=r.length-1;function n(u,c){return c?n(u[r[c]],c-1):u[a]}var s=this._ctx.dir==="next"?1:-1;function l(u,c){var d=n(u,i),f=n(c,i);return d<f?-s:d>f?s:0}return this.toArray(function(u){return u.sort(l)}).then(o)},e.prototype.toArray=function(t){var o=this;return this._read(function(r){var a=o._ctx;if(a.dir==="next"&&_f(a,!0)&&a.limit>0){var i=a.valueMapper,n=kv(a,a.table.core.schema);return a.table.core.query({trans:r,limit:a.limit,values:!0,query:{index:n,range:a.range}}).then(function(l){var u=l.result;return i?u.map(i):u})}else{var s=[];return j1(a,function(l){return s.push(l)},r,a.table.core).then(function(){return s})}},t)},e.prototype.offset=function(t){var o=this._ctx;return t<=0?this:(o.offset+=t,_f(o)?sy(o,function(){var r=t;return function(a,i){return r===0?!0:r===1?(--r,!1):(i(function(){a.advance(r),r=0}),!1)}}):sy(o,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),sy(this._ctx,function(){var o=t;return function(r,a,i){return--o<=0&&a(i),o>=0}},!0),this},e.prototype.until=function(t,o){return ny(this._ctx,function(r,a,i){return t(r.value)?(a(i),o):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(o){return o[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return ny(this._ctx,function(o){return t(o.value)}),FW(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(r,a){t(a.key,a)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(r,a){t(a.primaryKey,a)})},e.prototype.keys=function(t){var o=this._ctx;o.keysOnly=!o.isMatch;var r=[];return this.each(function(a,i){r.push(i.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var o=this._ctx;if(o.dir==="next"&&_f(o,!0)&&o.limit>0)return this._read(function(a){var i=kv(o,o.table.core.schema);return o.table.core.query({trans:a,values:!1,limit:o.limit,query:{index:i,range:o.range}})}).then(function(a){var i=a.result;return i}).then(t);o.keysOnly=!o.isMatch;var r=[];return this.each(function(a,i){r.push(i.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(o){return o[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,o=t.index&&t.table.schema.idxByName[t.index];if(!o||!o.multi)return this;var r={};return ny(this._ctx,function(a){var i=a.primaryKey.toString(),n=Nn(r,i);return r[i]=!0,!n}),this},e.prototype.modify=function(t){var o=this,r=this._ctx;return this._write(function(a){var i;if(typeof t=="function")i=t;else{var n=yr(t),s=n.length;i=function(x){for(var b=!1,_=0;_<s;++_){var w=n[_],S=t[w];Wl(x,w)!==S&&(Ds(x,w,S),b=!0)}return b}}var l=r.table.core,u=l.schema.primaryKey,c=u.outbound,d=u.extractKey,f=o.db._options.modifyChunkSize||200,m=[],p=0,v=[],g=function(x,b){var _=b.failures,w=b.numFailures;p+=x-w;for(var S=0,D=yr(_);S<D.length;S++){var M=D[S];m.push(_[M])}};return o.clone().primaryKeys().then(function(x){var b=function(_){var w=Math.min(f,x.length-_);return l.getMany({trans:a,keys:x.slice(_,_+w),cache:"immutable"}).then(function(S){for(var D=[],M=[],O=c?[]:null,T=[],I=0;I<w;++I){var N=S[I],P={value:fh(N),primKey:x[_+I]};i.call(P,P.value,P)!==!1&&(P.value==null?T.push(x[_+I]):!c&&Bi(d(N),d(P.value))!==0?(T.push(x[_+I]),D.push(P.value)):(M.push(P.value),c&&O.push(x[_+I])))}var F=_f(r)&&r.limit===1/0&&(typeof t!="function"||t===ly)&&{index:r.index,range:r.range};return Promise.resolve(D.length>0&&l.mutate({trans:a,type:"add",values:D}).then(function(L){for(var z in L.failures)T.splice(parseInt(z),1);g(D.length,L)})).then(function(){return(M.length>0||F&&typeof t=="object")&&l.mutate({trans:a,type:"put",keys:O,values:M,criteria:F,changeSpec:typeof t!="function"&&t}).then(function(L){return g(M.length,L)})}).then(function(){return(T.length>0||F&&t===ly)&&l.mutate({trans:a,type:"delete",keys:T,criteria:F}).then(function(L){return g(T.length,L)})}).then(function(){return x.length>_+w&&b(_+f)})})};return b(0).then(function(){if(m.length>0)throw new yg("Error modifying one or more objects",m,p,v);return x.length})})})},e.prototype.delete=function(){var t=this._ctx,o=t.range;return _f(t)&&(t.isPrimKey&&!DW||o.type===3)?this._write(function(r){var a=t.table.core.schema.primaryKey,i=o;return t.table.core.count({trans:r,query:{index:a,range:i}}).then(function(n){return t.table.core.mutate({trans:r,type:"deleteRange",range:i}).then(function(s){var l=s.failures;s.lastResult,s.results;var u=s.numFailures;if(u)throw new yg("Could not delete some values",Object.keys(l).map(function(c){return l[c]}),n-u);return n-u})})}):this.modify(ly)},e}(),ly=function(e,t){return t.value=null};function RW(e){return gh(kW.prototype,function(o,r){this.db=e;var a=w5,i=null;if(r)try{a=r()}catch(u){i=u}var n=o._ctx,s=n.table,l=s.hook.reading.fire;this._ctx={table:s,index:n.index,isPrimKey:!n.index||s.schema.primKey.keyPath&&n.index===s.schema.primKey.name,range:a,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:n.or,valueMapper:l!==mh?l:null}})}function VW(e,t){return e<t?-1:e===t?0:1}function BW(e,t){return e>t?-1:e===t?0:1}function Cn(e,t,o){var r=e instanceof S5?new e.Collection(e):e;return r._ctx.error=o?new o(t):new TypeError(t),r}function bf(e){return new e.Collection(e,function(){return E5("")}).limit(0)}function qW(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function LW(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function $W(e,t,o,r,a,i){for(var n=Math.min(e.length,r.length),s=-1,l=0;l<n;++l){var u=t[l];if(u!==r[l])return a(e[l],o[l])<0?e.substr(0,l)+o[l]+o.substr(l+1):a(e[l],r[l])<0?e.substr(0,l)+r[l]+o.substr(l+1):s>=0?e.substr(0,s)+t[s]+o.substr(s+1):null;a(e[l],u)<0&&(s=l)}return n<r.length&&i==="next"?e+o.substr(e.length):n<e.length&&i==="prev"?e.substr(0,o.length):s<0?null:e.substr(0,s)+r[s]+o.substr(s+1)}function G1(e,t,o,r){var a,i,n,s,l,u,c,d=o.length;if(!o.every(function(v){return typeof v=="string"}))return Cn(e,x5);function f(v){a=qW(v),i=LW(v),n=v==="next"?VW:BW;var g=o.map(function(x){return{lower:i(x),upper:a(x)}}).sort(function(x,b){return n(x.lower,b.lower)});s=g.map(function(x){return x.upper}),l=g.map(function(x){return x.lower}),u=v,c=v==="next"?"":r}f("next");var m=new e.Collection(e,function(){return Tc(s[0],l[d-1]+r)});m._ondirectionchange=function(v){f(v)};var p=0;return m._addAlgorithm(function(v,g,x){var b=v.key;if(typeof b!="string")return!1;var _=i(b);if(t(_,l,p))return!0;for(var w=null,S=p;S<d;++S){var D=$W(b,_,s[S],l[S],n,u);D===null&&w===null?p=S+1:(w===null||n(w,D)>0)&&(w=D)}return g(w!==null?function(){v.continue(w+c)}:x),!1}),m}function Tc(e,t,o,r){return{type:2,lower:e,upper:t,lowerOpen:o,upperOpen:r}}function E5(e){return{type:1,lower:e,upper:e}}var S5=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,o,r,a){r=r!==!1,a=a===!0;try{return this._cmp(t,o)>0||this._cmp(t,o)===0&&(r||a)&&!(r&&a)?bf(this):new this.Collection(this,function(){return Tc(t,o,!r,!a)})}catch{return Cn(this,Sl)}},e.prototype.equals=function(t){return t==null?Cn(this,Sl):new this.Collection(this,function(){return E5(t)})},e.prototype.above=function(t){return t==null?Cn(this,Sl):new this.Collection(this,function(){return Tc(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?Cn(this,Sl):new this.Collection(this,function(){return Tc(t,void 0,!1)})},e.prototype.below=function(t){return t==null?Cn(this,Sl):new this.Collection(this,function(){return Tc(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?Cn(this,Sl):new this.Collection(this,function(){return Tc(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?Cn(this,x5):this.between(t,t+ad,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):G1(this,function(o,r){return o.indexOf(r[0])===0},[t],ad)},e.prototype.equalsIgnoreCase=function(t){return G1(this,function(o,r){return o===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=Ll.apply(Lf,arguments);return t.length===0?bf(this):G1(this,function(o,r){return r.indexOf(o)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=Ll.apply(Lf,arguments);return t.length===0?bf(this):G1(this,function(o,r){return r.some(function(a){return o.indexOf(a)===0})},t,ad)},e.prototype.anyOf=function(){var t=this,o=Ll.apply(Lf,arguments),r=this._cmp;try{o.sort(r)}catch{return Cn(this,Sl)}if(o.length===0)return bf(this);var a=new this.Collection(this,function(){return Tc(o[0],o[o.length-1])});a._ondirectionchange=function(n){r=n==="next"?t._ascending:t._descending,o.sort(r)};var i=0;return a._addAlgorithm(function(n,s,l){for(var u=n.key;r(u,o[i])>0;)if(++i,i===o.length)return s(l),!1;return r(u,o[i])===0?!0:(s(function(){n.continue(o[i])}),!1)}),a},e.prototype.notEqual=function(t){return this.inAnyRange([[zx,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=Ll.apply(Lf,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Cn(this,Sl)}var o=t.reduce(function(r,a){return r?r.concat([[r[r.length-1][1],a]]):[[zx,a]]},null);return o.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(o,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,o){var r=this,a=this._cmp,i=this._ascending,n=this._descending,s=this._min,l=this._max;if(t.length===0)return bf(this);if(!t.every(function(S){return S[0]!==void 0&&S[1]!==void 0&&i(S[0],S[1])<=0}))return Cn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",co.InvalidArgument);var u=!o||o.includeLowers!==!1,c=o&&o.includeUppers===!0;function d(S,D){for(var M=0,O=S.length;M<O;++M){var T=S[M];if(a(D[0],T[1])<0&&a(D[1],T[0])>0){T[0]=s(T[0],D[0]),T[1]=l(T[1],D[1]);break}}return M===O&&S.push(D),S}var f=i;function m(S,D){return f(S[0],D[0])}var p;try{p=t.reduce(d,[]),p.sort(m)}catch{return Cn(this,Sl)}var v=0,g=c?function(S){return i(S,p[v][1])>0}:function(S){return i(S,p[v][1])>=0},x=u?function(S){return n(S,p[v][0])>0}:function(S){return n(S,p[v][0])>=0};function b(S){return!g(S)&&!x(S)}var _=g,w=new this.Collection(this,function(){return Tc(p[0][0],p[p.length-1][1],!u,!c)});return w._ondirectionchange=function(S){S==="next"?(_=g,f=i):(_=x,f=n),p.sort(m)},w._addAlgorithm(function(S,D,M){for(var O=S.key;_(O);)if(++v,v===p.length)return D(M),!1;return b(O)?!0:(r._cmp(O,p[v][1])===0||r._cmp(O,p[v][0])===0||D(function(){f===i?S.continue(p[v][0]):S.continue(p[v][1])}),!1)}),w},e.prototype.startsWithAnyOf=function(){var t=Ll.apply(Lf,arguments);return t.every(function(o){return typeof o=="string"})?t.length===0?bf(this):this.inAnyRange(t.map(function(o){return[o,o+ad]})):Cn(this,"startsWithAnyOf() only works with strings")},e}();function UW(e){return gh(S5.prototype,function(o,r,a){this.db=e,this._ctx={table:o,index:r===":id"?null:r,or:a};var i=e._deps.indexedDB;if(!i)throw new co.MissingAPI;this._cmp=this._ascending=i.cmp.bind(i),this._descending=function(n,s){return i.cmp(s,n)},this._max=function(n,s){return i.cmp(n,s)>0?n:s},this._min=function(n,s){return i.cmp(n,s)<0?n:s},this._IDBKeyRange=e._deps.IDBKeyRange})}function Xs(e){return Ga(function(t){return Tp(t),e(t.target.error),!1})}function Tp(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Dp="storagemutated",Gc="x-storagemutated-1",fu=vh(null,Dp),zW=function(){function e(){}return e.prototype._lock=function(){return L0(!Jt.global),++this._reculock,this._reculock===1&&!Jt.global&&(Jt.lockOwnerFor=this),this},e.prototype._unlock=function(){if(L0(!Jt.global),--this._reculock===0)for(Jt.global||(Jt.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Lm(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&Jt.lockOwnerFor!==this},e.prototype.create=function(t){var o=this;if(!this.mode)return this;var r=this.db.idbdb,a=this.db._state.dbOpenError;if(L0(!this.idbtrans),!t&&!r)switch(a&&a.name){case"DatabaseClosedError":throw new co.DatabaseClosed(a);case"MissingAPIError":throw new co.MissingAPI(a.message,a);default:throw new co.OpenFailed(a)}if(!this.active)throw new co.TransactionInactive;return L0(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=Ga(function(i){Tp(i),o._reject(t.error)}),t.onabort=Ga(function(i){Tp(i),o.active&&o._reject(new co.Abort(t.error)),o.active=!1,o.on("abort").fire(i)}),t.oncomplete=Ga(function(){o.active=!1,o._resolve(),"mutatedParts"in t&&fu.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,o,r){var a=this;if(t==="readwrite"&&this.mode!=="readwrite")return Rr(new co.ReadOnly("Transaction is readonly"));if(!this.active)return Rr(new co.TransactionInactive);if(this._locked())return new Vt(function(n,s){a._blockedFuncs.push([function(){a._promise(t,o,r).then(n,s)},Jt])});if(r)return uu(function(){var n=new Vt(function(s,l){a._lock();var u=o(s,l,a);u&&u.then&&u.then(s,l)});return n.finally(function(){return a._unlock()}),n._lib=!0,n});var i=new Vt(function(n,s){var l=o(n,s,a);l&&l.then&&l.then(n,s)});return i._lib=!0,i},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var o=this._root(),r=Vt.resolve(t);if(o._waitingFor)o._waitingFor=o._waitingFor.then(function(){return r});else{o._waitingFor=r,o._waitingQueue=[];var a=o.idbtrans.objectStore(o.storeNames[0]);(function n(){for(++o._spinCount;o._waitingQueue.length;)o._waitingQueue.shift()();o._waitingFor&&(a.get(-1/0).onsuccess=n)})()}var i=o._waitingFor;return new Vt(function(n,s){r.then(function(l){return o._waitingQueue.push(Ga(n.bind(null,l)))},function(l){return o._waitingQueue.push(Ga(s.bind(null,l)))}).finally(function(){o._waitingFor===i&&(o._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new co.Abort))},e.prototype.table=function(t){var o=this._memoizedTables||(this._memoizedTables={});if(Nn(o,t))return o[t];var r=this.schema[t];if(!r)throw new co.NotFound("Table "+t+" not part of transaction");var a=new this.db.Table(t,r,this);return a.core=this.db.core.table(t),o[t]=a,a},e}();function HW(e){return gh(zW.prototype,function(o,r,a,i,n){var s=this;this.db=e,this.mode=o,this.storeNames=r,this.schema=a,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=vh(this,"complete","error","abort"),this.parent=n||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Vt(function(l,u){s._resolve=l,s._reject=u}),this._completion.then(function(){s.active=!1,s.on.complete.fire()},function(l){var u=s.active;return s.active=!1,s.on.error.fire(l),s.parent?s.parent._reject(l):u&&s.idbtrans&&s.idbtrans.abort(),Rr(l)})})}function Hx(e,t,o,r,a,i,n){return{name:e,keyPath:t,unique:o,multi:r,auto:a,compound:i,src:(o&&!n?"&":"")+(r?"*":"")+(a?"++":"")+I5(t)}}function I5(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function A5(e,t,o){return{name:e,primKey:t,indexes:o,mappedClass:null,idxByName:r5(o,function(r){return[r.name,r]})}}function jW(e){return e.length===1?e[0]:e}var Op=function(e){try{return e.only([[]]),Op=function(){return[[]]},[[]]}catch{return Op=function(){return ad},ad}};function jx(e){return e==null?function(){}:typeof e=="string"?GW(e):function(t){return Wl(t,e)}}function GW(e){var t=e.split(".");return t.length===1?function(o){return o[e]}:function(o){return Wl(o,e)}}function RD(e){return[].slice.call(e)}var WW=0;function np(e){return e==null?":id":typeof e=="string"?e:"["+e.join("+")+"]"}function QW(e,t,o){function r(d,f){var m=RD(d.objectStoreNames);return{schema:{name:d.name,tables:m.map(function(p){return f.objectStore(p)}).map(function(p){var v=p.keyPath,g=p.autoIncrement,x=yi(v),b=v==null,_={},w={name:p.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:b,compound:x,keyPath:v,autoIncrement:g,unique:!0,extractKey:jx(v)},indexes:RD(p.indexNames).map(function(S){return p.index(S)}).map(function(S){var D=S.name,M=S.unique,O=S.multiEntry,T=S.keyPath,I=yi(T),N={name:D,compound:I,keyPath:T,unique:M,multiEntry:O,extractKey:jx(T)};return _[np(T)]=N,N}),getIndexByKeyPath:function(S){return _[np(S)]}};return _[":id"]=w.primaryKey,v!=null&&(_[np(v)]=w.primaryKey),w})},hasGetAll:m.length>0&&"getAll"in f.objectStore(m[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function a(d){if(d.type===3)return null;if(d.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var f=d.lower,m=d.upper,p=d.lowerOpen,v=d.upperOpen,g=f===void 0?m===void 0?null:t.upperBound(m,!!v):m===void 0?t.lowerBound(f,!!p):t.bound(f,m,!!p,!!v);return g}function i(d){var f=d.name;function m(g){var x=g.trans,b=g.type,_=g.keys,w=g.values,S=g.range;return new Promise(function(D,M){D=Ga(D);var O=x.objectStore(f),T=O.keyPath==null,I=b==="put"||b==="add";if(!I&&b!=="delete"&&b!=="deleteRange")throw new Error("Invalid operation type: "+b);var N=(_||w||{length:1}).length;if(_&&w&&_.length!==w.length)throw new Error("Given keys array must have same length as given values array.");if(N===0)return D({numFailures:0,failures:{},results:[],lastResult:void 0});var P,F=[],L=[],z=0,H=function(re){++z,Tp(re)};if(b==="deleteRange"){if(S.type===4)return D({numFailures:z,failures:L,results:[],lastResult:void 0});S.type===3?F.push(P=O.clear()):F.push(P=O.delete(a(S)))}else{var X=I?T?[w,_]:[w,null]:[_,null],Y=X[0],de=X[1];if(I)for(var ye=0;ye<N;++ye)F.push(P=de&&de[ye]!==void 0?O[b](Y[ye],de[ye]):O[b](Y[ye])),P.onerror=H;else for(var ye=0;ye<N;++ye)F.push(P=O[b](Y[ye])),P.onerror=H}var W=function(re){var _e=re.target.result;F.forEach(function(ve,ke){return ve.error!=null&&(L[ke]=ve.error)}),D({numFailures:z,failures:L,results:b==="delete"?_:F.map(function(ve){return ve.result}),lastResult:_e})};P.onerror=function(re){H(re),W(re)},P.onsuccess=W})}function p(g){var x=g.trans,b=g.values,_=g.query,w=g.reverse,S=g.unique;return new Promise(function(D,M){D=Ga(D);var O=_.index,T=_.range,I=x.objectStore(f),N=O.isPrimaryKey?I:I.index(O.name),P=w?S?"prevunique":"prev":S?"nextunique":"next",F=b||!("openKeyCursor"in N)?N.openCursor(a(T),P):N.openKeyCursor(a(T),P);F.onerror=Xs(M),F.onsuccess=Ga(function(L){var z=F.result;if(!z){D(null);return}z.___id=++WW,z.done=!1;var H=z.continue.bind(z),X=z.continuePrimaryKey;X&&(X=X.bind(z));var Y=z.advance.bind(z),de=function(){throw new Error("Cursor not started")},ye=function(){throw new Error("Cursor not stopped")};z.trans=x,z.stop=z.continue=z.continuePrimaryKey=z.advance=de,z.fail=Ga(M),z.next=function(){var W=this,re=1;return this.start(function(){return re--?W.continue():W.stop()}).then(function(){return W})},z.start=function(W){var re=new Promise(function(ve,ke){ve=Ga(ve),F.onerror=Xs(ke),z.fail=ke,z.stop=function(Ie){z.stop=z.continue=z.continuePrimaryKey=z.advance=ye,ve(Ie)}}),_e=function(){if(F.result)try{W()}catch(ve){z.fail(ve)}else z.done=!0,z.start=function(){throw new Error("Cursor behind last entry")},z.stop()};return F.onsuccess=Ga(function(ve){F.onsuccess=_e,_e()}),z.continue=H,z.continuePrimaryKey=X,z.advance=Y,_e(),re},D(z)},M)})}function v(g){return function(x){return new Promise(function(b,_){b=Ga(b);var w=x.trans,S=x.values,D=x.limit,M=x.query,O=D===1/0?void 0:D,T=M.index,I=M.range,N=w.objectStore(f),P=T.isPrimaryKey?N:N.index(T.name),F=a(I);if(D===0)return b({result:[]});if(g){var L=S?P.getAll(F,O):P.getAllKeys(F,O);L.onsuccess=function(Y){return b({result:Y.target.result})},L.onerror=Xs(_)}else{var z=0,H=S||!("openKeyCursor"in P)?P.openCursor(F):P.openKeyCursor(F),X=[];H.onsuccess=function(Y){var de=H.result;if(!de)return b({result:X});if(X.push(S?de.value:de.primaryKey),++z===D)return b({result:X});de.continue()},H.onerror=Xs(_)}})}}return{name:f,schema:d,mutate:m,getMany:function(g){var x=g.trans,b=g.keys;return new Promise(function(_,w){_=Ga(_);for(var S=x.objectStore(f),D=b.length,M=new Array(D),O=0,T=0,I,N=function(z){var H=z.target;(M[H._pos]=H.result)!=null,++T===O&&_(M)},P=Xs(w),F=0;F<D;++F){var L=b[F];L!=null&&(I=S.get(b[F]),I._pos=F,I.onsuccess=N,I.onerror=P,++O)}O===0&&_(M)})},get:function(g){var x=g.trans,b=g.key;return new Promise(function(_,w){_=Ga(_);var S=x.objectStore(f),D=S.get(b);D.onsuccess=function(M){return _(M.target.result)},D.onerror=Xs(w)})},query:v(l),openCursor:p,count:function(g){var x=g.query,b=g.trans,_=x.index,w=x.range;return new Promise(function(S,D){var M=b.objectStore(f),O=_.isPrimaryKey?M:M.index(_.name),T=a(w),I=T?O.count(T):O.count();I.onsuccess=Ga(function(N){return S(N.target.result)}),I.onerror=Xs(D)})}}}var n=r(e,o),s=n.schema,l=n.hasGetAll,u=s.tables.map(function(d){return i(d)}),c={};return u.forEach(function(d){return c[d.name]=d}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(d){var f=c[d];if(!f)throw new Error("Table '"+d+"' not found");return c[d]},MIN_KEY:-1/0,MAX_KEY:Op(t),schema:s}}function XW(e,t){return t.reduce(function(o,r){var a=r.create;return Lo(Lo({},o),a(o))},e)}function KW(e,t,o,r){var a=o.IDBKeyRange;o.indexedDB;var i=XW(QW(t,a,r),e.dbcore);return{dbcore:i}}function fE(e,t){var o=e._novip,r=t.db,a=KW(o._middlewares,r,o._deps,t);o.core=a.dbcore,o.tables.forEach(function(i){var n=i.name;o.core.schema.tables.some(function(s){return s.name===n})&&(i.core=o.core.table(n),o[n]instanceof o.Table&&(o[n].core=i.core))})}function Ig(e,t,o,r){var a=e._novip;o.forEach(function(i){var n=r[i];t.forEach(function(s){var l=aE(s,i);(!l||"value"in l&&l.value===void 0)&&(s===a.Transaction.prototype||s instanceof a.Transaction?Zl(s,i,{get:function(){return this.table(i)},set:function(u){t5(this,i,{value:u,writable:!0,configurable:!0,enumerable:!0})}}):s[i]=new a.Table(i,n))})})}function Gx(e,t){var o=e._novip;t.forEach(function(r){for(var a in r)r[a]instanceof o.Table&&delete r[a]})}function YW(e,t){return e._cfg.version-t._cfg.version}function JW(e,t,o,r){var a=e._dbSchema,i=e._createTransaction("readwrite",e._storeNames,a);i.create(o),i._completion.catch(r);var n=i._reject.bind(i),s=Jt.transless||Jt;uu(function(){Jt.trans=i,Jt.transless=s,t===0?(yr(a).forEach(function(l){mE(o,l,a[l].primKey,a[l].indexes)}),fE(e,o),Vt.follow(function(){return e.on.populate.fire(i)}).catch(n)):ZW(e,t,i,o).catch(n)})}function ZW(e,t,o,r){var a=e._novip,i=[],n=a._versions,s=a._dbSchema=pE(a,a.idbdb,r),l=!1,u=n.filter(function(d){return d._cfg.version>=t});u.forEach(function(d){i.push(function(){var f=s,m=d._cfg.dbschema;Qx(a,f,r),Qx(a,m,r),s=a._dbSchema=m;var p=T5(f,m);p.add.forEach(function(w){mE(r,w[0],w[1].primKey,w[1].indexes)}),p.change.forEach(function(w){if(w.recreate)throw new co.Upgrade("Not yet support for changing primary key");var S=r.objectStore(w.name);w.add.forEach(function(D){return Wx(S,D)}),w.change.forEach(function(D){S.deleteIndex(D.name),Wx(S,D)}),w.del.forEach(function(D){return S.deleteIndex(D)})});var v=d._cfg.contentUpgrade;if(v&&d._cfg.version>t){fE(a,r),o._memoizedTables={},l=!0;var g=i5(m);p.del.forEach(function(w){g[w]=f[w]}),Gx(a,[a.Transaction.prototype]),Ig(a,[a.Transaction.prototype],yr(g),g),o.schema=g;var x=rE(v);x&&qm();var b,_=Vt.follow(function(){if(b=v(o),b&&x){var w=ec.bind(null,null);b.then(w,w)}});return b&&typeof b.then=="function"?Vt.resolve(b):_.then(function(){return b})}}),i.push(function(f){if(!l||!TW){var m=d._cfg.dbschema;tQ(m,f)}Gx(a,[a.Transaction.prototype]),Ig(a,[a.Transaction.prototype],a._storeNames,a._dbSchema),o.schema=a._dbSchema})});function c(){return i.length?Vt.resolve(i.shift()(o.idbtrans)).then(c):Vt.resolve()}return c().then(function(){eQ(s,r)})}function T5(e,t){var o={del:[],add:[],change:[]},r;for(r in e)t[r]||o.del.push(r);for(r in t){var a=e[r],i=t[r];if(!a)o.add.push([r,i]);else{var n={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(a.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||a.primKey.auto!==i.primKey.auto&&!M_)n.recreate=!0,o.change.push(n);else{var s=a.idxByName,l=i.idxByName,u=void 0;for(u in s)l[u]||n.del.push(u);for(u in l){var c=s[u],d=l[u];c?c.src!==d.src&&n.change.push(d):n.add.push(d)}(n.del.length>0||n.add.length>0||n.change.length>0)&&o.change.push(n)}}}return o}function mE(e,t,o,r){var a=e.db.createObjectStore(t,o.keyPath?{keyPath:o.keyPath,autoIncrement:o.auto}:{autoIncrement:o.auto});return r.forEach(function(i){return Wx(a,i)}),a}function eQ(e,t){yr(e).forEach(function(o){t.db.objectStoreNames.contains(o)||mE(t,o,e[o].primKey,e[o].indexes)})}function tQ(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(o){return e[o]==null&&t.db.deleteObjectStore(o)})}function Wx(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function pE(e,t,o){var r={},a=P_(t.objectStoreNames,0);return a.forEach(function(i){for(var n=o.objectStore(i),s=n.keyPath,l=Hx(I5(s),s||"",!1,!1,!!n.autoIncrement,s&&typeof s!="string",!0),u=[],c=0;c<n.indexNames.length;++c){var d=n.index(n.indexNames[c]);s=d.keyPath;var f=Hx(d.name,s,!!d.unique,!!d.multiEntry,!1,s&&typeof s!="string",!1);u.push(f)}r[i]=A5(i,l,u)}),r}function oQ(e,t,o){var r=e._novip;r.verno=t.version/10;var a=r._dbSchema=pE(r,t,o);r._storeNames=P_(t.objectStoreNames,0),Ig(r,[r._allTables],yr(a),a)}function aQ(e,t){var o=pE(e,e.idbdb,t),r=T5(o,e._dbSchema);return!(r.add.length||r.change.some(function(a){return a.add.length||a.change.length}))}function Qx(e,t,o){for(var r=e._novip,a=o.db.objectStoreNames,i=0;i<a.length;++i){var n=a[i],s=o.objectStore(n);r._hasGetAll="getAll"in s;for(var l=0;l<s.indexNames.length;++l){var u=s.indexNames[l],c=s.index(u).keyPath,d=typeof c=="string"?c:"["+P_(c).join("+")+"]";if(t[n]){var f=t[n].idxByName[d];f&&(f.name=u,delete t[n].idxByName[d],t[n].idxByName[u]=f)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&ka.WorkerGlobalScope&&ka instanceof ka.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function rQ(e){return e.split(",").map(function(t,o){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),a=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Hx(r,a||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),yi(a),o===0)})}var iQ=function(){function e(){}return e.prototype._parseStoresSpec=function(t,o){yr(t).forEach(function(r){if(t[r]!==null){var a=rQ(t[r]),i=a.shift();if(i.multi)throw new co.Schema("Primary key cannot be multi-valued");a.forEach(function(n){if(n.auto)throw new co.Schema("Only primary key can be marked as autoIncrement (++)");if(!n.keyPath)throw new co.Schema("Index must have a name and cannot be an empty string")}),o[r]=A5(r,i,a)}})},e.prototype.stores=function(t){var o=this.db;this._cfg.storesSource=this._cfg.storesSource?$i(this._cfg.storesSource,t):t;var r=o._versions,a={},i={};return r.forEach(function(n){$i(a,n._cfg.storesSource),i=n._cfg.dbschema={},n._parseStoresSpec(a,i)}),o._dbSchema=i,Gx(o,[o._allTables,o,o.Transaction.prototype]),Ig(o,[o._allTables,o,o.Transaction.prototype,this._cfg.tables],yr(i),i),o._storeNames=yr(i),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=sE(this._cfg.contentUpgrade||wa,t),this},e}();function nQ(e){return gh(iQ.prototype,function(o){this.db=e,this._cfg={version:o,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function hE(e,t){var o=e._dbNamesDB;return o||(o=e._dbNamesDB=new kd(N_,{addons:[],indexedDB:e,IDBKeyRange:t}),o.version(1).stores({dbnames:"name"})),o.table("dbnames")}function vE(e){return e&&typeof e.databases=="function"}function sQ(e){var t=e.indexedDB,o=e.IDBKeyRange;return vE(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(a){return a.name}).filter(function(a){return a!==N_})}):hE(t,o).toCollection().primaryKeys()}function lQ(e,t){var o=e.indexedDB,r=e.IDBKeyRange;!vE(o)&&t!==N_&&hE(o,r).put({name:t}).catch(wa)}function cQ(e,t){var o=e.indexedDB,r=e.IDBKeyRange;!vE(o)&&t!==N_&&hE(o,r).delete(t).catch(wa)}function Xx(e){return uu(function(){return Jt.letThrough=!0,e()})}function uQ(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(o){var r=function(){return indexedDB.databases().finally(o)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}function dQ(e){var t=e._state,o=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Rr(t.dbOpenError):e});ul&&(t.openCanceller._stackHolder=jd()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function a(){if(t.openCanceller!==r)throw new co.DatabaseClosed("db.open() was cancelled")}var i=t.dbReadyResolve,n=null,s=!1;return Vt.race([r,(typeof navigator=="undefined"?Vt.resolve():uQ()).then(function(){return new Vt(function(l,u){if(a(),!o)throw new co.MissingAPI;var c=e.name,d=t.autoSchema?o.open(c):o.open(c,Math.round(e.verno*10));if(!d)throw new co.MissingAPI;d.onerror=Xs(u),d.onblocked=Ga(e._fireOnBlocked),d.onupgradeneeded=Ga(function(f){if(n=d.transaction,t.autoSchema&&!e._options.allowEmptyDB){d.onerror=Tp,n.abort(),d.result.close();var m=o.deleteDatabase(c);m.onsuccess=m.onerror=Ga(function(){u(new co.NoSuchDatabase("Database "+c+" doesnt exist"))})}else{n.onerror=Xs(u);var p=f.oldVersion>Math.pow(2,62)?0:f.oldVersion;s=p<1,e._novip.idbdb=d.result,JW(e,p/10,n,u)}},u),d.onsuccess=Ga(function(){n=null;var f=e._novip.idbdb=d.result,m=P_(f.objectStoreNames);if(m.length>0)try{var p=f.transaction(jW(m),"readonly");t.autoSchema?oQ(e,f,p):(Qx(e,e._dbSchema,p),aQ(e,p)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),fE(e,p)}catch{}ip.push(e),f.onversionchange=Ga(function(v){t.vcFired=!0,e.on("versionchange").fire(v)}),f.onclose=Ga(function(v){e.on("close").fire(v)}),s&&lQ(e._deps,c),l()},u)})})]).then(function(){return a(),t.onReadyBeingFired=[],Vt.resolve(Xx(function(){return e.on.ready.fire(e.vip)})).then(function l(){if(t.onReadyBeingFired.length>0){var u=t.onReadyBeingFired.reduce(sE,wa);return t.onReadyBeingFired=[],Vt.resolve(Xx(function(){return u(e.vip)})).then(l)}})}).finally(function(){t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(function(){return e}).catch(function(l){t.dbOpenError=l;try{n&&n.abort()}catch{}return r===t.openCanceller&&e._close(),Rr(l)}).finally(function(){t.openComplete=!0,i()})}function Kx(e){var t=function(n){return e.next(n)},o=function(n){return e.throw(n)},r=i(t),a=i(o);function i(n){return function(s){var l=n(s),u=l.value;return l.done?u:!u||typeof u.then!="function"?yi(u)?Promise.all(u).then(r,a):r(u):u.then(r,a)}}return i(t)()}function fQ(e,t,o){var r=arguments.length;if(r<2)throw new co.InvalidArgument("Too few arguments");for(var a=new Array(r-1);--r;)a[r-1]=arguments[r];o=a.pop();var i=n5(a);return[e,i,o]}function D5(e,t,o,r,a){return Vt.resolve().then(function(){var i=Jt.transless||Jt,n=e._createTransaction(t,o,e._dbSchema,r),s={trans:n,transless:i};if(r)n.idbtrans=r.idbtrans;else try{n.create(),e._state.PR1398_maxLoop=3}catch(d){return d.name===nE.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(function(){return D5(e,t,o,null,a)})):Rr(d)}var l=rE(a);l&&qm();var u,c=Vt.follow(function(){if(u=a.call(n,n),u)if(l){var d=ec.bind(null,null);u.then(d,d)}else typeof u.next=="function"&&typeof u.throw=="function"&&(u=Kx(u))},s);return(u&&typeof u.then=="function"?Vt.resolve(u).then(function(d){return n.active?d:Rr(new co.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):c.then(function(){return u})).then(function(d){return r&&n._resolve(),n._completion.then(function(){return d})}).catch(function(d){return n._reject(d),Rr(d)})})}function W1(e,t,o){for(var r=yi(e)?e.slice():[e],a=0;a<o;++a)r.push(t);return r}function mQ(e){return Lo(Lo({},e),{table:function(t){var o=e.table(t),r=o.schema,a={},i=[];function n(v,g,x){var b=np(v),_=a[b]=a[b]||[],w=v==null?0:typeof v=="string"?1:v.length,S=g>0,D=Lo(Lo({},x),{isVirtual:S,keyTail:g,keyLength:w,extractKey:jx(v),unique:!S&&x.unique});if(_.push(D),D.isPrimaryKey||i.push(D),w>1){var M=w===2?v[0]:v.slice(0,w-1);n(M,g+1,x)}return _.sort(function(O,T){return O.keyTail-T.keyTail}),D}var s=n(r.primaryKey.keyPath,0,r.primaryKey);a[":id"]=[s];for(var l=0,u=r.indexes;l<u.length;l++){var c=u[l];n(c.keyPath,0,c)}function d(v){var g=a[np(v)];return g&&g[0]}function f(v,g){return{type:v.type===1?2:v.type,lower:W1(v.lower,v.lowerOpen?e.MAX_KEY:e.MIN_KEY,g),lowerOpen:!0,upper:W1(v.upper,v.upperOpen?e.MIN_KEY:e.MAX_KEY,g),upperOpen:!0}}function m(v){var g=v.query.index;return g.isVirtual?Lo(Lo({},v),{query:{index:g,range:f(v.query.range,g.keyTail)}}):v}var p=Lo(Lo({},o),{schema:Lo(Lo({},r),{primaryKey:s,indexes:i,getIndexByKeyPath:d}),count:function(v){return o.count(m(v))},query:function(v){return o.query(m(v))},openCursor:function(v){var g=v.query.index,x=g.keyTail,b=g.isVirtual,_=g.keyLength;if(!b)return o.openCursor(v);function w(S){function D(O){O!=null?S.continue(W1(O,v.reverse?e.MAX_KEY:e.MIN_KEY,x)):v.unique?S.continue(S.key.slice(0,_).concat(v.reverse?e.MIN_KEY:e.MAX_KEY,x)):S.continue()}var M=Object.create(S,{continue:{value:D},continuePrimaryKey:{value:function(O,T){S.continuePrimaryKey(W1(O,e.MAX_KEY,x),T)}},primaryKey:{get:function(){return S.primaryKey}},key:{get:function(){var O=S.key;return _===1?O[0]:O.slice(0,_)}},value:{get:function(){return S.value}}});return M}return o.openCursor(m(v)).then(function(S){return S&&w(S)})}});return p}})}var pQ={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:mQ};function gE(e,t,o,r){return o=o||{},r=r||"",yr(e).forEach(function(a){if(!Nn(t,a))o[r+a]=void 0;else{var i=e[a],n=t[a];if(typeof i=="object"&&typeof n=="object"&&i&&n){var s=Px(i),l=Px(n);s!==l?o[r+a]=t[a]:s==="Object"?gE(i,n,o,r+a+"."):i!==n&&(o[r+a]=t[a])}else i!==n&&(o[r+a]=t[a])}}),yr(t).forEach(function(a){Nn(e,a)||(o[r+a]=t[a])}),o}function hQ(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var vQ={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return Lo(Lo({},e),{table:function(t){var o=e.table(t),r=o.schema.primaryKey,a=Lo(Lo({},o),{mutate:function(i){var n=Jt.trans,s=n.table(t).hook,l=s.deleting,u=s.creating,c=s.updating;switch(i.type){case"add":if(u.fire===wa)break;return n._promise("readwrite",function(){return d(i)},!0);case"put":if(u.fire===wa&&c.fire===wa)break;return n._promise("readwrite",function(){return d(i)},!0);case"delete":if(l.fire===wa)break;return n._promise("readwrite",function(){return d(i)},!0);case"deleteRange":if(l.fire===wa)break;return n._promise("readwrite",function(){return f(i)},!0)}return o.mutate(i);function d(p){var v=Jt.trans,g=p.keys||hQ(r,p);if(!g)throw new Error("Keys missing");return p=p.type==="add"||p.type==="put"?Lo(Lo({},p),{keys:g}):Lo({},p),p.type!=="delete"&&(p.values=Dx([],p.values,!0)),p.keys&&(p.keys=Dx([],p.keys,!0)),gQ(o,p,g).then(function(x){var b=g.map(function(_,w){var S=x[w],D={onerror:null,onsuccess:null};if(p.type==="delete")l.fire.call(D,_,S,v);else if(p.type==="add"||S===void 0){var M=u.fire.call(D,_,p.values[w],v);_==null&&M!=null&&(_=M,p.keys[w]=_,r.outbound||Ds(p.values[w],r.keyPath,_))}else{var O=gE(S,p.values[w]),T=c.fire.call(D,O,_,S,v);if(T){var I=p.values[w];Object.keys(T).forEach(function(N){Nn(I,N)?I[N]=T[N]:Ds(I,N,T[N])})}}return D});return o.mutate(p).then(function(_){for(var w=_.failures,S=_.results,D=_.numFailures,M=_.lastResult,O=0;O<g.length;++O){var T=S?S[O]:g[O],I=b[O];T==null?I.onerror&&I.onerror(w[O]):I.onsuccess&&I.onsuccess(p.type==="put"&&x[O]?p.values[O]:T)}return{failures:w,results:S,numFailures:D,lastResult:M}}).catch(function(_){return b.forEach(function(w){return w.onerror&&w.onerror(_)}),Promise.reject(_)})})}function f(p){return m(p.trans,p.range,1e4)}function m(p,v,g){return o.query({trans:p,values:!1,query:{index:r,range:v},limit:g}).then(function(x){var b=x.result;return d({type:"delete",keys:b,trans:p}).then(function(_){return _.numFailures>0?Promise.reject(_.failures[0]):b.length<g?{failures:[],numFailures:0,lastResult:void 0}:m(p,Lo(Lo({},v),{lower:b[b.length-1],lowerOpen:!0}),g)})})}}});return a}})}};function gQ(e,t,o){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:o,cache:"immutable"})}function O5(e,t,o){try{if(!t||t.keys.length<e.length)return null;for(var r=[],a=0,i=0;a<t.keys.length&&i<e.length;++a)Bi(t.keys[a],e[i])===0&&(r.push(o?fh(t.values[a]):t.values[a]),++i);return r.length===e.length?r:null}catch{return null}}var _Q={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var o=e.table(t);return Lo(Lo({},o),{getMany:function(r){if(!r.cache)return o.getMany(r);var a=O5(r.keys,r.trans._cache,r.cache==="clone");return a?Vt.resolve(a):o.getMany(r).then(function(i){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?fh(i):i},i})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),o.mutate(r)}})}}}},cy;function _E(e){return!("from"in e)}var Rl=function(e,t){if(this)$i(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var o=new Rl;return e&&"d"in e&&$i(o,e),o}};xm(Rl.prototype,(cy={add:function(e){return Ag(this,e),this},addKey:function(e){return Pp(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(o){return Pp(t,o,o)}),this}},cy[Fx]=function(){return Yx(this)},cy));function Pp(e,t,o){var r=Bi(t,o);if(!isNaN(r)){if(r>0)throw RangeError();if(_E(e))return $i(e,{from:t,to:o,d:1});var a=e.l,i=e.r;if(Bi(o,e.from)<0)return a?Pp(a,t,o):e.l={from:t,to:o,d:1,l:null,r:null},VD(e);if(Bi(t,e.to)>0)return i?Pp(i,t,o):e.r={from:t,to:o,d:1,l:null,r:null},VD(e);Bi(t,e.from)<0&&(e.from=t,e.l=null,e.d=i?i.d+1:1),Bi(o,e.to)>0&&(e.to=o,e.r=null,e.d=e.l?e.l.d+1:1);var n=!e.r;a&&!e.l&&Ag(e,a),i&&n&&Ag(e,i)}}function Ag(e,t){function o(r,a){var i=a.from,n=a.to,s=a.l,l=a.r;Pp(r,i,n),s&&o(r,s),l&&o(r,l)}_E(t)||o(e,t)}function bQ(e,t){var o=Yx(t),r=o.next();if(r.done)return!1;for(var a=r.value,i=Yx(e),n=i.next(a.from),s=n.value;!r.done&&!n.done;){if(Bi(s.from,a.to)<=0&&Bi(s.to,a.from)>=0)return!0;Bi(a.from,s.from)<0?a=(r=o.next(s.from)).value:s=(n=i.next(a.from)).value}return!1}function Yx(e){var t=_E(e)?null:{s:0,n:e};return{next:function(o){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&Bi(o,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||Bi(o,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function VD(e){var t,o,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((o=e.l)===null||o===void 0?void 0:o.d)||0),a=r>1?"r":r<-1?"l":"";if(a){var i=a==="r"?"l":"r",n=Lo({},e),s=e[a];e.from=s.from,e.to=s.to,e[a]=s[a],n[a]=s[i],e[i]=n,n.d=BD(n)}e.d=BD(e)}function BD(e){var t=e.r,o=e.l;return(t?o?Math.max(t.d,o.d):t.d:o?o.d:0)+1}var yQ={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,o=new Rl(e.MIN_KEY,e.MAX_KEY);return Lo(Lo({},e),{table:function(r){var a=e.table(r),i=a.schema,n=i.primaryKey,s=n.extractKey,l=n.outbound,u=Lo(Lo({},a),{mutate:function(f){var m=f.trans,p=m.mutatedParts||(m.mutatedParts={}),v=function(M){var O="idb://"+t+"/"+r+"/"+M;return p[O]||(p[O]=new Rl)},g=v(""),x=v(":dels"),b=f.type,_=f.type==="deleteRange"?[f.range]:f.type==="delete"?[f.keys]:f.values.length<50?[[],f.values]:[],w=_[0],S=_[1],D=f.trans._cache;return a.mutate(f).then(function(M){if(yi(w)){b!=="delete"&&(w=M.results),g.addKeys(w);var O=O5(w,D);!O&&b!=="add"&&x.addKeys(w),(O||S)&&xQ(v,i,O,S)}else if(w){var T={from:w.lower,to:w.upper};x.add(T),g.add(T)}else g.add(o),x.add(o),i.indexes.forEach(function(I){return v(I.name).add(o)});return M})}}),c=function(f){var m,p,v=f.query,g=v.index,x=v.range;return[g,new Rl((m=x.lower)!==null&&m!==void 0?m:e.MIN_KEY,(p=x.upper)!==null&&p!==void 0?p:e.MAX_KEY)]},d={get:function(f){return[n,new Rl(f.key)]},getMany:function(f){return[n,new Rl().addKeys(f.keys)]},count:c,query:c,openCursor:c};return yr(d).forEach(function(f){u[f]=function(m){var p=Jt.subscr;if(p){var v=function(D){var M="idb://"+t+"/"+r+"/"+D;return p[M]||(p[M]=new Rl)},g=v(""),x=v(":dels"),b=d[f](m),_=b[0],w=b[1];if(v(_.name||"").add(w),!_.isPrimaryKey)if(f==="count")x.add(o);else{var S=f==="query"&&l&&m.values&&a.query(Lo(Lo({},m),{values:!1}));return a[f].apply(this,arguments).then(function(D){if(f==="query"){if(l&&m.values)return S.then(function(I){var N=I.result;return g.addKeys(N),D});var M=m.values?D.result.map(s):D.result;m.values?g.addKeys(M):x.addKeys(M)}else if(f==="openCursor"){var O=D,T=m.values;return O&&Object.create(O,{key:{get:function(){return x.addKey(O.primaryKey),O.key}},primaryKey:{get:function(){var I=O.primaryKey;return x.addKey(I),I}},value:{get:function(){return T&&g.addKey(O.primaryKey),O.value}}})}return D})}}return a[f].apply(this,arguments)}}),u}})}};function xQ(e,t,o,r){function a(i){var n=e(i.name||"");function s(u){return u!=null?i.extractKey(u):null}var l=function(u){return i.multiEntry&&yi(u)?u.forEach(function(c){return n.addKey(c)}):n.addKey(u)};(o||r).forEach(function(u,c){var d=o&&s(o[c]),f=r&&s(r[c]);Bi(d,f)!==0&&(d!=null&&l(d),f!=null&&l(f))})}t.indexes.forEach(a)}var kd=function(){function e(t,o){var r=this;this._middlewares={},this.verno=0;var a=e.dependencies;this._options=o=Lo({addons:e.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange},o),this._deps={indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange};var i=o.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var n={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:wa,dbReadyPromise:null,cancelOpen:wa,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};n.dbReadyPromise=new Vt(function(s){n.dbReadyResolve=s}),n.openCanceller=new Vt(function(s,l){n.cancelOpen=l}),this._state=n,this.name=t,this.on=vh(this,"populate","blocked","versionchange","close",{ready:[sE,wa]}),this.on.ready.subscribe=o5(this.on.ready.subscribe,function(s){return function(l,u){e.vip(function(){var c=r._state;if(c.openComplete)c.dbOpenError||Vt.resolve().then(l),u&&s(l);else if(c.onReadyBeingFired)c.onReadyBeingFired.push(l),u&&s(l);else{s(l);var d=r;u||s(function f(){d.on.ready.unsubscribe(l),d.on.ready.unsubscribe(f)})}})}}),this.Collection=RW(this),this.Table=PW(this),this.Transaction=HW(this),this.Version=nQ(this),this.WhereClause=UW(this),this.on("versionchange",function(s){s.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(s){!s.newVersion||s.newVersion<s.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+s.oldVersion/10)}),this._maxKey=Op(o.IDBKeyRange),this._createTransaction=function(s,l,u,c){return new r.Transaction(s,l,u,r._options.chromeTransactionDurability,c)},this._fireOnBlocked=function(s){r.on("blocked").fire(s),ip.filter(function(l){return l.name===r.name&&l!==r&&!l._state.vcFired}).map(function(l){return l.on("versionchange").fire(s)})},this.use(pQ),this.use(vQ),this.use(yQ),this.use(_Q),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(function(s){return s(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new co.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new co.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var o=this._versions,r=o.filter(function(a){return a._cfg.version===t})[0];return r||(r=new this.Version(t),o.push(r),o.sort(YW),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var o=this;return this.idbdb&&(this._state.openComplete||Jt.letThrough||this._vip)?t():new Vt(function(r,a){if(o._state.openComplete)return a(new co.DatabaseClosed(o._state.dbOpenError));if(!o._state.isBeingOpened){if(!o._options.autoOpen){a(new co.DatabaseClosed);return}o.open().catch(wa)}o._state.dbReadyPromise.then(r,a)}).then(t)},e.prototype.use=function(t){var o=t.stack,r=t.create,a=t.level,i=t.name;i&&this.unuse({stack:o,name:i});var n=this._middlewares[o]||(this._middlewares[o]=[]);return n.push({stack:o,create:r,level:a==null?10:a,name:i}),n.sort(function(s,l){return s.level-l.level}),this},e.prototype.unuse=function(t){var o=t.stack,r=t.name,a=t.create;return o&&this._middlewares[o]&&(this._middlewares[o]=this._middlewares[o].filter(function(i){return a?i.create!==a:r?i.name!==r:!1})),this},e.prototype.open=function(){return dQ(this)},e.prototype._close=function(){var t=this._state,o=ip.indexOf(this);if(o>=0&&ip.splice(o,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new Vt(function(r){t.dbReadyResolve=r}),t.openCanceller=new Vt(function(r,a){t.cancelOpen=a})},e.prototype.close=function(){this._close();var t=this._state;this._options.autoOpen=!1,t.dbOpenError=new co.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)},e.prototype.delete=function(){var t=this,o=arguments.length>0,r=this._state;return new Vt(function(a,i){var n=function(){t.close();var s=t._deps.indexedDB.deleteDatabase(t.name);s.onsuccess=Ga(function(){cQ(t._deps,t.name),a()}),s.onerror=Xs(i),s.onblocked=t._fireOnBlocked};if(o)throw new co.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(n):n()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return yr(this._allTables).map(function(o){return t._allTables[o]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=fQ.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,o,r){var a=this,i=Jt.trans;(!i||i.db!==this||t.indexOf("!")!==-1)&&(i=null);var n=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var s,l;try{if(l=o.map(function(c){var d=c instanceof a.Table?c.name:c;if(typeof d!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return d}),t=="r"||t===ry)s=ry;else if(t=="rw"||t==iy)s=iy;else throw new co.InvalidArgument("Invalid transaction mode: "+t);if(i){if(i.mode===ry&&s===iy)if(n)i=null;else throw new co.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i&&l.forEach(function(c){if(i&&i.storeNames.indexOf(c)===-1)if(n)i=null;else throw new co.SubTransaction("Table "+c+" not included in parent transaction.")}),n&&i&&!i.active&&(i=null)}}catch(c){return i?i._promise(null,function(d,f){f(c)}):Rr(c)}var u=D5.bind(null,this,s,l,i,r);return i?i._promise(s,u,"lock"):Jt.trans?Lm(Jt.transless,function(){return a._whenReady(u)}):this._whenReady(u)},e.prototype.table=function(t){if(!Nn(this._allTables,t))throw new co.InvalidTable("Table "+t+" does not exist");return this._allTables[t]},e}(),CQ=typeof Symbol!="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",wQ=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,o,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:o,complete:r}:t)},e.prototype[CQ]=function(){return this},e}();function P5(e,t){return yr(t).forEach(function(o){var r=e[o]||(e[o]=new Rl);Ag(r,t[o])}),e}function EQ(e){var t=!1,o=void 0,r=new wQ(function(a){var i=rE(e);function n(g){i&&qm();var x=function(){return uu(e,{subscr:g,trans:null})},b=Jt.trans?Lm(Jt.transless,x):x();return i&&b.then(ec,ec),b}var s=!1,l={},u={},c={get closed(){return s},unsubscribe:function(){s=!0,fu.storagemutated.unsubscribe(p)}};a.start&&a.start(c);var d=!1,f=!1;function m(){return yr(u).some(function(g){return l[g]&&bQ(l[g],u[g])})}var p=function(g){P5(l,g),m()&&v()},v=function(){if(!(d||s)){l={};var g={},x=n(g);f||(fu(Dp,p),f=!0),d=!0,Promise.resolve(x).then(function(b){t=!0,o=b,d=!1,!s&&(m()?v():(l={},u=g,a.next&&a.next(b)))},function(b){d=!1,t=!1,a.error&&a.error(b),c.unsubscribe()})}};return v(),c});return r.hasValue=function(){return t},r.getValue=function(){return o},r}var Jx;try{Jx={indexedDB:ka.indexedDB||ka.mozIndexedDB||ka.webkitIndexedDB||ka.msIndexedDB,IDBKeyRange:ka.IDBKeyRange||ka.webkitIDBKeyRange}}catch{Jx={indexedDB:null,IDBKeyRange:null}}var td=kd;xm(td,Lo(Lo({},F_),{delete:function(e){var t=new td(e,{addons:[]});return t.delete()},exists:function(e){return new td(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return sQ(td.dependencies).then(e)}catch{return Rr(new co.MissingAPI)}},defineClass:function(){function e(t){$i(this,t)}return e},ignoreTransaction:function(e){return Jt.trans?Lm(Jt.transless,e):e()},vip:Xx,async:function(e){return function(){try{var t=Kx(e.apply(this,arguments));return!t||typeof t.then!="function"?Vt.resolve(t):t}catch(o){return Rr(o)}}},spawn:function(e,t,o){try{var r=Kx(e.apply(o,t||[]));return!r||typeof r.then!="function"?Vt.resolve(r):r}catch(a){return Rr(a)}},currentTransaction:{get:function(){return Jt.trans||null}},waitFor:function(e,t){var o=Vt.resolve(typeof e=="function"?td.ignoreTransaction(e):e).timeout(t||6e4);return Jt.trans?Jt.trans.waitFor(o):o},Promise:Vt,debug:{get:function(){return ul},set:function(e){l5(e,e==="dexie"?function(){return!0}:C5)}},derive:Vm,extend:$i,props:xm,override:o5,Events:vh,on:fu,liveQuery:EQ,extendObservabilitySet:P5,getByKeyPath:Wl,setByKeyPath:Ds,delByKeyPath:oW,shallowClone:i5,deepClone:fh,getObjectDiff:gE,cmp:Bi,asap:a5,minKey:zx,addons:[],connections:ip,errnames:nE,dependencies:Jx,semVer:PD,version:PD.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,o){return e+t/Math.pow(10,o*2)})}));td.maxKey=Op(td.dependencies.IDBKeyRange);typeof dispatchEvent!="undefined"&&typeof addEventListener!="undefined"&&(fu(Dp,function(e){if(!$l){var t;M_?(t=document.createEvent("CustomEvent"),t.initCustomEvent(Gc,!0,!0,e)):t=new CustomEvent(Gc,{detail:e}),$l=!0,dispatchEvent(t),$l=!1}}),addEventListener(Gc,function(e){var t=e.detail;$l||Tg(t)}));function Tg(e){var t=$l;try{$l=!0,fu.storagemutated.fire(e)}finally{$l=t}}var $l=!1;if(typeof BroadcastChannel!="undefined"){var Q1=new BroadcastChannel(Gc);typeof Q1.unref=="function"&&Q1.unref(),fu(Dp,function(e){$l||Q1.postMessage(e)}),Q1.onmessage=function(e){e.data&&Tg(e.data)}}else if(typeof self!="undefined"&&typeof navigator!="undefined"){fu(Dp,function(e){try{$l||(typeof localStorage!="undefined"&&localStorage.setItem(Gc,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&Dx([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(t){return t.postMessage({type:Gc,changedParts:e})}))}catch{}}),typeof addEventListener!="undefined"&&addEventListener("storage",function(e){if(e.key===Gc){var t=JSON.parse(e.newValue);t&&Tg(t.changedParts)}});var qD=self.document&&navigator.serviceWorker;qD&&qD.addEventListener("message",SQ)}function SQ(e){var t=e.data;t&&t.type===Gc&&Tg(t.changedParts)}Vt.rejectionMapper=dW;l5(ul,C5);let LD=Number(localStorage.getItem("logarDexieTrace"))||0;class $D{constructor(t){this.dexie=t,this.dexieOrigin=t,this.log=""}logArgs(t,o,r=!0){this.log&&(this.log+=`.${t}(${o.map(a=>JSON.stringify(a)).join(",")})`,r&&(console.log(this.log),LD&&(console.trace(),LD--)))}filter(){return this.logArgs("filter",[...arguments],!1),this.dexie=this.dexie.filter(...arguments),this}anyOf(){return this.logArgs("anyOf",[...arguments],!1),this.dexie=this.dexie.anyOf(...arguments),this}where(){return this.logArgs("where",[...arguments],!1),this.dexie=this.dexie.where(...arguments),this}and(){return this.logArgs("and",[...arguments],!1),this.dexie=this.dexie.and(...arguments),this}or(){return this.logArgs("or",[...arguments],!1),this.dexie=this.dexie.or(...arguments),this}equals(){return this.logArgs("equals",[...arguments],!1),this.dexie=this.dexie.equals(...arguments),this}between(){return this.logArgs("between",[...arguments],!1),this.dexie=this.dexie.between(...arguments),this}below(){return this.logArgs("below",[...arguments],!1),this.dexie=this.dexie.below(...arguments),this}offset(){return this.logArgs("offset",[...arguments],!1),this.dexie=this.dexie.offset(...arguments),this}limit(){return this.logArgs("limit",[...arguments],!1),this.dexie=this.dexie.limit(...arguments),this}isOpen(){this.logArgs("isOpen",[...arguments]);const t=this.dexie.isOpen(...arguments);return this.dexie=this.dexieOrigin,t}count(){this.logArgs("count",[...arguments]);const t=this.dexie.count(...arguments);return this.dexie=this.dexieOrigin,t}delete(){this.logArgs("delete",[...arguments]);const t=this.dexie.delete(...arguments);return this.dexie=this.dexieOrigin,t}each(){this.logArgs("each",[...arguments]);const t=this.dexie.each(...arguments);return this.dexie=this.dexieOrigin,t}toArray(){this.logArgs("toArray",[...arguments]);const t=this.dexie.toArray(...arguments);return this.dexie=this.dexieOrigin,t}sortBy(){this.logArgs("sortBy",[...arguments]);const t=this.dexie.sortBy(...arguments);return this.dexie=this.dexieOrigin,t}first(){this.logArgs("first",[...arguments]);const t=this.dexie.first(...arguments);return this.dexie=this.dexieOrigin,t}last(){this.logArgs("last",[...arguments]);const t=this.dexie.last(...arguments);return this.dexie=this.dexieOrigin,t}get(){this.logArgs("get",[...arguments]);const t=this.dexie.get(...arguments);return this.dexie=this.dexieOrigin,t}add(){this.logArgs("add",[...arguments]);const t=this.dexie.add(...arguments);return this.dexie=this.dexieOrigin,t}put(){this.logArgs("put",[...arguments]);const t=this.dexie.put(...arguments);return this.dexie=this.dexieOrigin,t}bulkPut(){this.logArgs("bulkPut",[...arguments]);const t=this.dexie.bulkPut(...arguments);return this.dexie=this.dexieOrigin,t}update(){this.logArgs("update",[...arguments]);const t=this.dexie.update(...arguments);return this.dexie=this.dexieOrigin,t}get _allTables(){return this.dexie._allTables}get NFe(){return this.log+="dexie NFe",this.dexie=this.dexie.NFe,this}get NFeHist(){return this.log+="dexie NFeHist",this.dexie=this.dexie.NFeHist,this}get _cidade(){return this.log+="dexie _cidade",this.dexie=this.dexie._cidade,this}get _ncm(){return this.log+="dexie _ncm",this.dexie=this.dexie._ncm,this}get caixa(){return this.log+="dexie caixa",this.dexie=this.dexie.caixa,this}get cest(){return this.log+="dexie cest",this.dexie=this.dexie.cest,this}get cfop(){return this.log+="dexie cfop",this.dexie=this.dexie.cfop,this}get clienteSistema(){return this.log+="dexie clienteSistema",this.dexie=this.dexie.clienteSistema,this}get configuracoes(){return this.log+="dexie configuracoes",this.dexie=this.dexie.configuracoes,this}get contato(){return this.log+="dexie contato",this.dexie=this.dexie.contato,this}get contatoAnotacao(){return this.log+="dexie contatoAnotacao",this.dexie=this.dexie.contatoAnotacao,this}get contatoConsulta(){return this.log+="dexie contatoConsulta",this.dexie=this.dexie.contatoConsulta,this}get contatoEndereco(){return this.log+="dexie contatoEndereco",this.dexie=this.dexie.contatoEndereco,this}get contatoFilho(){return this.log+="dexie contatoFilho",this.dexie=this.dexie.contatoFilho,this}get contatoGrupo(){return this.log+="dexie contatoGrupo",this.dexie=this.dexie.contatoGrupo,this}get contatoRedeSocial(){return this.log+="dexie contatoRedeSocial",this.dexie=this.dexie.contatoRedeSocial,this}get contatoTelefone(){return this.log+="dexie contatoTelefone",this.dexie=this.dexie.contatoTelefone,this}get documento(){return this.log+="dexie documento",this.dexie=this.dexie.documento,this}get documentoCondicaoPagamento(){return this.log+="dexie documentoCondicaoPagamento",this.dexie=this.dexie.documentoCondicaoPagamento,this}get documentoContato(){return this.log+="dexie documentoContato",this.dexie=this.dexie.documentoContato,this}get documentoItem(){return this.log+="dexie documentoItem",this.dexie=this.dexie.documentoItem,this}get documentoSat(){return this.log+="dexie documentoSat",this.dexie=this.dexie.documentoSat,this}get empresa(){return this.log+="dexie empresa",this.dexie=this.dexie.empresa,this}get estoqueSaldoProdutoEmpresa(){return this.log+="dexie estoqueSaldoProdutoEmpresa",this.dexie=this.dexie.estoqueSaldoProdutoEmpresa,this}get financeiroCentroCusto(){return this.log+="dexie financeiroCentroCusto",this.dexie=this.dexie.financeiroCentroCusto,this}get financeiroPlanoConta(){return this.log+="dexie financeiroPlanoConta",this.dexie=this.dexie.financeiroPlanoConta,this}get financeiroTitulo(){return this.log+="dexie financeiroTitulo",this.dexie=this.dexie.financeiroTitulo,this}get formaPagamento(){return this.log+="dexie formaPagamento",this.dexie=this.dexie.formaPagamento,this}get impostoConfiguracao(){return this.log+="dexie impostoConfiguracao",this.dexie=this.dexie.impostoConfiguracao,this}get impostoParametro(){return this.log+="dexie impostoParametro",this.dexie=this.dexie.impostoParametro,this}get impostoParametroTipo(){return this.log+="dexie impostoParametroTipo",this.dexie=this.dexie.impostoParametroTipo,this}get item(){return this.log+="dexie item",this.dexie=this.dexie.item,this}get itemComposicao(){return this.log+="dexie itemComposicao",this.dexie=this.dexie.itemComposicao,this}get itemFornecedor(){return this.log+="dexie itemFornecedor",this.dexie=this.dexie.itemFornecedor,this}get itemProducaoFase(){return this.log+="dexie itemProducaoFase",this.dexie=this.dexie.itemProducaoFase,this}get itemQualidade(){return this.log+="dexie itemQualidade",this.dexie=this.dexie.itemQualidade,this}get itemTabelaPreco(){return this.log+="dexie itemTabelaPreco",this.dexie=this.dexie.itemTabelaPreco,this}get nfeIbpt(){return this.log+="dexie nfeIbpt",this.dexie=this.dexie.nfeIbpt,this}get sincronismoFila(){return this.dexie=this.dexie.sincronismoFila,this}get usuario(){return this.log+="dexie usuario",this.dexie=this.dexie.usuario,this}get documentoOperacao(){return this.log+="dexie documentoOperacao",this.dexie=this.dexie.documentoOperacao,this}get documentoStatus(){return this.log+="dexie documentoStatus",this.dexie=this.dexie.documentoStatus,this}get documentoEndereco(){return this.log+="dexie documentoEndereco",this.dexie=this.dexie.documentoEndereco,this}get financeiroMovimentacao(){return this.log+="dexie financeiroMovimentacao",this.dexie=this.dexie.financeiroMovimentacao,this}get financeiroMovimentacaoN(){return this.log+="dexie financeiroMovimentacaoN",this.dexie=this.dexie.financeiroMovimentacaoN,this}get perfilContabilItem(){return this.log+="dexie perfilContabilItem",this.dexie=this.dexie.perfilContabilItem,this}get arquivo(){return this.log+="dexie arquivo",this.dexie=this.dexie.arquivo,this}get perfilContabil(){return this.log+="dexie perfilContabil",this.dexie=this.dexie.perfilContabil,this}get contatoCreditoExtrato(){return this.log+="dexie contatoCreditoExtrato",this.dexie=this.dexie.contatoCreditoExtrato,this}get financeiroRenegociacao(){return this.log+="dexie financeiroRenegociacao",this.dexie=this.dexie.financeiroRenegociacao,this}get _banco(){return this.log+="dexie _banco",this.dexie=this.dexie._banco,this}get financeiroBoleto(){return this.log+="dexie financeiroBoleto",this.dexie=this.dexie.financeiroBoleto,this}get financeiroBanco(){return this.log+="dexie financeiroBanco",this.dexie=this.dexie.financeiroBanco,this}get financeiroBoletoTitulo(){return this.log+="dexie financeiroBoletoTitulo",this.dexie=this.dexie.financeiroBoletoTitulo,this}get caixaConsolidacao(){return this.log+="dexie caixaConsolidacao",this.dexie=this.dexie.caixaConsolidacao,this}get caixaConsolidacao2(){return this.log+="dexie caixaConsolidacao2",this.dexie=this.dexie.caixaConsolidacao2,this}get dispositivoCliente(){return this.log+="dexie dispositivoCliente",this.dexie=this.dexie.dispositivoCliente,this}get documentoFiscalEletronico(){return this.log+="dexie documentoFiscalEletronico",this.dexie=this.dexie.documentoFiscalEletronico,this}get documentoFiscalEletronicoXml(){return this.log+="dexie documentoFiscalEletronicoXml",this.dexie=this.dexie.documentoFiscalEletronicoXml,this}get documentoFiscalEletronicoErro(){return this.log+="dexie documentoFiscalEletronicoErro",this.dexie=this.dexie.documentoFiscalEletronicoErro,this}get aliquotaSimples(){return this.log+="dexie aliquotaSimples",this.dexie=this.dexie.aliquotaSimples,this}get configuracaoImposto(){return this.log+="dexie configuracaoImposto",this.dexie=this.dexie.configuracaoImposto,this}get json(){return this.log+="dexie json",this.dexie=this.dexie.json,this}get equipamento(){return this.log+="dexie equipamento",this.dexie=this.dexie.equipamento,this}get eCommerce(){return this.log+="dexie eCommerce",this.dexie=this.dexie.eCommerce,this}get itemECommerce(){return this.log+="dexie itemECommerce",this.dexie=this.dexie.itemECommerce,this}get itemEspecificacao(){return this.log+="dexie itemEspecificacao",this.dexie=this.dexie.itemEspecificacao,this}get contatoEspecificacao(){return this.log+="dexie contatoEspecificacao",this.dexie=this.dexie.contatoEspecificacao,this}get itemEstoqueMinimo(){return this.log+="dexie itemEstoqueMinimo",this.dexie=this.dexie.itemEstoqueMinimo,this}get sistemaUsoLog(){return this.dexie=this.dexie.sistemaUsoLog,this}get documentoXML(){return this.log+="dexie documentoXML",this.dexie=this.dexie.documentoXML,this}get tarefa(){return this.log+="dexie tarefa",this.dexie=this.dexie.tarefa,this}get etiqueta(){return this.log+="dexie etiqueta",this.dexie=this.dexie.etiqueta,this}}const UD=localStorage.getItem("logarDexie")==="true",bc={};function Se(e,t){const o=e||localStorage.getItem("bancoDeDados");if(!o)throw console.error("Erro erp Dexie: N\xE3o foi poss\xEDvel encontrar um banco de dados."),console.trace(),new Error("N\xE3o foi poss\xEDvel encontrar um banco de dados.");if(t==="delete")if(bc[o]){const i=bc[o];return delete bc[o],i.delete()}else return kd.delete(o);if(bc[o])return UD?new $D(bc[o]):bc[o];const r=mu(`Verificando/atualizando schema... (${o})`),a=new kd(o);return a.version(1).stores({NFe:"&id",NFeHist:"&id",_cidade:"&id",_ncm:"&id, ncm",caixa:"&id",cest:"&id",cfop:"&id",clienteSistema:"&id",configuracoes:"&id",contato:"&id",contatoAnotacao:"&id, idContato",contatoConsulta:"&id, idContato",contatoEndereco:"&id, idContato",contatoFilho:"&id, idContato, idContatoRelacionado",contatoGrupo:"&id, idContato",contatoRedeSocial:"&id, idContato",contatoTelefone:"&id, idContato",documento:"&id, idContato, idFatura, idDocumentoAdicional, tipo",documentoCondicaoPagamento:"&id, idDocumento",documentoContato:"&id, idDocumento",documentoItem:"&id, idDocumento, idDocumentoAdicional",documentoSat:"&id, idDocumento",empresa:"&id",estoqueSaldoProdutoEmpresa:"&id, idItem",financeiroCentroCusto:"&id",financeiroPlanoConta:"&id",financeiroTitulo:"&id, idContato",formaPagamento:"&id",impostoConfiguracao:"&id, idNcm",impostoParametro:"&id, cod, idImpParamTipo",impostoParametroTipo:"&id, cod",item:"&id",itemComposicao:"&id, idItem",itemFornecedor:"&id, idItem",itemProducaoFase:"&id, idItem",itemQualidade:"&id, idItem",itemTabelaPreco:"&id",nfeIbpt:"&id, codigo",sincronismoFila:"&id",usuario:"&id"}),a.version(2).stores({NFe:"&id",NFeHist:"&id",_cidade:"&id",_ncm:"&id, ncm",caixa:"&id",cest:"&id",cfop:"&id",clienteSistema:"&id",configuracoes:"&id",contato:"&id",contatoAnotacao:"&id, idContato",contatoConsulta:"&id, idContato",contatoEndereco:"&id, idContato",contatoFilho:"&id, idContato, idContatoRelacionado",contatoGrupo:"&id, idContato",contatoRedeSocial:"&id, idContato",contatoTelefone:"&id, idContato",documento:"&id, idContato, idFatura, idDocumentoAdicional, tipo",documentoCondicaoPagamento:"&id, idDocumento",documentoContato:"&id, idDocumento",documentoItem:"&id, idDocumento, idDocumentoAdicional",documentoOperacao:"&id",documentoSat:"&id, idDocumento",empresa:"&id",estoqueSaldoProdutoEmpresa:"&id, idItem",financeiroCentroCusto:"&id",financeiroPlanoConta:"&id",financeiroTitulo:"&id, idContato",formaPagamento:"&id",impostoConfiguracao:"&id, idNcm",impostoParametro:"&id, cod, idImpParamTipo",impostoParametroTipo:"&id, cod",item:"&id",itemComposicao:"&id, idItem",itemFornecedor:"&id, idItem",itemProducaoFase:"&id, idItem",itemQualidade:"&id, idItem",itemTabelaPreco:"&id",nfeIbpt:"&id, codigo",sincronismoFila:"&id",usuario:"&id"}),a.version(3).stores({documentoStatus:"&id, idDocumento, idDocumentoCaixa, idDocumentoItem, idContatoResponsavel, idUsuarioAlterou"}),a.version(4).stores({documentoEndereco:"&id, idDocumento, idContato"}),a.version(5).stores({financeiroMovimentacao:"&id"}),a.version(6).stores({configuracoes:"&id, nome"}),a.version(7).stores({financeiroMovimentacaoN:"&id"}),a.version(8).stores({perfilContabilItem:"&id"}),a.version(9).stores({arquivo:"&id"}),a.version(10).stores({perfilContabil:"&id"}),a.version(11).stores({contatoCreditoExtrato:"&id"}),a.version(12).stores({financeiroRenegociacao:"&id, idFinanceiroTitulo, idFinanceiroMovimentacaoN"}),a.version(13).stores({financeiroTitulo:"&id, idContato, documentoId"}),a.version(14).stores({financeiroMovimentacao:"&id, idDocumentoCaixa"}),a.version(15).stores({_banco:"&id",financeiroBoleto:"&id, idEmpresa, idContato, idFinanceiroBanco, idFinanceiroRemessaLote, idNaoPagoMovimentacaoN",financeiroBanco:"&id, idEmpresa, idBanco, idFinanceiroPlanoConta"}),a.version(15).stores({financeiroBoletoTitulo:"&id, idFinanceiroBoleto, idFinanceiroTitulo"}),a.version(16).stores({impostoParametro:"&id, cod, idImpParamTipo, impParamTipoCod"}),a.version(17).stores({caixaConsolidacao:"&id, idDocumento, idDocumentoCaixa, idDocumentoStatus, idFormaPagamento, idTitulo"}),a.version(18).stores({documentoSat:"&id, idDocumento"}),a.version(19).stores({financeiroTitulo:"&id, idContato, documentoId, idDocumentoCaixa, idDocumentoCaixaLiquidacao",caixaConsolidacao2:"&id, idDocumentoCaixa, idDocumentoStatus, tabela, idTabela"}),a.version(20).stores({contatoCreditoExtrato:"&id, idContato",financeiroTitulo:"&id, idContato, documentoId, idDocumentoCaixa, idDocumentoCaixaLiquidacao, idFatura, idFinanceiroBoleto"}),a.version(21).stores({documentoContato:"&id, idDocumento, idContato"}),a.version(22).stores({documentoCondicaoPagamento:"&id, idDocumento, idDocumentoCaixa, idFinanceiroTitulo"}),a.version(23).stores({contato:"&id, idUsuario"}),a.version(24).stores({contato:"&id, idUsuario, codigoUsuario"}),a.version(25).stores({documento:"&id, idContato, idFatura, idDocumentoAdicional, idContatoVendedor, idContatoDigitador, idEmpresa, tipo"}),a.version(26).stores({empresa:"&id, idContato"}),a.version(27).stores({documento:"&id, idContato, idFatura, idDocumentoAdicional, idContatoVendedor, idContatoDigitador, idEmpresa, documentoId, tipo"}),a.version(28).stores({financeiroMovimentacao:"&id, idDocumentoCaixa, idFinanceiroPlanoConta"}),a.version(29).stores({documento:"&id, idContato, idFatura, idDocumentoAdicional, idContatoVendedor, idContatoDigitador, idEmpresa, tipo, [tipo+idContato]"}),a.version(30).stores({documento:"&id, idContato, idFatura, idDocumentoAdicional, idContatoVendedor, idContatoDigitador, idEmpresa, documentoId, tipo, [tipo+idContato]"}),a.version(31).stores({documento:"&id, idContato, idFatura, idDocumentoAdicional, idContatoVendedor, idContatoDigitador, idEmpresa, documentoId, tipo, [tipo+idContato], [tipo+documentoId]"}),a.version(32).stores({documentoItem:"&id, idDocumento, idDocumentoAdicional, tipoItem"}),a.version(33).stores({item:"&id, armacaoMaterial"}),a.version(34).stores({item:"&id, tipo"}),a.version(35).stores({arquivo:"&id, idTabelaMaster, tabelaMaster, [idTabelaMaster+tabelaMaster]"}),a.version(36).stores({financeiroMovimentacao:"&id, idDocumentoCaixa, idFinanceiroPlanoConta, [idDocumentoCaixa+idFinanceiroPlanoConta]"}),a.version(37).stores({financeiroMovimentacao:"&id, idDocumentoCaixa, idFinanceiroPlanoConta, [idDocumentoCaixa+idFinanceiroPlanoConta], [documentoId+documentoTipo]"}),a.version(38).stores({financeiroMovimentacao:"&id, idDocumentoCaixa, idFinanceiroPlanoConta, idFinanceiroMovimentacaoN, documentoId, documentoTipo, [idDocumentoCaixa+idFinanceiroPlanoConta], [documentoId+documentoTipo]"}),a.version(39).stores({cfop:"&id, codigoCfop"}),a.version(40).stores({perfilContabilItem:"&id, idPerfilContabil, idCfop"}),a.version(41).stores({documento:"&id, idContato, idFatura, idDocumentoAdicional, idContatoVendedor, idContatoDigitador, idEmpresa, documentoId, tipo, [tipo+idContato], [tipo+documentoId], [idContato+idEmpresa+tipo]"}),a.version(42).stores({perfilContabilItem:"&id, idPerfilContabil, idCfop, [idPerfilContabil+idCfop]"}),a.version(43).stores({estoqueSaldoProdutoEmpresa:"&id, idItem, idEmpresa, tipoEstoque, [idItem+idEmpresa+tipoEstoque]"}),a.version(44).stores({documento:"&id, idContato, idFatura, idDocumentoAdicional, idContatoVendedor, idContatoDigitador, idEmpresa, documentoId, tipo, status, [tipo+status], [tipo+status+idEmpresa], [tipo+idContato], [tipo+documentoId], [idContato+idEmpresa+tipo]"}),a.version(45).stores({caixa:"&id, idEmpresa"}),a.version(46).stores({documento:"&id, idContato, idFatura, idDocumentoAdicional, idContatoVendedor, idContatoDigitador, idEmpresa, documentoId, tipo, status, [tipo+idEmpresa], [tipo+status], [tipo+status+idEmpresa], [tipo+idContato], [tipo+documentoId], [idContato+idEmpresa+tipo]"}),a.version(47).stores({documento:"&id, idContato, idFatura, idDocumentoAdicional, idContatoVendedor, idContatoDigitador, idEmpresa, documentoId, tipo, status, [tipo+idEmpresa], [tipo+status], [tipo+status+idEmpresa], [tipo+idContato], [tipo+documentoId], [idContato+idEmpresa+tipo], [idContato+idEmpresa+tipo+status]"}),a.version(48).stores({documento:"&id, idContato, idFatura, idDocumentoAdicional, idContatoVendedor, idContatoDigitador, idEmpresa, documentoId, tipo, status, [tipo+idEmpresa], [tipo+status], [tipo+status+idEmpresa], [tipo+idContato], [tipo+documentoId], [idContato+idEmpresa+tipo], [idContato+idEmpresa+tipo+status], [idContato+tipo+status]"}),a.version(49).stores({contato:"&id, idUsuario, codigoUsuario, codigoContato"}),a.version(50).stores({sincronismoFila:"++_ordem, &id"}),a.version(51).stores({documentoItem:"&id, idDocumento, idDocumentoAdicional, idItem, tipoItem"}),a.version(52).stores({documentoItem:"&id, idDocumento, idDocumentoAdicional, idItem, tipoItem, [idDocumento+idItem]"}),a.version(53).stores({financeiroTitulo:"&id, idContato, documentoId, idDocumentoCaixa, idDocumentoCaixaLiquidacao, idFatura, idFinanceiroBoleto, [idFatura+idDocumentoCaixa], [documentoId+idDocumentoCaixa]"}),a.version(54).stores({financeiroMovimentacao:"&id, idDocumentoCaixa, idFinanceiroPlanoConta, idFinanceiroMovimentacaoN, documentoId, documentoTipo, [idDocumentoCaixa+idFinanceiroPlanoConta], [documentoId+documentoTipo], [idDocumentoCaixa+documentoId]"}),a.version(55).stores({documento:"&id, idContato, idFatura, idDocumentoAdicional, idContatoVendedor, idContatoDigitador, idEmpresa, documentoId, tipo, status, [tipo+idEmpresa], [tipo+status], [tipo+status+idEmpresa], [tipo+idContato], [tipo+documentoId], [idContato+idEmpresa+tipo], [idContato+idEmpresa+tipo+status], [idContato+tipo+status], [tipo+idFatura]"}),a.version(56).stores({dispositivoCliente:"&id"}),a.version(57).stores({item:"&id, tipo, ativo"}),a.version(58).stores({documentoItem:"&id, idDocumento, idDocumentoAdicional, idItem, tipoItem, [idDocumento+idItem], [idDocumento+tipoItem]"}),a.version(59).stores({financeiroMovimentacao:"&id, idDocumentoCaixa, idFinanceiroPlanoConta, idFinanceiroMovimentacaoN, documentoId, documentoTipo, [idDocumentoCaixa+idFinanceiroPlanoConta], [documentoId+documentoTipo], [idDocumentoCaixa+documentoId], [idDocumentoCaixa+documentoTipo]"}),a.version(60).stores({documento:"&id, idContato, idFatura, idDocumentoAdicional, idContatoVendedor, idContatoDigitador, idEmpresa, documentoId, tipo, status, [tipo+idEmpresa], [tipo+status], [tipo+status+idEmpresa], [tipo+idContato], [tipo+documentoId], [idContato+idEmpresa+tipo], [idContato+idEmpresa+tipo+status], [idContato+tipo+status], [tipo+idFatura], [tipo+documentoId+documentoTipo]"}),a.version(61).stores({_cidade:"&id, ativo"}),a.version(62).stores({itemTabelaPreco:"&id, idEmpresa"}),a.version(63).stores({financeiroPlanoConta:"&id, codigoFinanceiroPlanoConta"}),a.version(64).stores({documentoFiscalEletronico:"&id, idDocumento, tpAmb, cpFCnpjEmitente, mod, serie, nNF, [tpAmb+cpFCnpjEmitente+mod+serie+nNF]",documentoFiscalEletronicoXml:"&id, idDocumento, idDocumentoFiscalEletronico",documentoFiscalEletronicoErro:"&id, idDocumento, idDocumentoFiscalEletronico"}),a.version(65).stores({documentoFiscalEletronico:"&id, idDocumento, tpAmb, cpFCnpjEmitente, mod, serie, nNF, [tpAmb+cpFCnpjEmitente+mod+serie]"}),a.version(66).stores({documentoFiscalEletronico:"&id, idDocumento, tpAmb, cpFCnpjEmitente, mod, serie, nNF, [tpAmb+cpFCnpjEmitente+mod+serie], [idDocumento+situacao]",documentoFiscalEletronicoXml:"&id, idDocumento, idDocumentoFiscalEletronico, [idDocumentoFiscalEletronico+status+situacao]"}),a.version(69).stores({documentoFiscalEletronico:"&id, idDocumento, [idDocumento+situacao]"}),a.version(70).stores({documentoFiscalEletronico:"&id, idDocumento, [idDocumento+situacao], [tpAmb+cpfCnpjEmitente+mod+serie]"}),a.version(71).stores({documentoFiscalEletronicoXml:"&id, idDocumento, idDocumentoFiscalEletronico, [idDocumentoFiscalEletronico+status+situacao], [idDocumentoFiscalEletronico+operacao]"}),a.version(72).stores({_cidade:"&id, cidadeCodIbge"}),a.version(73).stores({documentoOperacao:"&id, codigoDocumentoOperacao"}),a.version(74).stores({cfop:"&id, codigoCfop, cfop"}),a.version(75).stores({documentoOperacao:"&id, codigoDocumentoOperacao, idCfop"}),a.version(76).stores({item:"&id, tipo, ativo, ncm"}),a.version(77).stores({nfeIbpt:"&id, codigo, [codigo+idContato]"}),a.version(78).stores({documento:"&id, idContato, idFatura, idDocumentoAdicional, idContatoVendedor, idContatoDigitador, idEmpresa, documentoId, tipo, status, [tipo+idEmpresa], [tipo+status], [tipo+status+idEmpresa], [tipo+idContato], [tipo+documentoId], [idContato+idEmpresa+tipo], [idContato+idEmpresa+tipo+status], [idContato+tipo+status], [tipo+idFatura], [tipo+documentoId+documentoTipo], [tipo+idContatoVendedor], [tipo+idContatoDigitador]"}),a.version(79).stores({contato:"&id, idUsuario, codigoUsuario, codigoContato, segmento"}),a.version(80).stores({contato:"&id, idUsuario, codigoUsuario, codigoContato, segmento, numeroDocumentoNacional"}),a.version(81).stores({documentoFiscalEletronico:"&id, idDocumento, tipo, [idDocumento+situacao], [tpAmb+cpfCnpjEmitente+mod+serie]"}),a.version(82).stores({aliquotaSimples:"&id, idEmpresa"}),a.version(83).stores({contatoGrupo:"&id, idContato, descricao"}),a.version(84).stores({configuracaoImposto:"&id"}),a.version(85).stores({financeiroBoleto:"&id, idFinanceiroBanco, nossoNumero"}),a.version(86).stores({json:"&id, descricao, referencia, [descricao+referencia]"}),a.version(87).stores({documento:"&id, idContato, idFatura, idDocumentoAdicional, idContatoVendedor, idContatoDigitador, idEmpresa, documentoId, tipo, status, [tipo+idEmpresa], [tipo+idEmpresa+dataHoraEmissao], [tipo+idEmpresa+dataHoraFinalizado], [tipo+idContato+dataHoraEmissao], [tipo+idContato+dataHoraFinalizado], [tipo+status], [tipo+status+idEmpresa], [tipo+idContato], [tipo+documentoId], [idContato+idEmpresa+tipo], [idContato+idEmpresa+tipo+status], [idContato+tipo+status], [tipo+idFatura], [tipo+documentoId+documentoTipo], [tipo+idContatoVendedor], [tipo+idContatoDigitador]"}),a.version(88).stores({documentoFiscalEletronicoErro:"&id, idDocumento, idDocumentoFiscalEletronico, [tpAmb+cpfCnpjEmitente+mod+serie+nNF+situacao]"}),a.version(89).stores({equipamento:"&id, idItem, idContato"}),a.version(90).stores({documento:"&id, idContato, idFatura, idDocumentoAdicional, idContatoVendedor, idContatoDigitador, idEmpresa, documentoId, tipo, status, [tipo+idEmpresa], [tipo+idEmpresa+dataHoraEmissao], [tipo+idEmpresa+dataHoraFinalizado], [tipo+idContato+dataHoraEmissao], [tipo+idContato+dataHoraFinalizado], [tipo+status], [tipo+status+idEmpresa], [tipo+idContato], [tipo+documentoId], [idContato+idEmpresa+tipo], [idContato+idEmpresa+tipo+status], [idContato+tipo+status], [tipo+idFatura], [tipo+documentoId+documentoTipo], [tipo+idContatoVendedor], [tipo+idContatoDigitador], idEquipamento"}),a.version(91).stores({itemTabelaPreco:"&id, idEmpresa, idItem, tipo"}),a.version(92).stores({documentoFiscalEletronicoErro:"&id, idDocumento, idDocumentoFiscalEletronico, chNFe, [tpAmb+cpfCnpjEmitente+mod+serie+nNF+situacao]"}),a.version(93).stores({documentoFiscalEletronico:"&id, idDocumento, tipo, situacao, [tipo+situacao], [idDocumento+situacao], [tpAmb+cpfCnpjEmitente+mod+serie]"}),a.version(94).stores({documento:"&id, idContato, idFatura, idDocumentoAdicional, idContatoVendedor, idContatoDigitador, idEmpresa, documentoId, tipo, status, dataHoraEmissao, [tipo+idEmpresa], [tipo+idEmpresa+dataHoraEmissao], [tipo+idEmpresa+dataHoraFinalizado], [tipo+idContato+dataHoraEmissao], [tipo+idContato+dataHoraFinalizado], [tipo+status], [tipo+status+idEmpresa], [tipo+idContato], [tipo+documentoId], [idContato+idEmpresa+tipo], [idContato+idEmpresa+tipo+status], [idContato+tipo+status], [tipo+idFatura], [tipo+documentoId+documentoTipo], [tipo+idContatoVendedor], [tipo+idContatoDigitador], idEquipamento",financeiroTitulo:"&id, idContato, documentoId, idDocumentoCaixa, idDocumentoCaixaLiquidacao, idFatura, idFinanceiroBoleto, dataEmissao, [idFatura+idDocumentoCaixa], [documentoId+idDocumentoCaixa]",financeiroMovimentacao:"&id, idDocumentoCaixa, idFinanceiroPlanoConta, idFinanceiroMovimentacaoN, documentoId, documentoTipo, dataEmissao, [idDocumentoCaixa+idFinanceiroPlanoConta], [documentoId+documentoTipo], [idDocumentoCaixa+documentoId], [idDocumentoCaixa+documentoTipo]"}),a.version(95).stores({eCommerce:"&id",itemECommerce:"&id, idItem, idECommerce, idItemNoECommerce, [idItem+idECommerce]"}),a.version(96).stores({documento:"&id, idContato, idFatura, idDocumentoAdicional, idContatoVendedor, idContatoDigitador, idEmpresa, documentoId, tipo, status, dataHoraEmissao, [tipo+idEmpresa], [tipo+idEmpresa+dataHoraEmissao], [tipo+idEmpresa+dataHoraFinalizado], [tipo+idContato+dataHoraEmissao], [tipo+idContato+dataHoraFinalizado], [tipo+status], [tipo+status+idEmpresa], [tipo+idContato], [tipo+documentoId], [idContato+idEmpresa+tipo], [idContato+idEmpresa+tipo+status], [idContato+tipo+status], [tipo+idFatura], [tipo+documentoId+documentoTipo], [tipo+idContatoVendedor], [tipo+idContatoDigitador], idEquipamento, [tipo+operacao+status]"}),a.version(97).stores({itemEspecificacao:"&id, idItem"}),a.version(98).stores({contatoEspecificacao:"&id, idContato",itemEstoqueMinimo:"&id, idItem, idEmpresa"}),a.version(99).stores({sistemaUsoLog:"&id"}),a.version(100).stores({documentoXML:"&id, idDocumento, xmlAux, xmlData, enviarLoteRpsResposta, consultarSituacaoLoteRpsResposta, consultarNfseRpsResposta"}),a.version(101).stores({documento:"&id, idContato, idFatura, idDocumentoAdicional, idContatoVendedor, idContatoDigitador, idEmpresa, documentoId, tipo, status, dataHoraEmissao, [tipo+idEmpresa], [tipo+idEmpresa+dataHoraEmissao], [tipo+idEmpresa+dataHoraFinalizado], [tipo+idContato+dataHoraEmissao], [tipo+idContato+dataHoraFinalizado], [tipo+status], [tipo+status+idEmpresa], [tipo+idContato], [tipo+documentoId], [idContato+idEmpresa+tipo], [idContato+idEmpresa+tipo+status], [idContato+tipo+status], [tipo+idFatura], [tipo+documentoId+documentoTipo], [tipo+idContatoVendedor], [tipo+idContatoDigitador], idEquipamento, [tipo+operacao+status], [tipo+operacao]"}),a.version(102).stores({documentoFiscalEletronicoXml:"&id, idDocumento, idDocumentoFiscalEletronico, situacao, [idDocumentoFiscalEletronico+status+situacao], [idDocumentoFiscalEletronico+operacao]"}),a.version(103).stores({tarefa:"&id"}),a.version(104).stores({etiqueta:"&id, idItem, cpfUsuarioLogado"}),a.version(105).stores({financeiroTitulo:"&id, idContato, documentoId, idDocumentoCaixa, idDocumentoCaixaLiquidacao, idFatura, idFinanceiroBoleto, dataEmissao, dataPagamento, [idFatura+idDocumentoCaixa], [documentoId+idDocumentoCaixa]"}),a.version(106).stores({documento:"&id, idContato, idFatura, idDocumentoAdicional, idContatoVendedor, idContatoDigitador, idEmpresa, documentoId, tipo, status, dataHoraEmissao, [tipo+idEmpresa], [tipo+idEmpresa+dataHoraEmissao], [tipo+idEmpresa+dataHoraFinalizado], [tipo+idContato+dataHoraEmissao], [tipo+idContato+dataHoraFinalizado], [tipo+status], [tipo+status+idEmpresa], [tipo+idContato], [tipo+idContatoResponsavel], [tipo+documentoId], [idContato+idEmpresa+tipo], [idContato+idEmpresa+tipo+status], [idContato+tipo+status], [tipo+idFatura], [tipo+documentoId+documentoTipo], [tipo+idContatoVendedor], [tipo+idContatoDigitador], idEquipamento, [tipo+operacao+status], [tipo+operacao]"}),a.version(107).stores({itemFornecedor:"&id, idItem, referencia"}),a.version(108).stores({item:"&id, tipo, ativo, ncm, referencia"}),a.version(109).stores({documento:"&id, idContato, idFatura, idDocumentoAdicional, idContatoVendedor, idContatoDigitador, idEmpresa, documentoId, tipo, status, dataHoraEmissao, [tipo+idEmpresa], [tipo+idEmpresa+dataHoraEmissao], [tipo+idEmpresa+dataHoraFinalizado], [tipo+idContato+dataHoraEmissao], [tipo+idContato+dataHoraFinalizado], [tipo+status], [tipo+status+idEmpresa], [tipo+idContato], [tipo+idContatoResponsavel], [tipo+documentoId], [idContato+idEmpresa+tipo], [idContato+idEmpresa+tipo+status], [idContato+tipo+status], [tipo+idFatura], [tipo+documentoId+documentoTipo], [tipo+idContatoVendedor], [tipo+idContatoDigitador], idEquipamento, [tipo+operacao+status], [tipo+operacao], [tipo+numero]"}),a.version(110).stores({itemSped0221:"&id, idItem"}),a.version(111).stores({itemEstoqueMinimo:"&id, idItem, idEmpresa, [idEmpresa+idItem]"}),bc[o]=a,pu(r,1),UD?new $D(bc[o]):a}const Gt=new kd("plataforma");Gt.version(1).stores({clienteSistema:"&id",empresa:"&id",empresaUsuarioPermissao:"&id",grupo:"&id",grupoPermissao:"&id",objeto:"&id",sistema:"&id",sistemaObjeto:"&id",usuario:"&id, cpf",usuarioPermissao:"&id",usuarioPermissaoSistema:"&id",sincronismo:"&bancoDeDados",sincronismoFila:"&id"});Gt.version(2).stores({empresaUsuarioPermissao:"&id, idEmpresa, idUsuario, [idEmpresa+idUsuario]"});Gt.version(3).stores({usuario:"&id, codigoUsuario"});Gt.version(4).stores({usuario:"&id, cpf, codigoUsuario"});Gt.version(5).stores({empresa:"&id, codigoClienteSistema"});Gt.version(6).stores({empresaUsuarioPermissao:"&id, idEmpresa, idUsuario, codigoEmpresa, codigoUsuario, [idEmpresa+idUsuario], [codigoEmpresa+codigoUsuario]"});Gt.version(7).stores({contato:"&id"});Gt.version(8).stores({login:"&id"});Gt.version(9).stores({login:"&id, cpf"});Gt.version(10).stores({empresa:"&id, codigoClienteSistema, idContato"});Gt.version(11).stores({empresa:"&id, codigoClienteSistema, idContato, codigoContato"});Gt.version(12).stores({objeto:"&id, nomeObjeto",sistemaObjeto:"&id, idObjeto"});Gt.version(13).stores({sistemaObjeto:"&id, idObjeto, [idPai+idSistema]"});async function $f(e,t){t.id=Kt(),await Se()[e].add(t),await ut("adicionar",e,t.id,t)}const F5=function(e,t){return e.reduce(function(o,r){return(o[r[t]]=o[r[t]]||[]).push(r),o},{})};function IQ(e){if(!e)throw new Error("\xC9 necess\xE1rio fornecer um endere\xE7o.");const t=e.toLowerCase();let o="link";const r={facebook:["facebook.com","fb.com","fb.me"],instagram:["instagram.com","instagr.am"],linkedin:["linkedin.com"],pinterest:["pinterest.com"],tumblr:["tumblr.com"],twitter:["twitter.com"],vimeo:["vimeo.com"],youtube:["youtube.com","youtu.be"]};try{e=new URL(t)||{};for(const a in r)if(r[a].find(n=>e.hostname.includes(n))){o=a;break}return{link:t,tipo:o}}catch{throw new Error("Insira um endere\xE7o v\xE1lido.")}}function lr(e=0,t=2){const o=e<0?-1:1;return o*$lodash.round(o*e,t)}function AQ(e){if(e>0&&e<=.05)return .05;if(e>.05&&e<=.1)return .1;if(e>.1&&e<=.25)return .25;if(e>.25&&e<=.5)return .5;if(e>.5&&e<=1)return 1}function TQ(e=0,t=0,o=2){if(!Number.isFinite(e))throw new Error("First argument is not a valid number");if(!Number.isFinite(t))throw new Error("Second argument is not a valid number");if(!Number.isInteger(o))throw new Error("Third argument is not an integer");if(!t)return e;let r,a;return t=AQ(t),e=lr(e,o),r=Math.trunc(e),a=lr(e-r,o),lr(r+t*Math.floor(a/t),o)}function DQ(e){if(e>0&&e<=.01)return .01;if(e>.01&&e<=.05)return .05;if(e>.05&&e<=.1)return .1;if(e>.1&&e<=.25)return .25;if(e>.25&&e<=.5)return .5;if(e>.5&&e<=1)return 1}function Zx(e=0,t=0,o=2){if(!Number.isFinite(e))throw new Error("First argument is not a valid number");if(!Number.isFinite(t))throw new Error("Second argument is not a valid number");if(!Number.isInteger(o))throw new Error("Third argument is not an integer");if(!t)return e;let r,a;return t=DQ(t),e=lr(e,o),r=Math.trunc(e),a=lr(e-r,o),lr(r+t*Math.ceil(a/t),o)}function OQ(e){return!e&&e!==0?null:Math.round(Number(e)*2)/2}var PQ=["ColorMix","Demo_Ricardo","Diamond","DisfiBA","ElisPedreira","GeeksWeb","Matesto4x4SP","MesquitaMaquinas","PGNegociosSP","Presence","x_carlos_bb"];const FQ={"-":"+",_:"/"},MQ={"+":"-","/":"_","=":""};var NQ={decodeFromUrl(e){return e.replace(/[-_.]/g,t=>FQ[t]),e=e+"===".slice((e.length+3)%4),atob(e)},decode(e){return atob(e)},encode(e){return btoa(e)},encodeToUrl(e){return e=btoa(e),e.replace(/[+/=]/g,t=>MQ[t])}};function kQ(e){return new Promise(t=>{const o=new FileReader;o.onloadend=()=>t(o.result),o.readAsDataURL(e)})}var vt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function RQ(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Wke(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(o){var r=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,r.get?r:{enumerable:!0,get:function(){return e[o]}})}),t}function VQ(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var bE={exports:{}},M5=function(t,o){return function(){for(var a=new Array(arguments.length),i=0;i<a.length;i++)a[i]=arguments[i];return t.apply(o,a)}},BQ=M5,Gd=Object.prototype.toString;function yE(e){return Gd.call(e)==="[object Array]"}function eC(e){return typeof e=="undefined"}function qQ(e){return e!==null&&!eC(e)&&e.constructor!==null&&!eC(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function LQ(e){return Gd.call(e)==="[object ArrayBuffer]"}function $Q(e){return typeof FormData!="undefined"&&e instanceof FormData}function UQ(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function zQ(e){return typeof e=="string"}function HQ(e){return typeof e=="number"}function N5(e){return e!==null&&typeof e=="object"}function Rv(e){if(Gd.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function jQ(e){return Gd.call(e)==="[object Date]"}function GQ(e){return Gd.call(e)==="[object File]"}function WQ(e){return Gd.call(e)==="[object Blob]"}function k5(e){return Gd.call(e)==="[object Function]"}function QQ(e){return N5(e)&&k5(e.pipe)}function XQ(e){return typeof URLSearchParams!="undefined"&&e instanceof URLSearchParams}function KQ(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function YQ(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function xE(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),yE(e))for(var o=0,r=e.length;o<r;o++)t.call(null,e[o],o,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}function tC(){var e={};function t(a,i){Rv(e[i])&&Rv(a)?e[i]=tC(e[i],a):Rv(a)?e[i]=tC({},a):yE(a)?e[i]=a.slice():e[i]=a}for(var o=0,r=arguments.length;o<r;o++)xE(arguments[o],t);return e}function JQ(e,t,o){return xE(t,function(a,i){o&&typeof a=="function"?e[i]=BQ(a,o):e[i]=a}),e}function ZQ(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Rn={isArray:yE,isArrayBuffer:LQ,isBuffer:qQ,isFormData:$Q,isArrayBufferView:UQ,isString:zQ,isNumber:HQ,isObject:N5,isPlainObject:Rv,isUndefined:eC,isDate:jQ,isFile:GQ,isBlob:WQ,isFunction:k5,isStream:QQ,isURLSearchParams:XQ,isStandardBrowserEnv:YQ,forEach:xE,merge:tC,extend:JQ,trim:KQ,stripBOM:ZQ},yf=Rn;function zD(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var R5=function(t,o,r){if(!o)return t;var a;if(r)a=r(o);else if(yf.isURLSearchParams(o))a=o.toString();else{var i=[];yf.forEach(o,function(l,u){l===null||typeof l=="undefined"||(yf.isArray(l)?u=u+"[]":l=[l],yf.forEach(l,function(d){yf.isDate(d)?d=d.toISOString():yf.isObject(d)&&(d=JSON.stringify(d)),i.push(zD(u)+"="+zD(d))}))}),a=i.join("&")}if(a){var n=t.indexOf("#");n!==-1&&(t=t.slice(0,n)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t},eX=Rn;function k_(){this.handlers=[]}k_.prototype.use=function(t,o,r){return this.handlers.push({fulfilled:t,rejected:o,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};k_.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};k_.prototype.forEach=function(t){eX.forEach(this.handlers,function(r){r!==null&&t(r)})};var tX=k_,oX=Rn,aX=function(t,o){oX.forEach(t,function(a,i){i!==o&&i.toUpperCase()===o.toUpperCase()&&(t[o]=a,delete t[i])})},V5=function(t,o,r,a,i){return t.config=o,r&&(t.code=r),t.request=a,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},rX=V5,B5=function(t,o,r,a,i){var n=new Error(t);return rX(n,o,r,a,i)},iX=B5,nX=function(t,o,r){var a=r.config.validateStatus;!r.status||!a||a(r.status)?t(r):o(iX("Request failed with status code "+r.status,r.config,null,r.request,r))},X1=Rn,sX=X1.isStandardBrowserEnv()?function(){return{write:function(o,r,a,i,n,s){var l=[];l.push(o+"="+encodeURIComponent(r)),X1.isNumber(a)&&l.push("expires="+new Date(a).toGMTString()),X1.isString(i)&&l.push("path="+i),X1.isString(n)&&l.push("domain="+n),s===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(o){var r=document.cookie.match(new RegExp("(^|;\\s*)("+o+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(o){this.write(o,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),lX=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)},cX=function(t,o){return o?t.replace(/\/+$/,"")+"/"+o.replace(/^\/+/,""):t},uX=lX,dX=cX,fX=function(t,o){return t&&!uX(o)?dX(t,o):o},uy=Rn,mX=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],pX=function(t){var o={},r,a,i;return t&&uy.forEach(t.split(`
`),function(s){if(i=s.indexOf(":"),r=uy.trim(s.substr(0,i)).toLowerCase(),a=uy.trim(s.substr(i+1)),r){if(o[r]&&mX.indexOf(r)>=0)return;r==="set-cookie"?o[r]=(o[r]?o[r]:[]).concat([a]):o[r]=o[r]?o[r]+", "+a:a}}),o},HD=Rn,hX=HD.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a"),r;function a(i){var n=i;return t&&(o.setAttribute("href",n),n=o.href),o.setAttribute("href",n),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:o.pathname.charAt(0)==="/"?o.pathname:"/"+o.pathname}}return r=a(window.location.href),function(n){var s=HD.isString(n)?a(n):n;return s.protocol===r.protocol&&s.host===r.host}}():function(){return function(){return!0}}(),K1=Rn,vX=nX,gX=sX,_X=R5,bX=fX,yX=pX,xX=hX,dy=B5,jD=function(t){return new Promise(function(r,a){var i=t.data,n=t.headers,s=t.responseType;K1.isFormData(i)&&delete n["Content-Type"];var l=new XMLHttpRequest;if(t.auth){var u=t.auth.username||"",c=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";n.Authorization="Basic "+btoa(u+":"+c)}var d=bX(t.baseURL,t.url);l.open(t.method.toUpperCase(),_X(d,t.params,t.paramsSerializer),!0),l.timeout=t.timeout;function f(){if(!!l){var p="getAllResponseHeaders"in l?yX(l.getAllResponseHeaders()):null,v=!s||s==="text"||s==="json"?l.responseText:l.response,g={data:v,status:l.status,statusText:l.statusText,headers:p,config:t,request:l};vX(r,a,g),l=null}}if("onloadend"in l?l.onloadend=f:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(f)},l.onabort=function(){!l||(a(dy("Request aborted",t,"ECONNABORTED",l)),l=null)},l.onerror=function(){a(dy("Network Error",t,null,l)),l=null},l.ontimeout=function(){var v="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(v=t.timeoutErrorMessage),a(dy(v,t,t.transitional&&t.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",l)),l=null},K1.isStandardBrowserEnv()){var m=(t.withCredentials||xX(d))&&t.xsrfCookieName?gX.read(t.xsrfCookieName):void 0;m&&(n[t.xsrfHeaderName]=m)}"setRequestHeader"in l&&K1.forEach(n,function(v,g){typeof i=="undefined"&&g.toLowerCase()==="content-type"?delete n[g]:l.setRequestHeader(g,v)}),K1.isUndefined(t.withCredentials)||(l.withCredentials=!!t.withCredentials),s&&s!=="json"&&(l.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&l.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(v){!l||(l.abort(),a(v),l=null)}),i||(i=null),l.send(i)})},Jr=Rn,GD=aX,CX=V5,wX={"Content-Type":"application/x-www-form-urlencoded"};function WD(e,t){!Jr.isUndefined(e)&&Jr.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function EX(){var e;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(e=jD),e}function SX(e,t,o){if(Jr.isString(e))try{return(t||JSON.parse)(e),Jr.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(o||JSON.stringify)(e)}var R_={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:EX(),transformRequest:[function(t,o){return GD(o,"Accept"),GD(o,"Content-Type"),Jr.isFormData(t)||Jr.isArrayBuffer(t)||Jr.isBuffer(t)||Jr.isStream(t)||Jr.isFile(t)||Jr.isBlob(t)?t:Jr.isArrayBufferView(t)?t.buffer:Jr.isURLSearchParams(t)?(WD(o,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Jr.isObject(t)||o&&o["Content-Type"]==="application/json"?(WD(o,"application/json"),SX(t)):t}],transformResponse:[function(t){var o=this.transitional,r=o&&o.silentJSONParsing,a=o&&o.forcedJSONParsing,i=!r&&this.responseType==="json";if(i||a&&Jr.isString(t)&&t.length)try{return JSON.parse(t)}catch(n){if(i)throw n.name==="SyntaxError"?CX(n,this,"E_JSON_PARSE"):n}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};R_.headers={common:{Accept:"application/json, text/plain, */*"}};Jr.forEach(["delete","get","head"],function(t){R_.headers[t]={}});Jr.forEach(["post","put","patch"],function(t){R_.headers[t]=Jr.merge(wX)});var CE=R_,IX=Rn,AX=CE,TX=function(t,o,r){var a=this||AX;return IX.forEach(r,function(n){t=n.call(a,t,o)}),t},q5=function(t){return!!(t&&t.__CANCEL__)},QD=Rn,fy=TX,DX=q5,OX=CE;function my(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var PX=function(t){my(t),t.headers=t.headers||{},t.data=fy.call(t,t.data,t.headers,t.transformRequest),t.headers=QD.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),QD.forEach(["delete","get","head","post","put","patch","common"],function(a){delete t.headers[a]});var o=t.adapter||OX.adapter;return o(t).then(function(a){return my(t),a.data=fy.call(t,a.data,a.headers,t.transformResponse),a},function(a){return DX(a)||(my(t),a&&a.response&&(a.response.data=fy.call(t,a.response.data,a.response.headers,t.transformResponse))),Promise.reject(a)})},ci=Rn,L5=function(t,o){o=o||{};var r={},a=["url","method","data"],i=["headers","auth","proxy","params"],n=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function l(f,m){return ci.isPlainObject(f)&&ci.isPlainObject(m)?ci.merge(f,m):ci.isPlainObject(m)?ci.merge({},m):ci.isArray(m)?m.slice():m}function u(f){ci.isUndefined(o[f])?ci.isUndefined(t[f])||(r[f]=l(void 0,t[f])):r[f]=l(t[f],o[f])}ci.forEach(a,function(m){ci.isUndefined(o[m])||(r[m]=l(void 0,o[m]))}),ci.forEach(i,u),ci.forEach(n,function(m){ci.isUndefined(o[m])?ci.isUndefined(t[m])||(r[m]=l(void 0,t[m])):r[m]=l(void 0,o[m])}),ci.forEach(s,function(m){m in o?r[m]=l(t[m],o[m]):m in t&&(r[m]=l(void 0,t[m]))});var c=a.concat(i).concat(n).concat(s),d=Object.keys(t).concat(Object.keys(o)).filter(function(m){return c.indexOf(m)===-1});return ci.forEach(d,u),r};const FX="axios",MX="0.21.4",NX="Promise based HTTP client for the browser and node.js",kX="index.js",RX={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},VX={type:"git",url:"https://github.com/axios/axios.git"},BX=["xhr","http","ajax","promise","node"],qX="Matt Zabriskie",LX="MIT",$X={url:"https://github.com/axios/axios/issues"},UX="https://axios-http.com",zX={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},HX={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jX="dist/axios.min.js",GX="dist/axios.min.js",WX="./index.d.ts",QX={"follow-redirects":"^1.14.0"},XX=[{path:"./dist/axios.min.js",threshold:"5kB"}];var KX={name:FX,version:MX,description:NX,main:kX,scripts:RX,repository:VX,keywords:BX,author:qX,license:LX,bugs:$X,homepage:UX,devDependencies:zX,browser:HX,jsdelivr:jX,unpkg:GX,typings:WX,dependencies:QX,bundlesize:XX},$5=KX,wE={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){wE[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});var XD={},YX=$5.version.split(".");function U5(e,t){for(var o=t?t.split("."):YX,r=e.split("."),a=0;a<3;a++){if(o[a]>r[a])return!0;if(o[a]<r[a])return!1}return!1}wE.transitional=function(t,o,r){var a=o&&U5(o);function i(n,s){return"[Axios v"+$5.version+"] Transitional option '"+n+"'"+s+(r?". "+r:"")}return function(n,s,l){if(t===!1)throw new Error(i(s," has been removed in "+o));return a&&!XD[s]&&(XD[s]=!0,console.warn(i(s," has been deprecated since v"+o+" and will be removed in the near future"))),t?t(n,s,l):!0}};function JX(e,t,o){if(typeof e!="object")throw new TypeError("options must be an object");for(var r=Object.keys(e),a=r.length;a-- >0;){var i=r[a],n=t[i];if(n){var s=e[i],l=s===void 0||n(s,i,e);if(l!==!0)throw new TypeError("option "+i+" must be "+l);continue}if(o!==!0)throw Error("Unknown option "+i)}}var ZX={isOlderVersion:U5,assertOptions:JX,validators:wE},z5=Rn,eK=R5,KD=tX,YD=PX,V_=L5,H5=ZX,xf=H5.validators;function _h(e){this.defaults=e,this.interceptors={request:new KD,response:new KD}}_h.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=V_(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var o=t.transitional;o!==void 0&&H5.assertOptions(o,{silentJSONParsing:xf.transitional(xf.boolean,"1.0.0"),forcedJSONParsing:xf.transitional(xf.boolean,"1.0.0"),clarifyTimeoutError:xf.transitional(xf.boolean,"1.0.0")},!1);var r=[],a=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(t)===!1||(a=a&&f.synchronous,r.unshift(f.fulfilled,f.rejected))});var i=[];this.interceptors.response.forEach(function(f){i.push(f.fulfilled,f.rejected)});var n;if(!a){var s=[YD,void 0];for(Array.prototype.unshift.apply(s,r),s=s.concat(i),n=Promise.resolve(t);s.length;)n=n.then(s.shift(),s.shift());return n}for(var l=t;r.length;){var u=r.shift(),c=r.shift();try{l=u(l)}catch(d){c(d);break}}try{n=YD(l)}catch(d){return Promise.reject(d)}for(;i.length;)n=n.then(i.shift(),i.shift());return n};_h.prototype.getUri=function(t){return t=V_(this.defaults,t),eK(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};z5.forEach(["delete","get","head","options"],function(t){_h.prototype[t]=function(o,r){return this.request(V_(r||{},{method:t,url:o,data:(r||{}).data}))}});z5.forEach(["post","put","patch"],function(t){_h.prototype[t]=function(o,r,a){return this.request(V_(a||{},{method:t,url:o,data:r}))}});var tK=_h;function EE(e){this.message=e}EE.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};EE.prototype.__CANCEL__=!0;var j5=EE,oK=j5;function Dg(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(a){t=a});var o=this;e(function(a){o.reason||(o.reason=new oK(a),t(o.reason))})}Dg.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Dg.source=function(){var t,o=new Dg(function(a){t=a});return{token:o,cancel:t}};var aK=Dg,rK=function(t){return function(r){return t.apply(null,r)}},iK=function(t){return typeof t=="object"&&t.isAxiosError===!0},JD=Rn,nK=M5,Vv=tK,sK=L5,lK=CE;function G5(e){var t=new Vv(e),o=nK(Vv.prototype.request,t);return JD.extend(o,Vv.prototype,t),JD.extend(o,t),o}var Ms=G5(lK);Ms.Axios=Vv;Ms.create=function(t){return G5(sK(Ms.defaults,t))};Ms.Cancel=j5;Ms.CancelToken=aK;Ms.isCancel=q5;Ms.all=function(t){return Promise.all(t)};Ms.spread=rK;Ms.isAxiosError=iK;bE.exports=Ms;bE.exports.default=Ms;var Rd=bE.exports;const wn="http://www.portalfiscal.inf.br/nfe",ZD="4.00",py="1.00",b0=(e,t,o,r)=>{const a=e.createElementNS(wn,o);return t.appendChild(a),r!==void 0&&(a.textContent=r),a};var zs={chNFe:"",Nfe(e,t,o){const r=document.implementation.createDocument("",""),a=r.createElementNS(wn,"NFe"),i=r.createElementNS(wn,"infNFe");return r.appendChild(a),a.appendChild(i),i.setAttribute("versao",ZD),i.setAttribute("Id",this.chaveNfe(t,o)),this.gerarTags(r,i,e,t),r},EventoNFe(e,t,o){const r=document.implementation.createDocument("",""),a=r.createElementNS(wn,"envEvento");a.setAttribute("versao",py),r.appendChild(a);const i=r.createElementNS(wn,"idLote");a.appendChild(i),i.textContent=o;const n=r.createElementNS(wn,"evento");n.setAttribute("versao",py),a.appendChild(n);const s=r.createElementNS(wn,"infEvento");return n.appendChild(s),s.setAttribute("Id","ID"+t.tpEvento+t.chNFe+t.nSeqEvento.padStart(2,"0")),this.gerarTags(r,s,e,t),r},InutilizarNFe(e,t){const o=document.implementation.createDocument("",""),r=o.createElementNS(wn,"inutNFe");o.appendChild(r),r.setAttribute("versao",ZD);const a=o.createElementNS(wn,"infInut");return r.appendChild(a),a.setAttribute("Id","ID"+t.cUF.padStart(2,"0")+t.ano.padStart(2,"0")+t.CNPJ.padStart(14,"0")+t.mod.padStart(2,"0")+t.serie.padStart(3,"0")+t.nNFIni.padStart(9,"0")+t.nNFFin.padStart(9,"0")),this.gerarTags(o,a,e.infInut,t),o},gerarTags(e,t,o,r){for(let a in o)if(!(a.startsWith("_")||a.startsWith("noXml_")||a==="visivel"||a==="valor_escolha"))if(a in r)if(a.startsWith("opcional")||a.startsWith("escolhas")||a.startsWith("opcao"))this.gerarTags(e,t,o[a],r[a]);else if(r[a].constructor===String){const i=e.createElementNS(wn,a);t.appendChild(i),i.textContent=r[a]}else if(r[a].constructor===Number){const i=e.createElementNS(wn,a);t.appendChild(i),i.textContent=r[a].toFixed(o[a]._decimals||0)}else if(r[a].constructor===Array)for(let i in r[a]){const n=e.createElementNS(wn,a);t.appendChild(n),a==="det"&&n.setAttribute("nItem",(parseInt(i)+1).toString()),this.gerarTags(e,n,o[a].lista,r[a][i])}else{const i=e.createElementNS(wn,a);t.appendChild(i),this.gerarTags(e,i,o[a],r[a]),a==="detEvento"&&i.setAttribute("versao",py)}else continue},chaveNfe(e,t){var o="0000";if(e.ide.dhEmi){var r=new Date(e.ide.dhEmi);o=r.getFullYear().toString().padStart(2,"0").slice(-2)+(r.getMonth()+1).toString().padStart(2,"0")}t=t||"298D8718-DE89-4B81-D08E-50242E0A72B8";let a=t.charCodeAt(32)*1000003+t.charCodeAt(35)*10007+t.charCodeAt(34)*113+t.charCodeAt(33);for(a+=Number(e.total.ICMSTot.vProd)*548300,e.ide.cNF=a.toFixed(0).padStart(8,"0").slice(0,8);[e.ide.nNF.padStart(8,"0").slice(0,8),"00000000","11111111","22222222","33333333","44444444","55555555","66666666","77777777","88888888","99999999","12345678","23456789","34567890","45678901","56789012","67890123","78901234","89012345","90123456","01234567",""].includes(e.ide.cNF);)a++,e.ide.cNF=a.toFixed(0).padStart(8,"0").slice(0,8);var i;e.emit.escolhas.valor_escolha==="CPF"?i=e.emit.escolhas.CPF:i=e.emit.escolhas.CNPJ;var n=e.ide.cUF.padStart(2,"0")+o+i.padStart(14,"0")+e.ide.mod.padStart(2,"0")+e.ide.serie.padStart(3,"0")+e.ide.nNF.padStart(9,"0")+e.ide.tpEmis.padStart(1,"0")+e.ide.cNF;return e.ide.cDV=this.calculoDV11(n),this.chNFe=n+e.ide.cDV,"NFe"+n+e.ide.cDV},calculoDV11(e){for(var t=4,o=0,r=0;r<e.length;r++)o+=parseInt(e[r])*t,t>2?t--:t=9;var a=o%11,i=11-a;return i>=10&&(i=0),i.toString()},consultarCadastroContribuinte(e,t){const o=document.implementation.createDocument("",""),r=b0(o,o,"ConsCad");r.setAttribute("versao","2.00");const a=b0(o,r,"infCons");return b0(o,a,"xServ","CONS-CAD"),b0(o,a,"UF",t),b0(o,a,"CNPJ",e),o}};async function cK(e){const t=`Produto '${e.documentoItem.descricaoItem||""}'`;$utils.verificarErro(!e.item.ncm,`${t} sem cadastro de NCM`);const o=await $erp()._ncm.where("ncm").equals(e.item.ncm).first();$utils.verificarErro(!o,`${t} com NCM '${e.item.ncm||""}' inv\xE1lido`),e.documentoItem.idCfop||(e.documentoItem.idCfop=e.idCfopVenda);const r=await $erp().cfop.get(e.documentoItem.idCfop);$utils.verificarErro(!r,`${t} com CFOP inv\xE1lido`);const a=await $erp().impostoConfiguracao.where("idNcm").equals(o.id).filter(s=>s.idCfop===r.id&&s.idEmitente===e.empresa.id&&s.ufOrigem===e.empresa.enderecoPrincipal.uf&&s.ufDestino===e.empresa.enderecoPrincipal.uf).first(),i=`Verifique a configura\xE7\xE3o do imposto para NCM: ${e.item.ncm||""}, CFOP: ${r.cfop||""}, CNPJ: ${e.empresa.numeroDocumentoNacional||""}, UF origem: ${e.empresa.enderecoPrincipal.uf||""}, UF destino: ${e.empresa.enderecoPrincipal.uf||""}.`;$utils.verificarErro(!a,`${t} sem configura\xE7\xE3o de imposto. ${i}`);const n={};try{n.CFOP=(r.cfop||0).toString(),n.ICMS_OrigemMercadoria=await Y1(e,a.idOrigem),n.ICMS_CST=await Y1(e,a.idCst),n.ICMS_CSOSN=n.ICMS_CST,n.ICMS_Aliquota=(a.aliqIcmsUFOrigem||a.aliqIcms||0).toString(),n.PIS_CST=await Y1(e,a.idTipoTribPis),n.PIS_Aliquota=(a.aliqPis||0).toString(),n.COFINS_CST=await Y1(e,a.idTipoTribCofins),n.COFINS_Aliquota=(a.aliqCofins||0).toString()}catch(s){console.error(s),$utils.verificarErro(!0,`${t} com erro na configura\xE7\xE3o de imposto. ${i}`)}return n.ValorAproxTributos=await W5(e,n.ICMS_OrigemMercadoria),n}async function uK(e,t){const o=`Produto '${e.documentoItem.descricaoItem||""}'`;$utils.verificarErro(!e.item.ncm,`${o} sem cadastro de NCM`),e.documentoItem.idCfop||(e.documentoItem.idCfop=e.idCfopVenda);const r=await $erp().cfop.get(e.documentoItem.idCfop);$utils.verificarErro(!r,`${o} com CFOP inv\xE1lido`);let a=e.item.ncm||"";a=a.length===8?a:$utils.filtrarDigitos(a);const i={emitente:{regime:e.empresa.regime==="SimplesNacional"?"1":e.empresa.regime==="MEI"?"4":"3",uf:e.empresa.enderecoPrincipal.uf,tributacaoSetor:e.empresa.tributacaoSetor,tributacao:e.empresa.tributacao},destinatario:{regime:e.destinatario.regime==="SimplesNacional"?"1":e.destinatario.regime==="Normal"?"3":void 0,uf:e.empresa.enderecoPrincipal.uf,pessoa:{CPF:"PF",CNPJ:"PJ",idEstrangeiro:"Estrangeiro"}[e.destinatario.tipoDocumentoNacional]||void 0,stributacaoSetoretor:e.destinatario.tributacaoSetor,tributacao:e.destinatario.tributacao,indicadorIE:"9",consumidor:"S",destino:"1"},ncm:a,idItem:e.item.id,cfop:String(r.cfop||""),cest:e.item.cest,origemMercadoria:String(e.item.codigoOrigem||""),produto:e.item.descricao},n=await $db.configuracaoImposto.pesquisa(i,t);if(!n||!n.ordem||!n.saida)return{};const s={};return s.CFOP=n.entrada.cfop,s.ICMS_OrigemMercadoria=n.entrada.origemMercadoria,s.ICMS_CST=n.saida.cstCsosn,s.ICMS_CSOSN=s.ICMS_CST,s.ICMS_Aliquota=(n.saida.pICMS||0).toString(),s.PIS_CST=n.saida.pisCst,s.PIS_Aliquota=(n.saida.pPIS||0).toString(),s.COFINS_CST=n.saida.cofinsCst,s.COFINS_Aliquota=(n.saida.pCOFINS||0).toString(),s.ValorAproxTributos=await W5(e,s.ICMS_OrigemMercadoria),s}async function dK(e){var r,a;e.totalFrete=$utils.somar(e.documentosVendas,"valorFrete"),e.tipoFrete=(a=(r=e.documentosVendas)==null?void 0:r.find(i=>i.tipoFrete))==null?void 0:a.tipoFrete;for(const i of e.documentosVendas)i.tipo!=="Envelope"&&$utils.verificarErro(e.tipoFrete!==i.tipoFrete,"Diverg\xEAncia de frete entre as vendas, favor emitir a nota individualmente (por venda)");e.tipoFrete==="CIF"&&(e.totalFrete=0);let t=e.totalFrete,o=(e.documentoFatura.totalDesconto||0)+(e.documentoFatura.totalBonus||0);return o+=$utils.somar(e.documentosVendas,"totalDesconto"),e.totalDesconto=o,$utils.arredondar(t)>0&&$utils.arredondar(o)>0&&(t>o?(t=t-o,o=0):(o=o-t,t=0)),{acrescimo:t.toFixed(2),desconto:o.toFixed(2)}}async function fK(e){const t=e.documentoFatura.idContato;e.destinatario=t?await $erp().contato.get(t)||{}:{}}async function mK(e){const t=e.documentoFatura.idEmpresa;$utils.verificarErro(!t,"Fatura sem empresa emitente"),e.empresa=await $erp().contato.get(t),$utils.verificarErro(!e.empresa,"N\xE3o foi poss\xEDvel carregar a empresa emitente"),e.empresa.enderecos=await $erp().contatoEndereco.where("idContato").equals(t).toArray(),$utils.verificarErro(!e.empresa.enderecos||e.empresa.enderecos.length===0,"N\xE3o foi poss\xEDvel carregar o endere\xE7o da empresa emitente"),e.empresa.telefones=await $erp().contatoTelefone.where("idContato").equals(t).toArray()||[],e.empresa.enderecoPrincipal=e.empresa.enderecos.find(o=>o.grupo==="Principal"),e.empresa.enderecoPrincipal||(e.empresa.enderecoPrincipal=e.empresa.enderecos[0]||{}),$utils.verificarErro(!e.empresa.enderecoPrincipal.uf,"Empresa emitente sem UF cadastrado")}async function pK(e){const t=e.idDocumento;e.documentoFatura=await $db.hibrido.le({table:"documento",id:t}),$utils.verificarErro(!e.documentoFatura,"N\xE3o foi poss\xEDvel carregar a fatura"),e.documentosAdicionais=await $db.hibrido.lista({table:"documento",where:{idDocumentoAdicional:t}}),e.documentosVendas=await $db.hibrido.lista({table:"documento",where:{idFatura:t}}),e.idsDocumentos=[t,...e.documentosAdicionais.map(o=>o.id),...e.documentosVendas.map(o=>o.id)]}async function hK(e){const t=await $db.hibrido.lista({table:"documentoCondicaoPagamento",where:{idDocumento:e.idDocumento}});$utils.verificarErro(!t,"N\xE3o h\xE1 pagamentos");const o=[];for(const s of t){const l=await gK(e,s.idFormaPagamento);let u=o.find(c=>c.CodigoMeioPagamento===l);u?u.Valor=$utils.arredondar(u.Valor+s.valor):(u={CodigoMeioPagamento:l,Valor:$utils.arredondar(s.valor)},o.push(u))}$utils.verificarErro(o.length===0,"A fatura n\xE3o possui pagamentos");const r=await $db.hibrido.lista({table:"financeiroTitulo",where:{idFatura:e.idDocumento}}),a=$utils.arredondar($utils.somar(o,"Valor")),i=$utils.arredondar($utils.somar(r,"valorTotal")+e.totalServicos),n=$utils.arredondar(e.totalProdutos+e.totalFrete+e.totalDevolucao-e.totalDesconto);if($utils.verificarErro(Math.abs(a-i-n)>.02,"O valor dos pagamentos difere do somat\xF3rio (produtos, servi\xE7os, frete, carn\xEAs, (-)devolu\xE7\xF5es e (-)descontos"),a>0&&a!==n){for(const l of o)l.Valor=$utils.arredondar(l.Valor*n/a);const s=$utils.arredondar($utils.somar(o,"Valor"));o[0].Valor+=n-s}e.totalDevolucao<0&&e.totalProdutos>0&&o.push({CodigoMeioPagamento:"99",Valor:-e.totalDevolucao});for(const s of o)s.Valor=s.Valor.toFixed(2);return o}async function Y1(e,t){$utils.verificarErro(!t,"Configura\xE7\xE3o de imposto sem informa\xE7\xE3o completa"),e.impostoParametro||(e.impostoParametro={});let o=e.impostoParametro[t];if(!o){const r=await $erp().impostoParametro.get(t);o=r?r.numero.trim():void 0,e.impostoParametro[t]=o}return $utils.verificarErro(!o,"Configura\xE7\xE3o de imposto inv\xE1lida"),o}async function vK(e,t){const o=(await $db.hibrido.lista({table:"documentoItem",whereIn:{idDocumento:e.idsDocumentos}})).sort((i,n)=>String(i.dataHoraEmissao||"").localeCompare(String(n.dataHoraEmissao||"")));$utils.verificarErro(!o,"N\xE3o foi poss\xEDvel carregar os produtos");const r=[];let a=1;for(const i of o){let n=$utils.arredondar(i.total||0);if(!i.idItem)continue;if(["Servi\xE7o"].includes(i.tipoItem)){e.totalServicos+=n;continue}if(n<0){e.totalDevolucao+=n;continue}const s=i.quantidade||0;let l=i.valorItem||0,u=i.descontoItem||0;if($utils.verificarErro(n!==$utils.arredondar(s*(l-u)),`Valor total do item ${i.codigoItem||""} n\xE3o corresponde ao valor unit\xE1rio vezes a quantidade`),["TLOE","TLOD"].includes(i.tipoItem))continue;if(["LOE","LOD"].includes(i.tipoItem)){const m=o.filter(p=>["TLOE","TLOD"].includes(p.tipoItem)&&p.idDocumentoItemPai===i.id);for(const p of m)l+=p.valorItem||0,u+=p.descontoItem||0,n+=p.total||0}if($utils.arredondar(n)===0)continue;e.totalProdutos+=n,e.documentoItem=i,e.item=await $erp().item.get(i.idItem),$utils.verificarErro(!e.item,"N\xE3o foi poss\xEDvel carregar o cadastro do produto");const d=await $db.configuracoes.leValorNumerico("imposto.versao")===2?await uK(e,t):await cK(e);let f=String(e.item.codigoBarras||"").padStart(13,"0");f.startsWith("999")&&(f=""),d.Sequencia=String(a),d.CodigoProduto=(e.item.codigoItem||0).toString(),d.CodigoBarras=f,d.Produto=$utils.removerCaracteresEspeciais(i.descricaoItem||"").substr(0,120).trim(),d.NCM=e.item.ncm||"",d.UnidadeMedida=e.item.unidade||"UN",d.Quantidade=s.toFixed(4),d.ValorUnitario=l.toFixed(4),d.DescontoUnitario=$utils.arredondar(u,3),d.AcrescimoUnitario="0",d.Total=n.toFixed(2),a++,r.push(d)}return $utils.verificarErro(r.length===0,"A fatura n\xE3o possui produtos"),r}async function gK(e,t){$utils.verificarErro(!t,"Forma de pagamento inv\xE1lida"),e.meiosPagamento||(e.meiosPagamento={});let o=e.meiosPagamento[t];if(o)return o;const r=await $erp().formaPagamento.get(t);$utils.verificarErro(!r||!r.descricao,"N\xE3o foi poss\xEDvel carregar a forma de pagamento");const a=r.descricao.toLowerCase();return o=a.includes("dinheiro")?"01":a.includes("d\xE9bito")?"04":a.includes("cr\xE9dito de clientes")?"99":a.includes("cr\xE9dito")?"03":a.includes("cart\xE3o")&&Number(r.parcelamentoMaximo||0)===1?"04":a.includes("cart\xE3o")&&Number(r.parcelamentoMaximo||0)>1?"03":"99",e.meiosPagamento[t]=o,o}async function W5(e,t){const o=await $erp().nfeIbpt.where("codigo").equals(Number(e.item.ncm)).toArray();if(e3(!o.length,`N\xE3o encontrado al\xEDquotas para calculo do valor aproximado de tributos do NCM: ${e.item.ncm}. Atualize sua tabela IBPT.`,e))return"0.00";const r=o.filter(u=>u.idContato===e.empresa.id),i=(r.length?r:o).reduce((u,c)=>!u||u.vigenciaFim<c.vigenciaFim?c:u,null);e3(i.vigenciaFim<$utils.dataAtual(),`Informa\xE7\xF5es vencidas para para o calculo do valor aproximado de tributos do NCM: ${e.item.ncm}. Atualize sua tabela IBPT.`,e);let n=0;const s=Number(e.documentoItem.descontoFaturaRateado||0)+Number(e.documentoItem.descontoTotalRateado||0),l=Number(e.documentoItem.quantidade||0)*(Number(e.documentoItem.valorItem||0)-Number(e.documentoItem.descontoItem||0))-s;return["0","3","4","5","8"].includes(t)?n+=l*Number(i.nacionalFederal||0)/100:n+=l*Number(i.importadosFederal||0)/100,n+=l*Number(i.estadual||0)/100,n+=l*Number(i.municipal||0)/100,n.toFixed(2)}function e3(e,t,o){return e&&(o.alertas||(o.alertas=[]),o.alertas.push(t),console.warn(t)),e}async function _K(e,t,o,r){const a={};$utils.verificarErro(!t,"N\xFAmero do PDV n\xE3o fornecido"),$utils.verificarErro(!e,"Fatura n\xE3o fornecida"),a.NumeroPDV=t,o&&(a.CPF_CNPJ=o),r&&(a.NomeCliente=$utils.removerCaracteresEspeciais(r));const i={idDocumento:e,cpfCnpjCliente:o,nomeCliente:r,totalDevolucao:0,totalProdutos:0,totalServicos:0,alertas:[]};await pK(i),await mK(i),await fK(i);const n=[];if(a.Itens=await vK(i,n),n.length)throw $utils.emitter.emit("confrontarFigurasFiscais",n),new Error("Figura fiscal n\xE3o encontrada");const{desconto:s,acrescimo:l}=await dK(i);return a.Desconto=s,a.Acrescimo=l,a.FormaPgto=await hK(i),a.Mensagem=("Fatura: "+(i.documentoFatura.numero||(i.documentoFatura.id||"").slice(-6))).padEnd(48," "),r?a.Mensagem+=r.padEnd(48," "):i.destinatario.nome&&i.destinatario.codigoContato!==await $db.configuracoes.leValorNumerico("venda.codigoconsumidor")&&(a.Mensagem+=i.destinatario.nome.padEnd(48," ")),a.Mensagem+=await $db.configuracoes.leValorComFiltroEmpresa("cupom.mensagem",i.documentoFatura.idEmpresa,"Obrigado e Volte Sempre!"),a.Mensagem=$utils.removerCaracteresEspeciais(a.Mensagem),{objetoJson:a,dados:i}}async function bK(e){let t,o="SAT";return e&&(t=await $erp().contatoEndereco.where({idContato:e}).toArray(),t=t==null?void 0:t.find(r=>{var a;return((a=r.grupo)==null?void 0:a.toLowerCase())==="principal"}),(t==null?void 0:t.ufCod)===23&&(o="MFE")),o}const t3=["B","KB","MB","GB","TB","PB"];function Qke(e,t=1){let o=0;for(;parseInt(e,10)>=1024&&o<t3.length-1;)e/=1024,++o;return`${e.toFixed(t)}${t3[o]}`}function yK(e){return e.charAt(0).toUpperCase()+e.slice(1)}function qi(e,t,o){return o<=t?t:Math.min(o,Math.max(t,e))}function o3(e,t,o){if(o<=t)return t;const r=o-t+1;let a=t+(e-t)%r;return a<t&&(a=r+a),a===0?0:a}function Qo(e,t=2,o="0"){if(e==null)return e;const r=""+e;return r.length>=t?r:new Array(t-r.length+1).join(o)+r}const Wc=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function xK(e,t,o){return Object.prototype.toString.call(e)==="[object Date]"&&(o=e.getDate(),t=e.getMonth()+1,e=e.getFullYear()),SK(SE(e,t,o))}function a3(e,t,o){return X5(EK(e,t,o))}function CK(e){return wK(e)===0}function Bv(e,t){return t<=6?31:t<=11||CK(e)?30:29}function wK(e){const t=Wc.length;let o=Wc[0],r,a,i,n,s;if(e<o||e>=Wc[t-1])throw new Error("Invalid Jalaali year "+e);for(s=1;s<t&&(r=Wc[s],a=r-o,!(e<r));s+=1)o=r;return n=e-o,a-n<6&&(n=n-a+Ma(a+4,33)*33),i=Dn(Dn(n+1,33)-1,4),i===-1&&(i=4),i}function Q5(e,t){const o=Wc.length,r=e+621;let a=-14,i=Wc[0],n,s,l,u,c;if(e<i||e>=Wc[o-1])throw new Error("Invalid Jalaali year "+e);for(c=1;c<o&&(n=Wc[c],s=n-i,!(e<n));c+=1)a=a+Ma(s,33)*8+Ma(Dn(s,33),4),i=n;u=e-i,a=a+Ma(u,33)*8+Ma(Dn(u,33)+3,4),Dn(s,33)===4&&s-u===4&&(a+=1);const d=Ma(r,4)-Ma((Ma(r,100)+1)*3,4)-150,f=20+a-d;return t||(s-u<6&&(u=u-s+Ma(s+4,33)*33),l=Dn(Dn(u+1,33)-1,4),l===-1&&(l=4)),{leap:l,gy:r,march:f}}function EK(e,t,o){const r=Q5(e,!0);return SE(r.gy,3,r.march)+(t-1)*31-Ma(t,7)*(t-7)+o-1}function SK(e){const t=X5(e).gy;let o=t-621,r,a,i;const n=Q5(o,!1),s=SE(t,3,n.march);if(i=e-s,i>=0){if(i<=185)return a=1+Ma(i,31),r=Dn(i,31)+1,{jy:o,jm:a,jd:r};i-=186}else o-=1,i+=179,n.leap===1&&(i+=1);return a=7+Ma(i,30),r=Dn(i,30)+1,{jy:o,jm:a,jd:r}}function SE(e,t,o){let r=Ma((e+Ma(t-8,6)+100100)*1461,4)+Ma(153*Dn(t+9,12)+2,5)+o-34840408;return r=r-Ma(Ma(e+100100+Ma(t-8,6),100)*3,4)+752,r}function X5(e){let t=4*e+139361631;t=t+Ma(Ma(4*e+183187720,146097)*3,4)*4-3908;const o=Ma(Dn(t,1461),4)*5+308,r=Ma(Dn(o,153),5)+1,a=Dn(Ma(o,153),12)+1;return{gy:Ma(t,1461)-100100+Ma(8-a,6),gm:a,gd:r}}function Ma(e,t){return~~(e/t)}function Dn(e,t){return e-~~(e/t)*t}const K5=864e5,IK=36e5,oC=6e4,Y5="YYYY-MM-DDTHH:mm:ss.SSSZ",AK=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,TK=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,hy={};function DK(e,t){const o="("+t.days.join("|")+")",r=e+o;if(hy[r]!==void 0)return hy[r];const a="("+t.daysShort.join("|")+")",i="("+t.months.join("|")+")",n="("+t.monthsShort.join("|")+")",s={};let l=0;const u=e.replace(TK,d=>{switch(l++,d){case"YY":return s.YY=l,"(-?\\d{1,2})";case"YYYY":return s.YYYY=l,"(-?\\d{1,4})";case"M":return s.M=l,"(\\d{1,2})";case"MM":return s.M=l,"(\\d{2})";case"MMM":return s.MMM=l,n;case"MMMM":return s.MMMM=l,i;case"D":return s.D=l,"(\\d{1,2})";case"Do":return s.D=l++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return s.D=l,"(\\d{2})";case"H":return s.H=l,"(\\d{1,2})";case"HH":return s.H=l,"(\\d{2})";case"h":return s.h=l,"(\\d{1,2})";case"hh":return s.h=l,"(\\d{2})";case"m":return s.m=l,"(\\d{1,2})";case"mm":return s.m=l,"(\\d{2})";case"s":return s.s=l,"(\\d{1,2})";case"ss":return s.s=l,"(\\d{2})";case"S":return s.S=l,"(\\d{1})";case"SS":return s.S=l,"(\\d{2})";case"SSS":return s.S=l,"(\\d{3})";case"A":return s.A=l,"(AM|PM)";case"a":return s.a=l,"(am|pm)";case"aa":return s.aa=l,"(a\\.m\\.|p\\.m\\.)";case"ddd":return a;case"dddd":return o;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return s.Z=l,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return s.ZZ=l,"(Z|[+-]\\d{2}\\d{2})";case"X":return s.X=l,"(-?\\d+)";case"x":return s.x=l,"(-?\\d{4,})";default:return l--,d[0]==="["&&(d=d.substring(1,d.length-1)),d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}),c={map:s,regex:new RegExp("^"+u)};return hy[r]=c,c}function J5(e,t){return e!==void 0?e:t!==void 0?t.date:Sx.date}function r3(e,t=""){const o=e>0?"-":"+",r=Math.abs(e),a=Math.floor(r/60),i=r%60;return o+Qo(a)+t+Qo(i)}function OK(e,t,o){let r=e.getFullYear(),a=e.getMonth();const i=e.getDate();return t.year!==void 0&&(r+=o*t.year,delete t.year),t.month!==void 0&&(a+=o*t.month,delete t.month),e.setDate(1),e.setMonth(2),e.setFullYear(r),e.setMonth(a),e.setDate(Math.min(i,TE(e))),t.date!==void 0&&(e.setDate(e.getDate()+o*t.date),delete t.date),e}function PK(e,t,o){const r=t.year!==void 0?t.year:e[`get${o}FullYear`](),a=t.month!==void 0?t.month-1:e[`get${o}Month`](),i=new Date(r,a+1,0).getDate(),n=Math.min(i,t.date!==void 0?t.date:e[`get${o}Date`]());return e[`set${o}Date`](1),e[`set${o}Month`](2),e[`set${o}FullYear`](r),e[`set${o}Month`](a),e[`set${o}Date`](n),delete t.year,delete t.month,delete t.date,e}function IE(e,t,o){const r=Z5(t),a=new Date(e),i=r.year!==void 0||r.month!==void 0||r.date!==void 0?OK(a,r,o):a;for(const n in r){const s=yK(n);i[`set${s}`](i[`get${s}`]()+o*r[n])}return i}function Z5(e){const t={...e};return e.years!==void 0&&(t.year=e.years,delete t.years),e.months!==void 0&&(t.month=e.months,delete t.months),e.days!==void 0&&(t.date=e.days,delete t.days),e.day!==void 0&&(t.date=e.day,delete t.day),e.hour!==void 0&&(t.hours=e.hour,delete t.hour),e.minute!==void 0&&(t.minutes=e.minute,delete t.minute),e.second!==void 0&&(t.seconds=e.second,delete t.second),e.millisecond!==void 0&&(t.milliseconds=e.millisecond,delete t.millisecond),t}function eM(e,t,o){const r=Z5(t),a=o===!0?"UTC":"",i=new Date(e),n=r.year!==void 0||r.month!==void 0||r.date!==void 0?PK(i,r,a):i;for(const s in r){const l=s.charAt(0).toUpperCase()+s.slice(1);n[`set${a}${l}`](r[s])}return n}function FK(e,t,o){const r=Gf(e,t,o),a=new Date(r.year,r.month===null?null:r.month-1,r.day===null?1:r.day,r.hour,r.minute,r.second,r.millisecond),i=a.getTimezoneOffset();return r.timezoneOffset===null||r.timezoneOffset===i?a:IE(a,{minutes:r.timezoneOffset-i},1)}function Gf(e,t,o,r,a){const i={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(a!==void 0&&Object.assign(i,a),e==null||e===""||typeof e!="string")return i;t===void 0&&(t=Y5);const n=J5(o,Ks.props),s=n.months,l=n.monthsShort,{regex:u,map:c}=DK(t,n),d=e.match(u);if(d===null)return i;let f="";if(c.X!==void 0||c.x!==void 0){const m=parseInt(d[c.X!==void 0?c.X:c.x],10);if(isNaN(m)===!0||m<0)return i;const p=new Date(m*(c.X!==void 0?1e3:1));i.year=p.getFullYear(),i.month=p.getMonth()+1,i.day=p.getDate(),i.hour=p.getHours(),i.minute=p.getMinutes(),i.second=p.getSeconds(),i.millisecond=p.getMilliseconds()}else{if(c.YYYY!==void 0)i.year=parseInt(d[c.YYYY],10);else if(c.YY!==void 0){const m=parseInt(d[c.YY],10);i.year=m<0?m:2e3+m}if(c.M!==void 0){if(i.month=parseInt(d[c.M],10),i.month<1||i.month>12)return i}else c.MMM!==void 0?i.month=l.indexOf(d[c.MMM])+1:c.MMMM!==void 0&&(i.month=s.indexOf(d[c.MMMM])+1);if(c.D!==void 0){if(i.day=parseInt(d[c.D],10),i.year===null||i.month===null||i.day<1)return i;const m=r!=="persian"?new Date(i.year,i.month,0).getDate():Bv(i.year,i.month);if(i.day>m)return i}c.H!==void 0?i.hour=parseInt(d[c.H],10)%24:c.h!==void 0&&(i.hour=parseInt(d[c.h],10)%12,(c.A&&d[c.A]==="PM"||c.a&&d[c.a]==="pm"||c.aa&&d[c.aa]==="p.m.")&&(i.hour+=12),i.hour=i.hour%24),c.m!==void 0&&(i.minute=parseInt(d[c.m],10)%60),c.s!==void 0&&(i.second=parseInt(d[c.s],10)%60),c.S!==void 0&&(i.millisecond=parseInt(d[c.S],10)*10**(3-d[c.S].length)),(c.Z!==void 0||c.ZZ!==void 0)&&(f=c.Z!==void 0?d[c.Z].replace(":",""):d[c.ZZ],i.timezoneOffset=(f[0]==="+"?-1:1)*(60*f.slice(1,3)+1*f.slice(3,5)))}return i.dateHash=Qo(i.year,6)+"/"+Qo(i.month)+"/"+Qo(i.day),i.timeHash=Qo(i.hour)+":"+Qo(i.minute)+":"+Qo(i.second)+f,i}function MK(e){return typeof e=="number"?!0:isNaN(Date.parse(e))===!1}function NK(e,t){return eM(new Date,e,t)}function kK(e){const t=new Date(e).getDay();return t===0?7:t}function aC(e){const t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);const o=new Date(t.getFullYear(),0,4);o.setDate(o.getDate()-(o.getDay()+6)%7+3);const r=t.getTimezoneOffset()-o.getTimezoneOffset();t.setHours(t.getHours()-r);const a=(t-o)/(K5*7);return 1+Math.floor(a)}function RK(e){return e.getFullYear()*1e4+e.getMonth()*100+e.getDate()}function vy(e,t){const o=new Date(e);return t===!0?RK(o):o.getTime()}function VK(e,t,o,r={}){const a=vy(t,r.onlyDate),i=vy(o,r.onlyDate),n=vy(e,r.onlyDate);return(n>a||r.inclusiveFrom===!0&&n===a)&&(n<i||r.inclusiveTo===!0&&n===i)}function BK(e,t){return IE(e,t,1)}function qK(e,t){return IE(e,t,-1)}function Ws(e,t,o){const r=new Date(e),a=`set${o===!0?"UTC":""}`;switch(t){case"year":case"years":r[`${a}Month`](0);case"month":case"months":r[`${a}Date`](1);case"day":case"days":case"date":r[`${a}Hours`](0);case"hour":case"hours":r[`${a}Minutes`](0);case"minute":case"minutes":r[`${a}Seconds`](0);case"second":case"seconds":r[`${a}Milliseconds`](0)}return r}function LK(e,t,o){const r=new Date(e),a=`set${o===!0?"UTC":""}`;switch(t){case"year":case"years":r[`${a}Month`](11);case"month":case"months":r[`${a}Date`](TE(r));case"day":case"days":case"date":r[`${a}Hours`](23);case"hour":case"hours":r[`${a}Minutes`](59);case"minute":case"minutes":r[`${a}Seconds`](59);case"second":case"seconds":r[`${a}Milliseconds`](999)}return r}function $K(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(o=>{t=Math.max(t,new Date(o))}),t}function UK(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach(o=>{t=Math.min(t,new Date(o))}),t}function J1(e,t,o){return(e.getTime()-e.getTimezoneOffset()*oC-(t.getTime()-t.getTimezoneOffset()*oC))/o}function AE(e,t,o="days"){const r=new Date(e),a=new Date(t);switch(o){case"years":case"year":return r.getFullYear()-a.getFullYear();case"months":case"month":return(r.getFullYear()-a.getFullYear())*12+r.getMonth()-a.getMonth();case"days":case"day":case"date":return J1(Ws(r,"day"),Ws(a,"day"),K5);case"hours":case"hour":return J1(Ws(r,"hour"),Ws(a,"hour"),IK);case"minutes":case"minute":return J1(Ws(r,"minute"),Ws(a,"minute"),oC);case"seconds":case"second":return J1(Ws(r,"second"),Ws(a,"second"),1e3)}}function rC(e){return AE(e,Ws(e,"year"),"days")+1}function zK(e){return bg(e)===!0?"date":typeof e=="number"?"number":"string"}function HK(e,t,o){const r=new Date(e);if(t){const a=new Date(t);if(r<a)return a}if(o){const a=new Date(o);if(r>a)return a}return r}function jK(e,t,o){const r=new Date(e),a=new Date(t);if(o===void 0)return r.getTime()===a.getTime();switch(o){case"second":case"seconds":if(r.getSeconds()!==a.getSeconds())return!1;case"minute":case"minutes":if(r.getMinutes()!==a.getMinutes())return!1;case"hour":case"hours":if(r.getHours()!==a.getHours())return!1;case"day":case"days":case"date":if(r.getDate()!==a.getDate())return!1;case"month":case"months":if(r.getMonth()!==a.getMonth())return!1;case"year":case"years":if(r.getFullYear()!==a.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${o}`)}return!0}function TE(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function i3(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const n3={YY(e,t,o){const r=this.YYYY(e,t,o)%100;return r>=0?Qo(r):"-"+Qo(Math.abs(r))},YYYY(e,t,o){return o!=null?o:e.getFullYear()},M(e){return e.getMonth()+1},MM(e){return Qo(e.getMonth()+1)},MMM(e,t){return t.monthsShort[e.getMonth()]},MMMM(e,t){return t.months[e.getMonth()]},Q(e){return Math.ceil((e.getMonth()+1)/3)},Qo(e){return i3(this.Q(e))},D(e){return e.getDate()},Do(e){return i3(e.getDate())},DD(e){return Qo(e.getDate())},DDD(e){return rC(e)},DDDD(e){return Qo(rC(e),3)},d(e){return e.getDay()},dd(e,t){return this.dddd(e,t).slice(0,2)},ddd(e,t){return t.daysShort[e.getDay()]},dddd(e,t){return t.days[e.getDay()]},E(e){return e.getDay()||7},w(e){return aC(e)},ww(e){return Qo(aC(e))},H(e){return e.getHours()},HH(e){return Qo(e.getHours())},h(e){const t=e.getHours();return t===0?12:t>12?t%12:t},hh(e){return Qo(this.h(e))},m(e){return e.getMinutes()},mm(e){return Qo(e.getMinutes())},s(e){return e.getSeconds()},ss(e){return Qo(e.getSeconds())},S(e){return Math.floor(e.getMilliseconds()/100)},SS(e){return Qo(Math.floor(e.getMilliseconds()/10))},SSS(e){return Qo(e.getMilliseconds(),3)},A(e){return this.H(e)<12?"AM":"PM"},a(e){return this.H(e)<12?"am":"pm"},aa(e){return this.H(e)<12?"a.m.":"p.m."},Z(e,t,o,r){const a=r==null?e.getTimezoneOffset():r;return r3(a,":")},ZZ(e,t,o,r){const a=r==null?e.getTimezoneOffset():r;return r3(a)},X(e){return Math.floor(e.getTime()/1e3)},x(e){return e.getTime()}};function DE(e,t,o,r,a){if(e!==0&&!e||e===1/0||e===-1/0)return;const i=new Date(e);if(isNaN(i))return;t===void 0&&(t=Y5);const n=J5(o,Ks.props);return t.replace(AK,(s,l)=>s in n3?n3[s](i,n,r,a):l===void 0?s:l.split("\\]").join("]"))}function GK(e){return bg(e)===!0?new Date(e.getTime()):e}var Xo={isValid:MK,extractDate:FK,buildDate:NK,getDayOfWeek:kK,getWeekOfYear:aC,isBetweenDates:VK,addToDate:BK,subtractFromDate:qK,adjustDate:eM,startOfDate:Ws,endOfDate:LK,getMaxDate:$K,getMinDate:UK,getDateDiff:AE,getDayOfYear:rC,inferDateFormat:zK,getDateBetween:HK,isSameDate:jK,daysInMonth:TE,formatDate:DE,clone:GK};async function WK(e,t,o){const r=new DOMParser().parseFromString(o,"application/xml");$utils.verificarErro(r.getElementsByTagName("parsererror").length,"Erro ao gravar os dados do cancelamento do cupom. (XML inv\xE1lido)");const a=r.getElementsByTagName("infCFe")[0];$utils.verificarErro(!a,"Erro ao gravar os dados do cancelamento do cupom. (XML inv\xE1lido, sem infCFe)");const i=a.getElementsByTagName("ide")[0];$utils.verificarErro(!i,"Erro ao gravar os dados do cancelamento do cupom. (XML inv\xE1lido, sem ide)");const n=a.getElementsByTagName("dest")[0];$utils.verificarErro(!n,"Erro ao gravar os dados do cancelamento do cupom. (XML inv\xE1lido, sem dest)");const s=a.getElementsByTagName("total")[0];$utils.verificarErro(!s,"Erro ao gravar os dados do cancelamento do cupom. (XML inv\xE1lido, sem total)");const l=(n.getElementsByTagName("CPF")[0]||n.getElementsByTagName("CNPJ")[0]||{}).innerHTML||"",u=(i.getElementsByTagName("dEmi")[0]||{}).innerHTML,c=(i.getElementsByTagName("hEmi")[0]||{}).innerHTML,d=u&&c?Xo.formatDate(u.substr(0,4)+"-"+u.substr(4,2)+"-"+u.substr(6,2)+"T"+c.substr(0,2)+":"+c.substr(2,2)+":"+c.substr(4,2)):"",f=(a.getElementsByTagName("dEmi")[0]||{}).innerHTML,m=(a.getElementsByTagName("hEmi")[0]||{}).innerHTML,p=u&&c?Xo.formatDate(f.substr(0,4)+"-"+f.substr(4,2)+"-"+f.substr(6,2)+"T"+m.substr(0,2)+":"+m.substr(2,2)+":"+m.substr(4,2)):"",v={};v.documentoFatura=await $db.hibrido.le({table:"documento",id:e}),$utils.verificarExcecao(!v.documentoFatura,"N\xE3o foi poss\xEDvel carregar a fatura");const g={id:$utils.uuid(),idDocumento:e,idEmpresa:v.documentoFatura.idEmpresa,descricaoEmpresa:v.documentoFatura.descricaoEmpresa,idContato:v.documentoFatura.idContato,descricaoContato:v.documentoFatura.descricaoContato,nomeArquivo:t,chaveCupom:a.getAttribute("Id")||"",cancelamento:!0,xml:o,dataHoraEmissao:d,dataHoraCupomCancelado:p,numeroCupom:Number((i.getElementsByTagName("nCFe")[0]||{}).innerHTML)||0,documentoConsumidor:l,valorTotal:Number((s.getElementsByTagName("vCFe")[0]||{}).innerHTML)||0,chaveCupomCancelado:a.getAttribute("chCanc")||""};await $db.documentoSat.grava({atual:g})}async function QK(e,t,o){const r=new DOMParser().parseFromString(o,"application/xml");$utils.verificarErro(r.getElementsByTagName("parsererror").length,"Erro ao gravar os dados do cupom. (XML inv\xE1lido)");const a=r.getElementsByTagName("infCFe")[0];$utils.verificarErro(!a,"Erro ao gravar os dados do cupom. (XML inv\xE1lido, sem infCFe)");const i=a.getElementsByTagName("ide")[0];$utils.verificarErro(!i,"Erro ao gravar os dados do cupom. (XML inv\xE1lido, sem ide)");const n=a.getElementsByTagName("dest")[0];$utils.verificarErro(!n,"Erro ao gravar os dados do cupom. (XML inv\xE1lido, sem dest)");const s=a.getElementsByTagName("total")[0];$utils.verificarErro(!s,"Erro ao gravar os dados do cupom. (XML inv\xE1lido, sem total)");const l=s.getElementsByTagName("ICMSTot")[0];$utils.verificarErro(!l,"Erro ao gravar os dados do cupom. (XML inv\xE1lido, sem ICMSTot)");const u=(n.getElementsByTagName("CPF")[0]||n.getElementsByTagName("CNPJ")[0]||{}).innerHTML||"",c=(i.getElementsByTagName("dEmi")[0]||{}).innerHTML,d=(i.getElementsByTagName("hEmi")[0]||{}).innerHTML,f=c&&d?Xo.formatDate(c.substr(0,4)+"-"+c.substr(4,2)+"-"+c.substr(6,2)+"T"+d.substr(0,2)+":"+d.substr(2,2)+":"+d.substr(4,2)):"",m={id:$utils.uuid(),idDocumento:e.idDocumento,idEmpresa:e.documentoFatura.idEmpresa,descricaoEmpresa:e.empresa.nome,idContato:e.documentoFatura.idContato,descricaoContato:e.documentoFatura.descricaoContato,nomeArquivo:t,chaveCupom:a.getAttribute("Id")||"",cancelamento:!1,xml:o,dataHoraEmissao:f,numeroCupom:Number((i.getElementsByTagName("nCFe")[0]||{}).innerHTML)||0,documentoConsumidor:u,valorIcms:Number((l.getElementsByTagName("vICMS")[0]||{}).innerHTML)||0,valorProdutos:Number((l.getElementsByTagName("vProd")[0]||{}).innerHTML)||0,valorDesconto:Number((l.getElementsByTagName("vDesc")[0]||{}).innerHTML)||0,valorPis:Number((l.getElementsByTagName("vPIS")[0]||{}).innerHTML)||0,valorConfins:Number((l.getElementsByTagName("vCOFINS")[0]||{}).innerHTML)||0,valorPisSt:Number((l.getElementsByTagName("vPISST")[0]||{}).innerHTML)||0,valorConfinsSt:Number((l.getElementsByTagName("vCOFINSST")[0]||{}).innerHTML)||0,outrosValores:Number((l.getElementsByTagName("vOutro")[0]||{}).innerHTML)||0,valorTotal:Number((s.getElementsByTagName("vCFe")[0]||{}).innerHTML)||0,valorTributos:Number((l.getElementsByTagName("vCFeLei12741")[0]||{}).innerHTML)||0,chaveCupomCancelado:"",dataHoraCupomCancelado:null};await $db.documentoSat.grava({atual:m})}var OE={},B_={};(function(e){const t=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",o=t+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",r="["+t+"]["+o+"]*",a=new RegExp("^"+r+"$"),i=function(s,l){const u=[];let c=l.exec(s);for(;c;){const d=[];d.startIndex=l.lastIndex-c[0].length;const f=c.length;for(let m=0;m<f;m++)d.push(c[m]);u.push(d),c=l.exec(s)}return u},n=function(s){const l=a.exec(s);return!(l===null||typeof l=="undefined")};e.isExist=function(s){return typeof s!="undefined"},e.isEmptyObject=function(s){return Object.keys(s).length===0},e.merge=function(s,l,u){if(l){const c=Object.keys(l),d=c.length;for(let f=0;f<d;f++)u==="strict"?s[c[f]]=[l[c[f]]]:s[c[f]]=l[c[f]]}},e.getValue=function(s){return e.isExist(s)?s:""},e.isName=n,e.getAllMatches=i,e.nameRegexp=r})(B_);const PE=B_,XK={allowBooleanAttributes:!1,unpairedTags:[]};OE.validate=function(e,t){t=Object.assign({},XK,t);const o=[];let r=!1,a=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let i=0;i<e.length;i++)if(e[i]==="<"&&e[i+1]==="?"){if(i+=2,i=l3(e,i),i.err)return i}else if(e[i]==="<"){let n=i;if(i++,e[i]==="!"){i=c3(e,i);continue}else{let s=!1;e[i]==="/"&&(s=!0,i++);let l="";for(;i<e.length&&e[i]!==">"&&e[i]!==" "&&e[i]!=="	"&&e[i]!==`
`&&e[i]!=="\r";i++)l+=e[i];if(l=l.trim(),l[l.length-1]==="/"&&(l=l.substring(0,l.length-1),i--),!aY(l)){let d;return l.trim().length===0?d="Invalid space after '<'.":d="Tag '"+l+"' is an invalid name.",rr("InvalidTag",d,Pi(e,i))}const u=JK(e,i);if(u===!1)return rr("InvalidAttr","Attributes for '"+l+"' have open quote.",Pi(e,i));let c=u.value;if(i=u.index,c[c.length-1]==="/"){const d=i-c.length;c=c.substring(0,c.length-1);const f=u3(c,t);if(f===!0)r=!0;else return rr(f.err.code,f.err.msg,Pi(e,d+f.err.line))}else if(s)if(u.tagClosed){if(c.trim().length>0)return rr("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",Pi(e,n));if(o.length===0)return rr("InvalidTag","Closing tag '"+l+"' has not been opened.",Pi(e,n));{const d=o.pop();if(l!==d.tagName){let f=Pi(e,d.tagStartPos);return rr("InvalidTag","Expected closing tag '"+d.tagName+"' (opened in line "+f.line+", col "+f.col+") instead of closing tag '"+l+"'.",Pi(e,n))}o.length==0&&(a=!0)}}else return rr("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",Pi(e,i));else{const d=u3(c,t);if(d!==!0)return rr(d.err.code,d.err.msg,Pi(e,i-c.length+d.err.line));if(a===!0)return rr("InvalidXml","Multiple possible root nodes found.",Pi(e,i));t.unpairedTags.indexOf(l)!==-1||o.push({tagName:l,tagStartPos:n}),r=!0}for(i++;i<e.length;i++)if(e[i]==="<")if(e[i+1]==="!"){i++,i=c3(e,i);continue}else if(e[i+1]==="?"){if(i=l3(e,++i),i.err)return i}else break;else if(e[i]==="&"){const d=tY(e,i);if(d==-1)return rr("InvalidChar","char '&' is not expected.",Pi(e,i));i=d}else if(a===!0&&!s3(e[i]))return rr("InvalidXml","Extra text at the end",Pi(e,i));e[i]==="<"&&i--}}else{if(s3(e[i]))continue;return rr("InvalidChar","char '"+e[i]+"' is not expected.",Pi(e,i))}if(r){if(o.length==1)return rr("InvalidTag","Unclosed tag '"+o[0].tagName+"'.",Pi(e,o[0].tagStartPos));if(o.length>0)return rr("InvalidXml","Invalid '"+JSON.stringify(o.map(i=>i.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return rr("InvalidXml","Start tag expected.",1);return!0};function s3(e){return e===" "||e==="	"||e===`
`||e==="\r"}function l3(e,t){const o=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){const r=e.substr(o,t-o);if(t>5&&r==="xml")return rr("InvalidXml","XML declaration allowed only at the start of the document.",Pi(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function c3(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let o=1;for(t+=8;t<e.length;t++)if(e[t]==="<")o++;else if(e[t]===">"&&(o--,o===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}const KK='"',YK="'";function JK(e,t){let o="",r="",a=!1;for(;t<e.length;t++){if(e[t]===KK||e[t]===YK)r===""?r=e[t]:r!==e[t]||(r="");else if(e[t]===">"&&r===""){a=!0;break}o+=e[t]}return r!==""?!1:{value:o,index:t,tagClosed:a}}const ZK=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function u3(e,t){const o=PE.getAllMatches(e,ZK),r={};for(let a=0;a<o.length;a++){if(o[a][1].length===0)return rr("InvalidAttr","Attribute '"+o[a][2]+"' has no space in starting.",y0(o[a]));if(o[a][3]!==void 0&&o[a][4]===void 0)return rr("InvalidAttr","Attribute '"+o[a][2]+"' is without value.",y0(o[a]));if(o[a][3]===void 0&&!t.allowBooleanAttributes)return rr("InvalidAttr","boolean attribute '"+o[a][2]+"' is not allowed.",y0(o[a]));const i=o[a][2];if(!oY(i))return rr("InvalidAttr","Attribute '"+i+"' is an invalid name.",y0(o[a]));if(!r.hasOwnProperty(i))r[i]=1;else return rr("InvalidAttr","Attribute '"+i+"' is repeated.",y0(o[a]))}return!0}function eY(e,t){let o=/\d/;for(e[t]==="x"&&(t++,o=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(o))break}return-1}function tY(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,eY(e,t);let o=0;for(;t<e.length;t++,o++)if(!(e[t].match(/\w/)&&o<20)){if(e[t]===";")break;return-1}return t}function rr(e,t,o){return{err:{code:e,msg:t,line:o.line||o,col:o.col}}}function oY(e){return PE.isName(e)}function aY(e){return PE.isName(e)}function Pi(e,t){const o=e.substring(0,t).split(/\r?\n/);return{line:o.length,col:o[o.length-1].length+1}}function y0(e){return e.startIndex+e[1].length}var FE={};const tM={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,o){return e}},rY=function(e){return Object.assign({},tM,e)};FE.buildOptions=rY;FE.defaultOptions=tM;class iY{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,o){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:o})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,[":@"]:t[":@"]}):this.child.push({[t.tagname]:t.child})}}var nY=iY;const sY=B_;function lY(e,t){const o={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let r=1,a=!1,i=!1,n="";for(;t<e.length;t++)if(e[t]==="<"&&!i){if(a&&dY(e,t))t+=7,[entityName,val,t]=cY(e,t+1),val.indexOf("&")===-1&&(o[hY(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(a&&fY(e,t))t+=8;else if(a&&mY(e,t))t+=8;else if(a&&pY(e,t))t+=9;else if(uY)i=!0;else throw new Error("Invalid DOCTYPE");r++,n=""}else if(e[t]===">"){if(i?e[t-1]==="-"&&e[t-2]==="-"&&(i=!1,r--):r--,r===0)break}else e[t]==="["?a=!0:n+=e[t];if(r!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:o,i:t}}function cY(e,t){let o="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)o+=e[t];if(o=o.trim(),o.indexOf(" ")!==-1)throw new Error("External entites are not supported");const r=e[t++];let a="";for(;t<e.length&&e[t]!==r;t++)a+=e[t];return[o,a,t]}function uY(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}function dY(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}function fY(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}function mY(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}function pY(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}function hY(e){if(sY.isName(e))return e;throw new Error(`Invalid entity name ${e}`)}var vY=lY;const gY=/^[-+]?0x[a-fA-F0-9]+$/,_Y=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const bY={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function yY(e,t={}){if(t=Object.assign({},bY,t),!e||typeof e!="string")return e;let o=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(o))return e;if(t.hex&&gY.test(o))return Number.parseInt(o,16);{const r=_Y.exec(o);if(r){const a=r[1],i=r[2];let n=xY(r[3]);const s=r[4]||r[6];if(!t.leadingZeros&&i.length>0&&a&&o[2]!==".")return e;if(!t.leadingZeros&&i.length>0&&!a&&o[1]!==".")return e;{const l=Number(o),u=""+l;return u.search(/[eE]/)!==-1||s?t.eNotation?l:e:o.indexOf(".")!==-1?u==="0"&&n===""||u===n||a&&u==="-"+n?l:e:i?n===u||a+n===u?l:e:o===u||o===a+u?l:e}}else return e}}function xY(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}var CY=yY;function wY(e){return typeof e=="function"?e:Array.isArray(e)?t=>{for(const o of e)if(typeof o=="string"&&t===o||o instanceof RegExp&&o.test(t))return!0}:()=>!1}var oM=wY;const aM=B_,x0=nY,EY=vY,SY=CY,IY=oM;class AY{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(o,r)=>String.fromCharCode(Number.parseInt(r,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(o,r)=>String.fromCharCode(Number.parseInt(r,16))}},this.addExternalEntities=TY,this.parseXml=MY,this.parseTextData=DY,this.resolveNameSpace=OY,this.buildAttributesMap=FY,this.isItStopNode=VY,this.replaceEntitiesValue=kY,this.readStopNodeData=qY,this.saveTextToParentTag=RY,this.addChild=NY,this.ignoreAttributesFn=IY(this.options.ignoreAttributes)}}function TY(e){const t=Object.keys(e);for(let o=0;o<t.length;o++){const r=t[o];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:e[r]}}}function DY(e,t,o,r,a,i,n){if(e!==void 0&&(this.options.trimValues&&!r&&(e=e.trim()),e.length>0)){n||(e=this.replaceEntitiesValue(e));const s=this.options.tagValueProcessor(t,e,o,a,i);return s==null?e:typeof s!=typeof e||s!==e?s:this.options.trimValues?nC(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?nC(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function OY(e){if(this.options.removeNSPrefix){const t=e.split(":"),o=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=o+t[1])}return e}const PY=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function FY(e,t,o){if(this.options.ignoreAttributes!==!0&&typeof e=="string"){const r=aM.getAllMatches(e,PY),a=r.length,i={};for(let n=0;n<a;n++){const s=this.resolveNameSpace(r[n][1]);if(this.ignoreAttributesFn(s,t))continue;let l=r[n][4],u=this.options.attributeNamePrefix+s;if(s.length)if(this.options.transformAttributeName&&(u=this.options.transformAttributeName(u)),u==="__proto__"&&(u="#__proto__"),l!==void 0){this.options.trimValues&&(l=l.trim()),l=this.replaceEntitiesValue(l);const c=this.options.attributeValueProcessor(s,l,t);c==null?i[u]=l:typeof c!=typeof l||c!==l?i[u]=c:i[u]=nC(l,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[u]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){const n={};return n[this.options.attributesGroupName]=i,n}return i}}const MY=function(e){e=e.replace(/\r\n?/g,`
`);const t=new x0("!xml");let o=t,r="",a="";for(let i=0;i<e.length;i++)if(e[i]==="<")if(e[i+1]==="/"){const s=rd(e,">",i,"Closing Tag is not closed.");let l=e.substring(i+2,s).trim();if(this.options.removeNSPrefix){const d=l.indexOf(":");d!==-1&&(l=l.substr(d+1))}this.options.transformTagName&&(l=this.options.transformTagName(l)),o&&(r=this.saveTextToParentTag(r,o,a));const u=a.substring(a.lastIndexOf(".")+1);if(l&&this.options.unpairedTags.indexOf(l)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${l}>`);let c=0;u&&this.options.unpairedTags.indexOf(u)!==-1?(c=a.lastIndexOf(".",a.lastIndexOf(".")-1),this.tagsNodeStack.pop()):c=a.lastIndexOf("."),a=a.substring(0,c),o=this.tagsNodeStack.pop(),r="",i=s}else if(e[i+1]==="?"){let s=iC(e,i,!1,"?>");if(!s)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,o,a),!(this.options.ignoreDeclaration&&s.tagName==="?xml"||this.options.ignorePiTags)){const l=new x0(s.tagName);l.add(this.options.textNodeName,""),s.tagName!==s.tagExp&&s.attrExpPresent&&(l[":@"]=this.buildAttributesMap(s.tagExp,a,s.tagName)),this.addChild(o,l,a)}i=s.closeIndex+1}else if(e.substr(i+1,3)==="!--"){const s=rd(e,"-->",i+4,"Comment is not closed.");if(this.options.commentPropName){const l=e.substring(i+4,s-2);r=this.saveTextToParentTag(r,o,a),o.add(this.options.commentPropName,[{[this.options.textNodeName]:l}])}i=s}else if(e.substr(i+1,2)==="!D"){const s=EY(e,i);this.docTypeEntities=s.entities,i=s.i}else if(e.substr(i+1,2)==="!["){const s=rd(e,"]]>",i,"CDATA is not closed.")-2,l=e.substring(i+9,s);r=this.saveTextToParentTag(r,o,a);let u=this.parseTextData(l,o.tagname,a,!0,!1,!0,!0);u==null&&(u=""),this.options.cdataPropName?o.add(this.options.cdataPropName,[{[this.options.textNodeName]:l}]):o.add(this.options.textNodeName,u),i=s+2}else{let s=iC(e,i,this.options.removeNSPrefix),l=s.tagName;const u=s.rawTagName;let c=s.tagExp,d=s.attrExpPresent,f=s.closeIndex;this.options.transformTagName&&(l=this.options.transformTagName(l)),o&&r&&o.tagname!=="!xml"&&(r=this.saveTextToParentTag(r,o,a,!1));const m=o;if(m&&this.options.unpairedTags.indexOf(m.tagname)!==-1&&(o=this.tagsNodeStack.pop(),a=a.substring(0,a.lastIndexOf("."))),l!==t.tagname&&(a+=a?"."+l:l),this.isItStopNode(this.options.stopNodes,a,l)){let p="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)l[l.length-1]==="/"?(l=l.substr(0,l.length-1),a=a.substr(0,a.length-1),c=l):c=c.substr(0,c.length-1),i=s.closeIndex;else if(this.options.unpairedTags.indexOf(l)!==-1)i=s.closeIndex;else{const g=this.readStopNodeData(e,u,f+1);if(!g)throw new Error(`Unexpected end of ${u}`);i=g.i,p=g.tagContent}const v=new x0(l);l!==c&&d&&(v[":@"]=this.buildAttributesMap(c,a,l)),p&&(p=this.parseTextData(p,l,a,!0,d,!0,!0)),a=a.substr(0,a.lastIndexOf(".")),v.add(this.options.textNodeName,p),this.addChild(o,v,a)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){l[l.length-1]==="/"?(l=l.substr(0,l.length-1),a=a.substr(0,a.length-1),c=l):c=c.substr(0,c.length-1),this.options.transformTagName&&(l=this.options.transformTagName(l));const p=new x0(l);l!==c&&d&&(p[":@"]=this.buildAttributesMap(c,a,l)),this.addChild(o,p,a),a=a.substr(0,a.lastIndexOf("."))}else{const p=new x0(l);this.tagsNodeStack.push(o),l!==c&&d&&(p[":@"]=this.buildAttributesMap(c,a,l)),this.addChild(o,p,a),o=p}r="",i=f}}else r+=e[i];return t.child};function NY(e,t,o){const r=this.options.updateTag(t.tagname,o,t[":@"]);r===!1||(typeof r=="string"&&(t.tagname=r),e.addChild(t))}const kY=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){const o=this.docTypeEntities[t];e=e.replace(o.regx,o.val)}for(let t in this.lastEntities){const o=this.lastEntities[t];e=e.replace(o.regex,o.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const o=this.htmlEntities[t];e=e.replace(o.regex,o.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function RY(e,t,o,r){return e&&(r===void 0&&(r=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,o,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,r),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function VY(e,t,o){const r="*."+o;for(const a in e){const i=e[a];if(r===i||t===i)return!0}return!1}function BY(e,t,o=">"){let r,a="";for(let i=t;i<e.length;i++){let n=e[i];if(r)n===r&&(r="");else if(n==='"'||n==="'")r=n;else if(n===o[0])if(o[1]){if(e[i+1]===o[1])return{data:a,index:i}}else return{data:a,index:i};else n==="	"&&(n=" ");a+=n}}function rd(e,t,o,r){const a=e.indexOf(t,o);if(a===-1)throw new Error(r);return a+t.length-1}function iC(e,t,o,r=">"){const a=BY(e,t+1,r);if(!a)return;let i=a.data;const n=a.index,s=i.search(/\s/);let l=i,u=!0;s!==-1&&(l=i.substring(0,s),i=i.substring(s+1).trimStart());const c=l;if(o){const d=l.indexOf(":");d!==-1&&(l=l.substr(d+1),u=l!==a.data.substr(d+1))}return{tagName:l,tagExp:i,closeIndex:n,attrExpPresent:u,rawTagName:c}}function qY(e,t,o){const r=o;let a=1;for(;o<e.length;o++)if(e[o]==="<")if(e[o+1]==="/"){const i=rd(e,">",o,`${t} is not closed`);if(e.substring(o+2,i).trim()===t&&(a--,a===0))return{tagContent:e.substring(r,o),i};o=i}else if(e[o+1]==="?")o=rd(e,"?>",o+1,"StopNode is not closed.");else if(e.substr(o+1,3)==="!--")o=rd(e,"-->",o+3,"StopNode is not closed.");else if(e.substr(o+1,2)==="![")o=rd(e,"]]>",o,"StopNode is not closed.")-2;else{const i=iC(e,o,">");i&&((i&&i.tagName)===t&&i.tagExp[i.tagExp.length-1]!=="/"&&a++,o=i.closeIndex)}}function nC(e,t,o){if(t&&typeof e=="string"){const r=e.trim();return r==="true"?!0:r==="false"?!1:SY(e,o)}else return aM.isExist(e)?e:""}var LY=AY,rM={};function $Y(e,t){return iM(e,t)}function iM(e,t,o){let r;const a={};for(let i=0;i<e.length;i++){const n=e[i],s=UY(n);let l="";if(o===void 0?l=s:l=o+"."+s,s===t.textNodeName)r===void 0?r=n[s]:r+=""+n[s];else{if(s===void 0)continue;if(n[s]){let u=iM(n[s],t,l);const c=HY(u,t);n[":@"]?zY(u,n[":@"],l,t):Object.keys(u).length===1&&u[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?u=u[t.textNodeName]:Object.keys(u).length===0&&(t.alwaysCreateTextNode?u[t.textNodeName]="":u=""),a[s]!==void 0&&a.hasOwnProperty(s)?(Array.isArray(a[s])||(a[s]=[a[s]]),a[s].push(u)):t.isArray(s,l,c)?a[s]=[u]:a[s]=u}}}return typeof r=="string"?r.length>0&&(a[t.textNodeName]=r):r!==void 0&&(a[t.textNodeName]=r),a}function UY(e){const t=Object.keys(e);for(let o=0;o<t.length;o++){const r=t[o];if(r!==":@")return r}}function zY(e,t,o,r){if(t){const a=Object.keys(t),i=a.length;for(let n=0;n<i;n++){const s=a[n];r.isArray(s,o+"."+s,!0,!0)?e[s]=[t[s]]:e[s]=t[s]}}}function HY(e,t){const{textNodeName:o}=t,r=Object.keys(e).length;return!!(r===0||r===1&&(e[o]||typeof e[o]=="boolean"||e[o]===0))}rM.prettify=$Y;const{buildOptions:jY}=FE,GY=LY,{prettify:WY}=rM,QY=OE;class XY{constructor(t){this.externalEntities={},this.options=jY(t)}parse(t,o){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(o){o===!0&&(o={});const i=QY.validate(t,o);if(i!==!0)throw Error(`${i.err.msg}:${i.err.line}:${i.err.col}`)}const r=new GY(this.options);r.addExternalEntities(this.externalEntities);const a=r.parseXml(t);return this.options.preserveOrder||a===void 0?a:WY(a,this.options)}addEntity(t,o){if(o.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(o==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=o}}var KY=XY;const YY=`
`;function JY(e,t){let o="";return t.format&&t.indentBy.length>0&&(o=YY),nM(e,t,"",o)}function nM(e,t,o,r){let a="",i=!1;for(let n=0;n<e.length;n++){const s=e[n],l=ZY(s);if(l===void 0)continue;let u="";if(o.length===0?u=l:u=`${o}.${l}`,l===t.textNodeName){let p=s[l];eJ(u,t)||(p=t.tagValueProcessor(l,p),p=sM(p,t)),i&&(a+=r),a+=p,i=!1;continue}else if(l===t.cdataPropName){i&&(a+=r),a+=`<![CDATA[${s[l][0][t.textNodeName]}]]>`,i=!1;continue}else if(l===t.commentPropName){a+=r+`<!--${s[l][0][t.textNodeName]}-->`,i=!0;continue}else if(l[0]==="?"){const p=d3(s[":@"],t),v=l==="?xml"?"":r;let g=s[l][0][t.textNodeName];g=g.length!==0?" "+g:"",a+=v+`<${l}${g}${p}?>`,i=!0;continue}let c=r;c!==""&&(c+=t.indentBy);const d=d3(s[":@"],t),f=r+`<${l}${d}`,m=nM(s[l],t,u,c);t.unpairedTags.indexOf(l)!==-1?t.suppressUnpairedNode?a+=f+">":a+=f+"/>":(!m||m.length===0)&&t.suppressEmptyNode?a+=f+"/>":m&&m.endsWith(">")?a+=f+`>${m}${r}</${l}>`:(a+=f+">",m&&r!==""&&(m.includes("/>")||m.includes("</"))?a+=r+t.indentBy+m+r:a+=m,a+=`</${l}>`),i=!0}return a}function ZY(e){const t=Object.keys(e);for(let o=0;o<t.length;o++){const r=t[o];if(!!e.hasOwnProperty(r)&&r!==":@")return r}}function d3(e,t){let o="";if(e&&!t.ignoreAttributes)for(let r in e){if(!e.hasOwnProperty(r))continue;let a=t.attributeValueProcessor(r,e[r]);a=sM(a,t),a===!0&&t.suppressBooleanAttributes?o+=` ${r.substr(t.attributeNamePrefix.length)}`:o+=` ${r.substr(t.attributeNamePrefix.length)}="${a}"`}return o}function eJ(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let o=e.substr(e.lastIndexOf(".")+1);for(let r in t.stopNodes)if(t.stopNodes[r]===e||t.stopNodes[r]==="*."+o)return!0;return!1}function sM(e,t){if(e&&e.length>0&&t.processEntities)for(let o=0;o<t.entities.length;o++){const r=t.entities[o];e=e.replace(r.regex,r.val)}return e}var tJ=JY;const oJ=tJ,aJ=oM,rJ={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Cu(e){this.options=Object.assign({},rJ,e),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=aJ(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=sJ),this.processTextOrObjNode=iJ,this.options.format?(this.indentate=nJ,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Cu.prototype.build=function(e){return this.options.preserveOrder?oJ(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0,[]).val)};Cu.prototype.j2x=function(e,t,o){let r="",a="";const i=o.join(".");for(let n in e)if(!!Object.prototype.hasOwnProperty.call(e,n))if(typeof e[n]=="undefined")this.isAttribute(n)&&(a+="");else if(e[n]===null)this.isAttribute(n)?a+="":n[0]==="?"?a+=this.indentate(t)+"<"+n+"?"+this.tagEndChar:a+=this.indentate(t)+"<"+n+"/"+this.tagEndChar;else if(e[n]instanceof Date)a+=this.buildTextValNode(e[n],n,"",t);else if(typeof e[n]!="object"){const s=this.isAttribute(n);if(s&&!this.ignoreAttributesFn(s,i))r+=this.buildAttrPairStr(s,""+e[n]);else if(!s)if(n===this.options.textNodeName){let l=this.options.tagValueProcessor(n,""+e[n]);a+=this.replaceEntitiesValue(l)}else a+=this.buildTextValNode(e[n],n,"",t)}else if(Array.isArray(e[n])){const s=e[n].length;let l="",u="";for(let c=0;c<s;c++){const d=e[n][c];if(typeof d!="undefined")if(d===null)n[0]==="?"?a+=this.indentate(t)+"<"+n+"?"+this.tagEndChar:a+=this.indentate(t)+"<"+n+"/"+this.tagEndChar;else if(typeof d=="object")if(this.options.oneListGroup){const f=this.j2x(d,t+1,o.concat(n));l+=f.val,this.options.attributesGroupName&&d.hasOwnProperty(this.options.attributesGroupName)&&(u+=f.attrStr)}else l+=this.processTextOrObjNode(d,n,t,o);else if(this.options.oneListGroup){let f=this.options.tagValueProcessor(n,d);f=this.replaceEntitiesValue(f),l+=f}else l+=this.buildTextValNode(d,n,"",t)}this.options.oneListGroup&&(l=this.buildObjectNode(l,n,u,t)),a+=l}else if(this.options.attributesGroupName&&n===this.options.attributesGroupName){const s=Object.keys(e[n]),l=s.length;for(let u=0;u<l;u++)r+=this.buildAttrPairStr(s[u],""+e[n][s[u]])}else a+=this.processTextOrObjNode(e[n],n,t,o);return{attrStr:r,val:a}};Cu.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function iJ(e,t,o,r){const a=this.j2x(e,o+1,r.concat(t));return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,a.attrStr,o):this.buildObjectNode(a.val,t,a.attrStr,o)}Cu.prototype.buildObjectNode=function(e,t,o,r){if(e==="")return t[0]==="?"?this.indentate(r)+"<"+t+o+"?"+this.tagEndChar:this.indentate(r)+"<"+t+o+this.closeTag(t)+this.tagEndChar;{let a="</"+t+this.tagEndChar,i="";return t[0]==="?"&&(i="?",a=""),(o||o==="")&&e.indexOf("<")===-1?this.indentate(r)+"<"+t+o+i+">"+e+a:this.options.commentPropName!==!1&&t===this.options.commentPropName&&i.length===0?this.indentate(r)+`<!--${e}-->`+this.newLine:this.indentate(r)+"<"+t+o+i+this.tagEndChar+e+this.indentate(r)+a}};Cu.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};Cu.prototype.buildTextValNode=function(e,t,o,r){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(r)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(r)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(r)+"<"+t+o+"?"+this.tagEndChar;{let a=this.options.tagValueProcessor(t,e);return a=this.replaceEntitiesValue(a),a===""?this.indentate(r)+"<"+t+o+this.closeTag(t)+this.tagEndChar:this.indentate(r)+"<"+t+o+">"+a+"</"+t+this.tagEndChar}};Cu.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){const o=this.options.entities[t];e=e.replace(o.regex,o.val)}return e};function nJ(e){return this.options.indentBy.repeat(e)}function sJ(e){return e.startsWith(this.options.attributeNamePrefix)&&e!==this.options.textNodeName?e.substr(this.attrPrefixLen):!1}var lJ=Cu;const cJ=OE,uJ=KY,dJ=lJ;var sp={XMLParser:uJ,XMLValidator:cJ,XMLBuilder:dJ};async function f3(){return{CNPJ:"_ide_CNPJ_ide_",signAC:"_ide_signAC_ide_",numeroCaixa:"_ide_numeroCaixa_ide_"}}function fJ(){return{CNPJ:"_emit_CNPJ_emit_",IE:"_emit_IE_emit_",indRatISSQN:"_emit_indRatISSQN_emit_"}}function mJ(e){var o;let t={};return t.CPF=(o=e==null?void 0:e.CPF_CNPJ)==null?void 0:o.replace(/\D/g,""),t.xNome=e==null?void 0:e.NomeCliente,t.CPF&&t.xNome||(t={}),t}function pJ(e){var a,i,n;const t=(a=e==null?void 0:e.Itens)!=null?a:[],o=[];let r=1;for(const s of t){const l={};let u,c;if(l["@@nItem"]=String(r++),u=Number(s.ValorUnitario)||0,u=$utils.arredondaAbnt5891(u),u=$utils.arredondar(u,2),u=u.toFixed(2),c=s.DescontoUnitario*Number(s.Quantidade)||0,c=$utils.arredondaAbnt5891(c),c=$utils.arredondar(c,2),c=c.toFixed(2),l.prod={},l.prod.cProd=s.CodigoProduto.padStart(13,"0"),l.prod.xProd=(n=(i=s.Produto)==null?void 0:i.slice(0,120))!=null?n:"",l.prod.NCM=s.NCM,l.prod.CFOP=s.CFOP,l.prod.uCom=s.UnidadeMedida,l.prod.qCom=s.Quantidade,l.prod.vUnCom=u,l.prod.indRegra="A",l.prod.vDesc=c,l.imposto={},s.ICMS_CSOSN){let d;l.imposto.ICMS={},d=Number(s.ICMS_Aliquota)||0,d=d.toFixed(2),~["00","20","90"].indexOf(s.ICMS_CSOSN)&&(l.imposto.ICMS.ICMS00={},l.imposto.ICMS.ICMS00.Orig=s.ICMS_OrigemMercadoria,l.imposto.ICMS.ICMS00.CST=s.ICMS_CST,l.imposto.ICMS.ICMS00.pICMS=d),~["40","41","50","60"].indexOf(s.ICMS_CSOSN)&&(l.imposto.ICMS.ICMS40={},l.imposto.ICMS.ICMS40.Orig=s.ICMS_OrigemMercadoria,l.imposto.ICMS.ICMS40.CST=s.ICMS_CST),~["102","300","500"].indexOf(s.ICMS_CSOSN)&&(l.imposto.ICMS.ICMSSN102={},l.imposto.ICMS.ICMSSN102.Orig=s.ICMS_OrigemMercadoria,l.imposto.ICMS.ICMSSN102.CSOSN=s.ICMS_CSOSN),~["900"].indexOf(s.ICMS_CSOSN)&&(l.imposto.ICMS.ICMSSN900={},l.imposto.ICMS.ICMSSN900.Orig=s.ICMS_OrigemMercadoria,l.imposto.ICMS.ICMSSN900.CSOSN=s.ICMS_CSOSN,l.imposto.ICMS.ICMSSN900.pICMS=d)}if(s.PIS_CST){let d,f;l.imposto.PIS={},d=Number(s.PIS_Aliquota)||0,d=d.toFixed(4),f=Number(s.Total)||0,f=$utils.arredondaAbnt5891(f),f=$utils.arredondar(f,2),f=f.toFixed(2),~["01","02"].indexOf(s.PIS_CST)&&(l.imposto.PIS.PISAliq={},l.imposto.PIS.PISAliq.CST=s.PIS_CST,l.imposto.PIS.PISAliq.vBC=f,l.imposto.PIS.PISAliq.pPIS=d),~["03"].indexOf(s.PIS_CST)&&(l.imposto.PIS.PISQtde={},l.imposto.PIS.PISQtde.CST=s.PIS_CST),~["04","06","07","08","09"].indexOf(s.PIS_CST)&&(l.imposto.PIS.PISNT={},l.imposto.PIS.PISNT.CST=s.PIS_CST),~["49"].indexOf(s.PIS_CST)&&(l.imposto.PIS.PISSN={},l.imposto.PIS.PISSN.CST=s.PIS_CST),~["99"].indexOf(s.PIS_CST)&&(l.imposto.PIS.PISOutr={},l.imposto.PIS.PISOutr.CST=s.PIS_CST,l.imposto.PIS.PISOutr.vBC=f,l.imposto.PIS.PISOutr.pPIS=d)}if(s.COFINS_CST){let d,f;l.imposto.COFINS={},d=Number(s.COFINS_Aliquota)||0,d=d.toFixed(4),f=Number(s.Total)||0,f=$utils.arredondaAbnt5891(f),f=$utils.arredondar(f,2),f=f.toFixed(2),~["01","02"].indexOf(s.COFINS_CST)&&(l.imposto.COFINS.COFINSAliq={},l.imposto.COFINS.COFINSAliq.CST=s.COFINS_CST,l.imposto.COFINS.COFINSAliq.vBC=f,l.imposto.COFINS.COFINSAliq.pCOFINS=d),~["03"].indexOf(s.COFINS_CST)&&(l.imposto.COFINS.COFINSQtde={},l.imposto.COFINS.COFINSQtde.CST=s.COFINS_CST),~["04","06","07","08","09"].indexOf(s.COFINS_CST)&&(l.imposto.COFINS.COFINSNT={},l.imposto.COFINS.COFINSNT.CST=s.COFINS_CST),~["49"].indexOf(s.COFINS_CST)&&(l.imposto.COFINS.COFINSSN={},l.imposto.COFINS.COFINSSN.CST=s.COFINS_CST),~["99"].indexOf(s.COFINS_CST)&&(l.imposto.COFINS.COFINSOutr={},l.imposto.COFINS.COFINSOutr.CST=s.COFINS_CST,l.imposto.COFINS.COFINSOutr.vBC=f,l.imposto.COFINS.COFINSOutr.pCOFINS=d)}o.push(l)}return o}function hJ(e){var r;const t=(r=e==null?void 0:e.Itens)!=null?r:[],o={};(e==null?void 0:e.Acrescimo)&&(e==null?void 0:e.Acrescimo)!=="0.00"&&(o.DescAcrEntr={},o.DescAcrEntr.vAcresSubtot=e==null?void 0:e.Acrescimo),(e==null?void 0:e.Desconto)&&(e==null?void 0:e.Desconto)!=="0.00"&&(o.DescAcrEntr={},o.DescAcrEntr.vDescSubtot=e==null?void 0:e.Desconto),o.vCFeLei12741=0;for(const a of t)o.vCFeLei12741+=Number(a.ValorAproxTributos)||0;return o.vCFeLei12741=$utils.arredondaAbnt5891(o.vCFeLei12741),o.vCFeLei12741=$utils.arredondar(o.vCFeLei12741,2),o.vCFeLei12741=o.vCFeLei12741.toFixed(2),o.vCFeLei12741=String(o.vCFeLei12741),o}function vJ(e){var r;const t=(r=e==null?void 0:e.FormaPgto)!=null?r:[],o={};o.MP=[];for(const a of t){const i={};i.cMP=a.CodigoMeioPagamento,i.vMP=a.Valor,~["03","04"].indexOf(a.CodigoMeioPagamento)&&(i.cAdmC=999),o.MP.push(i)}return o}function gJ(e){let t={};return t.infCpl=e==null?void 0:e.Mensagem,t.infCpl||(t={}),t}async function _J(e){const{dados:t,idEmpresa:o,cancelamento:r}=e!=null?e:{},a="_infCFe_versaoDadosEnt_infCFe_",i=new sp.XMLBuilder({ignoreAttributes:!1,attributeNamePrefix:"@@",format:!0});let n=!r,s=r,l={};return n&&(l.CFe={},l.CFe.infCFe={"@@versaoDadosEnt":a,ide:await f3(),emit:fJ(),dest:mJ(t),det:pJ(t),total:hJ(t),pgto:vJ(t),infAdic:gJ(t)}),s&&(l.CFeCanc={},l.CFeCanc.infCFe={"@@chCanc":t.ChaveAcessoCFe,ide:await f3(),emit:{},dest:{},total:{}}),i.build(l)}var m3={gerar:_K,hwDest:bK,salvarRetornoCancelamento:WK,salvarRetornoEmissao:QK,xml:_J},bJ={infEvento:{cOrgao:{_titulo:"C\xF3digo do \xF3rg\xE3o de recep\xE7\xE3o do Evento. Utilizar a Tabela do IBGE extendida, utilizar",_doc:"C\xF3digo do \xF3rg\xE3o de recep\xE7\xE3o do Evento. Utilizar a Tabela do IBGE extendida, utilizar 91 para identificar o Ambiente Nacional (cOrgao)",_type:"TCOrgaoIBGE",_enumeration:[{value:"11",label:"11"},{value:"12",label:"12"},{value:"13",label:"13"},{value:"14",label:"14"},{value:"15",label:"15"},{value:"16",label:"16"},{value:"17",label:"17"},{value:"21",label:"21"},{value:"22",label:"22"},{value:"23",label:"23"},{value:"24",label:"24"},{value:"25",label:"25"},{value:"26",label:"26"},{value:"27",label:"27"},{value:"28",label:"28"},{value:"29",label:"29"},{value:"31",label:"31"},{value:"32",label:"32"},{value:"33",label:"33"},{value:"35",label:"35"},{value:"41",label:"41"},{value:"42",label:"42"},{value:"43",label:"43"},{value:"50",label:"50"},{value:"51",label:"51"},{value:"52",label:"52"},{value:"53",label:"53"},{value:"91",label:"91 para identificar o Ambiente Nacional"}],_valorInic:"11"},tpAmb:{_titulo:"Identifica\xE7\xE3o do Ambiente",_doc:"Identifica\xE7\xE3o do Ambiente: 1 - Produ\xE7\xE3o 2 - Homologa\xE7\xE3o (tpAmb)",_type:"TAmb",_enumeration:[{value:"1",label:"1 - Produ\xE7\xE3o"},{value:"2",label:"2 - Homologa\xE7\xE3o"}],_valorInic:"1"},escolhas:{_titulo:"",_doc:"",_valorInic:"",valor_escolha:{_titulo:"",_doc:"",_valorInic:""},CNPJ:{_titulo:"CNPJ",_doc:"CNPJ (CNPJ)",_pattern:"[0-9]{0}|[0-9]{14}",_type:"TCnpjOpc",_valorInic:""},CPF:{_titulo:"CPF",_doc:"CPF (CPF)",_pattern:"[0-9]{11}",_type:"TCpf",_valorInic:""}},chNFe:{_titulo:"Chave de Acesso da NF-e vinculada ao evento",_doc:"Chave de Acesso da NF-e vinculada ao evento (chNFe)",_pattern:"[0-9]{44}",_type:"TChNFe",_valorInic:""},dhEvento:{_titulo:"Data e Hora do Evento, formato UTC (AAAA-MM-DDThh:mm:ssTZD, onde TZD = +hh:mm ou -hh:mm)",_doc:"Data e Hora do Evento, formato UTC (AAAA-MM-DDThh:mm:ssTZD, onde TZD = +hh:mm ou -hh:mm) (dhEvento)",_pattern:"(((20(([02468][048])|([13579][26]))-02-29))|(20[0-9][0-9])-((((0[1-9])|(1[0-2]))-((0[1-9])|(1\\d)|(2[0-8])))|((((0[13578])|(1[02]))-31)|(((0[1,3-9])|(1[0-2]))-(29|30)))))T(20|21|22|23|[0-1]\\d):[0-5]\\d:[0-5]\\d-0[1-4]:00",_valorInic:""},tpEvento:{_titulo:"Tipo do Evento",_doc:"Tipo do Evento (tpEvento)",_pattern:"[0-9]{6}",_enumeration:[{value:"110111",label:"110111"}],_valorInic:"110111"},nSeqEvento:{_titulo:"Seq\xFCencial do evento para o mesmo tipo de evento.  Para maioria dos eventos ser\xE1 1, nos casos em que possa existir mais de um evento, como \xE9 o caso da carta de corre\xE7\xE3o, o autor do evento deve numerar de forma seq\xFCencial.",_doc:"Seq\xFCencial do evento para o mesmo tipo de evento.  Para maioria dos eventos ser\xE1 1, nos casos em que possa existir mais de um evento, como \xE9 o caso da carta de corre\xE7\xE3o, o autor do evento deve numerar de forma seq\xFCencial. (nSeqEvento)",_pattern:"[1-9]|[1][0-9]{0,1}|20",_valorInic:""},verEvento:{_titulo:"Vers\xE3o do Tipo do Evento",_doc:"Vers\xE3o do Tipo do Evento (verEvento)",_enumeration:[{value:"1.00",label:"1.00"}],_valorInic:"1.00"},detEvento:{_titulo:"Schema XML de valida\xE7\xE3o do evento do cancelamento 1101111",_doc:"Schema XML de valida\xE7\xE3o do evento do cancelamento 1101111 (detEvento)",_valorInic:"",descEvento:{_titulo:"Descri\xE7\xE3o do Evento",_doc:"Descri\xE7\xE3o do Evento - Cancelamento (descEvento)",_enumeration:[{value:"Cancelamento",label:"Cancelamento\u201D"}],_valorInic:"Cancelamento"},nProt:{_titulo:"N\xFAmero do Protocolo de Status da NF-e.",_doc:"N\xFAmero do Protocolo de Status da NF-e. (nProt)",_type:"TProt",_valorInic:""},xJust:{_titulo:"Justificativa do cancelamento",_doc:"Justificativa do cancelamento (xJust)",_type:"TJust",_minLength:15,_maxLength:255,_valorInic:""}}}},yJ={infEvento:{cOrgao:{_titulo:"C\xF3digo do \xF3rg\xE3o de recep\xE7\xE3o do Evento. Utilizar a Tabela do IBGE extendida, utilizar",_doc:"C\xF3digo do \xF3rg\xE3o de recep\xE7\xE3o do Evento. Utilizar a Tabela do IBGE extendida, utilizar 90 para identificar o Ambiente Nacional (cOrgao)",_type:"TCOrgaoIBGE",_enumeration:[{value:"11",label:"11"},{value:"12",label:"12"},{value:"13",label:"13"},{value:"14",label:"14"},{value:"15",label:"15"},{value:"16",label:"16"},{value:"17",label:"17"},{value:"21",label:"21"},{value:"22",label:"22"},{value:"23",label:"23"},{value:"24",label:"24"},{value:"25",label:"25"},{value:"26",label:"26"},{value:"27",label:"27"},{value:"28",label:"28"},{value:"29",label:"29"},{value:"31",label:"31"},{value:"32",label:"32"},{value:"33",label:"33"},{value:"35",label:"35"},{value:"41",label:"41"},{value:"42",label:"42"},{value:"43",label:"43"},{value:"50",label:"50"},{value:"51",label:"51"},{value:"52",label:"52"},{value:"53",label:"53"},{value:"90",label:"90 para identificar o Ambiente Nacional"}],_valorInic:"11"},tpAmb:{_titulo:"Identifica\xE7\xE3o do Ambiente",_doc:"Identifica\xE7\xE3o do Ambiente: 1 - Produ\xE7\xE3o 2 - Homologa\xE7\xE3o (tpAmb)",_type:"TAmb",_enumeration:[{value:"1",label:"1 - Produ\xE7\xE3o"},{value:"2",label:"2 - Homologa\xE7\xE3o"}],_valorInic:"1"},escolhas:{_titulo:"",_doc:"",_valorInic:"",valor_escolha:{_titulo:"",_doc:"",_valorInic:""},CNPJ:{_titulo:"CNPJ",_doc:"CNPJ (CNPJ)",_pattern:"[0-9]{0}|[0-9]{14}",_type:"TCnpjOpc",_valorInic:""},CPF:{_titulo:"CPF",_doc:"CPF (CPF)",_pattern:"[0-9]{11}",_type:"TCpf",_valorInic:""}},chNFe:{_titulo:"Chave de Acesso da NF-e vinculada ao evento",_doc:"Chave de Acesso da NF-e vinculada ao evento (chNFe)",_pattern:"[0-9]{44}",_type:"TChNFe",_valorInic:""},dhEvento:{_titulo:"Data e Hora do Evento, formato UTC (AAAA-MM-DDThh:mm:ssTZD, onde TZD = +hh:mm ou -hh:mm)",_doc:"Data e Hora do Evento, formato UTC (AAAA-MM-DDThh:mm:ssTZD, onde TZD = +hh:mm ou -hh:mm) (dhEvento)",_pattern:"(((20(([02468][048])|([13579][26]))-02-29))|(20[0-9][0-9])-((((0[1-9])|(1[0-2]))-((0[1-9])|(1\\d)|(2[0-8])))|((((0[13578])|(1[02]))-31)|(((0[1,3-9])|(1[0-2]))-(29|30)))))T(20|21|22|23|[0-1]\\d):[0-5]\\d:[0-5]\\d-0[1-4]:00",_valorInic:""},tpEvento:{_titulo:"Tipo do Evento",_doc:"Tipo do Evento (tpEvento)",_pattern:"[0-9]{6}",_enumeration:[{value:"110110",label:"110110"}],_valorInic:"110110"},nSeqEvento:{_titulo:"Seq\xFCencial do evento para o mesmo tipo de evento.  Para maioria dos eventos ser\xE1 1, nos casos em que possa existir mais de um evento, como \xE9 o caso da carta de corre\xE7\xE3o, o autor do evento deve numerar de forma seq\xFCencial.",_doc:"Seq\xFCencial do evento para o mesmo tipo de evento.  Para maioria dos eventos ser\xE1 1, nos casos em que possa existir mais de um evento, como \xE9 o caso da carta de corre\xE7\xE3o, o autor do evento deve numerar de forma seq\xFCencial. (nSeqEvento)",_pattern:"[1-9]|[1][0-9]{0,1}",_valorInic:""},verEvento:{_titulo:"Vers\xE3o do Tipo do Evento",_doc:"Vers\xE3o do Tipo do Evento (verEvento)",_enumeration:[{value:"1.00",label:"1.00"}],_valorInic:"1.00"},detEvento:{_titulo:"Evento do carta de corre\xE7\xE3o e1101110",_doc:"Evento do carta de corre\xE7\xE3o e1101110 (detEvento)",_valorInic:"",descEvento:{_titulo:"Descri\xE7\xE3o do Evento - \u201C\u201D",_doc:"Descri\xE7\xE3o do Evento - \u201CCarta de Corre\xE7\xE3o\u201D (descEvento)",_enumeration:[{value:"Carta de Corre\xE7\xE3o",label:"Carta de Corre\xE7\xE3o"},{value:"Carta de Correcao",label:"Carta de Correcao"}],_valorInic:"Carta de Correcao"},xCorrecao:{_titulo:"Corre\xE7\xE3o a ser considerada",_doc:"Corre\xE7\xE3o a ser considerada (xCorrecao)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_minLength:15,_maxLength:1e3,_valorInic:""},xCondUso:{_titulo:"Texto Fixo com as condi\xE7\xF5es de uso da Carta de Corre\xE7\xE3o",_doc:"Texto Fixo com as condi\xE7\xF5es de uso da Carta de Corre\xE7\xE3o (xCondUso)",_enumeration:[{value:"A Carta de Corre\xE7\xE3o \xE9 disciplinada pelo \xA7 1\xBA-A do art. 7\xBA do Conv\xEAnio S/N, de 15 de dezembro de 1970 e pode ser utilizada para regulariza\xE7\xE3o de erro ocorrido na emiss\xE3o de documento fiscal, desde que o erro n\xE3o esteja relacionado com: I - as vari\xE1veis que determinam o valor do imposto tais como: base de c\xE1lculo, al\xEDquota, diferen\xE7a de pre\xE7o, quantidade, valor da opera\xE7\xE3o ou da presta\xE7\xE3o; II - a corre\xE7\xE3o de dados cadastrais que implique mudan\xE7a do remetente ou do destinat\xE1rio; III - a data de emiss\xE3o ou de sa\xEDda.",label:"A Carta de Corre\xE7\xE3o \xE9 disciplinada pelo \xA7 1\xBA-A do art. 7\xBA do Conv\xEAnio S/N, de 15 de dezembro de 1970 e pode ser utilizada para regulariza\xE7\xE3o de erro ocorrido na emiss\xE3o de documento fiscal, desde que o erro n\xE3o esteja relacionado com: I - as vari\xE1veis que determinam o valor do imposto tais como: base de c\xE1lculo, al\xEDquota, diferen\xE7a de pre\xE7o, quantidade, valor da opera\xE7\xE3o ou da presta\xE7\xE3o; II - a corre\xE7\xE3o de dados cadastrais que implique mudan\xE7a do remetente ou do destinat\xE1rio; III - a data de emiss\xE3o ou de sa\xEDda"},{value:"A Carta de Correcao e disciplinada pelo paragrafo 1o-A do art. 7o do Convenio S/N, de 15 de dezembro de 1970 e pode ser utilizada para regularizacao de erro ocorrido na emissao de documento fiscal, desde que o erro nao esteja relacionado com: I - as variaveis que determinam o valor do imposto tais como: base de calculo, aliquota, diferenca de preco, quantidade, valor da operacao ou da prestacao; II - a correcao de dados cadastrais que implique mudanca do remetente ou do destinatario; III - a data de emissao ou de saida.",label:"A Carta de Correcao e disciplinada pelo paragrafo 1o-A do art. 7o do Convenio S/N, de 15 de dezembro de 1970 e pode ser utilizada para regularizacao de erro ocorrido na emissao de documento fiscal, desde que o erro nao esteja relacionado com: I - as variaveis que determinam o valor do imposto tais como: base de calculo, aliquota, diferenca de preco, quantidade, valor da operacao ou da prestacao; II - a correcao de dados cadastrais que implique mudanca do remetente ou do destinatario; III - a data de emissao ou de saida"}],_valorInic:"A Carta de Correcao e disciplinada pelo paragrafo 1o-A do art. 7o do Convenio S/N, de 15 de dezembro de 1970 e pode ser utilizada para regularizacao de erro ocorrido na emissao de documento fiscal, desde que o erro nao esteja relacionado com: I - as variaveis que determinam o valor do imposto tais como: base de calculo, aliquota, diferenca de preco, quantidade, valor da operacao ou da prestacao; II - a correcao de dados cadastrais que implique mudanca do remetente ou do destinatario; III - a data de emissao ou de saida."}}}},xJ={infInut:{tpAmb:{_titulo:"Identifica\xE7\xE3o do Ambiente: 1 - Produ\xE7\xE3o 2 - Homologa\xE7\xE3o",_doc:"Identifica\xE7\xE3o do Ambiente: 1 - Produ\xE7\xE3o 2 - Homologa\xE7\xE3o (tpAmb)",_type:"TAmb",_tipo:"seletor",_enumeration:[{valor:"1",rotulo:"1 - Produ\xE7\xE3o"},{valor:"2",rotulo:"2 - Homologa\xE7\xE3o"}],_valorInic:"1"},xServ:{_titulo:"Servi\xE7o Solicitado",_doc:"Servi\xE7o Solicitado (xServ)",_tipo:"seletor",_enumeration:[{valor:"INUTILIZAR",rotulo:"INUTILIZAR"}],_valorInic:"INUTILIZAR"},cUF:{_titulo:"C\xF3digo da UF do emitente",_doc:"C\xF3digo da UF do emitente (cUF)",_type:"TCodUfIBGE",_tipo:"seletor",_enumeration:[{valor:"11",rotulo:"11"},{valor:"12",rotulo:"12"},{valor:"13",rotulo:"13"},{valor:"14",rotulo:"14"},{valor:"15",rotulo:"15"},{valor:"16",rotulo:"16"},{valor:"17",rotulo:"17"},{valor:"21",rotulo:"21"},{valor:"22",rotulo:"22"},{valor:"23",rotulo:"23"},{valor:"24",rotulo:"24"},{valor:"25",rotulo:"25"},{valor:"26",rotulo:"26"},{valor:"27",rotulo:"27"},{valor:"28",rotulo:"28"},{valor:"29",rotulo:"29"},{valor:"31",rotulo:"31"},{valor:"32",rotulo:"32"},{valor:"33",rotulo:"33"},{valor:"35",rotulo:"35"},{valor:"41",rotulo:"41"},{valor:"42",rotulo:"42"},{valor:"43",rotulo:"43"},{valor:"50",rotulo:"50"},{valor:"51",rotulo:"51"},{valor:"52",rotulo:"52"},{valor:"53",rotulo:"53"}],_valorInic:"11"},ano:{_titulo:"Ano de inutiliza\xE7\xE3o da numera\xE7\xE3o",_doc:"Ano de inutiliza\xE7\xE3o da numera\xE7\xE3o (ano)",_pattern:"[0-9]{2}",_type:"Tano",_tipo:"texto",_valorInic:""},CNPJ:{_titulo:"CNPJ do emitente",_doc:"CNPJ do emitente (CNPJ)",_pattern:"[0-9]{14}",_type:"TCnpj",_tipo:"texto",_maxLength:14,_valorInic:""},mod:{_titulo:"Modelo",_doc:"Modelo da NF-e (55, 65 etc.) (mod)",_type:"TMod",_tipo:"seletor",_enumeration:[{valor:"55",rotulo:"55 - NF-e"},{valor:"65",rotulo:"65 - NFC-e"}],_valorInic:"55"},serie:{_titulo:"S\xE9rie",_doc:"S\xE9rie da NF-e (serie)",_pattern:"0|[1-9]{1}[0-9]{0,2}",_type:"TSerie",_tipo:"texto",_valorInic:""},nNFIni:{_titulo:"N\xFAmero inicial",_doc:"N\xFAmero da NF-e inicial (nNFIni)",_pattern:"[1-9]{1}[0-9]{0,8}",_type:"TNF",_tipo:"texto",_valorInic:""},nNFFin:{_titulo:"N\xFAmero final",_doc:"N\xFAmero da NF-e final (nNFFin)",_pattern:"[1-9]{1}[0-9]{0,8}",_type:"TNF",_tipo:"texto",_valorInic:""},xJust:{_titulo:"Justificativa do pedido de inutiliza\xE7\xE3o",_doc:"Justificativa do pedido de inutiliza\xE7\xE3o (xJust)",_type:"TJust",_tipo:"texto",_minLength:15,_maxLength:255,_valorInic:""}}},CJ={infNFe:{ide:{_titulo:"identifica\xE7\xE3o da NF-e",_doc:"identifica\xE7\xE3o da NF-e (ide)",_tipo:"texto",_valorInic:"",cUF:{_titulo:"C\xF3digo da UF do emitente do Documento Fiscal",_doc:"C\xF3digo da UF do emitente do Documento Fiscal. Utilizar a Tabela do IBGE. (cUF)",_type:"TCodUfIBGE",_tipo:"seletor",_enumeration:[{valor:"11",rotulo:"11"},{valor:"12",rotulo:"12"},{valor:"13",rotulo:"13"},{valor:"14",rotulo:"14"},{valor:"15",rotulo:"15"},{valor:"16",rotulo:"16"},{valor:"17",rotulo:"17"},{valor:"21",rotulo:"21"},{valor:"22",rotulo:"22"},{valor:"23",rotulo:"23"},{valor:"24",rotulo:"24"},{valor:"25",rotulo:"25"},{valor:"26",rotulo:"26"},{valor:"27",rotulo:"27"},{valor:"28",rotulo:"28"},{valor:"29",rotulo:"29"},{valor:"31",rotulo:"31"},{valor:"32",rotulo:"32"},{valor:"33",rotulo:"33"},{valor:"35",rotulo:"35"},{valor:"41",rotulo:"41"},{valor:"42",rotulo:"42"},{valor:"43",rotulo:"43"},{valor:"50",rotulo:"50"},{valor:"51",rotulo:"51"},{valor:"52",rotulo:"52"},{valor:"53",rotulo:"53"}],_valorInic:"11"},cNF:{_titulo:"C\xF3digo num\xE9rico que comp\xF5e a Chave de Acesso",_doc:"C\xF3digo num\xE9rico que comp\xF5e a Chave de Acesso. N\xFAmero aleat\xF3rio gerado pelo emitente para cada NF-e. (cNF)",_pattern:"[0-9]{8}",_tipo:"texto",_valorInic:""},natOp:{_titulo:"Descri\xE7\xE3o da Natureza da Opera\xE7\xE3o",_doc:"Descri\xE7\xE3o da Natureza da Opera\xE7\xE3o (natOp)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},mod:{_titulo:"C\xF3digo do modelo do Documento Fiscal",_doc:"C\xF3digo do modelo do Documento Fiscal. 55 = NF-e; 65 = NFC-e. (mod)",_type:"TMod",_tipo:"seletor",_enumeration:[{valor:"55",rotulo:"55 - NF-e"},{valor:"65",rotulo:"65 - NFC-e"}],_valorInic:"55"},serie:{_titulo:"S\xE9rie do Documento Fiscal",_doc:"S\xE9rie do Documento Fiscal s\xE9rie normal 0-889 Avulsa Fisco 890-899 SCAN 900-999 (serie)",_pattern:"0|[1-9]{1}[0-9]{0,2}",_type:"TSerie",_tipo:"texto",_valorInic:""},nNF:{_titulo:"N\xFAmero do Documento Fiscal",_doc:"N\xFAmero do Documento Fiscal (nNF)",_pattern:"[1-9]{1}[0-9]{0,8}",_type:"TNF",_tipo:"texto",_valorInic:""},dhEmi:{_titulo:"Data e Hora de emiss\xE3o do Documento Fiscal",_doc:"Data e Hora de emiss\xE3o do Documento Fiscal (AAAA-MM-DDThh:mm:ssTZD) ex.: 2012-09-01T13:00:00-03:00 (dhEmi)",_pattern:"(((20(([02468][048])|([13579][26]))-02-29))|(20[0-9][0-9])-((((0[1-9])|(1[0-2]))-((0[1-9])|(1\\d)|(2[0-8])))|((((0[13578])|(1[02]))-31)|(((0[1,3-9])|(1[0-2]))-(29|30)))))T(20|21|22|23|[0-1]\\d):[0-5]\\d:[0-5]\\d([\\-,\\+](0[0-9]|10|11):00|([\\+](12):00))",_type:"TDateTimeUTC",_tipo:"dataHora",_valorInic:""},dhSaiEnt:{_titulo:"Data e Hora da sa\xEDda ou de entrada da mercadoria / produto",_doc:"Data e Hora da sa\xEDda ou de entrada da mercadoria / produto (AAAA-MM-DDTHH:mm:ssTZD) (dhSaiEnt) (Opcional)",_opcional:!0,_pattern:"(((20(([02468][048])|([13579][26]))-02-29))|(20[0-9][0-9])-((((0[1-9])|(1[0-2]))-((0[1-9])|(1\\d)|(2[0-8])))|((((0[13578])|(1[02]))-31)|(((0[1,3-9])|(1[0-2]))-(29|30)))))T(20|21|22|23|[0-1]\\d):[0-5]\\d:[0-5]\\d([\\-,\\+](0[0-9]|10|11):00|([\\+](12):00))",_type:"TDateTimeUTC",_tipo:"dataHora",_valorInic:""},tpNF:{_titulo:"Tipo do Documento Fiscal",_doc:"Tipo do Documento Fiscal (0 - entrada; 1 - sa\xEDda) (tpNF)",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - entrada"},{valor:"1",rotulo:"1 - sa\xEDda"}],_valorInic:"0"},idDest:{_titulo:"Identificador de Local de destino da opera\xE7\xE3o",_doc:"Identificador de Local de destino da opera\xE7\xE3o (1-Interna;2-Interestadual;3-Exterior) (idDest)",_tipo:"seletor",_enumeration:[{valor:"1",rotulo:"1 - Interna"},{valor:"2",rotulo:"2 - Interestadual"},{valor:"3",rotulo:"3 - Exterior"}],_valorInic:"1"},cMunFG:{_titulo:"C\xF3digo do Munic\xEDpio de Ocorr\xEAncia do Fato Gerador",_doc:"C\xF3digo do Munic\xEDpio de Ocorr\xEAncia do Fato Gerador (utilizar a tabela do IBGE) (cMunFG)",_pattern:"[0-9]{7}",_type:"TCodMunIBGE",_tipo:"texto",_valorInic:""},tpImp:{_titulo:"Formato de impress\xE3o do DANFE",_doc:"Formato de impress\xE3o do DANFE (0-sem DANFE;1-DANFe Retrato; 2-DANFe Paisagem;3-DANFe Simplificado;            4-DANFe NFC-e;5-DANFe NFC-e em mensagem eletr\xF4nica) (tpImp)",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - sem DANFE"},{valor:"1",rotulo:"1 - DANFe Retrato"},{valor:"2",rotulo:"2 - DANFe Paisagem"},{valor:"3",rotulo:"3 - DANFe Simplificado"},{valor:"4",rotulo:"4 - DANFe NFC-e"},{valor:"5",rotulo:"5 - DANFe NFC-e em mensagem eletr\xF4nica"}],_valorInic:"0"},tpEmis:{_titulo:"Forma de conting\xEAncia",_doc:"Forma de emiss\xE3o da NF-e 1 - Normal; 2 - Conting\xEAncia FS 3 - Conting\xEAncia SCAN 4 - Conting\xEAncia DPEC 5 - Conting\xEAncia FSDA 6 - Conting\xEAncia SVC - AN 7 - Conting\xEAncia SVC - RS 9 - Conting\xEAncia off-line NFC-e (tpEmis)",_tipo:"seletor",_enumeration:[{valor:"1",rotulo:"1 - Normal"},{valor:"2",rotulo:"2 - Conting\xEAncia FS"},{valor:"3",rotulo:"3 - Conting\xEAncia SCAN"},{valor:"4",rotulo:"4 - Conting\xEAncia DPEC"},{valor:"5",rotulo:"5 - Conting\xEAncia FSDA"},{valor:"6",rotulo:"6 - Conting\xEAncia SVC - AN"},{valor:"7",rotulo:"7 - Conting\xEAncia SVC - RS"},{valor:"9",rotulo:"9 - Conting\xEAncia off-line NFC-e"}],_valorInic:"1"},cDV:{_titulo:"Digito Verificador da Chave de Acesso da NF-e",_doc:"Digito Verificador da Chave de Acesso da NF-e (cDV)",_pattern:"[0-9]{1}",_tipo:"texto",_valorInic:""},tpAmb:{_titulo:"Identifica\xE7\xE3o do Ambiente",_doc:"Identifica\xE7\xE3o do Ambiente: 1 - Produ\xE7\xE3o 2 - Homologa\xE7\xE3o (tpAmb)",_type:"TAmb",_tipo:"seletor",_enumeration:[{valor:"1",rotulo:"1 - Produ\xE7\xE3o"},{valor:"2",rotulo:"2 - Homologa\xE7\xE3o"}],_valorInic:"1"},finNFe:{_titulo:"Finalidade da emiss\xE3o da NF-e",_doc:"Finalidade da emiss\xE3o da NF-e: 1 - NFe normal 2 - NFe complementar 3 - NFe de ajuste 4 - Devolu\xE7\xE3o/Retorno (finNFe)",_type:"TFinNFe",_tipo:"seletor",_enumeration:[{valor:"1",rotulo:"1 - NFe normal"},{valor:"2",rotulo:"2 - NFe complementar"},{valor:"3",rotulo:"3 - NFe de ajuste"},{valor:"4",rotulo:"4 - Devolu\xE7\xE3o/Retorno"}],_valorInic:"1"},indFinal:{_titulo:"Indica opera\xE7\xE3o com consumidor final",_doc:"Indica opera\xE7\xE3o com consumidor final (0-N\xE3o;1-Consumidor Final) (indFinal)",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - N\xE3o"},{valor:"1",rotulo:"1 - Consumidor Final"}],_valorInic:"0"},indPres:{_titulo:"Indicador de presen\xE7a do comprador no estabelecimento comercial no momento da oepra\xE7\xE3o",_doc:"Indicador de presen\xE7a do comprador no estabelecimento comercial no momento da oepra\xE7\xE3o            (0-N\xE3o se aplica (ex.: Nota Fiscal complementar ou de ajuste;1-Opera\xE7\xE3o presencial;2-N\xE3o presencial, internet;3-N\xE3o presencial, teleatendimento;4-NFC-e entrega em domic\xEDlio;5-Opera\xE7\xE3o presencial, fora do estabelecimento;9-N\xE3o presencial, outros) (indPres)",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - N\xE3o se aplica (ex.: Nota Fiscal complementar ou de ajuste"},{valor:"1",rotulo:"1 - Opera\xE7\xE3o presencial"},{valor:"2",rotulo:"2 - N\xE3o presencial, internet"},{valor:"3",rotulo:"3 - N\xE3o presencial, teleatendimento"},{valor:"4",rotulo:"4 - NFC-e entrega em domic\xEDlio"},{valor:"5",rotulo:"5 - Opera\xE7\xE3o presencial, fora do estabelecimento"},{valor:"9",rotulo:"9 - N\xE3o presencial, outros"}],_valorInic:"0"},indIntermed:{_titulo:"Indicador de intermediador/marketplace",_doc:"Indicador de intermediador/marketplace             0=Opera\xE7\xE3o sem intermediador (em site ou plataforma pr\xF3pria)             1=Opera\xE7\xE3o em site ou plataforma de terceiros (intermediadores/marketplace) (indIntermed) (Opcional)",_opcional:!0,_tipo:"seletor",_enumeration:[{valor:"",rotulo:"N\xE3o se aplica"},{valor:"0",rotulo:"0 - Opera\xE7\xE3o sem intermediador (em site ou plataforma pr\xF3pria)"},{valor:"1",rotulo:"1 - Opera\xE7\xE3o em site ou plataforma de terceiros (intermediadores/marketplace)"}],_valorInic:""},procEmi:{_titulo:"Processo de emiss\xE3o utilizado com a seguinte codifica\xE7\xE3o",_doc:"Processo de emiss\xE3o utilizado com a seguinte codifica\xE7\xE3o: 0 - emiss\xE3o de NF-e com aplicativo do contribuinte; 1 - emiss\xE3o de NF-e avulsa pelo Fisco; 2 - emiss\xE3o de NF-e avulsa, pelo contribuinte com seu certificado digital, atrav\xE9s do site do Fisco; 3- emiss\xE3o de NF-e pelo contribuinte com aplicativo fornecido pelo Fisco. (procEmi)",_type:"TProcEmi",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - emiss\xE3o de NF-e com aplicativo do contribuinte"},{valor:"1",rotulo:"1 - emiss\xE3o de NF-e avulsa pelo Fisco"},{valor:"2",rotulo:"2 - emiss\xE3o de NF-e avulsa, pelo contribuinte com seu certificado digital, atrav\xE9s do site do Fisco"},{valor:"3",rotulo:"3 -  emiss\xE3o de NF-e pelo contribuinte com aplicativo fornecido pelo Fisco"}],_valorInic:"0"},verProc:{_titulo:"vers\xE3o do aplicativo utilizado no processo de emiss\xE3o",_doc:"vers\xE3o do aplicativo utilizado no processo de emiss\xE3o (verProc)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:20,_valorInic:""},opcional:{_titulo:"Informar apenas para conting\xEAncia",_doc:"Informar apenas para tpEmis diferente de 1 (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Informar apenas para conting\xEAncia",_doc:"Informar apenas para tpEmis diferente de 1 (Opcional)",_valorInic:""},dhCont:{_titulo:"Entrada em conting\xEAncia",_doc:"Informar a data e hora de entrada em conting\xEAncia conting\xEAncia (dhCont)",_pattern:"(((20(([02468][048])|([13579][26]))-02-29))|(20[0-9][0-9])-((((0[1-9])|(1[0-2]))-((0[1-9])|(1\\d)|(2[0-8])))|((((0[13578])|(1[02]))-31)|(((0[1,3-9])|(1[0-2]))-(29|30)))))T(20|21|22|23|[0-1]\\d):[0-5]\\d:[0-5]\\d([\\-,\\+](0[0-9]|10|11):00|([\\+](12):00))",_type:"TDateTimeUTC",_tipo:"dataHora",_valorInic:""},xJust:{_titulo:"Justificativa da conting\xEAncia",_doc:"Informar a Justificativa da entrada (xJust)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:15,_maxLength:256,_valorInic:""}},NFref:{_titulo:"Grupo de infroma\xE7\xF5es da NF referenciada",_doc:"Grupo de infroma\xE7\xF5es da NF referenciada (NFref) (Lista)",_opcional:!0,_tipo:"texto",_valorInic:"",lista:{escolhas:{_titulo:"",_doc:"",_tipo:"texto",_valorInic:"",valor_escolha:{_titulo:"",_doc:"",_valorInic:""},refNFe:{_titulo:"Chave de acesso das NF-e referenciadas",_doc:"Chave de acesso das NF-e referenciadas. Chave de acesso compostas por C\xF3digo da UF (tabela do IBGE) + AAMM da emiss\xE3o + CNPJ do Emitente + modelo, s\xE9rie e n\xFAmero da NF-e Referenciada + C\xF3digo Num\xE9rico + DV. (refNFe)",_pattern:"[0-9]{44}",_type:"TChNFe",_tipo:"texto",_maxLength:44,_valorInic:""},refNF:{_titulo:"Dados da NF",_doc:"Dados da NF modelo 1/1A referenciada ou NF modelo 2 referenciada (refNF)",_tipo:"texto",_valorInic:"",cUF:{_titulo:"C\xF3digo da UF do emitente do Documento Fiscal",_doc:"C\xF3digo da UF do emitente do Documento Fiscal. Utilizar a Tabela do IBGE. (cUF)",_type:"TCodUfIBGE",_tipo:"seletor",_enumeration:[{valor:"11",rotulo:"11"},{valor:"12",rotulo:"12"},{valor:"13",rotulo:"13"},{valor:"14",rotulo:"14"},{valor:"15",rotulo:"15"},{valor:"16",rotulo:"16"},{valor:"17",rotulo:"17"},{valor:"21",rotulo:"21"},{valor:"22",rotulo:"22"},{valor:"23",rotulo:"23"},{valor:"24",rotulo:"24"},{valor:"25",rotulo:"25"},{valor:"26",rotulo:"26"},{valor:"27",rotulo:"27"},{valor:"28",rotulo:"28"},{valor:"29",rotulo:"29"},{valor:"31",rotulo:"31"},{valor:"32",rotulo:"32"},{valor:"33",rotulo:"33"},{valor:"35",rotulo:"35"},{valor:"41",rotulo:"41"},{valor:"42",rotulo:"42"},{valor:"43",rotulo:"43"},{valor:"50",rotulo:"50"},{valor:"51",rotulo:"51"},{valor:"52",rotulo:"52"},{valor:"53",rotulo:"53"}],_valorInic:"11"},AAMM:{_titulo:"AAMM da emiss\xE3o",_doc:"AAMM da emiss\xE3o (AAMM)",_pattern:"[0-9]{2}[0]{1}[1-9]{1}|[0-9]{2}[1]{1}[0-2]{1}",_tipo:"texto",_valorInic:""},CNPJ:{_titulo:"CNPJ do emitente do documento fiscal referenciado",_doc:"CNPJ do emitente do documento fiscal referenciado (CNPJ)",_pattern:"[0-9]{14}",_type:"TCnpj",_tipo:"texto",_maxLength:14,_valorInic:""},mod:{_titulo:"C\xF3digo do modelo do Documento Fiscal",_doc:"C\xF3digo do modelo do Documento Fiscal. Utilizar 01 para NF modelo 1/1A e 02 para NF modelo 02 (mod)",_tipo:"seletor",_enumeration:[{valor:"01",rotulo:"01 para NF modelo 1/1A"},{valor:"02",rotulo:"02 para NF modelo 02"}],_valorInic:"01"},serie:{_titulo:"S\xE9rie do Documento Fiscal",_doc:"S\xE9rie do Documento Fiscal, informar zero se inexistente (serie)",_pattern:"0|[1-9]{1}[0-9]{0,2}",_type:"TSerie",_tipo:"texto",_valorInic:""},nNF:{_titulo:"N\xFAmero do Documento Fiscal",_doc:"N\xFAmero do Documento Fiscal (nNF)",_pattern:"[1-9]{1}[0-9]{0,8}",_type:"TNF",_tipo:"texto",_valorInic:""}},refNFP:{_titulo:"Grupo com as informa\xE7\xF5es NF de produtor referenciada",_doc:"Grupo com as informa\xE7\xF5es NF de produtor referenciada (refNFP)",_tipo:"texto",_valorInic:"",cUF:{_titulo:"C\xF3digo da UF do emitente do Documento Fiscal",_doc:"C\xF3digo da UF do emitente do Documento Fiscal. Utilizar a Tabela do IBGE (Anexo IV - Tabela de UF, Munic\xEDpio e Pa\xEDs) (cUF)",_type:"TCodUfIBGE",_tipo:"seletor",_enumeration:[{valor:"11",rotulo:"11"},{valor:"12",rotulo:"12"},{valor:"13",rotulo:"13"},{valor:"14",rotulo:"14"},{valor:"15",rotulo:"15"},{valor:"16",rotulo:"16"},{valor:"17",rotulo:"17"},{valor:"21",rotulo:"21"},{valor:"22",rotulo:"22"},{valor:"23",rotulo:"23"},{valor:"24",rotulo:"24"},{valor:"25",rotulo:"25"},{valor:"26",rotulo:"26"},{valor:"27",rotulo:"27"},{valor:"28",rotulo:"28"},{valor:"29",rotulo:"29"},{valor:"31",rotulo:"31"},{valor:"32",rotulo:"32"},{valor:"33",rotulo:"33"},{valor:"35",rotulo:"35"},{valor:"41",rotulo:"41"},{valor:"42",rotulo:"42"},{valor:"43",rotulo:"43"},{valor:"50",rotulo:"50"},{valor:"51",rotulo:"51"},{valor:"52",rotulo:"52"},{valor:"53",rotulo:"53"}],_valorInic:"11"},AAMM:{_titulo:"AAMM da emiss\xE3o da NF de produtor",_doc:"AAMM da emiss\xE3o da NF de produtor (AAMM)",_pattern:"[0-9]{2}[0]{1}[1-9]{1}|[0-9]{2}[1]{1}[0-2]{1}",_tipo:"texto",_valorInic:""},escolhas:{_titulo:"",_doc:"",_tipo:"texto",_valorInic:"",valor_escolha:{_titulo:"",_doc:"",_valorInic:""},CNPJ:{_titulo:"CNPJ do emitente da NF de produtor",_doc:"CNPJ do emitente da NF de produtor (CNPJ)",_pattern:"[0-9]{14}",_type:"TCnpj",_tipo:"texto",_maxLength:14,_valorInic:""},CPF:{_titulo:"CPF do emitente da NF de produtor",_doc:"CPF do emitente da NF de produtor (CPF)",_pattern:"[0-9]{11}",_type:"TCpf",_tipo:"texto",_maxLength:11,_valorInic:""}},IE:{_titulo:"IE do emitente da NF de Produtor",_doc:"IE do emitente da NF de Produtor (IE)",_pattern:"ISENTO|[0-9]{2,14}",_type:"TIeDest",_tipo:"texto",_maxLength:14,_valorInic:""},mod:{_titulo:"C\xF3digo do modelo do Documento Fiscal",_doc:"C\xF3digo do modelo do Documento Fiscal - utilizar 04 para NF de produtor  ou 01 para NF Avulsa (mod)",_tipo:"seletor",_enumeration:[{valor:"01",rotulo:"01 para NF Avulsa"},{valor:"04",rotulo:"04 para NF de produtor  ou 01 para NF Avulsa"}],_valorInic:"01"},serie:{_titulo:"S\xE9rie do Documento Fiscal",_doc:"S\xE9rie do Documento Fiscal, informar zero se inexistente (serie)",_pattern:"0|[1-9]{1}[0-9]{0,2}",_type:"TSerie",_tipo:"texto",_valorInic:""},nNF:{_titulo:"N\xFAmero do Documento Fiscal",_doc:"N\xFAmero do Documento Fiscal - 1 - 999999999 (nNF)",_pattern:"[1-9]{1}[0-9]{0,8}",_type:"TNF",_tipo:"texto",_valorInic:""}},refCTe:{_titulo:"Utilizar esta TAG para referenciar um CT-e emitido anteriormente, vinculada a NF-e atual",_doc:"Utilizar esta TAG para referenciar um CT-e emitido anteriormente, vinculada a NF-e atual (refCTe)",_pattern:"[0-9]{44}",_type:"TChNFe",_tipo:"texto",_maxLength:44,_valorInic:""},refECF:{_titulo:"Grupo do Cupom Fiscal vinculado \xE0 NF-e",_doc:"Grupo do Cupom Fiscal vinculado \xE0 NF-e (refECF)",_tipo:"texto",_valorInic:"",mod:{_titulo:"C\xF3digo do modelo do Documento Fiscal",_doc:'C\xF3digo do modelo do Documento Fiscal  Preencher com "2B", quando se tratar de Cupom Fiscal emitido por m\xE1quina registradora (n\xE3o ECF), com "2C", quando se tratar de Cupom Fiscal PDV, ou "2D", quando se tratar de Cupom Fiscal (emitido por ECF) (mod)',_tipo:"seletor",_enumeration:[{valor:"2B",rotulo:"2B, quando se tratar de Cupom Fiscal emitido por m\xE1quina registradora(n\xE3o ECF)"},{valor:"2C",rotulo:"2C, quando se tratar de Cupom Fiscal PDV"},{valor:"2D",rotulo:"2D, quando se tratar de Cupom Fiscal (emitido por ECF)"}],_valorInic:"2B"},nECF:{_titulo:"Informar o n\xFAmero de ordem seq\xFCencial do ECF que emitiu o Cupom Fiscal vinculado \xE0 NF-e",_doc:"Informar o n\xFAmero de ordem seq\xFCencial do ECF que emitiu o Cupom Fiscal vinculado \xE0 NF-e (nECF)",_pattern:"[0-9]{1,3}",_tipo:"texto",_valorInic:""},nCOO:{_titulo:"Informar o N\xFAmero do Contador de Ordem de Opera\xE7\xE3o - COO vinculado \xE0 NF-e",_doc:"Informar o N\xFAmero do Contador de Ordem de Opera\xE7\xE3o - COO vinculado \xE0 NF-e (nCOO)",_pattern:"[0-9]{1,6}",_tipo:"texto",_valorInic:""}}}}}},emit:{_titulo:"Identifica\xE7\xE3o do emitente",_doc:"Identifica\xE7\xE3o do emitente (emit)",_tipo:"texto",_valorInic:"",escolhas:{_titulo:"",_doc:"",_tipo:"texto",_valorInic:"",valor_escolha:{_titulo:"",_doc:"",_valorInic:""},CNPJ:{_titulo:"N\xFAmero do CNPJ do emitente",_doc:"N\xFAmero do CNPJ do emitente (CNPJ)",_pattern:"[0-9]{14}",_type:"TCnpj",_tipo:"texto",_maxLength:14,_valorInic:""},CPF:{_titulo:"N\xFAmero do CPF do emitente",_doc:"N\xFAmero do CPF do emitente (CPF)",_pattern:"[0-9]{11}",_type:"TCpf",_tipo:"texto",_maxLength:11,_valorInic:""}},xNome:{_titulo:"Raz\xE3o Social ou Nome do emitente",_doc:"Raz\xE3o Social ou Nome do emitente (xNome)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:2,_maxLength:60,_valorInic:""},xFant:{_titulo:"Nome fantasia",_doc:"Nome fantasia (xFant) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},enderEmit:{_titulo:"Endere\xE7o do emitente",_doc:"Endere\xE7o do emitente (enderEmit)",_type:"TEnderEmi",_tipo:"texto",_valorInic:"",xLgr:{_titulo:"Logradouro",_doc:"Logradouro (xLgr)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:2,_maxLength:60,_valorInic:""},nro:{_titulo:"N\xFAmero",_doc:"N\xFAmero (nro)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},xCpl:{_titulo:"Complemento",_doc:"Complemento (xCpl) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},xBairro:{_titulo:"Bairro",_doc:"Bairro (xBairro)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:2,_maxLength:60,_valorInic:""},cMun:{_titulo:"C\xF3digo do munic\xEDpio",_doc:"C\xF3digo do munic\xEDpio (cMun)",_pattern:"[0-9]{7}",_type:"TCodMunIBGE",_tipo:"texto",_valorInic:""},xMun:{_titulo:"Nome do munic\xEDpio",_doc:"Nome do munic\xEDpio (xMun)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:2,_maxLength:60,_valorInic:""},UF:{_titulo:"Sigla da UF",_doc:"Sigla da UF (UF)",_type:"TUfEmi",_tipo:"seletor",_enumeration:[{valor:"AC",rotulo:"AC"},{valor:"AL",rotulo:"AL"},{valor:"AM",rotulo:"AM"},{valor:"AP",rotulo:"AP"},{valor:"BA",rotulo:"BA"},{valor:"CE",rotulo:"CE"},{valor:"DF",rotulo:"DF"},{valor:"ES",rotulo:"ES"},{valor:"GO",rotulo:"GO"},{valor:"MA",rotulo:"MA"},{valor:"MG",rotulo:"MG"},{valor:"MS",rotulo:"MS"},{valor:"MT",rotulo:"MT"},{valor:"PA",rotulo:"PA"},{valor:"PB",rotulo:"PB"},{valor:"PE",rotulo:"PE"},{valor:"PI",rotulo:"PI"},{valor:"PR",rotulo:"PR"},{valor:"RJ",rotulo:"RJ"},{valor:"RN",rotulo:"RN"},{valor:"RO",rotulo:"RO"},{valor:"RR",rotulo:"RR"},{valor:"RS",rotulo:"RS"},{valor:"SC",rotulo:"SC"},{valor:"SE",rotulo:"SE"},{valor:"SP",rotulo:"SP"},{valor:"TO",rotulo:"TO"}],_valorInic:"AC"},CEP:{_titulo:"CEP - NT 2011/004",_doc:"CEP - NT 2011/004 (CEP)",_pattern:"[0-9]{8}",_tipo:"texto",_valorInic:""},cPais:{_titulo:"C\xF3digo do pa\xEDs",_doc:"C\xF3digo do pa\xEDs (cPais) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"seletor",_enumeration:[{valor:"",rotulo:"N\xE3o se aplica"},{valor:"1058",rotulo:"1058"}],_valorInic:""},xPais:{_titulo:"Nome do pa\xEDs",_doc:"Nome do pa\xEDs (xPais) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"seletor",_enumeration:[{valor:"",rotulo:"N\xE3o se aplica"},{valor:"Brasil",rotulo:"Brasil"},{valor:"BRASIL",rotulo:"BRASIL"}],_valorInic:""},fone:{_titulo:"Preencher com C\xF3digo DDD + n\xFAmero do telefone (v.2.0)",_doc:"Preencher com C\xF3digo DDD + n\xFAmero do telefone (v.2.0) (fone) (Opcional)",_opcional:!0,_pattern:"[0-9]{6,14}",_tipo:"texto",_valorInic:""}},IE:{_titulo:"Inscri\xE7\xE3o Estadual do Emitente",_doc:"Inscri\xE7\xE3o Estadual do Emitente (IE)",_pattern:"[0-9]{2,14}|ISENTO",_type:"TIe",_tipo:"texto",_maxLength:14,_valorInic:""},IEST:{_titulo:"Inscricao Estadual do Substituto Tribut\xE1rio",_doc:"Inscricao Estadual do Substituto Tribut\xE1rio (IEST) (Opcional)",_opcional:!0,_pattern:"[0-9]{2,14}",_type:"TIeST",_tipo:"texto",_maxLength:14,_valorInic:""},opcional:{_titulo:"Grupo de informa\xE7\xF5es de interesse da Prefeitura",_doc:"Grupo de informa\xE7\xF5es de interesse da Prefeitura (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de informa\xE7\xF5es de interesse da Prefeitura",_doc:"Grupo de informa\xE7\xF5es de interesse da Prefeitura (Opcional)",_valorInic:""},IM:{_titulo:"Inscri\xE7\xE3o Municipal",_doc:"Inscri\xE7\xE3o Municipal (IM)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:15,_valorInic:""},CNAE:{_titulo:"CNAE Fiscal",_doc:"CNAE Fiscal (CNAE) (Opcional)",_opcional:!0,_pattern:"[0-9]{7}",_tipo:"texto",_valorInic:""}},CRT:{_titulo:"C\xF3digo de Regime Tribut\xE1rio",_doc:"C\xF3digo de Regime Tribut\xE1rio.  Este campo ser\xE1 obrigatoriamente preenchido com: 1 - Simples Nacional; 2 - Simples Nacional - excesso de sublimite de receita bruta; 3 - Regime Normal; 4 - Simples Nacional - MEI. (CRT)",_tipo:"seletor",_enumeration:[{valor:"1",rotulo:"1 - Simples Nacional"},{valor:"2",rotulo:"2 - Simples Nacional - excesso de sublimite de receita bruta"},{valor:"3",rotulo:"3 - Regime Normal"},{valor:"4",rotulo:"4 - Simples Nacional - MEI"}],_valorInic:"1"}},avulsa:{_titulo:"Emiss\xE3o de avulsa, informar os dados do Fisco emitente",_doc:"Emiss\xE3o de avulsa, informar os dados do Fisco emitente (avulsa) (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Emiss\xE3o de avulsa, informar os dados do Fisco emitente",_doc:"Emiss\xE3o de avulsa, informar os dados do Fisco emitente (avulsa) (Opcional)",_valorInic:""},CNPJ:{_titulo:"CNPJ do \xD3rg\xE3o emissor",_doc:"CNPJ do \xD3rg\xE3o emissor (CNPJ)",_pattern:"[0-9]{14}",_type:"TCnpj",_tipo:"texto",_maxLength:14,_valorInic:""},xOrgao:{_titulo:"\xD3rg\xE3o emitente",_doc:"\xD3rg\xE3o emitente (xOrgao)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},matr:{_titulo:"Matr\xEDcula do agente",_doc:"Matr\xEDcula do agente (matr)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},xAgente:{_titulo:"Nome do agente",_doc:"Nome do agente (xAgente)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},fone:{_titulo:"Telefone",_doc:"Telefone (fone) (Opcional)",_opcional:!0,_pattern:"[0-9]{6,14}",_tipo:"texto",_valorInic:""},UF:{_titulo:"Sigla da Unidade da Federa\xE7\xE3o",_doc:"Sigla da Unidade da Federa\xE7\xE3o (UF)",_type:"TUfEmi",_tipo:"seletor",_enumeration:[{valor:"AC",rotulo:"AC"},{valor:"AL",rotulo:"AL"},{valor:"AM",rotulo:"AM"},{valor:"AP",rotulo:"AP"},{valor:"BA",rotulo:"BA"},{valor:"CE",rotulo:"CE"},{valor:"DF",rotulo:"DF"},{valor:"ES",rotulo:"ES"},{valor:"GO",rotulo:"GO"},{valor:"MA",rotulo:"MA"},{valor:"MG",rotulo:"MG"},{valor:"MS",rotulo:"MS"},{valor:"MT",rotulo:"MT"},{valor:"PA",rotulo:"PA"},{valor:"PB",rotulo:"PB"},{valor:"PE",rotulo:"PE"},{valor:"PI",rotulo:"PI"},{valor:"PR",rotulo:"PR"},{valor:"RJ",rotulo:"RJ"},{valor:"RN",rotulo:"RN"},{valor:"RO",rotulo:"RO"},{valor:"RR",rotulo:"RR"},{valor:"RS",rotulo:"RS"},{valor:"SC",rotulo:"SC"},{valor:"SE",rotulo:"SE"},{valor:"SP",rotulo:"SP"},{valor:"TO",rotulo:"TO"}],_valorInic:"AC"},nDAR:{_titulo:"N\xFAmero do Documento de Arrecada\xE7\xE3o de Receita",_doc:"N\xFAmero do Documento de Arrecada\xE7\xE3o de Receita (nDAR) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},dEmi:{_titulo:"Data de emiss\xE3o do DAR",_doc:"Data de emiss\xE3o do DAR (AAAA-MM-DD) (dEmi) (Opcional)",_opcional:!0,_pattern:"(((20(([02468][048])|([13579][26]))-02-29))|(20[0-9][0-9])-((((0[1-9])|(1[0-2]))-((0[1-9])|(1\\d)|(2[0-8])))|((((0[13578])|(1[02]))-31)|(((0[1,3-9])|(1[0-2]))-(29|30)))))",_type:"TData",_tipo:"data",_valorInic:""},vDAR:{_titulo:"Valor Total constante no DAR",_doc:"Valor Total constante no DAR (vDAR) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},repEmi:{_titulo:"Reparti\xE7\xE3o Fiscal emitente",_doc:"Reparti\xE7\xE3o Fiscal emitente (repEmi)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},dPag:{_titulo:"Data de pagamento do DAR",_doc:"Data de pagamento do DAR (AAAA-MM-DD) (dPag) (Opcional)",_opcional:!0,_pattern:"(((20(([02468][048])|([13579][26]))-02-29))|(20[0-9][0-9])-((((0[1-9])|(1[0-2]))-((0[1-9])|(1\\d)|(2[0-8])))|((((0[13578])|(1[02]))-31)|(((0[1,3-9])|(1[0-2]))-(29|30)))))",_type:"TData",_tipo:"data",_valorInic:""}},dest:{_titulo:"Identifica\xE7\xE3o do Destinat\xE1rio",_doc:"Identifica\xE7\xE3o do Destinat\xE1rio (dest) (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Identifica\xE7\xE3o do Destinat\xE1rio",_doc:"Identifica\xE7\xE3o do Destinat\xE1rio (dest) (Opcional)",_valorInic:""},escolhas:{_titulo:"",_doc:"",_tipo:"texto",_valorInic:"",valor_escolha:{_titulo:"",_doc:"",_valorInic:""},CNPJ:{_titulo:"N\xFAmero do CNPJ",_doc:"N\xFAmero do CNPJ (CNPJ)",_pattern:"[0-9]{14}",_type:"TCnpj",_tipo:"texto",_maxLength:14,_valorInic:""},CPF:{_titulo:"N\xFAmero do CPF",_doc:"N\xFAmero do CPF (CPF)",_pattern:"[0-9]{11}",_type:"TCpf",_tipo:"texto",_maxLength:11,_valorInic:""},idEstrangeiro:{_titulo:"Identificador do destinat\xE1rio",_doc:"Identificador do destinat\xE1rio, em caso de comprador estrangeiro (idEstrangeiro)",_pattern:"([!-\xFF]{0}|[!-\xFF]{5,20})?",_tipo:"texto",_valorInic:""}},xNome:{_titulo:"Raz\xE3o Social ou nome do destinat\xE1rio",_doc:"Raz\xE3o Social ou nome do destinat\xE1rio (xNome) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:2,_maxLength:60,_valorInic:""},enderDest:{_titulo:"Dados do endere\xE7o",_doc:"Dados do endere\xE7o (enderDest) (Opcional)",_opcional:!0,_type:"TEndereco",_tipo:"texto",_valorInic:"",visivel:{_titulo:"Dados do endere\xE7o",_doc:"Dados do endere\xE7o (enderDest) (Opcional)",_valorInic:""},xLgr:{_titulo:"Logradouro",_doc:"Logradouro (xLgr)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:2,_maxLength:60,_valorInic:""},nro:{_titulo:"N\xFAmero",_doc:"N\xFAmero (nro)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},xCpl:{_titulo:"Complemento",_doc:"Complemento (xCpl) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},xBairro:{_titulo:"Bairro",_doc:"Bairro (xBairro)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:2,_maxLength:60,_valorInic:""},cMun:{_titulo:"C\xF3digo do munic\xEDpio",_doc:"C\xF3digo do munic\xEDpio (utilizar a tabela do IBGE), informar 9999999 para opera\xE7\xF5es com o exterior. (cMun)",_pattern:"[0-9]{7}",_type:"TCodMunIBGE",_tipo:"texto",_valorInic:""},xMun:{_titulo:"Nome do munic\xEDpio",_doc:"Nome do munic\xEDpio, informar EXTERIOR para opera\xE7\xF5es com o exterior. (xMun)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:2,_maxLength:60,_valorInic:""},UF:{_titulo:"Sigla da UF",_doc:"Sigla da UF, informar EX para opera\xE7\xF5es com o exterior. (UF)",_type:"TUf",_tipo:"seletor",_enumeration:[{valor:"AC",rotulo:"AC"},{valor:"AL",rotulo:"AL"},{valor:"AM",rotulo:"AM"},{valor:"AP",rotulo:"AP"},{valor:"BA",rotulo:"BA"},{valor:"CE",rotulo:"CE"},{valor:"DF",rotulo:"DF"},{valor:"ES",rotulo:"ES"},{valor:"GO",rotulo:"GO"},{valor:"MA",rotulo:"MA"},{valor:"MG",rotulo:"MG"},{valor:"MS",rotulo:"MS"},{valor:"MT",rotulo:"MT"},{valor:"PA",rotulo:"PA"},{valor:"PB",rotulo:"PB"},{valor:"PE",rotulo:"PE"},{valor:"PI",rotulo:"PI"},{valor:"PR",rotulo:"PR"},{valor:"RJ",rotulo:"RJ"},{valor:"RN",rotulo:"RN"},{valor:"RO",rotulo:"RO"},{valor:"RR",rotulo:"RR"},{valor:"RS",rotulo:"RS"},{valor:"SC",rotulo:"SC"},{valor:"SE",rotulo:"SE"},{valor:"SP",rotulo:"SP"},{valor:"TO",rotulo:"TO"},{valor:"EX",rotulo:"EX para opera\xE7\xF5es com o exterior"}],_valorInic:"AC"},CEP:{_titulo:"CEP",_doc:"CEP (CEP) (Opcional)",_opcional:!0,_pattern:"[0-9]{8}",_tipo:"texto",_valorInic:""},cPais:{_titulo:"C\xF3digo de Pais",_doc:"C\xF3digo de Pais (cPais) (Opcional)",_opcional:!0,_pattern:"[0-9]{1,4}",_tipo:"texto",_valorInic:""},xPais:{_titulo:"Nome do pa\xEDs",_doc:"Nome do pa\xEDs (xPais) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:2,_maxLength:60,_valorInic:""},fone:{_titulo:"Telefone",_doc:"Telefone, preencher com C\xF3digo DDD + n\xFAmero do telefone , nas opera\xE7\xF5es com exterior \xE9 permtido informar o c\xF3digo do pa\xEDs + c\xF3digo da localidade + n\xFAmero do telefone (fone) (Opcional)",_opcional:!0,_pattern:"[0-9]{6,14}",_tipo:"texto",_valorInic:""}},indIEDest:{_titulo:"Indicador da IE do destinat\xE1rio",_doc:"Indicador da IE do destinat\xE1rio: 1 - Contribuinte ICMS; 2 - Contribuinte isento de inscri\xE7\xE3o; 9 - N\xE3o Contribuinte (indIEDest)",_tipo:"seletor",_enumeration:[{valor:"1",rotulo:"1 - Contribuinte ICMS"},{valor:"2",rotulo:"2 - Contribuinte isento de inscri\xE7\xE3o"},{valor:"9",rotulo:"9 - N\xE3o Contribuinte"}],_valorInic:"1"},IE:{_titulo:"Inscri\xE7\xE3o Estadual",_doc:"Inscri\xE7\xE3o Estadual (obrigat\xF3rio nas opera\xE7\xF5es com contribuintes do ICMS) (IE) (Opcional)",_opcional:!0,_pattern:"[0-9]{2,14}",_type:"TIeDestNaoIsento",_tipo:"texto",_maxLength:14,_valorInic:""},ISUF:{_titulo:"Inscri\xE7\xE3o na SUFRAMA",_doc:"Inscri\xE7\xE3o na SUFRAMA (Obrigat\xF3rio nas opera\xE7\xF5es com as \xE1reas com benef\xEDcios de incentivos fiscais sob controle da SUFRAMA) PL_005d - 11/08/09 - alterado para aceitar 8 ou 9 d\xEDgitos (ISUF) (Opcional)",_opcional:!0,_pattern:"[0-9]{8,9}",_tipo:"texto",_valorInic:""},IM:{_titulo:"Inscri\xE7\xE3o Municipal do tomador do servi\xE7o",_doc:"Inscri\xE7\xE3o Municipal do tomador do servi\xE7o (IM) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:15,_valorInic:""},email:{_titulo:"Informar o e-mail do destinat\xE1rio",_doc:"Informar o e-mail do destinat\xE1rio. O campo pode ser utilizado para informar o e-mail de recep\xE7\xE3o da NF-e indicada pelo destinat\xE1rio (email) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""}},retirada:{_titulo:"Identifica\xE7\xE3o do Local de Retirada",_doc:"Identifica\xE7\xE3o do Local de Retirada (informar apenas quando for diferente do endere\xE7o do remetente) (retirada) (Opcional)",_opcional:!0,_type:"TLocal",_tipo:"texto",_valorInic:"",visivel:{_titulo:"Identifica\xE7\xE3o do Local de Retirada",_doc:"Identifica\xE7\xE3o do Local de Retirada (informar apenas quando for diferente do endere\xE7o do remetente) (retirada) (Opcional)",_valorInic:""},escolhas:{_titulo:"",_doc:"",_tipo:"texto",_valorInic:"",valor_escolha:{_titulo:"",_doc:"",_valorInic:""},CNPJ:{_titulo:"CNPJ",_doc:"CNPJ (CNPJ)",_pattern:"[0-9]{0}|[0-9]{14}",_type:"TCnpjOpc",_tipo:"texto",_maxLength:14,_valorInic:""},CPF:{_titulo:"CPF",_doc:"CPF (CPF)",_pattern:"[0-9]{11}",_type:"TCpf",_tipo:"texto",_maxLength:11,_valorInic:""}},xNome:{_titulo:"Raz\xE3o Social ou Nome do Expedidor/Recebedor",_doc:"Raz\xE3o Social ou Nome do Expedidor/Recebedor (xNome) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:2,_maxLength:60,_valorInic:""},xLgr:{_titulo:"Logradouro",_doc:"Logradouro (xLgr)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:2,_maxLength:60,_valorInic:""},nro:{_titulo:"N\xFAmero",_doc:"N\xFAmero (nro)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},xCpl:{_titulo:"Complemento",_doc:"Complemento (xCpl) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},xBairro:{_titulo:"Bairro",_doc:"Bairro (xBairro)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:2,_maxLength:60,_valorInic:""},cMun:{_titulo:"C\xF3digo do munic\xEDpio",_doc:"C\xF3digo do munic\xEDpio (utilizar a tabela do IBGE) (cMun)",_pattern:"[0-9]{7}",_type:"TCodMunIBGE",_tipo:"texto",_valorInic:""},xMun:{_titulo:"Nome do munic\xEDpio",_doc:"Nome do munic\xEDpio (xMun)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:2,_maxLength:60,_valorInic:""},UF:{_titulo:"Sigla da UF",_doc:"Sigla da UF (UF)",_type:"TUf",_tipo:"seletor",_enumeration:[{valor:"AC",rotulo:"AC"},{valor:"AL",rotulo:"AL"},{valor:"AM",rotulo:"AM"},{valor:"AP",rotulo:"AP"},{valor:"BA",rotulo:"BA"},{valor:"CE",rotulo:"CE"},{valor:"DF",rotulo:"DF"},{valor:"ES",rotulo:"ES"},{valor:"GO",rotulo:"GO"},{valor:"MA",rotulo:"MA"},{valor:"MG",rotulo:"MG"},{valor:"MS",rotulo:"MS"},{valor:"MT",rotulo:"MT"},{valor:"PA",rotulo:"PA"},{valor:"PB",rotulo:"PB"},{valor:"PE",rotulo:"PE"},{valor:"PI",rotulo:"PI"},{valor:"PR",rotulo:"PR"},{valor:"RJ",rotulo:"RJ"},{valor:"RN",rotulo:"RN"},{valor:"RO",rotulo:"RO"},{valor:"RR",rotulo:"RR"},{valor:"RS",rotulo:"RS"},{valor:"SC",rotulo:"SC"},{valor:"SE",rotulo:"SE"},{valor:"SP",rotulo:"SP"},{valor:"TO",rotulo:"TO"},{valor:"EX",rotulo:"EX"}],_valorInic:"AC"},CEP:{_titulo:"CEP",_doc:"CEP (CEP) (Opcional)",_opcional:!0,_pattern:"[0-9]{8}",_tipo:"texto",_valorInic:""},cPais:{_titulo:"C\xF3digo de Pais",_doc:"C\xF3digo de Pais (cPais) (Opcional)",_opcional:!0,_pattern:"[0-9]{1,4}",_tipo:"texto",_valorInic:""},xPais:{_titulo:"Nome do pa\xEDs",_doc:"Nome do pa\xEDs (xPais) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:2,_maxLength:60,_valorInic:""},fone:{_titulo:"Telefone",_doc:"Telefone, preencher com C\xF3digo DDD + n\xFAmero do telefone , nas opera\xE7\xF5es com exterior \xE9 permtido informar o c\xF3digo do pa\xEDs + c\xF3digo da localidade + n\xFAmero do telefone (fone) (Opcional)",_opcional:!0,_pattern:"[0-9]{6,14}",_tipo:"texto",_valorInic:""},email:{_titulo:"Informar o e-mail do expedidor/Recebedor",_doc:"Informar o e-mail do expedidor/Recebedor. O campo pode ser utilizado para informar o e-mail de recep\xE7\xE3o da NF-e indicada pelo expedidor (email) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},IE:{_titulo:"Inscri\xE7\xE3o Estadual",_doc:"Inscri\xE7\xE3o Estadual (IE) (Opcional)",_opcional:!0,_pattern:"[0-9]{2,14}|ISENTO",_type:"TIe",_tipo:"texto",_maxLength:14,_valorInic:""}},entrega:{_titulo:"Identifica\xE7\xE3o do Local de Entrega",_doc:"Identifica\xE7\xE3o do Local de Entrega (informar apenas quando for diferente do endere\xE7o do destinat\xE1rio) (entrega) (Opcional)",_opcional:!0,_type:"TLocal",_tipo:"texto",_valorInic:"",visivel:{_titulo:"Identifica\xE7\xE3o do Local de Entrega",_doc:"Identifica\xE7\xE3o do Local de Entrega (informar apenas quando for diferente do endere\xE7o do destinat\xE1rio) (entrega) (Opcional)",_valorInic:""},escolhas:{_titulo:"",_doc:"",_tipo:"texto",_valorInic:"",valor_escolha:{_titulo:"",_doc:"",_valorInic:""},CNPJ:{_titulo:"CNPJ",_doc:"CNPJ (CNPJ)",_pattern:"[0-9]{0}|[0-9]{14}",_type:"TCnpjOpc",_tipo:"texto",_maxLength:14,_valorInic:""},CPF:{_titulo:"CPF",_doc:"CPF (CPF)",_pattern:"[0-9]{11}",_type:"TCpf",_tipo:"texto",_maxLength:11,_valorInic:""}},xNome:{_titulo:"Raz\xE3o Social ou Nome do Expedidor/Recebedor",_doc:"Raz\xE3o Social ou Nome do Expedidor/Recebedor (xNome) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:2,_maxLength:60,_valorInic:""},xLgr:{_titulo:"Logradouro",_doc:"Logradouro (xLgr)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:2,_maxLength:60,_valorInic:""},nro:{_titulo:"N\xFAmero",_doc:"N\xFAmero (nro)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},xCpl:{_titulo:"Complemento",_doc:"Complemento (xCpl) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},xBairro:{_titulo:"Bairro",_doc:"Bairro (xBairro)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:2,_maxLength:60,_valorInic:""},cMun:{_titulo:"C\xF3digo do munic\xEDpio",_doc:"C\xF3digo do munic\xEDpio (utilizar a tabela do IBGE) (cMun)",_pattern:"[0-9]{7}",_type:"TCodMunIBGE",_tipo:"texto",_valorInic:""},xMun:{_titulo:"Nome do munic\xEDpio",_doc:"Nome do munic\xEDpio (xMun)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:2,_maxLength:60,_valorInic:""},UF:{_titulo:"Sigla da UF",_doc:"Sigla da UF (UF)",_type:"TUf",_tipo:"seletor",_enumeration:[{valor:"AC",rotulo:"AC"},{valor:"AL",rotulo:"AL"},{valor:"AM",rotulo:"AM"},{valor:"AP",rotulo:"AP"},{valor:"BA",rotulo:"BA"},{valor:"CE",rotulo:"CE"},{valor:"DF",rotulo:"DF"},{valor:"ES",rotulo:"ES"},{valor:"GO",rotulo:"GO"},{valor:"MA",rotulo:"MA"},{valor:"MG",rotulo:"MG"},{valor:"MS",rotulo:"MS"},{valor:"MT",rotulo:"MT"},{valor:"PA",rotulo:"PA"},{valor:"PB",rotulo:"PB"},{valor:"PE",rotulo:"PE"},{valor:"PI",rotulo:"PI"},{valor:"PR",rotulo:"PR"},{valor:"RJ",rotulo:"RJ"},{valor:"RN",rotulo:"RN"},{valor:"RO",rotulo:"RO"},{valor:"RR",rotulo:"RR"},{valor:"RS",rotulo:"RS"},{valor:"SC",rotulo:"SC"},{valor:"SE",rotulo:"SE"},{valor:"SP",rotulo:"SP"},{valor:"TO",rotulo:"TO"},{valor:"EX",rotulo:"EX"}],_valorInic:"AC"},CEP:{_titulo:"CEP",_doc:"CEP (CEP) (Opcional)",_opcional:!0,_pattern:"[0-9]{8}",_tipo:"texto",_valorInic:""},cPais:{_titulo:"C\xF3digo de Pais",_doc:"C\xF3digo de Pais (cPais) (Opcional)",_opcional:!0,_pattern:"[0-9]{1,4}",_tipo:"texto",_valorInic:""},xPais:{_titulo:"Nome do pa\xEDs",_doc:"Nome do pa\xEDs (xPais) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:2,_maxLength:60,_valorInic:""},fone:{_titulo:"Telefone",_doc:"Telefone, preencher com C\xF3digo DDD + n\xFAmero do telefone , nas opera\xE7\xF5es com exterior \xE9 permtido informar o c\xF3digo do pa\xEDs + c\xF3digo da localidade + n\xFAmero do telefone (fone) (Opcional)",_opcional:!0,_pattern:"[0-9]{6,14}",_tipo:"texto",_valorInic:""},email:{_titulo:"Informar o e-mail do expedidor/Recebedor",_doc:"Informar o e-mail do expedidor/Recebedor. O campo pode ser utilizado para informar o e-mail de recep\xE7\xE3o da NF-e indicada pelo expedidor (email) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},IE:{_titulo:"Inscri\xE7\xE3o Estadual",_doc:"Inscri\xE7\xE3o Estadual (IE) (Opcional)",_opcional:!0,_pattern:"[0-9]{2,14}|ISENTO",_type:"TIe",_tipo:"texto",_maxLength:14,_valorInic:""}},autXML:{_titulo:"Pessoas autorizadas para o download do XML da NF-e",_doc:"Pessoas autorizadas para o download do XML da NF-e (autXML) (Lista)",_opcional:!0,_tipo:"texto",_valorInic:"",lista:{escolhas:{_titulo:"",_doc:"",_tipo:"texto",_valorInic:"",valor_escolha:{_titulo:"",_doc:"",_valorInic:""},CNPJ:{_titulo:"CNPJ Autorizado",_doc:"CNPJ Autorizado (CNPJ)",_pattern:"[0-9]{14}",_type:"TCnpj",_tipo:"texto",_maxLength:14,_valorInic:""},CPF:{_titulo:"CPF Autorizado",_doc:"CPF Autorizado (CPF)",_pattern:"[0-9]{11}",_type:"TCpf",_tipo:"texto",_maxLength:11,_valorInic:""}}}},det:{_titulo:"Dados dos detalhes da NF-e",_doc:"Dados dos detalhes da NF-e (det) (Lista)",_tipo:"texto",_valorInic:"",lista:{prod:{_titulo:"Dados dos produtos e servi\xE7os da NF-e",_doc:"Dados dos produtos e servi\xE7os da NF-e (prod)",_tipo:"texto",_valorInic:"",cProd:{_titulo:"C\xF3digo do produto ou servi\xE7o",_doc:"C\xF3digo do produto ou servi\xE7o. Preencher com CFOP caso se trate de itens n\xE3o relacionados com mercadorias/produto e que o contribuinte n\xE3o possua codifica\xE7\xE3o pr\xF3pria Formato \u201DCFOP9999\u201D. (cProd)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},cEAN:{_titulo:"GTIN (Global Trade Item Number) do produto",_doc:"GTIN (Global Trade Item Number) do produto, antigo c\xF3digo EAN ou c\xF3digo de barras (cEAN)",_pattern:"SEM GTIN|[0-9]{0}|[0-9]{8}|[0-9]{12,14}",_tipo:"texto",_valorInic:""},cBarra:{_titulo:"Codigo de barras diferente do padr\xE3o GTIN",_doc:"Codigo de barras diferente do padr\xE3o GTIN (cBarra) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:3,_maxLength:30,_valorInic:""},xProd:{_titulo:"Descri\xE7\xE3o do produto ou servi\xE7o",_doc:"Descri\xE7\xE3o do produto ou servi\xE7o (xProd)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:120,_valorInic:""},NCM:{_titulo:"C\xF3digo NCM (8 posi\xE7\xF5es)",_doc:"C\xF3digo NCM (8 posi\xE7\xF5es), ser\xE1 permitida a informa\xE7\xE3o do g\xEAnero (posi\xE7\xE3o do cap\xEDtulo do NCM) quando a opera\xE7\xE3o n\xE3o for de com\xE9rcio exterior (importa\xE7\xE3o/exporta\xE7\xE3o) ou o produto n\xE3o seja tributado pelo IPI. Em caso de item de servi\xE7o ou item que n\xE3o tenham produto (Ex. transfer\xEAncia de cr\xE9dito, cr\xE9dito do ativo imobilizado, etc.), informar o c\xF3digo 00 (zeros) (NCM)",_pattern:"[0-9]{2}|[0-9]{8}",_tipo:"texto",_valorInic:""},NVE:{_titulo:"Nomenclatura de Valor aduaneio e Estat\xEDstico",_doc:"Nomenclatura de Valor aduaneio e Estat\xEDstico (NVE) (Lista)",_opcional:!0,_pattern:"[A-Z]{2}[0-9]{4}",_tipo:"texto",_valorInic:"",lista:{NVE:{_titulo:"Nomenclatura de Valor aduaneio e Estat\xEDstico",_doc:"Nomenclatura de Valor aduaneio e Estat\xEDstico (NVE) (Lista)",_opcional:!0,_pattern:"[A-Z]{2}[0-9]{4}",_tipo:"texto",_valorInic:""}}},opcional:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"CEST",_doc:"Codigo especificador da Substuicao Tributaria - CEST",_valorInic:""},CEST:{_titulo:"CEST",_doc:"Codigo especificador da Substuicao Tributaria - CEST, que identifica a mercadoria sujeita aos regimes de substituicao tribut\xE1ria e de antecipa\xE7\xE3o do recolhimento do imposto (CEST)",_pattern:"[0-9]{7}",_tipo:"texto",_valorInic:""},indEscala:{_titulo:"indEscala",_doc:"indEscala (Opcional)",_opcional:!0,_tipo:"seletor",_enumeration:[{valor:"",rotulo:"N\xE3o se aplica"},{valor:"S",rotulo:"S"},{valor:"N",rotulo:"N"}],_valorInic:""},CNPJFab:{_titulo:"CNPJ do Fabricante da Mercadoria",_doc:"CNPJ do Fabricante da Mercadoria, obrigat\xF3rio para produto em escala N\xC3O relevante. (CNPJFab) (Opcional)",_opcional:!0,_pattern:"[0-9]{14}",_type:"TCnpj",_tipo:"texto",_maxLength:14,_valorInic:""}},cBenef:{_titulo:"cBenef",_doc:"cBenef (Opcional)",_opcional:!0,_pattern:"([!-\xFF]{8}|[!-\xFF]{10}|SEM CBENEF)?",_tipo:"texto",_valorInic:""},EXTIPI:{_titulo:"C\xF3digo EX TIPI",_doc:"C\xF3digo EX TIPI (3 posi\xE7\xF5es) (EXTIPI) (Opcional)",_opcional:!0,_pattern:"[0-9]{2,3}",_tipo:"texto",_valorInic:""},CFOP:{_titulo:"Cfop",_doc:"Cfop (CFOP)",_pattern:"[1,2,3,5,6,7]{1}[0-9]{3}",_tipo:"texto",_valorInic:""},uCom:{_titulo:"Unidade comercial",_doc:"Unidade comercial (uCom)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:6,_valorInic:""},qCom:{_titulo:"Quantidade Comercial  do produto",_doc:"Quantidade Comercial  do produto, alterado para aceitar de 0 a 4 casas decimais e 11 inteiros. (qCom)",_pattern:"0|0\\.[0-9]{1,4}|[1-9]{1}[0-9]{0,10}|[1-9]{1}[0-9]{0,10}(\\.[0-9]{1,4})?",_type:"TDec_1104v",_tipo:"decimal",_decimals:"4",_valorInic:0},vUnCom:{_titulo:"Valor unit\xE1rio de comercializa\xE7\xE3o",_doc:"Valor unit\xE1rio de comercializa\xE7\xE3o  - alterado para aceitar 0 a 10 casas decimais e 11 inteiros (vUnCom)",_pattern:"0|0\\.[0-9]{1,10}|[1-9]{1}[0-9]{0,10}|[1-9]{1}[0-9]{0,10}(\\.[0-9]{1,10})?",_type:"TDec_1110v",_tipo:"decimal",_decimals:"4",_valorInic:0},vProd:{_titulo:"Valor bruto do produto ou servi\xE7o.",_doc:"Valor bruto do produto ou servi\xE7o. (vProd)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},cEANTrib:{_titulo:"GTIN (Global Trade Item Number) da unidade tribut\xE1vel",_doc:"GTIN (Global Trade Item Number) da unidade tribut\xE1vel, antigo c\xF3digo EAN ou c\xF3digo de barras (cEANTrib)",_pattern:"SEM GTIN|[0-9]{0}|[0-9]{8}|[0-9]{12,14}",_tipo:"texto",_valorInic:""},cBarraTrib:{_titulo:"Codigo de barras diferente do padr\xE3o GTIN",_doc:"Codigo de barras diferente do padr\xE3o GTIN (cBarraTrib) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:3,_maxLength:30,_valorInic:""},uTrib:{_titulo:"Unidade Tribut\xE1vel",_doc:"Unidade Tribut\xE1vel (uTrib)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:6,_valorInic:""},qTrib:{_titulo:"Quantidade Tribut\xE1vel",_doc:"Quantidade Tribut\xE1vel - alterado para aceitar de 0 a 4 casas decimais e 11 inteiros (qTrib)",_pattern:"0|0\\.[0-9]{1,4}|[1-9]{1}[0-9]{0,10}|[1-9]{1}[0-9]{0,10}(\\.[0-9]{1,4})?",_type:"TDec_1104v",_tipo:"decimal",_decimals:"4",_valorInic:0},vUnTrib:{_titulo:"Valor unit\xE1rio de tributa\xE7\xE3o",_doc:"Valor unit\xE1rio de tributa\xE7\xE3o - alterado para aceitar 0 a 10 casas decimais e 11 inteiros (vUnTrib)",_pattern:"0|0\\.[0-9]{1,10}|[1-9]{1}[0-9]{0,10}|[1-9]{1}[0-9]{0,10}(\\.[0-9]{1,10})?",_type:"TDec_1110v",_tipo:"decimal",_decimals:"4",_valorInic:0},vFrete:{_titulo:"Valor Total do Frete",_doc:"Valor Total do Frete (vFrete) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},vSeg:{_titulo:"Valor Total do Seguro",_doc:"Valor Total do Seguro (vSeg) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},vDesc:{_titulo:"Valor do Desconto",_doc:"Valor do Desconto (vDesc) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},vOutro:{_titulo:"Outras despesas acess\xF3rias",_doc:"Outras despesas acess\xF3rias (vOutro) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},indTot:{_titulo:"Totaliza",_doc:"Este campo dever\xE1 ser preenchido com:  0 - o valor do item (vProd) n\xE3o comp\xF5e o valor total da NF-e (vProd)  1  - o valor do item (vProd) comp\xF5e o valor total da NF-e (vProd) (indTot)",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - o valor do item n\xE3o comp\xF5e o valor total da NF-e"},{valor:"1",rotulo:"1  - o valor do item comp\xF5e o valor total da NF-e"}],_valorInic:"0"},DI:{_titulo:"Delcara\xE7\xE3o de Importa\xE7\xE3o",_doc:"Delcara\xE7\xE3o de Importa\xE7\xE3o (DI) (Lista)",_opcional:!0,_tipo:"texto",_valorInic:"",lista:{nDI:{_titulo:"Numero do Documento de Importa\xE7\xE3o DI/DSI/DA/DRI-E (DI/DSI/DA/DRI-E)",_doc:"Numero do Documento de Importa\xE7\xE3o DI/DSI/DA/DRI-E (DI/DSI/DA/DRI-E) (nDI)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:15,_valorInic:""},dDI:{_titulo:"Data de registro da DI/DSI/DA",_doc:"Data de registro da DI/DSI/DA (AAAA-MM-DD) (dDI)",_pattern:"(((20(([02468][048])|([13579][26]))-02-29))|(20[0-9][0-9])-((((0[1-9])|(1[0-2]))-((0[1-9])|(1\\d)|(2[0-8])))|((((0[13578])|(1[02]))-31)|(((0[1,3-9])|(1[0-2]))-(29|30)))))",_type:"TData",_tipo:"data",_valorInic:""},xLocDesemb:{_titulo:"Local do desembara\xE7o aduaneiro",_doc:"Local do desembara\xE7o aduaneiro (xLocDesemb)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},UFDesemb:{_titulo:"UF onde ocorreu o desembara\xE7o aduaneiro",_doc:"UF onde ocorreu o desembara\xE7o aduaneiro (UFDesemb)",_type:"TUfEmi",_tipo:"seletor",_enumeration:[{valor:"AC",rotulo:"AC"},{valor:"AL",rotulo:"AL"},{valor:"AM",rotulo:"AM"},{valor:"AP",rotulo:"AP"},{valor:"BA",rotulo:"BA"},{valor:"CE",rotulo:"CE"},{valor:"DF",rotulo:"DF"},{valor:"ES",rotulo:"ES"},{valor:"GO",rotulo:"GO"},{valor:"MA",rotulo:"MA"},{valor:"MG",rotulo:"MG"},{valor:"MS",rotulo:"MS"},{valor:"MT",rotulo:"MT"},{valor:"PA",rotulo:"PA"},{valor:"PB",rotulo:"PB"},{valor:"PE",rotulo:"PE"},{valor:"PI",rotulo:"PI"},{valor:"PR",rotulo:"PR"},{valor:"RJ",rotulo:"RJ"},{valor:"RN",rotulo:"RN"},{valor:"RO",rotulo:"RO"},{valor:"RR",rotulo:"RR"},{valor:"RS",rotulo:"RS"},{valor:"SC",rotulo:"SC"},{valor:"SE",rotulo:"SE"},{valor:"SP",rotulo:"SP"},{valor:"TO",rotulo:"TO"}],_valorInic:"AC"},dDesemb:{_titulo:"Data do desembara\xE7o aduaneiro (AAAA-MM-DD)",_doc:"Data do desembara\xE7o aduaneiro (AAAA-MM-DD) (dDesemb)",_pattern:"(((20(([02468][048])|([13579][26]))-02-29))|(20[0-9][0-9])-((((0[1-9])|(1[0-2]))-((0[1-9])|(1\\d)|(2[0-8])))|((((0[13578])|(1[02]))-31)|(((0[1,3-9])|(1[0-2]))-(29|30)))))",_type:"TData",_tipo:"data",_valorInic:""},tpViaTransp:{_titulo:"Via de transporte internacional informada na DI",_doc:"Via de transporte internacional informada na DI 1-Maritima;2-Fluvial;3-Lacustre;4-Aerea;5-Postal;6-Ferroviaria;7-Rodoviaria;8-Conduto;9-Meios Proprios;10-Entrada/Saida Ficta. 11-Courier; 12-Em maos;13-Por reboque (tpViaTransp)",_tipo:"seletor",_enumeration:[{valor:"1",rotulo:"1 - Maritima"},{valor:"2",rotulo:"2 - Fluvial"},{valor:"3",rotulo:"3 - Lacustre"},{valor:"4",rotulo:"4 - Aerea"},{valor:"5",rotulo:"5 - Postal"},{valor:"6",rotulo:"6 - Ferroviaria"},{valor:"7",rotulo:"7 - Rodoviaria"},{valor:"8",rotulo:"8 - Conduto"},{valor:"9",rotulo:"9 - Meios Proprios"},{valor:"10",rotulo:"10 - Entrada/Saida Ficta"},{valor:"11",rotulo:"11 - Courier"},{valor:"12",rotulo:"12 - Em maos"},{valor:"13",rotulo:"13 - Por reboque"}],_valorInic:"1"},vAFRMM:{_titulo:"Valor Adicional ao frete para renova\xE7\xE3o de marinha mercante",_doc:"Valor Adicional ao frete para renova\xE7\xE3o de marinha mercante (vAFRMM) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},tpIntermedio:{_titulo:"Forma de Importa\xE7\xE3o quanto a intermedia\xE7\xE3o",_doc:"Forma de Importa\xE7\xE3o quanto a intermedia\xE7\xE3o 1-por conta propria;2-por conta e ordem;3-encomenda (tpIntermedio)",_tipo:"seletor",_enumeration:[{valor:"1",rotulo:"1 - por conta propria"},{valor:"2",rotulo:"2 - por conta e ordem"},{valor:"3",rotulo:"3 - encomenda"}],_valorInic:"1"},CNPJ:{_titulo:"CNPJ do adquirente ou do encomendante",_doc:"CNPJ do adquirente ou do encomendante (CNPJ) (Opcional)",_opcional:!0,_pattern:"[0-9]{14}",_type:"TCnpj",_tipo:"texto",_maxLength:14,_valorInic:""},UFTerceiro:{_titulo:"Sigla da UF do adquirente ou do encomendante",_doc:"Sigla da UF do adquirente ou do encomendante (UFTerceiro) (Opcional)",_opcional:!0,_type:"TUfEmi",_tipo:"seletor",_enumeration:[{valor:"",rotulo:"N\xE3o se aplica"},{valor:"AC",rotulo:"AC"},{valor:"AL",rotulo:"AL"},{valor:"AM",rotulo:"AM"},{valor:"AP",rotulo:"AP"},{valor:"BA",rotulo:"BA"},{valor:"CE",rotulo:"CE"},{valor:"DF",rotulo:"DF"},{valor:"ES",rotulo:"ES"},{valor:"GO",rotulo:"GO"},{valor:"MA",rotulo:"MA"},{valor:"MG",rotulo:"MG"},{valor:"MS",rotulo:"MS"},{valor:"MT",rotulo:"MT"},{valor:"PA",rotulo:"PA"},{valor:"PB",rotulo:"PB"},{valor:"PE",rotulo:"PE"},{valor:"PI",rotulo:"PI"},{valor:"PR",rotulo:"PR"},{valor:"RJ",rotulo:"RJ"},{valor:"RN",rotulo:"RN"},{valor:"RO",rotulo:"RO"},{valor:"RR",rotulo:"RR"},{valor:"RS",rotulo:"RS"},{valor:"SC",rotulo:"SC"},{valor:"SE",rotulo:"SE"},{valor:"SP",rotulo:"SP"},{valor:"TO",rotulo:"TO"}],_valorInic:""},cExportador:{_titulo:"C\xF3digo do exportador",_doc:"C\xF3digo do exportador (usado nos sistemas internos de informa\xE7\xE3o do emitente da NF-e) (cExportador)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},adi:{_titulo:"Adi\xE7\xF5es",_doc:"Adi\xE7\xF5es (adi) (Lista)",_tipo:"texto",_valorInic:"",lista:{nAdicao:{_titulo:"N\xFAmero da Adi\xE7\xE3o",_doc:"N\xFAmero da Adi\xE7\xE3o (nAdicao) (Opcional)",_opcional:!0,_pattern:"[1-9]{1}[0-9]{0,2}",_tipo:"texto",_valorInic:""},nSeqAdic:{_titulo:"N\xFAmero seq\xFCencial do item dentro da Adi\xE7\xE3o",_doc:"N\xFAmero seq\xFCencial do item dentro da Adi\xE7\xE3o (nSeqAdic)",_pattern:"[1-9]{1}[0-9]{0,4}",_tipo:"texto",_valorInic:""},cFabricante:{_titulo:"C\xF3digo do fabricante estrangeiro",_doc:"C\xF3digo do fabricante estrangeiro (usado nos sistemas internos de informa\xE7\xE3o do emitente da NF-e) (cFabricante)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},vDescDI:{_titulo:"Valor do desconto do item da DI - adi\xE7\xE3o",_doc:"Valor do desconto do item da DI - adi\xE7\xE3o (vDescDI) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},nDraw:{_titulo:"N\xFAmero do ato concess\xF3rio de Drawback",_doc:"N\xFAmero do ato concess\xF3rio de Drawback (nDraw) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:20,_valorInic:""}}}}},detExport:{_titulo:"Detalhe da exporta\xE7\xE3o",_doc:"Detalhe da exporta\xE7\xE3o (detExport) (Lista)",_opcional:!0,_tipo:"texto",_valorInic:"",lista:{nDraw:{_titulo:"N\xFAmero do ato concess\xF3rio de Drawback",_doc:"N\xFAmero do ato concess\xF3rio de Drawback (nDraw) (Opcional)",_opcional:!0,_pattern:"[0-9]{0,20}",_tipo:"texto",_valorInic:""},exportInd:{_titulo:"Exporta\xE7\xE3o indireta",_doc:"Exporta\xE7\xE3o indireta (exportInd) (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Exporta\xE7\xE3o indireta",_doc:"Exporta\xE7\xE3o indireta (exportInd) (Opcional)",_valorInic:""},nRE:{_titulo:"Registro de exporta\xE7\xE3o",_doc:"Registro de exporta\xE7\xE3o (nRE)",_pattern:"[0-9]{0,12}",_tipo:"texto",_valorInic:""},chNFe:{_titulo:"Chave de acesso da NF-e recebida para exporta\xE7\xE3o",_doc:"Chave de acesso da NF-e recebida para exporta\xE7\xE3o (chNFe)",_pattern:"[0-9]{44}",_type:"TChNFe",_tipo:"texto",_maxLength:44,_valorInic:""},qExport:{_titulo:"Quantidade do item efetivamente exportado",_doc:"Quantidade do item efetivamente exportado (qExport)",_pattern:"0|0\\.[0-9]{1,4}|[1-9]{1}[0-9]{0,10}|[1-9]{1}[0-9]{0,10}(\\.[0-9]{1,4})?",_type:"TDec_1104v",_tipo:"decimal",_decimals:"4",_valorInic:0}}}},xPed:{_titulo:"Pedido de compra",_doc:"Pedido de compra - Informa\xE7\xE3o de interesse do emissor para controle do B2B. (xPed) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:15,_valorInic:""},nItemPed:{_titulo:"N\xFAmero do Item do Pedido de Compra",_doc:"N\xFAmero do Item do Pedido de Compra - Identifica\xE7\xE3o do n\xFAmero do item do pedido de Compra (nItemPed) (Opcional)",_opcional:!0,_pattern:"[0-9]{1,6}",_tipo:"texto",_valorInic:""},nFCI:{_titulo:"N\xFAmero de controle da FCI",_doc:"N\xFAmero de controle da FCI - Ficha de Conte\xFAdo de Importa\xE7\xE3o. (nFCI) (Opcional)",_opcional:!0,_pattern:"[A-F0-9]{8}-[A-F0-9]{4}-[A-F0-9]{4}-[A-F0-9]{4}-[A-F0-9]{12}",_type:"TGuid",_tipo:"texto",_valorInic:""},rastro:{_titulo:"rastro",_doc:"rastro (Lista)",_opcional:!0,_tipo:"texto",_valorInic:"",lista:{nLote:{_titulo:"N\xFAmero do lote do produto.",_doc:"N\xFAmero do lote do produto. (nLote)",_tipo:"texto",_minLength:1,_maxLength:20,_valorInic:""},qLote:{_titulo:"Quantidade de produto no lote.",_doc:"Quantidade de produto no lote. (qLote)",_pattern:"0|0\\.[0-9]{3}|[1-9]{1}[0-9]{0,7}(\\.[0-9]{1,3})?",_type:"TDec_0803v",_tipo:"decimal",_decimals:"3",_valorInic:0},dFab:{_titulo:"Data de fabrica\xE7\xE3o/produ\xE7\xE3o",_doc:'Data de fabrica\xE7\xE3o/produ\xE7\xE3o. Formato "AAAA-MM-DD". (dFab)',_pattern:"(((20(([02468][048])|([13579][26]))-02-29))|(20[0-9][0-9])-((((0[1-9])|(1[0-2]))-((0[1-9])|(1\\d)|(2[0-8])))|((((0[13578])|(1[02]))-31)|(((0[1,3-9])|(1[0-2]))-(29|30)))))",_type:"TData",_tipo:"data",_valorInic:""},dVal:{_titulo:"Data de validade",_doc:'Data de validade. Informar o \xFAltimo dia do m\xEAs caso a validade n\xE3o especifique o dia. Formato "AAAA-MM-DD". (dVal)',_pattern:"(((20(([02468][048])|([13579][26]))-02-29))|(20[0-9][0-9])-((((0[1-9])|(1[0-2]))-((0[1-9])|(1\\d)|(2[0-8])))|((((0[13578])|(1[02]))-31)|(((0[1,3-9])|(1[0-2]))-(29|30)))))",_type:"TData",_tipo:"data",_valorInic:""},cAgreg:{_titulo:"cAgreg",_doc:"cAgreg (Opcional)",_opcional:!0,_pattern:"[0-9]{1,20}",_tipo:"texto",_valorInic:""}}},escolhas:{_titulo:"",_doc:" (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",valor_escolha:{_titulo:"",_doc:" (Opcional)",_valorInic:""},veicProd:{_titulo:"Ve\xEDculos novos",_doc:"Ve\xEDculos novos (veicProd)",_tipo:"texto",_valorInic:"",tpOp:{_titulo:"Tipo da Opera\xE7\xE3o",_doc:"Tipo da Opera\xE7\xE3o (1 - Venda concession\xE1ria; 2 - Faturamento direto; 3 - Venda direta; 0 - Outros) (tpOp)",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Outros"},{valor:"1",rotulo:"1 - Venda concession\xE1ria"},{valor:"2",rotulo:"2 - Faturamento direto"},{valor:"3",rotulo:"3 - Venda direta; 0 - Outros"}],_valorInic:"0"},chassi:{_titulo:"Chassi do ve\xEDculo - VIN",_doc:"Chassi do ve\xEDculo - VIN (c\xF3digo-identifica\xE7\xE3o-ve\xEDculo) (chassi)",_pattern:"[A-Z0-9]+",_tipo:"texto",_valorInic:""},cCor:{_titulo:"Cor do ve\xEDculo",_doc:"Cor do ve\xEDculo (c\xF3digo de cada montadora) (cCor)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:4,_valorInic:""},xCor:{_titulo:"Descri\xE7\xE3o da cor",_doc:"Descri\xE7\xE3o da cor (xCor)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:40,_valorInic:""},pot:{_titulo:"Pot\xEAncia m\xE1xima do motor do ve\xEDculo em cavalo vapor",_doc:"Pot\xEAncia m\xE1xima do motor do ve\xEDculo em cavalo vapor (CV). (pot\xEAncia-ve\xEDculo) (pot)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:4,_valorInic:""},cilin:{_titulo:"Capacidade volunt\xE1ria do motor expressa em cent\xEDmetros c\xFAbicos",_doc:"Capacidade volunt\xE1ria do motor expressa em cent\xEDmetros c\xFAbicos (CC). (cilindradas) (cilin)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:4,_valorInic:""},pesoL:{_titulo:"Peso l\xEDquido",_doc:"Peso l\xEDquido (pesoL)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:9,_valorInic:""},pesoB:{_titulo:"Peso bruto",_doc:"Peso bruto (pesoB)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:9,_valorInic:""},nSerie:{_titulo:"Serial (s\xE9rie)",_doc:"Serial (s\xE9rie) (nSerie)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:9,_valorInic:""},tpComb:{_titulo:"Tipo de combust\xEDvel-Tabela RENAVAM",_doc:"Tipo de combust\xEDvel-Tabela RENAVAM: 01-\xC1lcool; 02-Gasolina; 03-Diesel; 16-\xC1lcool/Gas.; 17-Gas./\xC1lcool/GNV; 18-Gasolina/El\xE9trico (tpComb)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:2,_valorInic:""},nMotor:{_titulo:"N\xFAmero do motor",_doc:"N\xFAmero do motor (nMotor)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:21,_valorInic:""},CMT:{_titulo:"CMT-Capacidade M\xE1xima de Tra\xE7\xE3o",_doc:"CMT-Capacidade M\xE1xima de Tra\xE7\xE3o - em Toneladas 4 casas decimais (CMT)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:9,_valorInic:""},dist:{_titulo:"Dist\xE2ncia entre eixos",_doc:"Dist\xE2ncia entre eixos (dist)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:4,_valorInic:""},anoMod:{_titulo:"Ano Modelo de Fabrica\xE7\xE3o",_doc:"Ano Modelo de Fabrica\xE7\xE3o (anoMod)",_pattern:"[0-9]{4}",_tipo:"texto",_valorInic:""},anoFab:{_titulo:"Ano de Fabrica\xE7\xE3o",_doc:"Ano de Fabrica\xE7\xE3o (anoFab)",_pattern:"[0-9]{4}",_tipo:"texto",_valorInic:""},tpPint:{_titulo:"Tipo de pintura",_doc:"Tipo de pintura (tpPint)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_valorInic:""},tpVeic:{_titulo:"Tipo de ve\xEDculo",_doc:"Tipo de ve\xEDculo (utilizar tabela RENAVAM) (tpVeic)",_pattern:"[0-9]{1,2}",_tipo:"texto",_valorInic:""},espVeic:{_titulo:"Esp\xE9cie de ve\xEDculo",_doc:"Esp\xE9cie de ve\xEDculo (utilizar tabela RENAVAM) (espVeic)",_pattern:"[0-9]{1}",_tipo:"texto",_valorInic:""},VIN:{_titulo:"Informa-se o ve\xEDculo tem VIN (chassi) remarcado",_doc:"Informa-se o ve\xEDculo tem VIN (chassi) remarcado. R-Remarcado N-NormalVIN (VIN)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"seletor",_enumeration:[{valor:"R",rotulo:"R - Remarcado"},{valor:"N",rotulo:"N - NormalVIN"}],_valorInic:"R"},condVeic:{_titulo:"Condi\xE7\xE3o do ve\xEDculo",_doc:"Condi\xE7\xE3o do ve\xEDculo (1 - acabado; 2 - inacabado; 3 - semi-acabado) (condVeic)",_tipo:"seletor",_enumeration:[{valor:"1",rotulo:"1 - acabado"},{valor:"2",rotulo:"2 - inacabado"},{valor:"3",rotulo:"3 - semi-acabado"}],_valorInic:"1"},cMod:{_titulo:"C\xF3digo Marca Modelo",_doc:"C\xF3digo Marca Modelo (utilizar tabela RENAVAM) (cMod)",_pattern:"[0-9]{1,6}",_tipo:"texto",_valorInic:""},cCorDENATRAN:{_titulo:"C\xF3digo da Cor Segundo as regras de pr\xE9-cadastro do DENATRAN",_doc:"C\xF3digo da Cor Segundo as regras de pr\xE9-cadastro do DENATRAN: 01-AMARELO;02-AZUL;03-BEGE;04-BRANCA;05-CINZA;06-DOURADA;07-GRENA  08-LARANJA;09-MARROM;10-PRATA;11-PRETA;12-ROSA;13-ROXA;14-VERDE;15-VERMELHA;16-FANTASIA (cCorDENATRAN)",_pattern:"[0-9]{1,2}",_tipo:"texto",_minLength:1,_maxLength:2,_valorInic:""},lota:{_titulo:"Quantidade m\xE1xima de permitida de passageiros sentados, inclusive motorista.",_doc:"Quantidade m\xE1xima de permitida de passageiros sentados, inclusive motorista. (lota)",_pattern:"[0-9]{1,3}",_tipo:"texto",_minLength:1,_maxLength:3,_valorInic:""},tpRest:{_titulo:"Restri\xE7\xE3o",_doc:"Restri\xE7\xE3o 0 - N\xE3o h\xE1; 1 - Aliena\xE7\xE3o Fiduci\xE1ria; 2 - Arrendamento Mercantil; 3 - Reserva de Dom\xEDnio; 4 - Penhor de Ve\xEDculos; 9 - outras. (tpRest)",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - N\xE3o h\xE1"},{valor:"1",rotulo:"1 - Aliena\xE7\xE3o Fiduci\xE1ria"},{valor:"2",rotulo:"2 - Arrendamento Mercantil"},{valor:"3",rotulo:"3 - Reserva de Dom\xEDnio"},{valor:"4",rotulo:"4 - Penhor de Ve\xEDculos"},{valor:"9",rotulo:"9 - outras"}],_valorInic:"0"}},med:{_titulo:"Grupo do detalhamento de Medicamentos e de mat\xE9rias-primas farmac\xEAuticas",_doc:"Grupo do detalhamento de Medicamentos e de mat\xE9rias-primas farmac\xEAuticas (med)",_tipo:"texto",_valorInic:"",cProdANVISA:{_titulo:"Utilizar o n\xFAmero do registro ANVISA",_doc:"Utilizar o n\xFAmero do registro ANVISA  ou preencher com o literal \u201CISENTO\u201D, no caso de medicamento isento de registro na ANVISA. (cProdANVISA)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_valorInic:""},xMotivoIsencao:{_titulo:"Obs.: Para medicamento isento de registro na ANVISA",_doc:"Obs.: Para medicamento isento de registro na ANVISA, informar o n\xFAmero da decis\xE3o que o isenta, como por exemplo o n\xFAmero da Resolu\xE7\xE3o da Diretoria Colegiada da ANVISA (RDC). (xMotivoIsencao) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:255,_valorInic:""},vPMC:{_titulo:"Pre\xE7o M\xE1ximo ao Consumidor.",_doc:"Pre\xE7o M\xE1ximo ao Consumidor. (vPMC)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},arma:{_titulo:"Armamentos",_doc:"Armamentos (arma) (Lista)",_tipo:"texto",_valorInic:"",lista:{escolhas:{_titulo:"",_doc:"",_tipo:"texto",_valorInic:"",valor_escolha:{_titulo:"",_doc:"",_valorInic:""},tpArma:{_titulo:"Indicador do tipo de arma de fogo",_doc:"Indicador do tipo de arma de fogo (0 - Uso permitido; 1 - Uso restrito) (tpArma)",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Uso permitido"},{valor:"1",rotulo:"1 - Uso restrito"}],_valorInic:"0"},nSerie:{_titulo:"N\xFAmero de s\xE9rie da arma",_doc:"N\xFAmero de s\xE9rie da arma (nSerie)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:15,_valorInic:""},nCano:{_titulo:"N\xFAmero de s\xE9rie do cano",_doc:"N\xFAmero de s\xE9rie do cano (nCano)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:15,_valorInic:""},descr:{_titulo:"Descri\xE7\xE3o completa da arma, compreendendo",_doc:"Descri\xE7\xE3o completa da arma, compreendendo: calibre, marca, capacidade, tipo de funcionamento, comprimento e demais elementos que permitam a sua perfeita identifica\xE7\xE3o. (descr)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:256,_valorInic:""}}}},comb:{_titulo:"Informar apenas para opera\xE7\xF5es com combust\xEDveis l\xEDquidos",_doc:"Informar apenas para opera\xE7\xF5es com combust\xEDveis l\xEDquidos (comb)",_tipo:"texto",_valorInic:"",cProdANP:{_titulo:"C\xF3digo de produto da ANP",_doc:"C\xF3digo de produto da ANP. codifica\xE7\xE3o de produtos do SIMP (http://www.anp.gov.br) (cProdANP)",_pattern:"[0-9]{9}",_tipo:"texto",_valorInic:""},descANP:{_titulo:"Descri\xE7\xE3o do Produto conforme ANP",_doc:"Descri\xE7\xE3o do Produto conforme ANP. Utilizar a descri\xE7\xE3o de produtos do Sistema de Informa\xE7\xF5es de Movimenta\xE7\xE3o de Produtos - SIMP (http://www.anp.gov.br/simp/). (descANP)",_tipo:"texto",_minLength:2,_maxLength:95,_valorInic:""},pGLP:{_titulo:"Percentual do GLP derivado do petr\xF3leo no produto GLP (cProdANP=210203001)",_doc:"Percentual do GLP derivado do petr\xF3leo no produto GLP (cProdANP=210203001). Informar em n\xFAmero decimal o percentual do GLP derivado de petr\xF3leo no produto GLP. Valores 0 a 100. (pGLP) (Opcional)",_opcional:!0,_pattern:"0(\\.[0-9]{2,4})?|[1-9]{1}[0-9]{0,1}(\\.[0-9]{2,4})?|100(\\.0{2,4})?",_type:"TDec_0302a04Max100",_tipo:"decimal",_decimals:"4",_valorInic:0},pGNn:{_titulo:"Percentual de g\xE1s natural nacional - GLGNn para o produto GLP (cProdANP=210203001)",_doc:"Percentual de g\xE1s natural nacional - GLGNn para o produto GLP (cProdANP=210203001). Informar em n\xFAmero decimal o percentual do G\xE1s Natural Nacional - GLGNn para o produto GLP. Valores de 0 a 100. (pGNn) (Opcional)",_opcional:!0,_pattern:"0(\\.[0-9]{2,4})?|[1-9]{1}[0-9]{0,1}(\\.[0-9]{2,4})?|100(\\.0{2,4})?",_type:"TDec_0302a04Max100",_tipo:"decimal",_decimals:"4",_valorInic:0},pGNi:{_titulo:"Percentual de g\xE1s natural importado GLGNi para o produto GLP (cProdANP=210203001)",_doc:"Percentual de g\xE1s natural importado GLGNi para o produto GLP (cProdANP=210203001). Informar em n\xFAmero deciaml o percentual do G\xE1s Natural Importado - GLGNi para o produto GLP. Valores de 0 a 100. (pGNi) (Opcional)",_opcional:!0,_pattern:"0(\\.[0-9]{2,4})?|[1-9]{1}[0-9]{0,1}(\\.[0-9]{2,4})?|100(\\.0{2,4})?",_type:"TDec_0302a04Max100",_tipo:"decimal",_decimals:"4",_valorInic:0},vPart:{_titulo:"Valor de partida (cProdANP=210203001)",_doc:"Valor de partida (cProdANP=210203001). Deve ser informado neste campo o valor por quilograma sem ICMS. (vPart) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},CODIF:{_titulo:"C\xF3digo de autoriza\xE7\xE3o / registro do CODIF",_doc:"C\xF3digo de autoriza\xE7\xE3o / registro do CODIF. Informar apenas quando a UF utilizar o CODIF (Sistema de Controle do    Diferimento do Imposto nas Opera\xE7\xF5es com AEAC - \xC1lcool Et\xEDlico Anidro Combust\xEDvel). (CODIF) (Opcional)",_opcional:!0,_pattern:"[0-9]{1,21}",_tipo:"texto",_valorInic:""},qTemp:{_titulo:"Quantidade de combust\xEDvel faturada \xE0 temperatura ambiente",_doc:"Quantidade de combust\xEDvel faturada \xE0 temperatura ambiente. Informar quando a quantidade faturada informada no campo qCom (I10) tiver sido ajustada para uma temperatura diferente da ambiente. (qTemp) (Opcional)",_opcional:!0,_pattern:"0\\.[1-9]{1}[0-9]{3}|0\\.[0-9]{3}[1-9]{1}|0\\.[0-9]{2}[1-9]{1}[0-9]{1}|0\\.[0-9]{1}[1-9]{1}[0-9]{2}|[1-9]{1}[0-9]{0,11}(\\.[0-9]{4})?",_type:"TDec_1204temperatura",_tipo:"decimal",_decimals:"4",_valorInic:0},UFCons:{_titulo:"Sigla da UF de Consumo",_doc:"Sigla da UF de Consumo (UFCons)",_type:"TUf",_tipo:"seletor",_enumeration:[{valor:"AC",rotulo:"AC"},{valor:"AL",rotulo:"AL"},{valor:"AM",rotulo:"AM"},{valor:"AP",rotulo:"AP"},{valor:"BA",rotulo:"BA"},{valor:"CE",rotulo:"CE"},{valor:"DF",rotulo:"DF"},{valor:"ES",rotulo:"ES"},{valor:"GO",rotulo:"GO"},{valor:"MA",rotulo:"MA"},{valor:"MG",rotulo:"MG"},{valor:"MS",rotulo:"MS"},{valor:"MT",rotulo:"MT"},{valor:"PA",rotulo:"PA"},{valor:"PB",rotulo:"PB"},{valor:"PE",rotulo:"PE"},{valor:"PI",rotulo:"PI"},{valor:"PR",rotulo:"PR"},{valor:"RJ",rotulo:"RJ"},{valor:"RN",rotulo:"RN"},{valor:"RO",rotulo:"RO"},{valor:"RR",rotulo:"RR"},{valor:"RS",rotulo:"RS"},{valor:"SC",rotulo:"SC"},{valor:"SE",rotulo:"SE"},{valor:"SP",rotulo:"SP"},{valor:"TO",rotulo:"TO"},{valor:"EX",rotulo:"EX"}],_valorInic:"AC"},CIDE:{_titulo:"CIDE Combust\xEDveis",_doc:"CIDE Combust\xEDveis (CIDE) (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"CIDE Combust\xEDveis",_doc:"CIDE Combust\xEDveis (CIDE) (Opcional)",_valorInic:""},qBCProd:{_titulo:"BC do CIDE ( Quantidade comercializada)",_doc:"BC do CIDE ( Quantidade comercializada) (qBCProd)",_pattern:"0|0\\.[0-9]{1,4}|[1-9]{1}[0-9]{0,11}|[1-9]{1}[0-9]{0,11}(\\.[0-9]{1,4})?",_type:"TDec_1204v",_tipo:"decimal",_decimals:"4",_valorInic:0},vAliqProd:{_titulo:"Al\xEDquota do CIDE  (em reais)",_doc:"Al\xEDquota do CIDE  (em reais) (vAliqProd)",_pattern:"0|0\\.[0-9]{4}|[1-9]{1}[0-9]{0,10}(\\.[0-9]{4})?",_type:"TDec_1104",_tipo:"decimal",_decimals:"4",_valorInic:0},vCIDE:{_titulo:"Valor do CIDE",_doc:"Valor do CIDE (vCIDE)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},encerrante:{_titulo:"Informa\xE7\xF5es do grupo de encerrante",_doc:"Informa\xE7\xF5es do grupo de encerrante (encerrante) (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Informa\xE7\xF5es do grupo de encerrante",_doc:"Informa\xE7\xF5es do grupo de encerrante (encerrante) (Opcional)",_valorInic:""},nBico:{_titulo:"Numero de identifica\xE7\xE3o do Bico utilizado no abastecimento",_doc:"Numero de identifica\xE7\xE3o do Bico utilizado no abastecimento (nBico)",_pattern:"[0-9]{1,3}",_tipo:"texto",_valorInic:""},nBomba:{_titulo:"Numero de identifica\xE7\xE3o da bomba ao qual o bico est\xE1 interligado",_doc:"Numero de identifica\xE7\xE3o da bomba ao qual o bico est\xE1 interligado (nBomba) (Opcional)",_opcional:!0,_pattern:"[0-9]{1,3}",_tipo:"texto",_valorInic:""},nTanque:{_titulo:"Numero de identifica\xE7\xE3o do tanque ao qual o bico est\xE1 interligado",_doc:"Numero de identifica\xE7\xE3o do tanque ao qual o bico est\xE1 interligado (nTanque)",_pattern:"[0-9]{1,3}",_tipo:"texto",_valorInic:""},vEncIni:{_titulo:"Valor do Encerrante no \xEDnicio do abastecimento",_doc:"Valor do Encerrante no \xEDnicio do abastecimento (vEncIni)",_pattern:"0|0\\.[0-9]{3}|[1-9]{1}[0-9]{0,11}(\\.[0-9]{3})?",_type:"TDec_1203",_tipo:"decimal",_decimals:"3",_valorInic:0},vEncFin:{_titulo:"Valor do Encerrante no final do abastecimento",_doc:"Valor do Encerrante no final do abastecimento (vEncFin)",_pattern:"0|0\\.[0-9]{3}|[1-9]{1}[0-9]{0,11}(\\.[0-9]{3})?",_type:"TDec_1203",_tipo:"decimal",_decimals:"3",_valorInic:0}}},nRECOPI:{_titulo:"N\xFAmero do RECOPI",_doc:"N\xFAmero do RECOPI (nRECOPI)",_pattern:"[0-9]{20}",_tipo:"texto",_maxLength:20,_valorInic:""}}},imposto:{_titulo:"Tributos incidentes nos produtos ou servi\xE7os da NF-e",_doc:"Tributos incidentes nos produtos ou servi\xE7os da NF-e (imposto)",_tipo:"texto",_valorInic:"",vTotTrib:{_titulo:"Valor estimado total de impostos federais, estaduais e municipais",_doc:"Valor estimado total de impostos federais, estaduais e municipais (vTotTrib) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},escolhas:{_titulo:"",_doc:"",_tipo:"texto",_valorInic:"",valor_escolha:{_titulo:"",_doc:"",_valorInic:""},opcao1:{ICMS:{_titulo:"Dados do ICMS Normal e ST",_doc:"Dados do ICMS Normal e ST (ICMS)",_tipo:"texto",_valorInic:"",escolhas:{_titulo:"Dados do ICMS Normal e ST",_doc:"Dados do ICMS Normal e ST (ICMS)",_tipo:"texto",_valorInic:"",valor_escolha:{_titulo:"Dados do ICMS Normal e ST",_doc:"Dados do ICMS Normal e ST (ICMS)",_valorInic:""},ICMS00:{_titulo:"Tributa\xE7\xE3o pelo ICMS 00 - Tributada integralmente",_doc:"Tributa\xE7\xE3o pelo ICMS 00 - Tributada integralmente (ICMS00)",_tipo:"texto",_valorInic:"",orig:{_titulo:"Tipo Origem da mercadoria CST ICMS origem da mercadoria",_doc:"0 - Nacional; 1 - Estrangeira - Importa\xE7\xE3o direta; 2 - Estrangeira - Adquirida no mercado interno (orig)",_type:"Torig",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Nacional exceto as indicadas nos c\xF3digos 3, 4, 5 e 8"},{valor:"1",rotulo:"1 - Estrangeira - Importa\xE7\xE3o direta"},{valor:"2",rotulo:"2 - Estrangeira - Adquirida no mercado interno"},{valor:"3",rotulo:"3 - Nacional, conteudo superior 40 % e inferior ou igual a 70 %"},{valor:"4",rotulo:"4 - Nacional, processos produtivos b\xE1sicos"},{valor:"5",rotulo:"5 - Nacional, conteudo inferior 40 %"},{valor:"6",rotulo:"6 - Estrangeira - Importa\xE7\xE3o direta, com similar nacional, lista CAMEX"},{valor:"7",rotulo:"7 - Estrangeira - mercado interno, sem simular, lista CAMEX"},{valor:"8",rotulo:"8 - Nacional, Conte\xFAdo de Importa\xE7\xE3o superior a 70 %"}],_valorInic:"0"},CST:{_titulo:"Tribut\xE7\xE3o pelo ICMS 00 - Tributada integralmente",_doc:"Tribut\xE7\xE3o pelo ICMS 00 - Tributada integralmente (CST)",_tipo:"seletor",_enumeration:[{valor:"00",rotulo:"00 - Tributada integralmente"}],_valorInic:"00"},modBC:{_titulo:"Modalidade de determina\xE7\xE3o da BC do ICMS",_doc:"Modalidade de determina\xE7\xE3o da BC do ICMS: 0 - Margem Valor Agregado (%); 1 - Pauta (valor); 2 - Pre\xE7o Tabelado M\xE1ximo (valor); 3 - Valor da Opera\xE7\xE3o. (modBC)",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Margem Valor Agregado (%)"},{valor:"1",rotulo:"1 - Pauta (valor)"},{valor:"2",rotulo:"2 - Pre\xE7o Tabelado M\xE1ximo (valor)"},{valor:"3",rotulo:"3 - Valor da Opera\xE7\xE3o"}],_valorInic:"0"},vBC:{_titulo:"Valor da BC do ICMS",_doc:"Valor da BC do ICMS (vBC)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pICMS:{_titulo:"Al\xEDquota do ICMS",_doc:"Al\xEDquota do ICMS (pICMS)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vICMS:{_titulo:"Valor do ICMS",_doc:"Valor do ICMS (vICMS)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},opcional:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},pFCP:{_titulo:"Percentual de ICMS relativo ao FCP.",_doc:"Percentual de ICMS relativo ao Fundo de Combate \xE0 Pobreza (FCP). (pFCP)",_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vFCP:{_titulo:"Valor do ICMS relativo ao FCP.",_doc:"Valor do ICMS relativo ao Fundo de Combate \xE0 Pobreza (FCP). (vFCP)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}}},ICMS10:{_titulo:"Tributa\xE7\xE3o pelo ICMS",_doc:"Tributa\xE7\xE3o pelo ICMS 10 - Tributada e com cobran\xE7a do ICMS por substitui\xE7\xE3o tribut\xE1ria (ICMS10)",_tipo:"texto",_valorInic:"",orig:{_titulo:"Tipo Origem da mercadoria CST ICMS origem da mercadoria",_doc:"origem da mercadoria: 0 - Nacional  1 - Estrangeira - Importa\xE7\xE3o direta  2 - Estrangeira - Adquirida no mercado interno (orig)",_type:"Torig",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Nacional exceto as indicadas nos c\xF3digos 3, 4, 5 e 8"},{valor:"1",rotulo:"1 - Estrangeira - Importa\xE7\xE3o direta"},{valor:"2",rotulo:"2 - Estrangeira - Adquirida no mercado interno"},{valor:"3",rotulo:"3 - Nacional, conteudo superior 40 % e inferior ou igual a 70 %"},{valor:"4",rotulo:"4 - Nacional, processos produtivos b\xE1sicos"},{valor:"5",rotulo:"5 - Nacional, conteudo inferior 40 %"},{valor:"6",rotulo:"6 - Estrangeira - Importa\xE7\xE3o direta, com similar nacional, lista CAMEX"},{valor:"7",rotulo:"7 - Estrangeira - mercado interno, sem simular, lista CAMEX"},{valor:"8",rotulo:"8 - Nacional, Conte\xFAdo de Importa\xE7\xE3o superior a 70 %"}],_valorInic:"0"},CST:{_titulo:"10 - Tributada e com cobran\xE7a do ICMS por substitui\xE7\xE3o tribut\xE1ria",_doc:"10 - Tributada e com cobran\xE7a do ICMS por substitui\xE7\xE3o tribut\xE1ria (CST)",_tipo:"seletor",_enumeration:[{valor:"10",rotulo:"10 - Tributada e com cobran\xE7a do ICMS por substitui\xE7\xE3o tribut\xE1ria"}],_valorInic:"10"},modBC:{_titulo:"Modalidade de determina\xE7\xE3o da BC do ICMS: 0 - Margem Valor Agregado (%); 1 - Pauta (valor); 2 - Pre\xE7o Tabelado M\xE1ximo (valor); 3 - Valor da Opera\xE7\xE3o.",_doc:"Modalidade de determina\xE7\xE3o da BC do ICMS: 0 - Margem Valor Agregado (%); 1 - Pauta (valor); 2 - Pre\xE7o Tabelado M\xE1ximo (valor); 3 - Valor da Opera\xE7\xE3o. (modBC)",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Margem Valor Agregado (%)"},{valor:"1",rotulo:"1 - Pauta (valor)"},{valor:"2",rotulo:"2 - Pre\xE7o Tabelado M\xE1ximo (valor)"},{valor:"3",rotulo:"3 - Valor da Opera\xE7\xE3o"}],_valorInic:"0"},vBC:{_titulo:"Valor da BC do ICMS",_doc:"Valor da BC do ICMS (vBC)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pICMS:{_titulo:"Al\xEDquota do ICMS",_doc:"Al\xEDquota do ICMS (pICMS)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vICMS:{_titulo:"Valor do ICMS",_doc:"Valor do ICMS (vICMS)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},opcional:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},vBCFCP:{_titulo:"Valor da Base de c\xE1lculo do FCP.",_doc:"Valor da Base de c\xE1lculo do FCP. (vBCFCP)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pFCP:{_titulo:"Percentual de ICMS relativo ao FCP",_doc:"Percentual de ICMS relativo ao Fundo de Combate \xE0 Pobreza (FCP). (pFCP)",_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vFCP:{_titulo:"Valor do ICMS relativo ao FCP",_doc:"Valor do ICMS relativo ao Fundo de Combate \xE0 Pobreza (FCP). (vFCP)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},modBCST:{_titulo:"Modalidade de determina\xE7\xE3o da BC do ICMS ST",_doc:"Modalidade de determina\xE7\xE3o da BC do ICMS ST: 0 - Pre\xE7o tabelado ou m\xE1ximo  sugerido; 1 - Lista Negativa (valor); 2 - Lista Positiva (valor); 3 - Lista Neutra (valor); 4 - Margem Valor Agregado (%); 5 - Pauta (valor) 6-Valor da Opera\xE7\xE3o; (modBCST)",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Pre\xE7o tabelado ou m\xE1ximo  sugerido"},{valor:"1",rotulo:"1 - Lista Negativa (valor)"},{valor:"2",rotulo:"2 - Lista Positiva (valor)"},{valor:"3",rotulo:"3 - Lista Neutra (valor)"},{valor:"4",rotulo:"4 - Margem Valor Agregado (%)"},{valor:"5",rotulo:"5 - Pauta (valor)"},{valor:"6",rotulo:"6 - Valor da Opera\xE7\xE3o"}],_valorInic:"0"},pMVAST:{_titulo:"Percentual da Margem de Valor Adicionado ICMS ST",_doc:"Percentual da Margem de Valor Adicionado ICMS ST (pMVAST) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},pRedBCST:{_titulo:"Percentual de redu\xE7\xE3o da BC ICMS ST",_doc:"Percentual de redu\xE7\xE3o da BC ICMS ST (pRedBCST) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vBCST:{_titulo:"Valor da BC do ICMS ST",_doc:"Valor da BC do ICMS ST (vBCST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pICMSST:{_titulo:"Al\xEDquota do ICMS ST",_doc:"Al\xEDquota do ICMS ST (pICMSST)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vICMSST:{_titulo:"Valor do ICMS ST",_doc:"Valor do ICMS ST (vICMSST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},opcional2:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},vBCFCPST:{_titulo:"Valor da Base de c\xE1lculo do FCP retido por substituicao tributaria.",_doc:"Valor da Base de c\xE1lculo do FCP retido por substituicao tributaria. (vBCFCPST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pFCPST:{_titulo:"Percentual de FCP retido por substitui\xE7\xE3o tribut\xE1ria.",_doc:"Percentual de FCP retido por substitui\xE7\xE3o tribut\xE1ria. (pFCPST)",_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vFCPST:{_titulo:"Valor do FCP retido por substitui\xE7\xE3o tribut\xE1ria.",_doc:"Valor do FCP retido por substitui\xE7\xE3o tribut\xE1ria. (vFCPST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},opcional3:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},vICMSSTDeson:{_titulo:"Valor da Base de c\xE1lculo do FCP desonera\xE7\xE3o",_doc:"Valor da Base de c\xE1lculo do FCP desonera\xE7\xE3o. (vICMSSTDeson)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},motDesICMSST:{_titulo:"Motivo da desonera\xE7\xE3o do ICMS",_doc:"Motivo da desonera\xE7\xE3o do ICMS:3-Uso na agropecu\xE1ria;9-Outros;12-Fomento agropecu\xE1rio (motDesICMSST)",_tipo:"seletor",_enumeration:[{valor:"3",rotulo:"3 - Uso na agropecu\xE1ria"},{valor:"9",rotulo:"9 - Outros"},{valor:"12",rotulo:"12 - Fomento agropecu\xE1rio"}],_valorInic:"3"}}},ICMS20:{_titulo:"Tribut\xE7\xE3o pelo ICMS 20 - Com redu\xE7\xE3o de base de c\xE1lculo",_doc:"Tribut\xE7\xE3o pelo ICMS 20 - Com redu\xE7\xE3o de base de c\xE1lculo (ICMS20)",_tipo:"texto",_valorInic:"",orig:{_titulo:"Tipo Origem da mercadoria CST ICMS origem da mercadoria",_doc:"origem da mercadoria: 0 - Nacional  1 - Estrangeira - Importa\xE7\xE3o direta  2 - Estrangeira - Adquirida no mercado interno (orig)",_type:"Torig",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Nacional exceto as indicadas nos c\xF3digos 3, 4, 5 e 8"},{valor:"1",rotulo:"1 - Estrangeira - Importa\xE7\xE3o direta"},{valor:"2",rotulo:"2 - Estrangeira - Adquirida no mercado interno"},{valor:"3",rotulo:"3 - Nacional, conteudo superior 40 % e inferior ou igual a 70 %"},{valor:"4",rotulo:"4 - Nacional, processos produtivos b\xE1sicos"},{valor:"5",rotulo:"5 - Nacional, conteudo inferior 40 %"},{valor:"6",rotulo:"6 - Estrangeira - Importa\xE7\xE3o direta, com similar nacional, lista CAMEX"},{valor:"7",rotulo:"7 - Estrangeira - mercado interno, sem simular, lista CAMEX"},{valor:"8",rotulo:"8 - Nacional, Conte\xFAdo de Importa\xE7\xE3o superior a 70 %"}],_valorInic:"0"},CST:{_titulo:"Tribut\xE7\xE3o pelo ICMS 20 - Com redu\xE7\xE3o de base de c\xE1lculo",_doc:"Tribut\xE7\xE3o pelo ICMS 20 - Com redu\xE7\xE3o de base de c\xE1lculo (CST)",_tipo:"seletor",_enumeration:[{valor:"20",rotulo:"20 - Com redu\xE7\xE3o de base de c\xE1lculo"}],_valorInic:"20"},modBC:{_titulo:"Modalidade de determina\xE7\xE3o da BC do ICMS",_doc:"Modalidade de determina\xE7\xE3o da BC do ICMS: 0 - Margem Valor Agregado (%); 1 - Pauta (valor); 2 - Pre\xE7o Tabelado M\xE1ximo (valor); 3 - Valor da Opera\xE7\xE3o. (modBC)",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Margem Valor Agregado (%)"},{valor:"1",rotulo:"1 - Pauta (valor)"},{valor:"2",rotulo:"2 - Pre\xE7o Tabelado M\xE1ximo (valor)"},{valor:"3",rotulo:"3 - Valor da Opera\xE7\xE3o"}],_valorInic:"0"},pRedBC:{_titulo:"Percentual de redu\xE7\xE3o da BC",_doc:"Percentual de redu\xE7\xE3o da BC (pRedBC)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vBC:{_titulo:"Valor da BC do ICMS",_doc:"Valor da BC do ICMS (vBC)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pICMS:{_titulo:"Al\xEDquota do ICMS",_doc:"Al\xEDquota do ICMS (pICMS)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vICMS:{_titulo:"Valor do ICMS",_doc:"Valor do ICMS (vICMS)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},opcional:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},vBCFCP:{_titulo:"Valor da Base de c\xE1lculo do FCP.",_doc:"Valor da Base de c\xE1lculo do FCP. (vBCFCP)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pFCP:{_titulo:"Percentual de ICMS relativo ao FCP",_doc:"Percentual de ICMS relativo ao Fundo de Combate \xE0 Pobreza (FCP). (pFCP)",_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vFCP:{_titulo:"Valor do ICMS relativo ao FCP",_doc:"Valor do ICMS relativo ao Fundo de Combate \xE0 Pobreza (FCP). (vFCP)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},opcional2:{_titulo:"Grupo desonera\xE7\xE3o",_doc:"Grupo desonera\xE7\xE3o (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo desonera\xE7\xE3o",_doc:"Grupo desonera\xE7\xE3o (Opcional)",_valorInic:""},vICMSDeson:{_titulo:"Valor do ICMS de desonera\xE7\xE3o",_doc:"Valor do ICMS de desonera\xE7\xE3o (vICMSDeson)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},motDesICMS:{_titulo:"Motivo da desonera\xE7\xE3o do ICMS",_doc:"Motivo da desonera\xE7\xE3o do ICMS:3-Uso na agropecu\xE1ria;9-Outros;12-Fomento agropecu\xE1rio (motDesICMS)",_tipo:"seletor",_enumeration:[{valor:"3",rotulo:"3 - Uso na agropecu\xE1ria"},{valor:"9",rotulo:"9 - Outros"},{valor:"12",rotulo:"12 - Fomento agropecu\xE1rio"}],_valorInic:"3"}}},ICMS30:{_titulo:"Tributa\xE7\xE3o pelo ICMS 30",_doc:"Tributa\xE7\xE3o pelo ICMS 30 - Isenta ou n\xE3o tributada e com cobran\xE7a do ICMS por substitui\xE7\xE3o tribut\xE1ria (ICMS30)",_tipo:"texto",_valorInic:"",orig:{_titulo:"Tipo Origem da mercadoria CST ICMS origem da mercadoria",_doc:"origem da mercadoria: 0 - Nacional  1 - Estrangeira - Importa\xE7\xE3o direta  2 - Estrangeira - Adquirida no mercado interno (orig)",_type:"Torig",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Nacional exceto as indicadas nos c\xF3digos 3, 4, 5 e 8"},{valor:"1",rotulo:"1 - Estrangeira - Importa\xE7\xE3o direta"},{valor:"2",rotulo:"2 - Estrangeira - Adquirida no mercado interno"},{valor:"3",rotulo:"3 - Nacional, conteudo superior 40 % e inferior ou igual a 70 %"},{valor:"4",rotulo:"4 - Nacional, processos produtivos b\xE1sicos"},{valor:"5",rotulo:"5 - Nacional, conteudo inferior 40 %"},{valor:"6",rotulo:"6 - Estrangeira - Importa\xE7\xE3o direta, com similar nacional, lista CAMEX"},{valor:"7",rotulo:"7 - Estrangeira - mercado interno, sem simular, lista CAMEX"},{valor:"8",rotulo:"8 - Nacional, Conte\xFAdo de Importa\xE7\xE3o superior a 70 %"}],_valorInic:"0"},CST:{_titulo:"Tribut\xE7\xE3o pelo ICMS 30 - Isenta ou n\xE3o tributada e com cobran\xE7a do ICMS por substitui\xE7\xE3o tribut\xE1ria",_doc:"Tribut\xE7\xE3o pelo ICMS 30 - Isenta ou n\xE3o tributada e com cobran\xE7a do ICMS por substitui\xE7\xE3o tribut\xE1ria (CST)",_tipo:"seletor",_enumeration:[{valor:"30",rotulo:"30 - Isenta ou n\xE3o tributada e com cobran\xE7a do ICMS por substitui\xE7\xE3o tribut\xE1ria"}],_valorInic:"30"},modBCST:{_titulo:"Modalidade de determina\xE7\xE3o da BC do ICMS ST",_doc:"Modalidade de determina\xE7\xE3o da BC do ICMS ST: 0 - Pre\xE7o tabelado ou m\xE1ximo  sugerido; 1 - Lista Negativa (valor); 2 - Lista Positiva (valor); 3 - Lista Neutra (valor); 4 - Margem Valor Agregado (%); 5 - Pauta (valor). 6 - Valor da Opera\xE7\xE3o (modBCST)",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Pre\xE7o tabelado ou m\xE1ximo  sugerido"},{valor:"1",rotulo:"1 - Lista Negativa (valor)"},{valor:"2",rotulo:"2 - Lista Positiva (valor)"},{valor:"3",rotulo:"3 - Lista Neutra (valor)"},{valor:"4",rotulo:"4 - Margem Valor Agregado (%)"},{valor:"5",rotulo:"5 - Pauta (valor)"},{valor:"6",rotulo:"6 - Valor da Opera\xE7\xE3o"}],_valorInic:"0"},pMVAST:{_titulo:"Percentual da Margem de Valor Adicionado ICMS ST",_doc:"Percentual da Margem de Valor Adicionado ICMS ST (pMVAST) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},pRedBCST:{_titulo:"Percentual de redu\xE7\xE3o da BC ICMS ST",_doc:"Percentual de redu\xE7\xE3o da BC ICMS ST (pRedBCST) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vBCST:{_titulo:"Valor da BC do ICMS ST",_doc:"Valor da BC do ICMS ST (vBCST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pICMSST:{_titulo:"Al\xEDquota do ICMS ST",_doc:"Al\xEDquota do ICMS ST (pICMSST)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vICMSST:{_titulo:"Valor do ICMS ST",_doc:"Valor do ICMS ST (vICMSST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},opcional:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},vBCFCPST:{_titulo:"Valor da Base de c\xE1lculo do FCP.",_doc:"Valor da Base de c\xE1lculo do FCP. (vBCFCPST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pFCPST:{_titulo:"Percentual de FCP retido por substitui\xE7\xE3o tribut\xE1ria.",_doc:"Percentual de FCP retido por substitui\xE7\xE3o tribut\xE1ria. (pFCPST)",_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vFCPST:{_titulo:"Valor do FCP retido por substitui\xE7\xE3o tribut\xE1ria.",_doc:"Valor do FCP retido por substitui\xE7\xE3o tribut\xE1ria. (vFCPST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},opcional2:{_titulo:"Grupo desonera\xE7\xE3o",_doc:"Grupo desonera\xE7\xE3o (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo desonera\xE7\xE3o",_doc:"Grupo desonera\xE7\xE3o (Opcional)",_valorInic:""},vICMSDeson:{_titulo:"Valor do ICMS de desonera\xE7\xE3o",_doc:"Valor do ICMS de desonera\xE7\xE3o (vICMSDeson)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},motDesICMS:{_titulo:"Motivo da desonera\xE7\xE3o do ICMS",_doc:"Motivo da desonera\xE7\xE3o do ICMS:6-Utilit\xE1rios Motocicleta A\xC1rea Livre;7-SUFRAMA;9-Outros (motDesICMS)",_tipo:"seletor",_enumeration:[{valor:"6",rotulo:"6 - Utilit\xE1rios Motocicleta A\xC1rea Livre"},{valor:"7",rotulo:"7 - SUFRAMA"},{valor:"9",rotulo:"9 - Outros"}],_valorInic:"6"}}},ICMS40:{_titulo:"Tributa\xE7\xE3o pelo ICMS",_doc:"Tributa\xE7\xE3o pelo ICMS 40 - Isenta  41 - N\xE3o tributada  50 - Suspens\xE3o (ICMS40)",_tipo:"texto",_valorInic:"",orig:{_titulo:"Tipo Origem da mercadoria CST ICMS origem da mercadoria",_doc:"origem da mercadoria: 0 - Nacional  1 - Estrangeira - Importa\xE7\xE3o direta  2 - Estrangeira - Adquirida no mercado interno (orig)",_type:"Torig",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Nacional exceto as indicadas nos c\xF3digos 3, 4, 5 e 8"},{valor:"1",rotulo:"1 - Estrangeira - Importa\xE7\xE3o direta"},{valor:"2",rotulo:"2 - Estrangeira - Adquirida no mercado interno"},{valor:"3",rotulo:"3 - Nacional, conteudo superior 40 % e inferior ou igual a 70 %"},{valor:"4",rotulo:"4 - Nacional, processos produtivos b\xE1sicos"},{valor:"5",rotulo:"5 - Nacional, conteudo inferior 40 %"},{valor:"6",rotulo:"6 - Estrangeira - Importa\xE7\xE3o direta, com similar nacional, lista CAMEX"},{valor:"7",rotulo:"7 - Estrangeira - mercado interno, sem simular, lista CAMEX"},{valor:"8",rotulo:"8 - Nacional, Conte\xFAdo de Importa\xE7\xE3o superior a 70 %"}],_valorInic:"0"},CST:{_titulo:"Tributa\xE7\xE3o pelo ICMS",_doc:"Tributa\xE7\xE3o pelo ICMS  40 - Isenta  41 - N\xE3o tributada  50 - Suspens\xE3o  51 - Diferimento (CST)",_tipo:"seletor",_enumeration:[{valor:"40",rotulo:"40 - Isenta"},{valor:"41",rotulo:"41 - N\xE3o tributada"},{valor:"50",rotulo:"50 - Suspens\xE3o  51 - Diferimento"}],_valorInic:"40"},opcional:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},vICMSDeson:{_titulo:"O valor do ICMS ser\xE1 informado apenas nas opera\xE7\xF5es com ve\xEDculos beneficiados com a desonera\xE7\xE3o condicional do ICMS.",_doc:"O valor do ICMS ser\xE1 informado apenas nas opera\xE7\xF5es com ve\xEDculos beneficiados com a desonera\xE7\xE3o condicional do ICMS. (vICMSDeson)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},motDesICMS:{_titulo:"Este campo ser\xE1 preenchido quando o campo anterior estiver preenchido. Informar o motivo da desonera\xE7\xE3o",_doc:"Este campo ser\xE1 preenchido quando o campo anterior estiver preenchido. Informar o motivo da desonera\xE7\xE3o: 1 - T\xE1xi; 3 - Produtor Agropecu\xE1rio; 4 - Frotista/Locadora; 5 - Diplom\xE1tico/Consular; 6 - Utilit\xE1rios e Motocicletas da Amaz\xF4nia Ocidental e \xC1reas de Livre Com\xE9rcio (Resolu\xE7\xE3o 714/88 e 790/94 - CONTRAN e suas altera\xE7\xF5es); 7 - SUFRAMA; 8 - Venda a \xF3rg\xE3o P\xFAblico; 9 - Outros 10- Deficiente Condutor 11- Deficiente n\xE3o condutor 16 - Olimp\xEDadas Rio 2016 90 - Solicitado pelo Fisco (motDesICMS)",_tipo:"seletor",_enumeration:[{valor:"1",rotulo:"1 -  Deficiente n\xE3o condutor 16 - Olimp\xEDadas Rio 2016 90 - Solicitado pelo Fisco"},{valor:"3",rotulo:"3 - Produtor Agropecu\xE1rio"},{valor:"4",rotulo:"4 - Frotista/Locadora"},{valor:"5",rotulo:"5 - Diplom\xE1tico/Consular; 6 - Utilit\xE1rios e Motocicletas da Amaz\xF4nia Ocidental e \xC1reas de Livre Com\xE9rcio (Resolu\xE7\xE3o 714/88 e 790/94 - CONTRAN e suas altera\xE7\xF5es); 7 - SUFRAMA; 8 - Venda a \xF3rg\xE3o P\xFAblico; 9 - Outros 10- Deficiente Condutor 11- Deficiente n\xE3o condutor 1"},{valor:"6",rotulo:"6 - Olimp\xEDadas Rio 2016 90 - Solicitado pelo Fisco"},{valor:"7",rotulo:"714/88 e 790/94 - CONTRAN e suas altera\xE7\xF5es); 7 - SUFRAMA"},{valor:"8",rotulo:"8 - Venda a \xF3rg\xE3o P\xFAblico; 9 - Outros 10- Deficiente Condutor 11- Deficiente n\xE3o condutor 16 - Olimp\xEDadas Rio 2016 90 - Solicitado pelo Fisco"},{valor:"9",rotulo:"90/94 - CONTRAN e suas altera\xE7\xF5es); 7 - SUFRAMA; 8 - Venda a \xF3rg\xE3o P\xFAblico; 9 - Outros"},{valor:"10",rotulo:"10 -  Deficiente Condutor"},{valor:"11",rotulo:"11 -  Deficiente n\xE3o condutor"},{valor:"16",rotulo:"16 - Olimp\xEDadas Rio 2016"},{valor:"90",rotulo:"90 - Solicitado pelo Fisco"}],_valorInic:"1"}}},ICMS51:{_titulo:"Tributa\xE7\xE3o pelo ICMS 51",_doc:"Tribut\xE7\xE3o pelo ICMS 51 - Diferimento A exig\xEAncia do preenchimento das informa\xE7\xF5es do ICMS diferido fica \xE0 crit\xE9rio de cada UF. (ICMS51)",_tipo:"texto",_valorInic:"",orig:{_titulo:"Tipo Origem da mercadoria CST ICMS origem da mercadoria",_doc:"origem da mercadoria: 0 - Nacional  1 - Estrangeira - Importa\xE7\xE3o direta  2 - Estrangeira - Adquirida no mercado interno (orig)",_type:"Torig",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Nacional exceto as indicadas nos c\xF3digos 3, 4, 5 e 8"},{valor:"1",rotulo:"1 - Estrangeira - Importa\xE7\xE3o direta"},{valor:"2",rotulo:"2 - Estrangeira - Adquirida no mercado interno"},{valor:"3",rotulo:"3 - Nacional, conteudo superior 40 % e inferior ou igual a 70 %"},{valor:"4",rotulo:"4 - Nacional, processos produtivos b\xE1sicos"},{valor:"5",rotulo:"5 - Nacional, conteudo inferior 40 %"},{valor:"6",rotulo:"6 - Estrangeira - Importa\xE7\xE3o direta, com similar nacional, lista CAMEX"},{valor:"7",rotulo:"7 - Estrangeira - mercado interno, sem simular, lista CAMEX"},{valor:"8",rotulo:"8 - Nacional, Conte\xFAdo de Importa\xE7\xE3o superior a 70 %"}],_valorInic:"0"},CST:{_titulo:"Tribut\xE7\xE3o pelo ICMS 20",_doc:"Tribut\xE7\xE3o pelo ICMS 20 - Com redu\xE7\xE3o de base de c\xE1lculo (CST)",_tipo:"seletor",_enumeration:[{valor:"51",rotulo:"51"}],_valorInic:"51"},modBC:{_titulo:"Modalidade de determina\xE7\xE3o da BC do ICMS",_doc:"Modalidade de determina\xE7\xE3o da BC do ICMS: 0 - Margem Valor Agregado (%); 1 - Pauta (valor); 2 - Pre\xE7o Tabelado M\xE1ximo (valor); 3 - Valor da Opera\xE7\xE3o. (modBC) (Opcional)",_opcional:!0,_tipo:"seletor",_enumeration:[{valor:"",rotulo:"N\xE3o se aplica"},{valor:"0",rotulo:"0 - Margem Valor Agregado (%)"},{valor:"1",rotulo:"1 - Pauta (valor)"},{valor:"2",rotulo:"2 - Pre\xE7o Tabelado M\xE1ximo (valor)"},{valor:"3",rotulo:"3 - Valor da Opera\xE7\xE3o"}],_valorInic:""},pRedBC:{_titulo:"Percentual de redu\xE7\xE3o da BC",_doc:"Percentual de redu\xE7\xE3o da BC (pRedBC) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vBC:{_titulo:"Valor da BC do ICMS",_doc:"Valor da BC do ICMS (vBC) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pICMS:{_titulo:"Al\xEDquota do imposto",_doc:"Al\xEDquota do imposto (pICMS) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vICMSOp:{_titulo:"Valor do ICMS da Opera\xE7\xE3o",_doc:"Valor do ICMS da Opera\xE7\xE3o (vICMSOp) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pDif:{_titulo:"Percentual do diferemento",_doc:"Percentual do diferemento (pDif) (Opcional)",_opcional:!0,_pattern:"0(\\.[0-9]{2,4})?|[1-9]{1}[0-9]{0,1}(\\.[0-9]{2,4})?|100(\\.0{2,4})?",_type:"TDec_0302a04Max100",_tipo:"decimal",_decimals:"4",_valorInic:0},vICMSDif:{_titulo:"Valor do ICMS da diferido",_doc:"Valor do ICMS da diferido (vICMSDif) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vICMS:{_titulo:"Valor do ICMS",_doc:"Valor do ICMS (vICMS) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},opcional:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},vBCFCP:{_titulo:"Valor da Base de c\xE1lculo do FCP.",_doc:"Valor da Base de c\xE1lculo do FCP. (vBCFCP)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pFCP:{_titulo:"Percentual de ICMS relativo ao FCP",_doc:"Percentual de ICMS relativo ao Fundo de Combate \xE0 Pobreza (FCP). (pFCP)",_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vFCP:{_titulo:"Valor do ICMS relativo ao FCP",_doc:"Valor do ICMS relativo ao Fundo de Combate \xE0 Pobreza (FCP). (vFCP)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},opcional2:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},pFCPDif:{_titulo:"Percentual do diferimento do ICMS relativo ao Fundo de Combate \xE0 Pobreza (FCP)",_doc:"Percentual do diferimento do ICMS relativo ao Fundo de Combate \xE0 Pobreza (FCP) (pFCPDif) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vFCPDif:{_titulo:"Valor do ICMS relativo ao Fundo de Combate \xE0 Pobreza (FCP) diferido",_doc:"Valor do ICMS relativo ao Fundo de Combate \xE0 Pobreza (FCP) diferido (vFCPDif) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vFCPEfet:{_titulo:"Valor efetivo do ICMS relativo ao Fundo de Combate \xE0 Pobreza (FCP)",_doc:"Valor efetivo do ICMS relativo ao Fundo de Combate \xE0 Pobreza (FCP) (vFCPEfet) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}}},ICMS60:{_titulo:"Tributa\xE7\xE3o pelo ICMS 60",_doc:"Tributa\xE7\xE3o pelo ICMS 60 - ICMS cobrado anteriormente por substitui\xE7\xE3o tribut\xE1ria (ICMS60)",_tipo:"texto",_valorInic:"",orig:{_titulo:"Tipo Origem da mercadoria CST ICMS origem da mercadoria",_doc:"origem da mercadoria: 0 - Nacional  1 - Estrangeira - Importa\xE7\xE3o direta  2 - Estrangeira - Adquirida no mercado interno (orig)",_type:"Torig",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Nacional exceto as indicadas nos c\xF3digos 3, 4, 5 e 8"},{valor:"1",rotulo:"1 - Estrangeira - Importa\xE7\xE3o direta"},{valor:"2",rotulo:"2 - Estrangeira - Adquirida no mercado interno"},{valor:"3",rotulo:"3 - Nacional, conteudo superior 40 % e inferior ou igual a 70 %"},{valor:"4",rotulo:"4 - Nacional, processos produtivos b\xE1sicos"},{valor:"5",rotulo:"5 - Nacional, conteudo inferior 40 %"},{valor:"6",rotulo:"6 - Estrangeira - Importa\xE7\xE3o direta, com similar nacional, lista CAMEX"},{valor:"7",rotulo:"7 - Estrangeira - mercado interno, sem simular, lista CAMEX"},{valor:"8",rotulo:"8 - Nacional, Conte\xFAdo de Importa\xE7\xE3o superior a 70 %"}],_valorInic:"0"},CST:{_titulo:"Tributa\xE7\xE3o pelo ICMS 60",_doc:"Tributa\xE7\xE3o pelo ICMS  60 - ICMS cobrado anteriormente por substitui\xE7\xE3o tribut\xE1ria (CST)",_tipo:"seletor",_enumeration:[{valor:"60",rotulo:"60 - ICMS cobrado anteriormente por substitui\xE7\xE3o tribut\xE1ria"}],_valorInic:"60"},opcional:{_titulo:"NT2010/004",_doc:"NT2010/004 (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"NT2010/004",_doc:"NT2010/004 (Opcional)",_valorInic:""},vBCSTRet:{_titulo:"Valor da BC do ICMS ST retido anteriormente",_doc:"Valor da BC do ICMS ST retido anteriormente (vBCSTRet)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pST:{_titulo:"Aliquota suportada pelo consumidor final.",_doc:"Aliquota suportada pelo consumidor final. (pST)",_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vICMSSubstituto:{_titulo:"Valor do ICMS Pr\xF3prio do Substituto cobrado em opera\xE7\xE3o anterior",_doc:"Valor do ICMS Pr\xF3prio do Substituto cobrado em opera\xE7\xE3o anterior (vICMSSubstituto) (Opcional)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vICMSSTRet:{_titulo:"Valor do ICMS ST retido anteriormente",_doc:"Valor do ICMS ST retido anteriormente (vICMSSTRet)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},opcional2:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},vBCFCPSTRet:{_titulo:"Valor da Base de c\xE1lculo do FCP retido anteriormente por ST.",_doc:"Valor da Base de c\xE1lculo do FCP retido anteriormente por ST. (vBCFCPSTRet)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pFCPSTRet:{_titulo:"Percentual de FCP retido anteriormente por substitui\xE7\xE3o tribut\xE1ria.",_doc:"Percentual de FCP retido anteriormente por substitui\xE7\xE3o tribut\xE1ria. (pFCPSTRet)",_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vFCPSTRet:{_titulo:"Valor do FCP retido por substitui\xE7\xE3o tribut\xE1ria.",_doc:"Valor do FCP retido por substitui\xE7\xE3o tribut\xE1ria. (vFCPSTRet)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},opcional3:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},pRedBCEfet:{_titulo:"Percentual de redu\xE7\xE3o da base de c\xE1lculo efetiva.",_doc:"Percentual de redu\xE7\xE3o da base de c\xE1lculo efetiva. (pRedBCEfet)",_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vBCEfet:{_titulo:"Valor da base de c\xE1lculo efetiva.",_doc:"Valor da base de c\xE1lculo efetiva. (vBCEfet)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pICMSEfet:{_titulo:"Al\xEDquota do ICMS efetiva.",_doc:"Al\xEDquota do ICMS efetiva. (pICMSEfet)",_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vICMSEfet:{_titulo:"Valor do ICMS efetivo.",_doc:"Valor do ICMS efetivo. (vICMSEfet)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}}},ICMS70:{_titulo:"Tributa\xE7\xE3o pelo ICMS 70",_doc:"Tributa\xE7\xE3o pelo ICMS  70 - Com redu\xE7\xE3o de base de c\xE1lculo e cobran\xE7a do ICMS por substitui\xE7\xE3o tribut\xE1ria (ICMS70)",_tipo:"texto",_valorInic:"",orig:{_titulo:"Tipo Origem da mercadoria CST ICMS origem da mercadoria",_doc:"origem da mercadoria: 0 - Nacional  1 - Estrangeira - Importa\xE7\xE3o direta  2 - Estrangeira - Adquirida no mercado interno (orig)",_type:"Torig",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Nacional exceto as indicadas nos c\xF3digos 3, 4, 5 e 8"},{valor:"1",rotulo:"1 - Estrangeira - Importa\xE7\xE3o direta"},{valor:"2",rotulo:"2 - Estrangeira - Adquirida no mercado interno"},{valor:"3",rotulo:"3 - Nacional, conteudo superior 40 % e inferior ou igual a 70 %"},{valor:"4",rotulo:"4 - Nacional, processos produtivos b\xE1sicos"},{valor:"5",rotulo:"5 - Nacional, conteudo inferior 40 %"},{valor:"6",rotulo:"6 - Estrangeira - Importa\xE7\xE3o direta, com similar nacional, lista CAMEX"},{valor:"7",rotulo:"7 - Estrangeira - mercado interno, sem simular, lista CAMEX"},{valor:"8",rotulo:"8 - Nacional, Conte\xFAdo de Importa\xE7\xE3o superior a 70 %"}],_valorInic:"0"},CST:{_titulo:"Tribut\xE7\xE3o pelo ICMS 70",_doc:"Tribut\xE7\xE3o pelo ICMS 70 - Com redu\xE7\xE3o de base de c\xE1lculo e cobran\xE7a do ICMS por substitui\xE7\xE3o tribut\xE1ria (CST)",_tipo:"seletor",_enumeration:[{valor:"70",rotulo:"70 - Com redu\xE7\xE3o de base de c\xE1lculo e cobran\xE7a do ICMS por substitui\xE7\xE3o tribut\xE1ria"}],_valorInic:"70"},modBC:{_titulo:"Modalidade de determina\xE7\xE3o da BC do ICMS",_doc:"Modalidade de determina\xE7\xE3o da BC do ICMS: 0 - Margem Valor Agregado (%); 1 - Pauta (valor); 2 - Pre\xE7o Tabelado M\xE1ximo (valor); 3 - Valor da Opera\xE7\xE3o. (modBC)",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Margem Valor Agregado (%)"},{valor:"1",rotulo:"1 - Pauta (valor)"},{valor:"2",rotulo:"2 - Pre\xE7o Tabelado M\xE1ximo (valor)"},{valor:"3",rotulo:"3 - Valor da Opera\xE7\xE3o"}],_valorInic:"0"},pRedBC:{_titulo:"Percentual de redu\xE7\xE3o da BC",_doc:"Percentual de redu\xE7\xE3o da BC (pRedBC)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vBC:{_titulo:"Valor da BC do ICMS",_doc:"Valor da BC do ICMS (vBC)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pICMS:{_titulo:"Al\xEDquota do ICMS",_doc:"Al\xEDquota do ICMS (pICMS)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vICMS:{_titulo:"Valor do ICMS",_doc:"Valor do ICMS (vICMS)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},opcional:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},vBCFCP:{_titulo:"Valor da Base de c\xE1lculo do FCP.",_doc:"Valor da Base de c\xE1lculo do FCP. (vBCFCP)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pFCP:{_titulo:"Percentual de ICMS relativo ao FCP",_doc:"Percentual de ICMS relativo ao Fundo de Combate \xE0 Pobreza (FCP). (pFCP)",_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vFCP:{_titulo:"Valor do ICMS relativo ao FCP",_doc:"Valor do ICMS relativo ao Fundo de Combate \xE0 Pobreza (FCP). (vFCP)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},opcional2:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},vBCFCPST:{_titulo:"Valor da Base de c\xE1lculo do FCP retido por substitui\xE7\xE3o tribut\xE1ria.",_doc:"Valor da Base de c\xE1lculo do FCP retido por substitui\xE7\xE3o tribut\xE1ria. (vBCFCPST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pFCPST:{_titulo:"Percentual de FCP retido por substitui\xE7\xE3o tribut\xE1ria.",_doc:"Percentual de FCP retido por substitui\xE7\xE3o tribut\xE1ria. (pFCPST)",_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vFCPST:{_titulo:"Valor do FCP retido por substitui\xE7\xE3o tribut\xE1ria.",_doc:"Valor do FCP retido por substitui\xE7\xE3o tribut\xE1ria. (vFCPST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},opcional3:{_titulo:"Grupo desonera\xE7\xE3o",_doc:"Grupo desonera\xE7\xE3o (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo desonera\xE7\xE3o",_doc:"Grupo desonera\xE7\xE3o (Opcional)",_valorInic:""},vICMSDeson:{_titulo:"Valor do ICMS de desonera\xE7\xE3o",_doc:"Valor do ICMS de desonera\xE7\xE3o (vICMSDeson)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},motDesICMS:{_titulo:"Motivo da desonera\xE7\xE3o do ICMS",_doc:"Motivo da desonera\xE7\xE3o do ICMS:3-Uso na agropecu\xE1ria;9-Outros;12-Fomento agropecu\xE1rio (motDesICMS)",_tipo:"seletor",_enumeration:[{valor:"3",rotulo:"3 - Uso na agropecu\xE1ria"},{valor:"9",rotulo:"9 - Outros"},{valor:"12",rotulo:"12 - Fomento agropecu\xE1rio"}],_valorInic:"3"}},opcional4:{_titulo:"Grupo desonera\xE7\xE3o ST",_doc:"Grupo desonera\xE7\xE3o ST (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo desonera\xE7\xE3o ST",_doc:"Grupo desonera\xE7\xE3o ST (Opcional)",_valorInic:""},vICMSSTDeson:{_titulo:"Valor do ICMS- ST desonerado",_doc:"Valor do ICMS- ST desonerado (vICMSSTDeson)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},motDesICMSST:{_titulo:"Motivo da desonera\xE7\xE3o do ICMS- ST",_doc:"Motivo da desonera\xE7\xE3o do ICMS- ST (motDesICMSST)",_tipo:"seletor",_enumeration:[{valor:"3",rotulo:"3"},{valor:"9",rotulo:"9"},{valor:"12",rotulo:"12"}],_valorInic:"3"}},modBCST:{_titulo:"Modalidade de determina\xE7\xE3o da BC do ICMS ST",_doc:"Modalidade de determina\xE7\xE3o da BC do ICMS ST: 0 - Pre\xE7o tabelado ou m\xE1ximo  sugerido; 1 - Lista Negativa (valor); 2 - Lista Positiva (valor); 3 - Lista Neutra (valor); 4 - Margem Valor Agregado (%); 5 - Pauta (valor). 6 - Valor da Opera\xE7\xE3o (modBCST)",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Pre\xE7o tabelado ou m\xE1ximo  sugerido"},{valor:"1",rotulo:"1 - Lista Negativa (valor)"},{valor:"2",rotulo:"2 - Lista Positiva (valor)"},{valor:"3",rotulo:"3 - Lista Neutra (valor)"},{valor:"4",rotulo:"4 - Margem Valor Agregado (%)"},{valor:"5",rotulo:"5 - Pauta (valor)"},{valor:"6",rotulo:"6 - Valor da Opera\xE7\xE3o"}],_valorInic:"0"},pMVAST:{_titulo:"Percentual da Margem de Valor Adicionado ICMS ST",_doc:"Percentual da Margem de Valor Adicionado ICMS ST (pMVAST) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},pRedBCST:{_titulo:"Percentual de redu\xE7\xE3o da BC ICMS ST",_doc:"Percentual de redu\xE7\xE3o da BC ICMS ST (pRedBCST) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vBCST:{_titulo:"Valor da BC do ICMS ST",_doc:"Valor da BC do ICMS ST (vBCST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pICMSST:{_titulo:"Al\xEDquota do ICMS ST",_doc:"Al\xEDquota do ICMS ST (pICMSST)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vICMSST:{_titulo:"Valor do ICMS ST",_doc:"Valor do ICMS ST (vICMSST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},ICMS90:{_titulo:"Tributa\xE7\xE3o pelo ICMS 90 - Outras",_doc:"Tributa\xE7\xE3o pelo ICMS 90 - Outras (ICMS90)",_tipo:"texto",_valorInic:"",orig:{_titulo:"Tipo Origem da mercadoria CST ICMS origem da mercadoria",_doc:"origem da mercadoria: 0 - Nacional  1 - Estrangeira - Importa\xE7\xE3o direta  2 - Estrangeira - Adquirida no mercado interno (orig)",_type:"Torig",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Nacional exceto as indicadas nos c\xF3digos 3, 4, 5 e 8"},{valor:"1",rotulo:"1 - Estrangeira - Importa\xE7\xE3o direta"},{valor:"2",rotulo:"2 - Estrangeira - Adquirida no mercado interno"},{valor:"3",rotulo:"3 - Nacional, conteudo superior 40 % e inferior ou igual a 70 %"},{valor:"4",rotulo:"4 - Nacional, processos produtivos b\xE1sicos"},{valor:"5",rotulo:"5 - Nacional, conteudo inferior 40 %"},{valor:"6",rotulo:"6 - Estrangeira - Importa\xE7\xE3o direta, com similar nacional, lista CAMEX"},{valor:"7",rotulo:"7 - Estrangeira - mercado interno, sem simular, lista CAMEX"},{valor:"8",rotulo:"8 - Nacional, Conte\xFAdo de Importa\xE7\xE3o superior a 70 %"}],_valorInic:"0"},CST:{_titulo:"Tribut\xE7\xE3o pelo ICMS 90 - Outras",_doc:"Tribut\xE7\xE3o pelo ICMS 90 - Outras (CST)",_tipo:"seletor",_enumeration:[{valor:"90",rotulo:"90 - Outras"}],_valorInic:"90"},opcional:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},modBC:{_titulo:"Modalidade de determina\xE7\xE3o da BC do ICMS",_doc:"Modalidade de determina\xE7\xE3o da BC do ICMS:  0 - Margem Valor Agregado (%); 1 - Pauta (valor); 2 - Pre\xE7o Tabelado M\xE1ximo (valor); 3 - Valor da Opera\xE7\xE3o. (modBC)",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Margem Valor Agregado (%)"},{valor:"1",rotulo:"1 - Pauta (valor)"},{valor:"2",rotulo:"2 - Pre\xE7o Tabelado M\xE1ximo (valor)"},{valor:"3",rotulo:"3 - Valor da Opera\xE7\xE3o"}],_valorInic:"0"},vBC:{_titulo:"Valor da BC do ICMS",_doc:"Valor da BC do ICMS (vBC)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pRedBC:{_titulo:"Percentual de redu\xE7\xE3o da BC",_doc:"Percentual de redu\xE7\xE3o da BC (pRedBC) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},pICMS:{_titulo:"Al\xEDquota do ICMS",_doc:"Al\xEDquota do ICMS (pICMS)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vICMS:{_titulo:"Valor do ICMS",_doc:"Valor do ICMS (vICMS)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},opcional:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},vBCFCP:{_titulo:"Valor da Base de c\xE1lculo do FCP.",_doc:"Valor da Base de c\xE1lculo do FCP. (vBCFCP)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pFCP:{_titulo:"Percentual de ICMS relativo ao FCP",_doc:"Percentual de ICMS relativo ao Fundo de Combate \xE0 Pobreza (FCP). (pFCP)",_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vFCP:{_titulo:"Valor do ICMS relativo ao FCP",_doc:"Valor do ICMS relativo ao Fundo de Combate \xE0 Pobreza (FCP). (vFCP)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}}},opcional2:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},modBCST:{_titulo:"Modalidade de determina\xE7\xE3o da BC do ICMS ST",_doc:"Modalidade de determina\xE7\xE3o da BC do ICMS ST: 0 - Pre\xE7o tabelado ou m\xE1ximo  sugerido; 1 - Lista Negativa (valor); 2 - Lista Positiva (valor); 3 - Lista Neutra (valor); 4 - Margem Valor Agregado (%); 5 - Pauta (valor) 6 - Valor da Opera\xE7\xE3o. (modBCST)",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Pre\xE7o tabelado ou m\xE1ximo  sugerido"},{valor:"1",rotulo:"1 - Lista Negativa (valor)"},{valor:"2",rotulo:"2 - Lista Positiva (valor)"},{valor:"3",rotulo:"3 - Lista Neutra (valor)"},{valor:"4",rotulo:"4 - Margem Valor Agregado (%)"},{valor:"5",rotulo:"5 - Pauta (valor)"},{valor:"6",rotulo:"6 - Valor da Opera\xE7\xE3o"}],_valorInic:"0"},pMVAST:{_titulo:"Percentual da Margem de Valor Adicionado ICMS ST",_doc:"Percentual da Margem de Valor Adicionado ICMS ST (pMVAST) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},pRedBCST:{_titulo:"Percentual de redu\xE7\xE3o da BC ICMS ST",_doc:"Percentual de redu\xE7\xE3o da BC ICMS ST (pRedBCST) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vBCST:{_titulo:"Valor da BC do ICMS ST",_doc:"Valor da BC do ICMS ST (vBCST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pICMSST:{_titulo:"Al\xEDquota do ICMS ST",_doc:"Al\xEDquota do ICMS ST (pICMSST)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vICMSST:{_titulo:"Valor do ICMS ST",_doc:"Valor do ICMS ST (vICMSST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},opcional:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},vBCFCPST:{_titulo:"Valor da Base de c\xE1lculo do FCP.",_doc:"Valor da Base de c\xE1lculo do FCP. (vBCFCPST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pFCPST:{_titulo:"Percentual de FCP retido por substitui\xE7\xE3o tribut\xE1ria.",_doc:"Percentual de FCP retido por substitui\xE7\xE3o tribut\xE1ria. (pFCPST)",_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vFCPST:{_titulo:"Valor do FCP retido por substitui\xE7\xE3o tribut\xE1ria.",_doc:"Valor do FCP retido por substitui\xE7\xE3o tribut\xE1ria. (vFCPST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}}},opcional3:{_titulo:"Grupo desonera\xE7\xE3o",_doc:"Grupo desonera\xE7\xE3o (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo desonera\xE7\xE3o",_doc:"Grupo desonera\xE7\xE3o (Opcional)",_valorInic:""},vICMSDeson:{_titulo:"Valor do ICMS de desonera\xE7\xE3o",_doc:"Valor do ICMS de desonera\xE7\xE3o (vICMSDeson)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},motDesICMS:{_titulo:"Motivo da desonera\xE7\xE3o do ICMS",_doc:"Motivo da desonera\xE7\xE3o do ICMS:3-Uso na agropecu\xE1ria;9-Outros;12-Fomento agropecu\xE1rio (motDesICMS)",_tipo:"seletor",_enumeration:[{valor:"3",rotulo:"3 - Uso na agropecu\xE1ria"},{valor:"9",rotulo:"9 - Outros"},{valor:"12",rotulo:"12 - Fomento agropecu\xE1rio"}],_valorInic:"3"}},opcional4:{_titulo:"Grupo desonera\xE7\xE3o ST",_doc:"Grupo desonera\xE7\xE3o ST (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo desonera\xE7\xE3o ST",_doc:"Grupo desonera\xE7\xE3o ST (Opcional)",_valorInic:""},vICMSSTDeson:{_titulo:"Valor do ICMS- ST desonerado",_doc:"Valor do ICMS- ST desonerado (vICMSSTDeson)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},motDesICMSST:{_titulo:"Motivo da desonera\xE7\xE3o do ICMS- ST ",_doc:"Motivo da desonera\xE7\xE3o do ICMS- ST  (motDesICMSST)",_tipo:"seletor",_enumeration:[{valor:"3",rotulo:"3"},{valor:"9",rotulo:"9"},{valor:"12",rotulo:"12"}],_valorInic:"3"}}},ICMSPart:{_titulo:"Partilha do ICMS entre a UF de origem e UF de destino",_doc:"Partilha do ICMS entre a UF de origem e UF de destino ou a UF definida na legisla\xE7\xE3o Opera\xE7\xE3o interestadual para consumidor final com partilha do ICMS  devido na opera\xE7\xE3o entre a UF de origem e a UF do destinat\xE1rio ou ou a UF definida na legisla\xE7\xE3o. (Ex. UF da concession\xE1ria de entrega do  ve\xEDculos) (ICMSPart)",_tipo:"texto",_valorInic:"",orig:{_titulo:"Tipo Origem da mercadoria CST ICMS origem da mercadoria",_doc:"origem da mercadoria: 0 - Nacional  1 - Estrangeira - Importa\xE7\xE3o direta  2 - Estrangeira - Adquirida no mercado interno (orig)",_type:"Torig",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Nacional exceto as indicadas nos c\xF3digos 3, 4, 5 e 8"},{valor:"1",rotulo:"1 - Estrangeira - Importa\xE7\xE3o direta"},{valor:"2",rotulo:"2 - Estrangeira - Adquirida no mercado interno"},{valor:"3",rotulo:"3 - Nacional, conteudo superior 40 % e inferior ou igual a 70 %"},{valor:"4",rotulo:"4 - Nacional, processos produtivos b\xE1sicos"},{valor:"5",rotulo:"5 - Nacional, conteudo inferior 40 %"},{valor:"6",rotulo:"6 - Estrangeira - Importa\xE7\xE3o direta, com similar nacional, lista CAMEX"},{valor:"7",rotulo:"7 - Estrangeira - mercado interno, sem simular, lista CAMEX"},{valor:"8",rotulo:"8 - Nacional, Conte\xFAdo de Importa\xE7\xE3o superior a 70 %"}],_valorInic:"0"},CST:{_titulo:"Tributa\xE7\xE3o pelo ICMS 10",_doc:"Tributa\xE7\xE3o pelo ICMS  10 - Tributada e com cobran\xE7a do ICMS por substitui\xE7\xE3o tribut\xE1ria; 90 - Outros. (CST)",_tipo:"seletor",_enumeration:[{valor:"10",rotulo:"10 - Tributada e com cobran\xE7a do ICMS por substitui\xE7\xE3o tribut\xE1ria"},{valor:"90",rotulo:"90 - Outros"}],_valorInic:"10"},modBC:{_titulo:"Modalidade de determina\xE7\xE3o da BC do ICMS",_doc:"Modalidade de determina\xE7\xE3o da BC do ICMS:  0 - Margem Valor Agregado (%); 1 - Pauta (valor); 2 - Pre\xE7o Tabelado M\xE1ximo (valor); 3 - Valor da Opera\xE7\xE3o. (modBC)",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Margem Valor Agregado (%)"},{valor:"1",rotulo:"1 - Pauta (valor)"},{valor:"2",rotulo:"2 - Pre\xE7o Tabelado M\xE1ximo (valor)"},{valor:"3",rotulo:"3 - Valor da Opera\xE7\xE3o"}],_valorInic:"0"},vBC:{_titulo:"Valor da BC do ICMS",_doc:"Valor da BC do ICMS (vBC)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pRedBC:{_titulo:"Percentual de redu\xE7\xE3o da BC",_doc:"Percentual de redu\xE7\xE3o da BC (pRedBC) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},pICMS:{_titulo:"Al\xEDquota do ICMS",_doc:"Al\xEDquota do ICMS (pICMS)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vICMS:{_titulo:"Valor do ICMS",_doc:"Valor do ICMS (vICMS)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},modBCST:{_titulo:"Modalidade de determina\xE7\xE3o da BC do ICMS ST",_doc:"Modalidade de determina\xE7\xE3o da BC do ICMS ST: 0 - Pre\xE7o tabelado ou m\xE1ximo  sugerido; 1 - Lista Negativa (valor); 2 - Lista Positiva (valor); 3 - Lista Neutra (valor); 4 - Margem Valor Agregado (%); 5 - Pauta (valor). 6 - Valor da Opera\xE7\xE3o (modBCST)",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Pre\xE7o tabelado ou m\xE1ximo  sugerido"},{valor:"1",rotulo:"1 - Lista Negativa (valor)"},{valor:"2",rotulo:"2 - Lista Positiva (valor)"},{valor:"3",rotulo:"3 - Lista Neutra (valor)"},{valor:"4",rotulo:"4 - Margem Valor Agregado (%)"},{valor:"5",rotulo:"5 - Pauta (valor)"},{valor:"6",rotulo:"6 - Valor da Opera\xE7\xE3o"}],_valorInic:"0"},pMVAST:{_titulo:"Percentual da Margem de Valor Adicionado ICMS ST",_doc:"Percentual da Margem de Valor Adicionado ICMS ST (pMVAST) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},pRedBCST:{_titulo:"Percentual de redu\xE7\xE3o da BC ICMS ST",_doc:"Percentual de redu\xE7\xE3o da BC ICMS ST (pRedBCST) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vBCST:{_titulo:"Valor da BC do ICMS ST",_doc:"Valor da BC do ICMS ST (vBCST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pICMSST:{_titulo:"Al\xEDquota do ICMS ST",_doc:"Al\xEDquota do ICMS ST (pICMSST)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vICMSST:{_titulo:"Valor do ICMS ST",_doc:"Valor do ICMS ST (vICMSST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pBCOp:{_titulo:"Percentual para determina\xE7\xE3o do valor  da Base de C\xE1lculo da opera\xE7\xE3o pr\xF3pria.",_doc:"Percentual para determina\xE7\xE3o do valor  da Base de C\xE1lculo da opera\xE7\xE3o pr\xF3pria. (pBCOp)",_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},UFST:{_titulo:"Sigla da UF para qual \xE9 devido o ICMS ST da opera\xE7\xE3o.",_doc:"Sigla da UF para qual \xE9 devido o ICMS ST da opera\xE7\xE3o. (UFST)",_type:"TUf",_tipo:"seletor",_enumeration:[{valor:"AC",rotulo:"AC"},{valor:"AL",rotulo:"AL"},{valor:"AM",rotulo:"AM"},{valor:"AP",rotulo:"AP"},{valor:"BA",rotulo:"BA"},{valor:"CE",rotulo:"CE"},{valor:"DF",rotulo:"DF"},{valor:"ES",rotulo:"ES"},{valor:"GO",rotulo:"GO"},{valor:"MA",rotulo:"MA"},{valor:"MG",rotulo:"MG"},{valor:"MS",rotulo:"MS"},{valor:"MT",rotulo:"MT"},{valor:"PA",rotulo:"PA"},{valor:"PB",rotulo:"PB"},{valor:"PE",rotulo:"PE"},{valor:"PI",rotulo:"PI"},{valor:"PR",rotulo:"PR"},{valor:"RJ",rotulo:"RJ"},{valor:"RN",rotulo:"RN"},{valor:"RO",rotulo:"RO"},{valor:"RR",rotulo:"RR"},{valor:"RS",rotulo:"RS"},{valor:"SC",rotulo:"SC"},{valor:"SE",rotulo:"SE"},{valor:"SP",rotulo:"SP"},{valor:"TO",rotulo:"TO"},{valor:"EX",rotulo:"EX"}],_valorInic:"AC"}},ICMSST:{_titulo:"Grupo de informa\xE7\xE3o do ICMSST devido para a UF de destino.",_doc:"Grupo de informa\xE7\xE3o do ICMSST devido para a UF de destino, nas opera\xE7\xF5es interestaduais de produtos que tiveram reten\xE7\xE3o antecipada de ICMS por ST na UF do remetente. Repasse via Substituto Tribut\xE1rio. (ICMSST)",_tipo:"texto",_valorInic:"",orig:{_titulo:"Tipo Origem da mercadoria CST ICMS origem da mercadoria",_doc:"origem da mercadoria: 0 - Nacional  1 - Estrangeira - Importa\xE7\xE3o direta  2 - Estrangeira - Adquirida no mercado interno (orig)",_type:"Torig",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Nacional exceto as indicadas nos c\xF3digos 3, 4, 5 e 8"},{valor:"1",rotulo:"1 - Estrangeira - Importa\xE7\xE3o direta"},{valor:"2",rotulo:"2 - Estrangeira - Adquirida no mercado interno"},{valor:"3",rotulo:"3 - Nacional, conteudo superior 40 % e inferior ou igual a 70 %"},{valor:"4",rotulo:"4 - Nacional, processos produtivos b\xE1sicos"},{valor:"5",rotulo:"5 - Nacional, conteudo inferior 40 %"},{valor:"6",rotulo:"6 - Estrangeira - Importa\xE7\xE3o direta, com similar nacional, lista CAMEX"},{valor:"7",rotulo:"7 - Estrangeira - mercado interno, sem simular, lista CAMEX"},{valor:"8",rotulo:"8 - Nacional, Conte\xFAdo de Importa\xE7\xE3o superior a 70 %"}],_valorInic:"0"},CST:{_titulo:"Tribut\xE7\xE3o pelo ICMS",_doc:"Tribut\xE7\xE3o pelo ICMS 41-N\xE3o Tributado. 60-Cobrado anteriormente por substitui\xE7\xE3o tribut\xE1ria. (CST)",_tipo:"seletor",_enumeration:[{valor:"41",rotulo:"41 - N\xE3o Tributado"},{valor:"60",rotulo:"60 - Cobrado anteriormente por substitui\xE7\xE3o tribut\xE1ria"}],_valorInic:"41"},vBCSTRet:{_titulo:"Informar o valor da BC do ICMS ST retido na UF remetente",_doc:"Informar o valor da BC do ICMS ST retido na UF remetente (vBCSTRet)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pST:{_titulo:"Aliquota suportada pelo consumidor final.",_doc:"Aliquota suportada pelo consumidor final. (pST) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vICMSSubstituto:{_titulo:"Valor do ICMS Pr\xF3prio do Substituto cobrado em opera\xE7\xE3o anterior",_doc:"Valor do ICMS Pr\xF3prio do Substituto cobrado em opera\xE7\xE3o anterior (vICMSSubstituto) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vICMSSTRet:{_titulo:" Informar o valor do ICMS ST retido na UF remetente (iv2.0))",_doc:" Informar o valor do ICMS ST retido na UF remetente (iv2.0)) (vICMSSTRet)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},opcional:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},vBCFCPSTRet:{_titulo:"Informar o valor da Base de C\xE1lculo do FCP retido anteriormente por ST.",_doc:"Informar o valor da Base de C\xE1lculo do FCP retido anteriormente por ST. (vBCFCPSTRet)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pFCPSTRet:{_titulo:"Percentual relativo ao FCP retido por substitui\xE7\xE3o tribut\xE1ria.",_doc:"Percentual relativo ao Fundo de Combate \xE0 Pobreza (FCP) retido por substitui\xE7\xE3o tribut\xE1ria. (pFCPSTRet)",_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vFCPSTRet:{_titulo:"Valor do ICMS relativo ao FCP retido por substitui\xE7\xE3o tribut\xE1ria.",_doc:"Valor do ICMS relativo ao Fundo de Combate \xE0 Pobreza (FCP) retido por substitui\xE7\xE3o tribut\xE1ria. (vFCPSTRet)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},opcional2:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},pRedBCEfet:{_titulo:"Percentual de redu\xE7\xE3o da base de c\xE1lculo efetiva.",_doc:"Percentual de redu\xE7\xE3o da base de c\xE1lculo efetiva. (pRedBCEfet)",_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vBCEfet:{_titulo:"Valor da base de c\xE1lculo efetiva.",_doc:"Valor da base de c\xE1lculo efetiva. (vBCEfet)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pICMSEfet:{_titulo:"Al\xEDquota do ICMS efetivo.",_doc:"Al\xEDquota do ICMS efetivo. (pICMSEfet)",_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vICMSEfet:{_titulo:"Valor do ICMS efetivo.",_doc:"Valor do ICMS efetivo. (vICMSEfet)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},vBCSTDest:{_titulo:" Informar o valor da BC do ICMS ST da UF destino",_doc:" Informar o valor da BC do ICMS ST da UF destino (vBCSTDest)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vICMSSTDest:{_titulo:"Informar o valor da BC do ICMS ST da UF destino",_doc:"Informar o valor da BC do ICMS ST da UF destino (vICMSSTDest)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},ICMSSN101:{_titulo:"Tributa\xE7\xE3o do ICMS pelo SIMPLES NACIONAL e CSOSN=101 (v.2.0)",_doc:"Tributa\xE7\xE3o do ICMS pelo SIMPLES NACIONAL e CSOSN=101 (v.2.0) (ICMSSN101)",_tipo:"texto",_valorInic:"",orig:{_titulo:"Tipo Origem da mercadoria CST ICMS origem da mercadoria",_doc:"origem da mercadoria: 0 - Nacional  1 - Estrangeira - Importa\xE7\xE3o direta  2 - Estrangeira - Adquirida no mercado interno  (orig)",_type:"Torig",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Nacional exceto as indicadas nos c\xF3digos 3, 4, 5 e 8"},{valor:"1",rotulo:"1 - Estrangeira - Importa\xE7\xE3o direta"},{valor:"2",rotulo:"2 - Estrangeira - Adquirida no mercado interno"},{valor:"3",rotulo:"3 - Nacional, conteudo superior 40 % e inferior ou igual a 70 %"},{valor:"4",rotulo:"4 - Nacional, processos produtivos b\xE1sicos"},{valor:"5",rotulo:"5 - Nacional, conteudo inferior 40 %"},{valor:"6",rotulo:"6 - Estrangeira - Importa\xE7\xE3o direta, com similar nacional, lista CAMEX"},{valor:"7",rotulo:"7 - Estrangeira - mercado interno, sem simular, lista CAMEX"},{valor:"8",rotulo:"8 - Nacional, Conte\xFAdo de Importa\xE7\xE3o superior a 70 %"}],_valorInic:"0"},CSOSN:{_titulo:"101- Tributada pelo Simples Nacional com permiss\xE3o de cr\xE9dito. (v.2.0)",_doc:"101- Tributada pelo Simples Nacional com permiss\xE3o de cr\xE9dito. (v.2.0) (CSOSN)",_tipo:"seletor",_enumeration:[{valor:"101",rotulo:"101 -  Tributada pelo Simples Nacional com permiss\xE3o de cr\xE9dito. (v.2.0"}],_valorInic:"101"},pCredSN:{_titulo:"Al\xEDquota aplic\xE1vel de c\xE1lculo do cr\xE9dito (Simples Nacional).",_doc:"Al\xEDquota aplic\xE1vel de c\xE1lculo do cr\xE9dito (Simples Nacional). (pCredSN)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vCredICMSSN:{_titulo:"Valor cr\xE9dito do ICMS que pode ser aproveitado nos termos do art. 23 da LC 123 (Simples Nacional)",_doc:"Valor cr\xE9dito do ICMS que pode ser aproveitado nos termos do art. 23 da LC 123 (Simples Nacional) (vCredICMSSN)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},ICMSSN102:{_titulo:"Tributa\xE7\xE3o do ICMS pelo SIMPLES NACIONAL e CSOSN=102, 103, 300 ou 400 (v.2.0))",_doc:"Tributa\xE7\xE3o do ICMS pelo SIMPLES NACIONAL e CSOSN=102, 103, 300 ou 400 (v.2.0)) (ICMSSN102)",_tipo:"texto",_valorInic:"",orig:{_titulo:"Tipo Origem da mercadoria CST ICMS origem da mercadoria",_doc:"origem da mercadoria: 0 - Nacional  1 - Estrangeira - Importa\xE7\xE3o direta  2 - Estrangeira - Adquirida no mercado interno  (orig)",_type:"Torig",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Nacional exceto as indicadas nos c\xF3digos 3, 4, 5 e 8"},{valor:"1",rotulo:"1 - Estrangeira - Importa\xE7\xE3o direta"},{valor:"2",rotulo:"2 - Estrangeira - Adquirida no mercado interno"},{valor:"3",rotulo:"3 - Nacional, conteudo superior 40 % e inferior ou igual a 70 %"},{valor:"4",rotulo:"4 - Nacional, processos produtivos b\xE1sicos"},{valor:"5",rotulo:"5 - Nacional, conteudo inferior 40 %"},{valor:"6",rotulo:"6 - Estrangeira - Importa\xE7\xE3o direta, com similar nacional, lista CAMEX"},{valor:"7",rotulo:"7 - Estrangeira - mercado interno, sem simular, lista CAMEX"},{valor:"8",rotulo:"8 - Nacional, Conte\xFAdo de Importa\xE7\xE3o superior a 70 %"}],_valorInic:"0"},CSOSN:{_titulo:"102- Tributada pelo Simples Nacional sem permiss\xE3o de cr\xE9dito",_doc:"102- Tributada pelo Simples Nacional sem permiss\xE3o de cr\xE9dito.  103 - Isen\xE7\xE3o do ICMS  no Simples Nacional para faixa de receita bruta. 300 - Imune. 400 - N\xE3o tributada pelo Simples Nacional (v.2.0) (v.2.0) (CSOSN)",_tipo:"seletor",_enumeration:[{valor:"102",rotulo:"102 -  Tributada pelo Simples Nacional sem permiss\xE3o de cr\xE9dito"},{valor:"103",rotulo:"103 - Isen\xE7\xE3o do ICMS  no Simples Nacional para faixa de receita bruta"},{valor:"300",rotulo:"300 - Imune"},{valor:"400",rotulo:"400 - N\xE3o tributada pelo Simples Nacional (v.2.0) (v.2.0"}],_valorInic:"102"}},ICMSSN201:{_titulo:"Tributa\xE7\xE3o do ICMS pelo SIMPLES NACIONAL e CSOSN=201 (v.2.0)",_doc:"Tributa\xE7\xE3o do ICMS pelo SIMPLES NACIONAL e CSOSN=201 (v.2.0) (ICMSSN201)",_tipo:"texto",_valorInic:"",orig:{_titulo:"Tipo Origem da mercadoria CST ICMS origem da mercadoria",_doc:"Origem da mercadoria: 0 - Nacional; 1 - Estrangeira - Importa\xE7\xE3o direta; 2 - Estrangeira - Adquirida no mercado interno. (orig)",_type:"Torig",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Nacional exceto as indicadas nos c\xF3digos 3, 4, 5 e 8"},{valor:"1",rotulo:"1 - Estrangeira - Importa\xE7\xE3o direta"},{valor:"2",rotulo:"2 - Estrangeira - Adquirida no mercado interno"},{valor:"3",rotulo:"3 - Nacional, conteudo superior 40 % e inferior ou igual a 70 %"},{valor:"4",rotulo:"4 - Nacional, processos produtivos b\xE1sicos"},{valor:"5",rotulo:"5 - Nacional, conteudo inferior 40 %"},{valor:"6",rotulo:"6 - Estrangeira - Importa\xE7\xE3o direta, com similar nacional, lista CAMEX"},{valor:"7",rotulo:"7 - Estrangeira - mercado interno, sem simular, lista CAMEX"},{valor:"8",rotulo:"8 - Nacional, Conte\xFAdo de Importa\xE7\xE3o superior a 70 %"}],_valorInic:"0"},CSOSN:{_titulo:"201- Tributada pelo Simples Nacional com permiss\xE3o de cr\xE9dito e com cobran\xE7a do ICMS por Substitui\xE7\xE3o Tribut\xE1ria (v.2.0)",_doc:"201- Tributada pelo Simples Nacional com permiss\xE3o de cr\xE9dito e com cobran\xE7a do ICMS por Substitui\xE7\xE3o Tribut\xE1ria (v.2.0) (CSOSN)",_tipo:"seletor",_enumeration:[{valor:"201",rotulo:"201 -  Tributada pelo Simples Nacional com permiss\xE3o de cr\xE9dito e com cobran\xE7a do ICMS por Substitui\xE7\xE3o Tribut\xE1ria (v.2.0"}],_valorInic:"201"},modBCST:{_titulo:"Modalidade de determina\xE7\xE3o da BC do ICMS ST",_doc:"Modalidade de determina\xE7\xE3o da BC do ICMS ST: 0 - Pre\xE7o tabelado ou m\xE1ximo  sugerido; 1 - Lista Negativa (valor); 2 - Lista Positiva (valor); 3 - Lista Neutra (valor); 4 - Margem Valor Agregado (%); 5 - Pauta (valor). 6 - Valor da Opera\xE7\xE3o (modBCST)",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Pre\xE7o tabelado ou m\xE1ximo  sugerido"},{valor:"1",rotulo:"1 - Lista Negativa (valor)"},{valor:"2",rotulo:"2 - Lista Positiva (valor)"},{valor:"3",rotulo:"3 - Lista Neutra (valor)"},{valor:"4",rotulo:"4 - Margem Valor Agregado (%)"},{valor:"5",rotulo:"5 - Pauta (valor). (v2.0"},{valor:"6",rotulo:"6 - Valor da Opera\xE7\xE3o"}],_valorInic:"0"},pMVAST:{_titulo:"Percentual da Margem de Valor Adicionado ICMS ST",_doc:"Percentual da Margem de Valor Adicionado ICMS ST (pMVAST) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},pRedBCST:{_titulo:"Percentual de redu\xE7\xE3o da BC ICMS ST ",_doc:"Percentual de redu\xE7\xE3o da BC ICMS ST  (pRedBCST) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vBCST:{_titulo:"Valor da BC do ICMS ST",_doc:"Valor da BC do ICMS ST (vBCST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pICMSST:{_titulo:"Al\xEDquota do ICMS ST",_doc:"Al\xEDquota do ICMS ST (pICMSST)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vICMSST:{_titulo:"Valor do ICMS ST",_doc:"Valor do ICMS ST (vICMSST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},opcional:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},vBCFCPST:{_titulo:"Valor da Base de c\xE1lculo do FCP.",_doc:"Valor da Base de c\xE1lculo do FCP. (vBCFCPST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pFCPST:{_titulo:"Percentual de FCP retido por substitui\xE7\xE3o tribut\xE1ria.",_doc:"Percentual de FCP retido por substitui\xE7\xE3o tribut\xE1ria. (pFCPST)",_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vFCPST:{_titulo:"Valor do FCP retido por substitui\xE7\xE3o tribut\xE1ria.",_doc:"Valor do FCP retido por substitui\xE7\xE3o tribut\xE1ria. (vFCPST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},pCredSN:{_titulo:"Al\xEDquota aplic\xE1vel de c\xE1lculo do cr\xE9dito (Simples Nacional).",_doc:"Al\xEDquota aplic\xE1vel de c\xE1lculo do cr\xE9dito (Simples Nacional). (pCredSN)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vCredICMSSN:{_titulo:"Valor cr\xE9dito do ICMS que pode ser aproveitado nos termos do art. 23 da LC 123 (Simples Nacional)",_doc:"Valor cr\xE9dito do ICMS que pode ser aproveitado nos termos do art. 23 da LC 123 (Simples Nacional) (vCredICMSSN)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},ICMSSN202:{_titulo:"Tributa\xE7\xE3o do ICMS pelo SIMPLES NACIONAL e CSOSN=202 ou 203 (v.2.0)",_doc:"Tributa\xE7\xE3o do ICMS pelo SIMPLES NACIONAL e CSOSN=202 ou 203 (v.2.0) (ICMSSN202)",_tipo:"texto",_valorInic:"",orig:{_titulo:"Tipo Origem da mercadoria CST ICMS origem da mercadoria",_doc:"Origem da mercadoria: 0 - Nacional; 1 - Estrangeira - Importa\xE7\xE3o direta; 2 - Estrangeira - Adquirida no mercado interno. (orig)",_type:"Torig",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Nacional exceto as indicadas nos c\xF3digos 3, 4, 5 e 8"},{valor:"1",rotulo:"1 - Estrangeira - Importa\xE7\xE3o direta"},{valor:"2",rotulo:"2 - Estrangeira - Adquirida no mercado interno"},{valor:"3",rotulo:"3 - Nacional, conteudo superior 40 % e inferior ou igual a 70 %"},{valor:"4",rotulo:"4 - Nacional, processos produtivos b\xE1sicos"},{valor:"5",rotulo:"5 - Nacional, conteudo inferior 40 %"},{valor:"6",rotulo:"6 - Estrangeira - Importa\xE7\xE3o direta, com similar nacional, lista CAMEX"},{valor:"7",rotulo:"7 - Estrangeira - mercado interno, sem simular, lista CAMEX"},{valor:"8",rotulo:"8 - Nacional, Conte\xFAdo de Importa\xE7\xE3o superior a 70 %"}],_valorInic:"0"},CSOSN:{_titulo:"202- Tributada pelo Simples Nacional sem permiss\xE3o de cr\xE9dito e com cobran\xE7a do ICMS por Substitui\xE7\xE3o Tribut\xE1ria; 203-  Isen\xE7\xE3o do ICMS nos Simples Nacional para faixa de receita bruta e com cobran\xE7a do ICMS por Substitui\xE7\xE3o Tribut\xE1ria (v.2.0)",_doc:"202- Tributada pelo Simples Nacional sem permiss\xE3o de cr\xE9dito e com cobran\xE7a do ICMS por Substitui\xE7\xE3o Tribut\xE1ria; 203-  Isen\xE7\xE3o do ICMS nos Simples Nacional para faixa de receita bruta e com cobran\xE7a do ICMS por Substitui\xE7\xE3o Tribut\xE1ria (v.2.0) (CSOSN)",_tipo:"seletor",_enumeration:[{valor:"202",rotulo:"202 -  Tributada pelo Simples Nacional sem permiss\xE3o de cr\xE9dito e com cobran\xE7a do ICMS por Substitui\xE7\xE3o Tribut\xE1ria"},{valor:"203",rotulo:"203 -   Isen\xE7\xE3o do ICMS nos Simples Nacional para faixa de receita bruta e com cobran\xE7a do ICMS por Substitui\xE7\xE3o Tribut\xE1ria (v.2.0"}],_valorInic:"202"},modBCST:{_titulo:"Modalidade de determina\xE7\xE3o da BC do ICMS ST",_doc:"Modalidade de determina\xE7\xE3o da BC do ICMS ST: 0 - Pre\xE7o tabelado ou m\xE1ximo  sugerido; 1 - Lista Negativa (valor); 2 - Lista Positiva (valor); 3 - Lista Neutra (valor); 4 - Margem Valor Agregado (%); 5 - Pauta (valor). 6 - Valor da Opera\xE7\xE3o (modBCST)",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Pre\xE7o tabelado ou m\xE1ximo  sugerido"},{valor:"1",rotulo:"1 - Lista Negativa (valor)"},{valor:"2",rotulo:"2 - Lista Positiva (valor)"},{valor:"3",rotulo:"3 - Lista Neutra (valor)"},{valor:"4",rotulo:"4 - Margem Valor Agregado (%)"},{valor:"5",rotulo:"5 - Pauta (valor). (v2.0"},{valor:"6",rotulo:"6 - Valor da Opera\xE7\xE3o"}],_valorInic:"0"},pMVAST:{_titulo:"Percentual da Margem de Valor Adicionado ICMS ST",_doc:"Percentual da Margem de Valor Adicionado ICMS ST (pMVAST) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},pRedBCST:{_titulo:"Percentual de redu\xE7\xE3o da BC ICMS ST ",_doc:"Percentual de redu\xE7\xE3o da BC ICMS ST  (pRedBCST) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vBCST:{_titulo:"Valor da BC do ICMS ST",_doc:"Valor da BC do ICMS ST (vBCST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pICMSST:{_titulo:"Al\xEDquota do ICMS ST",_doc:"Al\xEDquota do ICMS ST (pICMSST)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vICMSST:{_titulo:"Valor do ICMS ST",_doc:"Valor do ICMS ST (vICMSST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},opcional:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},vBCFCPST:{_titulo:"Valor da Base de c\xE1lculo do FCP.",_doc:"Valor da Base de c\xE1lculo do FCP. (vBCFCPST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pFCPST:{_titulo:"Percentual de FCP retido por substitui\xE7\xE3o tribut\xE1ria.",_doc:"Percentual de FCP retido por substitui\xE7\xE3o tribut\xE1ria. (pFCPST)",_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vFCPST:{_titulo:"Valor do FCP retido por substitui\xE7\xE3o tribut\xE1ria.",_doc:"Valor do FCP retido por substitui\xE7\xE3o tribut\xE1ria. (vFCPST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}}},ICMSSN500:{_titulo:"Tributa\xE7\xE3o do ICMS pelo SIMPLES NACIONAL",_doc:"Tributa\xE7\xE3o do ICMS pelo SIMPLES NACIONAL,CRT=1 - Simples Nacional e CSOSN=500 (v.2.0) (ICMSSN500)",_tipo:"texto",_valorInic:"",orig:{_titulo:"Tipo Origem da mercadoria CST ICMS origem da mercadoria",_doc:"origem da mercadoria: 0 - Nacional  1 - Estrangeira - Importa\xE7\xE3o direta  2 - Estrangeira - Adquirida no mercado interno (orig)",_type:"Torig",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Nacional exceto as indicadas nos c\xF3digos 3, 4, 5 e 8"},{valor:"1",rotulo:"1 - Estrangeira - Importa\xE7\xE3o direta"},{valor:"2",rotulo:"2 - Estrangeira - Adquirida no mercado interno"},{valor:"3",rotulo:"3 - Nacional, conteudo superior 40 % e inferior ou igual a 70 %"},{valor:"4",rotulo:"4 - Nacional, processos produtivos b\xE1sicos"},{valor:"5",rotulo:"5 - Nacional, conteudo inferior 40 %"},{valor:"6",rotulo:"6 - Estrangeira - Importa\xE7\xE3o direta, com similar nacional, lista CAMEX"},{valor:"7",rotulo:"7 - Estrangeira - mercado interno, sem simular, lista CAMEX"},{valor:"8",rotulo:"8 - Nacional, Conte\xFAdo de Importa\xE7\xE3o superior a 70 %"}],_valorInic:"0"},CSOSN:{_titulo:"500 - ICMS cobrado anterirmente por substitui\xE7\xE3o tribut\xE1ria (substitu\xEDdo) ou por antecipa\xE7\xE3o (v.2.0)",_doc:"500 - ICMS cobrado anterirmente por substitui\xE7\xE3o tribut\xE1ria (substitu\xEDdo) ou por antecipa\xE7\xE3o (v.2.0) (CSOSN)",_tipo:"seletor",_enumeration:[{valor:"500",rotulo:"500 - ICMS cobrado anterirmente por substitui\xE7\xE3o tribut\xE1ria (substitu\xEDdo) ou por antecipa\xE7\xE3o (v.2.0"}],_valorInic:"500"},opcional:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},vBCSTRet:{_titulo:"Valor da BC do ICMS ST retido anteriormente",_doc:"Valor da BC do ICMS ST retido anteriormente (vBCSTRet)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pST:{_titulo:"Aliquota suportada pelo consumidor final.",_doc:"Aliquota suportada pelo consumidor final. (pST)",_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vICMSSubstituto:{_titulo:"Valor do ICMS pr\xF3prio do substituto",_doc:"Valor do ICMS pr\xF3prio do substituto (vICMSSubstituto) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vICMSSTRet:{_titulo:"Valor do ICMS ST retido anteriormente ",_doc:"Valor do ICMS ST retido anteriormente  (vICMSSTRet)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},opcional2:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},vBCFCPSTRet:{_titulo:"Valor da Base de c\xE1lculo do FCP retido anteriormente.",_doc:"Valor da Base de c\xE1lculo do FCP retido anteriormente. (vBCFCPSTRet)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pFCPSTRet:{_titulo:"Percentual de FCP retido anteriormente por substitui\xE7\xE3o tribut\xE1ria.",_doc:"Percentual de FCP retido anteriormente por substitui\xE7\xE3o tribut\xE1ria. (pFCPSTRet)",_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vFCPSTRet:{_titulo:"Valor do FCP retido por substitui\xE7\xE3o tribut\xE1ria.",_doc:"Valor do FCP retido por substitui\xE7\xE3o tribut\xE1ria. (vFCPSTRet)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},opcional3:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},pRedBCEfet:{_titulo:"Percentual de redu\xE7\xE3o da base de c\xE1lculo efetiva.",_doc:"Percentual de redu\xE7\xE3o da base de c\xE1lculo efetiva. (pRedBCEfet)",_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vBCEfet:{_titulo:"Valor da base de c\xE1lculo efetiva.",_doc:"Valor da base de c\xE1lculo efetiva. (vBCEfet)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pICMSEfet:{_titulo:"Al\xEDquota do ICMS efetiva.",_doc:"Al\xEDquota do ICMS efetiva. (pICMSEfet)",_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vICMSEfet:{_titulo:"Valor do ICMS efetivo.",_doc:"Valor do ICMS efetivo. (vICMSEfet)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}}},ICMSSN900:{_titulo:"Tributa\xE7\xE3o do ICMS pelo SIMPLES NACIONAL, CRT=1 - Simples Nacional e CSOSN=900",_doc:"Tributa\xE7\xE3o do ICMS pelo SIMPLES NACIONAL, CRT=1 - Simples Nacional e CSOSN=900 (ICMSSN900)",_tipo:"texto",_valorInic:"",orig:{_titulo:"Tipo Origem da mercadoria CST ICMS origem da mercadoria",_doc:"origem da mercadoria: 0 - Nacional  1 - Estrangeira - Importa\xE7\xE3o direta  2 - Estrangeira - Adquirida no mercado interno (orig)",_type:"Torig",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Nacional exceto as indicadas nos c\xF3digos 3, 4, 5 e 8"},{valor:"1",rotulo:"1 - Estrangeira - Importa\xE7\xE3o direta"},{valor:"2",rotulo:"2 - Estrangeira - Adquirida no mercado interno"},{valor:"3",rotulo:"3 - Nacional, conteudo superior 40 % e inferior ou igual a 70 %"},{valor:"4",rotulo:"4 - Nacional, processos produtivos b\xE1sicos"},{valor:"5",rotulo:"5 - Nacional, conteudo inferior 40 %"},{valor:"6",rotulo:"6 - Estrangeira - Importa\xE7\xE3o direta, com similar nacional, lista CAMEX"},{valor:"7",rotulo:"7 - Estrangeira - mercado interno, sem simular, lista CAMEX"},{valor:"8",rotulo:"8 - Nacional, Conte\xFAdo de Importa\xE7\xE3o superior a 70 %"}],_valorInic:"0"},CSOSN:{_titulo:"Tributa\xE7\xE3o pelo ICMS 900 - Outros(v2.0)",_doc:"Tributa\xE7\xE3o pelo ICMS 900 - Outros(v2.0) (CSOSN)",_tipo:"seletor",_enumeration:[{valor:"900",rotulo:"900 - Outros(v2.0"}],_valorInic:"900"},opcional:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},modBC:{_titulo:"Modalidade de determina\xE7\xE3o da BC do ICMS",_doc:"Modalidade de determina\xE7\xE3o da BC do ICMS:  0 - Margem Valor Agregado (%); 1 - Pauta (valor); 2 - Pre\xE7o Tabelado M\xE1ximo (valor); 3 - Valor da Opera\xE7\xE3o. (modBC)",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Margem Valor Agregado (%)"},{valor:"1",rotulo:"1 - Pauta (valor)"},{valor:"2",rotulo:"2 - Pre\xE7o Tabelado M\xE1ximo (valor)"},{valor:"3",rotulo:"3 - Valor da Opera\xE7\xE3o"}],_valorInic:"0"},vBC:{_titulo:"Valor da BC do ICMS",_doc:"Valor da BC do ICMS (vBC)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pRedBC:{_titulo:"Percentual de redu\xE7\xE3o da BC",_doc:"Percentual de redu\xE7\xE3o da BC (pRedBC) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},pICMS:{_titulo:"Al\xEDquota do ICMS",_doc:"Al\xEDquota do ICMS (pICMS)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vICMS:{_titulo:"Valor do ICMS",_doc:"Valor do ICMS (vICMS)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},opcional2:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},modBCST:{_titulo:"Modalidade de determina\xE7\xE3o da BC do ICMS ST",_doc:"Modalidade de determina\xE7\xE3o da BC do ICMS ST: 0 - Pre\xE7o tabelado ou m\xE1ximo  sugerido; 1 - Lista Negativa (valor); 2 - Lista Positiva (valor); 3 - Lista Neutra (valor); 4 - Margem Valor Agregado (%); 5 - Pauta (valor). 6 - Valor da Opera\xE7\xE3o (modBCST)",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - Pre\xE7o tabelado ou m\xE1ximo  sugerido"},{valor:"1",rotulo:"1 - Lista Negativa (valor)"},{valor:"2",rotulo:"2 - Lista Positiva (valor)"},{valor:"3",rotulo:"3 - Lista Neutra (valor)"},{valor:"4",rotulo:"4 - Margem Valor Agregado (%)"},{valor:"5",rotulo:"5 - Pauta (valor)"},{valor:"6",rotulo:"6 - Valor da Opera\xE7\xE3o"}],_valorInic:"0"},pMVAST:{_titulo:"Percentual da Margem de Valor Adicionado ICMS ST",_doc:"Percentual da Margem de Valor Adicionado ICMS ST (pMVAST) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},pRedBCST:{_titulo:"Percentual de redu\xE7\xE3o da BC ICMS ST",_doc:"Percentual de redu\xE7\xE3o da BC ICMS ST (pRedBCST) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vBCST:{_titulo:"Valor da BC do ICMS ST",_doc:"Valor da BC do ICMS ST (vBCST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pICMSST:{_titulo:"Al\xEDquota do ICMS ST",_doc:"Al\xEDquota do ICMS ST (pICMSST)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vICMSST:{_titulo:"Valor do ICMS ST",_doc:"Valor do ICMS ST (vICMSST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},opcional:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},vBCFCPST:{_titulo:"Valor da Base de c\xE1lculo do FCP.",_doc:"Valor da Base de c\xE1lculo do FCP. (vBCFCPST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pFCPST:{_titulo:"Percentual de FCP retido por substitui\xE7\xE3o tribut\xE1ria.",_doc:"Percentual de FCP retido por substitui\xE7\xE3o tribut\xE1ria. (pFCPST)",_pattern:"0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04Opc",_tipo:"decimal",_decimals:"4",_valorInic:0},vFCPST:{_titulo:"Valor do FCP retido por substitui\xE7\xE3o tribut\xE1ria.",_doc:"Valor do FCP retido por substitui\xE7\xE3o tribut\xE1ria. (vFCPST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}}},opcional3:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},pCredSN:{_titulo:"Al\xEDquota aplic\xE1vel de c\xE1lculo do cr\xE9dito (Simples Nacional).",_doc:"Al\xEDquota aplic\xE1vel de c\xE1lculo do cr\xE9dito (Simples Nacional). (pCredSN)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vCredICMSSN:{_titulo:"Valor cr\xE9dito do ICMS que pode ser aproveitado nos termos do art. 23 da LC 123 (Simples Nacional)",_doc:"Valor cr\xE9dito do ICMS que pode ser aproveitado nos termos do art. 23 da LC 123 (Simples Nacional) (vCredICMSSN)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}}}}},IPI:{_titulo:"IPI",_doc:"IPI (Opcional)",_opcional:!0,_type:"TIpi",_tipo:"texto",_valorInic:"",visivel:{_titulo:"IPI",_doc:"IPI (Opcional)",_valorInic:""},CNPJProd:{_titulo:"CNPJ do produtor da mercadoria",_doc:"CNPJ do produtor da mercadoria, quando diferente do emitente. Somente para os casos de exporta\xE7\xE3o direta ou indireta. (CNPJProd) (Opcional)",_opcional:!0,_pattern:"[0-9]{14}",_type:"TCnpj",_tipo:"texto",_maxLength:14,_valorInic:""},cSelo:{_titulo:"C\xF3digo do selo de controle do IPI",_doc:"C\xF3digo do selo de controle do IPI (cSelo) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},qSelo:{_titulo:"Quantidade de selo de controle do IPI",_doc:"Quantidade de selo de controle do IPI (qSelo) (Opcional)",_opcional:!0,_pattern:"[0-9]{1,12}",_tipo:"texto",_valorInic:""},cEnq:{_titulo:"C\xF3digo de Enquadramento Legal do IPI (tabela a ser criada pela RFB)",_doc:"C\xF3digo de Enquadramento Legal do IPI (tabela a ser criada pela RFB) (cEnq)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:3,_valorInic:""},escolhas:{_titulo:"",_doc:"",_tipo:"texto",_valorInic:"",valor_escolha:{_titulo:"",_doc:"",_valorInic:""},IPITrib:{_titulo:"IPITrib",_doc:"IPITrib",_tipo:"texto",_valorInic:"",CST:{_titulo:"C\xF3digo da Situa\xE7\xE3o Tribut\xE1ria do IPI",_doc:"C\xF3digo da Situa\xE7\xE3o Tribut\xE1ria do IPI: 00-Entrada com recupera\xE7\xE3o de cr\xE9dito 49 - Outras entradas 50-Sa\xEDda tributada 99-Outras sa\xEDdas (CST)",_tipo:"seletor",_enumeration:[{valor:"00",rotulo:"00 - Entrada com recupera\xE7\xE3o de cr\xE9dito"},{valor:"49",rotulo:"49 - Outras entradas"},{valor:"50",rotulo:"50 - Sa\xEDda tributada"},{valor:"99",rotulo:"99 - Outras sa\xEDdas"}],_valorInic:"00"},escolhas:{_titulo:"",_doc:"",_tipo:"texto",_valorInic:"",valor_escolha:{_titulo:"",_doc:"",_valorInic:""},opcao1:{vBC:{_titulo:"Valor da BC do IPI",_doc:"Valor da BC do IPI (vBC)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pIPI:{_titulo:"Al\xEDquota do IPI",_doc:"Al\xEDquota do IPI (pIPI)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0}},opcao2:{qUnid:{_titulo:"Quantidade total na unidade padr\xE3o para tributa\xE7\xE3o",_doc:"Quantidade total na unidade padr\xE3o para tributa\xE7\xE3o (qUnid)",_pattern:"0|0\\.[0-9]{1,4}|[1-9]{1}[0-9]{0,11}|[1-9]{1}[0-9]{0,11}(\\.[0-9]{1,4})?",_type:"TDec_1204v",_tipo:"decimal",_decimals:"4",_valorInic:0},vUnid:{_titulo:"Valor por Unidade Tribut\xE1vel. Informar o valor do imposto Pauta por unidade de medida.",_doc:"Valor por Unidade Tribut\xE1vel. Informar o valor do imposto Pauta por unidade de medida. (vUnid)",_pattern:"0|0\\.[0-9]{4}|[1-9]{1}[0-9]{0,10}(\\.[0-9]{4})?",_type:"TDec_1104",_tipo:"decimal",_decimals:"4",_valorInic:0}}},vIPI:{_titulo:"Valor do IPI",_doc:"Valor do IPI (vIPI)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},IPINT:{_titulo:"IPINT",_doc:"IPINT",_tipo:"texto",_valorInic:"",CST:{_titulo:"C\xF3digo da Situa\xE7\xE3o Tribut\xE1ria do IPI",_doc:"C\xF3digo da Situa\xE7\xE3o Tribut\xE1ria do IPI: 01-Entrada tributada com al\xEDquota zero 02-Entrada isenta 03-Entrada n\xE3o-tributada 04-Entrada imune 05-Entrada com suspens\xE3o 51-Sa\xEDda tributada com al\xEDquota zero 52-Sa\xEDda isenta 53-Sa\xEDda n\xE3o-tributada 54-Sa\xEDda imune 55-Sa\xEDda com suspens\xE3o (CST)",_tipo:"seletor",_enumeration:[{valor:"01",rotulo:"01 - Entrada tributada com al\xEDquota zero"},{valor:"02",rotulo:"02 - Entrada isenta"},{valor:"03",rotulo:"03 - Entrada n\xE3o-tributada"},{valor:"04",rotulo:"04 - Entrada imune"},{valor:"05",rotulo:"05 - Entrada com suspens\xE3o"},{valor:"51",rotulo:"51 - Sa\xEDda tributada com al\xEDquota zero"},{valor:"52",rotulo:"52 - Sa\xEDda isenta"},{valor:"53",rotulo:"53 - Sa\xEDda n\xE3o-tributada"},{valor:"54",rotulo:"54 - Sa\xEDda imune"},{valor:"55",rotulo:"55 - Sa\xEDda com suspens\xE3o"}],_valorInic:"01"}}}},II:{_titulo:"Dados do Imposto de Importa\xE7\xE3o",_doc:"Dados do Imposto de Importa\xE7\xE3o (II) (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Dados do Imposto de Importa\xE7\xE3o",_doc:"Dados do Imposto de Importa\xE7\xE3o (II) (Opcional)",_valorInic:""},vBC:{_titulo:"Base da BC do Imposto de Importa\xE7\xE3o",_doc:"Base da BC do Imposto de Importa\xE7\xE3o (vBC)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vDespAdu:{_titulo:"Valor das despesas aduaneiras",_doc:"Valor das despesas aduaneiras (vDespAdu)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vII:{_titulo:"Valor do Imposto de Importa\xE7\xE3o",_doc:"Valor do Imposto de Importa\xE7\xE3o (vII)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vIOF:{_titulo:"Valor do Imposto sobre Opera\xE7\xF5es Financeiras",_doc:"Valor do Imposto sobre Opera\xE7\xF5es Financeiras (vIOF)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}}},opcao2:{IPI:{_titulo:"IPI",_doc:"IPI (Opcional)",_opcional:!0,_type:"TIpi",_tipo:"texto",_valorInic:"",visivel:{_titulo:"IPI",_doc:"IPI (Opcional)",_valorInic:""},CNPJProd:{_titulo:"CNPJ do produtor da mercadoria, quando diferente do emitente",_doc:"CNPJ do produtor da mercadoria, quando diferente do emitente. Somente para os casos de exporta\xE7\xE3o direta ou indireta. (CNPJProd) (Opcional)",_opcional:!0,_pattern:"[0-9]{14}",_type:"TCnpj",_tipo:"texto",_maxLength:14,_valorInic:""},cSelo:{_titulo:"C\xF3digo do selo de controle do IPI",_doc:"C\xF3digo do selo de controle do IPI (cSelo) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},qSelo:{_titulo:"Quantidade de selo de controle do IPI",_doc:"Quantidade de selo de controle do IPI (qSelo) (Opcional)",_opcional:!0,_pattern:"[0-9]{1,12}",_tipo:"texto",_valorInic:""},cEnq:{_titulo:"C\xF3digo de Enquadramento Legal do IPI",_doc:"C\xF3digo de Enquadramento Legal do IPI (tabela a ser criada pela RFB) (cEnq)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:3,_valorInic:""},escolhas:{_titulo:"",_doc:"",_tipo:"texto",_valorInic:"",valor_escolha:{_titulo:"",_doc:"",_valorInic:""},IPITrib:{_titulo:"IPITrib",_doc:"IPITrib",_tipo:"texto",_valorInic:"",CST:{_titulo:"C\xF3digo da Situa\xE7\xE3o Tribut\xE1ria do IPI",_doc:"C\xF3digo da Situa\xE7\xE3o Tribut\xE1ria do IPI: 00-Entrada com recupera\xE7\xE3o de cr\xE9dito 49 - Outras entradas 50-Sa\xEDda tributada 99-Outras sa\xEDdas (CST)",_tipo:"seletor",_enumeration:[{valor:"00",rotulo:"00 - Entrada com recupera\xE7\xE3o de cr\xE9dito"},{valor:"49",rotulo:"49 - Outras entradas"},{valor:"50",rotulo:"50 - Sa\xEDda tributada"},{valor:"99",rotulo:"99 - Outras sa\xEDdas"}],_valorInic:"00"},escolhas:{_titulo:"",_doc:"",_tipo:"texto",_valorInic:"",valor_escolha:{_titulo:"",_doc:"",_valorInic:""},opcao1:{vBC:{_titulo:"Valor da BC do IPI",_doc:"Valor da BC do IPI (vBC)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pIPI:{_titulo:"Al\xEDquota do IPI",_doc:"Al\xEDquota do IPI (pIPI)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0}},opcao2:{qUnid:{_titulo:"Quantidade total na unidade padr\xE3o para tributa\xE7\xE3o",_doc:"Quantidade total na unidade padr\xE3o para tributa\xE7\xE3o (qUnid)",_pattern:"0|0\\.[0-9]{1,4}|[1-9]{1}[0-9]{0,11}|[1-9]{1}[0-9]{0,11}(\\.[0-9]{1,4})?",_type:"TDec_1204v",_tipo:"decimal",_decimals:"4",_valorInic:0},vUnid:{_titulo:"Valor por Unidade Tribut\xE1vel",_doc:"Valor por Unidade Tribut\xE1vel. Informar o valor do imposto Pauta por unidade de medida. (vUnid)",_pattern:"0|0\\.[0-9]{4}|[1-9]{1}[0-9]{0,10}(\\.[0-9]{4})?",_type:"TDec_1104",_tipo:"decimal",_decimals:"4",_valorInic:0}}},vIPI:{_titulo:"Valor do IPI",_doc:"Valor do IPI (vIPI)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},IPINT:{_titulo:"IPINT",_doc:"IPINT",_tipo:"texto",_valorInic:"",CST:{_titulo:"C\xF3digo da Situa\xE7\xE3o Tribut\xE1ria do IPI",_doc:"C\xF3digo da Situa\xE7\xE3o Tribut\xE1ria do IPI: 01-Entrada tributada com al\xEDquota zero 02-Entrada isenta 03-Entrada n\xE3o-tributada 04-Entrada imune 05-Entrada com suspens\xE3o 51-Sa\xEDda tributada com al\xEDquota zero 52-Sa\xEDda isenta 53-Sa\xEDda n\xE3o-tributada 54-Sa\xEDda imune 55-Sa\xEDda com suspens\xE3o (CST)",_tipo:"seletor",_enumeration:[{valor:"01",rotulo:"01 - Entrada tributada com al\xEDquota zero"},{valor:"02",rotulo:"02 - Entrada isenta"},{valor:"03",rotulo:"03 - Entrada n\xE3o-tributada"},{valor:"04",rotulo:"04 - Entrada imune"},{valor:"05",rotulo:"05 - Entrada com suspens\xE3o"},{valor:"51",rotulo:"51 - Sa\xEDda tributada com al\xEDquota zero"},{valor:"52",rotulo:"52 - Sa\xEDda isenta"},{valor:"53",rotulo:"53 - Sa\xEDda n\xE3o-tributada"},{valor:"54",rotulo:"54 - Sa\xEDda imune"},{valor:"55",rotulo:"55 - Sa\xEDda com suspens\xE3o"}],_valorInic:"01"}}}},ISSQN:{_titulo:"ISSQN",_doc:"ISSQN (ISSQN)",_tipo:"texto",_valorInic:"",visivel:{_titulo:"ISSQN",_doc:"ISSQN",_valorInic:""},vBC:{_titulo:"Valor da BC do ISSQN",_doc:"Valor da BC do ISSQN (vBC)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vAliq:{_titulo:"Al\xEDquota do ISSQN",_doc:"Al\xEDquota do ISSQN (vAliq)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vISSQN:{_titulo:"Valor da do ISSQN",_doc:"Valor da do ISSQN (vISSQN)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},cMunFG:{_titulo:"Informar o munic\xEDpio de ocorr\xEAncia do fato gerador do ISSQN",_doc:"Informar o munic\xEDpio de ocorr\xEAncia do fato gerador do ISSQN. Utilizar a Tabela do IBGE (Anexo VII - Tabela de UF, Munic\xEDpio e Pa\xEDs). \u201CAten\xE7\xE3o, n\xE3o vincular com os campos B12, C10 ou E10\u201D v2.0 (cMunFG)",_pattern:"[0-9]{7}",_type:"TCodMunIBGE",_tipo:"texto",_valorInic:""},cListServ:{_titulo:"Informar o Item da lista de servi\xE7os da LC 116/03 em que se classifica o servi\xE7o.",_doc:"Informar o Item da lista de servi\xE7os da LC 116/03 em que se classifica o servi\xE7o. (cListServ)",_type:"TCListServ",_tipo:"seletor",_enumeration:[{valor:"01.01",rotulo:"01.01"},{valor:"01.02",rotulo:"01.02"},{valor:"01.03",rotulo:"01.03"},{valor:"01.04",rotulo:"01.04"},{valor:"01.05",rotulo:"01.05"},{valor:"01.06",rotulo:"01.06"},{valor:"01.07",rotulo:"01.07"},{valor:"01.08",rotulo:"01.08"},{valor:"01.09",rotulo:"01.09"},{valor:"02.01",rotulo:"02.01"},{valor:"03.02",rotulo:"03.02"},{valor:"03.03",rotulo:"03.03"},{valor:"03.04",rotulo:"03.04"},{valor:"03.05",rotulo:"03.05"},{valor:"04.01",rotulo:"04.01"},{valor:"04.02",rotulo:"04.02"},{valor:"04.03",rotulo:"04.03"},{valor:"04.04",rotulo:"04.04"},{valor:"04.05",rotulo:"04.05"},{valor:"04.06",rotulo:"04.06"},{valor:"04.07",rotulo:"04.07"},{valor:"04.08",rotulo:"04.08"},{valor:"04.09",rotulo:"04.09"},{valor:"04.10",rotulo:"04.10"},{valor:"04.11",rotulo:"04.11"},{valor:"04.12",rotulo:"04.12"},{valor:"04.13",rotulo:"04.13"},{valor:"04.14",rotulo:"04.14"},{valor:"04.15",rotulo:"04.15"},{valor:"04.16",rotulo:"04.16"},{valor:"04.17",rotulo:"04.17"},{valor:"04.18",rotulo:"04.18"},{valor:"04.19",rotulo:"04.19"},{valor:"04.20",rotulo:"04.20"},{valor:"04.21",rotulo:"04.21"},{valor:"04.22",rotulo:"04.22"},{valor:"04.23",rotulo:"04.23"},{valor:"05.01",rotulo:"05.01"},{valor:"05.02",rotulo:"05.02"},{valor:"05.03",rotulo:"05.03"},{valor:"05.04",rotulo:"05.04"},{valor:"05.05",rotulo:"05.05"},{valor:"05.06",rotulo:"05.06"},{valor:"05.07",rotulo:"05.07"},{valor:"05.08",rotulo:"05.08"},{valor:"05.09",rotulo:"05.09"},{valor:"06.01",rotulo:"06.01"},{valor:"06.02",rotulo:"06.02"},{valor:"06.03",rotulo:"06.03"},{valor:"06.04",rotulo:"06.04"},{valor:"06.05",rotulo:"06.05"},{valor:"06.06",rotulo:"06.06"},{valor:"07.01",rotulo:"07.01"},{valor:"07.02",rotulo:"07.02"},{valor:"07.03",rotulo:"07.03"},{valor:"07.04",rotulo:"07.04"},{valor:"07.05",rotulo:"07.05"},{valor:"07.06",rotulo:"07.06"},{valor:"07.07",rotulo:"07.07"},{valor:"07.08",rotulo:"07.08"},{valor:"07.09",rotulo:"07.09"},{valor:"07.10",rotulo:"07.10"},{valor:"07.11",rotulo:"07.11"},{valor:"07.12",rotulo:"07.12"},{valor:"07.13",rotulo:"07.13"},{valor:"07.16",rotulo:"07.16"},{valor:"07.17",rotulo:"07.17"},{valor:"07.18",rotulo:"07.18"},{valor:"07.19",rotulo:"07.19"},{valor:"07.20",rotulo:"07.20"},{valor:"07.21",rotulo:"07.21"},{valor:"07.22",rotulo:"07.22"},{valor:"08.01",rotulo:"08.01"},{valor:"08.02",rotulo:"08.02"},{valor:"09.01",rotulo:"09.01"},{valor:"09.02",rotulo:"09.02"},{valor:"09.03",rotulo:"09.03"},{valor:"10.01",rotulo:"10.01"},{valor:"10.02",rotulo:"10.02"},{valor:"10.03",rotulo:"10.03"},{valor:"10.04",rotulo:"10.04"},{valor:"10.05",rotulo:"10.05"},{valor:"10.06",rotulo:"10.06"},{valor:"10.07",rotulo:"10.07"},{valor:"10.08",rotulo:"10.08"},{valor:"10.09",rotulo:"10.09"},{valor:"10.10",rotulo:"10.10"},{valor:"11.01",rotulo:"11.01"},{valor:"11.02",rotulo:"11.02"},{valor:"11.03",rotulo:"11.03"},{valor:"11.04",rotulo:"11.04"},{valor:"12.01",rotulo:"12.01"},{valor:"12.02",rotulo:"12.02"},{valor:"12.03",rotulo:"12.03"},{valor:"12.04",rotulo:"12.04"},{valor:"12.05",rotulo:"12.05"},{valor:"12.06",rotulo:"12.06"},{valor:"12.07",rotulo:"12.07"},{valor:"12.08",rotulo:"12.08"},{valor:"12.09",rotulo:"12.09"},{valor:"12.10",rotulo:"12.10"},{valor:"12.11",rotulo:"12.11"},{valor:"12.12",rotulo:"12.12"},{valor:"12.13",rotulo:"12.13"},{valor:"12.14",rotulo:"12.14"},{valor:"12.15",rotulo:"12.15"},{valor:"12.16",rotulo:"12.16"},{valor:"12.17",rotulo:"12.17"},{valor:"13.02",rotulo:"13.02"},{valor:"13.03",rotulo:"13.03"},{valor:"13.04",rotulo:"13.04"},{valor:"13.05",rotulo:"13.05"},{valor:"14.01",rotulo:"14.01"},{valor:"14.02",rotulo:"14.02"},{valor:"14.03",rotulo:"14.03"},{valor:"14.04",rotulo:"14.04"},{valor:"14.05",rotulo:"14.05"},{valor:"14.06",rotulo:"14.06"},{valor:"14.07",rotulo:"14.07"},{valor:"14.08",rotulo:"14.08"},{valor:"14.09",rotulo:"14.09"},{valor:"14.10",rotulo:"14.10"},{valor:"14.11",rotulo:"14.11"},{valor:"14.12",rotulo:"14.12"},{valor:"14.13",rotulo:"14.13"},{valor:"14.14",rotulo:"14.14"},{valor:"15.01",rotulo:"15.01"},{valor:"15.02",rotulo:"15.02"},{valor:"15.03",rotulo:"15.03"},{valor:"15.04",rotulo:"15.04"},{valor:"15.05",rotulo:"15.05"},{valor:"15.06",rotulo:"15.06"},{valor:"15.07",rotulo:"15.07"},{valor:"15.08",rotulo:"15.08"},{valor:"15.09",rotulo:"15.09"},{valor:"15.10",rotulo:"15.10"},{valor:"15.11",rotulo:"15.11"},{valor:"15.12",rotulo:"15.12"},{valor:"15.13",rotulo:"15.13"},{valor:"15.14",rotulo:"15.14"},{valor:"15.15",rotulo:"15.15"},{valor:"15.16",rotulo:"15.16"},{valor:"15.17",rotulo:"15.17"},{valor:"15.18",rotulo:"15.18"},{valor:"16.01",rotulo:"16.01"},{valor:"16.02",rotulo:"16.02"},{valor:"17.01",rotulo:"17.01"},{valor:"17.02",rotulo:"17.02"},{valor:"17.03",rotulo:"17.03"},{valor:"17.04",rotulo:"17.04"},{valor:"17.05",rotulo:"17.05"},{valor:"17.06",rotulo:"17.06"},{valor:"17.08",rotulo:"17.08"},{valor:"17.09",rotulo:"17.09"},{valor:"17.10",rotulo:"17.10"},{valor:"17.11",rotulo:"17.11"},{valor:"17.12",rotulo:"17.12"},{valor:"17.13",rotulo:"17.13"},{valor:"17.14",rotulo:"17.14"},{valor:"17.15",rotulo:"17.15"},{valor:"17.16",rotulo:"17.16"},{valor:"17.17",rotulo:"17.17"},{valor:"17.18",rotulo:"17.18"},{valor:"17.19",rotulo:"17.19"},{valor:"17.20",rotulo:"17.20"},{valor:"17.21",rotulo:"17.21"},{valor:"17.22",rotulo:"17.22"},{valor:"17.23",rotulo:"17.23"},{valor:"17.24",rotulo:"17.24"},{valor:"17.25",rotulo:"17.25"},{valor:"18.01",rotulo:"18.01"},{valor:"19.01",rotulo:"19.01"},{valor:"20.01",rotulo:"20.01"},{valor:"20.02",rotulo:"20.02"},{valor:"20.03",rotulo:"20.03"},{valor:"21.01",rotulo:"21.01"},{valor:"22.01",rotulo:"22.01"},{valor:"23.01",rotulo:"23.01"},{valor:"24.01",rotulo:"24.01"},{valor:"25.01",rotulo:"25.01"},{valor:"25.02",rotulo:"25.02"},{valor:"25.03",rotulo:"25.03"},{valor:"25.04",rotulo:"25.04"},{valor:"25.05",rotulo:"25.05"},{valor:"26.01",rotulo:"26.01"},{valor:"27.01",rotulo:"27.01"},{valor:"28.01",rotulo:"28.01"},{valor:"29.01",rotulo:"29.01"},{valor:"30.01",rotulo:"30.01"},{valor:"31.01",rotulo:"31.01"},{valor:"32.01",rotulo:"32.01"},{valor:"33.01",rotulo:"33.01"},{valor:"34.01",rotulo:"34.01"},{valor:"35.01",rotulo:"35.01"},{valor:"36.01",rotulo:"36.01"},{valor:"37.01",rotulo:"37.01"},{valor:"38.01",rotulo:"38.01"},{valor:"39.01",rotulo:"39.01"},{valor:"40.01",rotulo:"40.01"}],_valorInic:"01.01"},vDeducao:{_titulo:"Valor dedu\xE7\xE3o para redu\xE7\xE3o da base de c\xE1lculo",_doc:"Valor dedu\xE7\xE3o para redu\xE7\xE3o da base de c\xE1lculo (vDeducao) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},vOutro:{_titulo:"Valor outras reten\xE7\xF5es",_doc:"Valor outras reten\xE7\xF5es (vOutro) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},vDescIncond:{_titulo:"Valor desconto incondicionado",_doc:"Valor desconto incondicionado (vDescIncond) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},vDescCond:{_titulo:"Valor desconto condicionado",_doc:"Valor desconto condicionado (vDescCond) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},vISSRet:{_titulo:"Valor Reten\xE7\xE3o ISS",_doc:"Valor Reten\xE7\xE3o ISS (vISSRet) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},indISS:{_titulo:"Exibilidade do ISS:1-Exig\xEDvel;2-N\xE3o incidente;3-Isen\xE7\xE3o;4-Exporta\xE7\xE3o;5-Imunidade;6-Exig.Susp. Judicial;7-Exig.Susp. ADM",_doc:"Exibilidade do ISS:1-Exig\xEDvel;2-N\xE3o incidente;3-Isen\xE7\xE3o;4-Exporta\xE7\xE3o;5-Imunidade;6-Exig.Susp. Judicial;7-Exig.Susp. ADM (indISS)",_tipo:"seletor",_enumeration:[{valor:"1",rotulo:"1 - Exig\xEDvel"},{valor:"2",rotulo:"2 - N\xE3o incidente"},{valor:"3",rotulo:"3 - Isen\xE7\xE3o"},{valor:"4",rotulo:"4 - Exporta\xE7\xE3o"},{valor:"5",rotulo:"5 - Imunidade"},{valor:"6",rotulo:"6 - Exig.Susp. Judicial"},{valor:"7",rotulo:"7 - Exig.Susp. ADM"}],_valorInic:"1"},cServico:{_titulo:"C\xF3digo do servi\xE7o prestado dentro do munic\xEDpio",_doc:"C\xF3digo do servi\xE7o prestado dentro do munic\xEDpio (cServico) (Opcional)",_opcional:!0,_tipo:"texto",_minLength:1,_maxLength:20,_valorInic:""},cMun:{_titulo:"C\xF3digo do Munic\xEDpio de Incid\xEAncia do Imposto",_doc:"C\xF3digo do Munic\xEDpio de Incid\xEAncia do Imposto (cMun) (Opcional)",_opcional:!0,_pattern:"[0-9]{7}",_type:"TCodMunIBGE",_tipo:"texto",_valorInic:""},cPais:{_titulo:"C\xF3digo de Pais",_doc:"C\xF3digo de Pais (cPais) (Opcional)",_opcional:!0,_pattern:"[0-9]{1,4}",_tipo:"texto",_valorInic:""},nProcesso:{_titulo:"N\xFAmero do Processo administrativo ou judicial de suspen\xE7\xE3o do processo",_doc:"N\xFAmero do Processo administrativo ou judicial de suspen\xE7\xE3o do processo (nProcesso) (Opcional)",_opcional:!0,_tipo:"texto",_minLength:1,_maxLength:30,_valorInic:""},indIncentivo:{_titulo:"Indicador de Incentivo Fiscal. 1=Sim; 2=N\xE3o",_doc:"Indicador de Incentivo Fiscal. 1=Sim; 2=N\xE3o (indIncentivo)",_tipo:"seletor",_enumeration:[{valor:"1",rotulo:"1 - Sim"},{valor:"2",rotulo:"2 - N\xE3o"}],_valorInic:"1"}}}},PIS:{_titulo:"Dados do PIS",_doc:"Dados do PIS (PIS) (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",escolhas:{_titulo:"Dados do PIS",_doc:"Dados do PIS (PIS) (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",valor_escolha:{_titulo:"Dados do PIS",_doc:"Dados do PIS (PIS) (Opcional)",_valorInic:""},PISAliq:{_titulo:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do PIS",_doc:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do PIS.  01 - Opera\xE7\xE3o Tribut\xE1vel - Base de C\xE1lculo = Valor da Opera\xE7\xE3o Al\xEDquota Normal (Cumulativo/N\xE3o Cumulativo); 02 - Opera\xE7\xE3o Tribut\xE1vel - Base de Calculo = Valor da Opera\xE7\xE3o (Al\xEDquota Diferenciada); (PISAliq)",_tipo:"texto",_valorInic:"",CST:{_titulo:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do PIS",_doc:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do PIS.  01 - Opera\xE7\xE3o Tribut\xE1vel - Base de C\xE1lculo = Valor da Opera\xE7\xE3o Al\xEDquota Normal (Cumulativo/N\xE3o Cumulativo); 02 - Opera\xE7\xE3o Tribut\xE1vel - Base de Calculo = Valor da Opera\xE7\xE3o (Al\xEDquota Diferenciada); (CST)",_tipo:"seletor",_enumeration:[{valor:"01",rotulo:"01 - Opera\xE7\xE3o Tribut\xE1vel - Base de C\xE1lculo = Valor da Opera\xE7\xE3o Al\xEDquota Normal (Cumulativo/N\xE3o Cumulativo)"},{valor:"02",rotulo:"02 - Opera\xE7\xE3o Tribut\xE1vel - Base de Calculo = Valor da Opera\xE7\xE3o (Al\xEDquota Diferenciada)"}],_valorInic:"01"},vBC:{_titulo:"Valor da BC do PIS",_doc:"Valor da BC do PIS (vBC)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pPIS:{_titulo:"Al\xEDquota do PIS (em percentual)",_doc:"Al\xEDquota do PIS (em percentual) (pPIS)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vPIS:{_titulo:"Valor do PIS",_doc:"Valor do PIS (vPIS)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},PISQtde:{_titulo:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do PIS",_doc:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do PIS. 03 - Opera\xE7\xE3o Tribut\xE1vel - Base de Calculo = Quantidade Vendida x Al\xEDquota por Unidade de Produto; (PISQtde)",_tipo:"texto",_valorInic:"",CST:{_titulo:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do PIS",_doc:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do PIS. 03 - Opera\xE7\xE3o Tribut\xE1vel - Base de Calculo = Quantidade Vendida x Al\xEDquota por Unidade de Produto; (CST)",_tipo:"seletor",_enumeration:[{valor:"03",rotulo:"03 - Opera\xE7\xE3o Tribut\xE1vel - Base de Calculo = Quantidade Vendida x Al\xEDquota por Unidade de Produto"}],_valorInic:"03"},qBCProd:{_titulo:"Quantidade Vendida ",_doc:"Quantidade Vendida  (qBCProd)",_pattern:"0|0\\.[0-9]{1,4}|[1-9]{1}[0-9]{0,11}|[1-9]{1}[0-9]{0,11}(\\.[0-9]{1,4})?",_type:"TDec_1204v",_tipo:"decimal",_decimals:"4",_valorInic:0},vAliqProd:{_titulo:"Al\xEDquota do PIS (em reais)",_doc:"Al\xEDquota do PIS (em reais) (vAliqProd)",_pattern:"0|0\\.[0-9]{1,4}|[1-9]{1}[0-9]{0,10}|[1-9]{1}[0-9]{0,10}(\\.[0-9]{1,4})?",_type:"TDec_1104v",_tipo:"decimal",_decimals:"4",_valorInic:0},vPIS:{_titulo:"Valor do PIS",_doc:"Valor do PIS (vPIS)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},PISNT:{_titulo:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do PIS",_doc:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do PIS. 04 - Opera\xE7\xE3o Tribut\xE1vel - Tributa\xE7\xE3o Monof\xE1sica - (Al\xEDquota Zero); 06 - Opera\xE7\xE3o Tribut\xE1vel - Al\xEDquota Zero; 07 - Opera\xE7\xE3o Isenta da contribui\xE7\xE3o; 08 - Opera\xE7\xE3o Sem Incid\xEAncia da contribui\xE7\xE3o; 09 - Opera\xE7\xE3o com suspens\xE3o da contribui\xE7\xE3o; (PISNT)",_tipo:"texto",_valorInic:"",CST:{_titulo:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do PIS",_doc:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do PIS. 04 - Opera\xE7\xE3o Tribut\xE1vel - Tributa\xE7\xE3o Monof\xE1sica - (Al\xEDquota Zero); 05 - Opera\xE7\xE3o Tribut\xE1vel (ST); 06 - Opera\xE7\xE3o Tribut\xE1vel - Al\xEDquota Zero; 07 - Opera\xE7\xE3o Isenta da contribui\xE7\xE3o; 08 - Opera\xE7\xE3o Sem Incid\xEAncia da contribui\xE7\xE3o; 09 - Opera\xE7\xE3o com suspens\xE3o da contribui\xE7\xE3o; (CST)",_tipo:"seletor",_enumeration:[{valor:"04",rotulo:"04 - Opera\xE7\xE3o Tribut\xE1vel - Tributa\xE7\xE3o Monof\xE1sica - (Al\xEDquota Zero)"},{valor:"05",rotulo:"05 - Opera\xE7\xE3o Tribut\xE1vel (ST)"},{valor:"06",rotulo:"06 - Opera\xE7\xE3o Tribut\xE1vel - Al\xEDquota Zero"},{valor:"07",rotulo:"07 - Opera\xE7\xE3o Isenta da contribui\xE7\xE3o"},{valor:"08",rotulo:"08 - Opera\xE7\xE3o Sem Incid\xEAncia da contribui\xE7\xE3o"},{valor:"09",rotulo:"09 - Opera\xE7\xE3o com suspens\xE3o da contribui\xE7\xE3o"}],_valorInic:"04"}},PISOutr:{_titulo:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do PIS",_doc:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do PIS. 99 - Outras Opera\xE7\xF5es. (PISOutr)",_tipo:"texto",_valorInic:"",CST:{_titulo:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do PIS",_doc:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do PIS. 99 - Outras Opera\xE7\xF5es. (CST)",_tipo:"seletor",_enumeration:[{valor:"49",rotulo:"49"},{valor:"50",rotulo:"50"},{valor:"51",rotulo:"51"},{valor:"52",rotulo:"52"},{valor:"53",rotulo:"53"},{valor:"54",rotulo:"54"},{valor:"55",rotulo:"55"},{valor:"56",rotulo:"56"},{valor:"60",rotulo:"60"},{valor:"61",rotulo:"61"},{valor:"62",rotulo:"62"},{valor:"63",rotulo:"63"},{valor:"64",rotulo:"64"},{valor:"65",rotulo:"65"},{valor:"66",rotulo:"66"},{valor:"67",rotulo:"67"},{valor:"70",rotulo:"70"},{valor:"71",rotulo:"71"},{valor:"72",rotulo:"72"},{valor:"73",rotulo:"73"},{valor:"74",rotulo:"74"},{valor:"75",rotulo:"75"},{valor:"98",rotulo:"98"},{valor:"99",rotulo:"99 - Outras Opera\xE7\xF5es"}],_valorInic:"49"},escolhas:{_titulo:"",_doc:"",_tipo:"texto",_valorInic:"",valor_escolha:{_titulo:"",_doc:"",_valorInic:""},opcao1:{vBC:{_titulo:"Valor da BC do PIS",_doc:"Valor da BC do PIS (vBC)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pPIS:{_titulo:"Al\xEDquota do PIS (em percentual)",_doc:"Al\xEDquota do PIS (em percentual) (pPIS)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0}},opcao2:{qBCProd:{_titulo:"Quantidade Vendida",_doc:"Quantidade Vendida (qBCProd)",_pattern:"0|0\\.[0-9]{1,4}|[1-9]{1}[0-9]{0,11}|[1-9]{1}[0-9]{0,11}(\\.[0-9]{1,4})?",_type:"TDec_1204v",_tipo:"decimal",_decimals:"4",_valorInic:0},vAliqProd:{_titulo:"Al\xEDquota do PIS (em reais)",_doc:"Al\xEDquota do PIS (em reais) (vAliqProd)",_pattern:"0|0\\.[0-9]{1,4}|[1-9]{1}[0-9]{0,10}|[1-9]{1}[0-9]{0,10}(\\.[0-9]{1,4})?",_type:"TDec_1104v",_tipo:"decimal",_decimals:"4",_valorInic:0}}},vPIS:{_titulo:"Valor do PIS",_doc:"Valor do PIS (vPIS)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}}}},PISST:{_titulo:"Dados do PIS Substitui\xE7\xE3o Tribut\xE1ria",_doc:"Dados do PIS Substitui\xE7\xE3o Tribut\xE1ria (PISST) (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Dados do PIS Substitui\xE7\xE3o Tribut\xE1ria",_doc:"Dados do PIS Substitui\xE7\xE3o Tribut\xE1ria (PISST) (Opcional)",_valorInic:""},escolhas:{_titulo:"",_doc:"",_tipo:"texto",_valorInic:"",valor_escolha:{_titulo:"",_doc:"",_valorInic:""},opcao1:{vBC:{_titulo:"Valor da BC do PIS ST",_doc:"Valor da BC do PIS ST (vBC)",_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},pPIS:{_titulo:"Al\xEDquota do PIS ST (em percentual)",_doc:"Al\xEDquota do PIS ST (em percentual) (pPIS)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0}},opcao2:{qBCProd:{_titulo:"Quantidade Vendida",_doc:"Quantidade Vendida (qBCProd)",_pattern:"0|0\\.[0-9]{1,4}|[1-9]{1}[0-9]{0,11}|[1-9]{1}[0-9]{0,11}(\\.[0-9]{4})?",_type:"TDec_1204",_tipo:"decimal",_decimals:"4",_valorInic:0},vAliqProd:{_titulo:"Al\xEDquota do PIS ST (em reais)",_doc:"Al\xEDquota do PIS ST (em reais) (vAliqProd)",_pattern:"0|0\\.[0-9]{4}|[1-9]{1}[0-9]{0,10}(\\.[0-9]{4})?",_type:"TDec_1104",_tipo:"decimal",_decimals:"4",_valorInic:0}}},vPIS:{_titulo:"Valor do PIS ST",_doc:"Valor do PIS ST (vPIS)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},indSomaPISST:{_titulo:"Indica se o valor do PISST comp\xF5e o valor total da NF-e;",_doc:"Indica se o valor do PISST comp\xF5e o valor total da NF-e; (indSomaPISST) (Opcional)",_opcional:!0,_tipo:"seletor",_enumeration:[{valor:"",rotulo:"N\xE3o se aplica"},{valor:"0",rotulo:"0"},{valor:"1",rotulo:"1"}],_valorInic:""}},COFINS:{_titulo:"Dados do COFINS",_doc:"Dados do COFINS (COFINS) (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",escolhas:{_titulo:"Dados do COFINS",_doc:"Dados do COFINS (COFINS) (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",valor_escolha:{_titulo:"Dados do COFINS",_doc:"Dados do COFINS (COFINS) (Opcional)",_valorInic:""},COFINSAliq:{_titulo:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do COFINS.  01 - Opera\xE7\xE3o Tribut\xE1vel - Base de C\xE1lculo = Valor da Opera\xE7\xE3o Al\xEDquota Normal (Cumulativo/N\xE3o Cumulativo); 02 - Opera\xE7\xE3o Tribut\xE1vel - Base de Calculo = Valor da Opera\xE7\xE3o (Al\xEDquota Diferenciada);",_doc:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do COFINS.  01 - Opera\xE7\xE3o Tribut\xE1vel - Base de C\xE1lculo = Valor da Opera\xE7\xE3o Al\xEDquota Normal (Cumulativo/N\xE3o Cumulativo); 02 - Opera\xE7\xE3o Tribut\xE1vel - Base de Calculo = Valor da Opera\xE7\xE3o (Al\xEDquota Diferenciada); (COFINSAliq)",_tipo:"texto",_valorInic:"",CST:{_titulo:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do COFINS",_doc:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do COFINS.  01 - Opera\xE7\xE3o Tribut\xE1vel - Base de C\xE1lculo = Valor da Opera\xE7\xE3o Al\xEDquota Normal (Cumulativo/N\xE3o Cumulativo); 02 - Opera\xE7\xE3o Tribut\xE1vel - Base de Calculo = Valor da Opera\xE7\xE3o (Al\xEDquota Diferenciada); (CST)",_tipo:"seletor",_enumeration:[{valor:"01",rotulo:"01 - Opera\xE7\xE3o Tribut\xE1vel - Base de C\xE1lculo = Valor da Opera\xE7\xE3o Al\xEDquota Normal (Cumulativo/N\xE3o Cumulativo)"},{valor:"02",rotulo:"02 - Opera\xE7\xE3o Tribut\xE1vel - Base de Calculo = Valor da Opera\xE7\xE3o (Al\xEDquota Diferenciada)"}],_valorInic:"01"},vBC:{_titulo:"Valor da BC do COFINS",_doc:"Valor da BC do COFINS (vBC)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pCOFINS:{_titulo:"Al\xEDquota do COFINS (em percentual)",_doc:"Al\xEDquota do COFINS (em percentual) (pCOFINS)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vCOFINS:{_titulo:"Valor do COFINS",_doc:"Valor do COFINS (vCOFINS)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},COFINSQtde:{_titulo:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do COFINS",_doc:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do COFINS. 03 - Opera\xE7\xE3o Tribut\xE1vel - Base de Calculo = Quantidade Vendida x Al\xEDquota por Unidade de Produto; (COFINSQtde)",_tipo:"texto",_valorInic:"",CST:{_titulo:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do COFINS. 03 - Opera\xE7\xE3o Tribut\xE1vel - Base de Calculo = Quantidade Vendida x Al\xEDquota por Unidade de Produto;",_doc:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do COFINS. 03 - Opera\xE7\xE3o Tribut\xE1vel - Base de Calculo = Quantidade Vendida x Al\xEDquota por Unidade de Produto; (CST)",_tipo:"seletor",_enumeration:[{valor:"03",rotulo:"03 - Opera\xE7\xE3o Tribut\xE1vel - Base de Calculo = Quantidade Vendida x Al\xEDquota por Unidade de Produto"}],_valorInic:"03"},qBCProd:{_titulo:"Quantidade Vendida",_doc:"Quantidade Vendida (qBCProd)",_pattern:"0|0\\.[0-9]{1,4}|[1-9]{1}[0-9]{0,11}|[1-9]{1}[0-9]{0,11}(\\.[0-9]{1,4})?",_type:"TDec_1204v",_tipo:"decimal",_decimals:"4",_valorInic:0},vAliqProd:{_titulo:"Al\xEDquota do COFINS (em reais)",_doc:"Al\xEDquota do COFINS (em reais) (vAliqProd)",_pattern:"0|0\\.[0-9]{1,4}|[1-9]{1}[0-9]{0,10}|[1-9]{1}[0-9]{0,10}(\\.[0-9]{1,4})?",_type:"TDec_1104v",_tipo:"decimal",_decimals:"4",_valorInic:0},vCOFINS:{_titulo:"Valor do COFINS",_doc:"Valor do COFINS (vCOFINS)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},COFINSNT:{_titulo:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do COFINS",_doc:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do COFINS: 04 - Opera\xE7\xE3o Tribut\xE1vel - Tributa\xE7\xE3o Monof\xE1sica - (Al\xEDquota Zero); 06 - Opera\xE7\xE3o Tribut\xE1vel - Al\xEDquota Zero; 07 - Opera\xE7\xE3o Isenta da contribui\xE7\xE3o; 08 - Opera\xE7\xE3o Sem Incid\xEAncia da contribui\xE7\xE3o; 09 - Opera\xE7\xE3o com suspens\xE3o da contribui\xE7\xE3o; (COFINSNT)",_tipo:"texto",_valorInic:"",CST:{_titulo:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do COFINS",_doc:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do COFINS: 04 - Opera\xE7\xE3o Tribut\xE1vel - Tributa\xE7\xE3o Monof\xE1sica - (Al\xEDquota Zero); 05 - Opera\xE7\xE3o Tribut\xE1vel (ST); 06 - Opera\xE7\xE3o Tribut\xE1vel - Al\xEDquota Zero; 07 - Opera\xE7\xE3o Isenta da contribui\xE7\xE3o; 08 - Opera\xE7\xE3o Sem Incid\xEAncia da contribui\xE7\xE3o; 09 - Opera\xE7\xE3o com suspens\xE3o da contribui\xE7\xE3o; (CST)",_tipo:"seletor",_enumeration:[{valor:"04",rotulo:"04 - Opera\xE7\xE3o Tribut\xE1vel - Tributa\xE7\xE3o Monof\xE1sica - (Al\xEDquota Zero)"},{valor:"05",rotulo:"05 - Opera\xE7\xE3o Tribut\xE1vel (ST)"},{valor:"06",rotulo:"06 - Opera\xE7\xE3o Tribut\xE1vel - Al\xEDquota Zero"},{valor:"07",rotulo:"07 - Opera\xE7\xE3o Isenta da contribui\xE7\xE3o"},{valor:"08",rotulo:"08 - Opera\xE7\xE3o Sem Incid\xEAncia da contribui\xE7\xE3o"},{valor:"09",rotulo:"09 - Opera\xE7\xE3o com suspens\xE3o da contribui\xE7\xE3o"}],_valorInic:"04"}},COFINSOutr:{_titulo:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do COFINS",_doc:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do COFINS: 49 - Outras Opera\xE7\xF5es de Sa\xEDda 50 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada Exclusivamente a Receita Tributada no Mercado Interno 51 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada Exclusivamente a Receita N\xE3o Tributada no Mercado Interno 52 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada Exclusivamente a Receita de Exporta\xE7\xE3o 53 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada a Receitas Tributadas e N\xE3o-Tributadas no Mercado Interno 54 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada a Receitas Tributadas no Mercado Interno e de Exporta\xE7\xE3o 55 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada a Receitas N\xE3o-Tributadas no Mercado Interno e de Exporta\xE7\xE3o 56 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada a Receitas Tributadas e N\xE3o-Tributadas no Mercado Interno, e de Exporta\xE7\xE3o 60 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada Exclusivamente a Receita Tributada no Mercado Interno 61 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada Exclusivamente a Receita N\xE3o-Tributada no Mercado Interno 62 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada Exclusivamente a Receita de Exporta\xE7\xE3o 63 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada a Receitas Tributadas e N\xE3o-Tributadas no Mercado Interno 64 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada a Receitas Tributadas no Mercado Interno e de Exporta\xE7\xE3o 65 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada a Receitas N\xE3o-Tributadas no Mercado Interno e de Exporta\xE7\xE3o 66 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada a Receitas Tributadas e N\xE3o-Tributadas no Mercado Interno, e de Exporta\xE7\xE3o 67 - Cr\xE9dito Presumido - Outras Opera\xE7\xF5es 70 - Opera\xE7\xE3o de Aquisi\xE7\xE3o sem Direito a Cr\xE9dito 71 - Opera\xE7\xE3o de Aquisi\xE7\xE3o com Isen\xE7\xE3o 72 - Opera\xE7\xE3o de Aquisi\xE7\xE3o com Suspens\xE3o 73 - Opera\xE7\xE3o de Aquisi\xE7\xE3o a Al\xEDquota Zero 74 - Opera\xE7\xE3o de Aquisi\xE7\xE3o sem Incid\xEAncia da Contribui\xE7\xE3o 75 - Opera\xE7\xE3o de Aquisi\xE7\xE3o por Substitui\xE7\xE3o Tribut\xE1ria 98 - Outras Opera\xE7\xF5es de Entrada 99 - Outras Opera\xE7\xF5es. (COFINSOutr)",_tipo:"texto",_valorInic:"",CST:{_titulo:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do COFINS",_doc:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do COFINS: 49 - Outras Opera\xE7\xF5es de Sa\xEDda 50 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada Exclusivamente a Receita Tributada no Mercado Interno 51 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada Exclusivamente a Receita N\xE3o Tributada no Mercado Interno 52 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada Exclusivamente a Receita de Exporta\xE7\xE3o 53 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada a Receitas Tributadas e N\xE3o-Tributadas no Mercado Interno 54 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada a Receitas Tributadas no Mercado Interno e de Exporta\xE7\xE3o 55 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada a Receitas N\xE3o-Tributadas no Mercado Interno e de Exporta\xE7\xE3o 56 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada a Receitas Tributadas e N\xE3o-Tributadas no Mercado Interno, e de Exporta\xE7\xE3o 60 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada Exclusivamente a Receita Tributada no Mercado Interno 61 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada Exclusivamente a Receita N\xE3o-Tributada no Mercado Interno 62 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada Exclusivamente a Receita de Exporta\xE7\xE3o 63 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada a Receitas Tributadas e N\xE3o-Tributadas no Mercado Interno 64 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada a Receitas Tributadas no Mercado Interno e de Exporta\xE7\xE3o 65 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada a Receitas N\xE3o-Tributadas no Mercado Interno e de Exporta\xE7\xE3o 66 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada a Receitas Tributadas e N\xE3o-Tributadas no Mercado Interno, e de Exporta\xE7\xE3o 67 - Cr\xE9dito Presumido - Outras Opera\xE7\xF5es 70 - Opera\xE7\xE3o de Aquisi\xE7\xE3o sem Direito a Cr\xE9dito 71 - Opera\xE7\xE3o de Aquisi\xE7\xE3o com Isen\xE7\xE3o 72 - Opera\xE7\xE3o de Aquisi\xE7\xE3o com Suspens\xE3o 73 - Opera\xE7\xE3o de Aquisi\xE7\xE3o a Al\xEDquota Zero 74 - Opera\xE7\xE3o de Aquisi\xE7\xE3o sem Incid\xEAncia da Contribui\xE7\xE3o 75 - Opera\xE7\xE3o de Aquisi\xE7\xE3o por Substitui\xE7\xE3o Tribut\xE1ria 98 - Outras Opera\xE7\xF5es de Entrada 99 - Outras Opera\xE7\xF5es. (CST)",_tipo:"seletor",_enumeration:[{valor:"49",rotulo:"49 - Outras Opera\xE7\xF5es de Sa\xEDda"},{valor:"50",rotulo:"50 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada Exclusivamente a Receita Tributada no Mercado Interno"},{valor:"51",rotulo:"51 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada Exclusivamente a Receita N\xE3o Tributada no Mercado Interno"},{valor:"52",rotulo:"52 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada Exclusivamente a Receita de Exporta\xE7\xE3o"},{valor:"53",rotulo:"53 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada a Receitas Tributadas e N\xE3o-Tributadas no Mercado Interno"},{valor:"54",rotulo:"54 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada a Receitas Tributadas no Mercado Interno e de Exporta\xE7\xE3o"},{valor:"55",rotulo:"55 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada a Receitas N\xE3o-Tributadas no Mercado Interno e de Exporta\xE7\xE3o"},{valor:"56",rotulo:"56 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada a Receitas Tributadas e N\xE3o-Tributadas no Mercado Interno, e de Exporta\xE7\xE3o"},{valor:"60",rotulo:"60 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada Exclusivamente a Receita Tributada no Mercado Interno"},{valor:"61",rotulo:"61 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada Exclusivamente a Receita N\xE3o-Tributada no Mercado Interno"},{valor:"62",rotulo:"62 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada Exclusivamente a Receita de Exporta\xE7\xE3o"},{valor:"63",rotulo:"63 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada a Receitas Tributadas e N\xE3o-Tributadas no Mercado Interno"},{valor:"64",rotulo:"64 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada a Receitas Tributadas no Mercado Interno e de Exporta\xE7\xE3o"},{valor:"65",rotulo:"65 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada a Receitas N\xE3o-Tributadas no Mercado Interno e de Exporta\xE7\xE3o"},{valor:"66",rotulo:"66 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada a Receitas Tributadas e N\xE3o-Tributadas no Mercado Interno, e de Exporta\xE7\xE3o"},{valor:"67",rotulo:"67 - Cr\xE9dito Presumido - Outras Opera\xE7\xF5es"},{valor:"70",rotulo:"70 - Opera\xE7\xE3o de Aquisi\xE7\xE3o sem Direito a Cr\xE9dito"},{valor:"71",rotulo:"71 - Opera\xE7\xE3o de Aquisi\xE7\xE3o com Isen\xE7\xE3o"},{valor:"72",rotulo:"72 - Opera\xE7\xE3o de Aquisi\xE7\xE3o com Suspens\xE3o"},{valor:"73",rotulo:"73 - Opera\xE7\xE3o de Aquisi\xE7\xE3o a Al\xEDquota Zero"},{valor:"74",rotulo:"74 - Opera\xE7\xE3o de Aquisi\xE7\xE3o sem Incid\xEAncia da Contribui\xE7\xE3o"},{valor:"75",rotulo:"75 - Opera\xE7\xE3o de Aquisi\xE7\xE3o por Substitui\xE7\xE3o Tribut\xE1ria"},{valor:"98",rotulo:"98 - Outras Opera\xE7\xF5es de Entrada"},{valor:"99",rotulo:"99 - Outras Opera\xE7\xF5es"}],_valorInic:"49"},escolhas:{_titulo:"",_doc:"",_tipo:"texto",_valorInic:"",valor_escolha:{_titulo:"",_doc:"",_valorInic:""},opcao1:{vBC:{_titulo:"Valor da BC do COFINS",_doc:"Valor da BC do COFINS (vBC)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pCOFINS:{_titulo:"Al\xEDquota do COFINS (em percentual)",_doc:"Al\xEDquota do COFINS (em percentual) (pCOFINS)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0}},opcao2:{qBCProd:{_titulo:"Quantidade Vendida",_doc:"Quantidade Vendida (qBCProd)",_pattern:"0|0\\.[0-9]{1,4}|[1-9]{1}[0-9]{0,11}|[1-9]{1}[0-9]{0,11}(\\.[0-9]{1,4})?",_type:"TDec_1204v",_tipo:"decimal",_decimals:"4",_valorInic:0},vAliqProd:{_titulo:"Al\xEDquota do COFINS (em reais)",_doc:"Al\xEDquota do COFINS (em reais) (vAliqProd)",_pattern:"0|0\\.[0-9]{1,4}|[1-9]{1}[0-9]{0,10}|[1-9]{1}[0-9]{0,10}(\\.[0-9]{1,4})?",_type:"TDec_1104v",_tipo:"decimal",_decimals:"4",_valorInic:0}}},vCOFINS:{_titulo:"Valor do COFINS",_doc:"Valor do COFINS (vCOFINS)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}}}},COFINSST:{_titulo:"Dados do COFINS da Substitui\xE7\xE3o Tributaria;",_doc:"Dados do COFINS da Substitui\xE7\xE3o Tributaria; (COFINSST) (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Dados do COFINS da Substitui\xE7\xE3o Tributaria;",_doc:"Dados do COFINS da Substitui\xE7\xE3o Tributaria; (COFINSST) (Opcional)",_valorInic:""},escolhas:{_titulo:"",_doc:"",_tipo:"texto",_valorInic:"",valor_escolha:{_titulo:"",_doc:"",_valorInic:""},opcao1:{vBC:{_titulo:"Valor da BC do COFINS ST",_doc:"Valor da BC do COFINS ST (vBC)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pCOFINS:{_titulo:"Al\xEDquota do COFINS ST(em percentual)",_doc:"Al\xEDquota do COFINS ST(em percentual) (pCOFINS)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0}},opcao2:{qBCProd:{_titulo:"Quantidade Vendida",_doc:"Quantidade Vendida (qBCProd)",_pattern:"0|0\\.[0-9]{1,4}|[1-9]{1}[0-9]{0,11}|[1-9]{1}[0-9]{0,11}(\\.[0-9]{4})?",_type:"TDec_1204",_tipo:"decimal",_decimals:"4",_valorInic:0},vAliqProd:{_titulo:"Al\xEDquota do COFINS ST(em reais)",_doc:"Al\xEDquota do COFINS ST(em reais) (vAliqProd)",_pattern:"0|0\\.[0-9]{4}|[1-9]{1}[0-9]{0,10}(\\.[0-9]{4})?",_type:"TDec_1104",_tipo:"decimal",_decimals:"4",_valorInic:0}}},vCOFINS:{_titulo:"Valor do COFINS ST",_doc:"Valor do COFINS ST (vCOFINS)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},indSomaCOFINSST:{_titulo:"Indica se o valor da COFINS ST comp\xF5e o valor total da NFe",_doc:"Indica se o valor da COFINS ST comp\xF5e o valor total da NFe (indSomaCOFINSST) (Opcional)",_opcional:!0,_tipo:"seletor",_enumeration:[{valor:"",rotulo:"N\xE3o se aplica"},{valor:"0",rotulo:"0"},{valor:"1",rotulo:"1"}],_valorInic:""}},ICMSUFDest:{_titulo:"Grupo a ser informado nas vendas interestaduais para consumidor final, n\xE3o contribuinte de ICMS",_doc:"Grupo a ser informado nas vendas interestaduais para consumidor final, n\xE3o contribuinte de ICMS (ICMSUFDest) (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo a ser informado nas vendas interestaduais para consumidor final, n\xE3o contribuinte de ICMS",_doc:"Grupo a ser informado nas vendas interestaduais para consumidor final, n\xE3o contribuinte de ICMS (ICMSUFDest) (Opcional)",_valorInic:""},vBCUFDest:{_titulo:"Valor da Base de C\xE1lculo do ICMS na UF do destinat\xE1rio.",_doc:"Valor da Base de C\xE1lculo do ICMS na UF do destinat\xE1rio. (vBCUFDest)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vBCFCPUFDest:{_titulo:"Valor da Base de C\xE1lculo do FCP na UF do destinat\xE1rio.",_doc:"Valor da Base de C\xE1lculo do FCP na UF do destinat\xE1rio. (vBCFCPUFDest) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pFCPUFDest:{_titulo:"Percentual adicional inserido na al\xEDquota interna da UF de destino, relativo ao FCP naquela UF.",_doc:"Percentual adicional inserido na al\xEDquota interna da UF de destino, relativo ao Fundo de Combate \xE0 Pobreza (FCP) naquela UF. (pFCPUFDest) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},pICMSUFDest:{_titulo:"Al\xEDquota adotada nas opera\xE7\xF5es internas na UF do destinat\xE1rio para o produto / mercadoria.",_doc:"Al\xEDquota adotada nas opera\xE7\xF5es internas na UF do destinat\xE1rio para o produto / mercadoria. (pICMSUFDest)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},pICMSInter:{_titulo:"Al\xEDquota interestadual das UF envolvidas",_doc:"Al\xEDquota interestadual das UF envolvidas: - 4% al\xEDquota interestadual para produtos importados; - 7% para os Estados de origem do Sul e Sudeste (exceto ES), destinado para os Estados do Norte e Nordeste  ou ES; - 12% para os demais casos. (pICMSInter)",_tipo:"seletor",_enumeration:[{valor:"4.00",rotulo:"4,00 %"},{valor:"7.00",rotulo:"7,00 %"},{valor:"12.00",rotulo:"12,00 %"}],_valorInic:"4.00"},pICMSInterPart:{_titulo:"Percentual de partilha para a UF do destinat\xE1rio",_doc:"Percentual de partilha para a UF do destinat\xE1rio: - 40% em 2016; - 60% em 2017; - 80% em 2018; - 100% a partir de 2019. (pICMSInterPart)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vFCPUFDest:{_titulo:"Valor do ICMS relativo ao FCP da UF de destino.",_doc:"Valor do ICMS relativo ao Fundo de Combate \xE0 Pobreza (FCP) da UF de destino. (vFCPUFDest) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vICMSUFDest:{_titulo:"Valor do ICMS de partilha para a UF do destinat\xE1rio.",_doc:"Valor do ICMS de partilha para a UF do destinat\xE1rio. (vICMSUFDest)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vICMSUFRemet:{_titulo:"Valor do ICMS de partilha para a UF do remetente",_doc:"Valor do ICMS de partilha para a UF do remetente. Nota: A partir de 2019, este valor ser\xE1 zero. (vICMSUFRemet)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}}},impostoDevol:{_titulo:"impostoDevol",_doc:"impostoDevol (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"impostoDevol",_doc:"impostoDevol (Opcional)",_valorInic:""},pDevol:{_titulo:"Percentual de mercadoria devolvida",_doc:"Percentual de mercadoria devolvida (pDevol)",_pattern:"0(\\.[0-9]{2})?|100(\\.00)?|[1-9]{1}[0-9]{0,1}(\\.[0-9]{2})?",_type:"TDec_0302Max100",_tipo:"decimal",_decimals:"2",_valorInic:0},IPI:{_titulo:"Informa\xE7\xE3o de IPI devolvido",_doc:"Informa\xE7\xE3o de IPI devolvido (IPI)",_tipo:"texto",_valorInic:"",vIPIDevol:{_titulo:"Valor do IPI devolvido",_doc:"Valor do IPI devolvido (vIPIDevol)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}}},infAdProd:{_titulo:"Informa\xE7\xF5es adicionais do produto (norma referenciada, informa\xE7\xF5es complementares, etc)",_doc:"Informa\xE7\xF5es adicionais do produto (norma referenciada, informa\xE7\xF5es complementares, etc) (infAdProd) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:500,_valorInic:""}}},total:{_titulo:"Dados dos totais da NF-e",_doc:"Dados dos totais da NF-e (total)",_tipo:"texto",_valorInic:"",ICMSTot:{_titulo:"Totais referentes ao ICMS",_doc:"Totais referentes ao ICMS (ICMSTot)",_tipo:"texto",_valorInic:"",vBC:{_titulo:"BC do ICMS",_doc:"BC do ICMS (vBC)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vICMS:{_titulo:"Valor Total do ICMS",_doc:"Valor Total do ICMS (vICMS)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vICMSDeson:{_titulo:"Valor Total do ICMS desonerado",_doc:"Valor Total do ICMS desonerado (vICMSDeson)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vFCPUFDest:{_titulo:"Valor total do ICMS relativo ao FCP para a UF de destino.",_doc:"Valor total do ICMS relativo ao Fundo de Combate \xE0 Pobreza (FCP) para a UF de destino. (vFCPUFDest) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vICMSUFDest:{_titulo:"Valor total do ICMS de partilha para a UF do destinat\xE1rio",_doc:"Valor total do ICMS de partilha para a UF do destinat\xE1rio (vICMSUFDest) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vICMSUFRemet:{_titulo:"Valor total do ICMS de partilha para a UF do remetente",_doc:"Valor total do ICMS de partilha para a UF do remetente (vICMSUFRemet) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vFCP:{_titulo:"Valor Total do FCP",_doc:"Valor Total do FCP (Fundo de Combate \xE0 Pobreza). (vFCP)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vBCST:{_titulo:"BC do ICMS ST",_doc:"BC do ICMS ST (vBCST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vST:{_titulo:"Valor Total do ICMS ST",_doc:"Valor Total do ICMS ST (vST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vFCPST:{_titulo:"Valor Total do FCP retido por substitui\xE7\xE3o tribut\xE1ria.",_doc:"Valor Total do FCP (Fundo de Combate \xE0 Pobreza) retido por substitui\xE7\xE3o tribut\xE1ria. (vFCPST)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vFCPSTRet:{_titulo:"Valor Total do FCP retido anteriormente por substitui\xE7\xE3o tribut\xE1ria.",_doc:"Valor Total do FCP (Fundo de Combate \xE0 Pobreza) retido anteriormente por substitui\xE7\xE3o tribut\xE1ria. (vFCPSTRet)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vProd:{_titulo:"Valor Total dos produtos e servi\xE7os",_doc:"Valor Total dos produtos e servi\xE7os (vProd)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vFrete:{_titulo:"Valor Total do Frete",_doc:"Valor Total do Frete (vFrete)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vSeg:{_titulo:"Valor Total do Seguro",_doc:"Valor Total do Seguro (vSeg)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vDesc:{_titulo:"Valor Total do Desconto",_doc:"Valor Total do Desconto (vDesc)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vII:{_titulo:"Valor Total do II",_doc:"Valor Total do II (vII)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vIPI:{_titulo:"Valor Total do IPI",_doc:"Valor Total do IPI (vIPI)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vIPIDevol:{_titulo:"Valor Total do IPI devolvido",_doc:"Valor Total do IPI devolvido. Deve ser informado quando preenchido o Grupo Tributos Devolvidos na emiss\xE3o de nota finNFe=4 (devolu\xE7\xE3o) nas opera\xE7\xF5es com n\xE3o contribuintes do IPI. Corresponde ao total da soma dos campos id: UA04. (vIPIDevol)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vPIS:{_titulo:"Valor do PIS",_doc:"Valor do PIS (vPIS)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vCOFINS:{_titulo:"Valor do COFINS",_doc:"Valor do COFINS (vCOFINS)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vOutro:{_titulo:"Outras Despesas acess\xF3rias",_doc:"Outras Despesas acess\xF3rias (vOutro)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vNF:{_titulo:"Valor Total da NF-e",_doc:"Valor Total da NF-e (vNF)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vTotTrib:{_titulo:"Valor estimado total de impostos federais, estaduais e municipais",_doc:"Valor estimado total de impostos federais, estaduais e municipais (vTotTrib) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},ISSQNtot:{_titulo:"Totais referentes ao ISSQN",_doc:"Totais referentes ao ISSQN (ISSQNtot) (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Totais referentes ao ISSQN",_doc:"Totais referentes ao ISSQN (ISSQNtot) (Opcional)",_valorInic:""},vServ:{_titulo:"Valor Total dos Servi\xE7os sob n\xE3o-incid\xEAncia ou n\xE3o tributados pelo ICMS",_doc:"Valor Total dos Servi\xE7os sob n\xE3o-incid\xEAncia ou n\xE3o tributados pelo ICMS (vServ) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},vBC:{_titulo:"Base de C\xE1lculo do ISS",_doc:"Base de C\xE1lculo do ISS (vBC) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},vISS:{_titulo:"Valor Total do ISS",_doc:"Valor Total do ISS (vISS) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},vPIS:{_titulo:"Valor do PIS sobre servi\xE7os",_doc:"Valor do PIS sobre servi\xE7os (vPIS) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},vCOFINS:{_titulo:"Valor do COFINS sobre servi\xE7os",_doc:"Valor do COFINS sobre servi\xE7os (vCOFINS) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},dCompet:{_titulo:"Data da presta\xE7\xE3o do servi\xE7o  (AAAA-MM-DD)",_doc:"Data da presta\xE7\xE3o do servi\xE7o  (AAAA-MM-DD) (dCompet)",_pattern:"(((20(([02468][048])|([13579][26]))-02-29))|(20[0-9][0-9])-((((0[1-9])|(1[0-2]))-((0[1-9])|(1\\d)|(2[0-8])))|((((0[13578])|(1[02]))-31)|(((0[1,3-9])|(1[0-2]))-(29|30)))))",_type:"TData",_tipo:"data",_valorInic:""},vDeducao:{_titulo:"Valor dedu\xE7\xE3o para redu\xE7\xE3o da base de c\xE1lculo",_doc:"Valor dedu\xE7\xE3o para redu\xE7\xE3o da base de c\xE1lculo (vDeducao) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},vOutro:{_titulo:"Valor outras reten\xE7\xF5es",_doc:"Valor outras reten\xE7\xF5es (vOutro) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},vDescIncond:{_titulo:"Valor desconto incondicionado",_doc:"Valor desconto incondicionado (vDescIncond) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},vDescCond:{_titulo:"Valor desconto condicionado",_doc:"Valor desconto condicionado (vDescCond) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},vISSRet:{_titulo:"Valor Total Reten\xE7\xE3o ISS",_doc:"Valor Total Reten\xE7\xE3o ISS (vISSRet) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},cRegTrib:{_titulo:"C\xF3digo do regime especial de tributa\xE7\xE3o",_doc:"C\xF3digo do regime especial de tributa\xE7\xE3o (cRegTrib) (Opcional)",_opcional:!0,_tipo:"seletor",_enumeration:[{valor:"",rotulo:"N\xE3o se aplica"},{valor:"1",rotulo:"1"},{valor:"2",rotulo:"2"},{valor:"3",rotulo:"3"},{valor:"4",rotulo:"4"},{valor:"5",rotulo:"5"},{valor:"6",rotulo:"6"}],_valorInic:""}},retTrib:{_titulo:"Reten\xE7\xE3o de Tributos Federais",_doc:"Reten\xE7\xE3o de Tributos Federais (retTrib) (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Reten\xE7\xE3o de Tributos Federais",_doc:"Reten\xE7\xE3o de Tributos Federais (retTrib) (Opcional)",_valorInic:""},vRetPIS:{_titulo:"Valor Retido de PIS",_doc:"Valor Retido de PIS (vRetPIS) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},vRetCOFINS:{_titulo:"Valor Retido de COFINS",_doc:"Valor Retido de COFINS (vRetCOFINS) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},vRetCSLL:{_titulo:"Valor Retido de CSLL",_doc:"Valor Retido de CSLL (vRetCSLL) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},vBCIRRF:{_titulo:"Base de C\xE1lculo do IRRF",_doc:"Base de C\xE1lculo do IRRF (vBCIRRF) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},vIRRF:{_titulo:"Valor Retido de IRRF",_doc:"Valor Retido de IRRF (vIRRF) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},vBCRetPrev:{_titulo:"Base de C\xE1lculo da Reten\xE7\xE3o da Previd\xEAncica Social",_doc:"Base de C\xE1lculo da Reten\xE7\xE3o da Previd\xEAncica Social (vBCRetPrev) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0},vRetPrev:{_titulo:"Valor da Reten\xE7\xE3o da Previd\xEAncica Social",_doc:"Valor da Reten\xE7\xE3o da Previd\xEAncica Social (vRetPrev) (Opcional)",_opcional:!0,_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0}}},transp:{_titulo:"Dados dos transportes da NF-e",_doc:"Dados dos transportes da NF-e (transp)",_tipo:"texto",_valorInic:"",modFrete:{_titulo:"Modalidade do frete",_doc:"Modalidade do frete 0- Contrata\xE7\xE3o do Frete por conta do Remetente (CIF); 1- Contrata\xE7\xE3o do Frete por conta do destinat\xE1rio/remetente (FOB); 2- Contrata\xE7\xE3o do Frete por conta de terceiros; 3- Transporte pr\xF3prio por conta do remetente; 4- Transporte pr\xF3prio por conta do destinat\xE1rio; 9- Sem Ocorr\xEAncia de transporte. (modFrete)",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 -  Contrata\xE7\xE3o do Frete por conta do Remetente (CIF)"},{valor:"1",rotulo:"1 -  Contrata\xE7\xE3o do Frete por conta do destinat\xE1rio/remetente (FOB)"},{valor:"2",rotulo:"2 -  Contrata\xE7\xE3o do Frete por conta de terceiros"},{valor:"3",rotulo:"3 -  Transporte pr\xF3prio por conta do remetente"},{valor:"4",rotulo:"4 -  Transporte pr\xF3prio por conta do destinat\xE1rio"},{valor:"9",rotulo:"9 -  Sem Ocorr\xEAncia de transporte"}],_valorInic:"0"},transporta:{_titulo:"Dados do transportador",_doc:"Dados do transportador (transporta) (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Dados do transportador",_doc:"Dados do transportador (transporta) (Opcional)",_valorInic:""},escolhas:{_titulo:"",_doc:" (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",valor_escolha:{_titulo:"",_doc:" (Opcional)",_valorInic:""},CNPJ:{_titulo:"CNPJ do transportador",_doc:"CNPJ do transportador (CNPJ)",_pattern:"[0-9]{14}",_type:"TCnpj",_tipo:"texto",_maxLength:14,_valorInic:""},CPF:{_titulo:"CPF do transportador",_doc:"CPF do transportador (CPF)",_pattern:"[0-9]{11}",_type:"TCpf",_tipo:"texto",_maxLength:11,_valorInic:""}},xNome:{_titulo:"Raz\xE3o Social ou nome do transportador",_doc:"Raz\xE3o Social ou nome do transportador (xNome) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:2,_maxLength:60,_valorInic:""},IE:{_titulo:"Inscri\xE7\xE3o Estadual",_doc:"Inscri\xE7\xE3o Estadual (IE) (Opcional)",_opcional:!0,_pattern:"ISENTO|[0-9]{2,14}",_type:"TIeDest",_tipo:"texto",_maxLength:14,_valorInic:""},xEnder:{_titulo:"Endere\xE7o completo",_doc:"Endere\xE7o completo (xEnder) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},xMun:{_titulo:"Nome do mun\xEDcipio",_doc:"Nome do mun\xEDcipio (xMun) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},UF:{_titulo:"Sigla da UF",_doc:"Sigla da UF (UF) (Opcional)",_opcional:!0,_type:"TUf",_tipo:"seletor",_enumeration:[{valor:"",rotulo:"N\xE3o se aplica"},{valor:"AC",rotulo:"AC"},{valor:"AL",rotulo:"AL"},{valor:"AM",rotulo:"AM"},{valor:"AP",rotulo:"AP"},{valor:"BA",rotulo:"BA"},{valor:"CE",rotulo:"CE"},{valor:"DF",rotulo:"DF"},{valor:"ES",rotulo:"ES"},{valor:"GO",rotulo:"GO"},{valor:"MA",rotulo:"MA"},{valor:"MG",rotulo:"MG"},{valor:"MS",rotulo:"MS"},{valor:"MT",rotulo:"MT"},{valor:"PA",rotulo:"PA"},{valor:"PB",rotulo:"PB"},{valor:"PE",rotulo:"PE"},{valor:"PI",rotulo:"PI"},{valor:"PR",rotulo:"PR"},{valor:"RJ",rotulo:"RJ"},{valor:"RN",rotulo:"RN"},{valor:"RO",rotulo:"RO"},{valor:"RR",rotulo:"RR"},{valor:"RS",rotulo:"RS"},{valor:"SC",rotulo:"SC"},{valor:"SE",rotulo:"SE"},{valor:"SP",rotulo:"SP"},{valor:"TO",rotulo:"TO"},{valor:"EX",rotulo:"EX"}],_valorInic:""}},retTransp:{_titulo:"Dados da reten\xE7\xE3o  ICMS do Transporte",_doc:"Dados da reten\xE7\xE3o  ICMS do Transporte (retTransp) (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Dados da reten\xE7\xE3o  ICMS do Transporte",_doc:"Dados da reten\xE7\xE3o  ICMS do Transporte (retTransp) (Opcional)",_valorInic:""},vServ:{_titulo:"Valor do Servi\xE7o",_doc:"Valor do Servi\xE7o (vServ)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vBCRet:{_titulo:"BC da Reten\xE7\xE3o do ICMS",_doc:"BC da Reten\xE7\xE3o do ICMS (vBCRet)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},pICMSRet:{_titulo:"Al\xEDquota da Reten\xE7\xE3o",_doc:"Al\xEDquota da Reten\xE7\xE3o (pICMSRet)",_pattern:"0|0\\.[0-9]{2,4}|[1-9]{1}[0-9]{0,2}(\\.[0-9]{2,4})?",_type:"TDec_0302a04",_tipo:"decimal",_decimals:"4",_valorInic:0},vICMSRet:{_titulo:"Valor do ICMS Retido",_doc:"Valor do ICMS Retido (vICMSRet)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},CFOP:{_titulo:"C\xF3digo Fiscal de Opera\xE7\xF5es e Presta\xE7\xF5es",_doc:"C\xF3digo Fiscal de Opera\xE7\xF5es e Presta\xE7\xF5es (CFOP)",_pattern:"[1,2,3,5,6,7]{1}[0-9]{3}",_tipo:"texto",_valorInic:""},cMunFG:{_titulo:"C\xF3digo do Munic\xEDpio de Ocorr\xEAncia do Fato Gerador",_doc:"C\xF3digo do Munic\xEDpio de Ocorr\xEAncia do Fato Gerador (utilizar a tabela do IBGE) (cMunFG)",_pattern:"[0-9]{7}",_type:"TCodMunIBGE",_tipo:"texto",_valorInic:""}},escolhas:{_titulo:"",_doc:"",_tipo:"texto",_valorInic:"",valor_escolha:{_titulo:"",_doc:"",_valorInic:""},opcao1:{veicTransp:{_titulo:"Dados do ve\xEDculo",_doc:"Dados do ve\xEDculo (veicTransp) (Opcional)",_opcional:!0,_type:"TVeiculo",_tipo:"texto",_valorInic:"",visivel:{_titulo:"Dados do ve\xEDculo",_doc:"Dados do ve\xEDculo (veicTransp) (Opcional)",_valorInic:""},placa:{_titulo:"Placa do ve\xEDculo",_doc:"Placa do ve\xEDculo (placa)",_opcional:!0,_pattern:"[A-Z]{2,3}[0-9]{4}|[A-Z]{3,4}[0-9]{3}|[A-Z0-9]{7}",_tipo:"texto",_valorInic:""},UF:{_titulo:"Sigla da UF",_doc:"Sigla da UF (UF)",_type:"TUf",_tipo:"seletor",_enumeration:[{valor:"AC",rotulo:"AC"},{valor:"AL",rotulo:"AL"},{valor:"AM",rotulo:"AM"},{valor:"AP",rotulo:"AP"},{valor:"BA",rotulo:"BA"},{valor:"CE",rotulo:"CE"},{valor:"DF",rotulo:"DF"},{valor:"ES",rotulo:"ES"},{valor:"GO",rotulo:"GO"},{valor:"MA",rotulo:"MA"},{valor:"MG",rotulo:"MG"},{valor:"MS",rotulo:"MS"},{valor:"MT",rotulo:"MT"},{valor:"PA",rotulo:"PA"},{valor:"PB",rotulo:"PB"},{valor:"PE",rotulo:"PE"},{valor:"PI",rotulo:"PI"},{valor:"PR",rotulo:"PR"},{valor:"RJ",rotulo:"RJ"},{valor:"RN",rotulo:"RN"},{valor:"RO",rotulo:"RO"},{valor:"RR",rotulo:"RR"},{valor:"RS",rotulo:"RS"},{valor:"SC",rotulo:"SC"},{valor:"SE",rotulo:"SE"},{valor:"SP",rotulo:"SP"},{valor:"TO",rotulo:"TO"},{valor:"EX",rotulo:"EX"}],_valorInic:"AC"},RNTC:{_titulo:"Registro Nacional de Transportador de Carga (ANTT)",_doc:"Registro Nacional de Transportador de Carga (ANTT) (RNTC) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:20,_valorInic:""}},reboque:{_titulo:"Dados do reboque/Dolly",_doc:"Dados do reboque/Dolly (reboque) (Lista)",_opcional:!0,_type:"TVeiculo",_tipo:"texto",_valorInic:"",lista:{placa:{_titulo:"Placa do ve\xEDculo",_doc:"Placa do ve\xEDculo (placa) (Opcional)",_opcional:!0,_pattern:"[A-Z]{2,3}[0-9]{4}|[A-Z]{3,4}[0-9]{3}|[A-Z0-9]{7}",_tipo:"texto",_valorInic:""},UF:{_titulo:"Sigla da UF",_doc:"Sigla da UF (UF)",_type:"TUf",_tipo:"seletor",_enumeration:[{valor:"AC",rotulo:"AC"},{valor:"AL",rotulo:"AL"},{valor:"AM",rotulo:"AM"},{valor:"AP",rotulo:"AP"},{valor:"BA",rotulo:"BA"},{valor:"CE",rotulo:"CE"},{valor:"DF",rotulo:"DF"},{valor:"ES",rotulo:"ES"},{valor:"GO",rotulo:"GO"},{valor:"MA",rotulo:"MA"},{valor:"MG",rotulo:"MG"},{valor:"MS",rotulo:"MS"},{valor:"MT",rotulo:"MT"},{valor:"PA",rotulo:"PA"},{valor:"PB",rotulo:"PB"},{valor:"PE",rotulo:"PE"},{valor:"PI",rotulo:"PI"},{valor:"PR",rotulo:"PR"},{valor:"RJ",rotulo:"RJ"},{valor:"RN",rotulo:"RN"},{valor:"RO",rotulo:"RO"},{valor:"RR",rotulo:"RR"},{valor:"RS",rotulo:"RS"},{valor:"SC",rotulo:"SC"},{valor:"SE",rotulo:"SE"},{valor:"SP",rotulo:"SP"},{valor:"TO",rotulo:"TO"},{valor:"EX",rotulo:"EX"}],_valorInic:"AC"},RNTC:{_titulo:"Registro Nacional de Transportador de Carga (ANTT)",_doc:"Registro Nacional de Transportador de Carga (ANTT) (RNTC) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:20,_valorInic:""}}}},vagao:{_titulo:"Identifica\xE7\xE3o do vag\xE3o",_doc:"Identifica\xE7\xE3o do vag\xE3o (vagao) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:20,_valorInic:""},balsa:{_titulo:"Identifica\xE7\xE3o da balsa",_doc:"Identifica\xE7\xE3o da balsa (balsa) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:20,_valorInic:""}},vol:{_titulo:"Dados dos volumes",_doc:"Dados dos volumes (vol) (Lista)",_opcional:!0,_tipo:"texto",_valorInic:"",lista:{qVol:{_titulo:"Quantidade de volumes transportados",_doc:"Quantidade de volumes transportados (qVol) (Opcional)",_opcional:!0,_pattern:"[0-9]{1,15}",_tipo:"texto",_valorInic:""},esp:{_titulo:"Esp\xE9cie dos volumes transportados",_doc:"Esp\xE9cie dos volumes transportados (esp) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},marca:{_titulo:"Marca dos volumes transportados",_doc:"Marca dos volumes transportados (marca) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},nVol:{_titulo:"Numera\xE7\xE3o dos volumes transportados",_doc:"Numera\xE7\xE3o dos volumes transportados (nVol) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},pesoL:{_titulo:"Peso l\xEDquido (em kg)",_doc:"Peso l\xEDquido (em kg) (pesoL) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{3}|[1-9]{1}[0-9]{0,11}(\\.[0-9]{3})?",_type:"TDec_1203",_tipo:"decimal",_decimals:"3",_valorInic:0},pesoB:{_titulo:"Peso bruto (em kg)",_doc:"Peso bruto (em kg) (pesoB) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{3}|[1-9]{1}[0-9]{0,11}(\\.[0-9]{3})?",_type:"TDec_1203",_tipo:"decimal",_decimals:"3",_valorInic:0},lacres:{_titulo:"lacres",_doc:"lacres (Lista)",_opcional:!0,_tipo:"texto",_valorInic:"",lista:{nLacre:{_titulo:"N\xFAmero dos Lacres",_doc:"N\xFAmero dos Lacres (nLacre)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""}}}}}},cobr:{_titulo:"Dados da cobran\xE7a da NF-e",_doc:"Dados da cobran\xE7a da NF-e (cobr) (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Dados da cobran\xE7a da NF-e",_doc:"Dados da cobran\xE7a da NF-e (cobr) (Opcional)",_valorInic:""},fat:{_titulo:"Dados da fatura",_doc:"Dados da fatura (fat) (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Dados da fatura",_doc:"Dados da fatura (fat) (Opcional)",_valorInic:""},nFat:{_titulo:"N\xFAmero da fatura",_doc:"N\xFAmero da fatura (nFat) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},vOrig:{_titulo:"Valor original da fatura",_doc:"Valor original da fatura (vOrig) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vDesc:{_titulo:"Valor do desconto da fatura",_doc:"Valor do desconto da fatura (vDesc) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vLiq:{_titulo:"Valor l\xEDquido da fatura",_doc:"Valor l\xEDquido da fatura (vLiq) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},dup:{_titulo:"Dados das duplicatas NT 2011/004",_doc:"Dados das duplicatas NT 2011/004 (dup) (Lista)",_opcional:!0,_tipo:"texto",_valorInic:"",lista:{nDup:{_titulo:"N\xFAmero da duplicata",_doc:"N\xFAmero da duplicata (nDup) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},dVenc:{_titulo:"Data de vencimento da duplicata",_doc:"Data de vencimento da duplicata (AAAA-MM-DD) (dVenc) (Opcional)",_opcional:!0,_pattern:"(((20(([02468][048])|([13579][26]))-02-29))|(20[0-9][0-9])-((((0[1-9])|(1[0-2]))-((0[1-9])|(1\\d)|(2[0-8])))|((((0[13578])|(1[02]))-31)|(((0[1,3-9])|(1[0-2]))-(29|30)))))",_type:"TData",_tipo:"data",_valorInic:""},vDup:{_titulo:"Valor da duplicata",_doc:"Valor da duplicata (vDup)",_pattern:"0\\.[0-9]{1}[1-9]{1}|0\\.[1-9]{1}[0-9]{1}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302Opc",_tipo:"decimal",_decimals:"2",_valorInic:0}}}},pag:{_titulo:"Dados de Pagamento. Obrigat\xF3rio apenas para (NFC-e) NT 2012/004",_doc:"Dados de Pagamento. Obrigat\xF3rio apenas para (NFC-e) NT 2012/004 (pag)",_tipo:"texto",_valorInic:"",detPag:{_titulo:"Grupo de detalhamento da forma de pagamento.",_doc:"Grupo de detalhamento da forma de pagamento. (detPag) (Lista)",_tipo:"texto",_valorInic:"",lista:{indPag:{_titulo:"Indicador da Forma de Pagamento:0-Pagamento \xE0 Vista;1-Pagamento \xE0 Prazo;",_doc:"Indicador da Forma de Pagamento:0-Pagamento \xE0 Vista;1-Pagamento \xE0 Prazo; (indPag) (Opcional)",_opcional:!0,_tipo:"seletor",_enumeration:[{valor:"",rotulo:"N\xE3o se aplica"},{valor:"0",rotulo:"0 - Pagamento \xE0 Vista"},{valor:"1",rotulo:"1 - Pagamento \xE0 Prazo"}],_valorInic:""},tPag:{_titulo:"Forma de Pagamento",_doc:"Forma de Pagamento:01-Dinheiro;02-Cheque;03-Cart\xE3o de Cr\xE9dito;04-Cart\xE3o de D\xE9bito;05-Cr\xE9dito Loja;10-Vale Alimenta\xE7\xE3o;11-Vale Refei\xE7\xE3o;12-Vale Presente;13-Vale Combust\xEDvel;14 - Duplicata Mercantil;15 - Boleto Bancario;90 - Sem Pagamento;99 - Outros (tPag)",_tipo:"seletor",_enumeration:[{valor:"01",rotulo:"01 - Dinheiro"},{valor:"02",rotulo:"02 - Cheque"},{valor:"03",rotulo:"03 - Cart\xE3o de Cr\xE9dito"},{valor:"04",rotulo:"04 - Cart\xE3o de D\xE9bito"},{valor:"05",rotulo:"05 - Cr\xE9dito Loja"},{valor:"10",rotulo:"10 - Vale Alimenta\xE7\xE3o"},{valor:"11",rotulo:"11 - Vale Refei\xE7\xE3o"},{valor:"12",rotulo:"12 - Vale Presente"},{valor:"13",rotulo:"13 - Vale Combust\xEDvel"},{valor:"14",rotulo:"14 - Duplicata Mercantil"},{valor:"15",rotulo:"15 - Boleto Bancario"},{valor:"16",rotulo:"16 - Dep\xF3sito Banc\xE1rio"},{valor:"17",rotulo:"17 - Pagamento Instant\xE2neo (PIX)"},{valor:"18",rotulo:"18 - Transfer\xEAncia banc\xE1ria, Carteira Digital"},{valor:"19",rotulo:"19 - Programa de fidelidade, Cashback, Cr\xE9dito Virtual"},{valor:"90",rotulo:"90 - Sem Pagamento"},{valor:"99",rotulo:"99 - Outros"}],_valorInic:"01"},xPag:{_titulo:"Descri\xE7\xE3o do pagamento",_doc:"Descri\xE7\xE3o do pagamento obrigat\xF3ria para meio de pagamento 99 - outros",_opcional:!0,_tipo:"texto",_valorInic:""},vPag:{_titulo:"Valor do Pagamento",_doc:"Valor do Pagamento. Esta tag poder\xE1 ser omitida quando a tag tPag=90 (Sem Pagamento), caso contr\xE1rio dever\xE1 ser preenchida. (vPag)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},card:{_titulo:"Grupo de Cart\xF5es",_doc:"Grupo de Cart\xF5es (card) (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de Cart\xF5es",_doc:"Grupo de Cart\xF5es (card) (Opcional)",_valorInic:""},tpIntegra:{_titulo:"Tipo de Integra\xE7\xE3o do processo de pagamento com o sistema de automa\xE7\xE3o da empresa",_doc:"Tipo de Integra\xE7\xE3o do processo de pagamento com o sistema de automa\xE7\xE3o da empresa/                  1=Pagamento integrado com o sistema de automa\xE7\xE3o da empresa Ex. equipamento TEF , Comercio Eletronico                 2=Pagamento n\xE3o integrado com o sistema de automa\xE7\xE3o da empresa Ex: equipamento POS (tpIntegra)",_tipo:"seletor",_enumeration:[{valor:"1",rotulo:"1 - Pagamento integrado com o sistema de automa\xE7\xE3o da empresa Ex. equipamento TEF , Comercio Eletronico"},{valor:"2",rotulo:"2 - Pagamento n\xE3o integrado com o sistema de automa\xE7\xE3o da empresa Ex: equipamento POS"}],_valorInic:"1"},CNPJ:{_titulo:"CNPJ da institui\xE7\xE3o de pagamento",_doc:"CNPJ da institui\xE7\xE3o de pagamento (CNPJ) (Opcional)",_opcional:!0,_pattern:"[0-9]{14}",_type:"TCnpj",_tipo:"texto",_maxLength:14,_valorInic:""},tBand:{_titulo:"Bandeira da operadora de cart\xE3o de cr\xE9dito/d\xE9bito",_doc:"Bandeira da operadora de cart\xE3o de cr\xE9dito/d\xE9bito:01-Visa; 02-Mastercard; 03-American Express; 04-Sorocred;05-Diners Club;06-Elo;07-Hipercard;08-Aura;09-Cabal;99-Outros (tBand) (Opcional)",_opcional:!0,_tipo:"seletor",_enumeration:[{valor:"",rotulo:"N\xE3o se aplica"},{valor:"01",rotulo:"01-Visa"},{valor:"02",rotulo:"02-Mastercard"},{valor:"03",rotulo:"03-American Express"},{valor:"04",rotulo:"04-Sorocred"},{valor:"05",rotulo:"05 - Diners Club"},{valor:"06",rotulo:"06 - Elo"},{valor:"07",rotulo:"07 - Hipercard"},{valor:"08",rotulo:"08 - Aura"},{valor:"09",rotulo:"09 - Cabal"},{valor:"99",rotulo:"99-Outros"}],_valorInic:""},cAut:{_titulo:"N\xFAmero de autoriza\xE7\xE3o da opera\xE7\xE3o cart\xE3o de cr\xE9dito/d\xE9bito",_doc:"N\xFAmero de autoriza\xE7\xE3o da opera\xE7\xE3o cart\xE3o de cr\xE9dito/d\xE9bito (cAut) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:20,_valorInic:""}}}},vTroco:{_titulo:"Valor do Troco.",_doc:"Valor do Troco. (vTroco) (Opcional)",_opcional:!0,_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},infIntermed:{_titulo:"Grupo de Informa\xE7\xF5es do Intermediador da Transa\xE7\xE3o",_doc:"Grupo de Informa\xE7\xF5es do Intermediador da Transa\xE7\xE3o (infIntermed) (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de Informa\xE7\xF5es do Intermediador da Transa\xE7\xE3o",_doc:"Grupo de Informa\xE7\xF5es do Intermediador da Transa\xE7\xE3o (infIntermed) (Opcional)",_valorInic:""},CNPJ:{_titulo:"CNPJ do Intermediador da Transa\xE7\xE3o (agenciador, plataforma de delivery, marketplace e similar) de servi\xE7os e de neg\xF3cios.",_doc:"CNPJ do Intermediador da Transa\xE7\xE3o (agenciador, plataforma de delivery, marketplace e similar) de servi\xE7os e de neg\xF3cios. (CNPJ)",_pattern:"[0-9]{14}",_type:"TCnpj",_tipo:"texto",_maxLength:14,_valorInic:""},idCadIntTran:{_titulo:"Identificador cadastrado no intermediador",_doc:"Identificador cadastrado no intermediador (idCadIntTran)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:2,_maxLength:60,_valorInic:""}},infAdic:{_titulo:"Informa\xE7\xF5es adicionais da NF-e",_doc:"Informa\xE7\xF5es adicionais da NF-e (infAdic) (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Informa\xE7\xF5es adicionais da NF-e",_doc:"Informa\xE7\xF5es adicionais da NF-e (infAdic) (Opcional)",_valorInic:""},infAdFisco:{_titulo:"Informa\xE7\xF5es adicionais de interesse do Fisco",_doc:"Informa\xE7\xF5es adicionais de interesse do Fisco (infAdFisco) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:2e3,_valorInic:""},infCpl:{_titulo:"Informa\xE7\xF5es complementares de interesse do Contribuinte",_doc:"Informa\xE7\xF5es complementares de interesse do Contribuinte (infCpl) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:5e3,_valorInic:""},obsCont:{_titulo:"Campo de uso livre do contribuinte informar o nome do campo no atributo xCampo e o conte\xFAdo do campo no xTexto",_doc:"Campo de uso livre do contribuinte informar o nome do campo no atributo xCampo e o conte\xFAdo do campo no xTexto (obsCont) (Lista)",_opcional:!0,_tipo:"texto",_valorInic:"",lista:{xTexto:{_titulo:"xTexto",_doc:"xTexto",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""}}},obsFisco:{_titulo:"Campo de uso exclusivo do Fisco informar o nome do campo no atributo xCampo e o conte\xFAdo do campo no xTexto",_doc:"Campo de uso exclusivo do Fisco informar o nome do campo no atributo xCampo e o conte\xFAdo do campo no xTexto (obsFisco) (Lista)",_opcional:!0,_tipo:"texto",_valorInic:"",lista:{xTexto:{_titulo:"xTexto",_doc:"xTexto",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""}}},procRef:{_titulo:"Grupo de informa\xE7\xF5es do  processo referenciado",_doc:"Grupo de informa\xE7\xF5es do  processo referenciado (procRef) (Lista)",_opcional:!0,_tipo:"texto",_valorInic:"",lista:{nProc:{_titulo:"Identificador do processo ou ato concess\xF3rio",_doc:"Identificador do processo ou ato concess\xF3rio (nProc)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},indProc:{_titulo:"Origem do processo",_doc:"Origem do processo, informar com: 0 - SEFAZ; 1 - Justi\xE7a Federal; 2 - Justi\xE7a Estadual; 3 - Secex/RFB; 9 - Outros (indProc)",_tipo:"seletor",_enumeration:[{valor:"0",rotulo:"0 - SEFAZ"},{valor:"1",rotulo:"1 - Justi\xE7a Federal"},{valor:"2",rotulo:"2 - Justi\xE7a Estadual"},{valor:"3",rotulo:"3 - Secex/RFB"},{valor:"9",rotulo:"9 - Outros"}],_valorInic:"0"}}}},exporta:{_titulo:"Informa\xE7\xF5es de exporta\xE7\xE3o",_doc:"Informa\xE7\xF5es de exporta\xE7\xE3o (exporta) (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Informa\xE7\xF5es de exporta\xE7\xE3o",_doc:"Informa\xE7\xF5es de exporta\xE7\xE3o (exporta) (Opcional)",_valorInic:""},UFSaidaPais:{_titulo:"Sigla da UF de Embarque ou de transposi\xE7\xE3o de fronteira",_doc:"Sigla da UF de Embarque ou de transposi\xE7\xE3o de fronteira (UFSaidaPais)",_type:"TUfEmi",_tipo:"seletor",_enumeration:[{valor:"AC",rotulo:"AC"},{valor:"AL",rotulo:"AL"},{valor:"AM",rotulo:"AM"},{valor:"AP",rotulo:"AP"},{valor:"BA",rotulo:"BA"},{valor:"CE",rotulo:"CE"},{valor:"DF",rotulo:"DF"},{valor:"ES",rotulo:"ES"},{valor:"GO",rotulo:"GO"},{valor:"MA",rotulo:"MA"},{valor:"MG",rotulo:"MG"},{valor:"MS",rotulo:"MS"},{valor:"MT",rotulo:"MT"},{valor:"PA",rotulo:"PA"},{valor:"PB",rotulo:"PB"},{valor:"PE",rotulo:"PE"},{valor:"PI",rotulo:"PI"},{valor:"PR",rotulo:"PR"},{valor:"RJ",rotulo:"RJ"},{valor:"RN",rotulo:"RN"},{valor:"RO",rotulo:"RO"},{valor:"RR",rotulo:"RR"},{valor:"RS",rotulo:"RS"},{valor:"SC",rotulo:"SC"},{valor:"SE",rotulo:"SE"},{valor:"SP",rotulo:"SP"},{valor:"TO",rotulo:"TO"}],_valorInic:"AC"},xLocExporta:{_titulo:"Local de Embarque ou de transposi\xE7\xE3o de fronteira",_doc:"Local de Embarque ou de transposi\xE7\xE3o de fronteira (xLocExporta)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},xLocDespacho:{_titulo:"Descri\xE7\xE3o do local de despacho",_doc:"Descri\xE7\xE3o do local de despacho (xLocDespacho) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""}},compra:{_titulo:"Informa\xE7\xF5es de compras  (Nota de Empenho, Pedido e Contrato)",_doc:"Informa\xE7\xF5es de compras  (Nota de Empenho, Pedido e Contrato) (compra) (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Informa\xE7\xF5es de compras  (Nota de Empenho, Pedido e Contrato)",_doc:"Informa\xE7\xF5es de compras  (Nota de Empenho, Pedido e Contrato) (compra) (Opcional)",_valorInic:""},xNEmp:{_titulo:"Informa\xE7\xE3o da Nota de Empenho de compras p\xFAblicas",_doc:"Informa\xE7\xE3o da Nota de Empenho de compras p\xFAblicas (xNEmp) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:22,_valorInic:""},xPed:{_titulo:"Informa\xE7\xE3o do pedido",_doc:"Informa\xE7\xE3o do pedido (xPed) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},xCont:{_titulo:"Informa\xE7\xE3o do contrato",_doc:"Informa\xE7\xE3o do contrato (xCont) (Opcional)",_opcional:!0,_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""}},cana:{_titulo:"Informa\xE7\xF5es de registro aquisi\xE7\xF5es de cana",_doc:"Informa\xE7\xF5es de registro aquisi\xE7\xF5es de cana (cana) (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Informa\xE7\xF5es de registro aquisi\xE7\xF5es de cana",_doc:"Informa\xE7\xF5es de registro aquisi\xE7\xF5es de cana (cana) (Opcional)",_valorInic:""},safra:{_titulo:"Identifica\xE7\xE3o da safra",_doc:"Identifica\xE7\xE3o da safra (safra)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:4,_maxLength:9,_valorInic:""},ref:{_titulo:"M\xEAs e Ano de Refer\xEAncia, formato: MM/AAAA",_doc:"M\xEAs e Ano de Refer\xEAncia, formato: MM/AAAA (ref)",_pattern:"(0[1-9]|1[0-2])([/][2][0-9][0-9][0-9])",_tipo:"texto",_valorInic:""},forDia:{_titulo:"Fornecimentos di\xE1rios",_doc:"Fornecimentos di\xE1rios (forDia) (Lista)",_tipo:"texto",_valorInic:"",lista:{qtde:{_titulo:"Quantidade em quilogramas - peso l\xEDquido",_doc:"Quantidade em quilogramas - peso l\xEDquido (qtde)",_pattern:"0|0\\.[0-9]{1,10}|[1-9]{1}[0-9]{0,10}|[1-9]{1}[0-9]{0,10}(\\.[0-9]{1,10})?",_type:"TDec_1110v",_tipo:"decimal",_decimals:"4",_valorInic:0}}},qTotMes:{_titulo:"Total do m\xEAs",_doc:"Total do m\xEAs (qTotMes)",_pattern:"0|0\\.[0-9]{1,10}|[1-9]{1}[0-9]{0,10}|[1-9]{1}[0-9]{0,10}(\\.[0-9]{1,10})?",_type:"TDec_1110v",_tipo:"decimal",_decimals:"4",_valorInic:0},qTotAnt:{_titulo:"Total Anterior",_doc:"Total Anterior (qTotAnt)",_pattern:"0|0\\.[0-9]{1,10}|[1-9]{1}[0-9]{0,10}|[1-9]{1}[0-9]{0,10}(\\.[0-9]{1,10})?",_type:"TDec_1110v",_tipo:"decimal",_decimals:"4",_valorInic:0},qTotGer:{_titulo:"Total Geral",_doc:"Total Geral (qTotGer)",_pattern:"0|0\\.[0-9]{1,10}|[1-9]{1}[0-9]{0,10}|[1-9]{1}[0-9]{0,10}(\\.[0-9]{1,10})?",_type:"TDec_1110v",_tipo:"decimal",_decimals:"4",_valorInic:0},deduc:{_titulo:"Dedu\xE7\xF5es - Taxas e Contribui\xE7\xF5es",_doc:"Dedu\xE7\xF5es - Taxas e Contribui\xE7\xF5es (deduc) (Lista)",_opcional:!0,_tipo:"texto",_valorInic:"",lista:{xDed:{_titulo:"Descri\xE7\xE3o da Dedu\xE7\xE3o",_doc:"Descri\xE7\xE3o da Dedu\xE7\xE3o (xDed)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:1,_maxLength:60,_valorInic:""},vDed:{_titulo:"valor da dedu\xE7\xE3o",_doc:"valor da dedu\xE7\xE3o (vDed)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}}},vFor:{_titulo:"Valor  dos fornecimentos",_doc:"Valor  dos fornecimentos (vFor)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vTotDed:{_titulo:"Valor Total das Dedu\xE7\xF5es",_doc:"Valor Total das Dedu\xE7\xF5es (vTotDed)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0},vLiqFor:{_titulo:"Valor L\xEDquido dos fornecimentos",_doc:"Valor L\xEDquido dos fornecimentos (vLiqFor)",_pattern:"0|0\\.[0-9]{2}|[1-9]{1}[0-9]{0,12}(\\.[0-9]{2})?",_type:"TDec_1302",_tipo:"decimal",_decimals:"2",_valorInic:0}},infRespTec:{_titulo:"Informa\xE7\xF5es do Respons\xE1vel T\xE9cnico pela emiss\xE3o do DF-e",_doc:"Informa\xE7\xF5es do Respons\xE1vel T\xE9cnico pela emiss\xE3o do DF-e (infRespTec) (Opcional)",_opcional:!0,_type:"TInfRespTec",_tipo:"texto",_valorInic:"",visivel:{_titulo:"Informa\xE7\xF5es do Respons\xE1vel T\xE9cnico pela emiss\xE3o do DF-e",_doc:"Informa\xE7\xF5es do Respons\xE1vel T\xE9cnico pela emiss\xE3o do DF-e (infRespTec) (Opcional)",_valorInic:""},CNPJ:{_titulo:"CNPJ",_doc:"CNPJ (CNPJ)",_pattern:"[0-9]{0}|[0-9]{14}",_type:"TCnpjOpc",_tipo:"texto",_maxLength:14,_valorInic:""},xContato:{_titulo:"Informar o nome da pessoa a ser contatada na empresa desenvolvedora do sistema utilizado na emiss\xE3o do documento fiscal eletr\xF4nico.",_doc:"Informar o nome da pessoa a ser contatada na empresa desenvolvedora do sistema utilizado na emiss\xE3o do documento fiscal eletr\xF4nico. (xContato)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:2,_maxLength:60,_valorInic:""},email:{_titulo:"Informar o e-mail da pessoa a ser contatada na empresa desenvolvedora do sistema.",_doc:"Informar o e-mail da pessoa a ser contatada na empresa desenvolvedora do sistema. (email)",_pattern:"[!-\xFF]{1}[ -\xFF]{0,}[!-\xFF]{1}|[!-\xFF]{1}",_tipo:"texto",_minLength:6,_maxLength:60,_valorInic:""},fone:{_titulo:"Informar o telefone da pessoa a ser contatada na empresa desenvolvedora do sistema",_doc:"Informar o telefone da pessoa a ser contatada na empresa desenvolvedora do sistema. Preencher com o C\xF3digo DDD + n\xFAmero do telefone. (fone)",_pattern:"[0-9]{6,14}",_tipo:"texto",_valorInic:""},opcional:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_opcional:!0,_tipo:"texto",_valorInic:"",visivel:{_titulo:"Grupo de campos",_doc:"Grupo de campos (Opcional)",_valorInic:""},idCSRT:{_titulo:"Identificador do CSRT utilizado para montar o hash do CSRT",_doc:"Identificador do CSRT utilizado para montar o hash do CSRT (idCSRT)",_pattern:"[0-9]{2}",_tipo:"texto",_valorInic:""},hashCSRT:{_titulo:"O hashCSRT \xE9 o resultado da fun\xE7\xE3o hash (SHA-1 - Base64) do CSRT fornecido pelo fisco mais a Chave de Acesso da NFe.",_doc:"O hashCSRT \xE9 o resultado da fun\xE7\xE3o hash (SHA-1 - Base64) do CSRT fornecido pelo fisco mais a Chave de Acesso da NFe. (hashCSRT)",_tipo:"texto",_valorInic:""}}}}};const za=function(e){if(Array.isArray(e))return e.map(t=>za(t));if(typeof e=="object"&&e!==null){const t={};for(const o in e)t[o]=za(e[o]);return t}else return e};function wJ(e){return e.ide._titulo="Dados da NFe",e.ide.cNF._valorInic="00000000",e.ide.natOp._titulo="Natureza da opera\xE7\xE3o",e.ide.natOp._valorInic="Venda",e.ide.mod._titulo="Modelo",e.ide.serie._titulo="S\xE9rie",e.ide.serie._valorInic="1",e.ide.nNF._valorInic="0",e.ide.nNF._pattern=null,e.ide.dhEmi._titulo="Data e Hora de emiss\xE3o",e.ide.dhSaiEnt._titulo="Data e Hora da sa\xEDda/entrada",e.ide.tpNF._titulo="Tipo",e.ide.tpNF._valorInic="1",e.ide.idDest._titulo="Destino",e.ide.cMunFG._valorInic="0000000",e.ide.tpImp._titulo="Formato do DANFE",e.ide.tpImp._valorInic="1",e.ide.tpEmis._titulo="Forma de conting\xEAncia",e.ide.cDV._valorInic="0",e.ide.tpAmb._titulo="Ambiente",e.ide.tpAmb._valorInic="2",e.ide.finNFe._titulo="Finalidade",e.ide.indFinal._titulo="Consumidor final",e.ide.indFinal._valorInic="1",e.ide.indPres._titulo="Presen\xE7a do comprador",e.ide.indPres._valorInic="1",e.ide.verProc._valorInic="B15 1.0",e.ide.NFref._titulo="Preencher para NF referenciada",e.emit._titulo="Emitente",e.emit.enderEmit.UF._titulo="UF",e.emit.enderEmit.UF._valorInic="",e.emit.enderEmit.CEP._titulo="CEP",e.emit.enderEmit.cPais._valorInic="1058",e.emit.enderEmit.xPais._valorInic="Brasil",e.emit.enderEmit.fone._titulo="DDD + telefone",e.emit.opcional.visivel._titulo="Enviar Inscri\xE7\xE3o Municipal",e.emit.CRT._titulo="Regime Tribut\xE1rio",e.avulsa.UF._valorInic="",e.dest._titulo="Destinat\xE1rio",e.dest.enderDest.UF._titulo="UF",e.dest.enderDest.UF._valorInic="",e.dest.indIEDest._valorInic="2",e.retirada.UF._valorInic="",e.entrega.UF._valorInic="",e.det._titulo="Produtos e servi\xE7os",e.det.lista.prod._titulo="Identifica\xE7\xE3o",e.det.lista.prod.noXml_id={_titulo:"Identifica\xE7\xE3o do Produto",_doc:"Identifica\xE7\xE3o do Produto selecionado",_opcional:!0,_valorInic:""},e.det.lista.prod.noXml_imagem={_titulo:"Imagem do Produto",_doc:"Imagem do Produto selecionado",_opcional:!0,_valorInic:""},e.det.lista.prod.cProd._titulo="C\xF3digo",e.det.lista.prod.cEAN._titulo="C\xF3digo de barras (GTIN ou EAN)",e.det.lista.prod.xProd._titulo="Descri\xE7\xE3o",e.det.lista.prod.NCM._titulo="NCM",e.det.lista.prod.NCM._doc="C\xF3digo NCM (8 posi\xE7\xF5es) - Nomenclatura Comum ao Mercosul",e.det.lista.prod.cBenef._titulo="C\xF3digo de benef\xEDcio fiscal",e.det.lista.prod.cBenef._doc="C\xF3digo de benef\xEDcio fiscal (cBenef) (Opcional)",e.det.lista.prod.CFOP._titulo="CFOP",e.det.lista.prod.CFOP._doc="C\xF3digo Fiscal de Opera\xE7\xF5es e Presta\xE7\xF5es das entradas e sa\xEDdas de mercadorias",e.det.lista.prod.uCom._titulo="Unidade",e.det.lista.prod.uCom._valorInic="UN",e.det.lista.prod.qCom._titulo="Quantidade",e.det.lista.prod.qCom._valorInic=1,e.det.lista.prod.vUnCom._titulo="Valor unit\xE1rio",e.det.lista.prod.vProd._titulo="Valor total bruto",e.det.lista.prod.cEANTrib._titulo="C\xF3digo de Barras GTIN da unidade tribut\xE1vel",e.det.lista.prod.indTot._valorInic="1",e.det.lista.prod.rastro._titulo="rastro",e.det.lista.prod.rastro.lista._titulo="",e.det.lista.prod.rastro.lista.nLote._titulo="N\xFAmero do lote do produto.",e.det.lista.prod.rastro.lista.qLote._titulo="Quantidade de produto no lote.",e.det.lista.prod.rastro.lista.dFab._titulo="Data de fabrica\xE7\xE3o/produ\xE7\xE3o. Formato 'AAAA-MM-DD'.",e.det.lista.prod.rastro.lista.dVal._titulo="Data de validade. Informar o \xFAltimo dia do m\xEAs caso a validade n\xE3o especifique o dia. Formato 'AAAA-MM-DD'.",e.det.lista.prod.rastro.lista.cAgreg._titulo="cAgreg",e.det.lista.imposto._titulo="Tributos",e.det.lista.imposto.noXml_CST={_titulo:"CST ICMS - C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria",_doc:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria pelo ICMS (CST)",_tipo:"seletor",_enumeration:[{valor:"00",rotulo:"00 - Tributada integralmente"},{valor:"10",rotulo:"10 - Tributada e com cobran\xE7a do ICMS por substitui\xE7\xE3o tribut\xE1ria"},{valor:"20",rotulo:"20 - Com redu\xE7\xE3o de base de c\xE1lculo"},{valor:"30",rotulo:"30 - Isenta ou n\xE3o tributada e com cobran\xE7a do ICMS por substitui\xE7\xE3o tribut\xE1ria"},{valor:"40",rotulo:"40 - Isenta"},{valor:"41",rotulo:"41 - N\xE3o tributada"},{valor:"50",rotulo:"50 - Suspens\xE3o"},{valor:"51",rotulo:"51 - Diferimento"},{valor:"60",rotulo:"60 - ICMS cobrado anteriormente por substitui\xE7\xE3o tribut\xE1ria"},{valor:"70",rotulo:"70 - Com redu\xE7\xE3o de base de c\xE1lculo e cobran\xE7a do ICMS por substitui\xE7\xE3o tribut\xE1ria"},{valor:"90",rotulo:"90 - Outras"}],_opcional:!0,_valorInic:""},e.det.lista.imposto.noXml_CSOSN={_titulo:"CSOSN ICMS - C\xF3digo de Situa\xE7\xE3o da Opera\xE7\xE3o do Simples Nacional",_doc:"C\xF3digo de Situa\xE7\xE3o da Opera\xE7\xE3o do Simples Nacional pelo ICMS (CSOSN)",_tipo:"seletor",_enumeration:[{valor:"101",rotulo:"101 - Tributada pelo Simples Nacional com permiss\xE3o de cr\xE9dito"},{valor:"102",rotulo:"102 - Tributada pelo Simples Nacional sem permiss\xE3o de cr\xE9dito"},{valor:"103",rotulo:"103 - Isen\xE7\xE3o do ICMS no Simples Nacional para faixa de receita bruta"},{valor:"201",rotulo:"201 - Tributada pelo Simples Nacional com permiss\xE3o de cr\xE9dito e com cobran\xE7a do ICMS por Substitui\xE7\xE3o Tribut\xE1ria"},{valor:"202",rotulo:"202 - Tributada pelo Simples Nacional sem permiss\xE3o de cr\xE9dito e com cobran\xE7a do ICMS por Substitui\xE7\xE3o Tribut\xE1ria"},{valor:"203",rotulo:"203 - Isen\xE7\xE3o do ICMS nos Simples Nacional para faixa de receita bruta e com cobran\xE7a do ICMS por Substitui\xE7\xE3o Tribut\xE1ria"},{valor:"300",rotulo:"300 - Imune"},{valor:"400",rotulo:"400 - N\xE3o tributada pelo Simples Nacional"},{valor:"500",rotulo:"500 - ICMS cobrado anterirmente por substitui\xE7\xE3o tribut\xE1ria (substitu\xEDdo) ou por antecipa\xE7\xE3o"},{valor:"900",rotulo:"900 - Outros"}],_opcional:!0,_valorInic:""},e.det.lista.imposto.noXml_orig={_titulo:"Origem da mercadoria",_doc:"Origem da mercadoria",_tipo:"seletor",_enumeration:e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMS00.orig._enumeration,_opcional:!0,_valorInic:""},e.det.lista.imposto.noXml_vBC=za(e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMS00.vBC),e.det.lista.imposto.noXml_vBC._opcional=!0,e.det.lista.imposto.noXml_pICMS=za(e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMS00.pICMS),e.det.lista.imposto.noXml_pICMS._opcional=!0,e.det.lista.imposto.noXml_pRedBC=za(e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMS20.pRedBC),e.det.lista.imposto.noXml_pRedBC._opcional=!0,e.det.lista.imposto.noXml_vICMS=za(e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMS00.vICMS),e.det.lista.imposto.noXml_vICMS._opcional=!0,e.det.lista.imposto.noXml_vBCFCP=za(e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMS10.opcional.vBCFCP),e.det.lista.imposto.noXml_vBCFCP._opcional=!0,e.det.lista.imposto.noXml_pFCP=za(e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMS10.opcional.pFCP),e.det.lista.imposto.noXml_pFCP._opcional=!0,e.det.lista.imposto.noXml_vFCP=za(e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMS10.opcional.vFCP),e.det.lista.imposto.noXml_vFCP._opcional=!0,e.det.lista.imposto.noXml_CSTPis={_titulo:"CST do PIS",_doc:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do PIS",_tipo:"seletor",_enumeration:[{valor:"01",rotulo:"01 - Opera\xE7\xE3o Tribut\xE1vel - Base de C\xE1lculo = Valor da Opera\xE7\xE3o Al\xEDquota Normal (Cumulativo/N\xE3o Cumulativo)"},{valor:"02",rotulo:"02 - Opera\xE7\xE3o Tribut\xE1vel - Base de Calculo = Valor da Opera\xE7\xE3o (Al\xEDquota Diferenciada)"},{valor:"03",rotulo:"03 - Opera\xE7\xE3o Tribut\xE1vel - Base de Calculo = Quantidade Vendida x Al\xEDquota por Unidade de Produto"},{valor:"04",rotulo:"04 - Opera\xE7\xE3o Tribut\xE1vel - Tributa\xE7\xE3o Monof\xE1sica - (Al\xEDquota Zero)"},{valor:"05",rotulo:"05 - Opera\xE7\xE3o Tribut\xE1vel (ST)"},{valor:"06",rotulo:"06 - Opera\xE7\xE3o Tribut\xE1vel - Al\xEDquota Zero"},{valor:"07",rotulo:"07 - Opera\xE7\xE3o Isenta da contribui\xE7\xE3o"},{valor:"08",rotulo:"08 - Opera\xE7\xE3o Sem Incid\xEAncia da contribui\xE7\xE3o"},{valor:"09",rotulo:"09 - Opera\xE7\xE3o com suspens\xE3o da contribui\xE7\xE3o"},{valor:"49",rotulo:"49 - Outras Opera\xE7\xF5es de Sa\xEDda"},{valor:"50",rotulo:"50 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada Exclusivamente a Receita Tributada no Mercado Interno"},{valor:"51",rotulo:"51 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada Exclusivamente a Receita N\xE3o Tributada no Mercado Interno"},{valor:"52",rotulo:"52 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada Exclusivamente a Receita de Exporta\xE7\xE3o"},{valor:"53",rotulo:"53 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada a Receitas Tributadas e N\xE3o-Tributadas no Mercado Interno"},{valor:"54",rotulo:"54 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada a Receitas Tributadas no Mercado Interno e de Exporta\xE7\xE3o"},{valor:"55",rotulo:"55 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada a Receitas N\xE3o-Tributadas no Mercado Interno e de Exporta\xE7\xE3o"},{valor:"56",rotulo:"56 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada a Receitas Tributadas e N\xE3o-Tributadas no Mercado Interno, e de Exporta\xE7\xE3o"},{valor:"60",rotulo:"60 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada Exclusivamente a Receita Tributada no Mercado Interno"},{valor:"61",rotulo:"61 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada Exclusivamente a Receita N\xE3o-Tributada no Mercado Interno"},{valor:"62",rotulo:"62 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada Exclusivamente a Receita de Exporta\xE7\xE3o"},{valor:"63",rotulo:"63 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada a Receitas Tributadas e N\xE3o-Tributadas no Mercado Interno"},{valor:"64",rotulo:"64 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada a Receitas Tributadas no Mercado Interno e de Exporta\xE7\xE3o"},{valor:"65",rotulo:"65 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada a Receitas N\xE3o-Tributadas no Mercado Interno e de Exporta\xE7\xE3o"},{valor:"66",rotulo:"66 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada a Receitas Tributadas e N\xE3o-Tributadas no Mercado Interno, e de Exporta\xE7\xE3o"},{valor:"67",rotulo:"67 - Cr\xE9dito Presumido - Outras Opera\xE7\xF5es"},{valor:"70",rotulo:"70 - Opera\xE7\xE3o de Aquisi\xE7\xE3o sem Direito a Cr\xE9dito"},{valor:"71",rotulo:"71 - Opera\xE7\xE3o de Aquisi\xE7\xE3o com Isen\xE7\xE3o"},{valor:"72",rotulo:"72 - Opera\xE7\xE3o de Aquisi\xE7\xE3o com Suspens\xE3o"},{valor:"73",rotulo:"73 - Opera\xE7\xE3o de Aquisi\xE7\xE3o a Al\xEDquota Zero"},{valor:"74",rotulo:"74 - Opera\xE7\xE3o de Aquisi\xE7\xE3o sem Incid\xEAncia da Contribui\xE7\xE3o"},{valor:"75",rotulo:"75 - Opera\xE7\xE3o de Aquisi\xE7\xE3o por Substitui\xE7\xE3o Tribut\xE1ria"},{valor:"98",rotulo:"98 - Outras Opera\xE7\xF5es de Entrada"},{valor:"99",rotulo:"99 - Outras Opera\xE7\xF5es"}],_opcional:!0,_valorInic:""},e.det.lista.imposto.noXml_pPIS=za(e.det.lista.imposto.PIS.escolhas.PISAliq.pPIS),e.det.lista.imposto.noXml_pPIS._opcional=!0,e.det.lista.imposto.noXml_CSTCofins={_titulo:"CST do COFINS",_doc:"C\xF3digo de Situa\xE7\xE3o Tribut\xE1ria do COFINS",_tipo:"seletor",_enumeration:[{valor:"01",rotulo:"01 - Opera\xE7\xE3o Tribut\xE1vel - Base de C\xE1lculo = Valor da Opera\xE7\xE3o Al\xEDquota Normal (Cumulativo/N\xE3o Cumulativo)"},{valor:"02",rotulo:"02 - Opera\xE7\xE3o Tribut\xE1vel - Base de Calculo = Valor da Opera\xE7\xE3o (Al\xEDquota Diferenciada)"},{valor:"03",rotulo:"03 - Opera\xE7\xE3o Tribut\xE1vel - Base de Calculo = Quantidade Vendida x Al\xEDquota por Unidade de Produto"},{valor:"04",rotulo:"04 - Opera\xE7\xE3o Tribut\xE1vel - Tributa\xE7\xE3o Monof\xE1sica - (Al\xEDquota Zero)"},{valor:"05",rotulo:"05 - Opera\xE7\xE3o Tribut\xE1vel (ST)"},{valor:"06",rotulo:"06 - Opera\xE7\xE3o Tribut\xE1vel - Al\xEDquota Zero"},{valor:"07",rotulo:"07 - Opera\xE7\xE3o Isenta da contribui\xE7\xE3o"},{valor:"08",rotulo:"08 - Opera\xE7\xE3o Sem Incid\xEAncia da contribui\xE7\xE3o"},{valor:"09",rotulo:"09 - Opera\xE7\xE3o com suspens\xE3o da contribui\xE7\xE3o"},{valor:"49",rotulo:"49 - Outras Opera\xE7\xF5es de Sa\xEDda"},{valor:"50",rotulo:"50 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada Exclusivamente a Receita Tributada no Mercado Interno"},{valor:"51",rotulo:"51 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada Exclusivamente a Receita N\xE3o Tributada no Mercado Interno"},{valor:"52",rotulo:"52 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada Exclusivamente a Receita de Exporta\xE7\xE3o"},{valor:"53",rotulo:"53 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada a Receitas Tributadas e N\xE3o-Tributadas no Mercado Interno"},{valor:"54",rotulo:"54 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada a Receitas Tributadas no Mercado Interno e de Exporta\xE7\xE3o"},{valor:"55",rotulo:"55 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada a Receitas N\xE3o-Tributadas no Mercado Interno e de Exporta\xE7\xE3o"},{valor:"56",rotulo:"56 - Opera\xE7\xE3o com Direito a Cr\xE9dito - Vinculada a Receitas Tributadas e N\xE3o-Tributadas no Mercado Interno, e de Exporta\xE7\xE3o"},{valor:"60",rotulo:"60 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada Exclusivamente a Receita Tributada no Mercado Interno"},{valor:"61",rotulo:"61 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada Exclusivamente a Receita N\xE3o-Tributada no Mercado Interno"},{valor:"62",rotulo:"62 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada Exclusivamente a Receita de Exporta\xE7\xE3o"},{valor:"63",rotulo:"63 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada a Receitas Tributadas e N\xE3o-Tributadas no Mercado Interno"},{valor:"64",rotulo:"64 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada a Receitas Tributadas no Mercado Interno e de Exporta\xE7\xE3o"},{valor:"65",rotulo:"65 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada a Receitas N\xE3o-Tributadas no Mercado Interno e de Exporta\xE7\xE3o"},{valor:"66",rotulo:"66 - Cr\xE9dito Presumido - Opera\xE7\xE3o de Aquisi\xE7\xE3o Vinculada a Receitas Tributadas e N\xE3o-Tributadas no Mercado Interno, e de Exporta\xE7\xE3o"},{valor:"67",rotulo:"67 - Cr\xE9dito Presumido - Outras Opera\xE7\xF5es"},{valor:"70",rotulo:"70 - Opera\xE7\xE3o de Aquisi\xE7\xE3o sem Direito a Cr\xE9dito"},{valor:"71",rotulo:"71 - Opera\xE7\xE3o de Aquisi\xE7\xE3o com Isen\xE7\xE3o"},{valor:"72",rotulo:"72 - Opera\xE7\xE3o de Aquisi\xE7\xE3o com Suspens\xE3o"},{valor:"73",rotulo:"73 - Opera\xE7\xE3o de Aquisi\xE7\xE3o a Al\xEDquota Zero"},{valor:"74",rotulo:"74 - Opera\xE7\xE3o de Aquisi\xE7\xE3o sem Incid\xEAncia da Contribui\xE7\xE3o"},{valor:"75",rotulo:"75 - Opera\xE7\xE3o de Aquisi\xE7\xE3o por Substitui\xE7\xE3o Tribut\xE1ria"},{valor:"98",rotulo:"98 - Outras Opera\xE7\xF5es de Entrada"},{valor:"99",rotulo:"99 - Outras Opera\xE7\xF5es"}],_opcional:!0,_valorInic:""},e.det.lista.imposto.noXml_pCOFINS=za(e.det.lista.imposto.COFINS.escolhas.COFINSAliq.pCOFINS),e.det.lista.imposto.noXml_pCOFINS._opcional=!0,e.det.lista.imposto.noXml_CSTIpi={_titulo:"CST do IPI",_doc:"C\xF3digo da Situa\xE7\xE3o Tribut\xE1ria do IPI (CST)",_tipo:"seletor",_enumeration:[{valor:"00",rotulo:"00 - Entrada com recupera\xE7\xE3o de cr\xE9dito"},{valor:"01",rotulo:"01 - Entrada tributada com al\xEDquota zero"},{valor:"02",rotulo:"02 - Entrada isenta"},{valor:"03",rotulo:"03 - Entrada n\xE3o-tributada"},{valor:"04",rotulo:"04 - Entrada imune"},{valor:"05",rotulo:"05 - Entrada com suspens\xE3o"},{valor:"49",rotulo:"49 - Outras entradas"},{valor:"50",rotulo:"50 - Sa\xEDda tributada"},{valor:"51",rotulo:"51 - Sa\xEDda tributada com al\xEDquota zero"},{valor:"52",rotulo:"52 - Sa\xEDda isenta"},{valor:"53",rotulo:"53 - Sa\xEDda n\xE3o-tributada"},{valor:"54",rotulo:"54 - Sa\xEDda imune"},{valor:"55",rotulo:"55 - Sa\xEDda com suspens\xE3o"},{valor:"99",rotulo:"99 - Outras sa\xEDdas"}],_opcional:!0,_valorInic:""},e.det.lista.imposto.noXml_pIPI=za(e.det.lista.imposto.escolhas.opcao1.IPI.escolhas.IPITrib.escolhas.opcao1.pIPI),e.det.lista.imposto.noXml_pIPI._opcional=!0,e.det.lista.imposto.noXml_vIPI=za(e.det.lista.imposto.escolhas.opcao1.IPI.escolhas.IPITrib.vIPI),e.det.lista.imposto.noXml_vIPI._opcional=!0,e.det.lista.imposto.noXml_cEnqIpi=za(e.det.lista.imposto.escolhas.opcao1.IPI.cEnq),e.det.lista.imposto.noXml_cEnqIpi._opcional=!0,e.det.lista.imposto.vTotTrib._titulo="Valor aproximado dos tributos",e.det.lista.imposto.noXml_dVenc={_titulo:"Validade IBPT",_doc:"Data de validade da tabela IBPT",_tipo:"datetime",_opcional:!0,_valorInic:""},e.det.lista.imposto.noXml_pTribImp=za(e.det.lista.imposto.vTotTrib),e.det.lista.imposto.noXml_pTribImp._titulo="Aliq fed importados",e.det.lista.imposto.noXml_pTribImp._doc="Al\xEDquota federais de produto importado",e.det.lista.imposto.noXml_pTribFed=za(e.det.lista.imposto.vTotTrib),e.det.lista.imposto.noXml_pTribFed._titulo="Aliq federais",e.det.lista.imposto.noXml_pTribFed._doc="Al\xEDquota federais de produto nacional",e.det.lista.imposto.noXml_pTribEst=za(e.det.lista.imposto.vTotTrib),e.det.lista.imposto.noXml_pTribEst._titulo="Aliq estaduais",e.det.lista.imposto.noXml_pTribEst._doc="Al\xEDquota estaduais",e.det.lista.imposto.noXml_pTribMun=za(e.det.lista.imposto.vTotTrib),e.det.lista.imposto.noXml_pTribMun._titulo="Aliq municipais",e.det.lista.imposto.noXml_pTribMun._doc="Al\xEDquota municipais",e.det.lista.imposto.noXml_vTribFed=za(e.det.lista.imposto.vTotTrib),e.det.lista.imposto.noXml_vTribFed._titulo="Trib federais",e.det.lista.imposto.noXml_vTribFed._doc="Tributos federais de produto nacional",e.det.lista.imposto.noXml_vTribEst=za(e.det.lista.imposto.vTotTrib),e.det.lista.imposto.noXml_vTribEst._titulo="Trib estaduais",e.det.lista.imposto.noXml_vTribEst._doc="Tributos estaduais",e.det.lista.imposto.noXml_vTribMun=za(e.det.lista.imposto.vTotTrib),e.det.lista.imposto.noXml_vTribMun._titulo="Trib municipais",e.det.lista.imposto.noXml_vTribMun._doc="Tributos municipais",e.det.lista.imposto.escolhas.valor_escolha._valorInic="opcao1",e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMS00.modBC._titulo="Modalidade de determina\xE7\xE3o da BC do ICMS",e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMS10.modBC._titulo="Modalidade de determina\xE7\xE3o da BC do ICMS",e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMS10.modBCST._titulo="Modalidade de determina\xE7\xE3o da BC do ICMS ST",e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMS20.modBC._titulo="Modalidade de determina\xE7\xE3o da BC do ICMS",e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMS30.modBCST._titulo="Modalidade de determina\xE7\xE3o da BC do ICMS ST",e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMS40.opcional.vICMSDeson._titulo="Valor do ICMS de desonera\xE7\xE3o",e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMS40.opcional.vICMSDeson._doc="Valor do ICMS de desonera\xE7\xE3o (vICMSDeson)",e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMS40.opcional.motDesICMS._titulo="Motivo da desonera\xE7\xE3o",e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMS40.opcional.motDesICMS._doc="Este campo ser\xE1 preenchido quando o campo anterior estiver preenchido.",e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMS40.opcional.motDesICMS._enumeration=[{valor:"1",rotulo:"1 - T\xE1xi"},{valor:"3",rotulo:"3 - Produtor Agropecu\xE1rio"},{valor:"4",rotulo:"4 - Frotista/Locadora"},{valor:"5",rotulo:"5 - Diplom\xE1tico/Consular"},{valor:"6",rotulo:"6 - Utilit\xE1rios e Motocicletas da Amaz\xF4nia Ocidental e \xC1reas de Livre Com\xE9rcio (Resolu\xE7\xE3o 714/88 e 790/94 - CONTRAN e suas altera\xE7\xF5es)"},{valor:"7",rotulo:"7 - SUFRAMA"},{valor:"8",rotulo:"8 - Venda a \xF3rg\xE3o P\xFAblico"},{valor:"9",rotulo:"9 - Outros"},{valor:"10",rotulo:"10 - Deficiente Condutor"},{valor:"11",rotulo:"11 - Deficiente n\xE3o condutor"},{valor:"16",rotulo:"16 - Olimp\xEDadas Rio 2016"},{valor:"90",rotulo:"90 - Solicitado pelo Fisco"}],e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMS51.modBC._titulo="Modalidade de determina\xE7\xE3o da BC do ICMS",e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMS70.modBC._titulo="Modalidade de determina\xE7\xE3o da BC do ICMS",e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMS70.modBCST._titulo="Modalidade de determina\xE7\xE3o da BC do ICMS ST",e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMS90.opcional.modBC._titulo="Modalidade de determina\xE7\xE3o da BC do ICMS",e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMS90.opcional2.modBCST._titulo="Modalidade de determina\xE7\xE3o da BC do ICMS ST",e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMSPart.modBC._titulo="Modalidade de determina\xE7\xE3o da BC do ICMS",e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMSPart.modBCST._titulo="Modalidade de determina\xE7\xE3o da BC do ICMS ST",e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMSSN201.modBCST._titulo="Modalidade de determina\xE7\xE3o da BC do ICMS ST",e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMSSN202.modBCST._titulo="Modalidade de determina\xE7\xE3o da BC do ICMS ST",e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMSSN500.opcional.visivel._valorInic=!0,e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMSSN500.opcional.vICMSSubstituto._opcional=!1,e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMSSN900.opcional.modBC._titulo="Modalidade de determina\xE7\xE3o da BC do ICMS",e.det.lista.imposto.escolhas.opcao1.ICMS.escolhas.ICMSSN900.opcional2.modBCST._titulo="Modalidade de determina\xE7\xE3o da BC do ICMS ST",e.det.lista.imposto.escolhas.opcao1.IPI.cEnq._titulo="C\xF3digo de Enquadramento Legal do IPI",e.det.lista.imposto.escolhas.opcao1.IPI.cEnq._doc="C\xF3digo de Enquadramento Legal do IPI (tabela criada pela RFB) (cEnq)",e.det.lista.imposto.escolhas.opcao1.IPI.escolhas.IPITrib.CST._titulo="CST do IPI",e.det.lista.imposto.ICMSUFDest.pICMSInterPart._valorInic=100,e.det.lista.impostoDevol.visivel._titulo="Imposto devolvido",e.det.lista.infAdProd._titulo="Informa\xE7\xF5es adicionais do produto",e.total._titulo="Outros Valores",e.total.ICMSTot.noXml_vTribFed=za(e.det.lista.imposto.noXml_vTribFed),e.total.ICMSTot.noXml_vTribEst=za(e.det.lista.imposto.noXml_vTribEst),e.total.ICMSTot.noXml_vTribMun=za(e.det.lista.imposto.noXml_vTribMun),e.transp._titulo="Transporte",e.transp.modFrete._valorInic="9",e.transp.transporta.UF._valorInic="",e.transp.escolhas.opcao1.veicTransp.UF._valorInic="",e.transp.escolhas.opcao1.reboque.lista.UF._valorInic="",e.transp.vol.lista.lacres._titulo="Lacres",e.cobr._titulo="Faturamento",e.cobr.fat.visivel._valorInic=!0,e.cobr.fat.vOrig._opcional=!1,e.cobr.fat.vDesc._opcional=!1,e.cobr.fat.vLiq._opcional=!1,e.cobr.dup._titulo="Duplicatas",e.cobr.dup.lista.dVenc._titulo="Vencimento",e.pag._titulo="Pagamento",e.pag.detPag._titulo="Forma de pagamento",e.infAdic._titulo="Informa\xE7\xF5es adicionais",e.infAdic.infAdFisco._titulo="Informa\xE7\xF5es adicionais de interesse do Fisco",e.infAdic.infCpl._titulo="Informa\xE7\xF5es complementares de interesse do Contribuinte",e}var Zn={infEvento:bJ.infEvento,infEventoCC:yJ.infEvento,infInut:xJ.infInut,infNFe:wJ(CJ.infNFe)},lM={aliquotaSimples:0,chNFe:"",status:"",situacao:"Em digita\xE7\xE3o",situacaoErro:"",mensagem:"",importada:!1,emitida:!1,cancelada:!1,calculaTotais:!0,visaoCompleta:!1,visaoCompletaProduto:!1,nProt_emissao:"",dhRecbto_emissao:"",idContatoEmitente:"",idContatoDestinatario:"",dadosAdicionais:"",dadosAdicionaisEmitente:"",dadosAdicionaisDestinatario:"",dadosAdicionaisEnderecoEntrega:"",textoValorAproximadosTributos:"",textoCartaCorrecao:[],operacao:"",cfop:"",protNFe:{tpAmb:"",chNFe:"",nProt:"",dhRecbto:"",cStat:"",xMotivo:""},automatico:{totais:!0,calculaBC:!0,incluiDespesasNaBC:!0,dados_trib:!0},transmitida:!1,timeout:!1,ordemCompra:"",observacoesNFe:{}};async function EJ(e,t){const o=t.idDocumento,r=[],a=[];let i;if(o&&(i=await $db.hibrido.le({table:"documento",id:o})),!!~["Venda","Fatura"].indexOf(i==null?void 0:i.tipo)){if(i.tipo==="Fatura"){const n=await $db.hibrido.lista({table:"documento",where:{idFatura:i.id}});i.numero&&r.push(i.numero);for(const s of n)s.tipo!=="Venda"||!s.numero||a.push(s.numero)}i.tipo==="Venda"&&i.numero&&a.push(i.numero),e.infAdic.infCpl&&(e.infAdic.infCpl=e.infAdic.infCpl.trim()+" "),r.length>0&&(e.infAdic.infCpl+=`Fatura: ${"#"+r.join(" #")}`),a.length>0&&(r.length>0&&(e.infAdic.infCpl+=", "),e.infAdic.infCpl+=`Venda: ${"#"+a.join(" #")}`)}}function SJ(e,t){let o=Number(t==null?void 0:t.aliquotaSimples)||0,r=0;for(const a of e.det){const i=a.imposto.escolhas.valor_escolha,n=a.imposto.escolhas[i].ICMS.escolhas.valor_escolha;let s;if(n==="ICMSSN101"){s=a.imposto.escolhas[i].ICMS.escolhas[n],r+=Number(s.vCredICMSSN)||0;continue}r+=(Number(a.imposto.noXml_vICMS)||0)*o/100}r=$utils.formatarNumero(r,2),o=$utils.formatarNumero(o,2),e.infAdic.infCpl=e.infAdic.infCpl.replace(/\[AliquotaSimples\]/g,o),e.infAdic.infCpl=e.infAdic.infCpl.replace(/\[ValorSimples\]/g,r)}var sC={async acertarDadosNFe(e,t,o){if(e.emit.enderEmit.cMun.length===7&&(e.ide.cMunFG=e.emit.enderEmit.cMun),e.ide.cUF=(pM[e.emit.enderEmit.UF]||0).toString(),e.ide.tpAmb==="2"&&(e.dest.xNome="NF-E EMITIDA EM AMBIENTE DE HOMOLOGACAO - SEM VALOR FISCAL",o==="NFCe"))for(const i of e.det)i.prod.xProd="NOTA FISCAL EMITIDA EM AMBIENTE DE HOMOLOGACAO - SEM VALOR FISCAL";const r=((e.dest||{}).escolhas||{}).CNPJ;for(const i in e.autXML){const n=e.autXML[i].escolhas.CNPJ;r===n&&e.autXML.splice(i,1)}let a=1;for(const i of e.cobr.dup)i.nDup=String(a).padStart(3,"0"),a++;e.infAdic.visivel=!0,e.infAdic.infCpl=t.textoValorAproximadosTributos,t.dadosAdicionais&&(e.infAdic.infCpl&&(e.infAdic.infCpl=e.infAdic.infCpl.trim()+" "),e.infAdic.infCpl+=t.dadosAdicionais.trim()),typeof t.observacoesNFe=="string"&&(e.infAdic.infCpl&&(e.infAdic.infCpl=e.infAdic.infCpl.trim()+" "),e.infAdic.infCpl+=t.observacoesNFe.trim()),t.dadosAdicionaisEmitente&&(e.infAdic.infCpl&&(e.infAdic.infCpl=e.infAdic.infCpl.trim()+" "),e.infAdic.infCpl+=t.dadosAdicionaisEmitente.trim()),SJ(e,t),await EJ(e,t),e.infAdic.infCpl=OM(e.infAdic.infCpl.replace(/\n/g," ").replace(//g,"-")).trim().substr(0,5e3),e.infRespTec.visivel=!0,e.emit.enderEmit.UF==="PR"?(e.infRespTec.CNPJ="09492015000199",e.infRespTec.xContato="B-15 Optidados",e.infRespTec.email="geeks@optidados.com.br",e.infRespTec.fone="1621116161"):(e.infRespTec.CNPJ="07660198000189",e.infRespTec.xContato="M.F da Silva Informatica Ltda. - ME",e.infRespTec.email="geeks@geekssolucoes.com.br",e.infRespTec.fone="1621116161")},completarOutrosNFe(e,t){if(!e||typeof e!="object"||Array.isArray(e))return[null,void 0].includes(t)?e:t;let o={};for(const r in e)o[r]=this.completarOutrosNFe(e[r],t?t[r]:null);return Object.keys(t||{}).length&&!Object.keys(e||{}).length&&(o=t),o},formatarDataNFe(e){return typeof e=="string"&&e.length===10&&(e=new Date(e+"T00:00:00")),Xo.formatDate(e,"YYYY-MM-DDTHH:mm:ssZ")},formatarDataNFeSemHoras(e){return typeof e=="string"&&e.length===10&&(e=new Date(e+"T00:00:00")),Xo.formatDate(e,"YYYY-MM-DD")},formatarNumero(e,t){return(e||0).toFixed(t).replace(".",",").replace(/\d(?=(\d{3})+,)/g,"$&.")},iniciarCampos(e,t){Wt.log("NFeUtil","iniciarCampos",t);const o=Xo.formatDate(Date.now());return e.id=Kt(),e.dataHoraAlteracao=o,e.dataHoraCriacao=o,t!=="importar"&&(e.outrosNFe=this.completarOutrosNFe(lM,{}),e.infNFe.ide.dhEmi=this.formatarDataNFe(new Date),e.infNFe.ide.dhSaiEnt=Zn.infNFe.ide.dhSaiEnt._valorInic,e.infNFe.ide.nNF=Zn.infNFe.ide.nNF._valorInic,e.infNFe.ide.serie=Zn.infNFe.ide.serie._valorInic,e.infNFe.ide.tpAmb=Zn.infNFe.ide.tpAmb._valorInic),e.situacao=e.outrosNFe.situacao,e.tipo==="NFe"&&(e.infNFe.dest.visivel=!0,e.infNFe.dest.enderDest.visivel=!0),e},filtrarDadosNFe(e){const t={};for(const o of["id","idDocumento","numeroPDV","cpfCnpjCliente","nomeCliente","infNFe","infEvento","infEventoCC","outrosNFe","alertas","erros"])e[o]&&(t[o]=e[o]);return t},prepararDocumentoFiscalEletronico(e){const t=e.infNFe.emit||{escolhas:{CPF:"",CNPJ:""},xNome:"",xFant:""},o=e.infNFe.dest||{escolhas:{CPF:"",CNPJ:""},xNome:"",xFant:""};return{id:e.id,tipo:e.tipo,situacao:e.outrosNFe.situacao,tpAmb:e.infNFe.ide.tpAmb,mod:Number(e.infNFe.ide.mod),serie:Number(e.infNFe.ide.serie),nNF:Number(e.infNFe.ide.nNF),chNFe:e.outrosNFe.chNFe,vNF:((e.infNFe.total||{}).ICMSTot||{}).vNF,dhEmi:e.infNFe.ide.dhEmi,dataHoraEmissao:Xo.formatDate(e.infNFe.ide.dhEmi),dataHoraCriacao:e.dataHoraCriacao,dataHoraAlteracao:sa(),cpfCnpjEmitente:t.escolhas.CNPJ||t.escolhas.CPF||"",xNomeEmitente:t.xNome,xFantEmitente:t.xFant,cpfCnpjDestinatario:o.escolhas.CNPJ||o.escolhas.CPF||"",xNomeDestinatario:o.xNome,xFantDestinatario:o.xFant,json:JSON.stringify(this.filtrarDadosNFe(e)),qrCode:"",idDocumento:e.outrosNFe.idDocumento,operacao:e.outrosNFe.operacao,tipoDocumentoFiscal:Zn.infNFe.ide.tpNF._enumeration.find(r=>r.valor===e.infNFe.ide.tpNF).rotulo.replace(/^\s*\d+\s*-\s*/g,""),finalidade:Zn.infNFe.ide.finNFe._enumeration.find(r=>r.valor===e.infNFe.ide.finNFe).rotulo.replace(/^\s*\d+\s*-\s*/g,""),naturezaOperacao:e.infNFe.ide.natOp}},tiposNumero:["decimal","dinheiro","percentagem"]};const lC={xs:18,sm:24,md:32,lg:38,xl:46},Wd={size:String};function Qd(e,t=lC){return j(()=>e.size!==void 0?{fontSize:e.size in t?`${t[e.size]}px`:e.size}:null)}const q_={size:{type:[String,Number],default:"1em"},color:String};function L_(e){return{cSize:j(()=>e.size in lC?`${lC[e.size]}px`:e.size),classes:j(()=>"q-spinner"+(e.color?` text-${e.color}`:""))}}var Ns=Ct({name:"QSpinner",props:{...q_,thickness:{type:Number,default:5}},setup(e){const{cSize:t,classes:o}=L_(e);return()=>G("svg",{class:o.value+" q-spinner-mat",width:t.value,height:t.value,viewBox:"25 25 50 50"},[G("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":e.thickness,"stroke-miterlimit":"10"})])}});let IJ=1,AJ=document.body;function $_(e,t){const o=document.createElement("div");if(o.id=t!==void 0?`q-portal--${t}--${IJ++}`:e,_g.globalNodes!==void 0){const r=_g.globalNodes.class;r!==void 0&&(o.className=r)}return AJ.appendChild(o),o}function ME(e){e.remove()}let C0=0,gy,_y,U0,by=!1,p3,h3,v3,Bu=null;function TJ(e){DJ(e)&&zo(e)}function DJ(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const t=OG(e),o=e.shiftKey&&!e.deltaX,r=!o&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),a=o||r?e.deltaY:e.deltaX;for(let i=0;i<t.length;i++){const n=t[i];if(QG(n,r))return r?a<0&&n.scrollTop===0?!0:a>0&&n.scrollTop+n.clientHeight===n.scrollHeight:a<0&&n.scrollLeft===0?!0:a>0&&n.scrollLeft+n.clientWidth===n.scrollWidth}return!0}function g3(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function Z1(e){by!==!0&&(by=!0,requestAnimationFrame(()=>{by=!1;const{height:t}=e.target,{clientHeight:o,scrollTop:r}=document.scrollingElement;(U0===void 0||t!==window.innerHeight)&&(U0=o-t,document.scrollingElement.scrollTop=r),r>U0&&(document.scrollingElement.scrollTop-=Math.ceil((r-U0)/8))}))}function _3(e){const t=document.body,o=window.visualViewport!==void 0;if(e==="add"){const{overflowY:r,overflowX:a}=window.getComputedStyle(t);gy=tE(window),_y=eE(window),p3=t.style.left,h3=t.style.top,v3=window.location.href,t.style.left=`-${gy}px`,t.style.top=`-${_y}px`,a!=="hidden"&&(a==="scroll"||t.scrollWidth>window.innerWidth)&&t.classList.add("q-body--force-scrollbar-x"),r!=="hidden"&&(r==="scroll"||t.scrollHeight>window.innerHeight)&&t.classList.add("q-body--force-scrollbar-y"),t.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,Ho.is.ios===!0&&(o===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",Z1,er.passiveCapture),window.visualViewport.addEventListener("scroll",Z1,er.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",g3,er.passiveCapture))}Ho.is.desktop===!0&&Ho.is.mac===!0&&window[`${e}EventListener`]("wheel",TJ,er.notPassive),e==="remove"&&(Ho.is.ios===!0&&(o===!0?(window.visualViewport.removeEventListener("resize",Z1,er.passiveCapture),window.visualViewport.removeEventListener("scroll",Z1,er.passiveCapture)):window.removeEventListener("scroll",g3,er.passiveCapture)),t.classList.remove("q-body--prevent-scroll"),t.classList.remove("q-body--force-scrollbar-x"),t.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,t.style.left=p3,t.style.top=h3,window.location.href===v3&&window.scrollTo(gy,_y),U0=void 0)}function cC(e){let t="add";if(e===!0){if(C0++,Bu!==null){clearTimeout(Bu),Bu=null;return}if(C0>1)return}else{if(C0===0||(C0--,C0>0))return;if(t="remove",Ho.is.ios===!0&&Ho.is.nativeMobile===!0){Bu!==null&&clearTimeout(Bu),Bu=setTimeout(()=>{_3(t),Bu=null},100);return}}_3(t)}let Cf,yy,b3=0,qu=null,Lr={},id={};const cM={group:"__default_quasar_group__",delay:0,message:!1,html:!1,spinnerSize:80,spinnerColor:"",messageColor:"",backgroundColor:"",boxClass:"",spinner:Ns,customClass:""},uM={...cM};function OJ(e){if(e&&e.group!==void 0&&id[e.group]!==void 0)return Object.assign(id[e.group],e);const t=ei(e)===!0&&e.ignoreDefaults===!0?{...cM,...e}:{...uM,...e};return id[t.group]=t,t}const En=dh({isActive:!1},{show(e){Lr=OJ(e);const{group:t}=Lr;return En.isActive=!0,Cf!==void 0?(Lr.uid=b3,yy.$forceUpdate()):(Lr.uid=++b3,qu!==null&&clearTimeout(qu),qu=setTimeout(()=>{qu=null;const o=$_("q-loading");Cf=Zw({name:"QLoading",setup(){Va(()=>{cC(!0)});function r(){En.isActive!==!0&&Cf!==void 0&&(cC(!1),Cf.unmount(o),ME(o),Cf=void 0,yy=void 0)}function a(){if(En.isActive!==!0)return null;const i=[G(Lr.spinner,{class:"q-loading__spinner",color:Lr.spinnerColor,size:Lr.spinnerSize})];return Lr.message&&i.push(G("div",{class:"q-loading__message"+(Lr.messageColor?` text-${Lr.messageColor}`:""),[Lr.html===!0?"innerHTML":"textContent"]:Lr.message})),G("div",{class:"q-loading fullscreen flex flex-center z-max "+Lr.customClass.trim(),key:Lr.uid},[G("div",{class:"q-loading__backdrop"+(Lr.backgroundColor?` bg-${Lr.backgroundColor}`:"")}),G("div",{class:"q-loading__box column items-center "+Lr.boxClass},i)])}return()=>G(Or,{name:"q-transition--fade",appear:!0,onAfterLeave:r},a)}},En.__parentApp),yy=Cf.mount(o)},Lr.delay)),o=>{if(o===void 0||Object(o)!==o){En.hide(t);return}En.show({...o,group:t})}},hide(e){if(En.isActive===!0){if(e===void 0)id={};else{if(id[e]===void 0)return;{delete id[e];const t=Object.keys(id);if(t.length!==0){const o=t[t.length-1];En.show({group:o});return}}}qu!==null&&(clearTimeout(qu),qu=null),En.isActive=!1}},setDefaults(e){ei(e)===!0&&Object.assign(uM,e)},install({$q:e,parentApp:t}){e.loading=this,En.__parentApp=t,e.config.loading!==void 0&&this.setDefaults(e.config.loading)}}),PJ=[G("g",{transform:"translate(-20,-20)"},[G("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[G("animateTransform",{attributeName:"transform",type:"rotate",from:"90 50 50",to:"0 50 50",dur:"1s",repeatCount:"indefinite"})])]),G("g",{transform:"translate(20,20) rotate(15 50 50)"},[G("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[G("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"90 50 50",dur:"1s",repeatCount:"indefinite"})])])];var FJ=Ct({name:"QSpinnerGears",props:q_,setup(e){const{cSize:t,classes:o}=L_(e);return()=>G("svg",{class:o.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},PJ)}});const yc="http://localhost:5555",MJ="https://api.b15.com.br/integrador";function ev(e){return e.indexOf("XML INCONSISTENTE")>=0?e.replace(/Incio da validao...|...Final da validao|http:\/\/www.portalfiscal.inf.br\/nfe:|no espao para nome 'http:\/\/www.portalfiscal.inf.br\/nfe'|(Arquivo XML: |Arquivo SCHEMA: )C\\:(\w|>|-|\.|\\)*(\.xml|\.xsd){1}|Linha: \d+ Coluna: \d+ /g,"").replace(/(\r\n)+/g,`\r
`):e}function Lu(e){return e.replace(/=/g,"k__k").replace(/\?/g,"l__l").replace(/&/g,"m__m").replace(/\+/g,"n__n")}function y3(e){return Object.keys(e).map(t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t])).join("&")}function wf(e){let t={};for(const o of["id","idDocumento","numeroPDV","cpfCnpjCliente","nomeCliente","infNFe","outrosNFe","alertas","erros"])e[o]&&(t[o]=e[o]);return t}var NJ={url:"",urlSat:"",urlNFe:"",urlImprimir:"",async urlIntegrador(e,t){return e==="consultarCadastroContribuinte"?(this.url=MJ,this.url):e==="ImprimeNFCe"?(this.urlImprimir=await et.configuracoes.leValorComFiltroEmpresa("integrador.imprimir",t,yc),this.url=this.urlImprimir,this.url):e==="SAT"?(this.urlSat=await et.configuracoes.leValorComFiltroEmpresa("integrador.sat",t,""),this.urlSat||(this.urlSat=await et.configuracoes.leValorComFiltroEmpresa("integrador.servidor",t,yc)),this.url=this.urlSat,this.url):(this.urlNFe=await et.configuracoes.leValorComFiltroEmpresa("integrador.servidor",t,yc),this.url=this.urlNFe,this.url)},async obterServidorOpcoes(){var r,a,i,n,s;const e=await $db.configuracoes.le({nome:"integrador.servidor.opcoes"}),t=(i=JSON.parse((a=(r=e==null?void 0:e[0])==null?void 0:r.valor)!=null?a:null))!=null?i:[];let o=0;if(t.length>1&&(o=await $g.promptServicoIntegrador.show({buttons:t.map(l=>({label:l.descricao}))})),t[o])return{motor:(n=t[o])==null?void 0:n.motor,url:(s=t[o])==null?void 0:s.url}},async consultarCadastroContribuinte(e,t,o){const r=await this.obterServidorOpcoes();if((r==null?void 0:r.motor)==="c#"){const a='<?xml version="1.0" encoding="utf-8"?>'+new XMLSerializer().serializeToString(t),i={action:"ConsultaCadastroContribuinte",certificados:e,documentoXml:Lu(a)};return this.executar(i,"consultarCadastroContribuinte",void 0)}if((r==null?void 0:r.motor)==="node")try{const a=new Headers;return a.append("Content-type","application/json; charset=utf-8"),await(await fetch(`${r.url}/nfe/consultarCadastroContribuinte`,{method:"POST",mode:"cors",headers:a,body:JSON.stringify({cnpj:o,certificados:e})})).json()}catch{return{status:"Erro"}}},async dadosAcesso(e){let t,o,r;t=await et.configuracoes.leValorComFiltroEmpresa("integrador.idDispositivo",e),o=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test(t);try{const a=new AbortController,i=a.signal;r=setTimeout(()=>{a.abort()},3e3);let n=await fetch(`${yc}/status`,{signal:i});if(n=await n.json(),n!=null&&n.versao)return{via:"http",url:yc}}catch(a){console.error(a)}finally{clearTimeout(r)}if(o)return{via:"websocket",id:t}},async emitirSat(e,t){const o=await this.dadosAcesso(t.idEmpresa);if(!o){const r={action:"EmiteSAT",sat:Lu(e)};return this.executar(r,"SAT",t.idEmpresa)}if(o){const r=await m3.xml({dados:JSON.parse(e),idEmpresa:t.idEmpresa}),a=JSON.stringify({cfe:r,documento:{id:t.id,dataHoraFinalizado:t.dataHoraFinalizado}}),i="/sat/emitir";let n;if((o==null?void 0:o.via)==="websocket"&&(n=await $utils.p2p.enviarMensagem(o.id,a,i),n=n==null?void 0:n.data),(o==null?void 0:o.via)==="http"){const s=new Headers;s.append("Content-type","application/json; charset=utf-8"),n=await fetch(`${o.url}${i}`,{method:"POST",mode:"cors",headers:s,body:a}),n=await n.json()}return{...n,versaoIntegrador:"V2"}}},async cancelarSat(e,t){const o=await this.dadosAcesso(t.idEmpresa);if(!o){const r={action:"CancelaSAT",cancelaSat:Lu(e)};return this.executar(r,"SAT",t.idEmpresa)}if(o){const r=JSON.parse(e),a=await m3.xml({dados:r,idEmpresa:t.idEmpresa,cancelamento:!0}),i=JSON.stringify({chaveAcessoCFe:r.ChaveAcessoCFe,cfeCanc:a,documento:{id:t.id,dataHoraFinalizado:t.dataHoraFinalizado}}),n="/sat/cancelar";let s;if((o==null?void 0:o.via)==="websocket"&&(s=await $utils.p2p.enviarMensagem(o.id,i,n),s=s==null?void 0:s.data),(o==null?void 0:o.via)==="http"){const l=new Headers;l.append("Content-type","application/json; charset=utf-8"),s=await fetch(`${o==null?void 0:o.url}${n}`,{method:"POST",mode:"cors",headers:l,body:i}),s=await s.json()}return{...s,versaoIntegrador:"V2"}}},async imprimirCancelamentoSat(e,t){const o=await this.dadosAcesso(t);if(!o){const r={action:"ImprimirCancelamentoSAT",cupomSat:Lu(e)};return this.executar(r,"SAT",t)}if(o){const r={parseTagValue:!1,ignoreAttributes:!1},i=new sp.XMLParser(r).parse(e),n=await $utils.impressaoObterHtml("cfe-extrato-cancelamento",i),s=JSON.stringify({content:n}),l="/print";if((o==null?void 0:o.via)==="websocket"&&await $utils.p2p.enviarMensagem(o.id,s,l),(o==null?void 0:o.via)==="http"){const u=new Headers;u.append("Content-type","application/json; charset=utf-8"),await fetch(`${yc}${l}`,{method:"POST",mode:"cors",headers:u,body:s})}return{status:"ok",mensagem:"Cupom impresso"}}},async imprimirSat(e,t){const o=await this.dadosAcesso(t);if(!o){const r={action:"ImprimeSAT",cupomSat:Lu(e)};return this.executar(r,"SAT",t)}if(o){const r={parseTagValue:!1,ignoreAttributes:!1},i=new sp.XMLParser(r).parse(e),n=await $utils.impressaoObterHtml("cfe-extrato",i),s=JSON.stringify({content:n}),l="/print";if((o==null?void 0:o.via)==="websocket"&&await $utils.p2p.enviarMensagem(o.id,s,l),(o==null?void 0:o.via)==="http"){const u=new Headers;u.append("Content-type","application/json; charset=utf-8"),await fetch(`${yc}${l}`,{method:"POST",mode:"cors",headers:u,body:s})}return{status:"ok",mensagem:"Cupom impresso"}}},async emitirNFCe(e,t,o){const r=zs.Nfe(Zn.infNFe,e.infNFe,e.outrosNFe.idDocumento);e.outrosNFe.chNFe=zs.chNFe;const a={hashCSC:t,tokenCSC:o};let i=await this.servicoIntegrador(e,r,"emitirNFCe","Emiss\xE3o",1,a,"NFCe",e.outrosNFe.idContatoEmitente);if(i.cStat==="539"){const n=await this.emitirNFCeDuplicidade(e,a,i.complemento||"");n&&(i=n)}return i},async emitirNFCeDuplicidade(e,t,o){var i;const r=(o.match(/\d{44}/g)||[])[0];if(r){const n={tpAmb:e.infNFe.ide.tpAmb,cpfCnpjEmitente:e.infNFe.emit.escolhas.CNPJ,mod:Number(e.infNFe.ide.mod),serie:Number(e.infNFe.ide.serie),nNF:Number(e.infNFe.ide.nNF),chNFe:r,situacao:"Emitido"},s=await $db.hibrido.lista({table:"documentoFiscalEletronicoXml",where:n});if(s.sort((l,u)=>l<u?1:-1),(i=s[0])!=null&&i.json){if((await this.emitirNFCeFaturaAnterior(s[0].json,t)).status==="Sucesso"){e.infNFe.ide.nNF=String(Number(e.infNFe.ide.nNF)+1);let u=zs.Nfe(Zn.infNFe,e.infNFe,e.outrosNFe.idDocumento);return e.outrosNFe.chNFe=zs.chNFe,this.servicoIntegrador(e,u,"emitirNFCe","Emiss\xE3o",1,t,"NFCe",e.outrosNFe.idContatoEmitente)}return}}let a;if(r)a=await $db.hibrido.lista({table:"documentoFiscalEletronicoErro",where:{chNFe:r}});else{const n={tpAmb:e.infNFe.ide.tpAmb,cpfCnpjEmitente:e.infNFe.emit.escolhas.CNPJ,mod:Number(e.infNFe.ide.mod),serie:Number(e.infNFe.ide.serie),nNF:Number(e.infNFe.ide.nNF),situacao:"Sem resposta"};a=await $db.hibrido.lista({table:"documentoFiscalEletronicoErro",where:n}),a.length===0&&(n.situacao="Falha na transmiss\xE3o",a=await $db.hibrido.lista({table:"documentoFiscalEletronicoErro",where:n}))}if(!!a&&a.length>0){if((await this.emitirNFCeFaturaAnterior(a[0].json,t)).status==="Sucesso"){e.infNFe.ide.nNF=String(Number(e.infNFe.ide.nNF)+1);let s=zs.Nfe(Zn.infNFe,e.infNFe,e.outrosNFe.idDocumento);return e.outrosNFe.chNFe=zs.chNFe,this.servicoIntegrador(e,s,"emitirNFCe","Emiss\xE3o",1,t,"NFCe",e.outrosNFe.idContatoEmitente)}return}},async emitirNFCeFaturaAnterior(e,t){const o=JSON.parse(e);o.infNFe.ide.dhEmi=sC.formatarDataNFe(new Date);const r=zs.Nfe(Zn.infNFe,o.infNFe,o.outrosNFe.idDocumento);return o.outrosNFe.chNFe=zs.chNFe,this.servicoIntegrador(o,r,"emitirNFCe","Emiss\xE3o",1,t,"NFCe",o.outrosNFe.idContatoEmitente)},async cancelarNFCe(e){let t=zs.EventoNFe(Zn.infEvento,e.infEvento,e.infNFe.ide.nNF);return this.servicoIntegrador(e,t,"CancelaNFe","Cancelamento",e.infEvento.nSeqEvento,{},"NFCe",e.outrosNFe.idContatoEmitente)},async imprimirNFCe(e,t){const o=await this.dadosAcesso(t);if(!o){const r={action:"ImprimeNFCe",nfce:Lu(e)};return this.executar(r,"ImprimeNFCe",t)}if(o){const r={parseTagValue:!1,ignoreAttributes:!1},i=new sp.XMLParser(r).parse(e),n=await $utils.impressaoObterHtml("nfce-danfe",i),s=JSON.stringify({content:n}),l="/print";if((o==null?void 0:o.via)==="websocket"&&await $utils.p2p.enviarMensagem(o.id,s,l),(o==null?void 0:o.via)==="http"){const u=new Headers;u.append("Content-type","application/json; charset=utf-8"),await fetch(`${yc}${l}`,{method:"POST",mode:"cors",headers:u,body:s})}return{status:"ok",mensagem:"Cupom impresso"}}},async executar(e,t,o){try{await this.urlIntegrador(t,o);const r=await Rd.post(this.url,y3(e));if(r.status!==200||!r.data)throw console.error(`Falha de comunica\xE7\xE3o com o Integrador!
Servidor: `+this.url||`ND
Response.status: `+r.status||`ND
Response.statusText: `+r.statusText||`ND
Response.data: `+JSON.stringify(r.data||{info:"ND"})),new Nl(`Falha de comunica\xE7\xE3o com o Integrador! 
Servidor: `+this.url);return r.data}catch(r){throw r.message==="Network Error"?new Nl(`Verifique se o integrador foi iniciado! 
Servidor: `+this.url):(console.error(`Falha de comunica\xE7\xE3o com o Integrador! 
Servidor: `+this.url+`
`+r.message),new Nl(`Falha de comunica\xE7\xE3o com o Integrador! 
Servidor: `+this.url))}},async inutilizar(e,t,o){let r={id:Kt(),infInut:t,outrosNFe:sC.completarOutrosNFe(lM,{}),infNFe:{ide:{tpAmb:t.tpAmb,mod:t.mod,serie:t.serie,nNF:t.nNFFin},emit:{escolhas:{CNPJ:t.CNPJ}}}},a=zs.InutilizarNFe(e,t);return this.servicoIntegrador(r,a,"InutilizaNFe","Inutiliza\xE7\xE3o",1,{},"NFCe",o)},async servicoIntegrador(e,t,o,r,a,i={},n,s){var d,f,m,p,v;let l,u;if(~["NFe","NFCe"].indexOf(n))try{let g=0,x,b;x=await $db.configuracoes.le({nome:"integrador.servidor.opcoes"}),b=(m=JSON.parse((f=(d=x==null?void 0:x[0])==null?void 0:d.valor)!=null?f:null))!=null?m:[],b.length>1&&(En.hide(),g=await $g.promptServicoIntegrador.show({buttons:b.map(_=>({label:_.descricao}))}),En.show({spinner:FJ,spinnerColor:"amber",message:"Selecionando Certificado e Emitindo a nota"})),u=(p=b[g])==null?void 0:p.motor,l=(v=b[g])==null?void 0:v.url}catch(g){console.error(g),$q.notify({type:"negative",message:"Erro ao obter configura\xE7\xE3o 'integrador.servidor.opcoes'."});return}return(u==null?void 0:u.toLowerCase())==="node"&&l?await this.servicoIntegradorNode(e,t,o,r,a,i,n,s,l):(u==null?void 0:u.toLowerCase())==="c#"&&l?await this.servicoIntegradorB15(e,t,o,r,a,i,n,s,l):await this.servicoIntegradorB15(e,t,o,r,a,i,n,s)},async servicoIntegradorB15(e,t,o,r,a,i={},n,s,l){const u='<?xml version="1.0" encoding="utf-8"?>'+new XMLSerializer().serializeToString(t);let c="",d;const f=e.infNFe.emit||{escolhas:{CPF:"",CNPJ:""},xNome:"",xFant:""},m={id:Kt(),tipo:e.infNFe.ide.mod==="65"?"NFCe":"NFe",operacao:r,situacao:"Sem resposta",tpAmb:e.infNFe.ide.tpAmb,mod:Number(e.infNFe.ide.mod),serie:Number(e.infNFe.ide.serie),nNF:Number(e.infNFe.ide.nNF),nNFFin:Number((e.infInut||{}).nNFFin||0),nSeqEvento:Number(a),chNFe:e.outrosNFe.chNFe,dataHoraEnvio:sa(),cpfCnpjEmitente:f.escolhas.CNPJ||f.escolhas.CPF||"",json:JSON.stringify(wf(e)),xmlEnvio:u,idDocumentoFiscalEletronico:e.id,idDocumento:e.outrosNFe.idDocumento};await et.documentoFiscalEletronicoErro.grava({atual:m});let p={};try{const b={action:o,documentoXml:Lu(u),...i};let _;if(d=l||await this.urlIntegrador(n,s),_=await Rd.post(d,y3(b)),p=_.data||{},_.status!==200||!_.data)throw console.error(`Falha de comunica\xE7\xE3o com o Integrador!
Servidor: `+d||`ND
Response.status: `+_.status||`ND
Response.statusText: `+_.statusText||`ND
Response.data: `+JSON.stringify(_.data||{info:"ND"})),c=`Falha de comunica\xE7\xE3o com o Integrador! 
Servidor: `+d,await et.documentoFiscalEletronicoErro.grava({atual:{...m,mensagem:c,situacao:"Erro integrador"},original:m}),new Nl(c)}catch(b){throw b.message==="Network Error"?(c=`Verifique se o integrador foi iniciado! 
Servidor: `+d,await et.documentoFiscalEletronicoErro.grava({atual:{...m,mensagem:c,situacao:"Sem integrador"},original:m}),new Nl(c)):(console.error(`Falha de comunica\xE7\xE3o com o Integrador! 
Servidor: `+d+`
`+b.message),c=`Falha de comunica\xE7\xE3o com o Integrador! 
Servidor: `+d,await et.documentoFiscalEletronicoErro.grava({atual:{...m,mensagem:c,situacao:"Erro no integrador"},original:m}),new Nl(c))}let v=e.outrosNFe,g="";p.protNFe?v.protNFe={tpAmb:p.protNFe.tpAmb,chNFe:p.protNFe.chNFe,nProt:p.protNFe.nProt,dhRecbto:p.protNFe.dhRecbto,cStat:p.protNFe.cStat,xMotivo:p.protNFe.xMotivo}:p.protNFe={},p.status&&p.status!=="Erro"&&p.protNFe.nProt?(v.situacao=p.situacao||v.situacao,v.situacaoErro="",v.mensagem=ev(p.mensagem),g=p.protNFe.xMotivo+`
Protocolo: `+v.protNFe.nProt+`
Data recebimento: `+v.protNFe.dhRecbto,r==="Emiss\xE3o"&&!!p.protNFe.nProt&&(v.emitida=!0,v.nProt_emissao=p.protNFe.nProt,v.dhRecbto_emissao=p.protNFe.dhRecbto),r==="Cancelamento"&&!!p.protNFe.nProt&&(v.cancelada=!0)):(p.status="Erro",v.situacaoErro=p.situacao||v.situacao+" - Erro",v.mensagem=ev(p.mensagem||"Falha na opera\xE7\xE3o!"),g=(p.protNFe||{}).xMotivo||""),v.status=p.status;const x={...m,status:v.status,situacao:p.status==="Erro"?v.situacaoErro:v.situacao,mensagem:v.mensagem,cStat:p.protNFe.cStat,xMotivo:p.protNFe.xMotivo,nProt:p.protNFe.nProt,dhRecbto:p.protNFe.dhRecbto,dataHoraResposta:sa(),json:JSON.stringify(wf(e)),xmlProt:p.xml||""};if(p.status==="Erro")await et.documentoFiscalEletronicoErro.grava({atual:x,original:m});else if(await et.documentoFiscalEletronicoErro.remove(x.id),x.id=Kt(),await et.documentoFiscalEletronicoXml.grava({atual:x}),x.tipo==="NFCe"){const b=e.infNFe.dest||{escolhas:{CPF:"",CNPJ:""},xNome:"",xFant:""},_=await $db.hibrido.le({table:"documentoFiscalEletronico",id:e.id}),w={id:e.id,tipo:x.tipo,situacao:v.situacao,tpAmb:e.infNFe.ide.tpAmb,mod:Number(e.infNFe.ide.mod),serie:Number(e.infNFe.ide.serie),nNF:Number(e.infNFe.ide.nNF),chNFe:e.outrosNFe.chNFe,vNF:((e.infNFe.total||{}).ICMSTot||{}).vNF,dhEmi:e.infNFe.ide.dhEmi,dataHoraEmissao:Xo.formatDate(e.infNFe.ide.dhEmi),dataHoraCriacao:x.dataHoraEnvio,dataHoraAlteracao:x.dataHoraResposta,cpfCnpjEmitente:f.escolhas.CNPJ||f.escolhas.CPF||"",xNomeEmitente:f.xNome,xFantEmitente:f.xFant,cpfCnpjDestinatario:b.escolhas.CNPJ||b.escolhas.CPF||"",xNomeDestinatario:b.xNome,xFantDestinatario:b.xFant,json:JSON.stringify(wf(e)),qrCode:v.situacao==="Emitido"&&!!p.QRCode?p.QRCode:_.qrCode,idDocumento:e.outrosNFe.idDocumento};await et.documentoFiscalEletronico.grava({atual:w,original:_})}return{status:p.status,cStat:(p.protNFe||{}).cStat||"",mensagem:v.mensagem,complemento:g,xml:p.xml}},async servicoIntegradorNode(e,t,o,r,a,i={},n,s,l){var g,x,b,_,w;const u='<?xml version="1.0" encoding="utf-8"?>'+new XMLSerializer().serializeToString(t),c=e.infNFe.emit||{escolhas:{CPF:"",CNPJ:""},xNome:"",xFant:""},d={id:Kt(),tipo:e.infNFe.ide.mod==="65"?"NFCe":"NFe",operacao:r,situacao:"Sem resposta",tpAmb:e.infNFe.ide.tpAmb,mod:Number(e.infNFe.ide.mod),serie:Number(e.infNFe.ide.serie),nNF:Number(e.infNFe.ide.nNF),nNFFin:Number((e.infInut||{}).nNFFin||0),nSeqEvento:Number(a),chNFe:e.outrosNFe.chNFe,dataHoraEnvio:sa(),cpfCnpjEmitente:c.escolhas.CNPJ||c.escolhas.CPF||"",json:JSON.stringify(wf(e)),xmlEnvio:u,idDocumentoFiscalEletronico:e.id,idDocumento:e.outrosNFe.idDocumento};await et.documentoFiscalEletronicoErro.grava({atual:d});let f={};try{const S=new Headers;let D,M;if(S.append("Content-type","application/json; charset=utf-8"),["EmiteNFe","emitirNFCe"].includes(o)&&(D=await fetch(`${l}/nfe/emitir`,{method:"POST",mode:"cors",headers:S,body:JSON.stringify({xml:u,chNFe:e.outrosNFe.chNFe,cpfCnpjEmitente:c.escolhas.CNPJ||c.escolhas.CPF})})),o==="CancelaNFe"&&(D=await fetch(`${l}/nfe/cancelar`,{method:"POST",mode:"cors",headers:S,body:JSON.stringify({xml:u,tpEvento:e.infEvento.tpEvento,nSeqEvento:e.infEvento.nSeqEvento,chNFe:e.outrosNFe.chNFe,cpfCnpjEmitente:c.escolhas.CNPJ||c.escolhas.CPF})})),o==="CartaCorrecaoNFe"&&(D=await fetch(`${l}/nfe/carta-correcao`,{method:"POST",mode:"cors",headers:S,body:JSON.stringify({xml:u,tpEvento:e.infEventoCC.tpEvento,nSeqEvento:e.infEventoCC.nSeqEvento,chNFe:e.outrosNFe.chNFe,cpfCnpjEmitente:c.escolhas.CNPJ||c.escolhas.CPF})})),o==="InutilizaNFe"&&(D=await fetch(`${l}/nfe/inutilizar`,{method:"POST",mode:"cors",headers:S,body:JSON.stringify({xml:u})})),f=await D.json(),!D.ok)throw f!=null&&f.error?new Error(f.error):new Error("GError:N\xE3o foi poss\xEDvel concluir a opera\xE7\xE3o.");const O=["100","110","150","205","301","302","303"];e.outrosNFe.timeout=!1,["emitirNFCe","EmiteNFe"].includes(o)&&O.includes((g=f==null?void 0:f.protNFe)==null?void 0:g.cStat)&&(e.outrosNFe.transmitida=!0,f.status="Sucesso",f.situacao="Emitido",f.mensagem=`Nota N\xBA ${e.infNFe.ide.nNF} transmitida com sucesso!`);const T=["135","155"];o==="CancelaNFe"&&T.includes((x=f==null?void 0:f.protNFe)==null?void 0:x.cStat)&&(f.status="Sucesso",f.situacao="Cancelado",f.mensagem="Nota cancelada com sucesso!"),o==="CartaCorrecaoNFe"&&T.includes((b=f==null?void 0:f.protNFe)==null?void 0:b.cStat)&&(f.status="Sucesso",f.situacao="Carta de Corre\xE7\xE3o",f.mensagem="Carta de Corre\xE7\xE3o emitida com sucesso!"),o==="InutilizaNFe"&&((_=f==null?void 0:f.protNFe)==null?void 0:_.cStat)==="102"&&(f.status="Sucesso",f.situacao="Inutilizado",f.mensagem="Inutiliza\xE7\xE3o realizada com sucesso!")}catch(S){const D=/GError:.+/.test(S.message);let M="N\xE3o foi poss\xEDvel concluir a opera\xE7\xE3o.";throw D&&(S.message.slice(7)==="Tempo excedido."&&(e.outrosNFe.timeout=!0),M=S.message.slice(7)),await et.documentoFiscalEletronicoErro.grava({atual:{...d,mensagem:M,situacao:"Erro"},original:d}),new Nl(M)}let m=e.outrosNFe,p="";f.protNFe?(f.protNFe.chNFe&&f.protNFe.chNFe!==d.chNFe&&(d.chNFe=f.protNFe.chNFe,m.chNFe=f.protNFe.chNFe),m.protNFe={tpAmb:f.protNFe.tpAmb,chNFe:f.protNFe.chNFe,nProt:f.protNFe.nProt,dhRecbto:f.protNFe.dhRecbto,cStat:f.protNFe.cStat,xMotivo:f.protNFe.xMotivo}):f.protNFe={},f.status&&f.status!=="Erro"&&f.protNFe.nProt?(m.situacao=f.situacao||m.situacao,m.situacaoErro="",m.mensagem=ev((w=f.mensagem)!=null?w:""),p=f.protNFe.xMotivo+`
Protocolo: `+m.protNFe.nProt+`
Data recebimento: `+m.protNFe.dhRecbto,r==="Emiss\xE3o"&&!!f.protNFe.nProt&&(m.emitida=!0,m.nProt_emissao=f.protNFe.nProt,m.dhRecbto_emissao=f.protNFe.dhRecbto),r==="Cancelamento"&&!!f.protNFe.nProt&&(m.cancelada=!0)):(f.status="Erro",m.situacaoErro=f.situacao||m.situacao+" - Erro",m.mensagem=ev(f.mensagem||"Falha na opera\xE7\xE3o!"),p=(f.protNFe||{}).xMotivo||""),m.status=f.status;const v={...d,status:m.status,situacao:f.status==="Erro"?m.situacaoErro:m.situacao,mensagem:m.mensagem,cStat:f.protNFe.cStat,xMotivo:f.protNFe.xMotivo,nProt:f.protNFe.nProt,dhRecbto:f.protNFe.dhRecbto,dataHoraResposta:sa(),json:JSON.stringify(wf(e)),xmlProt:f.xml||""};if(f.status==="Erro")await et.documentoFiscalEletronicoErro.grava({atual:v,original:d});else if(await et.documentoFiscalEletronicoErro.remove(v.id),v.id=Kt(),await et.documentoFiscalEletronicoXml.grava({atual:v}),v.tipo==="NFCe"){const S=e.infNFe.dest||{escolhas:{CPF:"",CNPJ:""},xNome:"",xFant:""},D=await $db.hibrido.le({table:"documentoFiscalEletronico",id:e.id}),M={id:e.id,tipo:v.tipo,situacao:m.situacao,tpAmb:e.infNFe.ide.tpAmb,mod:Number(e.infNFe.ide.mod),serie:Number(e.infNFe.ide.serie),nNF:Number(e.infNFe.ide.nNF),chNFe:e.outrosNFe.chNFe,vNF:((e.infNFe.total||{}).ICMSTot||{}).vNF,dhEmi:e.infNFe.ide.dhEmi,dataHoraEmissao:Xo.formatDate(e.infNFe.ide.dhEmi),dataHoraCriacao:v.dataHoraEnvio,dataHoraAlteracao:v.dataHoraResposta,cpfCnpjEmitente:c.escolhas.CNPJ||c.escolhas.CPF||"",xNomeEmitente:c.xNome,xFantEmitente:c.xFant,cpfCnpjDestinatario:S.escolhas.CNPJ||S.escolhas.CPF||"",xNomeDestinatario:S.xNome,xFantDestinatario:S.xFant,json:JSON.stringify(wf(e)),qrCode:m.situacao==="Emitido"&&!!f.QRCode?f.QRCode:D.qrCode,idDocumento:e.outrosNFe.idDocumento};await et.documentoFiscalEletronico.grava({atual:M,original:D})}return{status:f.status,cStat:(f.protNFe||{}).cStat||"",mensagem:m.mensagem,complemento:p,xml:f.xml}}};async function x3(e){let t="";for(let o=1;o<=5;o++)try{let r=await NJ.executar({action:"ArquivoLeTexto",parametro:e});if(r.status==="Sucesso")return r.conteudo;t=`Erro em ArquivoLeTexto no integrador. Tentativa ${o}. Arquivo: ${e} - ${r.mensagem}`,console.error(t),await Vd(1e3)}catch(r){t=`Erro (${r.name}) em ArquivoLeTexto no integrador. Tentativa ${o}. Arquivo: ${e} - ${r.message}`,console.error(t),await Vd(1e3)}Na(!0,t)}async function kJ(e){let t=await x3(`c:\\Geeks\\DadosPdv\\${e}\\index.json`);const o=JSON.parse(t);Wt.log("bulkPut",new Date().toLocaleTimeString("pt-br"),e,o);let r=0;for(const a in o.tabela){Wt.log("bulkPut",new Date().toLocaleTimeString("pt-br"),e,"clear",a),await Se(e)[a].clear();for(const i of o.tabela[a]){t=await x3(`c:\\Geeks\\DadosPdv\\${e}\\${i}`);const n=JSON.parse(t)[a],s=1e4;for(let l=0;l<n.length;l+=s){Wt.log("bulkPut",new Date().toLocaleTimeString("pt-br"),e,i,r);const u=n.slice(l,l+s);r+=u.length,await Se(e)[a].bulkPut(u)}}}return o}function RJ(e,t,o){if(!e||!t||!o)throw new Error("\xC9 necess\xE1rio informar UF, localidade e logradouro.");if(o.length<=3)throw new Error("Informe ao menos tr\xEAs caracteres do logradouro.");return Rd.get(`https://viacep.com.br/ws/${e}/${t}/${o}/json/`)}function VJ(e){if(!e)throw new Error("\xC9 necess\xE1rio informar um CEP.");if(e=e.toString().replace(/[^0-9]/g,""),e.length!==8)throw new Error("\xC9 necess\xE1rio que o CEP possua oito d\xEDgitos.");return Rd.get(`https://viacep.com.br/ws/${e}/json/`)}function Pr(e){return JSON.parse(JSON.stringify(e))}const Fp=function(e){let t;if(Array.isArray(e)){let o=[];for(const r of e)t=Fp(r),t!==null&&o.push(t);if(e.length!==0)return o}else if(typeof e=="object"&&e!==null){let o={};for(const r in e)t=Fp(e[r]),t!==null&&(o[r]=t);if(Object.keys(o).length!==0)return o}else return e===void 0?null:e;return null},Tn=function(e){if(Array.isArray(e))return e.map(t=>Tn(t));if(typeof e=="object"&&e!==null){let t={};for(const o in e)t[o]=Tn(e[o]);return t}else return e};function Vr(e){if(typeof e!="object")throw new Error("O object n\xE3o \xE9 v\xE1lido.");e=Pr(e);for(const t in e){const o=e[t];(o!==null||o!==void 0)&&(typeof o!="object"||(e[t]=Vr(o),o&&Object.keys(o).length>0))||(Array.isArray(e)?e.splice(t,1):delete e[t])}return e}function BJ(e){if([0,12,13,14].includes(e.length))return e;{let a="999000000000".substring(0,12-e.length)+e;var t=a.split(""),o=(Number(t[1])+Number(t[3])+Number(t[5])+Number(t[7])+Number(t[9])+Number(t[11]))*3+(Number(t[0])+Number(t[2])+Number(t[4])+Number(t[6])+Number(t[8])+Number(t[10])),r=o%10;return r>0&&(r=10-r),a+String(r)}}function qJ({array:e,chave:t="id",campos:o,objetoOriginal:r}){const a={};for(const i of e||[]){let n;if(o){n={};for(const l of o){const u=Array.isArray(l)?l[0]:l,c=Array.isArray(l)?l[1]:l;n[c]=i[u]}}else n={...i},delete n[t];const s=i[t];a[s]=n}for(const i in r)a[i]||(a[i]=null);return a}function LJ({objetos:e,chave:t="id",campos:o}){const r=[];for(const a in e)if(a!==t){let i={[t]:a};if(o)for(const n of o){const s=Array.isArray(n)?n[0]:n,l=Array.isArray(n)?n[1]:n;i[l]=e[a][s]}else i={...i,...e[a]};r.push(i)}return r}function uC(e){try{return Xo.formatDate(e,"DD/MM/YYYY HH:mm:ss.SSS")}catch{return""}}function sa(e){let t=new Date(e);return isNaN(t)&&(t=new Date),Xo.formatDate(t)}const C3=[null,void 0,"",0,!1],$J=function(e,t){let o=[];const r=e.length>t.length?e.length:t.length;for(let a=0;a<r;a++){const i=NE(e[a],t[a]);i&&(o[a]=i)}return o.length>0?o:null},UJ=function(e,t){let o={};e=e||{},t=t||{};const r=[...new Set([...Object.keys(e),...Object.keys(t)])];for(const a of r){const i=NE(e[a],t[a]);i&&(o[a]=i)}return Object.keys(o).length>0?o:null},NE=function(e,t){if(C3.includes(e)){if(C3.includes(t))return null}else if(Array.isArray(e)){if(Array.isArray(t))return $J(e,t)}else if(typeof e=="object"&&typeof t=="object"&&t!==null)return UJ(e,t);if(e!==t){const o=Fp(e),r=Fp(t);if(o!==r)return{original:o,alterado:r}}return null},cn=function(e,t,o={}){let r={};for(const a in t){if(t[a]===null){if(!o.mantemNull)continue}else{if(t[a]===void 0||typeof t[a]=="object")continue;if(typeof t[a]=="number"&&isNaN(t[a]))continue}e[a]!==t[a]&&(r[a]=t[a])}return r};var Aa={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,t){(function(){var o,r="4.17.21",a=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",n="Expected a function",s="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",u=500,c="__lodash_placeholder__",d=1,f=2,m=4,p=1,v=2,g=1,x=2,b=4,_=8,w=16,S=32,D=64,M=128,O=256,T=512,I=30,N="...",P=800,F=16,L=1,z=2,H=3,X=1/0,Y=9007199254740991,de=17976931348623157e292,ye=0/0,W=4294967295,re=W-1,_e=W>>>1,ve=[["ary",M],["bind",g],["bindKey",x],["curry",_],["curryRight",w],["flip",T],["partial",S],["partialRight",D],["rearg",O]],ke="[object Arguments]",Ie="[object Array]",he="[object AsyncFunction]",De="[object Boolean]",Te="[object Date]",J="[object DOMException]",q="[object Error]",ne="[object Function]",U="[object GeneratorFunction]",Z="[object Map]",Ce="[object Number]",Q="[object Null]",V="[object Object]",R="[object Promise]",ee="[object Proxy]",ce="[object RegExp]",se="[object Set]",pe="[object String]",we="[object Symbol]",Ne="[object Undefined]",Ge="[object WeakMap]",Ze="[object WeakSet]",ot="[object ArrayBuffer]",Pt="[object DataView]",$t="[object Float32Array]",fo="[object Float64Array]",He="[object Int8Array]",tt="[object Int16Array]",$e="[object Int32Array]",dt="[object Uint8Array]",Rt="[object Uint8ClampedArray]",Ut="[object Uint16Array]",gt="[object Uint32Array]",po=/\b__p \+= '';/g,Ea=/\b(__p \+=) '' \+/g,pr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,zi=/&(?:amp|lt|gt|quot|#39);/g,ni=/[&<>"']/g,ps=RegExp(zi.source),qn=RegExp(ni.source),Xe=/<%-([\s\S]+?)%>/g,It=/<%([\s\S]+?)%>/g,Qt=/<%=([\s\S]+?)%>/g,Zt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ro=/^\w*$/,la=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xe=/[\\^$.*+?()[\]{}|]/g,Me=RegExp(xe.source),je=/^\s+/,pt=/\s/,ht=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Oo=/\{\n\/\* \[wrapped with (.+)\] \*/,Lt=/,? & /,ho=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$o=/[()=,{}\[\]\/\s]/,Hi=/\\(\\)?/g,ml=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pl=/\w*$/,e0=/^[-+]0x[0-9a-f]+$/i,Fb=/^0b[01]+$/i,Uh=/^\[object .+?Constructor\]$/,zh=/^0o[0-7]+$/i,Hh=/^(?:0|[1-9]\d*)$/,jh=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Oe=/($^)/,Dt=/['\n\r\u2028\u2029\\]/g,bt="\\ud800-\\udfff",mo="\\u0300-\\u036f",ha="\\ufe20-\\ufe2f",ca="\\u20d0-\\u20ff",hr=mo+ha+ca,$a="\\u2700-\\u27bf",ef="a-z\\xdf-\\xf6\\xf8-\\xff",z7="\\xac\\xb1\\xd7\\xf7",H7="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",j7="\\u2000-\\u206f",G7=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",uA="A-Z\\xc0-\\xd6\\xd8-\\xde",dA="\\ufe0e\\ufe0f",fA=z7+H7+j7+G7,Mb="['\u2019]",W7="["+bt+"]",mA="["+fA+"]",Gh="["+hr+"]",pA="\\d+",Q7="["+$a+"]",hA="["+ef+"]",vA="[^"+bt+fA+pA+$a+ef+uA+"]",Nb="\\ud83c[\\udffb-\\udfff]",X7="(?:"+Gh+"|"+Nb+")",gA="[^"+bt+"]",kb="(?:\\ud83c[\\udde6-\\uddff]){2}",Rb="[\\ud800-\\udbff][\\udc00-\\udfff]",tf="["+uA+"]",_A="\\u200d",bA="(?:"+hA+"|"+vA+")",K7="(?:"+tf+"|"+vA+")",yA="(?:"+Mb+"(?:d|ll|m|re|s|t|ve))?",xA="(?:"+Mb+"(?:D|LL|M|RE|S|T|VE))?",CA=X7+"?",wA="["+dA+"]?",Y7="(?:"+_A+"(?:"+[gA,kb,Rb].join("|")+")"+wA+CA+")*",J7="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Z7="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",EA=wA+CA+Y7,eV="(?:"+[Q7,kb,Rb].join("|")+")"+EA,tV="(?:"+[gA+Gh+"?",Gh,kb,Rb,W7].join("|")+")",oV=RegExp(Mb,"g"),aV=RegExp(Gh,"g"),Vb=RegExp(Nb+"(?="+Nb+")|"+tV+EA,"g"),rV=RegExp([tf+"?"+hA+"+"+yA+"(?="+[mA,tf,"$"].join("|")+")",K7+"+"+xA+"(?="+[mA,tf+bA,"$"].join("|")+")",tf+"?"+bA+"+"+yA,tf+"+"+xA,Z7,J7,pA,eV].join("|"),"g"),iV=RegExp("["+_A+bt+hr+dA+"]"),nV=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,sV=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],lV=-1,Oa={};Oa[$t]=Oa[fo]=Oa[He]=Oa[tt]=Oa[$e]=Oa[dt]=Oa[Rt]=Oa[Ut]=Oa[gt]=!0,Oa[ke]=Oa[Ie]=Oa[ot]=Oa[De]=Oa[Pt]=Oa[Te]=Oa[q]=Oa[ne]=Oa[Z]=Oa[Ce]=Oa[V]=Oa[ce]=Oa[se]=Oa[pe]=Oa[Ge]=!1;var Sa={};Sa[ke]=Sa[Ie]=Sa[ot]=Sa[Pt]=Sa[De]=Sa[Te]=Sa[$t]=Sa[fo]=Sa[He]=Sa[tt]=Sa[$e]=Sa[Z]=Sa[Ce]=Sa[V]=Sa[ce]=Sa[se]=Sa[pe]=Sa[we]=Sa[dt]=Sa[Rt]=Sa[Ut]=Sa[gt]=!0,Sa[q]=Sa[ne]=Sa[Ge]=!1;var cV={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},uV={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},dV={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},fV={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},mV=parseFloat,pV=parseInt,SA=typeof vt=="object"&&vt&&vt.Object===Object&&vt,hV=typeof self=="object"&&self&&self.Object===Object&&self,Gr=SA||hV||Function("return this")(),Bb=t&&!t.nodeType&&t,Au=Bb&&!0&&e&&!e.nodeType&&e,IA=Au&&Au.exports===Bb,qb=IA&&SA.process,Ln=function(){try{var Be=Au&&Au.require&&Au.require("util").types;return Be||qb&&qb.binding&&qb.binding("util")}catch{}}(),AA=Ln&&Ln.isArrayBuffer,TA=Ln&&Ln.isDate,DA=Ln&&Ln.isMap,OA=Ln&&Ln.isRegExp,PA=Ln&&Ln.isSet,FA=Ln&&Ln.isTypedArray;function hn(Be,Ye,We){switch(We.length){case 0:return Be.call(Ye);case 1:return Be.call(Ye,We[0]);case 2:return Be.call(Ye,We[0],We[1]);case 3:return Be.call(Ye,We[0],We[1],We[2])}return Be.apply(Ye,We)}function vV(Be,Ye,We,Nt){for(var vo=-1,ea=Be==null?0:Be.length;++vo<ea;){var xr=Be[vo];Ye(Nt,xr,We(xr),Be)}return Nt}function $n(Be,Ye){for(var We=-1,Nt=Be==null?0:Be.length;++We<Nt&&Ye(Be[We],We,Be)!==!1;);return Be}function gV(Be,Ye){for(var We=Be==null?0:Be.length;We--&&Ye(Be[We],We,Be)!==!1;);return Be}function MA(Be,Ye){for(var We=-1,Nt=Be==null?0:Be.length;++We<Nt;)if(!Ye(Be[We],We,Be))return!1;return!0}function cc(Be,Ye){for(var We=-1,Nt=Be==null?0:Be.length,vo=0,ea=[];++We<Nt;){var xr=Be[We];Ye(xr,We,Be)&&(ea[vo++]=xr)}return ea}function Wh(Be,Ye){var We=Be==null?0:Be.length;return!!We&&of(Be,Ye,0)>-1}function Lb(Be,Ye,We){for(var Nt=-1,vo=Be==null?0:Be.length;++Nt<vo;)if(We(Ye,Be[Nt]))return!0;return!1}function Ua(Be,Ye){for(var We=-1,Nt=Be==null?0:Be.length,vo=Array(Nt);++We<Nt;)vo[We]=Ye(Be[We],We,Be);return vo}function uc(Be,Ye){for(var We=-1,Nt=Ye.length,vo=Be.length;++We<Nt;)Be[vo+We]=Ye[We];return Be}function $b(Be,Ye,We,Nt){var vo=-1,ea=Be==null?0:Be.length;for(Nt&&ea&&(We=Be[++vo]);++vo<ea;)We=Ye(We,Be[vo],vo,Be);return We}function _V(Be,Ye,We,Nt){var vo=Be==null?0:Be.length;for(Nt&&vo&&(We=Be[--vo]);vo--;)We=Ye(We,Be[vo],vo,Be);return We}function Ub(Be,Ye){for(var We=-1,Nt=Be==null?0:Be.length;++We<Nt;)if(Ye(Be[We],We,Be))return!0;return!1}var bV=zb("length");function yV(Be){return Be.split("")}function xV(Be){return Be.match(ho)||[]}function NA(Be,Ye,We){var Nt;return We(Be,function(vo,ea,xr){if(Ye(vo,ea,xr))return Nt=ea,!1}),Nt}function Qh(Be,Ye,We,Nt){for(var vo=Be.length,ea=We+(Nt?1:-1);Nt?ea--:++ea<vo;)if(Ye(Be[ea],ea,Be))return ea;return-1}function of(Be,Ye,We){return Ye===Ye?MV(Be,Ye,We):Qh(Be,kA,We)}function CV(Be,Ye,We,Nt){for(var vo=We-1,ea=Be.length;++vo<ea;)if(Nt(Be[vo],Ye))return vo;return-1}function kA(Be){return Be!==Be}function RA(Be,Ye){var We=Be==null?0:Be.length;return We?jb(Be,Ye)/We:ye}function zb(Be){return function(Ye){return Ye==null?o:Ye[Be]}}function Hb(Be){return function(Ye){return Be==null?o:Be[Ye]}}function VA(Be,Ye,We,Nt,vo){return vo(Be,function(ea,xr,Ca){We=Nt?(Nt=!1,ea):Ye(We,ea,xr,Ca)}),We}function wV(Be,Ye){var We=Be.length;for(Be.sort(Ye);We--;)Be[We]=Be[We].value;return Be}function jb(Be,Ye){for(var We,Nt=-1,vo=Be.length;++Nt<vo;){var ea=Ye(Be[Nt]);ea!==o&&(We=We===o?ea:We+ea)}return We}function Gb(Be,Ye){for(var We=-1,Nt=Array(Be);++We<Be;)Nt[We]=Ye(We);return Nt}function EV(Be,Ye){return Ua(Ye,function(We){return[We,Be[We]]})}function BA(Be){return Be&&Be.slice(0,UA(Be)+1).replace(je,"")}function vn(Be){return function(Ye){return Be(Ye)}}function Wb(Be,Ye){return Ua(Ye,function(We){return Be[We]})}function t0(Be,Ye){return Be.has(Ye)}function qA(Be,Ye){for(var We=-1,Nt=Be.length;++We<Nt&&of(Ye,Be[We],0)>-1;);return We}function LA(Be,Ye){for(var We=Be.length;We--&&of(Ye,Be[We],0)>-1;);return We}function SV(Be,Ye){for(var We=Be.length,Nt=0;We--;)Be[We]===Ye&&++Nt;return Nt}var IV=Hb(cV),AV=Hb(uV);function TV(Be){return"\\"+fV[Be]}function DV(Be,Ye){return Be==null?o:Be[Ye]}function af(Be){return iV.test(Be)}function OV(Be){return nV.test(Be)}function PV(Be){for(var Ye,We=[];!(Ye=Be.next()).done;)We.push(Ye.value);return We}function Qb(Be){var Ye=-1,We=Array(Be.size);return Be.forEach(function(Nt,vo){We[++Ye]=[vo,Nt]}),We}function $A(Be,Ye){return function(We){return Be(Ye(We))}}function dc(Be,Ye){for(var We=-1,Nt=Be.length,vo=0,ea=[];++We<Nt;){var xr=Be[We];(xr===Ye||xr===c)&&(Be[We]=c,ea[vo++]=We)}return ea}function Xh(Be){var Ye=-1,We=Array(Be.size);return Be.forEach(function(Nt){We[++Ye]=Nt}),We}function FV(Be){var Ye=-1,We=Array(Be.size);return Be.forEach(function(Nt){We[++Ye]=[Nt,Nt]}),We}function MV(Be,Ye,We){for(var Nt=We-1,vo=Be.length;++Nt<vo;)if(Be[Nt]===Ye)return Nt;return-1}function NV(Be,Ye,We){for(var Nt=We+1;Nt--;)if(Be[Nt]===Ye)return Nt;return Nt}function rf(Be){return af(Be)?RV(Be):bV(Be)}function hs(Be){return af(Be)?VV(Be):yV(Be)}function UA(Be){for(var Ye=Be.length;Ye--&&pt.test(Be.charAt(Ye)););return Ye}var kV=Hb(dV);function RV(Be){for(var Ye=Vb.lastIndex=0;Vb.test(Be);)++Ye;return Ye}function VV(Be){return Be.match(Vb)||[]}function BV(Be){return Be.match(rV)||[]}var qV=function Be(Ye){Ye=Ye==null?Gr:nf.defaults(Gr.Object(),Ye,nf.pick(Gr,sV));var We=Ye.Array,Nt=Ye.Date,vo=Ye.Error,ea=Ye.Function,xr=Ye.Math,Ca=Ye.Object,Xb=Ye.RegExp,LV=Ye.String,Un=Ye.TypeError,Kh=We.prototype,$V=ea.prototype,sf=Ca.prototype,Yh=Ye["__core-js_shared__"],Jh=$V.toString,ua=sf.hasOwnProperty,UV=0,zA=function(){var y=/[^.]+$/.exec(Yh&&Yh.keys&&Yh.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}(),Zh=sf.toString,zV=Jh.call(Ca),HV=Gr._,jV=Xb("^"+Jh.call(ua).replace(xe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),e1=IA?Ye.Buffer:o,fc=Ye.Symbol,t1=Ye.Uint8Array,HA=e1?e1.allocUnsafe:o,o1=$A(Ca.getPrototypeOf,Ca),jA=Ca.create,GA=sf.propertyIsEnumerable,a1=Kh.splice,WA=fc?fc.isConcatSpreadable:o,o0=fc?fc.iterator:o,Tu=fc?fc.toStringTag:o,r1=function(){try{var y=Mu(Ca,"defineProperty");return y({},"",{}),y}catch{}}(),GV=Ye.clearTimeout!==Gr.clearTimeout&&Ye.clearTimeout,WV=Nt&&Nt.now!==Gr.Date.now&&Nt.now,QV=Ye.setTimeout!==Gr.setTimeout&&Ye.setTimeout,i1=xr.ceil,n1=xr.floor,Kb=Ca.getOwnPropertySymbols,XV=e1?e1.isBuffer:o,QA=Ye.isFinite,KV=Kh.join,YV=$A(Ca.keys,Ca),Cr=xr.max,si=xr.min,JV=Nt.now,ZV=Ye.parseInt,XA=xr.random,eB=Kh.reverse,Yb=Mu(Ye,"DataView"),a0=Mu(Ye,"Map"),Jb=Mu(Ye,"Promise"),lf=Mu(Ye,"Set"),r0=Mu(Ye,"WeakMap"),i0=Mu(Ca,"create"),s1=r0&&new r0,cf={},tB=Nu(Yb),oB=Nu(a0),aB=Nu(Jb),rB=Nu(lf),iB=Nu(r0),l1=fc?fc.prototype:o,n0=l1?l1.valueOf:o,KA=l1?l1.toString:o;function ue(y){if(Za(y)&&!bo(y)&&!(y instanceof Fo)){if(y instanceof zn)return y;if(ua.call(y,"__wrapped__"))return YT(y)}return new zn(y)}var uf=function(){function y(){}return function(E){if(!Xa(E))return{};if(jA)return jA(E);y.prototype=E;var k=new y;return y.prototype=o,k}}();function c1(){}function zn(y,E){this.__wrapped__=y,this.__actions__=[],this.__chain__=!!E,this.__index__=0,this.__values__=o}ue.templateSettings={escape:Xe,evaluate:It,interpolate:Qt,variable:"",imports:{_:ue}},ue.prototype=c1.prototype,ue.prototype.constructor=ue,zn.prototype=uf(c1.prototype),zn.prototype.constructor=zn;function Fo(y){this.__wrapped__=y,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=W,this.__views__=[]}function nB(){var y=new Fo(this.__wrapped__);return y.__actions__=ji(this.__actions__),y.__dir__=this.__dir__,y.__filtered__=this.__filtered__,y.__iteratees__=ji(this.__iteratees__),y.__takeCount__=this.__takeCount__,y.__views__=ji(this.__views__),y}function sB(){if(this.__filtered__){var y=new Fo(this);y.__dir__=-1,y.__filtered__=!0}else y=this.clone(),y.__dir__*=-1;return y}function lB(){var y=this.__wrapped__.value(),E=this.__dir__,k=bo(y),$=E<0,te=k?y.length:0,me=yq(0,te,this.__views__),Ae=me.start,Fe=me.end,Le=Fe-Ae,it=$?Fe:Ae-1,nt=this.__iteratees__,ft=nt.length,wt=0,jt=si(Le,this.__takeCount__);if(!k||!$&&te==Le&&jt==Le)return yT(y,this.__actions__);var to=[];e:for(;Le--&&wt<jt;){it+=E;for(var wo=-1,oo=y[it];++wo<ft;){var Po=nt[wo],qo=Po.iteratee,bn=Po.type,Ii=qo(oo);if(bn==z)oo=Ii;else if(!Ii){if(bn==L)continue e;break e}}to[wt++]=oo}return to}Fo.prototype=uf(c1.prototype),Fo.prototype.constructor=Fo;function Du(y){var E=-1,k=y==null?0:y.length;for(this.clear();++E<k;){var $=y[E];this.set($[0],$[1])}}function cB(){this.__data__=i0?i0(null):{},this.size=0}function uB(y){var E=this.has(y)&&delete this.__data__[y];return this.size-=E?1:0,E}function dB(y){var E=this.__data__;if(i0){var k=E[y];return k===l?o:k}return ua.call(E,y)?E[y]:o}function fB(y){var E=this.__data__;return i0?E[y]!==o:ua.call(E,y)}function mB(y,E){var k=this.__data__;return this.size+=this.has(y)?0:1,k[y]=i0&&E===o?l:E,this}Du.prototype.clear=cB,Du.prototype.delete=uB,Du.prototype.get=dB,Du.prototype.has=fB,Du.prototype.set=mB;function hl(y){var E=-1,k=y==null?0:y.length;for(this.clear();++E<k;){var $=y[E];this.set($[0],$[1])}}function pB(){this.__data__=[],this.size=0}function hB(y){var E=this.__data__,k=u1(E,y);if(k<0)return!1;var $=E.length-1;return k==$?E.pop():a1.call(E,k,1),--this.size,!0}function vB(y){var E=this.__data__,k=u1(E,y);return k<0?o:E[k][1]}function gB(y){return u1(this.__data__,y)>-1}function _B(y,E){var k=this.__data__,$=u1(k,y);return $<0?(++this.size,k.push([y,E])):k[$][1]=E,this}hl.prototype.clear=pB,hl.prototype.delete=hB,hl.prototype.get=vB,hl.prototype.has=gB,hl.prototype.set=_B;function vl(y){var E=-1,k=y==null?0:y.length;for(this.clear();++E<k;){var $=y[E];this.set($[0],$[1])}}function bB(){this.size=0,this.__data__={hash:new Du,map:new(a0||hl),string:new Du}}function yB(y){var E=C1(this,y).delete(y);return this.size-=E?1:0,E}function xB(y){return C1(this,y).get(y)}function CB(y){return C1(this,y).has(y)}function wB(y,E){var k=C1(this,y),$=k.size;return k.set(y,E),this.size+=k.size==$?0:1,this}vl.prototype.clear=bB,vl.prototype.delete=yB,vl.prototype.get=xB,vl.prototype.has=CB,vl.prototype.set=wB;function Ou(y){var E=-1,k=y==null?0:y.length;for(this.__data__=new vl;++E<k;)this.add(y[E])}function EB(y){return this.__data__.set(y,l),this}function SB(y){return this.__data__.has(y)}Ou.prototype.add=Ou.prototype.push=EB,Ou.prototype.has=SB;function vs(y){var E=this.__data__=new hl(y);this.size=E.size}function IB(){this.__data__=new hl,this.size=0}function AB(y){var E=this.__data__,k=E.delete(y);return this.size=E.size,k}function TB(y){return this.__data__.get(y)}function DB(y){return this.__data__.has(y)}function OB(y,E){var k=this.__data__;if(k instanceof hl){var $=k.__data__;if(!a0||$.length<a-1)return $.push([y,E]),this.size=++k.size,this;k=this.__data__=new vl($)}return k.set(y,E),this.size=k.size,this}vs.prototype.clear=IB,vs.prototype.delete=AB,vs.prototype.get=TB,vs.prototype.has=DB,vs.prototype.set=OB;function YA(y,E){var k=bo(y),$=!k&&ku(y),te=!k&&!$&&gc(y),me=!k&&!$&&!te&&pf(y),Ae=k||$||te||me,Fe=Ae?Gb(y.length,LV):[],Le=Fe.length;for(var it in y)(E||ua.call(y,it))&&!(Ae&&(it=="length"||te&&(it=="offset"||it=="parent")||me&&(it=="buffer"||it=="byteLength"||it=="byteOffset")||yl(it,Le)))&&Fe.push(it);return Fe}function JA(y){var E=y.length;return E?y[c2(0,E-1)]:o}function PB(y,E){return w1(ji(y),Pu(E,0,y.length))}function FB(y){return w1(ji(y))}function Zb(y,E,k){(k!==o&&!gs(y[E],k)||k===o&&!(E in y))&&gl(y,E,k)}function s0(y,E,k){var $=y[E];(!(ua.call(y,E)&&gs($,k))||k===o&&!(E in y))&&gl(y,E,k)}function u1(y,E){for(var k=y.length;k--;)if(gs(y[k][0],E))return k;return-1}function MB(y,E,k,$){return mc(y,function(te,me,Ae){E($,te,k(te),Ae)}),$}function ZA(y,E){return y&&$s(E,qr(E),y)}function NB(y,E){return y&&$s(E,Wi(E),y)}function gl(y,E,k){E=="__proto__"&&r1?r1(y,E,{configurable:!0,enumerable:!0,value:k,writable:!0}):y[E]=k}function e2(y,E){for(var k=-1,$=E.length,te=We($),me=y==null;++k<$;)te[k]=me?o:N2(y,E[k]);return te}function Pu(y,E,k){return y===y&&(k!==o&&(y=y<=k?y:k),E!==o&&(y=y>=E?y:E)),y}function Hn(y,E,k,$,te,me){var Ae,Fe=E&d,Le=E&f,it=E&m;if(k&&(Ae=te?k(y,$,te,me):k(y)),Ae!==o)return Ae;if(!Xa(y))return y;var nt=bo(y);if(nt){if(Ae=Cq(y),!Fe)return ji(y,Ae)}else{var ft=li(y),wt=ft==ne||ft==U;if(gc(y))return wT(y,Fe);if(ft==V||ft==ke||wt&&!te){if(Ae=Le||wt?{}:UT(y),!Fe)return Le?dq(y,NB(Ae,y)):uq(y,ZA(Ae,y))}else{if(!Sa[ft])return te?y:{};Ae=wq(y,ft,Fe)}}me||(me=new vs);var jt=me.get(y);if(jt)return jt;me.set(y,Ae),g4(y)?y.forEach(function(oo){Ae.add(Hn(oo,E,k,oo,y,me))}):h4(y)&&y.forEach(function(oo,Po){Ae.set(Po,Hn(oo,E,k,Po,y,me))});var to=it?Le?y2:b2:Le?Wi:qr,wo=nt?o:to(y);return $n(wo||y,function(oo,Po){wo&&(Po=oo,oo=y[Po]),s0(Ae,Po,Hn(oo,E,k,Po,y,me))}),Ae}function kB(y){var E=qr(y);return function(k){return eT(k,y,E)}}function eT(y,E,k){var $=k.length;if(y==null)return!$;for(y=Ca(y);$--;){var te=k[$],me=E[te],Ae=y[te];if(Ae===o&&!(te in y)||!me(Ae))return!1}return!0}function tT(y,E,k){if(typeof y!="function")throw new Un(n);return p0(function(){y.apply(o,k)},E)}function l0(y,E,k,$){var te=-1,me=Wh,Ae=!0,Fe=y.length,Le=[],it=E.length;if(!Fe)return Le;k&&(E=Ua(E,vn(k))),$?(me=Lb,Ae=!1):E.length>=a&&(me=t0,Ae=!1,E=new Ou(E));e:for(;++te<Fe;){var nt=y[te],ft=k==null?nt:k(nt);if(nt=$||nt!==0?nt:0,Ae&&ft===ft){for(var wt=it;wt--;)if(E[wt]===ft)continue e;Le.push(nt)}else me(E,ft,$)||Le.push(nt)}return Le}var mc=TT(Ls),oT=TT(o2,!0);function RB(y,E){var k=!0;return mc(y,function($,te,me){return k=!!E($,te,me),k}),k}function d1(y,E,k){for(var $=-1,te=y.length;++$<te;){var me=y[$],Ae=E(me);if(Ae!=null&&(Fe===o?Ae===Ae&&!_n(Ae):k(Ae,Fe)))var Fe=Ae,Le=me}return Le}function VB(y,E,k,$){var te=y.length;for(k=xo(k),k<0&&(k=-k>te?0:te+k),$=$===o||$>te?te:xo($),$<0&&($+=te),$=k>$?0:b4($);k<$;)y[k++]=E;return y}function aT(y,E){var k=[];return mc(y,function($,te,me){E($,te,me)&&k.push($)}),k}function Wr(y,E,k,$,te){var me=-1,Ae=y.length;for(k||(k=Sq),te||(te=[]);++me<Ae;){var Fe=y[me];E>0&&k(Fe)?E>1?Wr(Fe,E-1,k,$,te):uc(te,Fe):$||(te[te.length]=Fe)}return te}var t2=DT(),rT=DT(!0);function Ls(y,E){return y&&t2(y,E,qr)}function o2(y,E){return y&&rT(y,E,qr)}function f1(y,E){return cc(E,function(k){return xl(y[k])})}function Fu(y,E){E=hc(E,y);for(var k=0,$=E.length;y!=null&&k<$;)y=y[Us(E[k++])];return k&&k==$?y:o}function iT(y,E,k){var $=E(y);return bo(y)?$:uc($,k(y))}function Ei(y){return y==null?y===o?Ne:Q:Tu&&Tu in Ca(y)?bq(y):Fq(y)}function a2(y,E){return y>E}function BB(y,E){return y!=null&&ua.call(y,E)}function qB(y,E){return y!=null&&E in Ca(y)}function LB(y,E,k){return y>=si(E,k)&&y<Cr(E,k)}function r2(y,E,k){for(var $=k?Lb:Wh,te=y[0].length,me=y.length,Ae=me,Fe=We(me),Le=1/0,it=[];Ae--;){var nt=y[Ae];Ae&&E&&(nt=Ua(nt,vn(E))),Le=si(nt.length,Le),Fe[Ae]=!k&&(E||te>=120&&nt.length>=120)?new Ou(Ae&&nt):o}nt=y[0];var ft=-1,wt=Fe[0];e:for(;++ft<te&&it.length<Le;){var jt=nt[ft],to=E?E(jt):jt;if(jt=k||jt!==0?jt:0,!(wt?t0(wt,to):$(it,to,k))){for(Ae=me;--Ae;){var wo=Fe[Ae];if(!(wo?t0(wo,to):$(y[Ae],to,k)))continue e}wt&&wt.push(to),it.push(jt)}}return it}function $B(y,E,k,$){return Ls(y,function(te,me,Ae){E($,k(te),me,Ae)}),$}function c0(y,E,k){E=hc(E,y),y=GT(y,E);var $=y==null?y:y[Us(Gn(E))];return $==null?o:hn($,y,k)}function nT(y){return Za(y)&&Ei(y)==ke}function UB(y){return Za(y)&&Ei(y)==ot}function zB(y){return Za(y)&&Ei(y)==Te}function u0(y,E,k,$,te){return y===E?!0:y==null||E==null||!Za(y)&&!Za(E)?y!==y&&E!==E:HB(y,E,k,$,u0,te)}function HB(y,E,k,$,te,me){var Ae=bo(y),Fe=bo(E),Le=Ae?Ie:li(y),it=Fe?Ie:li(E);Le=Le==ke?V:Le,it=it==ke?V:it;var nt=Le==V,ft=it==V,wt=Le==it;if(wt&&gc(y)){if(!gc(E))return!1;Ae=!0,nt=!1}if(wt&&!nt)return me||(me=new vs),Ae||pf(y)?qT(y,E,k,$,te,me):gq(y,E,Le,k,$,te,me);if(!(k&p)){var jt=nt&&ua.call(y,"__wrapped__"),to=ft&&ua.call(E,"__wrapped__");if(jt||to){var wo=jt?y.value():y,oo=to?E.value():E;return me||(me=new vs),te(wo,oo,k,$,me)}}return wt?(me||(me=new vs),_q(y,E,k,$,te,me)):!1}function jB(y){return Za(y)&&li(y)==Z}function i2(y,E,k,$){var te=k.length,me=te,Ae=!$;if(y==null)return!me;for(y=Ca(y);te--;){var Fe=k[te];if(Ae&&Fe[2]?Fe[1]!==y[Fe[0]]:!(Fe[0]in y))return!1}for(;++te<me;){Fe=k[te];var Le=Fe[0],it=y[Le],nt=Fe[1];if(Ae&&Fe[2]){if(it===o&&!(Le in y))return!1}else{var ft=new vs;if($)var wt=$(it,nt,Le,y,E,ft);if(!(wt===o?u0(nt,it,p|v,$,ft):wt))return!1}}return!0}function sT(y){if(!Xa(y)||Aq(y))return!1;var E=xl(y)?jV:Uh;return E.test(Nu(y))}function GB(y){return Za(y)&&Ei(y)==ce}function WB(y){return Za(y)&&li(y)==se}function QB(y){return Za(y)&&D1(y.length)&&!!Oa[Ei(y)]}function lT(y){return typeof y=="function"?y:y==null?Qi:typeof y=="object"?bo(y)?dT(y[0],y[1]):uT(y):O4(y)}function n2(y){if(!m0(y))return YV(y);var E=[];for(var k in Ca(y))ua.call(y,k)&&k!="constructor"&&E.push(k);return E}function XB(y){if(!Xa(y))return Pq(y);var E=m0(y),k=[];for(var $ in y)$=="constructor"&&(E||!ua.call(y,$))||k.push($);return k}function s2(y,E){return y<E}function cT(y,E){var k=-1,$=Gi(y)?We(y.length):[];return mc(y,function(te,me,Ae){$[++k]=E(te,me,Ae)}),$}function uT(y){var E=C2(y);return E.length==1&&E[0][2]?HT(E[0][0],E[0][1]):function(k){return k===y||i2(k,y,E)}}function dT(y,E){return E2(y)&&zT(E)?HT(Us(y),E):function(k){var $=N2(k,y);return $===o&&$===E?k2(k,y):u0(E,$,p|v)}}function m1(y,E,k,$,te){y!==E&&t2(E,function(me,Ae){if(te||(te=new vs),Xa(me))KB(y,E,Ae,k,m1,$,te);else{var Fe=$?$(I2(y,Ae),me,Ae+"",y,E,te):o;Fe===o&&(Fe=me),Zb(y,Ae,Fe)}},Wi)}function KB(y,E,k,$,te,me,Ae){var Fe=I2(y,k),Le=I2(E,k),it=Ae.get(Le);if(it){Zb(y,k,it);return}var nt=me?me(Fe,Le,k+"",y,E,Ae):o,ft=nt===o;if(ft){var wt=bo(Le),jt=!wt&&gc(Le),to=!wt&&!jt&&pf(Le);nt=Le,wt||jt||to?bo(Fe)?nt=Fe:or(Fe)?nt=ji(Fe):jt?(ft=!1,nt=wT(Le,!0)):to?(ft=!1,nt=ET(Le,!0)):nt=[]:h0(Le)||ku(Le)?(nt=Fe,ku(Fe)?nt=y4(Fe):(!Xa(Fe)||xl(Fe))&&(nt=UT(Le))):ft=!1}ft&&(Ae.set(Le,nt),te(nt,Le,$,me,Ae),Ae.delete(Le)),Zb(y,k,nt)}function fT(y,E){var k=y.length;if(!!k)return E+=E<0?k:0,yl(E,k)?y[E]:o}function mT(y,E,k){E.length?E=Ua(E,function(me){return bo(me)?function(Ae){return Fu(Ae,me.length===1?me[0]:me)}:me}):E=[Qi];var $=-1;E=Ua(E,vn(eo()));var te=cT(y,function(me,Ae,Fe){var Le=Ua(E,function(it){return it(me)});return{criteria:Le,index:++$,value:me}});return wV(te,function(me,Ae){return cq(me,Ae,k)})}function YB(y,E){return pT(y,E,function(k,$){return k2(y,$)})}function pT(y,E,k){for(var $=-1,te=E.length,me={};++$<te;){var Ae=E[$],Fe=Fu(y,Ae);k(Fe,Ae)&&d0(me,hc(Ae,y),Fe)}return me}function JB(y){return function(E){return Fu(E,y)}}function l2(y,E,k,$){var te=$?CV:of,me=-1,Ae=E.length,Fe=y;for(y===E&&(E=ji(E)),k&&(Fe=Ua(y,vn(k)));++me<Ae;)for(var Le=0,it=E[me],nt=k?k(it):it;(Le=te(Fe,nt,Le,$))>-1;)Fe!==y&&a1.call(Fe,Le,1),a1.call(y,Le,1);return y}function hT(y,E){for(var k=y?E.length:0,$=k-1;k--;){var te=E[k];if(k==$||te!==me){var me=te;yl(te)?a1.call(y,te,1):f2(y,te)}}return y}function c2(y,E){return y+n1(XA()*(E-y+1))}function ZB(y,E,k,$){for(var te=-1,me=Cr(i1((E-y)/(k||1)),0),Ae=We(me);me--;)Ae[$?me:++te]=y,y+=k;return Ae}function u2(y,E){var k="";if(!y||E<1||E>Y)return k;do E%2&&(k+=y),E=n1(E/2),E&&(y+=y);while(E);return k}function So(y,E){return A2(jT(y,E,Qi),y+"")}function eq(y){return JA(hf(y))}function tq(y,E){var k=hf(y);return w1(k,Pu(E,0,k.length))}function d0(y,E,k,$){if(!Xa(y))return y;E=hc(E,y);for(var te=-1,me=E.length,Ae=me-1,Fe=y;Fe!=null&&++te<me;){var Le=Us(E[te]),it=k;if(Le==="__proto__"||Le==="constructor"||Le==="prototype")return y;if(te!=Ae){var nt=Fe[Le];it=$?$(nt,Le,Fe):o,it===o&&(it=Xa(nt)?nt:yl(E[te+1])?[]:{})}s0(Fe,Le,it),Fe=Fe[Le]}return y}var vT=s1?function(y,E){return s1.set(y,E),y}:Qi,oq=r1?function(y,E){return r1(y,"toString",{configurable:!0,enumerable:!1,value:V2(E),writable:!0})}:Qi;function aq(y){return w1(hf(y))}function jn(y,E,k){var $=-1,te=y.length;E<0&&(E=-E>te?0:te+E),k=k>te?te:k,k<0&&(k+=te),te=E>k?0:k-E>>>0,E>>>=0;for(var me=We(te);++$<te;)me[$]=y[$+E];return me}function rq(y,E){var k;return mc(y,function($,te,me){return k=E($,te,me),!k}),!!k}function p1(y,E,k){var $=0,te=y==null?$:y.length;if(typeof E=="number"&&E===E&&te<=_e){for(;$<te;){var me=$+te>>>1,Ae=y[me];Ae!==null&&!_n(Ae)&&(k?Ae<=E:Ae<E)?$=me+1:te=me}return te}return d2(y,E,Qi,k)}function d2(y,E,k,$){var te=0,me=y==null?0:y.length;if(me===0)return 0;E=k(E);for(var Ae=E!==E,Fe=E===null,Le=_n(E),it=E===o;te<me;){var nt=n1((te+me)/2),ft=k(y[nt]),wt=ft!==o,jt=ft===null,to=ft===ft,wo=_n(ft);if(Ae)var oo=$||to;else it?oo=to&&($||wt):Fe?oo=to&&wt&&($||!jt):Le?oo=to&&wt&&!jt&&($||!wo):jt||wo?oo=!1:oo=$?ft<=E:ft<E;oo?te=nt+1:me=nt}return si(me,re)}function gT(y,E){for(var k=-1,$=y.length,te=0,me=[];++k<$;){var Ae=y[k],Fe=E?E(Ae):Ae;if(!k||!gs(Fe,Le)){var Le=Fe;me[te++]=Ae===0?0:Ae}}return me}function _T(y){return typeof y=="number"?y:_n(y)?ye:+y}function gn(y){if(typeof y=="string")return y;if(bo(y))return Ua(y,gn)+"";if(_n(y))return KA?KA.call(y):"";var E=y+"";return E=="0"&&1/y==-X?"-0":E}function pc(y,E,k){var $=-1,te=Wh,me=y.length,Ae=!0,Fe=[],Le=Fe;if(k)Ae=!1,te=Lb;else if(me>=a){var it=E?null:hq(y);if(it)return Xh(it);Ae=!1,te=t0,Le=new Ou}else Le=E?[]:Fe;e:for(;++$<me;){var nt=y[$],ft=E?E(nt):nt;if(nt=k||nt!==0?nt:0,Ae&&ft===ft){for(var wt=Le.length;wt--;)if(Le[wt]===ft)continue e;E&&Le.push(ft),Fe.push(nt)}else te(Le,ft,k)||(Le!==Fe&&Le.push(ft),Fe.push(nt))}return Fe}function f2(y,E){return E=hc(E,y),y=GT(y,E),y==null||delete y[Us(Gn(E))]}function bT(y,E,k,$){return d0(y,E,k(Fu(y,E)),$)}function h1(y,E,k,$){for(var te=y.length,me=$?te:-1;($?me--:++me<te)&&E(y[me],me,y););return k?jn(y,$?0:me,$?me+1:te):jn(y,$?me+1:0,$?te:me)}function yT(y,E){var k=y;return k instanceof Fo&&(k=k.value()),$b(E,function($,te){return te.func.apply(te.thisArg,uc([$],te.args))},k)}function m2(y,E,k){var $=y.length;if($<2)return $?pc(y[0]):[];for(var te=-1,me=We($);++te<$;)for(var Ae=y[te],Fe=-1;++Fe<$;)Fe!=te&&(me[te]=l0(me[te]||Ae,y[Fe],E,k));return pc(Wr(me,1),E,k)}function xT(y,E,k){for(var $=-1,te=y.length,me=E.length,Ae={};++$<te;){var Fe=$<me?E[$]:o;k(Ae,y[$],Fe)}return Ae}function p2(y){return or(y)?y:[]}function h2(y){return typeof y=="function"?y:Qi}function hc(y,E){return bo(y)?y:E2(y,E)?[y]:KT(ia(y))}var iq=So;function vc(y,E,k){var $=y.length;return k=k===o?$:k,!E&&k>=$?y:jn(y,E,k)}var CT=GV||function(y){return Gr.clearTimeout(y)};function wT(y,E){if(E)return y.slice();var k=y.length,$=HA?HA(k):new y.constructor(k);return y.copy($),$}function v2(y){var E=new y.constructor(y.byteLength);return new t1(E).set(new t1(y)),E}function nq(y,E){var k=E?v2(y.buffer):y.buffer;return new y.constructor(k,y.byteOffset,y.byteLength)}function sq(y){var E=new y.constructor(y.source,pl.exec(y));return E.lastIndex=y.lastIndex,E}function lq(y){return n0?Ca(n0.call(y)):{}}function ET(y,E){var k=E?v2(y.buffer):y.buffer;return new y.constructor(k,y.byteOffset,y.length)}function ST(y,E){if(y!==E){var k=y!==o,$=y===null,te=y===y,me=_n(y),Ae=E!==o,Fe=E===null,Le=E===E,it=_n(E);if(!Fe&&!it&&!me&&y>E||me&&Ae&&Le&&!Fe&&!it||$&&Ae&&Le||!k&&Le||!te)return 1;if(!$&&!me&&!it&&y<E||it&&k&&te&&!$&&!me||Fe&&k&&te||!Ae&&te||!Le)return-1}return 0}function cq(y,E,k){for(var $=-1,te=y.criteria,me=E.criteria,Ae=te.length,Fe=k.length;++$<Ae;){var Le=ST(te[$],me[$]);if(Le){if($>=Fe)return Le;var it=k[$];return Le*(it=="desc"?-1:1)}}return y.index-E.index}function IT(y,E,k,$){for(var te=-1,me=y.length,Ae=k.length,Fe=-1,Le=E.length,it=Cr(me-Ae,0),nt=We(Le+it),ft=!$;++Fe<Le;)nt[Fe]=E[Fe];for(;++te<Ae;)(ft||te<me)&&(nt[k[te]]=y[te]);for(;it--;)nt[Fe++]=y[te++];return nt}function AT(y,E,k,$){for(var te=-1,me=y.length,Ae=-1,Fe=k.length,Le=-1,it=E.length,nt=Cr(me-Fe,0),ft=We(nt+it),wt=!$;++te<nt;)ft[te]=y[te];for(var jt=te;++Le<it;)ft[jt+Le]=E[Le];for(;++Ae<Fe;)(wt||te<me)&&(ft[jt+k[Ae]]=y[te++]);return ft}function ji(y,E){var k=-1,$=y.length;for(E||(E=We($));++k<$;)E[k]=y[k];return E}function $s(y,E,k,$){var te=!k;k||(k={});for(var me=-1,Ae=E.length;++me<Ae;){var Fe=E[me],Le=$?$(k[Fe],y[Fe],Fe,k,y):o;Le===o&&(Le=y[Fe]),te?gl(k,Fe,Le):s0(k,Fe,Le)}return k}function uq(y,E){return $s(y,w2(y),E)}function dq(y,E){return $s(y,LT(y),E)}function v1(y,E){return function(k,$){var te=bo(k)?vV:MB,me=E?E():{};return te(k,y,eo($,2),me)}}function df(y){return So(function(E,k){var $=-1,te=k.length,me=te>1?k[te-1]:o,Ae=te>2?k[2]:o;for(me=y.length>3&&typeof me=="function"?(te--,me):o,Ae&&Si(k[0],k[1],Ae)&&(me=te<3?o:me,te=1),E=Ca(E);++$<te;){var Fe=k[$];Fe&&y(E,Fe,$,me)}return E})}function TT(y,E){return function(k,$){if(k==null)return k;if(!Gi(k))return y(k,$);for(var te=k.length,me=E?te:-1,Ae=Ca(k);(E?me--:++me<te)&&$(Ae[me],me,Ae)!==!1;);return k}}function DT(y){return function(E,k,$){for(var te=-1,me=Ca(E),Ae=$(E),Fe=Ae.length;Fe--;){var Le=Ae[y?Fe:++te];if(k(me[Le],Le,me)===!1)break}return E}}function fq(y,E,k){var $=E&g,te=f0(y);function me(){var Ae=this&&this!==Gr&&this instanceof me?te:y;return Ae.apply($?k:this,arguments)}return me}function OT(y){return function(E){E=ia(E);var k=af(E)?hs(E):o,$=k?k[0]:E.charAt(0),te=k?vc(k,1).join(""):E.slice(1);return $[y]()+te}}function ff(y){return function(E){return $b(T4(A4(E).replace(oV,"")),y,"")}}function f0(y){return function(){var E=arguments;switch(E.length){case 0:return new y;case 1:return new y(E[0]);case 2:return new y(E[0],E[1]);case 3:return new y(E[0],E[1],E[2]);case 4:return new y(E[0],E[1],E[2],E[3]);case 5:return new y(E[0],E[1],E[2],E[3],E[4]);case 6:return new y(E[0],E[1],E[2],E[3],E[4],E[5]);case 7:return new y(E[0],E[1],E[2],E[3],E[4],E[5],E[6])}var k=uf(y.prototype),$=y.apply(k,E);return Xa($)?$:k}}function mq(y,E,k){var $=f0(y);function te(){for(var me=arguments.length,Ae=We(me),Fe=me,Le=mf(te);Fe--;)Ae[Fe]=arguments[Fe];var it=me<3&&Ae[0]!==Le&&Ae[me-1]!==Le?[]:dc(Ae,Le);if(me-=it.length,me<k)return kT(y,E,g1,te.placeholder,o,Ae,it,o,o,k-me);var nt=this&&this!==Gr&&this instanceof te?$:y;return hn(nt,this,Ae)}return te}function PT(y){return function(E,k,$){var te=Ca(E);if(!Gi(E)){var me=eo(k,3);E=qr(E),k=function(Fe){return me(te[Fe],Fe,te)}}var Ae=y(E,k,$);return Ae>-1?te[me?E[Ae]:Ae]:o}}function FT(y){return bl(function(E){var k=E.length,$=k,te=zn.prototype.thru;for(y&&E.reverse();$--;){var me=E[$];if(typeof me!="function")throw new Un(n);if(te&&!Ae&&x1(me)=="wrapper")var Ae=new zn([],!0)}for($=Ae?$:k;++$<k;){me=E[$];var Fe=x1(me),Le=Fe=="wrapper"?x2(me):o;Le&&S2(Le[0])&&Le[1]==(M|_|S|O)&&!Le[4].length&&Le[9]==1?Ae=Ae[x1(Le[0])].apply(Ae,Le[3]):Ae=me.length==1&&S2(me)?Ae[Fe]():Ae.thru(me)}return function(){var it=arguments,nt=it[0];if(Ae&&it.length==1&&bo(nt))return Ae.plant(nt).value();for(var ft=0,wt=k?E[ft].apply(this,it):nt;++ft<k;)wt=E[ft].call(this,wt);return wt}})}function g1(y,E,k,$,te,me,Ae,Fe,Le,it){var nt=E&M,ft=E&g,wt=E&x,jt=E&(_|w),to=E&T,wo=wt?o:f0(y);function oo(){for(var Po=arguments.length,qo=We(Po),bn=Po;bn--;)qo[bn]=arguments[bn];if(jt)var Ii=mf(oo),yn=SV(qo,Ii);if($&&(qo=IT(qo,$,te,jt)),me&&(qo=AT(qo,me,Ae,jt)),Po-=yn,jt&&Po<it){var ar=dc(qo,Ii);return kT(y,E,g1,oo.placeholder,k,qo,ar,Fe,Le,it-Po)}var _s=ft?k:this,wl=wt?_s[y]:y;return Po=qo.length,Fe?qo=Mq(qo,Fe):to&&Po>1&&qo.reverse(),nt&&Le<Po&&(qo.length=Le),this&&this!==Gr&&this instanceof oo&&(wl=wo||f0(wl)),wl.apply(_s,qo)}return oo}function MT(y,E){return function(k,$){return $B(k,y,E($),{})}}function _1(y,E){return function(k,$){var te;if(k===o&&$===o)return E;if(k!==o&&(te=k),$!==o){if(te===o)return $;typeof k=="string"||typeof $=="string"?(k=gn(k),$=gn($)):(k=_T(k),$=_T($)),te=y(k,$)}return te}}function g2(y){return bl(function(E){return E=Ua(E,vn(eo())),So(function(k){var $=this;return y(E,function(te){return hn(te,$,k)})})})}function b1(y,E){E=E===o?" ":gn(E);var k=E.length;if(k<2)return k?u2(E,y):E;var $=u2(E,i1(y/rf(E)));return af(E)?vc(hs($),0,y).join(""):$.slice(0,y)}function pq(y,E,k,$){var te=E&g,me=f0(y);function Ae(){for(var Fe=-1,Le=arguments.length,it=-1,nt=$.length,ft=We(nt+Le),wt=this&&this!==Gr&&this instanceof Ae?me:y;++it<nt;)ft[it]=$[it];for(;Le--;)ft[it++]=arguments[++Fe];return hn(wt,te?k:this,ft)}return Ae}function NT(y){return function(E,k,$){return $&&typeof $!="number"&&Si(E,k,$)&&(k=$=o),E=Cl(E),k===o?(k=E,E=0):k=Cl(k),$=$===o?E<k?1:-1:Cl($),ZB(E,k,$,y)}}function y1(y){return function(E,k){return typeof E=="string"&&typeof k=="string"||(E=Wn(E),k=Wn(k)),y(E,k)}}function kT(y,E,k,$,te,me,Ae,Fe,Le,it){var nt=E&_,ft=nt?Ae:o,wt=nt?o:Ae,jt=nt?me:o,to=nt?o:me;E|=nt?S:D,E&=~(nt?D:S),E&b||(E&=~(g|x));var wo=[y,E,te,jt,ft,to,wt,Fe,Le,it],oo=k.apply(o,wo);return S2(y)&&WT(oo,wo),oo.placeholder=$,QT(oo,y,E)}function _2(y){var E=xr[y];return function(k,$){if(k=Wn(k),$=$==null?0:si(xo($),292),$&&QA(k)){var te=(ia(k)+"e").split("e"),me=E(te[0]+"e"+(+te[1]+$));return te=(ia(me)+"e").split("e"),+(te[0]+"e"+(+te[1]-$))}return E(k)}}var hq=lf&&1/Xh(new lf([,-0]))[1]==X?function(y){return new lf(y)}:L2;function RT(y){return function(E){var k=li(E);return k==Z?Qb(E):k==se?FV(E):EV(E,y(E))}}function _l(y,E,k,$,te,me,Ae,Fe){var Le=E&x;if(!Le&&typeof y!="function")throw new Un(n);var it=$?$.length:0;if(it||(E&=~(S|D),$=te=o),Ae=Ae===o?Ae:Cr(xo(Ae),0),Fe=Fe===o?Fe:xo(Fe),it-=te?te.length:0,E&D){var nt=$,ft=te;$=te=o}var wt=Le?o:x2(y),jt=[y,E,k,$,te,nt,ft,me,Ae,Fe];if(wt&&Oq(jt,wt),y=jt[0],E=jt[1],k=jt[2],$=jt[3],te=jt[4],Fe=jt[9]=jt[9]===o?Le?0:y.length:Cr(jt[9]-it,0),!Fe&&E&(_|w)&&(E&=~(_|w)),!E||E==g)var to=fq(y,E,k);else E==_||E==w?to=mq(y,E,Fe):(E==S||E==(g|S))&&!te.length?to=pq(y,E,k,$):to=g1.apply(o,jt);var wo=wt?vT:WT;return QT(wo(to,jt),y,E)}function VT(y,E,k,$){return y===o||gs(y,sf[k])&&!ua.call($,k)?E:y}function BT(y,E,k,$,te,me){return Xa(y)&&Xa(E)&&(me.set(E,y),m1(y,E,o,BT,me),me.delete(E)),y}function vq(y){return h0(y)?o:y}function qT(y,E,k,$,te,me){var Ae=k&p,Fe=y.length,Le=E.length;if(Fe!=Le&&!(Ae&&Le>Fe))return!1;var it=me.get(y),nt=me.get(E);if(it&&nt)return it==E&&nt==y;var ft=-1,wt=!0,jt=k&v?new Ou:o;for(me.set(y,E),me.set(E,y);++ft<Fe;){var to=y[ft],wo=E[ft];if($)var oo=Ae?$(wo,to,ft,E,y,me):$(to,wo,ft,y,E,me);if(oo!==o){if(oo)continue;wt=!1;break}if(jt){if(!Ub(E,function(Po,qo){if(!t0(jt,qo)&&(to===Po||te(to,Po,k,$,me)))return jt.push(qo)})){wt=!1;break}}else if(!(to===wo||te(to,wo,k,$,me))){wt=!1;break}}return me.delete(y),me.delete(E),wt}function gq(y,E,k,$,te,me,Ae){switch(k){case Pt:if(y.byteLength!=E.byteLength||y.byteOffset!=E.byteOffset)return!1;y=y.buffer,E=E.buffer;case ot:return!(y.byteLength!=E.byteLength||!me(new t1(y),new t1(E)));case De:case Te:case Ce:return gs(+y,+E);case q:return y.name==E.name&&y.message==E.message;case ce:case pe:return y==E+"";case Z:var Fe=Qb;case se:var Le=$&p;if(Fe||(Fe=Xh),y.size!=E.size&&!Le)return!1;var it=Ae.get(y);if(it)return it==E;$|=v,Ae.set(y,E);var nt=qT(Fe(y),Fe(E),$,te,me,Ae);return Ae.delete(y),nt;case we:if(n0)return n0.call(y)==n0.call(E)}return!1}function _q(y,E,k,$,te,me){var Ae=k&p,Fe=b2(y),Le=Fe.length,it=b2(E),nt=it.length;if(Le!=nt&&!Ae)return!1;for(var ft=Le;ft--;){var wt=Fe[ft];if(!(Ae?wt in E:ua.call(E,wt)))return!1}var jt=me.get(y),to=me.get(E);if(jt&&to)return jt==E&&to==y;var wo=!0;me.set(y,E),me.set(E,y);for(var oo=Ae;++ft<Le;){wt=Fe[ft];var Po=y[wt],qo=E[wt];if($)var bn=Ae?$(qo,Po,wt,E,y,me):$(Po,qo,wt,y,E,me);if(!(bn===o?Po===qo||te(Po,qo,k,$,me):bn)){wo=!1;break}oo||(oo=wt=="constructor")}if(wo&&!oo){var Ii=y.constructor,yn=E.constructor;Ii!=yn&&"constructor"in y&&"constructor"in E&&!(typeof Ii=="function"&&Ii instanceof Ii&&typeof yn=="function"&&yn instanceof yn)&&(wo=!1)}return me.delete(y),me.delete(E),wo}function bl(y){return A2(jT(y,o,e4),y+"")}function b2(y){return iT(y,qr,w2)}function y2(y){return iT(y,Wi,LT)}var x2=s1?function(y){return s1.get(y)}:L2;function x1(y){for(var E=y.name+"",k=cf[E],$=ua.call(cf,E)?k.length:0;$--;){var te=k[$],me=te.func;if(me==null||me==y)return te.name}return E}function mf(y){var E=ua.call(ue,"placeholder")?ue:y;return E.placeholder}function eo(){var y=ue.iteratee||B2;return y=y===B2?lT:y,arguments.length?y(arguments[0],arguments[1]):y}function C1(y,E){var k=y.__data__;return Iq(E)?k[typeof E=="string"?"string":"hash"]:k.map}function C2(y){for(var E=qr(y),k=E.length;k--;){var $=E[k],te=y[$];E[k]=[$,te,zT(te)]}return E}function Mu(y,E){var k=DV(y,E);return sT(k)?k:o}function bq(y){var E=ua.call(y,Tu),k=y[Tu];try{y[Tu]=o;var $=!0}catch{}var te=Zh.call(y);return $&&(E?y[Tu]=k:delete y[Tu]),te}var w2=Kb?function(y){return y==null?[]:(y=Ca(y),cc(Kb(y),function(E){return GA.call(y,E)}))}:$2,LT=Kb?function(y){for(var E=[];y;)uc(E,w2(y)),y=o1(y);return E}:$2,li=Ei;(Yb&&li(new Yb(new ArrayBuffer(1)))!=Pt||a0&&li(new a0)!=Z||Jb&&li(Jb.resolve())!=R||lf&&li(new lf)!=se||r0&&li(new r0)!=Ge)&&(li=function(y){var E=Ei(y),k=E==V?y.constructor:o,$=k?Nu(k):"";if($)switch($){case tB:return Pt;case oB:return Z;case aB:return R;case rB:return se;case iB:return Ge}return E});function yq(y,E,k){for(var $=-1,te=k.length;++$<te;){var me=k[$],Ae=me.size;switch(me.type){case"drop":y+=Ae;break;case"dropRight":E-=Ae;break;case"take":E=si(E,y+Ae);break;case"takeRight":y=Cr(y,E-Ae);break}}return{start:y,end:E}}function xq(y){var E=y.match(Oo);return E?E[1].split(Lt):[]}function $T(y,E,k){E=hc(E,y);for(var $=-1,te=E.length,me=!1;++$<te;){var Ae=Us(E[$]);if(!(me=y!=null&&k(y,Ae)))break;y=y[Ae]}return me||++$!=te?me:(te=y==null?0:y.length,!!te&&D1(te)&&yl(Ae,te)&&(bo(y)||ku(y)))}function Cq(y){var E=y.length,k=new y.constructor(E);return E&&typeof y[0]=="string"&&ua.call(y,"index")&&(k.index=y.index,k.input=y.input),k}function UT(y){return typeof y.constructor=="function"&&!m0(y)?uf(o1(y)):{}}function wq(y,E,k){var $=y.constructor;switch(E){case ot:return v2(y);case De:case Te:return new $(+y);case Pt:return nq(y,k);case $t:case fo:case He:case tt:case $e:case dt:case Rt:case Ut:case gt:return ET(y,k);case Z:return new $;case Ce:case pe:return new $(y);case ce:return sq(y);case se:return new $;case we:return lq(y)}}function Eq(y,E){var k=E.length;if(!k)return y;var $=k-1;return E[$]=(k>1?"& ":"")+E[$],E=E.join(k>2?", ":" "),y.replace(ht,`{
/* [wrapped with `+E+`] */
`)}function Sq(y){return bo(y)||ku(y)||!!(WA&&y&&y[WA])}function yl(y,E){var k=typeof y;return E=E==null?Y:E,!!E&&(k=="number"||k!="symbol"&&Hh.test(y))&&y>-1&&y%1==0&&y<E}function Si(y,E,k){if(!Xa(k))return!1;var $=typeof E;return($=="number"?Gi(k)&&yl(E,k.length):$=="string"&&E in k)?gs(k[E],y):!1}function E2(y,E){if(bo(y))return!1;var k=typeof y;return k=="number"||k=="symbol"||k=="boolean"||y==null||_n(y)?!0:ro.test(y)||!Zt.test(y)||E!=null&&y in Ca(E)}function Iq(y){var E=typeof y;return E=="string"||E=="number"||E=="symbol"||E=="boolean"?y!=="__proto__":y===null}function S2(y){var E=x1(y),k=ue[E];if(typeof k!="function"||!(E in Fo.prototype))return!1;if(y===k)return!0;var $=x2(k);return!!$&&y===$[0]}function Aq(y){return!!zA&&zA in y}var Tq=Yh?xl:U2;function m0(y){var E=y&&y.constructor,k=typeof E=="function"&&E.prototype||sf;return y===k}function zT(y){return y===y&&!Xa(y)}function HT(y,E){return function(k){return k==null?!1:k[y]===E&&(E!==o||y in Ca(k))}}function Dq(y){var E=A1(y,function($){return k.size===u&&k.clear(),$}),k=E.cache;return E}function Oq(y,E){var k=y[1],$=E[1],te=k|$,me=te<(g|x|M),Ae=$==M&&k==_||$==M&&k==O&&y[7].length<=E[8]||$==(M|O)&&E[7].length<=E[8]&&k==_;if(!(me||Ae))return y;$&g&&(y[2]=E[2],te|=k&g?0:b);var Fe=E[3];if(Fe){var Le=y[3];y[3]=Le?IT(Le,Fe,E[4]):Fe,y[4]=Le?dc(y[3],c):E[4]}return Fe=E[5],Fe&&(Le=y[5],y[5]=Le?AT(Le,Fe,E[6]):Fe,y[6]=Le?dc(y[5],c):E[6]),Fe=E[7],Fe&&(y[7]=Fe),$&M&&(y[8]=y[8]==null?E[8]:si(y[8],E[8])),y[9]==null&&(y[9]=E[9]),y[0]=E[0],y[1]=te,y}function Pq(y){var E=[];if(y!=null)for(var k in Ca(y))E.push(k);return E}function Fq(y){return Zh.call(y)}function jT(y,E,k){return E=Cr(E===o?y.length-1:E,0),function(){for(var $=arguments,te=-1,me=Cr($.length-E,0),Ae=We(me);++te<me;)Ae[te]=$[E+te];te=-1;for(var Fe=We(E+1);++te<E;)Fe[te]=$[te];return Fe[E]=k(Ae),hn(y,this,Fe)}}function GT(y,E){return E.length<2?y:Fu(y,jn(E,0,-1))}function Mq(y,E){for(var k=y.length,$=si(E.length,k),te=ji(y);$--;){var me=E[$];y[$]=yl(me,k)?te[me]:o}return y}function I2(y,E){if(!(E==="constructor"&&typeof y[E]=="function")&&E!="__proto__")return y[E]}var WT=XT(vT),p0=QV||function(y,E){return Gr.setTimeout(y,E)},A2=XT(oq);function QT(y,E,k){var $=E+"";return A2(y,Eq($,Nq(xq($),k)))}function XT(y){var E=0,k=0;return function(){var $=JV(),te=F-($-k);if(k=$,te>0){if(++E>=P)return arguments[0]}else E=0;return y.apply(o,arguments)}}function w1(y,E){var k=-1,$=y.length,te=$-1;for(E=E===o?$:E;++k<E;){var me=c2(k,te),Ae=y[me];y[me]=y[k],y[k]=Ae}return y.length=E,y}var KT=Dq(function(y){var E=[];return y.charCodeAt(0)===46&&E.push(""),y.replace(la,function(k,$,te,me){E.push(te?me.replace(Hi,"$1"):$||k)}),E});function Us(y){if(typeof y=="string"||_n(y))return y;var E=y+"";return E=="0"&&1/y==-X?"-0":E}function Nu(y){if(y!=null){try{return Jh.call(y)}catch{}try{return y+""}catch{}}return""}function Nq(y,E){return $n(ve,function(k){var $="_."+k[0];E&k[1]&&!Wh(y,$)&&y.push($)}),y.sort()}function YT(y){if(y instanceof Fo)return y.clone();var E=new zn(y.__wrapped__,y.__chain__);return E.__actions__=ji(y.__actions__),E.__index__=y.__index__,E.__values__=y.__values__,E}function kq(y,E,k){(k?Si(y,E,k):E===o)?E=1:E=Cr(xo(E),0);var $=y==null?0:y.length;if(!$||E<1)return[];for(var te=0,me=0,Ae=We(i1($/E));te<$;)Ae[me++]=jn(y,te,te+=E);return Ae}function Rq(y){for(var E=-1,k=y==null?0:y.length,$=0,te=[];++E<k;){var me=y[E];me&&(te[$++]=me)}return te}function Vq(){var y=arguments.length;if(!y)return[];for(var E=We(y-1),k=arguments[0],$=y;$--;)E[$-1]=arguments[$];return uc(bo(k)?ji(k):[k],Wr(E,1))}var Bq=So(function(y,E){return or(y)?l0(y,Wr(E,1,or,!0)):[]}),qq=So(function(y,E){var k=Gn(E);return or(k)&&(k=o),or(y)?l0(y,Wr(E,1,or,!0),eo(k,2)):[]}),Lq=So(function(y,E){var k=Gn(E);return or(k)&&(k=o),or(y)?l0(y,Wr(E,1,or,!0),o,k):[]});function Uq(y,E,k){var $=y==null?0:y.length;return $?(E=k||E===o?1:xo(E),jn(y,E<0?0:E,$)):[]}function zq(y,E,k){var $=y==null?0:y.length;return $?(E=k||E===o?1:xo(E),E=$-E,jn(y,0,E<0?0:E)):[]}function Hq(y,E){return y&&y.length?h1(y,eo(E,3),!0,!0):[]}function jq(y,E){return y&&y.length?h1(y,eo(E,3),!0):[]}function Gq(y,E,k,$){var te=y==null?0:y.length;return te?(k&&typeof k!="number"&&Si(y,E,k)&&(k=0,$=te),VB(y,E,k,$)):[]}function JT(y,E,k){var $=y==null?0:y.length;if(!$)return-1;var te=k==null?0:xo(k);return te<0&&(te=Cr($+te,0)),Qh(y,eo(E,3),te)}function ZT(y,E,k){var $=y==null?0:y.length;if(!$)return-1;var te=$-1;return k!==o&&(te=xo(k),te=k<0?Cr($+te,0):si(te,$-1)),Qh(y,eo(E,3),te,!0)}function e4(y){var E=y==null?0:y.length;return E?Wr(y,1):[]}function Wq(y){var E=y==null?0:y.length;return E?Wr(y,X):[]}function Qq(y,E){var k=y==null?0:y.length;return k?(E=E===o?1:xo(E),Wr(y,E)):[]}function Xq(y){for(var E=-1,k=y==null?0:y.length,$={};++E<k;){var te=y[E];$[te[0]]=te[1]}return $}function t4(y){return y&&y.length?y[0]:o}function Kq(y,E,k){var $=y==null?0:y.length;if(!$)return-1;var te=k==null?0:xo(k);return te<0&&(te=Cr($+te,0)),of(y,E,te)}function Yq(y){var E=y==null?0:y.length;return E?jn(y,0,-1):[]}var Jq=So(function(y){var E=Ua(y,p2);return E.length&&E[0]===y[0]?r2(E):[]}),Zq=So(function(y){var E=Gn(y),k=Ua(y,p2);return E===Gn(k)?E=o:k.pop(),k.length&&k[0]===y[0]?r2(k,eo(E,2)):[]}),eL=So(function(y){var E=Gn(y),k=Ua(y,p2);return E=typeof E=="function"?E:o,E&&k.pop(),k.length&&k[0]===y[0]?r2(k,o,E):[]});function tL(y,E){return y==null?"":KV.call(y,E)}function Gn(y){var E=y==null?0:y.length;return E?y[E-1]:o}function oL(y,E,k){var $=y==null?0:y.length;if(!$)return-1;var te=$;return k!==o&&(te=xo(k),te=te<0?Cr($+te,0):si(te,$-1)),E===E?NV(y,E,te):Qh(y,kA,te,!0)}function aL(y,E){return y&&y.length?fT(y,xo(E)):o}var rL=So(o4);function o4(y,E){return y&&y.length&&E&&E.length?l2(y,E):y}function iL(y,E,k){return y&&y.length&&E&&E.length?l2(y,E,eo(k,2)):y}function nL(y,E,k){return y&&y.length&&E&&E.length?l2(y,E,o,k):y}var sL=bl(function(y,E){var k=y==null?0:y.length,$=e2(y,E);return hT(y,Ua(E,function(te){return yl(te,k)?+te:te}).sort(ST)),$});function lL(y,E){var k=[];if(!(y&&y.length))return k;var $=-1,te=[],me=y.length;for(E=eo(E,3);++$<me;){var Ae=y[$];E(Ae,$,y)&&(k.push(Ae),te.push($))}return hT(y,te),k}function T2(y){return y==null?y:eB.call(y)}function cL(y,E,k){var $=y==null?0:y.length;return $?(k&&typeof k!="number"&&Si(y,E,k)?(E=0,k=$):(E=E==null?0:xo(E),k=k===o?$:xo(k)),jn(y,E,k)):[]}function uL(y,E){return p1(y,E)}function dL(y,E,k){return d2(y,E,eo(k,2))}function fL(y,E){var k=y==null?0:y.length;if(k){var $=p1(y,E);if($<k&&gs(y[$],E))return $}return-1}function mL(y,E){return p1(y,E,!0)}function pL(y,E,k){return d2(y,E,eo(k,2),!0)}function hL(y,E){var k=y==null?0:y.length;if(k){var $=p1(y,E,!0)-1;if(gs(y[$],E))return $}return-1}function vL(y){return y&&y.length?gT(y):[]}function gL(y,E){return y&&y.length?gT(y,eo(E,2)):[]}function _L(y){var E=y==null?0:y.length;return E?jn(y,1,E):[]}function bL(y,E,k){return y&&y.length?(E=k||E===o?1:xo(E),jn(y,0,E<0?0:E)):[]}function yL(y,E,k){var $=y==null?0:y.length;return $?(E=k||E===o?1:xo(E),E=$-E,jn(y,E<0?0:E,$)):[]}function xL(y,E){return y&&y.length?h1(y,eo(E,3),!1,!0):[]}function CL(y,E){return y&&y.length?h1(y,eo(E,3)):[]}var wL=So(function(y){return pc(Wr(y,1,or,!0))}),EL=So(function(y){var E=Gn(y);return or(E)&&(E=o),pc(Wr(y,1,or,!0),eo(E,2))}),SL=So(function(y){var E=Gn(y);return E=typeof E=="function"?E:o,pc(Wr(y,1,or,!0),o,E)});function IL(y){return y&&y.length?pc(y):[]}function AL(y,E){return y&&y.length?pc(y,eo(E,2)):[]}function TL(y,E){return E=typeof E=="function"?E:o,y&&y.length?pc(y,o,E):[]}function D2(y){if(!(y&&y.length))return[];var E=0;return y=cc(y,function(k){if(or(k))return E=Cr(k.length,E),!0}),Gb(E,function(k){return Ua(y,zb(k))})}function a4(y,E){if(!(y&&y.length))return[];var k=D2(y);return E==null?k:Ua(k,function($){return hn(E,o,$)})}var DL=So(function(y,E){return or(y)?l0(y,E):[]}),OL=So(function(y){return m2(cc(y,or))}),PL=So(function(y){var E=Gn(y);return or(E)&&(E=o),m2(cc(y,or),eo(E,2))}),FL=So(function(y){var E=Gn(y);return E=typeof E=="function"?E:o,m2(cc(y,or),o,E)}),ML=So(D2);function NL(y,E){return xT(y||[],E||[],s0)}function kL(y,E){return xT(y||[],E||[],d0)}var RL=So(function(y){var E=y.length,k=E>1?y[E-1]:o;return k=typeof k=="function"?(y.pop(),k):o,a4(y,k)});function r4(y){var E=ue(y);return E.__chain__=!0,E}function VL(y,E){return E(y),y}function E1(y,E){return E(y)}var BL=bl(function(y){var E=y.length,k=E?y[0]:0,$=this.__wrapped__,te=function(me){return e2(me,y)};return E>1||this.__actions__.length||!($ instanceof Fo)||!yl(k)?this.thru(te):($=$.slice(k,+k+(E?1:0)),$.__actions__.push({func:E1,args:[te],thisArg:o}),new zn($,this.__chain__).thru(function(me){return E&&!me.length&&me.push(o),me}))});function qL(){return r4(this)}function LL(){return new zn(this.value(),this.__chain__)}function $L(){this.__values__===o&&(this.__values__=_4(this.value()));var y=this.__index__>=this.__values__.length,E=y?o:this.__values__[this.__index__++];return{done:y,value:E}}function UL(){return this}function zL(y){for(var E,k=this;k instanceof c1;){var $=YT(k);$.__index__=0,$.__values__=o,E?te.__wrapped__=$:E=$;var te=$;k=k.__wrapped__}return te.__wrapped__=y,E}function HL(){var y=this.__wrapped__;if(y instanceof Fo){var E=y;return this.__actions__.length&&(E=new Fo(this)),E=E.reverse(),E.__actions__.push({func:E1,args:[T2],thisArg:o}),new zn(E,this.__chain__)}return this.thru(T2)}function jL(){return yT(this.__wrapped__,this.__actions__)}var GL=v1(function(y,E,k){ua.call(y,k)?++y[k]:gl(y,k,1)});function WL(y,E,k){var $=bo(y)?MA:RB;return k&&Si(y,E,k)&&(E=o),$(y,eo(E,3))}function QL(y,E){var k=bo(y)?cc:aT;return k(y,eo(E,3))}var XL=PT(JT),KL=PT(ZT);function YL(y,E){return Wr(S1(y,E),1)}function JL(y,E){return Wr(S1(y,E),X)}function ZL(y,E,k){return k=k===o?1:xo(k),Wr(S1(y,E),k)}function i4(y,E){var k=bo(y)?$n:mc;return k(y,eo(E,3))}function n4(y,E){var k=bo(y)?gV:oT;return k(y,eo(E,3))}var e$=v1(function(y,E,k){ua.call(y,k)?y[k].push(E):gl(y,k,[E])});function t$(y,E,k,$){y=Gi(y)?y:hf(y),k=k&&!$?xo(k):0;var te=y.length;return k<0&&(k=Cr(te+k,0)),O1(y)?k<=te&&y.indexOf(E,k)>-1:!!te&&of(y,E,k)>-1}var o$=So(function(y,E,k){var $=-1,te=typeof E=="function",me=Gi(y)?We(y.length):[];return mc(y,function(Ae){me[++$]=te?hn(E,Ae,k):c0(Ae,E,k)}),me}),a$=v1(function(y,E,k){gl(y,k,E)});function S1(y,E){var k=bo(y)?Ua:cT;return k(y,eo(E,3))}function r$(y,E,k,$){return y==null?[]:(bo(E)||(E=E==null?[]:[E]),k=$?o:k,bo(k)||(k=k==null?[]:[k]),mT(y,E,k))}var i$=v1(function(y,E,k){y[k?0:1].push(E)},function(){return[[],[]]});function n$(y,E,k){var $=bo(y)?$b:VA,te=arguments.length<3;return $(y,eo(E,4),k,te,mc)}function s$(y,E,k){var $=bo(y)?_V:VA,te=arguments.length<3;return $(y,eo(E,4),k,te,oT)}function l$(y,E){var k=bo(y)?cc:aT;return k(y,T1(eo(E,3)))}function c$(y){var E=bo(y)?JA:eq;return E(y)}function u$(y,E,k){(k?Si(y,E,k):E===o)?E=1:E=xo(E);var $=bo(y)?PB:tq;return $(y,E)}function d$(y){var E=bo(y)?FB:aq;return E(y)}function f$(y){if(y==null)return 0;if(Gi(y))return O1(y)?rf(y):y.length;var E=li(y);return E==Z||E==se?y.size:n2(y).length}function m$(y,E,k){var $=bo(y)?Ub:rq;return k&&Si(y,E,k)&&(E=o),$(y,eo(E,3))}var p$=So(function(y,E){if(y==null)return[];var k=E.length;return k>1&&Si(y,E[0],E[1])?E=[]:k>2&&Si(E[0],E[1],E[2])&&(E=[E[0]]),mT(y,Wr(E,1),[])}),I1=WV||function(){return Gr.Date.now()};function h$(y,E){if(typeof E!="function")throw new Un(n);return y=xo(y),function(){if(--y<1)return E.apply(this,arguments)}}function s4(y,E,k){return E=k?o:E,E=y&&E==null?y.length:E,_l(y,M,o,o,o,o,E)}function l4(y,E){var k;if(typeof E!="function")throw new Un(n);return y=xo(y),function(){return--y>0&&(k=E.apply(this,arguments)),y<=1&&(E=o),k}}var O2=So(function(y,E,k){var $=g;if(k.length){var te=dc(k,mf(O2));$|=S}return _l(y,$,E,k,te)}),c4=So(function(y,E,k){var $=g|x;if(k.length){var te=dc(k,mf(c4));$|=S}return _l(E,$,y,k,te)});function u4(y,E,k){E=k?o:E;var $=_l(y,_,o,o,o,o,o,E);return $.placeholder=u4.placeholder,$}function d4(y,E,k){E=k?o:E;var $=_l(y,w,o,o,o,o,o,E);return $.placeholder=d4.placeholder,$}function f4(y,E,k){var $,te,me,Ae,Fe,Le,it=0,nt=!1,ft=!1,wt=!0;if(typeof y!="function")throw new Un(n);E=Wn(E)||0,Xa(k)&&(nt=!!k.leading,ft="maxWait"in k,me=ft?Cr(Wn(k.maxWait)||0,E):me,wt="trailing"in k?!!k.trailing:wt);function jt(ar){var _s=$,wl=te;return $=te=o,it=ar,Ae=y.apply(wl,_s),Ae}function to(ar){return it=ar,Fe=p0(Po,E),nt?jt(ar):Ae}function wo(ar){var _s=ar-Le,wl=ar-it,P4=E-_s;return ft?si(P4,me-wl):P4}function oo(ar){var _s=ar-Le,wl=ar-it;return Le===o||_s>=E||_s<0||ft&&wl>=me}function Po(){var ar=I1();if(oo(ar))return qo(ar);Fe=p0(Po,wo(ar))}function qo(ar){return Fe=o,wt&&$?jt(ar):($=te=o,Ae)}function bn(){Fe!==o&&CT(Fe),it=0,$=Le=te=Fe=o}function Ii(){return Fe===o?Ae:qo(I1())}function yn(){var ar=I1(),_s=oo(ar);if($=arguments,te=this,Le=ar,_s){if(Fe===o)return to(Le);if(ft)return CT(Fe),Fe=p0(Po,E),jt(Le)}return Fe===o&&(Fe=p0(Po,E)),Ae}return yn.cancel=bn,yn.flush=Ii,yn}var v$=So(function(y,E){return tT(y,1,E)}),g$=So(function(y,E,k){return tT(y,Wn(E)||0,k)});function _$(y){return _l(y,T)}function A1(y,E){if(typeof y!="function"||E!=null&&typeof E!="function")throw new Un(n);var k=function(){var $=arguments,te=E?E.apply(this,$):$[0],me=k.cache;if(me.has(te))return me.get(te);var Ae=y.apply(this,$);return k.cache=me.set(te,Ae)||me,Ae};return k.cache=new(A1.Cache||vl),k}A1.Cache=vl;function T1(y){if(typeof y!="function")throw new Un(n);return function(){var E=arguments;switch(E.length){case 0:return!y.call(this);case 1:return!y.call(this,E[0]);case 2:return!y.call(this,E[0],E[1]);case 3:return!y.call(this,E[0],E[1],E[2])}return!y.apply(this,E)}}function b$(y){return l4(2,y)}var y$=iq(function(y,E){E=E.length==1&&bo(E[0])?Ua(E[0],vn(eo())):Ua(Wr(E,1),vn(eo()));var k=E.length;return So(function($){for(var te=-1,me=si($.length,k);++te<me;)$[te]=E[te].call(this,$[te]);return hn(y,this,$)})}),P2=So(function(y,E){var k=dc(E,mf(P2));return _l(y,S,o,E,k)}),m4=So(function(y,E){var k=dc(E,mf(m4));return _l(y,D,o,E,k)}),x$=bl(function(y,E){return _l(y,O,o,o,o,E)});function C$(y,E){if(typeof y!="function")throw new Un(n);return E=E===o?E:xo(E),So(y,E)}function w$(y,E){if(typeof y!="function")throw new Un(n);return E=E==null?0:Cr(xo(E),0),So(function(k){var $=k[E],te=vc(k,0,E);return $&&uc(te,$),hn(y,this,te)})}function E$(y,E,k){var $=!0,te=!0;if(typeof y!="function")throw new Un(n);return Xa(k)&&($="leading"in k?!!k.leading:$,te="trailing"in k?!!k.trailing:te),f4(y,E,{leading:$,maxWait:E,trailing:te})}function S$(y){return s4(y,1)}function I$(y,E){return P2(h2(E),y)}function A$(){if(!arguments.length)return[];var y=arguments[0];return bo(y)?y:[y]}function T$(y){return Hn(y,m)}function D$(y,E){return E=typeof E=="function"?E:o,Hn(y,m,E)}function O$(y){return Hn(y,d|m)}function P$(y,E){return E=typeof E=="function"?E:o,Hn(y,d|m,E)}function F$(y,E){return E==null||eT(y,E,qr(E))}function gs(y,E){return y===E||y!==y&&E!==E}var M$=y1(a2),N$=y1(function(y,E){return y>=E}),ku=nT(function(){return arguments}())?nT:function(y){return Za(y)&&ua.call(y,"callee")&&!GA.call(y,"callee")},bo=We.isArray,k$=AA?vn(AA):UB;function Gi(y){return y!=null&&D1(y.length)&&!xl(y)}function or(y){return Za(y)&&Gi(y)}function R$(y){return y===!0||y===!1||Za(y)&&Ei(y)==De}var gc=XV||U2,V$=TA?vn(TA):zB;function B$(y){return Za(y)&&y.nodeType===1&&!h0(y)}function q$(y){if(y==null)return!0;if(Gi(y)&&(bo(y)||typeof y=="string"||typeof y.splice=="function"||gc(y)||pf(y)||ku(y)))return!y.length;var E=li(y);if(E==Z||E==se)return!y.size;if(m0(y))return!n2(y).length;for(var k in y)if(ua.call(y,k))return!1;return!0}function L$(y,E){return u0(y,E)}function $$(y,E,k){k=typeof k=="function"?k:o;var $=k?k(y,E):o;return $===o?u0(y,E,o,k):!!$}function F2(y){if(!Za(y))return!1;var E=Ei(y);return E==q||E==J||typeof y.message=="string"&&typeof y.name=="string"&&!h0(y)}function U$(y){return typeof y=="number"&&QA(y)}function xl(y){if(!Xa(y))return!1;var E=Ei(y);return E==ne||E==U||E==he||E==ee}function p4(y){return typeof y=="number"&&y==xo(y)}function D1(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=Y}function Xa(y){var E=typeof y;return y!=null&&(E=="object"||E=="function")}function Za(y){return y!=null&&typeof y=="object"}var h4=DA?vn(DA):jB;function z$(y,E){return y===E||i2(y,E,C2(E))}function H$(y,E,k){return k=typeof k=="function"?k:o,i2(y,E,C2(E),k)}function j$(y){return v4(y)&&y!=+y}function G$(y){if(Tq(y))throw new vo(i);return sT(y)}function W$(y){return y===null}function Q$(y){return y==null}function v4(y){return typeof y=="number"||Za(y)&&Ei(y)==Ce}function h0(y){if(!Za(y)||Ei(y)!=V)return!1;var E=o1(y);if(E===null)return!0;var k=ua.call(E,"constructor")&&E.constructor;return typeof k=="function"&&k instanceof k&&Jh.call(k)==zV}var M2=OA?vn(OA):GB;function X$(y){return p4(y)&&y>=-Y&&y<=Y}var g4=PA?vn(PA):WB;function O1(y){return typeof y=="string"||!bo(y)&&Za(y)&&Ei(y)==pe}function _n(y){return typeof y=="symbol"||Za(y)&&Ei(y)==we}var pf=FA?vn(FA):QB;function K$(y){return y===o}function Y$(y){return Za(y)&&li(y)==Ge}function J$(y){return Za(y)&&Ei(y)==Ze}var Z$=y1(s2),eU=y1(function(y,E){return y<=E});function _4(y){if(!y)return[];if(Gi(y))return O1(y)?hs(y):ji(y);if(o0&&y[o0])return PV(y[o0]());var E=li(y),k=E==Z?Qb:E==se?Xh:hf;return k(y)}function Cl(y){if(!y)return y===0?y:0;if(y=Wn(y),y===X||y===-X){var E=y<0?-1:1;return E*de}return y===y?y:0}function xo(y){var E=Cl(y),k=E%1;return E===E?k?E-k:E:0}function b4(y){return y?Pu(xo(y),0,W):0}function Wn(y){if(typeof y=="number")return y;if(_n(y))return ye;if(Xa(y)){var E=typeof y.valueOf=="function"?y.valueOf():y;y=Xa(E)?E+"":E}if(typeof y!="string")return y===0?y:+y;y=BA(y);var k=Fb.test(y);return k||zh.test(y)?pV(y.slice(2),k?2:8):e0.test(y)?ye:+y}function y4(y){return $s(y,Wi(y))}function tU(y){return y?Pu(xo(y),-Y,Y):y===0?y:0}function ia(y){return y==null?"":gn(y)}var oU=df(function(y,E){if(m0(E)||Gi(E)){$s(E,qr(E),y);return}for(var k in E)ua.call(E,k)&&s0(y,k,E[k])}),x4=df(function(y,E){$s(E,Wi(E),y)}),P1=df(function(y,E,k,$){$s(E,Wi(E),y,$)}),aU=df(function(y,E,k,$){$s(E,qr(E),y,$)}),rU=bl(e2);function iU(y,E){var k=uf(y);return E==null?k:ZA(k,E)}var nU=So(function(y,E){y=Ca(y);var k=-1,$=E.length,te=$>2?E[2]:o;for(te&&Si(E[0],E[1],te)&&($=1);++k<$;)for(var me=E[k],Ae=Wi(me),Fe=-1,Le=Ae.length;++Fe<Le;){var it=Ae[Fe],nt=y[it];(nt===o||gs(nt,sf[it])&&!ua.call(y,it))&&(y[it]=me[it])}return y}),sU=So(function(y){return y.push(o,BT),hn(C4,o,y)});function lU(y,E){return NA(y,eo(E,3),Ls)}function cU(y,E){return NA(y,eo(E,3),o2)}function uU(y,E){return y==null?y:t2(y,eo(E,3),Wi)}function dU(y,E){return y==null?y:rT(y,eo(E,3),Wi)}function fU(y,E){return y&&Ls(y,eo(E,3))}function mU(y,E){return y&&o2(y,eo(E,3))}function pU(y){return y==null?[]:f1(y,qr(y))}function hU(y){return y==null?[]:f1(y,Wi(y))}function N2(y,E,k){var $=y==null?o:Fu(y,E);return $===o?k:$}function vU(y,E){return y!=null&&$T(y,E,BB)}function k2(y,E){return y!=null&&$T(y,E,qB)}var gU=MT(function(y,E,k){E!=null&&typeof E.toString!="function"&&(E=Zh.call(E)),y[E]=k},V2(Qi)),_U=MT(function(y,E,k){E!=null&&typeof E.toString!="function"&&(E=Zh.call(E)),ua.call(y,E)?y[E].push(k):y[E]=[k]},eo),bU=So(c0);function qr(y){return Gi(y)?YA(y):n2(y)}function Wi(y){return Gi(y)?YA(y,!0):XB(y)}function yU(y,E){var k={};return E=eo(E,3),Ls(y,function($,te,me){gl(k,E($,te,me),$)}),k}function xU(y,E){var k={};return E=eo(E,3),Ls(y,function($,te,me){gl(k,te,E($,te,me))}),k}var CU=df(function(y,E,k){m1(y,E,k)}),C4=df(function(y,E,k,$){m1(y,E,k,$)}),wU=bl(function(y,E){var k={};if(y==null)return k;var $=!1;E=Ua(E,function(me){return me=hc(me,y),$||($=me.length>1),me}),$s(y,y2(y),k),$&&(k=Hn(k,d|f|m,vq));for(var te=E.length;te--;)f2(k,E[te]);return k});function EU(y,E){return w4(y,T1(eo(E)))}var SU=bl(function(y,E){return y==null?{}:YB(y,E)});function w4(y,E){if(y==null)return{};var k=Ua(y2(y),function($){return[$]});return E=eo(E),pT(y,k,function($,te){return E($,te[0])})}function IU(y,E,k){E=hc(E,y);var $=-1,te=E.length;for(te||(te=1,y=o);++$<te;){var me=y==null?o:y[Us(E[$])];me===o&&($=te,me=k),y=xl(me)?me.call(y):me}return y}function AU(y,E,k){return y==null?y:d0(y,E,k)}function TU(y,E,k,$){return $=typeof $=="function"?$:o,y==null?y:d0(y,E,k,$)}var E4=RT(qr),S4=RT(Wi);function DU(y,E,k){var $=bo(y),te=$||gc(y)||pf(y);if(E=eo(E,4),k==null){var me=y&&y.constructor;te?k=$?new me:[]:Xa(y)?k=xl(me)?uf(o1(y)):{}:k={}}return(te?$n:Ls)(y,function(Ae,Fe,Le){return E(k,Ae,Fe,Le)}),k}function OU(y,E){return y==null?!0:f2(y,E)}function PU(y,E,k){return y==null?y:bT(y,E,h2(k))}function FU(y,E,k,$){return $=typeof $=="function"?$:o,y==null?y:bT(y,E,h2(k),$)}function hf(y){return y==null?[]:Wb(y,qr(y))}function MU(y){return y==null?[]:Wb(y,Wi(y))}function NU(y,E,k){return k===o&&(k=E,E=o),k!==o&&(k=Wn(k),k=k===k?k:0),E!==o&&(E=Wn(E),E=E===E?E:0),Pu(Wn(y),E,k)}function kU(y,E,k){return E=Cl(E),k===o?(k=E,E=0):k=Cl(k),y=Wn(y),LB(y,E,k)}function RU(y,E,k){if(k&&typeof k!="boolean"&&Si(y,E,k)&&(E=k=o),k===o&&(typeof E=="boolean"?(k=E,E=o):typeof y=="boolean"&&(k=y,y=o)),y===o&&E===o?(y=0,E=1):(y=Cl(y),E===o?(E=y,y=0):E=Cl(E)),y>E){var $=y;y=E,E=$}if(k||y%1||E%1){var te=XA();return si(y+te*(E-y+mV("1e-"+((te+"").length-1))),E)}return c2(y,E)}var VU=ff(function(y,E,k){return E=E.toLowerCase(),y+(k?I4(E):E)});function I4(y){return R2(ia(y).toLowerCase())}function A4(y){return y=ia(y),y&&y.replace(jh,IV).replace(aV,"")}function BU(y,E,k){y=ia(y),E=gn(E);var $=y.length;k=k===o?$:Pu(xo(k),0,$);var te=k;return k-=E.length,k>=0&&y.slice(k,te)==E}function qU(y){return y=ia(y),y&&qn.test(y)?y.replace(ni,AV):y}function LU(y){return y=ia(y),y&&Me.test(y)?y.replace(xe,"\\$&"):y}var $U=ff(function(y,E,k){return y+(k?"-":"")+E.toLowerCase()}),UU=ff(function(y,E,k){return y+(k?" ":"")+E.toLowerCase()}),zU=OT("toLowerCase");function HU(y,E,k){y=ia(y),E=xo(E);var $=E?rf(y):0;if(!E||$>=E)return y;var te=(E-$)/2;return b1(n1(te),k)+y+b1(i1(te),k)}function jU(y,E,k){y=ia(y),E=xo(E);var $=E?rf(y):0;return E&&$<E?y+b1(E-$,k):y}function GU(y,E,k){y=ia(y),E=xo(E);var $=E?rf(y):0;return E&&$<E?b1(E-$,k)+y:y}function WU(y,E,k){return k||E==null?E=0:E&&(E=+E),ZV(ia(y).replace(je,""),E||0)}function QU(y,E,k){return(k?Si(y,E,k):E===o)?E=1:E=xo(E),u2(ia(y),E)}function XU(){var y=arguments,E=ia(y[0]);return y.length<3?E:E.replace(y[1],y[2])}var KU=ff(function(y,E,k){return y+(k?"_":"")+E.toLowerCase()});function YU(y,E,k){return k&&typeof k!="number"&&Si(y,E,k)&&(E=k=o),k=k===o?W:k>>>0,k?(y=ia(y),y&&(typeof E=="string"||E!=null&&!M2(E))&&(E=gn(E),!E&&af(y))?vc(hs(y),0,k):y.split(E,k)):[]}var JU=ff(function(y,E,k){return y+(k?" ":"")+R2(E)});function ZU(y,E,k){return y=ia(y),k=k==null?0:Pu(xo(k),0,y.length),E=gn(E),y.slice(k,k+E.length)==E}function ez(y,E,k){var $=ue.templateSettings;k&&Si(y,E,k)&&(E=o),y=ia(y),E=P1({},E,$,VT);var te=P1({},E.imports,$.imports,VT),me=qr(te),Ae=Wb(te,me),Fe,Le,it=0,nt=E.interpolate||Oe,ft="__p += '",wt=Xb((E.escape||Oe).source+"|"+nt.source+"|"+(nt===Qt?ml:Oe).source+"|"+(E.evaluate||Oe).source+"|$","g"),jt="//# sourceURL="+(ua.call(E,"sourceURL")?(E.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++lV+"]")+`
`;y.replace(wt,function(oo,Po,qo,bn,Ii,yn){return qo||(qo=bn),ft+=y.slice(it,yn).replace(Dt,TV),Po&&(Fe=!0,ft+=`' +
__e(`+Po+`) +
'`),Ii&&(Le=!0,ft+=`';
`+Ii+`;
__p += '`),qo&&(ft+=`' +
((__t = (`+qo+`)) == null ? '' : __t) +
'`),it=yn+oo.length,oo}),ft+=`';
`;var to=ua.call(E,"variable")&&E.variable;if(!to)ft=`with (obj) {
`+ft+`
}
`;else if($o.test(to))throw new vo(s);ft=(Le?ft.replace(po,""):ft).replace(Ea,"$1").replace(pr,"$1;"),ft="function("+(to||"obj")+`) {
`+(to?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Fe?", __e = _.escape":"")+(Le?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ft+`return __p
}`;var wo=D4(function(){return ea(me,jt+"return "+ft).apply(o,Ae)});if(wo.source=ft,F2(wo))throw wo;return wo}function tz(y){return ia(y).toLowerCase()}function oz(y){return ia(y).toUpperCase()}function az(y,E,k){if(y=ia(y),y&&(k||E===o))return BA(y);if(!y||!(E=gn(E)))return y;var $=hs(y),te=hs(E),me=qA($,te),Ae=LA($,te)+1;return vc($,me,Ae).join("")}function rz(y,E,k){if(y=ia(y),y&&(k||E===o))return y.slice(0,UA(y)+1);if(!y||!(E=gn(E)))return y;var $=hs(y),te=LA($,hs(E))+1;return vc($,0,te).join("")}function iz(y,E,k){if(y=ia(y),y&&(k||E===o))return y.replace(je,"");if(!y||!(E=gn(E)))return y;var $=hs(y),te=qA($,hs(E));return vc($,te).join("")}function nz(y,E){var k=I,$=N;if(Xa(E)){var te="separator"in E?E.separator:te;k="length"in E?xo(E.length):k,$="omission"in E?gn(E.omission):$}y=ia(y);var me=y.length;if(af(y)){var Ae=hs(y);me=Ae.length}if(k>=me)return y;var Fe=k-rf($);if(Fe<1)return $;var Le=Ae?vc(Ae,0,Fe).join(""):y.slice(0,Fe);if(te===o)return Le+$;if(Ae&&(Fe+=Le.length-Fe),M2(te)){if(y.slice(Fe).search(te)){var it,nt=Le;for(te.global||(te=Xb(te.source,ia(pl.exec(te))+"g")),te.lastIndex=0;it=te.exec(nt);)var ft=it.index;Le=Le.slice(0,ft===o?Fe:ft)}}else if(y.indexOf(gn(te),Fe)!=Fe){var wt=Le.lastIndexOf(te);wt>-1&&(Le=Le.slice(0,wt))}return Le+$}function sz(y){return y=ia(y),y&&ps.test(y)?y.replace(zi,kV):y}var lz=ff(function(y,E,k){return y+(k?" ":"")+E.toUpperCase()}),R2=OT("toUpperCase");function T4(y,E,k){return y=ia(y),E=k?o:E,E===o?OV(y)?BV(y):xV(y):y.match(E)||[]}var D4=So(function(y,E){try{return hn(y,o,E)}catch(k){return F2(k)?k:new vo(k)}}),cz=bl(function(y,E){return $n(E,function(k){k=Us(k),gl(y,k,O2(y[k],y))}),y});function uz(y){var E=y==null?0:y.length,k=eo();return y=E?Ua(y,function($){if(typeof $[1]!="function")throw new Un(n);return[k($[0]),$[1]]}):[],So(function($){for(var te=-1;++te<E;){var me=y[te];if(hn(me[0],this,$))return hn(me[1],this,$)}})}function dz(y){return kB(Hn(y,d))}function V2(y){return function(){return y}}function fz(y,E){return y==null||y!==y?E:y}var mz=FT(),pz=FT(!0);function Qi(y){return y}function B2(y){return lT(typeof y=="function"?y:Hn(y,d))}function hz(y){return uT(Hn(y,d))}function vz(y,E){return dT(y,Hn(E,d))}var gz=So(function(y,E){return function(k){return c0(k,y,E)}}),_z=So(function(y,E){return function(k){return c0(y,k,E)}});function q2(y,E,k){var $=qr(E),te=f1(E,$);k==null&&!(Xa(E)&&(te.length||!$.length))&&(k=E,E=y,y=this,te=f1(E,qr(E)));var me=!(Xa(k)&&"chain"in k)||!!k.chain,Ae=xl(y);return $n(te,function(Fe){var Le=E[Fe];y[Fe]=Le,Ae&&(y.prototype[Fe]=function(){var it=this.__chain__;if(me||it){var nt=y(this.__wrapped__),ft=nt.__actions__=ji(this.__actions__);return ft.push({func:Le,args:arguments,thisArg:y}),nt.__chain__=it,nt}return Le.apply(y,uc([this.value()],arguments))})}),y}function bz(){return Gr._===this&&(Gr._=HV),this}function L2(){}function yz(y){return y=xo(y),So(function(E){return fT(E,y)})}var xz=g2(Ua),Cz=g2(MA),wz=g2(Ub);function O4(y){return E2(y)?zb(Us(y)):JB(y)}function Ez(y){return function(E){return y==null?o:Fu(y,E)}}var Sz=NT(),Iz=NT(!0);function $2(){return[]}function U2(){return!1}function Az(){return{}}function Tz(){return""}function Dz(){return!0}function Oz(y,E){if(y=xo(y),y<1||y>Y)return[];var k=W,$=si(y,W);E=eo(E),y-=W;for(var te=Gb($,E);++k<y;)E(k);return te}function Pz(y){return bo(y)?Ua(y,Us):_n(y)?[y]:ji(KT(ia(y)))}function Fz(y){var E=++UV;return ia(y)+E}var Mz=_1(function(y,E){return y+E},0),Nz=_2("ceil"),kz=_1(function(y,E){return y/E},1),Rz=_2("floor");function Vz(y){return y&&y.length?d1(y,Qi,a2):o}function Bz(y,E){return y&&y.length?d1(y,eo(E,2),a2):o}function qz(y){return RA(y,Qi)}function Lz(y,E){return RA(y,eo(E,2))}function $z(y){return y&&y.length?d1(y,Qi,s2):o}function Uz(y,E){return y&&y.length?d1(y,eo(E,2),s2):o}var zz=_1(function(y,E){return y*E},1),Hz=_2("round"),jz=_1(function(y,E){return y-E},0);function Gz(y){return y&&y.length?jb(y,Qi):0}function Wz(y,E){return y&&y.length?jb(y,eo(E,2)):0}return ue.after=h$,ue.ary=s4,ue.assign=oU,ue.assignIn=x4,ue.assignInWith=P1,ue.assignWith=aU,ue.at=rU,ue.before=l4,ue.bind=O2,ue.bindAll=cz,ue.bindKey=c4,ue.castArray=A$,ue.chain=r4,ue.chunk=kq,ue.compact=Rq,ue.concat=Vq,ue.cond=uz,ue.conforms=dz,ue.constant=V2,ue.countBy=GL,ue.create=iU,ue.curry=u4,ue.curryRight=d4,ue.debounce=f4,ue.defaults=nU,ue.defaultsDeep=sU,ue.defer=v$,ue.delay=g$,ue.difference=Bq,ue.differenceBy=qq,ue.differenceWith=Lq,ue.drop=Uq,ue.dropRight=zq,ue.dropRightWhile=Hq,ue.dropWhile=jq,ue.fill=Gq,ue.filter=QL,ue.flatMap=YL,ue.flatMapDeep=JL,ue.flatMapDepth=ZL,ue.flatten=e4,ue.flattenDeep=Wq,ue.flattenDepth=Qq,ue.flip=_$,ue.flow=mz,ue.flowRight=pz,ue.fromPairs=Xq,ue.functions=pU,ue.functionsIn=hU,ue.groupBy=e$,ue.initial=Yq,ue.intersection=Jq,ue.intersectionBy=Zq,ue.intersectionWith=eL,ue.invert=gU,ue.invertBy=_U,ue.invokeMap=o$,ue.iteratee=B2,ue.keyBy=a$,ue.keys=qr,ue.keysIn=Wi,ue.map=S1,ue.mapKeys=yU,ue.mapValues=xU,ue.matches=hz,ue.matchesProperty=vz,ue.memoize=A1,ue.merge=CU,ue.mergeWith=C4,ue.method=gz,ue.methodOf=_z,ue.mixin=q2,ue.negate=T1,ue.nthArg=yz,ue.omit=wU,ue.omitBy=EU,ue.once=b$,ue.orderBy=r$,ue.over=xz,ue.overArgs=y$,ue.overEvery=Cz,ue.overSome=wz,ue.partial=P2,ue.partialRight=m4,ue.partition=i$,ue.pick=SU,ue.pickBy=w4,ue.property=O4,ue.propertyOf=Ez,ue.pull=rL,ue.pullAll=o4,ue.pullAllBy=iL,ue.pullAllWith=nL,ue.pullAt=sL,ue.range=Sz,ue.rangeRight=Iz,ue.rearg=x$,ue.reject=l$,ue.remove=lL,ue.rest=C$,ue.reverse=T2,ue.sampleSize=u$,ue.set=AU,ue.setWith=TU,ue.shuffle=d$,ue.slice=cL,ue.sortBy=p$,ue.sortedUniq=vL,ue.sortedUniqBy=gL,ue.split=YU,ue.spread=w$,ue.tail=_L,ue.take=bL,ue.takeRight=yL,ue.takeRightWhile=xL,ue.takeWhile=CL,ue.tap=VL,ue.throttle=E$,ue.thru=E1,ue.toArray=_4,ue.toPairs=E4,ue.toPairsIn=S4,ue.toPath=Pz,ue.toPlainObject=y4,ue.transform=DU,ue.unary=S$,ue.union=wL,ue.unionBy=EL,ue.unionWith=SL,ue.uniq=IL,ue.uniqBy=AL,ue.uniqWith=TL,ue.unset=OU,ue.unzip=D2,ue.unzipWith=a4,ue.update=PU,ue.updateWith=FU,ue.values=hf,ue.valuesIn=MU,ue.without=DL,ue.words=T4,ue.wrap=I$,ue.xor=OL,ue.xorBy=PL,ue.xorWith=FL,ue.zip=ML,ue.zipObject=NL,ue.zipObjectDeep=kL,ue.zipWith=RL,ue.entries=E4,ue.entriesIn=S4,ue.extend=x4,ue.extendWith=P1,q2(ue,ue),ue.add=Mz,ue.attempt=D4,ue.camelCase=VU,ue.capitalize=I4,ue.ceil=Nz,ue.clamp=NU,ue.clone=T$,ue.cloneDeep=O$,ue.cloneDeepWith=P$,ue.cloneWith=D$,ue.conformsTo=F$,ue.deburr=A4,ue.defaultTo=fz,ue.divide=kz,ue.endsWith=BU,ue.eq=gs,ue.escape=qU,ue.escapeRegExp=LU,ue.every=WL,ue.find=XL,ue.findIndex=JT,ue.findKey=lU,ue.findLast=KL,ue.findLastIndex=ZT,ue.findLastKey=cU,ue.floor=Rz,ue.forEach=i4,ue.forEachRight=n4,ue.forIn=uU,ue.forInRight=dU,ue.forOwn=fU,ue.forOwnRight=mU,ue.get=N2,ue.gt=M$,ue.gte=N$,ue.has=vU,ue.hasIn=k2,ue.head=t4,ue.identity=Qi,ue.includes=t$,ue.indexOf=Kq,ue.inRange=kU,ue.invoke=bU,ue.isArguments=ku,ue.isArray=bo,ue.isArrayBuffer=k$,ue.isArrayLike=Gi,ue.isArrayLikeObject=or,ue.isBoolean=R$,ue.isBuffer=gc,ue.isDate=V$,ue.isElement=B$,ue.isEmpty=q$,ue.isEqual=L$,ue.isEqualWith=$$,ue.isError=F2,ue.isFinite=U$,ue.isFunction=xl,ue.isInteger=p4,ue.isLength=D1,ue.isMap=h4,ue.isMatch=z$,ue.isMatchWith=H$,ue.isNaN=j$,ue.isNative=G$,ue.isNil=Q$,ue.isNull=W$,ue.isNumber=v4,ue.isObject=Xa,ue.isObjectLike=Za,ue.isPlainObject=h0,ue.isRegExp=M2,ue.isSafeInteger=X$,ue.isSet=g4,ue.isString=O1,ue.isSymbol=_n,ue.isTypedArray=pf,ue.isUndefined=K$,ue.isWeakMap=Y$,ue.isWeakSet=J$,ue.join=tL,ue.kebabCase=$U,ue.last=Gn,ue.lastIndexOf=oL,ue.lowerCase=UU,ue.lowerFirst=zU,ue.lt=Z$,ue.lte=eU,ue.max=Vz,ue.maxBy=Bz,ue.mean=qz,ue.meanBy=Lz,ue.min=$z,ue.minBy=Uz,ue.stubArray=$2,ue.stubFalse=U2,ue.stubObject=Az,ue.stubString=Tz,ue.stubTrue=Dz,ue.multiply=zz,ue.nth=aL,ue.noConflict=bz,ue.noop=L2,ue.now=I1,ue.pad=HU,ue.padEnd=jU,ue.padStart=GU,ue.parseInt=WU,ue.random=RU,ue.reduce=n$,ue.reduceRight=s$,ue.repeat=QU,ue.replace=XU,ue.result=IU,ue.round=Hz,ue.runInContext=Be,ue.sample=c$,ue.size=f$,ue.snakeCase=KU,ue.some=m$,ue.sortedIndex=uL,ue.sortedIndexBy=dL,ue.sortedIndexOf=fL,ue.sortedLastIndex=mL,ue.sortedLastIndexBy=pL,ue.sortedLastIndexOf=hL,ue.startCase=JU,ue.startsWith=ZU,ue.subtract=jz,ue.sum=Gz,ue.sumBy=Wz,ue.template=ez,ue.times=Oz,ue.toFinite=Cl,ue.toInteger=xo,ue.toLength=b4,ue.toLower=tz,ue.toNumber=Wn,ue.toSafeInteger=tU,ue.toString=ia,ue.toUpper=oz,ue.trim=az,ue.trimEnd=rz,ue.trimStart=iz,ue.truncate=nz,ue.unescape=sz,ue.uniqueId=Fz,ue.upperCase=lz,ue.upperFirst=R2,ue.each=i4,ue.eachRight=n4,ue.first=t4,q2(ue,function(){var y={};return Ls(ue,function(E,k){ua.call(ue.prototype,k)||(y[k]=E)}),y}(),{chain:!1}),ue.VERSION=r,$n(["bind","bindKey","curry","curryRight","partial","partialRight"],function(y){ue[y].placeholder=ue}),$n(["drop","take"],function(y,E){Fo.prototype[y]=function(k){k=k===o?1:Cr(xo(k),0);var $=this.__filtered__&&!E?new Fo(this):this.clone();return $.__filtered__?$.__takeCount__=si(k,$.__takeCount__):$.__views__.push({size:si(k,W),type:y+($.__dir__<0?"Right":"")}),$},Fo.prototype[y+"Right"]=function(k){return this.reverse()[y](k).reverse()}}),$n(["filter","map","takeWhile"],function(y,E){var k=E+1,$=k==L||k==H;Fo.prototype[y]=function(te){var me=this.clone();return me.__iteratees__.push({iteratee:eo(te,3),type:k}),me.__filtered__=me.__filtered__||$,me}}),$n(["head","last"],function(y,E){var k="take"+(E?"Right":"");Fo.prototype[y]=function(){return this[k](1).value()[0]}}),$n(["initial","tail"],function(y,E){var k="drop"+(E?"":"Right");Fo.prototype[y]=function(){return this.__filtered__?new Fo(this):this[k](1)}}),Fo.prototype.compact=function(){return this.filter(Qi)},Fo.prototype.find=function(y){return this.filter(y).head()},Fo.prototype.findLast=function(y){return this.reverse().find(y)},Fo.prototype.invokeMap=So(function(y,E){return typeof y=="function"?new Fo(this):this.map(function(k){return c0(k,y,E)})}),Fo.prototype.reject=function(y){return this.filter(T1(eo(y)))},Fo.prototype.slice=function(y,E){y=xo(y);var k=this;return k.__filtered__&&(y>0||E<0)?new Fo(k):(y<0?k=k.takeRight(-y):y&&(k=k.drop(y)),E!==o&&(E=xo(E),k=E<0?k.dropRight(-E):k.take(E-y)),k)},Fo.prototype.takeRightWhile=function(y){return this.reverse().takeWhile(y).reverse()},Fo.prototype.toArray=function(){return this.take(W)},Ls(Fo.prototype,function(y,E){var k=/^(?:filter|find|map|reject)|While$/.test(E),$=/^(?:head|last)$/.test(E),te=ue[$?"take"+(E=="last"?"Right":""):E],me=$||/^find/.test(E);!te||(ue.prototype[E]=function(){var Ae=this.__wrapped__,Fe=$?[1]:arguments,Le=Ae instanceof Fo,it=Fe[0],nt=Le||bo(Ae),ft=function(Po){var qo=te.apply(ue,uc([Po],Fe));return $&&wt?qo[0]:qo};nt&&k&&typeof it=="function"&&it.length!=1&&(Le=nt=!1);var wt=this.__chain__,jt=!!this.__actions__.length,to=me&&!wt,wo=Le&&!jt;if(!me&&nt){Ae=wo?Ae:new Fo(this);var oo=y.apply(Ae,Fe);return oo.__actions__.push({func:E1,args:[ft],thisArg:o}),new zn(oo,wt)}return to&&wo?y.apply(this,Fe):(oo=this.thru(ft),to?$?oo.value()[0]:oo.value():oo)})}),$n(["pop","push","shift","sort","splice","unshift"],function(y){var E=Kh[y],k=/^(?:push|sort|unshift)$/.test(y)?"tap":"thru",$=/^(?:pop|shift)$/.test(y);ue.prototype[y]=function(){var te=arguments;if($&&!this.__chain__){var me=this.value();return E.apply(bo(me)?me:[],te)}return this[k](function(Ae){return E.apply(bo(Ae)?Ae:[],te)})}}),Ls(Fo.prototype,function(y,E){var k=ue[E];if(k){var $=k.name+"";ua.call(cf,$)||(cf[$]=[]),cf[$].push({name:E,func:k})}}),cf[g1(o,x).name]=[{name:"wrapper",func:o}],Fo.prototype.clone=nB,Fo.prototype.reverse=sB,Fo.prototype.value=lB,ue.prototype.at=BL,ue.prototype.chain=qL,ue.prototype.commit=LL,ue.prototype.next=$L,ue.prototype.plant=zL,ue.prototype.reverse=HL,ue.prototype.toJSON=ue.prototype.valueOf=ue.prototype.value=jL,ue.prototype.first=ue.prototype.head,o0&&(ue.prototype[o0]=UL),ue},nf=qV();Au?((Au.exports=nf)._=nf,Bb._=nf):Gr._=nf}).call(vt)})(Aa,Aa.exports);var dC=Aa.exports;function dM(e,t){return Aa.exports.transform(t,(o,r,a)=>{Aa.exports.isEqual(r,e[a])||(o[a]=Aa.exports.isObject(r)&&Aa.exports.isObject(e[a])?dM(r,e[a]):r)})}function Ja(e,...t){return t.reduce((o,r)=>dM(o,r),e)}function Vd(e){return new Promise(t=>setTimeout(t,e))}function zJ(e){let t={};for(let o in e)e[o]&&(t[o]=e[o]);return t}function HJ(e,t){return(e||0).toFixed(t).replace(".",",").replace(/\d(?=(\d{3})+,)/g,"$&.")}async function jJ(e){var l;const t=JSON.parse(localStorage.getItem("clienteSistema")),o=await $db.empresa.le({codigoClienteSistema:t.codigoClienteSistema}),r=await $db.contato.le({codigoContato:o[0].codigoContato}),i=(l=(await $db.contatoEndereco.leNew({idContato:r[0].id}))[0])==null?void 0:l.pais;let n="55";i==="Chile"&&(n="56");let s=e.telefone;return!s&&typeof s!="string"?s:n?n+s.replace(/\D/g,"").replace(/^55/,"").replace(/^56/,""):"55"+s.replace(/\D/g,"").replace(/^55/,"")}var kE={exports:{}};function RE(){}RE.prototype={on:function(e,t,o){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:o}),this},once:function(e,t,o){var r=this;function a(){r.off(e,a),t.apply(o,arguments)}return a._=t,this.on(e,a,o)},emit:function(e){var t=[].slice.call(arguments,1),o=((this.e||(this.e={}))[e]||[]).slice(),r=0,a=o.length;for(r;r<a;r++)o[r].fn.apply(o[r].ctx,t);return this},off:function(e,t){var o=this.e||(this.e={}),r=o[e],a=[];if(r&&t)for(var i=0,n=r.length;i<n;i++)r[i].fn!==t&&r[i].fn._!==t&&a.push(r[i]);return a.length?o[e]=a:delete o[e],this}};kE.exports=RE;kE.exports.TinyEmitter=RE;var GJ=kE.exports;const WJ=new GJ;async function QJ({cpf:e=null,cnpj:t=null,bancoDeDados:o=null}={}){try{const a=await(await fetch("https://whats.b15.com.br/conectados")).json(),i=`cpf${e}`,n=`cnpj${t}`;let s;return a[i]==="Conectado"?s=i:a[n]==="Conectado"?s=n:a[o]==="Conectado"&&(s=o),s}catch(r){console.error(r)}}async function XJ({configuracao:e=null,documento:t={},loading:o=!1,dialog:r=!1}={}){var a,i,n,s,l,u,c,d,f,m,p;try{o&&$q.loading.show();const v=[];let g=t==null?void 0:t.numeroDocumentoNacional;if(!g){const _=await $db.contato.le({id:t==null?void 0:t.idEmpresa});g=(a=_==null?void 0:_.numeroDocumentoNacional)==null?void 0:a.replace("/","_")}v.push(QJ({cpf:(s=(n=(i=$db.usuario)==null?void 0:i.logado)==null?void 0:n.numeroDocumentoNacional)!=null?s:"",cnpj:g,bancoDeDados:((l=JSON.parse(localStorage.getItem("clienteSistema")))==null?void 0:l.bancoDeDados)||{}}));let x;if(typeof e=="string"){const _=await $db.configuracoes.le({prefixoNome:`${e}.whatsapp.enviarautomatico.`});x=_.find(w=>w.idEmpresa===t.idEmpresa),x||(x=_.find(w=>!w.idEmpresa))}typeof e=="object"&&(x=e);const b=(d=(c=(u=x==null?void 0:x.nome)==null?void 0:u.split("."))==null?void 0:c.slice(-1))==null?void 0:d[0];if(b){v.push($utils.obterUrlPdf(b,t));const _=await $db.hibrido.lista({table:"contatoTelefone",where:{idContato:t.idContato}});let w=(m=(f=(_==null?void 0:_.find(T=>{var I;return((I=T.tipoTelefone)==null?void 0:I.toLowerCase())==="whatsapp"}))||(_==null?void 0:_.find(T=>{var I;return((I=T.tipoTelefone)==null?void 0:I.toLowerCase())==="principal"}))||(_==null?void 0:_[0]))==null?void 0:f.telefone)==null?void 0:m.trim();if(r)try{$q.loading.hide(),await new Promise((T,I)=>{$q.dialog({title:"Enviar impresso pelo Whatsapp?",preventClose:!0,prompt:{label:"Enviar para este n\xFAmero:",model:w,hint:"Ou adicione um novo n\xFAmero, ex: 19988776655",isValid:N=>N.length>0,type:"text"},cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(N=>{w=N==null?void 0:N.trim(),T()}).onCancel(I)})}catch{return}if(!w){$q.notifyError("Impress\xE3o n\xE3o enviada por Whatsapp! Motivo: telefone n\xE3o informado.");return}o&&$q.loading.show({message:"Enviando impresso por whatsapp...",html:!0,boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary"});const[S,D]=await Promise.all(v);if(!S){$q.notifyError("Envio Whatsapp indispon\xEDvel. Configure a conex\xE3o!");return}if(D.erro){$q.notifyError("Envio Whatsapp indispon\xEDvel. Falha ao gerar PDF do impresso!");return}const M=(p=x.texto)!=null?p:`Voc\xEA est\xE1 recebendo o ${x.valor} da empresa ${t.descricaoEmpresa} (${t.numeroDocumentoEmpresa}).`,O=await $api.whatsapp.envia({banco:S,telDestino:w,mensa:M,anexo:[{url:D.url,nomeArquivo:"impresso.pdf"}]});if(O.erro){$q.notifyError(O.erro);return}$q.notify({message:"Whatsapp enviado com sucesso!",type:"positive"})}}catch(v){console.error(v),$q.notifyError("Falha no envio do whatsapp!")}finally{o&&$q.loading.hide()}}async function KJ({configuracao:e=null,documento:t={},loading:o=!1,dialog:r=!1}={}){var a,i,n,s,l,u,c,d;try{o&&$q.loading.show();let f;if(typeof e=="string"){const p=await $db.configuracoes.le({prefixoNome:`${e}.email.enviarautomatico.`});f=p.find(v=>v.idEmpresa===(t==null?void 0:t.idEmpresa)),f||(f=p.find(v=>!v.idEmpresa))}typeof e=="object"&&(f=e);const m=(n=(i=(a=f==null?void 0:f.nome)==null?void 0:a.split("."))==null?void 0:i.slice(-1))==null?void 0:n[0];if(m){const p=$utils.impressaoObterHtml(m,t),v=(l=f==null?void 0:f.texto)!=null?l:`Voc\xEA est\xE1 recebendo o ${(s=f==null?void 0:f.valor)!=null?s:"Impresso"} da empresa ${t==null?void 0:t.descricaoEmpresa}.`,g=await $db.contato.le({id:t==null?void 0:t.idContato});let x=String(g==null?void 0:g.email).trim().toLowerCase();if(r)try{$q.loading.hide(),await new Promise((M,O)=>{$q.dialog({title:"Enviar impresso para o e-mail?",preventClose:!0,prompt:{label:"Enviar para este e-mail:",model:x,hint:"Ou adicione um novo e-mail, ex: cliente@gmail.com",isValid:T=>T.length>0,type:"text"},cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(T=>{x=T==null?void 0:T.trim(),M()}).onCancel(O)})}catch{return}o&&$q.loading.show({message:"Enviando impresso por e-mail...",html:!0,boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary"});const b={de:"Geeks Solu\xE7\xF5es <auto@geekssolucoes.com.br>",para:String(x).trim().toLowerCase(),assunto:`${(u=f==null?void 0:f.valor)!=null?u:"Impresso"}`,mensagem:`${v}`},_=`${(c=f==null?void 0:f.valor)!=null?c:"Impresso"} enviado para ${b.para}, com sucesso!.`,w=[{name:`${(d=f==null?void 0:f.valor)!=null?d:"Impresso"}.pdf`,content:await p,method:"html2pdf"}],S={host:"smtp.gmail.com",port:587,ssl:!0,auth:{user:"auto@geekssolucoes.com.br",pass:"drab azmd uvtf izhd"},from:b.de,to:b.para,subject:b.assunto,text:b.mensagem,attachments:w},D=await fetch("https://api.b15.com.br/email/v2",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(!D.ok)throw D.ok;$q.notify({message:"Email enviado com sucesso!",type:"positive"})}}catch(f){console.error(f),$q.notifyError("Falha no envio do e-mail!")}finally{o&&$q.loading.hide()}}async function YJ(e){let t=[{valor:"envelope",texto:"Imprimir Envelope"},{valor:"envelopeMini",texto:"Imprimir Envelope Mini"}];try{const o=await $db.configuracoes.porNome("impressao.envelope",e);o.length>0&&(t=o.map(r=>({texto:"Imprimir Envelope",...r})))}catch(o){console.error(o),t=[]}return t}async function JJ(e){var r;const{nomeImpresso:t,idDocumento:o}=e!=null?e:{};try{$q.loading.show();const a=await $db.hibrido.le({table:"documento",id:o});if(a!=null&&a.id||$q.notify({type:"negative",message:"Documento n\xE3o encontrado"}),((r=(await $db.configuracoes.porNome("impressao.envelope.bloqueiasefaturaaberta",a.idEmpresa))[0])==null?void 0:r.valor)==="1"&&!await $db.permissao.objeto("Diretiva_Envelope_Imprimir_FaturaAberta")){if(a.tipo==="Envelope")if(a.idFatura){const l=(await $db.hibrido.lista({table:"documento",where:{id:a.idFatura}}))[0];if(!l){$q.notify({type:"negative",message:"Impress\xE3o n\xE3o permitida. Fatura n\xE3o encontrada!"});return}if(l.status==="Aberta"){$q.notify({type:"negative",message:"Impress\xE3o n\xE3o permitida. Envelope pertence a uma fatura em aberto!"});return}}else{$q.notify({type:"negative",message:"Impress\xE3o n\xE3o permitida. Envelope n\xE3o pertence a uma fatura!"});return}if(a.tipo==="Fatura"&&a.status==="Aberta"){$q.notify({type:"negative",message:"Impress\xE3o n\xE3o permitida. Fatura em aberto!"});return}}$imprimir(t,a.id)}catch(a){console.error(a)}finally{$q.loading.hide()}}var ZJ={listaOpcoesImpressao:YJ,imprime:JJ};const w3={urlBase:"https://api.b15.com.br"};async function eZ(e,t){const o=mu("executarApi",JSON.stringify(t,0,2));try{const r=localStorage.getItem("bancoDeDados");sm(!r,"N\xE3o foi poss\xEDvel encontrar o nome do banco de dados.");const a=await Rd({baseURL:w3.urlBase,data:{token:et.usuario.logado.token||"",bancoDeDados:r,...t},method:"post",url:e});return sm(a.status!==200,"Api Erro: "+a.status+" - "+a.statusText),sm(!a.data,"Api Erro"),a.data.error&&console.error("Api Erro: "+JSON.stringify(a.data.error)),Na(!a.data.sucesso,a.data.mensagem||"Falha no servidor"),a.data}catch(r){if(r.name==="ErroValidacao")throw r;Na(r.name==="Error"&&r.message==="Network Error","Sem internet ou erro de comunica\xE7\xE3o!"),console.error("Falha no acesso ao servidor! Servidor: "+w3.urlBase+" Servico: "+e+`
`+r.stack),Na(!0,"Falha no acesso ao servidor!")}finally{pu(o,1)}}function tZ(e,t=!1){typeof e=="number"&&(e=String(e).replace(".",","));for(var o=[["zero","um","dois","tr\xEAs","quatro","cinco","seis","sete","oito","nove","dez","onze","doze","treze","quatorze","quinze","dezesseis","dezessete","dezoito","dezenove"],["dez","vinte","trinta","quarenta","cinq\xFCenta","sessenta","setenta","oitenta","noventa"],["cem","cento","duzentos","trezentos","quatrocentos","quinhentos","seiscentos","setecentos","oitocentos","novecentos"],["mil","milh\xE3o","bilh\xE3o","trilh\xE3o","quadrilh\xE3o","quintilh\xE3o","sextilh\xE3o","setilh\xE3o","octilh\xE3o","nonilh\xE3o","decilh\xE3o","undecilh\xE3o","dodecilh\xE3o","tredecilh\xE3o","quatrodecilh\xE3o","quindecilh\xE3o","sedecilh\xE3o","septendecilh\xE3o","octencilh\xE3o","nonencilh\xE3o"]],r,a,i,n=String(e).replace(t?/[^,\d]/g:/\D/g,"").split(","),s=" e ",l="real",u="centavo",c=n.length-1,d,f=-1,m=[],p=[],v="";++f<=c;p=[])if(f&&(n[f]=(("."+n[f])*1).toFixed(2).slice(2)),!!(r=(a=n[f]).slice((d=a.length)%3).match(/\d{3}/g),a=d%3?[a.slice(0,d%3)]:[],a=r?a.concat(r):a).length){for(r=-1,d=a.length;++r<d;v="")!(i=a[r]*1)||(i%100<20?v+=o[0][i%100]:i%100+1&&(v+=o[1][(i%100/10>>0)-1]+(i%10?s+o[0][i%10]:"")),p.push((i<100?v:i%100?o[2][i/100>>0]+s+v:o[2][i===100?0:i/100>>0])+((v=d-r-2)>-1?" "+(i>1&&v>0?o[3][v].replace("\xE3o","\xF5es"):o[3][v]):"")));r=p.length>1?(r=p.pop(),p.join(" ")+s+r):p.join("")||(!f&&n[f+1]*1>0||m.length?"":o[0][0]),r&&m.push(r+(t?" "+(a.join("")*1>1?f?u+"s":(/0{6,}$/.test(n[0])?"de ":"")+l.replace("l","is"):f?u:l):""))}return m.join(s)}function oZ(e,t){const o={contem:(r,a)=>r.includes(a),diferente:(r,a)=>r!==a,falso:r=>r===!1,igual:(r,a)=>r===a,inicia:(r,a)=>r.startsWith(a),maior:(r,a)=>Number(r)>Number(a),maiorIgual:(r,a)=>Number(r)>=Number(a),menor:(r,a)=>Number(r)<Number(a),menorIgual:(r,a)=>Number(r)<=Number(a),naoContem:(r,a)=>!r.includes(a),naoInicia:(r,a)=>!r.startsWith(a),naoTermina:(r,a)=>!r.endsWith(a),termina:(r,a)=>r.endsWith(a),verdadeiro:r=>r===!0,entre:(r,a,i)=>Number(r)>=Number(a)&&Number(r)<=Number(i)};for(const r of t)e=e.filter(a=>{const{campo:i,filtro:n,valor:s,valorFinal:l}=r;return!o[n]||!a[i]?!1:o[n](a[i],s,l)});return e}function fC(e){return(e||"").replace(/[^\d]/g,"")}const aZ=localStorage.getItem("logarGeeksApi")==="true";let E3=Number(localStorage.getItem("logarGeeksApiDados"))||0,S3=Number(localStorage.getItem("logarGeeksApiTrace"))||0;function rZ(e,t,o,r){var l;if(!aZ)return;const a=Object.keys(o).join(",");if(iZ.includes(a))return;const i=Object.values(o).map(u=>nZ[u==null?void 0:u.funcao]||(u==null?void 0:u.funcao)),n=[...new Set(i)].join(", ");let s="";if(n.includes("hibrido.")){for(const u in o)s+=JSON.stringify({...o[u],funcao:void 0});console.log(n,s,"tempo:",e,"tamanho:",t)}else{for(const u in o)s+=` ${u}(${((l=o[u])==null?void 0:l.table)||""})`;console.log("GeeksApi",n,s,"tempo:",e,"tamanho:",t)}E3&&(console.log({envio:o,resposta:r==null?void 0:r.data}),E3--),S3&&(console.log(JSON.stringify(o)),console.trace(),S3--)}const iZ=["sincronismoPlataformaPeriodico","sincronismoErpPeriodico","sistemaUsoLog","quantidadeRestante","clienteSistemas","vitrine","tutorial","mensagemPiscarLe"],nZ={"7934AE25-B337-43F4-9FC1-842C3486C491":"hibrido.le","FCC75497-9CAD-4D28-AB39-F669142BE8A9":"hibrido.lista","B3F1E9DD-5F40-400D-ADED-45D463F674E9":"hibrido.listaTodos","E6D1789B-D368-4DE8-A740-E8A4A1714D94":"hibrido.listaArquivo","56AD4077-0FDE-4986-8654-47A64181B43B":"faturas.listar","A43AD40B-2496-4349-9789-968A32487885":"vendas.listar","36F67A5B-BC74-4786-BCB5-F3A24ABA6467":"vendas.listarAtendimentoVendas","F61D68B6-3212-4B39-AF26-152634610BDD":"catalogo-virtual.ler-url-vs-banco","36FB3AC2-EDE6-483C-9645-FD09B69B10DA":"tutorial.tutorial"},sZ=()=>({validateStatus:e=>e>=200&&e<=500,timeout:3e4}),lZ=localStorage.getItem("url-api")||"https://api2.b15.com.br";async function zr(e,t={}){var n,s,l,u,c,d,f,m,p,v,g,x,b,_;const o=new Date;let r,a,i=0;try{let w=t.bancoDeDados,S="";e.login?w="login":(w===void 0&&(w=localStorage.getItem("bancoDeDados"),Na(!w,"N\xE3o foi poss\xEDvel encontrar o nome do banco de dados")),t.convidado?S="convidado":(S=(s=(n=et.usuario)==null?void 0:n.logado)==null?void 0:s.token,S||(await et.usuario.inicializaLogado(),S=(u=(l=et.usuario)==null?void 0:l.logado)==null?void 0:u.token),S||console.trace("Tentativa de acesso ao servidor sem autentica\xE7\xE3o"),Na(!S,"Usu\xE1rio n\xE3o autenticado")));const D=t.debug,M=sZ();M.headers={banco:w,token:S,debug:D},t.timeout&&(M.timeout=t.timeout);let O=t.baseURL||lZ;if((c=et.usuario.logado)!=null&&c.desenvolvedor()&&(O+="/show/"+Object.keys(e).map(N=>{var P,F,L,z,H,X;return N+((P=e[N])!=null&&P.table?"_"+e[N].table:"")+((z=(L=(F=e[N])==null?void 0:F.dados)==null?void 0:L[0])!=null&&z.acao?(X=(H=e[N])==null?void 0:H.dados)==null?void 0:X.map(Y=>`_${Y==null?void 0:Y.acao}_${Y==null?void 0:Y.tabela}`).join(""):"")}).join("_").substr(0,100)),a=await Rd.post(O,e,M),r=JSON.stringify(a.data).length,![200].includes(a.status)){console.error(`Erro retornado pelo geeks-api
`,JSON.stringify(a.data,0,2));const N=dC.get(a,"data.error.name")==="Mensagem"&&dC.get(a,"data.error.message")||"Falha na opera\xE7\xE3o";a.status===401&&(et.usuario.desconecta(),window.location.reload()),Na(!0,N,D?a.data:void 0)}if((p=(m=(f=(d=a==null?void 0:a.data)==null?void 0:d.sincronismoErpEnviar)==null?void 0:f.error)==null?void 0:m.message)!=null&&p.includes("idx_Sincronismo_id"))return a;const T=[],I=[];for(const N in a.data){const P=a.data[N];if(P!=null&&P.error){if(console.error(`Erro retornado pelo geeks-api
`,JSON.stringify(P.error,0,2)),D)return P.error;I.push(P.error),((v=P.error)==null?void 0:v.name)==="Mensagem"&&((g=P.error)==null?void 0:g.message)?T.push((x=P.error)==null?void 0:x.message):((_=(b=P.error)==null?void 0:b.originalError)==null?void 0:_.name)==="ConnectionError"?T.push("Erro no servi\xE7o "+N+" - Falha de comunica\xE7\xE3o com o banco de dados"):T.push("Erro no servi\xE7o "+N)}}return Na(T.length,T.join(" - "),D?I:void 0),a}catch(w){if(w.name==="ErroValidacao")throw w;i=1,w.name==="Error"&&(Na(w.message==="Network Error","Sem internet ou erro de comunica\xE7\xE3o!"),Na(w.message.startsWith("timeout of "),"Tempo limite esgotado ao aguardar a conex\xE3o!"),Na(w.message==="Request failed with status code 504","Servi\xE7o n\xE3o responde! (504 - Gateway Timeout)")),Na(!0,"Falha no acesso ao servidor! "+w.toString())}finally{const w=new Date,S=w-o;rZ(S,r,e,a),et.qualidadeSinal.contabilizarQualidadeSinal({horario:w,tempo:S,tamanho:r,erroComunicacao:i})}}async function cZ(e,t,o,r){if(![e,t,o,r].every(m=>m))return;const a=await Se().item.get(e),i=Aa.exports.get(a,"idNcm","");let n=Aa.exports.orderBy(await Se().contatoEndereco.where({idContato:o}).toArray(),"grupo","asc"),s=n.find(m=>(m.grupo||"").toLowerCase()==="principal");s||(s=n.find(m=>(m.grupo||"").toLowerCase()!=="principal"));let l=Aa.exports.get(s,"uf","");n=Aa.exports.orderBy(await Se().contatoEndereco.where({idContato:r}).toArray(),"grupo","asc"),s=n.find(m=>(m.grupo||"").toLowerCase()==="principal"),s||(s=n.find(m=>(m.grupo||"").toLowerCase()!=="principal"));let u=Aa.exports.get(s,"uf","");const c=await $db.hibrido.lista({table:"documentoOperacao",where:{idCfop:t}}),d=Aa.exports.get(c.find(m=>m.idCfop),"finalidade",0);let f="";if(d){const m=await Se().impostoParametro.where({cod:d}).toArray();f=Aa.exports.get(m.find(p=>p.id),"id","")}if([i,t,o,f,l,u].every(m=>m)){let m=Aa.exports.orderBy(await Se().impostoConfiguracao.where({idNcm:i}).toArray(),"cod","desc");if(m=m.find(p=>p.idCfop===t&&p.idEmitente===o&&p.idTipoCons===f&&p.ufOrigem===l&&p.ufDestino===u),m)return{aliqIpi:Aa.exports.get(m,"aliqIpi",0),percIva:Aa.exports.get(m,"percIva",0)}}}const Zr={};async function uZ(e){var c,d;const{idItem:t,idContatoDestinatario:o,idContatoEmitente:r}=e,a=new Date;if((Zr==null?void 0:Zr.timeout)&&!(a>new Date(Zr.timeout)))return;const i=await $db.configuracoes.le(),n=await $erp().documentoOperacao.toArray(),s=await $erp().cfop.toArray();let l=[],u=[];if(o){const f=await $erp().contato.get(o),m=await $erp().contatoEndereco.where({idContato:o}).toArray(),p=(c=m.find(v=>{var g,x;return((x=(g=v.grupo)==null?void 0:g.trim())==null?void 0:x.toLowerCase())==="principal"}))!=null?c:m[0];l.push(f),p&&u.push(p)}if(r){const f=await $erp().contato.get(r),m=await $erp().contatoEndereco.where({idContato:r}).toArray(),p=(d=m.find(v=>{var g,x;return((x=(g=v.grupo)==null?void 0:g.trim())==null?void 0:x.toLowerCase())==="principal"}))!=null?d:m[0];l.push(f),p&&u.push(p)}Zr.configuracoes=i,Zr.documentoOperacao=n,Zr.cfop=s,Zr.contatos=l,Zr.contatosEndereco=u,Zr.timeout=a.setSeconds(a.getSeconds()+3)}async function dZ(e={}){var t,o,r;try{const{idItem:a,idCfop:i,cest:n}=e.documentoItem,s=(t=e.documento)==null?void 0:t.idEmpresa,l=(o=e.documento)==null?void 0:o.idContato;await uZ({idItem:a,idContatoEmitente:s,idContatoDestinatario:l});const u=Zr.contatos.find(P=>P.id===s),c=Zr.contatosEndereco.find(P=>P.idContato===s),d=Zr.contatos.find(P=>P.id===l),f=Zr.contatosEndereco.find(P=>P.idContato===l);if(!c)return;let m=f==null?void 0:f.uf;const p=c==null?void 0:c.uf;m||(m=p);const v=p!==m;let g=await $erp().item.get(a);const x=Zr.cfop.find(P=>P.id===i),b=`Produto '${e.documentoItem.descricaoItem||""}'`;$utils.verificarErro(!g.ncm,`${b} sem cadastro de NCM`),$utils.verificarErro(!x,`${b} com CFOP inv\xE1lido`);let _=g.ncm||"";_=_.length===8?_:$utils.filtrarDigitos(_);const w=(d.numeroDocumentoNacional||"").trim().replace(/\D/g,""),S=(d.numeroDocumentoEstadual||"").trim().replace(/\D/g,"");let D="9";w.length===14&&(D="2",S&&S.toLowerCase()!=="isento"&&(D="1"));let M="1";v&&(M="2"),m==="EX"&&(M="3");const O=Number((r=e.documento)==null?void 0:r.codigoDocumentoOperacao);let T;if(Number.isInteger(O)&&O>0){const P=Zr.documentoOperacao.find(F=>F.codigoDocumentoOperacao===O);T=P==null?void 0:P.finalidade}if(!T){const P=Zr.configuracoes.find(F=>F.nome==="nfe.padrao.consumidorfinal");T=Number(P==null?void 0:P.valor)}const I=T===100?"1":T===99?"0":String(T),N={emitente:{regime:u.regime==="SimplesNacional"?"1":u.regime==="MEI"?"4":"3",uf:p,tributacaoSetor:u.tributacaoSetor,tributacao:u.tributacao},destinatario:{regime:d.regime==="SimplesNacional"?"1":d.regime==="Normal"?"3":void 0,uf:m,pessoa:{CPF:"PF",CNPJ:"PJ",idEstrangeiro:"Estrangeiro"}[m==="EX"?"idEstrangeiro":d.tipoDocumentoNacional]||void 0,tributacaoSetor:d.tributacaoSetor,tributacao:d.tributacao,indicadorIE:D,consumidor:I==="0"?"N":I==="1"?"S":void 0,destino:M},ncm:_,idItem:g.id,cfop:String(x.cfop||""),cest:g.cest,origemMercadoria:String(g.codigoOrigem||""),produto:g.descricao};return await $db.configuracaoImposto.pesquisa(N,e.erro)}catch(a){return console.log(a),{}}}async function fZ({cpfCnpj:e="",listaOsPrd:t=[]}={}){var a;const r=(a=(await $db.hibrido.lista({table:"contato",where:{numeroDocumentoNacional:e}}))[0])==null?void 0:a.id;if(!r)return{erro:"Contato n\xE3o encontrado"};if(!((t==null?void 0:t.length)>0))return{erro:"Lista de produtos n\xE3o fornecida"};if(await $router.push({name:"AtendimentoVenda",params:{id:r}}),$router.currentRoute.value.path===`/atendimento/${r}/venda`){await new Promise(n=>{const s=setInterval(()=>{var l;(l=$db.app.tela.atendimentoVenda)!=null&&l.adicionarVenda&&(clearInterval(s),n())},100)}),await $db.app.tela.atendimentoVenda.adicionarVenda(),await new Promise(n=>{const s=setInterval(()=>{var l;(l=$db.app.tela.venda)!=null&&l.vendaAdicionada&&(clearInterval(s),n())},100)});const i=await $db.hibrido.lista({table:"item",whereIn:{codigoAntigo:t.map(n=>`prd-${n.cod}`)}});for(const n of i){const s=t.find(l=>l.cod===Number(n.codigoAntigo.replace("prd-","")));n.novoValorVenda=$utils.arredondar(s.total/s.qtde),n.valorVenda=0,await $db.app.tela.venda.selecionarItem(n.id,n,s.qtde)}await $db.app.tela.venda.carregarItens(),$db.app.tela.venda.unirProdutos(),await $db.app.tela.venda.calcularTotais()}return{erro:""}}let fM;function Xke(e){fM=e}function Kke(){return fM}function mM(){if(window||window.print)return window.print();if(cordova||cordova.plugins||cordova.plugins.print)return cordova.plugins.printer.print();this.$q.notify("N\xE3o encontramos comunica\xE7\xE3o com a impressora.")}function mZ(e){return typeof e=="number"&&isFinite(e)}async function pZ(e,t,o,r){const{id:a}=t,i=e==="plataforma"?Gt:Se(),n="id"+Mp(o);for(const s of r){const l=i[o+Mp(s)];try{t[s]=await l.where(n).equals(a).toArray()}catch{}}return t}var pM={AC:12,AL:27,AM:13,AP:16,BA:29,CE:23,DF:53,ES:32,GO:52,MA:21,MG:31,MS:50,MT:51,PA:15,PB:25,PE:26,PI:22,PR:41,RJ:33,RN:24,RO:11,RR:14,RS:43,SC:42,SE:28,SP:35,TO:17};const hZ={"Aguardando Confer\xEAncia":{permiteNota:!0},"Aguardando Entrega":{permiteNota:!0},"Aguardando Estoque":{permiteNota:!0},"Aguardando Faturamento":{permiteNota:!0},"Aguardando Financeiro":{permiteNota:!0},"Aguardando Libera\xE7\xE3o":{permiteNota:!0},"Aguardando Pagamento":{permiteNota:!0},"Aguardando Separa\xE7\xE3o":{permiteNota:!0},Cancelado:{permiteNota:!1},"Em Separa\xE7\xE3o":{permiteNota:!0},Entregue:{permiteNota:!0},Faturado:{permiteNota:!0},Finalizado:{permiteNota:!0},"N\xE3o Aprovado":{permiteNota:!1},Or\u00E7amento:{permiteNota:!1}},vZ={Aberta:{permiteNota:!1},"Aguardando Pagamento":{permiteNota:!0},Ativo:{permiteNota:!0},Cancelado:{permiteNota:!1},Faturado:{permiteNota:!0},Finalizada:{permiteNota:!0}},gZ={...hZ,...vZ};var _Z=e=>gZ[(e||{}).status]||{permiteNota:!1};const I3="0 0 24 24",A3=e=>e,xy=e=>`ionicons ${e}`,hM={"mdi-":e=>`mdi ${e}`,"icon-":A3,"bt-":e=>`bt ${e}`,"eva-":e=>`eva ${e}`,"ion-md":xy,"ion-ios":xy,"ion-logo":xy,"iconfont ":A3,"ti-":e=>`themify-icon ${e}`,"bi-":e=>`bootstrap-icons ${e}`},vM={o_:"-outlined",r_:"-round",s_:"-sharp"},gM={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},bZ=new RegExp("^("+Object.keys(hM).join("|")+")"),yZ=new RegExp("^("+Object.keys(vM).join("|")+")"),T3=new RegExp("^("+Object.keys(gM).join("|")+")"),xZ=/^[Mm]\s?[-+]?\.?\d/,CZ=/^img:/,wZ=/^svguse:/,EZ=/^ion-/,SZ=/^(fa-(sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /;var Pe=Ct({name:"QIcon",props:{...Wd,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(e,{slots:t}){const{proxy:{$q:o}}=xt(),r=Qd(e),a=j(()=>"q-icon"+(e.left===!0?" on-left":"")+(e.right===!0?" on-right":"")+(e.color!==void 0?` text-${e.color}`:"")),i=j(()=>{let n,s=e.name;if(s==="none"||!s)return{none:!0};if(o.iconMapFn!==null){const c=o.iconMapFn(s);if(c!==void 0)if(c.icon!==void 0){if(s=c.icon,s==="none"||!s)return{none:!0}}else return{cls:c.cls,content:c.content!==void 0?c.content:" "}}if(xZ.test(s)===!0){const[c,d=I3]=s.split("|");return{svg:!0,viewBox:d,nodes:c.split("&&").map(f=>{const[m,p,v]=f.split("@@");return G("path",{style:p,d:m,transform:v})})}}if(CZ.test(s)===!0)return{img:!0,src:s.substring(4)};if(wZ.test(s)===!0){const[c,d=I3]=s.split("|");return{svguse:!0,src:c.substring(7),viewBox:d}}let l=" ";const u=s.match(bZ);if(u!==null)n=hM[u[1]](s);else if(SZ.test(s)===!0)n=s;else if(EZ.test(s)===!0)n=`ionicons ion-${o.platform.is.ios===!0?"ios":"md"}${s.substring(3)}`;else if(T3.test(s)===!0){n="notranslate material-symbols";const c=s.match(T3);c!==null&&(s=s.substring(6),n+=gM[c[1]]),l=s}else{n="notranslate material-icons";const c=s.match(yZ);c!==null&&(s=s.substring(2),n+=vM[c[1]]),l=s}return{cls:n,content:l}});return()=>{const n={class:a.value,style:r.value,"aria-hidden":"true",role:"presentation"};return i.value.none===!0?G(e.tag,n,uo(t.default)):i.value.img===!0?G(e.tag,n,Mr(t.default,[G("img",{src:i.value.src})])):i.value.svg===!0?G(e.tag,n,Mr(t.default,[G("svg",{viewBox:i.value.viewBox||"0 0 24 24"},i.value.nodes)])):i.value.svguse===!0?G(e.tag,n,Mr(t.default,[G("svg",{viewBox:i.value.viewBox},[G("use",{"xlink:href":i.value.src})])])):(i.value.cls!==void 0&&(n.class+=" "+i.value.cls),G(e.tag,n,Mr(t.default,[i.value.content])))}}}),_M=Ct({name:"QAvatar",props:{...Wd,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(e,{slots:t}){const o=Qd(e),r=j(()=>"q-avatar"+(e.color?` bg-${e.color}`:"")+(e.textColor?` text-${e.textColor} q-chip--colored`:"")+(e.square===!0?" q-avatar--square":e.rounded===!0?" rounded-borders":"")),a=j(()=>e.fontSize?{fontSize:e.fontSize}:null);return()=>{const i=e.icon!==void 0?[G(Pe,{name:e.icon})]:void 0;return G("div",{class:r.value,style:o.value},[G("div",{class:"q-avatar__content row flex-center overflow-hidden",style:a.value},e5(t.default,i))])}}});function IZ(e,t=250){let o=!1,r;return function(){return o===!1&&(o=!0,setTimeout(()=>{o=!1},t),r=e.apply(this,arguments)),r}}function D3(e,t,o,r){o.modifiers.stop===!0&&en(e);const a=o.modifiers.color;let i=o.modifiers.center;i=i===!0||r===!0;const n=document.createElement("span"),s=document.createElement("span"),l=ls(e),{left:u,top:c,width:d,height:f}=t.getBoundingClientRect(),m=Math.sqrt(d*d+f*f),p=m/2,v=`${(d-m)/2}px`,g=i?v:`${l.left-u-p}px`,x=`${(f-m)/2}px`,b=i?x:`${l.top-c-p}px`;s.className="q-ripple__inner",Ix(s,{height:`${m}px`,width:`${m}px`,transform:`translate3d(${g},${b},0) scale3d(.2,.2,1)`,opacity:0}),n.className=`q-ripple${a?" text-"+a:""}`,n.setAttribute("dir","ltr"),n.appendChild(s),t.appendChild(n);const _=()=>{n.remove(),clearTimeout(w)};o.abort.push(_);let w=setTimeout(()=>{s.classList.add("q-ripple__inner--enter"),s.style.transform=`translate3d(${v},${x},0) scale3d(1,1,1)`,s.style.opacity=.2,w=setTimeout(()=>{s.classList.remove("q-ripple__inner--enter"),s.classList.add("q-ripple__inner--leave"),s.style.opacity=0,w=setTimeout(()=>{n.remove(),o.abort.splice(o.abort.indexOf(_),1)},275)},250)},50)}function O3(e,{modifiers:t,value:o,arg:r}){const a=Object.assign({},e.cfg.ripple,t,o);e.modifiers={early:a.early===!0,stop:a.stop===!0,center:a.center===!0,color:a.color||r,keyCodes:[].concat(a.keyCodes||13)}}var VE=uh({name:"ripple",beforeMount(e,t){const o=t.instance.$.appContext.config.globalProperties.$q.config||{};if(o.ripple===!1)return;const r={cfg:o,enabled:t.value!==!1,modifiers:{},abort:[],start(a){r.enabled===!0&&a.qSkipRipple!==!0&&a.type===(r.modifiers.early===!0?"pointerdown":"click")&&D3(a,e,r,a.qKeyEvent===!0)},keystart:IZ(a=>{r.enabled===!0&&a.qSkipRipple!==!0&&cs(a,r.modifiers.keyCodes)===!0&&a.type===`key${r.modifiers.early===!0?"down":"up"}`&&D3(a,e,r,!0)},300)};O3(r,t),e.__qripple=r,Ir(r,"main",[[e,"pointerdown","start","passive"],[e,"click","start","passive"],[e,"keydown","keystart","passive"],[e,"keyup","keystart","passive"]])},updated(e,t){if(t.oldValue!==t.value){const o=e.__qripple;o!==void 0&&(o.enabled=t.value!==!1,o.enabled===!0&&Object(t.value)===t.value&&O3(o,t))}},beforeUnmount(e){const t=e.__qripple;t!==void 0&&(t.abort.forEach(o=>{o()}),Fn(t,"main"),delete e._qripple)}});const bM={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},AZ=Object.keys(bM),BE={align:{type:String,validator:e=>AZ.includes(e)}};function qE(e){return j(()=>{const t=e.align===void 0?e.vertical===!0?"stretch":"left":e.align;return`${e.vertical===!0?"items":"justify"}-${bM[t]}`})}function qv(e){if(Object(e.$parent)===e.$parent)return e.$parent;let{parent:t}=e.$;for(;Object(t)===t;){if(Object(t.proxy)===t.proxy)return t.proxy;t=t.parent}}function yM(e,t){typeof t.type=="symbol"?Array.isArray(t.children)===!0&&t.children.forEach(o=>{yM(e,o)}):e.add(t)}function xM(e){const t=new Set;return e.forEach(o=>{yM(t,o)}),Array.from(t)}function LE(e){return e.appContext.config.globalProperties.$router!==void 0}function _d(e){return e.isUnmounted===!0||e.isDeactivated===!0}function P3(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}function F3(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function TZ(e,t){for(const o in t){const r=t[o],a=e[o];if(typeof r=="string"){if(r!==a)return!1}else if(Array.isArray(a)===!1||a.length!==r.length||r.some((i,n)=>i!==a[n]))return!1}return!0}function M3(e,t){return Array.isArray(t)===!0?e.length===t.length&&e.every((o,r)=>o===t[r]):e.length===1&&e[0]===t}function DZ(e,t){return Array.isArray(e)===!0?M3(e,t):Array.isArray(t)===!0?M3(t,e):e===t}function OZ(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const o in e)if(DZ(e[o],t[o])===!1)return!1;return!0}const CM={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},bh={...CM,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function U_({fallbackTag:e,useDisableForRouterLinkProps:t=!0}={}){const o=xt(),{props:r,proxy:a,emit:i}=o,n=LE(o),s=j(()=>r.disable!==!0&&r.href!==void 0),l=j(t===!0?()=>n===!0&&r.disable!==!0&&s.value!==!0&&r.to!==void 0&&r.to!==null&&r.to!=="":()=>n===!0&&s.value!==!0&&r.to!==void 0&&r.to!==null&&r.to!==""),u=j(()=>l.value===!0?b(r.to):null),c=j(()=>u.value!==null),d=j(()=>s.value===!0||c.value===!0),f=j(()=>r.type==="a"||d.value===!0?"a":r.tag||e||"div"),m=j(()=>s.value===!0?{href:r.href,target:r.target}:c.value===!0?{href:u.value.href,target:r.target}:{}),p=j(()=>{if(c.value===!1)return-1;const{matched:S}=u.value,{length:D}=S,M=S[D-1];if(M===void 0)return-1;const O=a.$route.matched;if(O.length===0)return-1;const T=O.findIndex(F3.bind(null,M));if(T!==-1)return T;const I=P3(S[D-2]);return D>1&&P3(M)===I&&O[O.length-1].path!==I?O.findIndex(F3.bind(null,S[D-2])):T}),v=j(()=>c.value===!0&&p.value!==-1&&TZ(a.$route.params,u.value.params)),g=j(()=>v.value===!0&&p.value===a.$route.matched.length-1&&OZ(a.$route.params,u.value.params)),x=j(()=>c.value===!0?g.value===!0?` ${r.exactActiveClass} ${r.activeClass}`:r.exact===!0?"":v.value===!0?` ${r.activeClass}`:"":"");function b(S){try{return a.$router.resolve(S)}catch{}return null}function _(S,{returnRouterError:D,to:M=r.to,replace:O=r.replace}={}){if(r.disable===!0)return S.preventDefault(),Promise.resolve(!1);if(S.metaKey||S.altKey||S.ctrlKey||S.shiftKey||S.button!==void 0&&S.button!==0||r.target==="_blank")return Promise.resolve(!1);S.preventDefault();const T=a.$router[O===!0?"replace":"push"](M);return D===!0?T:T.then(()=>{}).catch(()=>{})}function w(S){if(c.value===!0){const D=M=>_(S,M);i("click",S,D),S.defaultPrevented!==!0&&D()}else i("click",S)}return{hasRouterLink:c,hasHrefLink:s,hasLink:d,linkTag:f,resolvedLink:u,linkIsActive:v,linkIsExactActive:g,linkClass:x,linkAttrs:m,getLink:b,navigateToRouterLink:_,navigateOnClick:w}}const Og={none:0,xs:4,sm:8,md:16,lg:24,xl:32},PZ={xs:8,sm:10,md:14,lg:20,xl:24},FZ=["button","submit","reset"],MZ=/[^\s]\/[^\s]/,wM=["flat","outline","push","unelevated"];function $E(e,t){return e.flat===!0?"flat":e.outline===!0?"outline":e.push===!0?"push":e.unelevated===!0?"unelevated":t}function EM(e){const t=$E(e);return t!==void 0?{[t]:!0}:{}}const UE={...Wd,...CM,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...wM.reduce((e,t)=>(e[t]=Boolean)&&e,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...BE.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},NZ={...UE,round:Boolean};function kZ(e){const t=Qd(e,PZ),o=qE(e),{hasRouterLink:r,hasLink:a,linkTag:i,linkAttrs:n,navigateOnClick:s}=U_({fallbackTag:"button"}),l=j(()=>{const g=e.fab===!1&&e.fabMini===!1?t.value:{};return e.padding!==void 0?Object.assign({},g,{padding:e.padding.split(/\s+/).map(x=>x in Og?Og[x]+"px":x).join(" "),minWidth:"0",minHeight:"0"}):g}),u=j(()=>e.rounded===!0||e.fab===!0||e.fabMini===!0),c=j(()=>e.disable!==!0&&e.loading!==!0),d=j(()=>c.value===!0?e.tabindex||0:-1),f=j(()=>$E(e,"standard")),m=j(()=>{const g={tabindex:d.value};return a.value===!0?Object.assign(g,n.value):FZ.includes(e.type)===!0&&(g.type=e.type),i.value==="a"?(e.disable===!0?g["aria-disabled"]="true":g.href===void 0&&(g.role="button"),r.value!==!0&&MZ.test(e.type)===!0&&(g.type=e.type)):e.disable===!0&&(g.disabled="",g["aria-disabled"]="true"),e.loading===!0&&e.percentage!==void 0&&Object.assign(g,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":e.percentage}),g}),p=j(()=>{let g;e.color!==void 0?e.flat===!0||e.outline===!0?g=`text-${e.textColor||e.color}`:g=`bg-${e.color} text-${e.textColor||"white"}`:e.textColor&&(g=`text-${e.textColor}`);const x=e.round===!0?"round":`rectangle${u.value===!0?" q-btn--rounded":e.square===!0?" q-btn--square":""}`;return`q-btn--${f.value} q-btn--${x}`+(g!==void 0?" "+g:"")+(c.value===!0?" q-btn--actionable q-focusable q-hoverable":e.disable===!0?" disabled":"")+(e.fab===!0?" q-btn--fab":e.fabMini===!0?" q-btn--fab-mini":"")+(e.noCaps===!0?" q-btn--no-uppercase":"")+(e.dense===!0?" q-btn--dense":"")+(e.stretch===!0?" no-border-radius self-stretch":"")+(e.glossy===!0?" glossy":"")+(e.square?" q-btn--square":"")}),v=j(()=>o.value+(e.stack===!0?" column":" row")+(e.noWrap===!0?" no-wrap text-no-wrap":"")+(e.loading===!0?" q-btn__content--hidden":""));return{classes:p,style:l,innerClasses:v,attributes:m,hasLink:a,linkTag:i,navigateOnClick:s,isActionable:c}}const{passiveCapture:Xn}=er;let Ef=null,Sf=null,If=null;var ae=Ct({name:"QBtn",props:{...NZ,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(e,{slots:t,emit:o}){const{proxy:r}=xt(),{classes:a,style:i,innerClasses:n,attributes:s,hasLink:l,linkTag:u,navigateOnClick:c,isActionable:d}=kZ(e),f=Ue(null),m=Ue(null);let p=null,v,g=null;const x=j(()=>e.label!==void 0&&e.label!==null&&e.label!==""),b=j(()=>e.disable===!0||e.ripple===!1?!1:{keyCodes:l.value===!0?[13,32]:[13],...e.ripple===!0?{}:e.ripple}),_=j(()=>({center:e.round})),w=j(()=>{const L=Math.max(0,Math.min(100,e.percentage));return L>0?{transition:"transform 0.6s",transform:`translateX(${L-100}%)`}:{}}),S=j(()=>{if(e.loading===!0)return{onMousedown:F,onTouchstart:F,onClick:F,onKeydown:F,onKeyup:F};if(d.value===!0){const L={onClick:M,onKeydown:O,onMousedown:I};if(r.$q.platform.has.touch===!0){const z=e.onTouchstart!==void 0?"":"Passive";L[`onTouchstart${z}`]=T}return L}return{onClick:zo}}),D=j(()=>({ref:f,class:"q-btn q-btn-item non-selectable no-outline "+a.value,style:i.value,...s.value,...S.value}));function M(L){if(f.value!==null){if(L!==void 0){if(L.defaultPrevented===!0)return;const z=document.activeElement;if(e.type==="submit"&&z!==document.body&&f.value.contains(z)===!1&&z.contains(f.value)===!1){f.value.focus();const H=()=>{document.removeEventListener("keydown",zo,!0),document.removeEventListener("keyup",H,Xn),f.value!==null&&f.value.removeEventListener("blur",H,Xn)};document.addEventListener("keydown",zo,!0),document.addEventListener("keyup",H,Xn),f.value.addEventListener("blur",H,Xn)}}c(L)}}function O(L){f.value!==null&&(o("keydown",L),cs(L,[13,32])===!0&&Sf!==f.value&&(Sf!==null&&P(),L.defaultPrevented!==!0&&(f.value.focus(),Sf=f.value,f.value.classList.add("q-btn--active"),document.addEventListener("keyup",N,!0),f.value.addEventListener("blur",N,Xn)),zo(L)))}function T(L){f.value!==null&&(o("touchstart",L),L.defaultPrevented!==!0&&(Ef!==f.value&&(Ef!==null&&P(),Ef=f.value,p=L.target,p.addEventListener("touchcancel",N,Xn),p.addEventListener("touchend",N,Xn)),v=!0,g!==null&&clearTimeout(g),g=setTimeout(()=>{g=null,v=!1},200)))}function I(L){f.value!==null&&(L.qSkipRipple=v===!0,o("mousedown",L),L.defaultPrevented!==!0&&If!==f.value&&(If!==null&&P(),If=f.value,f.value.classList.add("q-btn--active"),document.addEventListener("mouseup",N,Xn)))}function N(L){if(f.value!==null&&!(L!==void 0&&L.type==="blur"&&document.activeElement===f.value)){if(L!==void 0&&L.type==="keyup"){if(Sf===f.value&&cs(L,[13,32])===!0){const z=new MouseEvent("click",L);z.qKeyEvent=!0,L.defaultPrevented===!0&&Vi(z),L.cancelBubble===!0&&en(z),f.value.dispatchEvent(z),zo(L),L.qKeyEvent=!0}o("keyup",L)}P()}}function P(L){const z=m.value;L!==!0&&(Ef===f.value||If===f.value)&&z!==null&&z!==document.activeElement&&(z.setAttribute("tabindex",-1),z.focus()),Ef===f.value&&(p!==null&&(p.removeEventListener("touchcancel",N,Xn),p.removeEventListener("touchend",N,Xn)),Ef=p=null),If===f.value&&(document.removeEventListener("mouseup",N,Xn),If=null),Sf===f.value&&(document.removeEventListener("keyup",N,!0),f.value!==null&&f.value.removeEventListener("blur",N,Xn),Sf=null),f.value!==null&&f.value.classList.remove("q-btn--active")}function F(L){zo(L),L.qSkipRipple=!0}return Vo(()=>{P(!0)}),Object.assign(r,{click:L=>{d.value===!0&&M(L)}}),()=>{let L=[];e.icon!==void 0&&L.push(G(Pe,{name:e.icon,left:e.stack!==!0&&x.value===!0,role:"img","aria-hidden":"true"})),x.value===!0&&L.push(G("span",{class:"block"},[e.label])),L=Mr(t.default,L),e.iconRight!==void 0&&e.round===!1&&L.push(G(Pe,{name:e.iconRight,right:e.stack!==!0&&x.value===!0,role:"img","aria-hidden":"true"}));const z=[G("span",{class:"q-focus-helper",ref:m})];return e.loading===!0&&e.percentage!==void 0&&z.push(G("span",{class:"q-btn__progress absolute-full overflow-hidden"+(e.darkPercentage===!0?" q-btn__progress--dark":"")},[G("span",{class:"q-btn__progress-indicator fit block",style:w.value})])),z.push(G("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+n.value},L)),e.loading!==null&&z.push(G(Or,{name:"q-transition--fade"},()=>e.loading===!0?[G("span",{key:"loading",class:"absolute-full flex flex-center"},t.loading!==void 0?t.loading():[G(Ns)])]:null)),Ee(G(u.value,D.value,z),[[VE,b.value,void 0,_.value]])}}});let RZ=0;const Lv={},$v={},Cs={},SM={},VZ=/^\s*$/,IM=[],BZ=[void 0,null,!0,!1,""],zE=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],qZ=["top-left","top-right","bottom-left","bottom-right"],Uf={positive:{icon:e=>e.iconSet.type.positive,color:"positive"},negative:{icon:e=>e.iconSet.type.negative,color:"negative"},warning:{icon:e=>e.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:e=>e.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function AM(e,t,o){if(!e)return w0("parameter required");let r;const a={textColor:"white"};if(e.ignoreDefaults!==!0&&Object.assign(a,Lv),ei(e)===!1&&(a.type&&Object.assign(a,Uf[a.type]),e={message:e}),Object.assign(a,Uf[e.type||a.type],e),typeof a.icon=="function"&&(a.icon=a.icon(t)),a.spinner?(a.spinner===!0&&(a.spinner=Ns),a.spinner=$d(a.spinner)):a.spinner=!1,a.meta={hasMedia:Boolean(a.spinner!==!1||a.icon||a.avatar),hasText:N3(a.message)||N3(a.caption)},a.position){if(zE.includes(a.position)===!1)return w0("wrong position",e)}else a.position="bottom";if(BZ.includes(a.timeout)===!0)a.timeout=5e3;else{const l=Number(a.timeout);if(isNaN(l)||l<0)return w0("wrong timeout",e);a.timeout=Number.isFinite(l)?l:0}a.timeout===0?a.progress=!1:a.progress===!0&&(a.meta.progressClass="q-notification__progress"+(a.progressClass?` ${a.progressClass}`:""),a.meta.progressStyle={animationDuration:`${a.timeout+1e3}ms`});const i=(Array.isArray(e.actions)===!0?e.actions:[]).concat(e.ignoreDefaults!==!0&&Array.isArray(Lv.actions)===!0?Lv.actions:[]).concat(Uf[e.type]!==void 0&&Array.isArray(Uf[e.type].actions)===!0?Uf[e.type].actions:[]),{closeBtn:n}=a;if(n&&i.push({label:typeof n=="string"?n:t.lang.label.close}),a.actions=i.map(({handler:l,noDismiss:u,...c})=>({flat:!0,...c,onClick:typeof l=="function"?()=>{l(),u!==!0&&s()}:()=>{s()}})),a.multiLine===void 0&&(a.multiLine=a.actions.length>1),Object.assign(a.meta,{class:`q-notification row items-stretch q-notification--${a.multiLine===!0?"multi-line":"standard"}`+(a.color!==void 0?` bg-${a.color}`:"")+(a.textColor!==void 0?` text-${a.textColor}`:"")+(a.classes!==void 0?` ${a.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(a.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(a.multiLine===!0?"":" col"),leftClass:a.meta.hasText===!0?"additional":"single",attrs:{role:"alert",...a.attrs}}),a.group===!1?(a.group=void 0,a.meta.group=void 0):((a.group===void 0||a.group===!0)&&(a.group=[a.message,a.caption,a.multiline].concat(a.actions.map(l=>`${l.label}*${l.icon}`)).join("|")),a.meta.group=a.group+"|"+a.position),a.actions.length===0?a.actions=void 0:a.meta.actionsClass="q-notification__actions row items-center "+(a.multiLine===!0?"justify-end":"col-auto")+(a.meta.hasMedia===!0?" q-notification__actions--with-media":""),o!==void 0){o.notif.meta.timer&&(clearTimeout(o.notif.meta.timer),o.notif.meta.timer=void 0),a.meta.uid=o.notif.meta.uid;const l=Cs[a.position].value.indexOf(o.notif);Cs[a.position].value[l]=a}else{const l=$v[a.meta.group];if(l===void 0){if(a.meta.uid=RZ++,a.meta.badge=1,["left","right","center"].indexOf(a.position)!==-1)Cs[a.position].value.splice(Math.floor(Cs[a.position].value.length/2),0,a);else{const u=a.position.indexOf("top")!==-1?"unshift":"push";Cs[a.position].value[u](a)}a.group!==void 0&&($v[a.meta.group]=a)}else{if(l.meta.timer&&(clearTimeout(l.meta.timer),l.meta.timer=void 0),a.badgePosition!==void 0){if(qZ.includes(a.badgePosition)===!1)return w0("wrong badgePosition",e)}else a.badgePosition=`top-${a.position.indexOf("left")!==-1?"right":"left"}`;a.meta.uid=l.meta.uid,a.meta.badge=l.meta.badge+1,a.meta.badgeClass=`q-notification__badge q-notification__badge--${a.badgePosition}`+(a.badgeColor!==void 0?` bg-${a.badgeColor}`:"")+(a.badgeTextColor!==void 0?` text-${a.badgeTextColor}`:"")+(a.badgeClass?` ${a.badgeClass}`:"");const u=Cs[a.position].value.indexOf(l);Cs[a.position].value[u]=$v[a.meta.group]=a}}const s=()=>{LZ(a),r=void 0};if(a.timeout>0&&(a.meta.timer=setTimeout(()=>{a.meta.timer=void 0,s()},a.timeout+1e3)),a.group!==void 0)return l=>{l!==void 0?w0("trying to update a grouped one which is forbidden",e):s()};if(r={dismiss:s,config:e,notif:a},o!==void 0){Object.assign(o,r);return}return l=>{if(r!==void 0)if(l===void 0)r.dismiss();else{const u=Object.assign({},r.config,l,{group:!1,position:a.position});AM(u,t,r)}}}function LZ(e){e.meta.timer&&(clearTimeout(e.meta.timer),e.meta.timer=void 0);const t=Cs[e.position].value.indexOf(e);if(t!==-1){e.group!==void 0&&delete $v[e.meta.group];const o=IM[""+e.meta.uid];if(o){const{width:r,height:a}=getComputedStyle(o);o.style.left=`${o.offsetLeft}px`,o.style.width=r,o.style.height=a}Cs[e.position].value.splice(t,1),typeof e.onDismiss=="function"&&e.onDismiss()}}function N3(e){return e!=null&&VZ.test(e)!==!0}function w0(e,t){return console.error(`Notify: ${e}`,t),!1}function $Z(){return Ct({name:"QNotifications",devtools:{hide:!0},setup(){return()=>G("div",{class:"q-notifications"},zE.map(e=>G(Ww,{key:e,class:SM[e],tag:"div",name:`q-notification--${e}`},()=>Cs[e].value.map(t=>{const o=t.meta,r=[];if(o.hasMedia===!0&&(t.spinner!==!1?r.push(G(t.spinner,{class:"q-notification__spinner q-notification__spinner--"+o.leftClass,color:t.spinnerColor,size:t.spinnerSize})):t.icon?r.push(G(Pe,{class:"q-notification__icon q-notification__icon--"+o.leftClass,name:t.icon,color:t.iconColor,size:t.iconSize,role:"img"})):t.avatar&&r.push(G(_M,{class:"q-notification__avatar q-notification__avatar--"+o.leftClass},()=>G("img",{src:t.avatar,"aria-hidden":"true"})))),o.hasText===!0){let i;const n={class:"q-notification__message col"};if(t.html===!0)n.innerHTML=t.caption?`<div>${t.message}</div><div class="q-notification__caption">${t.caption}</div>`:t.message;else{const s=[t.message];i=t.caption?[G("div",s),G("div",{class:"q-notification__caption"},[t.caption])]:s}r.push(G("div",n,i))}const a=[G("div",{class:o.contentClass},r)];return t.progress===!0&&a.push(G("div",{key:`${o.uid}|p|${o.badge}`,class:o.progressClass,style:o.progressStyle})),t.actions!==void 0&&a.push(G("div",{class:o.actionsClass},t.actions.map(i=>G(ae,i)))),o.badge>1&&a.push(G("div",{key:`${o.uid}|${o.badge}`,class:t.meta.badgeClass,style:t.badgeStyle},[o.badge])),G("div",{ref:i=>{IM[""+o.uid]=i},key:o.uid,class:o.class,...o.attrs},[G("div",{class:o.wrapperClass},a)])}))))}})}var TM={setDefaults(e){ei(e)===!0&&Object.assign(Lv,e)},registerType(e,t){ei(t)===!0&&(Uf[e]=t)},install({$q:e,parentApp:t}){if(e.notify=this.create=o=>AM(o,e),e.notify.setDefaults=this.setDefaults,e.notify.registerType=this.registerType,e.config.notify!==void 0&&this.setDefaults(e.config.notify),this.__installed!==!0){zE.forEach(r=>{Cs[r]=Ue([]);const a=["left","center","right"].includes(r)===!0?"center":r.indexOf("top")!==-1?"top":"bottom",i=r.indexOf("left")!==-1?"start":r.indexOf("right")!==-1?"end":"center",n=["left","right"].includes(r)?`items-${r==="left"?"start":"end"} justify-center`:r==="center"?"flex-center":`items-${i}`;SM[r]=`q-notifications__list q-notifications__list--${a} fixed column no-wrap ${n}`});const o=$_("q-notify");Zw($Z(),t).mount(o)}}};function DM(e,t={}){return t&&t.name&&["Alerta","ErroValidacao"].includes(t.name)&&(e=t.message),t&&Object.keys(t).length&&!["Alerta","ErroValidacao"].includes(t.name)?console.error("Mensagem ao usu\xE1rio:",e,`
`,t):console.error("Mensagem ao usu\xE1rio:",e),TM.create({message:e,type:t.name==="Alerta"?"warning":"negative"}),e}function zt(e){return typeof e=="number"&&isFinite(e)?e:null}async function UZ(e,t){try{const o=await $utils.impressaoObterHtml(e,t),r=await fetch("https://api.b15.com.br/html2pdf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({html:o})});if(!r.ok)throw r.ok;const a=await r.json();return{erro:"",url:a.url}}catch(o){return console.error(o),{erro:"Erro ao obter URL do PDF."}}}function Mp(e){return e[0].toUpperCase()+e.slice(1)}function zZ(e){return e[0].toLowerCase()+e.slice(1)}async function lo(e,t,o,r={}){let a=!1;if(e==="arquivo"){for(const i of t)o.find(s=>s.id===i.id)||await $db.arquivo.remove(i);for(const i of o)t.find(s=>s.id===i.id)||await $db.arquivo.grava({original:void 0,atual:i});return}for(const i of t||[]){const n=o.find(l=>l.id===i.id);if(!n){await Se()[e].delete(i.id),await ut("remover",e,i.id),a=!0;continue}const s=r.mantemNull?cn(i,n,{mantemNull:!0}):Ja(i,n);Object.keys(s).length&&(await Se()[e].update(i.id,s),await ut("atualizar",e,i.id,s),a=!0)}for(const i of o||[])(t||[]).find(s=>s.id===i.id)||(i.id=i.id||Kt(),await Se()[e].put(i),await ut("adicionar",e,i.id,i),a=!0);return a}async function HZ(e,t,o,r){const a=await Se()[e].where(t).equals(o).toArray();for(const i of a){const n=r.find(l=>l.id===i.id);if(!n){await Se()[e].delete(i.id),await ut("remover",e,i.id);continue}if(await Se()[e].update(i.id,n)){const l=Ja(i,n);await ut("atualizar",e,i.id,l)}}for(const i of r)a.find(s=>s.id===i.id)||(i.id=Kt(),i[t]=o,await Se()[e].add(i),await ut("adicionar",e,i.id,i))}async function jZ(e,t,o){const r="id"+Mp(e),a=Object.keys(o);for(const i of a){const n=e+Mp(i),s=o[i]||[],l=await Se()[n].where(r).equals(t).toArray();for(const u of l){const c=s.find(f=>f.id===u.id);if(!c){await Se()[n].delete(u.id),await ut("remover",n,u.id);continue}if(await Se()[n].update(u.id,c)){const f=Ja(u,c);await ut("atualizar",n,u.id,f)}}for(const u of s)l.find(d=>d.id===u.id)||(u.id=Kt(),u[r]=t,await Se()[n].add(u),await ut("adicionar",n,u.id,u))}}function GZ(e={}){var t;try{const o=e.itens,r={valorTotal:2,parcela:2,...(t=e.decimais)!=null?t:{}};let a,i,n=Number(e.saldo);a=o.reduce((s,l)=>s+l.valor,0),a=$utils.arredondar(a,r.valorTotal),o.sort((s,l)=>s.valor<l.valor?-1:1);for(const s of o){let l=n*s.valor/a;l=$utils.arredondar(l,r.parcela),n=$utils.arredondar(n-l,r.parcela),a=$utils.arredondar(a-s.valor,r.valorTotal),s.parcela=l}return o}catch(o){console.log(o)}}function Qc(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function OM(e){return(e||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^ -}]|[<>"'@]/g," ").trim()}async function ut(e,t,o,r,a){var s,l;if(a=a==="plataforma"?Gt:a?Se(a):Se(),e==="adicionar"&&t==="log"){r.dispositivo=Io.obterIdDispositivo(),r.usuarioCpf=et.usuario.logado.numeroDocumentoNacional,r.usuarioNome=et.usuario.logado.nome;const u={id:Kt(),acao:e,tabela:t,chave:o,valor:r,dataHora:sa(),idUsuario:et.usuario.logado.id,nomeUsuario:et.usuario.logado.nome};await a.sincronismoFila.add(u),Io.status.tamanhoFila++;return}if(!e||!t||!o)throw new Error('Os campos "acao", "tabela" e "chave" s\xE3o obrigat\xF3rios.');typeof r!="object"&&(r={}),Wt.log("sincronismoEnviar",e,t,o,r);const i={id:Kt(),acao:e,tabela:t,chave:o,valor:r,dataHora:sa(),idUsuario:et.usuario.logado.id,nomeUsuario:et.usuario.logado.nome};let n=!$db.hibrido.isOnline()||["arquivo","tokenBonus"].includes(t);if(["item","contato"].includes(t)&&["adicionar","atualizar"].includes(e)&&r.imagem){const u={...i,id:Kt(),tabela:"imagemGCP",valor:{id:o,tipoArquivo:t+"Imagem",conteudo:r.imagem}};await a.sincronismoFila.add(u),Io.status.tamanhoFila++}if(!n)try{const u=await $utils.geeksApi({uploadSincrono:{funcao:"7C9C23DA-2B32-4203-81D0-62FABBB9518C",dados:[{id:i.id,acao:i.acao,chave:i.chave,dataHora:i.dataHora,tabela:i.tabela,valor:JSON.stringify(i.valor),dispositivo:Io.obterIdDispositivo(),idUsuario:i.idUsuario,nomeUsuario:i.nomeUsuario}]}});if((s=u.data.uploadSincrono)!=null&&s.erro)throw new Error("GError:"+((l=u.data.uploadSincrono)==null?void 0:l.erro))}catch(u){console.error("erro upload s\xEDncrono: ",u),u.message.indexOf("GError:")===0&&$q.notifyError(u.message.slice(7)),n=!0}n&&(await a.sincronismoFila.add(i),Io.status.tamanhoFila++)}function HE(){let e="b15";try{const t=JSON.parse(localStorage.getItem("clienteSistema"));[37,23,42,40,52,53,57,58,63,68].includes(t.codigoSistema)&&(e="optisoul")}catch{e=""}return e}function PM(e,t){return e.reduce((o,r)=>o+r[t]||0,0)}function WZ(e){return typeof e=="string"?e:typeof e=="number"&&isFinite(e)?String(e):""}function QZ(e){return typeof e=="string"?e:typeof e=="number"&&isFinite(e)?String(e):null}function XZ(e=""){return $utils.removerAcentos(e.replace(/\s+/g," ").trim().toLowerCase())}const jE=function(e,t,o=""){let r=[];for(let a=0,i=e.length;a<i;a++)r[e[a][t]||o]=!0;return Object.keys(r)};async function FM(){var o,r,a,i,n,s;const e=(r=JSON.parse((o=localStorage.getItem("clienteSistema"))!=null?o:null))!=null?r:{},t={};if(!!$db.usuario.logado.id&&e!=null&&e.idClienteSistema){const l=await Gt.clienteSistema.filter(u=>u.id===e.idClienteSistema).first();if(l!=null&&l.idCliente){const u=await Gt.contato.filter(c=>c.id===l.idCliente).first();return t.observacao=(i=(a=u==null?void 0:u.condutaObservacao)==null?void 0:a.trim())!=null?i:"",t.restricao=(s=(n=u==null?void 0:u.condutaRestricao)==null?void 0:n.trim())!=null?s:"",t}}}async function KZ(){const e=await FM();!((e==null?void 0:e.observacao)||(e==null?void 0:e.restricao))||$utils.emitter.emit("exibirConduta",e)}var YZ={exibir:KZ,obter:FM};const tv={cpfUsuario:null};async function JZ(){var e,t,o;try{const r=$db.usuario.logado.cpf.replace(/\D/g,"");if(!r||(tv==null?void 0:tv.cpfUsuario)===r||$db.usuario.logado.administrador||$db.usuario.logado.grupoInterno!==0)return!1;await $db.usuario.verificaUsuarioClienteSistema(),tv.cpfUsuario=r;const a=(t=(e=await $utils.geeksApi({nps:{funcao:"74CCD58F-3937-40AF-A235-452BC364E060",cpfUsuario:r}}))==null?void 0:e.data)==null?void 0:t.nps;return(a==null?void 0:a.length)>0?Number((o=a==null?void 0:a[0])==null?void 0:o.dias)>90:($db.nps.gravar({observacao:"1\xBA Login"}),!1)}catch(r){console.error(r)}return!1}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var MM;function Et(){return MM.apply(null,arguments)}function ZZ(e){MM=e}function ks(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function bd(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function Yo(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function GE(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(Yo(e,t))return!1;return!0}function Yi(e){return e===void 0}function tc(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function yh(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function NM(e,t){var o=[],r,a=e.length;for(r=0;r<a;++r)o.push(t(e[r],r));return o}function Xc(e,t){for(var o in t)Yo(t,o)&&(e[o]=t[o]);return Yo(t,"toString")&&(e.toString=t.toString),Yo(t,"valueOf")&&(e.valueOf=t.valueOf),e}function dl(e,t,o,r){return a6(e,t,o,r,!0).utc()}function eee(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Co(e){return e._pf==null&&(e._pf=eee()),e._pf}var mC;Array.prototype.some?mC=Array.prototype.some:mC=function(e){var t=Object(this),o=t.length>>>0,r;for(r=0;r<o;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};function WE(e){var t=null,o=!1,r=e._d&&!isNaN(e._d.getTime());if(r&&(t=Co(e),o=mC.call(t.parsedDateParts,function(a){return a!=null}),r=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&o),e._strict&&(r=r&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=r;else return r;return e._isValid}function z_(e){var t=dl(NaN);return e!=null?Xc(Co(t),e):Co(t).userInvalidated=!0,t}var k3=Et.momentProperties=[],Cy=!1;function QE(e,t){var o,r,a,i=k3.length;if(Yi(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),Yi(t._i)||(e._i=t._i),Yi(t._f)||(e._f=t._f),Yi(t._l)||(e._l=t._l),Yi(t._strict)||(e._strict=t._strict),Yi(t._tzm)||(e._tzm=t._tzm),Yi(t._isUTC)||(e._isUTC=t._isUTC),Yi(t._offset)||(e._offset=t._offset),Yi(t._pf)||(e._pf=Co(t)),Yi(t._locale)||(e._locale=t._locale),i>0)for(o=0;o<i;o++)r=k3[o],a=t[r],Yi(a)||(e[r]=a);return e}function xh(e){QE(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Cy===!1&&(Cy=!0,Et.updateOffset(this),Cy=!1)}function Rs(e){return e instanceof xh||e!=null&&e._isAMomentObject!=null}function kM(e){Et.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+e)}function us(e,t){var o=!0;return Xc(function(){if(Et.deprecationHandler!=null&&Et.deprecationHandler(null,e),o){var r=[],a,i,n,s=arguments.length;for(i=0;i<s;i++){if(a="",typeof arguments[i]=="object"){a+=`
[`+i+"] ";for(n in arguments[0])Yo(arguments[0],n)&&(a+=n+": "+arguments[0][n]+", ");a=a.slice(0,-2)}else a=arguments[i];r.push(a)}kM(e+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),o=!1}return t.apply(this,arguments)},t)}var R3={};function RM(e,t){Et.deprecationHandler!=null&&Et.deprecationHandler(e,t),R3[e]||(kM(t),R3[e]=!0)}Et.suppressDeprecationWarnings=!1;Et.deprecationHandler=null;function fl(e){return typeof Function!="undefined"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function tee(e){var t,o;for(o in e)Yo(e,o)&&(t=e[o],fl(t)?this[o]=t:this["_"+o]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function pC(e,t){var o=Xc({},e),r;for(r in t)Yo(t,r)&&(bd(e[r])&&bd(t[r])?(o[r]={},Xc(o[r],e[r]),Xc(o[r],t[r])):t[r]!=null?o[r]=t[r]:delete o[r]);for(r in e)Yo(e,r)&&!Yo(t,r)&&bd(e[r])&&(o[r]=Xc({},o[r]));return o}function XE(e){e!=null&&this.set(e)}var hC;Object.keys?hC=Object.keys:hC=function(e){var t,o=[];for(t in e)Yo(e,t)&&o.push(t);return o};var oee={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function aee(e,t,o){var r=this._calendar[e]||this._calendar.sameElse;return fl(r)?r.call(t,o):r}function ll(e,t,o){var r=""+Math.abs(e),a=t-r.length,i=e>=0;return(i?o?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+r}var KE=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ov=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,wy={},rm={};function Yt(e,t,o,r){var a=r;typeof r=="string"&&(a=function(){return this[r]()}),e&&(rm[e]=a),t&&(rm[t[0]]=function(){return ll(a.apply(this,arguments),t[1],t[2])}),o&&(rm[o]=function(){return this.localeData().ordinal(a.apply(this,arguments),e)})}function ree(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function iee(e){var t=e.match(KE),o,r;for(o=0,r=t.length;o<r;o++)rm[t[o]]?t[o]=rm[t[o]]:t[o]=ree(t[o]);return function(a){var i="",n;for(n=0;n<r;n++)i+=fl(t[n])?t[n].call(a,e):t[n];return i}}function Uv(e,t){return e.isValid()?(t=VM(t,e.localeData()),wy[t]=wy[t]||iee(t),wy[t](e)):e.localeData().invalidDate()}function VM(e,t){var o=5;function r(a){return t.longDateFormat(a)||a}for(ov.lastIndex=0;o>=0&&ov.test(e);)e=e.replace(ov,r),ov.lastIndex=0,o-=1;return e}var nee={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function see(e){var t=this._longDateFormat[e],o=this._longDateFormat[e.toUpperCase()];return t||!o?t:(this._longDateFormat[e]=o.match(KE).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[e])}var lee="Invalid date";function cee(){return this._invalidDate}var uee="%d",dee=/\d{1,2}/;function fee(e){return this._ordinal.replace("%d",e)}var mee={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function pee(e,t,o,r){var a=this._relativeTime[o];return fl(a)?a(e,t,o,r):a.replace(/%d/i,e)}function hee(e,t){var o=this._relativeTime[e>0?"future":"past"];return fl(o)?o(t):o.replace(/%s/i,t)}var V3={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ds(e){return typeof e=="string"?V3[e]||V3[e.toLowerCase()]:void 0}function YE(e){var t={},o,r;for(r in e)Yo(e,r)&&(o=ds(r),o&&(t[o]=e[r]));return t}var vee={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function gee(e){var t=[],o;for(o in e)Yo(e,o)&&t.push({unit:o,priority:vee[o]});return t.sort(function(r,a){return r.priority-a.priority}),t}var BM=/\d/,Vn=/\d\d/,qM=/\d{3}/,JE=/\d{4}/,H_=/[+-]?\d{6}/,qa=/\d\d?/,LM=/\d\d\d\d?/,$M=/\d\d\d\d\d\d?/,j_=/\d{1,3}/,ZE=/\d{1,4}/,G_=/[+-]?\d{1,6}/,$m=/\d+/,W_=/[+-]?\d+/,_ee=/Z|[+-]\d\d:?\d\d/gi,Q_=/Z|[+-]\d\d(?::?\d\d)?/gi,bee=/[+-]?\d+(\.\d{1,3})?/,Ch=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Um=/^[1-9]\d?/,eS=/^([1-9]\d|\d)/,Pg;Pg={};function kt(e,t,o){Pg[e]=fl(t)?t:function(r,a){return r&&o?o:t}}function yee(e,t){return Yo(Pg,e)?Pg[e](t._strict,t._locale):new RegExp(xee(e))}function xee(e){return Ql(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,o,r,a,i){return o||r||a||i}))}function Ql(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function es(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function ko(e){var t=+e,o=0;return t!==0&&isFinite(t)&&(o=es(t)),o}var vC={};function ba(e,t){var o,r=t,a;for(typeof e=="string"&&(e=[e]),tc(t)&&(r=function(i,n){n[t]=ko(i)}),a=e.length,o=0;o<a;o++)vC[e[o]]=r}function wh(e,t){ba(e,function(o,r,a,i){a._w=a._w||{},t(o,a._w,a,i)})}function Cee(e,t,o){t!=null&&Yo(vC,e)&&vC[e](t,o._a,o,e)}function X_(e){return e%4===0&&e%100!==0||e%400===0}var Ci=0,Ul=1,Js=2,Nr=3,Is=4,zl=5,nd=6,wee=7,Eee=8;Yt("Y",0,0,function(){var e=this.year();return e<=9999?ll(e,4):"+"+e});Yt(0,["YY",2],0,function(){return this.year()%100});Yt(0,["YYYY",4],0,"year");Yt(0,["YYYYY",5],0,"year");Yt(0,["YYYYYY",6,!0],0,"year");kt("Y",W_);kt("YY",qa,Vn);kt("YYYY",ZE,JE);kt("YYYYY",G_,H_);kt("YYYYYY",G_,H_);ba(["YYYYY","YYYYYY"],Ci);ba("YYYY",function(e,t){t[Ci]=e.length===2?Et.parseTwoDigitYear(e):ko(e)});ba("YY",function(e,t){t[Ci]=Et.parseTwoDigitYear(e)});ba("Y",function(e,t){t[Ci]=parseInt(e,10)});function lp(e){return X_(e)?366:365}Et.parseTwoDigitYear=function(e){return ko(e)+(ko(e)>68?1900:2e3)};var UM=zm("FullYear",!0);function See(){return X_(this.year())}function zm(e,t){return function(o){return o!=null?(zM(this,e,o),Et.updateOffset(this,t),this):Np(this,e)}}function Np(e,t){if(!e.isValid())return NaN;var o=e._d,r=e._isUTC;switch(t){case"Milliseconds":return r?o.getUTCMilliseconds():o.getMilliseconds();case"Seconds":return r?o.getUTCSeconds():o.getSeconds();case"Minutes":return r?o.getUTCMinutes():o.getMinutes();case"Hours":return r?o.getUTCHours():o.getHours();case"Date":return r?o.getUTCDate():o.getDate();case"Day":return r?o.getUTCDay():o.getDay();case"Month":return r?o.getUTCMonth():o.getMonth();case"FullYear":return r?o.getUTCFullYear():o.getFullYear();default:return NaN}}function zM(e,t,o){var r,a,i,n,s;if(!(!e.isValid()||isNaN(o))){switch(r=e._d,a=e._isUTC,t){case"Milliseconds":return void(a?r.setUTCMilliseconds(o):r.setMilliseconds(o));case"Seconds":return void(a?r.setUTCSeconds(o):r.setSeconds(o));case"Minutes":return void(a?r.setUTCMinutes(o):r.setMinutes(o));case"Hours":return void(a?r.setUTCHours(o):r.setHours(o));case"Date":return void(a?r.setUTCDate(o):r.setDate(o));case"FullYear":break;default:return}i=o,n=e.month(),s=e.date(),s=s===29&&n===1&&!X_(i)?28:s,a?r.setUTCFullYear(i,n,s):r.setFullYear(i,n,s)}}function Iee(e){return e=ds(e),fl(this[e])?this[e]():this}function Aee(e,t){if(typeof e=="object"){e=YE(e);var o=gee(e),r,a=o.length;for(r=0;r<a;r++)this[o[r].unit](e[o[r].unit])}else if(e=ds(e),fl(this[e]))return this[e](t);return this}function Tee(e,t){return(e%t+t)%t}var nr;Array.prototype.indexOf?nr=Array.prototype.indexOf:nr=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function tS(e,t){if(isNaN(e)||isNaN(t))return NaN;var o=Tee(t,12);return e+=(t-o)/12,o===1?X_(e)?29:28:31-o%7%2}Yt("M",["MM",2],"Mo",function(){return this.month()+1});Yt("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});Yt("MMMM",0,0,function(e){return this.localeData().months(this,e)});kt("M",qa,Um);kt("MM",qa,Vn);kt("MMM",function(e,t){return t.monthsShortRegex(e)});kt("MMMM",function(e,t){return t.monthsRegex(e)});ba(["M","MM"],function(e,t){t[Ul]=ko(e)-1});ba(["MMM","MMMM"],function(e,t,o,r){var a=o._locale.monthsParse(e,r,o._strict);a!=null?t[Ul]=a:Co(o).invalidMonth=e});var Dee="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),HM="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),jM=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Oee=Ch,Pee=Ch;function Fee(e,t){return e?ks(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||jM).test(t)?"format":"standalone"][e.month()]:ks(this._months)?this._months:this._months.standalone}function Mee(e,t){return e?ks(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[jM.test(t)?"format":"standalone"][e.month()]:ks(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Nee(e,t,o){var r,a,i,n=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)i=dl([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(i,"").toLocaleLowerCase();return o?t==="MMM"?(a=nr.call(this._shortMonthsParse,n),a!==-1?a:null):(a=nr.call(this._longMonthsParse,n),a!==-1?a:null):t==="MMM"?(a=nr.call(this._shortMonthsParse,n),a!==-1?a:(a=nr.call(this._longMonthsParse,n),a!==-1?a:null)):(a=nr.call(this._longMonthsParse,n),a!==-1?a:(a=nr.call(this._shortMonthsParse,n),a!==-1?a:null))}function kee(e,t,o){var r,a,i;if(this._monthsParseExact)return Nee.call(this,e,t,o);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(a=dl([2e3,r]),o&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),!o&&!this._monthsParse[r]&&(i="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),o&&t==="MMMM"&&this._longMonthsParse[r].test(e))return r;if(o&&t==="MMM"&&this._shortMonthsParse[r].test(e))return r;if(!o&&this._monthsParse[r].test(e))return r}}function GM(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=ko(t);else if(t=e.localeData().monthsParse(t),!tc(t))return e}var o=t,r=e.date();return r=r<29?r:Math.min(r,tS(e.year(),o)),e._isUTC?e._d.setUTCMonth(o,r):e._d.setMonth(o,r),e}function WM(e){return e!=null?(GM(this,e),Et.updateOffset(this,!0),this):Np(this,"Month")}function Ree(){return tS(this.year(),this.month())}function Vee(e){return this._monthsParseExact?(Yo(this,"_monthsRegex")||QM.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(Yo(this,"_monthsShortRegex")||(this._monthsShortRegex=Oee),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function Bee(e){return this._monthsParseExact?(Yo(this,"_monthsRegex")||QM.call(this),e?this._monthsStrictRegex:this._monthsRegex):(Yo(this,"_monthsRegex")||(this._monthsRegex=Pee),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function QM(){function e(l,u){return u.length-l.length}var t=[],o=[],r=[],a,i,n,s;for(a=0;a<12;a++)i=dl([2e3,a]),n=Ql(this.monthsShort(i,"")),s=Ql(this.months(i,"")),t.push(n),o.push(s),r.push(s),r.push(n);t.sort(e),o.sort(e),r.sort(e),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function qee(e,t,o,r,a,i,n){var s;return e<100&&e>=0?(s=new Date(e+400,t,o,r,a,i,n),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,o,r,a,i,n),s}function kp(e){var t,o;return e<100&&e>=0?(o=Array.prototype.slice.call(arguments),o[0]=e+400,t=new Date(Date.UTC.apply(null,o)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Fg(e,t,o){var r=7+t-o,a=(7+kp(e,0,r).getUTCDay()-t)%7;return-a+r-1}function XM(e,t,o,r,a){var i=(7+o-r)%7,n=Fg(e,r,a),s=1+7*(t-1)+i+n,l,u;return s<=0?(l=e-1,u=lp(l)+s):s>lp(e)?(l=e+1,u=s-lp(e)):(l=e,u=s),{year:l,dayOfYear:u}}function Rp(e,t,o){var r=Fg(e.year(),t,o),a=Math.floor((e.dayOfYear()-r-1)/7)+1,i,n;return a<1?(n=e.year()-1,i=a+Xl(n,t,o)):a>Xl(e.year(),t,o)?(i=a-Xl(e.year(),t,o),n=e.year()+1):(n=e.year(),i=a),{week:i,year:n}}function Xl(e,t,o){var r=Fg(e,t,o),a=Fg(e+1,t,o);return(lp(e)-r+a)/7}Yt("w",["ww",2],"wo","week");Yt("W",["WW",2],"Wo","isoWeek");kt("w",qa,Um);kt("ww",qa,Vn);kt("W",qa,Um);kt("WW",qa,Vn);wh(["w","ww","W","WW"],function(e,t,o,r){t[r.substr(0,1)]=ko(e)});function Lee(e){return Rp(e,this._week.dow,this._week.doy).week}var $ee={dow:0,doy:6};function Uee(){return this._week.dow}function zee(){return this._week.doy}function Hee(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function jee(e){var t=Rp(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}Yt("d",0,"do","day");Yt("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});Yt("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});Yt("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});Yt("e",0,0,"weekday");Yt("E",0,0,"isoWeekday");kt("d",qa);kt("e",qa);kt("E",qa);kt("dd",function(e,t){return t.weekdaysMinRegex(e)});kt("ddd",function(e,t){return t.weekdaysShortRegex(e)});kt("dddd",function(e,t){return t.weekdaysRegex(e)});wh(["dd","ddd","dddd"],function(e,t,o,r){var a=o._locale.weekdaysParse(e,r,o._strict);a!=null?t.d=a:Co(o).invalidWeekday=e});wh(["d","e","E"],function(e,t,o,r){t[r]=ko(e)});function Gee(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function Wee(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function oS(e,t){return e.slice(t,7).concat(e.slice(0,t))}var Qee="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),KM="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Xee="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Kee=Ch,Yee=Ch,Jee=Ch;function Zee(e,t){var o=ks(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?oS(o,this._week.dow):e?o[e.day()]:o}function ete(e){return e===!0?oS(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function tte(e){return e===!0?oS(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function ote(e,t,o){var r,a,i,n=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)i=dl([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(i,"").toLocaleLowerCase();return o?t==="dddd"?(a=nr.call(this._weekdaysParse,n),a!==-1?a:null):t==="ddd"?(a=nr.call(this._shortWeekdaysParse,n),a!==-1?a:null):(a=nr.call(this._minWeekdaysParse,n),a!==-1?a:null):t==="dddd"?(a=nr.call(this._weekdaysParse,n),a!==-1||(a=nr.call(this._shortWeekdaysParse,n),a!==-1)?a:(a=nr.call(this._minWeekdaysParse,n),a!==-1?a:null)):t==="ddd"?(a=nr.call(this._shortWeekdaysParse,n),a!==-1||(a=nr.call(this._weekdaysParse,n),a!==-1)?a:(a=nr.call(this._minWeekdaysParse,n),a!==-1?a:null)):(a=nr.call(this._minWeekdaysParse,n),a!==-1||(a=nr.call(this._weekdaysParse,n),a!==-1)?a:(a=nr.call(this._shortWeekdaysParse,n),a!==-1?a:null))}function ate(e,t,o){var r,a,i;if(this._weekdaysParseExact)return ote.call(this,e,t,o);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(a=dl([2e3,1]).day(r),o&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(a,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(a,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(a,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(i="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[r]=new RegExp(i.replace(".",""),"i")),o&&t==="dddd"&&this._fullWeekdaysParse[r].test(e))return r;if(o&&t==="ddd"&&this._shortWeekdaysParse[r].test(e))return r;if(o&&t==="dd"&&this._minWeekdaysParse[r].test(e))return r;if(!o&&this._weekdaysParse[r].test(e))return r}}function rte(e){if(!this.isValid())return e!=null?this:NaN;var t=Np(this,"Day");return e!=null?(e=Gee(e,this.localeData()),this.add(e-t,"d")):t}function ite(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function nte(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=Wee(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function ste(e){return this._weekdaysParseExact?(Yo(this,"_weekdaysRegex")||aS.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(Yo(this,"_weekdaysRegex")||(this._weekdaysRegex=Kee),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function lte(e){return this._weekdaysParseExact?(Yo(this,"_weekdaysRegex")||aS.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Yo(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Yee),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function cte(e){return this._weekdaysParseExact?(Yo(this,"_weekdaysRegex")||aS.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Yo(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Jee),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function aS(){function e(c,d){return d.length-c.length}var t=[],o=[],r=[],a=[],i,n,s,l,u;for(i=0;i<7;i++)n=dl([2e3,1]).day(i),s=Ql(this.weekdaysMin(n,"")),l=Ql(this.weekdaysShort(n,"")),u=Ql(this.weekdays(n,"")),t.push(s),o.push(l),r.push(u),a.push(s),a.push(l),a.push(u);t.sort(e),o.sort(e),r.sort(e),a.sort(e),this._weekdaysRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function rS(){return this.hours()%12||12}function ute(){return this.hours()||24}Yt("H",["HH",2],0,"hour");Yt("h",["hh",2],0,rS);Yt("k",["kk",2],0,ute);Yt("hmm",0,0,function(){return""+rS.apply(this)+ll(this.minutes(),2)});Yt("hmmss",0,0,function(){return""+rS.apply(this)+ll(this.minutes(),2)+ll(this.seconds(),2)});Yt("Hmm",0,0,function(){return""+this.hours()+ll(this.minutes(),2)});Yt("Hmmss",0,0,function(){return""+this.hours()+ll(this.minutes(),2)+ll(this.seconds(),2)});function YM(e,t){Yt(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}YM("a",!0);YM("A",!1);function JM(e,t){return t._meridiemParse}kt("a",JM);kt("A",JM);kt("H",qa,eS);kt("h",qa,Um);kt("k",qa,Um);kt("HH",qa,Vn);kt("hh",qa,Vn);kt("kk",qa,Vn);kt("hmm",LM);kt("hmmss",$M);kt("Hmm",LM);kt("Hmmss",$M);ba(["H","HH"],Nr);ba(["k","kk"],function(e,t,o){var r=ko(e);t[Nr]=r===24?0:r});ba(["a","A"],function(e,t,o){o._isPm=o._locale.isPM(e),o._meridiem=e});ba(["h","hh"],function(e,t,o){t[Nr]=ko(e),Co(o).bigHour=!0});ba("hmm",function(e,t,o){var r=e.length-2;t[Nr]=ko(e.substr(0,r)),t[Is]=ko(e.substr(r)),Co(o).bigHour=!0});ba("hmmss",function(e,t,o){var r=e.length-4,a=e.length-2;t[Nr]=ko(e.substr(0,r)),t[Is]=ko(e.substr(r,2)),t[zl]=ko(e.substr(a)),Co(o).bigHour=!0});ba("Hmm",function(e,t,o){var r=e.length-2;t[Nr]=ko(e.substr(0,r)),t[Is]=ko(e.substr(r))});ba("Hmmss",function(e,t,o){var r=e.length-4,a=e.length-2;t[Nr]=ko(e.substr(0,r)),t[Is]=ko(e.substr(r,2)),t[zl]=ko(e.substr(a))});function dte(e){return(e+"").toLowerCase().charAt(0)==="p"}var fte=/[ap]\.?m?\.?/i,mte=zm("Hours",!0);function pte(e,t,o){return e>11?o?"pm":"PM":o?"am":"AM"}var ZM={calendar:oee,longDateFormat:nee,invalidDate:lee,ordinal:uee,dayOfMonthOrdinalParse:dee,relativeTime:mee,months:Dee,monthsShort:HM,week:$ee,weekdays:Qee,weekdaysMin:Xee,weekdaysShort:KM,meridiemParse:fte},ja={},E0={},Vp;function hte(e,t){var o,r=Math.min(e.length,t.length);for(o=0;o<r;o+=1)if(e[o]!==t[o])return o;return r}function B3(e){return e&&e.toLowerCase().replace("_","-")}function vte(e){for(var t=0,o,r,a,i;t<e.length;){for(i=B3(e[t]).split("-"),o=i.length,r=B3(e[t+1]),r=r?r.split("-"):null;o>0;){if(a=K_(i.slice(0,o).join("-")),a)return a;if(r&&r.length>=o&&hte(i,r)>=o-1)break;o--}t++}return Vp}function gte(e){return!!(e&&e.match("^[^/\\\\]*$"))}function K_(e){var t=null,o;if(ja[e]===void 0&&typeof module!="undefined"&&module&&module.exports&&gte(e))try{t=Vp._abbr,o=require,o("./locale/"+e),au(t)}catch{ja[e]=null}return ja[e]}function au(e,t){var o;return e&&(Yi(t)?o=ic(e):o=iS(e,t),o?Vp=o:typeof console!="undefined"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Vp._abbr}function iS(e,t){if(t!==null){var o,r=ZM;if(t.abbr=e,ja[e]!=null)RM("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=ja[e]._config;else if(t.parentLocale!=null)if(ja[t.parentLocale]!=null)r=ja[t.parentLocale]._config;else if(o=K_(t.parentLocale),o!=null)r=o._config;else return E0[t.parentLocale]||(E0[t.parentLocale]=[]),E0[t.parentLocale].push({name:e,config:t}),null;return ja[e]=new XE(pC(r,t)),E0[e]&&E0[e].forEach(function(a){iS(a.name,a.config)}),au(e),ja[e]}else return delete ja[e],null}function _te(e,t){if(t!=null){var o,r,a=ZM;ja[e]!=null&&ja[e].parentLocale!=null?ja[e].set(pC(ja[e]._config,t)):(r=K_(e),r!=null&&(a=r._config),t=pC(a,t),r==null&&(t.abbr=e),o=new XE(t),o.parentLocale=ja[e],ja[e]=o),au(e)}else ja[e]!=null&&(ja[e].parentLocale!=null?(ja[e]=ja[e].parentLocale,e===au()&&au(e)):ja[e]!=null&&delete ja[e]);return ja[e]}function ic(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Vp;if(!ks(e)){if(t=K_(e),t)return t;e=[e]}return vte(e)}function bte(){return hC(ja)}function nS(e){var t,o=e._a;return o&&Co(e).overflow===-2&&(t=o[Ul]<0||o[Ul]>11?Ul:o[Js]<1||o[Js]>tS(o[Ci],o[Ul])?Js:o[Nr]<0||o[Nr]>24||o[Nr]===24&&(o[Is]!==0||o[zl]!==0||o[nd]!==0)?Nr:o[Is]<0||o[Is]>59?Is:o[zl]<0||o[zl]>59?zl:o[nd]<0||o[nd]>999?nd:-1,Co(e)._overflowDayOfYear&&(t<Ci||t>Js)&&(t=Js),Co(e)._overflowWeeks&&t===-1&&(t=wee),Co(e)._overflowWeekday&&t===-1&&(t=Eee),Co(e).overflow=t),e}var yte=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,xte=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Cte=/Z|[+-]\d\d(?::?\d\d)?/,av=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Ey=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],wte=/^\/?Date\((-?\d+)/i,Ete=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Ste={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function e6(e){var t,o,r=e._i,a=yte.exec(r)||xte.exec(r),i,n,s,l,u=av.length,c=Ey.length;if(a){for(Co(e).iso=!0,t=0,o=u;t<o;t++)if(av[t][1].exec(a[1])){n=av[t][0],i=av[t][2]!==!1;break}if(n==null){e._isValid=!1;return}if(a[3]){for(t=0,o=c;t<o;t++)if(Ey[t][1].exec(a[3])){s=(a[2]||" ")+Ey[t][0];break}if(s==null){e._isValid=!1;return}}if(!i&&s!=null){e._isValid=!1;return}if(a[4])if(Cte.exec(a[4]))l="Z";else{e._isValid=!1;return}e._f=n+(s||"")+(l||""),lS(e)}else e._isValid=!1}function Ite(e,t,o,r,a,i){var n=[Ate(e),HM.indexOf(t),parseInt(o,10),parseInt(r,10),parseInt(a,10)];return i&&n.push(parseInt(i,10)),n}function Ate(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Tte(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Dte(e,t,o){if(e){var r=KM.indexOf(e),a=new Date(t[0],t[1],t[2]).getDay();if(r!==a)return Co(o).weekdayMismatch=!0,o._isValid=!1,!1}return!0}function Ote(e,t,o){if(e)return Ste[e];if(t)return 0;var r=parseInt(o,10),a=r%100,i=(r-a)/100;return i*60+a}function t6(e){var t=Ete.exec(Tte(e._i)),o;if(t){if(o=Ite(t[4],t[3],t[2],t[5],t[6],t[7]),!Dte(t[1],o,e))return;e._a=o,e._tzm=Ote(t[8],t[9],t[10]),e._d=kp.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),Co(e).rfc2822=!0}else e._isValid=!1}function Pte(e){var t=wte.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(e6(e),e._isValid===!1)delete e._isValid;else return;if(t6(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:Et.createFromInputFallback(e)}Et.createFromInputFallback=us("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function zf(e,t,o){return e!=null?e:t!=null?t:o}function Fte(e){var t=new Date(Et.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function sS(e){var t,o,r=[],a,i,n;if(!e._d){for(a=Fte(e),e._w&&e._a[Js]==null&&e._a[Ul]==null&&Mte(e),e._dayOfYear!=null&&(n=zf(e._a[Ci],a[Ci]),(e._dayOfYear>lp(n)||e._dayOfYear===0)&&(Co(e)._overflowDayOfYear=!0),o=kp(n,0,e._dayOfYear),e._a[Ul]=o.getUTCMonth(),e._a[Js]=o.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=a[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[Nr]===24&&e._a[Is]===0&&e._a[zl]===0&&e._a[nd]===0&&(e._nextDay=!0,e._a[Nr]=0),e._d=(e._useUTC?kp:qee).apply(null,r),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Nr]=24),e._w&&typeof e._w.d!="undefined"&&e._w.d!==i&&(Co(e).weekdayMismatch=!0)}}function Mte(e){var t,o,r,a,i,n,s,l,u;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(i=1,n=4,o=zf(t.GG,e._a[Ci],Rp(Ba(),1,4).year),r=zf(t.W,1),a=zf(t.E,1),(a<1||a>7)&&(l=!0)):(i=e._locale._week.dow,n=e._locale._week.doy,u=Rp(Ba(),i,n),o=zf(t.gg,e._a[Ci],u.year),r=zf(t.w,u.week),t.d!=null?(a=t.d,(a<0||a>6)&&(l=!0)):t.e!=null?(a=t.e+i,(t.e<0||t.e>6)&&(l=!0)):a=i),r<1||r>Xl(o,i,n)?Co(e)._overflowWeeks=!0:l!=null?Co(e)._overflowWeekday=!0:(s=XM(o,r,a,i,n),e._a[Ci]=s.year,e._dayOfYear=s.dayOfYear)}Et.ISO_8601=function(){};Et.RFC_2822=function(){};function lS(e){if(e._f===Et.ISO_8601){e6(e);return}if(e._f===Et.RFC_2822){t6(e);return}e._a=[],Co(e).empty=!0;var t=""+e._i,o,r,a,i,n,s=t.length,l=0,u,c;for(a=VM(e._f,e._locale).match(KE)||[],c=a.length,o=0;o<c;o++)i=a[o],r=(t.match(yee(i,e))||[])[0],r&&(n=t.substr(0,t.indexOf(r)),n.length>0&&Co(e).unusedInput.push(n),t=t.slice(t.indexOf(r)+r.length),l+=r.length),rm[i]?(r?Co(e).empty=!1:Co(e).unusedTokens.push(i),Cee(i,r,e)):e._strict&&!r&&Co(e).unusedTokens.push(i);Co(e).charsLeftOver=s-l,t.length>0&&Co(e).unusedInput.push(t),e._a[Nr]<=12&&Co(e).bigHour===!0&&e._a[Nr]>0&&(Co(e).bigHour=void 0),Co(e).parsedDateParts=e._a.slice(0),Co(e).meridiem=e._meridiem,e._a[Nr]=Nte(e._locale,e._a[Nr],e._meridiem),u=Co(e).era,u!==null&&(e._a[Ci]=e._locale.erasConvertYear(u,e._a[Ci])),sS(e),nS(e)}function Nte(e,t,o){var r;return o==null?t:e.meridiemHour!=null?e.meridiemHour(t,o):(e.isPM!=null&&(r=e.isPM(o),r&&t<12&&(t+=12),!r&&t===12&&(t=0)),t)}function kte(e){var t,o,r,a,i,n,s=!1,l=e._f.length;if(l===0){Co(e).invalidFormat=!0,e._d=new Date(NaN);return}for(a=0;a<l;a++)i=0,n=!1,t=QE({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[a],lS(t),WE(t)&&(n=!0),i+=Co(t).charsLeftOver,i+=Co(t).unusedTokens.length*10,Co(t).score=i,s?i<r&&(r=i,o=t):(r==null||i<r||n)&&(r=i,o=t,n&&(s=!0));Xc(e,o||t)}function Rte(e){if(!e._d){var t=YE(e._i),o=t.day===void 0?t.date:t.day;e._a=NM([t.year,t.month,o,t.hour,t.minute,t.second,t.millisecond],function(r){return r&&parseInt(r,10)}),sS(e)}}function Vte(e){var t=new xh(nS(o6(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function o6(e){var t=e._i,o=e._f;return e._locale=e._locale||ic(e._l),t===null||o===void 0&&t===""?z_({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),Rs(t)?new xh(nS(t)):(yh(t)?e._d=t:ks(o)?kte(e):o?lS(e):Bte(e),WE(e)||(e._d=null),e))}function Bte(e){var t=e._i;Yi(t)?e._d=new Date(Et.now()):yh(t)?e._d=new Date(t.valueOf()):typeof t=="string"?Pte(e):ks(t)?(e._a=NM(t.slice(0),function(o){return parseInt(o,10)}),sS(e)):bd(t)?Rte(e):tc(t)?e._d=new Date(t):Et.createFromInputFallback(e)}function a6(e,t,o,r,a){var i={};return(t===!0||t===!1)&&(r=t,t=void 0),(o===!0||o===!1)&&(r=o,o=void 0),(bd(e)&&GE(e)||ks(e)&&e.length===0)&&(e=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=a,i._l=o,i._i=e,i._f=t,i._strict=r,Vte(i)}function Ba(e,t,o,r){return a6(e,t,o,r,!1)}var qte=us("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Ba.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:z_()}),Lte=us("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Ba.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:z_()});function r6(e,t){var o,r;if(t.length===1&&ks(t[0])&&(t=t[0]),!t.length)return Ba();for(o=t[0],r=1;r<t.length;++r)(!t[r].isValid()||t[r][e](o))&&(o=t[r]);return o}function $te(){var e=[].slice.call(arguments,0);return r6("isBefore",e)}function Ute(){var e=[].slice.call(arguments,0);return r6("isAfter",e)}var zte=function(){return Date.now?Date.now():+new Date},S0=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Hte(e){var t,o=!1,r,a=S0.length;for(t in e)if(Yo(e,t)&&!(nr.call(S0,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(r=0;r<a;++r)if(e[S0[r]]){if(o)return!1;parseFloat(e[S0[r]])!==ko(e[S0[r]])&&(o=!0)}return!0}function jte(){return this._isValid}function Gte(){return qs(NaN)}function Y_(e){var t=YE(e),o=t.year||0,r=t.quarter||0,a=t.month||0,i=t.week||t.isoWeek||0,n=t.day||0,s=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._isValid=Hte(t),this._milliseconds=+c+u*1e3+l*6e4+s*1e3*60*60,this._days=+n+i*7,this._months=+a+r*3+o*12,this._data={},this._locale=ic(),this._bubble()}function zv(e){return e instanceof Y_}function gC(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function Wte(e,t,o){var r=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),i=0,n;for(n=0;n<r;n++)(o&&e[n]!==t[n]||!o&&ko(e[n])!==ko(t[n]))&&i++;return i+a}function i6(e,t){Yt(e,0,0,function(){var o=this.utcOffset(),r="+";return o<0&&(o=-o,r="-"),r+ll(~~(o/60),2)+t+ll(~~o%60,2)})}i6("Z",":");i6("ZZ","");kt("Z",Q_);kt("ZZ",Q_);ba(["Z","ZZ"],function(e,t,o){o._useUTC=!0,o._tzm=cS(Q_,e)});var Qte=/([\+\-]|\d\d)/gi;function cS(e,t){var o=(t||"").match(e),r,a,i;return o===null?null:(r=o[o.length-1]||[],a=(r+"").match(Qte)||["-",0,0],i=+(a[1]*60)+ko(a[2]),i===0?0:a[0]==="+"?i:-i)}function uS(e,t){var o,r;return t._isUTC?(o=t.clone(),r=(Rs(e)||yh(e)?e.valueOf():Ba(e).valueOf())-o.valueOf(),o._d.setTime(o._d.valueOf()+r),Et.updateOffset(o,!1),o):Ba(e).local()}function _C(e){return-Math.round(e._d.getTimezoneOffset())}Et.updateOffset=function(){};function Xte(e,t,o){var r=this._offset||0,a;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=cS(Q_,e),e===null)return this}else Math.abs(e)<16&&!o&&(e=e*60);return!this._isUTC&&t&&(a=_C(this)),this._offset=e,this._isUTC=!0,a!=null&&this.add(a,"m"),r!==e&&(!t||this._changeInProgress?l6(this,qs(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Et.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:_C(this)}function Kte(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Yte(e){return this.utcOffset(0,e)}function Jte(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(_C(this),"m")),this}function Zte(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=cS(_ee,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function eoe(e){return this.isValid()?(e=e?Ba(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function toe(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function ooe(){if(!Yi(this._isDSTShifted))return this._isDSTShifted;var e={},t;return QE(e,this),e=o6(e),e._a?(t=e._isUTC?dl(e._a):Ba(e._a),this._isDSTShifted=this.isValid()&&Wte(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function aoe(){return this.isValid()?!this._isUTC:!1}function roe(){return this.isValid()?this._isUTC:!1}function n6(){return this.isValid()?this._isUTC&&this._offset===0:!1}var ioe=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,noe=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function qs(e,t){var o=e,r=null,a,i,n;return zv(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:tc(e)||!isNaN(+e)?(o={},t?o[t]=+e:o.milliseconds=+e):(r=ioe.exec(e))?(a=r[1]==="-"?-1:1,o={y:0,d:ko(r[Js])*a,h:ko(r[Nr])*a,m:ko(r[Is])*a,s:ko(r[zl])*a,ms:ko(gC(r[nd]*1e3))*a}):(r=noe.exec(e))?(a=r[1]==="-"?-1:1,o={y:$u(r[2],a),M:$u(r[3],a),w:$u(r[4],a),d:$u(r[5],a),h:$u(r[6],a),m:$u(r[7],a),s:$u(r[8],a)}):o==null?o={}:typeof o=="object"&&("from"in o||"to"in o)&&(n=soe(Ba(o.from),Ba(o.to)),o={},o.ms=n.milliseconds,o.M=n.months),i=new Y_(o),zv(e)&&Yo(e,"_locale")&&(i._locale=e._locale),zv(e)&&Yo(e,"_isValid")&&(i._isValid=e._isValid),i}qs.fn=Y_.prototype;qs.invalid=Gte;function $u(e,t){var o=e&&parseFloat(e.replace(",","."));return(isNaN(o)?0:o)*t}function q3(e,t){var o={};return o.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(o.months,"M").isAfter(t)&&--o.months,o.milliseconds=+t-+e.clone().add(o.months,"M"),o}function soe(e,t){var o;return e.isValid()&&t.isValid()?(t=uS(t,e),e.isBefore(t)?o=q3(e,t):(o=q3(t,e),o.milliseconds=-o.milliseconds,o.months=-o.months),o):{milliseconds:0,months:0}}function s6(e,t){return function(o,r){var a,i;return r!==null&&!isNaN(+r)&&(RM(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=o,o=r,r=i),a=qs(o,r),l6(this,a,e),this}}function l6(e,t,o,r){var a=t._milliseconds,i=gC(t._days),n=gC(t._months);!e.isValid()||(r=r==null?!0:r,n&&GM(e,Np(e,"Month")+n*o),i&&zM(e,"Date",Np(e,"Date")+i*o),a&&e._d.setTime(e._d.valueOf()+a*o),r&&Et.updateOffset(e,i||n))}var loe=s6(1,"add"),coe=s6(-1,"subtract");function c6(e){return typeof e=="string"||e instanceof String}function uoe(e){return Rs(e)||yh(e)||c6(e)||tc(e)||foe(e)||doe(e)||e===null||e===void 0}function doe(e){var t=bd(e)&&!GE(e),o=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],a,i,n=r.length;for(a=0;a<n;a+=1)i=r[a],o=o||Yo(e,i);return t&&o}function foe(e){var t=ks(e),o=!1;return t&&(o=e.filter(function(r){return!tc(r)&&c6(e)}).length===0),t&&o}function moe(e){var t=bd(e)&&!GE(e),o=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],a,i;for(a=0;a<r.length;a+=1)i=r[a],o=o||Yo(e,i);return t&&o}function poe(e,t){var o=e.diff(t,"days",!0);return o<-6?"sameElse":o<-1?"lastWeek":o<0?"lastDay":o<1?"sameDay":o<2?"nextDay":o<7?"nextWeek":"sameElse"}function hoe(e,t){arguments.length===1&&(arguments[0]?uoe(arguments[0])?(e=arguments[0],t=void 0):moe(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var o=e||Ba(),r=uS(o,this).startOf("day"),a=Et.calendarFormat(this,r)||"sameElse",i=t&&(fl(t[a])?t[a].call(this,o):t[a]);return this.format(i||this.localeData().calendar(a,this,Ba(o)))}function voe(){return new xh(this)}function goe(e,t){var o=Rs(e)?e:Ba(e);return this.isValid()&&o.isValid()?(t=ds(t)||"millisecond",t==="millisecond"?this.valueOf()>o.valueOf():o.valueOf()<this.clone().startOf(t).valueOf()):!1}function _oe(e,t){var o=Rs(e)?e:Ba(e);return this.isValid()&&o.isValid()?(t=ds(t)||"millisecond",t==="millisecond"?this.valueOf()<o.valueOf():this.clone().endOf(t).valueOf()<o.valueOf()):!1}function boe(e,t,o,r){var a=Rs(e)?e:Ba(e),i=Rs(t)?t:Ba(t);return this.isValid()&&a.isValid()&&i.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(a,o):!this.isBefore(a,o))&&(r[1]===")"?this.isBefore(i,o):!this.isAfter(i,o))):!1}function yoe(e,t){var o=Rs(e)?e:Ba(e),r;return this.isValid()&&o.isValid()?(t=ds(t)||"millisecond",t==="millisecond"?this.valueOf()===o.valueOf():(r=o.valueOf(),this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf())):!1}function xoe(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Coe(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function woe(e,t,o){var r,a,i;if(!this.isValid())return NaN;if(r=uS(e,this),!r.isValid())return NaN;switch(a=(r.utcOffset()-this.utcOffset())*6e4,t=ds(t),t){case"year":i=Hv(this,r)/12;break;case"month":i=Hv(this,r);break;case"quarter":i=Hv(this,r)/3;break;case"second":i=(this-r)/1e3;break;case"minute":i=(this-r)/6e4;break;case"hour":i=(this-r)/36e5;break;case"day":i=(this-r-a)/864e5;break;case"week":i=(this-r-a)/6048e5;break;default:i=this-r}return o?i:es(i)}function Hv(e,t){if(e.date()<t.date())return-Hv(t,e);var o=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(o,"months"),a,i;return t-r<0?(a=e.clone().add(o-1,"months"),i=(t-r)/(r-a)):(a=e.clone().add(o+1,"months"),i=(t-r)/(a-r)),-(o+i)||0}Et.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";Et.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Eoe(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Soe(e){if(!this.isValid())return null;var t=e!==!0,o=t?this.clone().utc():this;return o.year()<0||o.year()>9999?Uv(o,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):fl(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Uv(o,"Z")):Uv(o,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Ioe(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",o,r,a,i;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),o="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",a="-MM-DD[T]HH:mm:ss.SSS",i=t+'[")]',this.format(o+r+a+i)}function Aoe(e){e||(e=this.isUtc()?Et.defaultFormatUtc:Et.defaultFormat);var t=Uv(this,e);return this.localeData().postformat(t)}function Toe(e,t){return this.isValid()&&(Rs(e)&&e.isValid()||Ba(e).isValid())?qs({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Doe(e){return this.from(Ba(),e)}function Ooe(e,t){return this.isValid()&&(Rs(e)&&e.isValid()||Ba(e).isValid())?qs({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Poe(e){return this.to(Ba(),e)}function u6(e){var t;return e===void 0?this._locale._abbr:(t=ic(e),t!=null&&(this._locale=t),this)}var d6=us("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function f6(){return this._locale}var Mg=1e3,im=60*Mg,Ng=60*im,m6=(365*400+97)*24*Ng;function nm(e,t){return(e%t+t)%t}function p6(e,t,o){return e<100&&e>=0?new Date(e+400,t,o)-m6:new Date(e,t,o).valueOf()}function h6(e,t,o){return e<100&&e>=0?Date.UTC(e+400,t,o)-m6:Date.UTC(e,t,o)}function Foe(e){var t,o;if(e=ds(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(o=this._isUTC?h6:p6,e){case"year":t=o(this.year(),0,1);break;case"quarter":t=o(this.year(),this.month()-this.month()%3,1);break;case"month":t=o(this.year(),this.month(),1);break;case"week":t=o(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=o(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=o(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=nm(t+(this._isUTC?0:this.utcOffset()*im),Ng);break;case"minute":t=this._d.valueOf(),t-=nm(t,im);break;case"second":t=this._d.valueOf(),t-=nm(t,Mg);break}return this._d.setTime(t),Et.updateOffset(this,!0),this}function Moe(e){var t,o;if(e=ds(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(o=this._isUTC?h6:p6,e){case"year":t=o(this.year()+1,0,1)-1;break;case"quarter":t=o(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=o(this.year(),this.month()+1,1)-1;break;case"week":t=o(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=o(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=o(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Ng-nm(t+(this._isUTC?0:this.utcOffset()*im),Ng)-1;break;case"minute":t=this._d.valueOf(),t+=im-nm(t,im)-1;break;case"second":t=this._d.valueOf(),t+=Mg-nm(t,Mg)-1;break}return this._d.setTime(t),Et.updateOffset(this,!0),this}function Noe(){return this._d.valueOf()-(this._offset||0)*6e4}function koe(){return Math.floor(this.valueOf()/1e3)}function Roe(){return new Date(this.valueOf())}function Voe(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Boe(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function qoe(){return this.isValid()?this.toISOString():null}function Loe(){return WE(this)}function $oe(){return Xc({},Co(this))}function Uoe(){return Co(this).overflow}function zoe(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Yt("N",0,0,"eraAbbr");Yt("NN",0,0,"eraAbbr");Yt("NNN",0,0,"eraAbbr");Yt("NNNN",0,0,"eraName");Yt("NNNNN",0,0,"eraNarrow");Yt("y",["y",1],"yo","eraYear");Yt("y",["yy",2],0,"eraYear");Yt("y",["yyy",3],0,"eraYear");Yt("y",["yyyy",4],0,"eraYear");kt("N",dS);kt("NN",dS);kt("NNN",dS);kt("NNNN",eae);kt("NNNNN",tae);ba(["N","NN","NNN","NNNN","NNNNN"],function(e,t,o,r){var a=o._locale.erasParse(e,r,o._strict);a?Co(o).era=a:Co(o).invalidEra=e});kt("y",$m);kt("yy",$m);kt("yyy",$m);kt("yyyy",$m);kt("yo",oae);ba(["y","yy","yyy","yyyy"],Ci);ba(["yo"],function(e,t,o,r){var a;o._locale._eraYearOrdinalRegex&&(a=e.match(o._locale._eraYearOrdinalRegex)),o._locale.eraYearOrdinalParse?t[Ci]=o._locale.eraYearOrdinalParse(e,a):t[Ci]=parseInt(e,10)});function Hoe(e,t){var o,r,a,i=this._eras||ic("en")._eras;for(o=0,r=i.length;o<r;++o){switch(typeof i[o].since){case"string":a=Et(i[o].since).startOf("day"),i[o].since=a.valueOf();break}switch(typeof i[o].until){case"undefined":i[o].until=1/0;break;case"string":a=Et(i[o].until).startOf("day").valueOf(),i[o].until=a.valueOf();break}}return i}function joe(e,t,o){var r,a,i=this.eras(),n,s,l;for(e=e.toUpperCase(),r=0,a=i.length;r<a;++r)if(n=i[r].name.toUpperCase(),s=i[r].abbr.toUpperCase(),l=i[r].narrow.toUpperCase(),o)switch(t){case"N":case"NN":case"NNN":if(s===e)return i[r];break;case"NNNN":if(n===e)return i[r];break;case"NNNNN":if(l===e)return i[r];break}else if([n,s,l].indexOf(e)>=0)return i[r]}function Goe(e,t){var o=e.since<=e.until?1:-1;return t===void 0?Et(e.since).year():Et(e.since).year()+(t-e.offset)*o}function Woe(){var e,t,o,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(o=this.clone().startOf("day").valueOf(),r[e].since<=o&&o<=r[e].until||r[e].until<=o&&o<=r[e].since)return r[e].name;return""}function Qoe(){var e,t,o,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(o=this.clone().startOf("day").valueOf(),r[e].since<=o&&o<=r[e].until||r[e].until<=o&&o<=r[e].since)return r[e].narrow;return""}function Xoe(){var e,t,o,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(o=this.clone().startOf("day").valueOf(),r[e].since<=o&&o<=r[e].until||r[e].until<=o&&o<=r[e].since)return r[e].abbr;return""}function Koe(){var e,t,o,r,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(o=a[e].since<=a[e].until?1:-1,r=this.clone().startOf("day").valueOf(),a[e].since<=r&&r<=a[e].until||a[e].until<=r&&r<=a[e].since)return(this.year()-Et(a[e].since).year())*o+a[e].offset;return this.year()}function Yoe(e){return Yo(this,"_erasNameRegex")||fS.call(this),e?this._erasNameRegex:this._erasRegex}function Joe(e){return Yo(this,"_erasAbbrRegex")||fS.call(this),e?this._erasAbbrRegex:this._erasRegex}function Zoe(e){return Yo(this,"_erasNarrowRegex")||fS.call(this),e?this._erasNarrowRegex:this._erasRegex}function dS(e,t){return t.erasAbbrRegex(e)}function eae(e,t){return t.erasNameRegex(e)}function tae(e,t){return t.erasNarrowRegex(e)}function oae(e,t){return t._eraYearOrdinalRegex||$m}function fS(){var e=[],t=[],o=[],r=[],a,i,n,s,l,u=this.eras();for(a=0,i=u.length;a<i;++a)n=Ql(u[a].name),s=Ql(u[a].abbr),l=Ql(u[a].narrow),t.push(n),e.push(s),o.push(l),r.push(n),r.push(s),r.push(l);this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+o.join("|")+")","i")}Yt(0,["gg",2],0,function(){return this.weekYear()%100});Yt(0,["GG",2],0,function(){return this.isoWeekYear()%100});function J_(e,t){Yt(0,[e,e.length],0,t)}J_("gggg","weekYear");J_("ggggg","weekYear");J_("GGGG","isoWeekYear");J_("GGGGG","isoWeekYear");kt("G",W_);kt("g",W_);kt("GG",qa,Vn);kt("gg",qa,Vn);kt("GGGG",ZE,JE);kt("gggg",ZE,JE);kt("GGGGG",G_,H_);kt("ggggg",G_,H_);wh(["gggg","ggggg","GGGG","GGGGG"],function(e,t,o,r){t[r.substr(0,2)]=ko(e)});wh(["gg","GG"],function(e,t,o,r){t[r]=Et.parseTwoDigitYear(e)});function aae(e){return v6.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function rae(e){return v6.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function iae(){return Xl(this.year(),1,4)}function nae(){return Xl(this.isoWeekYear(),1,4)}function sae(){var e=this.localeData()._week;return Xl(this.year(),e.dow,e.doy)}function lae(){var e=this.localeData()._week;return Xl(this.weekYear(),e.dow,e.doy)}function v6(e,t,o,r,a){var i;return e==null?Rp(this,r,a).year:(i=Xl(e,r,a),t>i&&(t=i),cae.call(this,e,t,o,r,a))}function cae(e,t,o,r,a){var i=XM(e,t,o,r,a),n=kp(i.year,0,i.dayOfYear);return this.year(n.getUTCFullYear()),this.month(n.getUTCMonth()),this.date(n.getUTCDate()),this}Yt("Q",0,"Qo","quarter");kt("Q",BM);ba("Q",function(e,t){t[Ul]=(ko(e)-1)*3});function uae(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}Yt("D",["DD",2],"Do","date");kt("D",qa,Um);kt("DD",qa,Vn);kt("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});ba(["D","DD"],Js);ba("Do",function(e,t){t[Js]=ko(e.match(qa)[0])});var g6=zm("Date",!0);Yt("DDD",["DDDD",3],"DDDo","dayOfYear");kt("DDD",j_);kt("DDDD",qM);ba(["DDD","DDDD"],function(e,t,o){o._dayOfYear=ko(e)});function dae(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}Yt("m",["mm",2],0,"minute");kt("m",qa,eS);kt("mm",qa,Vn);ba(["m","mm"],Is);var fae=zm("Minutes",!1);Yt("s",["ss",2],0,"second");kt("s",qa,eS);kt("ss",qa,Vn);ba(["s","ss"],zl);var mae=zm("Seconds",!1);Yt("S",0,0,function(){return~~(this.millisecond()/100)});Yt(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Yt(0,["SSS",3],0,"millisecond");Yt(0,["SSSS",4],0,function(){return this.millisecond()*10});Yt(0,["SSSSS",5],0,function(){return this.millisecond()*100});Yt(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Yt(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Yt(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Yt(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});kt("S",j_,BM);kt("SS",j_,Vn);kt("SSS",j_,qM);var Kc,_6;for(Kc="SSSS";Kc.length<=9;Kc+="S")kt(Kc,$m);function pae(e,t){t[nd]=ko(("0."+e)*1e3)}for(Kc="S";Kc.length<=9;Kc+="S")ba(Kc,pae);_6=zm("Milliseconds",!1);Yt("z",0,0,"zoneAbbr");Yt("zz",0,0,"zoneName");function hae(){return this._isUTC?"UTC":""}function vae(){return this._isUTC?"Coordinated Universal Time":""}var mt=xh.prototype;mt.add=loe;mt.calendar=hoe;mt.clone=voe;mt.diff=woe;mt.endOf=Moe;mt.format=Aoe;mt.from=Toe;mt.fromNow=Doe;mt.to=Ooe;mt.toNow=Poe;mt.get=Iee;mt.invalidAt=Uoe;mt.isAfter=goe;mt.isBefore=_oe;mt.isBetween=boe;mt.isSame=yoe;mt.isSameOrAfter=xoe;mt.isSameOrBefore=Coe;mt.isValid=Loe;mt.lang=d6;mt.locale=u6;mt.localeData=f6;mt.max=Lte;mt.min=qte;mt.parsingFlags=$oe;mt.set=Aee;mt.startOf=Foe;mt.subtract=coe;mt.toArray=Voe;mt.toObject=Boe;mt.toDate=Roe;mt.toISOString=Soe;mt.inspect=Ioe;typeof Symbol!="undefined"&&Symbol.for!=null&&(mt[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});mt.toJSON=qoe;mt.toString=Eoe;mt.unix=koe;mt.valueOf=Noe;mt.creationData=zoe;mt.eraName=Woe;mt.eraNarrow=Qoe;mt.eraAbbr=Xoe;mt.eraYear=Koe;mt.year=UM;mt.isLeapYear=See;mt.weekYear=aae;mt.isoWeekYear=rae;mt.quarter=mt.quarters=uae;mt.month=WM;mt.daysInMonth=Ree;mt.week=mt.weeks=Hee;mt.isoWeek=mt.isoWeeks=jee;mt.weeksInYear=sae;mt.weeksInWeekYear=lae;mt.isoWeeksInYear=iae;mt.isoWeeksInISOWeekYear=nae;mt.date=g6;mt.day=mt.days=rte;mt.weekday=ite;mt.isoWeekday=nte;mt.dayOfYear=dae;mt.hour=mt.hours=mte;mt.minute=mt.minutes=fae;mt.second=mt.seconds=mae;mt.millisecond=mt.milliseconds=_6;mt.utcOffset=Xte;mt.utc=Yte;mt.local=Jte;mt.parseZone=Zte;mt.hasAlignedHourOffset=eoe;mt.isDST=toe;mt.isLocal=aoe;mt.isUtcOffset=roe;mt.isUtc=n6;mt.isUTC=n6;mt.zoneAbbr=hae;mt.zoneName=vae;mt.dates=us("dates accessor is deprecated. Use date instead.",g6);mt.months=us("months accessor is deprecated. Use month instead",WM);mt.years=us("years accessor is deprecated. Use year instead",UM);mt.zone=us("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Kte);mt.isDSTShifted=us("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",ooe);function gae(e){return Ba(e*1e3)}function _ae(){return Ba.apply(null,arguments).parseZone()}function b6(e){return e}var Zo=XE.prototype;Zo.calendar=aee;Zo.longDateFormat=see;Zo.invalidDate=cee;Zo.ordinal=fee;Zo.preparse=b6;Zo.postformat=b6;Zo.relativeTime=pee;Zo.pastFuture=hee;Zo.set=tee;Zo.eras=Hoe;Zo.erasParse=joe;Zo.erasConvertYear=Goe;Zo.erasAbbrRegex=Joe;Zo.erasNameRegex=Yoe;Zo.erasNarrowRegex=Zoe;Zo.months=Fee;Zo.monthsShort=Mee;Zo.monthsParse=kee;Zo.monthsRegex=Bee;Zo.monthsShortRegex=Vee;Zo.week=Lee;Zo.firstDayOfYear=zee;Zo.firstDayOfWeek=Uee;Zo.weekdays=Zee;Zo.weekdaysMin=tte;Zo.weekdaysShort=ete;Zo.weekdaysParse=ate;Zo.weekdaysRegex=ste;Zo.weekdaysShortRegex=lte;Zo.weekdaysMinRegex=cte;Zo.isPM=dte;Zo.meridiem=pte;function kg(e,t,o,r){var a=ic(),i=dl().set(r,t);return a[o](i,e)}function y6(e,t,o){if(tc(e)&&(t=e,e=void 0),e=e||"",t!=null)return kg(e,t,o,"month");var r,a=[];for(r=0;r<12;r++)a[r]=kg(e,r,o,"month");return a}function mS(e,t,o,r){typeof e=="boolean"?(tc(t)&&(o=t,t=void 0),t=t||""):(t=e,o=t,e=!1,tc(t)&&(o=t,t=void 0),t=t||"");var a=ic(),i=e?a._week.dow:0,n,s=[];if(o!=null)return kg(t,(o+i)%7,r,"day");for(n=0;n<7;n++)s[n]=kg(t,(n+i)%7,r,"day");return s}function bae(e,t){return y6(e,t,"months")}function yae(e,t){return y6(e,t,"monthsShort")}function xae(e,t,o){return mS(e,t,o,"weekdays")}function Cae(e,t,o){return mS(e,t,o,"weekdaysShort")}function wae(e,t,o){return mS(e,t,o,"weekdaysMin")}au("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,o=ko(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+o}});Et.lang=us("moment.lang is deprecated. Use moment.locale instead.",au);Et.langData=us("moment.langData is deprecated. Use moment.localeData instead.",ic);var Il=Math.abs;function Eae(){var e=this._data;return this._milliseconds=Il(this._milliseconds),this._days=Il(this._days),this._months=Il(this._months),e.milliseconds=Il(e.milliseconds),e.seconds=Il(e.seconds),e.minutes=Il(e.minutes),e.hours=Il(e.hours),e.months=Il(e.months),e.years=Il(e.years),this}function x6(e,t,o,r){var a=qs(t,o);return e._milliseconds+=r*a._milliseconds,e._days+=r*a._days,e._months+=r*a._months,e._bubble()}function Sae(e,t){return x6(this,e,t,1)}function Iae(e,t){return x6(this,e,t,-1)}function L3(e){return e<0?Math.floor(e):Math.ceil(e)}function Aae(){var e=this._milliseconds,t=this._days,o=this._months,r=this._data,a,i,n,s,l;return e>=0&&t>=0&&o>=0||e<=0&&t<=0&&o<=0||(e+=L3(bC(o)+t)*864e5,t=0,o=0),r.milliseconds=e%1e3,a=es(e/1e3),r.seconds=a%60,i=es(a/60),r.minutes=i%60,n=es(i/60),r.hours=n%24,t+=es(n/24),l=es(C6(t)),o+=l,t-=L3(bC(l)),s=es(o/12),o%=12,r.days=t,r.months=o,r.years=s,this}function C6(e){return e*4800/146097}function bC(e){return e*146097/4800}function Tae(e){if(!this.isValid())return NaN;var t,o,r=this._milliseconds;if(e=ds(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+r/864e5,o=this._months+C6(t),e){case"month":return o;case"quarter":return o/3;case"year":return o/12}else switch(t=this._days+Math.round(bC(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return t*24+r/36e5;case"minute":return t*1440+r/6e4;case"second":return t*86400+r/1e3;case"millisecond":return Math.floor(t*864e5)+r;default:throw new Error("Unknown unit "+e)}}function nc(e){return function(){return this.as(e)}}var w6=nc("ms"),Dae=nc("s"),Oae=nc("m"),Pae=nc("h"),Fae=nc("d"),Mae=nc("w"),Nae=nc("M"),kae=nc("Q"),Rae=nc("y"),Vae=w6;function Bae(){return qs(this)}function qae(e){return e=ds(e),this.isValid()?this[e+"s"]():NaN}function Xd(e){return function(){return this.isValid()?this._data[e]:NaN}}var Lae=Xd("milliseconds"),$ae=Xd("seconds"),Uae=Xd("minutes"),zae=Xd("hours"),Hae=Xd("days"),jae=Xd("months"),Gae=Xd("years");function Wae(){return es(this.days()/7)}var Ml=Math.round,Wf={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Qae(e,t,o,r,a){return a.relativeTime(t||1,!!o,e,r)}function Xae(e,t,o,r){var a=qs(e).abs(),i=Ml(a.as("s")),n=Ml(a.as("m")),s=Ml(a.as("h")),l=Ml(a.as("d")),u=Ml(a.as("M")),c=Ml(a.as("w")),d=Ml(a.as("y")),f=i<=o.ss&&["s",i]||i<o.s&&["ss",i]||n<=1&&["m"]||n<o.m&&["mm",n]||s<=1&&["h"]||s<o.h&&["hh",s]||l<=1&&["d"]||l<o.d&&["dd",l];return o.w!=null&&(f=f||c<=1&&["w"]||c<o.w&&["ww",c]),f=f||u<=1&&["M"]||u<o.M&&["MM",u]||d<=1&&["y"]||["yy",d],f[2]=t,f[3]=+e>0,f[4]=r,Qae.apply(null,f)}function Kae(e){return e===void 0?Ml:typeof e=="function"?(Ml=e,!0):!1}function Yae(e,t){return Wf[e]===void 0?!1:t===void 0?Wf[e]:(Wf[e]=t,e==="s"&&(Wf.ss=t-1),!0)}function Jae(e,t){if(!this.isValid())return this.localeData().invalidDate();var o=!1,r=Wf,a,i;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(o=e),typeof t=="object"&&(r=Object.assign({},Wf,t),t.s!=null&&t.ss==null&&(r.ss=t.s-1)),a=this.localeData(),i=Xae(this,!o,r,a),o&&(i=a.pastFuture(+this,i)),a.postformat(i)}var Sy=Math.abs;function Af(e){return(e>0)-(e<0)||+e}function Z_(){if(!this.isValid())return this.localeData().invalidDate();var e=Sy(this._milliseconds)/1e3,t=Sy(this._days),o=Sy(this._months),r,a,i,n,s=this.asSeconds(),l,u,c,d;return s?(r=es(e/60),a=es(r/60),e%=60,r%=60,i=es(o/12),o%=12,n=e?e.toFixed(3).replace(/\.?0+$/,""):"",l=s<0?"-":"",u=Af(this._months)!==Af(s)?"-":"",c=Af(this._days)!==Af(s)?"-":"",d=Af(this._milliseconds)!==Af(s)?"-":"",l+"P"+(i?u+i+"Y":"")+(o?u+o+"M":"")+(t?c+t+"D":"")+(a||r||e?"T":"")+(a?d+a+"H":"")+(r?d+r+"M":"")+(e?d+n+"S":"")):"P0D"}var Go=Y_.prototype;Go.isValid=jte;Go.abs=Eae;Go.add=Sae;Go.subtract=Iae;Go.as=Tae;Go.asMilliseconds=w6;Go.asSeconds=Dae;Go.asMinutes=Oae;Go.asHours=Pae;Go.asDays=Fae;Go.asWeeks=Mae;Go.asMonths=Nae;Go.asQuarters=kae;Go.asYears=Rae;Go.valueOf=Vae;Go._bubble=Aae;Go.clone=Bae;Go.get=qae;Go.milliseconds=Lae;Go.seconds=$ae;Go.minutes=Uae;Go.hours=zae;Go.days=Hae;Go.weeks=Wae;Go.months=jae;Go.years=Gae;Go.humanize=Jae;Go.toISOString=Z_;Go.toString=Z_;Go.toJSON=Z_;Go.locale=u6;Go.localeData=f6;Go.toIsoString=us("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Z_);Go.lang=d6;Yt("X",0,0,"unix");Yt("x",0,0,"valueOf");kt("x",W_);kt("X",bee);ba("X",function(e,t,o){o._d=new Date(parseFloat(e)*1e3)});ba("x",function(e,t,o){o._d=new Date(ko(e))});//! moment.js
Et.version="2.30.1";ZZ(Ba);Et.fn=mt;Et.min=$te;Et.max=Ute;Et.now=zte;Et.utc=dl;Et.unix=gae;Et.months=bae;Et.isDate=yh;Et.locale=au;Et.invalid=z_;Et.duration=qs;Et.isMoment=Rs;Et.weekdays=xae;Et.parseZone=_ae;Et.localeData=ic;Et.isDuration=zv;Et.monthsShort=yae;Et.weekdaysMin=wae;Et.defineLocale=iS;Et.updateLocale=_te;Et.locales=bte;Et.weekdaysShort=Cae;Et.normalizeUnits=ds;Et.relativeTimeRounding=Kae;Et.relativeTimeThreshold=Yae;Et.calendarFormat=poe;Et.prototype=mt;Et.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const zc={retencao:{desktop:3,mobile:3},maximoDocsPorLote:100,pausaInicial:1e4,pausaEntreLotes:10*60*1e3,pausaEntreTabelas:100},Zae=[{tabela:"documento",campoData:"dataHoraEmissao",filhos:[{tabela:"arquivo",chaveEstrangeira:"idTabelaMaster"},{tabela:"documentoItem",chaveEstrangeira:"idDocumento"},{tabela:"documentoEndereco",chaveEstrangeira:"idDocumento"},{tabela:"documentoStatus",chaveEstrangeira:"idDocumento"},{tabela:"documentoCondicaoPagamento",chaveEstrangeira:"idDocumento"},{tabela:"documentoSat",chaveEstrangeira:"idDocumento"},{tabela:"documentoXML",chaveEstrangeira:"idDocumento"},{tabela:"documentoFiscalEletronico",chaveEstrangeira:"idDocumento"},{tabela:"documentoFiscalEletronicoXml",chaveEstrangeira:"idDocumento"},{tabela:"documentoFiscalEletronicoErro",chaveEstrangeira:"idDocumento"}]},{tabela:"financeiroMovimentacao",campoData:"dataEmissao",dependentes:[{tabela:"financeiroMovimentacaoN",chaveEstrangeira:"idFinanceiroMovimentacaoN"}]},{tabela:"financeiroTitulo",campoData:"dataPagamento",filhos:[{tabela:"financeiroBoletoTitulo",chaveEstrangeira:"idFinanceiroTitulo"},{tabela:"financeiroRenegociacao",chaveEstrangeira:"idFinanceiroTitulo"}]}];function ere(){const e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4))||/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)||/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/g.test(e)?"mobile":"desktop"}async function tre({tabela:e,campoData:t,dependentes:o,dataLimite:r}){var s;const a=await $erp()[e].where(t).below(r.toISOString()).limit(zc.maximoDocsPorLote).sortBy(t),i=a.map(l=>l.id),n=(o||[]).map(l=>a.map(u=>u[l.chaveEstrangeira]).filter(Boolean));return $utils.gconsole.log("limpeza",`- ${e} - preparando para remover ${i.length} registros a partir de '${(s=a[0])==null?void 0:s[t]}'`),{ids:i,idsDependentes:n}}async function ore(){let e=new Date(new Date().toDateString());e.setMonth(ere()==="mobile"?-zc.retencao.mobile:-zc.retencao.desktop);for(const t of Zae){const{ids:o,idsDependentes:r}=await tre({tabela:t.tabela,dependentes:t.dependentes,campoData:t.campoData,dataLimite:e});if(!o.length)continue;for(const{tabela:i,chaveEstrangeira:n}of t.filhos||[]){const s=await $erp()[i].where(n).anyOf(o).delete();$utils.gconsole.log("limpeza",`- ${i} - removido ${s} registros`),await $utils.dormir(zc.pausaEntreTabelas)}for(const i in t.dependentes){const{tabela:n}=t.dependentes[i],s=await $erp()[n].where("id").anyOf(r[i]).delete();$utils.gconsole.log("limpeza",`- ${n} - removido ${s} registros`),await $utils.dormir(zc.pausaEntreTabelas)}const a=await $erp()[t.tabela].where("id").anyOf(o).delete();$utils.gconsole.log("limpeza",`- ${t.tabela} - removido ${a} registros`),await $utils.dormir(zc.pausaEntreTabelas)}}async function are(){var e;if(!!localStorage.getItem("bancoDeDados")){if(!$db.hibrido.isOnline()){const t=await $db.configuracoes.leValor("hibrido");if(!t||t==="local"){$utils.gconsole.log("limpeza","- modo hibrido n\xE3o ativado, limpeza n\xE3o realizada");return}}try{const t=new Date(new Date((e=localStorage.getItem("dataUltimaLimpeza"))!=null?e:"2000-01-01T00:00:00").toDateString()),o=new Date(new Date().toDateString());if(t>=o){$utils.gconsole.log("limpeza","- processo j\xE1 realizado hoje, aguarde amanh\xE3 para nova limpeza");return}for(await $utils.dormir(zc.pausaInicial);;)$utils.gconsole.log("limpeza","- iniciando processo de remo\xE7\xE3o de dados antigos no dispositivo"),await ore(),localStorage.setItem("dataUltimaLimpeza",Et().format()),await $utils.dormir(zc.pausaEntreLotes)}catch(t){console.error("limpeza",t)}finally{}}}async function rre(e,t){return e.$touch(),await(()=>new Promise(r=>{const a=t.$watch(()=>e.$pending,i=>{i||(a&&a(),r())},{immediate:!0})}))(),!e.$error}class Nl extends Error{constructor(t){super(t),this.name="ErroValidacao",this.message=t}}class E6 extends Error{constructor(t){super(t),this.name="Alerta",this.message=t}}function Na(e,t){if(e)throw new Nl(t)}function ire(e,t){if(e)throw new E6(t)}function sm(e,t){if(e)throw new Error(t)}const sr={};async function nre(e){var c,d,f;const{idItem:t,idContatoDestinatario:o,idContatoEmitente:r}=e,a=new Date;if((sr==null?void 0:sr.timeout)&&!(a>new Date(sr.timeout)))return;const i=await $erp().cfop.toArray(),n=await $erp()._ncm.toArray(),s=await $erp().documentoOperacao.toArray();let l=[],u=[];for(const m of s)m.json=JSON.parse((c=m.json)!=null?c:null);if(o){const m=await $erp().contato.get(o),p=await $erp().contatoEndereco.where({idContato:o}).toArray(),v=(d=p.find(g=>{var x,b;return((b=(x=g.grupo)==null?void 0:x.trim())==null?void 0:b.toLowerCase())==="principal"}))!=null?d:p[0];l.push(m),v&&u.push(v)}if(r){const m=await $erp().contato.get(r),p=await $erp().contatoEndereco.where({idContato:r}).toArray(),v=(f=p.find(g=>{var x,b;return((b=(x=g.grupo)==null?void 0:x.trim())==null?void 0:b.toLowerCase())==="principal"}))!=null?f:p[0];l.push(m),v&&u.push(v)}sr.cfop=i,sr.ncm=n,sr.documentoOperacao=s,sr.contatos=l,sr.contatosEndereco=u,sr.timeout=a.setSeconds(a.getSeconds()+3)}async function sre(e,t){let o=[1202,1411,2202,2411,5102,6102,5405,6404],r,a;if(!!~o.indexOf(t)){if(e&&(r=await $db.ncm.ler({ncm:e}),a=r[0]),r=sr.cfop.filter(i=>~o.indexOf(i.cfop)),a!=null&&a.st){if(t===1202)return r.find(i=>i.cfop===1411);if(t===2202)return r.find(i=>i.cfop===2411);if(t===5102)return r.find(i=>i.cfop===5405);if(t===6102)return r.find(i=>i.cfop===6404)}else{if(t===1411)return r.find(i=>i.cfop===1202);if(t===2411)return r.find(i=>i.cfop===2202);if(t===5405)return r.find(i=>i.cfop===5102);if(t===6404)return r.find(i=>i.cfop===6102)}return r.find(i=>i.cfop===t)}}async function lre(e={}){var x;const{itemTipo:t,idItem:o,codigoDocumentoOperacao:r,idContatoDestinatario:a,idContatoEmitente:i,operacaoFator:n,ncm:s}=e;if(await nre(e),~["servico","tratamento"].indexOf($utils.removerAcentos(t||"").toLowerCase())){let b;return n===-1&&(b=5933),n===1&&(b=2933),sr.cfop.find(_=>_.cfop===b)}if(!(r&&a&&i&&n))return;const l=sr.ncm.find(b=>b.ncm===s),u=sr.documentoOperacao.find(b=>b.codigoDocumentoOperacao===r);if(!u)return;const c=sr.contatos.find(b=>b.id===a),d=sr.contatos.find(b=>b.id===i);if(!(c&&d))return;const f=sr.contatosEndereco.find(b=>b.idContato===a),m=sr.contatosEndereco.find(b=>b.idContato===i);if(!m)return;let p=f==null?void 0:f.uf;const v=m==null?void 0:m.uf;p||(p=v);const g=v!==p;if(u.json){let b=u.json,_,w,S;if(_=await $erp().item.get(o),w=JSON.parse((_==null?void 0:_.json)||null),S=(x=w==null?void 0:w.documentosOperacao)!=null?x:{},u.id in S&&(b=S[u.id]),!b)return;const D=await $db.ncm.ncmST({idItem:o,ncm:l==null?void 0:l.ncm,ufDestinatario:p}),M=(c.numeroDocumentoNacional||"").trim().replace(/\D/g,""),O=(c.numeroDocumentoEstadual||"").trim().replace(/\D/g,"");let T,I;return O&&M.length===14&&(n===-1&&(I=b.contribuinte.find(N=>N.descricao==="Venda")),n===1&&(I=b.contribuinte.find(N=>N.descricao==="Devolu\xE7\xE3o"))),O&&M.length===14||(n===-1&&(I=b.naoContribuinte.find(N=>N.descricao==="Venda")),n===1&&(I=b.naoContribuinte.find(N=>N.descricao==="Devolu\xE7\xE3o"))),g||(T=D?I.internaST:I.interna),g&&(T=D?I.interestadualST:I.interestadual),T=Number(T),Number.isInteger(T)>0?sr.cfop.find(N=>N.cfop===Number(T)):void 0}if(u.idCfop){let b=sr.cfop.find(_=>_.id===u.idCfop);if(n===1){let _=20;g&&(_=138),b=sr.cfop.find(w=>w.codigoCfop===_)}return b?~[1202,1411,2202,2411,5102,6102,5405,6404].indexOf(b.cfop)?sre(l==null?void 0:l.ncm,b.cfop):b:void 0}}async function cre(e){let t=null,o=[],r={};if(t=await $db.hibrido.le({table:"documento",id:e}),!!~["Venda","Fatura"].indexOf(t==null?void 0:t.tipo)){t.tipo==="Fatura"?o=await $db.hibrido.lista({table:"documento",where:{idFatura:e}}):o.push(t);for(const a of o){let i=await $db.hibrido.lista({table:"documentoItem",where:{idDocumento:a.id}});for(const n of i){if(!!n.idItem&&!r[n.idItem]){const l=await Se().item.get(n.idItem);l!=null&&l.id&&(r[l.id]=l.ncm)}const s=await $utils.selecionarCfop({ncm:r[n.idItem],idItem:n.idItem,codigoDocumentoOperacao:a.codigoDocumentoOperacao,idContatoDestinatario:a.idContato,idContatoEmitente:a.idEmpresa,operacaoFator:n.operacaoFator});if(s!=null&&s.id){const l={idCfop:s==null?void 0:s.id,operacaoFator:s==null?void 0:s.fator,operacao:s==null?void 0:s.operacao};await $erpUpdate().documentoItem.update(n.id,l),await ut("atualizar","documentoItem",n.id,l)}}}}}const $3={urlBanco:"https://api2.b15.com.br/Core/ExecuteSqlV2"},Do=async function(e,t=null){const o=mu("executarSql",t||"",`
`,e);try{if(t||(t=localStorage.getItem("bancoDeDados")),!t)throw new Error("N\xE3o foi poss\xEDvel encontrar o nome do banco de dados.");const r=await Rd({baseURL:$3.urlBanco,data:{token:et.usuario.logado.token||"",database:t,sentence:e},method:"post"});if(r.status!==200)throw new Error("Sql Erro: "+r.status+" - "+r.statusText);if(!!r.data&&!!r.data.error)throw new Error("Sql Server Erro: "+r.data.error.name+" - "+r.data.error.message);return r.data}catch(r){Na(r.name==="Error"&&r.message==="Network Error","Sem internet ou erro de comunica\xE7\xE3o!"),console.error("Falha no acesso aos Dados!  Servidor: "+$3.urlBanco+`
`+r.stack),Na(!0,"Falha no acesso aos dados!")}finally{pu(o,1)}},S6=function(e,t=null){if(["alter","create","delete","drop","exec","grant","insert","truncate","update"].some(a=>~e.toLowerCase().indexOf(a)))throw new Error("Query n\xE3o permitida!");return Do(e,t)},Bp=function(e){return!e||(e.constructor!==Date&&(e=new Date(e)),isNaN(e))?"NULL":`'${e.getFullYear().toString().padStart(4,"0")}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}T${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}.000'`},io=function(e,t=null){if(e==null||e===1/0||isNaN(e))if(t!==null)e=t;else return"NULL";return typeof e=="number"?e.toString():e},Bt=function(e,t=null){if(e==null)if(t!==null)e=t;else return"NULL";return`'${String(e).replace(/'/g,"''")}'`};var I0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAABQAQMAAAAa6XZvAAAAA1BMVEUAAACnej3aAAAADElEQVR42mNgGFkAAADwAAE4aVpRAAAAAElFTkSuQmCC",rv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAABQAQMAAAAa6XZvAAAAA1BMVEX///+nxBvIAAAADElEQVR42mNgGFkAAADwAAE4aVpRAAAAAElFTkSuQmCC";function I6(e,t){var o=1,r=3,a=50;t&&(a=t);var i=[];i.push("00110"),i.push("10001"),i.push("01001"),i.push("11000"),i.push("00101"),i.push("10100"),i.push("01100"),i.push("00011"),i.push("10010"),i.push("01010");for(var c=9;c>=0;c--)for(var n=9;n>=0;n--){for(var d=c*10+n,u="",s=1;s<6;s++)u+=i[c].substr(s-1,1)+i[n].substr(s-1,1);i[d]=u}var l="<img src='"+I0+"' width="+o+" height="+a+" border=0><img src='"+rv+"' width="+o+" height="+a+" border=0><img src='"+I0+"' width="+o+" height="+a+" border=0><img src='"+rv+"' width="+o+" height="+a+" border=0><img ",u=e;u.length%2!=0&&(u="0"+u);for(var c,d,f,m;u.length>0;){c=parseInt(ure(u,2)),u=dre(u,u.length-2),d=i[c];for(var s=1;s<11;s+=2)d.substr(s-1,1)=="0"?f=o:f=r,l+=" src='"+I0+"' width="+f+" height="+a+" border=0><img ",d.substr(s,1)=="0"?m=o:m=r,l+=" src='"+rv+"' width="+m+" height="+a+" border=0><img "}return l+=" src='"+I0+"' width="+r+" height="+a+" border=0><img src='"+rv+"' width="+o+" height="+a+" border=0><img src='"+I0+"' width="+o+" height="+a+" border=0> ",l}function ure(e,t){return e.substr(0,t)}function dre(e,t){return e.substr(e.length-t,t)}function fre(){console.log(...arguments)}function mu(e,...t){const o=Et(new Date);return Ka[e]!==!1&&console.log(`${o.format("HH:mm:ss.SSS")} ${e} ini`,...t),{inic:o,modulo:e}}function pu(e,t,...o){const r=Et(new Date);Ka[e.modulo]!==!1&&console.log(`${r.format("HH:mm:ss.SSS")} ${e.modulo} fim
 tamanho:`,t||0,"tempo:",r.diff(e.inic),...o)}let Ka={App:!1,Atendimento:!1,AutenticacaoBancos:!1,ChatMensagens:!1,Cockpit:!1,ContatoCriar:!1,ContatoFicha:!1,CpfCnpjNoCupom:!1,Documento:!1,DocumentosFiscais:!1,EnvelopeTrocarStatus:!1,Financeiro:!1,FinanceiroBoletos:!1,ImportarContatos:!1,ImportarItens:!1,Item:!1,ItemEstoque:!1,ItemFicha:!1,ItemFichaAtualizar:!1,Layout_Envelopes:!1,LogSinc:!0,LogSincD:!1,NFePrincipal:!1,Plataforma15:!0,PromptContato:!1,PromptItem:!1,_ncm:!1,beforeRouteLeave:!1,carregaDados:!1,cfop:!1,compactarValidarNFe:!1,contato:!1,documentoFiscalEletronico:!1,documentoFiscalEletronicoErro:!1,documentoFiscalEletronicoXml:!1,emitirNFe:!1,executarSql:!1,gerarJsonBaseD:!1,gerarJsonNFCe:!1,gerarJsonNFCeD:!1,gerarJsonNFe:!1,gerarJsonNFeD:!1,gerarSat:!1,gerarSatD:!1,item:!1,nfeIbpt:!1,robust:!1,router:!1,sincDescarregar:!1,sincEnviar:!1,sincronismoEnviar:!1,sincronismoRoteador:!1,tela1:!1,usuario:!1};const U3=localStorage.getItem("logar");if(U3)try{Ka={...Ka,...JSON.parse(U3)}}catch(e){console.error(`Vari\xE1vel 'logar' do localStorage com json inv\xE1lido
`,e)}localStorage.setItem("logar",JSON.stringify(Ka));const Wt={error(){Ka[arguments[0]]===void 0&&(Ka[arguments[0]]=!0),Ka[arguments[0]]&&console.error(...arguments)},warn(){Ka[arguments[0]]===void 0&&(Ka[arguments[0]]=!0),Ka[arguments[0]]&&console.warn(...arguments)},info(){Ka[arguments[0]]===void 0&&(Ka[arguments[0]]=!0),Ka[arguments[0]]&&console.info(arguments[1],arguments[2])},log(){Ka[arguments[0]]===void 0&&(Ka[arguments[0]]=!0),Ka[arguments[0]]&&console.log(...arguments)},time(e,...t){Ka[e]===void 0&&(Ka[e]=!0),Ka[e]&&console.time(...t)},timeEnd(e,...t){Ka[e]===void 0&&(Ka[e]=!0),Ka[e]&&console.timeEnd(...t)}};var mre=["f//AAAAAAAAAAAAAAAAAAAA","f//AAAAAAAAAAAAAAAAAAAB","f//AAAAAAAAAAAAAAEAAAD/","f//AAAAAAAAAAAAAAEAAAAA","f//AAAAAAAAAQAAAP8AAAAA","f//AAAAAAAAAQAAAP8AAAAB","f//AAAAAAAAAQAAAAAAAAD/","f//AAAAAAAAAQAAAAAAAAAA","f//AAABAAAA/wAAAAAAAAAA","f//AAABAAAA/wAAAAAAAAAB","f//AAABAAAA/wAAAAEAAAD/","f//AAABAAAA/wAAAAEAAAAA","f//AAABAAAAAAAAAP8AAAAA","f//AAABAAAAAAAAAP8AAAAB","f//AAABAAAAAAAAAAAAAAD/","f//AAABAAAAAAAAAAAAAAAA","QD/AAD/AAAAAAAAAAAAAAAA","QD/AAD/AAAAAAAAAAAAAAAB","QD/AAD/AAAAAAAAAAEAAAD/","QD/AAD/AAAAAAAAAAEAAAAA","QD/AAD/AAAAAQAAAP8AAAAA","QD/AAD/AAAAAQAAAP8AAAAB","QD/AAD/AAAAAQAAAAAAAAD/","QD/AAD/AAAAAQAAAAAAAAAA","QD/AAAAAAAA/wAAAAAAAAAA","QD/AAAAAAAA/wAAAAAAAAAB","SL/AADeAAAA/gAAAAIAAAD+","QD/AAAAAAAA/wAAAAEAAAAA","QD/AAAAAAAAAAAAAP8AAAAA","QD/AAAAAAAAAAAAAP8AAAAB","QD/AAAAAAAAAAAAAAAAAAD/","QD/AAAAAAAAAAAAAAAAAAAA"],pre=["US0CAuSD38g","UUYCA7QBErs","ajEDAm49ReY","UUoCA+juogg","bjEDAjQrOn0","bkoDA3iPVH4","ajUDAt82atY","UU4CA1nljTg","cjEDAghkmFU","ckoDA0TA9lY","izUEAhrxcbg","ck4DAxY8F10","bjUDAlvFFR8","bk4DAxdhexw","ajkDAr7LFAw","UVICAyQ+UJI","TTECAq7UnEM","TUoCA+Jw8kA","ZjUDAmZGozo","TU4CA7CME0s","ajUDAvnk9E4","ak4DA7VAmk0","ZjkDAtle3bI","TVICAxOyzrM","STUCAqHeHtM","SU4CA+16cNA","h6QEAZKdo54","SVICA62zYxM","RTkCAqx1lb4","RVICA/z3WM0","QT0CAkdoxRU","KFYBA46vJCA"],hre='<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAACCAQAAADLaIVbAAAANUlEQVQIHQEqANX/A',vre="AAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAA",gre='AAAAASUVORK5CYII=" style="width:',_re=["11011001100","11001101100","11001100110","10010011000","10010001100","10001001100","10011001000","10011000100","10001100100","11001001000","11001000100","11000100100","10110011100","10011011100","10011001110","10111001100","10011101100","10011100110","11001110010","11001011100","11001001110","11011100100","11001110100","11101101110","11101001100","11100101100","11100100110","11101100100","11100110100","11100110010","11011011000","11011000110","11000110110","10100011000","10001011000","10001000110","10110001000","10001101000","10001100010","11010001000","11000101000","11000100010","10110111000","10110001110","10001101110","10111011000","10111000110","10001110110","11101110110","11010001110","11000101110","11011101000","11011100010","11011101110","11101011000","11101000110","11100010110","11101101000","11101100010","11100011010","11101111010","11001000010","11110001010","10100110000","10100001100","10010110000","10010000110","10000101100","10000100110","10110010000","10110000100","10011010000","10011000010","10000110100","10000110010","11000010010","11001010000","11110111010","11000010100","10001111010","10100111100","10010111100","10010011110","10111100100","10011110100","10011110010","11110100100","11110010100","11110010010","11011011110","11011110110","11110110110","10101111000","10100011110","10001011110","10111101000","10111100010","11110101000","11110100010","10111011110","10111101110","11101011110","11110101110","11010000100","11010010000","11010011100","1100011101011","11010111000"];const bre={genBarcode(e,t,o){var r=[],a,i,n,s=e.length%5;if(s>0)for(a=0;a<5-s;a+=1)e+="0";for(i=e.length/5,a=0;a<i;a+=1)r[a]=parseInt(e.substr(a*5,5),2);for(n="",a=0;a<r.length;a+=1)n+=hre+mre[r[a]]+vre+pre[r[a]]+gre+t+"px;height:"+o+'px;">';return n},funcCode128C(e){var t,o,r,a,i=0;let n=[];for(a=e.length,i=n[0]=105,t=0,o=0;t<a;t+=2,o+=1)n[o+1]=parseInt(e.substr(t,2),10),r=o+1,i+=r*n[o+1];n[o+1]=i%103,n[o+2]=106;let s="";for(t=0;t<n.length;t+=1)s+=_re[n[t]];return s},gen(e,t,o){const r=this.funcCode128C(e);return this.genBarcode(r,t,o)}};let Iy,iv=0;const Qr=new Array(256);for(let e=0;e<256;e++)Qr[e]=(e+256).toString(16).substring(1);const yre=(()=>{const e=typeof crypto!="undefined"?crypto:typeof window!="undefined"?window.crypto||window.msCrypto:void 0;if(e!==void 0){if(e.randomBytes!==void 0)return e.randomBytes;if(e.getRandomValues!==void 0)return t=>{const o=new Uint8Array(t);return e.getRandomValues(o),o}}return t=>{const o=[];for(let r=t;r>0;r--)o.push(Math.floor(Math.random()*256));return o}})(),z3=4096;function Cm(){(Iy===void 0||iv+16>z3)&&(iv=0,Iy=yre(z3));const e=Array.prototype.slice.call(Iy,iv,iv+=16);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,Qr[e[0]]+Qr[e[1]]+Qr[e[2]]+Qr[e[3]]+"-"+Qr[e[4]]+Qr[e[5]]+"-"+Qr[e[6]]+Qr[e[7]]+"-"+Qr[e[8]]+Qr[e[9]]+"-"+Qr[e[10]]+Qr[e[11]]+Qr[e[12]]+Qr[e[13]]+Qr[e[14]]+Qr[e[15]]}function Rg(e,t=10,o=0){e=e.toString();for(let r=0;r<e.length;r++)o+=e[r]*t,t--,t<2&&(t=9);return o=o%11,o=o<2?0:11-o,e+o}function A6(e){return Rg(Rg(e.substr(0,12),5),6)===e}function T6(e){return Rg(Rg(e.substr(0,9)),11)===e}function xre(e){return e?(e=e.toString().replace(/[^0-9]/g,""),e.length===11?T6(e):e.length===14?A6(e):!1):!1}async function Cre(e,t){let o=!0,r="";if(!e)return{valido:o,mensagem:r};if(e=e.replace(/[^0-9]/g,""),e.length===11?(o=T6(e),r="CPF inv\xE1lido"):e.length===14?(o=A6(e),r="CNPJ inv\xE1lido"):(o=!1,r="Digite um n\xFAmero de 11 ou 14 d\xEDgitos"),!o)return{valido:o,mensagem:r};const a=await et.contato.lePorNumeroDocumentoNacional(e);return o=!Object.keys(a).length||a.id===t,r=o?"":e.length===11?"Este CPF j\xE1 foi cadastrado":"Este CNPJ j\xE1 foi cadastrado",{valido:o,mensagem:r}}function wre(e,t){let o={};for(let r=0;r<e.length;r++){const a=$utils.removerCaracteresEspeciais(e[r]).split(" ");a[0]=a[0].toLowerCase();for(let n=1;n<a.length;n++)a[n]=a[n].toLowerCase().charAt(0).toUpperCase()+a[n].toLowerCase().slice(1);const i=a.join("");o[i]=t[r]||""}return o}async function pS(e){const{objectStore:t}=e!=null?e:{};let o,r;if(!("indexedDB"in window))throw new Error("Navegador sem suporte ao IndexedDB");if(o=localStorage.getItem("bancoDeDados"),!o)throw new Error("Banco de dados n\xE3o identificado");return r=indexedDB.open(`${o}_local`,1),r.onupgradeneeded=function(a){a.target.result.createObjectStore(t,{keyPath:"_id"}).createIndex("_id","_id",{unique:!0})},new Promise((a,i)=>{r.onsuccess=function(n){a()},r.onerror=function(n){a()}})}async function Ere(e){const{objectStore:t,id:o}=e!=null?e:{};let r,a,i,n;return r=new Promise((s,l)=>{i=s}),await pS({objectStore:t}),n=localStorage.getItem("bancoDeDados"),a=indexedDB.open(`${n}_local`,1),a.onsuccess=function(){a=a.result.transaction([t],"readwrite").objectStore(t).delete(o),a.onsuccess=function(u){i(u.target.result)},a.onerror=function(u){i()}},r}async function Sre(e){const{objectStore:t,data:o}=e!=null?e:{};let r,a,i,n;return r=new Promise((s,l)=>{i=s}),await pS({objectStore:t}),n=localStorage.getItem("bancoDeDados"),a=indexedDB.open(`${n}_local`,1),a.onsuccess=function(){a=a.result.transaction([t],"readwrite").objectStore(t).put(o),a.onsuccess=function(u){i()},a.onerror=function(u){i()}},r}async function Ire(e){const{objectStore:t,id:o}=e!=null?e:{};let r,a,i,n;return r=new Promise((s,l)=>{i=s}),await pS({objectStore:t}),n=localStorage.getItem("bancoDeDados"),a=indexedDB.open(`${n}_local`,1),a.onsuccess=function(){a=a.result.transaction([t],"readwrite").objectStore(t).get(o),a.onsuccess=function(u){i(u.target.result)},a.onerror=function(u){i()}},r}var D6={removeItem:Ere,getItem:Ire,setItem:Sre};const Are=function(e){var l;let o=e.toString().split("."),r=Number(o[0]),a=(l=o[1])!=null?l:"00",i=Number(a[1]),n=Number("0."+a.substr(0,2)),s=Number("0."+a.substr(2));return s>.5?n+=.01:s<.5||i%2===0?n+=0:n+=.01,r+n},O6=localStorage.getItem("dispositivoCliente"),Tre="wss://api.b15.com.br/websocket",yC={};let z0;async function Dre(e,t,o){await Ore();const r=$utils.uuid();let a,i,n=new Promise((s,l)=>{i=s});return z0.send(JSON.stringify({funcao:"msg",idMsg:r,idOrigem:O6,idDestino:e,msg:t,module:o})),a=setTimeout(i,30*1e3),yC[r]={resolve:i,timeoutId:a},n}async function Ore(){try{if(z0)return;await new Promise((e,t)=>{const o=new WebSocket(Tre),r=setTimeout(t,10*1e3);o.onopen=()=>{o.send(JSON.stringify({funcao:"login",idDispositivo:O6}))},o.onmessage=a=>{var n,s;const i=(s=JSON.parse((n=a.data)!=null?n:null))!=null?s:{};if(i.funcao==="login"&&(clearTimeout(r),z0=o,e()),i.funcao==="msg"){const l=yC[i.idMsg];clearTimeout(l.timeoutId),delete yC[i.idMsg],l.resolve(i.msg)}},o.onclose=()=>{z0=null},o.onerror=()=>{z0=null}})}catch(e){console.error(e)}}var Pre={enviarMensagem:Dre},hS={},eb={},fn={};Object.defineProperty(fn,"__esModule",{value:!0});function Fre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Mre=function e(t,o){Fre(this,e),this.data=t,this.text=o.text||t,this.options=o};fn.default=Mre;Object.defineProperty(eb,"__esModule",{value:!0});eb.CODE39=void 0;var Nre=function(){function e(t,o){for(var r=0;r<o.length;r++){var a=o[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),kre=fn,Rre=Vre(kre);function Vre(e){return e&&e.__esModule?e:{default:e}}function Bre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qre(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Lre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var $re=function(e){Lre(t,e);function t(o,r){return Bre(this,t),o=o.toUpperCase(),r.mod43&&(o+=Hre(jre(o))),qre(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o,r))}return Nre(t,[{key:"encode",value:function(){for(var r=Ay("*"),a=0;a<this.data.length;a++)r+=Ay(this.data[a])+"0";return r+=Ay("*"),{data:r,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),t}(Rre.default),P6=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],Ure=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function Ay(e){return zre(F6(e))}function zre(e){return Ure[e].toString(2)}function Hre(e){return P6[e]}function F6(e){return P6.indexOf(e)}function jre(e){for(var t=0,o=0;o<e.length;o++)t+=F6(e[o]);return t=t%43,t}eb.CODE39=$re;var al={},vS={},Hm={},La={};Object.defineProperty(La,"__esModule",{value:!0});var A0;function Ty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var M6=La.SET_A=0,N6=La.SET_B=1,k6=La.SET_C=2;La.SHIFT=98;var Gre=La.START_A=103,Wre=La.START_B=104,Qre=La.START_C=105;La.MODULO=103;La.STOP=106;La.FNC1=207;La.SET_BY_CODE=(A0={},Ty(A0,Gre,M6),Ty(A0,Wre,N6),Ty(A0,Qre,k6),A0);La.SWAP={101:M6,100:N6,99:k6};La.A_START_CHAR=String.fromCharCode(208);La.B_START_CHAR=String.fromCharCode(209);La.C_START_CHAR=String.fromCharCode(210);La.A_CHARS="[\0-_\xC8-\xCF]";La.B_CHARS="[ -\x7F\xC8-\xCF]";La.C_CHARS="(\xCF*[0-9]{2}\xCF*)";La.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011];Object.defineProperty(Hm,"__esModule",{value:!0});var Xre=function(){function e(t,o){for(var r=0;r<o.length;r++){var a=o[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),Kre=fn,Yre=Jre(Kre),xn=La;function Jre(e){return e&&e.__esModule?e:{default:e}}function Zre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eie(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function tie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var oie=function(e){tie(t,e);function t(o,r){Zre(this,t);var a=eie(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o.substring(1),r));return a.bytes=o.split("").map(function(i){return i.charCodeAt(0)}),a}return Xre(t,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var r=this.bytes,a=r.shift()-105,i=xn.SET_BY_CODE[a];if(i===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&r.unshift(xn.FNC1);var n=t.next(r,1,i);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:t.getBar(a)+n.result+t.getBar((n.checksum+a)%xn.MODULO)+t.getBar(xn.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var r=this.options.ean128||!1;return typeof r=="string"&&(r=r.toLowerCase()==="true"),r}}],[{key:"getBar",value:function(r){return xn.BARS[r]?xn.BARS[r].toString():""}},{key:"correctIndex",value:function(r,a){if(a===xn.SET_A){var i=r.shift();return i<32?i+64:i-32}else return a===xn.SET_B?r.shift()-32:(r.shift()-48)*10+r.shift()-48}},{key:"next",value:function(r,a,i){if(!r.length)return{result:"",checksum:0};var n=void 0,s=void 0;if(r[0]>=200){s=r.shift()-105;var l=xn.SWAP[s];l!==void 0?n=t.next(r,a+1,l):((i===xn.SET_A||i===xn.SET_B)&&s===xn.SHIFT&&(r[0]=i===xn.SET_A?r[0]>95?r[0]-96:r[0]:r[0]<32?r[0]+96:r[0]),n=t.next(r,a+1,i))}else s=t.correctIndex(r,i),n=t.next(r,a+1,i);var u=t.getBar(s),c=s*a;return{result:u+n.result,checksum:c+n.checksum}}}]),t}(Yre.default);Hm.default=oie;var gS={};Object.defineProperty(gS,"__esModule",{value:!0});var ru=La,R6=function(t){return t.match(new RegExp("^"+ru.A_CHARS+"*"))[0].length},V6=function(t){return t.match(new RegExp("^"+ru.B_CHARS+"*"))[0].length},B6=function(t){return t.match(new RegExp("^"+ru.C_CHARS+"*"))[0]};function _S(e,t){var o=t?ru.A_CHARS:ru.B_CHARS,r=e.match(new RegExp("^("+o+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(r)return r[1]+String.fromCharCode(204)+q6(e.substring(r[1].length));var a=e.match(new RegExp("^"+o+"+"))[0];return a.length===e.length?e:a+String.fromCharCode(t?205:206)+_S(e.substring(a.length),!t)}function q6(e){var t=B6(e),o=t.length;if(o===e.length)return e;e=e.substring(o);var r=R6(e)>=V6(e);return t+String.fromCharCode(r?206:205)+_S(e,r)}gS.default=function(e){var t=void 0,o=B6(e).length;if(o>=2)t=ru.C_START_CHAR+q6(e);else{var r=R6(e)>V6(e);t=(r?ru.A_START_CHAR:ru.B_START_CHAR)+_S(e,r)}return t.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(a,i){return String.fromCharCode(203)+i})};Object.defineProperty(vS,"__esModule",{value:!0});var aie=Hm,rie=L6(aie),iie=gS,nie=L6(iie);function L6(e){return e&&e.__esModule?e:{default:e}}function sie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dy(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function lie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var cie=function(e){lie(t,e);function t(o,r){if(sie(this,t),/^[\x00-\x7F\xC8-\xD3]+$/.test(o))var a=Dy(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,(0,nie.default)(o),r));else var a=Dy(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o,r));return Dy(a)}return t}(rie.default);vS.default=cie;var bS={};Object.defineProperty(bS,"__esModule",{value:!0});var uie=function(){function e(t,o){for(var r=0;r<o.length;r++){var a=o[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),die=Hm,fie=mie(die),H3=La;function mie(e){return e&&e.__esModule?e:{default:e}}function pie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hie(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function vie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var gie=function(e){vie(t,e);function t(o,r){return pie(this,t),hie(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,H3.A_START_CHAR+o,r))}return uie(t,[{key:"valid",value:function(){return new RegExp("^"+H3.A_CHARS+"+$").test(this.data)}}]),t}(fie.default);bS.default=gie;var yS={};Object.defineProperty(yS,"__esModule",{value:!0});var _ie=function(){function e(t,o){for(var r=0;r<o.length;r++){var a=o[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),bie=Hm,yie=xie(bie),j3=La;function xie(e){return e&&e.__esModule?e:{default:e}}function Cie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wie(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Eie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Sie=function(e){Eie(t,e);function t(o,r){return Cie(this,t),wie(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,j3.B_START_CHAR+o,r))}return _ie(t,[{key:"valid",value:function(){return new RegExp("^"+j3.B_CHARS+"+$").test(this.data)}}]),t}(yie.default);yS.default=Sie;var xS={};Object.defineProperty(xS,"__esModule",{value:!0});var Iie=function(){function e(t,o){for(var r=0;r<o.length;r++){var a=o[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),Aie=Hm,Tie=Die(Aie),G3=La;function Die(e){return e&&e.__esModule?e:{default:e}}function Oie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pie(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Fie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Mie=function(e){Fie(t,e);function t(o,r){return Oie(this,t),Pie(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,G3.C_START_CHAR+o,r))}return Iie(t,[{key:"valid",value:function(){return new RegExp("^"+G3.C_CHARS+"+$").test(this.data)}}]),t}(Tie.default);xS.default=Mie;Object.defineProperty(al,"__esModule",{value:!0});al.CODE128C=al.CODE128B=al.CODE128A=al.CODE128=void 0;var Nie=vS,kie=tb(Nie),Rie=bS,Vie=tb(Rie),Bie=yS,qie=tb(Bie),Lie=xS,$ie=tb(Lie);function tb(e){return e&&e.__esModule?e:{default:e}}al.CODE128=kie.default;al.CODE128A=Vie.default;al.CODE128B=qie.default;al.CODE128C=$ie.default;var tn={},CS={},fs={};Object.defineProperty(fs,"__esModule",{value:!0});fs.SIDE_BIN="101";fs.MIDDLE_BIN="01010";fs.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]};fs.EAN2_STRUCTURE=["LL","LG","GL","GG"];fs.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"];fs.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var ob={},Kd={};Object.defineProperty(Kd,"__esModule",{value:!0});var Uie=fs,zie=function(t,o,r){var a=t.split("").map(function(n,s){return Uie.BINARIES[o[s]]}).map(function(n,s){return n?n[t[s]]:""});if(r){var i=t.length-1;a=a.map(function(n,s){return s<i?n+r:n})}return a.join("")};Kd.default=zie;Object.defineProperty(ob,"__esModule",{value:!0});var Hie=function(){function e(t,o){for(var r=0;r<o.length;r++){var a=o[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),Tf=fs,jie=Kd,W3=$6(jie),Gie=fn,Wie=$6(Gie);function $6(e){return e&&e.__esModule?e:{default:e}}function Qie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xie(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Kie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Yie=function(e){Kie(t,e);function t(o,r){Qie(this,t);var a=Xie(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o,r));return a.fontSize=!r.flat&&r.fontSize>r.width*10?r.width*10:r.fontSize,a.guardHeight=r.height+a.fontSize/2+r.textMargin,a}return Hie(t,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(r,a){return this.text.substr(r,a)}},{key:"leftEncode",value:function(r,a){return(0,W3.default)(r,a)}},{key:"rightText",value:function(r,a){return this.text.substr(r,a)}},{key:"rightEncode",value:function(r,a){return(0,W3.default)(r,a)}},{key:"encodeGuarded",value:function(){var r={fontSize:this.fontSize},a={height:this.guardHeight};return[{data:Tf.SIDE_BIN,options:a},{data:this.leftEncode(),text:this.leftText(),options:r},{data:Tf.MIDDLE_BIN,options:a},{data:this.rightEncode(),text:this.rightText(),options:r},{data:Tf.SIDE_BIN,options:a}]}},{key:"encodeFlat",value:function(){var r=[Tf.SIDE_BIN,this.leftEncode(),Tf.MIDDLE_BIN,this.rightEncode(),Tf.SIDE_BIN];return{data:r.join(""),text:this.text}}}]),t}(Wie.default);ob.default=Yie;Object.defineProperty(CS,"__esModule",{value:!0});var Jie=function(){function e(t,o){for(var r=0;r<o.length;r++){var a=o[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),T0=function e(t,o,r){t===null&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(a===void 0){var i=Object.getPrototypeOf(t);return i===null?void 0:e(i,o,r)}else{if("value"in a)return a.value;var n=a.get;return n===void 0?void 0:n.call(r)}},Zie=fs,ene=ob,tne=one(ene);function one(e){return e&&e.__esModule?e:{default:e}}function ane(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rne(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function ine(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Q3=function(t){var o=t.substr(0,12).split("").map(function(r){return+r}).reduce(function(r,a,i){return i%2?r+a*3:r+a},0);return(10-o%10)%10},nne=function(e){ine(t,e);function t(o,r){ane(this,t),o.search(/^[0-9]{12}$/)!==-1&&(o+=Q3(o));var a=rne(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o,r));return a.lastChar=r.lastChar,a}return Jie(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===Q3(this.data)}},{key:"leftText",value:function(){return T0(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var r=this.data.substr(1,6),a=Zie.EAN13_STRUCTURE[this.data[0]];return T0(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftEncode",this).call(this,r,a)}},{key:"rightText",value:function(){return T0(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var r=this.data.substr(7,6);return T0(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightEncode",this).call(this,r,"RRRRRR")}},{key:"encodeGuarded",value:function(){var r=T0(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(r.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(r.push({data:"00"}),r.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),r}}]),t}(tne.default);CS.default=nne;var wS={};Object.defineProperty(wS,"__esModule",{value:!0});var sne=function(){function e(t,o){for(var r=0;r<o.length;r++){var a=o[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),nv=function e(t,o,r){t===null&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(a===void 0){var i=Object.getPrototypeOf(t);return i===null?void 0:e(i,o,r)}else{if("value"in a)return a.value;var n=a.get;return n===void 0?void 0:n.call(r)}},lne=ob,cne=une(lne);function une(e){return e&&e.__esModule?e:{default:e}}function dne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fne(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function mne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var X3=function(t){var o=t.substr(0,7).split("").map(function(r){return+r}).reduce(function(r,a,i){return i%2?r+a:r+a*3},0);return(10-o%10)%10},pne=function(e){mne(t,e);function t(o,r){return dne(this,t),o.search(/^[0-9]{7}$/)!==-1&&(o+=X3(o)),fne(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o,r))}return sne(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===X3(this.data)}},{key:"leftText",value:function(){return nv(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var r=this.data.substr(0,4);return nv(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftEncode",this).call(this,r,"LLLL")}},{key:"rightText",value:function(){return nv(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var r=this.data.substr(4,4);return nv(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightEncode",this).call(this,r,"RRRR")}}]),t}(cne.default);wS.default=pne;var ES={};Object.defineProperty(ES,"__esModule",{value:!0});var hne=function(){function e(t,o){for(var r=0;r<o.length;r++){var a=o[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),vne=fs,gne=Kd,_ne=U6(gne),bne=fn,yne=U6(bne);function U6(e){return e&&e.__esModule?e:{default:e}}function xne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cne(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function wne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ene=function(t){var o=t.split("").map(function(r){return+r}).reduce(function(r,a,i){return i%2?r+a*9:r+a*3},0);return o%10},Sne=function(e){wne(t,e);function t(o,r){return xne(this,t),Cne(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o,r))}return hne(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var r=vne.EAN5_STRUCTURE[Ene(this.data)];return{data:"1011"+(0,_ne.default)(this.data,r,"01"),text:this.text}}}]),t}(yne.default);ES.default=Sne;var SS={};Object.defineProperty(SS,"__esModule",{value:!0});var Ine=function(){function e(t,o){for(var r=0;r<o.length;r++){var a=o[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),Ane=fs,Tne=Kd,Dne=z6(Tne),One=fn,Pne=z6(One);function z6(e){return e&&e.__esModule?e:{default:e}}function Fne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mne(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Nne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var kne=function(e){Nne(t,e);function t(o,r){return Fne(this,t),Mne(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o,r))}return Ine(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var r=Ane.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,Dne.default)(this.data,r,"01"),text:this.text}}}]),t}(Pne.default);SS.default=kne;var Eh={};Object.defineProperty(Eh,"__esModule",{value:!0});var Rne=function(){function e(t,o){for(var r=0;r<o.length;r++){var a=o[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}();Eh.checksum=xC;var Vne=Kd,Df=H6(Vne),Bne=fn,qne=H6(Bne);function H6(e){return e&&e.__esModule?e:{default:e}}function Lne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $ne(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Une(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var zne=function(e){Une(t,e);function t(o,r){Lne(this,t),o.search(/^[0-9]{11}$/)!==-1&&(o+=xC(o));var a=$ne(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o,r));return a.displayValue=r.displayValue,r.fontSize>r.width*10?a.fontSize=r.width*10:a.fontSize=r.fontSize,a.guardHeight=r.height+a.fontSize/2+r.textMargin,a}return Rne(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==xC(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var r="";return r+="101",r+=(0,Df.default)(this.data.substr(0,6),"LLLLLL"),r+="01010",r+=(0,Df.default)(this.data.substr(6,6),"RRRRRR"),r+="101",{data:r,text:this.text}}},{key:"guardedEncoding",value:function(){var r=[];return this.displayValue&&r.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),r.push({data:"101"+(0,Df.default)(this.data[0],"L"),options:{height:this.guardHeight}}),r.push({data:(0,Df.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),r.push({data:"01010",options:{height:this.guardHeight}}),r.push({data:(0,Df.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),r.push({data:(0,Df.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&r.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),r}}]),t}(qne.default);function xC(e){var t=0,o;for(o=1;o<11;o+=2)t+=parseInt(e[o]);for(o=0;o<11;o+=2)t+=parseInt(e[o])*3;return(10-t%10)%10}Eh.default=zne;var IS={};Object.defineProperty(IS,"__esModule",{value:!0});var Hne=function(){function e(t,o){for(var r=0;r<o.length;r++){var a=o[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),jne=Kd,Gne=j6(jne),Wne=fn,Qne=j6(Wne),Xne=Eh;function j6(e){return e&&e.__esModule?e:{default:e}}function Kne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oy(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Yne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Jne=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],Zne=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],ese=function(e){Yne(t,e);function t(o,r){Kne(this,t);var a=Oy(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o,r));if(a.isValid=!1,o.search(/^[0-9]{6}$/)!==-1)a.middleDigits=o,a.upcA=K3(o,"0"),a.text=r.text||""+a.upcA[0]+o+a.upcA[a.upcA.length-1],a.isValid=!0;else if(o.search(/^[01][0-9]{7}$/)!==-1)if(a.middleDigits=o.substring(1,o.length-1),a.upcA=K3(a.middleDigits,o[0]),a.upcA[a.upcA.length-1]===o[o.length-1])a.isValid=!0;else return Oy(a);else return Oy(a);return a.displayValue=r.displayValue,r.fontSize>r.width*10?a.fontSize=r.width*10:a.fontSize=r.fontSize,a.guardHeight=r.height+a.fontSize/2+r.textMargin,a}return Hne(t,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var r="";return r+="101",r+=this.encodeMiddleDigits(),r+="010101",{data:r,text:this.text}}},{key:"guardedEncoding",value:function(){var r=[];return this.displayValue&&r.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),r.push({data:"101",options:{height:this.guardHeight}}),r.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),r.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&r.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),r}},{key:"encodeMiddleDigits",value:function(){var r=this.upcA[0],a=this.upcA[this.upcA.length-1],i=Zne[parseInt(a)][parseInt(r)];return(0,Gne.default)(this.middleDigits,i)}}]),t}(Qne.default);function K3(e,t){for(var o=parseInt(e[e.length-1]),r=Jne[o],a="",i=0,n=0;n<r.length;n++){var s=r[n];s==="X"?a+=e[i++]:a+=s}return a=""+t+a,""+a+(0,Xne.checksum)(a)}IS.default=ese;Object.defineProperty(tn,"__esModule",{value:!0});tn.UPCE=tn.UPC=tn.EAN2=tn.EAN5=tn.EAN8=tn.EAN13=void 0;var tse=CS,ose=jm(tse),ase=wS,rse=jm(ase),ise=ES,nse=jm(ise),sse=SS,lse=jm(sse),cse=Eh,use=jm(cse),dse=IS,fse=jm(dse);function jm(e){return e&&e.__esModule?e:{default:e}}tn.EAN13=ose.default;tn.EAN8=rse.default;tn.EAN5=nse.default;tn.EAN2=lse.default;tn.UPC=use.default;tn.UPCE=fse.default;var wm={},ab={},Sh={};Object.defineProperty(Sh,"__esModule",{value:!0});Sh.START_BIN="1010";Sh.END_BIN="11101";Sh.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"];Object.defineProperty(ab,"__esModule",{value:!0});var mse=function(){function e(t,o){for(var r=0;r<o.length;r++){var a=o[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),sv=Sh,pse=fn,hse=vse(pse);function vse(e){return e&&e.__esModule?e:{default:e}}function gse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _se(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function bse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var yse=function(e){bse(t,e);function t(){return gse(this,t),_se(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return mse(t,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var r=this,a=this.data.match(/.{2}/g).map(function(i){return r.encodePair(i)}).join("");return{data:sv.START_BIN+a+sv.END_BIN,text:this.text}}},{key:"encodePair",value:function(r){var a=sv.BINARIES[r[1]];return sv.BINARIES[r[0]].split("").map(function(i,n){return(i==="1"?"111":"1")+(a[n]==="1"?"000":"0")}).join("")}}]),t}(hse.default);ab.default=yse;var AS={};Object.defineProperty(AS,"__esModule",{value:!0});var xse=function(){function e(t,o){for(var r=0;r<o.length;r++){var a=o[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),Cse=ab,wse=Ese(Cse);function Ese(e){return e&&e.__esModule?e:{default:e}}function Sse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ise(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Ase(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Y3=function(t){var o=t.substr(0,13).split("").map(function(r){return parseInt(r,10)}).reduce(function(r,a,i){return r+a*(3-i%2*2)},0);return Math.ceil(o/10)*10-o},Tse=function(e){Ase(t,e);function t(o,r){return Sse(this,t),o.search(/^[0-9]{13}$/)!==-1&&(o+=Y3(o)),Ise(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o,r))}return xse(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===Y3(this.data)}}]),t}(wse.default);AS.default=Tse;Object.defineProperty(wm,"__esModule",{value:!0});wm.ITF14=wm.ITF=void 0;var Dse=ab,Ose=G6(Dse),Pse=AS,Fse=G6(Pse);function G6(e){return e&&e.__esModule?e:{default:e}}wm.ITF=Ose.default;wm.ITF14=Fse.default;var as={},Yd={};Object.defineProperty(Yd,"__esModule",{value:!0});var Mse=function(){function e(t,o){for(var r=0;r<o.length;r++){var a=o[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),Nse=fn,kse=Rse(Nse);function Rse(e){return e&&e.__esModule?e:{default:e}}function Vse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bse(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function qse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Lse=function(e){qse(t,e);function t(o,r){return Vse(this,t),Bse(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o,r))}return Mse(t,[{key:"encode",value:function(){for(var r="110",a=0;a<this.data.length;a++){var i=parseInt(this.data[a]),n=i.toString(2);n=$se(n,4-n.length);for(var s=0;s<n.length;s++)r+=n[s]=="0"?"100":"110"}return r+="1001",{data:r,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),t}(kse.default);function $se(e,t){for(var o=0;o<t;o++)e="0"+e;return e}Yd.default=Lse;var TS={},Jd={};Object.defineProperty(Jd,"__esModule",{value:!0});Jd.mod10=Use;Jd.mod11=zse;function Use(e){for(var t=0,o=0;o<e.length;o++){var r=parseInt(e[o]);(o+e.length)%2===0?t+=r:t+=r*2%10+Math.floor(r*2/10)}return(10-t%10)%10}function zse(e){for(var t=0,o=[2,3,4,5,6,7],r=0;r<e.length;r++){var a=parseInt(e[e.length-1-r]);t+=o[r%o.length]*a}return(11-t%11)%11}Object.defineProperty(TS,"__esModule",{value:!0});var Hse=Yd,jse=Wse(Hse),Gse=Jd;function Wse(e){return e&&e.__esModule?e:{default:e}}function Qse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xse(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Kse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Yse=function(e){Kse(t,e);function t(o,r){return Qse(this,t),Xse(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o+(0,Gse.mod10)(o),r))}return t}(jse.default);TS.default=Yse;var DS={};Object.defineProperty(DS,"__esModule",{value:!0});var Jse=Yd,Zse=tle(Jse),ele=Jd;function tle(e){return e&&e.__esModule?e:{default:e}}function ole(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ale(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function rle(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ile=function(e){rle(t,e);function t(o,r){return ole(this,t),ale(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o+(0,ele.mod11)(o),r))}return t}(Zse.default);DS.default=ile;var OS={};Object.defineProperty(OS,"__esModule",{value:!0});var nle=Yd,sle=lle(nle),J3=Jd;function lle(e){return e&&e.__esModule?e:{default:e}}function cle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ule(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function dle(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var fle=function(e){dle(t,e);function t(o,r){return cle(this,t),o+=(0,J3.mod10)(o),o+=(0,J3.mod10)(o),ule(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o,r))}return t}(sle.default);OS.default=fle;var PS={};Object.defineProperty(PS,"__esModule",{value:!0});var mle=Yd,ple=hle(mle),Z3=Jd;function hle(e){return e&&e.__esModule?e:{default:e}}function vle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gle(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function _le(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ble=function(e){_le(t,e);function t(o,r){return vle(this,t),o+=(0,Z3.mod11)(o),o+=(0,Z3.mod10)(o),gle(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o,r))}return t}(ple.default);PS.default=ble;Object.defineProperty(as,"__esModule",{value:!0});as.MSI1110=as.MSI1010=as.MSI11=as.MSI10=as.MSI=void 0;var yle=Yd,xle=Ih(yle),Cle=TS,wle=Ih(Cle),Ele=DS,Sle=Ih(Ele),Ile=OS,Ale=Ih(Ile),Tle=PS,Dle=Ih(Tle);function Ih(e){return e&&e.__esModule?e:{default:e}}as.MSI=xle.default;as.MSI10=wle.default;as.MSI11=Sle.default;as.MSI1010=Ale.default;as.MSI1110=Dle.default;var rb={};Object.defineProperty(rb,"__esModule",{value:!0});rb.pharmacode=void 0;var Ole=function(){function e(t,o){for(var r=0;r<o.length;r++){var a=o[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),Ple=fn,Fle=Mle(Ple);function Mle(e){return e&&e.__esModule?e:{default:e}}function Nle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kle(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Rle(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Vle=function(e){Rle(t,e);function t(o,r){Nle(this,t);var a=kle(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o,r));return a.number=parseInt(o,10),a}return Ole(t,[{key:"encode",value:function(){for(var r=this.number,a="";!isNaN(r)&&r!=0;)r%2===0?(a="11100"+a,r=(r-2)/2):(a="100"+a,r=(r-1)/2);return a=a.slice(0,-2),{data:a,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),t}(Fle.default);rb.pharmacode=Vle;var ib={};Object.defineProperty(ib,"__esModule",{value:!0});ib.codabar=void 0;var Ble=function(){function e(t,o){for(var r=0;r<o.length;r++){var a=o[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),qle=fn,Lle=$le(qle);function $le(e){return e&&e.__esModule?e:{default:e}}function Ule(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zle(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Hle(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var jle=function(e){Hle(t,e);function t(o,r){Ule(this,t),o.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(o="A"+o+"A");var a=zle(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o.toUpperCase(),r));return a.text=a.options.text||a.text.replace(/[A-D]/g,""),a}return Ble(t,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var r=[],a=this.getEncodings(),i=0;i<this.data.length;i++)r.push(a[this.data.charAt(i)]),i!==this.data.length-1&&r.push("0");return{text:this.text,data:r.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),t}(Lle.default);ib.codabar=jle;var nb={};Object.defineProperty(nb,"__esModule",{value:!0});nb.GenericBarcode=void 0;var Gle=function(){function e(t,o){for(var r=0;r<o.length;r++){var a=o[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),Wle=fn,Qle=Xle(Wle);function Xle(e){return e&&e.__esModule?e:{default:e}}function Kle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yle(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Jle(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Zle=function(e){Jle(t,e);function t(o,r){return Kle(this,t),Yle(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o,r))}return Gle(t,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),t}(Qle.default);nb.GenericBarcode=Zle;Object.defineProperty(hS,"__esModule",{value:!0});var ece=eb,lv=al,Of=tn,eO=wm,D0=as,tce=rb,oce=ib,ace=nb;hS.default={CODE39:ece.CODE39,CODE128:lv.CODE128,CODE128A:lv.CODE128A,CODE128B:lv.CODE128B,CODE128C:lv.CODE128C,EAN13:Of.EAN13,EAN8:Of.EAN8,EAN5:Of.EAN5,EAN2:Of.EAN2,UPC:Of.UPC,UPCE:Of.UPCE,ITF14:eO.ITF14,ITF:eO.ITF,MSI:D0.MSI,MSI10:D0.MSI10,MSI11:D0.MSI11,MSI1010:D0.MSI1010,MSI1110:D0.MSI1110,pharmacode:tce.pharmacode,codabar:oce.codabar,GenericBarcode:ace.GenericBarcode};var Gm={};Object.defineProperty(Gm,"__esModule",{value:!0});var rce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e};Gm.default=function(e,t){return rce({},e,t)};var FS={};Object.defineProperty(FS,"__esModule",{value:!0});FS.default=ice;function ice(e){var t=[];function o(r){if(Array.isArray(r))for(var a=0;a<r.length;a++)o(r[a]);else r.text=r.text||"",r.data=r.data||"",t.push(r)}return o(e),t}var MS={};Object.defineProperty(MS,"__esModule",{value:!0});MS.default=nce;function nce(e){return e.marginTop=e.marginTop||e.margin,e.marginBottom=e.marginBottom||e.margin,e.marginRight=e.marginRight||e.margin,e.marginLeft=e.marginLeft||e.margin,e}var NS={},kS={},sb={};Object.defineProperty(sb,"__esModule",{value:!0});sb.default=sce;function sce(e){var t=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var o in t)t.hasOwnProperty(o)&&(o=t[o],typeof e[o]=="string"&&(e[o]=parseInt(e[o],10)));return typeof e.displayValue=="string"&&(e.displayValue=e.displayValue!="false"),e}var lb={};Object.defineProperty(lb,"__esModule",{value:!0});var lce={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};lb.default=lce;Object.defineProperty(kS,"__esModule",{value:!0});var cce=sb,uce=W6(cce),dce=lb,tO=W6(dce);function W6(e){return e&&e.__esModule?e:{default:e}}function fce(e){var t={};for(var o in tO.default)tO.default.hasOwnProperty(o)&&(e.hasAttribute("jsbarcode-"+o.toLowerCase())&&(t[o]=e.getAttribute("jsbarcode-"+o.toLowerCase())),e.hasAttribute("data-"+o.toLowerCase())&&(t[o]=e.getAttribute("data-"+o.toLowerCase())));return t.value=e.getAttribute("jsbarcode-value")||e.getAttribute("data-value"),t=(0,uce.default)(t),t}kS.default=fce;var RS={},VS={},On={};Object.defineProperty(On,"__esModule",{value:!0});On.getTotalWidthOfEncodings=On.calculateEncodingAttributes=On.getBarcodePadding=On.getEncodingHeight=On.getMaximumHeightOfEncodings=void 0;var mce=Gm,pce=hce(mce);function hce(e){return e&&e.__esModule?e:{default:e}}function Q6(e,t){return t.height+(t.displayValue&&e.text.length>0?t.fontSize+t.textMargin:0)+t.marginTop+t.marginBottom}function X6(e,t,o){if(o.displayValue&&t<e){if(o.textAlign=="center")return Math.floor((e-t)/2);if(o.textAlign=="left")return 0;if(o.textAlign=="right")return Math.floor(e-t)}return 0}function vce(e,t,o){for(var r=0;r<e.length;r++){var a=e[r],i=(0,pce.default)(t,a.options),n;i.displayValue?n=bce(a.text,i,o):n=0;var s=a.data.length*i.width;a.width=Math.ceil(Math.max(n,s)),a.height=Q6(a,i),a.barcodePadding=X6(n,s,i)}}function gce(e){for(var t=0,o=0;o<e.length;o++)t+=e[o].width;return t}function _ce(e){for(var t=0,o=0;o<e.length;o++)e[o].height>t&&(t=e[o].height);return t}function bce(e,t,o){var r;if(o)r=o;else if(typeof document!="undefined")r=document.createElement("canvas").getContext("2d");else return 0;r.font=t.fontOptions+" "+t.fontSize+"px "+t.font;var a=r.measureText(e);if(!a)return 0;var i=a.width;return i}On.getMaximumHeightOfEncodings=_ce;On.getEncodingHeight=Q6;On.getBarcodePadding=X6;On.calculateEncodingAttributes=vce;On.getTotalWidthOfEncodings=gce;Object.defineProperty(VS,"__esModule",{value:!0});var yce=function(){function e(t,o){for(var r=0;r<o.length;r++){var a=o[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),xce=Gm,Cce=wce(xce),Py=On;function wce(e){return e&&e.__esModule?e:{default:e}}function Ece(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Sce=function(){function e(t,o,r){Ece(this,e),this.canvas=t,this.encodings=o,this.options=r}return yce(e,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var o=0;o<this.encodings.length;o++){var r=(0,Cce.default)(this.options,this.encodings[o].options);this.drawCanvasBarcode(r,this.encodings[o]),this.drawCanvasText(r,this.encodings[o]),this.moveCanvasDrawing(this.encodings[o])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var o=this.canvas.getContext("2d");o.save(),(0,Py.calculateEncodingAttributes)(this.encodings,this.options,o);var r=(0,Py.getTotalWidthOfEncodings)(this.encodings),a=(0,Py.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=r+this.options.marginLeft+this.options.marginRight,this.canvas.height=a,o.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(o.fillStyle=this.options.background,o.fillRect(0,0,this.canvas.width,this.canvas.height)),o.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(o,r){var a=this.canvas.getContext("2d"),i=r.data,n;o.textPosition=="top"?n=o.marginTop+o.fontSize+o.textMargin:n=o.marginTop,a.fillStyle=o.lineColor;for(var s=0;s<i.length;s++){var l=s*o.width+r.barcodePadding;i[s]==="1"?a.fillRect(l,n,o.width,o.height):i[s]&&a.fillRect(l,n,o.width,o.height*i[s])}}},{key:"drawCanvasText",value:function(o,r){var a=this.canvas.getContext("2d"),i=o.fontOptions+" "+o.fontSize+"px "+o.font;if(o.displayValue){var n,s;o.textPosition=="top"?s=o.marginTop+o.fontSize-o.textMargin:s=o.height+o.textMargin+o.marginTop+o.fontSize,a.font=i,o.textAlign=="left"||r.barcodePadding>0?(n=0,a.textAlign="left"):o.textAlign=="right"?(n=r.width-1,a.textAlign="right"):(n=r.width/2,a.textAlign="center"),a.fillText(r.text,n,s)}}},{key:"moveCanvasDrawing",value:function(o){var r=this.canvas.getContext("2d");r.translate(o.width,0)}},{key:"restoreCanvas",value:function(){var o=this.canvas.getContext("2d");o.restore()}}]),e}();VS.default=Sce;var BS={};Object.defineProperty(BS,"__esModule",{value:!0});var Ice=function(){function e(t,o){for(var r=0;r<o.length;r++){var a=o[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),Ace=Gm,Tce=Dce(Ace),Fy=On;function Dce(e){return e&&e.__esModule?e:{default:e}}function Oce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var cv="http://www.w3.org/2000/svg",Pce=function(){function e(t,o,r){Oce(this,e),this.svg=t,this.encodings=o,this.options=r,this.document=r.xmlDocument||document}return Ice(e,[{key:"render",value:function(){var o=this.options.marginLeft;this.prepareSVG();for(var r=0;r<this.encodings.length;r++){var a=this.encodings[r],i=(0,Tce.default)(this.options,a.options),n=this.createGroup(o,i.marginTop,this.svg);this.setGroupOptions(n,i),this.drawSvgBarcode(n,i,a),this.drawSVGText(n,i,a),o+=a.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,Fy.calculateEncodingAttributes)(this.encodings,this.options);var o=(0,Fy.getTotalWidthOfEncodings)(this.encodings),r=(0,Fy.getMaximumHeightOfEncodings)(this.encodings),a=o+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(a,r),this.options.background&&this.drawRect(0,0,a,r,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(o,r,a){var i=a.data,n;r.textPosition=="top"?n=r.fontSize+r.textMargin:n=0;for(var s=0,l=0,u=0;u<i.length;u++)l=u*r.width+a.barcodePadding,i[u]==="1"?s++:s>0&&(this.drawRect(l-r.width*s,n,r.width*s,r.height,o),s=0);s>0&&this.drawRect(l-r.width*(s-1),n,r.width*s,r.height,o)}},{key:"drawSVGText",value:function(o,r,a){var i=this.document.createElementNS(cv,"text");if(r.displayValue){var n,s;i.setAttribute("style","font:"+r.fontOptions+" "+r.fontSize+"px "+r.font),r.textPosition=="top"?s=r.fontSize-r.textMargin:s=r.height+r.textMargin+r.fontSize,r.textAlign=="left"||a.barcodePadding>0?(n=0,i.setAttribute("text-anchor","start")):r.textAlign=="right"?(n=a.width-1,i.setAttribute("text-anchor","end")):(n=a.width/2,i.setAttribute("text-anchor","middle")),i.setAttribute("x",n),i.setAttribute("y",s),i.appendChild(this.document.createTextNode(a.text)),o.appendChild(i)}}},{key:"setSvgAttributes",value:function(o,r){var a=this.svg;a.setAttribute("width",o+"px"),a.setAttribute("height",r+"px"),a.setAttribute("x","0px"),a.setAttribute("y","0px"),a.setAttribute("viewBox","0 0 "+o+" "+r),a.setAttribute("xmlns",cv),a.setAttribute("version","1.1"),a.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(o,r,a){var i=this.document.createElementNS(cv,"g");return i.setAttribute("transform","translate("+o+", "+r+")"),a.appendChild(i),i}},{key:"setGroupOptions",value:function(o,r){o.setAttribute("style","fill:"+r.lineColor+";")}},{key:"drawRect",value:function(o,r,a,i,n){var s=this.document.createElementNS(cv,"rect");return s.setAttribute("x",o),s.setAttribute("y",r),s.setAttribute("width",a),s.setAttribute("height",i),n.appendChild(s),s}}]),e}();BS.default=Pce;var qS={};Object.defineProperty(qS,"__esModule",{value:!0});var Fce=function(){function e(t,o){for(var r=0;r<o.length;r++){var a=o[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}();function Mce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Nce=function(){function e(t,o,r){Mce(this,e),this.object=t,this.encodings=o,this.options=r}return Fce(e,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),e}();qS.default=Nce;Object.defineProperty(RS,"__esModule",{value:!0});var kce=VS,Rce=LS(kce),Vce=BS,Bce=LS(Vce),qce=qS,Lce=LS(qce);function LS(e){return e&&e.__esModule?e:{default:e}}RS.default={CanvasRenderer:Rce.default,SVGRenderer:Bce.default,ObjectRenderer:Lce.default};var Wm={};Object.defineProperty(Wm,"__esModule",{value:!0});function $S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function US(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function zS(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var $ce=function(e){zS(t,e);function t(o,r){$S(this,t);var a=US(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.name="InvalidInputException",a.symbology=o,a.input=r,a.message='"'+a.input+'" is not a valid input for '+a.symbology,a}return t}(Error),Uce=function(e){zS(t,e);function t(){$S(this,t);var o=US(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.name="InvalidElementException",o.message="Not supported type to render on",o}return t}(Error),zce=function(e){zS(t,e);function t(){$S(this,t);var o=US(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.name="NoElementException",o.message="No element to render on.",o}return t}(Error);Wm.InvalidInputException=$ce;Wm.InvalidElementException=Uce;Wm.NoElementException=zce;Object.defineProperty(NS,"__esModule",{value:!0});var Hce=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jce=kS,CC=K6(jce),Gce=RS,H0=K6(Gce),Wce=Wm;function K6(e){return e&&e.__esModule?e:{default:e}}function HS(e){if(typeof e=="string")return Qce(e);if(Array.isArray(e)){for(var t=[],o=0;o<e.length;o++)t.push(HS(e[o]));return t}else{if(typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLImageElement)return Xce(e);if(e&&e.nodeName&&e.nodeName.toLowerCase()==="svg"||typeof SVGElement!="undefined"&&e instanceof SVGElement)return{element:e,options:(0,CC.default)(e),renderer:H0.default.SVGRenderer};if(typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement)return{element:e,options:(0,CC.default)(e),renderer:H0.default.CanvasRenderer};if(e&&e.getContext)return{element:e,renderer:H0.default.CanvasRenderer};if(e&&(typeof e=="undefined"?"undefined":Hce(e))==="object"&&!e.nodeName)return{element:e,renderer:H0.default.ObjectRenderer};throw new Wce.InvalidElementException}}function Qce(e){var t=document.querySelectorAll(e);if(t.length!==0){for(var o=[],r=0;r<t.length;r++)o.push(HS(t[r]));return o}}function Xce(e){var t=document.createElement("canvas");return{element:t,options:(0,CC.default)(e),renderer:H0.default.CanvasRenderer,afterRender:function(){e.setAttribute("src",t.toDataURL())}}}NS.default=HS;var jS={};Object.defineProperty(jS,"__esModule",{value:!0});var Kce=function(){function e(t,o){for(var r=0;r<o.length;r++){var a=o[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}();function Yce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Jce=function(){function e(t){Yce(this,e),this.api=t}return Kce(e,[{key:"handleCatch",value:function(o){if(o.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw o.message;else throw o;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(o){try{var r=o.apply(void 0,arguments);return this.api._options.valid(!0),r}catch(a){return this.handleCatch(a),this.api}}}]),e}();jS.default=Jce;var Zce=hS,yd=wu(Zce),eue=Gm,Ah=wu(eue),tue=FS,Y6=wu(tue),oue=MS,oO=wu(oue),aue=NS,rue=wu(aue),iue=sb,nue=wu(iue),sue=jS,lue=wu(sue),J6=Wm,cue=lb,Z6=wu(cue);function wu(e){return e&&e.__esModule?e:{default:e}}var Kl=function(){},cb=function(t,o,r){var a=new Kl;if(typeof t=="undefined")throw Error("No element to render on was provided.");return a._renderProperties=(0,rue.default)(t),a._encodings=[],a._options=Z6.default,a._errorHandler=new lue.default(a),typeof o!="undefined"&&(r=r||{},r.format||(r.format=tN()),a.options(r)[r.format](o,r).render()),a};cb.getModule=function(e){return yd.default[e]};for(var aO in yd.default)yd.default.hasOwnProperty(aO)&&uue(yd.default,aO);function uue(e,t){Kl.prototype[t]=Kl.prototype[t.toUpperCase()]=Kl.prototype[t.toLowerCase()]=function(o,r){var a=this;return a._errorHandler.wrapBarcodeCall(function(){r.text=typeof r.text=="undefined"?void 0:""+r.text;var i=(0,Ah.default)(a._options,r);i=(0,nue.default)(i);var n=e[t],s=eN(o,n,i);return a._encodings.push(s),a})}}function eN(e,t,o){e=""+e;var r=new t(e,o);if(!r.valid())throw new J6.InvalidInputException(r.constructor.name,e);var a=r.encode();a=(0,Y6.default)(a);for(var i=0;i<a.length;i++)a[i].options=(0,Ah.default)(o,a[i].options);return a}function tN(){return yd.default.CODE128?"CODE128":Object.keys(yd.default)[0]}Kl.prototype.options=function(e){return this._options=(0,Ah.default)(this._options,e),this};Kl.prototype.blank=function(e){var t=new Array(e+1).join("0");return this._encodings.push({data:t}),this};Kl.prototype.init=function(){if(!!this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var e;for(var t in this._renderProperties){e=this._renderProperties[t];var o=(0,Ah.default)(this._options,e.options);o.format=="auto"&&(o.format=tN()),this._errorHandler.wrapBarcodeCall(function(){var r=o.value,a=yd.default[o.format.toUpperCase()],i=eN(r,a,o);wC(e,i,o)})}}};Kl.prototype.render=function(){if(!this._renderProperties)throw new J6.NoElementException;if(Array.isArray(this._renderProperties))for(var e=0;e<this._renderProperties.length;e++)wC(this._renderProperties[e],this._encodings,this._options);else wC(this._renderProperties,this._encodings,this._options);return this};Kl.prototype._defaults=Z6.default;function wC(e,t,o){t=(0,Y6.default)(t);for(var r=0;r<t.length;r++)t[r].options=(0,Ah.default)(o,t[r].options),(0,oO.default)(t[r].options);(0,oO.default)(o);var a=e.renderer,i=new a(e.element,t,o);i.render(),e.afterRender&&e.afterRender()}typeof window!="undefined"&&(window.JsBarcode=cb);typeof jQuery!="undefined"&&(jQuery.fn.JsBarcode=function(e,t){var o=[];return jQuery(this).each(function(){o.push(this)}),cb(o,e,t)});var oN=cb;function due(e,t){var o=Object.setPrototypeOf;o?o(e,t):e.__proto__=t}function fue(e,t){t===void 0&&(t=e.constructor);var o=Error.captureStackTrace;o&&o(e,t)}var mue=function(){var e=function(o,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(a[n]=i[n])},e(o,r)};return function(t,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),pue=function(e){mue(t,e);function t(o,r){var a=this.constructor,i=e.call(this,o,r)||this;return Object.defineProperty(i,"name",{value:a.name,enumerable:!1,configurable:!0}),due(i,a.prototype),fue(i),i}return t}(Error),hue=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),mn=function(e){hue(t,e);function t(o){o===void 0&&(o=void 0);var r=e.call(this,o)||this;return r.message=o,r}return t.prototype.getKind=function(){var o=this.constructor;return o.kind},t.kind="Exception",t}(pue),vue=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),xs=function(e){vue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.kind="ArgumentException",t}(mn),gue=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),so=function(e){gue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.kind="IllegalArgumentException",t}(mn),_ue=function(){function e(t){if(this.binarizer=t,t===null)throw new so("Binarizer must be non-null.")}return e.prototype.getWidth=function(){return this.binarizer.getWidth()},e.prototype.getHeight=function(){return this.binarizer.getHeight()},e.prototype.getBlackRow=function(t,o){return this.binarizer.getBlackRow(t,o)},e.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},e.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},e.prototype.crop=function(t,o,r,a){var i=this.binarizer.getLuminanceSource().crop(t,o,r,a);return new e(this.binarizer.createBinarizer(i))},e.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},e.prototype.rotateCounterClockwise=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new e(this.binarizer.createBinarizer(t))},e.prototype.rotateCounterClockwise45=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new e(this.binarizer.createBinarizer(t))},e.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},e}(),bue=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),ti=function(e){bue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.getChecksumInstance=function(){return new t},t.kind="ChecksumException",t}(mn),yue=function(){function e(t){this.source=t}return e.prototype.getLuminanceSource=function(){return this.source},e.prototype.getWidth=function(){return this.source.getWidth()},e.prototype.getHeight=function(){return this.source.getHeight()},e}(),Ta=function(){function e(){}return e.arraycopy=function(t,o,r,a,i){for(;i--;)r[a++]=t[o++]},e.currentTimeMillis=function(){return Date.now()},e}(),xue=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),GS=function(e){xue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.kind="IndexOutOfBoundsException",t}(mn),Cue=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),rO=function(e){Cue(t,e);function t(o,r){o===void 0&&(o=void 0),r===void 0&&(r=void 0);var a=e.call(this,r)||this;return a.index=o,a.message=r,a}return t.kind="ArrayIndexOutOfBoundsException",t}(GS),wue=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},un=function(){function e(){}return e.fill=function(t,o){for(var r=0,a=t.length;r<a;r++)t[r]=o},e.fillWithin=function(t,o,r,a){e.rangeCheck(t.length,o,r);for(var i=o;i<r;i++)t[i]=a},e.rangeCheck=function(t,o,r){if(o>r)throw new so("fromIndex("+o+") > toIndex("+r+")");if(o<0)throw new rO(o);if(r>t)throw new rO(r)},e.asList=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return t},e.create=function(t,o,r){var a=Array.from({length:t});return a.map(function(i){return Array.from({length:o}).fill(r)})},e.createInt32Array=function(t,o,r){var a=Array.from({length:t});return a.map(function(i){return Int32Array.from({length:o}).fill(r)})},e.equals=function(t,o){if(!t||!o||!t.length||!o.length||t.length!==o.length)return!1;for(var r=0,a=t.length;r<a;r++)if(t[r]!==o[r])return!1;return!0},e.hashCode=function(t){var o,r;if(t===null)return 0;var a=1;try{for(var i=wue(t),n=i.next();!n.done;n=i.next()){var s=n.value;a=31*a+s}}catch(l){o={error:l}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},e.fillUint8Array=function(t,o){for(var r=0;r!==t.length;r++)t[r]=o},e.copyOf=function(t,o){return t.slice(0,o)},e.copyOfUint8Array=function(t,o){if(t.length<=o){var r=new Uint8Array(o);return r.set(t),r}return t.slice(0,o)},e.copyOfRange=function(t,o,r){var a=r-o,i=new Int32Array(a);return Ta.arraycopy(t,o,i,0,a),i},e.binarySearch=function(t,o,r){r===void 0&&(r=e.numberComparator);for(var a=0,i=t.length-1;a<=i;){var n=i+a>>1,s=r(o,t[n]);if(s>0)a=n+1;else if(s<0)i=n-1;else return n}return-a-1},e.numberComparator=function(t,o){return t-o},e}(),oi=function(){function e(){}return e.numberOfTrailingZeros=function(t){var o;if(t===0)return 32;var r=31;return o=t<<16,o!==0&&(r-=16,t=o),o=t<<8,o!==0&&(r-=8,t=o),o=t<<4,o!==0&&(r-=4,t=o),o=t<<2,o!==0&&(r-=2,t=o),r-(t<<1>>>31)},e.numberOfLeadingZeros=function(t){if(t===0)return 32;var o=1;return t>>>16===0&&(o+=16,t<<=16),t>>>24===0&&(o+=8,t<<=8),t>>>28===0&&(o+=4,t<<=4),t>>>30===0&&(o+=2,t<<=2),o-=t>>>31,o},e.toHexString=function(t){return t.toString(16)},e.toBinaryString=function(t){return String(parseInt(String(t),2))},e.bitCount=function(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63},e.truncDivision=function(t,o){return Math.trunc(t/o)},e.parseInt=function(t,o){return o===void 0&&(o=void 0),parseInt(t,o)},e.MIN_VALUE_32_BITS=-2147483648,e.MAX_VALUE=Number.MAX_SAFE_INTEGER,e}(),rn=function(){function e(t,o){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,o==null?this.bits=e.makeArray(t):this.bits=o)}return e.prototype.getSize=function(){return this.size},e.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},e.prototype.ensureCapacity=function(t){if(t>this.bits.length*32){var o=e.makeArray(t);Ta.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}},e.prototype.get=function(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0},e.prototype.set=function(t){this.bits[Math.floor(t/32)]|=1<<(t&31)},e.prototype.flip=function(t){this.bits[Math.floor(t/32)]^=1<<(t&31)},e.prototype.getNextSet=function(t){var o=this.size;if(t>=o)return o;var r=this.bits,a=Math.floor(t/32),i=r[a];i&=~((1<<(t&31))-1);for(var n=r.length;i===0;){if(++a===n)return o;i=r[a]}var s=a*32+oi.numberOfTrailingZeros(i);return s>o?o:s},e.prototype.getNextUnset=function(t){var o=this.size;if(t>=o)return o;var r=this.bits,a=Math.floor(t/32),i=~r[a];i&=~((1<<(t&31))-1);for(var n=r.length;i===0;){if(++a===n)return o;i=~r[a]}var s=a*32+oi.numberOfTrailingZeros(i);return s>o?o:s},e.prototype.setBulk=function(t,o){this.bits[Math.floor(t/32)]=o},e.prototype.setRange=function(t,o){if(o<t||t<0||o>this.size)throw new so;if(o!==t){o--;for(var r=Math.floor(t/32),a=Math.floor(o/32),i=this.bits,n=r;n<=a;n++){var s=n>r?0:t&31,l=n<a?31:o&31,u=(2<<l)-(1<<s);i[n]|=u}}},e.prototype.clear=function(){for(var t=this.bits.length,o=this.bits,r=0;r<t;r++)o[r]=0},e.prototype.isRange=function(t,o,r){if(o<t||t<0||o>this.size)throw new so;if(o===t)return!0;o--;for(var a=Math.floor(t/32),i=Math.floor(o/32),n=this.bits,s=a;s<=i;s++){var l=s>a?0:t&31,u=s<i?31:o&31,c=(2<<u)-(1<<l)&4294967295;if((n[s]&c)!==(r?c:0))return!1}return!0},e.prototype.appendBit=function(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},e.prototype.appendBits=function(t,o){if(o<0||o>32)throw new so("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(var r=o;r>0;r--)this.appendBit((t>>r-1&1)===1)},e.prototype.appendBitArray=function(t){var o=t.size;this.ensureCapacity(this.size+o);for(var r=0;r<o;r++)this.appendBit(t.get(r))},e.prototype.xor=function(t){if(this.size!==t.size)throw new so("Sizes don't match");for(var o=this.bits,r=0,a=o.length;r<a;r++)o[r]^=t.bits[r]},e.prototype.toBytes=function(t,o,r,a){for(var i=0;i<a;i++){for(var n=0,s=0;s<8;s++)this.get(t)&&(n|=1<<7-s),t++;o[r+i]=n}},e.prototype.getBitArray=function(){return this.bits},e.prototype.reverse=function(){for(var t=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),r=o+1,a=this.bits,i=0;i<r;i++){var n=a[i];n=n>>1&1431655765|(n&1431655765)<<1,n=n>>2&858993459|(n&858993459)<<2,n=n>>4&252645135|(n&252645135)<<4,n=n>>8&16711935|(n&16711935)<<8,n=n>>16&65535|(n&65535)<<16,t[o-i]=n}if(this.size!==r*32){for(var s=r*32-this.size,l=t[0]>>>s,i=1;i<r;i++){var u=t[i];l|=u<<32-s,t[i-1]=l,l=u>>>s}t[r-1]=l}this.bits=t},e.makeArray=function(t){return new Int32Array(Math.floor((t+31)/32))},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var o=t;return this.size===o.size&&un.equals(this.bits,o.bits)},e.prototype.hashCode=function(){return 31*this.size+un.hashCode(this.bits)},e.prototype.toString=function(){for(var t="",o=0,r=this.size;o<r;o++)(o&7)===0&&(t+=" "),t+=this.get(o)?"X":".";return t},e.prototype.clone=function(){return new e(this.size,this.bits.slice())},e}(),EC;(function(e){e[e.OTHER=0]="OTHER",e[e.PURE_BARCODE=1]="PURE_BARCODE",e[e.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",e[e.TRY_HARDER=3]="TRY_HARDER",e[e.CHARACTER_SET=4]="CHARACTER_SET",e[e.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",e[e.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",e[e.ASSUME_GS1=7]="ASSUME_GS1",e[e.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",e[e.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",e[e.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(EC||(EC={}));var Ya=EC,Eue=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),yt=function(e){Eue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.getFormatInstance=function(){return new t},t.kind="FormatException",t}(mn),Sue=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},da;(function(e){e[e.Cp437=0]="Cp437",e[e.ISO8859_1=1]="ISO8859_1",e[e.ISO8859_2=2]="ISO8859_2",e[e.ISO8859_3=3]="ISO8859_3",e[e.ISO8859_4=4]="ISO8859_4",e[e.ISO8859_5=5]="ISO8859_5",e[e.ISO8859_6=6]="ISO8859_6",e[e.ISO8859_7=7]="ISO8859_7",e[e.ISO8859_8=8]="ISO8859_8",e[e.ISO8859_9=9]="ISO8859_9",e[e.ISO8859_10=10]="ISO8859_10",e[e.ISO8859_11=11]="ISO8859_11",e[e.ISO8859_13=12]="ISO8859_13",e[e.ISO8859_14=13]="ISO8859_14",e[e.ISO8859_15=14]="ISO8859_15",e[e.ISO8859_16=15]="ISO8859_16",e[e.SJIS=16]="SJIS",e[e.Cp1250=17]="Cp1250",e[e.Cp1251=18]="Cp1251",e[e.Cp1252=19]="Cp1252",e[e.Cp1256=20]="Cp1256",e[e.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",e[e.UTF8=22]="UTF8",e[e.ASCII=23]="ASCII",e[e.Big5=24]="Big5",e[e.GB18030=25]="GB18030",e[e.EUC_KR=26]="EUC_KR"})(da||(da={}));var Ar=function(){function e(t,o,r){for(var a,i,n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];this.valueIdentifier=t,this.name=r,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=n,e.VALUE_IDENTIFIER_TO_ECI.set(t,this),e.NAME_TO_ECI.set(r,this);for(var l=this.values,u=0,c=l.length;u!==c;u++){var d=l[u];e.VALUES_TO_ECI.set(d,this)}try{for(var f=Sue(n),m=f.next();!m.done;m=f.next()){var p=m.value;e.NAME_TO_ECI.set(p,this)}}catch(v){a={error:v}}finally{try{m&&!m.done&&(i=f.return)&&i.call(f)}finally{if(a)throw a.error}}}return e.prototype.getValueIdentifier=function(){return this.valueIdentifier},e.prototype.getName=function(){return this.name},e.prototype.getValue=function(){return this.values[0]},e.getCharacterSetECIByValue=function(t){if(t<0||t>=900)throw new yt("incorect value");var o=e.VALUES_TO_ECI.get(t);if(o===void 0)throw new yt("incorect value");return o},e.getCharacterSetECIByName=function(t){var o=e.NAME_TO_ECI.get(t);if(o===void 0)throw new yt("incorect value");return o},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var o=t;return this.getName()===o.getName()},e.VALUE_IDENTIFIER_TO_ECI=new Map,e.VALUES_TO_ECI=new Map,e.NAME_TO_ECI=new Map,e.Cp437=new e(da.Cp437,Int32Array.from([0,2]),"Cp437"),e.ISO8859_1=new e(da.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),e.ISO8859_2=new e(da.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),e.ISO8859_3=new e(da.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),e.ISO8859_4=new e(da.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),e.ISO8859_5=new e(da.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),e.ISO8859_6=new e(da.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),e.ISO8859_7=new e(da.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),e.ISO8859_8=new e(da.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),e.ISO8859_9=new e(da.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),e.ISO8859_10=new e(da.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),e.ISO8859_11=new e(da.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),e.ISO8859_13=new e(da.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),e.ISO8859_14=new e(da.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),e.ISO8859_15=new e(da.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),e.ISO8859_16=new e(da.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),e.SJIS=new e(da.SJIS,20,"SJIS","Shift_JIS"),e.Cp1250=new e(da.Cp1250,21,"Cp1250","windows-1250"),e.Cp1251=new e(da.Cp1251,22,"Cp1251","windows-1251"),e.Cp1252=new e(da.Cp1252,23,"Cp1252","windows-1252"),e.Cp1256=new e(da.Cp1256,24,"Cp1256","windows-1256"),e.UnicodeBigUnmarked=new e(da.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),e.UTF8=new e(da.UTF8,26,"UTF8","UTF-8"),e.ASCII=new e(da.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),e.Big5=new e(da.Big5,28,"Big5"),e.GB18030=new e(da.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),e.EUC_KR=new e(da.EUC_KR,30,"EUC_KR","EUC-KR"),e}(),Iue=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),jv=function(e){Iue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.kind="UnsupportedOperationException",t}(mn),il=function(){function e(){}return e.decode=function(t,o){var r=this.encodingName(o);return this.customDecoder?this.customDecoder(t,r):typeof TextDecoder=="undefined"||this.shouldDecodeOnFallback(r)?this.decodeFallback(t,r):new TextDecoder(r).decode(t)},e.shouldDecodeOnFallback=function(t){return!e.isBrowser()&&t==="ISO-8859-1"},e.encode=function(t,o){var r=this.encodingName(o);return this.customEncoder?this.customEncoder(t,r):typeof TextEncoder=="undefined"?this.encodeFallback(t):new TextEncoder().encode(t)},e.isBrowser=function(){return typeof window!="undefined"&&{}.toString.call(window)==="[object Window]"},e.encodingName=function(t){return typeof t=="string"?t:t.getName()},e.encodingCharacterSet=function(t){return t instanceof Ar?t:Ar.getCharacterSetECIByName(t)},e.decodeFallback=function(t,o){var r=this.encodingCharacterSet(o);if(e.isDecodeFallbackSupported(r)){for(var a="",i=0,n=t.length;i<n;i++){var s=t[i].toString(16);s.length<2&&(s="0"+s),a+="%"+s}return decodeURIComponent(a)}if(r.equals(Ar.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new jv("Encoding "+this.encodingName(o)+" not supported by fallback.")},e.isDecodeFallbackSupported=function(t){return t.equals(Ar.UTF8)||t.equals(Ar.ISO8859_1)||t.equals(Ar.ASCII)},e.encodeFallback=function(t){for(var o=btoa(unescape(encodeURIComponent(t))),r=o.split(""),a=[],i=0;i<r.length;i++)a.push(r[i].charCodeAt(0));return new Uint8Array(a)},e}(),Ur=function(){function e(){}return e.castAsNonUtf8Char=function(t,o){o===void 0&&(o=null);var r=o?o.getName():this.ISO88591;return il.decode(new Uint8Array([t]),r)},e.guessEncoding=function(t,o){if(o!=null&&o.get(Ya.CHARACTER_SET)!==void 0)return o.get(Ya.CHARACTER_SET).toString();for(var r=t.length,a=!0,i=!0,n=!0,s=0,l=0,u=0,c=0,d=0,f=0,m=0,p=0,v=0,g=0,x=0,b=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191,_=0;_<r&&(a||i||n);_++){var w=t[_]&255;n&&(s>0?(w&128)===0?n=!1:s--:(w&128)!==0&&((w&64)===0?n=!1:(s++,(w&32)===0?l++:(s++,(w&16)===0?u++:(s++,(w&8)===0?c++:n=!1))))),a&&(w>127&&w<160?a=!1:w>159&&(w<192||w===215||w===247)&&x++),i&&(d>0?w<64||w===127||w>252?i=!1:d--:w===128||w===160||w>239?i=!1:w>160&&w<224?(f++,p=0,m++,m>v&&(v=m)):w>127?(d++,m=0,p++,p>g&&(g=p)):(m=0,p=0))}return n&&s>0&&(n=!1),i&&d>0&&(i=!1),n&&(b||l+u+c>0)?e.UTF8:i&&(e.ASSUME_SHIFT_JIS||v>=3||g>=3)?e.SHIFT_JIS:a&&i?v===2&&f===2||x*10>=r?e.SHIFT_JIS:e.ISO88591:a?e.ISO88591:i?e.SHIFT_JIS:n?e.UTF8:e.PLATFORM_DEFAULT_ENCODING},e.format=function(t){for(var o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];var a=-1;function i(s,l,u,c,d,f){if(s==="%%")return"%";if(o[++a]!==void 0){s=c?parseInt(c.substr(1)):void 0;var m=d?parseInt(d.substr(1)):void 0,p;switch(f){case"s":p=o[a];break;case"c":p=o[a][0];break;case"f":p=parseFloat(o[a]).toFixed(s);break;case"p":p=parseFloat(o[a]).toPrecision(s);break;case"e":p=parseFloat(o[a]).toExponential(s);break;case"x":p=parseInt(o[a]).toString(m||16);break;case"d":p=parseFloat(parseInt(o[a],m||10).toPrecision(s)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(m);for(var v=parseInt(u),g=u&&u[0]+""=="0"?"0":" ";p.length<v;)p=l!==void 0?p+g:g+p;return p}}var n=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(n,i)},e.getBytes=function(t,o){return il.encode(t,o)},e.getCharCode=function(t,o){return o===void 0&&(o=0),t.charCodeAt(o)},e.getCharAt=function(t){return String.fromCharCode(t)},e.SHIFT_JIS=Ar.SJIS.getName(),e.GB2312="GB2312",e.ISO88591=Ar.ISO8859_1.getName(),e.EUC_JP="EUC_JP",e.UTF8=Ar.UTF8.getName(),e.PLATFORM_DEFAULT_ENCODING=e.UTF8,e.ASSUME_SHIFT_JIS=!1,e}(),ga=function(){function e(t){t===void 0&&(t=""),this.value=t}return e.prototype.enableDecoding=function(t){return this.encoding=t,this},e.prototype.append=function(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=Ur.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this},e.prototype.appendChars=function(t,o,r){for(var a=o;o<o+r;a++)this.append(t[a]);return this},e.prototype.length=function(){return this.value.length},e.prototype.charAt=function(t){return this.value.charAt(t)},e.prototype.deleteCharAt=function(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)},e.prototype.setCharAt=function(t,o){this.value=this.value.substr(0,t)+o+this.value.substr(t+1)},e.prototype.substring=function(t,o){return this.value.substring(t,o)},e.prototype.setLengthToZero=function(){this.value=""},e.prototype.toString=function(){return this.value},e.prototype.insert=function(t,o){this.value=this.value.substr(0,t)+o+this.value.substr(t+o.length)},e}(),oc=function(){function e(t,o,r,a){if(this.width=t,this.height=o,this.rowSize=r,this.bits=a,o==null&&(o=t),this.height=o,t<1||o<1)throw new so("Both dimensions must be greater than 0");r==null&&(r=Math.floor((t+31)/32)),this.rowSize=r,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return e.parseFromBooleanArray=function(t){for(var o=t.length,r=t[0].length,a=new e(r,o),i=0;i<o;i++)for(var n=t[i],s=0;s<r;s++)n[s]&&a.set(s,i);return a},e.parseFromString=function(t,o,r){if(t===null)throw new so("stringRepresentation cannot be null");for(var a=new Array(t.length),i=0,n=0,s=-1,l=0,u=0;u<t.length;)if(t.charAt(u)===`
`||t.charAt(u)==="\r"){if(i>n){if(s===-1)s=i-n;else if(i-n!==s)throw new so("row lengths do not match");n=i,l++}u++}else if(t.substring(u,u+o.length)===o)u+=o.length,a[i]=!0,i++;else if(t.substring(u,u+r.length)===r)u+=r.length,a[i]=!1,i++;else throw new so("illegal character encountered: "+t.substring(u));if(i>n){if(s===-1)s=i-n;else if(i-n!==s)throw new so("row lengths do not match");l++}for(var c=new e(s,l),d=0;d<i;d++)a[d]&&c.set(Math.floor(d%s),Math.floor(d/s));return c},e.prototype.get=function(t,o){var r=o*this.rowSize+Math.floor(t/32);return(this.bits[r]>>>(t&31)&1)!==0},e.prototype.set=function(t,o){var r=o*this.rowSize+Math.floor(t/32);this.bits[r]|=1<<(t&31)&4294967295},e.prototype.unset=function(t,o){var r=o*this.rowSize+Math.floor(t/32);this.bits[r]&=~(1<<(t&31)&4294967295)},e.prototype.flip=function(t,o){var r=o*this.rowSize+Math.floor(t/32);this.bits[r]^=1<<(t&31)&4294967295},e.prototype.xor=function(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new so("input matrix dimensions do not match");for(var o=new rn(Math.floor(this.width/32)+1),r=this.rowSize,a=this.bits,i=0,n=this.height;i<n;i++)for(var s=i*r,l=t.getRow(i,o).getBitArray(),u=0;u<r;u++)a[s+u]^=l[u]},e.prototype.clear=function(){for(var t=this.bits,o=t.length,r=0;r<o;r++)t[r]=0},e.prototype.setRegion=function(t,o,r,a){if(o<0||t<0)throw new so("Left and top must be nonnegative");if(a<1||r<1)throw new so("Height and width must be at least 1");var i=t+r,n=o+a;if(n>this.height||i>this.width)throw new so("The region must fit inside the matrix");for(var s=this.rowSize,l=this.bits,u=o;u<n;u++)for(var c=u*s,d=t;d<i;d++)l[c+Math.floor(d/32)]|=1<<(d&31)&4294967295},e.prototype.getRow=function(t,o){o==null||o.getSize()<this.width?o=new rn(this.width):o.clear();for(var r=this.rowSize,a=this.bits,i=t*r,n=0;n<r;n++)o.setBulk(n*32,a[i+n]);return o},e.prototype.setRow=function(t,o){Ta.arraycopy(o.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)},e.prototype.rotate180=function(){for(var t=this.getWidth(),o=this.getHeight(),r=new rn(t),a=new rn(t),i=0,n=Math.floor((o+1)/2);i<n;i++)r=this.getRow(i,r),a=this.getRow(o-1-i,a),r.reverse(),a.reverse(),this.setRow(i,a),this.setRow(o-1-i,r)},e.prototype.getEnclosingRectangle=function(){for(var t=this.width,o=this.height,r=this.rowSize,a=this.bits,i=t,n=o,s=-1,l=-1,u=0;u<o;u++)for(var c=0;c<r;c++){var d=a[u*r+c];if(d!==0){if(u<n&&(n=u),u>l&&(l=u),c*32<i){for(var f=0;(d<<31-f&4294967295)===0;)f++;c*32+f<i&&(i=c*32+f)}if(c*32+31>s){for(var f=31;d>>>f===0;)f--;c*32+f>s&&(s=c*32+f)}}}return s<i||l<n?null:Int32Array.from([i,n,s-i+1,l-n+1])},e.prototype.getTopLeftOnBit=function(){for(var t=this.rowSize,o=this.bits,r=0;r<o.length&&o[r]===0;)r++;if(r===o.length)return null;for(var a=r/t,i=r%t*32,n=o[r],s=0;(n<<31-s&4294967295)===0;)s++;return i+=s,Int32Array.from([i,a])},e.prototype.getBottomRightOnBit=function(){for(var t=this.rowSize,o=this.bits,r=o.length-1;r>=0&&o[r]===0;)r--;if(r<0)return null;for(var a=Math.floor(r/t),i=Math.floor(r%t)*32,n=o[r],s=31;n>>>s===0;)s--;return i+=s,Int32Array.from([i,a])},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.getRowSize=function(){return this.rowSize},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var o=t;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&un.equals(this.bits,o.bits)},e.prototype.hashCode=function(){var t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+un.hashCode(this.bits),t},e.prototype.toString=function(t,o,r){return t===void 0&&(t="X "),o===void 0&&(o="  "),r===void 0&&(r=`
`),this.buildToString(t,o,r)},e.prototype.buildToString=function(t,o,r){for(var a=new ga,i=0,n=this.height;i<n;i++){for(var s=0,l=this.width;s<l;s++)a.append(this.get(s,i)?t:o);a.append(r)}return a.toString()},e.prototype.clone=function(){return new e(this.width,this.height,this.rowSize,this.bits.slice())},e}(),Aue=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),at=function(e){Aue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.getNotFoundInstance=function(){return new t},t.kind="NotFoundException",t}(mn),Tue=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),Due=function(e){Tue(t,e);function t(o){var r=e.call(this,o)||this;return r.luminances=t.EMPTY,r.buckets=new Int32Array(t.LUMINANCE_BUCKETS),r}return t.prototype.getBlackRow=function(o,r){var a=this.getLuminanceSource(),i=a.getWidth();r==null||r.getSize()<i?r=new rn(i):r.clear(),this.initArrays(i);for(var n=a.getRow(o,this.luminances),s=this.buckets,l=0;l<i;l++)s[(n[l]&255)>>t.LUMINANCE_SHIFT]++;var u=t.estimateBlackPoint(s);if(i<3)for(var l=0;l<i;l++)(n[l]&255)<u&&r.set(l);else for(var c=n[0]&255,d=n[1]&255,l=1;l<i-1;l++){var f=n[l+1]&255;(d*4-c-f)/2<u&&r.set(l),c=d,d=f}return r},t.prototype.getBlackMatrix=function(){var o=this.getLuminanceSource(),r=o.getWidth(),a=o.getHeight(),i=new oc(r,a);this.initArrays(r);for(var n=this.buckets,s=1;s<5;s++)for(var l=Math.floor(a*s/5),u=o.getRow(l,this.luminances),c=Math.floor(r*4/5),d=Math.floor(r/5);d<c;d++){var f=u[d]&255;n[f>>t.LUMINANCE_SHIFT]++}for(var m=t.estimateBlackPoint(n),p=o.getMatrix(),s=0;s<a;s++)for(var v=s*r,d=0;d<r;d++){var f=p[v+d]&255;f<m&&i.set(d,s)}return i},t.prototype.createBinarizer=function(o){return new t(o)},t.prototype.initArrays=function(o){this.luminances.length<o&&(this.luminances=new Uint8ClampedArray(o));for(var r=this.buckets,a=0;a<t.LUMINANCE_BUCKETS;a++)r[a]=0},t.estimateBlackPoint=function(o){for(var r=o.length,a=0,i=0,n=0,s=0;s<r;s++)o[s]>n&&(i=s,n=o[s]),o[s]>a&&(a=o[s]);for(var l=0,u=0,s=0;s<r;s++){var c=s-i,d=o[s]*c*c;d>u&&(l=s,u=d)}if(i>l){var f=i;i=l,l=f}if(l-i<=r/16)throw new at;for(var m=l-1,p=-1,s=l-1;s>i;s--){var v=s-i,d=v*v*(l-s)*(a-o[s]);d>p&&(m=s,p=d)}return m<<t.LUMINANCE_SHIFT},t.LUMINANCE_BITS=5,t.LUMINANCE_SHIFT=8-t.LUMINANCE_BITS,t.LUMINANCE_BUCKETS=1<<t.LUMINANCE_BITS,t.EMPTY=Uint8ClampedArray.from([0]),t}(yue),Oue=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),Pue=function(e){Oue(t,e);function t(o){var r=e.call(this,o)||this;return r.matrix=null,r}return t.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var o=this.getLuminanceSource(),r=o.getWidth(),a=o.getHeight();if(r>=t.MINIMUM_DIMENSION&&a>=t.MINIMUM_DIMENSION){var i=o.getMatrix(),n=r>>t.BLOCK_SIZE_POWER;(r&t.BLOCK_SIZE_MASK)!==0&&n++;var s=a>>t.BLOCK_SIZE_POWER;(a&t.BLOCK_SIZE_MASK)!==0&&s++;var l=t.calculateBlackPoints(i,n,s,r,a),u=new oc(r,a);t.calculateThresholdForBlock(i,n,s,r,a,l,u),this.matrix=u}else this.matrix=e.prototype.getBlackMatrix.call(this);return this.matrix},t.prototype.createBinarizer=function(o){return new t(o)},t.calculateThresholdForBlock=function(o,r,a,i,n,s,l){for(var u=n-t.BLOCK_SIZE,c=i-t.BLOCK_SIZE,d=0;d<a;d++){var f=d<<t.BLOCK_SIZE_POWER;f>u&&(f=u);for(var m=t.cap(d,2,a-3),p=0;p<r;p++){var v=p<<t.BLOCK_SIZE_POWER;v>c&&(v=c);for(var g=t.cap(p,2,r-3),x=0,b=-2;b<=2;b++){var _=s[m+b];x+=_[g-2]+_[g-1]+_[g]+_[g+1]+_[g+2]}var w=x/25;t.thresholdBlock(o,v,f,w,i,l)}}},t.cap=function(o,r,a){return o<r?r:o>a?a:o},t.thresholdBlock=function(o,r,a,i,n,s){for(var l=0,u=a*n+r;l<t.BLOCK_SIZE;l++,u+=n)for(var c=0;c<t.BLOCK_SIZE;c++)(o[u+c]&255)<=i&&s.set(r+c,a+l)},t.calculateBlackPoints=function(o,r,a,i,n){for(var s=n-t.BLOCK_SIZE,l=i-t.BLOCK_SIZE,u=new Array(a),c=0;c<a;c++){u[c]=new Int32Array(r);var d=c<<t.BLOCK_SIZE_POWER;d>s&&(d=s);for(var f=0;f<r;f++){var m=f<<t.BLOCK_SIZE_POWER;m>l&&(m=l);for(var p=0,v=255,g=0,x=0,b=d*i+m;x<t.BLOCK_SIZE;x++,b+=i){for(var _=0;_<t.BLOCK_SIZE;_++){var w=o[b+_]&255;p+=w,w<v&&(v=w),w>g&&(g=w)}if(g-v>t.MIN_DYNAMIC_RANGE)for(x++,b+=i;x<t.BLOCK_SIZE;x++,b+=i)for(var _=0;_<t.BLOCK_SIZE;_++)p+=o[b+_]&255}var S=p>>t.BLOCK_SIZE_POWER*2;if(g-v<=t.MIN_DYNAMIC_RANGE&&(S=v/2,c>0&&f>0)){var D=(u[c-1][f]+2*u[c][f-1]+u[c-1][f-1])/4;v<D&&(S=D)}u[c][f]=S}}return u},t.BLOCK_SIZE_POWER=3,t.BLOCK_SIZE=1<<t.BLOCK_SIZE_POWER,t.BLOCK_SIZE_MASK=t.BLOCK_SIZE-1,t.MINIMUM_DIMENSION=t.BLOCK_SIZE*5,t.MIN_DYNAMIC_RANGE=24,t}(Due),ub=function(){function e(t,o){this.width=t,this.height=o}return e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.isCropSupported=function(){return!1},e.prototype.crop=function(t,o,r,a){throw new jv("This luminance source does not support cropping.")},e.prototype.isRotateSupported=function(){return!1},e.prototype.rotateCounterClockwise=function(){throw new jv("This luminance source does not support rotation by 90 degrees.")},e.prototype.rotateCounterClockwise45=function(){throw new jv("This luminance source does not support rotation by 45 degrees.")},e.prototype.toString=function(){for(var t=new Uint8ClampedArray(this.width),o=new ga,r=0;r<this.height;r++){for(var a=this.getRow(r,t),i=0;i<this.width;i++){var n=a[i]&255,s=void 0;n<64?s="#":n<128?s="+":n<192?s=".":s=" ",o.append(s)}o.append(`
`)}return o.toString()},e}(),Fue=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),WS=function(e){Fue(t,e);function t(o){var r=e.call(this,o.getWidth(),o.getHeight())||this;return r.delegate=o,r}return t.prototype.getRow=function(o,r){for(var a=this.delegate.getRow(o,r),i=this.getWidth(),n=0;n<i;n++)a[n]=255-(a[n]&255);return a},t.prototype.getMatrix=function(){for(var o=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(r),i=0;i<r;i++)a[i]=255-(o[i]&255);return a},t.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},t.prototype.crop=function(o,r,a,i){return new t(this.delegate.crop(o,r,a,i))},t.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},t.prototype.invert=function(){return this.delegate},t.prototype.rotateCounterClockwise=function(){return new t(this.delegate.rotateCounterClockwise())},t.prototype.rotateCounterClockwise45=function(){return new t(this.delegate.rotateCounterClockwise45())},t}(ub),Mue=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),Nue=function(e){Mue(t,e);function t(o){var r=e.call(this,o.width,o.height)||this;return r.canvas=o,r.tempCanvasElement=null,r.buffer=t.makeBufferFromCanvasImageData(o),r}return t.makeBufferFromCanvasImageData=function(o){var r=o.getContext("2d").getImageData(0,0,o.width,o.height);return t.toGrayscaleBuffer(r.data,o.width,o.height)},t.toGrayscaleBuffer=function(o,r,a){for(var i=new Uint8ClampedArray(r*a),n=0,s=0,l=o.length;n<l;n+=4,s++){var u=void 0,c=o[n+3];if(c===0)u=255;else{var d=o[n],f=o[n+1],m=o[n+2];u=306*d+601*f+117*m+512>>10}i[s]=u}return i},t.prototype.getRow=function(o,r){if(o<0||o>=this.getHeight())throw new so("Requested row is outside the image: "+o);var a=this.getWidth(),i=o*a;return r===null?r=this.buffer.slice(i,i+a):(r.length<a&&(r=new Uint8ClampedArray(a)),r.set(this.buffer.slice(i,i+a))),r},t.prototype.getMatrix=function(){return this.buffer},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(o,r,a,i){return e.prototype.crop.call(this,o,r,a,i),this},t.prototype.isRotateSupported=function(){return!0},t.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},t.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},t.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var o=this.canvas.ownerDocument.createElement("canvas");o.width=this.canvas.width,o.height=this.canvas.height,this.tempCanvasElement=o}return this.tempCanvasElement},t.prototype.rotate=function(o){var r=this.getTempCanvasElement(),a=r.getContext("2d"),i=o*t.DEGREE_TO_RADIANS,n=this.canvas.width,s=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(i))*n+Math.abs(Math.sin(i))*s),u=Math.ceil(Math.abs(Math.sin(i))*n+Math.abs(Math.cos(i))*s);return r.width=l,r.height=u,a.translate(l/2,u/2),a.rotate(i),a.drawImage(this.canvas,n/-2,s/-2),this.buffer=t.makeBufferFromCanvasImageData(r),this},t.prototype.invert=function(){return new WS(this)},t.DEGREE_TO_RADIANS=Math.PI/180,t}(ub),kue=function(){function e(t,o,r){this.deviceId=t,this.label=o,this.kind="videoinput",this.groupId=r||void 0}return e.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},e}(),Ai=globalThis&&globalThis.__awaiter||function(e,t,o,r){function a(i){return i instanceof o?i:new o(function(n){n(i)})}return new(o||(o=Promise))(function(i,n){function s(c){try{u(r.next(c))}catch(d){n(d)}}function l(c){try{u(r.throw(c))}catch(d){n(d)}}function u(c){c.done?i(c.value):a(c.value).then(s,l)}u((r=r.apply(e,t||[])).next())})},Ti=globalThis&&globalThis.__generator||function(e,t){var o={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,n;return n={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(n[Symbol.iterator]=function(){return this}),n;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,a=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){o=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(u[0]===6&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(c){u=[6,c],a=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Rue=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Qm=function(){function e(t,o,r){o===void 0&&(o=500),this.reader=t,this.timeBetweenScansMillis=o,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(e.prototype,"hasNavigator",{get:function(){return typeof navigator!="undefined"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(t){this._timeBetweenDecodingAttempts=t<0?0:t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hints",{get:function(){return this._hints},set:function(t){this._hints=t||null},enumerable:!1,configurable:!0}),e.prototype.listVideoInputDevices=function(){return Ai(this,void 0,void 0,function(){var t,o,r,a,i,n,s,l,u,c,d,f;return Ti(this,function(m){switch(m.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:t=m.sent(),o=[];try{for(r=Rue(t),a=r.next();!a.done;a=r.next())i=a.value,n=i.kind==="video"?"videoinput":i.kind,n==="videoinput"&&(s=i.deviceId||i.id,l=i.label||"Video device "+(o.length+1),u=i.groupId,c={deviceId:s,label:l,kind:n,groupId:u},o.push(c))}catch(p){d={error:p}}finally{try{a&&!a.done&&(f=r.return)&&f.call(r)}finally{if(d)throw d.error}}return[2,o]}})})},e.prototype.getVideoInputDevices=function(){return Ai(this,void 0,void 0,function(){var t;return Ti(this,function(o){switch(o.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=o.sent(),[2,t.map(function(r){return new kue(r.deviceId,r.label)})]}})})},e.prototype.findDeviceById=function(t){return Ai(this,void 0,void 0,function(){var o;return Ti(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return o=r.sent(),o?[2,o.find(function(a){return a.deviceId===t})]:[2,null]}})})},e.prototype.decodeFromInputVideoDevice=function(t,o){return Ai(this,void 0,void 0,function(){return Ti(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(t,o)];case 1:return[2,r.sent()]}})})},e.prototype.decodeOnceFromVideoDevice=function(t,o){return Ai(this,void 0,void 0,function(){var r,a;return Ti(this,function(i){switch(i.label){case 0:return this.reset(),t?r={deviceId:{exact:t}}:r={facingMode:"environment"},a={video:r},[4,this.decodeOnceFromConstraints(a,o)];case 1:return[2,i.sent()]}})})},e.prototype.decodeOnceFromConstraints=function(t,o){return Ai(this,void 0,void 0,function(){var r;return Ti(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=a.sent(),[4,this.decodeOnceFromStream(r,o)];case 2:return[2,a.sent()]}})})},e.prototype.decodeOnceFromStream=function(t,o){return Ai(this,void 0,void 0,function(){var r,a;return Ti(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,o)];case 1:return r=i.sent(),[4,this.decodeOnce(r)];case 2:return a=i.sent(),[2,a]}})})},e.prototype.decodeFromInputVideoDeviceContinuously=function(t,o,r){return Ai(this,void 0,void 0,function(){return Ti(this,function(a){switch(a.label){case 0:return[4,this.decodeFromVideoDevice(t,o,r)];case 1:return[2,a.sent()]}})})},e.prototype.decodeFromVideoDevice=function(t,o,r){return Ai(this,void 0,void 0,function(){var a,i;return Ti(this,function(n){switch(n.label){case 0:return t?a={deviceId:{exact:t}}:a={facingMode:"environment"},i={video:a},[4,this.decodeFromConstraints(i,o,r)];case 1:return[2,n.sent()]}})})},e.prototype.decodeFromConstraints=function(t,o,r){return Ai(this,void 0,void 0,function(){var a;return Ti(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return a=i.sent(),[4,this.decodeFromStream(a,o,r)];case 2:return[2,i.sent()]}})})},e.prototype.decodeFromStream=function(t,o,r){return Ai(this,void 0,void 0,function(){var a;return Ti(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,o)];case 1:return a=i.sent(),[4,this.decodeContinuously(a,r)];case 2:return[2,i.sent()]}})})},e.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},e.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},e.prototype.attachStreamToVideo=function(t,o){return Ai(this,void 0,void 0,function(){var r;return Ti(this,function(a){switch(a.label){case 0:return r=this.prepareVideoElement(o),this.addVideoSource(r,t),this.videoElement=r,this.stream=t,[4,this.playVideoOnLoadAsync(r)];case 1:return a.sent(),[2,r]}})})},e.prototype.playVideoOnLoadAsync=function(t){var o=this;return new Promise(function(r,a){return o.playVideoOnLoad(t,function(){return r()})})},e.prototype.playVideoOnLoad=function(t,o){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(t)},t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",o),this.tryPlayVideo(t)},e.prototype.isVideoPlaying=function(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2},e.prototype.tryPlayVideo=function(t){return Ai(this,void 0,void 0,function(){return Ti(this,function(o){switch(o.label){case 0:if(this.isVideoPlaying(t))return console.warn("Trying to play video that is already playing."),[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,t.play()];case 2:return o.sent(),[3,4];case 3:return o.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},e.prototype.getMediaElement=function(t,o){var r=document.getElementById(t);if(!r)throw new xs("element with id '"+t+"' not found");if(r.nodeName.toLowerCase()!==o.toLowerCase())throw new xs("element with id '"+t+"' must be an "+o+" element");return r},e.prototype.decodeFromImage=function(t,o){if(!t&&!o)throw new xs("either imageElement with a src set or an url must be provided");return o&&!t?this.decodeFromImageUrl(o):this.decodeFromImageElement(t)},e.prototype.decodeFromVideo=function(t,o){if(!t&&!o)throw new xs("Either an element with a src set or an URL must be provided");return o&&!t?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(t)},e.prototype.decodeFromVideoContinuously=function(t,o,r){if(t===void 0&&o===void 0)throw new xs("Either an element with a src set or an URL must be provided");return o&&!t?this.decodeFromVideoUrlContinuously(o,r):this.decodeFromVideoElementContinuously(t,r)},e.prototype.decodeFromImageElement=function(t){if(!t)throw new xs("An image element must be provided.");this.reset();var o=this.prepareImageElement(t);this.imageElement=o;var r;return this.isImageLoaded(o)?r=this.decodeOnce(o,!1,!0):r=this._decodeOnLoadImage(o),r},e.prototype.decodeFromVideoElement=function(t){var o=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(o)},e.prototype.decodeFromVideoElementContinuously=function(t,o){var r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(r,o)},e.prototype._decodeFromVideoElementSetup=function(t){if(!t)throw new xs("A video element must be provided.");this.reset();var o=this.prepareVideoElement(t);return this.videoElement=o,o},e.prototype.decodeFromImageUrl=function(t){if(!t)throw new xs("An URL must be provided.");this.reset();var o=this.prepareImageElement();this.imageElement=o;var r=this._decodeOnLoadImage(o);return o.src=t,r},e.prototype.decodeFromVideoUrl=function(t){if(!t)throw new xs("An URL must be provided.");this.reset();var o=this.prepareVideoElement(),r=this.decodeFromVideoElement(o);return o.src=t,r},e.prototype.decodeFromVideoUrlContinuously=function(t,o){if(!t)throw new xs("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(r,o);return r.src=t,a},e.prototype._decodeOnLoadImage=function(t){var o=this;return new Promise(function(r,a){o.imageLoadedListener=function(){return o.decodeOnce(t,!1,!0).then(r,a)},t.addEventListener("load",o.imageLoadedListener)})},e.prototype._decodeOnLoadVideo=function(t){return Ai(this,void 0,void 0,function(){return Ti(this,function(o){switch(o.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return o.sent(),[4,this.decodeOnce(t)];case 2:return[2,o.sent()]}})})},e.prototype._decodeOnLoadVideoContinuously=function(t,o){return Ai(this,void 0,void 0,function(){return Ti(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return r.sent(),this.decodeContinuously(t,o),[2]}})})},e.prototype.isImageLoaded=function(t){return!(!t.complete||t.naturalWidth===0)},e.prototype.prepareImageElement=function(t){var o;return typeof t=="undefined"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof t=="string"&&(o=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(o=t),o},e.prototype.prepareVideoElement=function(t){var o;return!t&&typeof document!="undefined"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof t=="string"&&(o=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(o=t),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o},e.prototype.decodeOnce=function(t,o,r){var a=this;o===void 0&&(o=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var i=function(n,s){if(a._stopAsyncDecode){s(new at("Video stream has ended before any code could be detected.")),a._stopAsyncDecode=void 0;return}try{var l=a.decode(t);n(l)}catch(f){var u=o&&f instanceof at,c=f instanceof ti||f instanceof yt,d=c&&r;if(u||d)return setTimeout(i,a._timeBetweenDecodingAttempts,n,s);s(f)}};return new Promise(function(n,s){return i(n,s)})},e.prototype.decodeContinuously=function(t,o){var r=this;this._stopContinuousDecode=!1;var a=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var i=r.decode(t);o(i,null),setTimeout(a,r.timeBetweenScansMillis)}catch(l){o(null,l);var n=l instanceof ti||l instanceof yt,s=l instanceof at;(n||s)&&setTimeout(a,r._timeBetweenDecodingAttempts)}};a()},e.prototype.decode=function(t){var o=this.createBinaryBitmap(t);return this.decodeBitmap(o)},e.prototype.createBinaryBitmap=function(t){var o=this.getCaptureCanvasContext(t);this.drawImageOnCanvas(o,t);var r=this.getCaptureCanvas(t),a=new Nue(r),i=new Pue(a);return new _ue(i)},e.prototype.getCaptureCanvasContext=function(t){if(!this.captureCanvasContext){var o=this.getCaptureCanvas(t),r=o.getContext("2d");this.captureCanvasContext=r}return this.captureCanvasContext},e.prototype.getCaptureCanvas=function(t){if(!this.captureCanvas){var o=this.createCaptureCanvas(t);this.captureCanvas=o}return this.captureCanvas},e.prototype.drawImageOnCanvas=function(t,o){t.drawImage(o,0,0)},e.prototype.decodeBitmap=function(t){return this.reader.decode(t,this._hints)},e.prototype.createCaptureCanvas=function(t){if(typeof document=="undefined")return this._destroyCaptureCanvas(),null;var o=document.createElement("canvas"),r,a;return typeof t!="undefined"&&(t instanceof HTMLVideoElement?(r=t.videoWidth,a=t.videoHeight):t instanceof HTMLImageElement&&(r=t.naturalWidth||t.width,a=t.naturalHeight||t.height)),o.style.width=r+"px",o.style.height=a+"px",o.width=r,o.height=a,o},e.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(t){return t.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},e.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},e.prototype._destroyVideoElement=function(){!this.videoElement||(typeof this.videoEndedListener!="undefined"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener!="undefined"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener!="undefined"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},e.prototype._destroyImageElement=function(){!this.imageElement||(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},e.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},e.prototype.addVideoSource=function(t,o){try{t.srcObject=o}catch{t.src=URL.createObjectURL(o)}},e.prototype.cleanVideoSource=function(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")},e}(),pn=function(){function e(t,o,r,a,i,n){r===void 0&&(r=o==null?0:8*o.length),n===void 0&&(n=Ta.currentTimeMillis()),this.text=t,this.rawBytes=o,this.numBits=r,this.resultPoints=a,this.format=i,this.timestamp=n,this.text=t,this.rawBytes=o,r==null?this.numBits=o==null?0:8*o.length:this.numBits=r,this.resultPoints=a,this.format=i,this.resultMetadata=null,n==null?this.timestamp=Ta.currentTimeMillis():this.timestamp=n}return e.prototype.getText=function(){return this.text},e.prototype.getRawBytes=function(){return this.rawBytes},e.prototype.getNumBits=function(){return this.numBits},e.prototype.getResultPoints=function(){return this.resultPoints},e.prototype.getBarcodeFormat=function(){return this.format},e.prototype.getResultMetadata=function(){return this.resultMetadata},e.prototype.putMetadata=function(t,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,o)},e.prototype.putAllMetadata=function(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))},e.prototype.addResultPoints=function(t){var o=this.resultPoints;if(o===null)this.resultPoints=t;else if(t!==null&&t.length>0){var r=new Array(o.length+t.length);Ta.arraycopy(o,0,r,0,o.length),Ta.arraycopy(t,0,r,o.length,t.length),this.resultPoints=r}},e.prototype.getTimestamp=function(){return this.timestamp},e.prototype.toString=function(){return this.text},e}(),SC;(function(e){e[e.AZTEC=0]="AZTEC",e[e.CODABAR=1]="CODABAR",e[e.CODE_39=2]="CODE_39",e[e.CODE_93=3]="CODE_93",e[e.CODE_128=4]="CODE_128",e[e.DATA_MATRIX=5]="DATA_MATRIX",e[e.EAN_8=6]="EAN_8",e[e.EAN_13=7]="EAN_13",e[e.ITF=8]="ITF",e[e.MAXICODE=9]="MAXICODE",e[e.PDF_417=10]="PDF_417",e[e.QR_CODE=11]="QR_CODE",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(SC||(SC={}));var no=SC,IC;(function(e){e[e.OTHER=0]="OTHER",e[e.ORIENTATION=1]="ORIENTATION",e[e.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",e[e.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",e[e.ISSUE_NUMBER=4]="ISSUE_NUMBER",e[e.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",e[e.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",e[e.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",e[e.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",e[e.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",e[e.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(IC||(IC={}));var ai=IC,db=function(){function e(t,o,r,a,i,n){i===void 0&&(i=-1),n===void 0&&(n=-1),this.rawBytes=t,this.text=o,this.byteSegments=r,this.ecLevel=a,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=n,this.numBits=t==null?0:8*t.length}return e.prototype.getRawBytes=function(){return this.rawBytes},e.prototype.getNumBits=function(){return this.numBits},e.prototype.setNumBits=function(t){this.numBits=t},e.prototype.getText=function(){return this.text},e.prototype.getByteSegments=function(){return this.byteSegments},e.prototype.getECLevel=function(){return this.ecLevel},e.prototype.getErrorsCorrected=function(){return this.errorsCorrected},e.prototype.setErrorsCorrected=function(t){this.errorsCorrected=t},e.prototype.getErasures=function(){return this.erasures},e.prototype.setErasures=function(t){this.erasures=t},e.prototype.getOther=function(){return this.other},e.prototype.setOther=function(t){this.other=t},e.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},e.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},e.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},e}(),j0=function(){function e(){}return e.prototype.exp=function(t){return this.expTable[t]},e.prototype.log=function(t){if(t===0)throw new so;return this.logTable[t]},e.addOrSubtract=function(t,o){return t^o},e}(),iu=function(){function e(t,o){if(o.length===0)throw new so;this.field=t;var r=o.length;if(r>1&&o[0]===0){for(var a=1;a<r&&o[a]===0;)a++;a===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-a),Ta.arraycopy(o,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}return e.prototype.getCoefficients=function(){return this.coefficients},e.prototype.getDegree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return this.coefficients[0]===0},e.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},e.prototype.evaluateAt=function(t){if(t===0)return this.getCoefficient(0);var o=this.coefficients,r;if(t===1){r=0;for(var a=0,i=o.length;a!==i;a++){var n=o[a];r=j0.addOrSubtract(r,n)}return r}r=o[0];for(var s=o.length,l=this.field,a=1;a<s;a++)r=j0.addOrSubtract(l.multiply(t,r),o[a]);return r},e.prototype.addOrSubtract=function(t){if(!this.field.equals(t.field))throw new so("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;var o=this.coefficients,r=t.coefficients;if(o.length>r.length){var a=o;o=r,r=a}var i=new Int32Array(r.length),n=r.length-o.length;Ta.arraycopy(r,0,i,0,n);for(var s=n;s<r.length;s++)i[s]=j0.addOrSubtract(o[s-n],r[s]);return new e(this.field,i)},e.prototype.multiply=function(t){if(!this.field.equals(t.field))throw new so("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();for(var o=this.coefficients,r=o.length,a=t.coefficients,i=a.length,n=new Int32Array(r+i-1),s=this.field,l=0;l<r;l++)for(var u=o[l],c=0;c<i;c++)n[l+c]=j0.addOrSubtract(n[l+c],s.multiply(u,a[c]));return new e(s,n)},e.prototype.multiplyScalar=function(t){if(t===0)return this.field.getZero();if(t===1)return this;for(var o=this.coefficients.length,r=this.field,a=new Int32Array(o),i=this.coefficients,n=0;n<o;n++)a[n]=r.multiply(i[n],t);return new e(r,a)},e.prototype.multiplyByMonomial=function(t,o){if(t<0)throw new so;if(o===0)return this.field.getZero();for(var r=this.coefficients,a=r.length,i=new Int32Array(a+t),n=this.field,s=0;s<a;s++)i[s]=n.multiply(r[s],o);return new e(n,i)},e.prototype.divide=function(t){if(!this.field.equals(t.field))throw new so("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new so("Divide by 0");for(var o=this.field,r=o.getZero(),a=this,i=t.getCoefficient(t.getDegree()),n=o.inverse(i);a.getDegree()>=t.getDegree()&&!a.isZero();){var s=a.getDegree()-t.getDegree(),l=o.multiply(a.getCoefficient(a.getDegree()),n),u=t.multiplyByMonomial(s,l),c=o.buildMonomial(s,l);r=r.addOrSubtract(c),a=a.addOrSubtract(u)}return[r,a]},e.prototype.toString=function(){for(var t="",o=this.getDegree();o>=0;o--){var r=this.getCoefficient(o);if(r!==0){if(r<0?(t+=" - ",r=-r):t.length>0&&(t+=" + "),o===0||r!==1){var a=this.field.log(r);a===0?t+="1":a===1?t+="a":(t+="a^",t+=a)}o!==0&&(o===1?t+="x":(t+="x^",t+=o))}}return t},e}(),Vue=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),aN=function(e){Vue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.kind="ArithmeticException",t}(mn),Bue=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),Hl=function(e){Bue(t,e);function t(o,r,a){var i=e.call(this)||this;i.primitive=o,i.size=r,i.generatorBase=a;for(var n=new Int32Array(r),s=1,l=0;l<r;l++)n[l]=s,s*=2,s>=r&&(s^=o,s&=r-1);i.expTable=n;for(var u=new Int32Array(r),l=0;l<r-1;l++)u[n[l]]=l;return i.logTable=u,i.zero=new iu(i,Int32Array.from([0])),i.one=new iu(i,Int32Array.from([1])),i}return t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(o,r){if(o<0)throw new so;if(r===0)return this.zero;var a=new Int32Array(o+1);return a[0]=r,new iu(this,a)},t.prototype.inverse=function(o){if(o===0)throw new aN;return this.expTable[this.size-this.logTable[o]-1]},t.prototype.multiply=function(o,r){return o===0||r===0?0:this.expTable[(this.logTable[o]+this.logTable[r])%(this.size-1)]},t.prototype.getSize=function(){return this.size},t.prototype.getGeneratorBase=function(){return this.generatorBase},t.prototype.toString=function(){return"GF(0x"+oi.toHexString(this.primitive)+","+this.size+")"},t.prototype.equals=function(o){return o===this},t.AZTEC_DATA_12=new t(4201,4096,1),t.AZTEC_DATA_10=new t(1033,1024,1),t.AZTEC_DATA_6=new t(67,64,1),t.AZTEC_PARAM=new t(19,16,1),t.QR_CODE_FIELD_256=new t(285,256,0),t.DATA_MATRIX_FIELD_256=new t(301,256,1),t.AZTEC_DATA_8=t.DATA_MATRIX_FIELD_256,t.MAXICODE_FIELD_64=t.AZTEC_DATA_6,t}(j0),que=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),uv=function(e){que(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.kind="ReedSolomonException",t}(mn),Lue=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),Xm=function(e){Lue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.kind="IllegalStateException",t}(mn),fb=function(){function e(t){this.field=t}return e.prototype.decode=function(t,o){for(var r=this.field,a=new iu(r,t),i=new Int32Array(o),n=!0,s=0;s<o;s++){var l=a.evaluateAt(r.exp(s+r.getGeneratorBase()));i[i.length-1-s]=l,l!==0&&(n=!1)}if(!n)for(var u=new iu(r,i),c=this.runEuclideanAlgorithm(r.buildMonomial(o,1),u,o),d=c[0],f=c[1],m=this.findErrorLocations(d),p=this.findErrorMagnitudes(f,m),s=0;s<m.length;s++){var v=t.length-1-r.log(m[s]);if(v<0)throw new uv("Bad error location");t[v]=Hl.addOrSubtract(t[v],p[s])}},e.prototype.runEuclideanAlgorithm=function(t,o,r){if(t.getDegree()<o.getDegree()){var a=t;t=o,o=a}for(var i=this.field,n=t,s=o,l=i.getZero(),u=i.getOne();s.getDegree()>=(r/2|0);){var c=n,d=l;if(n=s,l=u,n.isZero())throw new uv("r_{i-1} was zero");s=c;for(var f=i.getZero(),m=n.getCoefficient(n.getDegree()),p=i.inverse(m);s.getDegree()>=n.getDegree()&&!s.isZero();){var v=s.getDegree()-n.getDegree(),g=i.multiply(s.getCoefficient(s.getDegree()),p);f=f.addOrSubtract(i.buildMonomial(v,g)),s=s.addOrSubtract(n.multiplyByMonomial(v,g))}if(u=f.multiply(l).addOrSubtract(d),s.getDegree()>=n.getDegree())throw new Xm("Division algorithm failed to reduce polynomial?")}var x=u.getCoefficient(0);if(x===0)throw new uv("sigmaTilde(0) was zero");var b=i.inverse(x),_=u.multiplyScalar(b),w=s.multiplyScalar(b);return[_,w]},e.prototype.findErrorLocations=function(t){var o=t.getDegree();if(o===1)return Int32Array.from([t.getCoefficient(1)]);for(var r=new Int32Array(o),a=0,i=this.field,n=1;n<i.getSize()&&a<o;n++)t.evaluateAt(n)===0&&(r[a]=i.inverse(n),a++);if(a!==o)throw new uv("Error locator degree does not match number of roots");return r},e.prototype.findErrorMagnitudes=function(t,o){for(var r=o.length,a=new Int32Array(r),i=this.field,n=0;n<r;n++){for(var s=i.inverse(o[n]),l=1,u=0;u<r;u++)if(n!==u){var c=i.multiply(o[u],s),d=(c&1)===0?c|1:c&-2;l=i.multiply(l,d)}a[n]=i.multiply(t.evaluateAt(s),i.inverse(l)),i.getGeneratorBase()!==0&&(a[n]=i.multiply(a[n],s))}return a},e}(),Xr;(function(e){e[e.UPPER=0]="UPPER",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.DIGIT=3]="DIGIT",e[e.PUNCT=4]="PUNCT",e[e.BINARY=5]="BINARY"})(Xr||(Xr={}));var iO=function(){function e(){}return e.prototype.decode=function(t){this.ddata=t;var o=t.getBits(),r=this.extractBits(o),a=this.correctBits(r),i=e.convertBoolArrayToByteArray(a),n=e.getEncodedData(a),s=new db(i,n,null,null);return s.setNumBits(a.length),s},e.highLevelDecode=function(t){return this.getEncodedData(t)},e.getEncodedData=function(t){for(var o=t.length,r=Xr.UPPER,a=Xr.UPPER,i="",n=0;n<o;)if(a===Xr.BINARY){if(o-n<5)break;var s=e.readCode(t,n,5);if(n+=5,s===0){if(o-n<11)break;s=e.readCode(t,n,11)+31,n+=11}for(var l=0;l<s;l++){if(o-n<8){n=o;break}var u=e.readCode(t,n,8);i+=Ur.castAsNonUtf8Char(u),n+=8}a=r}else{var c=a===Xr.DIGIT?4:5;if(o-n<c)break;var u=e.readCode(t,n,c);n+=c;var d=e.getCharacter(a,u);d.startsWith("CTRL_")?(r=a,a=e.getTable(d.charAt(5)),d.charAt(6)==="L"&&(r=a)):(i+=d,a=r)}return i},e.getTable=function(t){switch(t){case"L":return Xr.LOWER;case"P":return Xr.PUNCT;case"M":return Xr.MIXED;case"D":return Xr.DIGIT;case"B":return Xr.BINARY;case"U":default:return Xr.UPPER}},e.getCharacter=function(t,o){switch(t){case Xr.UPPER:return e.UPPER_TABLE[o];case Xr.LOWER:return e.LOWER_TABLE[o];case Xr.MIXED:return e.MIXED_TABLE[o];case Xr.PUNCT:return e.PUNCT_TABLE[o];case Xr.DIGIT:return e.DIGIT_TABLE[o];default:throw new Xm("Bad table")}},e.prototype.correctBits=function(t){var o,r;this.ddata.getNbLayers()<=2?(r=6,o=Hl.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,o=Hl.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,o=Hl.AZTEC_DATA_10):(r=12,o=Hl.AZTEC_DATA_12);var a=this.ddata.getNbDatablocks(),i=t.length/r;if(i<a)throw new yt;for(var n=t.length%r,s=new Int32Array(i),l=0;l<i;l++,n+=r)s[l]=e.readCode(t,n,r);try{var u=new fb(o);u.decode(s,i-a)}catch(g){throw new yt(g)}for(var c=(1<<r)-1,d=0,l=0;l<a;l++){var f=s[l];if(f===0||f===c)throw new yt;(f===1||f===c-1)&&d++}for(var m=new Array(a*r-d),p=0,l=0;l<a;l++){var f=s[l];if(f===1||f===c-1)m.fill(f>1,p,p+r-1),p+=r-1;else for(var v=r-1;v>=0;--v)m[p++]=(f&1<<v)!==0}return m},e.prototype.extractBits=function(t){var o=this.ddata.isCompact(),r=this.ddata.getNbLayers(),a=(o?11:14)+r*4,i=new Int32Array(a),n=new Array(this.totalBitsInLayer(r,o));if(o)for(var s=0;s<i.length;s++)i[s]=s;else for(var l=a+1+2*oi.truncDivision(oi.truncDivision(a,2)-1,15),u=a/2,c=oi.truncDivision(l,2),s=0;s<u;s++){var d=s+oi.truncDivision(s,15);i[u-s-1]=c-d-1,i[u+s]=c+d+1}for(var s=0,f=0;s<r;s++){for(var m=(r-s)*4+(o?9:12),p=s*2,v=a-1-p,g=0;g<m;g++)for(var x=g*2,b=0;b<2;b++)n[f+x+b]=t.get(i[p+b],i[p+g]),n[f+2*m+x+b]=t.get(i[p+g],i[v-b]),n[f+4*m+x+b]=t.get(i[v-b],i[v-g]),n[f+6*m+x+b]=t.get(i[v-g],i[p+b]);f+=m*8}return n},e.readCode=function(t,o,r){for(var a=0,i=o;i<o+r;i++)a<<=1,t[i]&&(a|=1);return a},e.readByte=function(t,o){var r=t.length-o;return r>=8?e.readCode(t,o,8):e.readCode(t,o,r)<<8-r},e.convertBoolArrayToByteArray=function(t){for(var o=new Uint8Array((t.length+7)/8),r=0;r<o.length;r++)o[r]=e.readByte(t,8*r);return o},e.prototype.totalBitsInLayer=function(t,o){return((o?88:112)+16*t)*t},e.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],e.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],e.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],e.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],e.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],e}(),Ko=function(){function e(){}return e.round=function(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0},e.distance=function(t,o,r,a){var i=t-r,n=o-a;return Math.sqrt(i*i+n*n)},e.sum=function(t){for(var o=0,r=0,a=t.length;r!==a;r++){var i=t[r];o+=i}return o},e}(),AC=function(){function e(){}return e.floatToIntBits=function(t){return t},e.MAX_VALUE=Number.MAX_SAFE_INTEGER,e}(),Xt=function(){function e(t,o){this.x=t,this.y=o}return e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e.prototype.equals=function(t){if(t instanceof e){var o=t;return this.x===o.x&&this.y===o.y}return!1},e.prototype.hashCode=function(){return 31*AC.floatToIntBits(this.x)+AC.floatToIntBits(this.y)},e.prototype.toString=function(){return"("+this.x+","+this.y+")"},e.orderBestPatterns=function(t){var o=this.distance(t[0],t[1]),r=this.distance(t[1],t[2]),a=this.distance(t[0],t[2]),i,n,s;if(r>=o&&r>=a?(n=t[0],i=t[1],s=t[2]):a>=r&&a>=o?(n=t[1],i=t[0],s=t[2]):(n=t[2],i=t[0],s=t[1]),this.crossProductZ(i,n,s)<0){var l=i;i=s,s=l}t[0]=i,t[1]=n,t[2]=s},e.distance=function(t,o){return Ko.distance(t.x,t.y,o.x,o.y)},e.crossProductZ=function(t,o,r){var a=o.x,i=o.y;return(r.x-a)*(t.y-i)-(r.y-i)*(t.x-a)},e}(),QS=function(){function e(t,o){this.bits=t,this.points=o}return e.prototype.getBits=function(){return this.bits},e.prototype.getPoints=function(){return this.points},e}(),$ue=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),Uue=function(e){$ue(t,e);function t(o,r,a,i,n){var s=e.call(this,o,r)||this;return s.compact=a,s.nbDatablocks=i,s.nbLayers=n,s}return t.prototype.getNbLayers=function(){return this.nbLayers},t.prototype.getNbDatablocks=function(){return this.nbDatablocks},t.prototype.isCompact=function(){return this.compact},t}(QS),TC=function(){function e(t,o,r,a){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),o==null&&(o=e.INIT_SIZE),r==null&&(r=t.getWidth()/2|0),a==null&&(a=t.getHeight()/2|0);var i=o/2|0;if(this.leftInit=r-i,this.rightInit=r+i,this.upInit=a-i,this.downInit=a+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new at}return e.prototype.detect=function(){for(var t=this.leftInit,o=this.rightInit,r=this.upInit,a=this.downInit,i=!1,n=!0,s=!1,l=!1,u=!1,c=!1,d=!1,f=this.width,m=this.height;n;){n=!1;for(var p=!0;(p||!l)&&o<f;)p=this.containsBlackPoint(r,a,o,!1),p?(o++,n=!0,l=!0):l||o++;if(o>=f){i=!0;break}for(var v=!0;(v||!u)&&a<m;)v=this.containsBlackPoint(t,o,a,!0),v?(a++,n=!0,u=!0):u||a++;if(a>=m){i=!0;break}for(var g=!0;(g||!c)&&t>=0;)g=this.containsBlackPoint(r,a,t,!1),g?(t--,n=!0,c=!0):c||t--;if(t<0){i=!0;break}for(var x=!0;(x||!d)&&r>=0;)x=this.containsBlackPoint(t,o,r,!0),x?(r--,n=!0,d=!0):d||r--;if(r<0){i=!0;break}n&&(s=!0)}if(!i&&s){for(var b=o-t,_=null,w=1;_===null&&w<b;w++)_=this.getBlackPointOnSegment(t,a-w,t+w,a);if(_==null)throw new at;for(var S=null,w=1;S===null&&w<b;w++)S=this.getBlackPointOnSegment(t,r+w,t+w,r);if(S==null)throw new at;for(var D=null,w=1;D===null&&w<b;w++)D=this.getBlackPointOnSegment(o,r+w,o-w,r);if(D==null)throw new at;for(var M=null,w=1;M===null&&w<b;w++)M=this.getBlackPointOnSegment(o,a-w,o-w,a);if(M==null)throw new at;return this.centerEdges(M,_,D,S)}else throw new at},e.prototype.getBlackPointOnSegment=function(t,o,r,a){for(var i=Ko.round(Ko.distance(t,o,r,a)),n=(r-t)/i,s=(a-o)/i,l=this.image,u=0;u<i;u++){var c=Ko.round(t+u*n),d=Ko.round(o+u*s);if(l.get(c,d))return new Xt(c,d)}return null},e.prototype.centerEdges=function(t,o,r,a){var i=t.getX(),n=t.getY(),s=o.getX(),l=o.getY(),u=r.getX(),c=r.getY(),d=a.getX(),f=a.getY(),m=e.CORR;return i<this.width/2?[new Xt(d-m,f+m),new Xt(s+m,l+m),new Xt(u-m,c-m),new Xt(i+m,n-m)]:[new Xt(d+m,f+m),new Xt(s+m,l-m),new Xt(u-m,c+m),new Xt(i-m,n-m)]},e.prototype.containsBlackPoint=function(t,o,r,a){var i=this.image;if(a){for(var n=t;n<=o;n++)if(i.get(n,r))return!0}else for(var s=t;s<=o;s++)if(i.get(r,s))return!0;return!1},e.INIT_SIZE=10,e.CORR=1,e}(),nO=function(){function e(){}return e.checkAndNudgePoints=function(t,o){for(var r=t.getWidth(),a=t.getHeight(),i=!0,n=0;n<o.length&&i;n+=2){var s=Math.floor(o[n]),l=Math.floor(o[n+1]);if(s<-1||s>r||l<-1||l>a)throw new at;i=!1,s===-1?(o[n]=0,i=!0):s===r&&(o[n]=r-1,i=!0),l===-1?(o[n+1]=0,i=!0):l===a&&(o[n+1]=a-1,i=!0)}i=!0;for(var n=o.length-2;n>=0&&i;n-=2){var s=Math.floor(o[n]),l=Math.floor(o[n+1]);if(s<-1||s>r||l<-1||l>a)throw new at;i=!1,s===-1?(o[n]=0,i=!0):s===r&&(o[n]=r-1,i=!0),l===-1?(o[n+1]=0,i=!0):l===a&&(o[n+1]=a-1,i=!0)}},e}(),rN=function(){function e(t,o,r,a,i,n,s,l,u){this.a11=t,this.a21=o,this.a31=r,this.a12=a,this.a22=i,this.a32=n,this.a13=s,this.a23=l,this.a33=u}return e.quadrilateralToQuadrilateral=function(t,o,r,a,i,n,s,l,u,c,d,f,m,p,v,g){var x=e.quadrilateralToSquare(t,o,r,a,i,n,s,l),b=e.squareToQuadrilateral(u,c,d,f,m,p,v,g);return b.times(x)},e.prototype.transformPoints=function(t){for(var o=t.length,r=this.a11,a=this.a12,i=this.a13,n=this.a21,s=this.a22,l=this.a23,u=this.a31,c=this.a32,d=this.a33,f=0;f<o;f+=2){var m=t[f],p=t[f+1],v=i*m+l*p+d;t[f]=(r*m+n*p+u)/v,t[f+1]=(a*m+s*p+c)/v}},e.prototype.transformPointsWithValues=function(t,o){for(var r=this.a11,a=this.a12,i=this.a13,n=this.a21,s=this.a22,l=this.a23,u=this.a31,c=this.a32,d=this.a33,f=t.length,m=0;m<f;m++){var p=t[m],v=o[m],g=i*p+l*v+d;t[m]=(r*p+n*v+u)/g,o[m]=(a*p+s*v+c)/g}},e.squareToQuadrilateral=function(t,o,r,a,i,n,s,l){var u=t-r+i-s,c=o-a+n-l;if(u===0&&c===0)return new e(r-t,i-r,t,a-o,n-a,o,0,0,1);var d=r-i,f=s-i,m=a-n,p=l-n,v=d*p-f*m,g=(u*p-f*c)/v,x=(d*c-u*m)/v;return new e(r-t+g*r,s-t+x*s,t,a-o+g*a,l-o+x*l,o,g,x,1)},e.quadrilateralToSquare=function(t,o,r,a,i,n,s,l){return e.squareToQuadrilateral(t,o,r,a,i,n,s,l).buildAdjoint()},e.prototype.buildAdjoint=function(){return new e(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},e.prototype.times=function(t){return new e(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)},e}(),zue=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),Hue=function(e){zue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.sampleGrid=function(o,r,a,i,n,s,l,u,c,d,f,m,p,v,g,x,b,_,w){var S=rN.quadrilateralToQuadrilateral(i,n,s,l,u,c,d,f,m,p,v,g,x,b,_,w);return this.sampleGridWithTransform(o,r,a,S)},t.prototype.sampleGridWithTransform=function(o,r,a,i){if(r<=0||a<=0)throw new at;for(var n=new oc(r,a),s=new Float32Array(2*r),l=0;l<a;l++){for(var u=s.length,c=l+.5,d=0;d<u;d+=2)s[d]=d/2+.5,s[d+1]=c;i.transformPoints(s),nO.checkAndNudgePoints(o,s);try{for(var d=0;d<u;d+=2)o.get(Math.floor(s[d]),Math.floor(s[d+1]))&&n.set(d/2,l)}catch{throw new at}}return n},t}(nO),XS=function(){function e(){}return e.setGridSampler=function(t){e.gridSampler=t},e.getInstance=function(){return e.gridSampler},e.gridSampler=new Hue,e}(),Xi=function(){function e(t,o){this.x=t,this.y=o}return e.prototype.toResultPoint=function(){return new Xt(this.getX(),this.getY())},e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e}(),jue=function(){function e(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}return e.prototype.detect=function(){return this.detectMirror(!1)},e.prototype.detectMirror=function(t){var o=this.getMatrixCenter(),r=this.getBullsEyeCorners(o);if(t){var a=r[0];r[0]=r[2],r[2]=a}this.extractParameters(r);var i=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),n=this.getMatrixCornerPoints(r);return new Uue(i,n,this.compact,this.nbDataBlocks,this.nbLayers)},e.prototype.extractParameters=function(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new at;var o=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(t[0],t[1],o),this.sampleLine(t[1],t[2],o),this.sampleLine(t[2],t[3],o),this.sampleLine(t[3],t[0],o)]);this.shift=this.getRotation(r,o);for(var a=0,i=0;i<4;i++){var n=r[(this.shift+i)%4];this.compact?(a<<=7,a+=n>>1&127):(a<<=10,a+=(n>>2&31<<5)+(n>>1&31))}var s=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},e.prototype.getRotation=function(t,o){var r=0;t.forEach(function(i,n,s){var l=(i>>o-2<<1)+(i&1);r=(r<<3)+l}),r=((r&1)<<11)+(r>>1);for(var a=0;a<4;a++)if(oi.bitCount(r^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new at},e.prototype.getCorrectedParameterData=function(t,o){var r,a;o?(r=7,a=2):(r=10,a=4);for(var i=r-a,n=new Int32Array(r),s=r-1;s>=0;--s)n[s]=t&15,t>>=4;try{var l=new fb(Hl.AZTEC_PARAM);l.decode(n,i)}catch{throw new at}for(var u=0,s=0;s<a;s++)u=(u<<4)+n[s];return u},e.prototype.getBullsEyeCorners=function(t){var o=t,r=t,a=t,i=t,n=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(o,n,1,-1),l=this.getFirstDifferent(r,n,1,1),u=this.getFirstDifferent(a,n,-1,1),c=this.getFirstDifferent(i,n,-1,-1);if(this.nbCenterLayers>2){var d=this.distancePoint(c,s)*this.nbCenterLayers/(this.distancePoint(i,o)*(this.nbCenterLayers+2));if(d<.75||d>1.25||!this.isWhiteOrBlackRectangle(s,l,u,c))break}o=s,r=l,a=u,i=c,n=!n}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new at;this.compact=this.nbCenterLayers===5;var f=new Xt(o.getX()+.5,o.getY()-.5),m=new Xt(r.getX()+.5,r.getY()+.5),p=new Xt(a.getX()-.5,a.getY()+.5),v=new Xt(i.getX()-.5,i.getY()-.5);return this.expandSquare([f,m,p,v],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},e.prototype.getMatrixCenter=function(){var t,o,r,a;try{var i=new TC(this.image).detect();t=i[0],o=i[1],r=i[2],a=i[3]}catch{var n=this.image.getWidth()/2,s=this.image.getHeight()/2;t=this.getFirstDifferent(new Xi(n+7,s-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Xi(n+7,s+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Xi(n-7,s+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Xi(n-7,s-7),!1,-1,-1).toResultPoint()}var l=Ko.round((t.getX()+a.getX()+o.getX()+r.getX())/4),u=Ko.round((t.getY()+a.getY()+o.getY()+r.getY())/4);try{var i=new TC(this.image,15,l,u).detect();t=i[0],o=i[1],r=i[2],a=i[3]}catch{t=this.getFirstDifferent(new Xi(l+7,u-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Xi(l+7,u+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Xi(l-7,u+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Xi(l-7,u-7),!1,-1,-1).toResultPoint()}return l=Ko.round((t.getX()+a.getX()+o.getX()+r.getX())/4),u=Ko.round((t.getY()+a.getY()+o.getY()+r.getY())/4),new Xi(l,u)},e.prototype.getMatrixCornerPoints=function(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())},e.prototype.sampleGrid=function(t,o,r,a,i){var n=XS.getInstance(),s=this.getDimension(),l=s/2-this.nbCenterLayers,u=s/2+this.nbCenterLayers;return n.sampleGrid(t,s,s,l,l,u,l,u,u,l,u,o.getX(),o.getY(),r.getX(),r.getY(),a.getX(),a.getY(),i.getX(),i.getY())},e.prototype.sampleLine=function(t,o,r){for(var a=0,i=this.distanceResultPoint(t,o),n=i/r,s=t.getX(),l=t.getY(),u=n*(o.getX()-t.getX())/i,c=n*(o.getY()-t.getY())/i,d=0;d<r;d++)this.image.get(Ko.round(s+d*u),Ko.round(l+d*c))&&(a|=1<<r-d-1);return a},e.prototype.isWhiteOrBlackRectangle=function(t,o,r,a){var i=3;t=new Xi(t.getX()-i,t.getY()+i),o=new Xi(o.getX()-i,o.getY()-i),r=new Xi(r.getX()+i,r.getY()-i),a=new Xi(a.getX()+i,a.getY()+i);var n=this.getColor(a,t);if(n===0)return!1;var s=this.getColor(t,o);return s!==n||(s=this.getColor(o,r),s!==n)?!1:(s=this.getColor(r,a),s===n)},e.prototype.getColor=function(t,o){for(var r=this.distancePoint(t,o),a=(o.getX()-t.getX())/r,i=(o.getY()-t.getY())/r,n=0,s=t.getX(),l=t.getY(),u=this.image.get(t.getX(),t.getY()),c=Math.ceil(r),d=0;d<c;d++)s+=a,l+=i,this.image.get(Ko.round(s),Ko.round(l))!==u&&n++;var f=n/r;return f>.1&&f<.9?0:f<=.1===u?1:-1},e.prototype.getFirstDifferent=function(t,o,r,a){for(var i=t.getX()+r,n=t.getY()+a;this.isValid(i,n)&&this.image.get(i,n)===o;)i+=r,n+=a;for(i-=r,n-=a;this.isValid(i,n)&&this.image.get(i,n)===o;)i+=r;for(i-=r;this.isValid(i,n)&&this.image.get(i,n)===o;)n+=a;return n-=a,new Xi(i,n)},e.prototype.expandSquare=function(t,o,r){var a=r/(2*o),i=t[0].getX()-t[2].getX(),n=t[0].getY()-t[2].getY(),s=(t[0].getX()+t[2].getX())/2,l=(t[0].getY()+t[2].getY())/2,u=new Xt(s+a*i,l+a*n),c=new Xt(s-a*i,l-a*n);i=t[1].getX()-t[3].getX(),n=t[1].getY()-t[3].getY(),s=(t[1].getX()+t[3].getX())/2,l=(t[1].getY()+t[3].getY())/2;var d=new Xt(s+a*i,l+a*n),f=new Xt(s-a*i,l-a*n),m=[u,d,c,f];return m},e.prototype.isValid=function(t,o){return t>=0&&t<this.image.getWidth()&&o>0&&o<this.image.getHeight()},e.prototype.isValidPoint=function(t){var o=Ko.round(t.getX()),r=Ko.round(t.getY());return this.isValid(o,r)},e.prototype.distancePoint=function(t,o){return Ko.distance(t.getX(),t.getY(),o.getX(),o.getY())},e.prototype.distanceResultPoint=function(t,o){return Ko.distance(t.getX(),t.getY(),o.getX(),o.getY())},e.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(oi.truncDivision(this.nbLayers-4,8)+1)+15},e}(),DC=function(){function e(){}return e.prototype.decode=function(t,o){o===void 0&&(o=null);var r=null,a=new jue(t.getBlackMatrix()),i=null,n=null;try{var s=a.detectMirror(!1);i=s.getPoints(),this.reportFoundResultPoints(o,i),n=new iO().decode(s)}catch(d){r=d}if(n==null)try{var s=a.detectMirror(!0);i=s.getPoints(),this.reportFoundResultPoints(o,i),n=new iO().decode(s)}catch(d){throw r!=null?r:d}var l=new pn(n.getText(),n.getRawBytes(),n.getNumBits(),i,no.AZTEC,Ta.currentTimeMillis()),u=n.getByteSegments();u!=null&&l.putMetadata(ai.BYTE_SEGMENTS,u);var c=n.getECLevel();return c!=null&&l.putMetadata(ai.ERROR_CORRECTION_LEVEL,c),l},e.prototype.reportFoundResultPoints=function(t,o){if(t!=null){var r=t.get(Ya.NEED_RESULT_POINT_CALLBACK);r!=null&&o.forEach(function(a,i,n){r.foundPossibleResultPoint(a)})}},e.prototype.reset=function(){},e}(),Gue=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}();(function(e){Gue(t,e);function t(o){return o===void 0&&(o=500),e.call(this,new DC,o)||this}return t})(Qm);var ri=function(){function e(){}return e.prototype.decode=function(t,o){try{return this.doDecode(t,o)}catch{var r=o&&o.get(Ya.TRY_HARDER)===!0;if(r&&t.isRotateSupported()){var a=t.rotateCounterClockwise(),i=this.doDecode(a,o),n=i.getResultMetadata(),s=270;n!==null&&n.get(ai.ORIENTATION)===!0&&(s=s+n.get(ai.ORIENTATION)%360),i.putMetadata(ai.ORIENTATION,s);var l=i.getResultPoints();if(l!==null)for(var u=a.getHeight(),c=0;c<l.length;c++)l[c]=new Xt(u-l[c].getY()-1,l[c].getX());return i}else throw new at}},e.prototype.reset=function(){},e.prototype.doDecode=function(t,o){var r=t.getWidth(),a=t.getHeight(),i=new rn(r),n=o&&o.get(Ya.TRY_HARDER)===!0,s=Math.max(1,a>>(n?8:5)),l;n?l=a:l=15;for(var u=Math.trunc(a/2),c=0;c<l;c++){var d=Math.trunc((c+1)/2),f=(c&1)===0,m=u+s*(f?d:-d);if(m<0||m>=a)break;try{i=t.getBlackRow(m,i)}catch{continue}for(var p=function(b){if(b===1&&(i.reverse(),o&&o.get(Ya.NEED_RESULT_POINT_CALLBACK)===!0)){var _=new Map;o.forEach(function(D,M){return _.set(M,D)}),_.delete(Ya.NEED_RESULT_POINT_CALLBACK),o=_}try{var w=v.decodeRow(m,i,o);if(b===1){w.putMetadata(ai.ORIENTATION,180);var S=w.getResultPoints();S!==null&&(S[0]=new Xt(r-S[0].getX()-1,S[0].getY()),S[1]=new Xt(r-S[1].getX()-1,S[1].getY()))}return{value:w}}catch{}},v=this,g=0;g<2;g++){var x=p(g);if(typeof x=="object")return x.value}}throw new at},e.recordPattern=function(t,o,r){for(var a=r.length,i=0;i<a;i++)r[i]=0;var n=t.getSize();if(o>=n)throw new at;for(var s=!t.get(o),l=0,u=o;u<n;){if(t.get(u)!==s)r[l]++;else{if(++l===a)break;r[l]=1,s=!s}u++}if(!(l===a||l===a-1&&u===n))throw new at},e.recordPatternInReverse=function(t,o,r){for(var a=r.length,i=t.get(o);o>0&&a>=0;)t.get(--o)!==i&&(a--,i=!i);if(a>=0)throw new at;e.recordPattern(t,o+1,r)},e.patternMatchVariance=function(t,o,r){for(var a=t.length,i=0,n=0,s=0;s<a;s++)i+=t[s],n+=o[s];if(i<n)return Number.POSITIVE_INFINITY;var l=i/n;r*=l;for(var u=0,c=0;c<a;c++){var d=t[c],f=o[c]*l,m=d>f?d-f:f-d;if(m>r)return Number.POSITIVE_INFINITY;u+=m}return u/i},e}(),Wue=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),sO=function(e){Wue(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.findStartPattern=function(o){for(var r=o.getSize(),a=o.getNextSet(0),i=0,n=Int32Array.from([0,0,0,0,0,0]),s=a,l=!1,u=6,c=a;c<r;c++)if(o.get(c)!==l)n[i]++;else{if(i===u-1){for(var d=t.MAX_AVG_VARIANCE,f=-1,m=t.CODE_START_A;m<=t.CODE_START_C;m++){var p=ri.patternMatchVariance(n,t.CODE_PATTERNS[m],t.MAX_INDIVIDUAL_VARIANCE);p<d&&(d=p,f=m)}if(f>=0&&o.isRange(Math.max(0,s-(c-s)/2),s,!1))return Int32Array.from([s,c,f]);s+=n[0]+n[1],n=n.slice(2,n.length-1),n[i-1]=0,n[i]=0,i--}else i++;n[i]=1,l=!l}throw new at},t.decodeCode=function(o,r,a){ri.recordPattern(o,a,r);for(var i=t.MAX_AVG_VARIANCE,n=-1,s=0;s<t.CODE_PATTERNS.length;s++){var l=t.CODE_PATTERNS[s],u=this.patternMatchVariance(r,l,t.MAX_INDIVIDUAL_VARIANCE);u<i&&(i=u,n=s)}if(n>=0)return n;throw new at},t.prototype.decodeRow=function(o,r,a){var i=a&&a.get(Ya.ASSUME_GS1)===!0,n=t.findStartPattern(r),s=n[2],l=0,u=new Uint8Array(20);u[l++]=s;var c;switch(s){case t.CODE_START_A:c=t.CODE_CODE_A;break;case t.CODE_START_B:c=t.CODE_CODE_B;break;case t.CODE_START_C:c=t.CODE_CODE_C;break;default:throw new yt}for(var d=!1,f=!1,m="",p=n[0],v=n[1],g=Int32Array.from([0,0,0,0,0,0]),x=0,b=0,_=s,w=0,S=!0,D=!1,M=!1;!d;){var O=f;switch(f=!1,x=b,b=t.decodeCode(r,g,v),u[l++]=b,b!==t.CODE_STOP&&(S=!0),b!==t.CODE_STOP&&(w++,_+=w*b),p=v,v+=g.reduce(function(X,Y){return X+Y},0),b){case t.CODE_START_A:case t.CODE_START_B:case t.CODE_START_C:throw new yt}switch(c){case t.CODE_CODE_A:if(b<64)M===D?m+=String.fromCharCode(" ".charCodeAt(0)+b):m+=String.fromCharCode(" ".charCodeAt(0)+b+128),M=!1;else if(b<96)M===D?m+=String.fromCharCode(b-64):m+=String.fromCharCode(b+64),M=!1;else switch(b!==t.CODE_STOP&&(S=!1),b){case t.CODE_FNC_1:i&&(m.length===0?m+="]C1":m+=String.fromCharCode(29));break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_A:!D&&M?(D=!0,M=!1):D&&M?(D=!1,M=!1):M=!0;break;case t.CODE_SHIFT:f=!0,c=t.CODE_CODE_B;break;case t.CODE_CODE_B:c=t.CODE_CODE_B;break;case t.CODE_CODE_C:c=t.CODE_CODE_C;break;case t.CODE_STOP:d=!0;break}break;case t.CODE_CODE_B:if(b<96)M===D?m+=String.fromCharCode(" ".charCodeAt(0)+b):m+=String.fromCharCode(" ".charCodeAt(0)+b+128),M=!1;else switch(b!==t.CODE_STOP&&(S=!1),b){case t.CODE_FNC_1:i&&(m.length===0?m+="]C1":m+=String.fromCharCode(29));break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_B:!D&&M?(D=!0,M=!1):D&&M?(D=!1,M=!1):M=!0;break;case t.CODE_SHIFT:f=!0,c=t.CODE_CODE_A;break;case t.CODE_CODE_A:c=t.CODE_CODE_A;break;case t.CODE_CODE_C:c=t.CODE_CODE_C;break;case t.CODE_STOP:d=!0;break}break;case t.CODE_CODE_C:if(b<100)b<10&&(m+="0"),m+=b;else switch(b!==t.CODE_STOP&&(S=!1),b){case t.CODE_FNC_1:i&&(m.length===0?m+="]C1":m+=String.fromCharCode(29));break;case t.CODE_CODE_A:c=t.CODE_CODE_A;break;case t.CODE_CODE_B:c=t.CODE_CODE_B;break;case t.CODE_STOP:d=!0;break}break}O&&(c=c===t.CODE_CODE_A?t.CODE_CODE_B:t.CODE_CODE_A)}var T=v-p;if(v=r.getNextUnset(v),!r.isRange(v,Math.min(r.getSize(),v+(v-p)/2),!1))throw new at;if(_-=w*x,_%103!==x)throw new ti;var I=m.length;if(I===0)throw new at;I>0&&S&&(c===t.CODE_CODE_C?m=m.substring(0,I-2):m=m.substring(0,I-1));for(var N=(n[1]+n[0])/2,P=p+T/2,F=u.length,L=new Uint8Array(F),z=0;z<F;z++)L[z]=u[z];var H=[new Xt(N,o),new Xt(P,o)];return new pn(m,L,0,H,no.CODE_128,new Date().getTime())},t.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],t.MAX_AVG_VARIANCE=.25,t.MAX_INDIVIDUAL_VARIANCE=.7,t.CODE_SHIFT=98,t.CODE_CODE_C=99,t.CODE_CODE_B=100,t.CODE_CODE_A=101,t.CODE_FNC_1=102,t.CODE_FNC_2=97,t.CODE_FNC_3=96,t.CODE_FNC_4_A=101,t.CODE_FNC_4_B=100,t.CODE_START_A=103,t.CODE_START_B=104,t.CODE_START_C=105,t.CODE_STOP=106,t}(ri),Que=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),My=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},lO=function(e){Que(t,e);function t(o,r){o===void 0&&(o=!1),r===void 0&&(r=!1);var a=e.call(this)||this;return a.usingCheckDigit=o,a.extendedMode=r,a.decodeRowResult="",a.counters=new Int32Array(9),a}return t.prototype.decodeRow=function(o,r,a){var i,n,s,l,u=this.counters;u.fill(0),this.decodeRowResult="";var c=t.findAsteriskPattern(r,u),d=r.getNextSet(c[1]),f=r.getSize(),m,p;do{t.recordPattern(r,d,u);var v=t.toNarrowWidePattern(u);if(v<0)throw new at;m=t.patternToChar(v),this.decodeRowResult+=m,p=d;try{for(var g=(i=void 0,My(u)),x=g.next();!x.done;x=g.next()){var b=x.value;d+=b}}catch(F){i={error:F}}finally{try{x&&!x.done&&(n=g.return)&&n.call(g)}finally{if(i)throw i.error}}d=r.getNextSet(d)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var _=0;try{for(var w=My(u),S=w.next();!S.done;S=w.next()){var b=S.value;_+=b}}catch(F){s={error:F}}finally{try{S&&!S.done&&(l=w.return)&&l.call(w)}finally{if(s)throw s.error}}var D=d-p-_;if(d!==f&&D*2<_)throw new at;if(this.usingCheckDigit){for(var M=this.decodeRowResult.length-1,O=0,T=0;T<M;T++)O+=t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(T));if(this.decodeRowResult.charAt(M)!==t.ALPHABET_STRING.charAt(O%43))throw new ti;this.decodeRowResult=this.decodeRowResult.substring(0,M)}if(this.decodeRowResult.length===0)throw new at;var I;this.extendedMode?I=t.decodeExtended(this.decodeRowResult):I=this.decodeRowResult;var N=(c[1]+c[0])/2,P=p+_/2;return new pn(I,null,0,[new Xt(N,o),new Xt(P,o)],no.CODE_39,new Date().getTime())},t.findAsteriskPattern=function(o,r){for(var a=o.getSize(),i=o.getNextSet(0),n=0,s=i,l=!1,u=r.length,c=i;c<a;c++)if(o.get(c)!==l)r[n]++;else{if(n===u-1){if(this.toNarrowWidePattern(r)===t.ASTERISK_ENCODING&&o.isRange(Math.max(0,s-Math.floor((c-s)/2)),s,!1))return[s,c];s+=r[0]+r[1],r.copyWithin(0,2,2+n-1),r[n-1]=0,r[n]=0,n--}else n++;r[n]=1,l=!l}throw new at},t.toNarrowWidePattern=function(o){var r,a,i=o.length,n=0,s;do{var l=2147483647;try{for(var u=(r=void 0,My(o)),c=u.next();!c.done;c=u.next()){var d=c.value;d<l&&d>n&&(l=d)}}catch(v){r={error:v}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(r)throw r.error}}n=l,s=0;for(var f=0,m=0,p=0;p<i;p++){var d=o[p];d>n&&(m|=1<<i-1-p,s++,f+=d)}if(s===3){for(var p=0;p<i&&s>0;p++){var d=o[p];if(d>n&&(s--,d*2>=f))return-1}return m}}while(s>3);return-1},t.patternToChar=function(o){for(var r=0;r<t.CHARACTER_ENCODINGS.length;r++)if(t.CHARACTER_ENCODINGS[r]===o)return t.ALPHABET_STRING.charAt(r);if(o===t.ASTERISK_ENCODING)return"*";throw new at},t.decodeExtended=function(o){for(var r=o.length,a="",i=0;i<r;i++){var n=o.charAt(i);if(n==="+"||n==="$"||n==="%"||n==="/"){var s=o.charAt(i+1),l="\0";switch(n){case"+":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new yt;break;case"$":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new yt;break;case"%":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s==="X"||s==="Y"||s==="Z")l="\x7F";else throw new yt;break;case"/":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new yt;break}a+=l,i++}else a+=n}return a},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],t.ASTERISK_ENCODING=148,t}(ri),Xue=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),Kue=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},cO=function(e){Xue(t,e);function t(){var o=e!==null&&e.apply(this,arguments)||this;return o.narrowLineWidth=-1,o}return t.prototype.decodeRow=function(o,r,a){var i,n,s=this.decodeStart(r),l=this.decodeEnd(r),u=new ga;t.decodeMiddle(r,s[1],l[0],u);var c=u.toString(),d=null;a!=null&&(d=a.get(Ya.ALLOWED_LENGTHS)),d==null&&(d=t.DEFAULT_ALLOWED_LENGTHS);var f=c.length,m=!1,p=0;try{for(var v=Kue(d),g=v.next();!g.done;g=v.next()){var x=g.value;if(f===x){m=!0;break}x>p&&(p=x)}}catch(w){i={error:w}}finally{try{g&&!g.done&&(n=v.return)&&n.call(v)}finally{if(i)throw i.error}}if(!m&&f>p&&(m=!0),!m)throw new yt;var b=[new Xt(s[1],o),new Xt(l[0],o)],_=new pn(c,null,0,b,no.ITF,new Date().getTime());return _},t.decodeMiddle=function(o,r,a,i){var n=new Int32Array(10),s=new Int32Array(5),l=new Int32Array(5);for(n.fill(0),s.fill(0),l.fill(0);r<a;){ri.recordPattern(o,r,n);for(var u=0;u<5;u++){var c=2*u;s[u]=n[c],l[u]=n[c+1]}var d=t.decodeDigit(s);i.append(d.toString()),d=this.decodeDigit(l),i.append(d.toString()),n.forEach(function(f){r+=f})}},t.prototype.decodeStart=function(o){var r=t.skipWhiteSpace(o),a=t.findGuardPattern(o,r,t.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(o,a[0]),a},t.prototype.validateQuietZone=function(o,r){var a=this.narrowLineWidth*10;a=a<r?a:r;for(var i=r-1;a>0&&i>=0&&!o.get(i);i--)a--;if(a!==0)throw new at},t.skipWhiteSpace=function(o){var r=o.getSize(),a=o.getNextSet(0);if(a===r)throw new at;return a},t.prototype.decodeEnd=function(o){o.reverse();try{var r=t.skipWhiteSpace(o),a=void 0;try{a=t.findGuardPattern(o,r,t.END_PATTERN_REVERSED[0])}catch(n){n instanceof at&&(a=t.findGuardPattern(o,r,t.END_PATTERN_REVERSED[1]))}this.validateQuietZone(o,a[0]);var i=a[0];return a[0]=o.getSize()-a[1],a[1]=o.getSize()-i,a}finally{o.reverse()}},t.findGuardPattern=function(o,r,a){var i=a.length,n=new Int32Array(i),s=o.getSize(),l=!1,u=0,c=r;n.fill(0);for(var d=r;d<s;d++)if(o.get(d)!==l)n[u]++;else{if(u===i-1){if(ri.patternMatchVariance(n,a,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return[c,d];c+=n[0]+n[1],Ta.arraycopy(n,2,n,0,u-1),n[u-1]=0,n[u]=0,u--}else u++;n[u]=1,l=!l}throw new at},t.decodeDigit=function(o){for(var r=t.MAX_AVG_VARIANCE,a=-1,i=t.PATTERNS.length,n=0;n<i;n++){var s=t.PATTERNS[n],l=ri.patternMatchVariance(o,s,t.MAX_INDIVIDUAL_VARIANCE);l<r?(r=l,a=n):l===r&&(a=-1)}if(a>=0)return a%10;throw new at},t.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],t.MAX_AVG_VARIANCE=.38,t.MAX_INDIVIDUAL_VARIANCE=.5,t.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],t.START_PATTERN=Int32Array.from([1,1,1,1]),t.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],t}(ri),Yue=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),Em=function(e){Yue(t,e);function t(){var o=e!==null&&e.apply(this,arguments)||this;return o.decodeRowStringBuffer="",o}return t.findStartGuardPattern=function(o){for(var r=!1,a,i=0,n=Int32Array.from([0,0,0]);!r;){n=Int32Array.from([0,0,0]),a=t.findGuardPattern(o,i,!1,this.START_END_PATTERN,n);var s=a[0];i=a[1];var l=s-(i-s);l>=0&&(r=o.isRange(l,s,!1))}return a},t.checkChecksum=function(o){return t.checkStandardUPCEANChecksum(o)},t.checkStandardUPCEANChecksum=function(o){var r=o.length;if(r===0)return!1;var a=parseInt(o.charAt(r-1),10);return t.getStandardUPCEANChecksum(o.substring(0,r-1))===a},t.getStandardUPCEANChecksum=function(o){for(var r=o.length,a=0,i=r-1;i>=0;i-=2){var n=o.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(n<0||n>9)throw new yt;a+=n}a*=3;for(var i=r-2;i>=0;i-=2){var n=o.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(n<0||n>9)throw new yt;a+=n}return(1e3-a)%10},t.decodeEnd=function(o,r){return t.findGuardPattern(o,r,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t.findGuardPatternWithoutCounters=function(o,r,a,i){return this.findGuardPattern(o,r,a,i,new Int32Array(i.length))},t.findGuardPattern=function(o,r,a,i,n){var s=o.getSize();r=a?o.getNextUnset(r):o.getNextSet(r);for(var l=0,u=r,c=i.length,d=a,f=r;f<s;f++)if(o.get(f)!==d)n[l]++;else{if(l===c-1){if(ri.patternMatchVariance(n,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return Int32Array.from([u,f]);u+=n[0]+n[1];for(var m=n.slice(2,n.length-1),p=0;p<l-1;p++)n[p]=m[p];n[l-1]=0,n[l]=0,l--}else l++;n[l]=1,d=!d}throw new at},t.decodeDigit=function(o,r,a,i){this.recordPattern(o,a,r);for(var n=this.MAX_AVG_VARIANCE,s=-1,l=i.length,u=0;u<l;u++){var c=i[u],d=ri.patternMatchVariance(r,c,t.MAX_INDIVIDUAL_VARIANCE);d<n&&(n=d,s=u)}if(s>=0)return s;throw new at},t.MAX_AVG_VARIANCE=.48,t.MAX_INDIVIDUAL_VARIANCE=.7,t.START_END_PATTERN=Int32Array.from([1,1,1]),t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],t}(ri),Jue=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Zue=function(){function e(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return e.prototype.decodeRow=function(t,o,r){var a=this.decodeRowStringBuffer,i=this.decodeMiddle(o,r,a),n=a.toString(),s=e.parseExtensionString(n),l=[new Xt((r[0]+r[1])/2,t),new Xt(i,t)],u=new pn(n,null,0,l,no.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&u.putAllMetadata(s),u},e.prototype.decodeMiddle=function(t,o,r){var a,i,n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;for(var s=t.getSize(),l=o[1],u=0,c=0;c<5&&l<s;c++){var d=Em.decodeDigit(t,n,l,Em.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+d%10);try{for(var f=(a=void 0,Jue(n)),m=f.next();!m.done;m=f.next()){var p=m.value;l+=p}}catch(g){a={error:g}}finally{try{m&&!m.done&&(i=f.return)&&i.call(f)}finally{if(a)throw a.error}}d>=10&&(u|=1<<4-c),c!==4&&(l=t.getNextSet(l),l=t.getNextUnset(l))}if(r.length!==5)throw new at;var v=this.determineCheckDigit(u);if(e.extensionChecksum(r.toString())!==v)throw new at;return l},e.extensionChecksum=function(t){for(var o=t.length,r=0,a=o-2;a>=0;a-=2)r+=t.charAt(a).charCodeAt(0)-"0".charCodeAt(0);r*=3;for(var a=o-1;a>=0;a-=2)r+=t.charAt(a).charCodeAt(0)-"0".charCodeAt(0);return r*=3,r%10},e.prototype.determineCheckDigit=function(t){for(var o=0;o<10;o++)if(t===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new at},e.parseExtensionString=function(t){if(t.length!==5)return null;var o=e.parseExtension5String(t);return o==null?null:new Map([[ai.SUGGESTED_PRICE,o]])},e.parseExtension5String=function(t){var o;switch(t.charAt(0)){case"0":o="\xA3";break;case"5":o="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}var r=parseInt(t.substring(1)),a=(r/100).toString(),i=r%100,n=i<10?"0"+i:i.toString();return o+a+"."+n},e}(),ede=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},tde=function(){function e(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return e.prototype.decodeRow=function(t,o,r){var a=this.decodeRowStringBuffer,i=this.decodeMiddle(o,r,a),n=a.toString(),s=e.parseExtensionString(n),l=[new Xt((r[0]+r[1])/2,t),new Xt(i,t)],u=new pn(n,null,0,l,no.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&u.putAllMetadata(s),u},e.prototype.decodeMiddle=function(t,o,r){var a,i,n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;for(var s=t.getSize(),l=o[1],u=0,c=0;c<2&&l<s;c++){var d=Em.decodeDigit(t,n,l,Em.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+d%10);try{for(var f=(a=void 0,ede(n)),m=f.next();!m.done;m=f.next()){var p=m.value;l+=p}}catch(v){a={error:v}}finally{try{m&&!m.done&&(i=f.return)&&i.call(f)}finally{if(a)throw a.error}}d>=10&&(u|=1<<1-c),c!==1&&(l=t.getNextSet(l),l=t.getNextUnset(l))}if(r.length!==2)throw new at;if(parseInt(r.toString())%4!==u)throw new at;return l},e.parseExtensionString=function(t){return t.length!==2?null:new Map([[ai.ISSUE_NUMBER,parseInt(t)]])},e}(),ode=function(){function e(){}return e.decodeRow=function(t,o,r){var a=Em.findGuardPattern(o,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var i=new Zue;return i.decodeRow(t,o,a)}catch{var n=new tde;return n.decodeRow(t,o,a)}},e.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),e}(),ade=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),Sr=function(e){ade(t,e);function t(){var o=e.call(this)||this;o.decodeRowStringBuffer="",t.L_AND_G_PATTERNS=t.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var r=10;r<20;r++){for(var a=t.L_PATTERNS[r-10],i=new Int32Array(a.length),n=0;n<a.length;n++)i[n]=a[a.length-n-1];t.L_AND_G_PATTERNS[r]=i}return o}return t.prototype.decodeRow=function(o,r,a){var i=t.findStartGuardPattern(r),n=a==null?null:a.get(Ya.NEED_RESULT_POINT_CALLBACK);if(n!=null){var s=new Xt((i[0]+i[1])/2,o);n.foundPossibleResultPoint(s)}var l=this.decodeMiddle(r,i,this.decodeRowStringBuffer),u=l.rowOffset,c=l.resultString;if(n!=null){var d=new Xt(u,o);n.foundPossibleResultPoint(d)}var f=t.decodeEnd(r,u);if(n!=null){var m=new Xt((f[0]+f[1])/2,o);n.foundPossibleResultPoint(m)}var p=f[1],v=p+(p-f[0]);if(v>=r.getSize()||!r.isRange(p,v,!1))throw new at;var g=c.toString();if(g.length<8)throw new yt;if(!t.checkChecksum(g))throw new ti;var x=(i[1]+i[0])/2,b=(f[1]+f[0])/2,_=this.getBarcodeFormat(),w=[new Xt(x,o),new Xt(b,o)],S=new pn(g,null,0,w,_,new Date().getTime()),D=0;try{var M=ode.decodeRow(o,r,f[1]);S.putMetadata(ai.UPC_EAN_EXTENSION,M.getText()),S.putAllMetadata(M.getResultMetadata()),S.addResultPoints(M.getResultPoints()),D=M.getText().length}catch{}var O=a==null?null:a.get(Ya.ALLOWED_EAN_EXTENSIONS);if(O!=null){var T=!1;for(var I in O)if(D.toString()===I){T=!0;break}if(!T)throw new at}return _===no.EAN_13||no.UPC_A,S},t.checkChecksum=function(o){return t.checkStandardUPCEANChecksum(o)},t.checkStandardUPCEANChecksum=function(o){var r=o.length;if(r===0)return!1;var a=parseInt(o.charAt(r-1),10);return t.getStandardUPCEANChecksum(o.substring(0,r-1))===a},t.getStandardUPCEANChecksum=function(o){for(var r=o.length,a=0,i=r-1;i>=0;i-=2){var n=o.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(n<0||n>9)throw new yt;a+=n}a*=3;for(var i=r-2;i>=0;i-=2){var n=o.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(n<0||n>9)throw new yt;a+=n}return(1e3-a)%10},t.decodeEnd=function(o,r){return t.findGuardPattern(o,r,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t}(Em),rde=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),uO=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},OC=function(e){rde(t,e);function t(){var o=e.call(this)||this;return o.decodeMiddleCounters=Int32Array.from([0,0,0,0]),o}return t.prototype.decodeMiddle=function(o,r,a){var i,n,s,l,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var c=o.getSize(),d=r[1],f=0,m=0;m<6&&d<c;m++){var p=Sr.decodeDigit(o,u,d,Sr.L_AND_G_PATTERNS);a+=String.fromCharCode("0".charCodeAt(0)+p%10);try{for(var v=(i=void 0,uO(u)),g=v.next();!g.done;g=v.next()){var x=g.value;d+=x}}catch(S){i={error:S}}finally{try{g&&!g.done&&(n=v.return)&&n.call(v)}finally{if(i)throw i.error}}p>=10&&(f|=1<<5-m)}a=t.determineFirstDigit(a,f);var b=Sr.findGuardPattern(o,d,!0,Sr.MIDDLE_PATTERN,new Int32Array(Sr.MIDDLE_PATTERN.length).fill(0));d=b[1];for(var m=0;m<6&&d<c;m++){var p=Sr.decodeDigit(o,u,d,Sr.L_PATTERNS);a+=String.fromCharCode("0".charCodeAt(0)+p);try{for(var _=(s=void 0,uO(u)),w=_.next();!w.done;w=_.next()){var x=w.value;d+=x}}catch(M){s={error:M}}finally{try{w&&!w.done&&(l=_.return)&&l.call(_)}finally{if(s)throw s.error}}}return{rowOffset:d,resultString:a}},t.prototype.getBarcodeFormat=function(){return no.EAN_13},t.determineFirstDigit=function(o,r){for(var a=0;a<10;a++)if(r===this.FIRST_DIGIT_ENCODINGS[a])return o=String.fromCharCode("0".charCodeAt(0)+a)+o,o;throw new at},t.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],t}(Sr),ide=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),dO=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},fO=function(e){ide(t,e);function t(){var o=e.call(this)||this;return o.decodeMiddleCounters=Int32Array.from([0,0,0,0]),o}return t.prototype.decodeMiddle=function(o,r,a){var i,n,s,l,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var c=o.getSize(),d=r[1],f=0;f<4&&d<c;f++){var m=Sr.decodeDigit(o,u,d,Sr.L_PATTERNS);a+=String.fromCharCode("0".charCodeAt(0)+m);try{for(var p=(i=void 0,dO(u)),v=p.next();!v.done;v=p.next()){var g=v.value;d+=g}}catch(w){i={error:w}}finally{try{v&&!v.done&&(n=p.return)&&n.call(p)}finally{if(i)throw i.error}}}var x=Sr.findGuardPattern(o,d,!0,Sr.MIDDLE_PATTERN,new Int32Array(Sr.MIDDLE_PATTERN.length).fill(0));d=x[1];for(var f=0;f<4&&d<c;f++){var m=Sr.decodeDigit(o,u,d,Sr.L_PATTERNS);a+=String.fromCharCode("0".charCodeAt(0)+m);try{for(var b=(s=void 0,dO(u)),_=b.next();!_.done;_=b.next()){var g=_.value;d+=g}}catch(D){s={error:D}}finally{try{_&&!_.done&&(l=b.return)&&l.call(b)}finally{if(s)throw s.error}}}return{rowOffset:d,resultString:a}},t.prototype.getBarcodeFormat=function(){return no.EAN_8},t}(Sr),nde=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),sde=function(e){nde(t,e);function t(){var o=e!==null&&e.apply(this,arguments)||this;return o.ean13Reader=new OC,o}return t.prototype.getBarcodeFormat=function(){return no.UPC_A},t.prototype.decode=function(o,r){return this.maybeReturnResult(this.ean13Reader.decode(o))},t.prototype.decodeRow=function(o,r,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(o,r,a))},t.prototype.decodeMiddle=function(o,r,a){return this.ean13Reader.decodeMiddle(o,r,a)},t.prototype.maybeReturnResult=function(o){var r=o.getText();if(r.charAt(0)==="0"){var a=new pn(r.substring(1),null,null,o.getResultPoints(),no.UPC_A);return o.getResultMetadata()!=null&&a.putAllMetadata(o.getResultMetadata()),a}else throw new at},t.prototype.reset=function(){this.ean13Reader.reset()},t}(Sr),lde=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),cde=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},mO=function(e){lde(t,e);function t(){var o=e.call(this)||this;return o.decodeMiddleCounters=new Int32Array(4),o}return t.prototype.decodeMiddle=function(o,r,a){var i,n,s=this.decodeMiddleCounters.map(function(g){return g});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=o.getSize(),u=r[1],c=0,d=0;d<6&&u<l;d++){var f=t.decodeDigit(o,s,u,t.L_AND_G_PATTERNS);a+=String.fromCharCode("0".charCodeAt(0)+f%10);try{for(var m=(i=void 0,cde(s)),p=m.next();!p.done;p=m.next()){var v=p.value;u+=v}}catch(g){i={error:g}}finally{try{p&&!p.done&&(n=m.return)&&n.call(m)}finally{if(i)throw i.error}}f>=10&&(c|=1<<5-d)}return t.determineNumSysAndCheckDigit(new ga(a),c),u},t.prototype.decodeEnd=function(o,r){return t.findGuardPatternWithoutCounters(o,r,!0,t.MIDDLE_END_PATTERN)},t.prototype.checkChecksum=function(o){return Sr.checkChecksum(t.convertUPCEtoUPCA(o))},t.determineNumSysAndCheckDigit=function(o,r){for(var a=0;a<=1;a++)for(var i=0;i<10;i++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][i]){o.insert(0,"0"+a),o.append("0"+i);return}throw at.getNotFoundInstance()},t.prototype.getBarcodeFormat=function(){return no.UPC_E},t.convertUPCEtoUPCA=function(o){var r=o.slice(1,7).split("").map(function(n){return n.charCodeAt(0)}),a=new ga;a.append(o.charAt(0));var i=r[5];switch(i){case 0:case 1:case 2:a.appendChars(r,0,2),a.append(i),a.append("0000"),a.appendChars(r,2,3);break;case 3:a.appendChars(r,0,3),a.append("00000"),a.appendChars(r,3,2);break;case 4:a.appendChars(r,0,4),a.append("00000"),a.append(r[4]);break;default:a.appendChars(r,0,5),a.append("0000"),a.append(i);break}return o.length>=8&&a.append(o.charAt(7)),a.toString()},t.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],t}(Sr),ude=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),pO=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ny=function(e){ude(t,e);function t(o){var r=e.call(this)||this,a=o==null?null:o.get(Ya.POSSIBLE_FORMATS),i=[];return a!=null&&(a.indexOf(no.EAN_13)>-1?i.push(new OC):a.indexOf(no.UPC_A)>-1&&i.push(new sde),a.indexOf(no.EAN_8)>-1&&i.push(new fO),a.indexOf(no.UPC_E)>-1&&i.push(new mO)),i.length===0&&(i.push(new OC),i.push(new fO),i.push(new mO)),r.readers=i,r}return t.prototype.decodeRow=function(o,r,a){var i,n;try{for(var s=pO(this.readers),l=s.next();!l.done;l=s.next()){var u=l.value;try{var c=u.decodeRow(o,r,a),d=c.getBarcodeFormat()===no.EAN_13&&c.getText().charAt(0)==="0",f=a==null?null:a.get(Ya.POSSIBLE_FORMATS),m=f==null||f.includes(no.UPC_A);if(d&&m){var p=c.getRawBytes(),v=new pn(c.getText().substring(1),p,p.length,c.getResultPoints(),no.UPC_A);return v.putAllMetadata(c.getResultMetadata()),v}return c}catch{}}}catch(g){i={error:g}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}throw new at},t.prototype.reset=function(){var o,r;try{for(var a=pO(this.readers),i=a.next();!i.done;i=a.next()){var n=i.value;n.reset()}}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}},t}(ri),dde=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),fde=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ku=function(e){dde(t,e);function t(){var o=e.call(this)||this;return o.decodeFinderCounters=new Int32Array(4),o.dataCharacterCounters=new Int32Array(8),o.oddRoundingErrors=new Array(4),o.evenRoundingErrors=new Array(4),o.oddCounts=new Array(o.dataCharacterCounters.length/2),o.evenCounts=new Array(o.dataCharacterCounters.length/2),o}return t.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},t.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},t.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},t.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},t.prototype.getOddCounts=function(){return this.oddCounts},t.prototype.getEvenCounts=function(){return this.evenCounts},t.prototype.parseFinderValue=function(o,r){for(var a=0;a<r.length;a++)if(ri.patternMatchVariance(o,r[a],t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return a;throw new at},t.count=function(o){return Ko.sum(new Int32Array(o))},t.increment=function(o,r){for(var a=0,i=r[0],n=1;n<o.length;n++)r[n]>i&&(i=r[n],a=n);o[a]++},t.decrement=function(o,r){for(var a=0,i=r[0],n=1;n<o.length;n++)r[n]<i&&(i=r[n],a=n);o[a]--},t.isFinderPattern=function(o){var r,a,i=o[0]+o[1],n=i+o[2]+o[3],s=i/n;if(s>=t.MIN_FINDER_PATTERN_RATIO&&s<=t.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var c=fde(o),d=c.next();!d.done;d=c.next()){var f=d.value;f>u&&(u=f),f<l&&(l=f)}}catch(m){r={error:m}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(r)throw r.error}}return u<10*l}return!1},t.MAX_AVG_VARIANCE=.2,t.MAX_INDIVIDUAL_VARIANCE=.45,t.MIN_FINDER_PATTERN_RATIO=9.5/12,t.MAX_FINDER_PATTERN_RATIO=12.5/14,t}(ri),Vg=function(){function e(t,o){this.value=t,this.checksumPortion=o}return e.prototype.getValue=function(){return this.value},e.prototype.getChecksumPortion=function(){return this.checksumPortion},e.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var o=t;return this.value===o.value&&this.checksumPortion===o.checksumPortion},e.prototype.hashCode=function(){return this.value^this.checksumPortion},e}(),iN=function(){function e(t,o,r,a,i){this.value=t,this.startEnd=o,this.value=t,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new Xt(r,i)),this.resultPoints.push(new Xt(a,i))}return e.prototype.getValue=function(){return this.value},e.prototype.getStartEnd=function(){return this.startEnd},e.prototype.getResultPoints=function(){return this.resultPoints},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var o=t;return this.value===o.value},e.prototype.hashCode=function(){return this.value},e}(),mde=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Qf=function(){function e(){}return e.getRSSvalue=function(t,o,r){var a,i,n=0;try{for(var s=mde(t),l=s.next();!l.done;l=s.next()){var u=l.value;n+=u}}catch(b){a={error:b}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}for(var c=0,d=0,f=t.length,m=0;m<f-1;m++){var p=void 0;for(p=1,d|=1<<m;p<t[m];p++,d&=~(1<<m)){var v=e.combins(n-p-1,f-m-2);if(r&&d===0&&n-p-(f-m-1)>=f-m-1&&(v-=e.combins(n-p-(f-m),f-m-2)),f-m-1>1){for(var g=0,x=n-p-(f-m-2);x>o;x--)g+=e.combins(n-p-x-1,f-m-3);v-=g*(f-1-m)}else n-p>o&&v--;c+=v}n-=p}return c},e.combins=function(t,o){var r,a;t-o>o?(a=o,r=t-o):(a=t-o,r=o);for(var i=1,n=1,s=t;s>r;s--)i*=s,n<=a&&(i/=n,n++);for(;n<=a;)i/=n,n++;return i},e}(),pde=function(){function e(){}return e.buildBitArray=function(t){var o=t.length*2-1;t[t.length-1].getRightChar()==null&&(o-=1);for(var r=12*o,a=new rn(r),i=0,n=t[0],s=n.getRightChar().getValue(),l=11;l>=0;--l)(s&1<<l)!=0&&a.set(i),i++;for(var l=1;l<t.length;++l){for(var u=t[l],c=u.getLeftChar().getValue(),d=11;d>=0;--d)(c&1<<d)!=0&&a.set(i),i++;if(u.getRightChar()!=null)for(var f=u.getRightChar().getValue(),d=11;d>=0;--d)(f&1<<d)!=0&&a.set(i),i++}return a},e}(),Uu=function(){function e(t,o){o?this.decodedInformation=null:(this.finished=t,this.decodedInformation=o)}return e.prototype.getDecodedInformation=function(){return this.decodedInformation},e.prototype.isFinished=function(){return this.finished},e}(),KS=function(){function e(t){this.newPosition=t}return e.prototype.getNewPosition=function(){return this.newPosition},e}(),hde=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),bs=function(e){hde(t,e);function t(o,r){var a=e.call(this,o)||this;return a.value=r,a}return t.prototype.getValue=function(){return this.value},t.prototype.isFNC1=function(){return this.value===t.FNC1},t.FNC1="$",t}(KS),vde=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),zu=function(e){vde(t,e);function t(o,r,a){var i=e.call(this,o)||this;return a?(i.remaining=!0,i.remainingValue=i.remainingValue):(i.remaining=!1,i.remainingValue=0),i.newString=r,i}return t.prototype.getNewString=function(){return this.newString},t.prototype.isRemaining=function(){return this.remaining},t.prototype.getRemainingValue=function(){return this.remainingValue},t}(KS),gde=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),Pf=function(e){gde(t,e);function t(o,r,a){var i=e.call(this,o)||this;if(r<0||r>10||a<0||a>10)throw new yt;return i.firstDigit=r,i.secondDigit=a,i}return t.prototype.getFirstDigit=function(){return this.firstDigit},t.prototype.getSecondDigit=function(){return this.secondDigit},t.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},t.prototype.isFirstDigitFNC1=function(){return this.firstDigit===t.FNC1},t.prototype.isSecondDigitFNC1=function(){return this.secondDigit===t.FNC1},t.prototype.isAnyFNC1=function(){return this.firstDigit===t.FNC1||this.secondDigit===t.FNC1},t.FNC1=10,t}(KS),dv=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_de=function(){function e(){}return e.parseFieldsInGeneralPurpose=function(t){var o,r,a,i,n,s,l,u;if(!t)return null;if(t.length<2)throw new at;var c=t.substring(0,2);try{for(var d=dv(e.TWO_DIGIT_DATA_LENGTH),f=d.next();!f.done;f=d.next()){var m=f.value;if(m[0]===c)return m[1]===e.VARIABLE_LENGTH?e.processVariableAI(2,m[2],t):e.processFixedAI(2,m[1],t)}}catch(D){o={error:D}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(o)throw o.error}}if(t.length<3)throw new at;var p=t.substring(0,3);try{for(var v=dv(e.THREE_DIGIT_DATA_LENGTH),g=v.next();!g.done;g=v.next()){var m=g.value;if(m[0]===p)return m[1]===e.VARIABLE_LENGTH?e.processVariableAI(3,m[2],t):e.processFixedAI(3,m[1],t)}}catch(D){a={error:D}}finally{try{g&&!g.done&&(i=v.return)&&i.call(v)}finally{if(a)throw a.error}}try{for(var x=dv(e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),b=x.next();!b.done;b=x.next()){var m=b.value;if(m[0]===p)return m[1]===e.VARIABLE_LENGTH?e.processVariableAI(4,m[2],t):e.processFixedAI(4,m[1],t)}}catch(D){n={error:D}}finally{try{b&&!b.done&&(s=x.return)&&s.call(x)}finally{if(n)throw n.error}}if(t.length<4)throw new at;var _=t.substring(0,4);try{for(var w=dv(e.FOUR_DIGIT_DATA_LENGTH),S=w.next();!S.done;S=w.next()){var m=S.value;if(m[0]===_)return m[1]===e.VARIABLE_LENGTH?e.processVariableAI(4,m[2],t):e.processFixedAI(4,m[1],t)}}catch(D){l={error:D}}finally{try{S&&!S.done&&(u=w.return)&&u.call(w)}finally{if(l)throw l.error}}throw new at},e.processFixedAI=function(t,o,r){if(r.length<t)throw new at;var a=r.substring(0,t);if(r.length<t+o)throw new at;var i=r.substring(t,t+o),n=r.substring(t+o),s="("+a+")"+i,l=e.parseFieldsInGeneralPurpose(n);return l==null?s:s+l},e.processVariableAI=function(t,o,r){var a=r.substring(0,t),i;r.length<t+o?i=r.length:i=t+o;var n=r.substring(t,i),s=r.substring(i),l="("+a+")"+n,u=e.parseFieldsInGeneralPurpose(s);return u==null?l:l+u},e.VARIABLE_LENGTH=[],e.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",e.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",e.VARIABLE_LENGTH,20],["22",e.VARIABLE_LENGTH,29],["30",e.VARIABLE_LENGTH,8],["37",e.VARIABLE_LENGTH,8],["90",e.VARIABLE_LENGTH,30],["91",e.VARIABLE_LENGTH,30],["92",e.VARIABLE_LENGTH,30],["93",e.VARIABLE_LENGTH,30],["94",e.VARIABLE_LENGTH,30],["95",e.VARIABLE_LENGTH,30],["96",e.VARIABLE_LENGTH,30],["97",e.VARIABLE_LENGTH,3],["98",e.VARIABLE_LENGTH,30],["99",e.VARIABLE_LENGTH,30]],e.THREE_DIGIT_DATA_LENGTH=[["240",e.VARIABLE_LENGTH,30],["241",e.VARIABLE_LENGTH,30],["242",e.VARIABLE_LENGTH,6],["250",e.VARIABLE_LENGTH,30],["251",e.VARIABLE_LENGTH,30],["253",e.VARIABLE_LENGTH,17],["254",e.VARIABLE_LENGTH,20],["400",e.VARIABLE_LENGTH,30],["401",e.VARIABLE_LENGTH,30],["402",17],["403",e.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",e.VARIABLE_LENGTH,20],["421",e.VARIABLE_LENGTH,15],["422",3],["423",e.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",e.VARIABLE_LENGTH,15],["391",e.VARIABLE_LENGTH,18],["392",e.VARIABLE_LENGTH,15],["393",e.VARIABLE_LENGTH,18],["703",e.VARIABLE_LENGTH,30]],e.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",e.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",e.VARIABLE_LENGTH,20],["8003",e.VARIABLE_LENGTH,30],["8004",e.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",e.VARIABLE_LENGTH,30],["8008",e.VARIABLE_LENGTH,12],["8018",18],["8020",e.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",e.VARIABLE_LENGTH,70],["8200",e.VARIABLE_LENGTH,70]],e}(),Gv=function(){function e(t){this.buffer=new ga,this.information=t}return e.prototype.decodeAllCodes=function(t,o){var r=o,a=null;do{var i=this.decodeGeneralPurposeField(r,a),n=_de.parseFieldsInGeneralPurpose(i.getNewString());if(n!=null&&t.append(n),i.isRemaining()?a=""+i.getRemainingValue():a=null,r===i.getNewPosition())break;r=i.getNewPosition()}while(!0);return t.toString()},e.prototype.isStillNumeric=function(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(var o=t;o<t+3;++o)if(this.information.get(o))return!0;return this.information.get(t+3)},e.prototype.decodeNumeric=function(t){if(t+7>this.information.getSize()){var o=this.extractNumericValueFromBitArray(t,4);return o===0?new Pf(this.information.getSize(),Pf.FNC1,Pf.FNC1):new Pf(this.information.getSize(),o-1,Pf.FNC1)}var r=this.extractNumericValueFromBitArray(t,7),a=(r-8)/11,i=(r-8)%11;return new Pf(t+7,a,i)},e.prototype.extractNumericValueFromBitArray=function(t,o){return e.extractNumericValueFromBitArray(this.information,t,o)},e.extractNumericValueFromBitArray=function(t,o,r){for(var a=0,i=0;i<r;++i)t.get(o+i)&&(a|=1<<r-i-1);return a},e.prototype.decodeGeneralPurposeField=function(t,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(t);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new zu(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new zu(this.current.getPosition(),this.buffer.toString())},e.prototype.parseBlocks=function(){var t,o;do{var r=this.current.getPosition();this.current.isAlpha()?(o=this.parseAlphaBlock(),t=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),t=o.isFinished()):(o=this.parseNumericBlock(),t=o.isFinished());var a=r!==this.current.getPosition();if(!a&&!t)break}while(!t);return o.getDecodedInformation()},e.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){var o=void 0;return t.isSecondDigitFNC1()?o=new zu(this.current.getPosition(),this.buffer.toString()):o=new zu(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new Uu(!0,o)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){var o=new zu(this.current.getPosition(),this.buffer.toString());return new Uu(!0,o)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Uu(!1)},e.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var o=new zu(this.current.getPosition(),this.buffer.toString());return new Uu(!0,o)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Uu(!1)},e.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var o=new zu(this.current.getPosition(),this.buffer.toString());return new Uu(!0,o)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Uu(!1)},e.prototype.isStillIsoIec646=function(t){if(t+5>this.information.getSize())return!1;var o=this.extractNumericValueFromBitArray(t,5);if(o>=5&&o<16)return!0;if(t+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<116)return!0;if(t+8>this.information.getSize())return!1;var a=this.extractNumericValueFromBitArray(t,8);return a>=232&&a<253},e.prototype.decodeIsoIec646=function(t){var o=this.extractNumericValueFromBitArray(t,5);if(o===15)return new bs(t+5,bs.FNC1);if(o>=5&&o<15)return new bs(t+5,"0"+(o-5));var r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<90)return new bs(t+7,""+(r+1));if(r>=90&&r<116)return new bs(t+7,""+(r+7));var a=this.extractNumericValueFromBitArray(t,8),i;switch(a){case 232:i="!";break;case 233:i='"';break;case 234:i="%";break;case 235:i="&";break;case 236:i="'";break;case 237:i="(";break;case 238:i=")";break;case 239:i="*";break;case 240:i="+";break;case 241:i=",";break;case 242:i="-";break;case 243:i=".";break;case 244:i="/";break;case 245:i=":";break;case 246:i=";";break;case 247:i="<";break;case 248:i="=";break;case 249:i=">";break;case 250:i="?";break;case 251:i="_";break;case 252:i=" ";break;default:throw new yt}return new bs(t+8,i)},e.prototype.isStillAlpha=function(t){if(t+5>this.information.getSize())return!1;var o=this.extractNumericValueFromBitArray(t,5);if(o>=5&&o<16)return!0;if(t+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,6);return r>=16&&r<63},e.prototype.decodeAlphanumeric=function(t){var o=this.extractNumericValueFromBitArray(t,5);if(o===15)return new bs(t+5,bs.FNC1);if(o>=5&&o<15)return new bs(t+5,"0"+(o-5));var r=this.extractNumericValueFromBitArray(t,6);if(r>=32&&r<58)return new bs(t+6,""+(r+33));var a;switch(r){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new Xm("Decoding invalid alphanumeric value: "+r)}return new bs(t+6,a)},e.prototype.isAlphaTo646ToAlphaLatch=function(t){if(t+1>this.information.getSize())return!1;for(var o=0;o<5&&o+t<this.information.getSize();++o)if(o===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+o))return!1;return!0},e.prototype.isAlphaOr646ToNumericLatch=function(t){if(t+3>this.information.getSize())return!1;for(var o=t;o<t+3;++o)if(this.information.get(o))return!1;return!0},e.prototype.isNumericToAlphaNumericLatch=function(t){if(t+1>this.information.getSize())return!1;for(var o=0;o<4&&o+t<this.information.getSize();++o)if(this.information.get(t+o))return!1;return!0},e}(),nN=function(){function e(t){this.information=t,this.generalDecoder=new Gv(t)}return e.prototype.getInformation=function(){return this.information},e.prototype.getGeneralDecoder=function(){return this.generalDecoder},e}(),bde=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),Ss=function(e){bde(t,e);function t(o){return e.call(this,o)||this}return t.prototype.encodeCompressedGtin=function(o,r){o.append("(01)");var a=o.length();o.append("9"),this.encodeCompressedGtinWithoutAI(o,r,a)},t.prototype.encodeCompressedGtinWithoutAI=function(o,r,a){for(var i=0;i<4;++i){var n=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*i,10);n/100===0&&o.append("0"),n/10===0&&o.append("0"),o.append(n)}t.appendCheckDigit(o,a)},t.appendCheckDigit=function(o,r){for(var a=0,i=0;i<13;i++){var n=o.charAt(i+r).charCodeAt(0)-"0".charCodeAt(0);a+=(i&1)===0?3*n:n}a=10-a%10,a===10&&(a=0),o.append(a)},t.GTIN_SIZE=40,t}(nN),yde=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),xde=function(e){yde(t,e);function t(o){return e.call(this,o)||this}return t.prototype.parseInformation=function(){var o=new ga;o.append("(01)");var r=o.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE,4);return o.append(a),this.encodeCompressedGtinWithoutAI(o,t.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(o,t.HEADER_SIZE+44)},t.HEADER_SIZE=1+1+2,t}(Ss),Cde=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),wde=function(e){Cde(t,e);function t(o){return e.call(this,o)||this}return t.prototype.parseInformation=function(){var o=new ga;return this.getGeneralDecoder().decodeAllCodes(o,t.HEADER_SIZE)},t.HEADER_SIZE=2+1+2,t}(nN),Ede=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),Wv=function(e){Ede(t,e);function t(o){return e.call(this,o)||this}return t.prototype.encodeCompressedWeight=function(o,r,a){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,a);this.addWeightCode(o,i);for(var n=this.checkWeight(i),s=1e5,l=0;l<5;++l)n/s===0&&o.append("0"),s/=10;o.append(n)},t}(Ss),Sde=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),sN=function(e){Sde(t,e);function t(o){return e.call(this,o)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()!=t.HEADER_SIZE+Wv.GTIN_SIZE+t.WEIGHT_SIZE)throw new at;var o=new ga;return this.encodeCompressedGtin(o,t.HEADER_SIZE),this.encodeCompressedWeight(o,t.HEADER_SIZE+Wv.GTIN_SIZE,t.WEIGHT_SIZE),o.toString()},t.HEADER_SIZE=4+1,t.WEIGHT_SIZE=15,t}(Wv),Ide=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),Ade=function(e){Ide(t,e);function t(o){return e.call(this,o)||this}return t.prototype.addWeightCode=function(o,r){o.append("(3103)")},t.prototype.checkWeight=function(o){return o},t}(sN),Tde=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),Dde=function(e){Tde(t,e);function t(o){return e.call(this,o)||this}return t.prototype.addWeightCode=function(o,r){r<1e4?o.append("(3202)"):o.append("(3203)")},t.prototype.checkWeight=function(o){return o<1e4?o:o-1e4},t}(sN),Ode=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),Pde=function(e){Ode(t,e);function t(o){return e.call(this,o)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+Ss.GTIN_SIZE)throw new at;var o=new ga;this.encodeCompressedGtin(o,t.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Ss.GTIN_SIZE,t.LAST_DIGIT_SIZE);o.append("(392"),o.append(r),o.append(")");var a=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+Ss.GTIN_SIZE+t.LAST_DIGIT_SIZE,null);return o.append(a.getNewString()),o.toString()},t.HEADER_SIZE=5+1+2,t.LAST_DIGIT_SIZE=2,t}(Ss),Fde=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),Mde=function(e){Fde(t,e);function t(o){return e.call(this,o)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+Ss.GTIN_SIZE)throw new at;var o=new ga;this.encodeCompressedGtin(o,t.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Ss.GTIN_SIZE,t.LAST_DIGIT_SIZE);o.append("(393"),o.append(r),o.append(")");var a=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Ss.GTIN_SIZE+t.LAST_DIGIT_SIZE,t.FIRST_THREE_DIGITS_SIZE);a/100==0&&o.append("0"),a/10==0&&o.append("0"),o.append(a);var i=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+Ss.GTIN_SIZE+t.LAST_DIGIT_SIZE+t.FIRST_THREE_DIGITS_SIZE,null);return o.append(i.getNewString()),o.toString()},t.HEADER_SIZE=5+1+2,t.LAST_DIGIT_SIZE=2,t.FIRST_THREE_DIGITS_SIZE=10,t}(Ss),Nde=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),xc=function(e){Nde(t,e);function t(o,r,a){var i=e.call(this,o)||this;return i.dateCode=a,i.firstAIdigits=r,i}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()!=t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE+t.DATE_SIZE)throw new at;var o=new ga;return this.encodeCompressedGtin(o,t.HEADER_SIZE),this.encodeCompressedWeight(o,t.HEADER_SIZE+t.GTIN_SIZE,t.WEIGHT_SIZE),this.encodeCompressedDate(o,t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE),o.toString()},t.prototype.encodeCompressedDate=function(o,r){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,t.DATE_SIZE);if(a!=38400){o.append("("),o.append(this.dateCode),o.append(")");var i=a%32;a/=32;var n=a%12+1;a/=12;var s=a;s/10==0&&o.append("0"),o.append(s),n/10==0&&o.append("0"),o.append(n),i/10==0&&o.append("0"),o.append(i)}},t.prototype.addWeightCode=function(o,r){o.append("("),o.append(this.firstAIdigits),o.append(r/1e5),o.append(")")},t.prototype.checkWeight=function(o){return o%1e5},t.HEADER_SIZE=7+1,t.WEIGHT_SIZE=20,t.DATE_SIZE=16,t}(Wv);function kde(e){try{if(e.get(1))return new xde(e);if(!e.get(2))return new wde(e);var t=Gv.extractNumericValueFromBitArray(e,1,4);switch(t){case 4:return new Ade(e);case 5:return new Dde(e)}var o=Gv.extractNumericValueFromBitArray(e,1,5);switch(o){case 12:return new Pde(e);case 13:return new Mde(e)}var r=Gv.extractNumericValueFromBitArray(e,1,7);switch(r){case 56:return new xc(e,"310","11");case 57:return new xc(e,"320","11");case 58:return new xc(e,"310","13");case 59:return new xc(e,"320","13");case 60:return new xc(e,"310","15");case 61:return new xc(e,"320","15");case 62:return new xc(e,"310","17");case 63:return new xc(e,"320","17")}}catch(a){throw console.log(a),new Xm("unknown decoder: "+e)}}var hO=function(){function e(t,o,r,a){this.leftchar=t,this.rightchar=o,this.finderpattern=r,this.maybeLast=a}return e.prototype.mayBeLast=function(){return this.maybeLast},e.prototype.getLeftChar=function(){return this.leftchar},e.prototype.getRightChar=function(){return this.rightchar},e.prototype.getFinderPattern=function(){return this.finderpattern},e.prototype.mustBeLast=function(){return this.rightchar==null},e.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},e.equals=function(t,o){return t instanceof e?e.equalsOrNull(t.leftchar,o.leftchar)&&e.equalsOrNull(t.rightchar,o.rightchar)&&e.equalsOrNull(t.finderpattern,o.finderpattern):!1},e.equalsOrNull=function(t,o){return t===null?o===null:e.equals(t,o)},e.prototype.hashCode=function(){var t=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return t},e}(),Rde=function(){function e(t,o,r){this.pairs=t,this.rowNumber=o,this.wasReversed=r}return e.prototype.getPairs=function(){return this.pairs},e.prototype.getRowNumber=function(){return this.rowNumber},e.prototype.isReversed=function(){return this.wasReversed},e.prototype.isEquivalent=function(t){return this.checkEqualitity(this,t)},e.prototype.toString=function(){return"{ "+this.pairs+" }"},e.prototype.equals=function(t,o){return t instanceof e?this.checkEqualitity(t,o)&&t.wasReversed===o.wasReversed:!1},e.prototype.checkEqualitity=function(t,o){if(!(!t||!o)){var r;return t.forEach(function(a,i){o.forEach(function(n){a.getLeftChar().getValue()===n.getLeftChar().getValue()&&a.getRightChar().getValue()===n.getRightChar().getValue()&&a.getFinderPatter().getValue()===n.getFinderPatter().getValue()&&(r=!0)})}),r}},e}(),Vde=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),Cc=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Bde=function(e){Vde(t,e);function t(){var o=e!==null&&e.apply(this,arguments)||this;return o.pairs=new Array(t.MAX_PAIRS),o.rows=new Array,o.startEnd=[2],o}return t.prototype.decodeRow=function(o,r,a){this.pairs.length=0,this.startFromEven=!1;try{return t.constructResult(this.decodeRow2pairs(o,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,t.constructResult(this.decodeRow2pairs(o,r))},t.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},t.prototype.decodeRow2pairs=function(o,r){for(var a=!1;!a;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,o))}catch(s){if(s instanceof at){if(!this.pairs.length)throw new at;a=!0}}if(this.checkChecksum())return this.pairs;var i;if(this.rows.length?i=!0:i=!1,this.storeRow(o,!1),i){var n=this.checkRowsBoolean(!1);if(n!=null||(n=this.checkRowsBoolean(!0),n!=null))return n}throw new at},t.prototype.checkRowsBoolean=function(o){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,o&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(a){console.log(a)}return o&&(this.rows=this.rows.reverse()),r},t.prototype.checkRows=function(o,r){for(var a,i,n=r;n<this.rows.length;n++){var s=this.rows[n];this.pairs.length=0;try{for(var l=(a=void 0,Cc(o)),u=l.next();!u.done;u=l.next()){var c=u.value;this.pairs.push(c.getPairs())}}catch(f){a={error:f}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}if(this.pairs.push(s.getPairs()),!!t.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var d=new Array(o);d.push(s);try{return this.checkRows(d,n+1)}catch(f){console.log(f)}}}throw new at},t.isValidSequence=function(o){var r,a;try{for(var i=Cc(t.FINDER_PATTERN_SEQUENCES),n=i.next();!n.done;n=i.next()){var s=n.value;if(!(o.length>s.length)){for(var l=!0,u=0;u<o.length;u++)if(o[u].getFinderPattern().getValue()!=s[u]){l=!1;break}if(l)return!0}}}catch(c){r={error:c}}finally{try{n&&!n.done&&(a=i.return)&&a.call(i)}finally{if(r)throw r.error}}return!1},t.prototype.storeRow=function(o,r){for(var a=0,i=!1,n=!1;a<this.rows.length;){var s=this.rows[a];if(s.getRowNumber()>o){n=s.isEquivalent(this.pairs);break}i=s.isEquivalent(this.pairs),a++}n||i||t.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new Rde(this.pairs,o,r)),this.removePartialRows(this.pairs,this.rows))},t.prototype.removePartialRows=function(o,r){var a,i,n,s,l,u;try{for(var c=Cc(r),d=c.next();!d.done;d=c.next()){var f=d.value;if(f.getPairs().length!==o.length){var m=!0;try{for(var p=(n=void 0,Cc(f.getPairs())),v=p.next();!v.done;v=p.next()){var g=v.value,x=!1;try{for(var b=(l=void 0,Cc(o)),_=b.next();!_.done;_=b.next()){var w=_.value;if(hO.equals(g,w)){x=!0;break}}}catch(S){l={error:S}}finally{try{_&&!_.done&&(u=b.return)&&u.call(b)}finally{if(l)throw l.error}}x||(m=!1)}}catch(S){n={error:S}}finally{try{v&&!v.done&&(s=p.return)&&s.call(p)}finally{if(n)throw n.error}}}}}catch(S){a={error:S}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(a)throw a.error}}},t.isPartialRow=function(o,r){var a,i,n,s,l,u;try{for(var c=Cc(r),d=c.next();!d.done;d=c.next()){var f=d.value,m=!0;try{for(var p=(n=void 0,Cc(o)),v=p.next();!v.done;v=p.next()){var g=v.value,x=!1;try{for(var b=(l=void 0,Cc(f.getPairs())),_=b.next();!_.done;_=b.next()){var w=_.value;if(g.equals(w)){x=!0;break}}}catch(S){l={error:S}}finally{try{_&&!_.done&&(u=b.return)&&u.call(b)}finally{if(l)throw l.error}}if(!x){m=!1;break}}}catch(S){n={error:S}}finally{try{v&&!v.done&&(s=p.return)&&s.call(p)}finally{if(n)throw n.error}}if(m)return!0}}catch(S){a={error:S}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(a)throw a.error}}return!1},t.prototype.getRows=function(){return this.rows},t.constructResult=function(o){var r=pde.buildBitArray(o),a=kde(r),i=a.parseInformation(),n=o[0].getFinderPattern().getResultPoints(),s=o[o.length-1].getFinderPattern().getResultPoints(),l=[n[0],n[1],s[0],s[1]];return new pn(i,null,null,l,no.RSS_EXPANDED,null)},t.prototype.checkChecksum=function(){var o=this.pairs.get(0),r=o.getLeftChar(),a=o.getRightChar();if(a==null)return!1;for(var i=a.getChecksumPortion(),n=2,s=1;s<this.pairs.size();++s){var l=this.pairs.get(s);i+=l.getLeftChar().getChecksumPortion(),n++;var u=l.getRightChar();u!=null&&(i+=u.getChecksumPortion(),n++)}i%=211;var c=211*(n-4)+i;return c==r.getValue()},t.getNextSecondBar=function(o,r){var a;return o.get(r)?(a=o.getNextUnset(r),a=o.getNextSet(a)):(a=o.getNextSet(r),a=o.getNextUnset(a)),a},t.prototype.retrieveNextPair=function(o,r,a){var i=r.length%2==0;this.startFromEven&&(i=!i);var n,s=!0,l=-1;do this.findNextPair(o,r,l),n=this.parseFoundFinderPattern(o,a,i),n==null?l=t.getNextSecondBar(o,this.startEnd[0]):s=!1;while(s);var u=this.decodeDataCharacter(o,n,i,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new at;var c;try{c=this.decodeDataCharacter(o,n,i,!1)}catch(d){c=null,console.log(d)}return new hO(u,c,n,!0)},t.prototype.isEmptyPair=function(o){return o.length===0},t.prototype.findNextPair=function(o,r,a){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;var n=o.getSize(),s;if(a>=0)s=a;else if(this.isEmptyPair(r))s=0;else{var l=r[r.length-1];s=l.getFinderPattern().getStartEnd()[1]}var u=r.length%2!=0;this.startFromEven&&(u=!u);for(var c=!1;s<n&&(c=!o.get(s),!!c);)s++;for(var d=0,f=s,m=s;m<n;m++)if(o.get(m)!=c)i[d]++;else{if(d==3){if(u&&t.reverseCounters(i),t.isFinderPattern(i)){this.startEnd[0]=f,this.startEnd[1]=m;return}u&&t.reverseCounters(i),f+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,d--}else d++;i[d]=1,c=!c}throw new at},t.reverseCounters=function(o){for(var r=o.length,a=0;a<r/2;++a){var i=o[a];o[a]=o[r-a-1],o[r-a-1]=i}},t.prototype.parseFoundFinderPattern=function(o,r,a){var i,n,s;if(a){for(var l=this.startEnd[0]-1;l>=0&&!o.get(l);)l--;l++,i=this.startEnd[0]-l,n=l,s=this.startEnd[1]}else n=this.startEnd[0],s=o.getNextUnset(this.startEnd[1]+1),i=s-this.startEnd[1];var u=this.getDecodeFinderCounters();Ta.arraycopy(u,0,u,1,u.length-1),u[0]=i;var c;try{c=this.parseFinderValue(u,t.FINDER_PATTERNS)}catch{return null}return new iN(c,[n,s],n,s,r)},t.prototype.decodeDataCharacter=function(o,r,a,i){for(var n=this.getDataCharacterCounters(),s=0;s<n.length;s++)n[s]=0;if(i)t.recordPatternInReverse(o,r.getStartEnd()[0],n);else{t.recordPattern(o,r.getStartEnd()[1],n);for(var l=0,u=n.length-1;l<u;l++,u--){var c=n[l];n[l]=n[u],n[u]=c}}var d=17,f=Ko.sum(new Int32Array(n))/d,m=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(f-m)/m>.3)throw new at;for(var p=this.getOddCounts(),v=this.getEvenCounts(),g=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors(),l=0;l<n.length;l++){var b=1*n[l]/f,_=b+.5;if(_<1){if(b<.3)throw new at;_=1}else if(_>8){if(b>8.7)throw new at;_=8}var w=l/2;(l&1)==0?(p[w]=_,g[w]=b-_):(v[w]=_,x[w]=b-_)}this.adjustOddEvenCounts(d);for(var S=4*r.getValue()+(a?0:2)+(i?0:1)-1,D=0,M=0,l=p.length-1;l>=0;l--){if(t.isNotA1left(r,a,i)){var O=t.WEIGHTS[S][2*l];M+=p[l]*O}D+=p[l]}for(var T=0,l=v.length-1;l>=0;l--)if(t.isNotA1left(r,a,i)){var O=t.WEIGHTS[S][2*l+1];T+=v[l]*O}var I=M+T;if((D&1)!=0||D>13||D<4)throw new at;var N=(13-D)/2,P=t.SYMBOL_WIDEST[N],F=9-P,L=Qf.getRSSvalue(p,P,!0),z=Qf.getRSSvalue(v,F,!1),H=t.EVEN_TOTAL_SUBSET[N],X=t.GSUM[N],Y=L*H+z+X;return new Vg(Y,I)},t.isNotA1left=function(o,r,a){return!(o.getValue()==0&&r&&a)},t.prototype.adjustOddEvenCounts=function(o){var r=Ko.sum(new Int32Array(this.getOddCounts())),a=Ko.sum(new Int32Array(this.getEvenCounts())),i=!1,n=!1;r>13?n=!0:r<4&&(i=!0);var s=!1,l=!1;a>13?l=!0:a<4&&(s=!0);var u=r+a-o,c=(r&1)==1,d=(a&1)==0;if(u==1)if(c){if(d)throw new at;n=!0}else{if(!d)throw new at;l=!0}else if(u==-1)if(c){if(d)throw new at;i=!0}else{if(!d)throw new at;s=!0}else if(u==0){if(c){if(!d)throw new at;r<a?(i=!0,l=!0):(n=!0,s=!0)}else if(d)throw new at}else throw new at;if(i){if(n)throw new at;t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(n&&t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(l)throw new at;t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.SYMBOL_WIDEST=[7,5,4,3,1],t.EVEN_TOTAL_SUBSET=[4,20,52,104,204],t.GSUM=[0,348,1388,2948,3988],t.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],t.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],t.FINDER_PAT_A=0,t.FINDER_PAT_B=1,t.FINDER_PAT_C=2,t.FINDER_PAT_D=3,t.FINDER_PAT_E=4,t.FINDER_PAT_F=5,t.FINDER_PATTERN_SEQUENCES=[[t.FINDER_PAT_A,t.FINDER_PAT_A],[t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B],[t.FINDER_PAT_A,t.FINDER_PAT_C,t.FINDER_PAT_B,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_C],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F]],t.MAX_PAIRS=11,t}(Ku),qde=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),Lde=function(e){qde(t,e);function t(o,r,a){var i=e.call(this,o,r)||this;return i.count=0,i.finderPattern=a,i}return t.prototype.getFinderPattern=function(){return this.finderPattern},t.prototype.getCount=function(){return this.count},t.prototype.incrementCount=function(){this.count++},t}(Vg),$de=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),ky=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},vO=function(e){$de(t,e);function t(){var o=e!==null&&e.apply(this,arguments)||this;return o.possibleLeftPairs=[],o.possibleRightPairs=[],o}return t.prototype.decodeRow=function(o,r,a){var i,n,s,l,u=this.decodePair(r,!1,o,a);t.addOrTally(this.possibleLeftPairs,u),r.reverse();var c=this.decodePair(r,!0,o,a);t.addOrTally(this.possibleRightPairs,c),r.reverse();try{for(var d=ky(this.possibleLeftPairs),f=d.next();!f.done;f=d.next()){var m=f.value;if(m.getCount()>1)try{for(var p=(s=void 0,ky(this.possibleRightPairs)),v=p.next();!v.done;v=p.next()){var g=v.value;if(g.getCount()>1&&t.checkChecksum(m,g))return t.constructResult(m,g)}}catch(x){s={error:x}}finally{try{v&&!v.done&&(l=p.return)&&l.call(p)}finally{if(s)throw s.error}}}}catch(x){i={error:x}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(i)throw i.error}}throw new at},t.addOrTally=function(o,r){var a,i;if(r!=null){var n=!1;try{for(var s=ky(o),l=s.next();!l.done;l=s.next()){var u=l.value;if(u.getValue()===r.getValue()){u.incrementCount(),n=!0;break}}}catch(c){a={error:c}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}n||o.push(r)}},t.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},t.constructResult=function(o,r){for(var a=4537077*o.getValue()+r.getValue(),i=new String(a).toString(),n=new ga,s=13-i.length;s>0;s--)n.append("0");n.append(i);for(var l=0,s=0;s<13;s++){var u=n.charAt(s).charCodeAt(0)-"0".charCodeAt(0);l+=(s&1)===0?3*u:u}l=10-l%10,l===10&&(l=0),n.append(l.toString());var c=o.getFinderPattern().getResultPoints(),d=r.getFinderPattern().getResultPoints();return new pn(n.toString(),null,0,[c[0],c[1],d[0],d[1]],no.RSS_14,new Date().getTime())},t.checkChecksum=function(o,r){var a=(o.getChecksumPortion()+16*r.getChecksumPortion())%79,i=9*o.getFinderPattern().getValue()+r.getFinderPattern().getValue();return i>72&&i--,i>8&&i--,a===i},t.prototype.decodePair=function(o,r,a,i){try{var n=this.findFinderPattern(o,r),s=this.parseFoundFinderPattern(o,a,r,n),l=i==null?null:i.get(Ya.NEED_RESULT_POINT_CALLBACK);if(l!=null){var u=(n[0]+n[1])/2;r&&(u=o.getSize()-1-u),l.foundPossibleResultPoint(new Xt(u,a))}var c=this.decodeDataCharacter(o,s,!0),d=this.decodeDataCharacter(o,s,!1);return new Lde(1597*c.getValue()+d.getValue(),c.getChecksumPortion()+4*d.getChecksumPortion(),s)}catch{return null}},t.prototype.decodeDataCharacter=function(o,r,a){for(var i=this.getDataCharacterCounters(),n=0;n<i.length;n++)i[n]=0;if(a)ri.recordPatternInReverse(o,r.getStartEnd()[0],i);else{ri.recordPattern(o,r.getStartEnd()[1]+1,i);for(var s=0,l=i.length-1;s<l;s++,l--){var u=i[s];i[s]=i[l],i[l]=u}}for(var c=a?16:15,d=Ko.sum(new Int32Array(i))/c,f=this.getOddCounts(),m=this.getEvenCounts(),p=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors(),s=0;s<i.length;s++){var g=i[s]/d,x=Math.floor(g+.5);x<1?x=1:x>8&&(x=8);var b=Math.floor(s/2);(s&1)===0?(f[b]=x,p[b]=g-x):(m[b]=x,v[b]=g-x)}this.adjustOddEvenCounts(a,c);for(var _=0,w=0,s=f.length-1;s>=0;s--)w*=9,w+=f[s],_+=f[s];for(var S=0,D=0,s=m.length-1;s>=0;s--)S*=9,S+=m[s],D+=m[s];var M=w+3*S;if(a){if((_&1)!==0||_>12||_<4)throw new at;var O=(12-_)/2,T=t.OUTSIDE_ODD_WIDEST[O],I=9-T,N=Qf.getRSSvalue(f,T,!1),P=Qf.getRSSvalue(m,I,!0),F=t.OUTSIDE_EVEN_TOTAL_SUBSET[O],L=t.OUTSIDE_GSUM[O];return new Vg(N*F+P+L,M)}else{if((D&1)!==0||D>10||D<4)throw new at;var O=(10-D)/2,T=t.INSIDE_ODD_WIDEST[O],I=9-T,N=Qf.getRSSvalue(f,T,!0),P=Qf.getRSSvalue(m,I,!1),z=t.INSIDE_ODD_TOTAL_SUBSET[O],L=t.INSIDE_GSUM[O];return new Vg(P*z+N+L,M)}},t.prototype.findFinderPattern=function(o,r){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var i=o.getSize(),n=!1,s=0;s<i&&(n=!o.get(s),r!==n);)s++;for(var l=0,u=s,c=s;c<i;c++)if(o.get(c)!==n)a[l]++;else{if(l===3){if(Ku.isFinderPattern(a))return[u,c];u+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,l--}else l++;a[l]=1,n=!n}throw new at},t.prototype.parseFoundFinderPattern=function(o,r,a,i){for(var n=o.get(i[0]),s=i[0]-1;s>=0&&n!==o.get(s);)s--;s++;var l=i[0]-s,u=this.getDecodeFinderCounters(),c=new Int32Array(u.length);Ta.arraycopy(u,0,c,1,u.length-1),c[0]=l;var d=this.parseFinderValue(c,t.FINDER_PATTERNS),f=s,m=i[1];return a&&(f=o.getSize()-1-f,m=o.getSize()-1-m),new iN(d,[s,i[1]],f,m,r)},t.prototype.adjustOddEvenCounts=function(o,r){var a=Ko.sum(new Int32Array(this.getOddCounts())),i=Ko.sum(new Int32Array(this.getEvenCounts())),n=!1,s=!1,l=!1,u=!1;o?(a>12?s=!0:a<4&&(n=!0),i>12?u=!0:i<4&&(l=!0)):(a>11?s=!0:a<5&&(n=!0),i>10?u=!0:i<4&&(l=!0));var c=a+i-r,d=(a&1)===(o?1:0),f=(i&1)===1;if(c===1)if(d){if(f)throw new at;s=!0}else{if(!f)throw new at;u=!0}else if(c===-1)if(d){if(f)throw new at;n=!0}else{if(!f)throw new at;l=!0}else if(c===0){if(d){if(!f)throw new at;a<i?(n=!0,u=!0):(s=!0,l=!0)}else if(f)throw new at}else throw new at;if(n){if(s)throw new at;Ku.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&Ku.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(u)throw new at;Ku.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&Ku.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],t.OUTSIDE_GSUM=[0,161,961,2015,2715],t.INSIDE_GSUM=[0,336,1036,1516],t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],t.INSIDE_ODD_WIDEST=[2,4,6,8],t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],t}(Ku),Ude=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),G0=function(e){Ude(t,e);function t(o){var r=e.call(this)||this;r.readers=[];var a=o?o.get(Ya.POSSIBLE_FORMATS):null,i=o&&o.get(Ya.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;return a&&((a.includes(no.EAN_13)||a.includes(no.UPC_A)||a.includes(no.EAN_8)||a.includes(no.UPC_E))&&r.readers.push(new Ny(o)),a.includes(no.CODE_39)&&r.readers.push(new lO(i)),a.includes(no.CODE_128)&&r.readers.push(new sO),a.includes(no.ITF)&&r.readers.push(new cO),a.includes(no.RSS_14)&&r.readers.push(new vO),a.includes(no.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new Bde))),r.readers.length===0&&(r.readers.push(new Ny(o)),r.readers.push(new lO),r.readers.push(new Ny(o)),r.readers.push(new sO),r.readers.push(new cO),r.readers.push(new vO)),r}return t.prototype.decodeRow=function(o,r,a){for(var i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(o,r,a)}catch{}throw new at},t.prototype.reset=function(){this.readers.forEach(function(o){return o.reset()})},t}(ri),zde=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}();(function(e){zde(t,e);function t(o,r){return o===void 0&&(o=500),e.call(this,new G0(r),o,r)||this}return t})(Qm);var gO=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},na=function(){function e(t,o,r){this.ecCodewords=t,this.ecBlocks=[o],r&&this.ecBlocks.push(r)}return e.prototype.getECCodewords=function(){return this.ecCodewords},e.prototype.getECBlocks=function(){return this.ecBlocks},e}(),ta=function(){function e(t,o){this.count=t,this.dataCodewords=o}return e.prototype.getCount=function(){return this.count},e.prototype.getDataCodewords=function(){return this.dataCodewords},e}(),Hde=function(){function e(t,o,r,a,i,n){var s,l;this.versionNumber=t,this.symbolSizeRows=o,this.symbolSizeColumns=r,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=i,this.ecBlocks=n;var u=0,c=n.getECCodewords(),d=n.getECBlocks();try{for(var f=gO(d),m=f.next();!m.done;m=f.next()){var p=m.value;u+=p.getCount()*(p.getDataCodewords()+c)}}catch(v){s={error:v}}finally{try{m&&!m.done&&(l=f.return)&&l.call(f)}finally{if(s)throw s.error}}this.totalCodewords=u}return e.prototype.getVersionNumber=function(){return this.versionNumber},e.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},e.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},e.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},e.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},e.prototype.getTotalCodewords=function(){return this.totalCodewords},e.prototype.getECBlocks=function(){return this.ecBlocks},e.getVersionForDimensions=function(t,o){var r,a;if((t&1)!==0||(o&1)!==0)throw new yt;try{for(var i=gO(e.VERSIONS),n=i.next();!n.done;n=i.next()){var s=n.value;if(s.symbolSizeRows===t&&s.symbolSizeColumns===o)return s}}catch(l){r={error:l}}finally{try{n&&!n.done&&(a=i.return)&&a.call(i)}finally{if(r)throw r.error}}throw new yt},e.prototype.toString=function(){return""+this.versionNumber},e.buildVersions=function(){return[new e(1,10,10,8,8,new na(5,new ta(1,3))),new e(2,12,12,10,10,new na(7,new ta(1,5))),new e(3,14,14,12,12,new na(10,new ta(1,8))),new e(4,16,16,14,14,new na(12,new ta(1,12))),new e(5,18,18,16,16,new na(14,new ta(1,18))),new e(6,20,20,18,18,new na(18,new ta(1,22))),new e(7,22,22,20,20,new na(20,new ta(1,30))),new e(8,24,24,22,22,new na(24,new ta(1,36))),new e(9,26,26,24,24,new na(28,new ta(1,44))),new e(10,32,32,14,14,new na(36,new ta(1,62))),new e(11,36,36,16,16,new na(42,new ta(1,86))),new e(12,40,40,18,18,new na(48,new ta(1,114))),new e(13,44,44,20,20,new na(56,new ta(1,144))),new e(14,48,48,22,22,new na(68,new ta(1,174))),new e(15,52,52,24,24,new na(42,new ta(2,102))),new e(16,64,64,14,14,new na(56,new ta(2,140))),new e(17,72,72,16,16,new na(36,new ta(4,92))),new e(18,80,80,18,18,new na(48,new ta(4,114))),new e(19,88,88,20,20,new na(56,new ta(4,144))),new e(20,96,96,22,22,new na(68,new ta(4,174))),new e(21,104,104,24,24,new na(56,new ta(6,136))),new e(22,120,120,18,18,new na(68,new ta(6,175))),new e(23,132,132,20,20,new na(62,new ta(8,163))),new e(24,144,144,22,22,new na(62,new ta(8,156),new ta(2,155))),new e(25,8,18,6,16,new na(7,new ta(1,5))),new e(26,8,32,6,14,new na(11,new ta(1,10))),new e(27,12,26,10,24,new na(14,new ta(1,16))),new e(28,12,36,10,16,new na(18,new ta(1,22))),new e(29,16,36,14,16,new na(24,new ta(1,32))),new e(30,16,48,14,22,new na(28,new ta(1,49)))]},e.VERSIONS=e.buildVersions(),e}(),jde=function(){function e(t){var o=t.getHeight();if(o<8||o>144||(o&1)!==0)throw new yt;this.version=e.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new oc(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return e.prototype.getVersion=function(){return this.version},e.readVersion=function(t){var o=t.getHeight(),r=t.getWidth();return Hde.getVersionForDimensions(o,r)},e.prototype.readCodewords=function(){var t=new Int8Array(this.version.getTotalCodewords()),o=0,r=4,a=0,i=this.mappingBitMatrix.getHeight(),n=this.mappingBitMatrix.getWidth(),s=!1,l=!1,u=!1,c=!1;do if(r===i&&a===0&&!s)t[o++]=this.readCorner1(i,n)&255,r-=2,a+=2,s=!0;else if(r===i-2&&a===0&&(n&3)!==0&&!l)t[o++]=this.readCorner2(i,n)&255,r-=2,a+=2,l=!0;else if(r===i+4&&a===2&&(n&7)===0&&!u)t[o++]=this.readCorner3(i,n)&255,r-=2,a+=2,u=!0;else if(r===i-2&&a===0&&(n&7)===4&&!c)t[o++]=this.readCorner4(i,n)&255,r-=2,a+=2,c=!0;else{do r<i&&a>=0&&!this.readMappingMatrix.get(a,r)&&(t[o++]=this.readUtah(r,a,i,n)&255),r-=2,a+=2;while(r>=0&&a<n);r+=1,a+=3;do r>=0&&a<n&&!this.readMappingMatrix.get(a,r)&&(t[o++]=this.readUtah(r,a,i,n)&255),r+=2,a-=2;while(r<i&&a>=0);r+=3,a+=1}while(r<i||a<n);if(o!==this.version.getTotalCodewords())throw new yt;return t},e.prototype.readModule=function(t,o,r,a){return t<0&&(t+=r,o+=4-(r+4&7)),o<0&&(o+=a,t+=4-(a+4&7)),this.readMappingMatrix.set(o,t),this.mappingBitMatrix.get(o,t)},e.prototype.readUtah=function(t,o,r,a){var i=0;return this.readModule(t-2,o-2,r,a)&&(i|=1),i<<=1,this.readModule(t-2,o-1,r,a)&&(i|=1),i<<=1,this.readModule(t-1,o-2,r,a)&&(i|=1),i<<=1,this.readModule(t-1,o-1,r,a)&&(i|=1),i<<=1,this.readModule(t-1,o,r,a)&&(i|=1),i<<=1,this.readModule(t,o-2,r,a)&&(i|=1),i<<=1,this.readModule(t,o-1,r,a)&&(i|=1),i<<=1,this.readModule(t,o,r,a)&&(i|=1),i},e.prototype.readCorner1=function(t,o){var r=0;return this.readModule(t-1,0,t,o)&&(r|=1),r<<=1,this.readModule(t-1,1,t,o)&&(r|=1),r<<=1,this.readModule(t-1,2,t,o)&&(r|=1),r<<=1,this.readModule(0,o-2,t,o)&&(r|=1),r<<=1,this.readModule(0,o-1,t,o)&&(r|=1),r<<=1,this.readModule(1,o-1,t,o)&&(r|=1),r<<=1,this.readModule(2,o-1,t,o)&&(r|=1),r<<=1,this.readModule(3,o-1,t,o)&&(r|=1),r},e.prototype.readCorner2=function(t,o){var r=0;return this.readModule(t-3,0,t,o)&&(r|=1),r<<=1,this.readModule(t-2,0,t,o)&&(r|=1),r<<=1,this.readModule(t-1,0,t,o)&&(r|=1),r<<=1,this.readModule(0,o-4,t,o)&&(r|=1),r<<=1,this.readModule(0,o-3,t,o)&&(r|=1),r<<=1,this.readModule(0,o-2,t,o)&&(r|=1),r<<=1,this.readModule(0,o-1,t,o)&&(r|=1),r<<=1,this.readModule(1,o-1,t,o)&&(r|=1),r},e.prototype.readCorner3=function(t,o){var r=0;return this.readModule(t-1,0,t,o)&&(r|=1),r<<=1,this.readModule(t-1,o-1,t,o)&&(r|=1),r<<=1,this.readModule(0,o-3,t,o)&&(r|=1),r<<=1,this.readModule(0,o-2,t,o)&&(r|=1),r<<=1,this.readModule(0,o-1,t,o)&&(r|=1),r<<=1,this.readModule(1,o-3,t,o)&&(r|=1),r<<=1,this.readModule(1,o-2,t,o)&&(r|=1),r<<=1,this.readModule(1,o-1,t,o)&&(r|=1),r},e.prototype.readCorner4=function(t,o){var r=0;return this.readModule(t-3,0,t,o)&&(r|=1),r<<=1,this.readModule(t-2,0,t,o)&&(r|=1),r<<=1,this.readModule(t-1,0,t,o)&&(r|=1),r<<=1,this.readModule(0,o-2,t,o)&&(r|=1),r<<=1,this.readModule(0,o-1,t,o)&&(r|=1),r<<=1,this.readModule(1,o-1,t,o)&&(r|=1),r<<=1,this.readModule(2,o-1,t,o)&&(r|=1),r<<=1,this.readModule(3,o-1,t,o)&&(r|=1),r},e.prototype.extractDataRegion=function(t){var o=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(t.getHeight()!==o)throw new so("Dimension of bitMatrix must match the version size");for(var a=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),n=o/a|0,s=r/i|0,l=n*a,u=s*i,c=new oc(u,l),d=0;d<n;++d)for(var f=d*a,m=0;m<s;++m)for(var p=m*i,v=0;v<a;++v)for(var g=d*(a+2)+1+v,x=f+v,b=0;b<i;++b){var _=m*(i+2)+1+b;if(t.get(_,g)){var w=p+b;c.set(w,x)}}return c},e}(),_O=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Gde=function(){function e(t,o){this.numDataCodewords=t,this.codewords=o}return e.getDataBlocks=function(t,o){var r,a,i,n,s=o.getECBlocks(),l=0,u=s.getECBlocks();try{for(var c=_O(u),d=c.next();!d.done;d=c.next()){var f=d.value;l+=f.getCount()}}catch(L){r={error:L}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(r)throw r.error}}var m=new Array(l),p=0;try{for(var v=_O(u),g=v.next();!g.done;g=v.next())for(var f=g.value,x=0;x<f.getCount();x++){var b=f.getDataCodewords(),_=s.getECCodewords()+b;m[p++]=new e(b,new Uint8Array(_))}}catch(L){i={error:L}}finally{try{g&&!g.done&&(n=v.return)&&n.call(v)}finally{if(i)throw i.error}}for(var w=m[0].codewords.length,S=w-s.getECCodewords(),D=S-1,M=0,x=0;x<D;x++)for(var O=0;O<p;O++)m[O].codewords[x]=t[M++];for(var T=o.getVersionNumber()===24,I=T?8:p,O=0;O<I;O++)m[O].codewords[S-1]=t[M++];for(var N=m[0].codewords.length,x=S;x<N;x++)for(var O=0;O<p;O++){var P=T?(O+8)%p:O,F=T&&P>7?x-1:x;m[P].codewords[F]=t[M++]}if(M!==t.length)throw new so;return m},e.prototype.getNumDataCodewords=function(){return this.numDataCodewords},e.prototype.getCodewords=function(){return this.codewords},e}(),lN=function(){function e(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}return e.prototype.getBitOffset=function(){return this.bitOffset},e.prototype.getByteOffset=function(){return this.byteOffset},e.prototype.readBits=function(t){if(t<1||t>32||t>this.available())throw new so(""+t);var o=0,r=this.bitOffset,a=this.byteOffset,i=this.bytes;if(r>0){var n=8-r,s=t<n?t:n,l=n-s,u=255>>8-s<<l;o=(i[a]&u)>>l,t-=s,r+=s,r===8&&(r=0,a++)}if(t>0){for(;t>=8;)o=o<<8|i[a]&255,a++,t-=8;if(t>0){var l=8-t,u=255>>l<<l;o=o<<t|(i[a]&u)>>l,r+=t}}return this.bitOffset=r,this.byteOffset=a,o},e.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},e}(),wr;(function(e){e[e.PAD_ENCODE=0]="PAD_ENCODE",e[e.ASCII_ENCODE=1]="ASCII_ENCODE",e[e.C40_ENCODE=2]="C40_ENCODE",e[e.TEXT_ENCODE=3]="TEXT_ENCODE",e[e.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",e[e.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",e[e.BASE256_ENCODE=6]="BASE256_ENCODE"})(wr||(wr={}));var Wde=function(){function e(){}return e.decode=function(t){var o=new lN(t),r=new ga,a=new ga,i=new Array,n=wr.ASCII_ENCODE;do if(n===wr.ASCII_ENCODE)n=this.decodeAsciiSegment(o,r,a);else{switch(n){case wr.C40_ENCODE:this.decodeC40Segment(o,r);break;case wr.TEXT_ENCODE:this.decodeTextSegment(o,r);break;case wr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,r);break;case wr.EDIFACT_ENCODE:this.decodeEdifactSegment(o,r);break;case wr.BASE256_ENCODE:this.decodeBase256Segment(o,r,i);break;default:throw new yt}n=wr.ASCII_ENCODE}while(n!==wr.PAD_ENCODE&&o.available()>0);return a.length()>0&&r.append(a.toString()),new db(t,r.toString(),i.length===0?null:i,null)},e.decodeAsciiSegment=function(t,o,r){var a=!1;do{var i=t.readBits(8);if(i===0)throw new yt;if(i<=128)return a&&(i+=128),o.append(String.fromCharCode(i-1)),wr.ASCII_ENCODE;if(i===129)return wr.PAD_ENCODE;if(i<=229){var n=i-130;n<10&&o.append("0"),o.append(""+n)}else switch(i){case 230:return wr.C40_ENCODE;case 231:return wr.BASE256_ENCODE;case 232:o.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:a=!0;break;case 236:o.append("[)>05"),r.insert(0,"");break;case 237:o.append("[)>06"),r.insert(0,"");break;case 238:return wr.ANSIX12_ENCODE;case 239:return wr.TEXT_ENCODE;case 240:return wr.EDIFACT_ENCODE;case 241:break;default:if(i!==254||t.available()!==0)throw new yt;break}}while(t.available()>0);return wr.ASCII_ENCODE},e.decodeC40Segment=function(t,o){var r=!1,a=[],i=0;do{if(t.available()===8)return;var n=t.readBits(8);if(n===254)return;this.parseTwoBytes(n,t.readBits(8),a);for(var s=0;s<3;s++){var l=a[s];switch(i){case 0:if(l<3)i=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[l];r?(o.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):o.append(u)}else throw new yt;break;case 1:r?(o.append(String.fromCharCode(l+128)),r=!1):o.append(String.fromCharCode(l)),i=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[l];r?(o.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):o.append(u)}else switch(l){case 27:o.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new yt}i=0;break;case 3:r?(o.append(String.fromCharCode(l+224)),r=!1):o.append(String.fromCharCode(l+96)),i=0;break;default:throw new yt}}}while(t.available()>0)},e.decodeTextSegment=function(t,o){var r=!1,a=[],i=0;do{if(t.available()===8)return;var n=t.readBits(8);if(n===254)return;this.parseTwoBytes(n,t.readBits(8),a);for(var s=0;s<3;s++){var l=a[s];switch(i){case 0:if(l<3)i=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[l];r?(o.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):o.append(u)}else throw new yt;break;case 1:r?(o.append(String.fromCharCode(l+128)),r=!1):o.append(String.fromCharCode(l)),i=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[l];r?(o.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):o.append(u)}else switch(l){case 27:o.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new yt}i=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[l];r?(o.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):o.append(u),i=0}else throw new yt;break;default:throw new yt}}}while(t.available()>0)},e.decodeAnsiX12Segment=function(t,o){var r=[];do{if(t.available()===8)return;var a=t.readBits(8);if(a===254)return;this.parseTwoBytes(a,t.readBits(8),r);for(var i=0;i<3;i++){var n=r[i];switch(n){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(n<14)o.append(String.fromCharCode(n+44));else if(n<40)o.append(String.fromCharCode(n+51));else throw new yt;break}}}while(t.available()>0)},e.parseTwoBytes=function(t,o,r){var a=(t<<8)+o-1,i=Math.floor(a/1600);r[0]=i,a-=i*1600,i=Math.floor(a/40),r[1]=i,r[2]=a-i*40},e.decodeEdifactSegment=function(t,o){do{if(t.available()<=16)return;for(var r=0;r<4;r++){var a=t.readBits(6);if(a===31){var i=8-t.getBitOffset();i!==8&&t.readBits(i);return}(a&32)===0&&(a|=64),o.append(String.fromCharCode(a))}}while(t.available()>0)},e.decodeBase256Segment=function(t,o,r){var a=1+t.getByteOffset(),i=this.unrandomize255State(t.readBits(8),a++),n;if(i===0?n=t.available()/8|0:i<250?n=i:n=250*(i-249)+this.unrandomize255State(t.readBits(8),a++),n<0)throw new yt;for(var s=new Uint8Array(n),l=0;l<n;l++){if(t.available()<8)throw new yt;s[l]=this.unrandomize255State(t.readBits(8),a++)}r.push(s);try{o.append(il.decode(s,Ur.ISO88591))}catch(u){throw new Xm("Platform does not support required encoding: "+u.message)}},e.unrandomize255State=function(t,o){var r=149*o%255+1,a=t-r;return a>=0?a:a+256},e.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],e.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],e.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],e.TEXT_SHIFT2_SET_CHARS=e.C40_SHIFT2_SET_CHARS,e.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)],e}(),Qde=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Xde=function(){function e(){this.rsDecoder=new fb(Hl.DATA_MATRIX_FIELD_256)}return e.prototype.decode=function(t){var o,r,a=new jde(t),i=a.getVersion(),n=a.readCodewords(),s=Gde.getDataBlocks(n,i),l=0;try{for(var u=Qde(s),c=u.next();!c.done;c=u.next()){var d=c.value;l+=d.getNumDataCodewords()}}catch(_){o={error:_}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(o)throw o.error}}for(var f=new Uint8Array(l),m=s.length,p=0;p<m;p++){var v=s[p],g=v.getCodewords(),x=v.getNumDataCodewords();this.correctErrors(g,x);for(var b=0;b<x;b++)f[b*m+p]=g[b]}return Wde.decode(f)},e.prototype.correctErrors=function(t,o){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-o)}catch{throw new ti}for(var a=0;a<o;a++)t[a]=r[a]},e}(),Kde=function(){function e(t){this.image=t,this.rectangleDetector=new TC(this.image)}return e.prototype.detect=function(){var t=this.rectangleDetector.detect(),o=this.detectSolid1(t);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new at;o=this.shiftToModuleCenter(o);var r=o[0],a=o[1],i=o[2],n=o[3],s=this.transitionsBetween(r,n)+1,l=this.transitionsBetween(i,n)+1;(s&1)===1&&(s+=1),(l&1)===1&&(l+=1),4*s<7*l&&4*l<7*s&&(s=l=Math.max(s,l));var u=e.sampleGrid(this.image,r,a,i,n,s,l);return new QS(u,[r,a,i,n])},e.shiftPoint=function(t,o,r){var a=(o.getX()-t.getX())/(r+1),i=(o.getY()-t.getY())/(r+1);return new Xt(t.getX()+a,t.getY()+i)},e.moveAway=function(t,o,r){var a=t.getX(),i=t.getY();return a<o?a-=1:a+=1,i<r?i-=1:i+=1,new Xt(a,i)},e.prototype.detectSolid1=function(t){var o=t[0],r=t[1],a=t[3],i=t[2],n=this.transitionsBetween(o,r),s=this.transitionsBetween(r,a),l=this.transitionsBetween(a,i),u=this.transitionsBetween(i,o),c=n,d=[i,o,r,a];return c>s&&(c=s,d[0]=o,d[1]=r,d[2]=a,d[3]=i),c>l&&(c=l,d[0]=r,d[1]=a,d[2]=i,d[3]=o),c>u&&(d[0]=a,d[1]=i,d[2]=o,d[3]=r),d},e.prototype.detectSolid2=function(t){var o=t[0],r=t[1],a=t[2],i=t[3],n=this.transitionsBetween(o,i),s=e.shiftPoint(r,a,(n+1)*4),l=e.shiftPoint(a,r,(n+1)*4),u=this.transitionsBetween(s,o),c=this.transitionsBetween(l,i);return u<c?(t[0]=o,t[1]=r,t[2]=a,t[3]=i):(t[0]=r,t[1]=a,t[2]=i,t[3]=o),t},e.prototype.correctTopRight=function(t){var o=t[0],r=t[1],a=t[2],i=t[3],n=this.transitionsBetween(o,i),s=this.transitionsBetween(r,i),l=e.shiftPoint(o,r,(s+1)*4),u=e.shiftPoint(a,r,(n+1)*4);n=this.transitionsBetween(l,i),s=this.transitionsBetween(u,i);var c=new Xt(i.getX()+(a.getX()-r.getX())/(n+1),i.getY()+(a.getY()-r.getY())/(n+1)),d=new Xt(i.getX()+(o.getX()-r.getX())/(s+1),i.getY()+(o.getY()-r.getY())/(s+1));if(!this.isValid(c))return this.isValid(d)?d:null;if(!this.isValid(d))return c;var f=this.transitionsBetween(l,c)+this.transitionsBetween(u,c),m=this.transitionsBetween(l,d)+this.transitionsBetween(u,d);return f>m?c:d},e.prototype.shiftToModuleCenter=function(t){var o=t[0],r=t[1],a=t[2],i=t[3],n=this.transitionsBetween(o,i)+1,s=this.transitionsBetween(a,i)+1,l=e.shiftPoint(o,r,s*4),u=e.shiftPoint(a,r,n*4);n=this.transitionsBetween(l,i)+1,s=this.transitionsBetween(u,i)+1,(n&1)===1&&(n+=1),(s&1)===1&&(s+=1);var c=(o.getX()+r.getX()+a.getX()+i.getX())/4,d=(o.getY()+r.getY()+a.getY()+i.getY())/4;o=e.moveAway(o,c,d),r=e.moveAway(r,c,d),a=e.moveAway(a,c,d),i=e.moveAway(i,c,d);var f,m;return l=e.shiftPoint(o,r,s*4),l=e.shiftPoint(l,i,n*4),f=e.shiftPoint(r,o,s*4),f=e.shiftPoint(f,a,n*4),u=e.shiftPoint(a,i,s*4),u=e.shiftPoint(u,r,n*4),m=e.shiftPoint(i,a,s*4),m=e.shiftPoint(m,o,n*4),[l,f,u,m]},e.prototype.isValid=function(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()},e.sampleGrid=function(t,o,r,a,i,n,s){var l=XS.getInstance();return l.sampleGrid(t,n,s,.5,.5,n-.5,.5,n-.5,s-.5,.5,s-.5,o.getX(),o.getY(),i.getX(),i.getY(),a.getX(),a.getY(),r.getX(),r.getY())},e.prototype.transitionsBetween=function(t,o){var r=Math.trunc(t.getX()),a=Math.trunc(t.getY()),i=Math.trunc(o.getX()),n=Math.trunc(o.getY()),s=Math.abs(n-a)>Math.abs(i-r);if(s){var l=r;r=a,a=l,l=i,i=n,n=l}for(var u=Math.abs(i-r),c=Math.abs(n-a),d=-u/2,f=a<n?1:-1,m=r<i?1:-1,p=0,v=this.image.get(s?a:r,s?r:a),g=r,x=a;g!==i;g+=m){var b=this.image.get(s?x:g,s?g:x);if(b!==v&&(p++,v=b),d+=c,d>0){if(x===n)break;x+=f,d-=u}}return p},e}(),PC=function(){function e(){this.decoder=new Xde}return e.prototype.decode=function(t,o){o===void 0&&(o=null);var r,a;if(o!=null&&o.has(Ya.PURE_BARCODE)){var i=e.extractPureBits(t.getBlackMatrix());r=this.decoder.decode(i),a=e.NO_POINTS}else{var n=new Kde(t.getBlackMatrix()).detect();r=this.decoder.decode(n.getBits()),a=n.getPoints()}var s=r.getRawBytes(),l=new pn(r.getText(),s,8*s.length,a,no.DATA_MATRIX,Ta.currentTimeMillis()),u=r.getByteSegments();u!=null&&l.putMetadata(ai.BYTE_SEGMENTS,u);var c=r.getECLevel();return c!=null&&l.putMetadata(ai.ERROR_CORRECTION_LEVEL,c),l},e.prototype.reset=function(){},e.extractPureBits=function(t){var o=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(o==null||r==null)throw new at;var a=this.moduleSize(o,t),i=o[1],n=r[1],s=o[0],l=r[0],u=(l-s+1)/a,c=(n-i+1)/a;if(u<=0||c<=0)throw new at;var d=a/2;i+=d,s+=d;for(var f=new oc(u,c),m=0;m<c;m++)for(var p=i+m*a,v=0;v<u;v++)t.get(s+v*a,p)&&f.set(v,m);return f},e.moduleSize=function(t,o){for(var r=o.getWidth(),a=t[0],i=t[1];a<r&&o.get(a,i);)a++;if(a===r)throw new at;var n=a-t[0];if(n===0)throw new at;return n},e.NO_POINTS=[],e}(),Yde=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}();(function(e){Yde(t,e);function t(o){return o===void 0&&(o=500),e.call(this,new PC,o)||this}return t})(Qm);var Xf;(function(e){e[e.L=0]="L",e[e.M=1]="M",e[e.Q=2]="Q",e[e.H=3]="H"})(Xf||(Xf={}));var FC=function(){function e(t,o,r){this.value=t,this.stringValue=o,this.bits=r,e.FOR_BITS.set(r,this),e.FOR_VALUE.set(t,this)}return e.prototype.getValue=function(){return this.value},e.prototype.getBits=function(){return this.bits},e.fromString=function(t){switch(t){case"L":return e.L;case"M":return e.M;case"Q":return e.Q;case"H":return e.H;default:throw new xs(t+"not available")}},e.prototype.toString=function(){return this.stringValue},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var o=t;return this.value===o.value},e.forBits=function(t){if(t<0||t>=e.FOR_BITS.size)throw new so;return e.FOR_BITS.get(t)},e.FOR_BITS=new Map,e.FOR_VALUE=new Map,e.L=new e(Xf.L,"L",1),e.M=new e(Xf.M,"M",0),e.Q=new e(Xf.Q,"Q",3),e.H=new e(Xf.H,"H",2),e}(),Jde=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},cN=function(){function e(t){this.errorCorrectionLevel=FC.forBits(t>>3&3),this.dataMask=t&7}return e.numBitsDiffering=function(t,o){return oi.bitCount(t^o)},e.decodeFormatInformation=function(t,o){var r=e.doDecodeFormatInformation(t,o);return r!==null?r:e.doDecodeFormatInformation(t^e.FORMAT_INFO_MASK_QR,o^e.FORMAT_INFO_MASK_QR)},e.doDecodeFormatInformation=function(t,o){var r,a,i=Number.MAX_SAFE_INTEGER,n=0;try{for(var s=Jde(e.FORMAT_INFO_DECODE_LOOKUP),l=s.next();!l.done;l=s.next()){var u=l.value,c=u[0];if(c===t||c===o)return new e(u[1]);var d=e.numBitsDiffering(t,c);d<i&&(n=u[1],i=d),t!==o&&(d=e.numBitsDiffering(o,c),d<i&&(n=u[1],i=d))}}catch(f){r={error:f}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(r)throw r.error}}return i<=3?new e(n):null},e.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},e.prototype.getDataMask=function(){return this.dataMask},e.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var o=t;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask},e.FORMAT_INFO_MASK_QR=21522,e.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],e}(),Zde=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ze=function(){function e(t){for(var o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];this.ecCodewordsPerBlock=t,this.ecBlocks=o}return e.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},e.prototype.getNumBlocks=function(){var t,o,r=0,a=this.ecBlocks;try{for(var i=Zde(a),n=i.next();!n.done;n=i.next()){var s=n.value;r+=s.getCount()}}catch(l){t={error:l}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(t)throw t.error}}return r},e.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},e.prototype.getECBlocks=function(){return this.ecBlocks},e}(),ge=function(){function e(t,o){this.count=t,this.dataCodewords=o}return e.prototype.getCount=function(){return this.count},e.prototype.getDataCodewords=function(){return this.dataCodewords},e}(),efe=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},xd=function(){function e(t,o){for(var r,a,i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];this.versionNumber=t,this.alignmentPatternCenters=o,this.ecBlocks=i;var s=0,l=i[0].getECCodewordsPerBlock(),u=i[0].getECBlocks();try{for(var c=efe(u),d=c.next();!d.done;d=c.next()){var f=d.value;s+=f.getCount()*(f.getDataCodewords()+l)}}catch(m){r={error:m}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(r)throw r.error}}this.totalCodewords=s}return e.prototype.getVersionNumber=function(){return this.versionNumber},e.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},e.prototype.getTotalCodewords=function(){return this.totalCodewords},e.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},e.prototype.getECBlocksForLevel=function(t){return this.ecBlocks[t.getValue()]},e.getProvisionalVersionForDimension=function(t){if(t%4!==1)throw new yt;try{return this.getVersionForNumber((t-17)/4)}catch{throw new yt}},e.getVersionForNumber=function(t){if(t<1||t>40)throw new so;return e.VERSIONS[t-1]},e.decodeVersionInformation=function(t){for(var o=Number.MAX_SAFE_INTEGER,r=0,a=0;a<e.VERSION_DECODE_INFO.length;a++){var i=e.VERSION_DECODE_INFO[a];if(i===t)return e.getVersionForNumber(a+7);var n=cN.numBitsDiffering(t,i);n<o&&(r=a+7,o=n)}return o<=3?e.getVersionForNumber(r):null},e.prototype.buildFunctionPattern=function(){var t=this.getDimensionForVersion(),o=new oc(t);o.setRegion(0,0,9,9),o.setRegion(t-8,0,8,9),o.setRegion(0,t-8,9,8);for(var r=this.alignmentPatternCenters.length,a=0;a<r;a++)for(var i=this.alignmentPatternCenters[a]-2,n=0;n<r;n++)a===0&&(n===0||n===r-1)||a===r-1&&n===0||o.setRegion(this.alignmentPatternCenters[n]-2,i,5,5);return o.setRegion(6,9,1,t-17),o.setRegion(9,6,t-17,1),this.versionNumber>6&&(o.setRegion(t-11,0,3,6),o.setRegion(0,t-11,6,3)),o},e.prototype.toString=function(){return""+this.versionNumber},e.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),e.VERSIONS=[new e(1,new Int32Array(0),new ze(7,new ge(1,19)),new ze(10,new ge(1,16)),new ze(13,new ge(1,13)),new ze(17,new ge(1,9))),new e(2,Int32Array.from([6,18]),new ze(10,new ge(1,34)),new ze(16,new ge(1,28)),new ze(22,new ge(1,22)),new ze(28,new ge(1,16))),new e(3,Int32Array.from([6,22]),new ze(15,new ge(1,55)),new ze(26,new ge(1,44)),new ze(18,new ge(2,17)),new ze(22,new ge(2,13))),new e(4,Int32Array.from([6,26]),new ze(20,new ge(1,80)),new ze(18,new ge(2,32)),new ze(26,new ge(2,24)),new ze(16,new ge(4,9))),new e(5,Int32Array.from([6,30]),new ze(26,new ge(1,108)),new ze(24,new ge(2,43)),new ze(18,new ge(2,15),new ge(2,16)),new ze(22,new ge(2,11),new ge(2,12))),new e(6,Int32Array.from([6,34]),new ze(18,new ge(2,68)),new ze(16,new ge(4,27)),new ze(24,new ge(4,19)),new ze(28,new ge(4,15))),new e(7,Int32Array.from([6,22,38]),new ze(20,new ge(2,78)),new ze(18,new ge(4,31)),new ze(18,new ge(2,14),new ge(4,15)),new ze(26,new ge(4,13),new ge(1,14))),new e(8,Int32Array.from([6,24,42]),new ze(24,new ge(2,97)),new ze(22,new ge(2,38),new ge(2,39)),new ze(22,new ge(4,18),new ge(2,19)),new ze(26,new ge(4,14),new ge(2,15))),new e(9,Int32Array.from([6,26,46]),new ze(30,new ge(2,116)),new ze(22,new ge(3,36),new ge(2,37)),new ze(20,new ge(4,16),new ge(4,17)),new ze(24,new ge(4,12),new ge(4,13))),new e(10,Int32Array.from([6,28,50]),new ze(18,new ge(2,68),new ge(2,69)),new ze(26,new ge(4,43),new ge(1,44)),new ze(24,new ge(6,19),new ge(2,20)),new ze(28,new ge(6,15),new ge(2,16))),new e(11,Int32Array.from([6,30,54]),new ze(20,new ge(4,81)),new ze(30,new ge(1,50),new ge(4,51)),new ze(28,new ge(4,22),new ge(4,23)),new ze(24,new ge(3,12),new ge(8,13))),new e(12,Int32Array.from([6,32,58]),new ze(24,new ge(2,92),new ge(2,93)),new ze(22,new ge(6,36),new ge(2,37)),new ze(26,new ge(4,20),new ge(6,21)),new ze(28,new ge(7,14),new ge(4,15))),new e(13,Int32Array.from([6,34,62]),new ze(26,new ge(4,107)),new ze(22,new ge(8,37),new ge(1,38)),new ze(24,new ge(8,20),new ge(4,21)),new ze(22,new ge(12,11),new ge(4,12))),new e(14,Int32Array.from([6,26,46,66]),new ze(30,new ge(3,115),new ge(1,116)),new ze(24,new ge(4,40),new ge(5,41)),new ze(20,new ge(11,16),new ge(5,17)),new ze(24,new ge(11,12),new ge(5,13))),new e(15,Int32Array.from([6,26,48,70]),new ze(22,new ge(5,87),new ge(1,88)),new ze(24,new ge(5,41),new ge(5,42)),new ze(30,new ge(5,24),new ge(7,25)),new ze(24,new ge(11,12),new ge(7,13))),new e(16,Int32Array.from([6,26,50,74]),new ze(24,new ge(5,98),new ge(1,99)),new ze(28,new ge(7,45),new ge(3,46)),new ze(24,new ge(15,19),new ge(2,20)),new ze(30,new ge(3,15),new ge(13,16))),new e(17,Int32Array.from([6,30,54,78]),new ze(28,new ge(1,107),new ge(5,108)),new ze(28,new ge(10,46),new ge(1,47)),new ze(28,new ge(1,22),new ge(15,23)),new ze(28,new ge(2,14),new ge(17,15))),new e(18,Int32Array.from([6,30,56,82]),new ze(30,new ge(5,120),new ge(1,121)),new ze(26,new ge(9,43),new ge(4,44)),new ze(28,new ge(17,22),new ge(1,23)),new ze(28,new ge(2,14),new ge(19,15))),new e(19,Int32Array.from([6,30,58,86]),new ze(28,new ge(3,113),new ge(4,114)),new ze(26,new ge(3,44),new ge(11,45)),new ze(26,new ge(17,21),new ge(4,22)),new ze(26,new ge(9,13),new ge(16,14))),new e(20,Int32Array.from([6,34,62,90]),new ze(28,new ge(3,107),new ge(5,108)),new ze(26,new ge(3,41),new ge(13,42)),new ze(30,new ge(15,24),new ge(5,25)),new ze(28,new ge(15,15),new ge(10,16))),new e(21,Int32Array.from([6,28,50,72,94]),new ze(28,new ge(4,116),new ge(4,117)),new ze(26,new ge(17,42)),new ze(28,new ge(17,22),new ge(6,23)),new ze(30,new ge(19,16),new ge(6,17))),new e(22,Int32Array.from([6,26,50,74,98]),new ze(28,new ge(2,111),new ge(7,112)),new ze(28,new ge(17,46)),new ze(30,new ge(7,24),new ge(16,25)),new ze(24,new ge(34,13))),new e(23,Int32Array.from([6,30,54,78,102]),new ze(30,new ge(4,121),new ge(5,122)),new ze(28,new ge(4,47),new ge(14,48)),new ze(30,new ge(11,24),new ge(14,25)),new ze(30,new ge(16,15),new ge(14,16))),new e(24,Int32Array.from([6,28,54,80,106]),new ze(30,new ge(6,117),new ge(4,118)),new ze(28,new ge(6,45),new ge(14,46)),new ze(30,new ge(11,24),new ge(16,25)),new ze(30,new ge(30,16),new ge(2,17))),new e(25,Int32Array.from([6,32,58,84,110]),new ze(26,new ge(8,106),new ge(4,107)),new ze(28,new ge(8,47),new ge(13,48)),new ze(30,new ge(7,24),new ge(22,25)),new ze(30,new ge(22,15),new ge(13,16))),new e(26,Int32Array.from([6,30,58,86,114]),new ze(28,new ge(10,114),new ge(2,115)),new ze(28,new ge(19,46),new ge(4,47)),new ze(28,new ge(28,22),new ge(6,23)),new ze(30,new ge(33,16),new ge(4,17))),new e(27,Int32Array.from([6,34,62,90,118]),new ze(30,new ge(8,122),new ge(4,123)),new ze(28,new ge(22,45),new ge(3,46)),new ze(30,new ge(8,23),new ge(26,24)),new ze(30,new ge(12,15),new ge(28,16))),new e(28,Int32Array.from([6,26,50,74,98,122]),new ze(30,new ge(3,117),new ge(10,118)),new ze(28,new ge(3,45),new ge(23,46)),new ze(30,new ge(4,24),new ge(31,25)),new ze(30,new ge(11,15),new ge(31,16))),new e(29,Int32Array.from([6,30,54,78,102,126]),new ze(30,new ge(7,116),new ge(7,117)),new ze(28,new ge(21,45),new ge(7,46)),new ze(30,new ge(1,23),new ge(37,24)),new ze(30,new ge(19,15),new ge(26,16))),new e(30,Int32Array.from([6,26,52,78,104,130]),new ze(30,new ge(5,115),new ge(10,116)),new ze(28,new ge(19,47),new ge(10,48)),new ze(30,new ge(15,24),new ge(25,25)),new ze(30,new ge(23,15),new ge(25,16))),new e(31,Int32Array.from([6,30,56,82,108,134]),new ze(30,new ge(13,115),new ge(3,116)),new ze(28,new ge(2,46),new ge(29,47)),new ze(30,new ge(42,24),new ge(1,25)),new ze(30,new ge(23,15),new ge(28,16))),new e(32,Int32Array.from([6,34,60,86,112,138]),new ze(30,new ge(17,115)),new ze(28,new ge(10,46),new ge(23,47)),new ze(30,new ge(10,24),new ge(35,25)),new ze(30,new ge(19,15),new ge(35,16))),new e(33,Int32Array.from([6,30,58,86,114,142]),new ze(30,new ge(17,115),new ge(1,116)),new ze(28,new ge(14,46),new ge(21,47)),new ze(30,new ge(29,24),new ge(19,25)),new ze(30,new ge(11,15),new ge(46,16))),new e(34,Int32Array.from([6,34,62,90,118,146]),new ze(30,new ge(13,115),new ge(6,116)),new ze(28,new ge(14,46),new ge(23,47)),new ze(30,new ge(44,24),new ge(7,25)),new ze(30,new ge(59,16),new ge(1,17))),new e(35,Int32Array.from([6,30,54,78,102,126,150]),new ze(30,new ge(12,121),new ge(7,122)),new ze(28,new ge(12,47),new ge(26,48)),new ze(30,new ge(39,24),new ge(14,25)),new ze(30,new ge(22,15),new ge(41,16))),new e(36,Int32Array.from([6,24,50,76,102,128,154]),new ze(30,new ge(6,121),new ge(14,122)),new ze(28,new ge(6,47),new ge(34,48)),new ze(30,new ge(46,24),new ge(10,25)),new ze(30,new ge(2,15),new ge(64,16))),new e(37,Int32Array.from([6,28,54,80,106,132,158]),new ze(30,new ge(17,122),new ge(4,123)),new ze(28,new ge(29,46),new ge(14,47)),new ze(30,new ge(49,24),new ge(10,25)),new ze(30,new ge(24,15),new ge(46,16))),new e(38,Int32Array.from([6,32,58,84,110,136,162]),new ze(30,new ge(4,122),new ge(18,123)),new ze(28,new ge(13,46),new ge(32,47)),new ze(30,new ge(48,24),new ge(14,25)),new ze(30,new ge(42,15),new ge(32,16))),new e(39,Int32Array.from([6,26,54,82,110,138,166]),new ze(30,new ge(20,117),new ge(4,118)),new ze(28,new ge(40,47),new ge(7,48)),new ze(30,new ge(43,24),new ge(22,25)),new ze(30,new ge(10,15),new ge(67,16))),new e(40,Int32Array.from([6,30,58,86,114,142,170]),new ze(30,new ge(19,118),new ge(6,119)),new ze(28,new ge(18,47),new ge(31,48)),new ze(30,new ge(34,24),new ge(34,25)),new ze(30,new ge(20,15),new ge(61,16)))],e}(),$r;(function(e){e[e.DATA_MASK_000=0]="DATA_MASK_000",e[e.DATA_MASK_001=1]="DATA_MASK_001",e[e.DATA_MASK_010=2]="DATA_MASK_010",e[e.DATA_MASK_011=3]="DATA_MASK_011",e[e.DATA_MASK_100=4]="DATA_MASK_100",e[e.DATA_MASK_101=5]="DATA_MASK_101",e[e.DATA_MASK_110=6]="DATA_MASK_110",e[e.DATA_MASK_111=7]="DATA_MASK_111"})($r||($r={}));var bO=function(){function e(t,o){this.value=t,this.isMasked=o}return e.prototype.unmaskBitMatrix=function(t,o){for(var r=0;r<o;r++)for(var a=0;a<o;a++)this.isMasked(r,a)&&t.flip(a,r)},e.values=new Map([[$r.DATA_MASK_000,new e($r.DATA_MASK_000,function(t,o){return(t+o&1)===0})],[$r.DATA_MASK_001,new e($r.DATA_MASK_001,function(t,o){return(t&1)===0})],[$r.DATA_MASK_010,new e($r.DATA_MASK_010,function(t,o){return o%3===0})],[$r.DATA_MASK_011,new e($r.DATA_MASK_011,function(t,o){return(t+o)%3===0})],[$r.DATA_MASK_100,new e($r.DATA_MASK_100,function(t,o){return(Math.floor(t/2)+Math.floor(o/3)&1)===0})],[$r.DATA_MASK_101,new e($r.DATA_MASK_101,function(t,o){return t*o%6===0})],[$r.DATA_MASK_110,new e($r.DATA_MASK_110,function(t,o){return t*o%6<3})],[$r.DATA_MASK_111,new e($r.DATA_MASK_111,function(t,o){return(t+o+t*o%3&1)===0})]]),e}(),tfe=function(){function e(t){var o=t.getHeight();if(o<21||(o&3)!==1)throw new yt;this.bitMatrix=t}return e.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var t=0,o=0;o<6;o++)t=this.copyBit(o,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(var r=5;r>=0;r--)t=this.copyBit(8,r,t);for(var a=this.bitMatrix.getHeight(),i=0,n=a-7,r=a-1;r>=n;r--)i=this.copyBit(8,r,i);for(var o=a-8;o<a;o++)i=this.copyBit(o,8,i);if(this.parsedFormatInfo=cN.decodeFormatInformation(t,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new yt},e.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var t=this.bitMatrix.getHeight(),o=Math.floor((t-17)/4);if(o<=6)return xd.getVersionForNumber(o);for(var r=0,a=t-11,i=5;i>=0;i--)for(var n=t-9;n>=a;n--)r=this.copyBit(n,i,r);var s=xd.decodeVersionInformation(r);if(s!==null&&s.getDimensionForVersion()===t)return this.parsedVersion=s,s;r=0;for(var n=5;n>=0;n--)for(var i=t-9;i>=a;i--)r=this.copyBit(n,i,r);if(s=xd.decodeVersionInformation(r),s!==null&&s.getDimensionForVersion()===t)return this.parsedVersion=s,s;throw new yt},e.prototype.copyBit=function(t,o,r){var a=this.isMirror?this.bitMatrix.get(o,t):this.bitMatrix.get(t,o);return a?r<<1|1:r<<1},e.prototype.readCodewords=function(){var t=this.readFormatInformation(),o=this.readVersion(),r=bO.values.get(t.getDataMask()),a=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,a);for(var i=o.buildFunctionPattern(),n=!0,s=new Uint8Array(o.getTotalCodewords()),l=0,u=0,c=0,d=a-1;d>0;d-=2){d===6&&d--;for(var f=0;f<a;f++)for(var m=n?a-1-f:f,p=0;p<2;p++)i.get(d-p,m)||(c++,u<<=1,this.bitMatrix.get(d-p,m)&&(u|=1),c===8&&(s[l++]=u,c=0,u=0));n=!n}if(l!==o.getTotalCodewords())throw new yt;return s},e.prototype.remask=function(){if(this.parsedFormatInfo!==null){var t=bO.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,o)}},e.prototype.setMirror=function(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t},e.prototype.mirror=function(){for(var t=this.bitMatrix,o=0,r=t.getWidth();o<r;o++)for(var a=o+1,i=t.getHeight();a<i;a++)t.get(o,a)!==t.get(a,o)&&(t.flip(a,o),t.flip(o,a))},e}(),yO=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ofe=function(){function e(t,o){this.numDataCodewords=t,this.codewords=o}return e.getDataBlocks=function(t,o,r){var a,i,n,s;if(t.length!==o.getTotalCodewords())throw new so;var l=o.getECBlocksForLevel(r),u=0,c=l.getECBlocks();try{for(var d=yO(c),f=d.next();!f.done;f=d.next()){var m=f.value;u+=m.getCount()}}catch(F){a={error:F}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}var p=new Array(u),v=0;try{for(var g=yO(c),x=g.next();!x.done;x=g.next())for(var m=x.value,b=0;b<m.getCount();b++){var _=m.getDataCodewords(),w=l.getECCodewordsPerBlock()+_;p[v++]=new e(_,new Uint8Array(w))}}catch(F){n={error:F}}finally{try{x&&!x.done&&(s=g.return)&&s.call(g)}finally{if(n)throw n.error}}for(var S=p[0].codewords.length,D=p.length-1;D>=0;){var M=p[D].codewords.length;if(M===S)break;D--}D++;for(var O=S-l.getECCodewordsPerBlock(),T=0,b=0;b<O;b++)for(var I=0;I<v;I++)p[I].codewords[b]=t[T++];for(var I=D;I<v;I++)p[I].codewords[O]=t[T++];for(var N=p[0].codewords.length,b=O;b<N;b++)for(var I=0;I<v;I++){var P=I<D?b:b+1;p[I].codewords[P]=t[T++]}return p},e.prototype.getNumDataCodewords=function(){return this.numDataCodewords},e.prototype.getCodewords=function(){return this.codewords},e}(),Yn;(function(e){e[e.TERMINATOR=0]="TERMINATOR",e[e.NUMERIC=1]="NUMERIC",e[e.ALPHANUMERIC=2]="ALPHANUMERIC",e[e.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",e[e.BYTE=4]="BYTE",e[e.ECI=5]="ECI",e[e.KANJI=6]="KANJI",e[e.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",e[e.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",e[e.HANZI=9]="HANZI"})(Yn||(Yn={}));var Fa=function(){function e(t,o,r,a){this.value=t,this.stringValue=o,this.characterCountBitsForVersions=r,this.bits=a,e.FOR_BITS.set(a,this),e.FOR_VALUE.set(t,this)}return e.forBits=function(t){var o=e.FOR_BITS.get(t);if(o===void 0)throw new so;return o},e.prototype.getCharacterCountBits=function(t){var o=t.getVersionNumber(),r;return o<=9?r=0:o<=26?r=1:r=2,this.characterCountBitsForVersions[r]},e.prototype.getValue=function(){return this.value},e.prototype.getBits=function(){return this.bits},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var o=t;return this.value===o.value},e.prototype.toString=function(){return this.stringValue},e.FOR_BITS=new Map,e.FOR_VALUE=new Map,e.TERMINATOR=new e(Yn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),e.NUMERIC=new e(Yn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),e.ALPHANUMERIC=new e(Yn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),e.STRUCTURED_APPEND=new e(Yn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),e.BYTE=new e(Yn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),e.ECI=new e(Yn.ECI,"ECI",Int32Array.from([0,0,0]),7),e.KANJI=new e(Yn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),e.FNC1_FIRST_POSITION=new e(Yn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),e.FNC1_SECOND_POSITION=new e(Yn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),e.HANZI=new e(Yn.HANZI,"HANZI",Int32Array.from([8,10,12]),13),e}(),afe=function(){function e(){}return e.decode=function(t,o,r,a){var i=new lN(t),n=new ga,s=new Array,l=-1,u=-1;try{var c=null,d=!1,f=void 0;do{if(i.available()<4)f=Fa.TERMINATOR;else{var m=i.readBits(4);f=Fa.forBits(m)}switch(f){case Fa.TERMINATOR:break;case Fa.FNC1_FIRST_POSITION:case Fa.FNC1_SECOND_POSITION:d=!0;break;case Fa.STRUCTURED_APPEND:if(i.available()<16)throw new yt;l=i.readBits(8),u=i.readBits(8);break;case Fa.ECI:var p=e.parseECIValue(i);if(c=Ar.getCharacterSetECIByValue(p),c===null)throw new yt;break;case Fa.HANZI:var v=i.readBits(4),g=i.readBits(f.getCharacterCountBits(o));v===e.GB2312_SUBSET&&e.decodeHanziSegment(i,n,g);break;default:var x=i.readBits(f.getCharacterCountBits(o));switch(f){case Fa.NUMERIC:e.decodeNumericSegment(i,n,x);break;case Fa.ALPHANUMERIC:e.decodeAlphanumericSegment(i,n,x,d);break;case Fa.BYTE:e.decodeByteSegment(i,n,x,c,s,a);break;case Fa.KANJI:e.decodeKanjiSegment(i,n,x);break;default:throw new yt}break}}while(f!==Fa.TERMINATOR)}catch{throw new yt}return new db(t,n.toString(),s.length===0?null:s,r===null?null:r.toString(),l,u)},e.decodeHanziSegment=function(t,o,r){if(r*13>t.available())throw new yt;for(var a=new Uint8Array(2*r),i=0;r>0;){var n=t.readBits(13),s=n/96<<8&4294967295|n%96;s<959?s+=41377:s+=42657,a[i]=s>>8&255,a[i+1]=s&255,i+=2,r--}try{o.append(il.decode(a,Ur.GB2312))}catch(l){throw new yt(l)}},e.decodeKanjiSegment=function(t,o,r){if(r*13>t.available())throw new yt;for(var a=new Uint8Array(2*r),i=0;r>0;){var n=t.readBits(13),s=n/192<<8&4294967295|n%192;s<7936?s+=33088:s+=49472,a[i]=s>>8,a[i+1]=s,i+=2,r--}try{o.append(il.decode(a,Ur.SHIFT_JIS))}catch(l){throw new yt(l)}},e.decodeByteSegment=function(t,o,r,a,i,n){if(8*r>t.available())throw new yt;for(var s=new Uint8Array(r),l=0;l<r;l++)s[l]=t.readBits(8);var u;a===null?u=Ur.guessEncoding(s,n):u=a.getName();try{o.append(il.decode(s,u))}catch(c){throw new yt(c)}i.push(s)},e.toAlphaNumericChar=function(t){if(t>=e.ALPHANUMERIC_CHARS.length)throw new yt;return e.ALPHANUMERIC_CHARS[t]},e.decodeAlphanumericSegment=function(t,o,r,a){for(var i=o.length();r>1;){if(t.available()<11)throw new yt;var n=t.readBits(11);o.append(e.toAlphaNumericChar(Math.floor(n/45))),o.append(e.toAlphaNumericChar(n%45)),r-=2}if(r===1){if(t.available()<6)throw new yt;o.append(e.toAlphaNumericChar(t.readBits(6)))}if(a)for(var s=i;s<o.length();s++)o.charAt(s)==="%"&&(s<o.length()-1&&o.charAt(s+1)==="%"?o.deleteCharAt(s+1):o.setCharAt(s,String.fromCharCode(29)))},e.decodeNumericSegment=function(t,o,r){for(;r>=3;){if(t.available()<10)throw new yt;var a=t.readBits(10);if(a>=1e3)throw new yt;o.append(e.toAlphaNumericChar(Math.floor(a/100))),o.append(e.toAlphaNumericChar(Math.floor(a/10)%10)),o.append(e.toAlphaNumericChar(a%10)),r-=3}if(r===2){if(t.available()<7)throw new yt;var i=t.readBits(7);if(i>=100)throw new yt;o.append(e.toAlphaNumericChar(Math.floor(i/10))),o.append(e.toAlphaNumericChar(i%10))}else if(r===1){if(t.available()<4)throw new yt;var n=t.readBits(4);if(n>=10)throw new yt;o.append(e.toAlphaNumericChar(n))}},e.parseECIValue=function(t){var o=t.readBits(8);if((o&128)===0)return o&127;if((o&192)===128){var r=t.readBits(8);return(o&63)<<8&4294967295|r}if((o&224)===192){var a=t.readBits(16);return(o&31)<<16&4294967295|a}throw new yt},e.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.GB2312_SUBSET=1,e}(),uN=function(){function e(t){this.mirrored=t}return e.prototype.isMirrored=function(){return this.mirrored},e.prototype.applyMirroredCorrection=function(t){if(!(!this.mirrored||t===null||t.length<3)){var o=t[0];t[0]=t[2],t[2]=o}},e}(),xO=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},rfe=function(){function e(){this.rsDecoder=new fb(Hl.QR_CODE_FIELD_256)}return e.prototype.decodeBooleanArray=function(t,o){return this.decodeBitMatrix(oc.parseFromBooleanArray(t),o)},e.prototype.decodeBitMatrix=function(t,o){var r=new tfe(t),a=null;try{return this.decodeBitMatrixParser(r,o)}catch(n){a=n}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var i=this.decodeBitMatrixParser(r,o);return i.setOther(new uN(!0)),i}catch(n){throw a!==null?a:n}},e.prototype.decodeBitMatrixParser=function(t,o){var r,a,i,n,s=t.readVersion(),l=t.readFormatInformation().getErrorCorrectionLevel(),u=t.readCodewords(),c=ofe.getDataBlocks(u,s,l),d=0;try{for(var f=xO(c),m=f.next();!m.done;m=f.next()){var p=m.value;d+=p.getNumDataCodewords()}}catch(D){r={error:D}}finally{try{m&&!m.done&&(a=f.return)&&a.call(f)}finally{if(r)throw r.error}}var v=new Uint8Array(d),g=0;try{for(var x=xO(c),b=x.next();!b.done;b=x.next()){var p=b.value,_=p.getCodewords(),w=p.getNumDataCodewords();this.correctErrors(_,w);for(var S=0;S<w;S++)v[g++]=_[S]}}catch(D){i={error:D}}finally{try{b&&!b.done&&(n=x.return)&&n.call(x)}finally{if(i)throw i.error}}return afe.decode(v,s,l,o)},e.prototype.correctErrors=function(t,o){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-o)}catch{throw new ti}for(var a=0;a<o;a++)t[a]=r[a]},e}(),ife=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),nfe=function(e){ife(t,e);function t(o,r,a){var i=e.call(this,o,r)||this;return i.estimatedModuleSize=a,i}return t.prototype.aboutEquals=function(o,r,a){if(Math.abs(r-this.getY())<=o&&Math.abs(a-this.getX())<=o){var i=Math.abs(o-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(o,r,a){var i=(this.getX()+r)/2,n=(this.getY()+o)/2,s=(this.estimatedModuleSize+a)/2;return new t(i,n,s)},t}(Xt),sfe=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},lfe=function(){function e(t,o,r,a,i,n,s){this.image=t,this.startX=o,this.startY=r,this.width=a,this.height=i,this.moduleSize=n,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return e.prototype.find=function(){for(var t=this.startX,o=this.height,r=this.width,a=t+r,i=this.startY+o/2,n=new Int32Array(3),s=this.image,l=0;l<o;l++){var u=i+((l&1)===0?Math.floor((l+1)/2):-Math.floor((l+1)/2));n[0]=0,n[1]=0,n[2]=0;for(var c=t;c<a&&!s.get(c,u);)c++;for(var d=0;c<a;){if(s.get(c,u))if(d===1)n[1]++;else if(d===2){if(this.foundPatternCross(n)){var f=this.handlePossibleCenter(n,u,c);if(f!==null)return f}n[0]=n[2],n[1]=1,n[2]=0,d=1}else n[++d]++;else d===1&&d++,n[d]++;c++}if(this.foundPatternCross(n)){var f=this.handlePossibleCenter(n,u,a);if(f!==null)return f}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new at},e.centerFromEnd=function(t,o){return o-t[2]-t[1]/2},e.prototype.foundPatternCross=function(t){for(var o=this.moduleSize,r=o/2,a=0;a<3;a++)if(Math.abs(o-t[a])>=r)return!1;return!0},e.prototype.crossCheckVertical=function(t,o,r,a){var i=this.image,n=i.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var l=t;l>=0&&i.get(o,l)&&s[1]<=r;)s[1]++,l--;if(l<0||s[1]>r)return NaN;for(;l>=0&&!i.get(o,l)&&s[0]<=r;)s[0]++,l--;if(s[0]>r)return NaN;for(l=t+1;l<n&&i.get(o,l)&&s[1]<=r;)s[1]++,l++;if(l===n||s[1]>r)return NaN;for(;l<n&&!i.get(o,l)&&s[2]<=r;)s[2]++,l++;if(s[2]>r)return NaN;var u=s[0]+s[1]+s[2];return 5*Math.abs(u-a)>=2*a?NaN:this.foundPatternCross(s)?e.centerFromEnd(s,l):NaN},e.prototype.handlePossibleCenter=function(t,o,r){var a,i,n=t[0]+t[1]+t[2],s=e.centerFromEnd(t,r),l=this.crossCheckVertical(o,s,2*t[1],n);if(!isNaN(l)){var u=(t[0]+t[1]+t[2])/3;try{for(var c=sfe(this.possibleCenters),d=c.next();!d.done;d=c.next()){var f=d.value;if(f.aboutEquals(u,l,s))return f.combineEstimate(l,s,u)}}catch(p){a={error:p}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(a)throw a.error}}var m=new nfe(s,l,u);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null},e}(),cfe=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),ufe=function(e){cfe(t,e);function t(o,r,a,i){var n=e.call(this,o,r)||this;return n.estimatedModuleSize=a,n.count=i,i===void 0&&(n.count=1),n}return t.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},t.prototype.getCount=function(){return this.count},t.prototype.aboutEquals=function(o,r,a){if(Math.abs(r-this.getY())<=o&&Math.abs(a-this.getX())<=o){var i=Math.abs(o-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(o,r,a){var i=this.count+1,n=(this.count*this.getX()+r)/i,s=(this.count*this.getY()+o)/i,l=(this.count*this.estimatedModuleSize+a)/i;return new t(n,s,l,i)},t}(Xt),dfe=function(){function e(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}return e.prototype.getBottomLeft=function(){return this.bottomLeft},e.prototype.getTopLeft=function(){return this.topLeft},e.prototype.getTopRight=function(){return this.topRight},e}(),O0=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ffe=function(){function e(t,o){this.image=t,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}return e.prototype.getImage=function(){return this.image},e.prototype.getPossibleCenters=function(){return this.possibleCenters},e.prototype.find=function(t){var o=t!=null&&t.get(Ya.TRY_HARDER)!==void 0,r=t!=null&&t.get(Ya.PURE_BARCODE)!==void 0,a=this.image,i=a.getHeight(),n=a.getWidth(),s=Math.floor(3*i/(4*e.MAX_MODULES));(s<e.MIN_SKIP||o)&&(s=e.MIN_SKIP);for(var l=!1,u=new Int32Array(5),c=s-1;c<i&&!l;c+=s){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var d=0,f=0;f<n;f++)if(a.get(f,c))(d&1)===1&&d++,u[d]++;else if((d&1)===0)if(d===4)if(e.foundPatternCross(u)){var m=this.handlePossibleCenter(u,c,f,r);if(m===!0)if(s=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var p=this.findRowSkip();p>u[2]&&(c+=p-u[2]-s,f=n-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,d=3;continue}d=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,d=3;else u[++d]++;else u[d]++;if(e.foundPatternCross(u)){var m=this.handlePossibleCenter(u,c,n,r);m===!0&&(s=u[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var v=this.selectBestPatterns();return Xt.orderBestPatterns(v),new dfe(v)},e.centerFromEnd=function(t,o){return o-t[4]-t[3]-t[2]/2},e.foundPatternCross=function(t){for(var o=0,r=0;r<5;r++){var a=t[r];if(a===0)return!1;o+=a}if(o<7)return!1;var i=o/7,n=i/2;return Math.abs(i-t[0])<n&&Math.abs(i-t[1])<n&&Math.abs(3*i-t[2])<3*n&&Math.abs(i-t[3])<n&&Math.abs(i-t[4])<n},e.prototype.getCrossCheckStateCount=function(){var t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t},e.prototype.crossCheckDiagonal=function(t,o,r,a){for(var i=this.getCrossCheckStateCount(),n=0,s=this.image;t>=n&&o>=n&&s.get(o-n,t-n);)i[2]++,n++;if(t<n||o<n)return!1;for(;t>=n&&o>=n&&!s.get(o-n,t-n)&&i[1]<=r;)i[1]++,n++;if(t<n||o<n||i[1]>r)return!1;for(;t>=n&&o>=n&&s.get(o-n,t-n)&&i[0]<=r;)i[0]++,n++;if(i[0]>r)return!1;var l=s.getHeight(),u=s.getWidth();for(n=1;t+n<l&&o+n<u&&s.get(o+n,t+n);)i[2]++,n++;if(t+n>=l||o+n>=u)return!1;for(;t+n<l&&o+n<u&&!s.get(o+n,t+n)&&i[3]<r;)i[3]++,n++;if(t+n>=l||o+n>=u||i[3]>=r)return!1;for(;t+n<l&&o+n<u&&s.get(o+n,t+n)&&i[4]<r;)i[4]++,n++;if(i[4]>=r)return!1;var c=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(c-a)<2*a&&e.foundPatternCross(i)},e.prototype.crossCheckVertical=function(t,o,r,a){for(var i=this.image,n=i.getHeight(),s=this.getCrossCheckStateCount(),l=t;l>=0&&i.get(o,l);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!i.get(o,l)&&s[1]<=r;)s[1]++,l--;if(l<0||s[1]>r)return NaN;for(;l>=0&&i.get(o,l)&&s[0]<=r;)s[0]++,l--;if(s[0]>r)return NaN;for(l=t+1;l<n&&i.get(o,l);)s[2]++,l++;if(l===n)return NaN;for(;l<n&&!i.get(o,l)&&s[3]<r;)s[3]++,l++;if(l===n||s[3]>=r)return NaN;for(;l<n&&i.get(o,l)&&s[4]<r;)s[4]++,l++;if(s[4]>=r)return NaN;var u=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(u-a)>=2*a?NaN:e.foundPatternCross(s)?e.centerFromEnd(s,l):NaN},e.prototype.crossCheckHorizontal=function(t,o,r,a){for(var i=this.image,n=i.getWidth(),s=this.getCrossCheckStateCount(),l=t;l>=0&&i.get(l,o);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!i.get(l,o)&&s[1]<=r;)s[1]++,l--;if(l<0||s[1]>r)return NaN;for(;l>=0&&i.get(l,o)&&s[0]<=r;)s[0]++,l--;if(s[0]>r)return NaN;for(l=t+1;l<n&&i.get(l,o);)s[2]++,l++;if(l===n)return NaN;for(;l<n&&!i.get(l,o)&&s[3]<r;)s[3]++,l++;if(l===n||s[3]>=r)return NaN;for(;l<n&&i.get(l,o)&&s[4]<r;)s[4]++,l++;if(s[4]>=r)return NaN;var u=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(u-a)>=a?NaN:e.foundPatternCross(s)?e.centerFromEnd(s,l):NaN},e.prototype.handlePossibleCenter=function(t,o,r,a){var i=t[0]+t[1]+t[2]+t[3]+t[4],n=e.centerFromEnd(t,r),s=this.crossCheckVertical(o,Math.floor(n),t[2],i);if(!isNaN(s)&&(n=this.crossCheckHorizontal(Math.floor(n),Math.floor(s),t[2],i),!isNaN(n)&&(!a||this.crossCheckDiagonal(Math.floor(s),Math.floor(n),t[2],i)))){for(var l=i/7,u=!1,c=this.possibleCenters,d=0,f=c.length;d<f;d++){var m=c[d];if(m.aboutEquals(l,s,n)){c[d]=m.combineEstimate(s,n,l),u=!0;break}}if(!u){var p=new ufe(n,s,l);c.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return!0}return!1},e.prototype.findRowSkip=function(){var t,o,r=this.possibleCenters.length;if(r<=1)return 0;var a=null;try{for(var i=O0(this.possibleCenters),n=i.next();!n.done;n=i.next()){var s=n.value;if(s.getCount()>=e.CENTER_QUORUM)if(a==null)a=s;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-s.getX())-Math.abs(a.getY()-s.getY()))/2)}}catch(l){t={error:l}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(t)throw t.error}}return 0},e.prototype.haveMultiplyConfirmedCenters=function(){var t,o,r,a,i=0,n=0,s=this.possibleCenters.length;try{for(var l=O0(this.possibleCenters),u=l.next();!u.done;u=l.next()){var c=u.value;c.getCount()>=e.CENTER_QUORUM&&(i++,n+=c.getEstimatedModuleSize())}}catch(v){t={error:v}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(t)throw t.error}}if(i<3)return!1;var d=n/s,f=0;try{for(var m=O0(this.possibleCenters),p=m.next();!p.done;p=m.next()){var c=p.value;f+=Math.abs(c.getEstimatedModuleSize()-d)}}catch(v){r={error:v}}finally{try{p&&!p.done&&(a=m.return)&&a.call(m)}finally{if(r)throw r.error}}return f<=.05*n},e.prototype.selectBestPatterns=function(){var t,o,r,a,i=this.possibleCenters.length;if(i<3)throw new at;var n=this.possibleCenters,s;if(i>3){var l=0,u=0;try{for(var c=O0(this.possibleCenters),d=c.next();!d.done;d=c.next()){var f=d.value,m=f.getEstimatedModuleSize();l+=m,u+=m*m}}catch(S){t={error:S}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(t)throw t.error}}s=l/i;var p=Math.sqrt(u/i-s*s);n.sort(function(S,D){var M=Math.abs(D.getEstimatedModuleSize()-s),O=Math.abs(S.getEstimatedModuleSize()-s);return M<O?-1:M>O?1:0});for(var v=Math.max(.2*s,p),g=0;g<n.length&&n.length>3;g++){var x=n[g];Math.abs(x.getEstimatedModuleSize()-s)>v&&(n.splice(g,1),g--)}}if(n.length>3){var l=0;try{for(var b=O0(n),_=b.next();!_.done;_=b.next()){var w=_.value;l+=w.getEstimatedModuleSize()}}catch(D){r={error:D}}finally{try{_&&!_.done&&(a=b.return)&&a.call(b)}finally{if(r)throw r.error}}s=l/n.length,n.sort(function(D,M){if(M.getCount()===D.getCount()){var O=Math.abs(M.getEstimatedModuleSize()-s),T=Math.abs(D.getEstimatedModuleSize()-s);return O<T?1:O>T?-1:0}else return M.getCount()-D.getCount()}),n.splice(3)}return[n[0],n[1],n[2]]},e.CENTER_QUORUM=2,e.MIN_SKIP=3,e.MAX_MODULES=57,e}(),mfe=function(){function e(t){this.image=t}return e.prototype.getImage=function(){return this.image},e.prototype.getResultPointCallback=function(){return this.resultPointCallback},e.prototype.detect=function(t){this.resultPointCallback=t==null?null:t.get(Ya.NEED_RESULT_POINT_CALLBACK);var o=new ffe(this.image,this.resultPointCallback),r=o.find(t);return this.processFinderPatternInfo(r)},e.prototype.processFinderPatternInfo=function(t){var o=t.getTopLeft(),r=t.getTopRight(),a=t.getBottomLeft(),i=this.calculateModuleSize(o,r,a);if(i<1)throw new at("No pattern found in proccess finder.");var n=e.computeDimension(o,r,a,i),s=xd.getProvisionalVersionForDimension(n),l=s.getDimensionForVersion()-7,u=null;if(s.getAlignmentPatternCenters().length>0)for(var c=r.getX()-o.getX()+a.getX(),d=r.getY()-o.getY()+a.getY(),f=1-3/l,m=Math.floor(o.getX()+f*(c-o.getX())),p=Math.floor(o.getY()+f*(d-o.getY())),v=4;v<=16;v<<=1)try{u=this.findAlignmentInRegion(i,m,p,v);break}catch(_){if(!(_ instanceof at))throw _}var g=e.createTransform(o,r,a,u,n),x=e.sampleGrid(this.image,g,n),b;return u===null?b=[a,o,r]:b=[a,o,r,u],new QS(x,b)},e.createTransform=function(t,o,r,a,i){var n=i-3.5,s,l,u,c;return a!==null?(s=a.getX(),l=a.getY(),u=n-3,c=u):(s=o.getX()-t.getX()+r.getX(),l=o.getY()-t.getY()+r.getY(),u=n,c=n),rN.quadrilateralToQuadrilateral(3.5,3.5,n,3.5,u,c,3.5,n,t.getX(),t.getY(),o.getX(),o.getY(),s,l,r.getX(),r.getY())},e.sampleGrid=function(t,o,r){var a=XS.getInstance();return a.sampleGridWithTransform(t,r,r,o)},e.computeDimension=function(t,o,r,a){var i=Ko.round(Xt.distance(t,o)/a),n=Ko.round(Xt.distance(t,r)/a),s=Math.floor((i+n)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new at("Dimensions could be not found.")}return s},e.prototype.calculateModuleSize=function(t,o,r){return(this.calculateModuleSizeOneWay(t,o)+this.calculateModuleSizeOneWay(t,r))/2},e.prototype.calculateModuleSizeOneWay=function(t,o){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(o.getX()),Math.floor(o.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(r)?a/7:isNaN(a)?r/7:(r+a)/14},e.prototype.sizeOfBlackWhiteBlackRunBothWays=function(t,o,r,a){var i=this.sizeOfBlackWhiteBlackRun(t,o,r,a),n=1,s=t-(r-t);s<0?(n=t/(t-s),s=0):s>=this.image.getWidth()&&(n=(this.image.getWidth()-1-t)/(s-t),s=this.image.getWidth()-1);var l=Math.floor(o-(a-o)*n);return n=1,l<0?(n=o/(o-l),l=0):l>=this.image.getHeight()&&(n=(this.image.getHeight()-1-o)/(l-o),l=this.image.getHeight()-1),s=Math.floor(t+(s-t)*n),i+=this.sizeOfBlackWhiteBlackRun(t,o,s,l),i-1},e.prototype.sizeOfBlackWhiteBlackRun=function(t,o,r,a){var i=Math.abs(a-o)>Math.abs(r-t);if(i){var n=t;t=o,o=n,n=r,r=a,a=n}for(var s=Math.abs(r-t),l=Math.abs(a-o),u=-s/2,c=t<r?1:-1,d=o<a?1:-1,f=0,m=r+c,p=t,v=o;p!==m;p+=c){var g=i?v:p,x=i?p:v;if(f===1===this.image.get(g,x)){if(f===2)return Ko.distance(p,v,t,o);f++}if(u+=l,u>0){if(v===a)break;v+=d,u-=s}}return f===2?Ko.distance(r+c,a,t,o):NaN},e.prototype.findAlignmentInRegion=function(t,o,r,a){var i=Math.floor(a*t),n=Math.max(0,o-i),s=Math.min(this.image.getWidth()-1,o+i);if(s-n<t*3)throw new at("Alignment top exceeds estimated module size.");var l=Math.max(0,r-i),u=Math.min(this.image.getHeight()-1,r+i);if(u-l<t*3)throw new at("Alignment bottom exceeds estimated module size.");var c=new lfe(this.image,n,l,s-n,u-l,t,this.resultPointCallback);return c.find()},e}(),MC=function(){function e(){this.decoder=new rfe}return e.prototype.getDecoder=function(){return this.decoder},e.prototype.decode=function(t,o){var r,a;if(o!=null&&o.get(Ya.PURE_BARCODE)!==void 0){var i=e.extractPureBits(t.getBlackMatrix());r=this.decoder.decodeBitMatrix(i,o),a=e.NO_POINTS}else{var n=new mfe(t.getBlackMatrix()).detect(o);r=this.decoder.decodeBitMatrix(n.getBits(),o),a=n.getPoints()}r.getOther()instanceof uN&&r.getOther().applyMirroredCorrection(a);var s=new pn(r.getText(),r.getRawBytes(),void 0,a,no.QR_CODE,void 0),l=r.getByteSegments();l!==null&&s.putMetadata(ai.BYTE_SEGMENTS,l);var u=r.getECLevel();return u!==null&&s.putMetadata(ai.ERROR_CORRECTION_LEVEL,u),r.hasStructuredAppend()&&(s.putMetadata(ai.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),s.putMetadata(ai.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),s},e.prototype.reset=function(){},e.extractPureBits=function(t){var o=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(o===null||r===null)throw new at;var a=this.moduleSize(o,t),i=o[1],n=r[1],s=o[0],l=r[0];if(s>=l||i>=n)throw new at;if(n-i!==l-s&&(l=s+(n-i),l>=t.getWidth()))throw new at;var u=Math.round((l-s+1)/a),c=Math.round((n-i+1)/a);if(u<=0||c<=0)throw new at;if(c!==u)throw new at;var d=Math.floor(a/2);i+=d,s+=d;var f=s+Math.floor((u-1)*a)-l;if(f>0){if(f>d)throw new at;s-=f}var m=i+Math.floor((c-1)*a)-n;if(m>0){if(m>d)throw new at;i-=m}for(var p=new oc(u,c),v=0;v<c;v++)for(var g=i+Math.floor(v*a),x=0;x<u;x++)t.get(s+Math.floor(x*a),g)&&p.set(x,v);return p},e.moduleSize=function(t,o){for(var r=o.getHeight(),a=o.getWidth(),i=t[0],n=t[1],s=!0,l=0;i<a&&n<r;){if(s!==o.get(i,n)){if(++l===5)break;s=!s}i++,n++}if(i===a||n===r)throw new at;return(i-t[0])/7},e.NO_POINTS=new Array,e}(),pfe=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Wo=function(){function e(){}return e.prototype.PDF417Common=function(){},e.getBitCountSum=function(t){return Ko.sum(t)},e.toIntArray=function(t){var o,r;if(t==null||!t.length)return e.EMPTY_INT_ARRAY;var a=new Int32Array(t.length),i=0;try{for(var n=pfe(t),s=n.next();!s.done;s=n.next()){var l=s.value;a[i++]=l}}catch(u){o={error:u}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},e.getCodeword=function(t){var o=un.binarySearch(e.SYMBOL_TABLE,t&262143);return o<0?-1:(e.CODEWORD_TABLE[o]-1)%e.NUMBER_OF_CODEWORDS},e.NUMBER_OF_CODEWORDS=929,e.MAX_CODEWORDS_IN_BARCODE=e.NUMBER_OF_CODEWORDS-1,e.MIN_ROWS_IN_BARCODE=3,e.MAX_ROWS_IN_BARCODE=90,e.MODULES_IN_CODEWORD=17,e.MODULES_IN_STOP_PATTERN=18,e.BARS_IN_MODULE=8,e.EMPTY_INT_ARRAY=new Int32Array([]),e.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),e.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),e}(),hfe=function(){function e(t,o){this.bits=t,this.points=o}return e.prototype.getBits=function(){return this.bits},e.prototype.getPoints=function(){return this.points},e}(),vfe=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},gfe=function(){function e(){}return e.detectMultiple=function(t,o,r){var a=t.getBlackMatrix(),i=e.detect(r,a);return i.length||(a=a.clone(),a.rotate180(),i=e.detect(r,a)),new hfe(a,i)},e.detect=function(t,o){for(var r,a,i=new Array,n=0,s=0,l=!1;n<o.getHeight();){var u=e.findVertices(o,n,s);if(u[0]==null&&u[3]==null){if(!l)break;l=!1,s=0;try{for(var c=(r=void 0,vfe(i)),d=c.next();!d.done;d=c.next()){var f=d.value;f[1]!=null&&(n=Math.trunc(Math.max(n,f[1].getY()))),f[3]!=null&&(n=Math.max(n,Math.trunc(f[3].getY())))}}catch(m){r={error:m}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(r)throw r.error}}n+=e.ROW_STEP;continue}if(l=!0,i.push(u),!t)break;u[2]!=null?(s=Math.trunc(u[2].getX()),n=Math.trunc(u[2].getY())):(s=Math.trunc(u[4].getX()),n=Math.trunc(u[4].getY()))}return i},e.findVertices=function(t,o,r){var a=t.getHeight(),i=t.getWidth(),n=new Array(8);return e.copyToResult(n,e.findRowsWithPattern(t,a,i,o,r,e.START_PATTERN),e.INDEXES_START_PATTERN),n[4]!=null&&(r=Math.trunc(n[4].getX()),o=Math.trunc(n[4].getY())),e.copyToResult(n,e.findRowsWithPattern(t,a,i,o,r,e.STOP_PATTERN),e.INDEXES_STOP_PATTERN),n},e.copyToResult=function(t,o,r){for(var a=0;a<r.length;a++)t[r[a]]=o[a]},e.findRowsWithPattern=function(t,o,r,a,i,n){for(var s=new Array(4),l=!1,u=new Int32Array(n.length);a<o;a+=e.ROW_STEP){var c=e.findGuardPattern(t,i,a,r,!1,n,u);if(c!=null){for(;a>0;){var d=e.findGuardPattern(t,i,--a,r,!1,n,u);if(d!=null)c=d;else{a++;break}}s[0]=new Xt(c[0],a),s[1]=new Xt(c[1],a),l=!0;break}}var f=a+1;if(l){for(var m=0,d=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);f<o;f++){var c=e.findGuardPattern(t,d[0],f,r,!1,n,u);if(c!=null&&Math.abs(d[0]-c[0])<e.MAX_PATTERN_DRIFT&&Math.abs(d[1]-c[1])<e.MAX_PATTERN_DRIFT)d=c,m=0;else{if(m>e.SKIPPED_ROW_COUNT_MAX)break;m++}}f-=m+1,s[2]=new Xt(d[0],f),s[3]=new Xt(d[1],f)}return f-a<e.BARCODE_MIN_HEIGHT&&un.fill(s,null),s},e.findGuardPattern=function(t,o,r,a,i,n,s){un.fillWithin(s,0,s.length,0);for(var l=o,u=0;t.get(l,r)&&l>0&&u++<e.MAX_PIXEL_DRIFT;)l--;for(var c=l,d=0,f=n.length,m=i;c<a;c++){var p=t.get(c,r);if(p!==m)s[d]++;else{if(d===f-1){if(e.patternMatchVariance(s,n,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return new Int32Array([l,c]);l+=s[0]+s[1],Ta.arraycopy(s,2,s,0,d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,m=!m}}return d===f-1&&e.patternMatchVariance(s,n,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE?new Int32Array([l,c-1]):null},e.patternMatchVariance=function(t,o,r){for(var a=t.length,i=0,n=0,s=0;s<a;s++)i+=t[s],n+=o[s];if(i<n)return 1/0;var l=i/n;r*=l;for(var u=0,c=0;c<a;c++){var d=t[c],f=o[c]*l,m=d>f?d-f:f-d;if(m>r)return 1/0;u+=m}return u/i},e.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),e.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),e.MAX_AVG_VARIANCE=.42,e.MAX_INDIVIDUAL_VARIANCE=.8,e.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),e.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),e.MAX_PIXEL_DRIFT=3,e.MAX_PATTERN_DRIFT=5,e.SKIPPED_ROW_COUNT_MAX=25,e.ROW_STEP=5,e.BARCODE_MIN_HEIGHT=10,e}(),_fe=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},sd=function(){function e(t,o){if(o.length===0)throw new so;this.field=t;var r=o.length;if(r>1&&o[0]===0){for(var a=1;a<r&&o[a]===0;)a++;a===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-a),Ta.arraycopy(o,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}return e.prototype.getCoefficients=function(){return this.coefficients},e.prototype.getDegree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return this.coefficients[0]===0},e.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},e.prototype.evaluateAt=function(t){var o,r;if(t===0)return this.getCoefficient(0);if(t===1){var a=0;try{for(var i=_fe(this.coefficients),n=i.next();!n.done;n=i.next()){var s=n.value;a=this.field.add(a,s)}}catch(d){o={error:d}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}for(var l=this.coefficients[0],u=this.coefficients.length,c=1;c<u;c++)l=this.field.add(this.field.multiply(t,l),this.coefficients[c]);return l},e.prototype.add=function(t){if(!this.field.equals(t.field))throw new so("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;var o=this.coefficients,r=t.coefficients;if(o.length>r.length){var a=o;o=r,r=a}var i=new Int32Array(r.length),n=r.length-o.length;Ta.arraycopy(r,0,i,0,n);for(var s=n;s<r.length;s++)i[s]=this.field.add(o[s-n],r[s]);return new e(this.field,i)},e.prototype.subtract=function(t){if(!this.field.equals(t.field))throw new so("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())},e.prototype.multiply=function(t){return t instanceof e?this.multiplyOther(t):this.multiplyScalar(t)},e.prototype.multiplyOther=function(t){if(!this.field.equals(t.field))throw new so("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new e(this.field,new Int32Array([0]));for(var o=this.coefficients,r=o.length,a=t.coefficients,i=a.length,n=new Int32Array(r+i-1),s=0;s<r;s++)for(var l=o[s],u=0;u<i;u++)n[s+u]=this.field.add(n[s+u],this.field.multiply(l,a[u]));return new e(this.field,n)},e.prototype.negative=function(){for(var t=this.coefficients.length,o=new Int32Array(t),r=0;r<t;r++)o[r]=this.field.subtract(0,this.coefficients[r]);return new e(this.field,o)},e.prototype.multiplyScalar=function(t){if(t===0)return new e(this.field,new Int32Array([0]));if(t===1)return this;for(var o=this.coefficients.length,r=new Int32Array(o),a=0;a<o;a++)r[a]=this.field.multiply(this.coefficients[a],t);return new e(this.field,r)},e.prototype.multiplyByMonomial=function(t,o){if(t<0)throw new so;if(o===0)return new e(this.field,new Int32Array([0]));for(var r=this.coefficients.length,a=new Int32Array(r+t),i=0;i<r;i++)a[i]=this.field.multiply(this.coefficients[i],o);return new e(this.field,a)},e.prototype.toString=function(){for(var t=new ga,o=this.getDegree();o>=0;o--){var r=this.getCoefficient(o);r!==0&&(r<0?(t.append(" - "),r=-r):t.length()>0&&t.append(" + "),(o===0||r!==1)&&t.append(r),o!==0&&(o===1?t.append("x"):(t.append("x^"),t.append(o))))}return t.toString()},e}(),bfe=function(){function e(){}return e.prototype.add=function(t,o){return(t+o)%this.modulus},e.prototype.subtract=function(t,o){return(this.modulus+t-o)%this.modulus},e.prototype.exp=function(t){return this.expTable[t]},e.prototype.log=function(t){if(t===0)throw new so;return this.logTable[t]},e.prototype.inverse=function(t){if(t===0)throw new aN;return this.expTable[this.modulus-this.logTable[t]-1]},e.prototype.multiply=function(t,o){return t===0||o===0?0:this.expTable[(this.logTable[t]+this.logTable[o])%(this.modulus-1)]},e.prototype.getSize=function(){return this.modulus},e.prototype.equals=function(t){return t===this},e}(),yfe=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),xfe=function(e){yfe(t,e);function t(o,r){var a=e.call(this)||this;a.modulus=o,a.expTable=new Int32Array(o),a.logTable=new Int32Array(o);for(var i=1,n=0;n<o;n++)a.expTable[n]=i,i=i*r%o;for(var n=0;n<o-1;n++)a.logTable[a.expTable[n]]=n;return a.zero=new sd(a,new Int32Array([0])),a.one=new sd(a,new Int32Array([1])),a}return t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(o,r){if(o<0)throw new so;if(r===0)return this.zero;var a=new Int32Array(o+1);return a[0]=r,new sd(this,a)},t.PDF417_GF=new t(Wo.NUMBER_OF_CODEWORDS,3),t}(bfe),Cfe=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},wfe=function(){function e(){this.field=xfe.PDF417_GF}return e.prototype.decode=function(t,o,r){for(var a,i,n=new sd(this.field,t),s=new Int32Array(o),l=!1,u=o;u>0;u--){var c=n.evaluateAt(this.field.exp(u));s[o-u]=c,c!==0&&(l=!0)}if(!l)return 0;var d=this.field.getOne();if(r!=null)try{for(var f=Cfe(r),m=f.next();!m.done;m=f.next()){var p=m.value,v=this.field.exp(t.length-1-p),g=new sd(this.field,new Int32Array([this.field.subtract(0,v),1]));d=d.multiply(g)}}catch(O){a={error:O}}finally{try{m&&!m.done&&(i=f.return)&&i.call(f)}finally{if(a)throw a.error}}for(var x=new sd(this.field,s),b=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),x,o),_=b[0],w=b[1],S=this.findErrorLocations(_),D=this.findErrorMagnitudes(w,_,S),u=0;u<S.length;u++){var M=t.length-1-this.field.log(S[u]);if(M<0)throw ti.getChecksumInstance();t[M]=this.field.subtract(t[M],D[u])}return S.length},e.prototype.runEuclideanAlgorithm=function(t,o,r){if(t.getDegree()<o.getDegree()){var a=t;t=o,o=a}for(var i=t,n=o,s=this.field.getZero(),l=this.field.getOne();n.getDegree()>=Math.round(r/2);){var u=i,c=s;if(i=n,s=l,i.isZero())throw ti.getChecksumInstance();n=u;for(var d=this.field.getZero(),f=i.getCoefficient(i.getDegree()),m=this.field.inverse(f);n.getDegree()>=i.getDegree()&&!n.isZero();){var p=n.getDegree()-i.getDegree(),v=this.field.multiply(n.getCoefficient(n.getDegree()),m);d=d.add(this.field.buildMonomial(p,v)),n=n.subtract(i.multiplyByMonomial(p,v))}l=d.multiply(s).subtract(c).negative()}var g=l.getCoefficient(0);if(g===0)throw ti.getChecksumInstance();var x=this.field.inverse(g),b=l.multiply(x),_=n.multiply(x);return[b,_]},e.prototype.findErrorLocations=function(t){for(var o=t.getDegree(),r=new Int32Array(o),a=0,i=1;i<this.field.getSize()&&a<o;i++)t.evaluateAt(i)===0&&(r[a]=this.field.inverse(i),a++);if(a!==o)throw ti.getChecksumInstance();return r},e.prototype.findErrorMagnitudes=function(t,o,r){for(var a=o.getDegree(),i=new Int32Array(a),n=1;n<=a;n++)i[a-n]=this.field.multiply(n,o.getCoefficient(n));for(var s=new sd(this.field,i),l=r.length,u=new Int32Array(l),n=0;n<l;n++){var c=this.field.inverse(r[n]),d=this.field.subtract(0,t.evaluateAt(c)),f=this.field.inverse(s.evaluateAt(c));u[n]=this.field.multiply(d,f)}return u},e}(),NC=function(){function e(t,o,r,a,i){t instanceof e?this.constructor_2(t):this.constructor_1(t,o,r,a,i)}return e.prototype.constructor_1=function(t,o,r,a,i){var n=o==null||r==null,s=a==null||i==null;if(n&&s)throw new at;n?(o=new Xt(0,a.getY()),r=new Xt(0,i.getY())):s&&(a=new Xt(t.getWidth()-1,o.getY()),i=new Xt(t.getWidth()-1,r.getY())),this.image=t,this.topLeft=o,this.bottomLeft=r,this.topRight=a,this.bottomRight=i,this.minX=Math.trunc(Math.min(o.getX(),r.getX())),this.maxX=Math.trunc(Math.max(a.getX(),i.getX())),this.minY=Math.trunc(Math.min(o.getY(),a.getY())),this.maxY=Math.trunc(Math.max(r.getY(),i.getY()))},e.prototype.constructor_2=function(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()},e.merge=function(t,o){return t==null?o:o==null?t:new e(t.image,t.topLeft,t.bottomLeft,o.topRight,o.bottomRight)},e.prototype.addMissingRows=function(t,o,r){var a=this.topLeft,i=this.bottomLeft,n=this.topRight,s=this.bottomRight;if(t>0){var l=r?this.topLeft:this.topRight,u=Math.trunc(l.getY()-t);u<0&&(u=0);var c=new Xt(l.getX(),u);r?a=c:n=c}if(o>0){var d=r?this.bottomLeft:this.bottomRight,f=Math.trunc(d.getY()+o);f>=this.image.getHeight()&&(f=this.image.getHeight()-1);var m=new Xt(d.getX(),f);r?i=m:s=m}return new e(this.image,a,i,n,s)},e.prototype.getMinX=function(){return this.minX},e.prototype.getMaxX=function(){return this.maxX},e.prototype.getMinY=function(){return this.minY},e.prototype.getMaxY=function(){return this.maxY},e.prototype.getTopLeft=function(){return this.topLeft},e.prototype.getTopRight=function(){return this.topRight},e.prototype.getBottomLeft=function(){return this.bottomLeft},e.prototype.getBottomRight=function(){return this.bottomRight},e}(),Efe=function(){function e(t,o,r,a){this.columnCount=t,this.errorCorrectionLevel=a,this.rowCountUpperPart=o,this.rowCountLowerPart=r,this.rowCount=o+r}return e.prototype.getColumnCount=function(){return this.columnCount},e.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},e.prototype.getRowCount=function(){return this.rowCount},e.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},e.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},e}(),YS=function(){function e(){this.buffer=""}return e.form=function(t,o){var r=-1;function a(n,s,l,u,c,d){if(n==="%%")return"%";if(o[++r]!==void 0){n=u?parseInt(u.substr(1)):void 0;var f=c?parseInt(c.substr(1)):void 0,m;switch(d){case"s":m=o[r];break;case"c":m=o[r][0];break;case"f":m=parseFloat(o[r]).toFixed(n);break;case"p":m=parseFloat(o[r]).toPrecision(n);break;case"e":m=parseFloat(o[r]).toExponential(n);break;case"x":m=parseInt(o[r]).toString(f||16);break;case"d":m=parseFloat(parseInt(o[r],f||10).toPrecision(n)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(f);for(var p=parseInt(l),v=l&&l[0]+""=="0"?"0":" ";m.length<p;)m=s!==void 0?m+v:v+m;return m}}var i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(i,a)},e.prototype.format=function(t){for(var o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];this.buffer+=e.form(t,o)},e.prototype.toString=function(){return this.buffer},e}(),Sfe=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},dN=function(){function e(t){this.boundingBox=new NC(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}return e.prototype.getCodewordNearby=function(t){var o=this.getCodeword(t);if(o!=null)return o;for(var r=1;r<e.MAX_NEARBY_DISTANCE;r++){var a=this.imageRowToCodewordIndex(t)-r;if(a>=0&&(o=this.codewords[a],o!=null)||(a=this.imageRowToCodewordIndex(t)+r,a<this.codewords.length&&(o=this.codewords[a],o!=null)))return o}return null},e.prototype.imageRowToCodewordIndex=function(t){return t-this.boundingBox.getMinY()},e.prototype.setCodeword=function(t,o){this.codewords[this.imageRowToCodewordIndex(t)]=o},e.prototype.getCodeword=function(t){return this.codewords[this.imageRowToCodewordIndex(t)]},e.prototype.getBoundingBox=function(){return this.boundingBox},e.prototype.getCodewords=function(){return this.codewords},e.prototype.toString=function(){var t,o,r=new YS,a=0;try{for(var i=Sfe(this.codewords),n=i.next();!n.done;n=i.next()){var s=n.value;if(s==null){r.format("%3d:    |   %n",a++);continue}r.format("%3d: %3d|%3d%n",a++,s.getRowNumber(),s.getValue())}}catch(l){t={error:l}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(t)throw t.error}}return r.toString()},e.MAX_NEARBY_DISTANCE=5,e}(),Ife=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Afe=globalThis&&globalThis.__read||function(e,t){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var r=o.call(e),a,i=[],n;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){n={error:s}}finally{try{a&&!a.done&&(o=r.return)&&o.call(r)}finally{if(n)throw n.error}}return i},W0=function(){function e(){this.values=new Map}return e.prototype.setValue=function(t){t=Math.trunc(t);var o=this.values.get(t);o==null&&(o=0),o++,this.values.set(t,o)},e.prototype.getValue=function(){var t,o,r=-1,a=new Array,i=function(d,f){var m={getKey:function(){return d},getValue:function(){return f}};m.getValue()>r?(r=m.getValue(),a=[],a.push(m.getKey())):m.getValue()===r&&a.push(m.getKey())};try{for(var n=Ife(this.values.entries()),s=n.next();!s.done;s=n.next()){var l=Afe(s.value,2),u=l[0],c=l[1];i(u,c)}}catch(d){t={error:d}}finally{try{s&&!s.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}return Wo.toIntArray(a)},e.prototype.getConfidence=function(t){return this.values.get(t)},e}(),Tfe=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),Ry=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},CO=function(e){Tfe(t,e);function t(o,r){var a=e.call(this,o)||this;return a._isLeft=r,a}return t.prototype.setRowNumbers=function(){var o,r;try{for(var a=Ry(this.getCodewords()),i=a.next();!i.done;i=a.next()){var n=i.value;n!=null&&n.setRowNumberAsRowIndicatorColumn()}}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}},t.prototype.adjustCompleteIndicatorColumnRowNumbers=function(o){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,o);for(var a=this.getBoundingBox(),i=this._isLeft?a.getTopLeft():a.getTopRight(),n=this._isLeft?a.getBottomLeft():a.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),l=this.imageRowToCodewordIndex(Math.trunc(n.getY())),u=-1,c=1,d=0,f=s;f<l;f++)if(r[f]!=null){var m=r[f],p=m.getRowNumber()-u;if(p===0)d++;else if(p===1)c=Math.max(c,d),d=1,u=m.getRowNumber();else if(p<0||m.getRowNumber()>=o.getRowCount()||p>f)r[f]=null;else{var v=void 0;c>2?v=(c-2)*p:v=p;for(var g=v>=f,x=1;x<=v&&!g;x++)g=r[f-x]!=null;g?r[f]=null:(u=m.getRowNumber(),d=1)}}},t.prototype.getRowHeights=function(){var o,r,a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);var i=new Int32Array(a.getRowCount());try{for(var n=Ry(this.getCodewords()),s=n.next();!s.done;s=n.next()){var l=s.value;if(l!=null){var u=l.getRowNumber();if(u>=i.length)continue;i[u]++}}}catch(c){o={error:c}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},t.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(o){for(var r=this.getBoundingBox(),a=this._isLeft?r.getTopLeft():r.getTopRight(),i=this._isLeft?r.getBottomLeft():r.getBottomRight(),n=this.imageRowToCodewordIndex(Math.trunc(a.getY())),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),l=this.getCodewords(),u=-1,c=n;c<s;c++)if(l[c]!=null){var d=l[c];d.setRowNumberAsRowIndicatorColumn();var f=d.getRowNumber()-u;f===0||(f===1?u=d.getRowNumber():d.getRowNumber()>=o.getRowCount()?l[c]=null:u=d.getRowNumber())}},t.prototype.getBarcodeMetadata=function(){var o,r,a=this.getCodewords(),i=new W0,n=new W0,s=new W0,l=new W0;try{for(var u=Ry(a),c=u.next();!c.done;c=u.next()){var d=c.value;if(d!=null){d.setRowNumberAsRowIndicatorColumn();var f=d.getValue()%30,m=d.getRowNumber();switch(this._isLeft||(m+=2),m%3){case 0:n.setValue(f*3+1);break;case 1:l.setValue(f/3),s.setValue(f%3);break;case 2:i.setValue(f+1);break}}}}catch(v){o={error:v}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(o)throw o.error}}if(i.getValue().length===0||n.getValue().length===0||s.getValue().length===0||l.getValue().length===0||i.getValue()[0]<1||n.getValue()[0]+s.getValue()[0]<Wo.MIN_ROWS_IN_BARCODE||n.getValue()[0]+s.getValue()[0]>Wo.MAX_ROWS_IN_BARCODE)return null;var p=new Efe(i.getValue()[0],n.getValue()[0],s.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(a,p),p},t.prototype.removeIncorrectCodewords=function(o,r){for(var a=0;a<o.length;a++){var i=o[a];if(o[a]!=null){var n=i.getValue()%30,s=i.getRowNumber();if(s>r.getRowCount()){o[a]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:n*3+1!==r.getRowCountUpperPart()&&(o[a]=null);break;case 1:(Math.trunc(n/3)!==r.getErrorCorrectionLevel()||n%3!==r.getRowCountLowerPart())&&(o[a]=null);break;case 2:n+1!==r.getColumnCount()&&(o[a]=null);break}}}},t.prototype.isLeft=function(){return this._isLeft},t.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+e.prototype.toString.call(this)},t}(dN),Dfe=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ofe=function(){function e(t,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return e.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var t=Wo.MAX_CODEWORDS_IN_BARCODE,o;do o=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<o);return this.detectionResultColumns},e.prototype.adjustIndicatorColumnRowNumbers=function(t){t!=null&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},e.prototype.adjustRowNumbersAndGetCount=function(){var t=this.adjustRowNumbersByRow();if(t===0)return 0;for(var o=1;o<this.barcodeColumnCount+1;o++)for(var r=this.detectionResultColumns[o].getCodewords(),a=0;a<r.length;a++)r[a]!=null&&(r[a].hasValidRowNumber()||this.adjustRowNumbers(o,a,r));return t},e.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var t=this.adjustRowNumbersFromLRI();return t+this.adjustRowNumbersFromRRI()},e.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var t=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null&&o[r]!=null&&t[r].getRowNumber()===o[r].getRowNumber())for(var a=1;a<=this.barcodeColumnCount;a++){var i=this.detectionResultColumns[a].getCodewords()[r];i!=null&&(i.setRowNumber(t[r].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[r]=null))}}},e.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var t=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<o.length;r++)if(o[r]!=null)for(var a=o[r].getRowNumber(),i=0,n=this.barcodeColumnCount+1;n>0&&i<this.ADJUST_ROW_NUMBER_SKIP;n--){var s=this.detectionResultColumns[n].getCodewords()[r];s!=null&&(i=e.adjustRowNumberIfValid(a,i,s),s.hasValidRowNumber()||t++)}return t},e.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var t=0,o=this.detectionResultColumns[0].getCodewords(),r=0;r<o.length;r++)if(o[r]!=null)for(var a=o[r].getRowNumber(),i=0,n=1;n<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;n++){var s=this.detectionResultColumns[n].getCodewords()[r];s!=null&&(i=e.adjustRowNumberIfValid(a,i,s),s.hasValidRowNumber()||t++)}return t},e.adjustRowNumberIfValid=function(t,o,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(t)?(r.setRowNumber(t),o=0):++o),o},e.prototype.adjustRowNumbers=function(t,o,r){var a,i,n=r[o],s=this.detectionResultColumns[t-1].getCodewords(),l=s;this.detectionResultColumns[t+1]!=null&&(l=this.detectionResultColumns[t+1].getCodewords());var u=new Array(14);u[2]=s[o],u[3]=l[o],o>0&&(u[0]=r[o-1],u[4]=s[o-1],u[5]=l[o-1]),o>1&&(u[8]=r[o-2],u[10]=s[o-2],u[11]=l[o-2]),o<r.length-1&&(u[1]=r[o+1],u[6]=s[o+1],u[7]=l[o+1]),o<r.length-2&&(u[9]=r[o+2],u[12]=s[o+2],u[13]=l[o+2]);try{for(var c=Dfe(u),d=c.next();!d.done;d=c.next()){var f=d.value;if(e.adjustRowNumber(n,f))return}}catch(m){a={error:m}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(a)throw a.error}}},e.adjustRowNumber=function(t,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===t.getBucket()?(t.setRowNumber(o.getRowNumber()),!0):!1},e.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},e.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},e.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},e.prototype.setBoundingBox=function(t){this.boundingBox=t},e.prototype.getBoundingBox=function(){return this.boundingBox},e.prototype.setDetectionResultColumn=function(t,o){this.detectionResultColumns[t]=o},e.prototype.getDetectionResultColumn=function(t){return this.detectionResultColumns[t]},e.prototype.toString=function(){var t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var o=new YS,r=0;r<t.getCodewords().length;r++){o.format("CW %3d:",r);for(var a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){o.format("    |   ");continue}var i=this.detectionResultColumns[a].getCodewords()[r];if(i==null){o.format("    |   ");continue}o.format(" %3d|%3d",i.getRowNumber(),i.getValue())}o.format("%n")}return o.toString()},e}(),Pfe=function(){function e(t,o,r,a){this.rowNumber=e.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(o),this.bucket=Math.trunc(r),this.value=Math.trunc(a)}return e.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},e.prototype.isValidRowNumber=function(t){return t!==e.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3},e.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},e.prototype.getWidth=function(){return this.endX-this.startX},e.prototype.getStartX=function(){return this.startX},e.prototype.getEndX=function(){return this.endX},e.prototype.getBucket=function(){return this.bucket},e.prototype.getValue=function(){return this.value},e.prototype.getRowNumber=function(){return this.rowNumber},e.prototype.setRowNumber=function(t){this.rowNumber=t},e.prototype.toString=function(){return this.rowNumber+"|"+this.value},e.BARCODE_ROW_UNKNOWN=-1,e}(),Ffe=function(){function e(){}return e.initialize=function(){for(var t=0;t<Wo.SYMBOL_TABLE.length;t++)for(var o=Wo.SYMBOL_TABLE[t],r=o&1,a=0;a<Wo.BARS_IN_MODULE;a++){for(var i=0;(o&1)===r;)i+=1,o>>=1;r=o&1,e.RATIOS_TABLE[t]||(e.RATIOS_TABLE[t]=new Array(Wo.BARS_IN_MODULE)),e.RATIOS_TABLE[t][Wo.BARS_IN_MODULE-a-1]=Math.fround(i/Wo.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},e.getDecodedValue=function(t){var o=e.getDecodedCodewordValue(e.sampleBitCounts(t));return o!==-1?o:e.getClosestDecodedValue(t)},e.sampleBitCounts=function(t){for(var o=Ko.sum(t),r=new Int32Array(Wo.BARS_IN_MODULE),a=0,i=0,n=0;n<Wo.MODULES_IN_CODEWORD;n++){var s=o/(2*Wo.MODULES_IN_CODEWORD)+n*o/Wo.MODULES_IN_CODEWORD;i+t[a]<=s&&(i+=t[a],a++),r[a]++}return r},e.getDecodedCodewordValue=function(t){var o=e.getBitValue(t);return Wo.getCodeword(o)===-1?-1:o},e.getBitValue=function(t){for(var o=0,r=0;r<t.length;r++)for(var a=0;a<t[r];a++)o=o<<1|(r%2===0?1:0);return Math.trunc(o)},e.getClosestDecodedValue=function(t){var o=Ko.sum(t),r=new Array(Wo.BARS_IN_MODULE);if(o>1)for(var a=0;a<r.length;a++)r[a]=Math.fround(t[a]/o);var i=AC.MAX_VALUE,n=-1;this.bSymbolTableReady||e.initialize();for(var s=0;s<e.RATIOS_TABLE.length;s++){for(var l=0,u=e.RATIOS_TABLE[s],c=0;c<Wo.BARS_IN_MODULE;c++){var d=Math.fround(u[c]-r[c]);if(l+=Math.fround(d*d),l>=i)break}l<i&&(i=l,n=Wo.SYMBOL_TABLE[s])}return n},e.bSymbolTableReady=!1,e.RATIOS_TABLE=new Array(Wo.SYMBOL_TABLE.length).map(function(t){return new Array(Wo.BARS_IN_MODULE)}),e}(),Mfe=function(){function e(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return e.prototype.getSegmentIndex=function(){return this.segmentIndex},e.prototype.setSegmentIndex=function(t){this.segmentIndex=t},e.prototype.getFileId=function(){return this.fileId},e.prototype.setFileId=function(t){this.fileId=t},e.prototype.getOptionalData=function(){return this.optionalData},e.prototype.setOptionalData=function(t){this.optionalData=t},e.prototype.isLastSegment=function(){return this.lastSegment},e.prototype.setLastSegment=function(t){this.lastSegment=t},e.prototype.getSegmentCount=function(){return this.segmentCount},e.prototype.setSegmentCount=function(t){this.segmentCount=t},e.prototype.getSender=function(){return this.sender||null},e.prototype.setSender=function(t){this.sender=t},e.prototype.getAddressee=function(){return this.addressee||null},e.prototype.setAddressee=function(t){this.addressee=t},e.prototype.getFileName=function(){return this.fileName},e.prototype.setFileName=function(t){this.fileName=t},e.prototype.getFileSize=function(){return this.fileSize},e.prototype.setFileSize=function(t){this.fileSize=t},e.prototype.getChecksum=function(){return this.checksum},e.prototype.setChecksum=function(t){this.checksum=t},e.prototype.getTimestamp=function(){return this.timestamp},e.prototype.setTimestamp=function(t){this.timestamp=t},e}(),wO=function(){function e(){}return e.parseLong=function(t,o){return o===void 0&&(o=void 0),parseInt(t,o)},e}(),Nfe=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),kfe=function(e){Nfe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.kind="NullPointerException",t}(mn),Rfe=function(){function e(){}return e.prototype.writeBytes=function(t){this.writeBytesOffset(t,0,t.length)},e.prototype.writeBytesOffset=function(t,o,r){if(t==null)throw new kfe;if(o<0||o>t.length||r<0||o+r>t.length||o+r<0)throw new GS;if(r===0)return;for(var a=0;a<r;a++)this.write(t[o+a])},e.prototype.flush=function(){},e.prototype.close=function(){},e}(),Vfe=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),Bfe=function(e){Vfe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(mn),qfe=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),Lfe=function(e){qfe(t,e);function t(o){o===void 0&&(o=32);var r=e.call(this)||this;if(r.count=0,o<0)throw new so("Negative initial size: "+o);return r.buf=new Uint8Array(o),r}return t.prototype.ensureCapacity=function(o){o-this.buf.length>0&&this.grow(o)},t.prototype.grow=function(o){var r=this.buf.length,a=r<<1;if(a-o<0&&(a=o),a<0){if(o<0)throw new Bfe;a=oi.MAX_VALUE}this.buf=un.copyOfUint8Array(this.buf,a)},t.prototype.write=function(o){this.ensureCapacity(this.count+1),this.buf[this.count]=o,this.count+=1},t.prototype.writeBytesOffset=function(o,r,a){if(r<0||r>o.length||a<0||r+a-o.length>0)throw new GS;this.ensureCapacity(this.count+a),Ta.arraycopy(o,r,this.buf,this.count,a),this.count+=a},t.prototype.writeTo=function(o){o.writeBytesOffset(this.buf,0,this.count)},t.prototype.reset=function(){this.count=0},t.prototype.toByteArray=function(){return un.copyOfUint8Array(this.buf,this.count)},t.prototype.size=function(){return this.count},t.prototype.toString=function(o){return o?typeof o=="string"?this.toString_string(o):this.toString_number(o):this.toString_void()},t.prototype.toString_void=function(){return new String(this.buf).toString()},t.prototype.toString_string=function(o){return new String(this.buf).toString()},t.prototype.toString_number=function(o){return new String(this.buf).toString()},t.prototype.close=function(){},t}(Rfe),va;(function(e){e[e.ALPHA=0]="ALPHA",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.PUNCT=3]="PUNCT",e[e.ALPHA_SHIFT=4]="ALPHA_SHIFT",e[e.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(va||(va={}));function fN(){if(typeof window!="undefined")return window.BigInt||null;if(typeof global!="undefined")return global.BigInt||null;if(typeof self!="undefined")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var fv;function Lc(e){if(typeof fv=="undefined"&&(fv=fN()),fv===null)throw new Error("BigInt is not supported!");return fv(e)}function $fe(){var e=[];e[0]=Lc(1);var t=Lc(900);e[1]=t;for(var o=2;o<16;o++)e[o]=e[o-1]*t;return e}var Ufe=function(){function e(){}return e.decode=function(t,o){var r=new ga(""),a=Ar.ISO8859_1;r.enableDecoding(a);for(var i=1,n=t[i++],s=new Mfe;i<t[0];){switch(n){case e.TEXT_COMPACTION_MODE_LATCH:i=e.textCompaction(t,i,r);break;case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:i=e.byteCompaction(n,t,a,i,r);break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[i++]);break;case e.NUMERIC_COMPACTION_MODE_LATCH:i=e.numericCompaction(t,i,r);break;case e.ECI_CHARSET:Ar.getCharacterSetECIByValue(t[i++]);break;case e.ECI_GENERAL_PURPOSE:i+=2;break;case e.ECI_USER_DEFINED:i++;break;case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=e.decodeMacroBlock(t,i,s);break;case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:throw new yt;default:i--,i=e.textCompaction(t,i,r);break}if(i<t.length)n=t[i++];else throw yt.getFormatInstance()}if(r.length()===0)throw yt.getFormatInstance();var l=new db(null,r.toString(),null,o);return l.setOther(s),l},e.decodeMacroBlock=function(t,o,r){if(o+e.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw yt.getFormatInstance();for(var a=new Int32Array(e.NUMBER_OF_SEQUENCE_CODEWORDS),i=0;i<e.NUMBER_OF_SEQUENCE_CODEWORDS;i++,o++)a[i]=t[o];r.setSegmentIndex(oi.parseInt(e.decodeBase900toBase10(a,e.NUMBER_OF_SEQUENCE_CODEWORDS)));var n=new ga;o=e.textCompaction(t,o,n),r.setFileId(n.toString());var s=-1;for(t[o]===e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=o+1);o<t[0];)switch(t[o]){case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,t[o]){case e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new ga;o=e.textCompaction(t,o+1,l),r.setFileName(l.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new ga;o=e.textCompaction(t,o+1,u),r.setSender(u.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var c=new ga;o=e.textCompaction(t,o+1,c),r.setAddressee(c.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var d=new ga;o=e.numericCompaction(t,o+1,d),r.setSegmentCount(oi.parseInt(d.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var f=new ga;o=e.numericCompaction(t,o+1,f),r.setTimestamp(wO.parseLong(f.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var m=new ga;o=e.numericCompaction(t,o+1,m),r.setChecksum(oi.parseInt(m.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var p=new ga;o=e.numericCompaction(t,o+1,p),r.setFileSize(wO.parseLong(p.toString()));break;default:throw yt.getFormatInstance()}break;case e.MACRO_PDF417_TERMINATOR:o++,r.setLastSegment(!0);break;default:throw yt.getFormatInstance()}if(s!==-1){var v=o-s;r.isLastSegment()&&v--,r.setOptionalData(un.copyOfRange(t,s,s+v))}return o},e.textCompaction=function(t,o,r){for(var a=new Int32Array((t[0]-o)*2),i=new Int32Array((t[0]-o)*2),n=0,s=!1;o<t[0]&&!s;){var l=t[o++];if(l<e.TEXT_COMPACTION_MODE_LATCH)a[n]=l/30,a[n+1]=l%30,n+=2;else switch(l){case e.TEXT_COMPACTION_MODE_LATCH:a[n++]=e.TEXT_COMPACTION_MODE_LATCH;break;case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:o--,s=!0;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[n]=e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=t[o++],i[n]=l,n++;break}}return e.decodeTextCompaction(a,i,n,r),o},e.decodeTextCompaction=function(t,o,r,a){for(var i=va.ALPHA,n=va.ALPHA,s=0;s<r;){var l=t[s],u="";switch(i){case va.ALPHA:if(l<26)u=String.fromCharCode(65+l);else switch(l){case 26:u=" ";break;case e.LL:i=va.LOWER;break;case e.ML:i=va.MIXED;break;case e.PS:n=i,i=va.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(o[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=va.ALPHA;break}break;case va.LOWER:if(l<26)u=String.fromCharCode(97+l);else switch(l){case 26:u=" ";break;case e.AS:n=i,i=va.ALPHA_SHIFT;break;case e.ML:i=va.MIXED;break;case e.PS:n=i,i=va.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(o[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=va.ALPHA;break}break;case va.MIXED:if(l<e.PL)u=e.MIXED_CHARS[l];else switch(l){case e.PL:i=va.PUNCT;break;case 26:u=" ";break;case e.LL:i=va.LOWER;break;case e.AL:i=va.ALPHA;break;case e.PS:n=i,i=va.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(o[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=va.ALPHA;break}break;case va.PUNCT:if(l<e.PAL)u=e.PUNCT_CHARS[l];else switch(l){case e.PAL:i=va.ALPHA;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(o[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=va.ALPHA;break}break;case va.ALPHA_SHIFT:if(i=n,l<26)u=String.fromCharCode(65+l);else switch(l){case 26:u=" ";break;case e.TEXT_COMPACTION_MODE_LATCH:i=va.ALPHA;break}break;case va.PUNCT_SHIFT:if(i=n,l<e.PAL)u=e.PUNCT_CHARS[l];else switch(l){case e.PAL:i=va.ALPHA;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(o[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=va.ALPHA;break}break}u!==""&&a.append(u),s++}},e.byteCompaction=function(t,o,r,a,i){var n=new Lfe,s=0,l=0,u=!1;switch(t){case e.BYTE_COMPACTION_MODE_LATCH:for(var c=new Int32Array(6),d=o[a++];a<o[0]&&!u;)switch(c[s++]=d,l=900*l+d,d=o[a++],d){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:a--,u=!0;break;default:if(s%5===0&&s>0){for(var f=0;f<6;++f)n.write(Number(Lc(l)>>Lc(8*(5-f))));l=0,s=0}break}a===o[0]&&d<e.TEXT_COMPACTION_MODE_LATCH&&(c[s++]=d);for(var m=0;m<s;m++)n.write(c[m]);break;case e.BYTE_COMPACTION_MODE_LATCH_6:for(;a<o[0]&&!u;){var p=o[a++];if(p<e.TEXT_COMPACTION_MODE_LATCH)s++,l=900*l+p;else switch(p){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:a--,u=!0;break}if(s%5===0&&s>0){for(var f=0;f<6;++f)n.write(Number(Lc(l)>>Lc(8*(5-f))));l=0,s=0}}break}return i.append(il.decode(n.toByteArray(),r)),a},e.numericCompaction=function(t,o,r){for(var a=0,i=!1,n=new Int32Array(e.MAX_NUMERIC_CODEWORDS);o<t[0]&&!i;){var s=t[o++];if(o===t[0]&&(i=!0),s<e.TEXT_COMPACTION_MODE_LATCH)n[a]=s,a++;else switch(s){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:o--,i=!0;break}(a%e.MAX_NUMERIC_CODEWORDS===0||s===e.NUMERIC_COMPACTION_MODE_LATCH||i)&&a>0&&(r.append(e.decodeBase900toBase10(n,a)),a=0)}return o},e.decodeBase900toBase10=function(t,o){for(var r=Lc(0),a=0;a<o;a++)r+=e.EXP900[o-a-1]*Lc(t[a]);var i=r.toString();if(i.charAt(0)!=="1")throw new yt;return i.substring(1)},e.TEXT_COMPACTION_MODE_LATCH=900,e.BYTE_COMPACTION_MODE_LATCH=901,e.NUMERIC_COMPACTION_MODE_LATCH=902,e.BYTE_COMPACTION_MODE_LATCH_6=924,e.ECI_USER_DEFINED=925,e.ECI_GENERAL_PURPOSE=926,e.ECI_CHARSET=927,e.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,e.MACRO_PDF417_TERMINATOR=922,e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,e.MAX_NUMERIC_CODEWORDS=15,e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,e.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,e.PL=25,e.LL=27,e.AS=27,e.ML=28,e.AL=28,e.PS=29,e.PAL=29,e.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,e.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",e.EXP900=fN()?$fe():[],e.NUMBER_OF_SEQUENCE_CODEWORDS=2,e}(),P0=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},zfe=function(){function e(){}return e.decode=function(t,o,r,a,i,n,s){for(var l=new NC(t,o,r,a,i),u=null,c=null,d,f=!0;;f=!1){if(o!=null&&(u=e.getRowIndicatorColumn(t,l,o,!0,n,s)),a!=null&&(c=e.getRowIndicatorColumn(t,l,a,!1,n,s)),d=e.merge(u,c),d==null)throw at.getNotFoundInstance();var m=d.getBoundingBox();if(f&&m!=null&&(m.getMinY()<l.getMinY()||m.getMaxY()>l.getMaxY()))l=m;else break}d.setBoundingBox(l);var p=d.getBarcodeColumnCount()+1;d.setDetectionResultColumn(0,u),d.setDetectionResultColumn(p,c);for(var v=u!=null,g=1;g<=p;g++){var x=v?g:p-g;if(d.getDetectionResultColumn(x)===void 0){var b=void 0;x===0||x===p?b=new CO(l,x===0):b=new dN(l),d.setDetectionResultColumn(x,b);for(var _=-1,w=_,S=l.getMinY();S<=l.getMaxY();S++){if(_=e.getStartColumn(d,x,S,v),_<0||_>l.getMaxX()){if(w===-1)continue;_=w}var D=e.detectCodeword(t,l.getMinX(),l.getMaxX(),v,_,S,n,s);D!=null&&(b.setCodeword(S,D),w=_,n=Math.min(n,D.getWidth()),s=Math.max(s,D.getWidth()))}}}return e.createDecoderResult(d)},e.merge=function(t,o){if(t==null&&o==null)return null;var r=e.getBarcodeMetadata(t,o);if(r==null)return null;var a=NC.merge(e.adjustBoundingBox(t),e.adjustBoundingBox(o));return new Ofe(r,a)},e.adjustBoundingBox=function(t){var o,r;if(t==null)return null;var a=t.getRowHeights();if(a==null)return null;var i=e.getMax(a),n=0;try{for(var s=P0(a),l=s.next();!l.done;l=s.next()){var u=l.value;if(n+=i-u,u>0)break}}catch(m){o={error:m}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}for(var c=t.getCodewords(),d=0;n>0&&c[d]==null;d++)n--;for(var f=0,d=a.length-1;d>=0&&(f+=i-a[d],!(a[d]>0));d--);for(var d=c.length-1;f>0&&c[d]==null;d--)f--;return t.getBoundingBox().addMissingRows(n,f,t.isLeft())},e.getMax=function(t){var o,r,a=-1;try{for(var i=P0(t),n=i.next();!n.done;n=i.next()){var s=n.value;a=Math.max(a,s)}}catch(l){o={error:l}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},e.getBarcodeMetadata=function(t,o){var r;if(t==null||(r=t.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();var a;return o==null||(a=o.getBarcodeMetadata())==null?r:r.getColumnCount()!==a.getColumnCount()&&r.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&r.getRowCount()!==a.getRowCount()?null:r},e.getRowIndicatorColumn=function(t,o,r,a,i,n){for(var s=new CO(o,a),l=0;l<2;l++)for(var u=l===0?1:-1,c=Math.trunc(Math.trunc(r.getX())),d=Math.trunc(Math.trunc(r.getY()));d<=o.getMaxY()&&d>=o.getMinY();d+=u){var f=e.detectCodeword(t,0,t.getWidth(),a,c,d,i,n);f!=null&&(s.setCodeword(d,f),a?c=f.getStartX():c=f.getEndX())}return s},e.adjustCodewordCount=function(t,o){var r=o[0][1],a=r.getValue(),i=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-e.getNumberOfECCodeWords(t.getBarcodeECLevel());if(a.length===0){if(i<1||i>Wo.MAX_CODEWORDS_IN_BARCODE)throw at.getNotFoundInstance();r.setValue(i)}else a[0]!==i&&r.setValue(i)},e.createDecoderResult=function(t){var o=e.createBarcodeMatrix(t);e.adjustCodewordCount(t,o);for(var r=new Array,a=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),i=[],n=new Array,s=0;s<t.getBarcodeRowCount();s++)for(var l=0;l<t.getBarcodeColumnCount();l++){var u=o[s][l+1].getValue(),c=s*t.getBarcodeColumnCount()+l;u.length===0?r.push(c):u.length===1?a[c]=u[0]:(n.push(c),i.push(u))}for(var d=new Array(i.length),f=0;f<d.length;f++)d[f]=i[f];return e.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),a,Wo.toIntArray(r),Wo.toIntArray(n),d)},e.createDecoderResultFromAmbiguousValues=function(t,o,r,a,i){for(var n=new Int32Array(a.length),s=100;s-- >0;){for(var l=0;l<n.length;l++)o[a[l]]=i[l][n[l]];try{return e.decodeCodewords(o,t,r)}catch(c){var u=c instanceof ti;if(!u)throw c}if(n.length===0)throw ti.getChecksumInstance();for(var l=0;l<n.length;l++)if(n[l]<i[l].length-1){n[l]++;break}else if(n[l]=0,l===n.length-1)throw ti.getChecksumInstance()}throw ti.getChecksumInstance()},e.createBarcodeMatrix=function(t){for(var o,r,a,i,n=Array.from({length:t.getBarcodeRowCount()},function(){return new Array(t.getBarcodeColumnCount()+2)}),s=0;s<n.length;s++)for(var l=0;l<n[s].length;l++)n[s][l]=new W0;var u=0;try{for(var c=P0(t.getDetectionResultColumns()),d=c.next();!d.done;d=c.next()){var f=d.value;if(f!=null)try{for(var m=(a=void 0,P0(f.getCodewords())),p=m.next();!p.done;p=m.next()){var v=p.value;if(v!=null){var g=v.getRowNumber();if(g>=0){if(g>=n.length)continue;n[g][u].setValue(v.getValue())}}}}catch(x){a={error:x}}finally{try{p&&!p.done&&(i=m.return)&&i.call(m)}finally{if(a)throw a.error}}u++}}catch(x){o={error:x}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(o)throw o.error}}return n},e.isValidBarcodeColumn=function(t,o){return o>=0&&o<=t.getBarcodeColumnCount()+1},e.getStartColumn=function(t,o,r,a){var i,n,s=a?1:-1,l=null;if(e.isValidBarcodeColumn(t,o-s)&&(l=t.getDetectionResultColumn(o-s).getCodeword(r)),l!=null)return a?l.getEndX():l.getStartX();if(l=t.getDetectionResultColumn(o).getCodewordNearby(r),l!=null)return a?l.getStartX():l.getEndX();if(e.isValidBarcodeColumn(t,o-s)&&(l=t.getDetectionResultColumn(o-s).getCodewordNearby(r)),l!=null)return a?l.getEndX():l.getStartX();for(var u=0;e.isValidBarcodeColumn(t,o-s);){o-=s;try{for(var c=(i=void 0,P0(t.getDetectionResultColumn(o).getCodewords())),d=c.next();!d.done;d=c.next()){var f=d.value;if(f!=null)return(a?f.getEndX():f.getStartX())+s*u*(f.getEndX()-f.getStartX())}}catch(m){i={error:m}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(i)throw i.error}}u++}return a?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()},e.detectCodeword=function(t,o,r,a,i,n,s,l){i=e.adjustCodewordStartColumn(t,o,r,a,i,n);var u=e.getModuleBitCount(t,o,r,a,i,n);if(u==null)return null;var c,d=Ko.sum(u);if(a)c=i+d;else{for(var f=0;f<u.length/2;f++){var m=u[f];u[f]=u[u.length-1-f],u[u.length-1-f]=m}c=i,i=c-d}if(!e.checkCodewordSkew(d,s,l))return null;var p=Ffe.getDecodedValue(u),v=Wo.getCodeword(p);return v===-1?null:new Pfe(i,c,e.getCodewordBucketNumber(p),v)},e.getModuleBitCount=function(t,o,r,a,i,n){for(var s=i,l=new Int32Array(8),u=0,c=a?1:-1,d=a;(a?s<r:s>=o)&&u<l.length;)t.get(s,n)===d?(l[u]++,s+=c):(u++,d=!d);return u===l.length||s===(a?r:o)&&u===l.length-1?l:null},e.getNumberOfECCodeWords=function(t){return 2<<t},e.adjustCodewordStartColumn=function(t,o,r,a,i,n){for(var s=i,l=a?-1:1,u=0;u<2;u++){for(;(a?s>=o:s<r)&&a===t.get(s,n);){if(Math.abs(i-s)>e.CODEWORD_SKEW_SIZE)return i;s+=l}l=-l,a=!a}return s},e.checkCodewordSkew=function(t,o,r){return o-e.CODEWORD_SKEW_SIZE<=t&&t<=r+e.CODEWORD_SKEW_SIZE},e.decodeCodewords=function(t,o,r){if(t.length===0)throw yt.getFormatInstance();var a=1<<o+1,i=e.correctErrors(t,r,a);e.verifyCodewordCount(t,a);var n=Ufe.decode(t,""+o);return n.setErrorsCorrected(i),n.setErasures(r.length),n},e.correctErrors=function(t,o,r){if(o!=null&&o.length>r/2+e.MAX_ERRORS||r<0||r>e.MAX_EC_CODEWORDS)throw ti.getChecksumInstance();return e.errorCorrection.decode(t,r,o)},e.verifyCodewordCount=function(t,o){if(t.length<4)throw yt.getFormatInstance();var r=t[0];if(r>t.length)throw yt.getFormatInstance();if(r===0)if(o<t.length)t[0]=t.length-o;else throw yt.getFormatInstance()},e.getBitCountForCodeword=function(t){for(var o=new Int32Array(8),r=0,a=o.length-1;!((t&1)!==r&&(r=t&1,a--,a<0));)o[a]++,t>>=1;return o},e.getCodewordBucketNumber=function(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)},e.getCodewordBucketNumber_number=function(t){return e.getCodewordBucketNumber(e.getBitCountForCodeword(t))},e.getCodewordBucketNumber_Int32Array=function(t){return(t[0]-t[2]+t[4]-t[6]+9)%9},e.toString=function(t){for(var o=new YS,r=0;r<t.length;r++){o.format("Row %2d: ",r);for(var a=0;a<t[r].length;a++){var i=t[r][a];i.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}o.format("%n")}return o.toString()},e.CODEWORD_SKEW_SIZE=2,e.MAX_ERRORS=3,e.MAX_EC_CODEWORDS=512,e.errorCorrection=new wfe,e}(),Hfe=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},kC=function(){function e(){}return e.prototype.decode=function(t,o){o===void 0&&(o=null);var r=e.decode(t,o,!1);if(r==null||r.length===0||r[0]==null)throw at.getNotFoundInstance();return r[0]},e.prototype.decodeMultiple=function(t,o){o===void 0&&(o=null);try{return e.decode(t,o,!0)}catch(r){throw r instanceof yt||r instanceof ti?at.getNotFoundInstance():r}},e.decode=function(t,o,r){var a,i,n=new Array,s=gfe.detectMultiple(t,o,r);try{for(var l=Hfe(s.getPoints()),u=l.next();!u.done;u=l.next()){var c=u.value,d=zfe.decode(s.getBits(),c[4],c[5],c[6],c[7],e.getMinCodewordWidth(c),e.getMaxCodewordWidth(c)),f=new pn(d.getText(),d.getRawBytes(),void 0,c,no.PDF_417);f.putMetadata(ai.ERROR_CORRECTION_LEVEL,d.getECLevel());var m=d.getOther();m!=null&&f.putMetadata(ai.PDF417_EXTRA_METADATA,m),n.push(f)}}catch(p){a={error:p}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}return n.map(function(p){return p})},e.getMaxWidth=function(t,o){return t==null||o==null?0:Math.trunc(Math.abs(t.getX()-o.getX()))},e.getMinWidth=function(t,o){return t==null||o==null?oi.MAX_VALUE:Math.trunc(Math.abs(t.getX()-o.getX()))},e.getMaxCodewordWidth=function(t){return Math.floor(Math.max(Math.max(e.getMaxWidth(t[0],t[4]),e.getMaxWidth(t[6],t[2])*Wo.MODULES_IN_CODEWORD/Wo.MODULES_IN_STOP_PATTERN),Math.max(e.getMaxWidth(t[1],t[5]),e.getMaxWidth(t[7],t[3])*Wo.MODULES_IN_CODEWORD/Wo.MODULES_IN_STOP_PATTERN)))},e.getMinCodewordWidth=function(t){return Math.floor(Math.min(Math.min(e.getMinWidth(t[0],t[4]),e.getMinWidth(t[6],t[2])*Wo.MODULES_IN_CODEWORD/Wo.MODULES_IN_STOP_PATTERN),Math.min(e.getMinWidth(t[1],t[5]),e.getMinWidth(t[7],t[3])*Wo.MODULES_IN_CODEWORD/Wo.MODULES_IN_STOP_PATTERN)))},e.prototype.reset=function(){},e}(),jfe=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),EO=function(e){jfe(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.kind="ReaderException",t}(mn),SO=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Gfe=function(){function e(){}return e.prototype.decode=function(t,o){return this.setHints(o),this.decodeInternal(t)},e.prototype.decodeWithState=function(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)},e.prototype.setHints=function(t){this.hints=t;var o=t!=null&&t.get(Ya.TRY_HARDER)!==void 0,r=t==null?null:t.get(Ya.POSSIBLE_FORMATS),a=new Array;if(r!=null){var i=r.some(function(n){return n===no.UPC_A||n===no.UPC_E||n===no.EAN_13||n===no.EAN_8||n===no.CODABAR||n===no.CODE_39||n===no.CODE_93||n===no.CODE_128||n===no.ITF||n===no.RSS_14||n===no.RSS_EXPANDED});i&&!o&&a.push(new G0(t)),r.includes(no.QR_CODE)&&a.push(new MC),r.includes(no.DATA_MATRIX)&&a.push(new PC),r.includes(no.AZTEC)&&a.push(new DC),r.includes(no.PDF_417)&&a.push(new kC),i&&o&&a.push(new G0(t))}a.length===0&&(o||a.push(new G0(t)),a.push(new MC),a.push(new PC),a.push(new DC),a.push(new kC),o&&a.push(new G0(t))),this.readers=a},e.prototype.reset=function(){var t,o;if(this.readers!==null)try{for(var r=SO(this.readers),a=r.next();!a.done;a=r.next()){var i=a.value;i.reset()}}catch(n){t={error:n}}finally{try{a&&!a.done&&(o=r.return)&&o.call(r)}finally{if(t)throw t.error}}},e.prototype.decodeInternal=function(t){var o,r;if(this.readers===null)throw new EO("No readers where selected, nothing can be read.");try{for(var a=SO(this.readers),i=a.next();!i.done;i=a.next()){var n=i.value;try{return n.decode(t,this.hints)}catch(s){if(s instanceof EO)continue}}}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}throw new at("No MultiFormat Readers were able to detect the code.")},e}(),Wfe=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),Qfe=function(e){Wfe(t,e);function t(o,r){o===void 0&&(o=null),r===void 0&&(r=500);var a=this,i=new Gfe;return i.setHints(o),a=e.call(this,i,r)||this,a}return t.prototype.decodeBitmap=function(o){return this.reader.decodeWithState(o)},t}(Qm),Xfe=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}();(function(e){Xfe(t,e);function t(o){return o===void 0&&(o=500),e.call(this,new kC,o)||this}return t})(Qm);var Kfe=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}();(function(e){Kfe(t,e);function t(o){return o===void 0&&(o=500),e.call(this,new MC,o)||this}return t})(Qm);var RC;(function(e){e[e.ERROR_CORRECTION=0]="ERROR_CORRECTION",e[e.CHARACTER_SET=1]="CHARACTER_SET",e[e.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",e[e.MIN_SIZE=3]="MIN_SIZE",e[e.MAX_SIZE=4]="MAX_SIZE",e[e.MARGIN=5]="MARGIN",e[e.PDF417_COMPACT=6]="PDF417_COMPACT",e[e.PDF417_COMPACTION=7]="PDF417_COMPACTION",e[e.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",e[e.AZTEC_LAYERS=9]="AZTEC_LAYERS",e[e.QR_VERSION=10]="QR_VERSION"})(RC||(RC={}));var Yc=RC,Yfe=function(){function e(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new iu(t,Int32Array.from([1])))}return e.prototype.buildGenerator=function(t){var o=this.cachedGenerators;if(t>=o.length)for(var r=o[o.length-1],a=this.field,i=o.length;i<=t;i++){var n=r.multiply(new iu(a,Int32Array.from([1,a.exp(i-1+a.getGeneratorBase())])));o.push(n),r=n}return o[t]},e.prototype.encode=function(t,o){if(o===0)throw new so("No error correction bytes");var r=t.length-o;if(r<=0)throw new so("No data bytes provided");var a=this.buildGenerator(o),i=new Int32Array(r);Ta.arraycopy(t,0,i,0,r);var n=new iu(this.field,i);n=n.multiplyByMonomial(o,1);for(var s=n.divide(a)[1],l=s.getCoefficients(),u=o-l.length,c=0;c<u;c++)t[r+c]=0;Ta.arraycopy(l,0,t,r+u,l.length)},e}(),Q0=function(){function e(){}return e.applyMaskPenaltyRule1=function(t){return e.applyMaskPenaltyRule1Internal(t,!0)+e.applyMaskPenaltyRule1Internal(t,!1)},e.applyMaskPenaltyRule2=function(t){for(var o=0,r=t.getArray(),a=t.getWidth(),i=t.getHeight(),n=0;n<i-1;n++)for(var s=r[n],l=0;l<a-1;l++){var u=s[l];u===s[l+1]&&u===r[n+1][l]&&u===r[n+1][l+1]&&o++}return e.N2*o},e.applyMaskPenaltyRule3=function(t){for(var o=0,r=t.getArray(),a=t.getWidth(),i=t.getHeight(),n=0;n<i;n++)for(var s=0;s<a;s++){var l=r[n];s+6<a&&l[s]===1&&l[s+1]===0&&l[s+2]===1&&l[s+3]===1&&l[s+4]===1&&l[s+5]===0&&l[s+6]===1&&(e.isWhiteHorizontal(l,s-4,s)||e.isWhiteHorizontal(l,s+7,s+11))&&o++,n+6<i&&r[n][s]===1&&r[n+1][s]===0&&r[n+2][s]===1&&r[n+3][s]===1&&r[n+4][s]===1&&r[n+5][s]===0&&r[n+6][s]===1&&(e.isWhiteVertical(r,s,n-4,n)||e.isWhiteVertical(r,s,n+7,n+11))&&o++}return o*e.N3},e.isWhiteHorizontal=function(t,o,r){o=Math.max(o,0),r=Math.min(r,t.length);for(var a=o;a<r;a++)if(t[a]===1)return!1;return!0},e.isWhiteVertical=function(t,o,r,a){r=Math.max(r,0),a=Math.min(a,t.length);for(var i=r;i<a;i++)if(t[i][o]===1)return!1;return!0},e.applyMaskPenaltyRule4=function(t){for(var o=0,r=t.getArray(),a=t.getWidth(),i=t.getHeight(),n=0;n<i;n++)for(var s=r[n],l=0;l<a;l++)s[l]===1&&o++;var u=t.getHeight()*t.getWidth(),c=Math.floor(Math.abs(o*2-u)*10/u);return c*e.N4},e.getDataMaskBit=function(t,o,r){var a,i;switch(t){case 0:a=r+o&1;break;case 1:a=r&1;break;case 2:a=o%3;break;case 3:a=(r+o)%3;break;case 4:a=Math.floor(r/2)+Math.floor(o/3)&1;break;case 5:i=r*o,a=(i&1)+i%3;break;case 6:i=r*o,a=(i&1)+i%3&1;break;case 7:i=r*o,a=i%3+(r+o&1)&1;break;default:throw new so("Invalid mask pattern: "+t)}return a===0},e.applyMaskPenaltyRule1Internal=function(t,o){for(var r=0,a=o?t.getHeight():t.getWidth(),i=o?t.getWidth():t.getHeight(),n=t.getArray(),s=0;s<a;s++){for(var l=0,u=-1,c=0;c<i;c++){var d=o?n[s][c]:n[c][s];d===u?l++:(l>=5&&(r+=e.N1+(l-5)),l=1,u=d)}l>=5&&(r+=e.N1+(l-5))}return r},e.N1=3,e.N2=3,e.N3=40,e.N4=10,e}(),Jfe=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Zfe=function(){function e(t,o){this.width=t,this.height=o;for(var r=new Array(o),a=0;a!==o;a++)r[a]=new Uint8Array(t);this.bytes=r}return e.prototype.getHeight=function(){return this.height},e.prototype.getWidth=function(){return this.width},e.prototype.get=function(t,o){return this.bytes[o][t]},e.prototype.getArray=function(){return this.bytes},e.prototype.setNumber=function(t,o,r){this.bytes[o][t]=r},e.prototype.setBoolean=function(t,o,r){this.bytes[o][t]=r?1:0},e.prototype.clear=function(t){var o,r;try{for(var a=Jfe(this.bytes),i=a.next();!i.done;i=a.next()){var n=i.value;un.fill(n,t)}}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var o=t;if(this.width!==o.width||this.height!==o.height)return!1;for(var r=0,a=this.height;r<a;++r)for(var i=this.bytes[r],n=o.bytes[r],s=0,l=this.width;s<l;++s)if(i[s]!==n[s])return!1;return!0},e.prototype.toString=function(){for(var t=new ga,o=0,r=this.height;o<r;++o){for(var a=this.bytes[o],i=0,n=this.width;i<n;++i)switch(a[i]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()},e}(),VC=function(){function e(){this.maskPattern=-1}return e.prototype.getMode=function(){return this.mode},e.prototype.getECLevel=function(){return this.ecLevel},e.prototype.getVersion=function(){return this.version},e.prototype.getMaskPattern=function(){return this.maskPattern},e.prototype.getMatrix=function(){return this.matrix},e.prototype.toString=function(){var t=new ga;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()},e.prototype.setMode=function(t){this.mode=t},e.prototype.setECLevel=function(t){this.ecLevel=t},e.prototype.setVersion=function(t){this.version=t},e.prototype.setMaskPattern=function(t){this.maskPattern=t},e.prototype.setMatrix=function(t){this.matrix=t},e.isValidMaskPattern=function(t){return t>=0&&t<e.NUM_MASK_PATTERNS},e.NUM_MASK_PATTERNS=8,e}(),eme=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),Pa=function(e){eme(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.kind="WriterException",t}(mn),IO=function(){function e(){}return e.clearMatrix=function(t){t.clear(255)},e.buildMatrix=function(t,o,r,a,i){e.clearMatrix(i),e.embedBasicPatterns(r,i),e.embedTypeInfo(o,a,i),e.maybeEmbedVersionInfo(r,i),e.embedDataBits(t,a,i)},e.embedBasicPatterns=function(t,o){e.embedPositionDetectionPatternsAndSeparators(o),e.embedDarkDotAtLeftBottomCorner(o),e.maybeEmbedPositionAdjustmentPatterns(t,o),e.embedTimingPatterns(o)},e.embedTypeInfo=function(t,o,r){var a=new rn;e.makeTypeInfoBits(t,o,a);for(var i=0,n=a.getSize();i<n;++i){var s=a.get(a.getSize()-1-i),l=e.TYPE_INFO_COORDINATES[i],u=l[0],c=l[1];if(r.setBoolean(u,c,s),i<8){var d=r.getWidth()-i-1,f=8;r.setBoolean(d,f,s)}else{var d=8,f=r.getHeight()-7+(i-8);r.setBoolean(d,f,s)}}},e.maybeEmbedVersionInfo=function(t,o){if(!(t.getVersionNumber()<7)){var r=new rn;e.makeVersionInfoBits(t,r);for(var a=6*3-1,i=0;i<6;++i)for(var n=0;n<3;++n){var s=r.get(a);a--,o.setBoolean(i,o.getHeight()-11+n,s),o.setBoolean(o.getHeight()-11+n,i,s)}}},e.embedDataBits=function(t,o,r){for(var a=0,i=-1,n=r.getWidth()-1,s=r.getHeight()-1;n>0;){for(n===6&&(n-=1);s>=0&&s<r.getHeight();){for(var l=0;l<2;++l){var u=n-l;if(!!e.isEmpty(r.get(u,s))){var c=void 0;a<t.getSize()?(c=t.get(a),++a):c=!1,o!==255&&Q0.getDataMaskBit(o,u,s)&&(c=!c),r.setBoolean(u,s,c)}}s+=i}i=-i,s+=i,n-=2}if(a!==t.getSize())throw new Pa("Not all bits consumed: "+a+"/"+t.getSize())},e.findMSBSet=function(t){return 32-oi.numberOfLeadingZeros(t)},e.calculateBCHCode=function(t,o){if(o===0)throw new so("0 polynomial");var r=e.findMSBSet(o);for(t<<=r-1;e.findMSBSet(t)>=r;)t^=o<<e.findMSBSet(t)-r;return t},e.makeTypeInfoBits=function(t,o,r){if(!VC.isValidMaskPattern(o))throw new Pa("Invalid mask pattern");var a=t.getBits()<<3|o;r.appendBits(a,5);var i=e.calculateBCHCode(a,e.TYPE_INFO_POLY);r.appendBits(i,10);var n=new rn;if(n.appendBits(e.TYPE_INFO_MASK_PATTERN,15),r.xor(n),r.getSize()!==15)throw new Pa("should not happen but we got: "+r.getSize())},e.makeVersionInfoBits=function(t,o){o.appendBits(t.getVersionNumber(),6);var r=e.calculateBCHCode(t.getVersionNumber(),e.VERSION_INFO_POLY);if(o.appendBits(r,12),o.getSize()!==18)throw new Pa("should not happen but we got: "+o.getSize())},e.isEmpty=function(t){return t===255},e.embedTimingPatterns=function(t){for(var o=8;o<t.getWidth()-8;++o){var r=(o+1)%2;e.isEmpty(t.get(o,6))&&t.setNumber(o,6,r),e.isEmpty(t.get(6,o))&&t.setNumber(6,o,r)}},e.embedDarkDotAtLeftBottomCorner=function(t){if(t.get(8,t.getHeight()-8)===0)throw new Pa;t.setNumber(8,t.getHeight()-8,1)},e.embedHorizontalSeparationPattern=function(t,o,r){for(var a=0;a<8;++a){if(!e.isEmpty(r.get(t+a,o)))throw new Pa;r.setNumber(t+a,o,0)}},e.embedVerticalSeparationPattern=function(t,o,r){for(var a=0;a<7;++a){if(!e.isEmpty(r.get(t,o+a)))throw new Pa;r.setNumber(t,o+a,0)}},e.embedPositionAdjustmentPattern=function(t,o,r){for(var a=0;a<5;++a)for(var i=e.POSITION_ADJUSTMENT_PATTERN[a],n=0;n<5;++n)r.setNumber(t+n,o+a,i[n])},e.embedPositionDetectionPattern=function(t,o,r){for(var a=0;a<7;++a)for(var i=e.POSITION_DETECTION_PATTERN[a],n=0;n<7;++n)r.setNumber(t+n,o+a,i[n])},e.embedPositionDetectionPatternsAndSeparators=function(t){var o=e.POSITION_DETECTION_PATTERN[0].length;e.embedPositionDetectionPattern(0,0,t),e.embedPositionDetectionPattern(t.getWidth()-o,0,t),e.embedPositionDetectionPattern(0,t.getWidth()-o,t);var r=8;e.embedHorizontalSeparationPattern(0,r-1,t),e.embedHorizontalSeparationPattern(t.getWidth()-r,r-1,t),e.embedHorizontalSeparationPattern(0,t.getWidth()-r,t);var a=7;e.embedVerticalSeparationPattern(a,0,t),e.embedVerticalSeparationPattern(t.getHeight()-a-1,0,t),e.embedVerticalSeparationPattern(a,t.getHeight()-a,t)},e.maybeEmbedPositionAdjustmentPatterns=function(t,o){if(!(t.getVersionNumber()<2))for(var r=t.getVersionNumber()-1,a=e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],i=0,n=a.length;i!==n;i++){var s=a[i];if(s>=0)for(var l=0;l!==n;l++){var u=a[l];u>=0&&e.isEmpty(o.get(u,s))&&e.embedPositionAdjustmentPattern(u-2,s-2,o)}}},e.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),e.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),e.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),e.VERSION_INFO_POLY=7973,e.TYPE_INFO_POLY=1335,e.TYPE_INFO_MASK_PATTERN=21522,e}(),tme=function(){function e(t,o){this.dataBytes=t,this.errorCorrectionBytes=o}return e.prototype.getDataBytes=function(){return this.dataBytes},e.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},e}(),AO=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ome=function(){function e(){}return e.calculateMaskPenalty=function(t){return Q0.applyMaskPenaltyRule1(t)+Q0.applyMaskPenaltyRule2(t)+Q0.applyMaskPenaltyRule3(t)+Q0.applyMaskPenaltyRule4(t)},e.encode=function(t,o,r){r===void 0&&(r=null);var a=e.DEFAULT_BYTE_MODE_ENCODING,i=r!==null&&r.get(Yc.CHARACTER_SET)!==void 0;i&&(a=r.get(Yc.CHARACTER_SET).toString());var n=this.chooseMode(t,a),s=new rn;if(n===Fa.BYTE&&(i||e.DEFAULT_BYTE_MODE_ENCODING!==a)){var l=Ar.getCharacterSetECIByName(a);l!==void 0&&this.appendECI(l,s)}this.appendModeInfo(n,s);var u=new rn;this.appendBytes(t,n,u,a);var c;if(r!==null&&r.get(Yc.QR_VERSION)!==void 0){var d=Number.parseInt(r.get(Yc.QR_VERSION).toString(),10);c=xd.getVersionForNumber(d);var f=this.calculateBitsNeeded(n,s,u,c);if(!this.willFit(f,c,o))throw new Pa("Data too big for requested version")}else c=this.recommendVersion(o,n,s,u);var m=new rn;m.appendBitArray(s);var p=n===Fa.BYTE?u.getSizeInBytes():t.length;this.appendLengthInfo(p,c,n,m),m.appendBitArray(u);var v=c.getECBlocksForLevel(o),g=c.getTotalCodewords()-v.getTotalECCodewords();this.terminateBits(g,m);var x=this.interleaveWithECBytes(m,c.getTotalCodewords(),g,v.getNumBlocks()),b=new VC;b.setECLevel(o),b.setMode(n),b.setVersion(c);var _=c.getDimensionForVersion(),w=new Zfe(_,_),S=this.chooseMaskPattern(x,o,c,w);return b.setMaskPattern(S),IO.buildMatrix(x,o,c,S,w),b.setMatrix(w),b},e.recommendVersion=function(t,o,r,a){var i=this.calculateBitsNeeded(o,r,a,xd.getVersionForNumber(1)),n=this.chooseVersion(i,t),s=this.calculateBitsNeeded(o,r,a,n);return this.chooseVersion(s,t)},e.calculateBitsNeeded=function(t,o,r,a){return o.getSize()+t.getCharacterCountBits(a)+r.getSize()},e.getAlphanumericCode=function(t){return t<e.ALPHANUMERIC_TABLE.length?e.ALPHANUMERIC_TABLE[t]:-1},e.chooseMode=function(t,o){if(o===void 0&&(o=null),Ar.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(t))return Fa.KANJI;for(var r=!1,a=!1,i=0,n=t.length;i<n;++i){var s=t.charAt(i);if(e.isDigit(s))r=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)a=!0;else return Fa.BYTE}return a?Fa.ALPHANUMERIC:r?Fa.NUMERIC:Fa.BYTE},e.isOnlyDoubleByteKanji=function(t){var o;try{o=il.encode(t,Ar.SJIS)}catch{return!1}var r=o.length;if(r%2!==0)return!1;for(var a=0;a<r;a+=2){var i=o[a]&255;if((i<129||i>159)&&(i<224||i>235))return!1}return!0},e.chooseMaskPattern=function(t,o,r,a){for(var i=Number.MAX_SAFE_INTEGER,n=-1,s=0;s<VC.NUM_MASK_PATTERNS;s++){IO.buildMatrix(t,o,r,s,a);var l=this.calculateMaskPenalty(a);l<i&&(i=l,n=s)}return n},e.chooseVersion=function(t,o){for(var r=1;r<=40;r++){var a=xd.getVersionForNumber(r);if(e.willFit(t,a,o))return a}throw new Pa("Data too big")},e.willFit=function(t,o,r){var a=o.getTotalCodewords(),i=o.getECBlocksForLevel(r),n=i.getTotalECCodewords(),s=a-n,l=(t+7)/8;return s>=l},e.terminateBits=function(t,o){var r=t*8;if(o.getSize()>r)throw new Pa("data bits cannot fit in the QR Code"+o.getSize()+" > "+r);for(var a=0;a<4&&o.getSize()<r;++a)o.appendBit(!1);var i=o.getSize()&7;if(i>0)for(var a=i;a<8;a++)o.appendBit(!1);for(var n=t-o.getSizeInBytes(),a=0;a<n;++a)o.appendBits((a&1)===0?236:17,8);if(o.getSize()!==r)throw new Pa("Bits size does not equal capacity")},e.getNumDataBytesAndNumECBytesForBlockID=function(t,o,r,a,i,n){if(a>=r)throw new Pa("Block ID too large");var s=t%r,l=r-s,u=Math.floor(t/r),c=u+1,d=Math.floor(o/r),f=d+1,m=u-d,p=c-f;if(m!==p)throw new Pa("EC bytes mismatch");if(r!==l+s)throw new Pa("RS blocks mismatch");if(t!==(d+m)*l+(f+p)*s)throw new Pa("Total bytes mismatch");a<l?(i[0]=d,n[0]=m):(i[0]=f,n[0]=p)},e.interleaveWithECBytes=function(t,o,r,a){var i,n,s,l;if(t.getSizeInBytes()!==r)throw new Pa("Number of bits and data bytes does not match");for(var u=0,c=0,d=0,f=new Array,m=0;m<a;++m){var p=new Int32Array(1),v=new Int32Array(1);e.getNumDataBytesAndNumECBytesForBlockID(o,r,a,m,p,v);var g=p[0],x=new Uint8Array(g);t.toBytes(8*u,x,0,g);var b=e.generateECBytes(x,v[0]);f.push(new tme(x,b)),c=Math.max(c,g),d=Math.max(d,b.length),u+=p[0]}if(r!==u)throw new Pa("Data bytes does not match offset");for(var _=new rn,m=0;m<c;++m)try{for(var w=(i=void 0,AO(f)),S=w.next();!S.done;S=w.next()){var D=S.value,x=D.getDataBytes();m<x.length&&_.appendBits(x[m],8)}}catch(I){i={error:I}}finally{try{S&&!S.done&&(n=w.return)&&n.call(w)}finally{if(i)throw i.error}}for(var m=0;m<d;++m)try{for(var M=(s=void 0,AO(f)),O=M.next();!O.done;O=M.next()){var D=O.value,b=D.getErrorCorrectionBytes();m<b.length&&_.appendBits(b[m],8)}}catch(I){s={error:I}}finally{try{O&&!O.done&&(l=M.return)&&l.call(M)}finally{if(s)throw s.error}}if(o!==_.getSizeInBytes())throw new Pa("Interleaving error: "+o+" and "+_.getSizeInBytes()+" differ.");return _},e.generateECBytes=function(t,o){for(var r=t.length,a=new Int32Array(r+o),i=0;i<r;i++)a[i]=t[i]&255;new Yfe(Hl.QR_CODE_FIELD_256).encode(a,o);for(var n=new Uint8Array(o),i=0;i<o;i++)n[i]=a[r+i];return n},e.appendModeInfo=function(t,o){o.appendBits(t.getBits(),4)},e.appendLengthInfo=function(t,o,r,a){var i=r.getCharacterCountBits(o);if(t>=1<<i)throw new Pa(t+" is bigger than "+((1<<i)-1));a.appendBits(t,i)},e.appendBytes=function(t,o,r,a){switch(o){case Fa.NUMERIC:e.appendNumericBytes(t,r);break;case Fa.ALPHANUMERIC:e.appendAlphanumericBytes(t,r);break;case Fa.BYTE:e.append8BitBytes(t,r,a);break;case Fa.KANJI:e.appendKanjiBytes(t,r);break;default:throw new Pa("Invalid mode: "+o)}},e.getDigit=function(t){return t.charCodeAt(0)-48},e.isDigit=function(t){var o=e.getDigit(t);return o>=0&&o<=9},e.appendNumericBytes=function(t,o){for(var r=t.length,a=0;a<r;){var i=e.getDigit(t.charAt(a));if(a+2<r){var n=e.getDigit(t.charAt(a+1)),s=e.getDigit(t.charAt(a+2));o.appendBits(i*100+n*10+s,10),a+=3}else if(a+1<r){var n=e.getDigit(t.charAt(a+1));o.appendBits(i*10+n,7),a+=2}else o.appendBits(i,4),a++}},e.appendAlphanumericBytes=function(t,o){for(var r=t.length,a=0;a<r;){var i=e.getAlphanumericCode(t.charCodeAt(a));if(i===-1)throw new Pa;if(a+1<r){var n=e.getAlphanumericCode(t.charCodeAt(a+1));if(n===-1)throw new Pa;o.appendBits(i*45+n,11),a+=2}else o.appendBits(i,6),a++}},e.append8BitBytes=function(t,o,r){var a;try{a=il.encode(t,r)}catch(l){throw new Pa(l)}for(var i=0,n=a.length;i!==n;i++){var s=a[i];o.appendBits(s,8)}},e.appendKanjiBytes=function(t,o){var r;try{r=il.encode(t,Ar.SJIS)}catch(d){throw new Pa(d)}for(var a=r.length,i=0;i<a;i+=2){var n=r[i]&255,s=r[i+1]&255,l=n<<8&4294967295|s,u=-1;if(l>=33088&&l<=40956?u=l-33088:l>=57408&&l<=60351&&(u=l-49472),u===-1)throw new Pa("Invalid byte sequence");var c=(u>>8)*192+(u&255);o.appendBits(c,13)}},e.appendECI=function(t,o){o.appendBits(Fa.ECI.getBits(),4),o.appendBits(t.getValue(),8)},e.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),e.DEFAULT_BYTE_MODE_ENCODING=Ar.UTF8.getName(),e}(),BC=function(){function e(){}return e.prototype.write=function(t,o,r,a){if(a===void 0&&(a=null),t.length===0)throw new so("Found empty contents");if(o<0||r<0)throw new so("Requested dimensions are too small: "+o+"x"+r);var i=FC.L,n=e.QUIET_ZONE_SIZE;a!==null&&(a.get(Yc.ERROR_CORRECTION)!==void 0&&(i=FC.fromString(a.get(Yc.ERROR_CORRECTION).toString())),a.get(Yc.MARGIN)!==void 0&&(n=Number.parseInt(a.get(Yc.MARGIN).toString(),10)));var s=ome.encode(t,i,a);return this.renderResult(s,o,r,n)},e.prototype.writeToDom=function(t,o,r,a,i){i===void 0&&(i=null),typeof t=="string"&&(t=document.querySelector(t));var n=this.write(o,r,a,i);t&&t.appendChild(n)},e.prototype.renderResult=function(t,o,r,a){var i=t.getMatrix();if(i===null)throw new Xm;for(var n=i.getWidth(),s=i.getHeight(),l=n+a*2,u=s+a*2,c=Math.max(o,l),d=Math.max(r,u),f=Math.min(Math.floor(c/l),Math.floor(d/u)),m=Math.floor((c-n*f)/2),p=Math.floor((d-s*f)/2),v=this.createSVGElement(c,d),g=0,x=p;g<s;g++,x+=f)for(var b=0,_=m;b<n;b++,_+=f)if(i.get(b,g)===1){var w=this.createSvgRectElement(_,x,f,f);v.appendChild(w)}return v},e.prototype.createSVGElement=function(t,o){var r=document.createElementNS(e.SVG_NS,"svg");return r.setAttributeNS(null,"height",t.toString()),r.setAttributeNS(null,"width",o.toString()),r},e.prototype.createSvgRectElement=function(t,o,r,a){var i=document.createElementNS(e.SVG_NS,"rect");return i.setAttributeNS(null,"x",t.toString()),i.setAttributeNS(null,"y",o.toString()),i.setAttributeNS(null,"height",r.toString()),i.setAttributeNS(null,"width",a.toString()),i.setAttributeNS(null,"fill","#000000"),i},e.QUIET_ZONE_SIZE=4,e.SVG_NS="http://www.w3.org/2000/svg",e}(),ame=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}();(function(e){ame(t,e);function t(o,r,a,i,n,s,l,u){var c=e.call(this,s,l)||this;if(c.yuvData=o,c.dataWidth=r,c.dataHeight=a,c.left=i,c.top=n,i+s>r||n+l>a)throw new so("Crop rectangle does not fit within image data.");return u&&c.reverseHorizontal(s,l),c}return t.prototype.getRow=function(o,r){if(o<0||o>=this.getHeight())throw new so("Requested row is outside the image: "+o);var a=this.getWidth();(r==null||r.length<a)&&(r=new Uint8ClampedArray(a));var i=(o+this.top)*this.dataWidth+this.left;return Ta.arraycopy(this.yuvData,i,r,0,a),r},t.prototype.getMatrix=function(){var o=this.getWidth(),r=this.getHeight();if(o===this.dataWidth&&r===this.dataHeight)return this.yuvData;var a=o*r,i=new Uint8ClampedArray(a),n=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return Ta.arraycopy(this.yuvData,n,i,0,a),i;for(var s=0;s<r;s++){var l=s*o;Ta.arraycopy(this.yuvData,n,i,l,o),n+=this.dataWidth}return i},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(o,r,a,i){return new t(this.yuvData,this.dataWidth,this.dataHeight,this.left+o,this.top+r,a,i,!1)},t.prototype.renderThumbnail=function(){for(var o=this.getWidth()/t.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/t.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(o*r),i=this.yuvData,n=this.top*this.dataWidth+this.left,s=0;s<r;s++){for(var l=s*o,u=0;u<o;u++){var c=i[n+u*t.THUMBNAIL_SCALE_FACTOR]&255;a[l+u]=4278190080|c*65793}n+=this.dataWidth*t.THUMBNAIL_SCALE_FACTOR}return a},t.prototype.getThumbnailWidth=function(){return this.getWidth()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.getThumbnailHeight=function(){return this.getHeight()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.reverseHorizontal=function(o,r){for(var a=this.yuvData,i=0,n=this.top*this.dataWidth+this.left;i<r;i++,n+=this.dataWidth)for(var s=n+o/2,l=n,u=n+o-1;l<s;l++,u--){var c=a[l];a[l]=a[u],a[u]=c}},t.prototype.invert=function(){return new WS(this)},t.THUMBNAIL_SCALE_FACTOR=2,t})(ub);var rme=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}();(function(e){rme(t,e);function t(o,r,a,i,n,s,l){var u=e.call(this,r,a)||this;if(u.dataWidth=i,u.dataHeight=n,u.left=s,u.top=l,o.BYTES_PER_ELEMENT===4){for(var c=r*a,d=new Uint8ClampedArray(c),f=0;f<c;f++){var m=o[f],p=m>>16&255,v=m>>7&510,g=m&255;d[f]=(p+v+g)/4&255}u.luminances=d}else u.luminances=o;if(i===void 0&&(u.dataWidth=r),n===void 0&&(u.dataHeight=a),s===void 0&&(u.left=0),l===void 0&&(u.top=0),u.left+r>u.dataWidth||u.top+a>u.dataHeight)throw new so("Crop rectangle does not fit within image data.");return u}return t.prototype.getRow=function(o,r){if(o<0||o>=this.getHeight())throw new so("Requested row is outside the image: "+o);var a=this.getWidth();(r==null||r.length<a)&&(r=new Uint8ClampedArray(a));var i=(o+this.top)*this.dataWidth+this.left;return Ta.arraycopy(this.luminances,i,r,0,a),r},t.prototype.getMatrix=function(){var o=this.getWidth(),r=this.getHeight();if(o===this.dataWidth&&r===this.dataHeight)return this.luminances;var a=o*r,i=new Uint8ClampedArray(a),n=this.top*this.dataWidth+this.left;if(o===this.dataWidth)return Ta.arraycopy(this.luminances,n,i,0,a),i;for(var s=0;s<r;s++){var l=s*o;Ta.arraycopy(this.luminances,n,i,l,o),n+=this.dataWidth}return i},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(o,r,a,i){return new t(this.luminances,a,i,this.dataWidth,this.dataHeight,this.left+o,this.top+r)},t.prototype.invert=function(){return new WS(this)},t})(ub);var ime=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}();(function(e){ime(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.forName=function(o){return this.getCharacterSetECIByName(o)},t})(Ar);(function(){function e(){}return e.ISO_8859_1=Ar.ISO8859_1,e})();var nme=function(){function e(t){this.previous=t}return e.prototype.getPrevious=function(){return this.previous},e}(),sme=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}(),mN=function(e){sme(t,e);function t(o,r,a){var i=e.call(this,o)||this;return i.value=r,i.bitCount=a,i}return t.prototype.appendTo=function(o,r){o.appendBits(this.value,this.bitCount)},t.prototype.add=function(o,r){return new t(this,o,r)},t.prototype.addBinaryShift=function(o,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new t(this,o,r)},t.prototype.toString=function(){var o=this.value&(1<<this.bitCount)-1;return o|=1<<this.bitCount,"<"+oi.toBinaryString(o|1<<this.bitCount).substring(1)+">"},t}(nme),lme=globalThis&&globalThis.__extends||function(){var e=function(t,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)a.hasOwnProperty(i)&&(r[i]=a[i])},e(t,o)};return function(t,o){e(t,o);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}();(function(e){lme(t,e);function t(o,r,a){var i=e.call(this,o,0,0)||this;return i.binaryShiftStart=r,i.binaryShiftByteCount=a,i}return t.prototype.appendTo=function(o,r){for(var a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(o.appendBits(31,5),this.binaryShiftByteCount>62?o.appendBits(this.binaryShiftByteCount-31,16):a===0?o.appendBits(Math.min(this.binaryShiftByteCount,31),5):o.appendBits(this.binaryShiftByteCount-31,5)),o.appendBits(r[this.binaryShiftStart+a],8)},t.prototype.addBinaryShift=function(o,r){return new t(this,o,r)},t.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},t})(mN);var cp=0,Bg=1,Kf=2,pN=3,X0=4;new mN(null,0,0);var cme=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function ume(e){var t,o;try{for(var r=cme(e),a=r.next();!a.done;a=r.next()){var i=a.value;un.fill(i,-1)}}catch(n){t={error:n}}finally{try{a&&!a.done&&(o=r.return)&&o.call(r)}finally{if(t)throw t.error}}return e[cp][X0]=0,e[Bg][X0]=0,e[Bg][cp]=28,e[pN][X0]=0,e[Kf][X0]=0,e[Kf][cp]=15,e}ume(un.createInt32Array(6,6));globalThis&&globalThis.__values;function dme(e){var t=Ur.getCharCode(" "),o=Ur.getCharCode("."),r=Ur.getCharCode(",");e[cp][t]=1;for(var a=Ur.getCharCode("Z"),i=Ur.getCharCode("A"),n=i;n<=a;n++)e[cp][n]=n-i+2;e[Bg][t]=1;for(var s=Ur.getCharCode("z"),l=Ur.getCharCode("a"),n=l;n<=s;n++)e[Bg][n]=n-l+2;e[Kf][t]=1;for(var u=Ur.getCharCode("9"),c=Ur.getCharCode("0"),n=c;n<=u;n++)e[Kf][n]=n-c+2;e[Kf][r]=12,e[Kf][o]=13;for(var d=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F"],f=0;f<d.length;f++)e[pN][Ur.getCharCode(d[f])]=f;for(var m=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],f=0;f<m.length;f++)Ur.getCharCode(m[f])>0&&(e[X0][Ur.getCharCode(m[f])]=f);return e}dme(un.createInt32Array(5,256));globalThis&&globalThis.__values;globalThis&&globalThis.__values;/**
* @vue/compiler-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const qp=Symbol(""),up=Symbol(""),JS=Symbol(""),qg=Symbol(""),hN=Symbol(""),Bd=Symbol(""),vN=Symbol(""),gN=Symbol(""),ZS=Symbol(""),eI=Symbol(""),Th=Symbol(""),tI=Symbol(""),_N=Symbol(""),oI=Symbol(""),aI=Symbol(""),rI=Symbol(""),iI=Symbol(""),nI=Symbol(""),sI=Symbol(""),bN=Symbol(""),yN=Symbol(""),mb=Symbol(""),Lg=Symbol(""),lI=Symbol(""),cI=Symbol(""),Lp=Symbol(""),Dh=Symbol(""),uI=Symbol(""),qC=Symbol(""),fme=Symbol(""),LC=Symbol(""),Ug=Symbol(""),mme=Symbol(""),pme=Symbol(""),dI=Symbol(""),hme=Symbol(""),vme=Symbol(""),fI=Symbol(""),xN=Symbol(""),Sm={[qp]:"Fragment",[up]:"Teleport",[JS]:"Suspense",[qg]:"KeepAlive",[hN]:"BaseTransition",[Bd]:"openBlock",[vN]:"createBlock",[gN]:"createElementBlock",[ZS]:"createVNode",[eI]:"createElementVNode",[Th]:"createCommentVNode",[tI]:"createTextVNode",[_N]:"createStaticVNode",[oI]:"resolveComponent",[aI]:"resolveDynamicComponent",[rI]:"resolveDirective",[iI]:"resolveFilter",[nI]:"withDirectives",[sI]:"renderList",[bN]:"renderSlot",[yN]:"createSlots",[mb]:"toDisplayString",[Lg]:"mergeProps",[lI]:"normalizeClass",[cI]:"normalizeStyle",[Lp]:"normalizeProps",[Dh]:"guardReactiveProps",[uI]:"toHandlers",[qC]:"camelize",[fme]:"capitalize",[LC]:"toHandlerKey",[Ug]:"setBlockTracking",[mme]:"pushScopeId",[pme]:"popScopeId",[dI]:"withCtx",[hme]:"unref",[vme]:"isRef",[fI]:"withMemo",[xN]:"isMemoSame"};function gme(e){Object.getOwnPropertySymbols(e).forEach(t=>{Sm[t]=e[t]})}const Bn={start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0},source:""};function _me(e,t=""){return{type:0,source:t,children:e,helpers:new Set,components:[],directives:[],hoists:[],imports:[],cached:[],temps:0,codegenNode:void 0,loc:Bn}}function $p(e,t,o,r,a,i,n,s=!1,l=!1,u=!1,c=Bn){return e&&(s?(e.helper(Bd),e.helper(Tm(e.inSSR,u))):e.helper(Am(e.inSSR,u)),n&&e.helper(nI)),{type:13,tag:t,props:o,children:r,patchFlag:a,dynamicProps:i,directives:n,isBlock:s,disableTracking:l,isComponent:u,loc:c}}function Cd(e,t=Bn){return{type:17,loc:t,elements:e}}function is(e,t=Bn){return{type:15,loc:t,properties:e}}function dr(e,t){return{type:16,loc:Bn,key:_o(e)?yo(e,!0):e,value:t}}function yo(e,t=!1,o=Bn,r=0){return{type:4,loc:o,content:e,isStatic:t,constType:t?3:r}}function Os(e,t=Bn){return{type:8,loc:t,children:e}}function Tr(e,t=[],o=Bn){return{type:14,loc:o,callee:e,arguments:t}}function Im(e,t=void 0,o=!1,r=!1,a=Bn){return{type:18,params:e,returns:t,newline:o,isSlot:r,loc:a}}function $C(e,t,o,r=!0){return{type:19,test:e,consequent:t,alternate:o,newline:r,loc:Bn}}function bme(e,t,o=!1,r=!1){return{type:20,index:e,value:t,needPauseTracking:o,inVOnce:r,needArraySpread:!1,loc:Bn}}function yme(e){return{type:21,body:e,loc:Bn}}function Am(e,t){return e||t?ZS:eI}function Tm(e,t){return e||t?vN:gN}function mI(e,{helper:t,removeHelper:o,inSSR:r}){e.isBlock||(e.isBlock=!0,o(Am(r,e.isComponent)),t(Bd),t(Tm(r,e.isComponent)))}const TO=new Uint8Array([123,123]),DO=new Uint8Array([125,125]);function OO(e){return e>=97&&e<=122||e>=65&&e<=90}function Sn(e){return e===32||e===10||e===9||e===12||e===13}function wc(e){return e===47||e===62||Sn(e)}function zg(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}const ui={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])};class xme{constructor(t,o){this.stack=t,this.cbs=o,this.state=1,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=1,this.inRCDATA=!1,this.inXML=!1,this.inVPre=!1,this.newlines=[],this.mode=0,this.delimiterOpen=TO,this.delimiterClose=DO,this.delimiterIndex=-1,this.currentSequence=void 0,this.sequenceIndex=0}get inSFCRoot(){return this.mode===2&&this.stack.length===0}reset(){this.state=1,this.mode=0,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=1,this.inRCDATA=!1,this.currentSequence=void 0,this.newlines.length=0,this.delimiterOpen=TO,this.delimiterClose=DO}getPos(t){let o=1,r=t+1;for(let a=this.newlines.length-1;a>=0;a--){const i=this.newlines[a];if(t>i){o=a+2,r=t-i;break}}return{column:r,line:o,offset:t}}peek(){return this.buffer.charCodeAt(this.index+1)}stateText(t){t===60?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=5,this.sectionStart=this.index):!this.inVPre&&t===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(t))}stateInterpolationOpen(t){if(t===this.delimiterOpen[this.delimiterIndex])if(this.delimiterIndex===this.delimiterOpen.length-1){const o=this.index+1-this.delimiterOpen.length;o>this.sectionStart&&this.cbs.ontext(this.sectionStart,o),this.state=3,this.sectionStart=o}else this.delimiterIndex++;else this.inRCDATA?(this.state=32,this.stateInRCDATA(t)):(this.state=1,this.stateText(t))}stateInterpolation(t){t===this.delimiterClose[0]&&(this.state=4,this.delimiterIndex=0,this.stateInterpolationClose(t))}stateInterpolationClose(t){t===this.delimiterClose[this.delimiterIndex]?this.delimiterIndex===this.delimiterClose.length-1?(this.cbs.oninterpolation(this.sectionStart,this.index+1),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):this.delimiterIndex++:(this.state=3,this.stateInterpolation(t))}stateSpecialStartSequence(t){const o=this.sequenceIndex===this.currentSequence.length;if(!(o?wc(t):(t|32)===this.currentSequence[this.sequenceIndex]))this.inRCDATA=!1;else if(!o){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=6,this.stateInTagName(t)}stateInRCDATA(t){if(this.sequenceIndex===this.currentSequence.length){if(t===62||Sn(t)){const o=this.index-this.currentSequence.length;if(this.sectionStart<o){const r=this.index;this.index=o,this.cbs.ontext(this.sectionStart,o),this.index=r}this.sectionStart=o+2,this.stateInClosingTagName(t),this.inRCDATA=!1;return}this.sequenceIndex=0}(t|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===ui.TitleEnd||this.currentSequence===ui.TextareaEnd&&!this.inSFCRoot?!this.inVPre&&t===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(t)):this.fastForwardTo(60)&&(this.sequenceIndex=1):this.sequenceIndex=Number(t===60)}stateCDATASequence(t){t===ui.Cdata[this.sequenceIndex]?++this.sequenceIndex===ui.Cdata.length&&(this.state=28,this.currentSequence=ui.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=23,this.stateInDeclaration(t))}fastForwardTo(t){for(;++this.index<this.buffer.length;){const o=this.buffer.charCodeAt(this.index);if(o===10&&this.newlines.push(this.index),o===t)return!0}return this.index=this.buffer.length-1,!1}stateInCommentLike(t){t===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===ui.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index-2):this.cbs.oncomment(this.sectionStart,this.index-2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=1):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):t!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}startSpecial(t,o){this.enterRCDATA(t,o),this.state=31}enterRCDATA(t,o){this.inRCDATA=!0,this.currentSequence=t,this.sequenceIndex=o}stateBeforeTagName(t){t===33?(this.state=22,this.sectionStart=this.index+1):t===63?(this.state=24,this.sectionStart=this.index+1):OO(t)?(this.sectionStart=this.index,this.mode===0?this.state=6:this.inSFCRoot?this.state=34:this.inXML?this.state=6:t===116?this.state=30:this.state=t===115?29:6):t===47?this.state=8:(this.state=1,this.stateText(t))}stateInTagName(t){wc(t)&&this.handleTagName(t)}stateInSFCRootTagName(t){if(wc(t)){const o=this.buffer.slice(this.sectionStart,this.index);o!=="template"&&this.enterRCDATA(zg("</"+o),0),this.handleTagName(t)}}handleTagName(t){this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(t)}stateBeforeClosingTagName(t){Sn(t)||(t===62?(this.state=1,this.sectionStart=this.index+1):(this.state=OO(t)?9:27,this.sectionStart=this.index))}stateInClosingTagName(t){(t===62||Sn(t))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=10,this.stateAfterClosingTagName(t))}stateAfterClosingTagName(t){t===62&&(this.state=1,this.sectionStart=this.index+1)}stateBeforeAttrName(t){t===62?(this.cbs.onopentagend(this.index),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):t===47?this.state=7:t===60&&this.peek()===47?(this.cbs.onopentagend(this.index),this.state=5,this.sectionStart=this.index):Sn(t)||this.handleAttrStart(t)}handleAttrStart(t){t===118&&this.peek()===45?(this.state=13,this.sectionStart=this.index):t===46||t===58||t===64||t===35?(this.cbs.ondirname(this.index,this.index+1),this.state=14,this.sectionStart=this.index+1):(this.state=12,this.sectionStart=this.index)}stateInSelfClosingTag(t){t===62?(this.cbs.onselfclosingtag(this.index),this.state=1,this.sectionStart=this.index+1,this.inRCDATA=!1):Sn(t)||(this.state=11,this.stateBeforeAttrName(t))}stateInAttrName(t){(t===61||wc(t))&&(this.cbs.onattribname(this.sectionStart,this.index),this.handleAttrNameEnd(t))}stateInDirName(t){t===61||wc(t)?(this.cbs.ondirname(this.sectionStart,this.index),this.handleAttrNameEnd(t)):t===58?(this.cbs.ondirname(this.sectionStart,this.index),this.state=14,this.sectionStart=this.index+1):t===46&&(this.cbs.ondirname(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDirArg(t){t===61||wc(t)?(this.cbs.ondirarg(this.sectionStart,this.index),this.handleAttrNameEnd(t)):t===91?this.state=15:t===46&&(this.cbs.ondirarg(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDynamicDirArg(t){t===93?this.state=14:(t===61||wc(t))&&(this.cbs.ondirarg(this.sectionStart,this.index+1),this.handleAttrNameEnd(t))}stateInDirModifier(t){t===61||wc(t)?(this.cbs.ondirmodifier(this.sectionStart,this.index),this.handleAttrNameEnd(t)):t===46&&(this.cbs.ondirmodifier(this.sectionStart,this.index),this.sectionStart=this.index+1)}handleAttrNameEnd(t){this.sectionStart=this.index,this.state=17,this.cbs.onattribnameend(this.index),this.stateAfterAttrName(t)}stateAfterAttrName(t){t===61?this.state=18:t===47||t===62?(this.cbs.onattribend(0,this.sectionStart),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(t)):Sn(t)||(this.cbs.onattribend(0,this.sectionStart),this.handleAttrStart(t))}stateBeforeAttrValue(t){t===34?(this.state=19,this.sectionStart=this.index+1):t===39?(this.state=20,this.sectionStart=this.index+1):Sn(t)||(this.sectionStart=this.index,this.state=21,this.stateInAttrValueNoQuotes(t))}handleInAttrValue(t,o){(t===o||this.fastForwardTo(o))&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(o===34?3:2,this.index+1),this.state=11)}stateInAttrValueDoubleQuotes(t){this.handleInAttrValue(t,34)}stateInAttrValueSingleQuotes(t){this.handleInAttrValue(t,39)}stateInAttrValueNoQuotes(t){Sn(t)||t===62?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(1,this.index),this.state=11,this.stateBeforeAttrName(t)):(t===39||t===60||t===61||t===96)&&this.cbs.onerr(18,this.index)}stateBeforeDeclaration(t){t===91?(this.state=26,this.sequenceIndex=0):this.state=t===45?25:23}stateInDeclaration(t){(t===62||this.fastForwardTo(62))&&(this.state=1,this.sectionStart=this.index+1)}stateInProcessingInstruction(t){(t===62||this.fastForwardTo(62))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeComment(t){t===45?(this.state=28,this.currentSequence=ui.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=23}stateInSpecialComment(t){(t===62||this.fastForwardTo(62))&&(this.cbs.oncomment(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeSpecialS(t){t===ui.ScriptEnd[3]?this.startSpecial(ui.ScriptEnd,4):t===ui.StyleEnd[3]?this.startSpecial(ui.StyleEnd,4):(this.state=6,this.stateInTagName(t))}stateBeforeSpecialT(t){t===ui.TitleEnd[3]?this.startSpecial(ui.TitleEnd,4):t===ui.TextareaEnd[3]?this.startSpecial(ui.TextareaEnd,4):(this.state=6,this.stateInTagName(t))}startEntity(){}stateInEntity(){}parse(t){for(this.buffer=t;this.index<this.buffer.length;){const o=this.buffer.charCodeAt(this.index);switch(o===10&&this.newlines.push(this.index),this.state){case 1:{this.stateText(o);break}case 2:{this.stateInterpolationOpen(o);break}case 3:{this.stateInterpolation(o);break}case 4:{this.stateInterpolationClose(o);break}case 31:{this.stateSpecialStartSequence(o);break}case 32:{this.stateInRCDATA(o);break}case 26:{this.stateCDATASequence(o);break}case 19:{this.stateInAttrValueDoubleQuotes(o);break}case 12:{this.stateInAttrName(o);break}case 13:{this.stateInDirName(o);break}case 14:{this.stateInDirArg(o);break}case 15:{this.stateInDynamicDirArg(o);break}case 16:{this.stateInDirModifier(o);break}case 28:{this.stateInCommentLike(o);break}case 27:{this.stateInSpecialComment(o);break}case 11:{this.stateBeforeAttrName(o);break}case 6:{this.stateInTagName(o);break}case 34:{this.stateInSFCRootTagName(o);break}case 9:{this.stateInClosingTagName(o);break}case 5:{this.stateBeforeTagName(o);break}case 17:{this.stateAfterAttrName(o);break}case 20:{this.stateInAttrValueSingleQuotes(o);break}case 18:{this.stateBeforeAttrValue(o);break}case 8:{this.stateBeforeClosingTagName(o);break}case 10:{this.stateAfterClosingTagName(o);break}case 29:{this.stateBeforeSpecialS(o);break}case 30:{this.stateBeforeSpecialT(o);break}case 21:{this.stateInAttrValueNoQuotes(o);break}case 7:{this.stateInSelfClosingTag(o);break}case 23:{this.stateInDeclaration(o);break}case 22:{this.stateBeforeDeclaration(o);break}case 25:{this.stateBeforeComment(o);break}case 24:{this.stateInProcessingInstruction(o);break}case 33:{this.stateInEntity();break}}this.index++}this.cleanup(),this.finish()}cleanup(){this.sectionStart!==this.index&&(this.state===1||this.state===32&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===19||this.state===20||this.state===21)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}finish(){this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const t=this.buffer.length;this.sectionStart>=t||(this.state===28?this.currentSequence===ui.CdataEnd?this.cbs.oncdata(this.sectionStart,t):this.cbs.oncomment(this.sectionStart,t):this.state===6||this.state===11||this.state===18||this.state===17||this.state===12||this.state===13||this.state===14||this.state===15||this.state===16||this.state===20||this.state===19||this.state===21||this.state===9||this.cbs.ontext(this.sectionStart,t))}emitCodePoint(t,o){}}function PO(e,{compatConfig:t}){const o=t&&t[e];return e==="MODE"?o||3:o}function wd(e,t){const o=PO("MODE",t),r=PO(e,t);return o===3?r===!0:r!==!1}function Up(e,t,o,...r){return wd(e,t)}function pI(e){throw e}function CN(e){}function Wa(e,t,o,r){const a=`https://vuejs.org/error-reference/#compiler-${e}`,i=new SyntaxError(String(a));return i.code=e,i.loc=t,i}const nn=e=>e.type===4&&e.isStatic;function wN(e){switch(e){case"Teleport":case"teleport":return up;case"Suspense":case"suspense":return JS;case"KeepAlive":case"keep-alive":return qg;case"BaseTransition":case"base-transition":return hN}}const Cme=/^\d|[^\$\w\xA0-\uFFFF]/,hI=e=>!Cme.test(e),wme=/[A-Za-z_$\xA0-\uFFFF]/,Eme=/[\.\?\w$\xA0-\uFFFF]/,Sme=/\s+[.[]\s*|\s*[.[]\s+/g,EN=e=>e.type===4?e.content:e.loc.source,Ime=e=>{const t=EN(e).trim().replace(Sme,s=>s.trim());let o=0,r=[],a=0,i=0,n=null;for(let s=0;s<t.length;s++){const l=t.charAt(s);switch(o){case 0:if(l==="[")r.push(o),o=1,a++;else if(l==="(")r.push(o),o=2,i++;else if(!(s===0?wme:Eme).test(l))return!1;break;case 1:l==="'"||l==='"'||l==="`"?(r.push(o),o=3,n=l):l==="["?a++:l==="]"&&(--a||(o=r.pop()));break;case 2:if(l==="'"||l==='"'||l==="`")r.push(o),o=3,n=l;else if(l==="(")i++;else if(l===")"){if(s===t.length-1)return!1;--i||(o=r.pop())}break;case 3:l===n&&(o=r.pop(),n=null);break}}return!a&&!i},SN=Ime,Ame=/^\s*(async\s*)?(\([^)]*?\)|[\w$_]+)\s*(:[^=]+)?=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,Tme=e=>Ame.test(EN(e)),Dme=Tme;function ts(e,t,o=!1){for(let r=0;r<e.props.length;r++){const a=e.props[r];if(a.type===7&&(o||a.exp)&&(_o(t)?a.name===t:t.test(a.name)))return a}}function pb(e,t,o=!1,r=!1){for(let a=0;a<e.props.length;a++){const i=e.props[a];if(i.type===6){if(o)continue;if(i.name===t&&(i.value||r))return i}else if(i.name==="bind"&&(i.exp||r)&&ld(i.arg,t))return i}}function ld(e,t){return!!(e&&nn(e)&&e.content===t)}function Ome(e){return e.props.some(t=>t.type===7&&t.name==="bind"&&(!t.arg||t.arg.type!==4||!t.arg.isStatic))}function Vy(e){return e.type===5||e.type===2}function Pme(e){return e.type===7&&e.name==="slot"}function Hg(e){return e.type===1&&e.tagType===3}function jg(e){return e.type===1&&e.tagType===2}const Fme=new Set([Lp,Dh]);function IN(e,t=[]){if(e&&!_o(e)&&e.type===14){const o=e.callee;if(!_o(o)&&Fme.has(o))return IN(e.arguments[0],t.concat(e))}return[e,t]}function Gg(e,t,o){let r,a=e.type===13?e.props:e.arguments[2],i=[],n;if(a&&!_o(a)&&a.type===14){const s=IN(a);a=s[0],i=s[1],n=i[i.length-1]}if(a==null||_o(a))r=is([t]);else if(a.type===14){const s=a.arguments[0];!_o(s)&&s.type===15?FO(t,s)||s.properties.unshift(t):a.callee===uI?r=Tr(o.helper(Lg),[is([t]),a]):a.arguments.unshift(is([t])),!r&&(r=a)}else a.type===15?(FO(t,a)||a.properties.unshift(t),r=a):(r=Tr(o.helper(Lg),[is([t]),a]),n&&n.callee===Dh&&(n=i[i.length-2]));e.type===13?n?n.arguments[0]=r:e.props=r:n?n.arguments[0]=r:e.arguments[2]=r}function FO(e,t){let o=!1;if(e.key.type===4){const r=e.key.content;o=t.properties.some(a=>a.key.type===4&&a.key.content===r)}return o}function zp(e,t){return`_${t}_${e.replace(/[^\w]/g,(o,r)=>o==="-"?"_":e.charCodeAt(r).toString())}`}function Mme(e){return e.type===14&&e.callee===fI?e.arguments[1].returns:e}const Nme=/([\s\S]*?)\s+(?:in|of)\s+(\S[\s\S]*)/,AN={parseMode:"base",ns:0,delimiters:["{{","}}"],getNamespace:()=>0,isVoidTag:V0,isPreTag:V0,isIgnoreNewlineTag:V0,isCustomElement:V0,onError:pI,onWarn:CN,comments:!1,prefixIdentifiers:!1};let ra=AN,Hp=null,Yl="",pi=null,Uo=null,Ki="",Ol=-1,Yu=-1,vI=0,$c=!1,UC=null;const Ha=[],tr=new xme(Ha,{onerr:Al,ontext(e,t){mv(Kr(e,t),e,t)},ontextentity(e,t,o){mv(e,t,o)},oninterpolation(e,t){if($c)return mv(Kr(e,t),e,t);let o=e+tr.delimiterOpen.length,r=t-tr.delimiterClose.length;for(;Sn(Yl.charCodeAt(o));)o++;for(;Sn(Yl.charCodeAt(r-1));)r--;let a=Kr(o,r);a.includes("&")&&(a=ra.decodeEntities(a,!1)),zC({type:5,content:Xv(a,!1,ir(o,r)),loc:ir(e,t)})},onopentagname(e,t){const o=Kr(e,t);pi={type:1,tag:o,ns:ra.getNamespace(o,Ha[0],ra.ns),tagType:0,props:[],children:[],loc:ir(e-1,t),codegenNode:void 0}},onopentagend(e){NO(e)},onclosetag(e,t){const o=Kr(e,t);if(!ra.isVoidTag(o)){let r=!1;for(let a=0;a<Ha.length;a++)if(Ha[a].tag.toLowerCase()===o.toLowerCase()){r=!0,a>0&&Al(24,Ha[0].loc.start.offset);for(let n=0;n<=a;n++){const s=Ha.shift();Qv(s,t,n<a)}break}r||Al(23,TN(e,60))}},onselfclosingtag(e){const t=pi.tag;pi.isSelfClosing=!0,NO(e),Ha[0]&&Ha[0].tag===t&&Qv(Ha.shift(),e)},onattribname(e,t){Uo={type:6,name:Kr(e,t),nameLoc:ir(e,t),value:void 0,loc:ir(e)}},ondirname(e,t){const o=Kr(e,t),r=o==="."||o===":"?"bind":o==="@"?"on":o==="#"?"slot":o.slice(2);if(!$c&&r===""&&Al(26,e),$c||r==="")Uo={type:6,name:o,nameLoc:ir(e,t),value:void 0,loc:ir(e)};else if(Uo={type:7,name:r,rawName:o,exp:void 0,arg:void 0,modifiers:o==="."?[yo("prop")]:[],loc:ir(e)},r==="pre"){$c=tr.inVPre=!0,UC=pi;const a=pi.props;for(let i=0;i<a.length;i++)a[i].type===7&&(a[i]=jme(a[i]))}},ondirarg(e,t){if(e===t)return;const o=Kr(e,t);if($c)Uo.name+=o,cd(Uo.nameLoc,t);else{const r=o[0]!=="[";Uo.arg=Xv(r?o:o.slice(1,-1),r,ir(e,t),r?3:0)}},ondirmodifier(e,t){const o=Kr(e,t);if($c)Uo.name+="."+o,cd(Uo.nameLoc,t);else if(Uo.name==="slot"){const r=Uo.arg;r&&(r.content+="."+o,cd(r.loc,t))}else{const r=yo(o,!0,ir(e,t));Uo.modifiers.push(r)}},onattribdata(e,t){Ki+=Kr(e,t),Ol<0&&(Ol=e),Yu=t},onattribentity(e,t,o){Ki+=e,Ol<0&&(Ol=t),Yu=o},onattribnameend(e){const t=Uo.loc.start.offset,o=Kr(t,e);Uo.type===7&&(Uo.rawName=o),pi.props.some(r=>(r.type===7?r.rawName:r.name)===o)&&Al(2,t)},onattribend(e,t){if(pi&&Uo){if(cd(Uo.loc,t),e!==0)if(Ki.includes("&")&&(Ki=ra.decodeEntities(Ki,!0)),Uo.type===6)Uo.name==="class"&&(Ki=ON(Ki).trim()),e===1&&!Ki&&Al(13,t),Uo.value={type:2,content:Ki,loc:e===1?ir(Ol,Yu):ir(Ol-1,Yu+1)},tr.inSFCRoot&&pi.tag==="template"&&Uo.name==="lang"&&Ki&&Ki!=="html"&&tr.enterRCDATA(zg("</template"),0);else{let o=0;Uo.exp=Xv(Ki,!1,ir(Ol,Yu),0,o),Uo.name==="for"&&(Uo.forParseResult=Rme(Uo.exp));let r=-1;Uo.name==="bind"&&(r=Uo.modifiers.findIndex(a=>a.content==="sync"))>-1&&Up("COMPILER_V_BIND_SYNC",ra,Uo.loc,Uo.rawName)&&(Uo.name="model",Uo.modifiers.splice(r,1))}(Uo.type!==7||Uo.name!=="pre")&&pi.props.push(Uo)}Ki="",Ol=Yu=-1},oncomment(e,t){ra.comments&&zC({type:3,content:Kr(e,t),loc:ir(e-4,t+3)})},onend(){const e=Yl.length;for(let t=0;t<Ha.length;t++)Qv(Ha[t],e-1),Al(24,Ha[t].loc.start.offset)},oncdata(e,t){Ha[0].ns!==0?mv(Kr(e,t),e,t):Al(1,e-9)},onprocessinginstruction(e){(Ha[0]?Ha[0].ns:ra.ns)===0&&Al(21,e-1)}}),MO=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,kme=/^\(|\)$/g;function Rme(e){const t=e.loc,o=e.content,r=o.match(Nme);if(!r)return;const[,a,i]=r,n=(d,f,m=!1)=>{const p=t.start.offset+f,v=p+d.length;return Xv(d,!1,ir(p,v),0,m?1:0)},s={source:n(i.trim(),o.indexOf(i,a.length)),value:void 0,key:void 0,index:void 0,finalized:!1};let l=a.trim().replace(kme,"").trim();const u=a.indexOf(l),c=l.match(MO);if(c){l=l.replace(MO,"").trim();const d=c[1].trim();let f;if(d&&(f=o.indexOf(d,u+l.length),s.key=n(d,f,!0)),c[2]){const m=c[2].trim();m&&(s.index=n(m,o.indexOf(m,s.key?f+d.length:u+l.length),!0))}}return l&&(s.value=n(l,u,!0)),s}function Kr(e,t){return Yl.slice(e,t)}function NO(e){tr.inSFCRoot&&(pi.innerLoc=ir(e+1,e+1)),zC(pi);const{tag:t,ns:o}=pi;o===0&&ra.isPreTag(t)&&vI++,ra.isVoidTag(t)?Qv(pi,e):(Ha.unshift(pi),(o===1||o===2)&&(tr.inXML=!0)),pi=null}function mv(e,t,o){{const i=Ha[0]&&Ha[0].tag;i!=="script"&&i!=="style"&&e.includes("&")&&(e=ra.decodeEntities(e,!1))}const r=Ha[0]||Hp,a=r.children[r.children.length-1];a&&a.type===2?(a.content+=e,cd(a.loc,o)):r.children.push({type:2,content:e,loc:ir(t,o)})}function Qv(e,t,o=!1){o?cd(e.loc,TN(t,60)):cd(e.loc,Vme(t,62)+1),tr.inSFCRoot&&(e.children.length?e.innerLoc.end=Ro({},e.children[e.children.length-1].loc.end):e.innerLoc.end=Ro({},e.innerLoc.start),e.innerLoc.source=Kr(e.innerLoc.start.offset,e.innerLoc.end.offset));const{tag:r,ns:a,children:i}=e;if($c||(r==="slot"?e.tagType=2:kO(e)?e.tagType=3:qme(e)&&(e.tagType=1)),tr.inRCDATA||(e.children=DN(i)),a===0&&ra.isIgnoreNewlineTag(r)){const n=i[0];n&&n.type===2&&(n.content=n.content.replace(/^\r?\n/,""))}a===0&&ra.isPreTag(r)&&vI--,UC===e&&($c=tr.inVPre=!1,UC=null),tr.inXML&&(Ha[0]?Ha[0].ns:ra.ns)===0&&(tr.inXML=!1);{const n=e.props;if(!tr.inSFCRoot&&wd("COMPILER_NATIVE_TEMPLATE",ra)&&e.tag==="template"&&!kO(e)){const l=Ha[0]||Hp,u=l.children.indexOf(e);l.children.splice(u,1,...e.children)}const s=n.find(l=>l.type===6&&l.name==="inline-template");s&&Up("COMPILER_INLINE_TEMPLATE",ra,s.loc)&&e.children.length&&(s.value={type:2,content:Kr(e.children[0].loc.start.offset,e.children[e.children.length-1].loc.end.offset),loc:s.loc})}}function Vme(e,t){let o=e;for(;Yl.charCodeAt(o)!==t&&o<Yl.length-1;)o++;return o}function TN(e,t){let o=e;for(;Yl.charCodeAt(o)!==t&&o>=0;)o--;return o}const Bme=new Set(["if","else","else-if","for","slot"]);function kO({tag:e,props:t}){if(e==="template"){for(let o=0;o<t.length;o++)if(t[o].type===7&&Bme.has(t[o].name))return!0}return!1}function qme({tag:e,props:t}){if(ra.isCustomElement(e))return!1;if(e==="component"||Lme(e.charCodeAt(0))||wN(e)||ra.isBuiltInComponent&&ra.isBuiltInComponent(e)||ra.isNativeTag&&!ra.isNativeTag(e))return!0;for(let o=0;o<t.length;o++){const r=t[o];if(r.type===6){if(r.name==="is"&&r.value){if(r.value.content.startsWith("vue:"))return!0;if(Up("COMPILER_IS_ON_ELEMENT",ra,r.loc))return!0}}else if(r.name==="bind"&&ld(r.arg,"is")&&Up("COMPILER_IS_ON_ELEMENT",ra,r.loc))return!0}return!1}function Lme(e){return e>64&&e<91}const $me=/\r\n/g;function DN(e,t){const o=ra.whitespace!=="preserve";let r=!1;for(let a=0;a<e.length;a++){const i=e[a];if(i.type===2)if(vI)i.content=i.content.replace($me,`
`);else if(Ume(i.content)){const n=e[a-1]&&e[a-1].type,s=e[a+1]&&e[a+1].type;!n||!s||o&&(n===3&&(s===3||s===1)||n===1&&(s===3||s===1&&zme(i.content)))?(r=!0,e[a]=null):i.content=" "}else o&&(i.content=ON(i.content))}return r?e.filter(Boolean):e}function Ume(e){for(let t=0;t<e.length;t++)if(!Sn(e.charCodeAt(t)))return!1;return!0}function zme(e){for(let t=0;t<e.length;t++){const o=e.charCodeAt(t);if(o===10||o===13)return!0}return!1}function ON(e){let t="",o=!1;for(let r=0;r<e.length;r++)Sn(e.charCodeAt(r))?o||(t+=" ",o=!0):(t+=e[r],o=!1);return t}function zC(e){(Ha[0]||Hp).children.push(e)}function ir(e,t){return{start:tr.getPos(e),end:t==null?t:tr.getPos(t),source:t==null?t:Kr(e,t)}}function Hme(e){return ir(e.start.offset,e.end.offset)}function cd(e,t){e.end=tr.getPos(t),e.source=Kr(e.start.offset,t)}function jme(e){const t={type:6,name:e.rawName,nameLoc:ir(e.loc.start.offset,e.loc.start.offset+e.rawName.length),value:void 0,loc:e.loc};if(e.exp){const o=e.exp.loc;o.end.offset<e.loc.end.offset&&(o.start.offset--,o.start.column--,o.end.offset++,o.end.column++),t.value={type:2,content:e.exp.content,loc:o}}return t}function Xv(e,t=!1,o,r=0,a=0){return yo(e,t,o,r)}function Al(e,t,o){ra.onError(Wa(e,ir(t,t)))}function Gme(){tr.reset(),pi=null,Uo=null,Ki="",Ol=-1,Yu=-1,Ha.length=0}function Wme(e,t){if(Gme(),Yl=e,ra=Ro({},AN),t){let a;for(a in t)t[a]!=null&&(ra[a]=t[a])}tr.mode=ra.parseMode==="html"?1:ra.parseMode==="sfc"?2:0,tr.inXML=ra.ns===1||ra.ns===2;const o=t&&t.delimiters;o&&(tr.delimiterOpen=zg(o[0]),tr.delimiterClose=zg(o[1]));const r=Hp=_me([],e);return tr.parse(Yl),r.loc=ir(0,e.length),r.children=DN(r.children),Hp=null,r}function Qme(e,t){Kv(e,void 0,t,PN(e,e.children[0]))}function PN(e,t){const{children:o}=e;return o.length===1&&t.type===1&&!jg(t)}function Kv(e,t,o,r=!1,a=!1){const{children:i}=e,n=[];for(let c=0;c<i.length;c++){const d=i[c];if(d.type===1&&d.tagType===0){const f=r?0:Pn(d,o);if(f>0){if(f>=2){d.codegenNode.patchFlag=-1,n.push(d);continue}}else{const m=d.codegenNode;if(m.type===13){const p=m.patchFlag;if((p===void 0||p===512||p===1)&&MN(d,o)>=2){const v=NN(d);v&&(m.props=o.hoist(v))}m.dynamicProps&&(m.dynamicProps=o.hoist(m.dynamicProps))}}}else if(d.type===12&&(r?0:Pn(d,o))>=2){n.push(d);continue}if(d.type===1){const f=d.tagType===1;f&&o.scopes.vSlot++,Kv(d,e,o,!1,a),f&&o.scopes.vSlot--}else if(d.type===11)Kv(d,e,o,d.children.length===1,!0);else if(d.type===9)for(let f=0;f<d.branches.length;f++)Kv(d.branches[f],e,o,d.branches[f].children.length===1,a)}let s=!1;if(n.length===i.length&&e.type===1){if(e.tagType===0&&e.codegenNode&&e.codegenNode.type===13&&Ot(e.codegenNode.children))e.codegenNode.children=l(Cd(e.codegenNode.children)),s=!0;else if(e.tagType===1&&e.codegenNode&&e.codegenNode.type===13&&e.codegenNode.children&&!Ot(e.codegenNode.children)&&e.codegenNode.children.type===15){const c=u(e.codegenNode,"default");c&&(c.returns=l(Cd(c.returns)),s=!0)}else if(e.tagType===3&&t&&t.type===1&&t.tagType===1&&t.codegenNode&&t.codegenNode.type===13&&t.codegenNode.children&&!Ot(t.codegenNode.children)&&t.codegenNode.children.type===15){const c=ts(e,"slot",!0),d=c&&c.arg&&u(t.codegenNode,c.arg);d&&(d.returns=l(Cd(d.returns)),s=!0)}}if(!s)for(const c of n)c.codegenNode=o.cache(c.codegenNode);function l(c){const d=o.cache(c);return a&&o.hmr&&(d.needArraySpread=!0),d}function u(c,d){if(c.children&&!Ot(c.children)&&c.children.type===15){const f=c.children.properties.find(m=>m.key===d||m.key.content===d);return f&&f.value}}n.length&&o.transformHoist&&o.transformHoist(i,o,e)}function Pn(e,t){const{constantCache:o}=t;switch(e.type){case 1:if(e.tagType!==0)return 0;const r=o.get(e);if(r!==void 0)return r;const a=e.codegenNode;if(a.type!==13||a.isBlock&&e.tag!=="svg"&&e.tag!=="foreignObject"&&e.tag!=="math")return 0;if(a.patchFlag===void 0){let n=3;const s=MN(e,t);if(s===0)return o.set(e,0),0;s<n&&(n=s);for(let l=0;l<e.children.length;l++){const u=Pn(e.children[l],t);if(u===0)return o.set(e,0),0;u<n&&(n=u)}if(n>1)for(let l=0;l<e.props.length;l++){const u=e.props[l];if(u.type===7&&u.name==="bind"&&u.exp){const c=Pn(u.exp,t);if(c===0)return o.set(e,0),0;c<n&&(n=c)}}if(a.isBlock){for(let l=0;l<e.props.length;l++)if(e.props[l].type===7)return o.set(e,0),0;t.removeHelper(Bd),t.removeHelper(Tm(t.inSSR,a.isComponent)),a.isBlock=!1,t.helper(Am(t.inSSR,a.isComponent))}return o.set(e,n),n}else return o.set(e,0),0;case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return Pn(e.content,t);case 4:return e.constType;case 8:let i=3;for(let n=0;n<e.children.length;n++){const s=e.children[n];if(_o(s)||ln(s))continue;const l=Pn(s,t);if(l===0)return 0;l<i&&(i=l)}return i;case 20:return 2;default:return 0}}const Xme=new Set([lI,cI,Lp,Dh]);function FN(e,t){if(e.type===14&&!_o(e.callee)&&Xme.has(e.callee)){const o=e.arguments[0];if(o.type===4)return Pn(o,t);if(o.type===14)return FN(o,t)}return 0}function MN(e,t){let o=3;const r=NN(e);if(r&&r.type===15){const{properties:a}=r;for(let i=0;i<a.length;i++){const{key:n,value:s}=a[i],l=Pn(n,t);if(l===0)return l;l<o&&(o=l);let u;if(s.type===4?u=Pn(s,t):s.type===14?u=FN(s,t):u=0,u===0)return u;u<o&&(o=u)}}return o}function NN(e){const t=e.codegenNode;if(t.type===13)return t.props}function Kme(e,{filename:t="",prefixIdentifiers:o=!1,hoistStatic:r=!1,hmr:a=!1,cacheHandlers:i=!1,nodeTransforms:n=[],directiveTransforms:s={},transformHoist:l=null,isBuiltInComponent:u=Hr,isCustomElement:c=Hr,expressionPlugins:d=[],scopeId:f=null,slotted:m=!0,ssr:p=!1,inSSR:v=!1,ssrCssVars:g="",bindingMetadata:x=Mo,inline:b=!1,isTS:_=!1,onError:w=pI,onWarn:S=CN,compatConfig:D}){const M=t.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),O={filename:t,selfName:M&&gu(Da(M[1])),prefixIdentifiers:o,hoistStatic:r,hmr:a,cacheHandlers:i,nodeTransforms:n,directiveTransforms:s,transformHoist:l,isBuiltInComponent:u,isCustomElement:c,expressionPlugins:d,scopeId:f,slotted:m,ssr:p,inSSR:v,ssrCssVars:g,bindingMetadata:x,inline:b,isTS:_,onError:w,onWarn:S,compatConfig:D,root:e,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],cached:[],constantCache:new WeakMap,temps:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,grandParent:null,currentNode:e,childIndex:0,inVOnce:!1,helper(T){const I=O.helpers.get(T)||0;return O.helpers.set(T,I+1),T},removeHelper(T){const I=O.helpers.get(T);if(I){const N=I-1;N?O.helpers.set(T,N):O.helpers.delete(T)}},helperString(T){return`_${Sm[O.helper(T)]}`},replaceNode(T){O.parent.children[O.childIndex]=O.currentNode=T},removeNode(T){const I=O.parent.children,N=T?I.indexOf(T):O.currentNode?O.childIndex:-1;!T||T===O.currentNode?(O.currentNode=null,O.onNodeRemoved()):O.childIndex>N&&(O.childIndex--,O.onNodeRemoved()),O.parent.children.splice(N,1)},onNodeRemoved:Hr,addIdentifiers(T){},removeIdentifiers(T){},hoist(T){_o(T)&&(T=yo(T)),O.hoists.push(T);const I=yo(`_hoisted_${O.hoists.length}`,!1,T.loc,2);return I.hoisted=T,I},cache(T,I=!1,N=!1){const P=bme(O.cached.length,T,I,N);return O.cached.push(P),P}};return O.filters=new Set,O}function Yme(e,t){const o=Kme(e,t);hb(e,o),t.hoistStatic&&Qme(e,o),t.ssr||Jme(e,o),e.helpers=new Set([...o.helpers.keys()]),e.components=[...o.components],e.directives=[...o.directives],e.imports=o.imports,e.hoists=o.hoists,e.temps=o.temps,e.cached=o.cached,e.transformed=!0,e.filters=[...o.filters]}function Jme(e,t){const{helper:o}=t,{children:r}=e;if(r.length===1){const a=r[0];if(PN(e,a)&&a.codegenNode){const i=a.codegenNode;i.type===13&&mI(i,t),e.codegenNode=i}else e.codegenNode=a}else if(r.length>1){let a=64;e.codegenNode=$p(t,o(qp),void 0,e.children,a,void 0,void 0,!0,void 0,!1)}}function Zme(e,t){let o=0;const r=()=>{o--};for(;o<e.children.length;o++){const a=e.children[o];_o(a)||(t.grandParent=t.parent,t.parent=e,t.childIndex=o,t.onNodeRemoved=r,hb(a,t))}}function hb(e,t){t.currentNode=e;const{nodeTransforms:o}=t,r=[];for(let i=0;i<o.length;i++){const n=o[i](e,t);if(n&&(Ot(n)?r.push(...n):r.push(n)),t.currentNode)e=t.currentNode;else return}switch(e.type){case 3:t.ssr||t.helper(Th);break;case 5:t.ssr||t.helper(mb);break;case 9:for(let i=0;i<e.branches.length;i++)hb(e.branches[i],t);break;case 10:case 11:case 1:case 0:Zme(e,t);break}t.currentNode=e;let a=r.length;for(;a--;)r[a]()}function kN(e,t){const o=_o(e)?r=>r===e:r=>e.test(r);return(r,a)=>{if(r.type===1){const{props:i}=r;if(r.tagType===3&&i.some(Pme))return;const n=[];for(let s=0;s<i.length;s++){const l=i[s];if(l.type===7&&o(l.name)){i.splice(s,1),s--;const u=t(r,l,a);u&&n.push(u)}}return n}}}const vb="/*@__PURE__*/",RN=e=>`${Sm[e]}: _${Sm[e]}`;function e0e(e,{mode:t="function",prefixIdentifiers:o=t==="module",sourceMap:r=!1,filename:a="template.vue.html",scopeId:i=null,optimizeImports:n=!1,runtimeGlobalName:s="Vue",runtimeModuleName:l="vue",ssrRuntimeModuleName:u="vue/server-renderer",ssr:c=!1,isTS:d=!1,inSSR:f=!1}){const m={mode:t,prefixIdentifiers:o,sourceMap:r,filename:a,scopeId:i,optimizeImports:n,runtimeGlobalName:s,runtimeModuleName:l,ssrRuntimeModuleName:u,ssr:c,isTS:d,inSSR:f,source:e.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(v){return`_${Sm[v]}`},push(v,g=-2,x){m.code+=v},indent(){p(++m.indentLevel)},deindent(v=!1){v?--m.indentLevel:p(--m.indentLevel)},newline(){p(m.indentLevel)}};function p(v){m.push(`
`+"  ".repeat(v),0)}return m}function t0e(e,t={}){const o=e0e(e,t);t.onContextCreated&&t.onContextCreated(o);const{mode:r,push:a,prefixIdentifiers:i,indent:n,deindent:s,newline:l,scopeId:u,ssr:c}=o,d=Array.from(e.helpers),f=d.length>0,m=!i&&r!=="module";o0e(e,o);const v=c?"ssrRender":"render",x=(c?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ");if(a(`function ${v}(${x}) {`),n(),m&&(a("with (_ctx) {"),n(),f&&(a(`const { ${d.map(RN).join(", ")} } = _Vue
`,-1),l())),e.components.length&&(By(e.components,"component",o),(e.directives.length||e.temps>0)&&l()),e.directives.length&&(By(e.directives,"directive",o),e.temps>0&&l()),e.filters&&e.filters.length&&(l(),By(e.filters,"filter",o),l()),e.temps>0){a("let ");for(let b=0;b<e.temps;b++)a(`${b>0?", ":""}_temp${b}`)}return(e.components.length||e.directives.length||e.temps)&&(a(`
`,0),l()),c||a("return "),e.codegenNode?wi(e.codegenNode,o):a("null"),m&&(s(),a("}")),s(),a("}"),{ast:e,code:o.code,preamble:"",map:o.map?o.map.toJSON():void 0}}function o0e(e,t){const{ssr:o,prefixIdentifiers:r,push:a,newline:i,runtimeModuleName:n,runtimeGlobalName:s,ssrRuntimeModuleName:l}=t,u=s,c=Array.from(e.helpers);if(c.length>0&&(a(`const _Vue = ${u}
`,-1),e.hoists.length)){const d=[ZS,eI,Th,tI,_N].filter(f=>c.includes(f)).map(RN).join(", ");a(`const { ${d} } = _Vue
`,-1)}a0e(e.hoists,t),i(),a("return ")}function By(e,t,{helper:o,push:r,newline:a,isTS:i}){const n=o(t==="filter"?iI:t==="component"?oI:rI);for(let s=0;s<e.length;s++){let l=e[s];const u=l.endsWith("__self");u&&(l=l.slice(0,-6)),r(`const ${zp(l,t)} = ${n}(${JSON.stringify(l)}${u?", true":""})${i?"!":""}`),s<e.length-1&&a()}}function a0e(e,t){if(!e.length)return;t.pure=!0;const{push:o,newline:r}=t;r();for(let a=0;a<e.length;a++){const i=e[a];i&&(o(`const _hoisted_${a+1} = `),wi(i,t),r())}t.pure=!1}function gI(e,t){const o=e.length>3||!1;t.push("["),o&&t.indent(),Oh(e,t,o),o&&t.deindent(),t.push("]")}function Oh(e,t,o=!1,r=!0){const{push:a,newline:i}=t;for(let n=0;n<e.length;n++){const s=e[n];_o(s)?a(s,-3):Ot(s)?gI(s,t):wi(s,t),n<e.length-1&&(o?(r&&a(","),i()):r&&a(", "))}}function wi(e,t){if(_o(e)){t.push(e,-3);return}if(ln(e)){t.push(t.helper(e));return}switch(e.type){case 1:case 9:case 11:wi(e.codegenNode,t);break;case 2:r0e(e,t);break;case 4:VN(e,t);break;case 5:i0e(e,t);break;case 12:wi(e.codegenNode,t);break;case 8:BN(e,t);break;case 3:s0e(e,t);break;case 13:l0e(e,t);break;case 14:u0e(e,t);break;case 15:d0e(e,t);break;case 17:f0e(e,t);break;case 18:m0e(e,t);break;case 19:p0e(e,t);break;case 20:h0e(e,t);break;case 21:Oh(e.body,t,!0,!1);break}}function r0e(e,t){t.push(JSON.stringify(e.content),-3,e)}function VN(e,t){const{content:o,isStatic:r}=e;t.push(r?JSON.stringify(o):o,-3,e)}function i0e(e,t){const{push:o,helper:r,pure:a}=t;a&&o(vb),o(`${r(mb)}(`),wi(e.content,t),o(")")}function BN(e,t){for(let o=0;o<e.children.length;o++){const r=e.children[o];_o(r)?t.push(r,-3):wi(r,t)}}function n0e(e,t){const{push:o}=t;if(e.type===8)o("["),BN(e,t),o("]");else if(e.isStatic){const r=hI(e.content)?e.content:JSON.stringify(e.content);o(r,-2,e)}else o(`[${e.content}]`,-3,e)}function s0e(e,t){const{push:o,helper:r,pure:a}=t;a&&o(vb),o(`${r(Th)}(${JSON.stringify(e.content)})`,-3,e)}function l0e(e,t){const{push:o,helper:r,pure:a}=t,{tag:i,props:n,children:s,patchFlag:l,dynamicProps:u,directives:c,isBlock:d,disableTracking:f,isComponent:m}=e;let p;l&&(p=String(l)),c&&o(r(nI)+"("),d&&o(`(${r(Bd)}(${f?"true":""}), `),a&&o(vb);const v=d?Tm(t.inSSR,m):Am(t.inSSR,m);o(r(v)+"(",-2,e),Oh(c0e([i,n,s,p,u]),t),o(")"),d&&o(")"),c&&(o(", "),wi(c,t),o(")"))}function c0e(e){let t=e.length;for(;t--&&e[t]==null;);return e.slice(0,t+1).map(o=>o||"null")}function u0e(e,t){const{push:o,helper:r,pure:a}=t,i=_o(e.callee)?e.callee:r(e.callee);a&&o(vb),o(i+"(",-2,e),Oh(e.arguments,t),o(")")}function d0e(e,t){const{push:o,indent:r,deindent:a,newline:i}=t,{properties:n}=e;if(!n.length){o("{}",-2,e);return}const s=n.length>1||!1;o(s?"{":"{ "),s&&r();for(let l=0;l<n.length;l++){const{key:u,value:c}=n[l];n0e(u,t),o(": "),wi(c,t),l<n.length-1&&(o(","),i())}s&&a(),o(s?"}":" }")}function f0e(e,t){gI(e.elements,t)}function m0e(e,t){const{push:o,indent:r,deindent:a}=t,{params:i,returns:n,body:s,newline:l,isSlot:u}=e;u&&o(`_${Sm[dI]}(`),o("(",-2,e),Ot(i)?Oh(i,t):i&&wi(i,t),o(") => "),(l||s)&&(o("{"),r()),n?(l&&o("return "),Ot(n)?gI(n,t):wi(n,t)):s&&wi(s,t),(l||s)&&(a(),o("}")),u&&(e.isNonScopedSlot&&o(", undefined, true"),o(")"))}function p0e(e,t){const{test:o,consequent:r,alternate:a,newline:i}=e,{push:n,indent:s,deindent:l,newline:u}=t;if(o.type===4){const d=!hI(o.content);d&&n("("),VN(o,t),d&&n(")")}else n("("),wi(o,t),n(")");i&&s(),t.indentLevel++,i||n(" "),n("? "),wi(r,t),t.indentLevel--,i&&u(),i||n(" "),n(": ");const c=a.type===19;c||t.indentLevel++,wi(a,t),c||t.indentLevel--,i&&l(!0)}function h0e(e,t){const{push:o,helper:r,indent:a,deindent:i,newline:n}=t,{needPauseTracking:s,needArraySpread:l}=e;l&&o("[...("),o(`_cache[${e.index}] || (`),s&&(a(),o(`${r(Ug)}(-1`),e.inVOnce&&o(", true"),o("),"),n(),o("(")),o(`_cache[${e.index}] = `),wi(e.value,t),s&&(o(`).cacheIndex = ${e.index},`),n(),o(`${r(Ug)}(1),`),n(),o(`_cache[${e.index}]`),i()),o(")"),l&&o(")]")}new RegExp("\\b"+"arguments,await,break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,let,new,return,super,switch,throw,try,var,void,while,with,yield".split(",").join("\\b|\\b")+"\\b");const v0e=kN(/^(if|else|else-if)$/,(e,t,o)=>g0e(e,t,o,(r,a,i)=>{const n=o.parent.children;let s=n.indexOf(r),l=0;for(;s-->=0;){const u=n[s];u&&u.type===9&&(l+=u.branches.length)}return()=>{if(i)r.codegenNode=VO(a,l,o);else{const u=_0e(r.codegenNode);u.alternate=VO(a,l+r.branches.length-1,o)}}}));function g0e(e,t,o,r){if(t.name!=="else"&&(!t.exp||!t.exp.content.trim())){const a=t.exp?t.exp.loc:e.loc;o.onError(Wa(28,t.loc)),t.exp=yo("true",!1,a)}if(t.name==="if"){const a=RO(e,t),i={type:9,loc:Hme(e.loc),branches:[a]};if(o.replaceNode(i),r)return r(i,a,!0)}else{const a=o.parent.children;let i=a.indexOf(e);for(;i-->=-1;){const n=a[i];if(n&&n.type===3){o.removeNode(n);continue}if(n&&n.type===2&&!n.content.trim().length){o.removeNode(n);continue}if(n&&n.type===9){t.name==="else-if"&&n.branches[n.branches.length-1].condition===void 0&&o.onError(Wa(30,e.loc)),o.removeNode();const s=RO(e,t);n.branches.push(s);const l=r&&r(n,s,!1);hb(s,o),l&&l(),o.currentNode=null}else o.onError(Wa(30,e.loc));break}}}function RO(e,t){const o=e.tagType===3;return{type:10,loc:e.loc,condition:t.name==="else"?void 0:t.exp,children:o&&!ts(e,"for")?e.children:[e],userKey:pb(e,"key"),isTemplateIf:o}}function VO(e,t,o){return e.condition?$C(e.condition,BO(e,t,o),Tr(o.helper(Th),['""',"true"])):BO(e,t,o)}function BO(e,t,o){const{helper:r}=o,a=dr("key",yo(`${t}`,!1,Bn,2)),{children:i}=e,n=i[0];if(i.length!==1||n.type!==1)if(i.length===1&&n.type===11){const l=n.codegenNode;return Gg(l,a,o),l}else{let l=64;return $p(o,r(qp),is([a]),i,l,void 0,void 0,!0,!1,!1,e.loc)}else{const l=n.codegenNode,u=Mme(l);return u.type===13&&mI(u,o),Gg(u,a,o),l}}function _0e(e){for(;;)if(e.type===19)if(e.alternate.type===19)e=e.alternate;else return e;else e.type===20&&(e=e.value)}const b0e=(e,t,o)=>{const{modifiers:r,loc:a}=e,i=e.arg;let{exp:n}=e;if(n&&n.type===4&&!n.content.trim()&&(n=void 0),!n){if(i.type!==4||!i.isStatic)return o.onError(Wa(52,i.loc)),{props:[dr(i,yo("",!0,a))]};qN(e),n=e.exp}return i.type!==4?(i.children.unshift("("),i.children.push(') || ""')):i.isStatic||(i.content=`${i.content} || ""`),r.some(s=>s.content==="camel")&&(i.type===4?i.isStatic?i.content=Da(i.content):i.content=`${o.helperString(qC)}(${i.content})`:(i.children.unshift(`${o.helperString(qC)}(`),i.children.push(")"))),o.inSSR||(r.some(s=>s.content==="prop")&&qO(i,"."),r.some(s=>s.content==="attr")&&qO(i,"^")),{props:[dr(i,n)]}},qN=(e,t)=>{const o=e.arg,r=Da(o.content);e.exp=yo(r,!1,o.loc)},qO=(e,t)=>{e.type===4?e.isStatic?e.content=t+e.content:e.content=`\`${t}\${${e.content}}\``:(e.children.unshift(`'${t}' + (`),e.children.push(")"))},y0e=kN("for",(e,t,o)=>{const{helper:r,removeHelper:a}=o;return x0e(e,t,o,i=>{const n=Tr(r(sI),[i.source]),s=Hg(e),l=ts(e,"memo"),u=pb(e,"key",!1,!0);u&&u.type===7&&!u.exp&&qN(u);let d=u&&(u.type===6?u.value?yo(u.value.content,!0):void 0:u.exp);const f=u&&d?dr("key",d):null,m=i.source.type===4&&i.source.constType>0,p=m?64:u?128:256;return i.codegenNode=$p(o,r(qp),void 0,n,p,void 0,void 0,!0,!m,!1,e.loc),()=>{let v;const{children:g}=i,x=g.length!==1||g[0].type!==1,b=jg(e)?e:s&&e.children.length===1&&jg(e.children[0])?e.children[0]:null;if(b?(v=b.codegenNode,s&&f&&Gg(v,f,o)):x?v=$p(o,r(qp),f?is([f]):void 0,e.children,64,void 0,void 0,!0,void 0,!1):(v=g[0].codegenNode,s&&f&&Gg(v,f,o),v.isBlock!==!m&&(v.isBlock?(a(Bd),a(Tm(o.inSSR,v.isComponent))):a(Am(o.inSSR,v.isComponent))),v.isBlock=!m,v.isBlock?(r(Bd),r(Tm(o.inSSR,v.isComponent))):r(Am(o.inSSR,v.isComponent))),l){const _=Im(HC(i.parseResult,[yo("_cached")]));_.body=yme([Os(["const _memo = (",l.exp,")"]),Os(["if (_cached",...d?[" && _cached.key === ",d]:[],` && ${o.helperString(xN)}(_cached, _memo)) return _cached`]),Os(["const _item = ",v]),yo("_item.memo = _memo"),yo("return _item")]),n.arguments.push(_,yo("_cache"),yo(String(o.cached.length))),o.cached.push(null)}else n.arguments.push(Im(HC(i.parseResult),v,!0))}})});function x0e(e,t,o,r){if(!t.exp){o.onError(Wa(31,t.loc));return}const a=t.forParseResult;if(!a){o.onError(Wa(32,t.loc));return}LN(a);const{addIdentifiers:i,removeIdentifiers:n,scopes:s}=o,{source:l,value:u,key:c,index:d}=a,f={type:11,loc:t.loc,source:l,valueAlias:u,keyAlias:c,objectIndexAlias:d,parseResult:a,children:Hg(e)?e.children:[e]};o.replaceNode(f),s.vFor++;const m=r&&r(f);return()=>{s.vFor--,m&&m()}}function LN(e,t){e.finalized||(e.finalized=!0)}function HC({value:e,key:t,index:o},r=[]){return C0e([e,t,o,...r])}function C0e(e){let t=e.length;for(;t--&&!e[t];);return e.slice(0,t+1).map((o,r)=>o||yo("_".repeat(r+1),!1))}const LO=yo("undefined",!1),w0e=(e,t)=>{if(e.type===1&&(e.tagType===1||e.tagType===3)){const o=ts(e,"slot");if(o)return o.exp,t.scopes.vSlot++,()=>{t.scopes.vSlot--}}},E0e=(e,t,o,r)=>Im(e,o,!1,!0,o.length?o[0].loc:r);function S0e(e,t,o=E0e){t.helper(dI);const{children:r,loc:a}=e,i=[],n=[];let s=t.scopes.vSlot>0||t.scopes.vFor>0;const l=ts(e,"slot",!0);if(l){const{arg:g,exp:x}=l;g&&!nn(g)&&(s=!0),i.push(dr(g||yo("default",!0),o(x,void 0,r,a)))}let u=!1,c=!1;const d=[],f=new Set;let m=0;for(let g=0;g<r.length;g++){const x=r[g];let b;if(!Hg(x)||!(b=ts(x,"slot",!0))){x.type!==3&&d.push(x);continue}if(l){t.onError(Wa(37,b.loc));break}u=!0;const{children:_,loc:w}=x,{arg:S=yo("default",!0),exp:D,loc:M}=b;let O;nn(S)?O=S?S.content:"default":s=!0;const T=ts(x,"for"),I=o(D,T,_,w);let N,P;if(N=ts(x,"if"))s=!0,n.push($C(N.exp,pv(S,I,m++),LO));else if(P=ts(x,/^else(-if)?$/,!0)){let F=g,L;for(;F--&&(L=r[F],L.type===3););if(L&&Hg(L)&&ts(L,/^(else-)?if$/)){let z=n[n.length-1];for(;z.alternate.type===19;)z=z.alternate;z.alternate=P.exp?$C(P.exp,pv(S,I,m++),LO):pv(S,I,m++)}else t.onError(Wa(30,P.loc))}else if(T){s=!0;const F=T.forParseResult;F?(LN(F),n.push(Tr(t.helper(sI),[F.source,Im(HC(F),pv(S,I),!0)]))):t.onError(Wa(32,T.loc))}else{if(O){if(f.has(O)){t.onError(Wa(38,M));continue}f.add(O),O==="default"&&(c=!0)}i.push(dr(S,I))}}if(!l){const g=(x,b)=>{const _=o(x,void 0,b,a);return t.compatConfig&&(_.isNonScopedSlot=!0),dr("default",_)};u?d.length&&d.some(x=>$N(x))&&(c?t.onError(Wa(39,d[0].loc)):i.push(g(void 0,d))):i.push(g(void 0,r))}const p=s?2:Yv(e.children)?3:1;let v=is(i.concat(dr("_",yo(p+"",!1))),a);return n.length&&(v=Tr(t.helper(yN),[v,Cd(n)])),{slots:v,hasDynamicSlots:s}}function pv(e,t,o){const r=[dr("name",e),dr("fn",t)];return o!=null&&r.push(dr("key",yo(String(o),!0))),is(r)}function Yv(e){for(let t=0;t<e.length;t++){const o=e[t];switch(o.type){case 1:if(o.tagType===2||Yv(o.children))return!0;break;case 9:if(Yv(o.branches))return!0;break;case 10:case 11:if(Yv(o.children))return!0;break}}return!1}function $N(e){return e.type!==2&&e.type!==12?!0:e.type===2?!!e.content.trim():$N(e.content)}const UN=new WeakMap,I0e=(e,t)=>function(){if(e=t.currentNode,!(e.type===1&&(e.tagType===0||e.tagType===1)))return;const{tag:r,props:a}=e,i=e.tagType===1;let n=i?A0e(e,t):`"${r}"`;const s=pa(n)&&n.callee===aI;let l,u,c=0,d,f,m,p=s||n===up||n===JS||!i&&(r==="svg"||r==="foreignObject"||r==="math");if(a.length>0){const v=zN(e,t,void 0,i,s);l=v.props,c=v.patchFlag,f=v.dynamicPropNames;const g=v.directives;m=g&&g.length?Cd(g.map(x=>D0e(x,t))):void 0,v.shouldUseBlock&&(p=!0)}if(e.children.length>0)if(n===qg&&(p=!0,c|=1024),i&&n!==up&&n!==qg){const{slots:g,hasDynamicSlots:x}=S0e(e,t);u=g,x&&(c|=1024)}else if(e.children.length===1&&n!==up){const g=e.children[0],x=g.type,b=x===5||x===8;b&&Pn(g,t)===0&&(c|=1),b||x===2?u=g:u=e.children}else u=e.children;f&&f.length&&(d=O0e(f)),e.codegenNode=$p(t,n,l,u,c===0?void 0:c,d,m,!!p,!1,i,e.loc)};function A0e(e,t,o=!1){let{tag:r}=e;const a=jC(r),i=pb(e,"is",!1,!0);if(i)if(a||wd("COMPILER_IS_ON_ELEMENT",t)){let s;if(i.type===6?s=i.value&&yo(i.value.content,!0):(s=i.exp,s||(s=yo("is",!1,i.arg.loc))),s)return Tr(t.helper(aI),[s])}else i.type===6&&i.value.content.startsWith("vue:")&&(r=i.value.content.slice(4));const n=wN(r)||t.isBuiltInComponent(r);return n?(o||t.helper(n),n):(t.helper(oI),t.components.add(r),zp(r,"component"))}function zN(e,t,o=e.props,r,a,i=!1){const{tag:n,loc:s,children:l}=e;let u=[];const c=[],d=[],f=l.length>0;let m=!1,p=0,v=!1,g=!1,x=!1,b=!1,_=!1,w=!1;const S=[],D=I=>{u.length&&(c.push(is($O(u),s)),u=[]),I&&c.push(I)},M=()=>{t.scopes.vFor>0&&u.push(dr(yo("ref_for",!0),yo("true")))},O=({key:I,value:N})=>{if(nn(I)){const P=I.content,F=qd(P);if(F&&(!r||a)&&P.toLowerCase()!=="onclick"&&P!=="onUpdate:modelValue"&&!Zc(P)&&(b=!0),F&&Zc(P)&&(w=!0),F&&N.type===14&&(N=N.arguments[0]),N.type===20||(N.type===4||N.type===8)&&Pn(N,t)>0)return;P==="ref"?v=!0:P==="class"?g=!0:P==="style"?x=!0:P!=="key"&&!S.includes(P)&&S.push(P),r&&(P==="class"||P==="style")&&!S.includes(P)&&S.push(P)}else _=!0};for(let I=0;I<o.length;I++){const N=o[I];if(N.type===6){const{loc:P,name:F,nameLoc:L,value:z}=N;let H=!0;if(F==="ref"&&(v=!0,M()),F==="is"&&(jC(n)||z&&z.content.startsWith("vue:")||wd("COMPILER_IS_ON_ELEMENT",t)))continue;u.push(dr(yo(F,!0,L),yo(z?z.content:"",H,z?z.loc:P)))}else{const{name:P,arg:F,exp:L,loc:z,modifiers:H}=N,X=P==="bind",Y=P==="on";if(P==="slot"){r||t.onError(Wa(40,z));continue}if(P==="once"||P==="memo"||P==="is"||X&&ld(F,"is")&&(jC(n)||wd("COMPILER_IS_ON_ELEMENT",t))||Y&&i)continue;if((X&&ld(F,"key")||Y&&f&&ld(F,"vue:before-update"))&&(m=!0),X&&ld(F,"ref")&&M(),!F&&(X||Y)){if(_=!0,L)if(X){if(M(),D(),wd("COMPILER_V_BIND_OBJECT_ORDER",t)){c.unshift(L);continue}c.push(L)}else D({type:14,loc:z,callee:t.helper(uI),arguments:r?[L]:[L,"true"]});else t.onError(Wa(X?34:35,z));continue}X&&H.some(ye=>ye.content==="prop")&&(p|=32);const de=t.directiveTransforms[P];if(de){const{props:ye,needRuntime:W}=de(N,e,t);!i&&ye.forEach(O),Y&&F&&!nn(F)?D(is(ye,s)):u.push(...ye),W&&(d.push(N),ln(W)&&UN.set(N,W))}else Zz(P)||(d.push(N),f&&(m=!0))}}let T;if(c.length?(D(),c.length>1?T=Tr(t.helper(Lg),c,s):T=c[0]):u.length&&(T=is($O(u),s)),_?p|=16:(g&&!r&&(p|=2),x&&!r&&(p|=4),S.length&&(p|=8),b&&(p|=32)),!m&&(p===0||p===32)&&(v||w||d.length>0)&&(p|=512),!t.inSSR&&T)switch(T.type){case 15:let I=-1,N=-1,P=!1;for(let z=0;z<T.properties.length;z++){const H=T.properties[z].key;nn(H)?H.content==="class"?I=z:H.content==="style"&&(N=z):H.isHandlerKey||(P=!0)}const F=T.properties[I],L=T.properties[N];P?T=Tr(t.helper(Lp),[T]):(F&&!nn(F.value)&&(F.value=Tr(t.helper(lI),[F.value])),L&&(x||L.value.type===4&&L.value.content.trim()[0]==="["||L.value.type===17)&&(L.value=Tr(t.helper(cI),[L.value])));break;case 14:break;default:T=Tr(t.helper(Lp),[Tr(t.helper(Dh),[T])]);break}return{props:T,directives:d,patchFlag:p,dynamicPropNames:S,shouldUseBlock:m}}function $O(e){const t=new Map,o=[];for(let r=0;r<e.length;r++){const a=e[r];if(a.key.type===8||!a.key.isStatic){o.push(a);continue}const i=a.key.content,n=t.get(i);n?(i==="style"||i==="class"||qd(i))&&T0e(n,a):(t.set(i,a),o.push(a))}return o}function T0e(e,t){e.value.type===17?e.value.elements.push(t.value):e.value=Cd([e.value,t.value],e.loc)}function D0e(e,t){const o=[],r=UN.get(e);r?o.push(t.helperString(r)):(t.helper(rI),t.directives.add(e.name),o.push(zp(e.name,"directive")));const{loc:a}=e;if(e.exp&&o.push(e.exp),e.arg&&(e.exp||o.push("void 0"),o.push(e.arg)),Object.keys(e.modifiers).length){e.arg||(e.exp||o.push("void 0"),o.push("void 0"));const i=yo("true",!1,a);o.push(is(e.modifiers.map(n=>dr(n,i)),a))}return Cd(o,e.loc)}function O0e(e){let t="[";for(let o=0,r=e.length;o<r;o++)t+=JSON.stringify(e[o]),o<r-1&&(t+=", ");return t+"]"}function jC(e){return e==="component"||e==="Component"}const P0e=(e,t)=>{if(jg(e)){const{children:o,loc:r}=e,{slotName:a,slotProps:i}=F0e(e,t),n=[t.prefixIdentifiers?"_ctx.$slots":"$slots",a,"{}","undefined","true"];let s=2;i&&(n[2]=i,s=3),o.length&&(n[3]=Im([],o,!1,!1,r),s=4),t.scopeId&&!t.slotted&&(s=5),n.splice(s),e.codegenNode=Tr(t.helper(bN),n,r)}};function F0e(e,t){let o='"default"',r;const a=[];for(let i=0;i<e.props.length;i++){const n=e.props[i];if(n.type===6)n.value&&(n.name==="name"?o=JSON.stringify(n.value.content):(n.name=Da(n.name),a.push(n)));else if(n.name==="bind"&&ld(n.arg,"name")){if(n.exp)o=n.exp;else if(n.arg&&n.arg.type===4){const s=Da(n.arg.content);o=n.exp=yo(s,!1,n.arg.loc)}}else n.name==="bind"&&n.arg&&nn(n.arg)&&(n.arg.content=Da(n.arg.content)),a.push(n)}if(a.length>0){const{props:i,directives:n}=zN(e,t,a,!1,!1);r=i,n.length&&t.onError(Wa(36,n[0].loc))}return{slotName:o,slotProps:r}}const HN=(e,t,o,r)=>{const{loc:a,modifiers:i,arg:n}=e;!e.exp&&!i.length&&o.onError(Wa(35,a));let s;if(n.type===4)if(n.isStatic){let d=n.content;d.startsWith("vue:")&&(d=`vnode-${d.slice(4)}`);const f=t.tagType!==0||d.startsWith("vnode")||!/[A-Z]/.test(d)?md(Da(d)):`on:${d}`;s=yo(f,!0,n.loc)}else s=Os([`${o.helperString(LC)}(`,n,")"]);else s=n,s.children.unshift(`${o.helperString(LC)}(`),s.children.push(")");let l=e.exp;l&&!l.content.trim()&&(l=void 0);let u=o.cacheHandlers&&!l&&!o.inVOnce;if(l){const d=SN(l),f=!(d||Dme(l)),m=l.content.includes(";");(f||u&&d)&&(l=Os([`${f?"$event":"(...args)"} => ${m?"{":"("}`,l,m?"}":")"]))}let c={props:[dr(s,l||yo("() => {}",!1,a))]};return r&&(c=r(c)),u&&(c.props[0].value=o.cache(c.props[0].value)),c.props.forEach(d=>d.key.isHandlerKey=!0),c},M0e=(e,t)=>{if(e.type===0||e.type===1||e.type===11||e.type===10)return()=>{const o=e.children;let r,a=!1;for(let i=0;i<o.length;i++){const n=o[i];if(Vy(n)){a=!0;for(let s=i+1;s<o.length;s++){const l=o[s];if(Vy(l))r||(r=o[i]=Os([n],n.loc)),r.children.push(" + ",l),o.splice(s,1),s--;else{r=void 0;break}}}}if(!(!a||o.length===1&&(e.type===0||e.type===1&&e.tagType===0&&!e.props.find(i=>i.type===7&&!t.directiveTransforms[i.name])&&e.tag!=="template")))for(let i=0;i<o.length;i++){const n=o[i];if(Vy(n)||n.type===8){const s=[];(n.type!==2||n.content!==" ")&&s.push(n),!t.ssr&&Pn(n,t)===0&&s.push(1+""),o[i]={type:12,content:n,loc:n.loc,codegenNode:Tr(t.helper(tI),s)}}}}},UO=new WeakSet,N0e=(e,t)=>{if(e.type===1&&ts(e,"once",!0))return UO.has(e)||t.inVOnce||t.inSSR?void 0:(UO.add(e),t.inVOnce=!0,t.helper(Ug),()=>{t.inVOnce=!1;const o=t.currentNode;o.codegenNode&&(o.codegenNode=t.cache(o.codegenNode,!0,!0))})},jN=(e,t,o)=>{const{exp:r,arg:a}=e;if(!r)return o.onError(Wa(41,e.loc)),hv();const i=r.loc.source.trim(),n=r.type===4?r.content:i,s=o.bindingMetadata[i];if(s==="props"||s==="props-aliased")return o.onError(Wa(44,r.loc)),hv();const l=!1;if(!n.trim()||!SN(r)&&!l)return o.onError(Wa(42,r.loc)),hv();const u=a||yo("modelValue",!0),c=a?nn(a)?`onUpdate:${Da(a.content)}`:Os(['"onUpdate:" + ',a]):"onUpdate:modelValue";let d;const f=o.isTS?"($event: any)":"$event";d=Os([`${f} => ((`,r,") = $event)"]);const m=[dr(u,e.exp),dr(c,d)];if(e.modifiers.length&&t.tagType===1){const p=e.modifiers.map(g=>g.content).map(g=>(hI(g)?g:JSON.stringify(g))+": true").join(", "),v=a?nn(a)?`${a.content}Modifiers`:Os([a,' + "Modifiers"']):"modelModifiers";m.push(dr(v,yo(`{ ${p} }`,!1,e.loc,2)))}return hv(m)};function hv(e=[]){return{props:e}}const k0e=/[\w).+\-_$\]]/,R0e=(e,t)=>{!wd("COMPILER_FILTERS",t)||(e.type===5?Wg(e.content,t):e.type===1&&e.props.forEach(o=>{o.type===7&&o.name!=="for"&&o.exp&&Wg(o.exp,t)}))};function Wg(e,t){if(e.type===4)zO(e,t);else for(let o=0;o<e.children.length;o++){const r=e.children[o];typeof r=="object"&&(r.type===4?zO(r,t):r.type===8?Wg(e,t):r.type===5&&Wg(r.content,t))}}function zO(e,t){const o=e.content;let r=!1,a=!1,i=!1,n=!1,s=0,l=0,u=0,c=0,d,f,m,p,v=[];for(m=0;m<o.length;m++)if(f=d,d=o.charCodeAt(m),r)d===39&&f!==92&&(r=!1);else if(a)d===34&&f!==92&&(a=!1);else if(i)d===96&&f!==92&&(i=!1);else if(n)d===47&&f!==92&&(n=!1);else if(d===124&&o.charCodeAt(m+1)!==124&&o.charCodeAt(m-1)!==124&&!s&&!l&&!u)p===void 0?(c=m+1,p=o.slice(0,m).trim()):g();else{switch(d){case 34:a=!0;break;case 39:r=!0;break;case 96:i=!0;break;case 40:u++;break;case 41:u--;break;case 91:l++;break;case 93:l--;break;case 123:s++;break;case 125:s--;break}if(d===47){let x=m-1,b;for(;x>=0&&(b=o.charAt(x),b===" ");x--);(!b||!k0e.test(b))&&(n=!0)}}p===void 0?p=o.slice(0,m).trim():c!==0&&g();function g(){v.push(o.slice(c,m).trim()),c=m+1}if(v.length){for(m=0;m<v.length;m++)p=V0e(p,v[m],t);e.content=p,e.ast=void 0}}function V0e(e,t,o){o.helper(iI);const r=t.indexOf("(");if(r<0)return o.filters.add(t),`${zp(t,"filter")}(${e})`;{const a=t.slice(0,r),i=t.slice(r+1);return o.filters.add(a),`${zp(a,"filter")}(${e}${i!==")"?","+i:i}`}}const HO=new WeakSet,B0e=(e,t)=>{if(e.type===1){const o=ts(e,"memo");return!o||HO.has(e)?void 0:(HO.add(e),()=>{const r=e.codegenNode||t.currentNode.codegenNode;r&&r.type===13&&(e.tagType!==1&&mI(r,t),e.codegenNode=Tr(t.helper(fI),[o.exp,Im(void 0,r),"_cache",String(t.cached.length)]),t.cached.push(null))})}};function q0e(e){return[[N0e,v0e,B0e,y0e,R0e,P0e,I0e,w0e,M0e],{on:HN,bind:b0e,model:jN}]}function L0e(e,t={}){const o=t.onError||pI,r=t.mode==="module";t.prefixIdentifiers===!0?o(Wa(47)):r&&o(Wa(48));const a=!1;t.cacheHandlers&&o(Wa(49)),t.scopeId&&!r&&o(Wa(50));const i=Ro({},t,{prefixIdentifiers:a}),n=_o(e)?Wme(e,i):e,[s,l]=q0e();return Yme(n,Ro({},i,{nodeTransforms:[...s,...t.nodeTransforms||[]],directiveTransforms:Ro({},l,t.directiveTransforms||{})})),t0e(n,i)}const $0e=()=>({props:[]});/**
* @vue/compiler-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const GN=Symbol(""),WN=Symbol(""),QN=Symbol(""),XN=Symbol(""),GC=Symbol(""),KN=Symbol(""),YN=Symbol(""),JN=Symbol(""),ZN=Symbol(""),ek=Symbol("");gme({[GN]:"vModelRadio",[WN]:"vModelCheckbox",[QN]:"vModelText",[XN]:"vModelSelect",[GC]:"vModelDynamic",[KN]:"withModifiers",[YN]:"withKeys",[JN]:"vShow",[ZN]:"Transition",[ek]:"TransitionGroup"});let Ff;function U0e(e,t=!1){return Ff||(Ff=document.createElement("div")),t?(Ff.innerHTML=`<div foo="${e.replace(/"/g,"&quot;")}">`,Ff.children[0].getAttribute("foo")):(Ff.innerHTML=e,Ff.textContent)}const z0e={parseMode:"html",isVoidTag:hH,isNativeTag:e=>fH(e)||mH(e)||pH(e),isPreTag:e=>e==="pre",isIgnoreNewlineTag:e=>e==="pre"||e==="textarea",decodeEntities:U0e,isBuiltInComponent:e=>{if(e==="Transition"||e==="transition")return ZN;if(e==="TransitionGroup"||e==="transition-group")return ek},getNamespace(e,t,o){let r=t?t.ns:o;if(t&&r===2)if(t.tag==="annotation-xml"){if(e==="svg")return 1;t.props.some(a=>a.type===6&&a.name==="encoding"&&a.value!=null&&(a.value.content==="text/html"||a.value.content==="application/xhtml+xml"))&&(r=0)}else/^m(?:[ions]|text)$/.test(t.tag)&&e!=="mglyph"&&e!=="malignmark"&&(r=0);else t&&r===1&&(t.tag==="foreignObject"||t.tag==="desc"||t.tag==="title")&&(r=0);if(r===0){if(e==="svg")return 1;if(e==="math")return 2}return r}},H0e=e=>{e.type===1&&e.props.forEach((t,o)=>{t.type===6&&t.name==="style"&&t.value&&(e.props[o]={type:7,name:"bind",arg:yo("style",!0,t.loc),exp:j0e(t.value.content,t.loc),modifiers:[],loc:t.loc})})},j0e=(e,t)=>{const o=n8(e);return yo(JSON.stringify(o),!1,t,3)};function nu(e,t){return Wa(e,t)}const G0e=(e,t,o)=>{const{exp:r,loc:a}=e;return r||o.onError(nu(53,a)),t.children.length&&(o.onError(nu(54,a)),t.children.length=0),{props:[dr(yo("innerHTML",!0,a),r||yo("",!0))]}},W0e=(e,t,o)=>{const{exp:r,loc:a}=e;return r||o.onError(nu(55,a)),t.children.length&&(o.onError(nu(56,a)),t.children.length=0),{props:[dr(yo("textContent",!0),r?Pn(r,o)>0?r:Tr(o.helperString(mb),[r],a):yo("",!0))]}},Q0e=(e,t,o)=>{const r=jN(e,t,o);if(!r.props.length||t.tagType===1)return r;e.arg&&o.onError(nu(58,e.arg.loc));const{tag:a}=t,i=o.isCustomElement(a);if(a==="input"||a==="textarea"||a==="select"||i){let n=QN,s=!1;if(a==="input"||i){const l=pb(t,"type");if(l){if(l.type===7)n=GC;else if(l.value)switch(l.value.content){case"radio":n=GN;break;case"checkbox":n=WN;break;case"file":s=!0,o.onError(nu(59,e.loc));break}}else Ome(t)&&(n=GC)}else a==="select"&&(n=XN);s||(r.needRuntime=o.helper(n))}else o.onError(nu(57,e.loc));return r.props=r.props.filter(n=>!(n.key.type===4&&n.key.content==="modelValue")),r},X0e=kn("passive,once,capture"),K0e=kn("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),Y0e=kn("left,right"),tk=kn("onkeyup,onkeydown,onkeypress"),J0e=(e,t,o,r)=>{const a=[],i=[],n=[];for(let s=0;s<t.length;s++){const l=t[s].content;l==="native"&&Up("COMPILER_V_ON_NATIVE",o)||X0e(l)?n.push(l):Y0e(l)?nn(e)?tk(e.content.toLowerCase())?a.push(l):i.push(l):(a.push(l),i.push(l)):K0e(l)?i.push(l):a.push(l)}return{keyModifiers:a,nonKeyModifiers:i,eventOptionModifiers:n}},jO=(e,t)=>nn(e)&&e.content.toLowerCase()==="onclick"?yo(t,!0):e.type!==4?Os(["(",e,`) === "onClick" ? "${t}" : (`,e,")"]):e,Z0e=(e,t,o)=>HN(e,t,o,r=>{const{modifiers:a}=e;if(!a.length)return r;let{key:i,value:n}=r.props[0];const{keyModifiers:s,nonKeyModifiers:l,eventOptionModifiers:u}=J0e(i,a,o,e.loc);if(l.includes("right")&&(i=jO(i,"onContextmenu")),l.includes("middle")&&(i=jO(i,"onMouseup")),l.length&&(n=Tr(o.helper(KN),[n,JSON.stringify(l)])),s.length&&(!nn(i)||tk(i.content.toLowerCase()))&&(n=Tr(o.helper(YN),[n,JSON.stringify(s)])),u.length){const c=u.map(gu).join("");i=nn(i)?yo(`${i.content}${c}`,!0):Os(["(",i,`) + "${c}"`])}return{props:[dr(i,n)]}}),epe=(e,t,o)=>{const{exp:r,loc:a}=e;return r||o.onError(nu(61,a)),{props:[],needRuntime:o.helper(JN)}},tpe=(e,t)=>{e.type===1&&e.tagType===0&&(e.tag==="script"||e.tag==="style")&&t.removeNode()},ope=[H0e],ape={cloak:$0e,html:G0e,text:W0e,model:Q0e,on:Z0e,show:epe};function rpe(e,t={}){return L0e(e,Ro({},z0e,t,{nodeTransforms:[tpe,...ope,...t.nodeTransforms||[]],directiveTransforms:Ro({},ape,t.directiveTransforms||{}),transformHoist:null}))}/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const GO=Object.create(null);function ipe(e,t){if(!_o(e))if(e.nodeType)e=e.innerHTML;else return Hr;const o=oH(e,t),r=GO[o];if(r)return r;if(e[0]==="#"){const s=document.querySelector(e);e=s?s.innerHTML:""}const a=Ro({hoistStatic:!0,onError:void 0,onWarn:Hr},t);!a.isCustomElement&&typeof customElements!="undefined"&&(a.isCustomElement=s=>!!customElements.get(s));const{code:i}=rpe(e,a),n=new Function("Vue",i)(CG);return n._rc=!0,GO[o]=n}Uw(ipe);var npe={nomeTabela:"empresa",filtrosTabela:["codigoClienteSistema","idContato"],async le(e={}){if("id"in e)return e.id?await Gt[this.nomeTabela].get(e.id)||{}:{};let t={};for(const o of this.filtrosTabela)if(o in e)if(![null,void 0].includes(e[o]))t[o]=e[o];else return[];return Object.keys(t).length?Gt[this.nomeTabela].where(t).toArray():Gt[this.nomeTabela].toArray()}};const spe={permissao:[],le:async e=>{if(e=e||{},"id"in e)return e.id?await Gt.empresaUsuarioPermissao.get(e.id)||{}:{};let t={};"idUsuario"in e&&e.idUsuario&&(t.idUsuario=e.idUsuario),"idEmpresa"in e&&e.idEmpresa&&(t.idEmpresa=e.idEmpresa),"codigoUsuario"in e&&e.codigoUsuario&&(t.codigoUsuario=e.codigoUsuario),"codigoEmpresa"in e&&e.codigoEmpresa&&(t.codigoEmpresa=e.codigoEmpresa);let o=Gt.empresaUsuarioPermissao;return Object.keys(t).length&&(o=o.where(t)),await o.toArray()||[]},async inicializarPermissao(){let e={},t="",o="",r="N\xE3o foi poss\xEDvel localizar o c\xF3digo do sistema.";try{if(e=JSON.parse(localStorage.getItem("clienteSistema")),!e.codigoClienteSistema)return[];t=e.codigoClienteSistema,r="N\xE3o foi poss\xEDvel localizar o c\xF3digo do usu\xE1rio.",o=et.usuario.logado.codigoUsuario}catch{return console.log(r),[]}if(!et.usuario.logado.administrador){this.permissao=[];const a=await gr.empresa.le({codigoClienteSistema:t}),i=[];a.reduce((n,s)=>(n[s.codigoEmpresa]||(n[s.codigoEmpresa]=!0,i.push(gr.empresaUsuarioPermissao.le({codigoUsuario:o,codigoEmpresa:s.codigoEmpresa}))),n),{});for await(const n of i)n.length&&(this.permissao=[...this.permissao,...a.filter(s=>n[0].codigoEmpresa===s.codigoEmpresa).map(s=>s.codigoContato)])}}},lpe={async grava(e){const{codigoObjeto:t,id:o,...r}=e,a=[];for(const n in r)a.push(`${n}='${r[n]}'`);const i=`
      insert into objeto (id)
      select '${o}' id where not exists (select 1 from objeto where id='${o}')
      update objeto set ${a.join(", ")} where id='${o}'
    `;await Do(i,"GeeksPlat15A"),await Gt.objeto.put(e)},async le({filtros:e}){const t=await Gt.objeto.toArray();return e?Aa.exports.filter(t,e):t},leOnline({colunas:e,filtros:t}={}){e=e?e.split(" ").join(", "):"*";let o=[];for(const a in t)o.push(`${a} = '${t[a]}'`);o=o.length?`where ${o.join(" and ")}`:"";const r=`select ${e} from objeto ${o} order by nomeObjeto`;return Do(r,"GeeksPlat15A")}},cpe={async grava(e){const{codigoObjeto:t,id:o,...r}=e,a=[];for(const n in r){let s=r[n];typeof s=="string"&&(s=`'${s}'`),a.push(`${n}=${s}`)}const i=`
      insert into objetoVersao (id)
      select '${o}' id where not exists (select 1 from objetoVersao where id='${o}')
      update objetoVersao set ${a.join(", ")} where id='${o}'
    `;await Do(i,"GeeksPlat15A"),await Gt.objeto.put(e)},async le({filtros:e}){const t=await Gt.objeto.toArray();return e?Aa.exports.filter(t,e):t},leOnline({colunas:e,filtros:t}={}){e=e?e.split(" ").join(", "):"*";let o=[];for(const a in t)o.push(`${a} = '${t[a]}'`);o=o.length?`where ${o.join(" and ")}`:"";const r=`select ${e} from objetoVersao ${o} order by dataHora desc`;return Do(r,"GeeksPlat15A")}};var upe={nomeTabela:"sincronismo",filtrosTabela:["bancoDeDados"],maximoHoras:20,dezMinutos:10*60*1e3,async le(e={}){if("id"in e)return e.id?await Gt[this.nomeTabela].get(e.id)||{}:{};let t={};for(const o of this.filtrosTabela)if(o in e)if(![null,void 0].includes(e[o]))t[o]=e[o];else return[];return Object.keys(t).length?Gt[this.nomeTabela].where(t).toArray():Gt[this.nomeTabela].toArray()},async grava(e){await Gt[this.nomeTabela].update(e.bancoDeDados,e)},verificaBloqueioHoras(e){const t=e.ultimo?new Date(e.ultimo):new Date,r=(new Date-t)/36e5;return e.status==="bloqueado"||r>=this.maximoHoras},async verificaBloqueio(e){if(!e){const t=et.cache.get("bancoDeDados");if(this.bancoLiberado===t&&new Date-this.horaLiberado<this.dezMinutos||(e=(await this.le({bancoDeDados:t}))[0],!e))return""}return!e.status||e.status==="sincronismoInicial"?"Aguarde o final do sincronismo":this.verificaBloqueioHoras(e)?`Voc\xEA estava h\xE1 mais de ${this.maximoHoras} horas sem conex\xE3o, aguarde o final do sincronismo`:(this.bancoLiberado=e.bancoDeDados,this.horaLiberado=new Date,"")}};const gr={empresa:npe,empresaUsuarioPermissao:spe,objeto:lpe,objetoVersao:cpe,sincronismo:upe};async function dpe(e,t){let o,r,a,i;const n=await gr.objeto.le({filtros:{nomeObjeto:e,tipo:"vue"}});if(!n||!n[0]||!n[0].codigoPersonalizado)return $q.notify("Objeto indispon\xEDvel ou sem permiss\xE3o");const s=JSON.parse($utils.base64.decode(n[0].codigoPersonalizado)),l={BrowserQRCodeSvgWriter:BC,XMLParser:sp.XMLParser,JsBarcode:oN,agrupar:F5,arredondar:lr,dataAtual:sa,dormir:Vd,erp:Se,fbarcode:I6,gconsole:Wt,mostrarErro:DM,somar:PM,sql:S6,unicos:jE,uuid:Kt,verificarErro:Na,_:dC};r=new Function(...Object.keys(l),`return ${s.script.trim()}`)(...Object.values(l));const u=Pd({...r,data:()=>({...r.data(),json:t}),template:s.template.trim()});a=document.createElement("div"),i=document.createElement("div"),i.attachShadow({mode:"open"}).appendChild(a),u.config.globalProperties.$BrowserQRCodeSvgWriter=BC,u.config.globalProperties.$filters=globalThis.$filters,u.config.globalProperties.$utils=globalThis.$utils,u.config.globalProperties.$get=globalThis.$get,u.config.globalProperties.$lodash=globalThis.$lodash,u.config.globalProperties.$q={notifyAlert:function(){},notifyError:function(){},notifyPositive:function(){},notify:function(){}},await u.mount(a);let c=0,d=!0;for(;d;)await new Promise((f,m)=>setTimeout(f,200)),a.innerHTML.includes('id="impresso-carregado"')&&(d=!1),c===150&&(d=!1),c=c+1;return o=a.innerHTML,o+="<style>"+s.estilo.trim()+"</style>",o}const Kt=function(){return Cm().toUpperCase()},fpe=function(){return window.innerWidth<992},mpe=function(e){document.getElementById("gTema")&&document.getElementById("gTema").remove(),e&&(localStorage.gTema=e);let t=document.createElement("style");switch(t.setAttribute("id","gTema"),localStorage.gTema){case"rosa":t.innerHTML=`
        :root {
            --q-primary: #e305ad !important;
            --primary: #e305ad !important;
        }
        .bg-primary { background-color: #e305ad !important; }

        .text-primary { color: #e305ad !important; }

        .q-toolbar.bg-primary { background: #f039b1 linear-gradient(to right, lighten(#f658b8, 10), darken(#e305ad, 10)) !important; }

        .bg-gradiente {
            background-color: #f658b8 !important;
            background-image: -webkit-gradient( linear, left top, right top, from(#f658b8), to(#B52B85)) !important;
            background-image: linear-gradient(90deg, #f658b8, #B52B85) !important;
        }

        .bg-cover {
          background: #e305ad url("/src/assets/login-background.jpg") center no-repeat !important;
        }

        #home {
          background-color: #f658b8 !important;
          background-image: -webkit-gradient( linear, left top, right top, from(#f658b8), to(#B52B85)) !important;
          background-image: linear-gradient(90deg, #f658b8, #B52B85) !important;
        }

        ::-webkit-scrollbar-thumb { background-color: #f658b8 !important; }

        .text-light-blue-4 { color: #EBBFE2 !important; }

        .text-select-palette-color { color: #e305ad !important; }

        /*Pulsar barbie*/
          .btnPaletteColors {
            box-shadow: 0 0 0 0 rgba(158,1,120,0.7);
            transition: all 300ms ease-in-out;
            -webkit-animation: pulsing 1.25s infinite cubic-bezier(0.66, 0, 0, 1);
            -moz-animation: pulsing 1.25s infinite cubic-bezier(0.66, 0, 0, 1);
            -ms-animation: pulsing 1.25s infinite cubic-bezier(0.66, 0, 0, 1);
            animation: pulsing 1.25s infinite cubic-bezier(0.66, 0, 0, 1);
          }
          .btnPaletteColors:hover {
            background-color: rgba(227,5,173,.12);
            box-shadow: 0 0 20px 2px rgba(227,5,173,.7);
            transition: all 300ms ease-in-out;
            -webkit-animation: none;
            -moz-animation: none;
            -ms-animation: none;
            animation: none;
          }

          @-webkit-keyframes pulsing {
            0% {
              transform: scale(.98);
            }

            70% {
              box-shadow: 0 0 0 15px rgba(227,5,173,0);
              transform: scale(1);
            }

            100% {
              box-shadow: 0 0 0 0 rgba(227,5,173,0);
              transform: scale(.98);
            }
          }

          @-moz-keyframes pulsing {
            0% {
              transform: scale(.98);
            }

            70% {
              box-shadow: 0 0 0 15px rgba(227,5,173,0);
              transform: scale(1);
            }

            100% {
              box-shadow: 0 0 0 0 rgba(227,5,173,0);
              transform: scale(.98);
            }
          }

          @-ms-keyframes pulsing {
            0% {
              transform: scale(.98);
            }

            70% {
              box-shadow: 0 0 0 15px rgba(227,5,173,0);
              transform: scale(1);
            }

            100% {
              box-shadow: 0 0 0 0 rgba(227,5,173,0);
              transform: scale(.98);
            }
          }

          @keyframes pulsing {
            0% {
              transform: scale(.98);
            }

            70% {
              box-shadow: 0 0 0 15px rgba(227,5,173,0);
              transform: scale(1);
            }

            100% {
              box-shadow: 0 0 0 0 rgba(227,5,173,0);
              transform: scale(.98);
            }
          }
        /*Pulsar barbie*/
      `,document.head.append(t);break;case"brasil":t.innerHTML=`
      :root {
        --q-primary: #003fff !important;
        --primary: #003fff;
      }

      .bg-primary {
        background-color: #003fff !important;
      }

      .text-primary {
        color: #003fff !important;
      }

      .q-toolbar.bg-primary { background: #f039b1 linear-gradient(to right, lighten(#ffc107, 10), darken(#1b5e20, 10)) !important; }

      .bg-gradiente {
          background: rgb(76,175,80) !important;
          background: linear-gradient(90deg, rgba(253,216,53,1) 0%, rgba(101,189,60,1) 50%, rgba(76,175,80,1) 100%) !important;
          /*background: linear-gradient(90deg, rgba(76,175,80,1) 0%, rgba(101,189,60,1) 7%, rgba(253,216,53,1) 18%, rgba(101,189,60,1) 57%, rgba(76,175,80,1) 100%) !important;*/
      }

      .bg-cover {
        background: #003fff url("/src/assets/login-background.jpg") center no-repeat !important;
      }

      #home {
        background-color: #003fff !important;
        background-image: -webkit-gradient( linear, left top, right top, from(#003fff), to(#01578b)) !important;
        background-image: linear-gradient(to right, #003fff, #01578b) !important;
      }

      ::-webkit-scrollbar-thumb { background-color: #ffc107 !important; }

      .text-light-blue-4 { color: #ffeb3b !important; }

      .text-select-palette-color { color: #65bd3c !important; }

      /*Pulsar mundial*/
        .btnPaletteColors {
          box-shadow: 0 0 0 0 rgba(41,128,0,0.7);
          transition: all 300ms ease-in-out;
          -webkit-animation: pulsing 1.25s infinite cubic-bezier(0.66, 0, 0, 1);
          -moz-animation: pulsing 1.25s infinite cubic-bezier(0.66, 0, 0, 1);
          -ms-animation: pulsing 1.25s infinite cubic-bezier(0.66, 0, 0, 1);
          animation: pulsing 1.25s infinite cubic-bezier(0.66, 0, 0, 1);
        }
        .btnPaletteColors:hover {
          background-color: rgba(101,189,60,.12);
          box-shadow: 0 0 20px 2px rgba(101,189,60,.7);
          transition: all 300ms ease-in-out;
          -webkit-animation: none;
          -moz-animation: none;
          -ms-animation: none;
          animation: none;
        }

        @-webkit-keyframes pulsing {
          0% {
          transform: scale(.98);
          }

          70% {
            box-shadow: 0 0 0 15px rgba(101,189,60,0);
            transform: scale(1);
          }

          100% {
            box-shadow: 0 0 0 0 rgba(101,189,60,0);
            transform: scale(.98);
          }
        }

        @-moz-keyframes pulsing {
          0% {
            transform: scale(.98);
          }

          70% {
            box-shadow: 0 0 0 15px rgba(101,189,60,0);
            transform: scale(1);
          }

          100% {
            box-shadow: 0 0 0 0 rgba(101,189,60,0);
            transform: scale(.98);
          }
        }

        @-ms-keyframes pulsing {
          0% {
            transform: scale(.98);
          }

          70% {
            box-shadow: 0 0 0 15px rgba(101,189,60,0);
            transform: scale(1);
          }

          100% {
            box-shadow: 0 0 0 0 rgba(101,189,60,0);
            transform: scale(.98);
          }
        }

        @keyframes pulsing {
          0% {
            transform: scale(.98);
          }

          70% {
            box-shadow: 0 0 0 15px rgba(101,189,60,0);
            transform: scale(1);
          }

          100% {
            box-shadow: 0 0 0 0 rgba(101,189,60,0);
            transform: scale(.98);
          }
        }
      /*Pulsar mundial*/
    `,document.head.append(t);break}};var Yke=Object.freeze(Object.defineProperty({__proto__:null,temaAplicar:mpe,Alerta:E6,ErroValidacao:Nl,adicionarSincronizar:$f,agrupar:F5,analisarRedeSocialLink:IQ,arredondar:lr,arredondarPiso:TQ,arredondarTeto:Zx,arredondar0ponto5:OQ,atualizarCfop:cre,bancosPiloto:PQ,base64:NQ,blobToBase64:kQ,bulkPut:kJ,buscarCep:RJ,buscarEndereco:VJ,clonar:Pr,clonarCompactar:Fp,clonarV2:Tn,compactarObjeto:Vr,completarCodigoBarras:BJ,converterArrayParaObjeto:qJ,converterObjetoParraArray:LJ,converterDataHoraBr:uC,dataAtual:sa,diferenca:NE,diferencaNivel1:cn,diferencaObjetos:Ja,dormir:Vd,eliminarVazios:zJ,emitter:WJ,envelope:ZJ,enviarWhatsapp:XJ,enviarEmail:KJ,executarApi:eZ,executarSql:Do,executarSqlProtegido:S6,extenso:tZ,formatarNumero:HJ,formatarTelefone:jJ,fbarcode:I6,jsbarcode:oN,BrowserQRCodeSvgWriter:BC,filtrar:oZ,filtrarDigitos:fC,gconsole:Wt,geeksApi:zr,imposto:cZ,impostoV2:dZ,importaGiron:fZ,imprimir:mM,isNumber:mZ,isMobile:fpe,jsBarcode128C:bre,juntar:pZ,logarDebug:fre,logarFim:pu,logarIni:mu,localIDB:D6,mapearEstadoCodigo:pM,mapearStatus:_Z,mostrarErro:DM,numberOrNull:zt,obterUrlPdf:UZ,primeiraMaiuscula:Mp,primeiraMinuscula:zZ,processarFilho:lo,processarFilhoEspecifico:HZ,processarFilhos:jZ,ratear:GZ,removerAcentos:Qc,removerCaracteresEspeciais:OM,sincronismoEnviar:ut,sistemaPai:HE,somar:PM,sqlData:Bp,sqlNum:io,sqlStr:Bt,stringOrEmpty:WZ,stringOrNull:QZ,selecionarCfop:lre,tratamentoCompletoString:XZ,unicos:jE,uuid:Kt,validarDocumentoNacional:xre,validarDocumentoNacionalUnico:Cre,verificarAlerta:ire,conduta:YZ,verificarPesquisa:JZ,verificarErro:Na,verificarExcecao:sm,verificarSeCamposSaoValidos:rre,limpeza:are,convertArrToObj:wre,arredondaAbnt5891:Are,p2p:Pre,impressaoObterHtml:dpe,tela:YG},Symbol.toStringTag,{value:"Module"}));const ppe=Ue(""),WC=Ue(""),hpe=Ue(!1),vpe=Ue(!1);fetch("/versao.json").then(async e=>{const t=await e.json();WC.value=t.versao}).catch(async()=>{const e=new URL(location.href).pathname.split("/"),o=await(await fetch(`/${e[1]}/${e[2]}/versao.json`)).json();WC.value=o.versao});D6.getItem({objectStore:"dadosRecentes",id:"apiUrl"}).then(e=>{e!=null&&e.url&&(Qg.url.value=e==null?void 0:e.url)});const Qg={url:Ue("https://api.b15.com.br/"),local:async()=>{Qg.url.value="http://localhost:8002",await $utils.localIDB.setItem({objectStore:"dadosRecentes",data:{_id:"apiUrl",url:"http://localhost:8002"}})},remoto:async()=>{Qg.url.value="https://api.b15.com.br",await $utils.localIDB.setItem({objectStore:"dadosRecentes",data:{_id:"apiUrl",url:"https://api.b15.com.br/"}})}},gpe={le:()=>{const e=localStorage.getItem("appModoOnline");return e?e==="true":!1},grava:e=>{localStorage.setItem("appModoOnline",e)}};var _pe={atualizacaoPendente:vpe,proximaVersao:ppe,versao:WC,apiUrl:Qg,modoOnline:gpe,menuVisivel:hpe,tela:{}};async function Eu(e){await $utils.geeksApi({upinsert:{funcao:"457753C9-2EFA-46CD-8106-6910BAF27052",data:e}})}async function bpe(e){const{cpf:t}=e!=null?e:{};return(await $utils.geeksApi({ler:{funcao:"143621B4-8B65-41C3-9FDC-339F7A220834",chave:t}})).data.ler}async function ype(e){const{id:t,cpf:o,nome:r,cor:a}=e!=null?e:{},i={};i[o]={},i[o].agenda={},i[o].agenda[t]={nome:r,cor:a},await Eu(i)}async function xpe(e){const{id:t,cpf:o}=e!=null?e:{},r={};delete e.id,delete e.cpf,r[o]={},r[o].agenda={},r[o].agenda[t]=e,await Eu(r)}async function Cpe(e){const{cpf:t,id:o}=e!=null?e:{},r={};r[t]={},r[t].agenda={},r[t].agenda[o]=null,await Eu(r)}async function wpe(e){const{cpfAgenda:t,id:o,cpfAssinante:r,nome:a}=e!=null?e:{},i={};i[r]={assinante:{}},i[r].assinante[t]={},i[r].assinante[t][o]={nome:a,visivel:!0},await $db.agenda.compartilhar({cpf:t,id:o,cpfConvidado:r,permissao:"Solicitando"}),await Eu(i)}async function Epe(e){const{cpfAgenda:t,id:o,cpfAssinante:r,nome:a}=e!=null?e:{},i={};i[r]={assinante:{}},i[r].assinante[t]=null,await Eu(i)}async function Spe(e){const{cpf:t,id:o,cpfConvidado:r,permissao:a}=e!=null?e:{},i={};delete e.id,delete e.cpf,i[t]={},i[t].agenda={},i[t].agenda[o]={convidado:{}},i[t].agenda[o].convidado[r]=e,await Eu(i)}async function Ipe(e){const{cpf:t,id:o,convidado:r,nome:a,visivel:i,cor:n}=e!=null?e:{},s={};delete e.id,delete e.cpf,s[t]={},s[t].agenda={},s[t].agenda[o]={nome:a,visivel:i,cor:n,convidado:{}};for(let l=0;l<r.length;l++)r[l].permissao!=="remover"&&(s[t].agenda[o].convidado[r[l].cpfConvidado]=r[l]),r[l].permissao==="remover"&&(s[t].agenda[o].convidado[r[l].cpfConvidado]=null);await Eu(s)}async function Ape({cpf:e}){return(await $utils.geeksApi({usuario:{funcao:"AEC2D51E-F033-48B8-9BB5-04D925012714",cpf:e}})).data.usuario}const Tpe=["#8E24AA","#AD1457","#3F51B5","#D50000","#795548","#D81B60","#0B8043","#616161","#9E69AF","#F4511E","#4285F4","#EF6C00","#009688","#7986CB","#039BE5","#F09300","#E67C73","#7CB342","#33B679","#C0CA33","#F6BF26","#E4C441","#B39DDB","#A79B8E"];var Dpe={coresDeBase:Tpe,ler:bpe,assinar:wpe,compartilhar:Spe,criar:ype,excluir:Cpe,gravar:xpe,excluirAssinatura:Epe,gerenciarCompartilhamentos:Ipe,upinsert:Eu,usuarioConsulta:Ape};const Hu="https://southamerica-east1-b15node-178618.cloudfunctions.net/storage";function qy(e){if(!(e instanceof Date))throw new Error('Argumento "data" inv\xE1lido. Voc\xEA deve passar uma inst\xE2ncia de data');const t=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0");return`${String(e.getDate()).padStart(2,"0")}/${o}/${t}`}var Ope={urlGCP:Hu,formatDate:qy,async lista({tipoArquivo:e,idTabelaMaster:t}){if(!t)return[];let o=[],r=[];try{r=await $erp().arquivo.where({idTabelaMaster:t}).toArray()}catch(i){console.error("Erro ao listar arquivos offline",i)}try{const i=localStorage.getItem("bancoDeDados");o=(await(await fetch(`${Hu}/${i}/${e}/${t}`,{method:"GET"})).json()).map(s=>({...s,...s.metadata,metadata:void 0}))}catch{}return[...r.filter(i=>!o.find(n=>n.id===i.id)),...o]},async le({tipoArquivo:e,idTabelaMaster:t,id:o,name:r,arquivo:a}){let i;if(r){const n=r.lastIndexOf(".")>0?r.substring(0,r.lastIndexOf(".")):r;i=await fetch(`${Hu}/${n}`,{method:"GET"})}else{const n=await $erp().arquivo.get(o);i=await fetch((n==null?void 0:n.arquivo)||a)}return i.blob()},async grava({original:e,atual:t}){if(!t.nome)return;const o=$utils.compactarObjeto(t);await $erpPut().arquivo.put(o),await this.gravaOnline(o)||await $utils.sincronismoEnviar("adicionar","arquivo",o.id,o)},async gravaOnline(e,t){let o=!1;try{const r=e.nome.split(".").pop(),i=await(await fetch(Hu,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({base64:e.arquivo.replace(/^data:[^;]+;base64,/,""),extensao:r,banco:t||localStorage.getItem("bancoDeDados"),metadata:{id:e.id,nome:e.nome,tipoArquivo:e.tipoArquivo||"-",idTabelaMaster:e.idTabelaMaster,dataCriacao:qy(new Date($utils.dataAtual()))}})})).json();o=(i==null?void 0:i.erro)==="",o||console.error("Erro ao gravar arquivo online.",i)}catch{o=!1}return o},async gravaImagem({id:e,tipoArquivo:t,conteudo:o}){var a;let r=!1;try{const i=(a=o==null?void 0:o.match(/data:image\/(\w+);base64/i))==null?void 0:a[1];i||console.error("Erro ao gravar arquivo online. Conteudo base64 com formato invalido.",o);const s=await(await fetch(Hu,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({base64:o.replace(/^data:[^;]+;base64,/,""),extensao:i,banco:localStorage.getItem("bancoDeDados"),metadata:{id:e,nome:`${t}.${i}`,tipoArquivo:t,idTabelaMaster:e,dataCriacao:qy(new Date($utils.dataAtual()))}})})).json();r=(s==null?void 0:s.erro)==="",r||console.error("Erro ao gravar imagem online.",s)}catch{r=!1}return r},async remove(e){const t=Array.isArray(e)?e:[e];if(!!t.length)for(let o of t){if(!(o!=null&&o.id))continue;await $erpDelete().arquivo.delete(o.id),await this.removeOnline(o)||await $utils.sincronismoEnviar("remover","arquivo",o.id,o)}},async removeOnline(e){if(!e.name)return!0;let t=!1;try{const r=await(await fetch(Hu,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e.name})})).json();t=!0}catch{t=!1}return t},async edita({original:e,atual:t}){if(!!t.name)try{return await fetch(Hu,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({banco:localStorage.getItem("bancoDeDados"),path:t.name,dados:t})})}catch(o){return console.error(o),o}},async operacaoSincronismo(e,t,o){return e==="remover"?this.removeOnline(t):e==="adicionar"?this.gravaOnline(t,o):(console.error("Opera\xE7\xE3o inv\xE1lida para arquivos"),!0)}};const Ppe={grava:()=>{},le:async e=>(e=e||{},"id"in e?e.id?await Se()._banco.get(e.id)||{}:{}:await Se()._banco.toArray()||[])},Hs={},ju={};var Fpe={get(e){return Hs[e]===void 0&&(Hs[e]=localStorage.getItem(e)||""),Hs[e]},getJson(e,t=!1){if(Hs[e]===void 0){const o=localStorage.getItem(e);if(t)try{ju[e]=o?atob(o):"{}"}catch(r){ju[e]="{}",console.error(`Erro de base64 com formado invalido
`,r.stack)}else ju[e]=o||"{}";try{Hs[e]=JSON.parse(ju[e])}catch(r){ju[e]="{}",Hs[e]={},console.error(`Erro no JSON.parse
`,r.stack)}}return Hs[e]},set(e,t){Hs[e]!==t&&(Hs[e]=t,localStorage.setItem(e,t))},setJson(e,t,o=!1){const r=JSON.stringify(t);ju[e]!==r&&(ju[e]=r,Hs[e]=JSON.parse(r),localStorage.setItem(e,o?btoa(r):r))}};const Mpe=["id","codigoDocumento","numero","tipo","operacao","status","codigoEmpresa","codigoContato","dataHoraEmissao","observacao","valorAbertura","codigoFinanceiroPlanoContaCaixa","idCaixa","idEmpresa","idContato","idFinanceiroPlanoContaCaixa","dataHoraFinalizado"],Npe=["id","tipo","numero","dataHoraEmissao","dataHoraFinalizado","totalDocumento","totalDesconto","idFatura","idContatoVendedor"],kpe=["id","tipo","numero","dataHoraEmissao","dataHoraFinalizado","totalDocumento","totalDesconto","idContato","descricaoContato"],Rpe=["id","documentoTipo","dataEmissao","valor","idFatura","valorTotal","formaDePagamento","parcela"],Vpe=["id","idDocumento","idFormaPagamento","dataVencimento","valor","observacao"],Bpe=["id","documentoTipo","dataEmissao","valor","valorTotal","valorARealizar","valorRealizado","dataMovimento","idFinanceiroPlanoConta","idContato"],ok=["id","documentoTipo","observacao","descricao","valorDebito","valorCredito","dataEmissao","dataMovimento","idFinanceiroPlanoConta","idFinanceiroTitulo","idContato","documentoId","idFinanceiroMovimentacaoN"],qpe=["id","operacao","statusOriginal","statusFinalizado","dataHoraEmissao","codigoUsuarioAlterou","codigoDocumentoCaixa","observacao","idDocumento","idContatoResponsavel","idDocumentoCaixa","idUsuarioAlterou"],Lpe=async e=>{const{idDocumentoCaixa:t}=e,[o,r,a,i]=await $db.hibrido.lista([{table:"documentoCondicaoPagamento",where:{idDocumentoCaixa:t},columns:Vpe},{table:"financeiroTitulo",where:{idDocumentoCaixa:t},columns:Bpe},{table:"financeiroMovimentacao",where:{idDocumentoCaixa:t},columns:ok},{table:"documentoStatus",where:{idDocumento:t},columns:qpe}]),n=r.filter(f=>f.documentoTipo==="DespesaSimples").sort((f,m)=>f.dataEmissao.localeCompare(m.dataEmissao)),s=$utils.arredondar($utils.somar(n,"valorARealizar")),l=a.filter(f=>f.documentoTipo==="Sangria"&&f.valorCredito>0).sort((f,m)=>f.dataEmissao.localeCompare(m.dataEmissao)),u=$utils.arredondar($utils.somar(l,"valorCredito")),c=a.filter(f=>f.documentoTipo==="Suprimento"&&f.valorDebito>0).sort((f,m)=>f.dataMovimento.localeCompare(m.dataMovimento)),d=$utils.arredondar($utils.somar(c,"valorDebito"));e.sangriaFinal=await ak(t,a),e.documentosStatus=i,e.pagamentos=o,e.despesas=n,e.sangrias=l,e.suprimentos=c,e.totalDespesas=s,e.totalSangrias=u,e.totalSuprimentos=d},$pe=async e=>{var b,_,w,S,D,M,O,T;const t=$utils.unicos(e.pagamentos,"idDocumento"),[o,r,a]=await $db.hibrido.lista([{table:"documento",whereIn:{id:t},columns:kpe},{table:"financeiroTitulo",whereIn:{idFatura:t},columns:Rpe},{table:"documento",whereIn:{idFatura:t},columns:Npe}]),i=$utils.unicos(a,"idContatoVendedor"),n=$utils.unicos(o,"idContato"),s=$utils.unicos(e.despesas,"idContato"),l=$utils.unicos(e.sangrias,"idContato"),u=$utils.unicos(e.suprimentos,"idContato"),c=[e.documentoCaixa.idContato,...i,...n,...s,...l,...u].filter(Boolean),f=(await $db.hibrido.lista({table:"contato",whereIn:{id:c},columns:["id","nome"]})).reduce((I,N)=>(I[N.id]=N,I),{});e.nomeOperador=(b=f[e.documentoCaixa.idContato])==null?void 0:b.nome,(await $db.formaPagamento.listaCache()).reduce((I,N)=>(I[N.id]=N,I),{});for(const I of e.despesas)I.nomeContato=((_=f[I.idContato])==null?void 0:_.nome)||"",I.descricaoPlanoConta=((w=await $db.financeiroPlanoConta.leCache({id:I.idFinanceiroPlanoConta}))==null?void 0:w.descricao)||"";const p=e.sangrias.map(I=>I.documentoId),v=await $db.hibrido.lista({table:"documento",whereIn:{id:p}});for(const I of e.sangrias)I.nomeContato=((S=f[I.idContato])==null?void 0:S.nome)||"",I.documentoObservacao=((D=v.find(({id:N})=>N===I.documentoId))==null?void 0:D.observacao)||"";for(const I of e.suprimentos)I.nomeContato=((M=f[I.idContato])==null?void 0:M.nome)||"";for(const I of o){const N=a.filter(F=>F.idFatura===I.id);I.nomeCliente=((O=f[I.idContato])==null?void 0:O.nome)||"";const P=$utils.unicos(N,"idContatoVendedor");I.nomeVendedores=P.map(F=>{var L;return(L=f[F])==null?void 0:L.nome}).filter(Boolean).join(", ")}const g=(await $db.formaPagamento.listaCache()).filter(I=>(!I.idContatoEmpresa||I.idContatoEmpresa===e.documentoCaixa.idEmpresa)&&!!I.ativo).map(({id:I,descricao:N,ativo:P,idFinanceiroPlanoConta:F,tipo:L,valor:z})=>({id:I,descricao:N,ativo:P,idFinanceiroPlanoConta:F,tipo:L,valor:z,valor:0,totalSistema:0}));for(const I of e.pagamentos)I.descricao=((T=g.find(({id:N})=>N===I.idFormaPagamento))==null?void 0:T.descricao)||"";for(const I of o){const N=e.pagamentos.filter(P=>P.idDocumento===I.id);for(const P of N)for(const F of g)F.id===P.idFormaPagamento&&(F.totalSistema=$utils.arredondar(F.totalSistema+P.valor),[5,97,99].includes(F.tipo)&&(F.valor=$utils.arredondar(F.valor+P.valor)))}e.documentoCaixa.valorAbertura;const x=$utils.arredondar($utils.somar(e.pagamentos.filter(({descricao:I})=>I==="Dinheiro"),"valor"));e.totalRecebimentoDinheiro=x,e.faturas=o,e.condicaoPagamento=$lodash.orderBy(g.filter(({idFinanceiroPlanoConta:I})=>I!==e.caixa.idPlanoConta),"descricao","asc"),e.condicaoPagamentoDinheiro=g.filter(({idFinanceiroPlanoConta:I})=>I===e.caixa.idPlanoConta)},Upe=async e=>{$utils.verificarErro(!e,"Caixa n\xE3o selecionado"),await Promise.all([$db.caixa.atualizaCache(),$db.empresa.atualizaCache(),$db.financeiroPlanoConta.atualizaCache(),$db.formaPagamento.atualizaCache()]);const t=await $db.hibrido.le({table:"documento",id:e,columns:Mpe});$utils.verificarErro(!(t!=null&&t.id)||t.tipo!=="Caixa","N\xE3o foi poss\xEDvel carregar os dados do caixa");const o=await $db.caixa.leCache({id:t.idCaixa}),r={idDocumentoCaixa:e,documentoCaixa:t,caixa:o,empresa:await $db.empresa.leCache({idContato:t.idEmpresa}),contaOrigem:await $db.financeiroPlanoConta.leCache({id:o.idPlanoConta}),contaDestino:await $db.financeiroPlanoConta.leCache({id:o.idPlanoContaSangria})};return await Lpe(r),await $pe(r),r},ak=async(e,t)=>{var l,u;$utils.verificarErro(!e,"Caixa n\xE3o selecionado");const o=t?t.filter(c=>c.documentoTipo==="Sangria Final"):await $db.hibrido.lista({table:"financeiroMovimentacao",where:{idDocumentoCaixa:e,documentoTipo:"Sangria Final"},columns:ok}),r=$utils.unicos(o,"idContato").filter(Boolean),i=(await $db.hibrido.lista({table:"contato",whereIn:{id:r},columns:["id","nome"]})).reduce((c,d)=>(c[d.id]=d,c),{}),n=o.map(c=>c.documentoId),s=await $db.hibrido.lista({table:"documento",whereIn:{id:n}});for(const c of o)c.nomeContato=((l=i[c.idContato])==null?void 0:l.nome)||"",c.documentoObservacao=((u=s.find(({id:d})=>d===c.documentoId))==null?void 0:u.observacao)||"";return o},zpe=60,Hpe=["id","codigoCaixa","ativo","descricao","tipo","idEmpresa","idPlanoConta","idPlanoContaSangria"];let Dc;function QC(){Dc={timeout:0,caixas:[],caixasId:{}}}QC();const jpe={tiposCaixa:{1:"SAT",2:"Cupom",3:"NFCe",4:"NFe"},limpaCache:QC,leCompleto:Upe,leSangriaFinal:ak,async atualizaCache(){const e=async()=>{const t=await $db.hibrido.lista({table:"caixa",columns:Hpe}),o={};for(const a of t)o[a.id]=a;const r=new Date;Dc={timeout:r.setSeconds(r.getSeconds()+zpe),caixas:t,caixasId:o}};Dc.processando||(Dc.processando=e());try{await Dc.processando}catch(t){throw QC(),t}},async verificaCache(){new Date>new Date(Dc.timeout)&&await this.atualizaCache()},async leCache({id:e}){return $utils.verificarErro(!e,"Id do caixa n\xE3o fornecido"),await this.verificaCache(),Dc.caixasId[e]||{}},async listaCache(){return await this.verificaCache(),Dc.caixas},grava:()=>{},abra:async e=>{const t=await $db.caixa.leCache({id:e.idCaixa}),o=sa(),r=await $db.contatoCpf.leCache($db.usuario.logado.numeroDocumentoNacional);$utils.verificarErro(!(r!=null&&r.id),"Usu\xE1rio n\xE3o cadastrado nos contatos da empresa");const a=await $db.hibrido.lista({table:"documento",columns:["id","idCaixa","idEmpresa","dataHoraEmissao"],where:{tipo:"Caixa"},whereFilter:{idCaixa:e.idCaixa,status:["Aberto","Reaberto"]}});$utils.verificarErro(a.length,"Caixa j\xE1 aberto");const i={id:Kt(),tipo:"Caixa",operacao:"Abertura Caixa",status:"Aberto",idEmpresa:t.idEmpresa,idContato:r.id,dataHoraEmissao:o,valorAbertura:e.valor,idFinanceiroPlanoContaCaixa:t.idPlanoConta,observacao:e.observacao,idCaixa:e.idCaixa};await $erpPut().documento.put(i),await ut("adicionar","documento",i.id,i);const n={id:Kt(),idDocumento:i.id,operacao:"Abertura Caixa",statusFinalizado:"Aberto",dataHoraEmissao:o,cpfUsuario:$db.usuario.logado.numeroDocumentoNacional,idDocumentoCaixa:i.id};$erpPut().documentoStatus.put(n),await ut("adicionar","documentoStatus",n.id,n)},leNew:async e=>{if(e=e||{},"id"in e)return e.id?await Se().caixa.get(e.id)||{}:{};let t={};"idEmpresa"in e&&e.idEmpresa&&(t.idEmpresa=e.idEmpresa);let o=Se().caixa;return Object.keys(t).length&&(o=Se().caixa.where(t)),o.toArray()},le:async e=>{if(e=e||{},"id"in e)return e.id?await Se().caixa.get(e.id)||{}:{};let t={};"idEmpresa"in e&&e.idEmpresa&&(t.idEmpresa=e.idEmpresa);let o=Se().caixa;if(Object.keys(t).length&&(o=Se().caixa.where(t)),o=await o.toArray()||[],"idContato"in e&&e.idContato&&(t.idContato=e.idContato),t={tipo:"Caixa",...t},e.aberto===!1){const r=(await $db.hibrido.lista({table:"documento",where:{status:"Aberto",...t}})).map(a=>a.idCaixa);return o.filter(a=>!r.includes(a.id))}return e.aberto===!0?await $db.hibrido.lista({table:"documento",where:t,whereFilter:{status:["Aberto","Reaberto"]}}):[]}},Gpe={grava:async e=>{if(e=Vr(e),!Object.keys(e.original||{}).length)await $erpPut().caixaConsolidacao.put(e.atual),await ut("adicionar","caixaConsolidacao",e.atual.id,e.atual);else{const t=Ja(e.original,e.atual);Object.keys(t).length&&(await $erpUpdate().caixaConsolidacao.update(e.atual.id,t),await ut("atualizar","caixaConsolidacao",e.atual.id,t))}},le:async e=>{if(e=e||{},e.id)return await Se().caixaConsolidacao.get(e.id)||{};let t=[];return e.idDocumentoCaixa&&(t=await Se().caixaConsolidacao.where({idDocumentoCaixa:e.idDocumentoCaixa}).toArray()||[]),t}},Wpe={grava:async e=>{if(e=Vr(e),!Object.keys(e.original||{}).length)await $erpPut().caixaConsolidacao2.put(e.atual),await ut("adicionar","caixaConsolidacao2",e.atual.id,e.atual);else{const t=Ja(e.original,e.atual);Object.keys(t).length&&(await $erpUpdate().caixaConsolidacao2.update(e.atual.id,t),await ut("atualizar","caixaConsolidacao2",e.atual.id,t))}},le:async e=>{if(e=e||{},e.id)return await Se().caixaConsolidacao2.get(e.id)||{};let t=[];return e.idDocumentoCaixa&&(t=await Se().caixaConsolidacao2.where({idDocumentoCaixa:e.idDocumentoCaixa}).toArray()||[]),e.idDocumentoStatus&&(t=await Se().caixaConsolidacao2.where({idDocumentoStatus:e.idDocumentoStatus}).toArray()||[]),e.tabela&&(t=await Se().caixaConsolidacao2.where({tabela:e.tabela}).toArray()||[]),e.idTabela&&(t=await Se().caixaConsolidacao2.where({idTabela:e.idTabela}).toArray()||[]),t}};var Qpe={nomeTabela:"cfop",filtrosTabela:["cfop","codigoCfop"],async le(e={}){if(Wt.log(this.nomeTabela,"le",e),"id"in e)return e.id?await Se()[this.nomeTabela].get(e.id)||{}:{};let t={};for(const o of this.filtrosTabela)if(o in e)if(![null,void 0].includes(e[o]))t[o]=e[o];else return[];return Object.keys(t).length?Se()[this.nomeTabela].where(t).toArray():Se()[this.nomeTabela].toArray()},async grava(e){Wt.log(this.nomeTabela,"grava",e);const t=cn(e.original||{},e.atual);Object.keys(e.original||{}).length?Object.keys(t).length&&(await Se()[this.nomeTabela].update(e.atual.id,t),await ut("atualizar",this.nomeTabela,e.atual.id,t)):(await Se()[this.nomeTabela].put(t),await ut("adicionar",this.nomeTabela,t.id,t))}},Xpe={nomeTabela:"_cidade",filtrosTabela:["cidadeCodIbge","ativo"],async le(e={}){if("id"in e)return e.id?await Se()[this.nomeTabela].get(e.id)||{}:{};let t={},o={};for(const a of this.filtrosTabela){if([!0,!1].includes(e[a])){o[a]=e[a];continue}[null,void 0].includes(e[a])||(t[a]=e[a])}let r=Se()[this.nomeTabela];return Object.keys(t).length&&(r=r.where(t)),Object.keys(o).length&&(r=r.filter(a=>{for(const i of Object.keys(o))if(a[i]!==o[i])return!1;return!0})),r.toArray()}},Oc={},gb={};(function(){gb.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(vt);var rk={},Pc={},hi={};(function(){var e,t,o,r,a,i,n,s=[].slice,l={}.hasOwnProperty;e=function(){var u,c,d,f,m,p;if(p=arguments[0],m=2<=arguments.length?s.call(arguments,1):[],a(Object.assign))Object.assign.apply(null,arguments);else for(u=0,d=m.length;u<d;u++)if(f=m[u],f!=null)for(c in f)!l.call(f,c)||(p[c]=f[c]);return p},a=function(u){return!!u&&Object.prototype.toString.call(u)==="[object Function]"},i=function(u){var c;return!!u&&((c=typeof u)=="function"||c==="object")},o=function(u){return a(Array.isArray)?Array.isArray(u):Object.prototype.toString.call(u)==="[object Array]"},r=function(u){var c;if(o(u))return!u.length;for(c in u)if(!!l.call(u,c))return!1;return!0},n=function(u){var c,d;return i(u)&&(d=Object.getPrototypeOf(u))&&(c=d.constructor)&&typeof c=="function"&&c instanceof c&&Function.prototype.toString.call(c)===Function.prototype.toString.call(Object)},t=function(u){return a(u.valueOf)?u.valueOf():u},hi.assign=e,hi.isFunction=a,hi.isObject=i,hi.isArray=o,hi.isEmpty=r,hi.isPlainObject=n,hi.getValue=t}).call(vt);var _I={exports:{}};(function(){_I.exports=function(){function e(){}return e.prototype.hasFeature=function(t,o){return!0},e.prototype.createDocumentType=function(t,o,r){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(t,o,r){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(t,o){throw new Error("This DOM method is not implemented.")},e}()}).call(vt);var bI={exports:{}},ik={exports:{}},nk={exports:{}};(function(){nk.exports=function(){function e(){}return e.prototype.handleError=function(t){throw new Error(t)},e}()}).call(vt);var sk={exports:{}};(function(){sk.exports=function(){function e(t){this.arr=t||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(t){return this.arr[t]||null},e.prototype.contains=function(t){return this.arr.indexOf(t)!==-1},e}()}).call(vt);(function(){var e,t;e=nk.exports,t=sk.exports,ik.exports=function(){function o(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(o.prototype,"parameterNames",{get:function(){return new t(Object.keys(this.defaultParams))}}),o.prototype.getParameter=function(r){return this.params.hasOwnProperty(r)?this.params[r]:null},o.prototype.canSetParameter=function(r,a){return!0},o.prototype.setParameter=function(r,a){return a!=null?this.params[r]=a:delete this.params[r]},o}()}).call(vt);var ms={exports:{}},yI={exports:{}},mr={exports:{}};(function(){mr.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(vt);var xI={exports:{}};(function(){var e;e=mr.exports,xI.exports=function(){function t(o,r,a){if(this.parent=o,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),r==null)throw new Error("Missing attribute name. "+this.debugInfo(r));this.name=this.stringify.name(r),this.value=this.stringify.attValue(a),this.type=e.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(t.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.value},set:function(o){return this.value=o||""}}),Object.defineProperty(t.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(t.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(t.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(t.prototype,"specified",{get:function(){return!0}}),t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(o){return this.options.writer.attribute(this,this.options.writer.filterOptions(o))},t.prototype.debugInfo=function(o){return o=o||this.name,o==null?"parent: <"+this.parent.name+">":"attribute: {"+o+"}, parent: <"+this.parent.name+">"},t.prototype.isEqualNode=function(o){return!(o.namespaceURI!==this.namespaceURI||o.prefix!==this.prefix||o.localName!==this.localName||o.value!==this.value)},t}()}).call(vt);var CI={exports:{}};(function(){CI.exports=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(t){return this.nodes[t]},e.prototype.setNamedItem=function(t){var o;return o=this.nodes[t.nodeName],this.nodes[t.nodeName]=t,o||null},e.prototype.removeNamedItem=function(t){var o;return o=this.nodes[t],delete this.nodes[t],o||null},e.prototype.item=function(t){return this.nodes[Object.keys(this.nodes)[t]]||null},e.prototype.getNamedItemNS=function(t,o){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(t){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(t,o){throw new Error("This DOM method is not implemented.")},e}()}).call(vt);(function(){var e,t,o,r,a,i,n,s,l=function(c,d){for(var f in d)u.call(d,f)&&(c[f]=d[f]);function m(){this.constructor=c}return m.prototype=d.prototype,c.prototype=new m,c.__super__=d.prototype,c},u={}.hasOwnProperty;s=hi,n=s.isObject,i=s.isFunction,a=s.getValue,r=ms.exports,e=mr.exports,t=xI.exports,o=CI.exports,yI.exports=function(c){l(d,c);function d(f,m,p){var v,g,x,b;if(d.__super__.constructor.call(this,f),m==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(m),this.type=e.Element,this.attribs={},this.schemaTypeInfo=null,p!=null&&this.attribute(p),f.type===e.Document&&(this.isRoot=!0,this.documentObject=f,f.rootObject=this,f.children)){for(b=f.children,g=0,x=b.length;g<x;g++)if(v=b[g],v.type===e.DocType){v.name=this.name;break}}}return Object.defineProperty(d.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(d.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(d.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(d.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(d.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(d.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(d.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(d.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new o(this.attribs)),this.attributeMap}}),d.prototype.clone=function(){var f,m,p,v;p=Object.create(this),p.isRoot&&(p.documentObject=null),p.attribs={},v=this.attribs;for(m in v)!u.call(v,m)||(f=v[m],p.attribs[m]=f.clone());return p.children=[],this.children.forEach(function(g){var x;return x=g.clone(),x.parent=p,p.children.push(x)}),p},d.prototype.attribute=function(f,m){var p,v;if(f!=null&&(f=a(f)),n(f))for(p in f)!u.call(f,p)||(v=f[p],this.attribute(p,v));else i(m)&&(m=m.apply()),this.options.keepNullAttributes&&m==null?this.attribs[f]=new t(this,f,""):m!=null&&(this.attribs[f]=new t(this,f,m));return this},d.prototype.removeAttribute=function(f){var m,p,v;if(f==null)throw new Error("Missing attribute name. "+this.debugInfo());if(f=a(f),Array.isArray(f))for(p=0,v=f.length;p<v;p++)m=f[p],delete this.attribs[m];else delete this.attribs[f];return this},d.prototype.toString=function(f){return this.options.writer.element(this,this.options.writer.filterOptions(f))},d.prototype.att=function(f,m){return this.attribute(f,m)},d.prototype.a=function(f,m){return this.attribute(f,m)},d.prototype.getAttribute=function(f){return this.attribs.hasOwnProperty(f)?this.attribs[f].value:null},d.prototype.setAttribute=function(f,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getAttributeNode=function(f){return this.attribs.hasOwnProperty(f)?this.attribs[f]:null},d.prototype.setAttributeNode=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.removeAttributeNode=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByTagName=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getAttributeNS=function(f,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.setAttributeNS=function(f,m,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.removeAttributeNS=function(f,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getAttributeNodeNS=function(f,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.setAttributeNodeNS=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByTagNameNS=function(f,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.hasAttribute=function(f){return this.attribs.hasOwnProperty(f)},d.prototype.hasAttributeNS=function(f,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.setIdAttribute=function(f,m){return this.attribs.hasOwnProperty(f)?this.attribs[f].isId:m},d.prototype.setIdAttributeNS=function(f,m,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.setIdAttributeNode=function(f,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByTagName=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByTagNameNS=function(f,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.getElementsByClassName=function(f){throw new Error("This DOM method is not implemented."+this.debugInfo())},d.prototype.isEqualNode=function(f){var m,p,v;if(!d.__super__.isEqualNode.apply(this,arguments).isEqualNode(f)||f.namespaceURI!==this.namespaceURI||f.prefix!==this.prefix||f.localName!==this.localName||f.attribs.length!==this.attribs.length)return!1;for(m=p=0,v=this.attribs.length-1;0<=v?p<=v:p>=v;m=0<=v?++p:--p)if(!this.attribs[m].isEqualNode(f.attribs[m]))return!1;return!0},d}(r)}).call(vt);var wI={exports:{}},Ph={exports:{}};(function(){var e,t=function(r,a){for(var i in a)o.call(a,i)&&(r[i]=a[i]);function n(){this.constructor=r}return n.prototype=a.prototype,r.prototype=new n,r.__super__=a.prototype,r},o={}.hasOwnProperty;e=ms.exports,Ph.exports=function(r){t(a,r);function a(i){a.__super__.constructor.call(this,i),this.value=""}return Object.defineProperty(a.prototype,"data",{get:function(){return this.value},set:function(i){return this.value=i||""}}),Object.defineProperty(a.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(a.prototype,"textContent",{get:function(){return this.value},set:function(i){return this.value=i||""}}),a.prototype.clone=function(){return Object.create(this)},a.prototype.substringData=function(i,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.appendData=function(i){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.insertData=function(i,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.deleteData=function(i,n){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.replaceData=function(i,n,s){throw new Error("This DOM method is not implemented."+this.debugInfo())},a.prototype.isEqualNode=function(i){return!(!a.__super__.isEqualNode.apply(this,arguments).isEqualNode(i)||i.data!==this.data)},a}(e)}).call(vt);(function(){var e,t,o=function(a,i){for(var n in i)r.call(i,n)&&(a[n]=i[n]);function s(){this.constructor=a}return s.prototype=i.prototype,a.prototype=new s,a.__super__=i.prototype,a},r={}.hasOwnProperty;e=mr.exports,t=Ph.exports,wI.exports=function(a){o(i,a);function i(n,s){if(i.__super__.constructor.call(this,n),s==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=e.CData,this.value=this.stringify.cdata(s)}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(n){return this.options.writer.cdata(this,this.options.writer.filterOptions(n))},i}(t)}).call(vt);var EI={exports:{}};(function(){var e,t,o=function(a,i){for(var n in i)r.call(i,n)&&(a[n]=i[n]);function s(){this.constructor=a}return s.prototype=i.prototype,a.prototype=new s,a.__super__=i.prototype,a},r={}.hasOwnProperty;e=mr.exports,t=Ph.exports,EI.exports=function(a){o(i,a);function i(n,s){if(i.__super__.constructor.call(this,n),s==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=e.Comment,this.value=this.stringify.comment(s)}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(n){return this.options.writer.comment(this,this.options.writer.filterOptions(n))},i}(t)}).call(vt);var SI={exports:{}};(function(){var e,t,o,r=function(i,n){for(var s in n)a.call(n,s)&&(i[s]=n[s]);function l(){this.constructor=i}return l.prototype=n.prototype,i.prototype=new l,i.__super__=n.prototype,i},a={}.hasOwnProperty;o=hi.isObject,t=ms.exports,e=mr.exports,SI.exports=function(i){r(n,i);function n(s,l,u,c){var d;n.__super__.constructor.call(this,s),o(l)&&(d=l,l=d.version,u=d.encoding,c=d.standalone),l||(l="1.0"),this.type=e.Declaration,this.version=this.stringify.xmlVersion(l),u!=null&&(this.encoding=this.stringify.xmlEncoding(u)),c!=null&&(this.standalone=this.stringify.xmlStandalone(c))}return n.prototype.toString=function(s){return this.options.writer.declaration(this,this.options.writer.filterOptions(s))},n}(t)}).call(vt);var II={exports:{}},AI={exports:{}};(function(){var e,t,o=function(a,i){for(var n in i)r.call(i,n)&&(a[n]=i[n]);function s(){this.constructor=a}return s.prototype=i.prototype,a.prototype=new s,a.__super__=i.prototype,a},r={}.hasOwnProperty;t=ms.exports,e=mr.exports,AI.exports=function(a){o(i,a);function i(n,s,l,u,c,d){if(i.__super__.constructor.call(this,n),s==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(l==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(s));if(!u)throw new Error("Missing DTD attribute type. "+this.debugInfo(s));if(!c)throw new Error("Missing DTD attribute default. "+this.debugInfo(s));if(c.indexOf("#")!==0&&(c="#"+c),!c.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(s));if(d&&!c.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(s));this.elementName=this.stringify.name(s),this.type=e.AttributeDeclaration,this.attributeName=this.stringify.name(l),this.attributeType=this.stringify.dtdAttType(u),d&&(this.defaultValue=this.stringify.dtdAttDefault(d)),this.defaultValueType=c}return i.prototype.toString=function(n){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(n))},i}(t)}).call(vt);var TI={exports:{}};(function(){var e,t,o,r=function(i,n){for(var s in n)a.call(n,s)&&(i[s]=n[s]);function l(){this.constructor=i}return l.prototype=n.prototype,i.prototype=new l,i.__super__=n.prototype,i},a={}.hasOwnProperty;o=hi.isObject,t=ms.exports,e=mr.exports,TI.exports=function(i){r(n,i);function n(s,l,u,c){if(n.__super__.constructor.call(this,s),u==null)throw new Error("Missing DTD entity name. "+this.debugInfo(u));if(c==null)throw new Error("Missing DTD entity value. "+this.debugInfo(u));if(this.pe=!!l,this.name=this.stringify.name(u),this.type=e.EntityDeclaration,!o(c))this.value=this.stringify.dtdEntityValue(c),this.internal=!0;else{if(!c.pubID&&!c.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(u));if(c.pubID&&!c.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(u));if(this.internal=!1,c.pubID!=null&&(this.pubID=this.stringify.dtdPubID(c.pubID)),c.sysID!=null&&(this.sysID=this.stringify.dtdSysID(c.sysID)),c.nData!=null&&(this.nData=this.stringify.dtdNData(c.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(u))}}return Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(n.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(n.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(n.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(n.prototype,"xmlVersion",{get:function(){return null}}),n.prototype.toString=function(s){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(s))},n}(t)}).call(vt);var DI={exports:{}};(function(){var e,t,o=function(a,i){for(var n in i)r.call(i,n)&&(a[n]=i[n]);function s(){this.constructor=a}return s.prototype=i.prototype,a.prototype=new s,a.__super__=i.prototype,a},r={}.hasOwnProperty;t=ms.exports,e=mr.exports,DI.exports=function(a){o(i,a);function i(n,s,l){if(i.__super__.constructor.call(this,n),s==null)throw new Error("Missing DTD element name. "+this.debugInfo());l||(l="(#PCDATA)"),Array.isArray(l)&&(l="("+l.join(",")+")"),this.name=this.stringify.name(s),this.type=e.ElementDeclaration,this.value=this.stringify.dtdElementValue(l)}return i.prototype.toString=function(n){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(n))},i}(t)}).call(vt);var OI={exports:{}};(function(){var e,t,o=function(a,i){for(var n in i)r.call(i,n)&&(a[n]=i[n]);function s(){this.constructor=a}return s.prototype=i.prototype,a.prototype=new s,a.__super__=i.prototype,a},r={}.hasOwnProperty;t=ms.exports,e=mr.exports,OI.exports=function(a){o(i,a);function i(n,s,l){if(i.__super__.constructor.call(this,n),s==null)throw new Error("Missing DTD notation name. "+this.debugInfo(s));if(!l.pubID&&!l.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(s));this.name=this.stringify.name(s),this.type=e.NotationDeclaration,l.pubID!=null&&(this.pubID=this.stringify.dtdPubID(l.pubID)),l.sysID!=null&&(this.sysID=this.stringify.dtdSysID(l.sysID))}return Object.defineProperty(i.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(i.prototype,"systemId",{get:function(){return this.sysID}}),i.prototype.toString=function(n){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(n))},i}(t)}).call(vt);(function(){var e,t,o,r,a,i,n,s,l=function(c,d){for(var f in d)u.call(d,f)&&(c[f]=d[f]);function m(){this.constructor=c}return m.prototype=d.prototype,c.prototype=new m,c.__super__=d.prototype,c},u={}.hasOwnProperty;s=hi.isObject,n=ms.exports,e=mr.exports,t=AI.exports,r=TI.exports,o=DI.exports,a=OI.exports,i=CI.exports,II.exports=function(c){l(d,c);function d(f,m,p){var v,g,x,b,_,w;if(d.__super__.constructor.call(this,f),this.type=e.DocType,f.children){for(b=f.children,g=0,x=b.length;g<x;g++)if(v=b[g],v.type===e.Element){this.name=v.name;break}}this.documentObject=f,s(m)&&(_=m,m=_.pubID,p=_.sysID),p==null&&(w=[m,p],p=w[0],m=w[1]),m!=null&&(this.pubID=this.stringify.dtdPubID(m)),p!=null&&(this.sysID=this.stringify.dtdSysID(p))}return Object.defineProperty(d.prototype,"entities",{get:function(){var f,m,p,v,g;for(v={},g=this.children,m=0,p=g.length;m<p;m++)f=g[m],f.type===e.EntityDeclaration&&!f.pe&&(v[f.name]=f);return new i(v)}}),Object.defineProperty(d.prototype,"notations",{get:function(){var f,m,p,v,g;for(v={},g=this.children,m=0,p=g.length;m<p;m++)f=g[m],f.type===e.NotationDeclaration&&(v[f.name]=f);return new i(v)}}),Object.defineProperty(d.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(d.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(d.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),d.prototype.element=function(f,m){var p;return p=new o(this,f,m),this.children.push(p),this},d.prototype.attList=function(f,m,p,v,g){var x;return x=new t(this,f,m,p,v,g),this.children.push(x),this},d.prototype.entity=function(f,m){var p;return p=new r(this,!1,f,m),this.children.push(p),this},d.prototype.pEntity=function(f,m){var p;return p=new r(this,!0,f,m),this.children.push(p),this},d.prototype.notation=function(f,m){var p;return p=new a(this,f,m),this.children.push(p),this},d.prototype.toString=function(f){return this.options.writer.docType(this,this.options.writer.filterOptions(f))},d.prototype.ele=function(f,m){return this.element(f,m)},d.prototype.att=function(f,m,p,v,g){return this.attList(f,m,p,v,g)},d.prototype.ent=function(f,m){return this.entity(f,m)},d.prototype.pent=function(f,m){return this.pEntity(f,m)},d.prototype.not=function(f,m){return this.notation(f,m)},d.prototype.up=function(){return this.root()||this.documentObject},d.prototype.isEqualNode=function(f){return!(!d.__super__.isEqualNode.apply(this,arguments).isEqualNode(f)||f.name!==this.name||f.publicId!==this.publicId||f.systemId!==this.systemId)},d}(n)}).call(vt);var PI={exports:{}};(function(){var e,t,o=function(a,i){for(var n in i)r.call(i,n)&&(a[n]=i[n]);function s(){this.constructor=a}return s.prototype=i.prototype,a.prototype=new s,a.__super__=i.prototype,a},r={}.hasOwnProperty;e=mr.exports,t=ms.exports,PI.exports=function(a){o(i,a);function i(n,s){if(i.__super__.constructor.call(this,n),s==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=e.Raw,this.value=this.stringify.raw(s)}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(n){return this.options.writer.raw(this,this.options.writer.filterOptions(n))},i}(t)}).call(vt);var FI={exports:{}};(function(){var e,t,o=function(a,i){for(var n in i)r.call(i,n)&&(a[n]=i[n]);function s(){this.constructor=a}return s.prototype=i.prototype,a.prototype=new s,a.__super__=i.prototype,a},r={}.hasOwnProperty;e=mr.exports,t=Ph.exports,FI.exports=function(a){o(i,a);function i(n,s){if(i.__super__.constructor.call(this,n),s==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=e.Text,this.value=this.stringify.text(s)}return Object.defineProperty(i.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(i.prototype,"wholeText",{get:function(){var n,s,l;for(l="",s=this.previousSibling;s;)l=s.data+l,s=s.previousSibling;for(l+=this.data,n=this.nextSibling;n;)l=l+n.data,n=n.nextSibling;return l}}),i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(n){return this.options.writer.text(this,this.options.writer.filterOptions(n))},i.prototype.splitText=function(n){throw new Error("This DOM method is not implemented."+this.debugInfo())},i.prototype.replaceWholeText=function(n){throw new Error("This DOM method is not implemented."+this.debugInfo())},i}(t)}).call(vt);var MI={exports:{}};(function(){var e,t,o=function(a,i){for(var n in i)r.call(i,n)&&(a[n]=i[n]);function s(){this.constructor=a}return s.prototype=i.prototype,a.prototype=new s,a.__super__=i.prototype,a},r={}.hasOwnProperty;e=mr.exports,t=Ph.exports,MI.exports=function(a){o(i,a);function i(n,s,l){if(i.__super__.constructor.call(this,n),s==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=e.ProcessingInstruction,this.target=this.stringify.insTarget(s),this.name=this.target,l&&(this.value=this.stringify.insValue(l))}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(n){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(n))},i.prototype.isEqualNode=function(n){return!(!i.__super__.isEqualNode.apply(this,arguments).isEqualNode(n)||n.target!==this.target)},i}(t)}).call(vt);var lk={exports:{}};(function(){var e,t,o=function(a,i){for(var n in i)r.call(i,n)&&(a[n]=i[n]);function s(){this.constructor=a}return s.prototype=i.prototype,a.prototype=new s,a.__super__=i.prototype,a},r={}.hasOwnProperty;t=ms.exports,e=mr.exports,lk.exports=function(a){o(i,a);function i(n){i.__super__.constructor.call(this,n),this.type=e.Dummy}return i.prototype.clone=function(){return Object.create(this)},i.prototype.toString=function(n){return""},i}(t)}).call(vt);var ck={exports:{}};(function(){ck.exports=function(){function e(t){this.nodes=t}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(t){return this.nodes[t]||null},e}()}).call(vt);var uk={exports:{}};(function(){uk.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(vt);(function(){var e,t,o,r,a,i,n,s,l,u,c,d,f,m,p,v,g,x={}.hasOwnProperty;g=hi,v=g.isObject,p=g.isFunction,m=g.isEmpty,f=g.getValue,s=null,o=null,r=null,a=null,i=null,c=null,d=null,u=null,n=null,t=null,l=null,e=null,ms.exports=function(){function b(_){this.parent=_,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,s||(s=yI.exports,o=wI.exports,r=EI.exports,a=SI.exports,i=II.exports,c=PI.exports,d=FI.exports,u=MI.exports,n=lk.exports,t=mr.exports,l=ck.exports,e=uk.exports)}return Object.defineProperty(b.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(b.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(b.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(b.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(b.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new l(this.children)),this.childNodeList}}),Object.defineProperty(b.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(b.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(b.prototype,"previousSibling",{get:function(){var _;return _=this.parent.children.indexOf(this),this.parent.children[_-1]||null}}),Object.defineProperty(b.prototype,"nextSibling",{get:function(){var _;return _=this.parent.children.indexOf(this),this.parent.children[_+1]||null}}),Object.defineProperty(b.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(b.prototype,"textContent",{get:function(){var _,w,S,D,M;if(this.nodeType===t.Element||this.nodeType===t.DocumentFragment){for(M="",D=this.children,w=0,S=D.length;w<S;w++)_=D[w],_.textContent&&(M+=_.textContent);return M}else return null},set:function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),b.prototype.setParent=function(_){var w,S,D,M,O;for(this.parent=_,_&&(this.options=_.options,this.stringify=_.stringify),M=this.children,O=[],S=0,D=M.length;S<D;S++)w=M[S],O.push(w.setParent(this));return O},b.prototype.element=function(_,w,S){var D,M,O,T,I,N,P,F,L,z,H;if(N=null,w===null&&S==null&&(L=[{},null],w=L[0],S=L[1]),w==null&&(w={}),w=f(w),v(w)||(z=[w,S],S=z[0],w=z[1]),_!=null&&(_=f(_)),Array.isArray(_))for(O=0,P=_.length;O<P;O++)M=_[O],N=this.element(M);else if(p(_))N=this.element(_.apply());else if(v(_)){for(I in _)if(!!x.call(_,I))if(H=_[I],p(H)&&(H=H.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&I.indexOf(this.stringify.convertAttKey)===0)N=this.attribute(I.substr(this.stringify.convertAttKey.length),H);else if(!this.options.separateArrayItems&&Array.isArray(H)&&m(H))N=this.dummy();else if(v(H)&&m(H))N=this.element(I);else if(!this.options.keepNullNodes&&H==null)N=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(H))for(T=0,F=H.length;T<F;T++)M=H[T],D={},D[I]=M,N=this.element(D);else v(H)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&I.indexOf(this.stringify.convertTextKey)===0?N=this.element(H):(N=this.element(I),N.element(H)):N=this.element(I,H)}else!this.options.keepNullNodes&&S===null?N=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&_.indexOf(this.stringify.convertTextKey)===0?N=this.text(S):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&_.indexOf(this.stringify.convertCDataKey)===0?N=this.cdata(S):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&_.indexOf(this.stringify.convertCommentKey)===0?N=this.comment(S):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&_.indexOf(this.stringify.convertRawKey)===0?N=this.raw(S):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&_.indexOf(this.stringify.convertPIKey)===0?N=this.instruction(_.substr(this.stringify.convertPIKey.length),S):N=this.node(_,w,S);if(N==null)throw new Error("Could not create any elements with: "+_+". "+this.debugInfo());return N},b.prototype.insertBefore=function(_,w,S){var D,M,O,T,I;if(_!=null&&_.type)return O=_,T=w,O.setParent(this),T?(M=children.indexOf(T),I=children.splice(M),children.push(O),Array.prototype.push.apply(children,I)):children.push(O),O;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(_));return M=this.parent.children.indexOf(this),I=this.parent.children.splice(M),D=this.parent.element(_,w,S),Array.prototype.push.apply(this.parent.children,I),D},b.prototype.insertAfter=function(_,w,S){var D,M,O;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(_));return M=this.parent.children.indexOf(this),O=this.parent.children.splice(M+1),D=this.parent.element(_,w,S),Array.prototype.push.apply(this.parent.children,O),D},b.prototype.remove=function(){var _;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return _=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[_,_-_+1].concat([])),this.parent},b.prototype.node=function(_,w,S){var D,M;return _!=null&&(_=f(_)),w||(w={}),w=f(w),v(w)||(M=[w,S],S=M[0],w=M[1]),D=new s(this,_,w),S!=null&&D.text(S),this.children.push(D),D},b.prototype.text=function(_){var w;return v(_)&&this.element(_),w=new d(this,_),this.children.push(w),this},b.prototype.cdata=function(_){var w;return w=new o(this,_),this.children.push(w),this},b.prototype.comment=function(_){var w;return w=new r(this,_),this.children.push(w),this},b.prototype.commentBefore=function(_){var w,S;return w=this.parent.children.indexOf(this),S=this.parent.children.splice(w),this.parent.comment(_),Array.prototype.push.apply(this.parent.children,S),this},b.prototype.commentAfter=function(_){var w,S;return w=this.parent.children.indexOf(this),S=this.parent.children.splice(w+1),this.parent.comment(_),Array.prototype.push.apply(this.parent.children,S),this},b.prototype.raw=function(_){var w;return w=new c(this,_),this.children.push(w),this},b.prototype.dummy=function(){var _;return _=new n(this),_},b.prototype.instruction=function(_,w){var S,D,M,O,T;if(_!=null&&(_=f(_)),w!=null&&(w=f(w)),Array.isArray(_))for(O=0,T=_.length;O<T;O++)S=_[O],this.instruction(S);else if(v(_))for(S in _)!x.call(_,S)||(D=_[S],this.instruction(S,D));else p(w)&&(w=w.apply()),M=new u(this,_,w),this.children.push(M);return this},b.prototype.instructionBefore=function(_,w){var S,D;return S=this.parent.children.indexOf(this),D=this.parent.children.splice(S),this.parent.instruction(_,w),Array.prototype.push.apply(this.parent.children,D),this},b.prototype.instructionAfter=function(_,w){var S,D;return S=this.parent.children.indexOf(this),D=this.parent.children.splice(S+1),this.parent.instruction(_,w),Array.prototype.push.apply(this.parent.children,D),this},b.prototype.declaration=function(_,w,S){var D,M;return D=this.document(),M=new a(D,_,w,S),D.children.length===0?D.children.unshift(M):D.children[0].type===t.Declaration?D.children[0]=M:D.children.unshift(M),D.root()||D},b.prototype.dtd=function(_,w){var S,D,M,O,T,I,N,P,F,L;for(D=this.document(),M=new i(D,_,w),F=D.children,O=T=0,N=F.length;T<N;O=++T)if(S=F[O],S.type===t.DocType)return D.children[O]=M,M;for(L=D.children,O=I=0,P=L.length;I<P;O=++I)if(S=L[O],S.isRoot)return D.children.splice(O,0,M),M;return D.children.push(M),M},b.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},b.prototype.root=function(){var _;for(_=this;_;){if(_.type===t.Document)return _.rootObject;if(_.isRoot)return _;_=_.parent}},b.prototype.document=function(){var _;for(_=this;_;){if(_.type===t.Document)return _;_=_.parent}},b.prototype.end=function(_){return this.document().end(_)},b.prototype.prev=function(){var _;if(_=this.parent.children.indexOf(this),_<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[_-1]},b.prototype.next=function(){var _;if(_=this.parent.children.indexOf(this),_===-1||_===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[_+1]},b.prototype.importDocument=function(_){var w;return w=_.root().clone(),w.parent=this,w.isRoot=!1,this.children.push(w),this},b.prototype.debugInfo=function(_){var w,S;return _=_||this.name,_==null&&!((w=this.parent)!=null&&w.name)?"":_==null?"parent: <"+this.parent.name+">":(S=this.parent)!=null&&S.name?"node: <"+_+">, parent: <"+this.parent.name+">":"node: <"+_+">"},b.prototype.ele=function(_,w,S){return this.element(_,w,S)},b.prototype.nod=function(_,w,S){return this.node(_,w,S)},b.prototype.txt=function(_){return this.text(_)},b.prototype.dat=function(_){return this.cdata(_)},b.prototype.com=function(_){return this.comment(_)},b.prototype.ins=function(_,w){return this.instruction(_,w)},b.prototype.doc=function(){return this.document()},b.prototype.dec=function(_,w,S){return this.declaration(_,w,S)},b.prototype.e=function(_,w,S){return this.element(_,w,S)},b.prototype.n=function(_,w,S){return this.node(_,w,S)},b.prototype.t=function(_){return this.text(_)},b.prototype.d=function(_){return this.cdata(_)},b.prototype.c=function(_){return this.comment(_)},b.prototype.r=function(_){return this.raw(_)},b.prototype.i=function(_,w){return this.instruction(_,w)},b.prototype.u=function(){return this.up()},b.prototype.importXMLBuilder=function(_){return this.importDocument(_)},b.prototype.replaceChild=function(_,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.removeChild=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.appendChild=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.hasChildNodes=function(){return this.children.length!==0},b.prototype.cloneNode=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.isSupported=function(_,w){return!0},b.prototype.hasAttributes=function(){return this.attribs.length!==0},b.prototype.compareDocumentPosition=function(_){var w,S;return w=this,w===_?0:this.document()!==_.document()?(S=e.Disconnected|e.ImplementationSpecific,Math.random()<.5?S|=e.Preceding:S|=e.Following,S):w.isAncestor(_)?e.Contains|e.Preceding:w.isDescendant(_)?e.Contains|e.Following:w.isPreceding(_)?e.Preceding:e.Following},b.prototype.isSameNode=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.lookupPrefix=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.isDefaultNamespace=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.lookupNamespaceURI=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.isEqualNode=function(_){var w,S,D;if(_.nodeType!==this.nodeType||_.children.length!==this.children.length)return!1;for(w=S=0,D=this.children.length-1;0<=D?S<=D:S>=D;w=0<=D?++S:--S)if(!this.children[w].isEqualNode(_.children[w]))return!1;return!0},b.prototype.getFeature=function(_,w){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.setUserData=function(_,w,S){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getUserData=function(_){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.contains=function(_){return _?_===this||this.isDescendant(_):!1},b.prototype.isDescendant=function(_){var w,S,D,M,O;for(O=this.children,D=0,M=O.length;D<M;D++)if(w=O[D],_===w||(S=w.isDescendant(_),S))return!0;return!1},b.prototype.isAncestor=function(_){return _.isDescendant(this)},b.prototype.isPreceding=function(_){var w,S;return w=this.treePosition(_),S=this.treePosition(this),w===-1||S===-1?!1:w<S},b.prototype.isFollowing=function(_){var w,S;return w=this.treePosition(_),S=this.treePosition(this),w===-1||S===-1?!1:w>S},b.prototype.treePosition=function(_){var w,S;return S=0,w=!1,this.foreachTreeNode(this.document(),function(D){if(S++,!w&&D===_)return w=!0}),w?S:-1},b.prototype.foreachTreeNode=function(_,w){var S,D,M,O,T;for(_||(_=this.document()),O=_.children,D=0,M=O.length;D<M;D++){if(S=O[D],T=w(S))return T;if(T=this.foreachTreeNode(S,w),T)return T}},b}()}).call(vt);var NI={exports:{}};(function(){var e=function(o,r){return function(){return o.apply(r,arguments)}},t={}.hasOwnProperty;NI.exports=function(){function o(r){this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this);var a,i,n;r||(r={}),this.options=r,this.options.version||(this.options.version="1.0"),i=r.stringify||{};for(a in i)!t.call(i,a)||(n=i[a],this[a]=n)}return o.prototype.name=function(r){return this.options.noValidation?r:this.assertLegalName(""+r||"")},o.prototype.text=function(r){return this.options.noValidation?r:this.assertLegalChar(this.textEscape(""+r||""))},o.prototype.cdata=function(r){return this.options.noValidation?r:(r=""+r||"",r=r.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(r))},o.prototype.comment=function(r){if(this.options.noValidation)return r;if(r=""+r||"",r.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+r);return this.assertLegalChar(r)},o.prototype.raw=function(r){return this.options.noValidation?r:""+r||""},o.prototype.attValue=function(r){return this.options.noValidation?r:this.assertLegalChar(this.attEscape(r=""+r||""))},o.prototype.insTarget=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},o.prototype.insValue=function(r){if(this.options.noValidation)return r;if(r=""+r||"",r.match(/\?>/))throw new Error("Invalid processing instruction value: "+r);return this.assertLegalChar(r)},o.prototype.xmlVersion=function(r){if(this.options.noValidation)return r;if(r=""+r||"",!r.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+r);return r},o.prototype.xmlEncoding=function(r){if(this.options.noValidation)return r;if(r=""+r||"",!r.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+r);return this.assertLegalChar(r)},o.prototype.xmlStandalone=function(r){return this.options.noValidation?r:r?"yes":"no"},o.prototype.dtdPubID=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},o.prototype.dtdSysID=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},o.prototype.dtdElementValue=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},o.prototype.dtdAttType=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},o.prototype.dtdAttDefault=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},o.prototype.dtdEntityValue=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},o.prototype.dtdNData=function(r){return this.options.noValidation?r:this.assertLegalChar(""+r||"")},o.prototype.convertAttKey="@",o.prototype.convertPIKey="?",o.prototype.convertTextKey="#text",o.prototype.convertCDataKey="#cdata",o.prototype.convertCommentKey="#comment",o.prototype.convertRawKey="#raw",o.prototype.assertLegalChar=function(r){var a,i;if(this.options.noValidation)return r;if(a="",this.options.version==="1.0"){if(a=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,i=r.match(a))throw new Error("Invalid character in string: "+r+" at index "+i.index)}else if(this.options.version==="1.1"&&(a=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,i=r.match(a)))throw new Error("Invalid character in string: "+r+" at index "+i.index);return r},o.prototype.assertLegalName=function(r){var a;if(this.options.noValidation)return r;if(this.assertLegalChar(r),a=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!r.match(a))throw new Error("Invalid character in name");return r},o.prototype.textEscape=function(r){var a;return this.options.noValidation?r:(a=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,r.replace(a,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},o.prototype.attEscape=function(r){var a;return this.options.noValidation?r:(a=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,r.replace(a,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},o}()}).call(vt);var _b={exports:{}},kI={exports:{}},Fh={exports:{}};(function(){Fh.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(vt);(function(){var e,t,o,r={}.hasOwnProperty;o=hi.assign,e=mr.exports,t=Fh.exports,kI.exports=function(){function a(i){var n,s,l;i||(i={}),this.options=i,s=i.writer||{};for(n in s)!r.call(s,n)||(l=s[n],this["_"+n]=this[n],this[n]=l)}return a.prototype.filterOptions=function(i){var n,s,l,u,c,d,f,m;return i||(i={}),i=o({},this.options,i),n={writer:this},n.pretty=i.pretty||!1,n.allowEmpty=i.allowEmpty||!1,n.indent=(s=i.indent)!=null?s:"  ",n.newline=(l=i.newline)!=null?l:`
`,n.offset=(u=i.offset)!=null?u:0,n.dontPrettyTextNodes=(c=(d=i.dontPrettyTextNodes)!=null?d:i.dontprettytextnodes)!=null?c:0,n.spaceBeforeSlash=(f=(m=i.spaceBeforeSlash)!=null?m:i.spacebeforeslash)!=null?f:"",n.spaceBeforeSlash===!0&&(n.spaceBeforeSlash=" "),n.suppressPrettyCount=0,n.user={},n.state=t.None,n},a.prototype.indent=function(i,n,s){var l;return!n.pretty||n.suppressPrettyCount?"":n.pretty&&(l=(s||0)+n.offset+1,l>0)?new Array(l).join(n.indent):""},a.prototype.endline=function(i,n,s){return!n.pretty||n.suppressPrettyCount?"":n.newline},a.prototype.attribute=function(i,n,s){var l;return this.openAttribute(i,n,s),l=" "+i.name+'="'+i.value+'"',this.closeAttribute(i,n,s),l},a.prototype.cdata=function(i,n,s){var l;return this.openNode(i,n,s),n.state=t.OpenTag,l=this.indent(i,n,s)+"<![CDATA[",n.state=t.InsideTag,l+=i.value,n.state=t.CloseTag,l+="]]>"+this.endline(i,n,s),n.state=t.None,this.closeNode(i,n,s),l},a.prototype.comment=function(i,n,s){var l;return this.openNode(i,n,s),n.state=t.OpenTag,l=this.indent(i,n,s)+"<!-- ",n.state=t.InsideTag,l+=i.value,n.state=t.CloseTag,l+=" -->"+this.endline(i,n,s),n.state=t.None,this.closeNode(i,n,s),l},a.prototype.declaration=function(i,n,s){var l;return this.openNode(i,n,s),n.state=t.OpenTag,l=this.indent(i,n,s)+"<?xml",n.state=t.InsideTag,l+=' version="'+i.version+'"',i.encoding!=null&&(l+=' encoding="'+i.encoding+'"'),i.standalone!=null&&(l+=' standalone="'+i.standalone+'"'),n.state=t.CloseTag,l+=n.spaceBeforeSlash+"?>",l+=this.endline(i,n,s),n.state=t.None,this.closeNode(i,n,s),l},a.prototype.docType=function(i,n,s){var l,u,c,d,f;if(s||(s=0),this.openNode(i,n,s),n.state=t.OpenTag,d=this.indent(i,n,s),d+="<!DOCTYPE "+i.root().name,i.pubID&&i.sysID?d+=' PUBLIC "'+i.pubID+'" "'+i.sysID+'"':i.sysID&&(d+=' SYSTEM "'+i.sysID+'"'),i.children.length>0){for(d+=" [",d+=this.endline(i,n,s),n.state=t.InsideTag,f=i.children,u=0,c=f.length;u<c;u++)l=f[u],d+=this.writeChildNode(l,n,s+1);n.state=t.CloseTag,d+="]"}return n.state=t.CloseTag,d+=n.spaceBeforeSlash+">",d+=this.endline(i,n,s),n.state=t.None,this.closeNode(i,n,s),d},a.prototype.element=function(i,n,s){var l,u,c,d,f,m,p,v,g,x,b,_,w,S;s||(s=0),x=!1,b="",this.openNode(i,n,s),n.state=t.OpenTag,b+=this.indent(i,n,s)+"<"+i.name,_=i.attribs;for(g in _)!r.call(_,g)||(l=_[g],b+=this.attribute(l,n,s));if(c=i.children.length,d=c===0?null:i.children[0],c===0||i.children.every(function(D){return(D.type===e.Text||D.type===e.Raw)&&D.value===""}))n.allowEmpty?(b+=">",n.state=t.CloseTag,b+="</"+i.name+">"+this.endline(i,n,s)):(n.state=t.CloseTag,b+=n.spaceBeforeSlash+"/>"+this.endline(i,n,s));else if(n.pretty&&c===1&&(d.type===e.Text||d.type===e.Raw)&&d.value!=null)b+=">",n.state=t.InsideTag,n.suppressPrettyCount++,x=!0,b+=this.writeChildNode(d,n,s+1),n.suppressPrettyCount--,x=!1,n.state=t.CloseTag,b+="</"+i.name+">"+this.endline(i,n,s);else{if(n.dontPrettyTextNodes){for(w=i.children,f=0,p=w.length;f<p;f++)if(u=w[f],(u.type===e.Text||u.type===e.Raw)&&u.value!=null){n.suppressPrettyCount++,x=!0;break}}for(b+=">"+this.endline(i,n,s),n.state=t.InsideTag,S=i.children,m=0,v=S.length;m<v;m++)u=S[m],b+=this.writeChildNode(u,n,s+1);n.state=t.CloseTag,b+=this.indent(i,n,s)+"</"+i.name+">",x&&n.suppressPrettyCount--,b+=this.endline(i,n,s),n.state=t.None}return this.closeNode(i,n,s),b},a.prototype.writeChildNode=function(i,n,s){switch(i.type){case e.CData:return this.cdata(i,n,s);case e.Comment:return this.comment(i,n,s);case e.Element:return this.element(i,n,s);case e.Raw:return this.raw(i,n,s);case e.Text:return this.text(i,n,s);case e.ProcessingInstruction:return this.processingInstruction(i,n,s);case e.Dummy:return"";case e.Declaration:return this.declaration(i,n,s);case e.DocType:return this.docType(i,n,s);case e.AttributeDeclaration:return this.dtdAttList(i,n,s);case e.ElementDeclaration:return this.dtdElement(i,n,s);case e.EntityDeclaration:return this.dtdEntity(i,n,s);case e.NotationDeclaration:return this.dtdNotation(i,n,s);default:throw new Error("Unknown XML node type: "+i.constructor.name)}},a.prototype.processingInstruction=function(i,n,s){var l;return this.openNode(i,n,s),n.state=t.OpenTag,l=this.indent(i,n,s)+"<?",n.state=t.InsideTag,l+=i.target,i.value&&(l+=" "+i.value),n.state=t.CloseTag,l+=n.spaceBeforeSlash+"?>",l+=this.endline(i,n,s),n.state=t.None,this.closeNode(i,n,s),l},a.prototype.raw=function(i,n,s){var l;return this.openNode(i,n,s),n.state=t.OpenTag,l=this.indent(i,n,s),n.state=t.InsideTag,l+=i.value,n.state=t.CloseTag,l+=this.endline(i,n,s),n.state=t.None,this.closeNode(i,n,s),l},a.prototype.text=function(i,n,s){var l;return this.openNode(i,n,s),n.state=t.OpenTag,l=this.indent(i,n,s),n.state=t.InsideTag,l+=i.value,n.state=t.CloseTag,l+=this.endline(i,n,s),n.state=t.None,this.closeNode(i,n,s),l},a.prototype.dtdAttList=function(i,n,s){var l;return this.openNode(i,n,s),n.state=t.OpenTag,l=this.indent(i,n,s)+"<!ATTLIST",n.state=t.InsideTag,l+=" "+i.elementName+" "+i.attributeName+" "+i.attributeType,i.defaultValueType!=="#DEFAULT"&&(l+=" "+i.defaultValueType),i.defaultValue&&(l+=' "'+i.defaultValue+'"'),n.state=t.CloseTag,l+=n.spaceBeforeSlash+">"+this.endline(i,n,s),n.state=t.None,this.closeNode(i,n,s),l},a.prototype.dtdElement=function(i,n,s){var l;return this.openNode(i,n,s),n.state=t.OpenTag,l=this.indent(i,n,s)+"<!ELEMENT",n.state=t.InsideTag,l+=" "+i.name+" "+i.value,n.state=t.CloseTag,l+=n.spaceBeforeSlash+">"+this.endline(i,n,s),n.state=t.None,this.closeNode(i,n,s),l},a.prototype.dtdEntity=function(i,n,s){var l;return this.openNode(i,n,s),n.state=t.OpenTag,l=this.indent(i,n,s)+"<!ENTITY",n.state=t.InsideTag,i.pe&&(l+=" %"),l+=" "+i.name,i.value?l+=' "'+i.value+'"':(i.pubID&&i.sysID?l+=' PUBLIC "'+i.pubID+'" "'+i.sysID+'"':i.sysID&&(l+=' SYSTEM "'+i.sysID+'"'),i.nData&&(l+=" NDATA "+i.nData)),n.state=t.CloseTag,l+=n.spaceBeforeSlash+">"+this.endline(i,n,s),n.state=t.None,this.closeNode(i,n,s),l},a.prototype.dtdNotation=function(i,n,s){var l;return this.openNode(i,n,s),n.state=t.OpenTag,l=this.indent(i,n,s)+"<!NOTATION",n.state=t.InsideTag,l+=" "+i.name,i.pubID&&i.sysID?l+=' PUBLIC "'+i.pubID+'" "'+i.sysID+'"':i.pubID?l+=' PUBLIC "'+i.pubID+'"':i.sysID&&(l+=' SYSTEM "'+i.sysID+'"'),n.state=t.CloseTag,l+=n.spaceBeforeSlash+">"+this.endline(i,n,s),n.state=t.None,this.closeNode(i,n,s),l},a.prototype.openNode=function(i,n,s){},a.prototype.closeNode=function(i,n,s){},a.prototype.openAttribute=function(i,n,s){},a.prototype.closeAttribute=function(i,n,s){},a}()}).call(vt);(function(){var e,t=function(r,a){for(var i in a)o.call(a,i)&&(r[i]=a[i]);function n(){this.constructor=r}return n.prototype=a.prototype,r.prototype=new n,r.__super__=a.prototype,r},o={}.hasOwnProperty;e=kI.exports,_b.exports=function(r){t(a,r);function a(i){a.__super__.constructor.call(this,i)}return a.prototype.document=function(i,n){var s,l,u,c,d;for(n=this.filterOptions(n),c="",d=i.children,l=0,u=d.length;l<u;l++)s=d[l],c+=this.writeChildNode(s,n,0);return n.pretty&&c.slice(-n.newline.length)===n.newline&&(c=c.slice(0,-n.newline.length)),c},a}(e)}).call(vt);(function(){var e,t,o,r,a,i,n,s=function(u,c){for(var d in c)l.call(c,d)&&(u[d]=c[d]);function f(){this.constructor=u}return f.prototype=c.prototype,u.prototype=new f,u.__super__=c.prototype,u},l={}.hasOwnProperty;n=hi.isPlainObject,o=_I.exports,t=ik.exports,r=ms.exports,e=mr.exports,i=NI.exports,a=_b.exports,bI.exports=function(u){s(c,u);function c(d){c.__super__.constructor.call(this,null),this.name="#document",this.type=e.Document,this.documentURI=null,this.domConfig=new t,d||(d={}),d.writer||(d.writer=new a),this.options=d,this.stringify=new i(d)}return Object.defineProperty(c.prototype,"implementation",{value:new o}),Object.defineProperty(c.prototype,"doctype",{get:function(){var d,f,m,p;for(p=this.children,f=0,m=p.length;f<m;f++)if(d=p[f],d.type===e.DocType)return d;return null}}),Object.defineProperty(c.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(c.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(c.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(c.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===e.Declaration?this.children[0].encoding:null}}),Object.defineProperty(c.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===e.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(c.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===e.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(c.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(c.prototype,"origin",{get:function(){return null}}),Object.defineProperty(c.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(c.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(c.prototype,"contentType",{get:function(){return null}}),c.prototype.end=function(d){var f;return f={},d?n(d)&&(f=d,d=this.options.writer):d=this.options.writer,d.document(this,d.filterOptions(f))},c.prototype.toString=function(d){return this.options.writer.document(this,this.options.writer.filterOptions(d))},c.prototype.createElement=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createTextNode=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createComment=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createCDATASection=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createProcessingInstruction=function(d,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createAttribute=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createEntityReference=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementsByTagName=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.importNode=function(d,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createElementNS=function(d,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createAttributeNS=function(d,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementsByTagNameNS=function(d,f){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementById=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.adoptNode=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.renameNode=function(d,f,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.getElementsByClassName=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createEvent=function(d){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createNodeIterator=function(d,f,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},c.prototype.createTreeWalker=function(d,f,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},c}(r)}).call(vt);var dk={exports:{}};(function(){var e,t,o,r,a,i,n,s,l,u,c,d,f,m,p,v,g,x,b,_,w,S,D,M={}.hasOwnProperty;D=hi,w=D.isObject,_=D.isFunction,S=D.isPlainObject,b=D.getValue,e=mr.exports,d=bI.exports,f=yI.exports,r=wI.exports,a=EI.exports,p=PI.exports,x=FI.exports,m=MI.exports,u=SI.exports,c=II.exports,i=AI.exports,s=TI.exports,n=DI.exports,l=OI.exports,o=xI.exports,g=NI.exports,v=_b.exports,t=Fh.exports,dk.exports=function(){function O(T,I,N){var P;this.name="?xml",this.type=e.Document,T||(T={}),P={},T.writer?S(T.writer)&&(P=T.writer,T.writer=new v):T.writer=new v,this.options=T,this.writer=T.writer,this.writerOptions=this.writer.filterOptions(P),this.stringify=new g(T),this.onDataCallback=I||function(){},this.onEndCallback=N||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return O.prototype.createChildNode=function(T){var I,N,P,F,L,z,H,X;switch(T.type){case e.CData:this.cdata(T.value);break;case e.Comment:this.comment(T.value);break;case e.Element:P={},H=T.attribs;for(N in H)!M.call(H,N)||(I=H[N],P[N]=I.value);this.node(T.name,P);break;case e.Dummy:this.dummy();break;case e.Raw:this.raw(T.value);break;case e.Text:this.text(T.value);break;case e.ProcessingInstruction:this.instruction(T.target,T.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+T.constructor.name)}for(X=T.children,L=0,z=X.length;L<z;L++)F=X[L],this.createChildNode(F),F.type===e.Element&&this.up();return this},O.prototype.dummy=function(){return this},O.prototype.node=function(T,I,N){var P;if(T==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(T));return this.openCurrent(),T=b(T),I==null&&(I={}),I=b(I),w(I)||(P=[I,N],N=P[0],I=P[1]),this.currentNode=new f(this,T,I),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,N!=null&&this.text(N),this},O.prototype.element=function(T,I,N){var P,F,L,z,H,X;if(this.currentNode&&this.currentNode.type===e.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(T)||w(T)||_(T))for(z=this.options.noValidation,this.options.noValidation=!0,X=new d(this.options).element("TEMP_ROOT"),X.element(T),this.options.noValidation=z,H=X.children,F=0,L=H.length;F<L;F++)P=H[F],this.createChildNode(P),P.type===e.Element&&this.up();else this.node(T,I,N);return this},O.prototype.attribute=function(T,I){var N,P;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(T));if(T!=null&&(T=b(T)),w(T))for(N in T)!M.call(T,N)||(P=T[N],this.attribute(N,P));else _(I)&&(I=I.apply()),this.options.keepNullAttributes&&I==null?this.currentNode.attribs[T]=new o(this,T,""):I!=null&&(this.currentNode.attribs[T]=new o(this,T,I));return this},O.prototype.text=function(T){var I;return this.openCurrent(),I=new x(this,T),this.onData(this.writer.text(I,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.cdata=function(T){var I;return this.openCurrent(),I=new r(this,T),this.onData(this.writer.cdata(I,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.comment=function(T){var I;return this.openCurrent(),I=new a(this,T),this.onData(this.writer.comment(I,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.raw=function(T){var I;return this.openCurrent(),I=new p(this,T),this.onData(this.writer.raw(I,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.instruction=function(T,I){var N,P,F,L,z;if(this.openCurrent(),T!=null&&(T=b(T)),I!=null&&(I=b(I)),Array.isArray(T))for(N=0,L=T.length;N<L;N++)P=T[N],this.instruction(P);else if(w(T))for(P in T)!M.call(T,P)||(F=T[P],this.instruction(P,F));else _(I)&&(I=I.apply()),z=new m(this,T,I),this.onData(this.writer.processingInstruction(z,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},O.prototype.declaration=function(T,I,N){var P;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return P=new u(this,T,I,N),this.onData(this.writer.declaration(P,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.doctype=function(T,I,N){if(this.openCurrent(),T==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new c(this,I,N),this.currentNode.rootNodeName=T,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},O.prototype.dtdElement=function(T,I){var N;return this.openCurrent(),N=new n(this,T,I),this.onData(this.writer.dtdElement(N,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.attList=function(T,I,N,P,F){var L;return this.openCurrent(),L=new i(this,T,I,N,P,F),this.onData(this.writer.dtdAttList(L,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.entity=function(T,I){var N;return this.openCurrent(),N=new s(this,!1,T,I),this.onData(this.writer.dtdEntity(N,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.pEntity=function(T,I){var N;return this.openCurrent(),N=new s(this,!0,T,I),this.onData(this.writer.dtdEntity(N,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.notation=function(T,I){var N;return this.openCurrent(),N=new l(this,T,I),this.onData(this.writer.dtdNotation(N,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},O.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},O.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},O.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},O.prototype.openNode=function(T){var I,N,P,F;if(!T.isOpen){if(!this.root&&this.currentLevel===0&&T.type===e.Element&&(this.root=T),N="",T.type===e.Element){this.writerOptions.state=t.OpenTag,N=this.writer.indent(T,this.writerOptions,this.currentLevel)+"<"+T.name,F=T.attribs;for(P in F)!M.call(F,P)||(I=F[P],N+=this.writer.attribute(I,this.writerOptions,this.currentLevel));N+=(T.children?">":"/>")+this.writer.endline(T,this.writerOptions,this.currentLevel),this.writerOptions.state=t.InsideTag}else this.writerOptions.state=t.OpenTag,N=this.writer.indent(T,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+T.rootNodeName,T.pubID&&T.sysID?N+=' PUBLIC "'+T.pubID+'" "'+T.sysID+'"':T.sysID&&(N+=' SYSTEM "'+T.sysID+'"'),T.children?(N+=" [",this.writerOptions.state=t.InsideTag):(this.writerOptions.state=t.CloseTag,N+=">"),N+=this.writer.endline(T,this.writerOptions,this.currentLevel);return this.onData(N,this.currentLevel),T.isOpen=!0}},O.prototype.closeNode=function(T){var I;if(!T.isClosed)return I="",this.writerOptions.state=t.CloseTag,T.type===e.Element?I=this.writer.indent(T,this.writerOptions,this.currentLevel)+"</"+T.name+">"+this.writer.endline(T,this.writerOptions,this.currentLevel):I=this.writer.indent(T,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(T,this.writerOptions,this.currentLevel),this.writerOptions.state=t.None,this.onData(I,this.currentLevel),T.isClosed=!0},O.prototype.onData=function(T,I){return this.documentStarted=!0,this.onDataCallback(T,I+1)},O.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},O.prototype.debugInfo=function(T){return T==null?"":"node: <"+T+">"},O.prototype.ele=function(){return this.element.apply(this,arguments)},O.prototype.nod=function(T,I,N){return this.node(T,I,N)},O.prototype.txt=function(T){return this.text(T)},O.prototype.dat=function(T){return this.cdata(T)},O.prototype.com=function(T){return this.comment(T)},O.prototype.ins=function(T,I){return this.instruction(T,I)},O.prototype.dec=function(T,I,N){return this.declaration(T,I,N)},O.prototype.dtd=function(T,I,N){return this.doctype(T,I,N)},O.prototype.e=function(T,I,N){return this.element(T,I,N)},O.prototype.n=function(T,I,N){return this.node(T,I,N)},O.prototype.t=function(T){return this.text(T)},O.prototype.d=function(T){return this.cdata(T)},O.prototype.c=function(T){return this.comment(T)},O.prototype.r=function(T){return this.raw(T)},O.prototype.i=function(T,I){return this.instruction(T,I)},O.prototype.att=function(){return this.currentNode&&this.currentNode.type===e.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},O.prototype.a=function(){return this.currentNode&&this.currentNode.type===e.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},O.prototype.ent=function(T,I){return this.entity(T,I)},O.prototype.pent=function(T,I){return this.pEntity(T,I)},O.prototype.not=function(T,I){return this.notation(T,I)},O}()}).call(vt);var fk={exports:{}};(function(){var e,t,o,r=function(i,n){for(var s in n)a.call(n,s)&&(i[s]=n[s]);function l(){this.constructor=i}return l.prototype=n.prototype,i.prototype=new l,i.__super__=n.prototype,i},a={}.hasOwnProperty;e=mr.exports,o=kI.exports,t=Fh.exports,fk.exports=function(i){r(n,i);function n(s,l){this.stream=s,n.__super__.constructor.call(this,l)}return n.prototype.endline=function(s,l,u){return s.isLastRootNode&&l.state===t.CloseTag?"":n.__super__.endline.call(this,s,l,u)},n.prototype.document=function(s,l){var u,c,d,f,m,p,v,g,x;for(v=s.children,c=d=0,m=v.length;d<m;c=++d)u=v[c],u.isLastRootNode=c===s.children.length-1;for(l=this.filterOptions(l),g=s.children,x=[],f=0,p=g.length;f<p;f++)u=g[f],x.push(this.writeChildNode(u,l,0));return x},n.prototype.attribute=function(s,l,u){return this.stream.write(n.__super__.attribute.call(this,s,l,u))},n.prototype.cdata=function(s,l,u){return this.stream.write(n.__super__.cdata.call(this,s,l,u))},n.prototype.comment=function(s,l,u){return this.stream.write(n.__super__.comment.call(this,s,l,u))},n.prototype.declaration=function(s,l,u){return this.stream.write(n.__super__.declaration.call(this,s,l,u))},n.prototype.docType=function(s,l,u){var c,d,f,m;if(u||(u=0),this.openNode(s,l,u),l.state=t.OpenTag,this.stream.write(this.indent(s,l,u)),this.stream.write("<!DOCTYPE "+s.root().name),s.pubID&&s.sysID?this.stream.write(' PUBLIC "'+s.pubID+'" "'+s.sysID+'"'):s.sysID&&this.stream.write(' SYSTEM "'+s.sysID+'"'),s.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(s,l,u)),l.state=t.InsideTag,m=s.children,d=0,f=m.length;d<f;d++)c=m[d],this.writeChildNode(c,l,u+1);l.state=t.CloseTag,this.stream.write("]")}return l.state=t.CloseTag,this.stream.write(l.spaceBeforeSlash+">"),this.stream.write(this.endline(s,l,u)),l.state=t.None,this.closeNode(s,l,u)},n.prototype.element=function(s,l,u){var c,d,f,m,p,v,g,x,b;u||(u=0),this.openNode(s,l,u),l.state=t.OpenTag,this.stream.write(this.indent(s,l,u)+"<"+s.name),x=s.attribs;for(g in x)!a.call(x,g)||(c=x[g],this.attribute(c,l,u));if(f=s.children.length,m=f===0?null:s.children[0],f===0||s.children.every(function(_){return(_.type===e.Text||_.type===e.Raw)&&_.value===""}))l.allowEmpty?(this.stream.write(">"),l.state=t.CloseTag,this.stream.write("</"+s.name+">")):(l.state=t.CloseTag,this.stream.write(l.spaceBeforeSlash+"/>"));else if(l.pretty&&f===1&&(m.type===e.Text||m.type===e.Raw)&&m.value!=null)this.stream.write(">"),l.state=t.InsideTag,l.suppressPrettyCount++,this.writeChildNode(m,l,u+1),l.suppressPrettyCount--,l.state=t.CloseTag,this.stream.write("</"+s.name+">");else{for(this.stream.write(">"+this.endline(s,l,u)),l.state=t.InsideTag,b=s.children,p=0,v=b.length;p<v;p++)d=b[p],this.writeChildNode(d,l,u+1);l.state=t.CloseTag,this.stream.write(this.indent(s,l,u)+"</"+s.name+">")}return this.stream.write(this.endline(s,l,u)),l.state=t.None,this.closeNode(s,l,u)},n.prototype.processingInstruction=function(s,l,u){return this.stream.write(n.__super__.processingInstruction.call(this,s,l,u))},n.prototype.raw=function(s,l,u){return this.stream.write(n.__super__.raw.call(this,s,l,u))},n.prototype.text=function(s,l,u){return this.stream.write(n.__super__.text.call(this,s,l,u))},n.prototype.dtdAttList=function(s,l,u){return this.stream.write(n.__super__.dtdAttList.call(this,s,l,u))},n.prototype.dtdElement=function(s,l,u){return this.stream.write(n.__super__.dtdElement.call(this,s,l,u))},n.prototype.dtdEntity=function(s,l,u){return this.stream.write(n.__super__.dtdEntity.call(this,s,l,u))},n.prototype.dtdNotation=function(s,l,u){return this.stream.write(n.__super__.dtdNotation.call(this,s,l,u))},n}(o)}).call(vt);(function(){var e,t,o,r,a,i,n,s,l,u;u=hi,s=u.assign,l=u.isFunction,o=_I.exports,r=bI.exports,a=dk.exports,n=_b.exports,i=fk.exports,e=mr.exports,t=Fh.exports,Pc.create=function(c,d,f,m){var p,v;if(c==null)throw new Error("Root element needs a name.");return m=s({},d,f,m),p=new r(m),v=p.element(c),m.headless||(p.declaration(m),(m.pubID!=null||m.sysID!=null)&&p.dtd(m)),v},Pc.begin=function(c,d,f){var m;return l(c)&&(m=[c,d],d=m[0],f=m[1],c={}),d?new a(c,d,f):new r(c)},Pc.stringWriter=function(c){return new n(c)},Pc.streamWriter=function(c,d){return new i(c,d)},Pc.implementation=new o,Pc.nodeType=e,Pc.writerState=t}).call(vt);(function(){var e,t,o,r,a,i={}.hasOwnProperty;e=Pc,t=gb.defaults,r=function(n){return typeof n=="string"&&(n.indexOf("&")>=0||n.indexOf(">")>=0||n.indexOf("<")>=0)},a=function(n){return"<![CDATA["+o(n)+"]]>"},o=function(n){return n.replace("]]>","]]]]><![CDATA[>")},rk.Builder=function(){function n(s){var l,u,c;this.options={},u=t["0.2"];for(l in u)!i.call(u,l)||(c=u[l],this.options[l]=c);for(l in s)!i.call(s,l)||(c=s[l],this.options[l]=c)}return n.prototype.buildObject=function(s){var l,u,c,d,f;return l=this.options.attrkey,u=this.options.charkey,Object.keys(s).length===1&&this.options.rootName===t["0.2"].rootName?(f=Object.keys(s)[0],s=s[f]):f=this.options.rootName,c=function(m){return function(p,v){var g,x,b,_,w,S;if(typeof v!="object")m.options.cdata&&r(v)?p.raw(a(v)):p.txt(v);else if(Array.isArray(v)){for(_ in v)if(!!i.call(v,_)){x=v[_];for(w in x)b=x[w],p=c(p.ele(w),b).up()}}else for(w in v)if(!!i.call(v,w))if(x=v[w],w===l){if(typeof x=="object")for(g in x)S=x[g],p=p.att(g,S)}else if(w===u)m.options.cdata&&r(x)?p=p.raw(a(x)):p=p.txt(x);else if(Array.isArray(x))for(_ in x)!i.call(x,_)||(b=x[_],typeof b=="string"?m.options.cdata&&r(b)?p=p.ele(w).raw(a(b)).up():p=p.ele(w,b).up():p=c(p.ele(w),b).up());else typeof x=="object"?p=c(p.ele(w),x).up():typeof x=="string"&&m.options.cdata&&r(x)?p=p.ele(w).raw(a(x)).up():(x==null&&(x=""),p=p.ele(w,x.toString()).up());return p}}(this),d=e.create(f,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),c(d,s).end(this.options.renderOpts)},n}()}).call(vt);var mk={},pk={},hk={},XC={exports:{}},vk={},bb={};bb.byteLength=Jpe;bb.toByteArray=ehe;bb.fromByteArray=ahe;var Zs=[],Jn=[],Kpe=typeof Uint8Array!="undefined"?Uint8Array:Array,Ly="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Mf=0,Ype=Ly.length;Mf<Ype;++Mf)Zs[Mf]=Ly[Mf],Jn[Ly.charCodeAt(Mf)]=Mf;Jn["-".charCodeAt(0)]=62;Jn["_".charCodeAt(0)]=63;function gk(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=e.indexOf("=");o===-1&&(o=t);var r=o===t?0:4-o%4;return[o,r]}function Jpe(e){var t=gk(e),o=t[0],r=t[1];return(o+r)*3/4-r}function Zpe(e,t,o){return(t+o)*3/4-o}function ehe(e){var t,o=gk(e),r=o[0],a=o[1],i=new Kpe(Zpe(e,r,a)),n=0,s=a>0?r-4:r,l;for(l=0;l<s;l+=4)t=Jn[e.charCodeAt(l)]<<18|Jn[e.charCodeAt(l+1)]<<12|Jn[e.charCodeAt(l+2)]<<6|Jn[e.charCodeAt(l+3)],i[n++]=t>>16&255,i[n++]=t>>8&255,i[n++]=t&255;return a===2&&(t=Jn[e.charCodeAt(l)]<<2|Jn[e.charCodeAt(l+1)]>>4,i[n++]=t&255),a===1&&(t=Jn[e.charCodeAt(l)]<<10|Jn[e.charCodeAt(l+1)]<<4|Jn[e.charCodeAt(l+2)]>>2,i[n++]=t>>8&255,i[n++]=t&255),i}function the(e){return Zs[e>>18&63]+Zs[e>>12&63]+Zs[e>>6&63]+Zs[e&63]}function ohe(e,t,o){for(var r,a=[],i=t;i<o;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),a.push(the(r));return a.join("")}function ahe(e){for(var t,o=e.length,r=o%3,a=[],i=16383,n=0,s=o-r;n<s;n+=i)a.push(ohe(e,n,n+i>s?s:n+i));return r===1?(t=e[o-1],a.push(Zs[t>>2]+Zs[t<<4&63]+"==")):r===2&&(t=(e[o-2]<<8)+e[o-1],a.push(Zs[t>>10]+Zs[t>>4&63]+Zs[t<<2&63]+"=")),a.join("")}var RI={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */RI.read=function(e,t,o,r,a){var i,n,s=a*8-r-1,l=(1<<s)-1,u=l>>1,c=-7,d=o?a-1:0,f=o?-1:1,m=e[t+d];for(d+=f,i=m&(1<<-c)-1,m>>=-c,c+=s;c>0;i=i*256+e[t+d],d+=f,c-=8);for(n=i&(1<<-c)-1,i>>=-c,c+=r;c>0;n=n*256+e[t+d],d+=f,c-=8);if(i===0)i=1-u;else{if(i===l)return n?NaN:(m?-1:1)*(1/0);n=n+Math.pow(2,r),i=i-u}return(m?-1:1)*n*Math.pow(2,i-r)};RI.write=function(e,t,o,r,a,i){var n,s,l,u=i*8-a-1,c=(1<<u)-1,d=c>>1,f=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=r?0:i-1,p=r?1:-1,v=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,n=c):(n=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-n))<1&&(n--,l*=2),n+d>=1?t+=f/l:t+=f*Math.pow(2,1-d),t*l>=2&&(n++,l/=2),n+d>=c?(s=0,n=c):n+d>=1?(s=(t*l-1)*Math.pow(2,a),n=n+d):(s=t*Math.pow(2,d-1)*Math.pow(2,a),n=0));a>=8;e[o+m]=s&255,m+=p,s/=256,a-=8);for(n=n<<a|s,u+=a;u>0;e[o+m]=n&255,m+=p,n/=256,u-=8);e[o+m-p]|=v*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){var t=bb,o=RI,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=b,e.INSPECT_MAX_BYTES=50;var a=2147483647;e.kMaxLength=a,s.TYPED_ARRAY_SUPPORT=i(),!s.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{var Q=new Uint8Array(1),V={foo:function(){return 42}};return Object.setPrototypeOf(V,Uint8Array.prototype),Object.setPrototypeOf(Q,V),Q.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.byteOffset}});function n(Q){if(Q>a)throw new RangeError('The value "'+Q+'" is invalid for option "size"');var V=new Uint8Array(Q);return Object.setPrototypeOf(V,s.prototype),V}function s(Q,V,R){if(typeof Q=="number"){if(typeof V=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(Q)}return l(Q,V,R)}s.poolSize=8192;function l(Q,V,R){if(typeof Q=="string")return f(Q,V);if(ArrayBuffer.isView(Q))return p(Q);if(Q==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Q);if(U(Q,ArrayBuffer)||Q&&U(Q.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(U(Q,SharedArrayBuffer)||Q&&U(Q.buffer,SharedArrayBuffer)))return v(Q,V,R);if(typeof Q=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ee=Q.valueOf&&Q.valueOf();if(ee!=null&&ee!==Q)return s.from(ee,V,R);var ce=g(Q);if(ce)return ce;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof Q[Symbol.toPrimitive]=="function")return s.from(Q[Symbol.toPrimitive]("string"),V,R);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Q)}s.from=function(Q,V,R){return l(Q,V,R)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function u(Q){if(typeof Q!="number")throw new TypeError('"size" argument must be of type number');if(Q<0)throw new RangeError('The value "'+Q+'" is invalid for option "size"')}function c(Q,V,R){return u(Q),Q<=0?n(Q):V!==void 0?typeof R=="string"?n(Q).fill(V,R):n(Q).fill(V):n(Q)}s.alloc=function(Q,V,R){return c(Q,V,R)};function d(Q){return u(Q),n(Q<0?0:x(Q)|0)}s.allocUnsafe=function(Q){return d(Q)},s.allocUnsafeSlow=function(Q){return d(Q)};function f(Q,V){if((typeof V!="string"||V==="")&&(V="utf8"),!s.isEncoding(V))throw new TypeError("Unknown encoding: "+V);var R=_(Q,V)|0,ee=n(R),ce=ee.write(Q,V);return ce!==R&&(ee=ee.slice(0,ce)),ee}function m(Q){for(var V=Q.length<0?0:x(Q.length)|0,R=n(V),ee=0;ee<V;ee+=1)R[ee]=Q[ee]&255;return R}function p(Q){if(U(Q,Uint8Array)){var V=new Uint8Array(Q);return v(V.buffer,V.byteOffset,V.byteLength)}return m(Q)}function v(Q,V,R){if(V<0||Q.byteLength<V)throw new RangeError('"offset" is outside of buffer bounds');if(Q.byteLength<V+(R||0))throw new RangeError('"length" is outside of buffer bounds');var ee;return V===void 0&&R===void 0?ee=new Uint8Array(Q):R===void 0?ee=new Uint8Array(Q,V):ee=new Uint8Array(Q,V,R),Object.setPrototypeOf(ee,s.prototype),ee}function g(Q){if(s.isBuffer(Q)){var V=x(Q.length)|0,R=n(V);return R.length===0||Q.copy(R,0,0,V),R}if(Q.length!==void 0)return typeof Q.length!="number"||Z(Q.length)?n(0):m(Q);if(Q.type==="Buffer"&&Array.isArray(Q.data))return m(Q.data)}function x(Q){if(Q>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return Q|0}function b(Q){return+Q!=Q&&(Q=0),s.alloc(+Q)}s.isBuffer=function(V){return V!=null&&V._isBuffer===!0&&V!==s.prototype},s.compare=function(V,R){if(U(V,Uint8Array)&&(V=s.from(V,V.offset,V.byteLength)),U(R,Uint8Array)&&(R=s.from(R,R.offset,R.byteLength)),!s.isBuffer(V)||!s.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(V===R)return 0;for(var ee=V.length,ce=R.length,se=0,pe=Math.min(ee,ce);se<pe;++se)if(V[se]!==R[se]){ee=V[se],ce=R[se];break}return ee<ce?-1:ce<ee?1:0},s.isEncoding=function(V){switch(String(V).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(V,R){if(!Array.isArray(V))throw new TypeError('"list" argument must be an Array of Buffers');if(V.length===0)return s.alloc(0);var ee;if(R===void 0)for(R=0,ee=0;ee<V.length;++ee)R+=V[ee].length;var ce=s.allocUnsafe(R),se=0;for(ee=0;ee<V.length;++ee){var pe=V[ee];if(U(pe,Uint8Array))se+pe.length>ce.length?s.from(pe).copy(ce,se):Uint8Array.prototype.set.call(ce,pe,se);else if(s.isBuffer(pe))pe.copy(ce,se);else throw new TypeError('"list" argument must be an Array of Buffers');se+=pe.length}return ce};function _(Q,V){if(s.isBuffer(Q))return Q.length;if(ArrayBuffer.isView(Q)||U(Q,ArrayBuffer))return Q.byteLength;if(typeof Q!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Q);var R=Q.length,ee=arguments.length>2&&arguments[2]===!0;if(!ee&&R===0)return 0;for(var ce=!1;;)switch(V){case"ascii":case"latin1":case"binary":return R;case"utf8":case"utf-8":return De(Q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R*2;case"hex":return R>>>1;case"base64":return q(Q).length;default:if(ce)return ee?-1:De(Q).length;V=(""+V).toLowerCase(),ce=!0}}s.byteLength=_;function w(Q,V,R){var ee=!1;if((V===void 0||V<0)&&(V=0),V>this.length||((R===void 0||R>this.length)&&(R=this.length),R<=0)||(R>>>=0,V>>>=0,R<=V))return"";for(Q||(Q="utf8");;)switch(Q){case"hex":return de(this,V,R);case"utf8":case"utf-8":return L(this,V,R);case"ascii":return X(this,V,R);case"latin1":case"binary":return Y(this,V,R);case"base64":return F(this,V,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,V,R);default:if(ee)throw new TypeError("Unknown encoding: "+Q);Q=(Q+"").toLowerCase(),ee=!0}}s.prototype._isBuffer=!0;function S(Q,V,R){var ee=Q[V];Q[V]=Q[R],Q[R]=ee}s.prototype.swap16=function(){var V=this.length;if(V%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var R=0;R<V;R+=2)S(this,R,R+1);return this},s.prototype.swap32=function(){var V=this.length;if(V%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var R=0;R<V;R+=4)S(this,R,R+3),S(this,R+1,R+2);return this},s.prototype.swap64=function(){var V=this.length;if(V%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var R=0;R<V;R+=8)S(this,R,R+7),S(this,R+1,R+6),S(this,R+2,R+5),S(this,R+3,R+4);return this},s.prototype.toString=function(){var V=this.length;return V===0?"":arguments.length===0?L(this,0,V):w.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(V){if(!s.isBuffer(V))throw new TypeError("Argument must be a Buffer");return this===V?!0:s.compare(this,V)===0},s.prototype.inspect=function(){var V="",R=e.INSPECT_MAX_BYTES;return V=this.toString("hex",0,R).replace(/(.{2})/g,"$1 ").trim(),this.length>R&&(V+=" ... "),"<Buffer "+V+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(V,R,ee,ce,se){if(U(V,Uint8Array)&&(V=s.from(V,V.offset,V.byteLength)),!s.isBuffer(V))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof V);if(R===void 0&&(R=0),ee===void 0&&(ee=V?V.length:0),ce===void 0&&(ce=0),se===void 0&&(se=this.length),R<0||ee>V.length||ce<0||se>this.length)throw new RangeError("out of range index");if(ce>=se&&R>=ee)return 0;if(ce>=se)return-1;if(R>=ee)return 1;if(R>>>=0,ee>>>=0,ce>>>=0,se>>>=0,this===V)return 0;for(var pe=se-ce,we=ee-R,Ne=Math.min(pe,we),Ge=this.slice(ce,se),Ze=V.slice(R,ee),ot=0;ot<Ne;++ot)if(Ge[ot]!==Ze[ot]){pe=Ge[ot],we=Ze[ot];break}return pe<we?-1:we<pe?1:0};function D(Q,V,R,ee,ce){if(Q.length===0)return-1;if(typeof R=="string"?(ee=R,R=0):R>2147483647?R=2147483647:R<-2147483648&&(R=-2147483648),R=+R,Z(R)&&(R=ce?0:Q.length-1),R<0&&(R=Q.length+R),R>=Q.length){if(ce)return-1;R=Q.length-1}else if(R<0)if(ce)R=0;else return-1;if(typeof V=="string"&&(V=s.from(V,ee)),s.isBuffer(V))return V.length===0?-1:M(Q,V,R,ee,ce);if(typeof V=="number")return V=V&255,typeof Uint8Array.prototype.indexOf=="function"?ce?Uint8Array.prototype.indexOf.call(Q,V,R):Uint8Array.prototype.lastIndexOf.call(Q,V,R):M(Q,[V],R,ee,ce);throw new TypeError("val must be string, number or Buffer")}function M(Q,V,R,ee,ce){var se=1,pe=Q.length,we=V.length;if(ee!==void 0&&(ee=String(ee).toLowerCase(),ee==="ucs2"||ee==="ucs-2"||ee==="utf16le"||ee==="utf-16le")){if(Q.length<2||V.length<2)return-1;se=2,pe/=2,we/=2,R/=2}function Ne($t,fo){return se===1?$t[fo]:$t.readUInt16BE(fo*se)}var Ge;if(ce){var Ze=-1;for(Ge=R;Ge<pe;Ge++)if(Ne(Q,Ge)===Ne(V,Ze===-1?0:Ge-Ze)){if(Ze===-1&&(Ze=Ge),Ge-Ze+1===we)return Ze*se}else Ze!==-1&&(Ge-=Ge-Ze),Ze=-1}else for(R+we>pe&&(R=pe-we),Ge=R;Ge>=0;Ge--){for(var ot=!0,Pt=0;Pt<we;Pt++)if(Ne(Q,Ge+Pt)!==Ne(V,Pt)){ot=!1;break}if(ot)return Ge}return-1}s.prototype.includes=function(V,R,ee){return this.indexOf(V,R,ee)!==-1},s.prototype.indexOf=function(V,R,ee){return D(this,V,R,ee,!0)},s.prototype.lastIndexOf=function(V,R,ee){return D(this,V,R,ee,!1)};function O(Q,V,R,ee){R=Number(R)||0;var ce=Q.length-R;ee?(ee=Number(ee),ee>ce&&(ee=ce)):ee=ce;var se=V.length;ee>se/2&&(ee=se/2);for(var pe=0;pe<ee;++pe){var we=parseInt(V.substr(pe*2,2),16);if(Z(we))return pe;Q[R+pe]=we}return pe}function T(Q,V,R,ee){return ne(De(V,Q.length-R),Q,R,ee)}function I(Q,V,R,ee){return ne(Te(V),Q,R,ee)}function N(Q,V,R,ee){return ne(q(V),Q,R,ee)}function P(Q,V,R,ee){return ne(J(V,Q.length-R),Q,R,ee)}s.prototype.write=function(V,R,ee,ce){if(R===void 0)ce="utf8",ee=this.length,R=0;else if(ee===void 0&&typeof R=="string")ce=R,ee=this.length,R=0;else if(isFinite(R))R=R>>>0,isFinite(ee)?(ee=ee>>>0,ce===void 0&&(ce="utf8")):(ce=ee,ee=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var se=this.length-R;if((ee===void 0||ee>se)&&(ee=se),V.length>0&&(ee<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");ce||(ce="utf8");for(var pe=!1;;)switch(ce){case"hex":return O(this,V,R,ee);case"utf8":case"utf-8":return T(this,V,R,ee);case"ascii":case"latin1":case"binary":return I(this,V,R,ee);case"base64":return N(this,V,R,ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,V,R,ee);default:if(pe)throw new TypeError("Unknown encoding: "+ce);ce=(""+ce).toLowerCase(),pe=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function F(Q,V,R){return V===0&&R===Q.length?t.fromByteArray(Q):t.fromByteArray(Q.slice(V,R))}function L(Q,V,R){R=Math.min(Q.length,R);for(var ee=[],ce=V;ce<R;){var se=Q[ce],pe=null,we=se>239?4:se>223?3:se>191?2:1;if(ce+we<=R){var Ne,Ge,Ze,ot;switch(we){case 1:se<128&&(pe=se);break;case 2:Ne=Q[ce+1],(Ne&192)===128&&(ot=(se&31)<<6|Ne&63,ot>127&&(pe=ot));break;case 3:Ne=Q[ce+1],Ge=Q[ce+2],(Ne&192)===128&&(Ge&192)===128&&(ot=(se&15)<<12|(Ne&63)<<6|Ge&63,ot>2047&&(ot<55296||ot>57343)&&(pe=ot));break;case 4:Ne=Q[ce+1],Ge=Q[ce+2],Ze=Q[ce+3],(Ne&192)===128&&(Ge&192)===128&&(Ze&192)===128&&(ot=(se&15)<<18|(Ne&63)<<12|(Ge&63)<<6|Ze&63,ot>65535&&ot<1114112&&(pe=ot))}}pe===null?(pe=65533,we=1):pe>65535&&(pe-=65536,ee.push(pe>>>10&1023|55296),pe=56320|pe&1023),ee.push(pe),ce+=we}return H(ee)}var z=4096;function H(Q){var V=Q.length;if(V<=z)return String.fromCharCode.apply(String,Q);for(var R="",ee=0;ee<V;)R+=String.fromCharCode.apply(String,Q.slice(ee,ee+=z));return R}function X(Q,V,R){var ee="";R=Math.min(Q.length,R);for(var ce=V;ce<R;++ce)ee+=String.fromCharCode(Q[ce]&127);return ee}function Y(Q,V,R){var ee="";R=Math.min(Q.length,R);for(var ce=V;ce<R;++ce)ee+=String.fromCharCode(Q[ce]);return ee}function de(Q,V,R){var ee=Q.length;(!V||V<0)&&(V=0),(!R||R<0||R>ee)&&(R=ee);for(var ce="",se=V;se<R;++se)ce+=Ce[Q[se]];return ce}function ye(Q,V,R){for(var ee=Q.slice(V,R),ce="",se=0;se<ee.length-1;se+=2)ce+=String.fromCharCode(ee[se]+ee[se+1]*256);return ce}s.prototype.slice=function(V,R){var ee=this.length;V=~~V,R=R===void 0?ee:~~R,V<0?(V+=ee,V<0&&(V=0)):V>ee&&(V=ee),R<0?(R+=ee,R<0&&(R=0)):R>ee&&(R=ee),R<V&&(R=V);var ce=this.subarray(V,R);return Object.setPrototypeOf(ce,s.prototype),ce};function W(Q,V,R){if(Q%1!==0||Q<0)throw new RangeError("offset is not uint");if(Q+V>R)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(V,R,ee){V=V>>>0,R=R>>>0,ee||W(V,R,this.length);for(var ce=this[V],se=1,pe=0;++pe<R&&(se*=256);)ce+=this[V+pe]*se;return ce},s.prototype.readUintBE=s.prototype.readUIntBE=function(V,R,ee){V=V>>>0,R=R>>>0,ee||W(V,R,this.length);for(var ce=this[V+--R],se=1;R>0&&(se*=256);)ce+=this[V+--R]*se;return ce},s.prototype.readUint8=s.prototype.readUInt8=function(V,R){return V=V>>>0,R||W(V,1,this.length),this[V]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(V,R){return V=V>>>0,R||W(V,2,this.length),this[V]|this[V+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(V,R){return V=V>>>0,R||W(V,2,this.length),this[V]<<8|this[V+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(V,R){return V=V>>>0,R||W(V,4,this.length),(this[V]|this[V+1]<<8|this[V+2]<<16)+this[V+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(V,R){return V=V>>>0,R||W(V,4,this.length),this[V]*16777216+(this[V+1]<<16|this[V+2]<<8|this[V+3])},s.prototype.readIntLE=function(V,R,ee){V=V>>>0,R=R>>>0,ee||W(V,R,this.length);for(var ce=this[V],se=1,pe=0;++pe<R&&(se*=256);)ce+=this[V+pe]*se;return se*=128,ce>=se&&(ce-=Math.pow(2,8*R)),ce},s.prototype.readIntBE=function(V,R,ee){V=V>>>0,R=R>>>0,ee||W(V,R,this.length);for(var ce=R,se=1,pe=this[V+--ce];ce>0&&(se*=256);)pe+=this[V+--ce]*se;return se*=128,pe>=se&&(pe-=Math.pow(2,8*R)),pe},s.prototype.readInt8=function(V,R){return V=V>>>0,R||W(V,1,this.length),this[V]&128?(255-this[V]+1)*-1:this[V]},s.prototype.readInt16LE=function(V,R){V=V>>>0,R||W(V,2,this.length);var ee=this[V]|this[V+1]<<8;return ee&32768?ee|4294901760:ee},s.prototype.readInt16BE=function(V,R){V=V>>>0,R||W(V,2,this.length);var ee=this[V+1]|this[V]<<8;return ee&32768?ee|4294901760:ee},s.prototype.readInt32LE=function(V,R){return V=V>>>0,R||W(V,4,this.length),this[V]|this[V+1]<<8|this[V+2]<<16|this[V+3]<<24},s.prototype.readInt32BE=function(V,R){return V=V>>>0,R||W(V,4,this.length),this[V]<<24|this[V+1]<<16|this[V+2]<<8|this[V+3]},s.prototype.readFloatLE=function(V,R){return V=V>>>0,R||W(V,4,this.length),o.read(this,V,!0,23,4)},s.prototype.readFloatBE=function(V,R){return V=V>>>0,R||W(V,4,this.length),o.read(this,V,!1,23,4)},s.prototype.readDoubleLE=function(V,R){return V=V>>>0,R||W(V,8,this.length),o.read(this,V,!0,52,8)},s.prototype.readDoubleBE=function(V,R){return V=V>>>0,R||W(V,8,this.length),o.read(this,V,!1,52,8)};function re(Q,V,R,ee,ce,se){if(!s.isBuffer(Q))throw new TypeError('"buffer" argument must be a Buffer instance');if(V>ce||V<se)throw new RangeError('"value" argument is out of bounds');if(R+ee>Q.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(V,R,ee,ce){if(V=+V,R=R>>>0,ee=ee>>>0,!ce){var se=Math.pow(2,8*ee)-1;re(this,V,R,ee,se,0)}var pe=1,we=0;for(this[R]=V&255;++we<ee&&(pe*=256);)this[R+we]=V/pe&255;return R+ee},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(V,R,ee,ce){if(V=+V,R=R>>>0,ee=ee>>>0,!ce){var se=Math.pow(2,8*ee)-1;re(this,V,R,ee,se,0)}var pe=ee-1,we=1;for(this[R+pe]=V&255;--pe>=0&&(we*=256);)this[R+pe]=V/we&255;return R+ee},s.prototype.writeUint8=s.prototype.writeUInt8=function(V,R,ee){return V=+V,R=R>>>0,ee||re(this,V,R,1,255,0),this[R]=V&255,R+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(V,R,ee){return V=+V,R=R>>>0,ee||re(this,V,R,2,65535,0),this[R]=V&255,this[R+1]=V>>>8,R+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(V,R,ee){return V=+V,R=R>>>0,ee||re(this,V,R,2,65535,0),this[R]=V>>>8,this[R+1]=V&255,R+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(V,R,ee){return V=+V,R=R>>>0,ee||re(this,V,R,4,4294967295,0),this[R+3]=V>>>24,this[R+2]=V>>>16,this[R+1]=V>>>8,this[R]=V&255,R+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(V,R,ee){return V=+V,R=R>>>0,ee||re(this,V,R,4,4294967295,0),this[R]=V>>>24,this[R+1]=V>>>16,this[R+2]=V>>>8,this[R+3]=V&255,R+4},s.prototype.writeIntLE=function(V,R,ee,ce){if(V=+V,R=R>>>0,!ce){var se=Math.pow(2,8*ee-1);re(this,V,R,ee,se-1,-se)}var pe=0,we=1,Ne=0;for(this[R]=V&255;++pe<ee&&(we*=256);)V<0&&Ne===0&&this[R+pe-1]!==0&&(Ne=1),this[R+pe]=(V/we>>0)-Ne&255;return R+ee},s.prototype.writeIntBE=function(V,R,ee,ce){if(V=+V,R=R>>>0,!ce){var se=Math.pow(2,8*ee-1);re(this,V,R,ee,se-1,-se)}var pe=ee-1,we=1,Ne=0;for(this[R+pe]=V&255;--pe>=0&&(we*=256);)V<0&&Ne===0&&this[R+pe+1]!==0&&(Ne=1),this[R+pe]=(V/we>>0)-Ne&255;return R+ee},s.prototype.writeInt8=function(V,R,ee){return V=+V,R=R>>>0,ee||re(this,V,R,1,127,-128),V<0&&(V=255+V+1),this[R]=V&255,R+1},s.prototype.writeInt16LE=function(V,R,ee){return V=+V,R=R>>>0,ee||re(this,V,R,2,32767,-32768),this[R]=V&255,this[R+1]=V>>>8,R+2},s.prototype.writeInt16BE=function(V,R,ee){return V=+V,R=R>>>0,ee||re(this,V,R,2,32767,-32768),this[R]=V>>>8,this[R+1]=V&255,R+2},s.prototype.writeInt32LE=function(V,R,ee){return V=+V,R=R>>>0,ee||re(this,V,R,4,2147483647,-2147483648),this[R]=V&255,this[R+1]=V>>>8,this[R+2]=V>>>16,this[R+3]=V>>>24,R+4},s.prototype.writeInt32BE=function(V,R,ee){return V=+V,R=R>>>0,ee||re(this,V,R,4,2147483647,-2147483648),V<0&&(V=4294967295+V+1),this[R]=V>>>24,this[R+1]=V>>>16,this[R+2]=V>>>8,this[R+3]=V&255,R+4};function _e(Q,V,R,ee,ce,se){if(R+ee>Q.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("Index out of range")}function ve(Q,V,R,ee,ce){return V=+V,R=R>>>0,ce||_e(Q,V,R,4),o.write(Q,V,R,ee,23,4),R+4}s.prototype.writeFloatLE=function(V,R,ee){return ve(this,V,R,!0,ee)},s.prototype.writeFloatBE=function(V,R,ee){return ve(this,V,R,!1,ee)};function ke(Q,V,R,ee,ce){return V=+V,R=R>>>0,ce||_e(Q,V,R,8),o.write(Q,V,R,ee,52,8),R+8}s.prototype.writeDoubleLE=function(V,R,ee){return ke(this,V,R,!0,ee)},s.prototype.writeDoubleBE=function(V,R,ee){return ke(this,V,R,!1,ee)},s.prototype.copy=function(V,R,ee,ce){if(!s.isBuffer(V))throw new TypeError("argument should be a Buffer");if(ee||(ee=0),!ce&&ce!==0&&(ce=this.length),R>=V.length&&(R=V.length),R||(R=0),ce>0&&ce<ee&&(ce=ee),ce===ee||V.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(ee<0||ee>=this.length)throw new RangeError("Index out of range");if(ce<0)throw new RangeError("sourceEnd out of bounds");ce>this.length&&(ce=this.length),V.length-R<ce-ee&&(ce=V.length-R+ee);var se=ce-ee;return this===V&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(R,ee,ce):Uint8Array.prototype.set.call(V,this.subarray(ee,ce),R),se},s.prototype.fill=function(V,R,ee,ce){if(typeof V=="string"){if(typeof R=="string"?(ce=R,R=0,ee=this.length):typeof ee=="string"&&(ce=ee,ee=this.length),ce!==void 0&&typeof ce!="string")throw new TypeError("encoding must be a string");if(typeof ce=="string"&&!s.isEncoding(ce))throw new TypeError("Unknown encoding: "+ce);if(V.length===1){var se=V.charCodeAt(0);(ce==="utf8"&&se<128||ce==="latin1")&&(V=se)}}else typeof V=="number"?V=V&255:typeof V=="boolean"&&(V=Number(V));if(R<0||this.length<R||this.length<ee)throw new RangeError("Out of range index");if(ee<=R)return this;R=R>>>0,ee=ee===void 0?this.length:ee>>>0,V||(V=0);var pe;if(typeof V=="number")for(pe=R;pe<ee;++pe)this[pe]=V;else{var we=s.isBuffer(V)?V:s.from(V,ce),Ne=we.length;if(Ne===0)throw new TypeError('The value "'+V+'" is invalid for argument "value"');for(pe=0;pe<ee-R;++pe)this[pe+R]=we[pe%Ne]}return this};var Ie=/[^+/0-9A-Za-z-_]/g;function he(Q){if(Q=Q.split("=")[0],Q=Q.trim().replace(Ie,""),Q.length<2)return"";for(;Q.length%4!==0;)Q=Q+"=";return Q}function De(Q,V){V=V||1/0;for(var R,ee=Q.length,ce=null,se=[],pe=0;pe<ee;++pe){if(R=Q.charCodeAt(pe),R>55295&&R<57344){if(!ce){if(R>56319){(V-=3)>-1&&se.push(239,191,189);continue}else if(pe+1===ee){(V-=3)>-1&&se.push(239,191,189);continue}ce=R;continue}if(R<56320){(V-=3)>-1&&se.push(239,191,189),ce=R;continue}R=(ce-55296<<10|R-56320)+65536}else ce&&(V-=3)>-1&&se.push(239,191,189);if(ce=null,R<128){if((V-=1)<0)break;se.push(R)}else if(R<2048){if((V-=2)<0)break;se.push(R>>6|192,R&63|128)}else if(R<65536){if((V-=3)<0)break;se.push(R>>12|224,R>>6&63|128,R&63|128)}else if(R<1114112){if((V-=4)<0)break;se.push(R>>18|240,R>>12&63|128,R>>6&63|128,R&63|128)}else throw new Error("Invalid code point")}return se}function Te(Q){for(var V=[],R=0;R<Q.length;++R)V.push(Q.charCodeAt(R)&255);return V}function J(Q,V){for(var R,ee,ce,se=[],pe=0;pe<Q.length&&!((V-=2)<0);++pe)R=Q.charCodeAt(pe),ee=R>>8,ce=R%256,se.push(ce),se.push(ee);return se}function q(Q){return t.toByteArray(he(Q))}function ne(Q,V,R,ee){for(var ce=0;ce<ee&&!(ce+R>=V.length||ce>=Q.length);++ce)V[ce+R]=Q[ce];return ce}function U(Q,V){return Q instanceof V||Q!=null&&Q.constructor!=null&&Q.constructor.name!=null&&Q.constructor.name===V.name}function Z(Q){return Q!==Q}var Ce=function(){for(var Q="0123456789abcdef",V=new Array(256),R=0;R<16;++R)for(var ee=R*16,ce=0;ce<16;++ce)V[ee+ce]=Q[R]+Q[ce];return V}()})(vk);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(e,t){var o=vk,r=o.Buffer;function a(n,s){for(var l in n)s[l]=n[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=o:(a(o,t),t.Buffer=i);function i(n,s,l){return r(n,s,l)}i.prototype=Object.create(r.prototype),a(r,i),i.from=function(n,s,l){if(typeof n=="number")throw new TypeError("Argument must not be a number");return r(n,s,l)},i.alloc=function(n,s,l){if(typeof n!="number")throw new TypeError("Argument must be a number");var u=r(n);return s!==void 0?typeof l=="string"?u.fill(s,l):u.fill(s):u.fill(0),u},i.allocUnsafe=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return r(n)},i.allocUnsafeSlow=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(n)}})(XC,XC.exports);var VI=XC.exports.Buffer,WO=VI.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function rhe(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function ihe(e){var t=rhe(e);if(typeof t!="string"&&(VI.isEncoding===WO||!WO(e)))throw new Error("Unknown encoding: "+e);return t||e}hk.StringDecoder=Mh;function Mh(e){this.encoding=ihe(e);var t;switch(this.encoding){case"utf16le":this.text=dhe,this.end=fhe,t=4;break;case"utf8":this.fillLast=lhe,t=4;break;case"base64":this.text=mhe,this.end=phe,t=3;break;default:this.write=hhe,this.end=vhe;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=VI.allocUnsafe(t)}Mh.prototype.write=function(e){if(e.length===0)return"";var t,o;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";o=this.lastNeed,this.lastNeed=0}else o=0;return o<e.length?t?t+this.text(e,o):this.text(e,o):t||""};Mh.prototype.end=uhe;Mh.prototype.text=che;Mh.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function $y(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function nhe(e,t,o){var r=t.length-1;if(r<o)return 0;var a=$y(t[r]);return a>=0?(a>0&&(e.lastNeed=a-1),a):--r<o||a===-2?0:(a=$y(t[r]),a>=0?(a>0&&(e.lastNeed=a-2),a):--r<o||a===-2?0:(a=$y(t[r]),a>=0?(a>0&&(a===2?a=0:e.lastNeed=a-3),a):0))}function she(e,t,o){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function lhe(e){var t=this.lastTotal-this.lastNeed,o=she(this,e);if(o!==void 0)return o;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function che(e,t){var o=nhe(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=o;var r=e.length-(o-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)}function uhe(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t}function dhe(e,t){if((e.length-t)%2===0){var o=e.toString("utf16le",t);if(o){var r=o.charCodeAt(o.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],o.slice(0,-1)}return o}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function fhe(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var o=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,o)}return t}function mhe(e,t){var o=(e.length-t)%3;return o===0?e.toString("base64",t):(this.lastNeed=3-o,this.lastTotal=3,o===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-o))}function phe(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function hhe(e){return e.toString(this.encoding)}function vhe(e){return e&&e.length?this.write(e):""}(function(e){(function(t){t.parser=function(J,q){return new r(J,q)},t.SAXParser=r,t.SAXStream=c,t.createStream=u,t.MAX_BUFFER_LENGTH=64*1024;var o=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function r(J,q){if(!(this instanceof r))return new r(J,q);var ne=this;i(ne),ne.q=ne.c="",ne.bufferCheckPosition=t.MAX_BUFFER_LENGTH,ne.opt=q||{},ne.opt.lowercase=ne.opt.lowercase||ne.opt.lowercasetags,ne.looseCase=ne.opt.lowercase?"toLowerCase":"toUpperCase",ne.tags=[],ne.closed=ne.closedRoot=ne.sawRoot=!1,ne.tag=ne.error=null,ne.strict=!!J,ne.noscript=!!(J||ne.opt.noscript),ne.state=F.BEGIN,ne.strictEntities=ne.opt.strictEntities,ne.ENTITIES=ne.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),ne.attribList=[],ne.opt.xmlns&&(ne.ns=Object.create(w)),ne.trackPosition=ne.opt.position!==!1,ne.trackPosition&&(ne.position=ne.line=ne.column=0),z(ne,"onready")}Object.create||(Object.create=function(J){function q(){}q.prototype=J;var ne=new q;return ne}),Object.keys||(Object.keys=function(J){var q=[];for(var ne in J)J.hasOwnProperty(ne)&&q.push(ne);return q});function a(J){for(var q=Math.max(t.MAX_BUFFER_LENGTH,10),ne=0,U=0,Z=o.length;U<Z;U++){var Ce=J[o[U]].length;if(Ce>q)switch(o[U]){case"textNode":X(J);break;case"cdata":H(J,"oncdata",J.cdata),J.cdata="";break;case"script":H(J,"onscript",J.script),J.script="";break;default:de(J,"Max buffer length exceeded: "+o[U])}ne=Math.max(ne,Ce)}var Q=t.MAX_BUFFER_LENGTH-ne;J.bufferCheckPosition=Q+J.position}function i(J){for(var q=0,ne=o.length;q<ne;q++)J[o[q]]=""}function n(J){X(J),J.cdata!==""&&(H(J,"oncdata",J.cdata),J.cdata=""),J.script!==""&&(H(J,"onscript",J.script),J.script="")}r.prototype={end:function(){ye(this)},write:Te,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){n(this)}};var s;try{s=require("stream").Stream}catch{s=function(){}}var l=t.EVENTS.filter(function(J){return J!=="error"&&J!=="end"});function u(J,q){return new c(J,q)}function c(J,q){if(!(this instanceof c))return new c(J,q);s.apply(this),this._parser=new r(J,q),this.writable=!0,this.readable=!0;var ne=this;this._parser.onend=function(){ne.emit("end")},this._parser.onerror=function(U){ne.emit("error",U),ne._parser.error=null},this._decoder=null,l.forEach(function(U){Object.defineProperty(ne,"on"+U,{get:function(){return ne._parser["on"+U]},set:function(Z){if(!Z)return ne.removeAllListeners(U),ne._parser["on"+U]=Z,Z;ne.on(U,Z)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(s.prototype,{constructor:{value:c}}),c.prototype.write=function(J){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(J)){if(!this._decoder){var q=hk.StringDecoder;this._decoder=new q("utf8")}J=this._decoder.write(J)}return this._parser.write(J.toString()),this.emit("data",J),!0},c.prototype.end=function(J){return J&&J.length&&this.write(J),this._parser.end(),!0},c.prototype.on=function(J,q){var ne=this;return!ne._parser["on"+J]&&l.indexOf(J)!==-1&&(ne._parser["on"+J]=function(){var U=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);U.splice(0,0,J),ne.emit.apply(ne,U)}),s.prototype.on.call(ne,J,q)};var d=`\r
	 `,f="0124356789",m="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",p=`'"`,v=d+">",g="[CDATA[",x="DOCTYPE",b="http://www.w3.org/XML/1998/namespace",_="http://www.w3.org/2000/xmlns/",w={xml:b,xmlns:_};d=T(d),f=T(f),m=T(m);var S=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,D=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,M=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,O=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;p=T(p),v=T(v);function T(J){return J.split("").reduce(function(q,ne){return q[ne]=!0,q},{})}function I(J){return Object.prototype.toString.call(J)==="[object RegExp]"}function N(J,q){return I(J)?!!q.match(J):J[q]}function P(J,q){return!N(J,q)}var F=0;t.STATE={BEGIN:F++,BEGIN_WHITESPACE:F++,TEXT:F++,TEXT_ENTITY:F++,OPEN_WAKA:F++,SGML_DECL:F++,SGML_DECL_QUOTED:F++,DOCTYPE:F++,DOCTYPE_QUOTED:F++,DOCTYPE_DTD:F++,DOCTYPE_DTD_QUOTED:F++,COMMENT_STARTING:F++,COMMENT:F++,COMMENT_ENDING:F++,COMMENT_ENDED:F++,CDATA:F++,CDATA_ENDING:F++,CDATA_ENDING_2:F++,PROC_INST:F++,PROC_INST_BODY:F++,PROC_INST_ENDING:F++,OPEN_TAG:F++,OPEN_TAG_SLASH:F++,ATTRIB:F++,ATTRIB_NAME:F++,ATTRIB_NAME_SAW_WHITE:F++,ATTRIB_VALUE:F++,ATTRIB_VALUE_QUOTED:F++,ATTRIB_VALUE_CLOSED:F++,ATTRIB_VALUE_UNQUOTED:F++,ATTRIB_VALUE_ENTITY_Q:F++,ATTRIB_VALUE_ENTITY_U:F++,CLOSE_TAG:F++,CLOSE_TAG_SAW_WHITE:F++,SCRIPT:F++,SCRIPT_ENDING:F++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(J){var q=t.ENTITIES[J],ne=typeof q=="number"?String.fromCharCode(q):q;t.ENTITIES[J]=ne});for(var L in t.STATE)t.STATE[t.STATE[L]]=L;F=t.STATE;function z(J,q,ne){J[q]&&J[q](ne)}function H(J,q,ne){J.textNode&&X(J),z(J,q,ne)}function X(J){J.textNode=Y(J.opt,J.textNode),J.textNode&&z(J,"ontext",J.textNode),J.textNode=""}function Y(J,q){return J.trim&&(q=q.trim()),J.normalize&&(q=q.replace(/\s+/g," ")),q}function de(J,q){return X(J),J.trackPosition&&(q+=`
Line: `+J.line+`
Column: `+J.column+`
Char: `+J.c),q=new Error(q),J.error=q,z(J,"onerror",q),J}function ye(J){return J.sawRoot&&!J.closedRoot&&W(J,"Unclosed root tag"),J.state!==F.BEGIN&&J.state!==F.BEGIN_WHITESPACE&&J.state!==F.TEXT&&de(J,"Unexpected end"),X(J),J.c="",J.closed=!0,z(J,"onend"),r.call(J,J.strict,J.opt),J}function W(J,q){if(typeof J!="object"||!(J instanceof r))throw new Error("bad call to strictFail");J.strict&&de(J,q)}function re(J){J.strict||(J.tagName=J.tagName[J.looseCase]());var q=J.tags[J.tags.length-1]||J,ne=J.tag={name:J.tagName,attributes:{}};J.opt.xmlns&&(ne.ns=q.ns),J.attribList.length=0}function _e(J,q){var ne=J.indexOf(":"),U=ne<0?["",J]:J.split(":"),Z=U[0],Ce=U[1];return q&&J==="xmlns"&&(Z="xmlns",Ce=""),{prefix:Z,local:Ce}}function ve(J){if(J.strict||(J.attribName=J.attribName[J.looseCase]()),J.attribList.indexOf(J.attribName)!==-1||J.tag.attributes.hasOwnProperty(J.attribName)){J.attribName=J.attribValue="";return}if(J.opt.xmlns){var q=_e(J.attribName,!0),ne=q.prefix,U=q.local;if(ne==="xmlns")if(U==="xml"&&J.attribValue!==b)W(J,"xml: prefix must be bound to "+b+`
Actual: `+J.attribValue);else if(U==="xmlns"&&J.attribValue!==_)W(J,"xmlns: prefix must be bound to "+_+`
Actual: `+J.attribValue);else{var Z=J.tag,Ce=J.tags[J.tags.length-1]||J;Z.ns===Ce.ns&&(Z.ns=Object.create(Ce.ns)),Z.ns[U]=J.attribValue}J.attribList.push([J.attribName,J.attribValue])}else J.tag.attributes[J.attribName]=J.attribValue,H(J,"onattribute",{name:J.attribName,value:J.attribValue});J.attribName=J.attribValue=""}function ke(J,q){if(J.opt.xmlns){var ne=J.tag,U=_e(J.tagName);ne.prefix=U.prefix,ne.local=U.local,ne.uri=ne.ns[U.prefix]||"",ne.prefix&&!ne.uri&&(W(J,"Unbound namespace prefix: "+JSON.stringify(J.tagName)),ne.uri=U.prefix);var Z=J.tags[J.tags.length-1]||J;ne.ns&&Z.ns!==ne.ns&&Object.keys(ne.ns).forEach(function(Ge){H(J,"onopennamespace",{prefix:Ge,uri:ne.ns[Ge]})});for(var Ce=0,Q=J.attribList.length;Ce<Q;Ce++){var V=J.attribList[Ce],R=V[0],ee=V[1],ce=_e(R,!0),se=ce.prefix,pe=ce.local,we=se===""?"":ne.ns[se]||"",Ne={name:R,value:ee,prefix:se,local:pe,uri:we};se&&se!=="xmlns"&&!we&&(W(J,"Unbound namespace prefix: "+JSON.stringify(se)),Ne.uri=se),J.tag.attributes[R]=Ne,H(J,"onattribute",Ne)}J.attribList.length=0}J.tag.isSelfClosing=!!q,J.sawRoot=!0,J.tags.push(J.tag),H(J,"onopentag",J.tag),q||(!J.noscript&&J.tagName.toLowerCase()==="script"?J.state=F.SCRIPT:J.state=F.TEXT,J.tag=null,J.tagName=""),J.attribName=J.attribValue="",J.attribList.length=0}function Ie(J){if(!J.tagName){W(J,"Weird empty close tag."),J.textNode+="</>",J.state=F.TEXT;return}if(J.script){if(J.tagName!=="script"){J.script+="</"+J.tagName+">",J.tagName="",J.state=F.SCRIPT;return}H(J,"onscript",J.script),J.script=""}var q=J.tags.length,ne=J.tagName;J.strict||(ne=ne[J.looseCase]());for(var U=ne;q--;){var Z=J.tags[q];if(Z.name!==U)W(J,"Unexpected close tag");else break}if(q<0){W(J,"Unmatched closing tag: "+J.tagName),J.textNode+="</"+J.tagName+">",J.state=F.TEXT;return}J.tagName=ne;for(var Ce=J.tags.length;Ce-- >q;){var Q=J.tag=J.tags.pop();J.tagName=J.tag.name,H(J,"onclosetag",J.tagName);var V={};for(var R in Q.ns)V[R]=Q.ns[R];var ee=J.tags[J.tags.length-1]||J;J.opt.xmlns&&Q.ns!==ee.ns&&Object.keys(Q.ns).forEach(function(ce){var se=Q.ns[ce];H(J,"onclosenamespace",{prefix:ce,uri:se})})}q===0&&(J.closedRoot=!0),J.tagName=J.attribValue=J.attribName="",J.attribList.length=0,J.state=F.TEXT}function he(J){var q=J.entity,ne=q.toLowerCase(),U,Z="";return J.ENTITIES[q]?J.ENTITIES[q]:J.ENTITIES[ne]?J.ENTITIES[ne]:(q=ne,q.charAt(0)==="#"&&(q.charAt(1)==="x"?(q=q.slice(2),U=parseInt(q,16),Z=U.toString(16)):(q=q.slice(1),U=parseInt(q,10),Z=U.toString(10))),q=q.replace(/^0+/,""),Z.toLowerCase()!==q?(W(J,"Invalid character entity"),"&"+J.entity+";"):String.fromCodePoint(U))}function De(J,q){q==="<"?(J.state=F.OPEN_WAKA,J.startTagPosition=J.position):P(d,q)&&(W(J,"Non-whitespace before first tag."),J.textNode=q,J.state=F.TEXT)}function Te(J){var q=this;if(this.error)throw this.error;if(q.closed)return de(q,"Cannot write after close. Assign an onready handler.");if(J===null)return ye(q);for(var ne=0,U="";U=J.charAt(ne++),q.c=U,!!U;)switch(q.trackPosition&&(q.position++,U===`
`?(q.line++,q.column=0):q.column++),q.state){case F.BEGIN:if(q.state=F.BEGIN_WHITESPACE,U==="\uFEFF")continue;De(q,U);continue;case F.BEGIN_WHITESPACE:De(q,U);continue;case F.TEXT:if(q.sawRoot&&!q.closedRoot){for(var Z=ne-1;U&&U!=="<"&&U!=="&";)U=J.charAt(ne++),U&&q.trackPosition&&(q.position++,U===`
`?(q.line++,q.column=0):q.column++);q.textNode+=J.substring(Z,ne-1)}U==="<"&&!(q.sawRoot&&q.closedRoot&&!q.strict)?(q.state=F.OPEN_WAKA,q.startTagPosition=q.position):(P(d,U)&&(!q.sawRoot||q.closedRoot)&&W(q,"Text data outside of root node."),U==="&"?q.state=F.TEXT_ENTITY:q.textNode+=U);continue;case F.SCRIPT:U==="<"?q.state=F.SCRIPT_ENDING:q.script+=U;continue;case F.SCRIPT_ENDING:U==="/"?q.state=F.CLOSE_TAG:(q.script+="<"+U,q.state=F.SCRIPT);continue;case F.OPEN_WAKA:if(U==="!")q.state=F.SGML_DECL,q.sgmlDecl="";else if(!N(d,U))if(N(S,U))q.state=F.OPEN_TAG,q.tagName=U;else if(U==="/")q.state=F.CLOSE_TAG,q.tagName="";else if(U==="?")q.state=F.PROC_INST,q.procInstName=q.procInstBody="";else{if(W(q,"Unencoded <"),q.startTagPosition+1<q.position){var Ce=q.position-q.startTagPosition;U=new Array(Ce).join(" ")+U}q.textNode+="<"+U,q.state=F.TEXT}continue;case F.SGML_DECL:(q.sgmlDecl+U).toUpperCase()===g?(H(q,"onopencdata"),q.state=F.CDATA,q.sgmlDecl="",q.cdata=""):q.sgmlDecl+U==="--"?(q.state=F.COMMENT,q.comment="",q.sgmlDecl=""):(q.sgmlDecl+U).toUpperCase()===x?(q.state=F.DOCTYPE,(q.doctype||q.sawRoot)&&W(q,"Inappropriately located doctype declaration"),q.doctype="",q.sgmlDecl=""):U===">"?(H(q,"onsgmldeclaration",q.sgmlDecl),q.sgmlDecl="",q.state=F.TEXT):(N(p,U)&&(q.state=F.SGML_DECL_QUOTED),q.sgmlDecl+=U);continue;case F.SGML_DECL_QUOTED:U===q.q&&(q.state=F.SGML_DECL,q.q=""),q.sgmlDecl+=U;continue;case F.DOCTYPE:U===">"?(q.state=F.TEXT,H(q,"ondoctype",q.doctype),q.doctype=!0):(q.doctype+=U,U==="["?q.state=F.DOCTYPE_DTD:N(p,U)&&(q.state=F.DOCTYPE_QUOTED,q.q=U));continue;case F.DOCTYPE_QUOTED:q.doctype+=U,U===q.q&&(q.q="",q.state=F.DOCTYPE);continue;case F.DOCTYPE_DTD:q.doctype+=U,U==="]"?q.state=F.DOCTYPE:N(p,U)&&(q.state=F.DOCTYPE_DTD_QUOTED,q.q=U);continue;case F.DOCTYPE_DTD_QUOTED:q.doctype+=U,U===q.q&&(q.state=F.DOCTYPE_DTD,q.q="");continue;case F.COMMENT:U==="-"?q.state=F.COMMENT_ENDING:q.comment+=U;continue;case F.COMMENT_ENDING:U==="-"?(q.state=F.COMMENT_ENDED,q.comment=Y(q.opt,q.comment),q.comment&&H(q,"oncomment",q.comment),q.comment=""):(q.comment+="-"+U,q.state=F.COMMENT);continue;case F.COMMENT_ENDED:U!==">"?(W(q,"Malformed comment"),q.comment+="--"+U,q.state=F.COMMENT):q.state=F.TEXT;continue;case F.CDATA:U==="]"?q.state=F.CDATA_ENDING:q.cdata+=U;continue;case F.CDATA_ENDING:U==="]"?q.state=F.CDATA_ENDING_2:(q.cdata+="]"+U,q.state=F.CDATA);continue;case F.CDATA_ENDING_2:U===">"?(q.cdata&&H(q,"oncdata",q.cdata),H(q,"onclosecdata"),q.cdata="",q.state=F.TEXT):U==="]"?q.cdata+="]":(q.cdata+="]]"+U,q.state=F.CDATA);continue;case F.PROC_INST:U==="?"?q.state=F.PROC_INST_ENDING:N(d,U)?q.state=F.PROC_INST_BODY:q.procInstName+=U;continue;case F.PROC_INST_BODY:if(!q.procInstBody&&N(d,U))continue;U==="?"?q.state=F.PROC_INST_ENDING:q.procInstBody+=U;continue;case F.PROC_INST_ENDING:U===">"?(H(q,"onprocessinginstruction",{name:q.procInstName,body:q.procInstBody}),q.procInstName=q.procInstBody="",q.state=F.TEXT):(q.procInstBody+="?"+U,q.state=F.PROC_INST_BODY);continue;case F.OPEN_TAG:N(D,U)?q.tagName+=U:(re(q),U===">"?ke(q):U==="/"?q.state=F.OPEN_TAG_SLASH:(P(d,U)&&W(q,"Invalid character in tag name"),q.state=F.ATTRIB));continue;case F.OPEN_TAG_SLASH:U===">"?(ke(q,!0),Ie(q)):(W(q,"Forward-slash in opening tag not followed by >"),q.state=F.ATTRIB);continue;case F.ATTRIB:if(N(d,U))continue;U===">"?ke(q):U==="/"?q.state=F.OPEN_TAG_SLASH:N(S,U)?(q.attribName=U,q.attribValue="",q.state=F.ATTRIB_NAME):W(q,"Invalid attribute name");continue;case F.ATTRIB_NAME:U==="="?q.state=F.ATTRIB_VALUE:U===">"?(W(q,"Attribute without value"),q.attribValue=q.attribName,ve(q),ke(q)):N(d,U)?q.state=F.ATTRIB_NAME_SAW_WHITE:N(D,U)?q.attribName+=U:W(q,"Invalid attribute name");continue;case F.ATTRIB_NAME_SAW_WHITE:if(U==="=")q.state=F.ATTRIB_VALUE;else{if(N(d,U))continue;W(q,"Attribute without value"),q.tag.attributes[q.attribName]="",q.attribValue="",H(q,"onattribute",{name:q.attribName,value:""}),q.attribName="",U===">"?ke(q):N(S,U)?(q.attribName=U,q.state=F.ATTRIB_NAME):(W(q,"Invalid attribute name"),q.state=F.ATTRIB)}continue;case F.ATTRIB_VALUE:if(N(d,U))continue;N(p,U)?(q.q=U,q.state=F.ATTRIB_VALUE_QUOTED):(W(q,"Unquoted attribute value"),q.state=F.ATTRIB_VALUE_UNQUOTED,q.attribValue=U);continue;case F.ATTRIB_VALUE_QUOTED:if(U!==q.q){U==="&"?q.state=F.ATTRIB_VALUE_ENTITY_Q:q.attribValue+=U;continue}ve(q),q.q="",q.state=F.ATTRIB_VALUE_CLOSED;continue;case F.ATTRIB_VALUE_CLOSED:N(d,U)?q.state=F.ATTRIB:U===">"?ke(q):U==="/"?q.state=F.OPEN_TAG_SLASH:N(S,U)?(W(q,"No whitespace between attributes"),q.attribName=U,q.attribValue="",q.state=F.ATTRIB_NAME):W(q,"Invalid attribute name");continue;case F.ATTRIB_VALUE_UNQUOTED:if(P(v,U)){U==="&"?q.state=F.ATTRIB_VALUE_ENTITY_U:q.attribValue+=U;continue}ve(q),U===">"?ke(q):q.state=F.ATTRIB;continue;case F.CLOSE_TAG:if(q.tagName)U===">"?Ie(q):N(D,U)?q.tagName+=U:q.script?(q.script+="</"+q.tagName,q.tagName="",q.state=F.SCRIPT):(P(d,U)&&W(q,"Invalid tagname in closing tag"),q.state=F.CLOSE_TAG_SAW_WHITE);else{if(N(d,U))continue;P(S,U)?q.script?(q.script+="</"+U,q.state=F.SCRIPT):W(q,"Invalid tagname in closing tag."):q.tagName=U}continue;case F.CLOSE_TAG_SAW_WHITE:if(N(d,U))continue;U===">"?Ie(q):W(q,"Invalid characters in closing tag");continue;case F.TEXT_ENTITY:case F.ATTRIB_VALUE_ENTITY_Q:case F.ATTRIB_VALUE_ENTITY_U:var Q,V;switch(q.state){case F.TEXT_ENTITY:Q=F.TEXT,V="textNode";break;case F.ATTRIB_VALUE_ENTITY_Q:Q=F.ATTRIB_VALUE_QUOTED,V="attribValue";break;case F.ATTRIB_VALUE_ENTITY_U:Q=F.ATTRIB_VALUE_UNQUOTED,V="attribValue";break}U===";"?(q[V]+=he(q),q.entity="",q.state=Q):N(q.entity.length?O:M,U)?q.entity+=U:(W(q,"Invalid character in entity name"),q[V]+="&"+q.entity+U,q.entity="",q.state=Q);continue;default:throw new Error(q,"Unknown state: "+q.state)}return q.position>=q.bufferCheckPosition&&a(q),q}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var J=String.fromCharCode,q=Math.floor,ne=function(){var U=16384,Z=[],Ce,Q,V=-1,R=arguments.length;if(!R)return"";for(var ee="";++V<R;){var ce=Number(arguments[V]);if(!isFinite(ce)||ce<0||ce>1114111||q(ce)!==ce)throw RangeError("Invalid code point: "+ce);ce<=65535?Z.push(ce):(ce-=65536,Ce=(ce>>10)+55296,Q=ce%1024+56320,Z.push(Ce,Q)),(V+1===R||Z.length>U)&&(ee+=J.apply(null,Z),Z.length=0)}return ee};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:ne,configurable:!0,writable:!0}):String.fromCodePoint=ne}()})(e)})(pk);var BI={exports:{}},lm=typeof Reflect=="object"?Reflect:null,QO=lm&&typeof lm.apply=="function"?lm.apply:function(t,o,r){return Function.prototype.apply.call(t,o,r)},Jv;lm&&typeof lm.ownKeys=="function"?Jv=lm.ownKeys:Object.getOwnPropertySymbols?Jv=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Jv=function(t){return Object.getOwnPropertyNames(t)};function ghe(e){console&&console.warn&&console.warn(e)}var _k=Number.isNaN||function(t){return t!==t};function _a(){_a.init.call(this)}BI.exports=_a;BI.exports.once=xhe;_a.EventEmitter=_a;_a.prototype._events=void 0;_a.prototype._eventsCount=0;_a.prototype._maxListeners=void 0;var XO=10;function yb(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(_a,"defaultMaxListeners",{enumerable:!0,get:function(){return XO},set:function(e){if(typeof e!="number"||e<0||_k(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");XO=e}});_a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};_a.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||_k(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function bk(e){return e._maxListeners===void 0?_a.defaultMaxListeners:e._maxListeners}_a.prototype.getMaxListeners=function(){return bk(this)};_a.prototype.emit=function(t){for(var o=[],r=1;r<arguments.length;r++)o.push(arguments[r]);var a=t==="error",i=this._events;if(i!==void 0)a=a&&i.error===void 0;else if(!a)return!1;if(a){var n;if(o.length>0&&(n=o[0]),n instanceof Error)throw n;var s=new Error("Unhandled error."+(n?" ("+n.message+")":""));throw s.context=n,s}var l=i[t];if(l===void 0)return!1;if(typeof l=="function")QO(l,this,o);else for(var u=l.length,c=Ek(l,u),r=0;r<u;++r)QO(c[r],this,o);return!0};function yk(e,t,o,r){var a,i,n;if(yb(o),i=e._events,i===void 0?(i=e._events=Object.create(null),e._eventsCount=0):(i.newListener!==void 0&&(e.emit("newListener",t,o.listener?o.listener:o),i=e._events),n=i[t]),n===void 0)n=i[t]=o,++e._eventsCount;else if(typeof n=="function"?n=i[t]=r?[o,n]:[n,o]:r?n.unshift(o):n.push(o),a=bk(e),a>0&&n.length>a&&!n.warned){n.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+n.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=n.length,ghe(s)}return e}_a.prototype.addListener=function(t,o){return yk(this,t,o,!1)};_a.prototype.on=_a.prototype.addListener;_a.prototype.prependListener=function(t,o){return yk(this,t,o,!0)};function _he(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function xk(e,t,o){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:o},a=_he.bind(r);return a.listener=o,r.wrapFn=a,a}_a.prototype.once=function(t,o){return yb(o),this.on(t,xk(this,t,o)),this};_a.prototype.prependOnceListener=function(t,o){return yb(o),this.prependListener(t,xk(this,t,o)),this};_a.prototype.removeListener=function(t,o){var r,a,i,n,s;if(yb(o),a=this._events,a===void 0)return this;if(r=a[t],r===void 0)return this;if(r===o||r.listener===o)--this._eventsCount===0?this._events=Object.create(null):(delete a[t],a.removeListener&&this.emit("removeListener",t,r.listener||o));else if(typeof r!="function"){for(i=-1,n=r.length-1;n>=0;n--)if(r[n]===o||r[n].listener===o){s=r[n].listener,i=n;break}if(i<0)return this;i===0?r.shift():bhe(r,i),r.length===1&&(a[t]=r[0]),a.removeListener!==void 0&&this.emit("removeListener",t,s||o)}return this};_a.prototype.off=_a.prototype.removeListener;_a.prototype.removeAllListeners=function(t){var o,r,a;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var i=Object.keys(r),n;for(a=0;a<i.length;++a)n=i[a],n!=="removeListener"&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(o=r[t],typeof o=="function")this.removeListener(t,o);else if(o!==void 0)for(a=o.length-1;a>=0;a--)this.removeListener(t,o[a]);return this};function Ck(e,t,o){var r=e._events;if(r===void 0)return[];var a=r[t];return a===void 0?[]:typeof a=="function"?o?[a.listener||a]:[a]:o?yhe(a):Ek(a,a.length)}_a.prototype.listeners=function(t){return Ck(this,t,!0)};_a.prototype.rawListeners=function(t){return Ck(this,t,!1)};_a.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):wk.call(e,t)};_a.prototype.listenerCount=wk;function wk(e){var t=this._events;if(t!==void 0){var o=t[e];if(typeof o=="function")return 1;if(o!==void 0)return o.length}return 0}_a.prototype.eventNames=function(){return this._eventsCount>0?Jv(this._events):[]};function Ek(e,t){for(var o=new Array(t),r=0;r<t;++r)o[r]=e[r];return o}function bhe(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function yhe(e){for(var t=new Array(e.length),o=0;o<t.length;++o)t[o]=e[o].listener||e[o];return t}function xhe(e,t){return new Promise(function(o,r){function a(n){e.removeListener(t,i),r(n)}function i(){typeof e.removeListener=="function"&&e.removeListener("error",a),o([].slice.call(arguments))}Sk(e,t,i,{once:!0}),t!=="error"&&Che(e,a,{once:!0})})}function Che(e,t,o){typeof e.on=="function"&&Sk(e,"error",t,o)}function Sk(e,t,o,r){if(typeof e.on=="function")r.once?e.once(t,o):e.on(t,o);else if(typeof e.addEventListener=="function")e.addEventListener(t,function a(i){r.once&&e.removeEventListener(t,a),o(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Ik={};(function(){Ik.stripBOM=function(e){return e[0]==="\uFEFF"?e.substring(1):e}}).call(vt);var od={};(function(){var e;e=new RegExp(/(?!xmlns)^.*:/),od.normalize=function(t){return t.toLowerCase()},od.firstCharLowerCase=function(t){return t.charAt(0).toLowerCase()+t.slice(1)},od.stripPrefix=function(t){return t.replace(e,"")},od.parseNumbers=function(t){return isNaN(t)||(t=t%1===0?parseInt(t,10):parseFloat(t)),t},od.parseBooleans=function(t){return/^(?:true|false)$/i.test(t)&&(t=t.toLowerCase()==="true"),t}}).call(vt);var Ak={};Ak.every=function(e){return new qI(e)};var kl={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5};for(var Nf in kl)Nf==="millisecond"?kl.ms=kl[Nf]:kl[Nf.charAt(0)]=kl[Nf],kl[Nf+"s"]=kl[Nf];function qI(e){this.count=0;var t=Ehe(e);t&&(this.time=Number(t[0])*kl[t[1]],this.type=t[1])}qI.prototype.do=function(e){this.time&&(this.interval=setInterval(o,this.time));var t=this;function o(){t.count++,e.call(t)}return this};qI.prototype.stop=function(){return this.interval&&(clearInterval(this.interval),delete this.interval),this};var whe=/^\s*(\d+(?:\.\d+)?)\s*([a-z]+)\s*$/;function Ehe(e){var t=e.match(whe);return t&&kl[t[2]]?t.slice(1):null}(function(e){(function(){var t,o,r,a,i,n,s,l,u,c=function(m,p){return function(){return m.apply(p,arguments)}},d=function(m,p){for(var v in p)f.call(p,v)&&(m[v]=p[v]);function g(){this.constructor=m}return g.prototype=p.prototype,m.prototype=new g,m.__super__=p.prototype,m},f={}.hasOwnProperty;l=pk,a=BI.exports,t=Ik,s=od,u=Ak.setImmediate,o=gb.defaults,i=function(m){return typeof m=="object"&&m!=null&&Object.keys(m).length===0},n=function(m,p,v){var g,x,b;for(g=0,x=m.length;g<x;g++)b=m[g],p=b(p,v);return p},r=function(m,p,v){var g;return g=Object.create(null),g.value=v,g.writable=!0,g.enumerable=!0,g.configurable=!0,Object.defineProperty(m,p,g)},e.Parser=function(m){d(p,m);function p(v){this.parseStringPromise=c(this.parseStringPromise,this),this.parseString=c(this.parseString,this),this.reset=c(this.reset,this),this.assignOrPush=c(this.assignOrPush,this),this.processAsync=c(this.processAsync,this);var g,x,b;if(!(this instanceof e.Parser))return new e.Parser(v);this.options={},x=o["0.2"];for(g in x)!f.call(x,g)||(b=x[g],this.options[g]=b);for(g in v)!f.call(v,g)||(b=v[g],this.options[g]=b);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(s.normalize)),this.reset()}return p.prototype.processAsync=function(){var v,g;try{return this.remaining.length<=this.options.chunkSize?(v=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(v),this.saxParser.close()):(v=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(v),u(this.processAsync))}catch(x){if(g=x,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(g)}},p.prototype.assignOrPush=function(v,g,x){return g in v?(v[g]instanceof Array||r(v,g,[v[g]]),v[g].push(x)):this.options.explicitArray?r(v,g,[x]):r(v,g,x)},p.prototype.reset=function(){var v,g,x,b;return this.removeAllListeners(),this.saxParser=l.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(_){return function(w){if(_.saxParser.resume(),!_.saxParser.errThrown)return _.saxParser.errThrown=!0,_.emit("error",w)}}(this),this.saxParser.onend=function(_){return function(){if(!_.saxParser.ended)return _.saxParser.ended=!0,_.emit("end",_.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,b=[],v=this.options.attrkey,g=this.options.charkey,this.saxParser.onopentag=function(_){return function(w){var S,D,M,O,T;if(M={},M[g]="",!_.options.ignoreAttrs){T=w.attributes;for(S in T)!f.call(T,S)||(!(v in M)&&!_.options.mergeAttrs&&(M[v]={}),D=_.options.attrValueProcessors?n(_.options.attrValueProcessors,w.attributes[S],S):w.attributes[S],O=_.options.attrNameProcessors?n(_.options.attrNameProcessors,S):S,_.options.mergeAttrs?_.assignOrPush(M,O,D):r(M[v],O,D))}return M["#name"]=_.options.tagNameProcessors?n(_.options.tagNameProcessors,w.name):w.name,_.options.xmlns&&(M[_.options.xmlnskey]={uri:w.uri,local:w.local}),b.push(M)}}(this),this.saxParser.onclosetag=function(_){return function(){var w,S,D,M,O,T,I,N,P,F;if(T=b.pop(),O=T["#name"],(!_.options.explicitChildren||!_.options.preserveChildrenOrder)&&delete T["#name"],T.cdata===!0&&(w=T.cdata,delete T.cdata),P=b[b.length-1],T[g].match(/^\s*$/)&&!w?(S=T[g],delete T[g]):(_.options.trim&&(T[g]=T[g].trim()),_.options.normalize&&(T[g]=T[g].replace(/\s{2,}/g," ").trim()),T[g]=_.options.valueProcessors?n(_.options.valueProcessors,T[g],O):T[g],Object.keys(T).length===1&&g in T&&!_.EXPLICIT_CHARKEY&&(T=T[g])),i(T)&&(typeof _.options.emptyTag=="function"?T=_.options.emptyTag():T=_.options.emptyTag!==""?_.options.emptyTag:S),_.options.validator!=null&&(F="/"+function(){var L,z,H;for(H=[],L=0,z=b.length;L<z;L++)M=b[L],H.push(M["#name"]);return H}().concat(O).join("/"),function(){var L;try{return T=_.options.validator(F,P&&P[O],T)}catch(z){return L=z,_.emit("error",L)}}()),_.options.explicitChildren&&!_.options.mergeAttrs&&typeof T=="object"){if(!_.options.preserveChildrenOrder)M={},_.options.attrkey in T&&(M[_.options.attrkey]=T[_.options.attrkey],delete T[_.options.attrkey]),!_.options.charsAsChildren&&_.options.charkey in T&&(M[_.options.charkey]=T[_.options.charkey],delete T[_.options.charkey]),Object.getOwnPropertyNames(T).length>0&&(M[_.options.childkey]=T),T=M;else if(P){P[_.options.childkey]=P[_.options.childkey]||[],I={};for(D in T)!f.call(T,D)||r(I,D,T[D]);P[_.options.childkey].push(I),delete T["#name"],Object.keys(T).length===1&&g in T&&!_.EXPLICIT_CHARKEY&&(T=T[g])}}return b.length>0?_.assignOrPush(P,O,T):(_.options.explicitRoot&&(N=T,T={},r(T,O,N)),_.resultObject=T,_.saxParser.ended=!0,_.emit("end",_.resultObject))}}(this),x=function(_){return function(w){var S,D;if(D=b[b.length-1],D)return D[g]+=w,_.options.explicitChildren&&_.options.preserveChildrenOrder&&_.options.charsAsChildren&&(_.options.includeWhiteChars||w.replace(/\\n/g,"").trim()!=="")&&(D[_.options.childkey]=D[_.options.childkey]||[],S={"#name":"__text__"},S[g]=w,_.options.normalize&&(S[g]=S[g].replace(/\s{2,}/g," ").trim()),D[_.options.childkey].push(S)),D}}(this),this.saxParser.ontext=x,this.saxParser.oncdata=function(_){return function(w){var S;if(S=x(w),S)return S.cdata=!0}}()},p.prototype.parseString=function(v,g){var x;g!=null&&typeof g=="function"&&(this.on("end",function(b){return this.reset(),g(null,b)}),this.on("error",function(b){return this.reset(),g(b)}));try{return v=v.toString(),v.trim()===""?(this.emit("end",null),!0):(v=t.stripBOM(v),this.options.async?(this.remaining=v,u(this.processAsync),this.saxParser):this.saxParser.write(v).close())}catch(b){if(x=b,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw x}else return this.emit("error",x),this.saxParser.errThrown=!0}},p.prototype.parseStringPromise=function(v){return new Promise(function(g){return function(x,b){return g.parseString(v,function(_,w){return _?b(_):x(w)})}}(this))},p}(a),e.parseString=function(m,p,v){var g,x,b;return v!=null?(typeof v=="function"&&(g=v),typeof p=="object"&&(x=p)):(typeof p=="function"&&(g=p),x={}),b=new e.Parser(x),b.parseString(m,g)},e.parseStringPromise=function(m,p){var v,g;return typeof p=="object"&&(v=p),g=new e.Parser(v),g.parseStringPromise(m)}}).call(vt)})(mk);(function(){var e,t,o,r,a=function(n,s){for(var l in s)i.call(s,l)&&(n[l]=s[l]);function u(){this.constructor=n}return u.prototype=s.prototype,n.prototype=new u,n.__super__=s.prototype,n},i={}.hasOwnProperty;t=gb,e=rk,o=mk,r=od,Oc.defaults=t.defaults,Oc.processors=r,Oc.ValidationError=function(n){a(s,n);function s(l){this.message=l}return s}(Error),Oc.Builder=e.Builder,Oc.Parser=o.Parser,Oc.parseString=o.parseString,Oc.parseStringPromise=o.parseStringPromise}).call(vt);const She={"01":"Dinheiro","02":"Cheque","03":"Cart\xE3o de Cr\xE9dito","04":"Cart\xE3o de D\xE9bito","05":"Cr\xE9dito Loja",10:"Vale Alimenta\xE7\xE3o",11:"Vale Refei\xE7\xE3o",12:"Vale Presente",13:"Vale Combust\xEDvel",14:"Duplicata Mercantil",15:"Boleto Bancario",16:"Dep\xF3sito Banc\xE1rio",17:"Pagamento Instant\xE2neo (PIX)",18:"Transfer\xEAncia banc\xE1ria, Carteira Digital",19:"Programa de fidelidade, Cashback, Cr\xE9dito Virtual",90:"Sem Pagamento",99:"Outros"},ys=e=>e?Number(e):0,vv=e=>e?Number(e):null,Ihe=e=>(e.indexOf("<?")===0?e.substr(e.indexOf("?>")+2):e).replace(/\r\n */g,"");function Ahe(e,t){const o=e.nfeProc.NFe[0].infNFe[0],r=e.nfeProc.NFe[0].infNFe[0].det;let a;e&&e.nfeProc&&e.nfeProc.protNFe&&(a=e.nfeProc.protNFe[0].infProt[0].chNFe[0]);const i={infNFe:{ide:{}},protNFe:{infProt:{chNFe:a}}};return o.ide&&(i.infNFe.ide=Mhe(o.ide[0])),o.emit&&(i.infNFe.emit=t?YO(o.dest[0]):KO(o.emit[0])),o.dest&&(i.infNFe.dest=t?KO(o.emit[0]):YO(o.dest[0])),r&&(i.infNFe.det=Nhe(r)),o.total&&(i.infNFe.total=qhe(o.total[0])),o.pag&&(i.infNFe.pag=$he(o.pag[0])),o.infAdic&&(i.infNFe.infAdic=Lhe(o.infAdic[0])),o.cobr&&(i.infNFe.cobr=Uhe(o==null?void 0:o.cobr[0])),o.transp&&(i.infNFe.transp=zhe(o.transp[0])),i}async function The(e,t,o,r){var i;e.documento={id:$utils.uuid(),tipo:"Compra",operacao:"Nota de Entrada",status:"Digita\xE7\xE3o",notaNumero:t.ide.nNF||null,notaSerie:t.ide.serie||null,naturezaOperacao:t.ide.natOp||"",dataCompra:Xo.formatDate(new Date(t.ide.dhEmi)),dataHoraEmissao:Xo.formatDate(new Date(t.ide.dhEmi)),chaveAcesso:o.infProt.chNFe||"",observacao:((i=t==null?void 0:t.infAdic)==null?void 0:i.infCpl)||null,subTotal:Number(t.total.ICMSTot.vProd),subTotalProduto:Number(t.total.ICMSTot.vProd),valorDescontoProduto:Number(t.total.ICMSTot.vDesc),percentualDescontoProduto:$utils.arredondar(Number(t.total.ICMSTot.vDesc)/Number(t.total.ICMSTot.vProd)*100,2),totalPercentualDesconto:$utils.arredondar(Number(t.total.ICMSTot.vDesc)/Number(t.total.ICMSTot.vProd)*100,2),totalDesconto:Number(t.total.ICMSTot.vDesc),totalProduto:Number(t.total.ICMSTot.vProd)-Number(t.total.ICMSTot.vDesc),totalDocumento:Number(t.total.ICMSTot.vNF),valorFrete:Number(t.total.ICMSTot.vFrete),valorSeguro:Number(t.total.ICMSTot.vSeg),valorOutrasDespesas:Number(t.total.ICMSTot.vOutro),valorIpi:Number(t.total.ICMSTot.vIPI),valorBaseIcms:Number(t.total.ICMSTot.vBC),valorIcms:Number(t.total.ICMSTot.vICMS),valorBaseIcmsSt:Number(t.total.ICMSTot.vBCST),valorIcmsSt:Number(t.total.ICMSTot.vST),calcularTributacao:1,formaDePagamento:She[t.pag.detPag[0].tPag]},e.documentoXml={id:$utils.uuid(),xmlAux:r,xmlData:Ihe(r),idDocumento:e.documento.id};const a=(await $db.hibrido.lista({table:"empresa",whereFilter:{numeroDocumentoNacional:$filters.cpfCnpj(t.dest.CNPJ)}}))[0];$utils.verificarErro(!a,"O XML importado n\xE3o est\xE1 destinado a nenhuma das empresas cadastradas."),e.documento.descricaoEmpresa=a.nome,e.documento.numeroDocumentoEmpresa=a.numeroDocumentoNacional,e.documento.idEmpresa=a.idContato}async function Dhe(e,t){let o="";switch(t.transp.modFrete){case"0":case"2":case"3":case"9":o="CIF";break;case"1":case"4":o="FOB";break}if(e.documento.tipoFrete=o,["CIF","FOB"].includes(o)&&t.transp.transporta.CNPJ){const r={},a=(await $db.hibrido.lista({table:"contato",where:{numeroDocumentoNacional:$filters.cpfCnpj(t.transp.transporta.CNPJ)}}))[0];a!=null&&a.id?e.documento.idContatoTransportadora=a.id:(r.contato={id:$utils.uuid(),nome:t.transp.transporta.xNome,apelido:t.transp.transporta.xNome,ativo:!0,numeroDocumentoEstadual:t.transp.transporta.IE||null,numeroDocumentoNacional:$filters.cpfCnpj(t.transp.transporta.CNPJ),dataCadastro:$utils.dataAtual(),dataAlteracao:$utils.dataAtual(),observacao:"Transportadora importada do XML da nota de compra"},e.documento.idContatoTransportadora=r.contato.id);const i=e.documento.idContatoTransportadora,n=(await $db.hibrido.lista({table:"contatoGrupo",where:{idContato:i},whereFilter:{descricao:"Transportadora"}}))[0];n!=null&&n.id||(r.contatoGrupo={id:$utils.uuid(),idContato:i,descricao:"Transportadora"}),e.transportadora=r}}async function Ohe(e,t){var s,l,u,c;let o=(await $db.hibrido.lista({table:"contato",where:{numeroDocumentoNacional:$filters.cpfCnpj(t.emit.CNPJ)}}))[0];o!=null&&o.id||(o={id:$utils.uuid(),nome:t.emit.xNome,apelido:((s=t.emit)==null?void 0:s.xFant)||t.emit.xNome,ativo:!0,tipoDocumentoNacional:"CNPJ",numeroDocumentoEstadual:((l=t.emit)==null?void 0:l.IE)||null,numeroDocumentoNacional:$filters.cpfCnpj(t.emit.CNPJ),email:((u=t.emit.enderEmit)==null?void 0:u.email)||null,regime:(c=t.emit)!=null&&c.CRT?t.emit.CRT==="3"?"Normal":"SimplesNacional":null,dataCadastro:$utils.dataAtual(),dataAlteracao:$utils.dataAtual(),observacao:"Fornecedor importado do XML da nota de compra"},e.fornecedor.contato=o);const r=o.id;e.documento.idContato=r,e.documento.descricaoContato=o.apelido,e.documento.numeroDocumentoContato=o.numeroDocumentoNacional,e.documento.emailContato=o.email,e.documento.regimeContato=o.regime;const a=(await $db.hibrido.lista({table:"contatoGrupo",where:{idContato:r},whereFilter:{descricao:"Fornecedor"}}))[0];a!=null&&a.id||(e.fornecedor.contatoGrupo={id:$utils.uuid(),idContato:r,descricao:"Fornecedor"});let i=(await $db.hibrido.lista({table:"contatoTelefone",where:{idContato:r},whereFilter:{tipoTelefone:"Principal"}}))[0];i||(i={id:$utils.uuid(),idContato:r,tipoTelefone:"Principal",telefone:t.emit.enderEmit.fone},e.fornecedor.contatoTelefone=i),e.documento.telefoneContato=i.telefone;let n=(await $db.hibrido.lista({table:"contatoEndereco",where:{idContato:r},whereFilter:{grupo:"Principal"}}))[0];n||(n={id:$utils.uuid(),idContato:r,logradouro:t.emit.enderEmit.xLgr,numero:t.emit.enderEmit.nro,complemento:t.emit.enderEmit.xCpl,bairro:t.emit.enderEmit.xBairro,ibgeCod:t.emit.enderEmit.cMun,municipio:t.emit.enderEmit.xMun,uf:t.emit.enderEmit.UF,cep:t.emit.enderEmit.CEP,pais:t.emit.enderEmit.xPais,codigoPais:Number(t.emit.enderEmit.cPais)||null,grupo:"Principal"},e.fornecedor.contatoEndereco=n),e.documento.descricaoContatoEndereco=`${n.logradouro?n.logradouro+", ":""}${n.numero?n.numero+" ":""}${n.complemento?n.complemento+" - ":""}${n.bairro?n.bairro+" - ":""}${n.municipio?n.municipio+"/":""}${n.uf?n.uf:""}`}async function Phe(e,t){var d;const o=Object.values(t).map(({prod:f})=>f.NCM).filter(Boolean),r=await $db.hibrido.lista({table:"_ncm",whereIn:{ncm:o}}),a=Object.values(t).map(({prod:f})=>f.cProd).filter(Boolean),i=await $db.hibrido.lista({table:"itemFornecedor",whereFilter:{idContato:e.documento.idContato},whereIn:{referencia:a}}),n=i.map(({idItem:f})=>f).filter(Boolean),s=await $db.hibrido.lista({table:"item",whereIn:{id:n}}),l=Object.values(t).map(({prod:f})=>Number(f.CFOP)).filter(Boolean),u=await $db.hibrido.lista({table:"cfop",whereIn:{cfop:l}}),c=await $db.financeiroPlanoConta.lePorConfig("financeiro.planocontas.comprageral");for(const f in t){const m=t[f],p=m.prod,v=Object.values(m.imposto.ICMS||{})[0]||{},g=Object.values(m.imposto.IPI||{})[0]||{},x=i.find(({referencia:M})=>M===p.cProd),b=r.find(({ncm:M})=>M===p.NCM);b||console.error("NCM inv\xE1lido: ",p.NCM);const _=u.find(({cfop:M})=>M===Number(p.CFOP));_||console.error("CFOP inv\xE1lido: ",p.CFOP);let w=s.find(({id:M})=>M===(x==null?void 0:x.idItem));const S=!!w;w||(w={id:$utils.uuid(),ativo:!0,descricao:p.xProd,descricaoConcatenada:p.xProd,marca:"",grupo:"",subGrupo:"",referencia:p.cProd,valorCusto:Number(p.vUnCom)||0,valorCustoReposicao:Number(p.vUnCom)||0,valorVenda:0,percentualMarkup:0,unidade:p.uCom,codigoBarras:p.cEAN,codigoOrigem:Number(v.orig),ncm:p.NCM||null,cest:p.CEST||null,idNcm:(b==null?void 0:b.id)||null,tipo:b==null?void 0:b.tipoItem,dataCadastro:$utils.dataAtual(),_DataHoraUltimaAlteracao:$utils.dataAtual(),observacao:"Produto importado do XML da nota de compra",utilizaMarkup:!1,utilizaComposicaoValorReposicao:!1,quantidadeDisponivel:0});const D={id:$utils.uuid(),idDocumento:e.documento.id,idItem:w.id,descricaoItem:w.descricao,dataHoraEmissao:e.documento.dataHoraEmissao,operacao:"Compra de Mercadoria",operacaoFator:(d=_.fatorCompra)!=null?d:1,status:e.documento.status,codigoPlanoContaEstoque:c.codigoFinanceiroPlanoConta,idPlanoContaEstoque:c.id,tipoItem:(b==null?void 0:b.tipoItem)||"Produto",ncm:p.NCM||null,cest:p.CEST||null,idCfop:(_==null?void 0:_.id)||null,referenciaFornecedor:p.cProd||null,codigoBarrasItem:p.cEAN||null,unidade:p.uCom||null,unidadeTributada:p.uTrib||null,quantidade:Number(p.qCom)||0,quantidadeTributada:Number(p.qTrib)||0,subTotal:Number(p.vUnCom)||0,total:Number(p.vProd)||0,observacao:`Item ${Number(f)+1}`,valorItem:Number(p.vUnCom)||0,valorCusto:w.valorCusto,valorCustoReposicao:w.valorCustoReposicao,valorFreteRateado:Number(p.vFrete/p.qCom)||0,valorSeguroRateado:Number(p.vSeg/p.qCom)||0,valorOutrasDespesasRateado:Number(p.vOutro/p.qCom)||0,valorItemTributado:Number(p.vUnCom)||0,modalidadeBaseCalculo:vv(v.modBC),codigoCst:vv(v.CST),valorBaseIcms:ys(v.vBC),percentualIcms:ys(v.pICMS),valorIcms:ys(v.vICMS),codigoCstIpi:vv(g.CST),valorBaseIpi:ys(g.vBC),percentualIpi:ys(g.pIPI),valorIpi:ys(g.vIPI),modalidadeBaseCalculoST:vv(v.modBCST),valorBaseIcmsSt:ys(v.vBCST),percentualIcmsSt:ys(v.pICMSST),valorIcmsSt:ys(v.vICMSST),valorDifal:ys(v.vICMSDif),percentualIVA:ys(v.pMVAST)};e.documentosItem.push({item:w,documentoItem:D,nfeProd:p,vinculado:S})}}async function Fhe(e,t){const o=new Date(e.documento.dataCompra);let r="";if(t!=null&&t.dup)for(const a in t.dup){const i=t.dup[a];r!==""&&(r+="/");const n=new Date(`${i.dVenc}T00:00:00`)-new Date(o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate());let s=parseInt(n/(1e3*60*60*24));s===0&&(s="00"),r+=`${s}`,e.documentosCondicaoPagamento.push({id:$utils.uuid(),idDocumento:e.documento.id,dataVencimento:Xo.formatDate(new Date(`${i.dVenc}T00:00:00`)),valor:Number(i.vDup),observacao:""})}else r+="00",e.documentosCondicaoPagamento.push({id:$utils.uuid(),idDocumento:e.documento.id,dataVencimento:Xo.formatDate(new Date(e.documento.dataCompra)),valor:Number(e.documento.totalDocumento),observacao:""});e.documento.condicaoPagamento=r,e.documento.freteSeparado=!1,e.documento.naoGerarFinanceiro=!1}function Mhe(e){const t={};return e!=null&&e.cUF&&(t.cUF=e==null?void 0:e.cUF[0]),e!=null&&e.cNF&&(t.cNF=e==null?void 0:e.cNF[0]),e!=null&&e.natOp&&(t.natOp=e==null?void 0:e.natOp[0]),e!=null&&e.mod&&(t.mod=e==null?void 0:e.mod[0]),e!=null&&e.serie&&(t.serie=e==null?void 0:e.serie[0]),e!=null&&e.nNF&&(t.nNF=e==null?void 0:e.nNF[0]),e!=null&&e.dhEmi&&(t.dhEmi=e==null?void 0:e.dhEmi[0]),e!=null&&e.dhSaiEnt&&(t.dhSaiEnt=e==null?void 0:e.dhSaiEnt[0]),e!=null&&e.tpNF&&(t.tpNF=e==null?void 0:e.tpNF[0]),e!=null&&e.idDest&&(t.idDest=e==null?void 0:e.idDest[0]),e!=null&&e.cMunFG&&(t.cMunFG=e==null?void 0:e.cMunFG[0]),e!=null&&e.tpImp&&(t.tpImp=e==null?void 0:e.tpImp[0]),e!=null&&e.tpEmis&&(t.tpEmis=e==null?void 0:e.tpEmis[0]),e!=null&&e.cDV&&(t.cDV=e==null?void 0:e.cDV[0]),e!=null&&e.tpAmb&&(t.tpAmb=e==null?void 0:e.tpAmb[0]),e!=null&&e.finNFe&&(t.finNFe=e==null?void 0:e.finNFe[0]),e!=null&&e.indFinal&&(t.indFinal=e==null?void 0:e.indFinal[0]),e!=null&&e.indPres&&(t.indPres=e==null?void 0:e.indPres[0]),e!=null&&e.procEmi&&(t.procEmi=e==null?void 0:e.procEmi[0]),e!=null&&e.verProc&&(t.verProc=e==null?void 0:e.verProc[0]),t}function KO(e){var o,r,a,i,n,s,l,u,c,d,f,m,p,v,g,x,b,_,w,S;const t={enderEmit:{}};return e!=null&&e.CNPJ&&(t.CNPJ=e==null?void 0:e.CNPJ[0]),e!=null&&e.xNome&&(t.xNome=e==null?void 0:e.xNome[0]),e!=null&&e.xFant&&(t.xFant=e==null?void 0:e.xFant[0]),(o=e==null?void 0:e.enderEmit[0])!=null&&o.CEP&&(t.enderEmit.CEP=(r=e==null?void 0:e.enderEmit[0])==null?void 0:r.CEP[0]),(a=e==null?void 0:e.enderEmit[0])!=null&&a.UF&&(t.enderEmit.UF=(i=e==null?void 0:e.enderEmit[0])==null?void 0:i.UF[0]),(n=e==null?void 0:e.enderEmit[0])!=null&&n.cMun&&(t.enderEmit.cMun=(s=e==null?void 0:e.enderEmit[0])==null?void 0:s.cMun[0]),(l=e==null?void 0:e.enderEmit[0])!=null&&l.cPais&&(t.enderEmit.cPais=(u=e==null?void 0:e.enderEmit[0])==null?void 0:u.cPais[0]),(c=e==null?void 0:e.enderEmit[0])!=null&&c.fone&&(t.enderEmit.fone=(d=e==null?void 0:e.enderEmit[0])==null?void 0:d.fone[0]),(f=e==null?void 0:e.enderEmit[0])!=null&&f.nro&&(t.enderEmit.nro=(m=e==null?void 0:e.enderEmit[0])==null?void 0:m.nro[0]),(p=e==null?void 0:e.enderEmit[0])!=null&&p.xBairro&&(t.enderEmit.xBairro=(v=e==null?void 0:e.enderEmit[0])==null?void 0:v.xBairro[0]),(g=e==null?void 0:e.enderEmit[0])!=null&&g.xLgr&&(t.enderEmit.xLgr=(x=e==null?void 0:e.enderEmit[0])==null?void 0:x.xLgr[0]),(b=e==null?void 0:e.enderEmit[0])!=null&&b.xMun&&(t.enderEmit.xMun=(_=e==null?void 0:e.enderEmit[0])==null?void 0:_.xMun[0]),(w=e==null?void 0:e.enderEmit[0])!=null&&w.xPais&&(t.enderEmit.xPais=(S=e==null?void 0:e.enderEmit[0])==null?void 0:S.xPais[0]),e!=null&&e.IE&&(t.IE=e==null?void 0:e.IE[0]),e!=null&&e.CRT&&(t.CRT=e==null?void 0:e.CRT[0]),t}function YO(e){var o,r,a,i,n,s,l,u,c,d,f,m,p,v,g,x,b,_,w,S,D,M;const t={enderDest:{}};return e!=null&&e.CNPJ&&(t.CNPJ=e==null?void 0:e.CNPJ[0]),e!=null&&e.IE&&(t.IE=e==null?void 0:e.IE[0]),e!=null&&e.xNome&&(t.xNome=e==null?void 0:e.xNome[0]),e!=null&&e.indIEDest&&(t.indIEDest=e==null?void 0:e.indIEDest[0]),(o=e==null?void 0:e.enderDest[0])!=null&&o.CEP&&(t.enderDest.CEP=(r=e==null?void 0:e.enderDest[0])==null?void 0:r.CEP[0]),(a=e==null?void 0:e.enderDest[0])!=null&&a.UF&&(t.enderDest.UF=(i=e==null?void 0:e.enderDest[0])==null?void 0:i.UF[0]),(n=e==null?void 0:e.enderDest[0])!=null&&n.cMun&&(t.enderDest.cMun=(s=e==null?void 0:e.enderDest[0])==null?void 0:s.cMun[0]),(l=e==null?void 0:e.enderDest[0])!=null&&l.cPais&&(t.enderDest.cPais=(u=e==null?void 0:e.enderDest[0])==null?void 0:u.cPais[0]),(c=e==null?void 0:e.enderDest[0])!=null&&c.fone&&(t.enderDest.fone=(d=e==null?void 0:e.enderDest[0])==null?void 0:d.fone[0]),(f=e==null?void 0:e.enderDest[0])!=null&&f.nro&&(t.enderDest.nro=(m=e==null?void 0:e.enderDest[0])==null?void 0:m.nro[0]),(p=e==null?void 0:e.enderDest[0])!=null&&p.xBairro&&(t.enderDest.xBairro=(v=e==null?void 0:e.enderDest[0])==null?void 0:v.xBairro[0]),(g=e==null?void 0:e.enderDest[0])!=null&&g.xCpl&&(t.enderDest.xCpl=(x=e==null?void 0:e.enderDest[0])==null?void 0:x.xCpl[0]),(b=e==null?void 0:e.enderDest[0])!=null&&b.xLgr&&(t.enderDest.xLgr=(_=e==null?void 0:e.enderDest[0])==null?void 0:_.xLgr[0]),(w=e==null?void 0:e.enderDest[0])!=null&&w.xMun&&(t.enderDest.xMun=(S=e==null?void 0:e.enderDest[0])==null?void 0:S.xMun[0]),(D=e==null?void 0:e.enderDest[0])!=null&&D.xPais&&(t.enderDest.xPais=(M=e==null?void 0:e.enderDest[0])==null?void 0:M.xPais[0]),t}function Nhe(e){var o,r,a,i,n,s,l,u,c,d,f,m,p;let t={};for(let v in e){const g=(r=(o=e[v])==null?void 0:o.prod)==null?void 0:r[0],x=(i=(a=e[v])==null?void 0:a.imposto)==null?void 0:i[0];t[v]={nItem:((s=(n=e[v])==null?void 0:n.$)==null?void 0:s.nItem)||((u=(l=e[v])==null?void 0:l.nItem)==null?void 0:u[0]),prod:{CFOP:g!=null&&g.CFOP?g.CFOP[0]:"",NCM:g!=null&&g.NCM?g.NCM[0]:"",CEST:(c=g==null?void 0:g.CEST)==null?void 0:c[0],cBenef:g!=null&&g.cBenef?g.cBenef[0]:"",cEAN:(g==null?void 0:g.cEAN)&&g.cEAN[0]!=="SEM GTIN"?g.cEAN[0]:"",cEANTrib:(g==null?void 0:g.cEANTrib)&&g.cEANTrib[0]!=="SEM GTIN"?g.cEANTrib[0]:"",cProd:g!=null&&g.cProd?g.cProd[0]:"",indTot:g!=null&&g.indTo?g.indTot[0]:"",qCom:g!=null&&g.qCom?Number(g.qCom):0,qTrib:g!=null&&g.qTrib?Number(g.qTrib):0,uCom:g!=null&&g.uCom?g.uCom[0]:"",uTrib:g!=null&&g.uTrib?g.uTrib[0]:"",vFrete:g!=null&&g.vFrete?Number(g.vFrete):0,vOutro:g!=null&&g.vOutro?Number(g.vOutro):0,vSeg:g!=null&&g.vSeg?Number(g.vSeg):0,vProd:g!=null&&g.vProd?Number(g.vProd):0,vUnCom:g!=null&&g.vUnCom?Number(g.vUnCom):0,vUnTrib:g!=null&&g.vUnTrib?Number(g.vUnTrib):0,xPed:g!=null&&g.xPed?g.xPed[0]:"",xProd:g!=null&&g.xProd?g.xProd[0]:""},imposto:{COFINS:Rhe((d=x==null?void 0:x.COFINS)==null?void 0:d[0]),ICMS:khe((f=x==null?void 0:x.ICMS)==null?void 0:f[0]),PIS:Vhe((m=x==null?void 0:x.PIS)==null?void 0:m[0]),IPI:Bhe((p=x==null?void 0:x.IPI)==null?void 0:p[0])}}}return t}function khe(e){var r,a,i,n,s,l,u,c,d,f,m,p,v,g,x,b,_,w,S,D;const t=Object.keys(e!=null?e:{})[0];let o={};return t&&(o[t]={CST:(r=e[t][0])!=null&&r.CST&&((a=e[t][0])==null?void 0:a.CST[0])||"",modBC:(i=e[t][0])!=null&&i.modBC&&((n=e[t][0])==null?void 0:n.modBC[0])||"",orig:(s=e[t][0])!=null&&s.orig&&((l=e[t][0])==null?void 0:l.orig[0])||"",pICMS:(u=e[t][0])!=null&&u.pICMS?((c=e[t][0])==null?void 0:c.pICMS[0])||0:"",pRedBC:(d=e[t][0])!=null&&d.pRedBC?((f=e[t][0])==null?void 0:f.pRedBC[0])||0:"",vBC:(m=e[t][0])!=null&&m.vBC?((p=e[t][0])==null?void 0:p.vBC[0])||0:"",vICMS:(v=e[t][0])!=null&&v.vICMS?((g=e[t][0])==null?void 0:g.vICMS[0])||0:"",vBCST:(x=e[t][0])!=null&&x.vBCST?((b=e[t][0])==null?void 0:b.vBCST[0])||0:"",pICMSST:(_=e[t][0])!=null&&_.pICMSST?((w=e[t][0])==null?void 0:w.pICMSST[0])||0:"",vICMSST:(S=e[t][0])!=null&&S.vICMSST?((D=e[t][0])==null?void 0:D.vICMSST[0])||0:""}),o}function Rhe(e){var r,a,i,n;const t=Object.keys(e!=null?e:{})[0];let o={};return t&&(o[t]={CST:e[t][0].hasOwnProperty("CST")&&((r=e[t][0])==null?void 0:r.CST[0])||"",vBC:e[t][0].hasOwnProperty("vBC")&&((a=e[t][0])==null?void 0:a.vBC[0])||0,pCOFINS:e[t][0].hasOwnProperty("pCOFINS")&&((i=e[t][0])==null?void 0:i.pCOFINS[0])||0,vCOFINS:e[t][0].hasOwnProperty("vCOFINS")&&((n=e[t][0])==null?void 0:n.vCOFINS[0])||0}),o}function Vhe(e){var r,a,i,n;const t=Object.keys(e!=null?e:{})[0];let o={};return t&&(o[t]={CST:e[t][0].hasOwnProperty("CST")&&((r=e[t][0])==null?void 0:r.CST[0])||"",vBC:e[t][0].hasOwnProperty("vBC")&&((a=e[t][0])==null?void 0:a.vBC[0])||0,pPIS:e[t][0].hasOwnProperty("pPIS")&&((i=e[t][0])==null?void 0:i.pPIS[0])||0,vPIS:e[t][0].hasOwnProperty("vPIS")&&((n=e[t][0])==null?void 0:n.vPIS[0])||0}),o}function Bhe(e){var r,a,i,n;const t=Object.keys(e!=null?e:{}).find(s=>s==="IPITrib"||s==="IPINT");let o={};return t&&(o[t]={CST:e[t][0].hasOwnProperty("CST")&&((r=e[t][0])==null?void 0:r.CST[0])||"",vBC:e[t][0].hasOwnProperty("vBC")&&((a=e[t][0])==null?void 0:a.vBC[0])||0,pIPI:e[t][0].hasOwnProperty("pIPI")&&((i=e[t][0])==null?void 0:i.pIPI[0])||0,vIPI:e[t][0].hasOwnProperty("vIPI")&&((n=e[t][0])==null?void 0:n.vIPI[0])||0}),o}function qhe(e){if(!e)return;const t=Object.keys(e);let o={};for(let r in t){let a=t[r];o[a]={};const i=Object.keys(e[t[r]][0]);for(let n in i){let s=i[n];o[a][s]=e[t[r]][0][i[n]][0]}}return o}function Lhe(e){if(!!e)return{infAdFisco:e!=null&&e.infAdFisco?e==null?void 0:e.infAdFisco[0]:"",infCpl:e!=null&&e.infCpl?e==null?void 0:e.infCpl[0]:""}}function $he(e){if(!e)return;let t=[];for(let o in e.detPag){const r={};e.detPag[o].hasOwnProperty("indPag")&&(r.indPag=e.detPag[o].indPag[0]),e.detPag[o].hasOwnProperty("tPag")&&(r.tPag=e.detPag[o].tPag[0]),e.detPag[o].hasOwnProperty("vPag")&&(r.vPag=e.detPag[o].vPag[0]),t.push(r)}return{detPag:t}}function Uhe(e){if(!e)return;const t=Object.keys(e);let o={};for(let r in t){let a=t[r];o[a]={};for(let i=0;i<Object.keys(e[t[r]]).length;i++){o[a][i]={};const n=Object.keys(e[t[r]][i]);for(let s in n){let l=n[s];o[a][i][l]=e[t[r]][i][n[s]][0]}}}return o}function zhe(e){if(!e)return;const t={};return t.modFrete=e.modFrete[0],t.transporta={},e.transporta&&Object.keys(e.transporta[0]).forEach(o=>{t.transporta[o]=e.transporta[0][o][0]}),t.vol={},e.vol&&Object.keys(e.vol).forEach(o=>{t.vol[o]={},Object.keys(e.vol[o]).forEach(r=>{t.vol[o][r]=e.vol[o][r][0]})}),t}async function Hhe({xmlString:e,xmlEstrangeiro:t}){const o=await Oc.parseStringPromise(e),r=Ahe(o,t),a={documento:{},documentoXml:{},documentosItem:[],documentosCondicaoPagamento:[],transportadora:{},fornecedor:{},itens:[],itensFornecedor:[]};return await The(a,r.infNFe,r.protNFe,e),await Dhe(a,r.infNFe),await Ohe(a,r.infNFe),await Fhe(a,r.infNFe.cobr),await Phe(a,r.infNFe.det),a}const jhe=["id","descricaoContato","descricaoEmpresa","numeroDocumentoContato","numeroDocumentoEmpresa","numero","notaNumero","telefoneContato","ativo"];var Ghe={grava:async function({atual:e,original:t={}}){var r,a,i,n,s,l,u,c,d,f,m;await this.gravaFornecedor({atual:e.fornecedor,original:t.fornecedor});const o=[];(r=e.transportadora)!=null&&r.contato&&await $db.hibrido.preGrava(o,"contato",{atual:(a=e.transportadora)==null?void 0:a.contato,original:(i=t.transportadora)==null?void 0:i.contato}),(n=e.transportadora)!=null&&n.contatoGrupo&&await $db.hibrido.preGrava(o,"contatoGrupo",{atual:(s=e.transportadora)==null?void 0:s.contatoGrupo,original:(l=t.transportadora)==null?void 0:l.contatoGrupo}),await $db.hibrido.preGrava(o,"documento",{atual:e.documento,original:t.documento}),(u=e.documentosItem)!=null&&u.length&&await $db.hibrido.preGravaLista(o,"documentoItem",{atual:e.documentosItem.map(({documentoItem:p})=>p),original:t.documentosItem?t.documentosItem.map(({documentoItem:p})=>p):[]}),(c=e.documentosCondicaoPagamento)!=null&&c.length&&await $db.hibrido.preGravaLista(o,"documentoCondicaoPagamento",{atual:e.documentosCondicaoPagamento,original:t.documentosCondicaoPagamento}),await $db.hibrido.enviaLote(o),e.documentoXml&&await $db.hibrido.grava("documentoXML",{atual:e.documentoXml,original:t.documentoXml}),e.documentoFiscalEletronico&&await $db.hibrido.grava("documentoFiscalEletronico",{atual:e.documentoFiscalEletronico,original:t.documentoFiscalEletronico}),(d=e.transportadora)!=null&&d.contato&&await $db.contato.carregarMemoria((m=(f=e.transportadora)==null?void 0:f.contato)==null?void 0:m.id)},gravaFornecedor:async function({atual:e,original:t={}}){var o;e!=null&&e.contato&&(await $db.hibrido.grava("contato",{atual:e==null?void 0:e.contato,original:t==null?void 0:t.contato}),await $db.contato.carregarMemoria((o=e==null?void 0:e.contato)==null?void 0:o.id)),e!=null&&e.contatoGrupo&&await $db.hibrido.grava("contatoGrupo",{atual:e==null?void 0:e.contatoGrupo,original:t==null?void 0:t.contatoGrupo}),e!=null&&e.contatoTelefone&&await $db.hibrido.grava("contatoTelefone",{atual:e==null?void 0:e.contatoTelefone,original:t==null?void 0:t.contatoTelefone}),e!=null&&e.contatoEndereco&&await $db.hibrido.grava("contatoEndereco",{atual:e==null?void 0:e.contatoEndereco,original:t==null?void 0:t.contatoEndereco})},leListaCompleta:async function(e){return $db.hibrido.isOnline()?this.leListaCompletaOnline(e):this.leListaCompletaOffline(e)},leListaCompletaOnline:async function({filtros:e,limit:t,page:o,sort:r,dir:a}){const i=await $utils.geeksApi({listaCompras:{funcao:"3ACCD04D-E8FA-40E1-B7C4-296B1D57AF0E",filtros:e,limit:t,page:o,sort:r,dir:a}}),{data:n,total:s,totalPages:l}=i.data.listaCompras;return{data:n,total:s,totalPages:l}},leListaCompletaOffline:async function({filtros:e,limit:t,page:o,sort:r,dir:a=!1}){var _,w,S,D;let i="";for(const M in e)e[M]===null||e[M]===void 0?delete e[M]:typeof e[M]=="string"&&(e[M]=e[M].trim());let n=e||{};if("id"in n)return $db.hibrido.le({table:"documento",id:n.id});let s={tipo:"Compra"};"idContato"in n&&n.idContato&&(s.idContato=n.idContato),"idContatoDigitador"in n&&n.idContatoDigitador&&(s.idContatoDigitador=n.idContatoDigitador),"status"in n&&n.status&&n.status.indexOf(",")===-1&&(s.status=n.status),"operacao"in n&&n.operacao&&(s.operacao=n.operacao),"codigoContato"in n&&n.codigoContato&&(s.codigoContato=n.codigoContato);let l=await $erp().documento;Object.keys(s).length&&(l=await l.where(s));let u=n.periodoEmissao&&(n.periodoEmissao.ini&&n.periodoEmissao.ini.length>2||n.periodoEmissao.fim&&n.periodoEmissao.fim.length>2);if("periodoEmissao"in n&&n.periodoEmissao&&u){const M=new Date(n.periodoEmissao.ini).setHours(0,0,0,0),O=new Date(n.periodoEmissao.fim).setHours(0,0,0,0);l=await l.filter(T=>{const I=new Date(T.dataHoraEmissao).setHours(0,0,0,0);return M&&O?I>=M&&I<=O:M?I>=M:O?I<=O:!0})}let c=n.periodoFinalizado&&(n.periodoFinalizado.ini&&n.periodoFinalizado.ini.length>2||n.periodoFinalizado.fim&&n.periodoFinalizado.fim.length>2);if("periodoFinalizado"in n&&n.periodoFinalizado&&c){const M=new Date(n.periodoFinalizado.ini).setHours(0,0,0,0),O=new Date(n.periodoFinalizado.fim).setHours(0,0,0,0);l=await l.filter(T=>{const I=new Date(T.dataHoraFinalizado).setHours(0,0,0,0);return M&&O?I>=M&&I<=O:M?I>=M:O?I<=O:!0})}if(n.idContatoEmpresa&&(l=await l.filter(M=>M.idEmpresa?n.idContatoEmpresa===M.idEmpresa:!1)),"fornecedor"in n&&n.fornecedor.nome.length>0&&(l=await l.filter(M=>{if(!M.descricaoContato)return!1;const O=$utils.removerCaracteresEspeciais(M.descricaoContato.toString().toLowerCase()),T=$utils.removerCaracteresEspeciais(n.fornecedor.nome.toString().toLowerCase());return O.indexOf(T)!==-1})),"valorTotal"in n&&n.valorTotal!==0&&(l=await l.filter(M=>M.totalDocumento>=n.valorTotal)),n!=null&&n.status&&n.status.indexOf(",")!==-1){const M=n.status;l=l.filter(function(O){return M.indexOf(O.status)!==-1})}"termoBusca"in n&&n.termoBusca&&(i+=` ${$utils.tratamentoCompletoString(n.termoBusca||"")}`);let d=[];if(d=await l.toArray()||[],r&&a&&(d=Aa.exports.orderBy(d,r,a)),i){let M=[],O=new Set(i.split(" "));O=Array.from(O);for(const T of d){let I,N,P,F="";I=((_=T.telefoneContato)!=null?_:"").replace(/\D/g,""),I&&I!==T.telefoneContato&&(F+=` ${I}`),N=(w=T.descricaoContato)!=null?w:"",N&&N!==T.descricaoContato&&(F+=` ${N}`),P=(S=T.descricaoEmpresa)!=null?S:"",P&&P!==T.descricaoEmpresa&&(F+=` ${P}`);for(const z of jhe)z!=="ativo"&&(F+=` ${(D=T[z])!=null?D:""}`);F=$utils.tratamentoCompletoString(F);let L=!0;for(const z of O)if(!~F.indexOf(z)){L=!1;break}L&&M.push(T)}d=M}if("numero"in n&&n.numero!==0){let M=[];M=d.filter(O=>parseInt(O.notaNumero)===parseInt(n.numero)),d=M}if("numeroCompra"in n&&n.numeroCompra!==0){let M=[];M=d.filter(O=>parseInt(O.numero)===parseInt(n.numeroCompra)),M.length>0&&(d=M)}const f=d.length;let m=t,v=((o||1)-1)*m;d=d.splice(v,m);let g=d,x=f,b=Math.ceil(x/m)||1;return{data:{compras:g},total:x,totalPages:b}},importaXml:Hhe};async function Tk(e={}){if("id"in e)return e.id?await Se()[this.nomeTabela].get(e.id)||{}:{};const t={};for(const o of this.filtrosTabela)if(o in e)if(![null,void 0].includes(e[o]))t[o]=e[o];else return[];return Object.keys(t).length?Se()[this.nomeTabela].where(t).toArray():Se()[this.nomeTabela].toArray()}async function Dk(e){this.cache=null;const t=cn(e.original||{},e.atual);Object.keys(e.original||{}).length?Object.keys(t).length&&(await Se()[this.nomeTabela].update(e.atual.id,t),await ut("atualizar",this.nomeTabela,e.atual.id,t)):(await Se()[this.nomeTabela].put(t),await ut("adicionar",this.nomeTabela,t.id,t))}async function Ok(e){this.cache=null,await Se()[this.nomeTabela].delete(e),await ut("remover",this.nomeTabela,e)}const In={};async function Whe(e){var s,l;const{idContatoDestinatario:t,idContatoEmitente:o}=e,r=new Date;if((In==null?void 0:In.timeout)&&!(r>new Date(In.timeout)))return;const a=await $erp().documentoOperacao.toArray();let i=[],n=[];if(t){const u=await $erp().contato.get(t),c=await $erp().contatoEndereco.where({idContato:t}).toArray(),d=(s=c.find(f=>{var m,p;return((p=(m=f.grupo)==null?void 0:m.trim())==null?void 0:p.toLowerCase())==="principal"}))!=null?s:c[0];i.push(u),d&&n.push(d)}if(o){const u=await $erp().contato.get(o),c=await $erp().contatoEndereco.where({idContato:o}).toArray(),d=(l=c.find(f=>{var m,p;return((p=(m=f.grupo)==null?void 0:m.trim())==null?void 0:p.toLowerCase())==="principal"}))!=null?l:c[0];i.push(u),d&&n.push(d)}In.documentoOperacao=a,In.contatos=i,In.contatosEndereco=n,In.timeout=r.setSeconds(r.getSeconds()+3)}function Qhe(e={}){const{ufOrigem:t,ufDestino:o,origemMercadoria:r}=e,a=new Date;if(a.setHours(0,0,0,0),[1,2,3,6,7].includes(Number(r))&&t!==o)return 4;if(t===o){if(["ES","GO","MS","MT","RS","SC"].includes(t))return t==="GO"&&a>=new Date(2024,3,1)?19:17;if(["RO"].includes(t))return a>=new Date(2024,0,12)?19.5:17.5;if(["AP","CE","DF","MG","PB","PE","RJ","SP","TO"].includes(t))return["CE","PB","TO"].includes(t)&&a>=new Date(2024,0,1)?20:t==="PE"&&a>=new Date(2024,0,1)?20.5:t==="DF"&&a>=new Date(2024,0,21)||t==="RJ"&&a>=new Date(2024,2,20)?20:18;if(["AC","AL","BA","PA","PR","SE"].includes(t))return t==="BA"&&a>=new Date(2024,1,7)?20.5:t==="PR"&&a>=new Date(2024,2,18)?19.5:19;if(["AM","MA","RN","RR"].includes(t))return t==="RN"&&a>=new Date(2024,0,1)?18:t==="MA"&&a>=new Date(2024,1,19)?22:20;if(["PI"].includes(t))return 21}return["MG","PR","RS","RJ","SC","SP"].includes(o)?12:["MG","PR","RS","RJ","SC","SP"].includes(t)?7:12}async function Xhe(e={}){const{documento:t,documentosItens:o}=e,r=t==null?void 0:t.idEmpresa,a=t==null?void 0:t.idContato;await Whe({idContatoEmitente:r,idContatoDestinatario:a});const i=In.documentoOperacao.find(c=>c.codigoDocumentoOperacao===(t==null?void 0:t.codigoDocumentoOperacao)),n=(i==null?void 0:i.finalidade)===100;let s,l;s=t.tipoFrete==="FOB",l=t.valorFrete||0;const u=$utils.ratear({itens:o.map(c=>({id:c.id,valor:c.valorRealTotal})),saldo:l});for(const c of o){const d=await $utils.impostoV2({documento:t,documentoItem:c}),f=u.find(D=>D.id===c.id);let m=(f==null?void 0:f.parcela)||0,p,v,g,x,b;const _=d==null?void 0:d.saida;g=(_==null?void 0:_.pIPI)/100*c.valorRealTotal,g=$utils.arredondar(g),p=c.valorRealTotal+(!n&&s?m:0),p=$utils.arredondar(p),v=(c.valorRealTotal+(n?g:0)+(!n&&s?m:0))*(1+(_==null?void 0:_.pMVAST)/100),v=$utils.arredondar(v),x=p*((_==null?void 0:_.pICMS)/100),x=$utils.arredondar(x),c.operacaoFator===-1&&(b=v*((_==null?void 0:_.pICMSST)/100)-x,b=$utils.arredondar(b),b<0&&(b=0)),c.operacaoFator===1&&(b=v*((_==null?void 0:_.pICMSST)/100)+-1*x,b=$utils.arredondar(b),b>0&&(b=0)),In.contatos.find(D=>D.id===r);const w=In.contatosEndereco.find(D=>D.idContato===r);In.contatos.find(D=>D.id===a);const S=In.contatosEndereco.find(D=>D.idContato===a);S==null||S.uf,w==null||w.uf,c.valorIpi=g||0,c.percentualIpi=(_==null?void 0:_.pIPI)||0,c.valorIcms=x||0,c.valorIcmsSt=0,c.valorDifal=0,n&&b&&(c.valorDifal=b),!n&&b&&(c.valorIcmsSt=b)}}const Ju={};async function Khe(){var o;const e=new Date;if((Ju==null?void 0:Ju.timeout)&&!(e>new Date(Ju.timeout)))return;const t=await $erp().configuracaoImposto.toArray();for(const r of t)r.json=JSON.parse((o=r.json)!=null?o:null);Ju.configuracaoImposto=t.sort((r,a)=>Number(r.json.ordem||0)-Number(a.json.ordem||0)),Ju.timeout=e.setSeconds(e.getSeconds()+3)}var Yhe={nomeTabela:"configuracaoImposto",filtrosTabela:[],le:Tk,grava:Dk,remove:Ok,async pesquisa(e,t=[]){e.emitente.tributacaoSetor=e.emitente.tributacaoSetor||"99",e.emitente.tributacao=e.emitente.tributacao||"",e.destinatario=e.destinatario||{},e.destinatario.uf=e.destinatario.uf||e.emitente.uf,e.destinatario.pessoa=e.destinatario.pessoa||"",e.destinatario.regime=e.destinatario.regime||"",e.destinatario.tributacaoSetor=e.destinatario.tributacaoSetor||"99",e.destinatario.tributacao=e.destinatario.tributacao||"",e.destinatario.indicadorIE=e.destinatario.indicadorIE||"",e.destinatario.consumidor=e.destinatario.consumidor||"S",e.destinatario.destino=e.destinatario.destino||(e.destinatario.uf===e.emitente.uf?"1":"2"),e.cest=e.cest||"",e.origemMercadoria=e.origemMercadoria||"0",await Khe();const o=new Date(new Date().toDateString());let r,a=0,i="";const n=[];for(const s of Ju.configuracaoImposto){const l=s.json;if(a&&Number(l.ordem)>a||!!l.dataInicio&&new Date(l.dataInicio)>o||!!l.dataFim&&new Date(l.dataFim)<o)continue;const u=[{entrada:e.cfop,config:l.cfops||[],campoLista:"codigo",descricao:"cfop"},{entrada:e.destinatario.consumidor,config:l.destinatario.consumidor,descricao:"destinatario.consumidor"},{entrada:e.destinatario.destino,config:l.destinatario.destino,descricao:"destinatario.destino"},{entrada:e.destinatario.indicadorIE,config:l.destinatario.indicadorIE,descricao:"destinatario.indicadorIE"},{entrada:e.destinatario.pessoa,config:l.destinatario.pessoa,descricao:"destinatario.pessoa"},{entrada:e.destinatario.regime,config:l.destinatario.regime,descricao:"destinatario.regime"},{entrada:e.destinatario.tributacao,config:l.destinatario.tributacao,descricao:"destinatario.tributacao"},{entrada:e.destinatario.tributacaoSetor,config:l.destinatario.tributacaoSetor,descricao:"destinatario.tributacaoSetor"},{entrada:e.destinatario.uf,config:l.destinatario.ufs||[],campoLista:"codigo",descricao:"destinatario.ufs"},{entrada:e.emitente.regime,config:l.emitente.regime,descricao:"emitente.regime"},{entrada:e.emitente.tributacao,config:l.emitente.tributacao,descricao:"emitente.tributacao"},{entrada:e.emitente.tributacaoSetor,config:l.emitente.tributacaoSetor,descricao:"emitente.tributacaoSetor"},{entrada:e.emitente.uf,config:l.emitente.ufs||[],campoLista:"codigo",descricao:"emitente.ufs"},{entrada:e.ncm,config:l.ncms||[],campoLista:"codigo",descricao:"ncms"},{entrada:e.origemMercadoria,config:l.origemMercadoria,descricao:"origemMercadoria"}];let c=!0;const d=l.ordem;for(const g of u){const{entrada:x,config:b,campoLista:_,descricao:w}=g;if(_){if(!!x&&b.length>0&&!b.find(S=>S[_]===x)){n.push(`Ordem:${d} ${w} entrada:${x} filtro:${JSON.stringify(b.map(S=>S[_]))}`),c=!1;break}}else if(!!x&&x!==b&&b!=="T"){n.push(`Ordem:${d} ${w} entrada:${x} filtro:${b}`),c=!1;break}}if(!c)continue;if(!!l.ncms&&!!l.ncms.length&&!l.ncms.find(g=>g.codigo===e.ncm&&(g.cest===e.cest||!g.cest))){c=!1;continue}a=Number(l.ordem),i=l.descricao,r=l.imposto;const f=l.icmsInterestadual.find(g=>g.uf===e.destinatario.uf),m=e.emitente.uf,p=e.destinatario.uf;r.icmsInterestadual=f,m!==p&&(r.pICMS=Qhe({ufOrigem:e.emitente.uf,ufDestino:e.destinatario.uf,origemMercadoria:e.origemMercadoria})),m===p&&(r.pICMS=Number(f.pICMSUFDest||0));const v=await $db.ncm.ncmST({idItem:e.idItem,ncm:e.ncm,ufDestinatario:e.destinatario.uf});r.pICMSST=0,r.pMVAST=0,r.pRedBCST=0,v&&r.cstCsosn!=="500"&&(r.pICMSST=Number(f.pICMSUFDest||0),r.pMVAST=Number(f.pMVAST||0),r.pRedBCST=Number(f.pRedBCSTInter||0))}return a===0&&(console.error(`Configura\xE7\xE3o de imposto n\xE3o encontrada.
Filtro de entrada:
`,JSON.stringify(e,0,2),`
Confer\xEAncia:
`,n.join(`
`)),t.push(e)),{ordem:a,descricao:i,saida:r,entrada:e}}};const Jhe=60,Zhe={id:"",nome:"",valor:"",texto:"",observacao:""};let fi;function KC(){fi={timeout:0,configuracoes:[],configuracoesPorNome:{}}}KC();const e1e={vazio:Zhe,limpaCache:KC,async atualizaCache(){const e=async()=>{const t=await $db.hibrido.lista({table:"configuracoes",columns:["nome","valor","texto","observacao","idEmpresa"]}),o={};for(const a of t)o[a.nome]=o[a.nome]||[],o[a.nome].push(a);const r=new Date;fi={timeout:r.setSeconds(r.getSeconds()+Jhe),configuracoes:t,configuracoesPorNome:o}};fi.processando||(fi.processando=e());try{await fi.processando}catch(t){throw KC(),t}},async verificaCache(){new Date>new Date(fi.timeout)&&await this.atualizaCache()},valores:{},async inicializa(){},async le(e){if(e=e||{},e.id)return $db.hibrido.le({table:"configuracoes",id:e.id});await this.verificaCache();let t=fi.configuracoes||[];return e.nome&&(t=t.filter(o=>o.nome===e.nome)),e.prefixoNome&&(t=t.filter(o=>{var r;return(r=o==null?void 0:o.nome)==null?void 0:r.startsWith(e.prefixoNome)})),e.valor&&(t=t.filter(o=>o.valor===e.valor)),e.texto&&(t=t.filter(o=>o.texto===e.texto)),e.observacao&&(t=t.filter(o=>o.observacao===e.observacao)),e.idEmpresa&&(t=t.filter(o=>o.idEmpresa===e.idEmpresa)),t},async porNome(e,t){Na(!e,"Nome de configura\xE7\xE3o n\xE3o especificado."),await this.verificaCache();const o=fi.configuracoesPorNome[e]||[];let r=t?o.filter(n=>(n.valor||"").trim()&&n.idEmpresa===t):[],a=o.filter(n=>(n.valor||"").trim()&&!n.idEmpresa);const i=[];return r=r.filter(n=>i.includes(n.valor)?!1:(i.push(n.valor),!0)),a=a.filter(n=>i.includes(n.valor)?!1:(i.push(n.valor),!0)),[...r,...a]},async leLaboratorioEssilor(e,t){await this.verificaCache();let o=fi.configuracoesPorNome["compra.essilor.webservice"]||[];o=o.filter(n=>Number(n.valor)===e);let r=o.find(n=>n.idEmpresa===t);r||(r=o.find(n=>(n.idEmpresa||"")==="")),Na(!r,"Laborat\xF3rio sem configura\xE7ao de usuario e senha. (compra.essilor.webservice)");const[a,i]=r.texto.split(";");return Na(!a||!i,"Laborat\xF3rio com configura\xE7ao inv\xE1lida de usuario e senha. (compra.essilor.webservice)"),{usuario:a,senha:i}},async leLaboratorioZeiss(e,t){await this.verificaCache();let o=fi.configuracoesPorNome["compra.zeiss.webservice"]||[];o=o.filter(i=>Number(i.valor)===e);let r=o.find(i=>i.idEmpresa===t);return r||(r=o.find(i=>(i.idEmpresa||"")==="")),Na(!r,"Laborat\xF3rio sem configura\xE7ao de apiKey. (compra.zeiss.webservice)"),{apiKey:r.texto}},async leConfigLaboratorio(e,t,o){await this.verificaCache();let r=fi.configuracoesPorNome[e]||[];r=r.filter(u=>Number(u.valor)===t);let a=r.find(u=>u.idEmpresa===o);a||(a=r.find(u=>(u.idEmpresa||"")==="")),Na(!a,`Laborat\xF3rio sem configura\xE7ao de usuario e senha. (${e})`);const[i,n,s,l]=a.texto.split(";");return Na(!i||!n||!s,`Laborat\xF3rio com configura\xE7ao inv\xE1lida de ambiente, usuario e senha. (${e})`),{ambiente:i,usuario:n,senha:s,cnpj:l}},async leLista(e){return await this.verificaCache(),fi.configuracoesPorNome[e]||[]},async leValor(e,t=""){var r;return await this.verificaCache(),(((r=fi.configuracoesPorNome[e])==null?void 0:r[0])||{}).valor||t},async leValorComFiltroEmpresa(e,t,o=""){await this.verificaCache();const r=fi.configuracoesPorNome[e]||[];let a=r.find(i=>i.idEmpresa===t);return a||(a=r.find(i=>(i.idEmpresa||"")==="")),(a||{}).valor||o},async leValorNumerico(e,t=0){var a;await this.verificaCache();const o=(a=fi.configuracoesPorNome[e])==null?void 0:a[0];if(!o||!o.valor)return t;const r=Number(o.valor);return r===0||!!r?r:t},async leValorNumericoComFiltroEmpresa(e,t,o=0){await this.verificaCache();const r=fi.configuracoesPorNome[e]||[];let a=r.find(n=>n.idEmpresa===t);if(a||(a=r.find(n=>(n.idEmpresa||"")==="")),!a||!a.valor)return o;const i=Number(a.valor);return i===0||!!i?i:o},async leOnline(e){return e.nome?Do(`select valor from configuracoes where nome=${Bt(e.nome)}`):[]},async atualizaPorNome(e,t,o){const r={atual:{},original:{}},a=await $db.hibrido.lista({table:"configuracoes",where:{nome:e}});let i=a.find(n=>n.idEmpresa===t);i||(i=a.find(n=>(n.idEmpresa||"")==="")),i&&(r.original=$utils.clonarV2(i),r.atual=$utils.clonarV2(i),r.atual.valor=o),i||(r.original={},r.atual={id:$utils.uuid(),nome:e,valor:o}),this.grava(r)},grava:async e=>{if(e=$utils.compactarObjeto(e),!Object.keys(e.original||{}).length)await $erpPut().configuracoes.put(e.atual),await $utils.sincronismoEnviar("adicionar","configuracoes",e.atual.id,e.atual);else{const t=$utils.diferencaObjetos(e.original,e.atual);Object.keys(t).length&&(await $erpUpdate().configuracoes.update(e.atual.id,t),await $utils.sincronismoEnviar("atualizar","configuracoes",e.atual.id,t))}}},Pk=["id","idContatoVendedor","idContatoAssistente","codigoContato","nome","apelido","numeroDocumentoNacional","numeroDocumentoMunicipal","segmento","ativo","telefones","bairros","municipios","ufs","imagem","dataAbertura","dataCadastro"];let Hc=[],Gu;const kf={id:"",apelido:"",nome:"",imagem:"",numeroDocumentoNacional:"",ativo:!0,consulta:[],endereco:[{bairro:"",cep:"",complemento:"",grupo:"",ibgeCod:"",logradouro:"",municipio:"",numero:"",pais:"",uf:""}],filhos:[],grupo:[],nomesGrupo:[],redeSocial:[],telefone:[{}]};let Uy="contato",t1e=["tipo"];async function o1e(e){return(await $db.configuracoes.porNome("venda.codigoconsumidor")).some(o=>Number(o.valor)===e.codigoContato)}async function a1e(e={}){var f,m,p,v;let{filtros:t={},limit:o,page:r,sort:a=["apelido"],dir:i=["asc"]}=e||{};const n=$utils.tratamentoCompletoString(t.termoBusca||"");let s=[],l=Hc,u=[],c,d;await Fk();for(const g of["id","codigoContato"])g in t&&u.push(g);for(const g of u){const x=l.find(b=>b[g]===t[g]);if(!x){l=[];break}l=[x]}if("ativo"in t&&(l=l.filter(g=>{if("ativo"in g)return g.ativo===t.ativo;if(!t.ativo)return!0})),"codigoContatoVendedor"in t&&t.codigoContatoVendedor&&(l=l.filter(g=>{if("codigoContatoVendedor"in g)return g.codigoContatoVendedor===t.codigoContatoVendedor;if("codigoContatoAssistente"in g)return g.codigoContatoAssistente===t.codigoContatoVendedor;if(!t.codigoContatoAssistente||!t.codigoContatoVendedor)return!1})),t.somenteCarteira&&!et.usuario.logado.administrador&&await et.permissao.objetoClienteSistema("Diretiva_Contatos_AcessaTodosContatos")&&!await et.permissao.objeto("Diretiva_Contatos_AcessaTodosContatos")){let g,x,b,_;g=await $db.configuracoes.le({nome:"venda.codigoconsumidor"}),x=Number(g[0].valor),x&&(b=(await $erp().contato.where({codigoContato:x}).toArray())[0]),$db.usuario.logado.numeroDocumentoNacional&&(_=(await $erp().contato.where({numeroDocumentoNacional:$db.usuario.logado.numeroDocumentoNacional}).toArray())[0]),_||(l=[]),l=l.filter(w=>{if(w.id===_.id||w.id===(b==null?void 0:b.id)||w.idContatoVendedor===_.id||w.idContatoAssistente===_.id)return!0})}if(t.nome){const g=$utils.tratamentoCompletoString(t.nome).split(" ");l=l.filter(x=>{const b=$utils.tratamentoCompletoString(x.nome+" "+x.apelido).split(" ");for(const _ of g)if(!b.includes(_))return!1;return!0})}if(t.numeroDocumentoNacional&&(l=l.filter(g=>{var x;return((x=g.numeroDocumentoNacional)==null?void 0:x.replace(/\D/g,""))===t.numeroDocumentoNacional.replace(/\D/g,"")})),t.telefone){const g=t.telefone.replace(/\D/g,"");l=l.filter(x=>{var b;return((b=x.telefones)==null?void 0:b.indexOf(g))>=0})}if(t.bairro){const g=$utils.tratamentoCompletoString(t.bairro);l=l.filter(x=>{var b;return((b=$utils.tratamentoCompletoString(x.bairros))==null?void 0:b.indexOf(g))>=0})}if(t.municipio){const g=$utils.tratamentoCompletoString(t.municipio);l=l.filter(x=>{var b;return((b=$utils.tratamentoCompletoString(x.municipios))==null?void 0:b.indexOf(g))>=0})}if(t.uf){const g=$utils.tratamentoCompletoString(t.uf);l=l.filter(x=>{var b;return((b=$utils.tratamentoCompletoString(x.ufs))==null?void 0:b.indexOf(g))>=0})}if(t.empresas){if(et.usuario.logado.administrador){const x=(await $erp().empresa.toArray()).filter(b=>b.ativo).map(b=>b.idContato);l=l.filter(b=>~x.indexOf(b.id))}et.usuario.logado.administrador||(await gr.empresaUsuarioPermissao.inicializarPermissao(),l=l.filter(g=>~gr.empresaUsuarioPermissao.permissao.indexOf(g.codigoContato)))}if(t.usuario){const x=(await $erp().contato.where("codigoUsuario").notEqual("").toArray()).map(b=>b.id);l=l.filter(b=>~x.indexOf(b.id))}if(t.idContatoVendedor&&(l=l.filter(g=>g.idContatoVendedor===t.idContatoVendedor)),t.idContatoAssistente&&(l=l.filter(g=>g.idContatoAssistente===t.idContatoAssistente)),t.vendedores){const g=["vendedor","vendedora","vendedores","Vendedor","Vendedora","Vendedores","VENDEDOR","VENDEDORA","VENDEDORES"],b=(await Se().contatoGrupo.where("descricao").anyOf(g).toArray()).map(_=>_.idContato);l=l.filter(_=>~b.indexOf(_.id))}if(t.tecnicos){const g=["tecnico","tecnica","tecnicos","Tecnico","Tecnica","Tecnicos","TECNICO","TECNICA","TECNICOS","t\xE9cnico","t\xE9cnica","t\xE9cnicos","T\xE9cnico","T\xE9cnica","T\xE9cnicos","T\xC9CNICO","T\xC9CNICA","T\xC9CNICOS"],b=(await Se().contatoGrupo.where("descricao").anyOf(g).toArray()).map(_=>_.idContato);l=l.filter(_=>~b.indexOf(_.id))}if(t.transportadoras){const g=["transportador","transportadora","transportadores","transportadoras","Transportador","Transportadora","Transportadores","Transportadoras","TRANSPORTADOR","TRANSPORTADORA","TRANSPORTADORES","TRANSPORTADORAS"],b=(await Se().contatoGrupo.where("descricao").anyOf(g).toArray()).map(_=>_.idContato);l=l.filter(_=>~b.indexOf(_.id))}if(t.medicos){const g=["medico","medica","medicos","Medico","Medica","Medicos","MEDICO","MEDICA","MEDICOS","m\xE9dico","m\xE9dica","m\xE9dicos","M\xE9dico","M\xE9dica","M\xE9dicos","M\xC9DICO","M\xC9DICA","M\xC9DICOS"],b=(await Se().contatoGrupo.where("descricao").anyOf(g).toArray()).map(_=>_.idContato);l=l.filter(_=>~b.indexOf(_.id))}if(t.operadores){const g=["operador","operadora","operadores","Operador","Operadora","Operadores","OPERADOR","OPERADORA","OPERADORES"],b=(await Se().contatoGrupo.where("descricao").anyOf(g).toArray()).map(_=>_.idContato);l=l.filter(_=>~b.indexOf(_.id))}if(t.compradores){const g=["comprador","compradora","compradores","Comprador","Compradora","Compradores","COMPRADOR","COMPRADORA","COMPRADORES"],b=(await Se().contatoGrupo.where("descricao").anyOf(g).toArray()).map(_=>_.idContato);l=l.filter(_=>~b.indexOf(_.id))}if(t.segmento){const g=$utils.tratamentoCompletoString(t.segmento);l=l.filter(x=>x.segmento?$utils.tratamentoCompletoString(x.segmento)===g:!1)}if(t.grupo){const g=[];for(const x of l)(await $db.contatoGrupo.le({idContato:x.id,descricao:t.grupo})).length>0&&g.push(x);l=g}if(n){let g=[],x=new Set(n.split(" "));x=Array.from(x);for(const b of l){let _,w,S,D="";S=((f=b.telefones)!=null?f:"").replace(/\D/g,""),S&&S!==b.telefones&&(D+=` ${S}`),_=((m=b.numeroDocumentoNacional)!=null?m:"").replace(/\D/g,""),_&&_!==b.numeroDocumentoNacional&&(D+=` ${_}`),w=((p=b.numeroDocumentoMunicipal)!=null?p:"").replace(/\D/g,""),w&&w!==b.numeroDocumentoMunicipal&&(D+=` ${w}`),D+=` #${b.codigoContato}`;for(const O of Pk)["ativo","imagem"].includes(O)||(D+=` ${(v=b[O])!=null?v:""}`);D=$utils.tratamentoCompletoString(D);let M=!0;for(const O of x)if(!~D.indexOf(O)){M=!1;break}M&&g.push(b)}l=g}if("usuarios"in t&&(l=l.filter(g=>{if("id"in g&&t.usuarios.indexOf(g.id)>=0)return g})),typeof t.empresas=="boolean"&&!t.empresas){const x=(await $erp().empresa.toArray()).map(b=>b.idContato);l=l.filter(b=>!~x.indexOf(b.id))}a&&(l=$lodash.orderBy(l,...a,...i)),c=l.length,o=o||l.length,r=r||1,d=c>1?Math.ceil(c/o):0,l=l.slice((r-1)*o,r*o);for(const g of l.map(x=>x.id)){const x=await $erp().contato.get(g);!x||s.push(x)}return{data:s,total:c,totalPages:d}}const JO=e=>{const t={};for(const o of Pk)if(e[o]){let r=e[o];["nome","apelido"].includes(o)&&(r=$utils.tratamentoCompletoString(r)),t[o]=r}return Hc.push(t),t};async function Fk(e){if(Gu&&e){await Gu;const t=Hc.findIndex(r=>r.id===e);t>-1&&Hc.splice(t,1);const o=await $erp().contato.get(e);if(o){const r=JO(o);$erp().contatoTelefone.where({idContato:r.id}).toArray().then(a=>{r.telefones=a.map(i=>{var n;return(n=i.telefone)==null?void 0:n.replace(/\D/g,"")}).join(" ")}),$erp().contatoEndereco.where({idContato:r.id}).toArray().then(a=>{r.bairros=a.map(i=>i.bairro).join(" "),r.municipios=a.map(i=>i.municipio).join(" "),r.ufs=a.map(i=>i.uf).join(" ")})}return Gu}return Gu||(Gu=new Promise(async(t,o)=>{var r,a,i,n,s,l,u,c,d;try{const f={},m={},p={},v={};let g,x;x=5e4;const b=mu("ContatoCarregandoMemoria");g=await $erp().contatoTelefone.count();for(let _=0;_<g;_+=x){const w=await $erp().contatoTelefone.offset(_).limit(x).toArray();for(const S of w){const D=(a=(r=S.telefone)==null?void 0:r.trim())==null?void 0:a.replace(/\D/g,"");!D||(f[S.idContato]?f[S.idContato]=f[S.idContato]+" "+D:f[S.idContato]=D)}}g=await $erp().contatoEndereco.count();for(let _=0;_<g;_+=x){const w=await $erp().contatoEndereco.offset(_).limit(x).toArray();for(const S of w){const D=(i=S.bairro)==null?void 0:i.trim(),M=(n=S.municipio)==null?void 0:n.trim(),O=(s=S.uf)==null?void 0:s.trim();!D||(v[S.idContato]?v[S.idContato]=v[S.idContato]+" "+D:v[S.idContato]=D,M&&(m[S.idContato]?m[S.idContato]=m[S.idContato]+" "+M:m[S.idContato]=M,O&&(p[S.idContato]?p[S.idContato]=p[S.idContato]+" "+O:p[S.idContato]=O)))}}g=await $erp().contato.count();for(let _=0;_<g;_+=x){const w=await $erp().contato.offset(_).limit(x).toArray();for(const S of w)S.telefones=(l=f[S.id])!=null?l:"",S.bairros=(u=v[S.id])!=null?u:"",S.municipios=(c=m[S.id])!=null?c:"",S.ufs=(d=p[S.id])!=null?d:"",JO(S)}pu(b,(Hc==null?void 0:Hc.length)||0),t()}catch(f){console.error("Erro ao carregar contatos para mem\xF3ria",f),o(f)}}),Gu)}async function r1e(e){var r;if(!e)return;let t,o;t=await $erp().contato.get(e),o=(r=t==null?void 0:t.condutaObservacao)==null?void 0:r.trim(),o&&$q.notify({message:o,timeout:0,type:"warning",closeBtn:!0})}const K0={vazio:kf,ler:a1e,carregarMemoria:Fk,contatos:Hc,exibirCondutaObservacao:r1e,contatoBase:()=>({id:null,ativo:!0,consulta:[],endereco:[{bairro:"",cep:"",complemento:"",grupo:"",ibgeCod:"",logradouro:"",municipio:"",numero:"",pais:"",uf:""}],filhos:[],grupo:[],nomesGrupo:[],redeSocial:[],telefone:[{}]}),ehContatoConsumidor:o1e,le:async e=>{if(e=e||{},"id"in e)return e.id?await Se().contato.get(e.id)||{}:{};if("usuario"in e&&e.usuario){let o=Se().contato.where("codigoUsuario").notEqual("");return e.ativo&&(o=o.and(r=>r.ativo)),await o.toArray()||[]}let t=[];if(e.vendedores){let o=await Se().contatoGrupo.toArray()||[];o=o.filter(r=>(r.descricao||"").toUpperCase()==="VENDEDOR");for(const r of o){const a=await Se().contato.get(r.idContato);a.ativo&&t.push(a)}return t}if(e.compradores){let o=await Se().contatoGrupo.toArray()||[];o=o.filter(r=>(r.descricao||"").toUpperCase()==="COMPRADOR");for(const r of o){const a=await Se().contato.get(r.idContato);a.ativo&&t.push(a)}return t}if(e.tecnicos){let o=await Se().contatoGrupo.toArray()||[];o=o.filter(r=>(r.descricao||"").toUpperCase()==="T\xC9CNICO");for(const r of o){const a=await Se().contato.get(r.idContato);a.ativo&&t.push(a)}return t}if(e.medicos){let o=await Se().contatoGrupo.toArray()||[];o=o.filter(r=>(r.descricao||"").toUpperCase()==="M\xC9DICO"||(r.descricao||"").toUpperCase()==="OPTOMETRISTA");for(const r of o){const a=await Se().contato.get(r.idContato);a&&a.ativo&&t.push(a)}return t}if(e.transportadoras){let o=await Se().contatoGrupo.toArray()||[];o=o.filter(r=>(r.descricao||"").toUpperCase()==="TRANSPORTADORA");for(const r of o){const a=await Se().contato.get(r.idContato);a.ativo&&t.push(a)}return t}if(e.empresas){let o={},r="",a="",i="N\xE3o foi poss\xEDvel localizar o c\xF3digo do sistema.";try{if(o=JSON.parse(localStorage.getItem("clienteSistema")),!o.codigoClienteSistema)return[];r=o.codigoClienteSistema,i="N\xE3o foi poss\xEDvel localizar o c\xF3digo do usu\xE1rio.",a=et.usuario.logado.codigoUsuario}catch{return console.error(i),[]}let n=await Se().empresa.toArray()||[];for(const s of n){const l=await Se().contato.get(s.idContato);l.ativo&&t.push(l)}if(!et.usuario.logado.administrador){const s=await gr.empresa.le({codigoClienteSistema:r});let l=[];s.reduce((u,c)=>(u[c.codigoEmpresa]||(u[c.codigoEmpresa]=!0,l.push(gr.empresaUsuarioPermissao.le({codigoUsuario:a,codigoEmpresa:c.codigoEmpresa}))),u),{});for await(const u of l)l=[...l,...u];l=l.map(u=>u.codigoContato),t=t.filter(u=>l.includes(u.codigoContato))}return t}if(e.numeroDocumentoNacional){if(t=await Se().contato.where({numeroDocumentoNacional:e.numeroDocumentoNacional}).toArray(),!t.length){const o=fC(e.numeroDocumentoNacional);if(o===e.numeroDocumentoNacional){const r=$filters.cpfCnpj(o);t=await Se().contato.where({numeroDocumentoNacional:r}).toArray()}else t=await Se().contato.where({numeroDocumentoNacional:o}).toArray()}return t}if(t=await Se().contato.toArray(),e.ativo&&(t=t.filter(o=>o.ativo)),e.ativo===!1&&(t=t.filter(o=>!o.ativo)),e.dataAbertura){let o=new Date(e.dataAbertura.ini),r=new Date(e.dataAbertura.fim);t=await t.filter(a=>{if(!a.dataAbertura)return!1;let i=new Date(a.dataAbertura);return o.setFullYear(i.getFullYear()),r.setFullYear(i.getFullYear()),i.setHours(0,0,0,0),o&&r?i>=o&&i<=r:o?i>=o:r?i<=r:!0})}if(e.segmento){const o=Qc(e.segmento).toLowerCase();t=t.filter(r=>r.segmento&&Qc(r.segmento).toLowerCase()===o)}return e.idUsuario&&(t=t.filter(o=>o.idUsuario===e.idUsuario)),e.idContatoVendedor&&(t=t.filter(o=>o.idContatoVendedor===e.idContatoVendedor)),e.idContatoAssistente&&(t=t.filter(o=>o.idContatoAssistente===e.idContatoAssistente)),e.codigoContato&&(t=t.filter(o=>o.codigoContato===e.codigoContato)),t},async grava(e){e=Pr(e);const t=Pr(e.dadosOriginais||{}),r=Vr(e).contato;if(!r.nome)throw new Error("O nome \xE9 obrigat\xF3rio.");r.apelido||(r.apelido=r.nome),e.endereco=(e.endereco||[]).filter(i=>!(i.bairro===""&&i.cep===""&&i.complemento===""&&i.logradouro===""&&i.municipio===""&&i.numero===""&&i.uf===""));let a=!1;if(a=await lo("contatoConsulta",t.consulta,e.consulta)||a,a=await lo("contatoEndereco",t.endereco,e.endereco)||a,a=await lo("contatoRedeSocial",t.redeSocial,e.redeSocial)||a,a=await lo("contatoTelefone",t.telefone,e.telefone)||a,a=await lo("contatoGrupo",t.grupo,e.grupo)||a,a=await lo("contatoFilho",t.filhos,e.filhos)||a,!Object.keys(t.contato||{}).length)r.dataAlteracao=sa(),r.dataCadastro=r.dataAlteracao,await $erpPut().contato.put(r),await ut("adicionar","contato",r.id,r);else{const i=sa();a&&(r.dataAlteracao=i);const n=Ja(t.contato,r);Object.keys(n).length&&(r.dataAlteracao=i,n.dataAlteracao=i,await $erpUpdate().contato.update(r.id,n),await ut("atualizar","contato",r.id,n))}return et.contato.carregarMemoria(r.id),r.id},async gravar(e){const t=Tn(e.atual),o=Tn(e.original||{});if(!t.contato.nome)throw new Error("O nome \xE9 obrigat\xF3rio.");t.contato.apelido||(t.contato.apelido=t.contato.nome),t.endereco=(t.endereco||[]).filter(a=>!(a.bairro===""&&a.cep===""&&a.complemento===""&&a.logradouro===""&&a.municipio===""&&a.numero===""&&a.uf===""));let r=!1;if(r=await lo("contatoConsulta",o.consulta||[],t.consulta||[])||r,r=await lo("contatoEndereco",o.endereco||[],t.endereco||[])||r,r=await lo("contatoRedeSocial",o.redeSocial||[],t.redeSocial||[])||r,r=await lo("contatoTelefone",o.telefone||[],t.telefone||[])||r,r=await lo("contatoGrupo",o.grupo||[],t.grupo||[])||r,r=await lo("contatoFilho",o.filhos||[],t.filhos||[])||r,!Object.keys(o||{}).length)t.contato.dataAlteracao=sa(),t.contato.dataCadastro=t.contato.dataAlteracao,await $erpPut().contato.put(t.contato),await ut("adicionar","contato",t.contato.id,t.contato);else{const a=sa();r&&(t.contato.dataAlteracao=a);const i=Ja(o.contato,t.contato);Object.keys(i).length&&(t.contato.dataAlteracao=a,i.dataAlteracao=a,await $erpUpdate().contato.update(t.contato.id,i),await ut("atualizar","contato",t.contato.id,i))}await et.contato.carregarMemoria(t.contato.id)},async lePorNumeroDocumentoNacional(e){if(!e)return{};let t=await Se().contato.where({numeroDocumentoNacional:e}).first();if(!t){const o=fC(e);if(o===e){const r=o.length===14?o.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/g,"$1.$2.$3/$4-$5"):o.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/g,"$1.$2.$3-$4");t=await Se().contato.where({numeroDocumentoNacional:r}).first()}else t=await Se().contato.where({numeroDocumentoNacional:o}).first()}return t||{}},async leRefatorado({filtros:e,limit:t,page:o,sort:r}){if(e=e||{},"id"in e)return e.id?await Se()[Uy].get(e.id)||{}:{};let a={};for(const p of t1e)p in e&&e[p]&&(a[p]=e[p]);let i=await Se()[Uy];Object.keys(a).length&&(i=i.where(a)),"ativo"in e&&typeof e.ativo=="boolean"&&(i=i.filter(p=>p.ativo===e.ativo)),"codigo"in e&&(i=i.filter(p=>p.codigo===Number(e.codigo))),"nome"in e&&(i=i.filter(p=>p.nome&&p.nome.toLowerCase().indexOf(e.nome.toLowerCase())!==-1)),"apelido"in e&&(i=i.filter(p=>p.apelido&&p.apelido.toLowerCase().indexOf(e.apelido.toLowerCase())!==-1)),"numeroDocumentoNacional"in e&&(i=i.filter(p=>p.numeroDocumentoNacional===e.numeroDocumentoNacional)),"segmento"in e&&(i=i.filter(p=>p.segmento===e.segmento)),"codigoContatoVendedor"in e&&e.codigoContatoVendedor&&(i=i.filter(p=>{if("codigoContatoVendedor"in p)return p.codigoContatoVendedor===e.codigoContatoVendedor;if("codigoContatoAssistente"in p)return p.codigoContatoAssistente===e.codigoContatoVendedor;if(!p.codigoContatoAssistente||!p.codigoContatoVendedor)return!1}));let n=[],s=[];await i.each(p=>{n.push({nome:Qc(p.nome||"").toUpperCase().trim(),apelido:Qc(p.apelido||"").toUpperCase().trim(),id:p.id})});let l=[];if("telefone"in e||"cidade"in e||"uf"in e||"grupo"in e){for(let p of n){let v=!0;if("telefone"in e){const g=e.telefone.replace(/[\s-()]/g,"");v=(await $db.contatoTelefone.le({idContato:p.id,telefone:g})).length||!1}"cidade"in e&&v&&(v=(await $db.contatoEndereco.le({idContato:p.id,cidade:e.cidade})).length||!1),"uf"in e&&v&&(v=(await $db.contatoEndereco.le({idContato:p.id,uf:e.uf})).length||!1),"grupo"in e&&v&&(v=(await $db.contatoGrupo.le({idContato:p.id,descricao:e.grupo})).length||!1),v&&l.push(p)}n=l}const u=n.length;n=n.sort((p,v)=>p.descricao>v.descricao?1:v.descricao>p.descricao?-1:0),t=t||u,o=o||1;let c=(o-1)*t;n=n.splice(c,t);for(let p of n)s.push(await Se()[Uy].get({id:p.id}));let d=s,f=u,m=Math.ceil(f/t)||1;return{data:d,total:f,totalPages:m}},leOnline:async(e={})=>"segmento"in e?Do(`Select id, codigoContato, nome, apelido, numeroDocumentoNacional from Contato where Segmento=${Bt(e.segmento,"")}`):"codigoContato"in e?Do(`Select id, codigoContato, nome, apelido, numeroDocumentoNacional, imagem from Contato where codigoContato=${io(e.codigoContato)}`):"ativo"in e&&e.numeroDocumentoNacionalPreenchido?Do(`Select id, codigoContato, nome, apelido, numeroDocumentoNacional, numeroDocumentoEstadual, imagem
         from Contato where ativo=${io(e.ativo?1:0)} and numeroDocumentoNacional <> ''`):[],leCompleto:async e=>{let t;if(!e)return t=Pr(kf),t.dadosOriginais={contato:Pr(kf)},t;t=await Se().contato.get(e)||{},!t.emailNfe&&!!t.emailNFE&&(t.emailNfe=t.emailNFE,delete t.emailNFE),t.dadosOriginais={contato:{...t},endereco:await Se().contatoEndereco.where("idContato").equals(e).toArray()||[],telefone:await Se().contatoTelefone.where("idContato").equals(e).toArray()||[],redeSocial:await Se().contatoRedeSocial.where("idContato").equals(e).toArray()||[],consulta:Aa.exports.orderBy(await Se().contatoConsulta.where("idContato").equals(e).toArray()||[],"dataConsulta","desc"),grupo:await Se().contatoGrupo.where("idContato").equals(e).toArray()||[],filhos:[...await Se().contatoFilho.where("idContato").equals(e).toArray()||[],...await Se().contatoFilho.where("idContatoRelacionado").equals(e).toArray()||[]]};for(const o of t.dadosOriginais.endereco){let r=(o.cep||"").replace(/[^0-9]/g,"");r.length===8&&(o.cep=r.substr(0,5)+"-"+r.substr(5,3))}return t.endereco=JSON.parse(JSON.stringify(t.dadosOriginais.endereco)),t.telefone=JSON.parse(JSON.stringify(t.dadosOriginais.telefone)),t.redeSocial=JSON.parse(JSON.stringify(t.dadosOriginais.redeSocial)),t.consulta=JSON.parse(JSON.stringify(t.dadosOriginais.consulta)),t.grupo=JSON.parse(JSON.stringify(t.dadosOriginais.grupo)),t.dadosOriginais.nomesGrupo=t.grupo.map(o=>o.descricao).sort(),t.nomesGrupo=JSON.parse(JSON.stringify(t.dadosOriginais.nomesGrupo)),t.filhos=JSON.parse(JSON.stringify(t.dadosOriginais.filhos)),t.filhos.forEach(o=>{o.socio=o.socio||!1,o.cobranca=o.cobranca||!1}),t},async leCompletoV2(e){Wt.log("contato","leCompletoV2",e);let t=e?await Se().contato.get(e)||{}:{};e=e||"",!t.emailNfe&&!!t.emailNFE&&(t.emailNfe=t.emailNFE,delete t.emailNFE),t.endereco=await Se().contatoEndereco.where("idContato").equals(e).toArray(),t.telefone=await Se().contatoTelefone.where("idContato").equals(e).toArray(),t.redeSocial=await Se().contatoRedeSocial.where("idContato").equals(e).toArray(),t.consulta=Aa.exports.orderBy(await Se().contatoConsulta.where("idContato").equals(e).toArray(),"dataConsulta","desc"),t.grupo=await Se().contatoGrupo.where("idContato").equals(e).toArray(),t.filhos=[...await Se().contatoFilho.where("idContato").equals(e).toArray(),...await Se().contatoFilho.where("idContatoRelacionado").equals(e).toArray()],t.nomesGrupo=t.grupo.map(r=>r.descricao).sort();for(const r of t.endereco){let a=(r.cep||"").replace(/[^0-9]/g,"");a.length===8&&(r.cep=a.substr(0,5)+"-"+a.substr(5,3))}t={...Tn(kf),...t};const o=Tn(t);return{atual:t,original:o}},async leCompletoV3(e){Wt.log("contato","leCompletoV3",e);const t={};e=e||"",t.contato=await Se().contato.get(e)||{};const o={id:"",apelido:"",nome:"",imagem:"",numeroDocumentoNacional:"",ativo:!0};t.contato={...o,...t.contato},!t.contato.emailNfe&&!!t.contato.emailNFE&&(t.contato.emailNfe=t.contato.emailNFE,delete t.contato.emailNFE),t.endereco=await Se().contatoEndereco.where("idContato").equals(e).toArray(),t.telefone=await Se().contatoTelefone.where("idContato").equals(e).toArray(),t.redeSocial=await Se().contatoRedeSocial.where("idContato").equals(e).toArray(),t.consulta=Aa.exports.orderBy(await Se().contatoConsulta.where("idContato").equals(e).toArray(),"dataConsulta","desc"),t.grupo=await Se().contatoGrupo.where("idContato").equals(e).toArray(),t.filhos=[...await Se().contatoFilho.where("idContato").equals(e).toArray(),...await Se().contatoFilho.where("idContatoRelacionado").equals(e).toArray()],t.nomesGrupo=t.grupo.map(r=>r.descricao).sort();for(const r of t.endereco){let a=(r.cep||"").replace(/[^0-9]/g,"");a.length===8&&(r.cep=a.substr(0,5)+"-"+a.substr(5,3))}return t},async leUnicos(e){return Se().contato.orderBy(e).uniqueKeys()},async gravaImportarContato(e){Wt.log("contato","grava",e);const t=Tn(e.atual),o=Tn(e.original||{});t.apelido||(t.apelido=t.nome),delete t.numeroDocumentoNacionalErro,t.endereco=(t.endereco||[]).filter(a=>!(a.bairro===""&&a.cep===""&&a.complemento===""&&a.logradouro===""&&a.municipio===""&&a.numero===""&&a.uf===""));{t.grupo=(t.grupo||[]).filter(i=>t.nomesGrupo.includes(i.descricao));const a=(t.nomesGrupo||[]).filter(i=>!t.nomesGrupo.includes(i)).map(i=>({id:Kt(),idContato:t.id,descricao:i}));t.grupo=[...t.grupo,...a]}let r=!1;if(r=await lo("contatoConsulta",o.consulta,t.consulta)||r,r=await lo("contatoEndereco",o.endereco,t.endereco)||r,r=await lo("contatoRedeSocial",o.redeSocial,t.redeSocial)||r,r=await lo("contatoTelefone",o.telefone,t.telefone)||r,r=await lo("contatoGrupo",o.grupo,t.grupo)||r,r=await lo("contatoFilho",o.filhos,t.filhos)||r,Object.keys(o||{}).length){const a=cn(o,t);(r||Object.keys(a).length)&&(t.dataAlteracao=sa(),a.dataAlteracao=t.dataAlteracao,await $erpUpdate().contato.update(t.id,a),await ut("atualizar","contato",t.id,a),et.contato.carregarMemoria(t.id))}else{t.dataCadastro=sa(),t.dataAlteracao=t.dataCadastro;const a=cn({},t);await $erpPut().contato.put(a),await ut("adicionar","contato",a.id,a),et.contato.carregarMemoria(a.id)}},leFilhos:async e=>{const t=await Se().contatoFilho.where("idContato").equals(e).toArray(),o=await Se().contatoFilho.where("idContatoRelacionado").equals(e).toArray(),r=[...new Set([...t.map(i=>i.idContatoRelacionado),...o.map(i=>i.idContato)])],a=[];for(const i of r){if(!i)continue;const n=await Se().contato.get(i);!n||a.push(n)}return a},leConvenios:async e=>{let t=await K0.leFilhos(e);return t=t.filter(async o=>(await Se().contatoGrupo.where("idContato").equals(o.id).toArray()).map(r=>r.descricao).includes("Conv\xEAnio")),t},leCompradores:async e=>{let t=await K0.leFilhos(e);return t=t.filter(async o=>(await Se().contatoGrupo.where("idContato").equals(o.id).toArray()).map(r=>r.descricao).includes("Comprador")),t},leLogado:async()=>{let e="";const t=await K0.le({idUsuario:et.usuario.logado.id});if(t.length)e=t[0].id;else{const o=await K0.le({codigoContato:2});o.length&&(e=o[0].id)}return e},async leGruposUnicos(){let e=await Se().contatoGrupo.toArray()||[];return e=e.map(t=>t.descricao),e=[...e,"Cliente","Transportadora","Vendedor","M\xE9dico","Optometrista"],e=[...new Set(e)],e=e.sort(),e=e.map(t=>({descricao:t})),e},async leSegmentosUnicos(){let e=await Se().contato.toArray()||[];return e=e.map(t=>t.segmento),e=e.filter(t=>t),e=e.filter((t,o,r)=>r.indexOf(t)===o),e=e.sort(),e=e.map(t=>({descricao:t})),e},async leOrigemMarketingUnicos(){let e=await $db.hibrido.listaTodos({table:"contato"})||[];return e=e.map(t=>t.origemMarketing),e=e.filter(t=>t),e=e.filter((t,o,r)=>r.indexOf(t)===o),e=e.sort(),e=e.map(t=>({descricao:t})),e},criarContatoBasico:async e=>{let t=Pr(e);if(t={...kf,...t},t.dataAlteracao=sa(),!t.nome)throw new Error("O nome \xE9 obrigat\xF3rio.");return t.apelido||(t.apelido=t.nome),t.id=Kt(),t.ativo=!0,t.dataCadastro=t.dataAlteracao,await Se().contato.add(t),await ut("adicionar","contato",t.id,t),t},criarContatoGrupo:async({idContato:e,descricaoGrupo:t})=>{const o={id:Kt(),idContato:e,descricao:t};return await Se().contatoGrupo.add(o),await ut("adicionar","contatoGrupo",o.id,o),o},async criarDependenciaContatos({contatoPai:e,contatoFilho:t}){const o={id:Kt(),idContato:e.id,idContatoRelacionado:t.id,observacao:"Dependente"};return await Se().contatoFilho.add(o),await ut("adicionar","contatoFilho",o.id,o),o},selecionado:{...kf}};var i1e={grava:async e=>{await $erpPut().contatoAnotacao.put(e),await $utils.sincronismoEnviar("adicionar","contatoAnotacao",e.id,e)},leAnotacoesDeUmContato:async e=>{var r,a,i,n,s;let t;const o=[];t=await $erp().contatoAnotacao.where({idContato:e}).toArray(),t=t.filter(l=>l.tipo==="Atendimento 4.0"),t.sort((l,u)=>l.dataHora<u.dataHora?-1:1);for(const l of t){const u={};if(l.cpfUsuario&&!u[l.cpfUsuario]){let c,d,f;f=l.cpfUsuario,c=await $erp().contato.where({numeroDocumentoNacional:f}).toArray(),d=c[0],f=l.cpfUsuario.replace(/\D/g,""),!d&&f!==l.cpfUsuario&&(c=await $erp().contato.where({numeroDocumentoNacional:f}).toArray(),d=c[0]),d&&(u[l.cpfUsuario]=d)}o.push({...l,usuarioApelido:(a=(r=u[l.cpfUsuario])==null?void 0:r.apelido)!=null?a:"Usu\xE1rio n\xE3o identificado",usuarioImagem:(n=(i=u[l.cpfUsuario])==null?void 0:i.imagem)!=null?n:"",rotulo:new Date(l.dataHora).toLocaleString("pt-BR"),enviado:!!~[$db.usuario.logado.numeroDocumentoNacional,(s=$db.usuario.logado.numeroDocumentoNacional)==null?void 0:s.replace(/\D/g,"")].indexOf(l.cpfUsuario),mensagens:[l.descricao]})}return o}};const n1e=60;let Kn;function Zv(){Kn={}}Zv();var s1e={limpaCache:Zv,async atualizaCache(e){var o;const t=async()=>{const r=e.length===11?$filters.cpfCnpj(e):e;let a=(await $db.hibrido.lista({table:"contato",where:{numeroDocumentoNacional:r}}))[0];if(!a){const n=$utils.filtrarDigitos(e);a=(await $db.hibrido.lista({table:"contato",where:{numeroDocumentoNacional:n}}))[0]}const i=new Date;Kn[e]={timeout:i.setSeconds(i.getSeconds()+n1e),contato:a}};Kn.processando||(Kn.processando=t());try{await Kn.processando}catch(r){throw Zv(),r}(o=Kn[e])!=null&&o.processando||(Kn[e]=Kn[e]||{},Kn[e].processando=t());try{await Kn[e].processando}catch(r){throw Zv(),r}},async verificaCache(e){var o;new Date>new Date(((o=Kn[e])==null?void 0:o.timeout)||0)&&await this.atualizaCache(e)},async leCache(e){var o;let t;return e&&(await this.verificaCache(e),t=(o=Kn[e])==null?void 0:o.contato),t}};const l1e={le:async e=>{if(e=e||{},"id"in e)return e.id?await Se().contatoCreditoExtrato.get(e.id)||{}:{};let t={};"idContato"in e&&e.idContato&&(t.idContato=e.idContato);let o=[];return Object.keys(t).length?o=await Se().contatoCreditoExtrato.where(t).toArray()||[]:o=await Se().contatoCreditoExtrato.toArray()||[],o}},c1e=60,YC=["id","ativo","idContatoVendedor","idContatoAssistente","codigoContato","nome","apelido","numeroDocumentoNacional","numeroDocumentoMunicipal","segmento","imagem"];let Fc;function JC(){Fc={timeout:0,contatosEmpresa:[],empresaIdContato:{}}}JC();const u1e=e=>t=>{var a,i,n;let o=` ${$utils.filtrarDigitos((a=t.numeroDocumentoNacional)!=null?a:"")} ${$utils.filtrarDigitos((i=t.numeroDocumentoMunicipal)!=null?i:"")}`;for(const s of YC)s!=="ativo"&&(o+=` ${(n=t[s])!=null?n:""}`);o=$utils.tratamentoCompletoString(o);let r=!0;for(const s of e)if(!o.includes(s)){r=!1;break}return r};var d1e={limpaCache:JC,async leOnline(){let e;try{e=JSON.parse(localStorage.getItem("clienteSistema")).codigoClienteSistema}catch(o){return console.error("N\xE3o foi poss\xEDvel localizar o c\xF3digo do sistema.",o),[]}return e?(await $utils.geeksApi({contatoEmpresa:{funcao:"F4451662-A9D8-49D6-A5DD-DE03B3DE1B79",columns:YC,codigoClienteSistema:e}})).data.contatoEmpresa:(console.error("N\xE3o foi poss\xEDvel localizar o c\xF3digo do sistema."),[])},async leOffline(){let e;const t=await $db.hibrido.lista({table:"empresa",whereFilter:{ativo:!0}});if($db.usuario.logado.administrador)e=t.map(({codigoContato:r})=>r).filter(Boolean);else{let r;try{r=JSON.parse(localStorage.getItem("clienteSistema")).codigoClienteSistema}catch(i){return console.error("N\xE3o foi poss\xEDvel localizar o c\xF3digo do sistema.",i),[]}if(!r)return console.error("N\xE3o foi poss\xEDvel localizar o c\xF3digo do sistema."),[];const a={};await Gt.empresaUsuarioPermissao.where({codigoUsuario:$db.usuario.logado.codigoUsuario}).each(({codigoEmpresa:i})=>a[i]=!0),e=[],await Gt.empresa.where({codigoClienteSistema:r}).filter(({ativo:i,codigoEmpresa:n})=>i&&a[n]).each(({codigoContato:i})=>i&&e.push(i))}if(!(e!=null&&e.length))return console.error("N\xE3o foi poss\xEDvel localizar empresas para o usu\xE1rio."),[];const o=(await $db.hibrido.lista({table:"contato",columns:YC,whereIn:{codigoContato:e},whereFilter:{ativo:!0}})).map(r=>{var a;return{...r,sigla:(a=t==null?void 0:t.find(({idContato:i})=>i===r.id))==null?void 0:a.sigla}});return o!=null&&o.length?o:(console.error("N\xE3o foi poss\xEDvel localizar empresas para o usu\xE1rio."),[])},async atualizaCache(){const e=async()=>{const t=$db.hibrido.isOnline()?await this.leOnline():await this.leOffline(),o={};for(const a of t)o[a.id]=a;const r=new Date;Fc={timeout:r.setSeconds(r.getSeconds()+c1e),contatosEmpresa:t,empresaIdContato:o}};Fc.processando||(Fc.processando=e());try{await Fc.processando}catch(t){throw JC(),t}},async verificaCache(){new Date>new Date(Fc.timeout)&&await this.atualizaCache()},async leCache({idContato:e}){return $utils.verificarErro(!e,"Id d do contato da empresa n\xE3o fornecido"),await this.verificaCache(),Fc.empresaIdContato[e]||{}},async listaCache(e){const{filtros:t={},sort:o}=e||{};await this.verificaCache();let r=Fc.contatosEmpresa;if(t.termoBusca){const a=$utils.tratamentoCompletoString(t.termoBusca).split(" ");r=r.filter(u1e(a))}return o&&(r=$lodash.orderBy(r,...o)),r}};const f1e={grava:()=>{},le:async e=>{if(e=e||{},e.id)return Se().contatoEndereco.get(e.id)||{};const t={};e.idContato&&(t.idContato=e.idContato);let o=[];return Object.keys(t).length?o=await Se().contatoEndereco.where(t).toArray()||[]:o=await Se().contatoEndereco.toArray()||[],"cidade"in e&&(o=o.filter(r=>r.municipio&&r.municipio.toLowerCase()===e.cidade.toLowerCase())),"uf"in e&&(o=o.filter(r=>r.municipio&&r.uf.toLowerCase()===e.uf.toLowerCase())),o},async leEnderecoPrincipal(e){if(!e)return{};const t=await Se().contatoEndereco.where({idContato:e}).toArray();if(!t||t.length===0)return{};let o=t.find(r=>r.grupo==="Principal");return o||(o=t[0]||{}),o},leNew:async e=>{if(e=e||{},"id"in e)return e.id?await Se().contatoEndereco.get(e.id)||{}:{};let t={};"idContato"in e&&e.idContato&&(t.idContato=e.idContato);let o=Se().contatoEndereco;return Object.keys(t).length&&(o=o.where(t)),await o.toArray()||[]}};async function m1e(e){const t={...e.atual},o={...e.original};if(!Object.keys(o||{}).length)await $erpPut().contatoGrupo.put(t),await $utils.sincronismoEnviar("adicionar","contatoGrupo",t.id,t);else{const r=$utils.diferencaObjetos(o,t);Object.keys(r).length&&(await $erpUpdate().contatoGrupo.update(t.id,r),await $utils.sincronismoEnviar("atualizar","contatoGrupo",t.id,r))}}async function p1e(e){const t={};let o=$erp().contatoGrupo;if(e!=null&&e.id)return await o.get(e.id);e==null||delete e.id;for(const r of Object.keys(e!=null?e:{}))e[r]!==void 0&&(t[r]=e[r]);return Object.keys(e!=null?e:{}).length>0&&!(Object.keys(t).length>0)?[]:Object.keys(t).length>0?await o.where(t).toArray():await o.toArray()}async function h1e(e){const{idContato:t,descricao:o}=e!=null?e:{};if(!t)return[];let r=$erp().contatoGrupo.where({idContato:t});const a=$utils.tratamentoCompletoString(o!=null?o:"");return a&&(r=r.filter(i=>$utils.tratamentoCompletoString(i.descricao)===a)),await r.toArray()}async function v1e(e){await $erpDelete().contatoGrupo.delete(e),await $utils.sincronismoEnviar("remover","contatoGrupo",e)}var g1e={gravar:m1e,ler:p1e,le:h1e,remover:v1e};const _1e={grava:()=>{},le:async(e={})=>{if("id"in e)return e.id?await Se().contatoTelefone.get(e.id)||{}:{};const t={};e.idContato&&(t.idContato=e.idContato);let o=Se().contatoTelefone;return Object.keys(t).length&&(o=o.where(t)),"telefone"in e&&(o=o.filter(r=>r.telefone===e.telefone)),"idContato"in e&&(o=o.filter(r=>r.idContato===e.idContato)),"tipoTelefone"in e&&(o=o.filter(r=>e.tipoTelefone.indexOf(r.tipoTelefone)!==-1)),o.toArray()},leNew:async e=>{if(e=e||{},"id"in e)return e.id?await Se().contatoTelefone.get(e.id)||{}:{};let t={};"idContato"in e&&e.idContato&&(t.idContato=e.idContato);let o=Se().contatoTelefone;return Object.keys(t).length&&(o=o.where(t)),await o.toArray()||[]}},b1e="documento",y1e=["id","idContato","idFatura","idDocumentoAdicional","idContatoVendedor","idContatoDigitador","idEmpresa","documentoId","tipo","status","idEquipamento"];var x1e={grava:async e=>{if(e=Vr(e),await lo("documentoItem",e.documentoItensAnterior||[],e.documentoItens||[]),!Object.keys(e.documentoAnterior||{}).length)await $erpPut().documento.put(e.documento),await ut("adicionar","documento",e.documento.id,e.documento);else{const t=Ja(e.documentoAnterior,e.documento);Object.keys(t).length&&(await $erpUpdate().documento.update(e.documento.id,t),await ut("atualizar","documento",e.documento.id,t))}},leListaCompleta:async function(e){return $db.hibrido.isOnline()?this.leListaCompletaOnline(e):this.leListaCompletaOffline(e)},leListaCompletaOnline:async function(e={}){let{filtros:t,limit:o,page:r,sort:a=["numero"],dir:i=["desc"]}=e||{};const n=await $utils.geeksApi({listarContratos:{funcao:"A68570C2-A657-4298-8925-3FEFEA5B4E83",filtros:t,limit:o,page:r,sort:a,dir:i}}),{data:s,total:l,totalPages:u}=n.data.listarContratos;return{data:s,total:l,totalPages:u}},leListaCompletaOffline:async function(e={}){let{filtros:t,limit:o,page:r,sort:a=["numero"],dir:i=["desc"]}=e||{};for(const v in t){if(t[v]===null||t[v]===void 0)throw"Erro no filtro "+v;typeof t[v]=="string"&&(t[v]=t[v].trim())}let n={tipo:"Contrato"};"id"in t&&t.id&&(n.id=t.id),"tipo"in t&&t.tipo&&(n.tipo=t.tipo),"empresa"in t&&t.empresa&&(n.idEmpresa=t.empresa),"operacao"in t&&t.operacao&&(n.operacao=t.operacao),"status"in t&&t.status&&(n.status=t.status);for(const v of y1e)v in t&&t[v]&&(n[v]=t[v]);let s=await $erp()[b1e];if(Object.keys(n).length&&(s=s.where(n)),"periodoEmissao"in t&&t.periodoEmissao){let v=new Date(t.periodoEmissao.ini).setHours(0,0,0,0),g=new Date(t.periodoEmissao.fim).setHours(0,0,0,0);s=s.filter(x=>{let b=new Date(x.dataHoraEmissao).setHours(0,0,0,0);return v&&g?b>=v&&b<=g:v?b>=v:g?b<=g:!0})}if("periodoFinalizado"in t&&t.periodoFinalizado){let v=new Date(t.periodoFinalizado.ini).setHours(0,0,0,0),g=new Date(t.periodoFinalizado.fim).setHours(0,0,0,0);s=s.filter(x=>{let b=new Date(x.dataHoraFinalizado).setHours(0,0,0,0);return v&&g?b>=v&&b<=g:v?b>=v:g?b<=g:!0})}if("diaVencimento"in t&&t.diaVencimento){let v=t.diaVencimento.ini,g=t.diaVencimento.fim;s=s.filter(x=>{let b=x.numeroVolumeTransporte;return v&&g?b>=v&&b<=g:v?b>=v:g?b<=g:!0})}let l=[];l=await s.toArray()||[],a&&(l=Aa.exports.orderBy(l,a,i));const u=l.length;o=o||u,r=r||1;let c=(r-1)*o;l=l.splice(c,o),"termoBusca"in t&&t.termoBusca&&(l=await this.filtraTermos(l,t.termoBusca));const d=await $erp().documentoItem.where("idDocumento").anyOf(l.map(v=>v.id)).toArray();for(const v of l)v.documentoItens=d.filter(g=>g.idDocumento===v.id);let f=l,m=u,p=Math.ceil(m/o)||1;return{data:f,total:m,totalPages:p}},gerarNFSEapartirContrato:async()=>{var r,a;const t=(await $db.hibrido.lista({table:"documento",where:{tipo:"Contrato",status:"Ativo"}})).map(i=>i.codigoEmpresa).filter(function(i,n,s){return s.indexOf(i)==n}),o=[];for(let i of t){let n="",s=(await $db.hibrido.lista({table:"contato",where:{codigoContato:i}}))[0];n=s.apelido,console.log("Empresa:",n);let l=1;const u=$utils.filtrarDigitos(s.numeroDocumentoNacional);if($db.hibrido.isOnline()){const f=await $utils.geeksApi({listaNfse:{funcao:"C79B2497-0D9C-4971-8656-2C04FF41F247",where:{tipo:"NFSe",cpfCnpjEmitente:u},limit:1,page:1,sort:["cast(JSON_VALUE(json, '$.rps.identificacaoRps.numero') as int)"],dir:["desc"]}}),{data:m}=f.data.listaNfse,p=m[0];l=Number(((a=(r=p==null?void 0:p.rps)==null?void 0:r.identificacaoRps)==null?void 0:a.numero)||1)}else{let f=await $db.hibrido.lista({table:"documentoFiscalEletronico",where:{tipo:"NFSe",cpfCnpjEmitente:u}}),m=new Date;m.setDate(m.getDate()-30),f=f.filter(v=>new Date(v.dhEmi)>=m);for(const v of f){const{rps:g}=JSON.parse(v.json);v.rps=g}const p=f.sort((v,g)=>v.dataHoraEmissao>g.dataHoraEmissao?-1:v.dataHoraEmissao<g.dataHoraEmissao?1:0);l=p.length?parseInt(p[0].rps.identificacaoRps.numero)+1:1}let c=(await $db.hibrido.lista({table:"documento",where:{tipo:"Contrato",status:"Ativo",CodigoEmpresa:i}})).sort((f,m)=>Number(f.numero||0)-Number(m.numero||0)),d=$utils.clonarV2($db.nfse.modelo);d.dataHoraCriacao=$utils.dataAtual(),d.dataHoraEmissao=$utils.dataAtual(),d.dataEmissao=$utils.dataAtual(),d.status="1",d.identificacaoRps.tipo="1",d.identificacaoRps.serie="1";for(let f in c){console.log("Tomador:",c[f].descricaoContato," - RPS:",l," - Empresa:",n);let m={},p={};const v="Rascunho";let b=(await $db.hibrido.lista({table:"documentoItem",where:{idDocumento:c[f].id}})).map(S=>parseFloat(S.total)).reduce((S,D)=>S+D,0),_=[],w=[];if(c[f].codigoContato&&c[f].codigoEmpresa){d.numeroLote=l,d.identificacaoRps.numero=l++,_=await $db.hibrido.lista({table:"contato",where:{codigoContato:c[f].codigoContato}}),w=await $db.hibrido.lista({table:"contato",where:{codigoContato:c[f].codigoEmpresa}});const S=await $db.contatoEndereco.leEnderecoPrincipal(_[0].id),D=await $db.empresa.leOnlineTemp(w[0].id),M=await $db.contatoEndereco.leEnderecoPrincipal(w[0].id);d.prestador.documento=w[0].numeroDocumentoNacional.replace(/\D/g,""),d.prestador.razaoSocial=w[0].nome,d.prestador.inscricaoMunicipal=w[0].numeroDocumentoMunicipal,d.inscricaoMunicipal=w[0].numeroDocumentoMunicipal,d.optanteSimplesNacional=D[0].nfseOptanteSimples,d.incentivadorCultural=D[0].nfseIncentivadorCultural,d.naturezaOperacao=D[0].nfseNaturezaOperacao,d.regimeEspecialTributacao=D[0].nfseRegimeTributario,d.servico.discriminacao=D[0].nfseDescricaoServico,d.servico.valores.aliquota=D[0].nfseAliquotaIss,d.servico.municipioPrestacaoServico=M.ibgeCod,d.tomador.razaoSocial=_[0].nome,d.tomador.documento=_[0].numeroDocumentoNacional?_[0].numeroDocumentoNacional.match(/\d+/g).join(""):"",d.tomador.endereco.numero=S.numero,d.tomador.endereco.rua=S.logradouro,d.tomador.endereco.bairro=S.bairro,d.tomador.endereco.cidade=S.ibgeCod,d.tomador.endereco.estado=S.uf,d.tomador.endereco.cep=S.cep,d.tomador.razaoSocial;const O=JSON.parse(D[0].nfseItensListaDeServico).find(T=>T.codigo===D[0].nfseCodigoServico.toString());d.servico.itemListaServico=O.codigo,d.servico.codigoCnae=O.codigoCNAE,d.servico.codigoTributacaoMunicipio=O.codigoTributacao,d.servico.valores.valorServicos=b,d.servico.valores.baseCalculo=d.servico.valores.valorServicos,d.servico.valores.valorIss=parseFloat((d.servico.valores.baseCalculo*(d.servico.valores.aliquota/100)).toFixed(2)),d.servico.valores.valorLiquidoNfse=d.servico.valores.valorServicos,m={id:$utils.uuid(),tipo:"NFSe",tpAmb:"2",situacao:v,mod:"",serie:"",nNF:"",chNFe:"",vNF:0,dhEmi:sC.formatarDataNFe(new Date(d.dataEmissao)),cpfCnpjEmitente:d.prestador.documento,xNomeEmitente:d.prestador.razaoSocial,cpfCnpjDestinatario:d.tomador.documento,xNomeDestinatario:d.tomador.razaoSocial,dataHoraEmissao:d.dataEmissao,dataHoraCriacao:$utils.dataAtual(),json:JSON.stringify({rps:d})},p={id:$utils.uuid(),tipo:m.tipo,situacao:m.situacao,tpAmb:m.tpAmb,dataHoraEnvio:d.dataEmissao,cpfCnpjEmitente:m.cpfCnpjEmitente,idDocumentoFiscalEletronico:m.id};try{await $db.documentoFiscalEletronico.grava({atual:m,original:{}}),await $db.documentoFiscalEletronicoXml.grava({atual:p,original:{}}),console.log(c[f].numero,JSON.parse(m.json))}catch(T){$q.notifyError(T.message)}finally{}}}o.push({codigo:i,cnpj:s.numeroDocumentoNacional.replace(".","").replace(".","").replace("/","").replace("-",""),im:s.numeroDocumentoMunicipal,numeroRps:l})}},async filtraTermos(e,t){const o=$utils.removerAcentos(t.toUpperCase()).split(" ").filter(Boolean),r=o.filter(n=>n.match(/^\d+$/)),a=o.filter(n=>!n.match(/^\d+$/)),i=[];for(const n of e){const s=$utils.removerAcentos([n.id,n.idContato,n.idEmpresa,n.descricao,n.descricaoEmpresa,n.descricaoContato,n.numeroDocumentoContato,n.numeroDocumentoEmpresa].join(" ").toUpperCase()),l=[n.numero,n.codigoDocumento,$utils.filtrarDigitos(n.numeroDocumentoContato),$utils.filtrarDigitos(n.numeroDocumentoEmpresa)].map(String);let u=!0;for(const c of r)u=u&&l.includes(c);for(const c of a)u=u&&s.includes(c);u&&i.push(n)}return i},async remove(e){this.removeItens(e),await $erpDelete().documento.delete(e),await ut("remover","documento",e)},async removeItens(e){let t=await $db.hibrido.lista({table:"documentoItem",where:{idDocumento:e}});for(let o of t)await $erpDelete().documentoItem.where({id:o.id}).delete(),await ut("remover","documentoItem",o.id)}};const C1e={id:"",tipo:"CRM",operacao:"Normal",status:"",crmFunil:"",crmFunilStatus:"",idEmpresa:"",descricaoEmpresa:"",numeroDocumentoEmpresa:"",idContato:"",descricaoContato:"",numeroDocumentoContato:"",idContatoResponsavel:"",dataHoraEmissao:"",dataHoraRealizado:"",dataHoraPrevisto:"",documentoId:"",documentoTipo:"",subTotal:0,totalDocumento:0};var w1e={vazio:C1e,async leOnline({entregueInicio:e,entregueFim:t,codigoContato:o}){const r=new Date(e).toLocaleDateString(),a=new Date(t).toLocaleDateString(),i=`
    select
    venda.id,
        venda.codigoDocumento,
        venda.status,
        venda.dataHoraEmissao,
        venda.dataHoraFinalizado,
        venda.codigoContato,
        venda.codigoEmpresa,
        isNull(empresa.sigla, empresa.apelido) descricaoEmpresa,
        venda.codigoContatoDigitador,
        digitador.apelido nomeDigitador,
        venda.codigoContatoVendedor,
        vendedor.apelido nomeVendedor,
        cliente.apelido nomeCliente,
        venda.numero numeroVenda,
    CASE
      WHEN venda.dataHoraFinalizado is null THEN venda.crmFunilStatus
      ELSE 'Conclu\xEDdo'
    END AS crmFunilStatus,
        venda.totalDocumento
      from documento venda
      left join contato digitador on digitador.codigoContato = venda.codigoContatoDigitador
      left join contato vendedor on vendedor.codigoContato = venda.codigoContatoVendedor
      left join contato cliente on cliente.codigoContato = venda.codigoContato
      left join empresa on empresa.codigoContato = venda.codigoEmpresa
      where
        (
    (venda.status = 'Or\xE7amento') or
    (cast(venda.dataHoraFinalizado as date) between '${r}' and '${a}' and isnull(venda.status,'')
      not in ('N\xE3o aprovado','Cancelado','Cancelada'))
    )
    and venda.Tipo = 'Venda'
    ${o?`and (venda.codigoContatoVendedor = ${o} or venda.codigoContatoDigitador = ${o})`:""}`;return Do(i)},async leOnlineVendedoresDigitadores({entregueInicio:e,entregueFim:t}){const o=new Date(e).toLocaleDateString(),r=new Date(t).toLocaleDateString(),a=`
    select
    venda.codigoContatoDigitador codigo,
    digitador.id,
    digitador.nome
    from documento venda
    left join contato digitador on digitador.codigoContato = venda.codigoContatoDigitador
    left join contato vendedor on vendedor.codigoContato = venda.codigoContatoVendedor
    where
    (
    (venda.status = 'Or\xE7amento') or
    (venda.dataHoraFinalizado between '${o}' and '${r}' and isnull(venda.status,'')
      not in ('N\xE3o aprovado','Cancelado','Cancelada'))
    )
    and venda.Tipo = 'Venda'
    group by venda.codigoContatoDigitador, digitador.id, digitador.nome

    union

    select
    venda.codigoContatoVendedor codigo,
    vendedor.id,
    vendedor.nome
    from documento venda
    left join contato digitador on digitador.codigoContato = venda.codigoContatoDigitador
    left join contato vendedor on vendedor.codigoContato = venda.codigoContatoVendedor
    where
    (
    (venda.status = 'Or\xE7amento') or
    (venda.dataHoraFinalizado between '${o}' and '${r}' and isnull(venda.status,'')
      not in ('N\xE3o aprovado','Cancelado','Cancelada'))
    )
    and venda.Tipo = 'Venda'
    group by venda.codigoContatoVendedor, vendedor.id, vendedor.nome`;return Do(a)},async trocaStatusOnline(e){return Do(`set nocount on
      update documento set
          crmFunilStatus = ${Bt(e.statusNovo)}
      where codigoDocumento = ${io(e.codigoDocumento)}
      insert into documentoStatus (codigoDocumento, codigoDocumentoItem, codigoContatoResponsavel, operacao,
        statusOriginal, statusFinalizado, dataHoraEmissao, cpfUsuario, observacao)
      values(${io(e.codigoDocumento)}, NULL, NULL, 'Mudan\xE7a status CRM',
        ${Bt(e.statusAtual)}, ${Bt(e.statusNovo)}, getdate(), ${Bt(e.cpfUsuario)}, ${Bt(e.observacao,"")})`)}};const E1e={id:"",tipo:"Custom",operacao:"Normal",status:"",idEmpresa:"",descricaoEmpresa:"",numeroDocumentoEmpresa:"",idContato:"",descricaoContato:"",numeroDocumentoContato:"",idContatoResponsavel:"",dataHoraEmissao:"",dataHoraRealizado:"",dataHoraPrevisto:"",documentoId:"",documentoTipo:"",subTotal:0,totalDocumento:0};var S1e={vazio:E1e,async leOnline({entregueInicio:e,entregueFim:t,empresas:o}){let r=[];for(const a of o||[])r.push(`'${a}'`);return r=r.join(","),Do(`select
      custom.id,
      custom.codigoDocumento,
      custom.status,
      custom.dataHoraEmissao,
      custom.dataHoraPrevisto,
      custom.dataHoraFinalizado,
      custom.dataHoraRetorno,
      custom.codigoContato,
      custom.descricao,
      empresa.codigoContato codigoEmpresa,
      empresa.apelido descricaoEmpresa,
      custom.codigoContatoVendedor,
      vendedor.nome nomeVendedor,
      custom.descricaoContato nomeCliente,
      fornecedor.codigoContato codigoFornecedor,
      contatoFornecedor.apelido nomeFornecedor,
      venda.numero numeroVenda,
      custom.numero numeroCustom,
      compra.numero numeroCompra
    from Documento custom
    left join documento venda on venda.codigoDocumento = custom.documentoCodigo
    left join contato vendedor on vendedor.codigoContato = venda.codigoContatoVendedor
    left join contato empresa on empresa.codigoContato = venda.codigoEmpresa
    left join documentoContato fornecedor on fornecedor.codigoDocumento = custom.codigoDocumento
    left join contato contatoFornecedor on contatoFornecedor.codigoContato = fornecedor.codigoContato
    left join documento compra on compra.codigoDocumento = custom.codigoDocumentoOperacao and compra.tipo = 'Compra'
    where custom.tipo = 'Custom'
      ${r?`and custom.idEmpresa in (${r})`:""}
      and custom.status not in ('Or\xE7amento', 'Cancelado', 'N\xE3o aprovado', '')
      and (custom.status <> 'Entregue' or cast(custom.dataHoraFinalizado as date) between ${Bp(e)} and ${Bp(t)})`)},async leProdutosServicos(e){const t=await Do(`select
      codigoDocumento,
      numero,
      descricao,
      observacao
    from documento custom
    where custom.codigoDocumento = ${io(e)}`),o=await Do(`select
      prod.codigoDocumentoItem,
      prod.descricaoItem,
      prod.quantidade,
      prod.codigoItem,
      prod.observacao,
      itn.referencia,
      itn.imagem
    from documento custom
    inner join documentoItem prod on prod.codigoDocumentoAdicional = custom.codigoDocumento
    inner join item itn on itn.codigoItem = prod.codigoItem
    where custom.codigoDocumento = ${io(e)}`);return{custom:t.find(r=>r.codigoDocumento)||{},produtos:o}},async geraPedidoOnline(e){return Do(`exec sp_compras_pedidoViaCustom '${io(e.codigoDocumento)}', ${io(e.codigoUsuario)}`)},async gravaFornecedorOnline(e){return Do(`set nocount on
      update documentoContato
      set codigoContato = ${io(e.codigoFornecedor)}
      where descricao = 'Fornecedor' and codigoDocumento = ${io(e.codigoDocumento)}
      if @@RowCount = 0
        insert into documentoContato (codigoContato, descricao, codigoDocumento)
        values(${io(e.codigoFornecedor)}, 'Fornecedor', ${io(e.codigoDocumento)})`)},async trocaStatusOnline(e){return Do(`set nocount on
      update documento set
          status = ${Bt(e.statusNovo)},
          dataHoraFinalizado = case ${Bt(e.statusNovo)} when 'Entregue' then getdate() else null end
        where codigoDocumento = ${io(e.codigoDocumento)}
      insert into documentoStatus (codigoDocumento, codigoDocumentoItem, codigoContatoResponsavel, operacao,
        statusOriginal, statusFinalizado, dataHoraEmissao, cpfUsuario, observacao)
      values(${io(e.codigoDocumento)}, NULL, ${io(e.codigoContatoResponsavel)}, 'Mudan\xE7a status Custom',
        ${Bt(e.statusAtual)}, ${Bt(e.statusNovo)}, getdate(), ${Bt(e.cpfUsuario)}, ${Bt(e.observacao,"")})`)}},I1e={async grava(e,t){await Se(t).dispositivoCliente.put(e),await ut("atualizar","dispositivoCliente",e.id,e,t)}};const A1e={grava:async e=>{if(e=$utils.compactarObjeto(e),!Object.keys(e.original||{}).length)await $erpPut().documento.put(e.atual),await $utils.sincronismoEnviar("adicionar","documento",e.atual.id,e.atual);else{const t=$utils.diferencaObjetos(e.original,e.atual);Object.keys(t).length&&(await $erpUpdate().documento.update(e.atual.id,t),await $utils.sincronismoEnviar("atualizar","documento",e.atual.id,t))}},ler:async e=>{e=e||{};let t={},o;return e!=null&&e.idContato&&(t.idContato=e.idContato),e!=null&&e.idFatura&&(t.idFatura=e.idFatura),e!=null&&e.idDocumentoAdicional&&(t.idDocumentoAdicional=e.idDocumentoAdicional),e!=null&&e.idContatoVendedor&&(t.idContatoVendedor=e.idContatoVendedor),e!=null&&e.idContatoDigitador&&(t.idContatoDigitador=e.idContatoDigitador),e!=null&&e.idEmpresa&&(t.idEmpresa=e.idEmpresa),e!=null&&e.documentoId&&(t.documentoId=e.documentoId),e!=null&&e.tipo&&(t.tipo=e.tipo),e!=null&&e.status&&(t.status=e.status),e!=null&&e.operacao&&(t.operacao=e.operacao),Object.keys(t).length>0?(o=$erp().documento.where(t),e!=null&&e.idCaixa&&(o=o.filter(r=>r.idCaixa===e.idCaixa)),e!=null&&e.documentoTipo&&(o=o.filter(r=>r.documentoTipo===e.documentoTipo)),await o.toArray()||[]):[]},checarConflitoStatus:async(e={})=>{const{id:t}=e;if(!!await $db.hibrido.le({table:"documento",id:t}))for(let r=0;r<2;r++){const{id:a,status:i}=e,n={status:{funcao:"A548FAFD-533C-4580-8965-E1905F93A8A9",id:a}},s={timeout:1e3};if((await $utils.geeksApi(n,s)).data.status!==i)throw new Error("status")}}},T1e={gerarParcelamento:async(e,t,o)=>{var d,f,m,p,v,g,x,b;const r=await $db.hibrido.le({table:"documento",id:e}),a=await $db.hibrido.lista({table:"documentoCondicaoPagamento",where:{idDocumento:e}});for(let _ in a)await Se().documentoCondicaoPagamento.where({id:a[_].id}).delete(),await ut("remover","documentoCondicaoPagamento",a[_].id);const i=t.split("/").length,n=(f=(d=r==null?void 0:r.dataCompra)!=null?d:r==null?void 0:r.dataHoraPrevisto)!=null?f:new Date,s=(m=r==null?void 0:r.freteSeparado)!=null?m:0;let l=r==null?void 0:r.totalDocumento;if(s){const _=((p=r==null?void 0:r.valorFrete)!=null?p:0)+((v=r==null?void 0:r.valorSeguro)!=null?v:0);if((r==null?void 0:r.tipoFrete)==="FOB"&&_>0){let w={id:$utils.uuid(),codigoDocumento:r==null?void 0:r.codigoDocumento,idDocumento:r==null?void 0:r.id,dataVencimento:n,valor:_,observacao:"Valor Frete + Seguro"};await $erpPut().documentoCondicaoPagamento.put(w),await ut("adicionar","documentoCondicaoPagamento",w.id,w)}}let u=0,c=l/i;for(let _ in t.split("/")){let w=(x=(g=r==null?void 0:r.dataCompra)!=null?g:r==null?void 0:r.dataHoraPrevisto)!=null?x:new Date;typeof w=="string"&&(w=(b=new Date(w))!=null?b:new Date),w.setDate(w.getDate()+parseInt(t.split("/")[_]));let S={id:$utils.uuid(),codigoDocumento:r==null?void 0:r.codigoDocumento,idDocumento:r==null?void 0:r.id,dataVencimento:w,valor:c,observacao:""};await $erpPut().documentoCondicaoPagamento.put(S),await ut("adicionar","documentoCondicaoPagamento",S.id,S),u+=c!=null?c:0}if(l!==u){const _=await $db.hibrido.lista({table:"documentoCondicaoPagamento",where:{idDocumento:e}}),w={original:$utils.clonarV2(_[0]),atual:$utils.clonarV2(_[0])};w.atual.valor+=(l!=null?l:0)-(u!=null?u:0);const S=Ja(w.original,w.atual);Object.keys(S).length&&(await $erpUpdate().documentoCondicaoPagamento.update(w.atual.id,S),await ut("atualizar","documentoCondicaoPagamento",w.atual.id,S))}},async grava(e){var t;try{if(!((t=e.original)!=null&&t.id))await $erpPut().documentoCondicaoPagamento.put(e.atual),await ut("adicionar","documentoCondicaoPagamento",e.atual.id,e.atual);else{const o=Ja(e.original,e.atual);Object.keys(o).length&&(await $erpUpdate().documentoCondicaoPagamento.update(e.atual.id,o),await ut("atualizar","documentoCondicaoPagamento",e.atual.id,o))}}catch(o){console.log(o.message)}},async remover(e){await $erpDelete().documentoCondicaoPagamento.delete(e),await ut("remover","documentoCondicaoPagamento",e)},async removeParcela(e){await $erpDelete().documentoCondicaoPagamento.where({id:e}).delete(),await ut("remover","documentoCondicaoPagamento",e)}};var D1e={nomeTabela:"documentoFiscalEletronico",filtrosTabela:["idDocumento","tpAmb","cpfCnpjEmitente","mod","serie","nNF","situacao","tipo"],async grava(e){Wt.log(this.nomeTabela,"grava",e);const t=cn(e.original||{},e.atual);Object.keys(e.original||{}).length?Object.keys(t).length&&(await Se()[this.nomeTabela].update(e.atual.id,t),await ut("atualizar",this.nomeTabela,e.atual.id,t)):(await Se()[this.nomeTabela].put(t),await ut("adicionar",this.nomeTabela,t.id,t))},async remove(e){await Se()[this.nomeTabela].delete(e),await ut("remover",this.nomeTabela,e)},async buscarMaisRecentes(e,t,o,r,a){var i;try{const n=await $utils.geeksApi({buscarMaisRecentes:{funcao:"E850235E-80E0-45BA-AE09-49615B5D9FEA",tpAmb:e,cpfCnpjEmitente:t,mod:Number(o),serie:Number(r),idDocumentoFiscalEletronico:a}});return(i=n==null?void 0:n.data)==null?void 0:i.buscarMaisRecentes}catch{return[]}},async proximoNumero(e,t,o,r,a,i){var s,l;let n=0;try{const u=await $utils.geeksApi({proximoNumero:{funcao:"410D8248-58F6-4018-B544-EC34D9FF598D",tpAmb:e,cpfCnpjEmitente:t,mod:Number(o),serie:Number(r),idDocumentoFiscalEletronico:i}});n=(l=(s=u==null?void 0:u.data)==null?void 0:s.proximoNumero)==null?void 0:l.nNF}catch(u){console.error(u),await Se()[this.nomeTabela].where({tpAmb:e,cpfCnpjEmitente:t,mod:Number(o),serie:Number(r)}).each(c=>{i&&c.id===i||Number(c.nNF)>n&&(n=Number(c.nNF))})}return n||(n=await $db.configuracoes.leValorNumericoComFiltroEmpresa(o==="65"?"nfce.ultimanota":"nfe.ultimanota",a,0)),n+1},async leListaNFeCompletaOnline(e){const{filtros:t,limit:o,termoBusca:r,page:a,sort:i,dir:n}=e;return(await $utils.geeksApi({listaNFes:{funcao:"A24C3EA4-B648-4A42-BA41-60D54A105D40",filtros:t,termoBusca:r,limit:o,page:a,sort:i,dir:n}})).data.listaNFes}},O1e={nomeTabela:"documentoFiscalEletronicoErro",filtrosTabela:["idDocumento","idDocumentoFiscalEletronico","chNFe","tpAmb","cpfCnpjEmitente","mod","serie","nNF","situacao"],async grava(e){Wt.log(this.nomeTabela,"grava",e);const t=cn(e.original||{},e.atual);Object.keys(e.original||{}).length?Object.keys(t).length&&(await Se()[this.nomeTabela].update(e.atual.id,t),await ut("atualizar",this.nomeTabela,e.atual.id,t)):(await Se()[this.nomeTabela].put(t),await ut("adicionar",this.nomeTabela,t.id,t))},async remove(e){Wt.log(this.nomeTabela,"remove",e),await Se()[this.nomeTabela].delete(e),await ut("remover",this.nomeTabela,e)}},P1e={nomeTabela:"documentoFiscalEletronicoXml",filtrosTabela:["idDocumento","idDocumentoFiscalEletronico","status","situacao"],async grava(e){Wt.log(this.nomeTabela,"grava",e);const t=cn(e.original||{},e.atual);Object.keys(e.original||{}).length?Object.keys(t).length&&(await Se()[this.nomeTabela].update(e.atual.id,t),await ut("atualizar",this.nomeTabela,e.atual.id,t)):(await Se()[this.nomeTabela].put(t),await ut("adicionar",this.nomeTabela,t.id,t))},async remove(e){Wt.log(this.nomeTabela,"remove",e),await Se()[this.nomeTabela].delete(e),await ut("remover",this.nomeTabela,e)},async proximoNumeroSequencialEvento(e,t){Wt.log(this.nomeTabela,"proximoNumeroSequencialEvento",e,t);let o=0;return await Se()[this.nomeTabela].where({idDocumentoFiscalEletronico:e,operacao:t}).each(r=>{Number(r.nSeqEvento)>o&&(o=Number(r.nSeqEvento))}),o+1}};const F1e={grava:async e=>{if(e=Vr(e),!Object.keys(e.original||{}).length)await $erpPut().documentoItem.put(e.atual),await ut("adicionar","documentoItem",e.atual.id,e.atual);else{const t=Ja(e.original,e.atual);Object.keys(t).length&&(await $erpUpdate().documentoItem.update(e.atual.id,t),await ut("atualizar","documentoItem",e.atual.id,t))}},remove:async e=>{for(const t of e)await $erpDelete().documentoItem.delete(t.id),await ut("remover","documentoItem",t.id)},leApontamento:async e=>{if(e=e||{},"id"in e)return $db.hibrido.le({table:"documentoItem",id:e.id});let t={};if("idDocumento"in e){if(!e.idDocumento)return[];t.idDocumento=e.idDocumento}if("tipoItem"in e){if(!e.tipoItem)return[];t.tipoItem=e.tipoItem}return await(await Se().documentoItem.where(t)).toArray()||[]},async removeApontamento(e){await Se().documentoItem.where({id:e,tipoItem:"ApontamentoPCP"}).delete(),await ut("remover","documentoItem",e)}};var M1e={gravar:async e=>{if(e=$utils.compactarObjeto(e),!Object.keys(e.original||{}).length)await $erpPut().documentoOperacao.put(e.atual),await $utils.sincronismoEnviar("adicionar","documentoOperacao",e.atual.id,e.atual);else{const t=$utils.diferencaObjetos(e.original,e.atual);Object.keys(t).length&&(await $erpUpdate().documentoOperacao.update(e.original.id,t),await $utils.sincronismoEnviar("atualizar","documentoOperacao",e.original.id,t))}},le:async e=>{if(e=e||{},"id"in e)return $db.hibrido.le({table:"documentoOperacao",id:e.id});let t=await Se().documentoOperacao.toArray()||[];return e.codigoDocumentoOperacao&&(t=t.filter(o=>parseInt(o.codigoDocumentoOperacao)===e.codigoDocumentoOperacao)),t},ler:async(e={})=>{if(e.id){const o=await $db.hibrido.le({table:"documentoOperacao",id:e.id});return o||{}}let t=null;for(const o of Object.keys(e).filter(r=>r!=="id")){if(~[void 0,null].indexOf(e[o]))continue;if(t){t=t.filter(a=>a[o]===e[o]);continue}const r={};r[o]=e[o],t=await $db.hibrido.lista({table:"documentoOperacao",where:r})}return t||await Se().documentoOperacao.toArray()},remover:async e=>{await $erpDelete().documentoOperacao.delete(e.id),await $utils.sincronismoEnviar("remover","documentoOperacao",e.id)}};const N1e={grava:async e=>{if(e=$utils.compactarObjeto(e),!Object.keys(e.original||{}).length)await $erpPut().documentoSat.put(e.atual),await $utils.sincronismoEnviar("adicionar","documentoSat",e.atual.id,e.atual);else{const t=$utils.diferencaObjetos(e.original,e.atual);Object.keys(t).length&&(await $erpUpdate().documentoSat.update(e.atual.id,t),await $utils.sincronismoEnviar("atualizar","documentoSat",e.atual.id,t))}},lista:async e=>{let t=[];try{t=(await $utils.geeksApi({listaHibrido:{funcao:"FCC75497-9CAD-4D28-AB39-F669142BE8A9",table:"documentoSat",where:{idDocumento:e}}})).data.listaHibrido}catch{}for(const a of await $erp().documentoSat.where({idDocumento:e}).toArray())t.some(i=>i.id===a.id)||t.push(a);const o=t.filter(a=>a.cancelamento).map(a=>a.chaveCupomCancelado);return t.filter(a=>!o.includes(a.chaveCupom)).sort((a,i)=>i.numeroCupom-a.numeroCupom)}},k1e={grava:async e=>{if(e=Vr(e),!Object.keys(e.original||{}).length)await $erpPut().documentoStatus.put(e.atual),await ut("adicionar","documentoStatus",e.atual.id,e.atual);else{const t=Ja(e.original,e.atual);Object.keys(t).length&&(await $erpUpdate().documentoStatus.update(e.atual.id,t),await ut("atualizar","documentoStatus",e.atual.id,t))}},le:async e=>{if(e=e||{},"id"in e)return $db.hibrido.le({table:"documentoStatus",id:e.id});let t={};"idDocumento"in e&&e.idDocumento&&(t.idDocumento=e.idDocumento),"idDocumentoCaixa"in e&&e.idDocumentoCaixa&&(t.idDocumentoCaixa=e.idDocumentoCaixa),"idDocumentoItem"in e&&e.idDocumentoItem&&(t.idDocumentoItem=e.idDocumentoItem),"idContatoResponsavel"in e&&e.idContatoResponsavel&&(t.idContatoResponsavel=e.idContatoResponsavel);let o=[];return Object.keys(t).length?o=await $db.hibrido.lista({table:"documentoStatus",where:t}):o=await Se().documentoStatus.toArray()||[],e.operacao&&(o=o.filter(r=>r.operacao===e.operacao)),o},async leHistoricoOnline(e){sm(!e,"N\xE3o foi poss\xEDvel encontrar o id do documento.");const t=Number.isInteger(Number(e));return await Do(`select
        codigoDocumentoStatus,
        statusOriginal,
        statusFinalizado,
        dataHoraEmissao,
        observacao,
        cpfUsuario
      from documentoStatus
      where `+(t?"codigoDocumento":"idDocumento")+` = '${e}'
      order by dataHoraEmissao desc`)},async leHistoricoParaVarios(e){sm(!e||!Array.isArray(e)||e.length===0,"N\xE3o foi poss\xEDvel encontrar os ids dos documentos.");const o=e.map(r=>{const a=Number.isInteger(Number(r));return{idOriginal:r,filtro:a?`codigoDocumento = '${r}'`:`idDocumento = '${r}'`}}).map(r=>`(${r.filtro})`).join(" OR ");return await Do(`
    select
      idDocumento,
      statusFinalizado,
      codigoDocumento,
      dataHoraEmissao
    from documentoStatus
    where ${o}
    order by dataHoraEmissao desc
  `)}};async function R1e(e){e=$utils.compactarObjeto(e);try{if(!Object.keys(e.original||{}).length)await $erpPut().documentoXML.put(e.atual),await $utils.sincronismoEnviar("adicionar","documentoXML",e.atual.id,e.atual);else{const t=$utils.diferencaObjetos(e.original,e.atual);Object.keys(t).length&&(await $erpUpdate().documentoXML.update(e.atual.id,t),await $utils.sincronismoEnviar("atualizar","documentoXML",e.atual.id,t))}}catch(t){console.error("Mensagem Erro: ",t.message),console.error("Erro: ",t)}}var V1e={grava:R1e};async function B1e(e){await $utils.geeksApi({upinsert:{funcao:"4A52242A-EC5B-4B10-AE25-F70DD7009FF5",eCommerce:e}})}async function q1e(e){return(await $utils.geeksApi({get:{funcao:"0CDA7F93-F442-4F45-94B3-2C146B1FC2B9",idECommerce:e}})).data.get}async function L1e(e){await $utils.geeksApi({delete:{funcao:"A09FFED2-7473-437A-BA1D-5FD02C5BB88D",idECommerce:e}})}var $1e={gravar:B1e,ler:q1e,remover:L1e};const U1e=60,z1e=["id","ativo","codigoContato","nome","apelido","numeroDocumentoNacional","idContato"];let Zu;function ZC(){Zu={timeout:0,empresas:[],empresaIdContato:{}}}ZC();async function H1e(e){const{filtro:t}=e!=null?e:{};let o=$erp().empresa;return typeof t.ativo=="boolean"&&(o=o.filter(r=>r.ativo===t.ativo)),o=await o.toArray(),o}var j1e={limpaCache:ZC,async atualizaCache(){const e=async()=>{const t=await $db.hibrido.lista({table:"empresa",columns:z1e}),o={};for(const a of t)o[a.idContato]=a;const r=new Date;Zu={timeout:r.setSeconds(r.getSeconds()+U1e),empresas:t,empresaIdContato:o}};Zu.processando||(Zu.processando=e());try{await Zu.processando}catch(t){throw ZC(),t}},async verificaCache(){new Date>new Date(Zu.timeout)&&await this.atualizaCache()},async leCache({idContato:e}){return $utils.verificarErro(!e,"Id d do contato da empresa n\xE3o fornecido"),await this.verificaCache(),Zu.empresaIdContato[e]||{}},grava:()=>{},ler:H1e,le:async e=>{if(e=e||{},"id"in e)return e.id?await Se().empresa.get(e.id)||{}:{};let t={};"idContato"in e&&e.idContato&&(t.idContato=e.idContato);let o=Se().empresa;return Object.keys(t).length&&(o=o.where(t)),o.toArray()||[]},leOnline:async(e={})=>Do("select codigoContato, nome, numeroDocumentoNacional from empresa"),leOnlineTemp:async e=>Do(`
      select
        id,
        codigoEmpresa,
        idContato,
        codigoContato,
        idClienteSistema,
        codigoClienteSistema,
        nome,
        apelido,
        numeroDocumentoNacional,
        numeroDocumentoEstadual,
        dataCadastro,
        hashCSCHomologacao,
        tokenCSCHomologacao,
        hashCSCProducao,
        tokenCSCProducao,
        tokenIBPT,
        nSerieCert,
        ativo,
        sigla,
        codigoPai,
        idPai,
        corPrincipal,
        corSecundaria,
        nfseOptanteSimples,
        nfseIncentivadorCultural,
        nfseNaturezaOperacao,
        nfseRegimeTributario,
        nfseDescricaoServico,
        nfseCodigoServico,
        nfseAliquotaIss,
        nfseHistoricoIss,
        nfseItensListaDeServico
      from empresa
      where idContato='${e}'
      order by apelido`),leOnlinePlat:async(e={})=>"codigoClienteSistema"in e?Do(`
        select
          id,
          codigoEmpresa,
          idContato,
          codigoContato,
          idClienteSistema,
          codigoClienteSistema,
          nome,
          apelido,
          numeroDocumentoNacional,
          numeroDocumentoEstadual,
          dataCadastro,
          hashCSCHomologacao,
          tokenCSCHomologacao,
          hashCSCProducao,
          tokenCSCProducao,
          tokenIBPT,
          nSerieCert,
          ativo,
          sigla,
          codigoPai,
          idPai,
          corPrincipal,
          corSecundaria,
          nfseOptanteSimples,
          nfseIncentivadorCultural,
          nfseNaturezaOperacao,
          nfseRegimeTributario,
          nfseDescricaoServico,
          nfseCodigoServico,
          nfseAliquotaIss,
          nfseHistoricoIss,
          nfseItensListaDeServico
        from empresa
        where codigoClienteSistema=${io(e.codigoClienteSistema)}
        order by apelido`,"GeeksPlat15A"):{},gravaOnline:async({atual:e})=>{const t=`
update empresa set
  idContato=${Bt(e.idContato)},
  idClienteSistema=${Bt(e.idClienteSistema)},
  codigoClienteSistema=${io(e.codigoClienteSistema)},
  nome=${Bt(e.nome)},
  apelido=${Bt(e.apelido)},
  numeroDocumentoNacional=${Bt(e.numeroDocumentoNacional)},
  numeroDocumentoEstadual=${Bt(e.numeroDocumentoEstadual)},
  hashCSCHomologacao=${Bt(e.hashCSCHomologacao)},
  tokenCSCHomologacao=${Bt(e.tokenCSCHomologacao)},
  hashCSCProducao=${Bt(e.hashCSCProducao)},
  tokenCSCProducao=${Bt(e.tokenCSCProducao)},
  tokenIBPT=${Bt(e.tokenIBPT)},
  nSerieCert=${Bt(e.nSerieCert)},
  ativo=${Bt(e.ativo)},
  sigla=${Bt(e.sigla)},
  codigoPai=${Bt(e.codigoPai)},
  idPai=${Bt(e.idPai)},
  corPrincipal=${Bt(e.corPrincipal)},
  corSecundaria=${Bt(e.corSecundaria)},
  nfseOptanteSimples=${io(e.nfseOptanteSimples)},
  nfseIncentivadorCultural=${io(e.nfseIncentivadorCultural)},
  nfseNaturezaOperacao=${io(e.nfseNaturezaOperacao)},
  nfseRegimeTributario=${io(e.nfseRegimeTributario)},
  nfseDescricaoServico=${Bt(e.nfseDescricaoServico)},
  nfseCodigoServico=${io(e.nfseCodigoServico)},
  nfseAliquotaIss=${io(e.nfseAliquotaIss)},
  nfseHistoricoIss=${Bt(e.nfseHistoricoIss)},
  nfseItensListaDeServico=${Bt(e.nfseItensListaDeServico)}
where codigoContato=${io(e.codigoContato)}
  and (codigoClienteSistema=${io(e.codigoClienteSistema)}
   or codigoClienteSistema is null)

if @@rowcount = 0
begin
  insert empresa(
    idContato,
    codigoContato,
    idClienteSistema,
    codigoClienteSistema,
    nome,
    apelido,
    numeroDocumentoNacional,
    numeroDocumentoEstadual,
    dataCadastro,
    hashCSCHomologacao,
    tokenCSCHomologacao,
    hashCSCProducao,
    tokenCSCProducao,
    tokenIBPT,
    nSerieCert,
    nfseOptanteSimples,
    nfseIncentivadorCultural,
    nfseNaturezaOperacao,
    nfseRegimeTributario,
    nfseDescricaoServico,
    nfseCodigoServico,
    nfseAliquotaIss,
    nfseHistoricoIss,
    nfseItensListaDeServico)
  values(
    ${Bt(e.idContato)},
    ${io(e.codigoContato)},
    ${Bt(e.idClienteSistema)},
    ${io(e.codigoClienteSistema)},
    ${Bt(e.nome)},
    ${Bt(e.apelido)},
    ${Bt(e.numeroDocumentoNacional)},
    ${Bt(e.numeroDocumentoEstadual)},
    getdate(),
    ${Bt(e.hashCSCHomologacao)},
    ${Bt(e.tokenCSCHomologacao)},
    ${Bt(e.hashCSCProducao)},
    ${Bt(e.tokenCSCProducao)},
    ${Bt(e.tokenIBPT)},
    ${Bt(e.nSerieCert)},
    ${io(e.nfseOptanteSimples)},
    ${io(e.nfseIncentivadorCultural)},
    ${io(e.nfseNaturezaOperacao)},
    ${io(e.nfseRegimeTributario)},
    ${Bt(e.nfseDescricaoServico)},
    ${io(e.nfseCodigoServico)},
    ${io(e.nfseAliquotaIss)},
    ${Bt(e.nfseHistoricoIss)},
    ${Bt(e.nfseItensListaDeServico)})
end`;await Do(t),await Do(t,"GeeksPlat15A")},removeOnline:async e=>{const t=`
declare @codigoEmpresa int
select top 1 @codigoEmpresa=codigoEmpresa
from empresa
where codigoContato=${io(e.codigoContato)}
  and (codigoClienteSistema=${io(e.codigoClienteSistema)}
   or codigoClienteSistema is null)
delete empresaUsuarioPermissao where codigoEmpresa=@codigoEmpresa
delete empresa where codigoEmpresa=@codigoEmpresa`;await Do(t),await Do(t,"GeeksPlat15A")}};async function G1e({envelope:e,itensEnvelope:t,campoAlterado:o}){let r=0;for(const i of t)r+=i.subTotal;e.subTotal=$utils.arredondar(r),(!o||o==="desconto")&&(e.totalPercentualDesconto=$utils.arredondar(e.totalDesconto/e.subTotal*100)),o==="descontoPercentual"&&(e.totalDesconto=$utils.arredondar(e.totalPercentualDesconto/100*e.subTotal));const a=e.tipoFrete==="CIF"&&e.valorFrete||0;return e.totalDocumento=$utils.arredondar(e.subTotal-e.totalDesconto+a),{envelope:e}}async function W1e({envelope:e,itemEnvelope:t,campoAlterado:o}){o==="descontoPercentualItem"&&(t.descontoItem=$utils.arredondar(t.descontoPercentualItem/100*t.valorItem)),o==="descontoItem"&&(t.descontoPercentualItem=$utils.arredondar(t.descontoItem/t.valorItem*100)),o==="valorItem"&&(t.valorItem<t.valorOriginal&&(t.valorItem=t.valorOriginal),t.descontoItem=0,t.descontoPercentualItem=0,t.subTotal=t.valorItem);let r=t.valorItem-t.descontoItem;return $utils.arredondar(r)>$utils.arredondar(t.valorItem)&&(r=t.valorItem,t.descontoPercentualItem=t.descontoItem=0),t.subTotal=$utils.arredondar(r*t.quantidade),t.total=t.subTotal,t.valorReal=$utils.arredondar(r),t.valorRealTotal=t.total,{itemEnvelope:t}}async function Q1e(e){var l;const t=await $db.configuracoes.porNome("vendas.checaestoque",e.documento.idEmpresa),o=Number((l=t==null?void 0:t[0])==null?void 0:l.valor)===1,r=[];if(!o)return r;const a=e.documentoItens.filter(u=>u.idItem&&u.operacaoFator===-1),i=await $db.hibrido.lista({table:"item",whereIn:{id:a.map(u=>u.idItem)}}),n=i.filter(u=>!["servico","tratamento","lente"].includes($utils.tratamentoCompletoString(u.tipo))).map(u=>u.id);return(await $db.envelope.estoque({idsItem:n,idEmpresa:e.documento.idEmpresa,tipo:"Dispon\xEDvel"})).forEach(u=>{if(a.filter(d=>d.idItem===u.idItem).reduce((d,f)=>d+f.quantidade,0)>u.saldo){const d=i.find(f=>f.id===u.idItem);r.push({itemDescricao:d.descricao,saldo:u.saldo,offline:u.offline})}}),r}async function X1e(e){var n,s;const{idsItem:t,idEmpresa:o,tipo:r}=e!=null?e:{};let a=[];const i=$db.hibrido.isOnline();if(i){const l=await $utils.geeksApi({estoque:{funcao:"CC9F3B9A-16B9-4AE8-A523-938E4433AFAA",idItem:t,idEmpresa:o}});a=(s=(n=l==null?void 0:l.data)==null?void 0:n.estoque)!=null?s:[]}return i||(a=(await $erp().estoqueSaldoProdutoEmpresa.where("idItem").anyOf(t).toArray()).filter(u=>u.idEmpresa===o).map(u=>({...u,offline:!0}))),a}async function K1e({tela:e,dados:t,dadosOriginal:o}){var r,a,i;try{$q.loading.show({message:"Processando..."});const n=await $db.hibrido.lista({table:"contato",where:{numeroDocumentoNacional:$db.usuario.logado.numeroDocumentoNacional}}),s=((r=n[0])==null?void 0:r.id)||"",l=((a=n[0])==null?void 0:a.numeroDocumentoNacional)||"",u=await $db.envelope.obterDadosContatoResponsavel(t.documento.idContatoResponsavel);try{Object.keys(o.documento).length&&await $db.venda.checarConflitoStatus({id:t.documento.id,status:o.documento.status})}catch(_){return $q.notifyError(_.message),!1}if((i=u.condutaRestricao)!=null&&i.trim())return $q.notify({message:u.condutaRestricao,timeout:0,type:"negative",closeBtn:!0}),!1;const d=(await $db.configuracoes.porNome("venda.codigoconsumidor")).some(_=>Number(_.valor)===u.codigoContato);if(!d&&t.documento.totalDocumento>0){const _=await $db.envelope.titulosPendentesAtraso({idContato:u.idContato});if(_.length){$q.loading.hide();const w=await new Promise((S,D)=>{e.mostrarTitulosPendentesEmAtraso={acao:S,titulosPendentesAtraso:_}});if(w==="cancelar")return;if(w==="continuar"){const S=t.documento.status,D="Aguardando Financeiro";t.documentoStatus.push({id:$utils.uuid(),idDocumento:t.documento.id,operacao:t.documento.operacao,statusOriginal:S,statusFinalizado:D,dataHoraEmissao:$utils.dataAtual(),cpfUsuario:l,observacao:"T\xEDtulos pendentes em atraso"}),t.documento.status=D,await e.salvar();return}$q.loading.show({message:"Processando..."})}}try{$q.loading.show({message:"Checando estoque..."});const _=await $db.envelope.checarEstoque(t);if(_.length>0){await new Promise((D,M)=>{e.modalItensSemEstoque={data:_,resolve:D,reject:M,visivel:!0}});const w=t.documento.status,S="Aguardando Estoque";t.documentoStatus.push({id:$utils.uuid(),idDocumento:t.documento.id,operacao:t.documento.operacao,statusOriginal:w,statusFinalizado:S,dataHoraEmissao:$utils.dataAtual(),cpfUsuario:l,observacao:""}),t.documento.status=S,await e.salvar();return}}catch(_){_!=null&&_.message&&$q.notify({message:"Erro ao checar o estoque. Tente novamente.",type:"negative"});return}finally{$q.loading.hide(),e.modalItensSemEstoque.data=[],e.modalItensSemEstoque.visivel=!1}if(!!e.$refs.faturamento.formasPagamento.find(_=>_.utilizaLimite)){const _=$utils.arredondar(u.creditoDisponivel),w=$utils.arredondar(t.documento.totalDocumento);if(w>_){e.modalCreditoDisponivel.permiteFinalizar=await $db.permissao.objeto("Diretiva_Vendas_LimiteCredito"),e.modalCreditoDisponivel.title="Limite de cr\xE9dito insuficiente",e.modalCreditoDisponivel.body=`Limite ${$filters.numero(_,2)} - Venda ${$filters.numero(w,2)}`,$q.loading.hide();let S=!1;if(await new Promise(async(D,M)=>{e.modalCreditoDisponivel.resolve=D,e.modalCreditoDisponivel.reject=M,e.modalCreditoDisponivel.visivel=!0}).then(D=>{if(D==="continuar"){const M=t.documento.status,O="Aguardando Financeiro";t.documentoStatus.push({id:$utils.uuid(),idDocumento:t.documento.id,operacao:t.documento.operacao,statusOriginal:M,statusFinalizado:O,dataHoraEmissao:$utils.dataAtual(),cpfUsuario:$db.usuario.logado.numeroDocumentoNacional,observacao:e.modalCreditoDisponivel.title+". "+e.modalCreditoDisponivel.body}),t.documento.status=O,e.salvar(),S=!0}e.modalCreditoDisponivel.visivel=!1}).catch(()=>{S=!0}),S)return;$q.loading.show({message:"Processando..."})}}let m=0;for(const _ of t.documentoItens){if(!_.idItem)continue;if(_.descontoItem===0&&_.total===0)return $q.notify({message:"Existe item no pedido com valor zerado.",timeout:0,type:"warning",closeBtn:!0}),!1;const w=$utils.arredondar((_.total||0)*100/(t.documento.subTotal||1)),S=$utils.arredondar((t.documento.totalDesconto||0)*(w||0)/100),D=(_.valorItem||0)*(_.quantidade||1)-(_.descontoItem||0)*(_.quantidade||1)-(S||0),M=(D||0)/(_.quantidade||1);_.descontoTotalRateado=$utils.arredondar(S),_.valorReal=$utils.arredondar(M),_.valorRealTotal=$utils.arredondar(D),m+=S}if(e.venda=t.documento,!await $db.venda.checarTabelasPreco({carrinho:t.documentoItens,tela:e}))return;if(t.documento.totalDesconto!==$utils.arredondar(m)){const _=$utils.arredondar((t.documento.totalDesconto||0)-(m||0));let w,S=0;for(const D of t.documentoItens)D.total>S&&(S=D.total,w=D);if(w){const D=(w.descontoTotalRateado||0)+(_||0),M=(w.valorItem||0)*(w.quantidade||1)-(w.descontoItem||0)-(D||0),O=(M||0)/(w.quantidade||1);w.descontoTotalRateado=$utils.arredondar(D),w.valorReal=$utils.arredondar(O),w.valorRealTotal=$utils.arredondar(M)}}const p="Processando",v=t.documento.status,g=$utils.dataAtual();t.documento.dataHoraFinalizado=g,t.documento.idContatoFinalizado=s,t.documento.status=p;for(const _ of t.documentoItens)_.dataHoraFinalizado=g,_.valorReal=$utils.arredondar(_.valorReal),_.valorRealTotal=$utils.arredondar(_.valorRealTotal),_.status=p;t.documentoStatus.push({id:$utils.uuid(),idDocumento:t.documento.id,operacao:t.documento.operacao,statusOriginal:v,statusFinalizado:p,dataHoraEmissao:t.documento.dataHoraFinalizado,cpfUsuario:$db.usuario.logado.numeroDocumentoNacional});let x;if(!d){let _=await $db.hibrido.lista({table:"documento",where:{idContato:u.idContato,idEmpresa:t.documento.idEmpresa,tipo:"Fatura",status:"Aberta"}});_=$lodash.orderBy(_,"dataHoraEmissao","desc"),x=_[0]}x!=null&&x.id||(x={id:$utils.uuid(),dataHoraEmissao:t.documento.dataHoraFinalizado,calcularAutomatico:"Sim",tipo:"Fatura",operacao:"Faturamento",status:"Aberta",tipoFrete:"CIF",freteSeparado:!1,totalDesconto:0,totalPercentualDesconto:0,subTotal:t.documento.subTotal,totalDocumento:t.documento.totalDocumento,idEmpresa:t.documento.idEmpresa,idEmpresaEndereco:t.documento.idEmpresaEndereco,descricaoEmpresa:t.documento.descricaoEmpresa,numeroDocumentoEmpresa:t.documento.numeroDocumentoEmpresa,inscricaoMunicipalEmpresa:t.documento.inscricaoMunicipalEmpresa,codigoMunicipioEmpresa:t.documento.codigoMunicipioEmpresa,optanteSimplesNacional:t.documento.optanteSimplesNacional,idContato:u.idContato,idContatoEndereco:u.idContatoEndereco,numeroDocumentoContato:u.numeroDocumentoContato,descricaoContato:u.descricaoContato,descricaoContatoEndereco:u.descricaoContatoEndereco,telefoneContato:u.telefoneContato,emailContato:t.documento.emailContato,regimeContato:t.documento.regimeContato},await $db.fatura.grava({fatura:x}));const b=$utils.clonar(x);x.observacaoFaturamento=t.documento.observacaoFaturamento,await $db.fatura.grava({fatura:x,faturaOriginal:b}),t.documento.idFatura=x.id,await e.salvar(),$utils.enviarWhatsapp({configuracao:"envelope",documento:$utils.clonar(e.envelope.documento),loading:!0}),$utils.enviarEmail({configuracao:"envelope",documento:$utils.clonar(e.envelope.documento),loading:!0}),$q.notifyPositive("Or\xE7amento finalizado"),localStorage.setItem("idFatura",t.documento.idFatura),await e.$nextTick(),(e.$route.name==="AtendimentoVenda"||e.$route.name==="CockpitVendas")&&await $db.permissao.objeto("atendimento//fatura")&&$router.push({name:"AtendimentoFatura",params:{id:u.idContato}})}catch(n){let s="Erro ao finalizar.";/^GError:.+/.test(n.message)&&(s=n.message.slice(7)),$q.notify({type:"negative",message:s}),console.error(n)}finally{$q.loading.hide()}}async function Y1e({idContato:e}){const t=await $db.hibrido.lista({table:"financeiroTitulo",where:{idContato:e}}),o=[],r=new Date(new Date().toDateString());for(const a of t){const i=new Date(new Date(a.dataVencimento).toDateString());!a.receberPagar||!a.dataVencimento||i>=r||a.dataPagamento||o.push(a)}return o}const J1e={id:"",tipo:"Envelope",operacao:"Normal",status:"",idEmpresa:"",descricaoEmpresa:"",numeroDocumentoEmpresa:"",idContato:"",descricaoContato:"",numeroDocumentoContato:"",idContatoResponsavel:"",dataHoraEmissao:"",dataHoraRealizado:"",dataHoraPrevisto:"",documentoId:"",documentoTipo:"",subTotal:0,totalDocumento:0};async function Z1e(e){const t=await $db.contato.leCompleto(e);if(!t.id)throw new Error("GError:Contato respons\xE1vel n\xE3o localizado.");const o=t.endereco.find(i=>i.grupo==="Principal")||t.endereco[0]||"",r=t.telefone.find(i=>i.grupo==="Principal")||t.telefone[0]||"";let a="";return a="".concat((o==null?void 0:o.logradouro)||"",", ",(o==null?void 0:o.numero)||""," ",(o==null?void 0:o.complemento)||""," - ",(o==null?void 0:o.bairro)||""," - ",(o==null?void 0:o.cep)||""," - ",(o==null?void 0:o.municipio)||"","/",(o==null?void 0:o.uf)||""),a===",   -  -  - /"&&(a=""),{idContato:t.id,codigoContato:t.codigoContato,descricaoContato:t.nome,numeroDocumentoContato:t.numeroDocumentoNacional,condutaRestricao:t.condutaRestricao,creditoDisponivel:t.creditoDisponivel,telefoneContato:r.telefone,idContatoEndereco:o.id,descricaoContatoEndereco:a}}async function eve(e){const{filtros:t,limit:o,page:r,sort:a,dir:i}=e,n=await $db.permissao.objeto("Diretiva_Venda/Fatura_OutrasLojas_VerTodos")||!1;return(await $utils.geeksApi({listaEnvelopes:{funcao:"8C3B32B4-2506-47C5-B8FF-C18285F34F34",filtros:t,limit:o,page:r,sort:a,dir:i,permissaoVendasOutrasLojas:n}})).data.listaEnvelopes}async function tve(e,t){const o=$utils.removerAcentos(t.toUpperCase()).split(" ").filter(Boolean),r=o.filter(n=>n.match(/^\d+$/)),a=o.filter(n=>!n.match(/^\d+$/)),i=[];for(const n of e){const s=await $db.hibrido.lista({table:"documentoItem",where:{idDocumento:n.id}}),l=s.map(({idItem:m})=>m).filter(Boolean),u=await $db.hibrido.lista({table:"item",whereIn:{id:l}}),c=$utils.removerAcentos([n.id,n.idContato,n.descricaoContato,n.numeroDocumentoContato,...s.map(({descricaoItem:m})=>m),...u.map(({marca:m,referencia:p})=>[m,p].join(" "))].join(" ").toUpperCase()),d=[n.numero,$utils.filtrarDigitos(n.numeroDocumentoContato),...u.map(({referencia:m})=>m),...u.map(({codigoBarras:m})=>m)].map(String);let f=!0;for(const m of r)f=f&&d.includes(m);for(const m of a)f=f&&c.includes(m);f&&i.push(n)}return i}async function ove(e,t){const o=$utils.removerAcentos(t.toUpperCase()).split(" ").filter(Boolean),r=[];for(const a of e){const i=$utils.removerAcentos(a.descricaoContato.toUpperCase());let n=!0;for(const s of o)n=n&&i.includes(s);n&&r.push(a)}return r}async function ave(e){var S,D,M,O,T,I,N,P;const{filtros:t,limit:o,page:r,sort:a,dir:i}=e,n=await $db.permissao.objeto("Diretiva_Venda/Fatura_OutrasLojas_VerTodos"),s=await $db.contatoEmpresa.listaCache();let l=(await $db.hibrido.lista({table:"documento",where:{tipo:"Envelope"}})).filter(F=>!F.documentoId);if(t.status&&t.status!=="Todos"&&(l=l.filter(F=>F.status===t.status)),n||(l=l.filter(F=>s.find(L=>L.id===F.idEmpresa))),(S=t.empresaSelecionada)!=null&&S.id&&(l=l.filter(F=>t.empresaSelecionada.id===F.idEmpresa)),t.numeroEnvelope&&(l=l.filter(F=>t.numeroEnvelope===F.numero)),t.numeroOrdemCompra&&(l=l.filter(F=>{var L;return(L=F==null?void 0:F.numeroOrdemCompra)==null?void 0:L.startsWith(t.numeroOrdemCompra)})),(D=t.prazoSelecionado)!=null&&D.value){const F=new Date(new Date().setHours(0,0,0,0));l=l.filter(L=>!["Entregue","Or\xE7amento"].includes(L.status)),t.prazoSelecionado.value==="adiantadoEntrega"?(t.dataHoraPrevisto.ini=Xo.formatDate(F),t.dataHoraPrevisto.fim=Xo.formatDate(new Date(F.getFullYear(),F.getMonth()+1,F.getDate()))):t.prazoSelecionado.value==="proximaEntrega"?(t.dataHoraPrevisto.ini=Xo.formatDate(F),t.dataHoraPrevisto.fim=Xo.formatDate(F.getTime()+7*24*60*60*1e3)):t.prazoSelecionado.value==="atrasadoEntrega"&&(t.dataHoraPrevisto.ini=null,t.dataHoraPrevisto.fim=Xo.formatDate(F.getTime()-24*60*60*1e3))}if((M=t.dataHoraEmissao)!=null&&M.ini){const F=new Date(t.dataHoraEmissao.ini).setHours(0,0,0,0);l=await l.filter(L=>new Date(L.dataHoraEmissao).setHours(0,0,0,0)>=F)}if((O=t.dataHoraEmissao)!=null&&O.fim){const F=new Date(t.dataHoraEmissao.fim).setHours(0,0,0,0);l=await l.filter(L=>new Date(L.dataHoraEmissao).setHours(0,0,0,0)<=F)}if((T=t.dataHoraPrevisto)!=null&&T.ini){const F=new Date(t.dataHoraPrevisto.ini).setHours(0,0,0,0);l=await l.filter(L=>new Date(L.dataHoraPrevisto).setHours(0,0,0,0)>=F)}if((I=t.dataHoraPrevisto)!=null&&I.fim){const F=new Date(t.dataHoraPrevisto.fim).setHours(0,0,0,0);l=await l.filter(L=>new Date(L.dataHoraPrevisto).setHours(0,0,0,0)<=F)}if((N=t.dataHoraFinalizado)!=null&&N.ini){const F=new Date(t.dataHoraFinalizado.ini).setHours(0,0,0,0);l=await l.filter(L=>new Date(L.dataHoraFinalizado).setHours(0,0,0,0)>=F)}if((P=t.dataHoraFinalizado)!=null&&P.fim){const F=new Date(t.dataHoraFinalizado.fim).setHours(0,0,0,0);l=await l.filter(L=>new Date(L.dataHoraFinalizado).setHours(0,0,0,0)<=F)}t.frase&&(l=await ove(l,t.frase)),t.termoBusca&&(l=await tve(l,t.termoBusca)),l=Aa.exports.orderBy(l,a,i);const u=l.length,c=((r||1)-1)*o,d=l.splice(c,o),f=d.map(F=>F.id);let m=[];f.length>0&&(m=await Se().documentoStatus.where("idDocumento").anyOf(f).toArray());const p={};for(const F of m){const L=F.idDocumento,z=p[L];(!z||new Date(F.dataHoraEmissao)>new Date(z.dataHora))&&(p[L]={ultimoStatus:F.statusFinalizado,dataHora:F.dataHoraEmissao})}const v=(d!=null?d:[]).map(F=>{const L=p[F.id],z=(L==null?void 0:L.ultimoStatus)==="Entregue"?L.dataHora:null;return{...F,dataEntrega:z,statusHistoricoFinalizado:(L==null?void 0:L.ultimoStatus)||F.status}}),g=d.map(({idContato:F})=>F).filter(Boolean),x=d.map(({idContatoResponsavel:F})=>F).filter(Boolean),b=d.map(({idContatoVendedor:F})=>F).filter(Boolean),_=[...new Set([...g,...x,...b])],w=(await $db.hibrido.lista({table:"contato",whereIn:{id:_}})).reduce((F,L)=>(F[L.id]=L,F),{});return{total:u,totalPages:Math.ceil(u/o)||1,data:{vendas:v,contatos:w}}}var rve={vazio:J1e,gravar:async e=>{var a,i,n,s,l,u,c;const{atual:t,original:o}=e!=null?e:{};await $db.documento.grava({atual:(a=t.documento)!=null?a:{},original:(i=o==null?void 0:o.documento)!=null?i:{}}),await $utils.processarFilho("documentoItem",(n=o==null?void 0:o.documentosItem)!=null?n:[],(s=t.documentosItem)!=null?s:[]),await $utils.processarFilho("documentoStatus",o==null?void 0:o.documentosStatus,(l=t.documentosStatus)!=null?l:[]);const r=(u=t.pupilometro)!=null?u:{};if(Object.keys((c=r==null?void 0:r.atual)!=null?c:{}).length&&await $db.pupilometro.gravar(r),Array.isArray(t.arquivos)){let d;Array.isArray(t.arquivosOriginal)&&t.arquivosOriginal.length>0&&(d=t.arquivosOriginal),d&&await $db.arquivo.remove(d.filter(f=>!t.arquivos.find(m=>m.id===f.id)));for(const f of t.arquivos){let m={};(d==null?void 0:d.length)>0?m={original:d.find(p=>p.id===f.id)||[{}],atual:f}:m={atual:f},await $db.arquivo.grava(m)}}},leListaCompleta(e){return $db.hibrido.isOnline()?eve(e):ave(e)},async trocaStatusOnline(e){return Do(`set nocount on
      update documento set
          status = ${Bt(e.statusNovo)}
          --,dataHoraFinalizado = case ${Bt(e.statusNovo)} when 'Entregue' then getdate() else null end
        where tipo='Envelope' and codigoDocumento = ${io(e.codigoDocumento)}
      insert into documentoStatus (codigoDocumento, codigoDocumentoItem, codigoContatoResponsavel, operacao,
        statusOriginal, statusFinalizado, dataHoraEmissao, cpfUsuario, observacao)
      values(${io(e.codigoDocumento)}, NULL, ${io(e.codigoContatoResponsavel)}, 'Mudan\xE7a status envelope',
        ${Bt(e.statusAtual)}, ${Bt(e.statusNovo)}, getdate(), ${Bt(e.cpfUsuario)}, ${Bt(e.observacao,"")})`)},async gravaLaboratorioOnline(e){return Do(`set nocount on
      update documentoContato
      set codigoContato=${io(e.codigoLaboratorio)}
      where descricao='Laborat\xF3rio' and codigoDocumento=${io(e.codigoDocumento)}
      if @@RowCount = 0
        insert into documentoContato (codigoContato, descricao, codigoDocumento)
        values(${io(e.codigoLaboratorio)}, 'Laborat\xF3rio', ${io(e.codigoDocumento)})
      select top 1 numeroDocumentoNacional cnpjLaboratorio from contato where codigoContato=${io(e.codigoLaboratorio)}`)},async comprasPedidoViaEnvelopeOnline(e){return Do(`exec Sp_Compras_PedidoViaEnvelope '${io(e.codigoDocumento)}', ${io(e.codigoUsuario)}`)},calculaTotal:G1e,calculaTotalItem:W1e,checarEstoque:Q1e,estoque:X1e,finalizar:K1e,obterDadosContatoResponsavel:Z1e,titulosPendentesAtraso:Y1e},ive={nomeTabela:"equipamento",filtrosTabela:["idItem","idContato"],le:Tk,grava:Dk,remove:Ok};class nve{constructor(t={}){this.bancoDeDados=t.bancoDeDados||localStorage.getItem("bancoDeDados"),this.modelo=this.bancoDeDados==="GeeksPlat15A"?Gt:Se()}async get(t,o,r={}){if(!o)return{};let a=this.modelo[t];if(!a)return{};Wt.log("robust","get",t,...Object.keys(r));let i=await a.get(o);return i?(i=await this._join(r.joinOne,i,1),i=await this._join(r.joinMany,i,0),i):{}}async list(t,o={}){Wt.log("robust","list",t,...Object.keys(o));let r=this.modelo[t];if(!r)return{};if(o.filter){for(const i in o.filter)if([null,void 0].includes(o.filter[i]))return[];r=r.where(o.filter)}o.limit>0&&(r=r.limit(o.limit));let a=await r.toArray();if(o.filterNi&&(a=a.filter(i=>this._filter(i,o.filterNi))),o.joinOne||o.joinMany)for(const i in a)a[i]=await this._join(o.joinOne,a[i],1),a[i]=await this._join(o.joinMany,a[i],0);return a}async first(t,o={}){Wt.log("robust","first",t,...Object.keys(o));let r=this.modelo[t];if(!r)return{};if(o.filter){for(const i in o.filter)if([null,void 0].includes(o.filter[i]))return{};r=r.where(o.filter)}o.filterNi&&(r=r.filter(i=>this._filter(i,o.filterNi))),r.constructor.name==="Table"&&(r=r.toCollection());let a=await r.first();return a?(a=await this._join(o.joinOne,a,1),a=await this._join(o.joinMany,a,0),a):{}}_filter(t,o){let r=!0;for(const a in o)if(r=r&&t[a]===o[a],!r)return!1;return r}async _join(t,o,r){if(t){t.constructor!==Array&&(t=[t]);for(let a of t){let i,n,s,l;a.constructor===String&&([i,n,s,l]=a.split(" "),a={field:i,joinTable:n,joinKey:s,key:l}),r===1?a.joinKey==="id"?o[a.field]=await this.get(a.joinTable,o[a.key]):o[a.field]=await this.modelo[a.joinTable].where({[a.joinKey]:o[a.key]}).first():o[a.field]=await this.modelo[a.joinTable].where({[a.joinKey]:o[a.key]}).toArray()}}return o}}function ud(){return new nve}async function sve(e,t){const o=[];if(!e)return o;try{const a=((await $utils.geeksApi({estoque:{funcao:"CC9F3B9A-16B9-4AE8-A523-938E4433AFAA",idItem:e,idEmpresa:t}})||{}).data||{}).estoque||[],i=Array.from(new Set(a.map(n=>n.codigoEmpresa)));i.sort((n,s)=>n.codigoEmpresa<s.codigoEmpresa?-1:1);for(const n of i){const s=(a.find(l=>l.codigoEmpresa===n)||{}).idEmpresa;o.push({codigoEmpresa:n,estoquePorLote:a.filter(l=>l.codigoEmpresa===n),nomeEmpresa:(await $erp().contato.get(s)||{}).apelido})}}catch{const a=await ud().list("estoqueSaldoProdutoEmpresa",{filter:{idItem:e}});let i={},n;for(const s of a){if(n=i[s.idEmpresa],n===void 0){const l=await ud().get("contato",s.idEmpresa);n=o.push({codigoEmpresa:l.codigoContato,nomeEmpresa:l.apelido||"",estoquePorLote:[]})-1,i[s.idEmpresa]=n}o[n].estoquePorLote.push(s)}}return o}async function lve(e){if(e=e||{},"id"in e)return e.id?await $erp().estoqueSaldoProdutoEmpresa.get(e.id)||{}:{};let t={};return"idItem"in e&&e.idItem&&(t.idItem=e.idItem),"idEmpresa"in e&&e.idEmpresa&&(t.idEmpresa=e.idEmpresa),"tipoEstoque"in e&&e.tipoEstoque&&(t.tipoEstoque=e.tipoEstoque),await $erp().estoqueSaldoProdutoEmpresa.where(t).toArray()||[]}var cve={le:lve,leEstoquePorEmpresa:sve};async function uve(e){const t={...e.atual},o={...e.original};if(!Object.keys(o||{}).length)await $erpPut().etiqueta.put(t),await $utils.sincronismoEnviar("adicionar","etiqueta",t.id,t);else{const r=$utils.diferencaObjetos(o,t);Object.keys(r).length&&(await $erpUpdate().etiqueta.update(t.id,r),await $utils.sincronismoEnviar("atualizar","etiqueta",t.id,r))}}async function dve(e){const t={};if(e!=null&&e.id)return await $db.hibrido.le({table:"etiqueta",id:e.id});e==null||delete e.id;for(const o of Object.keys(e!=null?e:{}))e[o]!==void 0&&(t[o]=e[o]);return Object.keys(t).length>0?await $db.hibrido.lista({table:"etiqueta",where:t}):[]}async function fve(e){await $erpDelete().etiqueta.delete(e),await $utils.sincronismoEnviar("remover","etiqueta",e)}var mve={gravar:uve,ler:dve,remover:fve},pve={async verificarPermissao(e,t,o){const r=await Gt.objeto.filter(u=>u.nomeObjeto===o).first()||{};if(r.menuDesenvolvimento&&!(et.usuario.logado.desenvolvedor&&et.usuario.logado.desenvolvedor()))return!1;const a=await Gt.usuarioPermissaoSistema.filter(u=>u.idUsuario===e&&u.idClienteSistema===t).toArray(),i=a.map(u=>u.id),n=a.map(u=>u.idGrupo),s=await Gt.usuarioPermissao.filter(u=>i.includes(u.idUsuarioPermissaoSistema)&&u.idObjeto===r.id&&!!u.permitir).toArray(),l=await Gt.grupoPermissao.filter(u=>n.includes(u.idGrupo)&&u.idObjeto===r.id&&!!u.permitir).toArray();return s.length>0||l.length>0},async objeto(e,t={}){const o=Object.keys(t).length>0?t:JSON.parse(localStorage.getItem("usuario"));if(!o)return!1;const r=JSON.parse(localStorage.getItem("clienteSistema"));if(!r.idSistema||!r.idClienteSistema)return!1;if(o.administrador){const a=await Gt.objeto.filter(n=>n.nomeObjeto===e).first()||{};return!!(await Gt.sistemaObjeto.filter(n=>n.idObjeto===a.id&&n.idSistema===r.idSistema&&(!n.idClienteGeeks||n.idClienteGeeks===r.idCliente)).first()||{}).id}return this.verificarPermissao(o.id,r.idClienteSistema,e)},async objetoClienteSistema(e){let t,o,r;return t=JSON.parse(localStorage.getItem("clienteSistema")),!(!t.idSistema||!t.idClienteSistema||(o=await Gt.objeto.filter(a=>a.nomeObjeto===e).first()||{},r=await Gt.sistemaObjeto.filter(a=>a.idObjeto===o.id&&a.idSistema===t.idSistema&&(!a.idClienteGeeks||a.idClienteGeeks===t.idCliente)).first()||{},!r.id))},async menu(e=!1){const t=JSON.parse(localStorage.getItem("usuario"));if(!t)return[];const o=JSON.parse(localStorage.getItem("clienteSistema"));let r=[];if($db.app.modoOnline.le())r=(await $utils.geeksApi({"menu-hibrido":{funcao:"7C47F547-D292-4E58-93B6-1DB17AD99688",isAdmin:t.administrador,codigoUsuario:t.codigoUsuario,codigoSistema:o.codigoSistema,codigoClienteSistema:o.codigoClienteSistema,grupoInterno:t.grupoInterno}})).data["menu-hibrido"].filter(n=>n.permissao&&n.menuDesenvolvimento===e).sort((n,s)=>(n.ordem||99999)>=(s.ordem||99999));else{const i=await Gt.sistemaObjeto.filter(c=>c.idSistema===o.idSistema&&(!c.idClienteGeeks||c.idClienteGeeks===o.idCliente)).toArray(),n=i.map(c=>c.idObjeto),l=(await Gt.objeto.filter(c=>!!c.ativo&&!!c.visivelMenu&&!!c.menuDesenvolvimento===e&&n.includes(c.id)).toArray()).reduce((c,d)=>(c[d.id]=d,c),{});for(const c of i)c.idObjeto&&l[c.idObjeto]&&(c.objeto=l[c.idObjeto]);if(r=i.filter(c=>!!c.objeto&&!!(c.rota||c.objeto.rota)).sort((c,d)=>(c.ordem||99999)-(d.ordem||99999)).map(c=>{let d=null;try{d=JSON.parse(c.rota||c.objeto.rota||"{}")}catch(f){console.error("JSON.parse error na rota do menu objeto:",c.objeto.nomeObjeto,`
`,String(f))}return{id:c.id,idObjeto:c.idObjeto,idPai:c.idPai,nomeObjeto:c.objeto.nomeObjeto,descricao:c.objeto.descricao,icone:c.objeto.icone,rota:d}}),!(!!t.administrador&&(t.grupoInterno===1||t.grupoInterno===2&&[37,23,42,40,52,53,57,58,63,68].includes(o.codigoSistema)))){const c=await Gt.usuarioPermissaoSistema.filter(b=>b.idUsuario===t.id&&b.idClienteSistema===o.idClienteSistema).toArray(),d=c.map(b=>b.id),f=c.map(b=>b.idGrupo),p=(await Gt.grupo.filter(b=>b.idClienteSistema===o.idClienteSistema&&f.includes(b.id)).toArray()).map(b=>b.id),v=await Gt.grupoPermissao.filter(b=>p.includes(b.idGrupo)&&!!b.permitir).toArray(),g=await Gt.usuarioPermissao.filter(b=>d.includes(b.idUsuarioPermissaoSistema)&&!!b.permitir).toArray(),x=[...v.map(b=>b.idObjeto),...g.map(b=>b.idObjeto)];r=r.filter(b=>x.includes(b.idObjeto))}}const a=r.reduce((i,n)=>(i[n.idObjeto]=n,i),{});for(const i of r)i.idPai&&a[i.idPai]&&(a[i.idPai].filhos||(a[i.idPai].filhos=[]),a[i.idPai].filhos.push(i));return r.filter(i=>!i.idPai)},async telaInicial(){let e={name:"AtendimentoVenda"},t=null;const o=JSON.parse(localStorage.getItem("usuario")),r=JSON.parse(localStorage.getItem("clienteSistema"));if($db.app.modoOnline.le()){const i=(await $utils.geeksApi({"hibrido-tela-inicial":{funcao:"CEB023C8-E8A3-47A2-A873-05ED47A22903",codigoUsuario:o.codigoUsuario,codigoClienteSistema:r.codigoClienteSistema}})).data["hibrido-tela-inicial"];i!=null&&i.name&&(e=i)}else{const a=await Gt.usuarioPermissaoSistema.filter(i=>i.idUsuario===o.id&&i.idClienteSistema===r.idClienteSistema).first();if(a&&(t=a.codigoObjetoInicialMobile||a.codigoObjetoInicial),!t){const i=await Gt.sistema.get(r.idSistema);i&&(t=i.codigoObjetoInicialMobile||i.codigoObjetoInicial)}if(t){const i=await Gt.objeto.filter(n=>n.codigoObjeto===Number(t)).first();if(!!i&&!!i.rota)try{e=JSON.parse(i.rota)}catch(n){console.error(`Erro no JSON.parse da rota do objeto
`,n.toString())}}}return e}};async function hve(e){var i;const{where:t,page:o,limit:r}=e!=null?e:{};let a;if($db.hibrido.isOnline()){let n,s,l,u,c,d;(t==null?void 0:t.status)==="aberta"&&(c="Aberta"),(t==null?void 0:t.status)==="finalizada"&&(d="Aberta,Cancelada"),(t==null?void 0:t.status)==="cancelada"&&(c="Cancelada");const f=await $utils.geeksApi({listarFatura:{funcao:"56AD4077-0FDE-4986-8654-47A64181B43B",filtros:{...t,status:c,statusDiferenteDe:d},termoBusca:"",limit:r,page:o,sort:["dataHoraFinalizado","dataHoraEmissao"],dir:["desc","desc"]}});return n=f.data.listarFatura.data,s=f.data.listarFatura.total,l=f.data.listarFatura.totalPages,u=f.data.listarFatura.somaTotalDocumento,{data:n,total:s,totalPages:l,somaTotalDocumento:u}}if(!$db.hibrido.isOnline()){const{idContato:n,periodo:s,grupos:l,status:u}=t,c=await $db.permissao.objeto("Diretiva_Venda/Fatura_OutrasLojas_VerTodos"),d=(await $db.contato.ler({filtros:{ativo:!0,empresas:!0}})).data;let f=[],m=new Date(new Date(s.dataIni).setHours(0,0,0,0)).toISOString().replace(/T.*/,"T00:00:00.000Z"),p=new Date(new Date(s.dataFim).setHours(0,0,0,0)).toISOString().replace(/T.*/,"T23:59:59.999Z");await $erp().documento.where(["tipo","idContato","dataHoraFinalizado"]).between(["Fatura",n,m],["Fatura",n,p],!0,!0).each(_=>{f.push(_)}),await $erp().documento.where(["tipo","idContato","dataHoraEmissao"]).between(["Fatura",n,m],["Fatura",n,p],!0,!0).each(_=>{f.find(w=>w.id===_.id)||f.push(_)}),c||(f=f.filter(_=>d.find(w=>w.id===_.idEmpresa)));for(const _ of l){const w=_.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");f=f.filter(S=>{if(S.descricaoContato.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").search(w)!==-1)return!0;let M=Number(S.codigoDocumento);if(Number.isInteger(M)&&String(M).search(w)!==-1)return!0;let O=Number(S.numero);if(Number.isInteger(O)&&String(O).search(w)!==-1)return!0})}f=$lodash.orderBy(f,"dataHoraEmissao","desc");const v=f.filter(_=>_.status==="Aberta");m=new Date(new Date(m).toDateString()),p=new Date(new Date(p).toDateString());const g=f.filter(_=>{if(~["Aberta","Cancelada"].indexOf(_.status)||!_.dataHoraFinalizado)return!1;const w=new Date(new Date(_.dataHoraFinalizado).toDateString());return!(w<m||w>p)}),x=f.filter(_=>{if(_.status!=="Cancelada"||!_.dataHoraFinalizado)return!1;const w=new Date(new Date(_.dataHoraFinalizado).toDateString());return!(w<m||w>p)});u==="aberta"&&(f=v),u==="finalizada"&&(f=g),u==="cancelada"&&(f=x);let b;b=0;for(const _ of f)b+=(i=_.totalDocumento)!=null?i:0;a={data:f.slice((o-1)*r,(o-1)*r+r),total:f.length,totalPages:(f.length/r|0)+(f.length%r>0?1:0),somaTotalDocumento:b}}return a}async function vve(e){var t,o,r;try{let a,i,n,s,l,u;if(a=await $db.configuracoes.porNome("protheus.credentials"),i=!!((t=a[0])!=null&&t.valor),!i||(u=await new Promise((c,d)=>{$q.dialog({title:"Enviar para",options:{type:"radio",model:"0104",items:[{label:"Filial",value:"0104",color:"secondary"},{label:"Matriz",value:"0101"}]},cancel:!0,persistent:!0}).onOk(f=>{c(f)}).onCancel(()=>{c()}).onDismiss(()=>{c()})}),!u))return;n=await $db.hibrido.lista({table:"documento",where:{idFatura:e}}),n=n.filter(c=>c.dataHoraFinalizado&&c.tipo==="Venda"),s=await $db.hibrido.lista({table:"documentoItem",whereIn:{idDocumento:n.map(c=>c.id)}}),s=s.filter(c=>c.operacaoFator===-1),l=await $erp().item.where("id").anyOf(s.map(c=>c.idItem)).toArray();for(const c of n){let d,f;d={destino:u,documento:{numero:c.numero,numeroDocumentoContato:c.numeroDocumentoContato,dataHoraEmissao:c.dataHoraEmissao,codigoDocumentoOperacao:c.codigoDocumentoOperacao},documentosItem:s.filter(m=>m.idDocumento===c.id).map(m=>({idItem:m.idItem,quantidade:m.quantidade,valorReal:m.valorReal})),itens:l.filter(m=>~s.filter(p=>p.idDocumento===c.id).map(p=>p.idItem).indexOf(m.id)).map(m=>({id:m.id,referencia:m.referencia}))},$q.loading.show({message:`Enviando pedido #${c.numero||c.id.slice(-6)} para o Protheus`});try{if(f=(await $utils.geeksApi({"erp/protheus/cadastrar_pedido":{funcao:"56CA9A08-2015-4441-B6EC-8996AB679B97",pedido:d}},{timeout:3e5})).data["erp/protheus/cadastrar_pedido"],f&&!(f!=null&&f.RETORNO_INCLUSAO)&&($q.loading.hide(),$q.notify({type:"negative",message:`N\xE3o foi poss\xEDvel enviar o pedido #${c.numero||c.id.slice(-6)} para o Protheus`}),await new Promise((m,p)=>{$q.dialog({title:"Retorno Erro - Protheus",html:!0,message:f.replace(/\n/g,"<br/>").replace(/\t/g,"&nbsp;").replace(/\s+/g,"&nbsp;")}).onOk(()=>{m()})})),!((r=(o=f==null?void 0:f.RETORNO_INCLUSAO)==null?void 0:o[0])!=null&&r.STATUS_CODE))continue;f.RETORNO_INCLUSAO[0].STATUS_CODE==="200"&&$q.notify({type:"positive",message:"Retorno Protheus: "+f.RETORNO_INCLUSAO[0].MENSAGEM}),f.RETORNO_INCLUSAO[0].STATUS_CODE!=="200"&&$q.notify({type:"negative",message:"Retorno Protheus: "+f.RETORNO_INCLUSAO[0].MENSAGEM})}catch(m){console.error(m),$q.notify({type:"negative",message:`N\xE3o foi poss\xEDvel enviar o pedido #${c.numero||c.id.slice(-6)} para o Protheus`})}}}catch(a){console.error(a),$q.notify({type:"negative",message:"N\xE3o foi poss\xEDvel enviar pedidos para o Protheus"})}finally{$q.loading.hide()}}const gve={grava:async e=>{const t=[];await $db.hibrido.preGravaLista(t,"documentoItem",{atual:e.documentosItem,original:e.documentosItemOriginal}),await $db.hibrido.preGravaLista(t,"documentoCondicaoPagamento",{atual:e.condicaoPagamento,original:e.condicaoPagamentoOriginal}),await $db.hibrido.preGravaLista(t,"documentoStatus",{atual:e.documentoStatus}),await $db.hibrido.preGravaLista(t,"documento",{atual:e.vendas,original:e.vendasOriginal}),await $db.hibrido.preGravaLista(t,"documento",{atual:e.documentosEnvelope,original:e.documentosEnvelopeOriginal}),await $db.hibrido.preGravaLista(t,"financeiroTitulo",{atual:e.financeiroTitulo,original:e.financeiroTituloOriginal}),await $db.hibrido.preGravaLista(t,"financeiroMovimentacao",{atual:e.financeiroMovimentacao}),await $db.hibrido.preGravaLista(t,"financeiroRenegociacao",{atual:e.financeiroRenegociacao}),await $db.hibrido.preGrava(t,"documento",{atual:e.fatura,original:e.faturaOriginal}),await $db.hibrido.enviaLote(t)},leV2:async e=>{if(e=e||{},"id"in e)return $db.hibrido.le({table:"documento",id:e.id});let t={tipo:"Fatura"};"idContato"in e&&e.idContato&&(t.idContato=e.idContato),"idDocumentoAdicional"in e&&e.idDocumentoAdicional&&(t.idDocumentoAdicional=e.idDocumentoAdicional),"idContatoVendedor"in e&&e.idContatoVendedor&&(t.idContatoVendedor=e.idContatoVendedor),"idContatoDigitador"in e&&e.idContatoDigitador&&(t.idContatoDigitador=e.idContatoDigitador),"idEmpresa"in e&&e.idEmpresa&&(t.idEmpresa=e.idEmpresa),"documentoId"in e&&e.documentoId&&(t.documentoId=e.documentoId),"status"in e&&e.status&&(t.status=e.status);let o=Se().documento.where(t);return e.or&&(o=o.filter(r=>{for(const a in e.or)if(e.or[a]&&r[a]===e.or[a])return!0;return!1})),e.and&&(o=o.filter(r=>{for(const a in e.and)if(e.and[a]&&r[a]!==e.and[a])return!1;return!0})),await o.toArray()||[]},leListaCompleta:async function({filtros:e,limit:t,page:o,sort:r,dir:a=!1}){if($db.hibrido.isOnline()){let x,b,_,w;const S=await $utils.geeksApi({listarFatura:{funcao:"56AD4077-0FDE-4986-8654-47A64181B43B",filtros:e,termoBusca:e.termoBusca,limit:t,page:o,sort:r,dir:a}});return x=S.data.listarFatura.data,b=S.data.listarFatura.total,_=S.data.listarFatura.totalPages,w=S.data.listarFatura.somaTotalDocumento,{data:x,total:b,totalPages:_,somaTotalDocumento:w}}let i=e||{};for(const x in e){if(e[x]===null||e[x]===void 0)throw"Erro no filtro "+x;typeof e[x]=="string"&&(e[x]=e[x].trim())}let n={tipo:"Fatura"};"idContato"in i&&i.idContato&&(n.idContato=i.idContato),"idFatura"in i&&i.idFatura&&(n.id=i.idFatura),"idEmpresa"in i&&i.idEmpresa&&(n.idEmpresa=i.idEmpresa),"status"in i&&i.status&&i.status.indexOf(",")===-1&&(n.status=i.status),"operacao"in i&&i.operacao&&(n.operacao=i.operacao),"codigoContato"in i&&i.codigoContato&&(n.codigoContato=i.codigoContato);let s=await Se().documento;Object.keys(n).length&&(s=await s.where(n));let l=i.periodo&&i.periodo.dataIni&&i.periodo.dataIni.length>2&&i.periodo.dataFim&&i.periodo.dataFim.length>2;if("periodo"in i&&i.periodo&&l){const x=new Date(i.periodo.dataIni).setHours(0,0,0,0),b=new Date(i.periodo.dataFim).setHours(0,0,0,0);s=await s.filter(_=>{const w=new Date(_.dataHoraEmissao).setHours(0,0,0,0);return x&&b?w>=x&&w<=b:x?w>=x:b?w<=b:!0})}if("finalizado"in i&&i.finalizado){const x=new Date(i.finalizado.dataIni).setHours(0,0,0,0),b=new Date(i.finalizado.dataFim).setHours(0,0,0,0);s=await s.filter(_=>{const w=new Date(_.dataHoraFinalizado).setHours(0,0,0,0);return x&&b?w>=x&&w<=b:x?w>=x:b?w<=b:!0})}if("idEmpresa"in i&&i.idEmpresa&&(s=await s.filter(x=>x.idEmpresa?i.idEmpresa===x.idEmpresa:!1)),"cliente"in i&&i.cliente.length>0&&(s=await s.filter(x=>{if(!x.descricaoContato)return!1;const b=$utils.removerCaracteresEspeciais(x.descricaoContato.toString().toLowerCase()),_=$utils.removerCaracteresEspeciais(i.cliente.toString().toLowerCase());return b.indexOf(_)!==-1})),"valorTotal"in i&&i.valorTotal!==0&&(s=await s.filter(x=>x.totalDocumento>=i.valorTotal)),"termoBusca"in i&&i.termoBusca.length>0){const x=$utils.removerAcentos(i.termoBusca.toUpperCase()).split(" ").filter(Boolean),b=x.filter(w=>w.match(/^\d+$/)),_=x.filter(w=>!w.match(/^\d+$/));s=s.filter(w=>{const S=$utils.removerAcentos([w.descricaoContato].join(" ").toUpperCase()),D=[w.numero].map(String);let M=!0;for(const O of b)M=M&&D.includes(O);for(const O of _)M=M&&S.includes(O);return M})}if("status"in i&&i.status.indexOf(",")!==-1){const x=i.status;s=s.filter(function(b){return x.indexOf(b.status)!==-1})}"statusEnvio"in i&&i.statusEnvio&&(i.statusEnvio==="Enviados"&&(s=s.filter(x=>x.rotaJson!==null&&x.rotaJson!=="")),i.statusEnvio==="N\xE3o Enviados"&&(s=s.filter(x=>x.rotaJson===null||x.rotaJson==="")));let u=[];if(u=await s.toArray()||[],r&&a&&(u=Aa.exports.orderBy(u,r,a)),"idContatoVendedor"in i&&i.idContatoVendedor){const x=[];for(const b of u){const _=await Se().documento.where({idFatura:b.id,tipo:"Venda"}).toArray(),w=await Se().documento.where({idFatura:b.id,tipo:"Envelope"}).toArray();[..._==null?void 0:_.map(D=>D.idContatoVendedor),...w==null?void 0:w.map(D=>D.idContatoVendedor)].includes(i.idContatoVendedor)&&x.push(b)}u=x}if("idContatoDigitador"in i&&i.idContatoDigitador){const x=[];for(const b of u){const _=await Se().documento.where({idFatura:b.id,tipo:"Venda"}).toArray(),w=await Se().documento.where({idFatura:b.id,tipo:"Envelope"}).toArray();[..._==null?void 0:_.map(D=>D.idContatoDigitador),...w==null?void 0:w.map(D=>D.idContatoDigitador)].includes(i.idContatoDigitador)&&x.push(b)}u=x}const c=u.length;let d=t,m=((o||1)-1)*d;u=u.splice(m,d);let p=u,v=c,g=Math.ceil(v/d)||1;return{data:p,total:v,totalPages:g}},le:async({filtros:e,colunas:t})=>{e=e||{};let o=[];if(localStorage.getItem("rede")==="offline"){if(e.id)return $db.hibrido.le({table:"documento",id:e.id});delete e.id,o=await Se().documento.toArray()||[],o=o.filter(r=>r.tipo==="Fatura"),o=o.filter(r=>{let a=!0;for(const i in e)if(r[i]!==e[i]){a=!1;break}return a})}else{let r="";for(const i in e)r+=`${i} = '${e[i]}' and `;r+=" tipo='Fatura'";let a=`select top 30 ${t.split(" ").join(", ")} from documento where ${r}`;o=await Do(a,"x_req48473u")}return o.slice(0,30)},leCompleto:async e=>{const t=await $db.hibrido.le({table:"documento",id:e}),[o,r,a,i]=await $db.hibrido.lista([{table:"documentoCondicaoPagamento",where:{idDocumento:e}},{table:"documento",where:{tipo:"Venda",idFatura:e}},{table:"financeiroTitulo",where:{idFatura:e}},{table:"documento",where:{tipo:"Envelope",idFatura:e}}]);return{fatura:t,condicaoPagamento:o,vendas:r,carnes:a,documentosEnvelope:i}},checarTitulosLiquidados:async(e={})=>{const{condicoesPagamento:t}=e,o=[],r="T\xEDtulo liquidado encontrado. N\xE3o \xE9 poss\xEDvel excluir o financeiro.";let a=!1;for(const i of t){const n=await $db.financeiroTitulo.le({id:i.idFinanceiroTitulo});!n||o.push(n)}if(o.find(i=>i.dataPagamento&&i.idFatura&&i.documentoId!==i.idFatura)&&(a=!0),!a){const i=await $db.permissao.objeto("Diretiva_Vendas_Reabertura_EstornaTitulosLiquidados");o.find(n=>n.dataPagamento)&&!i&&(a=!0)}if(a)throw new Error(r)},criar:e=>({id:Kt(),dataHoraEmissao:sa(),calcularAutomatico:"Sim",tipo:"Fatura",operacao:"Faturamento",status:"Aberta",tipoFrete:"CIF",freteSeparado:!1,totalDesconto:0,totalPercentualDesconto:0,subTotal:e.subTotal||0,totalDocumento:e.totalDocumento||0,idEmpresa:e.idEmpresa||"",idEmpresaEndereco:e.idEmpresaEndereco||"",descricaoEmpresa:e.descricaoEmpresa||"",numeroDocumentoEmpresa:e.numeroDocumentoEmpresa||"",inscricaoMunicipalEmpresa:e.inscricaoMunicipalEmpresa||"",codigoMunicipioEmpresa:e.codigoMunicipioEmpresa||"",optanteSimplesNacional:e.optanteSimplesNacional||"",idContato:e.idContato||"",idContatoEndereco:e.idContatoEndereco||"",numeroDocumentoContato:e.numeroDocumentoContato||"",descricaoContato:e.descricaoContato||"",descricaoContatoEndereco:e.descricaoContatoEndereco||"",telefoneContato:e.telefoneContato||"",emailContato:e.emailContato||"",regimeContato:e.regimeContato||""}),remover:async e=>{await $erpDelete().documento.delete(e),await ut("remover","documento",e)},obterAbertas:(e,t)=>$db.hibrido.lista({table:"documento",where:{idContato:e,idEmpresa:t,tipo:"Fatura",status:"Aberta"}}),permissaoPagamento:async(e,t)=>{var a;let o=!1;e==="Sinal"&&(o=await $db.permissao.objeto("Diretiva_Fatura_PermitirSinalMinimo")),e==="PIX"&&(o=!(((a=(await $db.configuracoes.porNome("fatura.pix.bloqueiasempermissao",t))[0])==null?void 0:a.valor)==="1"&&!await $db.permissao.objeto("Diretiva_Fatura_PermitirPix")));let r;if(!o){const i=await $g.promptLogin.show();if(i){try{r=(await $utils.geeksApi({login:{funcao:"0F8E5067-A8B2-4C82-9275-25B114B9ED70",cpf:i.cpf,senha:i.senha}})).data.login.usuario}catch(n){throw new Error(n.message)}r&&(e==="Sinal"&&(o=await $db.permissao.objeto("Diretiva_Fatura_PermitirSinalMinimo",r)),e==="PIX"&&(o=await $db.permissao.objeto("Diretiva_Fatura_PermitirPix",r)))}if(!o&&r)throw new Error("Permiss\xE3o negada")}return{permissao:o,autenticado:r}},checaPagamentoMinimo:async(e,t,o,r)=>{if(e){if(r==="percentualMinimo"&&e===0)return!1;if(r==="valorMinimo"&&e===0)return!0;if(r==="percentualMinimo"?e>0&&e<=99:e>0){const a=e,i=r==="percentualMinimo"?a/100*o:a;return t<i}else throw new Error("Valor pago menor que o total do documento.")}else return!1},filtrar:hve,enviarPedidosProtheus:vve},_ve={grava:async e=>{if(e=Vr(e),!Object.keys(e.original||{}).length)await $erpPut().financeiroBanco.put(e.atual),await ut("adicionar","financeiroBanco",e.atual.id,e.atual);else{const t=Ja(e.original,e.atual);Object.keys(t).length&&(await $erpUpdate().financeiroBanco.update(e.atual.id,t),await ut("atualizar","financeiroBanco",e.atual.id,t))}},le:async e=>(e=e||{},e.id?await Se().financeiroBanco.get(e.id)||{}:[]),remove:async e=>{for(const t of e)await $erpDelete().financeiroBanco.delete(t.id),await ut("remover","financeiroBanco",t.id)}},bve={grava:async e=>{if(e=Vr(e),!Object.keys(e.original||{}).length)await $erpPut().financeiroBoleto.put(e.atual),await ut("adicionar","financeiroBoleto",e.atual.id,e.atual);else{const t=Ja(e.original,e.atual);Object.keys(t).length&&(await $erpUpdate().financeiroBoleto.update(e.atual.id,t),await ut("atualizar","financeiroBoleto",e.atual.id,t))}},le:async e=>(e=e||{},e.id?await Se().financeiroBoleto.get(e.id)||{}:[]),remove:async e=>{for(const t of e)await $erpDelete().financeiroBoleto.delete(t.id),await ut("remover","financeiroBoleto",t.id)}},yve={grava:async e=>{if(e=Vr(e),!Object.keys(e.original||{}).length)await $erpPut().financeiroBoletoTitulo.put(e.atual),await ut("adicionar","financeiroBoletoTitulo",e.atual.id,e.atual);else{const t=Ja(e.original,e.atual);Object.keys(t).length&&(await $erpUpdate().financeiroBoletoTitulo.update(e.atual.id,t),await ut("atualizar","financeiroBoletoTitulo",e.atual.id,t))}},le:async e=>(e=e||{},e.id?await Se().financeiroBoletoTitulo.get(e.id)||{}:[]),remove:async e=>{for(const t of e)await $erpDelete().financeiroBoletoTitulo.delete(t.id),await ut("remover","financeiroBoletoTitulo",t.id)}},xve={grava:async e=>{if(e=Vr(e),!Object.keys(e.original||{}).length)await $erpPut().financeiroMovimentacao.put(e.atual),await ut("adicionar","financeiroMovimentacao",e.atual.id,e.atual);else{const t=Ja(e.original,e.atual);Object.keys(t).length&&(await $erpUpdate().financeiroMovimentacao.update(e.atual.id,t),await ut("atualizar","financeiroMovimentacao",e.atual.id,t))}},lerV2:async e=>{if(e=e||{},"id"in e)return e.id?await Se().financeiroMovimentacao.get(e.id)||{}:{};let t={};return"idDocumentoCaixa"in e&&e.idDocumentoCaixa&&(t.idDocumentoCaixa=e.idDocumentoCaixa),"idFinanceiroPlanoConta"in e&&e.idFinanceiroPlanoConta&&(t.idFinanceiroPlanoConta=e.idFinanceiroPlanoConta),"idFinanceiroMovimentacaoN"in e&&e.idFinanceiroMovimentacaoN&&(t.idFinanceiroMovimentacaoN=e.idFinanceiroMovimentacaoN),"documentoId"in e&&e.documentoId&&(t.documentoId=e.documentoId),"documentoTipo"in e&&e.documentoTipo&&(t.documentoTipo=e.documentoTipo),await Se().financeiroMovimentacao.where(t).toArray()||[]},le:async e=>{e=e||{};let t={};"idDocumentoCaixa"in e&&e.idDocumentoCaixa&&(t.idDocumentoCaixa=e.idDocumentoCaixa),"idFinanceiroPlanoConta"in e&&e.idFinanceiroPlanoConta&&(t.idFinanceiroPlanoConta=e.idFinanceiroPlanoConta);let o=[];return Object.keys(t).length?o=await $db.hibrido.lista({table:"financeiroMovimentacao",where:t})||[]:o=await Se().financeiroMovimentacao.toArray()||[],e.idFinanceiroMovimentacaoN&&(o=o.filter(r=>r.idFinanceiroMovimentacaoN===e.idFinanceiroMovimentacaoN)),e.documentoId&&(o=o.filter(r=>r.documentoId===e.documentoId)),e.documentoTipo&&(o=o.filter(r=>r.documentoTipo===e.documentoTipo)),o},remove:async e=>{for(const t of e)await $erpDelete().financeiroMovimentacao.delete(t.id),await ut("remover","financeiroMovimentacao",t.id)}},Cve={grava:async e=>{if(e=Vr(e),!Object.keys(e.original||{}).length)await $erpPut().financeiroMovimentacaoN.put(e.atual),await ut("adicionar","financeiroMovimentacaoN",e.atual.id,e.atual);else{const t=Ja(e.original,e.atual);Object.keys(t).length&&(await $erpUpdate().financeiroMovimentacaoN.update(e.atual.id,t),await ut("atualizar","financeiroMovimentacaoN",e.atual.id,t))}},le:async e=>{}},wve=60,Eve=["id","codigoFinanceiroPlanoConta","tradutor","descricao","apelido","idPai","classificacao","fluxodeCaixa","dre","ativo","idEmpresaConta"];let Mc;function ew(){Mc={timeout:0,planoConta:[],planoContaId:{},planoContaCodigo:{}}}ew();const Sve={limpaCache:ew,async atualizaCache(){const e=async()=>{const t=await $db.hibrido.lista({table:"financeiroPlanoConta",columns:Eve}),o={},r={};for(const i of t)o[i.id]=i,r[i.codigoFinanceiroPlanoConta]=i;const a=new Date;Mc={timeout:a.setSeconds(a.getSeconds()+wve),planoConta:t,planoContaId:o,planoContaCodigo:r}};Mc.processando||(Mc.processando=e());try{await Mc.processando}catch(t){throw ew(),t}},async verificaCache(){new Date>new Date(Mc.timeout)&&await this.atualizaCache()},async leCache({id:e}){return $utils.verificarErro(!e,"Id do plano de conta n\xE3o fornecido"),await this.verificaCache(),Mc.planoContaId[e]||{}},async lePorConfig(e){const t=await $db.configuracoes.leValorNumerico(e);return await this.verificaCache(),Mc.planoContaCodigo[t]||{}},grava:async()=>{},le:async e=>{if(e=e||{},"id"in e)return e.id?await Se().financeiroPlanoConta.get(e.id)||{}:{};let t=await Se().financeiroPlanoConta.toArray()||[];if(e.codigoFinanceiroPlanoConta){const o=t.filter(r=>r.codigoFinanceiroPlanoConta===e.codigoFinanceiroPlanoConta);return o.length?o[0]:{}}return Object.keys(e.despesa||{}).length&&(t=t.filter(o=>o.ativo&&(o.classificacao||"")==="DESPESA"&&!/inconsist|ttulo/g.test((o.descricao||"").toLowerCase())&&(!o.idEmpresaConta||o.idEmpresaConta===e.despesa.idContatoEmpresa))),t},leV2:async e=>{if(e=e||{},"id"in e)return e.id?await Se().financeiroPlanoConta.get(e.id)||{}:{};let t=await Se().financeiroPlanoConta.toArray()||[];if(e.codigoFinanceiroPlanoConta){const o=t.filter(r=>r.codigoFinanceiroPlanoConta===e.codigoFinanceiroPlanoConta);return o.length?o[0]:{}}return Object.keys(e.despesa||{}).length&&(t=t.filter(o=>o.ativo&&((o.classificacao||"")==="DESPESA"||o.paiCodigo===15)&&!/inconsist|ttulo/g.test((o.descricao||"").toLowerCase())&&(!o.idEmpresaConta||o.idEmpresaConta===e.despesa.idContatoEmpresa))),t}},Ive={grava:async e=>{if(e=Vr(e),!Object.keys(e.original||{}).length)await $erpPut().financeiroRenegociacao.put(e.atual),await ut("adicionar","financeiroRenegociacao",e.atual.id,e.atual);else{const t=Ja(e.original,e.atual);Object.keys(t).length&&(await $erpUpdate().financeiroRenegociacao.update(e.atual.id,t),await ut("atualizar","financeiroRenegociacao",e.atual.id,t))}},le:async e=>{if(e=e||{},e.id)return await Se().financeiroRenegociacao.get(e.id)||{};let t=[];return e.idFinanceiroMovimentacaoN&&(t=await Se().financeiroMovimentacao.where({idFinanceiroMovimentacaoN:e.idFinanceiroMovimentacaoN}).toArray()||[]),t},remove:async e=>{for(const t of e)await $erpDelete().financeiroRenegociacao.delete(t.id),await ut("remover","financeiroRenegociacao",t.id)}};async function Ave(e){return(await $db.hibrido.lista({table:"financeiroTitulo",where:{idContato:e}})).some(o=>!!o.receberPagar&&!o.dataPagamento)}const Tve={grava:async e=>{if(e=Vr(e),!Object.keys(e.original||{}).length)await $erpPut().financeiroTitulo.put(e.atual),await ut("adicionar","financeiroTitulo",e.atual.id,e.atual);else{const t=Ja(e.original,e.atual);Object.keys(t).length&&(await $erpUpdate().financeiroTitulo.update(e.original.id,t),await ut("atualizar","financeiroTitulo",e.original.id,t))}},le:async e=>{if(e=e||{},"id"in e)return e.id?await Se().financeiroTitulo.get(e.id)||{}:{};if(e.idDocumentoCaixa&&e.idDocumentoCaixaLiquidacao)return await Se().financeiroTitulo.where("idDocumentoCaixa").equals(e.idDocumentoCaixa).or("idDocumentoCaixaLiquidacao").equals(e.idDocumentoCaixaLiquidacao).toArray()||[];let t={};"idContato"in e&&e.idContato&&(t.idContato=e.idContato),"idFatura"in e&&e.idFatura&&(t.idFatura=e.idFatura),"documentoId"in e&&e.documentoId&&(t.documentoId=e.documentoId),"idFinanceiroBoleto"in e&&e.idFinanceiroBoleto&&(t.idFinanceiroBoleto=e.idFinanceiroBoleto),"idDocumentoCaixa"in e&&e.idDocumentoCaixa&&(t.idDocumentoCaixa=e.idDocumentoCaixa),"idDocumentoCaixaLiquidacao"in e&&e.idDocumentoCaixaLiquidacao&&(t.idDocumentoCaixaLiquidacao=e.idDocumentoCaixaLiquidacao),"documentoCodigo"in e&&e.documentoCodigo&&(t.documentoCodigo=e.documentoCodigo);let o=[];return Object.keys(t).length?o=await $db.hibrido.lista({table:"financeiroTitulo",where:t})||[]:o=await Se().financeiroTitulo.toArray()||[],e.emAberto===!0&&(o=o.filter(r=>!!r.receberPagar&&!r.dataPagamento)),e.emAberto===!1&&(o=o.filter(r=>!!r.receberPagar&&!!r.dataPagamento)),o},remove:async e=>{for(const t of e)await $erpDelete().financeiroTitulo.delete(t.id),await ut("remover","financeiroTitulo",t.id)},verificaTituloAbertoContato:Ave},Dve=60,Ove=["id","descricao","ativo","idContatoEmpresa","tipoFinanceiro","idFinanceiroPlanoConta","diasMaximo","parcelamentoMaximo","aliquota","idFinanceiroPlanoContaAliquota","idContatoOperadoraCartao","aliquotaAntecipacao","diasPrimeira","diasDemais","observacao","utilizaLimite","contaCredito","contaPadrao","tipo","valorMinimoVenda","tef"];let Nc;function tw(){Nc={timeout:0,formasPagamento:[],formasPagamentoId:{}}}tw();const Pve={limpaCache:tw,async atualizaCache(){const e=async()=>{const t=await $db.hibrido.lista({table:"formaPagamento",columns:Ove}),o={};for(const a of t)o[a.id]=a;const r=new Date;Nc={timeout:r.setSeconds(r.getSeconds()+Dve),formasPagamento:t,formasPagamentoId:o}};Nc.processando||(Nc.processando=e());try{await Nc.processando}catch(t){throw tw(),t}},async verificaCache(){new Date>new Date(Nc.timeout)&&await this.atualizaCache()},async leCache({id:e}){return $utils.verificarErro(!e,"Id da formaPagamento n\xE3o fornecido"),await this.verificaCache(),Nc.formasPagamentoId[e]||{}},async listaCache(){return await this.verificaCache(),Nc.formasPagamento},grava:()=>{},le:async e=>(e=e||{},e.id?await Se().formaPagamento.get(e.id)||{}:await Se().formaPagamento.toArray()||[])};async function Fve({table:e,columns:t,id:o}){var a,i,n,s;const r=await $utils.geeksApi({leHibrido:{funcao:"7934AE25-B337-43F4-9FC1-842C3486C491",table:e,id:o,columns:t}});return xb((i=(a=r==null?void 0:r.data)==null?void 0:a.leHibrido)==null?void 0:i.error),(s=(n=r==null?void 0:r.data)==null?void 0:n.leHibrido)!=null?s:{}}async function Mve(e){var i,n,s,l;const{table:t,columns:o}=e,r=Mk(e);if(!Object.keys(r).length)return[];const a=await $utils.geeksApi({listaHibrido:{funcao:"FCC75497-9CAD-4D28-AB39-F669142BE8A9",table:t,columns:o,where:r}});return xb((n=(i=a==null?void 0:a.data)==null?void 0:i.listaHibrido)==null?void 0:n.error),(l=(s=a==null?void 0:a.data)==null?void 0:s.listaHibrido)!=null?l:[]}async function Nve(e){var a,i,n,s;const{table:t,columns:o}=e,r=await $utils.geeksApi({listaTodosHibrido:{funcao:"B3F1E9DD-5F40-400D-ADED-45D463F674E9",table:t,columns:o}});return xb((i=(a=r==null?void 0:r.data)==null?void 0:a.listaTodosHibrido)==null?void 0:i.error),(s=(n=r==null?void 0:r.data)==null?void 0:n.listaTodosHibrido)!=null?s:[]}async function kve(e){var a;const t={};for(const i in e){const{table:n,columns:s}=e[i],l="listaHibrido-"+i,u=Mk(e[i]);t[l]=Object.keys(u).length?{funcao:"FCC75497-9CAD-4D28-AB39-F669142BE8A9",table:n,columns:s,where:u}:void 0}const o=await $utils.geeksApi(t),r=[];for(const i in e){const n="listaHibrido-"+i,s=(a=o==null?void 0:o.data)==null?void 0:a[n];xb(s==null?void 0:s.error),r.push(s!=null?s:[])}return r}function xb(e){var t;if(e)throw new Error(`GeeksApi Erro: ${(e==null?void 0:e.message)||""}. ${((t=e==null?void 0:e.originalError)==null?void 0:t.message)||""}`)}function Mk({where:e,whereIn:t,whereFilter:o}){const r={};for(const a in e||{})e[a]!==void 0&&e[a]!==null&&(r[a]=e[a]);for(const a in t||{})t[a]!==void 0&&t[a]!==null&&(r[a]=t[a]);for(const a in o||{})o[a]!==void 0&&o[a]!==null&&(r[a]=o[a]);return r}var cm={le:Fve,lista:Mve,listaTodos:Nve,listaVarios:kve};async function Rve({table:e,columns:t,id:o}){const r=await $erp()[e].get(o)||{};if(!(t!=null&&t.length))return r;const a={};for(const i of t)a[i]=r[i];return a}async function Vve(e){const{table:t,columns:o}=e,r=zy(e.where),a=zy(e.whereIn),i=zy(e.whereFilter);if(!(Object.keys(r).length+Object.keys(a).length+Object.keys(i).length))return[];let n=$erp()[t];Object.keys(r).length&&(n=n.where(r));for(const l in a)n=n.where(l).anyOf(a[l]);for(const l in i)n=Array.isArray(i[l])?n.filter(u=>i[l].includes(u[l])):n.filter(u=>i[l]===u[l]);const s=await n.toArray();return Nk(s,o)}async function Bve(e){const{table:t,columns:o}=e,r=await $erp()[t].toArray();return Nk(r,o)}function Nk(e,t){if(!(t!=null&&t.length))return e;const o=[];for(const r of e){const a={};for(const i of t)a[i]=r[i];o.push(a)}return o}function zy(e){const t={};for(const o in e||{})e[o]!==void 0&&e[o]!==null&&(t[o]=e[o]);return t}var jp={le:Rve,lista:Vve,listaTodos:Bve},o8,a8;const LI={mode:(o8=localStorage.getItem("hibrido"))!=null?o8:"local",modoSelecionado:(a8=localStorage.getItem("hibridoModoSelecionado"))!=null?a8:"local"};async function qve({table:e,columns:t,id:o}){return o?um()?cm.le({table:e,columns:t,id:o}):jp.le({table:e,columns:t,id:o}):{}}async function kk(e){return Array.isArray(e)?um()?cm.listaVarios(e):Promise.all(e.map(t=>kk(t))):!e.where&&!e.whereIn&&!e.whereFilter?um()?cm.listaTodos(e):jp.listaTodos(e):um()?cm.lista(e):jp.lista(e)}async function Lve(e){return um()?cm.listaTodos(e):jp.listaTodos(e)}function $ve(e,t){e==="mode"&&localStorage.setItem("hibrido",t),e==="modoSelecionado"&&localStorage.setItem("hibridoModoSelecionado",t),LI[e]=t}function Rk(e){return LI[e]}async function Uve(e){var o,r;for(const a in(o=e==null?void 0:e.where)!=null?o:{})(e.where[a]===void 0||e.where[a]===null)&&delete e.where[a];return Object.keys((r=e==null?void 0:e.where)!=null?r:{}).length>0?LI.mode==="remoto"?await cm.ler(e):await jp.ler(e):[]}async function zve(e,t){const o=Array.isArray(t)?t:[t];for(const r of o)await $erpDelete()[e].delete(r.id),await $utils.sincronismoEnviar("remover",`${e}`,r.id)}async function Hve(e,{atual:t,original:o}){const r=$utils.diferencaNivel1(o||{},t);Object.keys(o||{}).length?Object.keys(r).length&&(await $erpUpdate()[e].update(t.id,r),await $utils.sincronismoEnviar("atualizar",e,t.id,r)):(await $erpPut()[e].put(r),await $utils.sincronismoEnviar("adicionar",e,r.id,r))}async function jve(e,{atual:t,original:o=[]}){const r=o.filter(i=>!t.find(({id:n})=>n===i.id));await $db.hibrido.remove(e,r);const a={};for(const i of o)a[i.id]=i;for(const i of t)await $db.hibrido.grava(e,{atual:i,original:a[i.id]})}async function Gve(e,t,o){const r=Array.isArray(o)?o:[o];for(const a of r)await $erpDelete()[t].delete(a.id),e.push({acao:"remover",tabela:t,chave:a.id,dados:{}})}async function Wve(e,t,{atual:o,original:r}){const a=$utils.diferencaNivel1(r||{},o);Object.keys(r||{}).length?Object.keys(a).length&&(await $erpUpdate()[t].update(o.id,a),e.push({acao:"atualizar",tabela:t,chave:o.id,dados:a})):(await $erpPut()[t].put(a),e.push({acao:"adicionar",tabela:t,chave:a.id,dados:a}))}async function Qve(e,t,{atual:o=[],original:r=[]}){const a=r.filter(n=>!o.find(({id:s})=>s===n.id));await $db.hibrido.preRemove(e,t,a);const i={};for(const n of r)i[n.id]=n;for(const n of o)n.id=n.id||$utils.uuid(),await $db.hibrido.preGrava(e,t,{atual:n,original:i[n.id]})}async function Xve(e){let t=!$db.hibrido.isOnline();const o=e.map(r=>({id:$utils.uuid(),acao:r.acao,tabela:r.tabela,chave:r.chave,valor:r.dados,dataHora:$utils.dataAtual(),dispositivo:Io.obterIdDispositivo(),idUsuario:$db.usuario.logado.id,nomeUsuario:$db.usuario.logado.nome}));if(!t)try{$utils.gconsole.log("sincronismoEnviaLoteOnline",e.length,e);const r=o.map(i=>({...i,valor:JSON.stringify(i.valor)})),a=20;for(let i=0;i<r.length;i+=a)await $utils.geeksApi({uploadSincronoLote:{funcao:"7C9C23DA-2B32-4203-81D0-62FABBB9518C",dados:r.slice(i,i+a)}})}catch(r){console.error("erro upload s\xEDncrono em lote: ",r),t=!0}if(t){$utils.gconsole.log("sincronismoEnviaLoteOffline",e.length,e);for(const r of o)await $erp().sincronismoFila.add(r),Io.status.tamanhoFila++}}function um(){var e,t;return Rk("mode")==="remoto"&&((t=(e=$db.usuario)==null?void 0:e.logado)==null?void 0:t.token)}var Kve={le:qve,lista:kk,listaTodos:Lve,get:Rk,set:$ve,ler:Uve,remove:zve,grava:Hve,gravaLista:jve,preRemove:Gve,preGrava:Wve,preGravaLista:Qve,enviaLote:Xve,isOnline:um};let gv;const dp={itens:[],time:null},Vk={"\xD3culos Sol":"\xD3culos de Sol",Arma\u00E7\u00E3o:"\xD3culos de Grau","Lente Contato":"Lentes de Contato",Produto:"Acess\xF3rios","\xD3culos Pronto":"\xD3culos Pronto"};function Yve(){return $utils.clonarV2(Vk)}async function Bk(e){const{idECommerce:t}=e!=null?e:{};return await $utils.geeksApi({autenticar:{funcao:"D66FBB8B-40BA-4CBD-9AA1-B842BC4A3253",idECommerce:t}})}async function Nh(e){var o,r,a,i,n;const t=(await $db.eCommerce.ler((o=e==null?void 0:e.eCommerce)==null?void 0:o.id))[0];t.json=JSON.parse(t.json),gv||(gv={...(r=t==null?void 0:t.json)==null?void 0:r.auth});try{const s=await Bk({idECommerce:t.id});if(Object.keys((a=s==null?void 0:s.data)==null?void 0:a.autenticar).length>0){gv={...(i=s==null?void 0:s.data)==null?void 0:i.autenticar};const l=$utils.clonar(t);l.json.auth={...l.json.auth,...(n=s==null?void 0:s.data)==null?void 0:n.autenticar},l.json=JSON.stringify(l.json),await $db.eCommerce.gravar(l)}}catch(s){console.error(s)}return gv.accessToken}function ZO(e){const t=new Date,o=t.getSeconds()+3;dp.itens=e,dp.time=new Date(t.setSeconds(o))}async function Jve(e){var r,a;const{eCommerce:t}=e!=null?e:{},o=await Nh({eCommerce:t});await $utils.geeksApi({deletarTodos:{funcao:"77AEAAA9-13DF-49C9-9A7E-B049C06E2F73",apiHost:(a=(r=t.json)==null?void 0:r.auth)==null?void 0:a.apiHost,accessToken:o}})}async function qk(e){var a,i,n;const{eCommerce:t}=e!=null?e:{};let o,r;return o=await Nh({eCommerce:t}),r=await $utils.geeksApi({consultar_listar_categorias:{funcao:"46B5B59D-490F-486D-B567-0BD4D34C54AC",apiHost:(i=(a=t==null?void 0:t.json)==null?void 0:a.auth)==null?void 0:i.apiHost,accessToken:o}}),(n=r==null?void 0:r.data)==null?void 0:n.consultar_listar_categorias}async function Lk(e){var i,n,s,l;const{eCommerce:t}=e!=null?e:{};let o,r,a;return dp.time>new Date?(ZO(dp.itens),dp.itens):(o=await Nh({eCommerce:t}),a=await $utils.geeksApi({itens:{funcao:"2696362E-9CF0-49E2-9013-FA9EAC1EBC5E",apiHost:(n=(i=t==null?void 0:t.json)==null?void 0:i.auth)==null?void 0:n.apiHost,accessToken:o}},{timeout:6e4}),r=(l=(s=a==null?void 0:a.data)==null?void 0:s.itens)!=null?l:[],ZO(r),r)}async function Zve(e){var n,s,l,u,c;const{itemGeeks:t,itemECommerce:o,eCommerce:r}=e!=null?e:{},a=await Nh({eCommerce:r});if(!(o!=null&&o.idItemNoECommerce)){const d=await Lk({eCommerce:r});for(const f of d){let m=!0;for(const p of(s=(n=r==null?void 0:r.json)==null?void 0:n.sincronismo)==null?void 0:s.chaves)if(!t[p]||t[p]!==f[r.json.sincronismo.dePara[p]]){m=!1;break}if(m)return f}return}const i=await $utils.geeksApi({item:{funcao:"2696362E-9CF0-49E2-9013-FA9EAC1EBC5E",idItemNoECommerce:o==null?void 0:o.idItemNoECommerce,apiHost:(u=(l=r==null?void 0:r.json)==null?void 0:l.auth)==null?void 0:u.apiHost,accessToken:a}});return(c=i==null?void 0:i.data)==null?void 0:c.item}async function ege({eCommerce:e}){await $utils.geeksApi({exportar_estoque:{funcao:"542AF672-0070-4589-814E-C9E90F04A87E",idECommerce:e.id}})}async function tge(e){var f,m,p,v,g,x,b,_,w,S,D,M,O,T,I,N,P,F,L,z,H,X,Y,de;const{itemECommerce:t,eCommerce:o,itemGeeks:r}=e!=null?e:{},a=await qk(e),i=[],n={};localStorage.getItem("bancoDeDados");let s,l,u,c,d=0;for(const ye of(m=(f=o==null?void 0:o.json)==null?void 0:f.sincronismo)==null?void 0:m.chaves)if(!r[ye])return;for(const ye of await $db.estoqueSaldoProdutoEmpresa.leEstoquePorEmpresa(r.id))for(const W of ye.estoquePorLote)i.push({idEmpresa:W.idEmpresa,tipoEstoque:W.tipoEstoque,saldo:W.saldo});for(const ye of(p=o.json.sincronismo.estoque)!=null?p:[]){const W=i.find(re=>{var _e;return re.idEmpresa===ye.idEmpresa&&~((_e=ye.tipo)==null?void 0:_e.indexOf(re.tipoEstoque))});d+=(W==null?void 0:W.saldo)||0}l=await Nh({eCommerce:o}),u=Vk[r.tipo],c=(v=a.find(ye=>ye.name===u))==null?void 0:v.id;for(const ye of Object.keys(o.json.sincronismo.dePara)){const W=o.json.sincronismo.dePara[ye],re=(x=(g=o.json.sincronismo.deParaTipo)==null?void 0:g[ye])!=null?x:"string";if(~W.indexOf("Properties.")){const _e=W.split(".")[1];if(!~((_=(b=o.json.sincronismo.deParaCategoria)==null?void 0:b[u])==null?void 0:_.indexOf(_e))||~[null,void 0].indexOf(r[ye]))continue;n.caracteristica||(n.caracteristica={}),re==="string"&&(n.caracteristica[_e]=String((w=r[ye])!=null?w:"").trim()),re==="number"&&(n.caracteristica[_e]=$utils.arredondar((S=r[ye])!=null?S:0).toFixed(2)),re==="boolean"&&(n.caracteristica[_e]=String(r[ye]?1:0));continue}re==="string"&&(n[W]=String((D=r[ye])!=null?D:"").trim()),re==="number"&&(n[W]=$utils.arredondar((M=r[ye])!=null?M:0).toFixed(2)),re==="boolean"&&(n[W]=String(r[ye]?1:0)),n.category_id=c}return n[o.json.sincronismo.dePara.codigoItem]=String(t.idItemNoECommerce),n[o.json.sincronismo.dePara.descricao]=t.descricao,n[o.json.sincronismo.dePara.valorVenda]=$utils.arredondar(t.valorVenda).toFixed(2),n[o.json.sincronismo.dePara.quantidadeDisponivel]=Math.ceil(d),(O=n.ean)!=null&&O.startsWith("999")&&(n.ean=""),o.json.sincronismo.dePara.peso&&(n.weight=$utils.arredondar((Number(n.weight)||0)*1e3,0),n.weight||delete n.weight),o.json.sincronismo.dePara.comprimento&&(n.length=Math.ceil((Number(n.length)||0)/10)),o.json.sincronismo.dePara.altura&&(n.height||(n.height=Math.ceil(Number((T=n.caracteristica)==null?void 0:T["Altura da Arma\xE7\xE3o"])/10||0)),n.height||(n.height=Math.ceil(r.altura/10||0))),o.json.sincronismo.dePara.largura&&(n.width||(n.width=Math.ceil(Number((I=n.caracteristica)==null?void 0:I["Largura da Arma\xE7\xE3o"])/10||0)),n.width||(n.width=Math.ceil(r.largura/10||0))),s=await $utils.geeksApi({cadastrar_atualizar:{funcao:"44374EF9-00BD-4F6B-A246-18629B6E1910",dados:n,apiHost:(P=(N=o.json)==null?void 0:N.auth)==null?void 0:P.apiHost,accessToken:l}}),n.id=(L=(F=s==null?void 0:s.data)==null?void 0:F.cadastrar_atualizar)==null?void 0:L.id,await $utils.geeksApi({cadastrar_atualizar_caracteristicas_produtos:{funcao:"7DE5BCD7-2778-42FB-91AB-FEF8E87382C0",dados:n,apiHost:(H=(z=o.json)==null?void 0:z.auth)==null?void 0:H.apiHost,accessToken:l}}),await $utils.geeksApi({exportar_imagens:{funcao:"5EC26171-49F7-48D9-B288-0F3DA7B6792D",idItem:r.id,idItemNoECommerce:(Y=(X=s==null?void 0:s.data)==null?void 0:X.cadastrar_atualizar)==null?void 0:Y.id,urlGCP:$db.arquivo.urlGCP}}).catch(ye=>{console.error(ye)}),(de=s==null?void 0:s.data)==null?void 0:de.cadastrar_atualizar}var oge={autenticar:Bk,deletarTodos:Jve,obterCategorias:qk,obterItem:Zve,obterItens:Lk,enviarItem:tge,exportarEstoque:ege,getTiposGeeksCategoriasTray:Yve};async function age(e){const{idECommerce:t}=e!=null?e:{};return await $utils.geeksApi({autenticar:{funcao:"94861115-0A14-46F6-818D-9E02FEAD073F",idECommerce:t}})}async function rge(e){var a;const{itemECommerce:t,itemGeeks:o}=e!=null?e:{},r=await $utils.geeksApi({cadastrar_atualizar_produtos:{funcao:"0E197FE3-14B5-4295-BCD9-A49C0F0857B0",itemECommerce:t,itemGeeks:o}});return(a=r==null?void 0:r.data)==null?void 0:a.cadastrar_atualizar_produtos}async function ige(){var t;const e=await $utils.geeksApi({exportar_estoque:{funcao:"55DCDAF3-8BE3-4815-B9D4-1E5A73B8239A"}});return(t=e==null?void 0:e.data)==null?void 0:t.exportar_estoque}async function nge(e){var n;const{idECommerce:t,idItemNoECommerce:o,offset:r,limit:a}=e!=null?e:{},i=await $utils.geeksApi({consultar_listar_produtos:{funcao:"762F719E-0DC2-44B9-9C43-3C040A395E1F",idECommerce:t,idItemNoECommerce:o,offset:r,limit:a}});return(n=i==null?void 0:i.data)==null?void 0:n.consultar_listar_produtos}async function sge(e){var n,s;const{idECommerce:t}=e!=null?e:{},o=100;let r=!0,a=0,i=[];for(;r;){const l=(s=(n=await $utils.geeksApi({listar_categorias:{funcao:"76E9AD57-4B87-478B-88D4-D62BDD29881C",idECommerce:t,offset:a,limit:o}}))==null?void 0:n.data)==null?void 0:s.listar_categorias;a=a+o,i=[...i,...l.categorias],l.categorias.length<o&&(r=!1)}return i}async function lge(e){var n,s;const{idECommerce:t}=e!=null?e:{},o=100;let r=!0,a=0,i=[];for(;r;){const l=(s=(n=await $utils.geeksApi({listar_marcas:{funcao:"1D50E7B4-5085-49B5-A00D-B13C353A2674",idECommerce:t,offset:a,limit:o}}))==null?void 0:n.data)==null?void 0:s.listar_marcas;a=a+o,i=[...i,...l.marcas],l.marcas.length<o&&(r=!1)}return i}async function cge(){var t;const e=await $utils.geeksApi({mapeamento:{funcao:"D666AF62-9E57-4414-AF15-635878E81132"}});return(t=e==null?void 0:e.data)==null?void 0:t.mapeamento}var uge={autenticar:age,enviarItem:rge,exportarEstoque:ige,obterCategorias:sge,obterItem:nge,obterMapeamento:cge,obterMarcas:lge},dge={tray:oge,uappi:uge};let eP="item",fge=["tipo","ncm"],dm=[],Wu;const ow={id:"",_DataHoraUltimaAlteracao:"",ativo:!0,codigoBarras:"",dataCadastro:"",descricao:"",garantiaDias:0,grupo:"",imagem:"",marca:"",percentualMarkup:0,quantidadeDisponivel:0,status:"Linha",subGrupo:"",surfacada:"0",tempoMedioReposicao:0,tipo:"Produto",unidade:"UN",utilizaComposicaoValorReposicao:!1,utilizaMarkup:!1,validadeMeses:0,valorCustoReposicao:0,valorVenda:0,controladoExercito:0,controladoPoliciaCivil:0,controladoPoliciaFederal:0};async function mge(e={}){var m,p,v;let{filtros:t={},termoBusca:o="",limit:r,sort:a=["descricaoConcatenada"],dir:i=["asc"],page:n,somenteDadosIndexados:s=!1}=e,l=[],u=dm,c,d,f;await $I(),c=[...t.id?["id"]:[],...t.codigoItem?["codigoItem"]:[]];for(const g of c){const x=u.find(b=>b[g]===t[g]);if(!x){u=[];break}u=[x]}if(t.ids&&(u=u.filter(g=>~t.ids.indexOf(g.id))),t.status&&(u=u.filter(g=>g.status===t.status)),t.numeroCompra){const g=await Se().documento.where({tipo:"Compra",numero:Number(t.numeroCompra)}).primaryKeys(),b=(await Se().documentoItem.where("idDocumento").anyOf(g).toArray()).map(_=>_.idItem);u=u.filter(_=>b.includes(_.id))}if(t.idDocumento){const x=(await Se().documentoItem.where({idDocumento:t.idDocumento}).toArray()).map(b=>b.idItem);u=u.filter(b=>x.includes(b.id))}t.estoque&&(u=u.filter(g=>g.quantidadeDisponivel?g.quantidadeDisponivel>t.estoque:!1)),t.esfericoInicial&&(Number.isNaN(Number(t.esfericoInicial))||(u=u.filter(g=>g.esfericoInicial===t.esfericoInicial)),((m=t.esfericoInicial)==null?void 0:m.lte)!==void 0&&(u=u.filter(g=>(g.esfericoInicial||0)<=t.esfericoInicial.lte))),t.esfericoFinal&&(Number.isNaN(Number(t.esfericoFinal))||(u=u.filter(g=>g.esfericoFinal===t.esfericoFinal)),((p=t.esfericoFinal)==null?void 0:p.gte)!==void 0&&(u=u.filter(g=>(g.esfericoFinal||0)>=t.esfericoFinal.gte))),t.cilindrico&&(Number.isNaN(Number(t.cilindrico))||(u=u.filter(g=>g.cilindrico===t.cilindrico)),((v=t.cilindrico)==null?void 0:v.lte)!==void 0&&(u=u.filter(g=>(g.cilindrico||0)<=t.cilindrico.lte))),t.tipo&&!Array.isArray(t.tipo)&&(u=u.filter(g=>g.tipo===t.tipo)),c=[...Array.isArray(t.descricaoAplicacao)||(t.descricaoAplicacao||"").trim()?["descricaoAplicacao"]:[],...Array.isArray(t.marca)||(t.marca||"").trim()?["marca"]:[],...Array.isArray(t.grupo)||(t.grupo||"").trim()?["grupo"]:[],...Array.isArray(t.subGrupo)||(t.subGrupo||"").trim()?["subGrupo"]:[],...Array.isArray(t.aplicacao)||(t.aplicacao||"").trim()?["aplicacao"]:[],...Array.isArray(t.referencia)||(t.referencia||"").trim()?["referencia"]:[],...Array.isArray(t.codigoBarras)||(t.codigoBarras||"").trim()?["codigoBarras"]:[],...Array.isArray(t.tipo)||(t.tipo||"").trim()?["tipo"]:[],...Array.isArray(t.fornecedores)||(t.fornecedores||"").trim()?["fornecedores"]:[],...Array.isArray(t.lenteTipo)||(t.lenteTipo||"").trim()?["lenteTipo"]:[]];for(const g of c){let x=t[g],b=!1;Array.isArray(t[g])&&(x=t[g].join(" "),b=!0),x=x.trim().toLowerCase().replace(/\s+/g," ").normalize("NFD").replace(/[\u0300-\u036f]/g,"").split(" "),u=u.filter(_=>{if(!(_[g]||"").trim())return!1;const w=_[g].trim().toLowerCase().replace(/\s+/g," ").normalize("NFD").replace(/[\u0300-\u036f]/g,"").split(" ");if(b){for(const S of x)if(~w.indexOf(S))return!0;return!1}for(const S of x)if(!~w.indexOf(S))return!1;return!0})}for(const g in t)!~["ativo","bloquearVenda"].indexOf(g)||typeof t[g]=="boolean"&&(u=u.filter(x=>typeof x[g]=="boolean"?x[g]===t[g]:!t[g]));if((t.termoBusca||"").trim()){let g=[],x=new Set(t.termoBusca.trim().toLowerCase().replace(/\s+/g," ").normalize("NFD").replace(/[\u0300-\u036f]/g,"").split(" "));x=Array.from(x);for(const b of u){let _=`${b.id} ${b.codigoItem?String(b.codigoItem)+" #"+String(b.codigoItem):""} `;_+=`${b.descricaoConcatenada||""} ${b.marca||""} ${b.grupo||""} ${b.subGrupo||""} `,_+=`${b.aplicacao||""} ${b.referencia?b.referencia+" Ref"+b.referencia:""} `,_+=`${b.codigoBarras||""} ${b.tipo||""} ${b.codigoBarrasAntigo||""} ${b.codigoAntigo||""}`,_=_.trim().toLowerCase().replace(/\s+/g," ").normalize("NFD").replace(/[\u0300-\u036f]/g,"");let w=!0;for(const S of x)if(_.indexOf(S)===-1){w=!1;break}w&&g.push(b)}u=g}if(u=$lodash.orderBy(u,...a,...i),d=u.length,r=r||u.length,n=n||1,f=d>1?Math.ceil(d/r):0,u=u.slice((n-1)*r,n*r),!s)for(const g of u.map(x=>x.id)){const x=await $erp().item.get(g);!x||l.push(x)}return s&&(l=u),{data:l,total:d,totalPages:f}}async function $I(e){const t=o=>{var a,i;const r={id:o.id,...o.codigoItem?{codigoItem:Number(o.codigoItem)}:{},...o.quantidadeDisponivel?{quantidadeDisponivel:Number(o.quantidadeDisponivel)}:{},...(o.descricaoConcatenada||"").trim()?{descricaoConcatenada:o.descricaoConcatenada}:{},...(o.marca||"").trim()?{marca:o.marca}:{},...(o.grupo||"").trim()?{grupo:o.grupo}:{},...(o.mix||"").trim()?{mix:o.mix}:{},...(o.subGrupo||"").trim()?{subGrupo:o.subGrupo}:{},...(o.aplicacao||"").trim()?{aplicacao:o.aplicacao}:{},...(o.referencia||"").trim()?{referencia:o.referencia}:{},...(o.codigoBarras||"").trim()?{codigoBarras:o.codigoBarras}:{},...(o.codigoBarrasAntigo||"").trim()?{codigoBarrasAntigo:o.codigoBarrasAntigo}:{},...(o.codigoAntigo||"").trim()?{codigoAntigo:o.codigoAntigo}:{},...(o.fornecedores||"").trim()?{fornecedores:o.fornecedores}:{},...(o.cor||"").trim()?{cor:o.cor}:{},...(o.amarcaoCor||"").trim()?{amarcaoCor:o.amarcaoCor}:{},...(o.armacaoMaterial||"").trim()?{armacaoMaterial:o.armacaoMaterial}:{},...(o.material||"").trim()?{material:o.material}:{},...(o.tipoMontagem||"").trim()?{tipoMontagem:o.tipoMontagem}:{},...(o.unidade||"").trim()?{unidade:o.unidade}:{},...(o.tipo||"").trim()?{tipo:o.tipo}:{},...(o.status||"").trim()?{status:o.status}:{},...(o.lenteTipo||"").trim()?{lenteTipo:o.lenteTipo}:{},...o.esfericoInicial?{esfericoInicial:Number(o.esfericoInicial+((a=o.adicaoInicial)!=null?a:0))}:{},...o.esfericoFinal?{esfericoFinal:Number(o.esfericoFinal+((i=o.adicaoFinal)!=null?i:0))}:{},...o.cilindrico?{cilindrico:Number(o.cilindrico)}:{},...typeof o.ativo=="boolean"?{ativo:o.ativo}:{},...typeof o.bloquearVenda=="boolean"?{bloquearVenda:o.bloquearVenda}:{},...(o.ncm||"").trim()?{ncm:o.ncm}:{},...o.dataCadastro?{dataCadastro:o.dataCadastro}:{},...o.valorVenda?{valorVenda:o.valorVenda}:{}};if((o.descricaoConcatenada||"").trim()||(o.aplicacao||"").trim()){const n=(o.descricaoConcatenada||"").trim()+" "+(o.aplicacao||"").trim();r.descricaoAplicacao=n.trim()}dm.push(r)};if(Wu&&e){await Wu;const o=dm.findIndex(a=>a.id===e);o>-1&&dm.splice(o,1);const r=await $erp().item.get(e);return r&&t(r),Wu}return Wu||(Wu=new Promise(async(o,r)=>{let a,i;i=1e4,a=await $erp().item.count();for(let n=0;n<a;n+=i)await $erp().item.offset(n).limit(i).each(s=>t(s));o()}),Wu)}async function $k(e){e.descricaoConcatenada=Cb(e),(!e.composicao||!e.composicao.length)&&(e.composicao=[{}]),(!e.fornecedor||!e.fornecedor.length)&&(e.fornecedor=[{}]),(!e.producaoFase||!e.producaoFase.length)&&(e.producaoFase=[{}]),(!e.qualidade||!e.qualidade.length)&&(e.qualidade=[{}]);for(const t in e.composicao){let o=e.composicao[t];o=Object.assign({},{idItemUtilizado:"",ordem:0,quantidade:1,temporario:{unidade:"",valor:0,total:0}},o),o.item=o.item||await ud().get("item",o.idItemUtilizado),o.descricaoItemUtilizado=o.item.descricao||"",e.composicao[t]=o}for(const t in e.fornecedor){let o=e.fornecedor[t];o=Object.assign({},{idContato:"",descricao:"",referencia:""},o),o.contato=o.contato||await et.contato.le({id:o.idContato}),o.descricaoContato=o.contato.apelido||"",e.fornecedor[t]=o}for(const t in e.producaoFase){let o=e.producaoFase[t];o=Object.assign({},{descricao:"",idItemEquipamento:"",idItemFerramenta:"",idItemServico:"",ordem:0},o),o.itemEquipamento=o.itemEquipamento||await ud().get("item",o.idItemEquipamento),o.itemFerramenta=o.itemFerramenta||await ud().get("item",o.idItemFerramenta),o.itemServico=o.itemServico||await ud().get("item",o.idItemServico),o.descricaoItemEquipamento=o.itemEquipamento.descricao||"",o.descricaoItemFerramenta=o.itemFerramenta.descricao||"",o.descricaoItemServico=o.itemServico.descricao||"",e.producaoFase[t]=o}return e}function Cb(e){let t=e.descricao+(e.modelo?" - "+e.modelo:"")+(e.tamanho?" - "+e.tamanho:"");return e.tipo==="Lente"&&(t+=(e.esfericoInicial?" "+e.esfericoInicial:"")+(e.esfericoFinal?" "+e.esfericoFinal:"")+(e.eixo?" "+e.eixo:"")+(e.material?" - "+e.material:"")+(e.cor?" - "+e.cor:"")+(e.diametro?" - "+e.diametro:"")+(e.indiceRefracao?" - "+e.indiceRefracao:"")+(e.geometria?" - "+e.geometria:"")+(e.lenteTipo?" "+e.lenteTipo:"")),t}async function pge(e,t){try{await $erpUpdate().item.update(e,t),await ut("atualizar","item",e,t)}catch(o){throw console.log(o.message),new Error(o)}}async function hge(e){const t=await et.item.leCompleto(e);delete t.atual.fornecedor,delete t.atual.fornecedores;const o={...t.atual,id:Kt(),codigoBarras:"",referencia:"",codigoItem:void 0,quantidadeDisponivel:0};for(const r in o)if(Array.isArray(o[r]))for(const a of o[r])delete a.id;return await et.item.grava({atual:o}),o}async function vge(e){const t=cn(e.original||{},e.atual);Object.keys(e.original||{}).length?Object.keys(t).length&&(await $erpUpdate().item.update(e.atual.id,t),await ut("atualizar","item",e.atual.id,t),await et.item.carregarMemoria(e.atual.id)):(await $erpPut().item.put(t),await ut("adicionar","item",t.id,t),await et.item.carregarMemoria(t.id))}async function gge(e){Wt.log("item","grava",e);const t=tP(Tn(e.atual)),o=tP(Tn(e.original||{}));t.descricaoConcatenada=Cb(t);let r=!1;if(r=await lo("itemComposicao",o.composicao,t.composicao)||r,r=await lo("itemFornecedor",o.fornecedor,t.fornecedor)||r,r=await lo("itemProducaoFase",o.producaoFase,t.producaoFase)||r,r=await lo("itemQualidade",o.qualidade,t.qualidade)||r,r=await lo("itemEspecificacao",o.especificacao,e.especificacao)||r,Object.keys(o||{}).length){const a=cn(o,t);(r||Object.keys(a).length)&&(t._DataHoraUltimaAlteracao=sa(),a._DataHoraUltimaAlteracao=t._DataHoraUltimaAlteracao,await $erpUpdate().item.update(t.id,a),await ut("atualizar","item",t.id,a))}else{t.dataCadastro=sa(),t._DataHoraUltimaAlteracao=t.dataCadastro;const a=cn({},t);await $erpPut().item.put(a),await ut("adicionar","item",a.id,a)}await et.item.carregarMemoria(t.id)}async function _ge(e){e=$utils.clonarV2(e);const t=$utils.clonar(e.originais||{});e.item.descricaoConcatenada=Cb(e.item);const r=$utils.compactarObjeto(e).item;let a=!1;if(a=await lo("itemComposicao",t.composicao,e.composicao)||a,a=await lo("itemFornecedor",t.fornecedor,e.fornecedor)||a,a=await lo("itemProducaoFase",t.producaoFase,e.producaoFase)||a,a=await lo("itemQualidade",t.qualidade,e.qualidade)||a,a=await lo("itemEspecificacao",t.especificacao,e.especificacao)||a,!Object.keys(t||{}).length)r.dataCadastro=sa(),r._DataHoraUltimaAlteracao=r.dataCadastro,await $erpPut().item.put(r),await ut("adicionar","item",r.id,r);else{const i=sa();a&&(r._DataHoraUltimaAlteracao=i);const n=$utils.diferencaObjetos(t.item,r);Object.keys(n).length&&(r._DataHoraUltimaAlteracao=i,n._DataHoraUltimaAlteracao=i,await $erpUpdate().item.update(r.id,n),await ut("atualizar","item",r.id,n))}return await et.item.carregarMemoria(r.id),r.id}async function bge(e){if(e=e||{},"id"in e)return e.id?await Se().item.get(e.id)||{}:{};let t={};"tipo"in e&&e.tipo&&(t.tipo=e.tipo),"ativo"in e&&e.ativo&&(t.ativo=1);let o=Se().item;return Object.keys(t).length&&(o=o.where(t)),"limit"in e&&e.limit&&(o=o.limit(e.limit)),await o.toArray()||[]}async function yge(e){if(e=e||{},"id"in e)return e.id?await Se().item.get(e.id)||{}:{};let t=await Se().item.toArray()||[];return e.tipo&&(Array.isArray(e.tipo)?t=t.filter(o=>e.tipo.includes(o.tipo)):t=t.filter(o=>e.tipo===o.tipo)),e.ativo&&(t=t.filter(o=>o.ativo)),e.ativo===!1&&(t=t.filter(o=>!o.ativo)),t}async function xge({filtros:e,limit:t,page:o,sort:r}){if(e=e||{},"id"in e)return e.id?await Se()[eP].get(e.id)||{}:{};let a={};for(const m of fge)m in e&&e[m]&&(a[m]=e[m]);let i=await Se()[eP];if(Object.keys(a).length&&(i=i.where(a)),"ativo"in e&&typeof e.ativo=="boolean"&&(i=i.filter(m=>m.ativo===e.ativo)),"codigo"in e&&(i=i.filter(m=>m.codigo===Number(e.codigo))),"codigoItem"in e&&(i=i.filter(m=>m.codigoItem===Number(e.codigoItem))),"referencia"in e&&(i=i.filter(m=>m.referencia===e.referencia)),"codigoBarras"in e&&(i=i.filter(m=>m.codigoBarras===e.codigoBarras)),"marca"in e&&(i=i.filter(m=>m.marca===e.marca)),"grupo"in e&&(i=i.filter(m=>m.grupo===e.grupo)),"tipo"in e&&(i=i.filter(m=>m.tipo===e.tipo)),"subGrupo"in e&&(i=i.filter(m=>m.subGrupo===e.subGrupo)),"fornecedor"in e){let m=[],p=[];(await Se().contato.filter(x=>{if(x.nome){let b=Qc(x.nome).toLowerCase(),_=Qc(e.fornecedor).toLowerCase();return b.includes(_)}}).toArray()).map(x=>m.push(x.id)),(await Se().itemFornecedor.filter(x=>m.includes(x.idContato)).toArray()).map(x=>p.push(x.idItem)),i=i.filter(x=>p.includes(x.id))}if("codigoCompra"in e){let m=await Se().documentoItem.filter(v=>v.codigoDocumento===Number(e.codigoCompra)).toArray(),p=[];m.map(v=>p.push(v.idItem)),i=i.filter(v=>p.includes(v.id))}"estoque"in e&&(i=i.filter(m=>m.quantidadeDisponivel>=e.estoque)),"descricao"in e&&(i=i.filter(m=>m.descricao.includes(e.descricao))),"descricaoAplicacao"in e&&(i=i.filter(m=>{if(m.aplicacao&&m.descricao)return m.descricao.includes(e.descricaoAplicacao)||m.aplicacao.includes(e.descricaoAplicacao);if(m.descricao)return m.descricao.includes(e.descricaoAplicacao)}));let n=[],s=[];await i.each(m=>{n.push({descricao:Qc(m.descricao||"").toUpperCase().trim(),id:m.id,grupo:m.grupo})});const l=n.length;n=n.sort((m,p)=>m.descricao>p.descricao?1:p.descricao>m.descricao?-1:0),t=t||l,o=o||1;let u=(o-1)*t;n=n.splice(u,t);for(let m of n)s.push(await Se().item.get({id:m.id}));let c=s,d=l,f=Math.ceil(d/t)||1;return{data:c,total:d,totalPages:f}}async function Cge(e){Wt.log("item","leCompleto");let t=await ud().get("item",e,{joinMany:[{field:"composicao",joinTable:"itemComposicao",joinKey:"idItem",key:"id"},{field:"fornecedor",joinTable:"itemFornecedor",joinKey:"idItem",key:"id"},{field:"producaoFase",joinTable:"itemProducaoFase",joinKey:"idItem",key:"id"},{field:"qualidade",joinTable:"itemQualidade",joinKey:"idItem",key:"id"}]});t=await $k({...ow,...t});const o=Tn(t);return{atual:t,original:o}}async function wge(e){const t={};return e=e||"",t.item=await Se().item.get(e)||{},t.composicao=await Se().itemComposicao.where("idItem").equals(e).toArray(),t.fornecedor=await Se().itemFornecedor.where("idItem").equals(e).toArray(),t.producaoFase=await Se().itemProducaoFase.where("idItem").equals(e).toArray(),t.qualidade=await Se().itemQualidade.where("idItem").equals(e).toArray(),t.especificacao=await Se().itemEspecificacao.where("idItem").equals(e).toArray(),t}async function Ege(e){if($db.hibrido.isOnline())return(await $utils.geeksApi({leCompleto:{funcao:"BA9AF29F-4571-4956-8816-AD6CBE21F64D",id:e}})).data.leCompleto;{$utils.verificarErro(!e,"Id do item n\xE3o fornecido");const t={};return t.item=await Se().item.get(e)||{},t.composicao=await Se().itemComposicao.where("idItem").equals(e).toArray(),t.fornecedor=await Se().itemFornecedor.where("idItem").equals(e).toArray(),t.producaoFase=await Se().itemProducaoFase.where("idItem").equals(e).toArray(),t.qualidade=await Se().itemQualidade.where("idItem").equals(e).toArray(),t.especificacao=await Se().itemEspecificacao.where("idItem").equals(e).toArray(),t}}async function Sge(e,t){const o={idContaEstoque:"",descricaoContaEstoque:"",idContaReceita:"",descricaoContaReceita:"",idContaDespesa:"",descricaoContaDespesa:""};let r=await Se().item.get(e),a=await et.cfop.le({id:t}),i=(await et.configuracoes.le({nome:"financeiro.planocontas.cmv"}))[0].valor,n=await et.financeiroPlanoConta.le({codigoFinanceiroPlanoConta:i})||{},s=(await et.configuracoes.le({nome:"financeiro.planocontas.faturamentogeral"}))[0].valor,l=await et.financeiroPlanoConta.le({codigoFinanceiroPlanoConta:s})||{},u=await et.perfilContabilItem.le({idPerfilContabil:r.idPerfilContabil});const c={};for(const d of await et.financeiroPlanoConta.le()||[])c[d.id]=d;for(const d of u.filter(f=>f.idCfop===t))return{ordem:0,idPlanoContaEstoque:d.idPlanoContaEstoque,descricaoContaEstoque:c[d.idPlanoContaEstoque].apelido+" - "+c[d.idPlanoContaEstoque].descricao.trim(),idPlanoContaDestino:d.idPlanoContaDestino,descricaoContaDestino:c[d.idPlanoContaDestino].apelido+" - "+c[d.idPlanoContaDestino].descricao.trim(),idPlanoContaDespesa:d.idPlanoContaDespesa,descricaoContaDespesa:c[d.idPlanoContaDespesa].apelido+" - "+c[d.idPlanoContaDespesa].descricao.trim()};for(const d of u)return{ordem:1,idPlanoContaEstoque:d.idPlanoContaEstoque,descricaoContaEstoque:c[d.idPlanoContaEstoque].apelido+" - "+c[d.idPlanoContaEstoque].descricao.trim(),idPlanoContaDestino:d.idPlanoContaDestino,descricaoContaDestino:c[d.idPlanoContaDestino].apelido+" - "+c[d.idPlanoContaDestino].descricao.trim(),idPlanoContaDespesa:d.idPlanoContaDespesa,descricaoContaDespesa:c[d.idPlanoContaDespesa].apelido+" - "+c[d.idPlanoContaDespesa].descricao.trim()};return a.idPlanoContaEstoque&&a.idPlanoContaDestino?{ordem:2,idPlanoContaEstoque:a.idPlanoContaEstoque,descricaoContaEstoque:c[a.idPlanoContaEstoque].apelido+" - "+c[a.idPlanoContaEstoque].descricao.trim(),idPlanoContaDestino:a.idPlanoContaDestino,descricaoContaDestino:c[a.idPlanoContaDestino].apelido+" - "+c[a.idPlanoContaDestino].descricao.trim(),idPlanoContaDespesa:n.id,descricaoContaDespesa:n.descricao}:a.idPlanoContaEstoque?{ordem:3,idPlanoContaEstoque:a.idPlanoContaEstoque,descricaoContaEstoque:c[a.idPlanoContaEstoque].apelido+" - "+c[a.idPlanoContaEstoque].descricao.trim(),idPlanoContaDestino:l.id,descricaoContaDestino:l.apelido+" - "+l.descricao.trim(),idPlanoContaDespesa:n.id,descricaoContaDespesa:n.descricao}:o}async function Ige(e){return Wt.log("item","leUnicos",e),Se().item.orderBy(e).uniqueKeys()}async function Age(e,t){Wt.log("item","leValoresUnicos"),await $db.item.carregarMemoria();const o=$db.item.itens;return jE([{[e]:""},{[e]:t},...o],e).sort((r,a)=>r.localeCompare(a,void 0,{sensitivity:"base"}))}function tP(e){if(e.fornecedor){for(const t of e.fornecedor)delete t.contato,delete t.descricaoContato,t.idItem=e.id,t.id||(t.id=Kt());e.fornecedor=e.fornecedor.filter(t=>!!t.idContato||!!t.descricao||!!t.referencia)}if(e.composicao){for(const t of e.composicao)delete t.temporario,delete t.item,delete t.descricaoItemUtilizado,t.idItem=e.id,t.id||(t.id=Kt());e.composicao=e.composicao.filter(t=>!!t.idItemUtilizado)}if(e.qualidade){for(const t of e.qualidade)delete t.item,t.idItem=e.id,t.id||(t.id=Kt());e.qualidade=e.qualidade.filter(t=>!!t.descricao||!!t.especificacao||!!t.limites)}if(e.producaoFase){for(const t of e.producaoFase)delete t.itemEquipamento,delete t.itemFerramenta,delete t.itemServico,delete t.descricaoItemEquipamento,delete t.descricaoItemFerramenta,delete t.descricaoItemServico,t.idItem=e.id,t.id||(t.id=Kt());e.producaoFase=e.producaoFase.filter(t=>!!t.ordem||!!t.descricao||!!t.idItemEquipamento||!!t.idItemFerramenta||!!t.idItemServico)}return e}async function Tge(e,t){let o=!1;return e?(Wt.log("item","validarReferenciaUnica"),o=!await Se().item.filter(a=>a.referencia===e&&a.id!==t.id).first(),o):!0}async function Dge({item:e,arquivosOriginal:t,alterarDescricao:o,alterarValorCusto:r,alterarValorVenda:a}){let i;if(i=await $utils.geeksApi({importarDadosReferencia:{funcao:"969B3D4B-A506-48AA-ADF7-507962EC932F",codigoBarras:e.codigoBarras}}),!i.data.importarDadosReferencia&&(i=await $utils.geeksApi({importarDadosReferencia:{funcao:"969B3D4B-A506-48AA-ADF7-507962EC932F",id:e.referencia.replace(/\s+/g,"-")}}),!i.data.importarDadosReferencia))return;const{dados:n,fotos:s}=i.data.importarDadosReferencia;e.haste=parseFloat(n.armacao["Comprimento da haste"]),e.ponte=parseFloat(n.armacao["Tamanho da ponte"]),e.largura=parseFloat(n.armacao["Dobradi\xE7a a dobradi\xE7a"]),e.armacaoMaterial=n.armacao["Material da haste"],e.tipoMontagem=n.armacao["Tipo de aro"],e.modelo=e.referencia.replace(/\s+/g,"-"),e.amarcaoCor=n.armacao.Cor,e.material=n.lente["Material da lente"],e.cor=n.lente["Cor da lente"],o&&(e.descricao=n.nome),r&&(e.valorCustoReposicao=parseFloat(n.precoCompra.replace(/[^\d,]/g,"").replace(",","."))),a&&(e.valorVenda=parseFloat(n.precoVenda.replace(/[^\d,]/g,"").replace(",",".")));const l={an:"Arnette",ar:"Giorgio Armani",ax:"Armani Exchange",gz:"Grazi Massafera",j8:"Jean Monnier",kp:"Kipling",oo:"Oakley",oy:"Oakley",p9:"Platini",rb:"Ray-Ban",rj:"Ray-Ban",rx:"Ray-Ban",tn:"Tecnol",vj:"Vogue",vo:"Vogue",vy:"Vogue",mk:"Michael Kors",ea:"Emporio Armani",ps:"Prada",ry:"Ray-Ban",be:"Burberry",ra:"Ralph Lauren",rl:"Ralph Lauren",pp:"Polo Ralph Lauren",ve:"Versace",pr:"Prada",ek:"Emporio Armani",mf:"Miraflex",ph:"Ralph Lauren",ox:"Oakley",oj:"Oakley",bv:"Bvlgari",po:"Persol",tf:"Tiffany",dg:"Dolce & Gabbana",jk:"Jack Pacific",hc:"Coach",mu:"Miu Miu",sk:"Swarovski"};e.marca=l[e.modelo.toLowerCase().substring(1,3)]||n.marca||"",e.cor==="Lente de demonstra\xE7\xE3o"||e.cor==="Transparente"||n.linha==="RECEITUARIO"?(e.tipo="Arma\xE7\xE3o",e.ncm="90031990"):(n.linha,e.tipo="\xD3culos Sol",e.ncm="90041000");const u=n.armacao["Dobradi\xE7a a dobradi\xE7a"].split(",");if(u.length===2){+u[0].trim().replace(".",",");const p=+u[1].trim().replace(".",",");e.largura=p}const c=s,d=Object.keys(c).sort((p,v)=>p.localeCompare(v)),f=c[d[0]];e.imagem=f;const m=[];for(const p of d){const v={arquivo:c[p],dataCriacao:$utils.dataAtual(),id:$utils.uuid(),idTabelaMaster:e.id,nome:p.replace(/^\d+\s-\s/,""),tipoArquivo:"itemImagem"};m.push(v)}return{item:e,arquivos:m}}async function Oge(e){var _,w,S,D,M,O,T,I,N,P,F,L;const t=(_=e.qtdeMomento)!=null?_:0,o=(w=e.qtdeDesejada)!=null?w:0,r=(S=e.custoDesejado)!=null?S:0,a=(D=e.custoMomento)!=null?D:0,i=o*r-t*a,n=$utils.uuid(),s=$utils.dataAtual();let l,u,c,d,f,m,p,v,g,x,b;if(l=await $erp().empresa.toArray(),u=l.find(z=>z.codigoContato===e.codigoEmpresaSelecionada),c=await $erp().item.get(e.idItem),l=await $erp().financeiroPlanoConta.toArray(),d=l.find(z=>z.codigoFinanceiroPlanoConta===e.planoContaEstoque),f=l.find(z=>z.codigoFinanceiroPlanoConta===e.planoContaMovimento),!u)throw new Error("GError:Empresa n\xE3o encontrada.");if(!c)throw new Error("GError:Item n\xE3o encontrado.");if(!d)throw new Error("GError:Plano de conta (Estoque) n\xE3o encontrado.");if(!f)throw new Error("GError:Plano de conta (Movimenta\xE7\xE3o) n\xE3o encontrado.");m=o-t,p=m<0?-1:1,m=Math.abs(m),v={id:$utils.uuid(),idEmpresa:u.idContato,tipo:"Estoque",operacao:"Ajuste",status:"Finalizado",dataHoraEmissao:e.data,dataHoraFinalizado:e.data,observacao:e.observacao},g={id:$utils.uuid(),idDocumento:v.id,idItem:c.id,descricaoItem:c.descricao,tipoItem:"Estoque",operacao:"Ajuste Dispon\xEDvel",status:"Finalizado",operacaoFator:p,quantidade:m,valorItem:r,valorCusto:r,subTotal:m*r,total:m*r,dataHoraEmissao:e.data,dataHoraFinalizado:e.data,quantidadeUltimo:t,valorCustoUltimo:a,idPlanoContaEstoque:d.id,idPlanoContaDestino:f.id},e.lote&&(g.loteEmpresa=e.lote),b={id:$utils.uuid(),idFinanceiroMovimentacaoN:n,idFinanceiroPlanoConta:i<0?d.id:f.id,idEmpresa:u.idContato,dataEmissao:s,observacao:"Contabiliza\xE7\xE3o autom\xE1tica",valorCredito:i<0?Math.abs(i):0,valorDebito:i<0?0:Math.abs(i),descricao:Math.abs(i)?(O=(M=d.descricao)==null?void 0:M.trim())!=null?O:"":(I=(T=f.descricao)==null?void 0:T.trim())!=null?I:"",automatico:0,liquidando:0,dataCompetencia:s,dataVencimento:s,dataMovimento:s,documentoTipo:"Ajuste de Estoque",documentoId:v.id},x={id:$utils.uuid(),idFinanceiroMovimentacaoN:n,idFinanceiroPlanoConta:i<0?f.id:d.id,idEmpresa:u.idContato,dataEmissao:s,observacao:"Contabiliza\xE7\xE3o autom\xE1tica",valorCredito:i<0?0:Math.abs(i),valorDebito:i<0?Math.abs(i):0,descricao:i<0?(P=(N=f.descricao)==null?void 0:N.trim())!=null?P:"":(L=(F=d.descricao)==null?void 0:F.trim())!=null?L:"",automatico:0,liquidando:0,dataCompetencia:s,dataVencimento:s,dataMovimento:s,documentoTipo:"Ajuste de Estoque",documentoId:v.id},await $erpPut().documento.put(v),await $erpPut().documentoItem.put(g),await $erpPut().financeiroMovimentacao.put(b),await $erpPut().financeiroMovimentacao.put(x),await $utils.sincronismoEnviar("adicionar","documento",v.id,v),await $utils.sincronismoEnviar("adicionar","documentoItem",g.id,g),await $utils.sincronismoEnviar("adicionar","financeiroMovimentacao",b.id,b),await $utils.sincronismoEnviar("adicionar","financeiroMovimentacao",x.id,x)}async function Pge(e){const{id:t,referencia:o}=e!=null?e:{};let r=(o||"").trim().toLowerCase();return r?(await $I(),!!dm.find(i=>(i.referencia||"").trim().toLowerCase()===r&&i.id!==t)):!1}var Fge={itens:dm,carregarMemoria:$I,ler:mge,completa:$k,descricaoConcatenada:Cb,duplica:hge,existeReferencia:Pge,grava:gge,gravaV2:_ge,gravaItem:vge,gravarSimplesV1:pge,importarDadosProdutoReferencia:Dge,le:yge,leCompleto:Cge,leCompletoV2:wge,leCompletoV3:Ege,leContas:Sge,leNew:bge,leUnicos:Ige,leValoresUnicos:Age,leRefatorado:xge,opcoesTipo:[{rotulo:"Produto",valor:"Produto"},{rotulo:"Servi\xE7o",valor:"Servi\xE7o"}],selecionado:{...ow},validarReferenciaUnica:Tge,ajusteEstoque:Oge,vazio:ow};async function Mge(e){const t={...e.atual},o={...e.original};if(Object.keys(o||{}).length){const r=$utils.diferencaObjetos(o,t);if(Object.keys(r).length){const a=$utils.dataAtual();r.dataHoraModificacao=a,await $erpUpdate().itemECommerce.update(t.id,r),await $utils.sincronismoEnviar("atualizar","itemECommerce",t.id,r)}}else{const r=$utils.dataAtual();t.dataHoraCriacao=r,t.dataHoraModificacao=r,await $erpPut().itemECommerce.put(t),await $utils.sincronismoEnviar("adicionar","itemECommerce",t.id,t)}}async function Nge(e){const t={};let o=$erp().itemECommerce;if(e!=null&&e.id)return o.get(e.id);e==null||delete e.id;for(const r of Object.keys(e!=null?e:{}))e[r]!==void 0&&(t[r]=e[r]);return Object.keys(e!=null?e:{}).length>0&&!(Object.keys(t).length>0)?[]:Object.keys(t).length>0?o.where(t).toArray():o.toArray()}async function kge(e){await $erpDelete().itemECommerce.delete(e),await $utils.sincronismoEnviar("remover","itemECommerce",e)}var Rge={gravar:Mge,ler:Nge,remover:kge};async function Vge(e){const t={...e.atual},o={...e.original};if(!Object.keys(o||{}).length)await $erpPut().itemEspecificacao.put(t),await $utils.sincronismoEnviar("adicionar","itemEspecificacao",t.id,t);else{const r=$utils.diferencaObjetos(o,t);Object.keys(r).length&&(await $erpUpdate().itemEspecificacao.update(t.id,r),await $utils.sincronismoEnviar("atualizar","itemEspecificacao",t.id,r))}}async function Bge(e){const t={};let o=$erp().itemEspecificacao;if(e!=null&&e.id)return await o.get(e.id);e==null||delete e.id;for(const r of Object.keys(e!=null?e:{}))e[r]!==void 0&&(t[r]=e[r]);return Object.keys(e!=null?e:{}).length>0&&!(Object.keys(t).length>0)?[]:Object.keys(t).length>0?await o.where(t).toArray():await o.toArray()}async function qge(e){await $erpDelete().itemEspecificacao.delete(e),await $utils.sincronismoEnviar("remover","itemEspecificacao",e)}var Lge={gravar:Vge,ler:Bge,remover:qge};async function $ge(e){const t={...e.atual},o={...e.original};if(!Object.keys(o||{}).length)await $erpPut().itemFornecedor.put(t),await $utils.sincronismoEnviar("adicionar","itemFornecedor",t.id,t);else{const r=$utils.diferencaObjetos(o,t);Object.keys(r).length&&(await $erpUpdate().itemFornecedor.update(t.id,r),await $utils.sincronismoEnviar("atualizar","itemFornecedor",t.id,r))}}async function Uge(e){const t={};let o=$erp().itemFornecedor;if(e!=null&&e.id)return await o.get(e.id);e==null||delete e.id;for(const r of Object.keys(e!=null?e:{}))e[r]!==void 0&&(t[r]=e[r]);return Object.keys(e!=null?e:{}).length>0&&!(Object.keys(t).length>0)?[]:Object.keys(t).length>0?await o.where(t).toArray():await o.toArray()}async function zge(e){await $erpDelete().itemFornecedor.delete(e),await $utils.sincronismoEnviar("remover","itemFornecedor",e)}var Hge={gravar:$ge,ler:Uge,remover:zge};const oP="documento",jge=["id","idContato","idFatura","idDocumentoAdicional","idContatoVendedor","idContatoDigitador","idEmpresa","documentoId","tipo","status","idEquipamento"],Gge={grava:async e=>{if(e=Vr(e),await lo("documentoItem",e.documentoItensAnterior||[],e.documentoItens||[]),!Object.keys(e.documentoAnterior||{}).length)await $erpPut().documento.put(e.documento),await ut("adicionar","documento",e.documento.id,e.documento);else{const t=Ja(e.documentoAnterior,e.documento);Object.keys(t).length&&(await $erpUpdate().documento.update(e.documento.id,t),await ut("atualizar","documento",e.documento.id,t))}},le:async e=>{if(e=e||{},"id"in e)return $db.hibrido.le({table:"documento",id:e.id});let t={tipo:"Produ\xE7\xE3o"};"idContato"in e&&e.idContato&&(t.idContato=e.idContato),"idEmpresa"in e&&e.idEmpresa&&(t.idEmpresa=e.idEmpresa),"status"in e&&e.status&&(t.status=e.status);let o=Se().documento;Object.keys(t).length&&("periodoEmissao"in e||"periodoFinalizado"in e?o=o.where(t).and(function(n){if("periodoEmissao"in e&&e.periodoEmissao){let s=new Date(e.periodoEmissao.ini).setHours(0,0,0,0),l=new Date(e.periodoEmissao.fim).setHours(0,0,0,0),u=new Date(n.dataHoraEmissao).setHours(0,0,0,0);return s&&l?u>=s&&u<=l:s?u>=s:l?u<=l:!0}}).and(function(n){if("periodoFinalizado"in e&&e.periodoFinalizado){let s=new Date(e.periodoFinalizado.ini).setHours(0,0,0,0),l=new Date(e.periodoFinalizado.fim).setHours(0,0,0,0),u=new Date(n.dataHoraFinalizado).setHours(0,0,0,0);return s&&l?u>=s&&u<=l:s?u>=s:l?u<=l:!0}}):o=o.where(t));const r=e.offset,a=e.limit;let i=o;return i=await i.count(),Number.isInteger(r)&&Number.isInteger(a)?Promise.all([o.offset(r).limit(a).toArray(),i]):Promise.all([o.toArray(),i])},leListaCompleta(e){return $db.hibrido.isOnline()?this.leListaCompletaOnline(e):this.leListaCompletaOffline(e)},leListaCompletaOnline:async function(e={}){let{filtros:t,limit:o,page:r,sort:a=["numero"],dir:i=["desc"]}=e||{};return(await $utils.geeksApi({listaItemManipulacao:{funcao:"0BD58440-165F-4A99-BFB6-9DE3AC7E37F3",filtros:t,limit:o,page:r,sort:a,dir:i}})).data.listaItemManipulacao},leListaCompletaOffline:async function(e={}){let{filtros:t,limit:o,page:r,sort:a=["numero"],dir:i=["desc"]}=e||{};for(const v in t){if(t[v]===null||t[v]===void 0)throw"Erro no filtro "+v;typeof t[v]=="string"&&(t[v]=t[v].trim())}let n={tipo:"Produ\xE7\xE3o"};"id"in t&&t.id&&(n.id=t.id),"idEmpresa"in t&&t.idEmpresa&&(n.idEmpresa=t.idEmpresa);for(const v of jge)v in t&&t[v]&&(n[v]=t[v]);let s=await Se()[oP];if(Object.keys(n).length&&(s=s.where(n)),"periodoEmissao"in t&&t.periodoEmissao){let v=new Date(t.periodoEmissao.ini).setHours(0,0,0,0),g=new Date(t.periodoEmissao.fim).setHours(0,0,0,0);s=s.filter(x=>{let b=new Date(x.dataHoraEmissao).setHours(0,0,0,0);return v&&g?b>=v&&b<=g:v?b>=v:g?b<=g:!0})}if("periodoFinalizado"in t&&t.periodoFinalizado){let v=new Date(t.periodoFinalizado.ini).setHours(0,0,0,0),g=new Date(t.periodoFinalizado.fim).setHours(0,0,0,0);s=s.filter(x=>{let b=new Date(x.dataHoraEmissao).setHours(0,0,0,0);return v&&g?b>=v&&b<=g:v?b>=v:g?b<=g:!0})}let l=await s.toArray();if("termoBusca"in t&&t.termoBusca){const v=$utils.removerAcentos(t.termoBusca.toUpperCase()).split(" ").filter(Boolean),g=v.filter(_=>_.match(/^\d+$/)),x=v.filter(_=>!_.match(/^\d+$/)),b=[];for(const _ of l){let w="";const S=await $db.hibrido.lista({table:"documentoItem",whereIn:{idDocumento:_.id}});for(const T of S){const I=await $db.hibrido.lista({table:"item",whereIn:{id:T.idItem}});for(const N of I)w+=$utils.removerAcentos([T.descricaoItem,N.marca,N.referencia,N.codigoBarras].join(" ").toUpperCase())+" "}w+=$utils.removerAcentos([_.descricaoEmpresa,_.descricaoContato].join(" ").toUpperCase())+" ",w=w.trim();const M=[_.numero,_.codigoDocumento].map(String);let O=!0;for(const T of g)O=O&&M.includes(T);for(const T of x)O=O&&w.includes(T);O&&b.push(_)}l=b}let u=[];const c=l.length;l=$lodash.orderBy(l,...a,...i),o=o||c,r=r||1;let d=(r-1)*o;l=l.splice(d,o);for(let v of l)u.push(await Se()[oP].get({id:v.id}));let f=u,m=c,p=Math.ceil(m/o)||1;return{data:f,total:m,totalPages:p}},leItens:async e=>{if(e=e||{},"id"in e)return $db.hibrido.le({table:"documentoItem",id:e.id});let t={};"idDocumento"in e&&e.idDocumento&&(t.idDocumento=e.idDocumento),"idItem"in e&&e.idItem&&(t.idItem=e.idItem);let o=Se().documentoItem;if(Object.keys(t).length)o=o.where(t);else return[];return o.toArray()},async remove(e){await this.removeItens(e),await $erpDelete().documento.delete(e),await ut("remover","documento",e)},async removeItens(e){let t=await $db.hibrido.lista({table:"documentoItem",where:{idDocumento:e}});for(let o of t)await Se().documentoItem.where({id:o.id}).delete(),await ut("remover","documentoItem",o.id)}},Wge={grava:()=>{},le:async(e={})=>{if(e.id)return Se().itemTabelaPreco.get(e.id)||{};const t={};let o=Se().itemTabelaPreco;return Object.keys(t).length&&(o=o.where(t)),o=await o.toArray(),e.tabelaMaster===!0&&(o=o.filter(r=>r.tabelaMaster===1)),e.tabelaMaster===!1&&(o=o.filter(r=>r.tabelaMaster!==1)),e.idEmpresa&&(o=o.filter(r=>r.idEmpresa===e.idEmpresa||!r.idEmpresa)),o},obterValores:async(e,t,o=2,r)=>{var g;if(!e.id)return;const a=(t.marca||"").trim(),i=(t.grupo||"").trim(),n=(t.subGrupo||"").trim();let s,l,u,c,d,f,m,p=[];if(c=e.maximoDesconto||0,c=c>100?100:c,d=e.maximoDescontoGerente||0,d=d>100?100:d,f=e.fatorPercentual||0,m=e.fatorArredondamento||0,t.id&&(r&&(s=r.filter(x=>x.idItem===t.id)),r||(s=await Se().itemTabelaPreco.where({idItem:t.id}).toArray()),s=s.find(x=>!x.tabelaMaster&&x.idItemTabelaPrecoPai===e.id)),s){let x=s.valorVenda||0;const b=(g=s==null?void 0:s.fatorArredondamento)!=null?g:m;return b&&(x=Zx(x,b,o)),c=s.maximoDesconto||0,c=c>100?100:c,d=s.maximoDescontoGerente||0,d=d>100?100:d,{tabelaMaster:0,valorVenda:lr(x,o),valorVendaMaiorQue:lr(s.valorVendaMaiorQue||0,o),quantidadeMaiorQue:lr(s.quantidadeMaiorQue||0,o),maximoDesconto:lr(c,o),maximoDescontoGerente:lr(d,o),maximoDescontoMaiorQue:lr(s.maximoDescontoMaiorQue||0,o)}}if(l=1,u=(100+f)/100*(t.valorVenda||0),a){let x;r&&(x=r.filter(b=>b.tipo==="Marca")),r||(x=await Se().itemTabelaPreco.where({tipo:"Marca"}).toArray()),x=x.find(b=>b.tabelaMaster===2&&b.idItemTabelaPrecoPai===e.id&&(b.descricao||"").trim()===a),x&&p.push(x)}if(i){let x;r&&(x=r.filter(b=>b.tipo==="Grupo")),r||(x=await Se().itemTabelaPreco.where({tipo:"Grupo"}).toArray()),x=x.find(b=>b.tabelaMaster===2&&b.idItemTabelaPrecoPai===e.id&&(b.descricao||"").trim()===i),x&&p.push(x)}if(n){let x;r&&(x=r.filter(b=>b.tipo==="Subgrupo")),r||(x=await Se().itemTabelaPreco.where({tipo:"Subgrupo"}).toArray()),x=x.find(b=>b.tabelaMaster===2&&b.idItemTabelaPrecoPai===e.id&&(b.descricao||"").trim()===n),x&&p.push(x)}const v=p[p.length-1];return v&&(l=2,u=(100+(v.fatorPercentual||0))/100*(t.valorVenda||0),c=v.maximoDesconto||0,c=c>100?100:c,d=v.maximoDescontoGerente||0,d=d>100?100:d),m&&(u=Zx(u,m,o)),{tabelaMaster:l,valorVenda:lr(u,o),valorVendaMaiorQue:0,quantidadeMaiorQue:0,maximoDesconto:lr(c,o),maximoDescontoGerente:lr(d,o),maximoDescontoMaiorQue:0}}};async function Qge(e){console.log("itemEstoqueMinimo","grava",e);const t={...e.atual},o={...e.original};if(!Object.keys(o||{}).length)await $erpPut().itemEstoqueMinimo.put(t),await $utils.sincronismoEnviar("adicionar","itemEstoqueMinimo",t.id,t);else{const r=$utils.diferencaObjetos(o,t);Object.keys(r).length&&(await $erpUpdate().itemEstoqueMinimo.update(t.id,r),await $utils.sincronismoEnviar("atualizar","itemEstoqueMinimo",t.id,r))}}async function Xge(e){const t={};let o=$erp().itemEstoqueMinimo;if(e!=null&&e.id)return await o.get(e.id);e==null||delete e.id;for(const r of Object.keys(e!=null?e:{}))e[r]!==void 0&&(t[r]=e[r]);return Object.keys(e!=null?e:{}).length>0&&!(Object.keys(t).length>0)?[]:Object.keys(t).length>0?await o.where(t).toArray():await o.toArray()}var Kge={ler:Xge,gravar:Qge};const aP={id:"",idContato:"",idContatoEmpresa:"",idItemTabelaPreco:"",idContatoVendedor:"",idContatoDigitador:"",dataHoraCriacao:"",dataHoraModificacao:"",tela:"",carrinho:{idItem:"",idEnvelope:"",idEnvelopeSegundoPar:"",valorVenda:"",valorVendaSegundoPar:"",tipoPromocao:"",daraHoraEmissao:""},fotoRosto:{idImagem:""},formatoRosto:{tipoRosto:1,rosto:"Redondo"},formatoArmacao:{armacaoDestaque:"",medidasQuadro:{width:"",height:""},medidasRosto:{width:"",height:""},medidasArmacao:{top:"",left:"",width:"",height:""}},armacao:{idItem:""},espelhos:{},pupilometro:{id:"",idImagem:"",medidasAdiadas:!1,tamanhoArmacao:{aro:0,nasal:0},medidas:{tipo:"Presencial",tamanhoArmacao:100,tamanhoArmacaoPx:0,alturaArmacao:0,alturaArmacaoPx:0,olhoDireito:{superior:{left:257,top:462},centroOlho:{left:421,top:549},inferior:{left:540,top:699},bifocalAltura:0},olhoEsquerdo:{superior:{left:950,top:463},centroOlho:{left:784,top:549},inferior:{left:665,top:699},bifocalAltura:0},nariz:{left:0,top:0},dip:{total:0,od:{altura:0},oe:{altura:0}},dnp:{od:0,oe:0},ponte:0,bifocal:!1,bifocalOlhoEsquerdo:0,bifocalOlhoDireito:0,fator:0,diagonal:{p1:{left:0,top:0},p2:{left:0,top:0},distancia:0,distanciapx:0},cartao:{p1:{left:0,top:0},p2:{left:0,top:0},distancia:0,distanciapx:0,tamanho:86.6}}},receita:{idImagem:"",esferico:"",adicao:"",cilindrico:""},materiais:{esferico:-4},laminese:{profissao:"",grupo:{},hobby:{}},anamnese:{trabalho:{profissao:"",outros:"",predominancia:""},direcao:{diurno:"",noturno:""},celular:{diurno:"",noturno:""},lazer:{tv:"",cozinhar:"",leituras:"",academia:"",esportesPerto:"",esportesArLivreDiurnos:"",esportesArLivreNoturno:"",esportesAmbienteFechado:"",esportesRadicais:"",pesca:"",ciclismo:"",observacao:"",incomodo:""},atividades:"",ldc:{usa:"",status:""},solar:{usa:"",graduacao:""},moda:"",telas:"",claridade:"",pausas:""}},xi={espelhos:{},receita:null,rosto:null,pupilometro:null},Yge={},_t=Ue({}),_r={doc:Ue({}),bkp:{}},el={doc:Ue([]),bkp:[]},tl={doc:Ue([]),bkp:[]},ol={doc:Ue([]),bkp:[]},Jge=[{tela:"Contato",descricao:"Dados Cliente"},{tela:"FotoReceita",descricao:"Foto Receita"},{tela:"FormatoRosto",descricao:"Formato Rosto"},{tela:"FormatoArmacao",descricao:"Formato Arma\xE7\xE3o"},{tela:"EscolherArmacao",descricao:"Escolher Arma\xE7\xE3o"},{tela:"TamanhoFoto",descricao:"Pupil\xF4metro"},{tela:"Anamnese",descricao:"Anamnese"},{tela:"Materiais",descricao:"Materiais"}];async function Zge(){_t.value.formatoArmacao.medidasQuadro={width:"",height:""},_t.value.formatoArmacao.medidasRosto={width:"",height:""},_t.value.formatoArmacao.medidasArmacao={top:"",left:"",width:"",height:""},await Km()}function e_e(){return localStorage.getItem("cameraSelecionadaId")}async function t_e(){return new Promise(e=>{navigator.mediaDevices.enumerateDevices().then(t=>{let o=t.filter(r=>r.kind==="videoinput");o=o.map(r=>({label:r.label||`C\xE2mera ${o.length+1}`,deviceId:r.deviceId})),e(o)}).catch(t=>{console.error("Erro ao obter as c\xE2meras:",t),e([])})})}async function o_e(){return new Promise(e=>{const t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","image/*"),t.setAttribute("capture","environment"),t.addEventListener("cancel",o=>{e(null)}),t.addEventListener("change",()=>{const o=t.files;if(FileReader&&o&&o.length){const r=new FileReader;r.onload=async()=>{e(r.result)},r.readAsDataURL(o[0])}}),t.click()})}async function a_e(){return new Promise((e,t)=>{const o=document.createElement("input");o.setAttribute("type","file"),o.onchange=r=>{const a=o.files;if(FileReader&&a&&a.length){const i=new FileReader;i.onload=async()=>{await r_e(i.result),xi.pupilometro=i.result,e(!0)},i.readAsDataURL(a[0])}else e(!1)},o.onabort=r=>{e(!1)},o.click()})}async function r_e(e){try{const t=$utils.uuid();await kh({idImagem:t,imagem:e}),_t.value.pupilometro.idImagem=t,await Km()}catch(t){console.error(t),$q.notifyError(t.message)}}async function i_e(e){return new Promise((t,o)=>{const r=document.createElement("input");r.setAttribute("type","file"),r.onchange=a=>{const i=r.files;if(FileReader&&i&&i.length){const n=new FileReader;n.onload=async()=>{await n_e({idItem:e,imagem:n.result}),xi.espelhos[e]=n.result,t(!0)},n.readAsDataURL(i[0])}else t(!1)},r.onabort=a=>{t(!1)},r.click()})}async function n_e({idItem:e,imagem:t}){try{const o=$utils.uuid();await kh({idImagem:o,imagem:t}),_t.value.espelhos[e]=o,await Km()}catch(o){console.error(o),$q.notifyError(o.message)}}async function s_e(){return new Promise((e,t)=>{const o=document.createElement("input");o.setAttribute("type","file"),o.onchange=r=>{const a=o.files;if(FileReader&&a&&a.length){const i=new FileReader;i.onload=async()=>{await l_e(a[0]),xi.receita=i.result,e(!0)},i.readAsDataURL(a[0])}else e(!1)},o.onabort=r=>{e(!1)},o.click()})}async function l_e(e){try{_t.value.receita.idImagem=$utils.uuid(),await UI({path:"receita.idImagem"}),await kh({idImagem:_t.value.receita.idImagem,imagem:e})}catch(t){console.error(t),$q.notifyError(t.message)}}async function c_e(){return new Promise((e,t)=>{const o=document.createElement("input");o.setAttribute("type","file"),o.onchange=r=>{const a=o.files;if(FileReader&&a&&a.length){const i=new FileReader;i.onload=async()=>{await u_e(a[0]),xi.rosto=i.result,e(!0)},i.readAsDataURL(a[0])}else e(!1)},o.onabort=r=>{e(!1)},o.click()})}async function u_e(e){try{_t.value.fotoRosto.idImagem=$utils.uuid(),await UI({path:"fotoRosto.idImagem"}),await kh({idImagem:_t.value.fotoRosto.idImagem,imagem:e})}catch(t){console.error(t),$q.notifyError(t.message)}}async function rP(e){var g,x;const{idReceita:t,idItem:o,valorVenda:r,descontoItem:a,correcaoDescontoItem:i,segundoPar:n}=e!=null?e:{},s=$utils.dataAtual(),l={},u=await $db.hibrido.le({table:"contato",id:_t.value.idContatoEmpresa}),c=await $db.hibrido.le({table:"item",id:o});let d;if(_t.value.armacao.idItem&&!n&&(d=await $db.hibrido.le({table:"item",id:_t.value.armacao.idItem}),_t.value.idItemTabelaPreco&&(d==null?void 0:d.id))){const b=_t.value.idItemTabelaPreco,_=await $db.hibrido.lista({table:"itemTabelaPreco"}),w=_.find(S=>S.id===b);if(w!=null&&w.id){const S=await $db.itemTabelaPreco.obterValores(w,d,4,_);d.valorVenda=S.valorVenda||0}}l.documento={id:$utils.uuid(),idDocumentoAdicional:t!=null?t:"",tipo:"Envelope",operacao:"Normal",status:"Or\xE7amento",idEmpresa:u.id,descricaoEmpresa:u.nome,numeroDocumentoEmpresa:u.numeroDocumentoNacional,idContato:_r.doc.value.id,descricaoContato:_r.doc.value.nome,idContatoResponsavel:_r.doc.value.id,numeroDocumentoContato:_r.doc.value.numeroDocumentoNacional,dataHoraEmissao:s,documentoTipo:"Venda",subTotal:$utils.arredondar(r-(a*2+i)+((d==null?void 0:d.valorVenda)||0)),totalDocumento:$utils.arredondar(r-(a*2+i)+((d==null?void 0:d.valorVenda)||0)),totalDesconto:0,totalPercentualDesconto:0,idItemTabelaPreco:_t.value.idItemTabelaPreco,idContatoVendedor:_t.value.idContatoVendedor,idContatoDigitador:_t.value.idContatoDigitador,codigoDocumentoOperacao:1},l.documentosItem=[];const f={idItem:c.id,idDocumento:l.documento.id,codigoPlanoContaDestino:139,codigoPlanoContaEstoque:146,dataHoraEmissao:s,descontoItem:0,descontoPercentualItem:0,descontoSubTotal:0,descricaoItem:c.descricao,operacao:"Venda de Mercadoria",operacaoFator:-1,idCfop:"C84EE6D9-546D-435D-BBB3-EFB67D779331",oculos:"",tipoOculos:"",lenteTipo:"Vista",quantidade:1,status:"Or\xE7amento",valorCusto:0,valorCustoMedio:0,valorCustoReposicao:c.valorCustoReposicao,valorCustoUltimo:0,valorItemUltimo:0,alturaMontagemOD:null,alturaMontagemOE:null,diagonal:null,ponte:null,altura:null,largura:null,armacaoMaterial:"",tipoMontagem:""},m={id:$utils.uuid(),idItem:(d==null?void 0:d.id)||"",idDocumento:l.documento.id,dataHoraEmissao:s,codigoPlanoContaDestino:d?139:0,codigoPlanoContaEstoque:d?146:0,descontoItem:0,descontoPercentualItem:0,descontoSubTotal:0,descricaoItem:(d==null?void 0:d.descricao)||"",operacao:"Venda de Mercadoria",operacaoFator:d?-1:0,idCfop:d?"C84EE6D9-546D-435D-BBB3-EFB67D779331":"",oculos:"",tipoOculos:d?"Vista":"",lenteTipo:"",quantidade:1,status:"Or\xE7amento",subTotal:(d==null?void 0:d.valorVenda)||0,tipoItem:"Arma\xE7\xE3o",total:(d==null?void 0:d.valorVenda)||0,valorCusto:0,valorCustoMedio:0,valorCustoReposicao:(d==null?void 0:d.valorCustoReposicao)||0,valorCustoUltimo:0,valorItem:(d==null?void 0:d.valorVenda)||0,valorItemUltimo:0,valorOriginal:(d==null?void 0:d.valorVenda)||0,valorReal:(d==null?void 0:d.valorVenda)||0,valorRealTotal:(d==null?void 0:d.valorVenda)||0,alturaMontagemOD:null,alturaMontagemOE:null,diagonal:(d==null?void 0:d.diagonal)||0,ponte:(d==null?void 0:d.ponte)||0,altura:(d==null?void 0:d.altura)||0,largura:(d==null?void 0:d.largura)||0,armacaoMaterial:(d==null?void 0:d.material)||"",tipoMontagem:(d==null?void 0:d.tipoMontagem)||""},p=$utils.arredondar(r/2),v=$utils.arredondar(r-p);if(!n&&!_t.value.pupilometro.medidasAdiadas){const b={id:_t.value.pupilometro.id,descricao:"Pupil\xF4metro",referencia:`idEnvelope:${l.documento.id}`,json:{foto:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAQAAAAkGDomAAAATklEQVR42u3OMQEAAAgDINc/9Czh4QEJSDuvRVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUPDSAovln7Gzmi7KAAAAAElFTkSuQmCC",fotoOriginal:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAQAAAAkGDomAAAATklEQVR42u3OMQEAAAgDINc/9Czh4QEJSDuvRVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUPDSAovln7Gzmi7KAAAAAElFTkSuQmCC",..._t.value.pupilometro}};try{if(_t.value.pupilometro.idImagem){const w=localStorage.getItem("bancoDeDados"),S=`${$db.arquivo.urlGCP}/${w}/jornada/${_t.value.id.toUpperCase()}/${_t.value.pupilometro.idImagem.toUpperCase()}.png`,M=await(await fetch(S)).blob(),O=await $utils.blobToBase64(M);b.json.foto=O}}catch(w){console.error("Arquivo pupil\xF4metro: ",w)}const _=(x=(g=b==null?void 0:b.json)==null?void 0:g.medidas)==null?void 0:x.dnp;await $db.receita.salvarDnp({idReceita:t,dnp:_}),b.json=JSON.stringify(b.json),l.pupilometro={atual:b},m.largura=_t.value.pupilometro.medidas.tamanhoArmacao,m.ponte=_t.value.pupilometro.medidas.ponte,m.altura=_t.value.pupilometro.medidas.alturaArmacao,m.diagonal=_t.value.pupilometro.medidas.diagonal.distancia,_t.value.pupilometro.medidas.bifocal?(m.alturaMontagemOD=_t.value.pupilometro.medidas.bifocalOlhoDireito,m.alturaMontagemOE=_t.value.pupilometro.medidas.bifocalOlhoEsquerdo):(m.alturaMontagemOD=_t.value.pupilometro.medidas.dip.od.altura,m.alturaMontagemOE=_t.value.pupilometro.medidas.dip.oe.altura)}return l.documentosItem.push({...f,id:$utils.uuid(),tipoItem:"LOE",subTotal:$utils.arredondar(p-a),total:$utils.arredondar(p-a),valorItem:p,valorOriginal:p,valorReal:$utils.arredondar(p-a),valorRealTotal:$utils.arredondar(p-a),descontoItem:a,descontoPercentualItem:$utils.arredondar(a/p*100)}),l.documentosItem.push({...f,id:$utils.uuid(),tipoItem:"LOD",subTotal:$utils.arredondar(v-(a+i)),total:$utils.arredondar(v-(a+i)),valorItem:v,valorOriginal:v,valorReal:$utils.arredondar(v-(a+i)),valorRealTotal:$utils.arredondar(v-(a+i)),descontoItem:a+i,descontoPercentualItem:$utils.arredondar((a+i)/v*100)}),l.documentosItem.push(m),await $db.envelope.gravar({atual:l}),l.documento.id}async function d_e(){const e={id:$utils.uuid(),idEmpresa:_t.value.idContatoEmpresa,idContato:_r.doc.value.id,descricaoContato:_r.doc.value.nome,dataHoraEmissao:"",tipo:"Prescri\xE7\xE3o"},t={idDocumento:e.id,tipoItem:"Prescri\xE7\xE3o"};_t.value.receita.esferico&&(t.esferico=Number(_t.value.receita.esferico)||0),_t.value.receita.adicao&&(t.adicao=Number(_t.value.receita.adicao)||0),_t.value.receita.cilindrico&&(t.cilindrico=Number(_t.value.receita.cilindrico)||0);const o=[],r=["Longe","M\xE9dio","Perto"],a=["Olho Direito","Olho Esquerdo"];for(const i of a)for(const n of r)o.push({id:$utils.uuid(),operacao:i,status:n,...t});await $db.documento.grava({atual:e}),await $utils.processarFilho("documentoItem",[],o);try{if(_t.value.receita.idImagem){const i=localStorage.getItem("bancoDeDados"),n=`${$db.arquivo.urlGCP}/${i}/jornada/${_t.value.id.toUpperCase()}/${_t.value.receita.idImagem.toUpperCase()}.png`,l=await(await fetch(n)).blob(),u=await $utils.blobToBase64(l),c=$utils.uuid();await $db.arquivo.grava({original:{},atual:{arquivo:u,dataCriacao:$utils.dataAtual(),id:c,idTabelaMaster:e.id,nome:`imagem-${c}.png`,tipoArquivo:"receita"}})}}catch(i){console.error("Arquivo receita: ",i)}return e.id}async function eg(e){if(!e)return null;const t=localStorage.getItem("bancoDeDados"),o=`${$db.arquivo.urlGCP}/${t}/jornada/${_t.value.id.toUpperCase()}/${e.toUpperCase()}.png`,r=await fetch(o);if(!r.ok)throw new Error(r.status);const a=await r.blob();return await $utils.blobToBase64(a)}async function f_e(){for(const e of Object.keys(_t.value.espelhos))xi.espelhos[e]=await eg(_t.value.espelhos[e])}async function m_e(e){_t.value=(await $utils.geeksApi({le:{funcao:"5550CA6D-90DF-4DF8-91DD-B2288797F396",id:e}})).data.le,_t.value.idContato&&Uk(_t.value.idContato),$db.jornada.backup=Pr(_t.value);try{const t=await Promise.all([eg(_t.value.receita.idImagem),eg(_t.value.fotoRosto.idImagem),eg(_t.value.pupilometro.idImagem)]);xi.receita=t[0],xi.rosto=t[1],xi.pupilometro=t[2]}catch{throw new Error("GError:N\xE3o foi poss\xEDvel carregar as imagens.")}}async function Uk(e){const t=$utils.geeksApi({contato:{funcao:"7934AE25-B337-43F4-9FC1-842C3486C491",table:"contato",id:e,columns:["id","codigoContato","nome","numeroDocumentoNacional","numeroDocumentoEstadual","email","segmento","sexo","dataAbertura","origemMarketing"]}}),o=$utils.geeksApi({contatoTelefone:{funcao:"FCC75497-9CAD-4D28-AB39-F669142BE8A9",table:"contatoTelefone",where:{idContato:e},columns:["id","idContato","tipoTelefone","telefone","observacao"]}}),r=$utils.geeksApi({contatoEndereco:{funcao:"FCC75497-9CAD-4D28-AB39-F669142BE8A9",table:"contatoEndereco",where:{idContato:e},columns:["id","idContato","grupo","cep","uf","municipio","logradouro","numero","complemento","bairro","pais"]}}),a=$utils.geeksApi({contatoGrupo:{funcao:"FCC75497-9CAD-4D28-AB39-F669142BE8A9",table:"contatoGrupo",where:{idContato:e},columns:["id","idContato","descricao"]}}),[i,n,s,l]=await Promise.all([t,o,r,a]);_r.doc.value=i.data.contato,tl.doc.value=n.data.contatoTelefone,el.doc.value=s.data.contatoEndereco,ol.doc.value=l.data.contatoGrupo,_r.bkp=Pr(i.data.contato),tl.bkp=Pr(n.data.contatoTelefone),el.bkp=Pr(s.data.contatoEndereco),ol.bkp=Pr(l.data.contatoGrupo)}async function p_e(e){try{const t=await d_e(),o={idReceita:t,idItem:e.idItem,valorVenda:e.valorVenda,descontoItem:0,correcaoDescontoItem:0,segundoPar:!1};if(e.tipoPromocao==="parGratis"&&(o.descontoItem=.01),e.idEnvelope=await rP(o),e.tipoPromocao==="parGratis"&&(o.segundoPar=!0,o.descontoItem=$utils.arredondar(e.valorVenda/2-.01)),e.tipoPromocao==="doisPares"){o.segundoPar=!0;const r=$utils.arredondar(e.valorVenda/2),a=$utils.arredondar(e.valorVendaSegundoPar-e.valorVenda),i=$utils.arredondar(r-a/2),n=$utils.arredondar((r-i)*2);o.correcaoDescontoItem=$utils.arredondar(n-a),o.descontoItem=i}o.segundoPar&&(e.idEnvelopeSegundoPar=await rP(o)),_t.value.tela="Envelope",_t.value.carrinho=e,await Km(),localStorage.setItem("idReceita",t),await $router.push({name:"Envelopes",params:{id:e.idEnvelope}})}catch(t){console.error(t)}}async function h_e(e){const{idContatoDigitador:t,idContatoEmpresa:o,idContatoVendedor:r,idItemTabelaPreco:a}=e!=null?e:{};zk(),_t.value.id=$utils.uuid(),_t.value.idContato=$utils.uuid(),_t.value.idContatoDigitador=t!=null?t:"",_t.value.idContatoEmpresa=o!=null?o:"",_t.value.idContatoVendedor=r!=null?r:"",_t.value.idItemTabelaPreco=a!=null?a:"",_r.doc.value.id=_t.value.idContato,_r.doc.value.ativo=!0;const i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAQAAAAkGDomAAAATklEQVR42u3OMQEAAAgDINc/9Czh4QEJSDuvRVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUPDSAovln7Gzmi7KAAAAAElFTkSuQmCC";_t.value.receita.idImagem=$utils.uuid(),xi.receita=i,await $db.jornada.salvarImagem({idImagem:_t.value.receita.idImagem,imagem:i}),_t.value.fotoRosto.idImagem=$utils.uuid(),xi.rosto=i,await $db.jornada.salvarImagem({idImagem:_t.value.fotoRosto.idImagem,imagem:i}),_t.value.pupilometro.idImagem=$utils.uuid(),xi.pupilometro=i,await $db.jornada.salvarImagem({idImagem:_t.value.pupilometro.idImagem,imagem:i});const n=new Date().toISOString();_t.value.dataHoraCriacao=n,_t.value.dataHoraModificacao=n,await $utils.geeksApi({cria:{funcao:"06033066-2C36-4C4C-86EB-DD2130BA8850",json:JSON.stringify(_t.value)}}),$db.jornada.backup=$utils.clonar(_t.value)}async function v_e(){return(await $utils.geeksApi({lerConfiguracoes:{funcao:"501B8396-EB15-41F2-A16F-AAE5F14B7A37"}})).data.lerConfiguracoes}async function g_e(e){const{where:t,limit:o,page:r,sort:a,dir:i}=e,n=await $db.permissao.objeto("Diretiva_Venda/Fatura_OutrasLojas_VerTodos")||!1;return(await $utils.geeksApi({listaJornadas:{funcao:"94140F7B-A44B-48EC-8765-95FC6ECADF8A",where:t,limit:o,page:r,sort:a,dir:i,permissaoVendasOutrasLojas:n}})).data.listaJornadas}function zk(){_t.value=Pr(aP),$db.jornada.backup=Pr(aP),_r.doc.value={},tl.doc.value=[],el.doc.value=[],ol.doc.value=[],tl.bkp=[],_r.bkp={},el.bkp=[],ol.bkp=[],xi.espelhos={},xi.receita=null,xi.rosto=null,xi.pupilometro=null}async function __e(){try{if((_r.doc.value.nome||"").trim()==="")return;const e={contato:_r.doc.value,telefone:tl.doc.value,endereco:el.doc.value,grupo:ol.doc.value},t={};Object.keys(_r.bkp).length>0&&(t.contato=_r.bkp),tl.bkp.length>0&&(t.telefone=tl.bkp),el.bkp.length>0&&(t.endereco=el.bkp),ol.bkp.length>0&&(t.grupo=ol.bkp),await $db.contato.gravar({atual:e,original:t}),_r.bkp=Pr(_r.doc.value),tl.bkp=Pr(tl.doc.value),el.bkp=Pr(el.doc.value),ol.bkp=Pr(ol.doc.value)}catch{$q.notifyError("N\xE3o foi poss\xEDvel salvar os dados. Poss\xEDvel falha de rede!")}}async function Km(){try{const e=Hk($db.jornada.backup,_t.value);Object.keys(e).length&&(e.dataHoraModificacao=new Date().toISOString(),await $utils.geeksApi({grava:{funcao:"A3E428D5-2EAF-4F52-8522-A497CFF7FC53",data:{id:_t.value.id,dados:e}}}),_t.value.dataHoraModificacao=e.dataHoraModificacao,$db.jornada.backup=$utils.clonar(_t.value))}catch{$q.notifyError("N\xE3o foi poss\xEDvel salvar os dados. Poss\xEDvel falha de rede!")}}async function UI(){return await Km()}async function b_e(){await $utils.geeksApi({remove:{funcao:"541FBDD8-6353-45F1-A051-7A8F46787CD0",id:_t.value.id}})}async function y_e(e){await $utils.geeksApi({salvarConfiguracoes:{funcao:"5F6BB9D7-85F0-42A2-975F-1607DBA3DD91",json:JSON.stringify(e)}})}async function kh({idImagem:e,imagem:t}){try{let o;t instanceof Blob?o=await $utils.blobToBase64(t):o=t;const r={arquivo:o,id:e,nome:`imagem-${e}.png`,tipoArquivo:"jornada",idTabelaMaster:_t.value.id};await $db.arquivo.grava({original:{},atual:r})}catch(o){throw new Error(`Falha ao processar e gravar a foto: ${o}`)}}async function x_e(){const e=await $db.hibrido.le({table:"contato",id:_r.doc.value.id});e!=null&&e.id||await this.remover()}const C_e={b64Images:xi,doc:_t,contato:_r,contatoEndereco:el,contatoTelefone:tl,contatoGrupo:ol,itens:Yge,menu:Jge,anexarFotoEspelho:i_e,anexarFotoPupilometro:a_e,anexarFotoReceita:s_e,anexarFotoRosto:c_e,carrega:m_e,carregaContatoCompleto:Uk,carregaImagensEspelho:f_e,comprar:p_e,cria:h_e,grava:Km,gravaContatoCompleto:__e,lerConfiguracoes:v_e,leListaCompleta:g_e,lerCameraSelecionadaId:e_e,limpar:zk,limparMedidasArmacao:Zge,obterCamerasDisponiveis:t_e,obterImagemCameraInput:o_e,remover:b_e,removerJornadaVazia:x_e,salvarCampo:UI,salvarConfiguracoes:y_e,salvarImagem:kh},Hk=function(e,t){if(!t||Object.prototype.toString.call(t)!=="[object Object]")return e;var o={},r,a=function(n,s){if(n.length!==s.length)return!1;for(var l=0;l<n.length;l++)if(n[l]!==s[l])return!1;return!0},i=function(n,s,l){var u=Object.prototype.toString.call(n),c=Object.prototype.toString.call(s);if(c==="[object Undefined]"){o[l]=null;return}if(u!==c){o[l]=s;return}if(u==="[object Object]"){var d=Hk(n,s);Object.keys(d).length>0&&(o[l]=d);return}if(u==="[object Array]"){a(n,s)||(o[l]=s);return}u==="[object Function]"?n.toString()!==s.toString()&&(o[l]=s):n!==s&&(o[l]=s)};for(r in e)e.hasOwnProperty(r)&&i(e[r],t[r],r);for(r in t)t.hasOwnProperty(r)&&!e[r]&&e[r]!==t[r]&&(o[r]=t[r]);return o},jk=Ue(""),zI=Ue("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAQAAAAkGDomAAAATklEQVR42u3OMQEAAAgDINc/9Czh4QEJSDuvRVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUPDSAovln7Gzmi7KAAAAAElFTkSuQmCC"),Gk=Ue(1),Wk=Ue("Redondo");function w_e(){return localStorage.getItem("cameraSelecionadaId")}async function E_e(){return new Promise(e=>{navigator.mediaDevices.enumerateDevices().then(t=>{let o=t.filter(r=>r.kind==="videoinput");o=o.map(r=>({label:r.label||`C\xE2mera ${o.length+1}`,deviceId:r.deviceId})),e(o)}).catch(t=>{console.error("Erro ao obter as c\xE2meras:",t),e([])})})}async function S_e(){return new Promise(e=>{const t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","image/*"),t.setAttribute("capture","environment"),t.addEventListener("cancel",o=>{e(null)}),t.addEventListener("change",()=>{const o=t.files;if(FileReader&&o&&o.length){const r=new FileReader;r.onload=async()=>{e(r.result)},r.readAsDataURL(o[0])}}),t.click()})}async function I_e(){return new Promise((e,t)=>{const o=document.createElement("input");o.setAttribute("type","file"),o.onchange=r=>{const a=o.files;if(FileReader&&a&&a.length){const i=new FileReader;i.onload=async()=>{zI.value=i.result,e(!0)},i.readAsDataURL(a[0])}else e(!1)},o.onabort=r=>{e(!1)},o.click()})}function A_e(){jk.value="",zI.value="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAQAAAAkGDomAAAATklEQVR42u3OMQEAAAgDINc/9Czh4QEJSDuvRVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUPDSAovln7Gzmi7KAAAAAElFTkSuQmCC",Gk.value=1,Wk.value="Redondo"}const T_e={tela:jk,fotoRosto:zI,tipoRosto:Gk,rosto:Wk,lerCameraSelecionadaId:w_e,obterCamerasDisponiveis:E_e,obterImagemCameraInput:S_e,anexarFotoRosto:I_e,limpar:A_e};async function D_e(e){var u,c;const{atuais:t,originais:o,operacaoFatorDestino:r,operacaoFatorOrigem:a}=e!=null?e:{},i=[],n=[],s=[],l=await $db.configuracoes.le({nome:"venda.kit.pcp"});for(const d of t!=null?t:[]){const f=o==null?void 0:o.find(g=>g.documento.id===d.documento.id),m=d.documentosItem.some(g=>g.dataHoraFinalizado),p=(u=f==null?void 0:f.documentosItem)==null?void 0:u.some(g=>g.dataHoraFinalizado);let v;if(d.documento.idDocumentoAdicional){const g=await $db.hibrido.le({table:"documento",id:d.documento.idDocumentoAdicional});g&&(n.push(g),i.push({...g,idDocumentoAdicional:""})),d.documento.idDocumentoAdicional=""}if(v=l.find(g=>g.idEmpresa===d.documento.idEmpresa),!(v&&!~[1,2].indexOf(Number(v.valor)))&&(v||(v=l.find(g=>!g.idEmpresa&&~[1,2].indexOf(Number(g.valor)))),!!v&&m&&!p)){const g=$utils.uuid(),x=Number(v.valor),b=$utils.dataAtual();let _,w="",S,D;x===1&&(_="Digita\xE7\xE3o"),x===2&&(_="Finalizado",w=b),d.documento.idDocumentoAdicional=g,S=d.documentosItem.reduce((M,O)=>O.operacaoFator===a?M+O.quantidade*O.valorCustoMedio:M,0),D=d.documentosItem.reduce((M,O)=>O.operacaoFator===r?M+O.quantidade:M,0),i.push({id:g,documentoId:d.documento.documentoId,idDocumentoAdicional:d.documento.id,idEmpresa:d.documento.idEmpresa,descricaoEmpresa:d.documento.descricaoEmpresa,idContato:d.documento.idContato,descricaoContato:d.documento.descricaoContato,tipo:"Produ\xE7\xE3o",operacao:"Manipula\xE7\xE3o",status:_,observacao:(c=d.documentosItem.find(M=>M.operacaoFator===r).observacao)!=null?c:"",dataHoraEmissao:b,dataHoraFinalizado:w,totalDocumento:S,subTotal:S});for(const M of d.documentosItem){let O=0,T=0,I=0,N=0;M.operacaoFator===r&&(O=1,T=S/D,I=S,N=S),M.operacaoFator===a&&(O=-1,T=M.valorCustoMedio,I=M.quantidade*M.valorCustoMedio,N=M.quantidade*M.valorCustoMedio),s.push({id:$utils.uuid(),idDocumento:g,idDocumentoAdicional:d.documento.id,idItem:M.idItem,operacao:"Manipula\xE7\xE3o",operacaoFator:O,status:_,descricaoItem:M.descricaoItem,tipoItem:M.tipoItem,dataHoraEmissao:b,dataHoraFinalizado:w,quantidade:M.quantidade,quantidadeRealizado:M.quantidade,valorItem:T,subTotal:I,total:N,valorCustoMedio:T})}}}await $utils.processarFilho("documento",n,i),await $utils.processarFilho("documentoItem",[],s)}async function O_e(e){var r;const{atuais:t,originais:o}=e!=null?e:{};for(const a of t!=null?t:[]){const i=o==null?void 0:o.find(n=>n.documento.id===a.documento.id);if(!a.documento.idDocumentoAdicional&&((r=i==null?void 0:i.documento)==null?void 0:r.idDocumentoAdicional)){let n,s;n=await $db.hibrido.le({table:"documento",id:i.documento.idDocumentoAdicional}),n!=null&&n.id&&(s=await $db.hibrido.lista({table:"documentoItem",where:{idDocumento:n.id}}),await $erpDelete().documento.delete(n.id),await $utils.sincronismoEnviar("remover","documento",n.id));for(const l of s!=null?s:[])await $erpDelete().documentoItem.delete(l.id),await $utils.sincronismoEnviar("remover","documentoItem",l.id)}}}async function P_e(e){const{atuais:t,originais:o}=e!=null?e:{},r=[],a=[];let i=[],n=[];for(const s of t!=null?t:[])r.push(s.documento),i=i.concat(s.documentosItem);for(const s of o!=null?o:[])a.push(s.documento),n=n.concat(s.documentosItem);await O_e(e),await D_e(e),await $utils.processarFilho("documento",a,r),await $utils.processarFilho("documentoItem",n,i)}var F_e={salvar:P_e};async function M_e(e){const t=$utils.clonarV2(e);t.id=$utils.uuid(),t.dataHora=t.dataHora||$utils.dataAtual(),await $utils.sincronismoEnviar("adicionar","log",t.id,t)}async function Qk(e){const{documentoTipo:t,documentoId:o}=e!=null?e:{};return(await $utils.geeksApi({listaLogs:{funcao:"82C3CB17-84DA-42B0-B625-7546259CCAC7",documentoTipo:t,documentoId:o}})).data.listaLogs}async function N_e(e){const{documentoTipo:t,documentoId:o}=e!=null?e:{};try{$q.loading.show();const r=await Qk({documentoTipo:t,documentoId:o});$g.modalLog.dialog.msgs=r,$g.modalLog.dialog.mostrar=!0}catch(r){$q.notifyError(r.message)}finally{$q.loading.hide()}}var k_e={gravar:M_e,ler:Qk,show:N_e};const ed={};async function R_e(){var o;const e=new Date;if((ed==null?void 0:ed.timeout)&&!(e>new Date(ed.timeout)))return;const t=await $erp()._ncm.toArray();for(const r of t)r.json=JSON.parse((o=r.json)!=null?o:null);ed.ncm=t,ed.timeout=e.setSeconds(e.getSeconds()+3)}var V_e={nomeTabela:"_ncm",filtrosTabela:["ncm"],async le(e={}){if(Wt.log(this.nomeTabela,"le",e),"id"in e)return e.id?await Se()[this.nomeTabela].get(e.id)||{}:{};let t={};for(const o of this.filtrosTabela)if(o in e)if(![null,void 0].includes(e[o]))t[o]=e[o];else return[];return Object.keys(t).length?Se()[this.nomeTabela].where(t).toArray():Se()[this.nomeTabela].toArray()},ler:async(e={})=>{if(e.id){const o=await Se()._ncm.get(e.id);return o||{}}let t=null;for(const o of Object.keys(e).filter(r=>r!=="id")){if(~[void 0,null].indexOf(e[o]))continue;if(t){t=t.filter(a=>a[o]===e[o]);continue}const r={};r[o]=e[o],t=await Se()._ncm.where(r).toArray()}return t||await Se()._ncm.toArray()},gravar:async e=>{if(e=$utils.compactarObjeto(e),!Object.keys(e.original||{}).length)await $erpPut()._ncm.put(e.atual),await $utils.sincronismoEnviar("adicionar","_ncm",e.atual.id,e.atual);else{const t=$utils.diferencaObjetos(e.original,e.atual);Object.keys(t).length&&(await $erpUpdate()._ncm.update(e.original.id,t),await $utils.sincronismoEnviar("atualizar","_ncm",e.original.id,t))}},remover:async e=>{await $erpDelete()._ncm.delete(e.id),await $utils.sincronismoEnviar("remover","_ncm",e.id)},async ncmST(e={}){var t;try{const{ncm:o,idItem:r,ufDestinatario:a}=e;let i;if(r){const s=await $erp().item.get(r),l=s==null?void 0:s.ncm,u=JSON.parse((t=s.json)!=null?t:null)||{},c=u==null?void 0:u.impostoST;if(l&&c)return!!~c.indexOf(a)}await R_e(),i=ed.ncm.find(s=>s.ncm===o);let n=!!(i!=null&&i.st);return i!=null&&i.json&&(n=!!~i.json.indexOf(a)),n}catch(o){return console.log(o.message),!1}}},B_e={nomeTabela:"nfeIbpt",filtrosTabela:["codigo","idContato"],async le(e={}){if(Wt.log(this.nomeTabela,"le",e),"id"in e)return e.id?await Se()[this.nomeTabela].get(e.id)||{}:{};let t={};for(const o of this.filtrosTabela)if(o in e)if(![null,void 0].includes(e[o]))t[o]=e[o];else return[];return Object.keys(t).length?Se()[this.nomeTabela].where(t).toArray():Se()[this.nomeTabela].toArray()},async grava(e){Wt.log(this.nomeTabela,"grava",e);const t=cn(e.original||{},e.atual);Object.keys(e.original||{}).length?Object.keys(t).length&&(await Se()[this.nomeTabela].update(e.atual.id,t),await ut("atualizar",this.nomeTabela,e.atual.id,t)):(await Se()[this.nomeTabela].put(t),await ut("adicionar",this.nomeTabela,t.id,t))},async atualiza(e,t){Wt.log(this.nomeTabela,"atualiza",t);const o={id:Kt(),codigo:Number(t.Codigo),ex:String(t.EX),tipo:Number(t.Tipo),descricao:String(t.Descricao),nacionalFederal:String(t.Nacional),importadosFederal:String(t.Importado),estadual:String(t.Estadual),municipal:String(t.Municipal),vigenciaInicio:uC(t.VigenciaInicio),vigenciaFim:uC(t.VigenciaFim),chave:String(t.Chave),versao:String(t.Versao),fonte:String(t.Fonte),idContato:e};let r={};const a=await this.le({codigo:Number(o.codigo),idContato:e});for(const i in a)i==="0"?(o.id=a[i].id,r=a[i]):await Se()[this.nomeTabela].delete(a[i].id);return this.grava({atual:o,original:r})}};const q_e={numero:null,numeroLote:"",inscricaoMunicipal:"",quantidadeRps:1,identificacaoRps:{numero:"",serie:"",tipo:"1"},dataEmissao:"",dataHoraCriacao:"",naturezaOperacao:"",optanteSimplesNacional:"",incentivadorCultural:"",status:"1",regimeEspecialTributacao:"",protocoloRetorno:"",servico:{valores:{valorServicos:0,valorPis:0,valorCofins:0,valorInss:0,valorIr:0,valorCsll:0,issRetido:"2",valorIss:0,baseCalculo:0,aliquota:0,valorLiquidoNfse:0,descontoIncondicionado:0,descontoCondicionado:0},itemListaServico:"",codigoCnae:"",codigoNbs:"",codigoTributacaoMunicipio:"",discriminacao:"",municipioPrestacaoServico:""},prestador:{documento:"",razaoSocial:"",inscricaoMunicipal:""},tomador:{documento:"",razaoSocial:"",endereco:{rua:"",numero:"",bairro:"",complemento:"",cidade:"",estado:"",cep:""},telefone:""}};async function L_e(e){var s,l;const t=e==null?void 0:e.aguardarRetorno;let o,r=(s=e==null?void 0:e.nfse)==null?void 0:s.situacao,a,i,n;if(a=$utils.clonarV2(e==null?void 0:e.nfse),a.tomador.endereco.cep=(l=a.tomador.endereco.cep)==null?void 0:l.replace(/\D+/g,""),Object.keys(a.servico.valores).forEach(u=>{a.servico.valores[u]=$utils.arredondar(a.servico.valores[u])}),n=!0,!n){const u=await $db.configuracoes.leValorComFiltroEmpresa("nfse.motor");n=(u==null?void 0:u.toLowerCase())==="plugnotas"}if(n){if(console.log("emitindo via plugNotas"),!(a!=null&&a.protocoloRetorno))try{await $db.configuracoes.leValorComFiltroEmpresa("nfse.zerarIss")==="sim"&&a.tomador.endereco.cidade!==a.servico.municipioPrestacaoServico&&(a.servico.valores.valorIss=0);const c=await $api.plugnotas.nfse.montarJsonParaPlugNotas(a);o=await $api.plugnotas.nfse.transmitir(c),a.mensagemDeRetorno=o==null?void 0:o.mensagem,a.protocoloRetorno=o==null?void 0:o.protocolo,a.error=o==null?void 0:o.error,r="Protocolada"}catch(u){throw console.log(u.message),new Error("db.nfse.sincronizarLote: N\xE3o foi poss\xEDvel estabelecer comunica\xE7\xE3o com o servidor")}return a!=null&&a.protocoloRetorno&&(i=await $api.plugnotas.nfse.consultar(a.protocoloRetorno),a.plugNotasConsulta=i,(i==null?void 0:i.situacao)==="CONCLUIDO"&&(r="Enviada",a.numero=i.numeroNfse,a.numeroLote=i.lote,a.identificacaoRps.numero=i.numero,a.xml=i.xml,a.mensagemDeRetorno=null),(i==null?void 0:i.situacao)==="PROCESSANDO"&&(r="Protocolada"),(i==null?void 0:i.situacao)==="REJEITADO"&&(a.mensagemDeRetorno=i==null?void 0:i.mensagem,a.protocoloRetorno=null,r="Rascunho")),{nfse:a,situacao:r}}if(!n){try{let u=$utils.clonarV2(a);if(~["07660198000189","09492015000199"].indexOf(u.prestador.documento)){const{baseCalculo:d,aliquota:f}=u.servico.valores;let m=d*(f/100);u.servico.valores.valorIss=$utils.arredondaAbnt5891(m)}u.tomador.documento===""&&(delete u.tomador,u.tomador={documento:"00000000000"});const c=new Headers;c.append("Content-Type","application/json; charset=utf-8"),o=await fetch("https://api.b15.com.br/integradorjs/nfse/emitir",{method:"POST",headers:c,body:JSON.stringify({nfse:u,aguardarRetorno:t})}),o=await o.json()}catch(u){throw console.log(u.message),new Error("db.nfse.sincronizarLote: N\xE3o foi poss\xEDvel estabelecer comunica\xE7\xE3o com o servidor")}return a.xml=o==null?void 0:o.xml,a.protocoloRetorno=a.protocoloRetorno||(o==null?void 0:o.protocoloRetorno),a.mensagemDeRetorno=null,r="Protocolada",o!=null&&o.numeroDaNfse&&(a.numero=o.numeroDaNfse,a.link=o.linkNfse,r="Enviada"),(o==null?void 0:o.codigo)!=="E178"&&!(o!=null&&o.numeroDaNfse)&&(o==null?void 0:o.mensagemDeRetorno)&&(o==null?void 0:o.mensagemDeRetorno)!=="Tempo excedido."&&Number(o==null?void 0:o.codigo)!==99999&&(a.mensagemDeRetorno=o.mensagemDeRetorno,a.protocoloRetorno=null,r="Rascunho"),((o==null?void 0:o.mensagemDeRetorno)==="Tempo excedido."||Number(o==null?void 0:o.codigo)===99999)&&(a.mensagemDeRetorno=o.mensagemDeRetorno),{nfse:a,situacao:r}}}function $_e(e){var n,s,l,u,c,d,f,m,p,v,g,x,b,_,w;const t=[],o=new DOMParser,r=new XMLSerializer,a=o.parseFromString(e,"text/xml");let i;if(i=o.parseFromString(e,"text/xml"),i.getElementsByTagName("ListaNfse")[0],!i.getElementsByTagName("ListaNfse")[0])throw new Error("db.nfse.sincronizarLote: Pedido n\xE3o encontrado");i.getElementsByTagName("ListaNfse")[0].textContent="",i=r.serializeToString(i);for(const S of Array.from(a.getElementsByTagName("CompNfse"))){let D,M,O,T,I;I=o.parseFromString(i,"text/xml"),I.getElementsByTagName("ListaNfse")[0].appendChild(S),I=r.serializeToString(I);const N={identificacaoPrestador:"",identificacaoTomador:"",dataEmissaoRps:"",numero:"",numeroRps:"",serie:"",xmlStr:I};O=(s=(n=S.getElementsByTagName("tc:IdentificacaoPrestador")[0])==null?void 0:n.getElementsByTagName("tc:Cpf")[0])==null?void 0:s.textContent,T=(u=(l=S.getElementsByTagName("tc:IdentificacaoPrestador")[0])==null?void 0:l.getElementsByTagName("tc:Cnpj")[0])==null?void 0:u.textContent,D=(d=(c=S.getElementsByTagName("tc:IdentificacaoTomador")[0])==null?void 0:c.getElementsByTagName("tc:Cpf")[0])==null?void 0:d.textContent,M=(m=(f=S.getElementsByTagName("tc:IdentificacaoTomador")[0])==null?void 0:f.getElementsByTagName("tc:Cnpj")[0])==null?void 0:m.textContent,N.identificacaoPrestador=O!=null?O:T,N.identificacaoTomador=D!=null?D:M,N.dataEmissaoRps=(p=S.getElementsByTagName("tc:DataEmissaoRps")[0])==null?void 0:p.textContent,N.numero=Number((g=(v=S.getElementsByTagName("tc:InfNfse")[0])==null?void 0:v.getElementsByTagName("tc:Numero")[0])==null?void 0:g.textContent),N.numeroRps=Number((b=(x=S.getElementsByTagName("tc:IdentificacaoRps")[0])==null?void 0:x.getElementsByTagName("tc:Numero")[0])==null?void 0:b.textContent),N.serie=Number((w=(_=S.getElementsByTagName("tc:IdentificacaoRps")[0])==null?void 0:_.getElementsByTagName("tc:Serie")[0])==null?void 0:w.textContent),!Object.values(N).some(P=>!P)&&t.push(N)}return t}async function U_e(e,t){var o,r;for(const{docFiscal:a}of e)try{const i=(a==null?void 0:a.rps)||((r=JSON.parse((o=a.json)!=null?o:null))==null?void 0:r.rps);t(i,"Solicitando URL impress\xE3o..."),await Xk(a.id)}catch{console.log("N\xE3o foi poss\xEDvel obter URL de impress\xE3o: ",a)}}async function Xk(e){var a,i,n,s;let t,o,r;if(t=await $db.hibrido.le({table:"documentoFiscalEletronico",id:e}),o=$utils.clonarV2(t),!t.id)throw new Error("db.nfse.sincronizarLote: N\xE3o foi poss\xEDvel obter o documento fiscal");if(r=(t==null?void 0:t.rps)||((i=JSON.parse((a=t.json)!=null?a:null))==null?void 0:i.rps),!r)throw new Error("db.nfse.sincronizarLote: Dados de RPS n\xE3o informados");if((n=r.plugNotasConsulta)!=null&&n.pdf){if(/^data:application\/pdf;base64,.+$/.test(r.pdf))return r.pdf;const l=await $api.plugnotas.nfse.imprimirNFSe(r.plugNotasConsulta.id);r.pdf=l;const u={...t,json:JSON.stringify({rps:r})};return await $db.documentoFiscalEletronico.grava({atual:u,original:t}),l}if(!((s=r.plugNotasConsulta)!=null&&s.pdf)){if(console.log("API Geeks"),r!=null&&r.link)return r.link;let l,u,c;if(l=new Headers,l.append("Content-Type","application/json; charset=utf-8"),u=await fetch("https://api.b15.com.br/integradorjs/nfse/obter-link",{method:"POST",headers:l,body:JSON.stringify(r)}),c=await u.json(),!(c!=null&&c.url))throw new Error("db.nfse.sincronizarLote: URL n\xE3o encontrada");return r.link=c.url,o.json=JSON.stringify({rps:r}),await $db.documentoFiscalEletronico.grava({atual:o,original:t}),console.log(c.url),c.url}}async function z_e(e){var o,r;const t=[];e.forEach(a=>{a.dataEmissaoRps=new Date(a.dataEmissaoRps)});for(const a of await $db.hibrido.lista({table:"documentoFiscalEletronico",where:{tipo:"NFSe",situacao:"Protocolada"}})){const i=(a==null?void 0:a.rps)||((r=JSON.parse((o=a.json)!=null?o:null))==null?void 0:r.rps);let n,s;s=new Date(i==null?void 0:i.dataEmissao),s=new Date(s.setSeconds(s.getSeconds(),0)),n=e.find(l=>{var u,c;return l.identificacaoPrestador===((u=i==null?void 0:i.prestador)==null?void 0:u.documento)&&l.identificacaoTomador===((c=i==null?void 0:i.tomador)==null?void 0:c.documento)&&l.dataEmissaoRps>=s&&l.dataEmissaoRps<=s&&Number(l.numeroRps)===Number(i==null?void 0:i.identificacaoRps.numero)&&Number(l.serie)===Number(i==null?void 0:i.identificacaoRps.serie)}),n&&t.push({docFiscal:a,dadosXml:n})}return t.sort((a,i)=>{var l,u,c,d,f,m,p,v,g,x;const n=(f=(d=((l=a.docFiscal)==null?void 0:l.rps)||((c=JSON.parse((u=a.docFiscal.json)!=null?u:null))==null?void 0:c.rps))==null?void 0:d.identificacaoRps)==null?void 0:f.numero,s=(x=(g=((m=i.docFiscal)==null?void 0:m.rps)||((v=JSON.parse((p=i.docFiscal.json)!=null?p:null))==null?void 0:v.rps))==null?void 0:g.identificacaoRps)==null?void 0:x.numero;return n>s?1:-1}),t}async function H_e(e,t){var o,r;for(const{docFiscal:a,dadosXml:i}of e){const n=$utils.clonarV2(a),s=(await $db.hibrido.lista({table:"documentoFiscalEletronicoXml",where:{idDocumentoFiscalEletronico:a.id}}))[0],l=$utils.clonarV2(s),u=(a==null?void 0:a.rps)||((r=JSON.parse((o=a.json)!=null?o:null))==null?void 0:r.rps);t(u,"Sincronizando..."),u.numero=i.numero,u.xml=i.xmlStr,u.mensagemDeRetorno="",a.json=JSON.stringify({rps:u}),a.situacao="Enviada",s.situacao="Enviada",s.xmlEnvio=i.xmlStr,await $db.documentoFiscalEletronico.grava({atual:a,original:n}),await $db.documentoFiscalEletronicoXml.grava({atual:s,original:l})}}async function j_e(e,t){var l,u,c,d;e=e!=null?e:{};const o=new Headers,r={inscricaoMunicipal:(l=e.inscricaoMunicipal)==null?void 0:l.replace(/\D+/g,""),cnpj:(u=e.cnpj)==null?void 0:u.replace(/\D+/g,""),periodo:{inicial:new Date(new Date((c=e==null?void 0:e.periodo)==null?void 0:c.inicial).toDateString()),final:new Date(new Date((d=e==null?void 0:e.periodo)==null?void 0:d.final).toDateString())}};let a,i;if(!r.inscricaoMunicipal)throw new Error("db.nfse.sincronizarLote: Empresa sem inscri\xE7\xE3o municipal");if(!r.cnpj)throw new Error("db.nfse.sincronizarLote: Empresa sem CNPJ");if(!(r.periodo.inicial<=r.periodo.final))throw new Error("db.nfse.sincronizarLote: Per\xEDodo incorreto");if(o.append("Content-Type","application/json; charset=utf-8"),a=await fetch("https://api.b15.com.br/integradorjs/nfse/sincronizar-lote",{method:"POST",headers:o,body:JSON.stringify({...r,periodo:{inicial:r.periodo.inicial.toISOString().replace(/T.+$/,""),final:r.periodo.final.toISOString().replace(/T.+$/,"")}})}),i=await a.json(),i!=null&&i.msgErro)throw new Error(`db.nfse.sincronizarLote: ${i.msgErro}`);if(!(i!=null&&i.xml))throw new Error("db.nfse.sincronizarLote: Pedido n\xE3o retornado");const n=$_e(i.xml),s=await z_e(n);await H_e(s,t),await U_e(s,t)}var G_e={emitir:L_e,sincronizarLote:j_e,solicitarURLImpressao:Xk,modelo:q_e};async function W_e(e){var t;try{const{nota:o,elogios:r,sugestoes:a,observacao:i}=e!=null?e:{};let n,s,l,u;n=JSON.parse((t=localStorage.getItem("clienteSistema"))!=null?t:null),s=JSON.stringify($db.usuario.obterDispositivo()),l=localStorage.getItem("bancoDeDados"),u=$db.usuario.logado.cpf.replace(/\D/g,"");let c={funcao:"A55FF73B-A806-4852-AE59-0E03AE16CCDD",id:$utils.uuid(),bancoDados:l,idSistema:n.idSistema,sistema:n.sistema,cpfUsuario:u,dataHora:new Date,nota:o,elogios:r,sugestoes:a,observacao:i,idDispositivoCliente:localStorage.getItem("dispositivoCliente"),dispositivo:s};await $utils.geeksApi({nps:c})}catch(o){console.error(o)}}var Q_e={gravar:W_e};async function X_e({os:e,itensOs:t}){let o=0;for(const r of t)o+=r.subTotal;return e.subTotal=$utils.arredondar(o),e.totalDocumento=e.subTotal,{os:e}}async function K_e({os:e,itemOs:t,campoAlterado:o}){o==="descontoPercentualItem"&&(t.descontoItem=$utils.arredondar(t.descontoPercentualItem/100*t.valorItem)),o==="descontoItem"&&(t.descontoPercentualItem=$utils.arredondar(t.descontoItem/t.valorItem*100)),o==="valorItem"&&(t.valorItem<t.valorOriginal&&(t.valorItem=t.valorOriginal),t.descontoItem=0,t.descontoPercentualItem=0,t.subTotal=t.valorItem);let r=t.valorItem-t.descontoItem;return $utils.arredondar(r)>$utils.arredondar(t.valorItem)&&(r=t.valorItem,t.descontoPercentualItem=t.descontoItem=0),t.subTotal=$utils.arredondar(r*t.quantidade),t.total=t.subTotal,t.valorReal=$utils.arredondar(r),t.valorRealTotal=t.total,{itemOs:t}}const Y_e={id:"",tipo:"Ordem de Servi\xE7o",operacao:"Normal",status:"",idEmpresa:"",descricaoEmpresa:"",numeroDocumentoEmpresa:"",idContato:"",descricaoContato:"",numeroDocumentoContato:"",idContatoResponsavel:"",dataHoraEmissao:"",dataHoraRealizado:"",dataHoraPrevisto:"",documentoId:"",documentoTipo:"",subTotal:0,totalDocumento:0};var J_e={vazio:Y_e,async leAdmOSOnline({entregueInicio:e,entregueFim:t,empresas:o}){let r=[];for(const a of o||[])r.push(`'${a}'`);return r=r.join(","),Do(`
      select
        os.id,
        os.codigoDocumento,
        os.status,
        os.descricao,
        os.dataHoraEmissao,
        os.dataHoraPrevisto,
        os.dataHoraFinalizado,
        os.dataHoraRetorno,
        os.codigoContato,
        os.idEmpresa,
        os.codigoEmpresa,
        os.descricaoEmpresa,
        os.idContatoResponsavel,
        os.codigoContatoResponsavel,
        responsavel.nome nomeResponsavel,
        os.descricaoContato nomeCliente,
        venda.numero numeroVenda,
        venda.id idVenda,
        venda.codigoContatoVendedor,
        venda.idContatoVendedor,
        vendedor.nome nomeVendedor,
        os.numero numeroOS
      from documento os
        left join documento venda on(
          venda.codigoDocumento = os.documentoCodigo
        )
        left join contato responsavel on(
          (responsavel.codigoContato = os.codigoContatoResponsavel)
          or (responsavel.id = os.idContatoResponsavel)
        )
        left join contato vendedor on(
          (vendedor.codigoContato = venda.CodigoContatoVendedor)
          or (vendedor.id = venda.idContatoVendedor)
        )
      where os.tipo='Ordem de Servi\xE7o'
        ${r?`and os.idEmpresa in (${r})`:""}
        and os.status not in ('Or\xE7amento', 'Cancelado', 'N\xE3o aprovado', '')
        and (os.status <> 'Entregue' or cast(os.dataHoraFinalizado as date) between ${Bp(e)} and ${Bp(t)})
    `)},async trocaStatusOnline(e){return Do(`set nocount on
      update documento set
          status = ${Bt(e.statusNovo)},
          dataHoraFinalizado = case ${Bt(e.statusNovo)} when 'Entregue' then getdate() else null end
        where codigoDocumento = ${io(e.codigoDocumento)}
      insert into documentoStatus (codigoDocumento, codigoDocumentoItem, codigoContatoResponsavel, operacao,
        statusOriginal, statusFinalizado, dataHoraEmissao, cpfUsuario, observacao)
      values(${io(e.codigoDocumento)}, NULL, ${io(e.codigoContatoResponsavel)}, 'Mudan\xE7a status OS',
        ${Bt(e.statusAtual)}, ${Bt(e.statusNovo)}, getdate(), ${Bt(e.cpfUsuario)}, ${Bt(e.observacao,"")})`)},calculaTotal:X_e,calculaTotalItem:K_e};const Z_e=[{codigo:132,nome:"Afeganistao"},{codigo:7560,nome:"Africa Do Sul"},{codigo:175,nome:"Albania, Republica Da"},{codigo:230,nome:"Alemanha"},{codigo:370,nome:"Andorra"},{codigo:400,nome:"Angola"},{codigo:418,nome:"Anguilla"},{codigo:434,nome:"Antigua E Barbuda"},{codigo:477,nome:"Antilhas Holandesas"},{codigo:531,nome:"Arabia Saudita"},{codigo:590,nome:"Argelia"},{codigo:639,nome:"Argentina"},{codigo:647,nome:"Armenia, Republica Da"},{codigo:655,nome:"Aruba"},{codigo:698,nome:"Australia"},{codigo:728,nome:"Austria"},{codigo:736,nome:"Azerbaijao, Republica Do"},{codigo:779,nome:"Bahamas, Ilhas"},{codigo:809,nome:"Bahrein, Ilhas"},{codigo:9950,nome:"Bancos Centrais"},{codigo:817,nome:"Bangladesh"},{codigo:833,nome:"Barbados"},{codigo:850,nome:"Belarus, Republica Da"},{codigo:876,nome:"Belgica"},{codigo:884,nome:"Belize"},{codigo:2291,nome:"Benin"},{codigo:906,nome:"Bermudas"},{codigo:973,nome:"Bolivia"},{codigo:981,nome:"Bosnia-herzegovina (republica Da)"},{codigo:1015,nome:"Botsuana"},{codigo:1058,nome:"Brasil"},{codigo:1082,nome:"Brunei"},{codigo:1112,nome:"Bulgaria, Republica Da"},{codigo:310,nome:"Burkina Faso"},{codigo:1155,nome:"Burundi"},{codigo:1198,nome:"Butao"},{codigo:1279,nome:"Cabo Verde, Republica De"},{codigo:1457,nome:"Camaroes"},{codigo:1414,nome:"Camboja"},{codigo:1490,nome:"Canada"},{codigo:1511,nome:"Canarias, Ilhas"},{codigo:1546,nome:"Catar"},{codigo:1376,nome:"Cayman, Ilhas"},{codigo:1538,nome:"Cazaquistao, Republica Do"},{codigo:7889,nome:"Chade"},{codigo:1589,nome:"Chile"},{codigo:1600,nome:"China, Republica Popular"},{codigo:1635,nome:"Chipre"},{codigo:5118,nome:"Christmas,ilha (navidad)"},{codigo:7412,nome:"Cingapura"},{codigo:1651,nome:"Cocos(keeling),ilhas"},{codigo:1694,nome:"Colombia"},{codigo:1732,nome:"Comores, Ilhas"},{codigo:1775,nome:"Congo"},{codigo:8885,nome:"Congo, Republica Democratica Do"},{codigo:1830,nome:"Cook, Ilhas"},{codigo:1872,nome:"Coreia, Rep.pop.democratica"},{codigo:1902,nome:"Coreia, Republica Da"},{codigo:1937,nome:"Costa Do Marfim"},{codigo:1961,nome:"Costa Rica"},{codigo:1988,nome:"Coveite"},{codigo:1953,nome:"Croacia (republica Da)"},{codigo:1996,nome:"Cuba"},{codigo:2321,nome:"Dinamarca"},{codigo:7838,nome:"Djibuti"},{codigo:2356,nome:"Dominica,ilha"},{codigo:2402,nome:"Egito"},{codigo:6874,nome:"El Salvador"},{codigo:2445,nome:"Emirados Arabes Unidos"},{codigo:2399,nome:"Equador"},{codigo:2437,nome:"Eritreia"},{codigo:2470,nome:"Eslovaca, Republica"},{codigo:2461,nome:"Eslovenia, Republica Da"},{codigo:2453,nome:"Espanha"},{codigo:2496,nome:"Estados Unidos"},{codigo:2518,nome:"Estonia, Republica Da"},{codigo:2534,nome:"Etiopia"},{codigo:2550,nome:"Falkland (ilhas Malvinas)"},{codigo:2593,nome:"Feroe, Ilhas"},{codigo:8702,nome:"Fiji"},{codigo:2674,nome:"Filipinas"},{codigo:2712,nome:"Finlandia"},{codigo:1619,nome:"Formosa (taiwan)"},{codigo:2755,nome:"Franca"},{codigo:2810,nome:"Gabao"},{codigo:2852,nome:"Gambia"},{codigo:2895,nome:"Gana"},{codigo:2917,nome:"Georgia, Republica Da"},{codigo:2933,nome:"Gibraltar"},{codigo:2976,nome:"Granada"},{codigo:3018,nome:"Grecia"},{codigo:3050,nome:"Groenlandia"},{codigo:3093,nome:"Guadalupe"},{codigo:3131,nome:"Guam"},{codigo:3174,nome:"Guatemala"},{codigo:1504,nome:"Guernsey, Ilha Do Canal (inclui Alderney E Sark)"},{codigo:3379,nome:"Guiana"},{codigo:3255,nome:"Guiana Francesa"},{codigo:3298,nome:"Guine"},{codigo:3344,nome:"Guine-bissau"},{codigo:3310,nome:"Guine-equatorial"},{codigo:3417,nome:"Haiti"},{codigo:3450,nome:"Honduras"},{codigo:3514,nome:"Hong Kong"},{codigo:3557,nome:"Hungria, Republica Da"},{codigo:3573,nome:"Iemen"},{codigo:3611,nome:"India"},{codigo:3654,nome:"Indonesia"},{codigo:3727,nome:"Ira, Republica Islamica Do"},{codigo:3697,nome:"Iraque"},{codigo:3751,nome:"Irlanda"},{codigo:3794,nome:"Islandia"},{codigo:3832,nome:"Israel"},{codigo:3867,nome:"Italia"},{codigo:3913,nome:"Jamaica"},{codigo:3999,nome:"Japao"},{codigo:1508,nome:"Jersey, Ilha Do Canal"},{codigo:3964,nome:"Johnston, Ilhas"},{codigo:4030,nome:"Jordania"},{codigo:4111,nome:"Kiribati"},{codigo:4200,nome:"Laos, Rep.pop.democr.do"},{codigo:4260,nome:"Lesoto"},{codigo:4278,nome:"Letonia, Republica Da"},{codigo:4316,nome:"Libano"},{codigo:4340,nome:"Liberia"},{codigo:4383,nome:"Libia"},{codigo:4405,nome:"Liechtenstein"},{codigo:4421,nome:"Lituania, Republica Da"},{codigo:4456,nome:"Luxemburgo"},{codigo:4472,nome:"Macau"},{codigo:4499,nome:"Macedonia, Ant.rep.iugoslava"},{codigo:4502,nome:"Madagascar"},{codigo:4525,nome:"Madeira, Ilha Da"},{codigo:4553,nome:"Malasia"},{codigo:4588,nome:"Malavi"},{codigo:4618,nome:"Maldivas"},{codigo:4642,nome:"Mali"},{codigo:4677,nome:"Malta"},{codigo:3595,nome:"Man, Ilha De"},{codigo:4723,nome:"Marianas Do Norte"},{codigo:4740,nome:"Marrocos"},{codigo:4766,nome:"Marshall,ilhas"},{codigo:4774,nome:"Martinica"},{codigo:4855,nome:"Mauricio"},{codigo:4880,nome:"Mauritania"},{codigo:4936,nome:"Mexico"},{codigo:930,nome:"Mianmar (birmania)"},{codigo:4995,nome:"Micronesia"},{codigo:4901,nome:"Midway, Ilhas"},{codigo:5053,nome:"Mocambique"},{codigo:4944,nome:"Moldavia, Republica Da"},{codigo:4952,nome:"Monaco"},{codigo:4979,nome:"Mongolia"},{codigo:4985,nome:"Montenegro"},{codigo:5010,nome:"Montserrat,ilhas"},{codigo:5070,nome:"Namibia"},{codigo:5088,nome:"Nauru"},{codigo:5177,nome:"Nepal"},{codigo:5215,nome:"Nicaragua"},{codigo:5258,nome:"Niger"},{codigo:5282,nome:"Nigeria"},{codigo:5312,nome:"Niue,ilha"},{codigo:5355,nome:"Norfolk,ilha"},{codigo:5380,nome:"Noruega"},{codigo:5428,nome:"Nova Caledonia"},{codigo:5487,nome:"Nova Zelandia"},{codigo:5568,nome:"Oma"},{codigo:9970,nome:"Organizacoes Internacionais"},{codigo:5665,nome:"Pacifico,ilhas Do (possessao Dos Eua)"},{codigo:5738,nome:"Paises Baixos (holanda)"},{codigo:5754,nome:"Palau"},{codigo:5800,nome:"Panama"},{codigo:5452,nome:"Papua Nova Guine"},{codigo:5762,nome:"Paquistao"},{codigo:5860,nome:"Paraguai"},{codigo:5894,nome:"Peru"},{codigo:5932,nome:"Pitcairn,ilha"},{codigo:5991,nome:"Polinesia Francesa"},{codigo:6033,nome:"Polonia, Republica Da"},{codigo:6114,nome:"Porto Rico"},{codigo:6076,nome:"Portugal"},{codigo:9903,nome:"Provisao De Navios E Aeronaves"},{codigo:6238,nome:"Quenia"},{codigo:6254,nome:"Quirguiz, Republica"},{codigo:6289,nome:"Reino Unido"},{codigo:6408,nome:"Republica Centro-africana"},{codigo:6475,nome:"Republica Dominicana"},{codigo:6602,nome:"Reuniao, Ilha"},{codigo:6700,nome:"Romenia"},{codigo:6750,nome:"Ruanda"},{codigo:6769,nome:"Russia, Federacao Da"},{codigo:6858,nome:"Saara Ocidental"},{codigo:6781,nome:"Saint Kitts E Nevis"},{codigo:6777,nome:"Salomao, Ilhas"},{codigo:6904,nome:"Samoa"},{codigo:6912,nome:"Samoa Americana"},{codigo:6971,nome:"San Marino"},{codigo:7102,nome:"Santa Helena"},{codigo:7153,nome:"Santa Lucia"},{codigo:6955,nome:"Sao Cristovao E Neves,ilhas"},{codigo:7005,nome:"Sao Pedro E Miquelon"},{codigo:7200,nome:"Sao Tome E Principe, Ilhas"},{codigo:7056,nome:"Sao Vicente E Granadinas"},{codigo:7285,nome:"Senegal"},{codigo:7358,nome:"Serra Leoa"},{codigo:7370,nome:"Servia"},{codigo:7315,nome:"Seychelles"},{codigo:7447,nome:"Siria, Republica Arabe Da"},{codigo:7480,nome:"Somalia"},{codigo:7501,nome:"Sri Lanka"},{codigo:7544,nome:"Suazilandia"},{codigo:7595,nome:"Sudao"},{codigo:7641,nome:"Suecia"},{codigo:7676,nome:"Suica"},{codigo:7706,nome:"Suriname"},{codigo:7722,nome:"Tadjiquistao, Republica Do"},{codigo:7765,nome:"Tailandia"},{codigo:7803,nome:"Tanzania, Rep.unida Da"},{codigo:7919,nome:"Tcheca, Republica"},{codigo:7820,nome:"Territorio Brit.oc.indico"},{codigo:7951,nome:"Timor Leste"},{codigo:8001,nome:"Togo"},{codigo:8109,nome:"Tonga"},{codigo:8052,nome:"Toquelau,ilhas"},{codigo:8150,nome:"Trinidad E Tobago"},{codigo:8206,nome:"Tunisia"},{codigo:8230,nome:"Turcas E Caicos,ilhas"},{codigo:8249,nome:"Turcomenistao, Republica Do"},{codigo:8273,nome:"Turquia"},{codigo:8281,nome:"Tuvalu"},{codigo:8311,nome:"Ucrania"},{codigo:8338,nome:"Uganda"},{codigo:8451,nome:"Uruguai"},{codigo:8478,nome:"Uzbequistao, Republica Do"},{codigo:5517,nome:"Vanuatu"},{codigo:8486,nome:"Vaticano, Est.da Cidade Do"},{codigo:8508,nome:"Venezuela"},{codigo:8583,nome:"Vietna"},{codigo:8630,nome:"Virgens,ilhas (britanicas)"},{codigo:8664,nome:"Virgens,ilhas (e.u.a.)"},{codigo:8737,nome:"Wake, Ilha"},{codigo:8907,nome:"Zambia"},{codigo:6653,nome:"Zimbabue"},{codigo:8958,nome:"Zona Do Canal Do Panama"}];var ebe={lista:Z_e};const tbe={grava:async()=>{},le:async e=>{if(e=e||{},"id"in e)return e.id?await Se().perfilContabilItem.get(e.id)||{}:{};let t={};"idPerfilContabil"in e&&e.idPerfilContabil&&(t.idPerfilContabil=e.idPerfilContabil),"idCfop"in e&&e.idCfop&&(t.idCfop=e.idCfop);let o=Se().perfilContabilItem;return Object.keys(t).length&&(o=o.where(t)),e.and&&(o=o.filter(r=>{for(const a in e.and)if(r[a]!==e.and[a])return!1;return!0})),await o.toArray()||[]}},Xg={foto:"",fotoOriginal:"",medidas:{},calcularDistanciasCartao:function(){let e=Xg.medidas;e.cartao.distanciapx=Math.hypot(Math.abs(e.cartao.p2.left-e.cartao.p1.left),Math.abs(e.cartao.p1.top-e.cartao.p2.top)),e.fator=e.cartao.distanciapx/e.cartao.tamanho,e.dip.total=Math.hypot(Math.abs(e.olhoDireito.centroOlho.left-e.olhoEsquerdo.centroOlho.left),Math.abs(e.olhoDireito.centroOlho.top-e.olhoEsquerdo.centroOlho.top))/e.fator;const t=(e.olhoDireito.centroOlho.top+e.olhoEsquerdo.centroOlho.top)/2;e.dnp.od=Math.hypot(Math.abs(e.olhoDireito.centroOlho.left-e.nariz.left),Math.abs(t-e.olhoDireito.centroOlho.top))/e.fator,e.dnp.oe=Math.hypot(Math.abs(e.olhoEsquerdo.centroOlho.left-e.nariz.left),Math.abs(t-e.olhoEsquerdo.centroOlho.top))/e.fator},calcularDistancias:function(){let e=Xg.medidas;const t=Math.hypot(Math.abs(e.olhoDireito.superior.left-e.olhoEsquerdo.superior.left),Math.abs(e.olhoDireito.superior.top-e.olhoEsquerdo.superior.top))/e.tamanhoArmacao;e.fator=t,e.tamanhoArmacaoPx=e.tamanhoArmacao*t,e.dip.total=Math.hypot(Math.abs(e.olhoDireito.centroOlho.left-e.olhoEsquerdo.centroOlho.left),Math.abs(e.olhoDireito.centroOlho.top-e.olhoEsquerdo.centroOlho.top))/t,e.dip.od.altura=(e.olhoDireito.inferior.top-e.olhoDireito.centroOlho.top)/t,e.dip.oe.altura=(e.olhoEsquerdo.inferior.top-e.olhoEsquerdo.centroOlho.top)/t,e.dnp.od=(e.tamanhoArmacaoPx/2-(e.olhoDireito.centroOlho.left-e.olhoDireito.superior.left))/t,e.dnp.oe=(e.tamanhoArmacaoPx/2-(e.olhoEsquerdo.superior.left-e.olhoEsquerdo.centroOlho.left))/t,e.ponte=(e.olhoEsquerdo.inferior.left-e.olhoDireito.inferior.left)/t,e.bifocalOlhoEsquerdo=e.olhoEsquerdo.bifocalAltura/t,e.bifocalOlhoDireito=e.olhoDireito.bifocalAltura/t,e.diagonal.distanciapx=Math.hypot(Math.abs(e.diagonal.p2.left-e.diagonal.p1.left),Math.abs(e.diagonal.p1.top-e.diagonal.p2.top)),e.diagonal.distancia=e.diagonal.distanciapx/t,e.alturaArmacaoPx=(e.olhoDireito.inferior.top-e.olhoDireito.superior.top+(e.olhoEsquerdo.inferior.top-e.olhoEsquerdo.superior.top))/2,e.alturaArmacao=e.alturaArmacaoPx/t},ler:async e=>{var c,d,f,m,p;const t=$utils.tratamentoCompletoString((c=e==null?void 0:e.termoBusca)!=null?c:""),o=(d=e==null?void 0:e.recordsPerPage)!=null?d:25,r=(f=e==null?void 0:e.page)!=null?f:1,a=(r-1)*o,i=r*o,n=$erp().json.where({descricao:"Pupil\xF4metro"});let s=[],l,u;if(t){const v=t.split(" ");await n.each(x=>{delete x.json,s.push(x)});let g=s.length;for(let x=0;x<g;x++){const b=s[x],_=/^idEnvelope:/.test(b.referencia)?(m=b.referencia)==null?void 0:m.replace(/^idEnvelope:/,""):null;let w=/^idContato:/.test(b.referencia)?(p=b.referencia)==null?void 0:p.replace(/^idContato:/,""):null,S,D,M;if(!_&&!w){s.splice(x,1),x--,g--;continue}if(_){if(S=await $db.hibrido.le({table:"documento",id:_}),!(S!=null&&S.idContato)){s.splice(x,1),x--,g--;continue}w=S.idContato}if(D=(await $db.contato.ler({filtros:{id:w}})).data,M=D[0],!(M!=null&&M.nome)){s.splice(x,1),x--,g--;continue}const O=$utils.tratamentoCompletoString(M.nome);for(const T of v)if(!~O.search(T)){s.splice(x,1),x--,g--;break}}l=Math.floor(s.length/o)+(s.length%o>0?1:0),u=s.length,s.sort((x,b)=>!x.dataCriacao||new Date(x.dataCriacao)>new Date(b.dataCriacao)?-1:1),s=s.slice(a,i),s=await $erp().json.where("id").anyOf(s.map(x=>x.id)).toArray()}if(!t){const v=await n.count();s=await n.offset(o*(r-1)).limit(o).toArray(),l=Math.floor(v/o)+(v%o>0?1:0),u=v}return{result:s,totalPages:l,totalRecords:u}},async leFoto({id:e,tipoFoto:t}){const o=localStorage.getItem("bancoDeDados");try{const r=await $db.arquivo.le({name:`${o}/pupilometro/${e}/${e}_${t}`});return r.type==="text/html"?void 0:URL.createObjectURL(r)}catch(r){console.error("Erro ao ler foto online",r)}try{const r=await $db.arquivo.le({id:e});return URL.createObjectURL(r)}catch(r){console.error("Erro ao ler foto offline",r)}},async gravaFoto({base64:e,idPupilometro:t,tipoFoto:o}){const r=e.substring(11,e.indexOf(";base64"));await $db.arquivo.grava({original:{},atual:{arquivo:e,dataCriacao:$utils.dataAtual(),id:`${t}_${o}`,idTabelaMaster:t,nome:`${t}_${o}.${r}`,tipoArquivo:"pupilometro"}})},leListaCompleta:async e=>{var s,l;const{where:t,limit:o,page:r,sort:a,dir:i}=e,n=await $utils.geeksApi({listaPupilometro:{funcao:"53A62883-A918-496D-9AA4-972B983045F4",where:t,limit:o,page:r,sort:a,dir:i}});return(l=(s=n==null?void 0:n.data)==null?void 0:s.listaPupilometro)!=null?l:[]},limpar:function(){this.foto="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAQAAAAkGDomAAAATklEQVR42u3OMQEAAAgDINc/9Czh4QEJSDuvRVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUPDSAovln7Gzmi7KAAAAAElFTkSuQmCC",this.fotoOriginal="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAQAAAAkGDomAAAATklEQVR42u3OMQEAAAgDINc/9Czh4QEJSDuvRVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUPDSAovln7Gzmi7KAAAAAElFTkSuQmCC",this.medidas={tipo:"",tamanhoArmacao:100,tamanhoArmacaoPx:0,alturaArmacao:0,alturaArmacaoPx:0,olhoDireito:{superior:{left:257,top:462},centroOlho:{left:421,top:549},inferior:{left:540,top:699},bifocalAltura:0},olhoEsquerdo:{superior:{left:950,top:463},centroOlho:{left:784,top:549},inferior:{left:665,top:699},bifocalAltura:0},nariz:{left:0,top:0},dip:{total:0,od:{altura:0},oe:{altura:0}},dnp:{od:0,oe:0},ponte:0,bifocal:!1,bifocalOlhoEsquerdo:0,bifocalOlhoDireito:0,fator:0,diagonal:{p1:{left:0,top:0},p2:{left:0,top:0},distancia:0,distanciapx:0},cartao:{p1:{left:0,top:0},p2:{left:0,top:0},distancia:0,distanciapx:0,tamanho:86.6}}},obterImagemCameraInput:async function(){return new Promise(e=>{const t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","image/*"),t.setAttribute("capture","environment"),t.addEventListener("cancel",o=>{e(null)}),t.addEventListener("change",()=>{const o=t.files;if(FileReader&&o&&o.length){const r=new FileReader;r.onload=async()=>{e(r.result)},r.readAsDataURL(o[0])}}),t.click()})}};Xg.limpar();const jc={desempenhoGeeksApi:{consolidado:{quantidadeChamadas:0,tempoTotal:0,tempoMedio:0,tamanhoTotal:0,tamanhoMedio:0,errosComunicacao:0,qualidadeSinal:2},parciais:{}}};function obe(){let e=0,t=0,o=0,r=0;const a=Xo.formatDate(Xo.subtractFromDate(new Date,{minutes:5}),"YYYY-MM-DDTHH:mm");for(const s in jc.desempenhoGeeksApi.parciais)if(s<a)delete jc.desempenhoGeeksApi.parciais[s];else{const l=jc.desempenhoGeeksApi.parciais[s];e+=l.quantidadeChamadas,t+=l.tempoTotal,o+=l.tamanhoTotal,r+=l.errosComunicacao}const i=t/e,n=i<200?4:i<1e3?3:i<3e3?2:1;jc.desempenhoGeeksApi.consolidado={quantidadeChamadas:e,tempoTotal:t,tempoMedio:i,tamanhoTotal:o,tamanhoMedio:o/e,velocidade:o/t,errosComunicacao:r,qualidadeSinal:n},jc.modoSelecionado==="automatico"&&(n===1?set("mode","local"):set("mode","remoto"))}function abe({horario:e,tempo:t,tamanho:o,erroComunicacao:r}){const a=Xo.formatDate(e,"YYYY-MM-DDTHH:mm");let{quantidadeChamadas:i=0,tempoTotal:n=0,tamanhoTotal:s=0,errosComunicacao:l=0}=jc.desempenhoGeeksApi.parciais[a]||{};i++,n+=t,s+=o,l+=r,jc.desempenhoGeeksApi.parciais[a]={quantidadeChamadas:i,tempoTotal:n,tamanhoTotal:s,errosComunicacao:l},obe()}var rbe={contabilizarQualidadeSinal:abe,desempenhoGeeksApi:jc.desempenhoGeeksApi};async function ibe({idReceita:e,dnp:t}){if(!e)return;const o=await $db.hibrido.lista({table:"documentoItem",where:{idDocumento:e}});for(const r of o){let a=0;r.operacao==="Olho Esquerdo"&&(a=$utils.arredondar(Number(t==null?void 0:t.oe)||0)),r.operacao==="Olho Direito"&&(a=$utils.arredondar(Number(t==null?void 0:t.od)||0)),a!==r.di&&(await $erpUpdate().documentoItem.update(r.id,{di:a}),await $utils.sincronismoEnviar("atualizar","documentoItem",r.id,{di:a}))}}async function nbe(e){var r;const{idDocumento:t}=e!=null?e:{};let o;if(!t)throw new Error("id da receita n\xE3o fornecido");return o=await $erp().json.where({descricao:"Optometria",referencia:`documento: ${t}`}).toArray(),(r=o==null?void 0:o[0])!=null?r:{}}async function sbe(e){const{original:t,atual:o,idDocumento:r}=e!=null?e:{};if(!Object.keys(t||{}).length)o.id=$utils.uuid(),o.descricao="Optometria",o.referencia=`documento: ${r}`,await $erpPut().json.put(o),await $utils.sincronismoEnviar("adicionar","json",o.id,o);else{let a;o.dataModificacao=$utils.dataAtual(),a=$utils.diferencaObjetos(t,o),Object.keys(a).length&&(await $erpUpdate().json.update(o.id,a),await $utils.sincronismoEnviar("atualizar","json",o.id,a))}}const lbe={obterOptometria:nbe,gravarOptometria:sbe,salvarDnp:ibe,grava:async e=>{e.dadosNovos={documentoItem:[]},e.dadosNovos.documento={id:e.id,idEmpresa:e.idEmpresa,dataHoraEmissao:e.data,dataHoraFinalizado:e.validade,observacao:e.observacoes,tipo:"Prescri\xE7\xE3o",idContato:e.paciente.id,descricaoContato:e.paciente.nome},e.dadosNovos.documentoContato={id:e.medico.idDocumentoContato,idContato:e.medico.id,idDocumento:e.id,descricao:"Medico"};{let o=e.prescricao||{},r=[];r.push(((o.dioptria||{}).od||{}).longe||{}),r.push(((o.dioptria||{}).od||{}).medio||{}),r.push(((o.dioptria||{}).od||{}).perto||{}),r.push(((o.dioptria||{}).oe||{}).longe||{}),r.push(((o.dioptria||{}).oe||{}).medio||{}),r.push(((o.dioptria||{}).oe||{}).perto||{});const a=r.find(m=>m.status==="Longe"&&m.operacao==="Olho Direito"),i=r.find(m=>m.status==="Longe"&&m.operacao==="Olho Esquerdo"),n=!!(a.cilindrico||a.dnp||a.eixo||a.esferico||i.cilindrico||i.dnp||i.eixo||i.esferico),s=r.find(m=>m.status==="Medio"&&m.operacao==="Olho Direito"),l=r.find(m=>m.status==="Medio"&&m.operacao==="Olho Esquerdo"),u=!!(s.cilindrico||s.dnp||s.eixo||s.esferico||s.adicao||l.cilindrico||l.dnp||l.eixo||l.esferico||l.adicao),c=r.find(m=>m.status==="Perto"&&m.operacao==="Olho Direito"),d=r.find(m=>m.status==="Perto"&&m.operacao==="Olho Esquerdo"),f=!!(c.cilindrico||c.dnp||c.eixo||c.esferico||d.cilindrico||d.dnp||d.eixo||d.esferico);n||(a.base="",i.base="",a.prisma=null,i.prisma=null),u||(s.base="",l.base="",s.prisma=null,l.prisma=null,s.cilindrico=null,l.cilindrico=null,s.eixo=null,l.eixo=null),f||(c.base="",d.base="",c.prisma=null,d.prisma=null,c.cilindrico=null,d.cilindrico=null,c.eixo=null,d.eixo=null),n&&u&&(s.cilindrico=a.cilindrico,l.cilindrico=i.cilindrico,s.eixo=a.eixo,l.eixo=i.eixo),n&&f&&(c.cilindrico=a.cilindrico,d.cilindrico=i.cilindrico,c.eixo=a.eixo,d.eixo=i.eixo),n&&(a.prisma=o.prisma.od.valor,a.base=o.prisma.od.base,i.prisma=o.prisma.oe.valor,i.base=o.prisma.oe.base),u&&(s.prisma=o.prisma.od.valor,s.base=o.prisma.od.base,l.prisma=o.prisma.oe.valor,l.base=o.prisma.oe.base),f&&(c.prisma=o.prisma.od.valor,c.base=o.prisma.od.base,d.prisma=o.prisma.oe.valor,d.base=o.prisma.oe.base);for(const m of r){let p={};p.id=m.id,p.idDocumento=e.id,p.tipoItem="Prescri\xE7\xE3o",p.operacao=m.operacao,p.status=m.status,p.di=m.dnp,p.adicao=m.adicao,p.esferico=m.esferico,p.cilindrico=m.cilindrico,p.eixo=m.eixo,p.prisma=m.prisma,p.base=m.base,e.dadosNovos.documentoItem.push(p)}}let t=Tn(e);if(t.dadosOriginais||(t.dadosOriginais={}),t.dadosOriginais.documentoContato=t.dadosOriginais.documentoContato?[t.dadosOriginais.documentoContato]:[],t.dadosOriginais.documentoItem=t.dadosOriginais.documentoItem?t.dadosOriginais.documentoItem:[],t.dadosOriginais.documento=t.dadosOriginais.documento?t.dadosOriginais.documento:{},t.dadosOriginais.documentoContato=t.dadosOriginais.documentoContato.filter(o=>o.id),t.dadosNovos.documentoContato=t.dadosNovos.documentoContato?[t.dadosNovos.documentoContato]:[],await lo("documentoContato",t.dadosOriginais.documentoContato,t.dadosNovos.documentoContato),await lo("documentoItem",t.dadosOriginais.documentoItem,t.dadosNovos.documentoItem,{mantemNull:!0}),!Object.keys(t.dadosOriginais.documento||{}).length)await $erpPut().documento.put(t.dadosNovos.documento),await ut("adicionar","documento",t.dadosNovos.documento.id,t.dadosNovos.documento);else{const o=cn(t.dadosOriginais.documento,t.dadosNovos.documento,{mantemNull:!0});Object.keys(o).length&&(await $erpUpdate().documento.update(t.dadosNovos.documento.id,o),await ut("atualizar","documento",t.dadosNovos.documento.id,o))}return e},exclui:async e=>{const t=await $db.hibrido.le({table:"documento",id:e}),o=await $db.hibrido.lista({table:"documentoContato",where:{idDocumento:t.id}});for(const a of o)await $erpDelete().documentoContato.delete(a.id),await ut("remover","documentoContato",a.id);const r=await $db.hibrido.lista({table:"documentoItem",where:{idDocumento:t.id}});for(const a of r)await $erpDelete().documentoItem.delete(a.id),await ut("remover","documentoItem",a.id);await $erpDelete().documento.delete(t.id),await ut("remover","documento",t.id)},le:async e=>{const t=e.id,o=e.idContato,r=e.descricaoContato,a={id:t,idEmpresa:"",paciente:{id:o!=null?o:$db.contato.selecionado.id,nome:r!=null?r:$db.contato.selecionado.nome},medico:{id:"",nome:"",idDocumentoContato:Kt()},data:"",validade:"",observacoes:"",dadosOriginais:{}};let i={},n={},s={},l={},u={},c={};const d=await $db.hibrido.le({table:"documento",id:t});if(a.dadosOriginais={documento:d},d.id){a.idEmpresa=d.idEmpresa,a.data=d.dataHoraEmissao,a.validade=d.dataHoraFinalizado,a.observacoes=d.observacao,a.paciente={id:d.idContato||"",nome:d.descricaoContato||""};const g=(await $db.hibrido.lista({table:"documentoContato",where:{idDocumento:a.id},whereFilter:{descricao:"Medico"}}))[0]||{};a.dadosOriginais.documentoContato=g;const x=await Se().contato.get(g.idContato||"")||{};a.medico={idDocumentoContato:g.id||Kt(),id:x.id||"",nome:x.nome||""},a.prescricao=await $db.hibrido.lista({table:"documentoItem",where:{idDocumento:a.id,tipoItem:"Prescri\xE7\xE3o"}}),a.dadosOriginais.documentoItem=a.prescricao||[],i=a.prescricao.filter(b=>b.operacao==="Olho Direito"&&b.status==="Longe")[0]||{},n=a.prescricao.filter(b=>b.operacao==="Olho Direito"&&b.status==="Medio")[0]||{},s=a.prescricao.filter(b=>b.operacao==="Olho Direito"&&b.status==="Perto")[0]||{},l=a.prescricao.filter(b=>b.operacao==="Olho Esquerdo"&&b.status==="Longe")[0]||{},u=a.prescricao.filter(b=>b.operacao==="Olho Esquerdo"&&b.status==="Medio")[0]||{},c=a.prescricao.filter(b=>b.operacao==="Olho Esquerdo"&&b.status==="Perto")[0]||{}}let f=zt(i.prisma||n.prisma||s.prisma),m=i.base||n.base||s.base||"",p=zt(l.prisma||u.prisma||c.prisma),v=l.base||u.base||c.base||"";return a.prescricao={dioptria:{od:{longe:{cilindrico:zt(i.cilindrico),dnp:zt(i.di),eixo:zt(i.eixo),esferico:zt(i.esferico),id:i.id||Kt(),operacao:"Olho Direito",status:"Longe"},medio:{cilindrico:zt(n.cilindrico),eixo:zt(n.eixo),adicao:zt(n.adicao),dnp:zt(n.di),esferico:zt(n.esferico),id:n.id||Kt(),operacao:"Olho Direito",status:"Medio"},perto:{adicao:zt(s.adicao),cilindrico:zt(s.cilindrico),dnp:zt(s.di),eixo:zt(s.eixo),esferico:zt(s.esferico),id:s.id||Kt(),operacao:"Olho Direito",status:"Perto"}},oe:{longe:{cilindrico:zt(l.cilindrico),dnp:zt(l.di),eixo:zt(l.eixo),esferico:zt(l.esferico),id:l.id||Kt(),operacao:"Olho Esquerdo",status:"Longe"},medio:{cilindrico:zt(u.cilindrico),eixo:zt(u.eixo),adicao:zt(u.adicao),dnp:zt(u.di),esferico:zt(u.esferico),id:u.id||Kt(),operacao:"Olho Esquerdo",status:"Medio"},perto:{adicao:zt(c.adicao),cilindrico:zt(c.cilindrico),dnp:zt(c.di),eixo:zt(c.eixo),esferico:zt(c.esferico),id:c.id||Kt(),operacao:"Olho Esquerdo",status:"Perto"}}},prisma:{od:{base:m,valor:f},oe:{base:v,valor:p}}},a},async leListaCompleta(e){if($db.hibrido.isOnline()){const{where:t,limit:o,page:r,sort:a,dir:i}=e;return(await $utils.geeksApi({listaReceitas:{funcao:"F78F3D09-7114-45FD-94C2-BAA2C8B3D06F",where:t,limit:o,page:r,sort:a,dir:i}})).data.listaReceitas.data}else{const t=await $db.contato.leFilhos(e.where.idContato)||[];t.push({id:e.where.idContato});let o=[];for(const r of t){const a=await $db.hibrido.lista({table:"documento",where:{tipo:"Prescri\xE7\xE3o",idContato:r.id}});o=o.concat(a)}for(const r of o){const a=(await $db.hibrido.lista({table:"documentoContato",where:{idDocumento:r.id},whereFilter:{descricao:"Medico"}}))[0]||{},i=await Se().contato.get(a.idContato||"")||{},n=await $db.hibrido.lista({table:"documentoItem",where:{idDocumento:r.id,tipoItem:"Prescri\xE7\xE3o"}});r.envelopes=await $db.hibrido.lista({table:"documento",where:{idDocumentoAdicional:r.id},columns:["id","tipo","dataHoraEmissao"]}),r.medico={idDocumentoContato:a.id,idContato:i.id,nome:i.nome},r.prescricao=n}return o}},montaReceita(e){const{medico:t,prescricao:o,envelopes:r}=e,a={id:e.id,idEmpresa:e.idEmpresa,paciente:{id:e.idContato||"",nome:e.descricaoContato||""},medico:{idDocumentoContato:t.idDocumentoContato||Kt(),id:t.idContato||"",nome:t.nome||""},envelopes:r,data:e.dataHoraEmissao,validade:e.dataHoraFinalizado,observacoes:e.observacao,dadosOriginais:{documento:e,documentoContato:t,documentoItem:o||[]}},i=o.filter(v=>v.operacao==="Olho Direito"&&v.status==="Longe")[0]||{},n=o.filter(v=>v.operacao==="Olho Direito"&&v.status==="Medio")[0]||{},s=o.filter(v=>v.operacao==="Olho Direito"&&v.status==="Perto")[0]||{},l=o.filter(v=>v.operacao==="Olho Esquerdo"&&v.status==="Longe")[0]||{},u=o.filter(v=>v.operacao==="Olho Esquerdo"&&v.status==="Medio")[0]||{},c=o.filter(v=>v.operacao==="Olho Esquerdo"&&v.status==="Perto")[0]||{},d=zt(i.prisma||n.prisma||s.prisma),f=i.base||n.base||s.base||"",m=zt(l.prisma||u.prisma||c.prisma),p=l.base||u.base||c.base||"";return a.prescricao={dioptria:{od:{longe:{cilindrico:zt(i.cilindrico),dnp:zt(i.di),eixo:zt(i.eixo),esferico:zt(i.esferico),id:i.id||Kt(),operacao:"Olho Direito",status:"Longe"},medio:{cilindrico:zt(n.cilindrico),eixo:zt(n.eixo),adicao:zt(n.adicao),dnp:zt(n.di),esferico:zt(n.esferico),id:n.id||Kt(),operacao:"Olho Direito",status:"Medio"},perto:{adicao:zt(s.adicao),cilindrico:zt(s.cilindrico),dnp:zt(s.di),eixo:zt(s.eixo),esferico:zt(s.esferico),id:s.id||Kt(),operacao:"Olho Direito",status:"Perto"}},oe:{longe:{cilindrico:zt(l.cilindrico),dnp:zt(l.di),eixo:zt(l.eixo),esferico:zt(l.esferico),id:l.id||Kt(),operacao:"Olho Esquerdo",status:"Longe"},medio:{cilindrico:zt(u.cilindrico),eixo:zt(u.eixo),adicao:zt(u.adicao),dnp:zt(u.di),esferico:zt(u.esferico),id:u.id||Kt(),operacao:"Olho Esquerdo",status:"Medio"},perto:{adicao:zt(c.adicao),cilindrico:zt(c.cilindrico),dnp:zt(c.di),eixo:zt(c.eixo),esferico:zt(c.esferico),id:c.id||Kt(),operacao:"Olho Esquerdo",status:"Perto"}}},prisma:{od:{base:f,valor:d},oe:{base:p,valor:m}}},a}},cbe="documento",ube=["id","idContato","idFatura","idDocumentoAdicional","idContatoVendedor","idContatoDigitador","idEmpresa","documentoId","tipo","status","idEquipamento"],dbe={grava:async e=>{if(e=Vr(e),await lo("documentoItem",e.documentoItensAnterior||[],e.documentoItens||[]),!Object.keys(e.documentoAnterior||{}).length)await $erpPut().documento.put(e.documento),await ut("adicionar","documento",e.documento.id,e.documento);else{const t=Ja(e.documentoAnterior,e.documento);Object.keys(t).length&&(await $erpUpdate().documento.update(e.documento.id,t),await ut("atualizar","documento",e.documento.id,t))}},async leListaCompletaOffline({filtros:e,limit:t,page:o,sort:r}){for(const f in e){if(e[f]===null||e[f]===void 0)throw"Erro no filtro "+f;typeof e[f]=="string"&&(e[f]=e[f].trim())}let a={tipo:""};"tipo"in e&&e.tipo&&(a.tipo=e.tipo),"operacao"in e&&e.operacao&&(a.operacao=e.operacao),"cliente"in e&&e.cliente.id&&(console.log(e.cliente.id),a.codigoContato=e.cliente.id),"digitador"in e&&e.digitador.codigo&&(a.codigoContatoDigitador=e.digitador.codigo);for(const f of ube)f in e&&e[f]&&(a[f]=e[f]);let i=await Se()[cbe];Object.keys(a).length&&("periodo"in e?i=i.where(a).and(function(f){if("periodo"in e&&e.periodo.emissao){let m=new Date(e.periodo.emissao.ini).setHours(0,0,0,0),p=new Date(e.periodo.emissao.fim).setHours(0,0,0,0),v=new Date(f.dataHoraEmissao).setHours(0,0,0,0);return m&&p?(console.log("aqui"),v>=m&&v<=p):m?v>=m:p?v<=p:!0}}).and(function(f){if("periodo"in e&&e.periodo.finalizado){let m=new Date(e.periodo.finalizado.ini).setHours(0,0,0,0),p=new Date(e.periodo.finalizado.fim).setHours(0,0,0,0),v=new Date(f.dataHoraFinalizado).setHours(0,0,0,0);return m&&p?(console.log("aqui"),v>=m&&v<=p):m?v>=m:p?v<=p:!0}}):i=i.where(a));let n=await i.toArray();if("termoBusca"in e){const f=$utils.tratamentoCompletoString(e.termoBusca).split(" "),m=[];for(const p of n){const v=await $db.hibrido.lista({table:"documentoItem",where:{idDocumento:p.id}});let g=p.descricaoContato;g+=` ${p.descricaoEmpresa}`;for(const b of v)g+=` ${b.descricaoItem}`;g=$utils.tratamentoCompletoString(g);let x=!0;for(const b of f)if(!(g.search(b)>-1)){x=!1;break}x&&m.push(p)}n=m}const s=n.length;n=n.sort((f,m)=>f.codigoDocumento>m.codigoDocumento?1:m.codigoDocumento>f.codigoDocumento?-1:0);for(let f of n)f.documentoItens=await $db.hibrido.lista({table:"documentoItem",where:{idDocumento:f.id}});n.sort((f,m)=>f.dataHoraFinalizado?new Date(f.dataHoraFinalizado)<new Date(m.dataHoraFinalizado)?1:-1:new Date(f.dataHoraEmissao)<new Date(m.dataHoraEmissao)?1:-1),t=t||s,o=o||1;let l=(o-1)*t,u=n.splice(l,t),c=s,d=Math.ceil(c/t)||1;return{data:u,total:c,totalPages:d}},async leListaCompletaOnline(e){const{filtros:t,limit:o,page:r,sort:a,dir:i}=e;return(await $utils.geeksApi({listaRegistro:{funcao:"5ED1009B-BDC3-4ADA-8A63-8422DE00550D",filtros:t,limit:o,page:r,sort:a,dir:i}})).data.listaRegistro},leListaCompleta(e){return $db.hibrido.isOnline()?this.leListaCompletaOnline(e):this.leListaCompletaOffline(e)},async remove(e){this.removeItens(e),await $erpDelete().documento.delete(e),await ut("remover","documento",e)},async removeItens(e){let t=await $db.hibrido.lista({table:"documentoItem",where:{idDocumento:e}});for(let o of t)await $erpDelete().documentoItem.where({id:o.id}).delete(),await ut("remover","documentoItem",o.id)}};var fbe={log:`${new Date().toLocaleTimeString("pt-br")} iniciou`,logar(e){this.log=(e+`
`+this.log).substr(0,1e4),localStorage.setItem("sincronismoLog",this.log)}};async function mbe(e){var a,i;const{rota:t}=e!=null?e:{},o=JSON.parse((a=localStorage.getItem("clienteSistema"))!=null?a:null),r=localStorage.getItem("dispositivoCliente");!t||(e.id=$utils.uuid(),e.dataHora=$utils.dataAtual(),e.usuarioCpf=(i=$db.usuario.logado.numeroDocumentoNacional)!=null?i:"",e.dispositivoCliente=r,e.sistema=o==null?void 0:o.sistema,e.versao=$db.app.versao.value,await $erpPut().sistemaUsoLog.put(e))}async function pbe(e){await $erpDelete().sistemaUsoLog.delete(e)}async function hbe({limit:e,page:t}){let o=await $erp().sistemaUsoLog.toArray(),r;const a=o.length;return e=e||a,t=t||1,r=(t-1)*e,o=o.splice(r,e),{data:o,total:a,totalPages:Math.ceil(a/e)||1}}var vbe={registrar:mbe,remover:pbe,le:hbe},gbe={async baixaConteudoOnline(e){return Do(`select nome, arquivo from SpedArquivo where id=${Bt(e)}`)},async leOnline(){return Do("select id, nome, situacao, dataHoraSolicitacao, cnpj, codigoEmpresa, dataInicio, dataFim, dataInventario from SpedArquivo order by dataHoraSolicitacao desc")}};const Kk={id:"",ordem:0,tipo:"Tarefa",assunto:"",descricao:"",dataHoraCriacao:"",dataHoraFinalizado:"",dataLimite:"",status:"Aberto",operacao:"",tags:{id:""},pai:{id:"",assunto:""},item:{id:"",descricao:"",prioridade:""},empresa:{id:"",cnpj:"",razaosocial:""},organizador:{id:"",cpf:"",nome:""},responsavel:{id:"",cpf:"",nome:""},solicitante:{id:"",cpf:"",nome:""},cliente:{id:"",cpfCnpj:"",nome:"",apelido:"",email:"",imagem:"",telefones:{id:{tipoTelefone:"",telefone:""}},tipoEndereco:"",endereco:""},convidados:{cpfCnpj:{nome:"",email:"",observacoes:"",tags:{id:""}}},anotacoes:{id:{dataHoraCriacao:"",usuario:{cpf:"",nome:""},texto:""}},apontamentos:{id:{dataHoraInicio:"",dataHoraFim:"",usuario:{cpf:"",nome:""},tags:{id:""}}}};function _be(){const e=$utils.clonarV2(Kk);return delete e.convidados.cpfCnpj,delete e.anotacoes.id,delete e.apontamentos.id,e}async function bbe(e){await $utils.geeksApi({upinsert:{funcao:"D92A7D42-6706-43C5-8D5B-F5969FAA0B92",data:e}})}async function ybe(e){return $utils.geeksApi({excluirTarefa:{funcao:"12D80CE5-F0DD-4FB1-A527-C949A7AC6266",id:e}})}async function xbe(e={}){return(await $utils.geeksApi({lerTarefas:{funcao:"A396BF94-2E09-4990-8C8D-F51B35378734",...e}})).data.lerTarefas}async function Cbe(){return["Tarefa","SubTarefa"].map(e=>({rotulo:e,valor:e}))}async function wbe(){return["Aberto","Fechado"].map(e=>({rotulo:e,valor:e}))}async function Ebe(e){await $utils.geeksApi({excluir:{funcao:"12D80CE5-F0DD-4FB1-A527-C949A7AC6266",id:e==null?void 0:e.id}})}var Sbe={criar:_be,ler:xbe,gravar:bbe,remover:ybe,model:Kk,lerTipos:Cbe,lerStatus:wbe,excluir:Ebe},sc={exports:{}},Bo={exports:{}};(function(e,t){(function(o,r){e.exports=r()})(vt,function(){var o=o||function(r,a){var i;if(typeof window!="undefined"&&window.crypto&&(i=window.crypto),typeof self!="undefined"&&self.crypto&&(i=self.crypto),typeof globalThis!="undefined"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window!="undefined"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof vt!="undefined"&&vt.crypto&&(i=vt.crypto),!i&&typeof VQ=="function")try{i=require("crypto")}catch{}var n=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function b(){}return function(_){var w;return b.prototype=_,w=new b,b.prototype=null,w}}(),l={},u=l.lib={},c=u.Base=function(){return{extend:function(b){var _=s(this);return b&&_.mixIn(b),(!_.hasOwnProperty("init")||this.init===_.init)&&(_.init=function(){_.$super.init.apply(this,arguments)}),_.init.prototype=_,_.$super=this,_},create:function(){var b=this.extend();return b.init.apply(b,arguments),b},init:function(){},mixIn:function(b){for(var _ in b)b.hasOwnProperty(_)&&(this[_]=b[_]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=u.WordArray=c.extend({init:function(b,_){b=this.words=b||[],_!=a?this.sigBytes=_:this.sigBytes=b.length*4},toString:function(b){return(b||m).stringify(this)},concat:function(b){var _=this.words,w=b.words,S=this.sigBytes,D=b.sigBytes;if(this.clamp(),S%4)for(var M=0;M<D;M++){var O=w[M>>>2]>>>24-M%4*8&255;_[S+M>>>2]|=O<<24-(S+M)%4*8}else for(var T=0;T<D;T+=4)_[S+T>>>2]=w[T>>>2];return this.sigBytes+=D,this},clamp:function(){var b=this.words,_=this.sigBytes;b[_>>>2]&=4294967295<<32-_%4*8,b.length=r.ceil(_/4)},clone:function(){var b=c.clone.call(this);return b.words=this.words.slice(0),b},random:function(b){for(var _=[],w=0;w<b;w+=4)_.push(n());return new d.init(_,b)}}),f=l.enc={},m=f.Hex={stringify:function(b){for(var _=b.words,w=b.sigBytes,S=[],D=0;D<w;D++){var M=_[D>>>2]>>>24-D%4*8&255;S.push((M>>>4).toString(16)),S.push((M&15).toString(16))}return S.join("")},parse:function(b){for(var _=b.length,w=[],S=0;S<_;S+=2)w[S>>>3]|=parseInt(b.substr(S,2),16)<<24-S%8*4;return new d.init(w,_/2)}},p=f.Latin1={stringify:function(b){for(var _=b.words,w=b.sigBytes,S=[],D=0;D<w;D++){var M=_[D>>>2]>>>24-D%4*8&255;S.push(String.fromCharCode(M))}return S.join("")},parse:function(b){for(var _=b.length,w=[],S=0;S<_;S++)w[S>>>2]|=(b.charCodeAt(S)&255)<<24-S%4*8;return new d.init(w,_)}},v=f.Utf8={stringify:function(b){try{return decodeURIComponent(escape(p.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(b){return p.parse(unescape(encodeURIComponent(b)))}},g=u.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(b){typeof b=="string"&&(b=v.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},_process:function(b){var _,w=this._data,S=w.words,D=w.sigBytes,M=this.blockSize,O=M*4,T=D/O;b?T=r.ceil(T):T=r.max((T|0)-this._minBufferSize,0);var I=T*M,N=r.min(I*4,D);if(I){for(var P=0;P<I;P+=M)this._doProcessBlock(S,P);_=S.splice(0,I),w.sigBytes-=N}return new d.init(_,N)},clone:function(){var b=c.clone.call(this);return b._data=this._data.clone(),b},_minBufferSize:0});u.Hasher=g.extend({cfg:c.extend(),init:function(b){this.cfg=this.cfg.extend(b),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(b){return this._append(b),this._process(),this},finalize:function(b){b&&this._append(b);var _=this._doFinalize();return _},blockSize:16,_createHelper:function(b){return function(_,w){return new b.init(w).finalize(_)}},_createHmacHelper:function(b){return function(_,w){return new x.HMAC.init(b,w).finalize(_)}}});var x=l.algo={};return l}(Math);return o})})(Bo);(function(e,t){(function(o,r){e.exports=r(Bo.exports)})(vt,function(o){return function(r){var a=o,i=a.lib,n=i.WordArray,s=i.Hasher,l=a.algo,u=[];(function(){for(var v=0;v<64;v++)u[v]=r.abs(r.sin(v+1))*4294967296|0})();var c=l.MD5=s.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(v,g){for(var x=0;x<16;x++){var b=g+x,_=v[b];v[b]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360}var w=this._hash.words,S=v[g+0],D=v[g+1],M=v[g+2],O=v[g+3],T=v[g+4],I=v[g+5],N=v[g+6],P=v[g+7],F=v[g+8],L=v[g+9],z=v[g+10],H=v[g+11],X=v[g+12],Y=v[g+13],de=v[g+14],ye=v[g+15],W=w[0],re=w[1],_e=w[2],ve=w[3];W=d(W,re,_e,ve,S,7,u[0]),ve=d(ve,W,re,_e,D,12,u[1]),_e=d(_e,ve,W,re,M,17,u[2]),re=d(re,_e,ve,W,O,22,u[3]),W=d(W,re,_e,ve,T,7,u[4]),ve=d(ve,W,re,_e,I,12,u[5]),_e=d(_e,ve,W,re,N,17,u[6]),re=d(re,_e,ve,W,P,22,u[7]),W=d(W,re,_e,ve,F,7,u[8]),ve=d(ve,W,re,_e,L,12,u[9]),_e=d(_e,ve,W,re,z,17,u[10]),re=d(re,_e,ve,W,H,22,u[11]),W=d(W,re,_e,ve,X,7,u[12]),ve=d(ve,W,re,_e,Y,12,u[13]),_e=d(_e,ve,W,re,de,17,u[14]),re=d(re,_e,ve,W,ye,22,u[15]),W=f(W,re,_e,ve,D,5,u[16]),ve=f(ve,W,re,_e,N,9,u[17]),_e=f(_e,ve,W,re,H,14,u[18]),re=f(re,_e,ve,W,S,20,u[19]),W=f(W,re,_e,ve,I,5,u[20]),ve=f(ve,W,re,_e,z,9,u[21]),_e=f(_e,ve,W,re,ye,14,u[22]),re=f(re,_e,ve,W,T,20,u[23]),W=f(W,re,_e,ve,L,5,u[24]),ve=f(ve,W,re,_e,de,9,u[25]),_e=f(_e,ve,W,re,O,14,u[26]),re=f(re,_e,ve,W,F,20,u[27]),W=f(W,re,_e,ve,Y,5,u[28]),ve=f(ve,W,re,_e,M,9,u[29]),_e=f(_e,ve,W,re,P,14,u[30]),re=f(re,_e,ve,W,X,20,u[31]),W=m(W,re,_e,ve,I,4,u[32]),ve=m(ve,W,re,_e,F,11,u[33]),_e=m(_e,ve,W,re,H,16,u[34]),re=m(re,_e,ve,W,de,23,u[35]),W=m(W,re,_e,ve,D,4,u[36]),ve=m(ve,W,re,_e,T,11,u[37]),_e=m(_e,ve,W,re,P,16,u[38]),re=m(re,_e,ve,W,z,23,u[39]),W=m(W,re,_e,ve,Y,4,u[40]),ve=m(ve,W,re,_e,S,11,u[41]),_e=m(_e,ve,W,re,O,16,u[42]),re=m(re,_e,ve,W,N,23,u[43]),W=m(W,re,_e,ve,L,4,u[44]),ve=m(ve,W,re,_e,X,11,u[45]),_e=m(_e,ve,W,re,ye,16,u[46]),re=m(re,_e,ve,W,M,23,u[47]),W=p(W,re,_e,ve,S,6,u[48]),ve=p(ve,W,re,_e,P,10,u[49]),_e=p(_e,ve,W,re,de,15,u[50]),re=p(re,_e,ve,W,I,21,u[51]),W=p(W,re,_e,ve,X,6,u[52]),ve=p(ve,W,re,_e,O,10,u[53]),_e=p(_e,ve,W,re,z,15,u[54]),re=p(re,_e,ve,W,D,21,u[55]),W=p(W,re,_e,ve,F,6,u[56]),ve=p(ve,W,re,_e,ye,10,u[57]),_e=p(_e,ve,W,re,N,15,u[58]),re=p(re,_e,ve,W,Y,21,u[59]),W=p(W,re,_e,ve,T,6,u[60]),ve=p(ve,W,re,_e,H,10,u[61]),_e=p(_e,ve,W,re,M,15,u[62]),re=p(re,_e,ve,W,L,21,u[63]),w[0]=w[0]+W|0,w[1]=w[1]+re|0,w[2]=w[2]+_e|0,w[3]=w[3]+ve|0},_doFinalize:function(){var v=this._data,g=v.words,x=this._nDataBytes*8,b=v.sigBytes*8;g[b>>>5]|=128<<24-b%32;var _=r.floor(x/4294967296),w=x;g[(b+64>>>9<<4)+15]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,g[(b+64>>>9<<4)+14]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,v.sigBytes=(g.length+1)*4,this._process();for(var S=this._hash,D=S.words,M=0;M<4;M++){var O=D[M];D[M]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360}return S},clone:function(){var v=s.clone.call(this);return v._hash=this._hash.clone(),v}});function d(v,g,x,b,_,w,S){var D=v+(g&x|~g&b)+_+S;return(D<<w|D>>>32-w)+g}function f(v,g,x,b,_,w,S){var D=v+(g&b|x&~b)+_+S;return(D<<w|D>>>32-w)+g}function m(v,g,x,b,_,w,S){var D=v+(g^x^b)+_+S;return(D<<w|D>>>32-w)+g}function p(v,g,x,b,_,w,S){var D=v+(x^(g|~b))+_+S;return(D<<w|D>>>32-w)+g}a.MD5=s._createHelper(c),a.HmacMD5=s._createHmacHelper(c)}(Math),o.MD5})})(sc);var Ibe=sc.exports;const F0={id:"",apelido:"",nome:"",imagem:"",numeroDocumentoNacional:"",administrador:!1,codigoUsuario:"",modoDesenvolvedor:{status:!1,acesso:""},desenvolvedor:function(){return["26088910801","22591100888","21397498803","27379313800","33209680841","39516496822","46881300824","09096257944","27784678827","74700928620","35756720839","03960464878","22010918894"].includes(this.numeroDocumentoNacional.replace(/\.|-/g,""))}},Y0={vazio:F0,desenvolvedor(){return!!this.logado&&!!this.logado.desenvolvedor&&this.logado.desenvolvedor()},grava:()=>{},le:async(e={})=>{let t={};if("id"in e&&e.id&&(t=await Se().contato.where({idUsuario:e.id}).first()),!t)try{t=(await zr({consultarUsuario:{funcao:"0A267FF5-E96A-4B47-9818-DB27EDA3555A",id:e.id}})).data.consultarUsuario||{}}catch(o){console.error(o),t=null}return t||{}},leOnline:async e=>Do(`SELECT id, codigoUsuario, Nome as nome, Nome as apelido, NumeroDocumentoNacional as numeroDocumentoNacional, Img as imagem
      FROM Usuario WHERE id = ${Bt(e,"")}`,"GeeksPlat15A"),async carregaDados(){Wt.log("carregaDados",et.cache.get("bancoDeDados")),await gr.empresaUsuarioPermissao.inicializarPermissao(),et.contato.carregarMemoria(),et.item.carregarMemoria(),et.configuracoes.inicializa(),$utils.conduta.exibir()},async inicializaLogado(){if(!Y0.logado.id){Wt.log("usuario","inicializaLogado()");let e=JSON.parse(localStorage.getItem("usuario"));if(e&&e.cpf&&localStorage.getItem("bancoDeDados")){const t=e.cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4");let o=await Se().contato.where({numeroDocumentoNacional:t}).toArray();o.length===0&&(o=await Se().contato.where({numeroDocumentoNacional:t.replace(/\D/g,"")}).toArray());const r=o.find(i=>i.ativo===!0);let a;(r==null?void 0:r.codigoUsuario)&&(r==null?void 0:r.imagem)&&(a=r.imagem),e=await Gt.login.get({cpf:e.cpf}),Y0.logado={...F0,...e,img:a}}}},async autentica({cpf:e,senha:t}){Wt.log("usuario","autentica()",e);const o=Ibe(t).toString();let r;if(!navigator.onLine)throw new Error("Usu\xE1rio n\xE3o encontrado. Conecte-se \xE0 Internet.");const i=(await zr({login:{funcao:"0F8E5067-A8B2-4C82-9275-25B114B9ED70",cpf:e,senha:t}})).data.login;return Wt.log("usuario","login graphql ok",i.usuario.nome),r={...i.usuario,token:i.token,cpf:e,senha:o},await Gt.login.put(r),localStorage.setItem("usuario",JSON.stringify(r)),Y0.logado={...F0,...r},Wt.log("usuario","salva usuario indexeddb, localStore e db.logado ok"),r},async verificaUsuarioClienteSistema(){var e;try{if(!$db.usuario.logado.id)return;let t,o,r,a;t=$db.cache.get("bancoDeDados"),a=await $utils.geeksApi({clienteSistemas:{funcao:"50BD6521-7654-4455-A161-BDFFCC1AA3A9"}},{bancoDeDados:"GeeksPlat15A"}),o=(e=a==null?void 0:a.data)==null?void 0:e.clienteSistemas,r=o==null?void 0:o.some(i=>i.bancoDeDados===t),r||($db.usuario.desconecta(),localStorage.clear(),window.location.reload())}catch(t){console.error(t)}},desconecta(){localStorage.removeItem("usuario"),localStorage.removeItem("contatoSelecionado"),localStorage.removeItem("itemSelecionado"),Y0.logado=Pr(F0)},obterDispositivo(){let e=localStorage.getItem("dispositivoCliente");return e||(e=$utils.uuid(),localStorage.setItem("dispositivoCliente",e)),{id:e,detalhe:JSON.stringify({navigator:navigator?{platform:navigator.platform,vendor:navigator.vendor,appVersion:navigator.appVersion,userAgent:navigator.userAgent,deviceMemory:navigator.deviceMemory,connection_downlink:(navigator.connection||{}).downlink}:{},screen:screen?{width:screen.width,height:screen.height}:{},usuario:{id:$db.usuario.logado.id,nome:$db.usuario.logado.nome},dataHora:$utils.dataAtual()})}},async modoDesenvolvedor(){if(this.logado.modoDesenvolvedor.status)this.logado.modoDesenvolvedor={status:!1,acesso:""};else if(this.logado.administrador&&[1,2].includes(this.logado.grupoInterno))this.logado.modoDesenvolvedor={status:!0,acesso:this.desenvolvedor()?"desenvolvedor":"suporte"},console.log("DEV: ",this.desenvolvedor(),this.logado.modoDesenvolvedor);else{const e=await $g.promptLogin.show();if(e){const t=(await zr({login:{funcao:"0F8E5067-A8B2-4C82-9275-25B114B9ED70",cpf:e.cpf,senha:e.senha}})).data.login.usuario,o=["26088910801","22591100888","21397498803","27379313800","33209680841","39516496822","46881300824","09096257944","27784678827","74700928620","19505571895"].includes(t.numeroDocumentoNacional.replace(/\.|-/g,""));(t==null?void 0:t.administrador)&&[1,2].includes(t==null?void 0:t.grupoInterno)&&(this.logado.modoDesenvolvedor={status:!0,acesso:o?"desenvolvedor":"suporte"})}}},logado:{...F0}};async function Abe({objsVenda:e,campoAlterado:t}){let{venda:o,carrinho:r,envelopes:a,itensEnvelopes:i,customs:n,oss:s,kits:l}=e;o.subTotal=0,o.totalProduto=0,o.totalServico=0;let u=0;for(const d of r||[])o.subTotal=$utils.arredondar(o.subTotal+d.total),o.calcularTributacao&&(u+=(d.valorIpi||0)+(d.valorIcmsSt||0)+(d.valorDifal||0));for(const d in a||{}){let f=a[d];if(o.subTotal=$utils.arredondar(o.subTotal+f.totalDocumento),o.calcularTributacao)for(const m of i.filter(p=>p.idDocumentoAdicional===d))u+=(m.valorIpi||0)+(m.valorIcmsSt||0)+(m.valorDifal||0)}for(const d of n||[])if(o.subTotal=$utils.arredondar(o.subTotal+d.documento.totalDocumento),o.calcularTributacao)for(const f of d.documentoItens)u+=(f.valorIpi||0)+(f.valorIcmsSt||0)+(f.valorDifal||0);for(let d of s||[]){for(let f of d.documentoItens)await $db.os.calculaTotalItem({os:d.documento,itemOs:$utils.clonarV2(f)}).then(m=>{f=m.itemOs}),o.calcularTributacao&&(u+=(f.valorIpi||0)+(f.valorIcmsSt||0)+(f.valorDifal||0));await $db.os.calculaTotal({os:$utils.clonarV2(d.documento),itensOs:d.documentoItens}).then(f=>{d.documento=f.os}),o.subTotal=$utils.arredondar(o.subTotal+d.documento.totalDocumento)}for(const d of l!=null?l:[])if(o.subTotal=$utils.arredondar(o.subTotal+d.documento.totalDocumento),o.calcularTributacao)for(const f of d.documentosItem.filter(m=>m.operacaoFator===-1))u+=(f.valorIpi||0)+(f.valorIcmsSt||0)+(f.valorDifal||0);t==="totalPercentualDesconto"&&(o.subTotal>0?o.totalDesconto=$utils.arredondar(o.totalPercentualDesconto/100*o.subTotal):(o.totalDesconto=0,o.totalPercentualDesconto=0,o.totalDocumento=0)),t==="totalDesconto"&&(o.subTotal>0?o.totalPercentualDesconto=$utils.arredondar(o.totalDesconto/o.subTotal*100):(o.totalDesconto=0,o.totalPercentualDesconto=0,o.totalDocumento=0)),t||(o.totalPercentualDesconto=$utils.arredondar(o.totalDesconto/o.subTotal*100));const c=o.tipoFrete==="CIF"&&o.valorFrete||0;return o.totalProduto=o.subTotal,o.totalDocumento=$utils.arredondar(o.subTotal-o.totalDesconto+c+u),{venda:o}}async function iP(e={},t){for(const o of e.documentoItens){if(e.listaMaximoDesconto.find(l=>l.id===o.id)||!o.idItem||o.operacaoFator===1)continue;let r,a,i,n,s;await e.configurarValoresTabelaPreco(e.tbMaster,o),r=e.valoresTabelaPreco.find(l=>l.id===o.id),r&&(t&&r.maximoDescontoGerente<r.maximoDesconto||(r.quantidadeMaiorQue&&o.quantidade>=r.quantidadeMaiorQue?a=r.maximoDescontoMaiorQue:a=t?r.maximoDescontoGerente:r.maximoDesconto,n=$utils.arredondar(o.valorOriginal-a/100*o.valorOriginal),s=$utils.arredondar(o.valorItem-o.descontoItem-o.descontoTotalRateado/(o.quantidade||1)),i=a,o.valorItem!==o.valorOriginal&&(i=$utils.arredondar((o.valorItem-n)/o.valorItem*100)),e.totalVMinimo=$utils.arredondar(e.totalVMinimo+n*o.quantidade),s<n&&e.listaMaximoDesconto.push({id:o.id,descricao:o.descricaoItem,maximoDesconto:i})))}}async function Tbe(e={}){const{tela:t,carrinho:o=[],itensEnvelopes:r=[],documentosItensCustoms:a=[],documentosItensOSs:i=[],documentosItemKits:n=[]}=e;if(!t.venda.idItemTabelaPreco)return!0;const s=await $erp().itemTabelaPreco.get(t.venda.idItemTabelaPreco);if(!s)throw new Error("N\xE3o foi poss\xEDvel obter a tabela de pre\xE7o");const l=[];let u=[],c=await $db.permissao.objeto("Diretiva_Vendas_DescontoMaximo"),d=await $db.permissao.objeto("Diretiva_Vendas_DescontoMaximoNivelGerente"),f=await $db.permissao.objetoClienteSistema("Diretiva_Vendas_DescontoMaximoNivelGerente"),m=!1;o.forEach(_=>l.push(_)),a.forEach(_=>l.push(_)),i.forEach(_=>l.push(_)),n.forEach(_=>l.push(_)),r.forEach(_=>l.push(_));let p=0,v=t.venda.totalDocumento;for(const _ of l)if(!_.idItem||_.operacaoFator===1){v=$utils.arredondar(v-_.valorRealTotal);continue}const g={configurarValoresTabelaPreco:t.configurarValoresTabelaPreco,valoresTabelaPreco:t.valoresTabelaPreco,tbMaster:s,totalVMinimo:p,documentoItens:l,listaMaximoDesconto:u};f&&(await iP(g,!0),g.listaMaximoDesconto.length&&(m=!0)),await iP(g);const b=(parseInt(await $db.configuracoes.leValorComFiltroEmpresa("vendas.margem.trava",t.venda.idEmpresa,0))||0)&&$lodash.get(t.margem[t.venda.id],"limite",!1);if(g.listaMaximoDesconto.length||v>0&&v<p||b){if(!b){const w="Existe(m) produto(s) com desconto superior ao m\xE1ximo permitido";$q.notifyError(w)}b&&(t.modalDescontoMaximo.msg="\xCDndice geral n\xE3o permitido"),t.modalDescontoMaximo.titulo="Limite de desconto excedido",t.modalDescontoMaximo.permiteDescontoMaximo=c,m&&(t.modalDescontoMaximo.titulo="Limite de desconto excedido (Gerente)",t.modalDescontoMaximo.permiteDescontoMaximo=d),t.modalDescontoMaximo.itens=g.listaMaximoDesconto,$q.loading.hide();let _=!1;if(await new Promise(async(w,S)=>{t.modalDescontoMaximo.resolve=w,t.modalDescontoMaximo.reject=S,t.modalDescontoMaximo.visivel=!0}).then(w=>{if(w==="continuar"){const S=t.venda.status,D="Aguardando Libera\xE7\xE3o";t.documentoStatus.push({id:$utils.uuid(),idDocumento:t.venda.id,operacao:t.venda.operacao,statusOriginal:S,statusFinalizado:D,dataHoraEmissao:$utils.dataAtual(),cpfUsuario:$db.usuario.logado.numeroDocumentoNacional,observacao:t.modalDescontoMaximo.itens.reduce((O,T)=>O+T.descricao+" | ","").slice(0,-3)}),t.venda.status=D,(t.salvarVenda||t.salvar)().then(()=>{t.$emit("executar","atualizar")}),_=!0}t.modalDescontoMaximo.visivel=!1}).catch(w=>{console.error(w),_=!0}),_)return!1;$q.loading.show({message:"Processando..."})}return!0}async function Dbe({objsVendaOrig:e}){const t=[],{venda:o,carrinho:r,itensEnvelopes:a,customs:i,oss:n}=e,l=(await $db.configuracoes.porNome("vendas.checaestoque",o.idEmpresa)).find(d=>parseInt(d.valor)===1),u=i.reduce((d,f)=>[...d,...f.documentoItens||[]],[]),c=n.reduce((d,f)=>[...d,...f.documentoItens||[]],[]);if(l){let d=[],f=[];const m=[...r||[],...a||[],...u||[],...c||[]];for(const p of m)!p.idItem||f.push(p.idItem);f=Array.from(new Set(f));try{d=(((await $utils.geeksApi({estoque:{funcao:"CC9F3B9A-16B9-4AE8-A523-938E4433AFAA",idItem:f,idEmpresa:o.idEmpresa}})||{}).data||{}).estoque||[]).filter(g=>g.tipoEstoque==="Dispon\xEDvel");let v=[];for(const g of f)v.push({idItem:g,saldo:d.filter(x=>x.idItem===g).reduce((x,b)=>x+b.saldo,0),idEmpresa:o.idEmpresa});d=v}catch(p){console.error("Erro na consulta do estoque online",p),d=await $erp().estoqueSaldoProdutoEmpresa.where("idItem").anyOf(f).toArray(),d=d.filter(g=>g.tipoEstoque==="Dispon\xEDvel"),o.idEmpresa&&(d=d.filter(g=>g.idEmpresa===o.idEmpresa));let v=[];for(const g of f)v.push({idItem:g,saldo:d.filter(x=>x.idItem===g).reduce((x,b)=>x+b.saldo,0),idEmpresa:o.idEmpresa,offline:!0});d=v}for(const p of m){if(!p.idItem||!o.idEmpresa||p.operacaoFator===1||t.find(_=>_.idItem===p.idItem))continue;const v=await $erp().item.get(p.idItem)||{};if(!v.id||["servico","tratamento","lente"].includes((v.tipo||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")))continue;const g=d.find(_=>_.idItem===p.idItem)||{},x=Number((g||{}).saldo)?g.saldo:0,b=m.reduce((_,w)=>_+(w.idItem===p.idItem&&w.quantidade||0),0);x>=b||t.find(_=>_.idItem===p.idItem)||t.push({idItem:p.idItem,descricao:p.descricaoItem||"",saldo:x,offline:!!g.offline})}}return{itensSemEstoque:t}}function Obe({objsVendaOrig:e,itensSemEstoque:t}){const o={venda:$utils.clonarV2(e.venda),carrinho:[],envelopes:{},itensEnvelopes:[],customs:[],oss:[],documentoEndereco:$utils.clonarV2(e.documentoEndereco),documentoContato:$utils.clonarV2(e.documentoContato),arquivo:[]},{carrinho:r,envelopes:a,itensEnvelopes:i,customs:n,oss:s,arquivo:l}=e;t=t.map(c=>({idItem:c.idItem,saldo:c.saldo}));for(let c of r){const d=t.find(p=>p.idItem===c.idItem);if(!d)continue;c=$utils.clonarV2(c);const f=c.quantidade||0,m=d.saldo||0;f>m?(m>0&&(c.quantidade=$utils.arredondar(f-m),c.quantidadeRealizado=c.quantidade,d.saldo=0),o.carrinho.push(c)):d.saldo=$utils.arredondar(m-f)}for(const c in a)for(const d of i.filter(f=>f.idDocumentoAdicional===c)){const f=t.find(p=>p.idItem===d.idItem);if(!f)continue;if(f.saldo>=1){f.saldo--;continue}if(o.envelopes[c])continue;o.envelopes[c]=$utils.clonarV2(a[c]);let m=i.filter(p=>p.idDocumentoAdicional===c);o.itensEnvelopes=o.itensEnvelopes.concat($utils.clonarV2(m)),m=l.filter(p=>p.idTabelaMaster===c),o.arquivo=o.arquivo.concat($utils.clonarV2(m))}for(const c of n){let d=!1;for(const f of c.documentoItens){const m=t.find(p=>p.idItem===f.idItem);if(!!m&&f.quantidade>m.saldo){d=!0;break}}if(d){o.customs.push($utils.clonarV2(c));continue}for(const f of c.documentoItens){const m=t.find(p=>p.idItem===f.idItem);!m||m.saldo>0&&(m.saldo=$utils.arredondar(m.saldo-f.quantidade))}}for(const c of s){const d=$utils.clonarV2(c);d.documentoItens=[];for(const m of c.documentoItens){const p=t.find(v=>v.idItem===m.idItem);!p||m.quantidade>p.saldo&&d.documentoItens.push($utils.clonarV2(m))}o.oss.push(d);const f=c.documentoItens.filter(m=>!d.documentoItens.find(p=>p.id===m.id));for(const m of f){const p=t.find(v=>v.idItem===m.idItem);!p||p.saldo>0&&(p.saldo=$utils.arredondar(p.saldo-m.quantidade))}}return{objsVendaSemEstoque:$db.venda.trocarStatus({status:"Aguardando Estoque",objsVenda:o}).objsVenda}}function Pbe({objsVendaOrig:e,objsVendaSemEstoque:t}){const o={venda:$utils.clonarV2(e.venda),carrinho:[],envelopes:{},itensEnvelopes:[],customs:[],oss:[],documentoEndereco:$utils.clonarV2(e.documentoEndereco),documentoContato:$utils.clonarV2(e.documentoContato),arquivo:[]},{carrinho:r,envelopes:a,itensEnvelopes:i,customs:n,oss:s,arquivo:l}=e;for(let u of r){const c=t.carrinho.find(d=>d.id===u.id);if(u=$utils.clonarV2(u),!c){o.carrinho.push(u);continue}u.quantidade=$utils.arredondar(u.quantidade-c.quantidade),u.quantidadeRealizado=u.quantidade,u.quantidade&&o.carrinho.push(u)}for(const u in a)if(!t.envelopes[u]){o.envelopes[u]=$utils.clonarV2(a[u]);let c=i.filter(d=>d.idDocumentoAdicional===u);o.itensEnvelopes=o.itensEnvelopes.concat($utils.clonarV2(c)),c=l.filter(d=>d.idTabelaMaster===u),o.arquivo=o.arquivo.concat($utils.clonarV2(c))}for(const u of n)t.customs.find(c=>c.documento.id===u.documento.id)||o.customs.push($utils.clonarV2(u));for(const u of s){const c=t.oss.find(f=>f.documento.id===u.documento.id);if(!c){o.oss.push($utils.clonarV2(u));continue}const d=$utils.clonarV2(u);d.documentoItens=[];for(const f of u.documentoItens)c.documentoItens.find(m=>m.id===f.id)||d.documentoItens.push($utils.clonarV2(f));d.documentoItens.length&&o.oss.push(d)}return{objsVendaComEstoque:o}}async function nP({venda:e,carrinho:t}){for(const o of t){let r=o.valorItem-o.descontoItem;o.subTotal=$utils.arredondar(r*o.quantidade),o.total=o.subTotal,o.valorReal=r,o.valorRealTotal=o.total}return{carrinho:t}}async function Fbe(e){let t,o={},r={};const a=(await Dbe({objsVendaOrig:e})).itensSemEstoque;if(a.length){t=Obe({objsVendaOrig:e,itensSemEstoque:a}),o=t.objsVendaSemEstoque,t=Pbe({objsVendaOrig:e,objsVendaSemEstoque:o}),r=t.objsVendaComEstoque,o=await $db.venda.duplicar(o);for(let i of r.oss){for(let n of i.documentoItens)await $db.os.calculaTotalItem({os:i.documento,itemOs:n}).then(s=>{n=s.itemOs});await $db.os.calculaTotal({os:i.documento,itensOs:i.documentoItens}).then(n=>{i.documento=n.os})}for(let i of o.oss){for(let n of i.documentoItens)await $db.os.calculaTotalItem({os:i.documento,itemOs:n}).then(s=>{n=s.itemOs});await $db.os.calculaTotal({os:i.documento,itensOs:i.documentoItens}).then(n=>{i.documento=n.os})}await nP({venda:r.venda,carrinho:r.carrinho}).then(i=>{r.carrinho=i.carrinho}),await nP({venda:o.venda,carrinho:o.carrinho}).then(i=>{o.carrinho=i.carrinho}),await $db.venda.calcularTotais({objsVenda:r,campoAlterado:"totalPercentualDesconto"}).then(i=>{r.venda=i.venda}),await $db.venda.calcularTotais({objsVenda:o,campoAlterado:"totalPercentualDesconto"}).then(i=>{o.venda=i.venda})}return{objsVendaComEstoque:r,objsVendaSemEstoque:o,itensSemEstoque:a}}async function Mbe(e={}){const{idContato:t}=e,o=new Date(new Date().toDateString());let r,a,i,n=[];if(!t)throw new Error("idContato n\xE3o encontrado.");if(r=await $erp().contato.get(t),!r)throw new Error("Contato n\xE3o encontrado.");if(a=await $db.configuracoes.le({nome:"venda.codigoconsumidor"}),a.find(s=>Number(s.valor)===r.codigoContato))return[];i=await $db.hibrido.lista({table:"financeiroTitulo",where:{idContato:t}});for(const s of i){const l=new Date(new Date(s.dataVencimento).toDateString());!s.receberPagar||!s.dataVencimento||l>=o||s.dataPagamento||n.push(s)}return n}async function Nbe(e){let t=$db.usuario.logado.numeroDocumentoNacional,o;if(t){let b;b=await $erp().contato.where({numeroDocumentoNacional:t}).toArray(),o=b[0],o||(t=t.replace(/\D/g,""),b=await $erp().contato.where({numeroDocumentoNacional:t}).toArray(),o=b[0])}const r=b=>{delete b.codigoDocumento,delete b.codigoDocumentoAdicional,delete b.codigoNFe,delete b.codigoEmpresa,delete b.codigoEmpresaEndereco,delete b.codigoContatoEndereco,delete b.codigoContatoResponsavel,delete b.codigoContato,delete b.codigoContatoFinalizado,delete b.codigoContatoComprador,delete b.codigoContatoVendedor,delete b.codigoContatoDigitador,delete b.codigoContatoCobranca,delete b.codigoContatoEnderecoEntrega,delete b.codigoContatoTransportadora,delete b.codigoMinuta,delete b.codigoFatura,delete b.codigoFinanceiroPlanoContaFaturamento,delete b.codigoItemTabelaPreco,delete b.codigoContatoResponsavelMinuta,delete b.codigoCaixa,delete b.codigoFinanceiroPlanoContaCaixa,delete b.codigoContatoIndicacao,delete b.codigoDocumentoItem,delete b.codigoDocumento,delete b.codigoDocumentoAdicional,delete b.codigoPlanoContaEstoque,delete b.codigoPlanoContaDestino,delete b.codigoItem,delete b.codigoDocumentoItemPai,delete b.codigoCFOP,delete b.codigoCfop,delete b.codigoDocumentoVenda,delete b.codigoDocumentoItemVenda,delete b.codigoDocumentoRemessa,delete b.codigoDocumentoCompra,delete b.codigoDocumentoTriagem,delete b.codigoContatoFornecedor,delete b.documentoCodigo,delete b.numero},a=b=>{const _=[];for(const w of b){const S={...w.documento},D=S.numero;S.id=Kt(),S.documentoId=n.id,r(S),S.tipo==="Custom"&&(S.numero=D);const M=[];for(const T of w.arquivo)M.push({...T,id:Kt(),idTabelaMaster:S.id});const O=[];for(const T of w.documentoItens){const I={...T};I.id=Kt(),I.idDocumento=n.id,I.idDocumentoAdicional=S.id,r(I),O.push(I)}_.push({arquivo:M,documento:S,documentoItens:O})}return _},i=b=>{const _=[];for(const w of b){const S={...w.documento},D=[];S.id=Kt(),S.documentoId=n.id,S.idDocumentoAdicional="",r(S);for(const M of w.documentosItem){if(M.operacao==="Manipula\xE7\xE3o")continue;const O={...M};O.id=Kt(),w.documento.documentoId===O.idDocumento&&(O.idDocumento=S.documentoId),w.documento.id===O.idDocumento&&(O.idDocumento=S.id),O.idDocumentoAdicional=S.id,r(O),D.push(O)}_.push({documento:S,documentosItem:D})}return _},n={...e.venda};n.id=Kt(),n.idContatoDigitador=o==null?void 0:o.id,r(n);const s=[];for(const b of e.documentoEndereco||[])s.push({...b,id:Kt(),idDocumento:n.id});const l=[];for(const b of e.documentoContato||[])l.push({...b,id:Kt(),idDocumento:n.id});const u=[];for(const b of e.documentoStatus||[])u.push({...b,id:Kt(),idDocumento:n.id});const c={},d={};for(const b in e.envelopes||{}){const _={...e.envelopes[b]};_.id=Kt(),c[b]=_.id,_.documentoId=n.id,r(_);const w=[];for(const S of _.documentoContato||[])w.push({...S,idDocumento:_.id});_.documentoContato=w,d[_.id]=_}const f=[];for(const b of e.arquivo||[]){const _={...b,id:Kt(),idTabelaMaster:c[b.idTabelaMaster]};b.idTabelaMaster===e.venda.id&&(_.idTabelaMaster=n.id),f.push(_)}const m=[];for(const b of e.itensEnvelopes||[]){const _={...b};_.id=Kt(),_.idDocumento=n.id,_.idDocumentoAdicional=c[_.idDocumentoAdicional],r(_),m.push(_)}const p=[];for(const b of e.carrinho||[]){const _={...b};_.id=Kt(),_.idDocumento=n.id,r(_),p.push(_)}const v=a(e.customs||[]),g=a(e.oss||[]),x=i(e.kits||[]);return{venda:n,carrinho:p,customs:v,oss:g,kits:x,envelopes:d,itensEnvelopes:m,documentoEndereco:s,documentoContato:l,documentoStatus:u,arquivo:f}}async function kbe({tela:e,continueMesmaTela:t=!1}){let o,r,a;try{await new Promise((i,n)=>{$q.dialog({cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},message:"Esta a\xE7\xE3o ir\xE1 finalizar este or\xE7amento",ok:{label:"Continuar",push:!0,class:"bg-primary",textColor:"white",flat:!0},title:"Tem certeza?"}).onOk(()=>{i()}).onCancel(()=>{n()})})}catch{return}try{o=new Date;const i=await $db.contato.le({numeroDocumentoNacional:$db.usuario.logado.numeroDocumentoNacional}),n=(i[0]||{}).id||"",s=(i[0]||{}).numeroDocumentoNacional||"";let l=[];$q.loading.show({message:"Processando..."});try{Object.keys(e.vendaOriginal).length&&await $db.venda.checarConflitoStatus({id:e.venda.id,status:e.vendaOriginal.status})}catch(q){return $q.notifyError(q.message),!1}for(const q of e.carrinho.map(ne=>ne.id))await e.carrinhoCalcularTotais(q,null,!1);if(await e.calcularTotais(),e.erroCalculo){$q.loading.hide(),$q.notifyError("N\xE3o \xE9 poss\xEDvel finalizar a Venda. Erro de c\xE1lculo encontrado.");return}if(e.venda.totalDocumento>0&&(l=await $db.venda.titulosPendentesAtraso({idContato:e.venda.idContato}),l.length)){$q.loading.hide();const q=await new Promise((ne,U)=>{e.mostrarTitulosPendentesEmAtraso={acao:ne,titulosPendentesAtraso:l}});if(q==="cancelar")return;if(q==="continuar"){const ne=e.venda.status,U="Aguardando Financeiro";e.documentoStatus.push({id:$utils.uuid(),idDocumento:e.venda.id,operacao:e.venda.operacao,statusOriginal:ne,statusFinalizado:U,dataHoraEmissao:$utils.dataAtual(),cpfUsuario:s,observacao:"T\xEDtulos pendentes em atraso"}),e.venda.status=U,e.salvarVenda().then(()=>{e.$emit("executar","atualizar")});return}$q.loading.show({message:"Processando..."})}const u={venda:e.venda,carrinho:e.carrinho,envelopes:e.envelopes,itensEnvelopes:e.itensEnvelopes,customs:e.customs,oss:e.oss,documentoEndereco:e.documentoEndereco,documentoContato:e.documentoContato,arquivo:e.arquivo},{objsVendaComEstoque:c,objsVendaSemEstoque:d,itensSemEstoque:f}=await $db.venda.separaSemEstoque(u);if(f.length){const q=new Promise((U,Z)=>{e.modalItemSemEstoque.resolve=U,e.modalItemSemEstoque.reject=Z});e.modalItemSemEstoque.itens=f,e.modalItemSemEstoque.opcao="separar",e.modalItemSemEstoque.opcoes=[{label:"Separar pedido com itens sem estoque",value:"separar"},{label:"Colocar pedido todo como Aguardando Estoque",value:"aguardar"}],!c.carrinho.length&&!Object.keys(c.envelopes).length&&!c.customs.length&&!c.oss.length&&(e.modalItemSemEstoque.opcao="aguardar",e.modalItemSemEstoque.opcoes=[]),!d.carrinho.length&&!Object.keys(d.envelopes).length&&d.customs.length&&!d.oss.length&&(e.modalItemSemEstoque.opcao="finalizar",e.modalItemSemEstoque.opcoes=[]),e.modalItemSemEstoque.visivel=!0;let ne=!0;try{await q,e.modalItemSemEstoque.visivel=!1}catch{ne=!1}if(!ne)return;if(e.modalItemSemEstoque.opcao==="aguardar"){const U=$db.venda.trocarStatus({status:"Aguardando Estoque",objsVenda:{venda:e.venda,carrinho:e.carrinho,envelopes:e.envelopes,itensEnvelopes:e.itensEnvelopes,customs:e.customs,oss:e.oss,kits:e.kits,arquivo:e.arquivo}});e.venda=U.objsVenda.venda,e.carrinho=U.objsVenda.carrinho,e.envelopes=U.objsVenda.envelopes,e.itensEnvelopes=U.objsVenda.itensEnvelopes,e.customs=U.objsVenda.customs,e.oss=U.objsVenda.oss,await e.salvarVenda(),e.$emit("executar","fechar");return}if(e.modalItemSemEstoque.opcao==="separar"){e.venda=c.venda,e.carrinho=c.carrinho,e.envelopes=c.envelopes,e.itensEnvelopes=c.itensEnvelopes,e.customs=c.customs,e.oss=c.oss,e.arquivo=c.arquivo;for(const Q of e.carrinho.map(V=>V.id))await e.carrinhoCalcularTotais(Q,null,!1);if(await e.calcularTotais(),e.erroCalculo){$q.loading.hide(),$q.notifyError("N\xE3o \xE9 poss\xEDvel finalizar a Venda. Erro de c\xE1lculo encontrado.");return}const U=[d.venda];let Z=d.arquivo||[],Ce=d.carrinho||[];Ce=Ce.concat(d.itensEnvelopes||[]);for(const Q in d.envelopes)U.push(d.envelopes[Q]);for(const Q of d.customs)U.push(Q.documento),Ce=Ce.concat(Q.documentoItens||[]),Z=Z.concat(Q.arquivo);for(const Q of d.oss)U.push(Q.documento),Ce=Ce.concat(Q.documentoItens||[]),Z=Z.concat(Q.arquivo);await $utils.processarFilho("documento",[],U),await $utils.processarFilho("documentoItem",[],Ce),await $utils.processarFilho("arquivo",[],Z)}}let m,p,v,g,x,b,_,w,S,D,M,O,T,I=[];m=$utils.clonar(e.venda),p=$utils.clonar(e.carrinho),v=$utils.clonar(e.envelopes),g=$utils.clonar(e.itensEnvelopes),x=$utils.clonar(e.documentoEndereco),b=e.customs.reduce((q,ne)=>[...q,...ne.documentoItens||[]],[]),_=e.oss.reduce((q,ne)=>[...q,...ne.documentoItens||[]],[]);for(const q of e.kits||[]){const ne=q.documentosItem.find(U=>U.operacaoFator===-1);I.push(ne)}if(w=await $db.contato.le({id:m.idContato}),S=await $db.empresa.le({idContato:m.idEmpresa}),S=S.length?S[0]:{},D=await $db.contato.le({id:S.idContato}),M=await $db.contatoEndereco.le({idContato:m.idContato}),O=await $db.contatoTelefone.le({idContato:m.idContato}),T=M.filter(q=>q.grupo==="Principal"),!!e.$refs.faturamento.formasPagamento.find(q=>q.utilizaLimite)){const q=$utils.arredondar(w.creditoDisponivel),ne=$utils.arredondar(m.totalDocumento);if(ne>q){e.modalCreditoDisponivel.permiteFinalizar=await $db.permissao.objeto("Diretiva_Vendas_LimiteCredito"),e.modalCreditoDisponivel.title="Limite de cr\xE9dito insuficiente",e.modalCreditoDisponivel.body=`Limite ${e.$filters.numero(q,2)} - Venda ${e.$filters.numero(ne,2)}`,$q.loading.hide();let U=!1;if(await new Promise(async(Z,Ce)=>{e.modalCreditoDisponivel.resolve=Z,e.modalCreditoDisponivel.reject=Ce,e.modalCreditoDisponivel.visivel=!0}).then(Z=>{if(Z==="continuar"){const Ce=e.venda.status,Q="Aguardando Financeiro";e.documentoStatus.push({id:$utils.uuid(),idDocumento:m.id,operacao:m.operacao,statusOriginal:Ce,statusFinalizado:Q,dataHoraEmissao:$utils.dataAtual(),cpfUsuario:$db.usuario.logado.numeroDocumentoNacional,observacao:e.modalCreditoDisponivel.title+". "+e.modalCreditoDisponivel.body}),e.venda.status=Q,e.salvarVenda().then(()=>{e.$emit("executar","atualizar")}),U=!0}e.modalCreditoDisponivel.visivel=!1}).catch(()=>{U=!0}),U)return}}$q.loading.show({message:"Processando..."});const P=parseInt(await $db.configuracoes.leValorComFiltroEmpresa("vendas.usaExpedicao",m.idEmpresa,0))||0,F=P?"Aguardando Separa\xE7\xE3o":"Aguardando Faturamento";if(e.$refs.transporte&&P&&!e.$refs.transporte.transporte)return $q.notify({message:"\xC9 necess\xE1rio incluir transporte para finalizar!"}),!1;await e.atualizaUsaFatura(S);let L=!1;e.geraFatura===1&&(L=!0);const z=$utils.arredondar(e.$refs.faturamento.condicaoPagamento.reduce((q,ne)=>q+(ne.valor||0),0));if(e.geraFatura===2&&!z)try{$q.loading.hide(),await $q.dialog({cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},message:"N\xE3o h\xE1 condi\xE7\xE3o de pagamento. Deseja gerar fatura?",noRefocus:!0,ok:{label:"Sim",push:!0,class:"bg-primary",textColor:"white",flat:!0},preventClose:!0,title:"Confirma?"}),$q.loading.show({message:"Processando..."}),L=!0}catch{}if(!L&&e.venda.totalDocumento&&!z)return $q.notify({message:"\xC9 necess\xE1rio incluir forma de pagamento para finalizar!"}),!1;let H={};for(const q of await $db.configuracoes.le())H[q.nome]||(H[q.nome]=[]),H[q.nome].push(q);if(H["vendas.validarestricao"]&&parseInt(H["vendas.validarestricao"][0].valor)===1&&(w.condutaRestricao||"").trim())return $q.notify({message:w.condutaRestricao,timeout:0,type:"negative",closeBtn:!0}),!1;let X="";if(m.numeroDocumentoContato||(w.numeroDocumentoNacional?m.numeroDocumentoContato=w.numeroDocumentoNacional:X+="N\xFAmero CPF/CNPJ, "),M.length){const q=[...T,...M][0];if(!m.descricaoContatoEndereco){m.descricaoContatoEndereco="".concat(q.logradouro||"",", ",q.numero||""," ",q.complemento||""," - ",q.bairro||""," - ",q.cep||""," - ",q.municipio||"","/",q.uf||"");for(const ne of x)ne.idContatoEndereco=q.id,ne.idCidade=q.idCidade,ne.descricao=m.descricaoContatoEndereco,ne.logradouro=q.logradouro,ne.numero=q.numero,ne.complemento=q.complemento,ne.condominio=q.condominio,ne.bairro=q.bairro,ne.cep=q.cep,ne.ibgeCod=q.ibgeCod,ne.municipio=q.municipio,ne.uf=q.uf,ne.ufCod=q.ufCod,ne.pais=q.pais,ne.grupo=q.grupo,ne.cidadeCodChave=q.cidadeCodChave,ne.observacao=q.observacao}}else X+="Endere\xE7o, ";if(m.telefoneContato||(O.length?m.telefoneContato=O[0].telefone:X+="Telefone, "),m.numeroDocumentoContato||(m.numeroDocumentoContato=w.numeroDocumentoNacional),(m.numeroDocumentoContato||"").length>14&&(w.numeroDocumentoEstadual===""&&(X+="I.E., "),m.regimeContato||(w.regime?m.regimeContato=w.regime:X+="Regime fiscal, ")),D.email||D.emailNfe||(X+="E-mail do emitente, "),H["vendas.validainformacoes"]&&parseInt(H["vendas.validainformacoes"][0].valor)===1&&X!=="")return $q.notify({message:"Faltando campos obrigat\xF3rios do cliente: "+X.slice(0,-2),timeout:0,type:"negative",closeBtn:!0}),!1;m.pesoTotalTransporte=0;let Y=0,de,ye;for(const q of p){if(q.descontoItem===0&&q.total===0)return $q.notify({message:"Existe item no pedido com valor zerado.",timeout:0,type:"warning",closeBtn:!0}),!1;if(q.operacaoFator===1){let ne=0;if(!de&&!ye){const U=await $db.hibrido.lista({table:"documento",where:{idContato:m.idContato,tipo:"Venda"}}),Z=await $db.hibrido.lista({table:"documento",where:{idContatoResponsavel:m.idContato,tipo:"Envelope"}});de=U,de=de.concat(Z),de=de.filter(Ce=>Ce.status&&!~["N\xE3o Aprovado","Cancelado"].indexOf(Ce.status)&&Ce.dataHoraFinalizado),ye=await $db.hibrido.lista({table:"documentoItem",whereIn:{idDocumento:de.map(Ce=>Ce.id)}})}for(const U of ye)U.idItem===q.idItem&&(!U.operacaoFator||(ne+=U.quantidade*U.operacaoFator*-1));if(q.quantidade>ne){$q.notify(q.descricaoItem.trim()+" - Saldo dispon\xEDvel para devolu\xE7\xF5es: "+ne);return}}if(q.total>0){const ne=$utils.arredondar((q.total||0)*100/(m.subTotal||1)),U=$utils.arredondar((m.totalDesconto||0)*(ne||0)/100),Z=(q.valorItem||0)*(q.quantidade||1)-(q.descontoItem||0)*(q.quantidade||1)-(U||0),Ce=(Z||0)/(q.quantidade||1);q.descontoTotalRateado=$utils.arredondar(U),q.valorReal=$utils.arredondar(Ce),q.valorRealTotal=$utils.arredondar(Z),Y+=U}else q.valorReal=$utils.arredondar(q.total/(q.quantidade||1)),q.valorRealTotal=$utils.arredondar(q.total);m.pesoTotalTransporte=$utils.arredondar(m.pesoTotalTransporte+(q.peso||0))}for(const q of g){if(q.descontoItem===0&&q.total===0&&q.idItem)return $q.notify({message:"Existe item no envelope com valor zerado.",timeout:0,type:"warning",closeBtn:!0}),!1;if(q.total>0){const ne=$utils.arredondar((q.total||0)*100/(m.subTotal||1)),U=$utils.arredondar((m.totalDesconto||0)*(ne||0)/100),Z=(q.valorItem||0)*(q.quantidade||1)-(q.descontoItem||0)*(q.quantidade||1)-(U||0),Ce=(Z||0)/(q.quantidade||1);q.descontoTotalRateado=$utils.arredondar(U),q.valorReal=$utils.arredondar(Ce),q.valorRealTotal=$utils.arredondar(Z),Y+=U}m.pesoTotalTransporte=$utils.arredondar(m.pesoTotalTransporte+(q.peso||0))}for(const q of b){if(q.quantidade===0&&q.idItem)return $q.notify({message:`${q.descricaoItem} com quantidade zerada n\xE3o permitido.`,timeout:0,type:"warning",closeBtn:!0}),!1;if(q.descontoItem===0&&q.total===0&&q.idItem)return $q.notify({message:"Item com valor zerado encontrado.",timeout:0,type:"warning",closeBtn:!0}),!1;if(q.total>0){const ne=$utils.arredondar((q.total||0)*100/(m.subTotal||1)),U=$utils.arredondar((m.totalDesconto||0)*(ne||0)/100),Z=(q.valorItem||0)*(q.quantidade||1)-(q.descontoItem||0)*(q.quantidade||1)-(U||0),Ce=(Z||0)/(q.quantidade||1);q.descontoTotalRateado=$utils.arredondar(U),q.valorReal=$utils.arredondar(Ce),q.valorRealTotal=$utils.arredondar(Z),Y+=U}m.pesoTotalTransporte=$utils.arredondar(m.pesoTotalTransporte+(q.peso||0))}for(const q of _){if(q.descontoItem===0&&q.total===0&&q.idItem)return $q.notify({message:"Item com valor zerado encontrado.",timeout:0,type:"warning",closeBtn:!0}),!1;if(q.total>0){const ne=$utils.arredondar((q.total||0)*100/(m.subTotal||1)),U=$utils.arredondar((m.totalDesconto||0)*(ne||0)/100),Z=(q.valorItem||0)*(q.quantidade||1)-(q.descontoItem||0)*(q.quantidade||1)-(U||0),Ce=(Z||0)/(q.quantidade||1);q.descontoTotalRateado=$utils.arredondar(U),q.valorReal=$utils.arredondar(Ce),q.valorRealTotal=$utils.arredondar(Z),Y+=U}m.pesoTotalTransporte=$utils.arredondar(m.pesoTotalTransporte+(q.peso||0))}for(const q of I){if(q.descontoItem===0&&q.total===0&&q.idItem)return $q.notify({message:"Item com valor zerado encontrado.",timeout:0,type:"warning",closeBtn:!0}),!1;if(q.total>0){const ne=$utils.arredondar((q.total||0)*100/(m.subTotal||1)),U=$utils.arredondar((m.totalDesconto||0)*(ne||0)/100),Z=(q.valorItem||0)*(q.quantidade||1)-(q.descontoItem||0)*(q.quantidade||1)-(U||0),Ce=(Z||0)/(q.quantidade||1);q.descontoTotalRateado=$utils.arredondar(U),q.valorReal=$utils.arredondar(Ce),q.valorRealTotal=$utils.arredondar(Z),Y+=U}m.pesoTotalTransporte=$utils.arredondar(m.pesoTotalTransporte+(q.peso||0))}for(const q of g)if($utils.arredondar(q.valorItem-q.descontoItem)!==$utils.arredondar(q.total)&&q.idItem)return $q.notify({message:`${q.descricaoItem} com valor total incorreto.`,timeout:0,type:"warning",closeBtn:!0}),!1;if(m.totalDesconto!==$utils.arredondar(Y)){const q=$utils.arredondar((m.totalDesconto||0)-(Y||0));let ne,U=0;for(const Z of p)Z.total>U&&(U=Z.total,ne=Z);for(const Z of g)Z.total>U&&(U=Z.total,ne=Z);for(const Z of b)Z.total>U&&(U=Z.total,ne=Z);for(const Z of _)Z.total>U&&(U=Z.total,ne=Z);for(const Z of I)Z.total>U&&(U=Z.total,ne=Z);if(ne){const Z=(ne.descontoTotalRateado||0)+(q||0),Ce=(ne.valorItem||0)*(ne.quantidade||1)-(ne.descontoItem||0)-(Z||0),Q=(Ce||0)/(ne.quantidade||1);ne.descontoTotalRateado=$utils.arredondar(Z),ne.valorReal=$utils.arredondar(Q),ne.valorRealTotal=$utils.arredondar(Ce)}}const W=[],re=(w.numeroDocumentoNacional||"").replace(/[^\d+]/gi,"");let _e=new Date(new Date().setDate(1)).toISOString().replace(/T.*/,"T00:00:00.000Z"),ve=new Date().toISOString().replace(/T.*/,"T23:59:59.999Z");const ke=[];await $erp().documento.where(["tipo","idContato","dataHoraFinalizado"]).between(["Venda",w.id,_e],["Venda",w.id,ve],!0,!0).each(q=>{["N\xE3o Aprovado","Or\xE7amento"].includes(q.status)||ke.push(q)});let Ie=re.length===11,he=re.length===14;e.modalProdutoControlado.permiteQuantidadeExcedida=!1;for(const q of[...p,...b,..._,...I,...g])if(q.idItem&&q.operacaoFator===-1&&q.ncm==="87089990"){const ne=await $erp().item.get(q.idItem)||{};if(ne.id){let U=q.quantidade,Z=!1,Ce="";U+=[...p,...b,..._,...I,...g].reduce((Q,V)=>V.idItem===q.idItem&&V.id!==q.id?Q+(V.quantidade||0):Q,0);for(const Q of ke)U+=(await $db.hibrido.lista({table:"documentoItem",where:{idItem:q.idItem,idDocumento:Q.id}})).reduce((R,ee)=>R+(ee.quantidade||0),0);U=$utils.arredondar(U,4),ne.controladoExercito&&Ie&&(Ce="Venda proibida para pessoa f\xEDsica",Z=!0),!Z&&he&&ne.controladoExercito&&ne.controladoExercito<U&&(Ce="M\xE1ximo permitido pelo Ex\xE9rcito para vendas no m\xEAs: "+e.$filters.numero(ne.controladoExercito,4),Z=!0),!Z&&Ie&&ne.controladoPoliciaFederal&&ne.controladoPoliciaFederal<U&&(Ce="M\xE1ximo permitido pela Pol\xEDcia Federal para vendas no m\xEAs: "+e.$filters.numero(ne.controladoPoliciaFederal,4),Z=!0),!Z&&Ie&&ne.controladoPoliciaCivil&&ne.controladoPoliciaCivil<U&&(Ce="M\xE1ximo permitido pela Pol\xEDcia Civil para vendas no m\xEAs: "+e.$filters.numero(ne.controladoPoliciaCivil,4),Z=!0),!Z&&he&&ne.controladoPoliciaFederal&&ne.controladoPoliciaFederal<U&&(Ce="M\xE1ximo permitido pela Pol\xEDcia Federal para vendas no m\xEAs: "+e.$filters.numero(ne.controladoPoliciaFederal,4),Z=!0,e.modalProdutoControlado.permiteQuantidadeExcedida=!0,$q.notify({message:"Solicitar permiss\xE3o para a venda"})),!Z&&he&&ne.controladoPoliciaCivil&&ne.controladoPoliciaCivil<U&&(Ce="M\xE1ximo permitido pela Pol\xEDcia Civil para vendas no m\xEAs: "+e.$filters.numero(ne.controladoPoliciaCivil,4),Z=!0,e.modalProdutoControlado.permiteQuantidadeExcedida=!0,$q.notify({message:"Solicitar permiss\xE3o para a venda"})),Z&&W.push({descricao:ne.descricao,tooltip:Ce})}}if(W.length){e.modalProdutoControlado.itens=W,$q.loading.hide();let q=!1;if(await new Promise(async(ne,U)=>{e.modalProdutoControlado.resolve=ne,e.modalProdutoControlado.reject=U,e.modalProdutoControlado.visivel=!0}).catch(()=>{q=!0}),q)return;$q.loading.show({message:"Processando..."})}if(F){m.dataHoraFinalizado=$utils.dataAtual(),m.idContatoFinalizado=n;const q=m.status;m.status=F;for(const ne of p)ne.dataHoraFinalizado=m.dataHoraFinalizado,ne.valorReal=$utils.arredondar(ne.valorReal),ne.valorRealTotal=$utils.arredondar(ne.valorRealTotal),ne.operacaoFator<0&&(ne.status=F),ne.operacaoFator>0&&(ne.status="Entregue");for(const ne in v)v[ne].status="Processando";for(const ne of g)ne.dataHoraFinalizado=m.dataHoraFinalizado,ne.descontoTotalRateado=$utils.arredondar(ne.descontoTotalRateado),ne.valorReal=$utils.arredondar(ne.valorReal),ne.valorRealTotal=$utils.arredondar(ne.valorRealTotal),ne.operacaoFator<0&&(ne.status=F),ne.operacaoFator>0&&(ne.status="Entregue");for(const ne of e.customs)ne.documento.status="Processando";for(const ne of e.oss)ne.documento.status="Processando";for(const ne of e.kits)ne.documento.status="Processando";for(const ne of b)ne.dataHoraFinalizado=m.dataHoraFinalizado,ne.descontoTotalRateado=$utils.arredondar(ne.descontoTotalRateado),ne.valorReal=$utils.arredondar(ne.valorReal),ne.valorRealTotal=$utils.arredondar(ne.valorRealTotal),ne.operacaoFator<0&&(ne.status=F),ne.operacaoFator>0&&(ne.status="Entregue");for(const ne of _)ne.dataHoraFinalizado=m.dataHoraFinalizado,ne.descontoTotalRateado=$utils.arredondar(ne.descontoTotalRateado),ne.valorReal=$utils.arredondar(ne.valorReal),ne.valorRealTotal=$utils.arredondar(ne.valorRealTotal),ne.operacaoFator<0&&(ne.status=F),ne.operacaoFator>0&&(ne.status="Entregue");for(const ne of I)ne.dataHoraFinalizado=m.dataHoraFinalizado,ne.descontoTotalRateado=$utils.arredondar(ne.descontoTotalRateado),ne.valorReal=$utils.arredondar(ne.valorReal),ne.valorRealTotal=$utils.arredondar(ne.valorRealTotal),ne.operacaoFator<0&&(ne.status=F),ne.operacaoFator>0&&(ne.status="Entregue");e.documentoStatus.push({id:$utils.uuid(),idDocumento:m.id,operacao:m.operacao,statusOriginal:q,statusFinalizado:F,dataHoraEmissao:m.dataHoraFinalizado,cpfUsuario:$db.usuario.logado.numeroDocumentoNacional});for(const ne in v)e.documentoStatus.push({id:$utils.uuid(),idDocumento:v[ne].id,operacao:"Mudan\xE7a status envelope",statusOriginal:q,statusFinalizado:"Processando",dataHoraEmissao:m.dataHoraFinalizado,cpfUsuario:$db.usuario.logado.numeroDocumentoNacional})}else{m.dataHoraFinalizado=$utils.dataAtual(),m.idContatoFinalizado=n,m.status="Aguardando Entrega";for(const q of p)q.dataHoraFinalizado=m.dataHoraFinalizado,q.operacaoFator<0&&(q.status="Finalizado"),q.operacaoFator>0&&(q.status="Entregue");for(const q in v)v[q].status="Processando",v[q].dataHoraFinalizado=m.dataHoraFinalizado;for(const q of g)q.dataHoraFinalizado=m.dataHoraFinalizado,q.operacaoFator<0&&(q.status="Finalizado"),q.operacaoFator>0&&(q.status="Entregue");for(const q of e.customs)q.documento.status="Processando",q.documento.dataHoraFinalizado=m.dataHoraFinalizado;for(const q of e.oss)q.documento.status="Processando",q.documento.dataHoraFinalizado=m.dataHoraFinalizado;for(const q of e.kits)q.documento.status="Processando",q.documento.dataHoraFinalizado=m.dataHoraFinalizado;for(const q of b)q.dataHoraFinalizado=m.dataHoraFinalizado,q.operacaoFator<0&&(q.status="Finalizado"),q.operacaoFator>0&&(q.status="Entregue");for(const q of _)q.dataHoraFinalizado=m.dataHoraFinalizado,q.operacaoFator<0&&(q.status="Finalizado"),q.operacaoFator>0&&(q.status="Entregue");for(const q of I)q.dataHoraFinalizado=m.dataHoraFinalizado,q.operacaoFator<0&&(q.status="Finalizado"),q.operacaoFator>0&&(q.status="Entregue")}const De=await $db.permissao.objeto("Diretiva_Vendas_DescontoMaximo"),Te=parseInt(await $db.configuracoes.leValorComFiltroEmpresa("vendas.margem.trava",m.idEmpresa,0))||0;if(!De&&Te&&$lodash.get(e.margem[m.id],"limite",!1))return $q.notify({message:"Venda com \xEDndice inferior ao permitido"}),!1;if(!await $db.venda.checarTabelasPreco({carrinho:p,itensEnvelopes:g,documentosItensCustoms:b,documentosItensOSs:_,documentosItemKits:I,tela:e}))return;let J=!1;if(L){let q={};const ne=await $db.configuracoes.leValorNumerico("venda.codigoconsumidor");if(w.codigoContato!==ne&&(q=await $db.hibrido.lista({table:"documento",where:{idContato:m.idContato,idEmpresa:m.idEmpresa,tipo:"Fatura",status:"Aberta"}})),q.length)q=$lodash.orderBy(q,"dataHoraEmissao","desc"),m.idFatura=q[0].id;else{let U=0,Z=0,Ce=m.totalDocumento;m.idFatura=$utils.uuid(),await $db.fatura.grava({fatura:{id:m.idFatura,dataHoraEmissao:m.dataHoraFinalizado,calcularAutomatico:"Sim",tipo:"Fatura",operacao:"Faturamento",status:"Aberta",tipoFrete:"CIF",freteSeparado:!1,totalDesconto:U,totalPercentualDesconto:Z,subTotal:m.subTotal,totalDocumento:Ce,idEmpresa:m.idEmpresa,idEmpresaEndereco:m.idEmpresaEndereco,descricaoEmpresa:m.descricaoEmpresa,numeroDocumentoEmpresa:m.numeroDocumentoEmpresa,inscricaoMunicipalEmpresa:m.inscricaoMunicipalEmpresa,codigoMunicipioEmpresa:m.codigoMunicipioEmpresa,optanteSimplesNacional:m.optanteSimplesNacional,idContato:m.idContato,idContatoEndereco:m.idContatoEndereco,numeroDocumentoContato:m.numeroDocumentoContato,descricaoContato:m.descricaoContato,descricaoContatoEndereco:m.descricaoContatoEndereco,telefoneContato:m.telefoneContato,emailContato:m.emailContato,regimeContato:m.regimeContato}})}J=await $db.permissao.objeto("atendimento//fatura")}return e.venda=m,e.carrinho=p,e.envelopes=v,e.itensEnvelopes=g,e.documentoEndereco=x,await e.salvarVenda(),$utils.enviarWhatsapp({configuracao:"venda",documento:$utils.clonar(e.venda),loading:!0}),$utils.enviarEmail({configuracao:"venda",documento:$utils.clonar(e.venda),loading:!0}),$q.notifyPositive("Or\xE7amento finalizado"),J&&!t?(localStorage.setItem("idFatura",e.venda.idFatura),await e.$nextTick(),e.$router.push({name:"AtendimentoFatura",params:{id:e.venda.idContato}})):(e.$emit("fechar"),e.$emit("executar","atualizar")),!0}catch(i){let n="Erro ao finalizar.";/^GError:.+/.test(i.message)&&(n=i.message.slice(7)),$q.notify({type:"negative",message:n}),console.error(i)}finally{$q.loading.hide(),r=new Date,a=(r.getTime()-o.getTime())/1e3,$db.sincronismo.logar(`${new Date().toLocaleTimeString("pt-br")} venda finalizada ${new Intl.NumberFormat("pt-BR").format(a)}s`)}}function Rbe({status:e,objsVenda:t}){const{venda:o,carrinho:r,envelopes:a,itensEnvelopes:i,customs:n,oss:s,kits:l}=t,u=[...r,...i];o.status=e;for(const c in a)a[c].status=e;for(const c of u)c.status=e;for(const c of n){c.documento.status=e;for(const d of c.documentoItens)d.status=e}for(const c of s){c.documento.status=e;for(const d of c.documentoItens)d.status=e}for(const c of l!=null?l:[]){const d=c.documentosItem.find(f=>f.operacaoFator===-1);c.documento.status=e,d.status=e}return{objsVenda:t}}const Gp=["Aguardando Libera\xE7\xE3o","Aguardando Estoque","Aguardando Financeiro","Or\xE7amento"],Wp=["N\xE3o Aprovado","Cancelado"];async function Vbe(e){var l,u,c,d,f;const t=await $db.venda.leCompleto(e),o=await $db.venda.duplicar(t),r="Or\xE7amento",a=$utils.dataAtual(),i=[],n=[];let s;delete o.venda.idFatura,delete o.venda.dataHoraFinalizado,delete o.venda.pesoTotalTransporte,o.venda.status=r,o.venda.dataHoraEmissao=a,o.venda.subTotal=0,o.venda.totalDesconto=0,o.venda.totalDocumento=0,o.venda.totalPercentualDesconto=0,o.venda.totalProduto=0,o.venda.totalServico=0,o.venda.valorFrete=0,o.arquivo=[],o.carrinho=o.carrinho.filter(m=>m.operacaoFator===-1),Array.prototype.push.apply(i,o.carrinho),Array.prototype.push.apply(i,o.itensEnvelopes);for(const m in o.envelopes){const p=o.envelopes[m];n.push(p)}o.envelopes=n,o.customs.forEach(m=>{m.arquivo=[],m.documento.status=r,m.documento.dataHoraEmissao=a,m.documento.dataHoraFinalizado="",Array.prototype.push.apply(i,m.documentoItens)}),o.oss.forEach(m=>{m.arquivo=[],m.documento.status=r,m.documento.dataHoraEmissao=a,m.documento.dataHoraFinalizado="",Array.prototype.push.apply(i,m.documentoItens)}),o.kits.forEach(m=>{m.documento.dataHoraEmissao=a,delete m.documento.status,delete m.documento.dataHoraFinalizado,delete m.documento.freteSeparado,delete m.documento.calcularAutomatico,delete m.documento.idDocumentoAdicional,delete m.documento.totalDesconto,delete m.documento.totalPercentualDesconto,Array.prototype.push.apply(i,m.documentosItem)}),o.envelopes.forEach(m=>{m.arquivo=[],m.status=r,m.dataHoraEmissao=a,m.dataHoraFinalizado=""});for(const m of i){let p,v,g=!0;if(delete m.dataHoraFinalizado,delete m.quantidadeRealizado,m.status=r,m.dataHoraEmissao=a,m.descontoFaturaRateado=0,m.descontoItem=0,m.descontoPercentualItem=0,m.descontoSubTotal=0,m.descontoTotalRateado=0,m.valorDifal=0,m.valorIcms=0,m.valorIcmsSt=0,m.valorIpi=0,!!m.idItem){if(p=await $erp().item.get(m.idItem),v=(l=p==null?void 0:p.valorVenda)!=null?l:0,o.venda.idItemTabelaPreco){let x,b;x=await $erp().itemTabelaPreco.get(o.venda.idItemTabelaPreco),x&&(b=await $db.itemTabelaPreco.obterValores(x,p,4),v=(u=b==null?void 0:b.valorVenda)!=null?u:0)}s=(await $db.estoqueSaldoProdutoEmpresa.le({idItem:p.id,idEmpresa:o.venda.idEmpresa,tipoEstoque:"Dispon\xEDvel"})).find(x=>x.idItem),m.total=$utils.arredondar(v*m.quantidade),m.subTotal=m.total,m.valorCusto=0,m.valorCustoMedio=(c=s==null?void 0:s.valorCustoMedio)!=null?c:0,m.valorCustoReposicao=(d=p.valorCustoReposicao)!=null?d:0,m.valorCustoUltimo=(f=s==null?void 0:s.valorCusto)!=null?f:0,m.valorItem=v,m.valorItemUltimo=p.valorVenda,m.valorOriginal=v,m.valorReal=v,m.valorRealTotal=m.total;for(const x of o.kits){const b=x.documentosItem.find(_=>_.id===m.id);if(b){b.idDocumento===b.idDocumentoAdicional&&(delete b.status,delete b.valorDifal,delete b.valorIcms,delete b.valorIcmsSt,delete b.valorIpi,g=!1);break}}g&&(o.venda.subTotal+=m.total)}}return o.venda.subTotal=$utils.arredondar(o.venda.subTotal),o.venda.totalDocumento=o.venda.subTotal,o.oss.forEach(m=>{m.documento.subTotal=$utils.arredondar(m.documentoItens.reduce((p,v)=>p+v.subTotal,0)),m.documento.totalDocumento=m.documento.subTotal,m.documento.totalDesconto=0,m.documento.totalPercentualDesconto=0}),o.customs.forEach(m=>{m.documento.subTotal=$utils.arredondar(m.documentoItens.reduce((p,v)=>p+v.subTotal,0)),m.documento.totalDocumento=m.documento.subTotal,m.documento.totalDesconto=0,m.documento.totalPercentualDesconto=0}),o.kits.forEach(m=>{m.documento.subTotal=$utils.arredondar(m.documentosItem.reduce((p,v)=>v.idDocumento===v.idDocumentoAdicional?p:p+v.subTotal,0)),m.documento.totalDocumento=m.documento.subTotal}),o.envelopes.forEach(m=>{const p=o.itensEnvelopes.filter(v=>v.idDocumentoAdicional===m.id);m.subTotal=$utils.arredondar(p.reduce((v,g)=>v+g.subTotal,0)),m.totalDocumento=m.subTotal,m.totalDesconto=0,m.totalPercentualDesconto=0}),await $db.venda.grava({venda:o.venda,customs:o.customs,kits:o.kits,oss:o.oss,envelopes:o.envelopes,carrinho:[...o.carrinho,...o.itensEnvelopes],documentoEndereco:o.documentoEndereco,documentoContato:o.documentoContato,arquivo:o.arquivo}),o.venda.id}async function Bbe({where:e,vendaCardPagination:t}){const o=await $db.permissao.objeto("Diretiva_Venda/Fatura_OutrasLojas_VerTodos")||!1,r={funcao:"1D8484A0-8FBC-438B-AC99-A42085D59F71",sort:["dataHoraFinalizado","dataHoraEmissao"],dir:["desc","desc"],limit:5,termoBusca:"",permissaoVendasOutrasLojas:o};return(await $utils.geeksApi({vendasAbertas:{...r,filtros:{...e,status:Gp},page:t.vendasAbertas.page},vendasFinalizadas:{...r,filtros:{...e,statusDiferenteDe:[...Gp,...Wp]},page:t.vendasFinalizadas.page},vendasCanceladas:{...r,filtros:{...e,status:Wp},page:t.vendasCanceladas.page}})).data}async function qbe({where:e}){const t=await $db.permissao.objeto("Diretiva_Venda/Fatura_OutrasLojas_VerTodos")||!1;return(await $utils.geeksApi({vendasFinalizadas:{funcao:"1D8484A0-8FBC-438B-AC99-A42085D59F71",sort:["dataHoraFinalizado","dataHoraEmissao"],dir:["desc","desc"],termoBusca:"",permissaoVendasOutrasLojas:t,filtros:{...e,statusDiferenteDe:[...Gp,...Wp]},limit:1e3,page:1}})).data}async function Lbe(e){var g,x;const{where:t,page:o,limit:r}=e!=null?e:{};if(!t.idContato)return{data:[],total:0,totalPages:0,somaTotalDocumento:0};let a,i,n;t.status==="aberta"&&(i=Gp.join(",")),t.status==="finalizada"&&(n=[...Gp,...Wp].join(",")),t.status==="cancelada"&&(i=Wp.join(","));const{idContato:s,periodo:l,grupos:u}=t,c=await $db.permissao.objeto("Diretiva_Venda/Fatura_OutrasLojas_VerTodos"),d=(await $db.contato.ler({filtros:{ativo:!0,empresas:!0}})).data;let f=[],m=new Date(new Date(l.dataIni).toDateString()),p=new Date(new Date(l.dataFim).toDateString()),v=await $db.hibrido.lista({table:"documento",where:{idContato:s,tipo:"Venda"}});if(f=v,v=await $db.hibrido.lista({table:"documento",where:{idContato:s,tipo:"Envelope"}}),v=v.filter(b=>!b.documentoId),f=f.concat(v),v=await $db.hibrido.lista({table:"documento",where:{idContatoResponsavel:s,tipo:"Envelope"}}),v=v.filter(b=>!b.documentoId&&!f.some(_=>_.id===b.id)),f=f.concat(v),i&&(f=f.filter(b=>b.status&&~(i==null?void 0:i.indexOf(b.status)))),n&&(f=f.filter(b=>b.status&&!~(n==null?void 0:n.indexOf(b.status)))),c||(f=f.filter(b=>d.find(_=>_.id===b.idEmpresa))),l.dataIni&&l.dataFim&&(f=f.filter(b=>{let _=b.dataHoraFinalizado||b.dataHoraEmissao;if(_)return _=new Date(new Date(_).toDateString()),_>=m&&_<=p})),!u.length){let b;b=0;for(const _ of f)b+=(g=_.totalDocumento)!=null?g:0;f=$lodash.orderBy(f,["dataHoraFinalizado","dataHoraEmissao"],["desc","desc"]),a={data:f.slice((o-1)*r,(o-1)*r+r),total:f.length,totalPages:(f.length/r|0)+(f.length%r>0?1:0),somaTotalDocumento:b}}if(u.length){const b=$utils.clonarV2(u).map(N=>$utils.removerAcentos(N));let _=f.filter(N=>{if(!N.numero)return!1;const P=String(N.numero);for(const F of b){const L=new RegExp(F,"gi");if(P.match(L))return!0}}),w=[];for(const N of f){const P=await $db.hibrido.lista({table:"documentoItem",where:{idDocumento:N.id}});w=[...w,...P.filter(F=>F.idItem)]}let S=[],D={};for(const N of w)if(N.idItem&&!S.filter(P=>P.id===N.idItem).length){const P=await $db.item.leNew({id:N.idItem});S.push(P)}let M=[],O=w.filter(N=>{if(!N.idItem&&!N.descricaoItem)return!1;const P=$utils.removerAcentos(N.descricaoItem);for(const F of b){const L=new RegExp(F,"gi");if(P.match(L))return M.push(N.id),!0}});D=S.filter(N=>{const P=N.marca||"",F=N.referencia||"",L=N.codigoItem?"#"+String(N.codigoItem):"",z=N.codigoBarras||"",H=$utils.removerAcentos(P+F+L+z);for(const X of b){const Y=new RegExp(X,"gi");if(H.match(Y))return!0}});for(const N of _){const P=w.filter(F=>{if(F.idItem&&F.idDocumento===N.id&&!M.includes(F.id))return M.push(F.id),!0});O=[...O,...P]}for(const N of D){const P=w.filter(F=>{if(F.idItem===N.id&&!M.includes(F.id))return M.push(F.id),!0});O=[...O,...P]}O=O.filter(N=>{let P=$utils.clonar(b),F=f.filter(H=>H.id===N.idDocumento),L=S.filter(H=>H.id===N.idItem);F=F.length?F[0]:{},L=L.length?L[0]:{};let z=F.numero?String(F.numero):"";if(z+=N.descricaoItem||"",z+=L.marca||"",z+=L.referencia||"",z+=L.codigoItem?"#"+String(L.codigoItem):"",z+=L.codigoBarras||"",z)for(const H of b){const X=new RegExp(H,"gi");z.match(X)&&(P=P.filter(Y=>Y!==H))}if(!P.length)return!0});let T=[];_=[],D={};for(const N of O)if(T.includes(N.idDocumento)||(T.push(N.idDocumento),_=[..._,...f.filter(P=>P.id===N.idDocumento)]),!D[N.idItem]){const P=S.filter(F=>F.id===N.idItem);P.length&&(D[N.idItem]=P[0])}let I;f=$lodash.orderBy(_,["dataHoraEmissao"],["desc"]),I=0;for(const N of f)I+=(x=N.totalDocumento)!=null?x:0;a={data:f.slice((o-1)*r,(o-1)*r+r),total:f.length,totalPages:(f.length/r|0)+(f.length%r>0?1:0),somaTotalDocumento:I}}return a}async function $be(e){var c,d,f,m;const{filtro:t,termoBusca:o,limit:r,page:a,sort:i,dir:n=!1}=e!=null?e:{},s={};let l,u;if($db.hibrido.isOnline()){~((c=t.status)==null?void 0:c.indexOf("Finalizado"))||delete t.faturado;let p,v,g,x;const b=await $utils.geeksApi({listarVendas:{funcao:"A43AD40B-2496-4349-9789-968A32487885",filtro:t,limit:r,page:a,sort:i,dir:n}});return p=b.data.listarVendas.data,v=b.data.listarVendas.total,g=b.data.listarVendas.totalPages,x=b.data.listarVendas.somaTotalDocumento,{data:p,total:v,totalPages:g,somaTotalDocumento:x}}if(/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test((d=t.id)!=null?d:t.termoBusca)){console.log("ID VENDA",t.id,t.termoBusca);const p=((f=t.id)!=null?f:t.termoBusca).toUpperCase(),v=[],g=await $db.hibrido.le({table:"documento",id:p});return(g==null?void 0:g.tipo)==="Venda"&&t.idsEmpresa.indexOf(g.idEmpresa)&&v.push(g),{data:v,total:1,totalPages:1}}if(s.tipo="Venda",!s.id&&t.status&&typeof t.status=="string"&&(s.status=t.status),l=Se().documento.where(s),t.termoBusca){const p=$utils.tratamentoCompletoString(t.termoBusca);l=l.filter(v=>~$utils.tratamentoCompletoString(v.descricaoContato).indexOf(p))}if(t.status&&Array.isArray(t.status)&&t.status.length&&(l=l.filter(p=>~t.status.indexOf(p.status))),t.idEmpresa&&(l=l.filter(p=>p.idEmpresa===t.idEmpresa)),!t.idEmpresa&&((m=t.idsEmpresa)==null?void 0:m.length)>0&&(l=l.filter(p=>~t.idsEmpresa.indexOf(p.idEmpresa))),typeof t.idContatoVendedorDigitador=="string"&&(l=l.filter(p=>~[p.idContatoDigitador,p.idContatoVendedor].indexOf(t.idContatoVendedorDigitador))),t.statusEnvio==="Enviados"&&(l=l.filter(p=>p==null?void 0:p.rotaJson)),t.statusEnvio==="N\xE3o Enviados"&&(l=l.filter(p=>!(p!=null&&p.rotaJson))),t.descricaoContato){const p=$utils.tratamentoCompletoString(t.descricaoContato.toLowerCase());l=l.filter(v=>{let g;return v.descricaoContato?(g=$utils.tratamentoCompletoString(v.descricaoContato.toLowerCase()),!!~g.indexOf(p)):!1})}if(Number(t.totalDocumento)&&t.totalDocumento!==0&&(l=await l.filter(p=>p.totalDocumento>t.totalDocumento)),t.tipoData==="dataFaturado"){const p=new Date(t.periodoIni).setHours(0,0,0,0),v=new Date(t.periodoFim).setHours(0,0,0,0),g=[];await Se().documento.where({tipo:"Fatura"}).each(b=>{let _=new Date(b.dataHoraFinalizado).setHours(0,0,0,0);if(!_)return!1;p&&v&&_>=p&&_<=v&&g.push(b.id),!v&&p&&_>=p&&g.push(b.id),!p&&v&&_<=v&&g.push(b.id)}),l=l.filter(function(b){return t.status.indexOf("Finalizado")===-1?!0:b.idFatura?!!g.find(_=>_===b.idFatura):!1})}if(~["dataEmissao","dataFinalizacao"].indexOf(t.tipoData)){const p=new Date(t.periodoIni).setHours(0,0,0,0),v=new Date(t.periodoFim).setHours(0,0,0,0);l=await l.filter(g=>{let x;return t.tipoData==="dataEmissao"&&(x=new Date(g.dataHoraEmissao).setHours(0,0,0,0)),t.tipoData==="dataFinalizacao"&&(x=new Date(g.dataHoraFinalizado).setHours(0,0,0,0)),x?p&&v?x>=p&&x<=v:p?x>=p:v?x<=v:!1:!1})}return l=await l.toArray(),l=$lodash.orderBy(l,i,n),u=l.length,l=l.splice((a-1)*r,r),{data:l,total:u,totalPages:Math.ceil(u/r)||1}}var Ube={grava:async e=>{e=Vr(e);let t=(e.customs||[]).map(c=>c.documento||{}),o=(e.customsOriginal||[]).map(c=>c.documento||{}),r=(e.customs||[]).reduce((c,d)=>[...c,...d.documentoItens||[]],[]),a=(e.customsOriginal||[]).reduce((c,d)=>[...c,...d.documentoItens||[]],[]),i=(e.customs||[]).reduce((c,d)=>[...c,...d.arquivo||[]],[]),n=(e.customsOriginal||[]).reduce((c,d)=>[...c,...d.arquivo||[]],[]);await lo("documento",o,t),await lo("documentoItem",a,r),await lo("arquivo",n,i),t=(e.oss||[]).map(c=>c.documento||{}),o=(e.ossOriginal||[]).map(c=>c.documento||{}),r=(e.oss||[]).reduce((c,d)=>[...c,...d.documentoItens||[]],[]),a=(e.ossOriginal||[]).reduce((c,d)=>[...c,...d.documentoItens||[]],[]),i=(e.oss||[]).reduce((c,d)=>[...c,...d.arquivo||[]],[]),n=(e.ossOriginal||[]).reduce((c,d)=>[...c,...d.arquivo||[]],[]),await lo("documento",o,t),await lo("documentoItem",a,r),await lo("arquivo",n,i),await $db.kit.salvar({atuais:e.kits,originais:e.kitsOriginal,operacaoFatorDestino:-1,operacaoFatorOrigem:0});let s=[],l=[],u={};for(const c of e.envelopesOriginal||[])s=[...s,...c.documentoContato||[]],delete c.documentoContato;for(const c of e.envelopes||[]){if(l=[...l,...c.documentoContato||[]],u=c.armacao||{},u.id){const d=await Se().item.get(u.id)||{};if(d.id){const f={};d.tamanho!==u.tamanho&&(f.tamanho=u.tamanho),d.altura!==u.altura&&(f.altura=u.altura),d.largura!==u.largura&&(f.largura=u.largura),d.diagonal!==u.diagonal&&(f.diagonal=u.diagonal||0),d.ponte!==u.ponte&&(f.ponte=u.ponte),d.armacaoMaterial!==u.armacaoMaterial&&(f.armacaoMaterial=u.armacaoMaterial),d.tipoMontagem!==u.tipoMontagem&&(f.tipoMontagem=u.tipoMontagem),Object.keys(f).length&&(await $erpUpdate().item.update(u.id,f),await ut("atualizar","item",u.id,f),$db.item.carregarMemoria(d.id))}}delete c.documentoContato,delete c.armacao,delete c.pupilometro}if(await lo("documento",e.envelopesOriginal||[],e.envelopes||[]),await lo("documentoContato",s||[],l||[]),await lo("documentoItem",e.carrinhoOriginal||[],e.carrinho||[]),await lo("documentoCondicaoPagamento",e.condicaoPagamentoOriginal||[],e.condicaoPagamento||[]),await lo("documentoEndereco",e.documentoEnderecoOriginal||[],e.documentoEndereco||[]),await lo("documentoContato",e.documentoContatoOriginal||[],e.documentoContato||[]),await lo("documentoStatus",[],e.documentoStatus||[]),await lo("arquivo",e.arquivoOriginal||[],e.arquivo||[]),!Object.keys(e.vendaOriginal||{}).length)await $erpPut().documento.put(e.venda),await ut("adicionar","documento",e.venda.id,e.venda);else{const c=Ja(e.vendaOriginal,e.venda);Object.keys(c).length&&(await $erpUpdate().documento.update(e.venda.id,c),await ut("atualizar","documento",e.venda.id,c))}},leListaCompleta:async function(e){var b,_;const{filtros:t,termoBusca:o,limit:r,page:a,sort:i,dir:n=!1}=e!=null?e:{};if($db.hibrido.isOnline()){let w,S,D,M;const O=await $utils.geeksApi({listarAtendimentoVendas:{funcao:"36F67A5B-BC74-4786-BCB5-F3A24ABA6467",filtros:t,termoBusca:t.termoBusca,limit:r,page:a,sort:i,dir:n}});return w=O.data.listarAtendimentoVendas.data,S=O.data.listarAtendimentoVendas.total,D=O.data.listarAtendimentoVendas.totalPages,M=O.data.listarAtendimentoVendas.somaTotalDocumento,{data:w,total:S,totalPages:D,somaTotalDocumento:M}}let s=t||{};for(const w in t){if(t[w]===null||t[w]===void 0)throw"Erro no filtro "+w;typeof t[w]=="string"&&(t[w]=t[w].trim())}let l={tipo:"Venda"};"idVenda"in s&&s.idVenda&&(l.id=s.idVenda),"idContato"in s&&s.idContato&&(l.idContato=s.idContato),"idFatura"in s&&s.idFatura&&(l.idFatura=s.idFatura),"idContatoVendedor"in s&&s.idContatoVendedor&&(l.idContatoVendedor=s.idContatoVendedor),"idContatoDigitador"in s&&s.idContatoDigitador&&(l.idContatoDigitador=s.idContatoDigitador),"idEmpresa"in s&&s.idEmpresa&&(l.idEmpresa=s.idEmpresa),"status"in s&&s.status&&s.status.indexOf(",")===-1&&(l.status=s.status),"operacao"in s&&s.operacao&&(l.operacao=s.operacao),"codigoContato"in s&&s.codigoContato&&(l.codigoContato=s.codigoContato);let u=await Se().documento;if(Object.keys(l).length&&(u=await u.where(l)),"emissao"in s&&s.emissao){const w=new Date(s.emissao.ini).setHours(0,0,0,0),S=new Date(s.emissao.fim).setHours(0,0,0,0);u=await u.filter(D=>{const M=new Date(D.dataHoraEmissao).setHours(0,0,0,0);return w&&S?M>=w&&M<=S:w?M>=w:S?M<=S:!0})}if("finalizado"in s&&s.finalizado){const w=new Date(s.finalizado.ini).setHours(0,0,0,0),S=new Date(s.finalizado.fim).setHours(0,0,0,0);u=await u.filter(D=>{const M=new Date(D.dataHoraFinalizado).setHours(0,0,0,0);return w&&S?M>=w&&M<=S:w?M>=w:S?M<=S:!0})}if("idEmpresa"in s&&s.idEmpresa&&(u=await u.filter(w=>w.idEmpresa?s.idEmpresa===w.idEmpresa:!1)),"cliente"in s&&s.cliente.length>0&&(u=await u.filter(w=>{if(!w.descricaoContato)return!1;const S=$utils.removerCaracteresEspeciais(w.descricaoContato.toString().toLowerCase()),D=$utils.removerCaracteresEspeciais(s.cliente.toString().toLowerCase());return S.indexOf(D)!==-1})),"valorTotal"in s&&s.valorTotal!==0&&(u=await u.filter(w=>w.totalDocumento>s.valorTotal)),((b=s==null?void 0:s.faturado)==null?void 0:b.ini)||((_=s==null?void 0:s.faturado)==null?void 0:_.fim)){const w=new Date(s.faturado.ini).setHours(0,0,0,0),S=new Date(s.faturado.fim).setHours(0,0,0,0),D=[];await Se().documento.where({tipo:"Fatura"}).each(M=>{let O=new Date(M.dataHoraFinalizado).setHours(0,0,0,0)||0;w&&S&&O>=w&&O<=S&&D.push(M.id),!S&&w&&O>=w&&D.push(M.id),!w&&S&&O<=S&&D.push(M.id)}),u=u.filter(function(M){return D.some(O=>O===M.idFatura)})}if("status"in s&&s.status.indexOf(",")!==-1){const w=t.status;u=u.filter(function(S){return w.indexOf(S.status)!==-1})}if("statusEnvio"in s&&s.statusEnvio==="Enviados"&&(u=u.filter(w=>w==null?void 0:w.rotaJson)),"statusEnvio"in s&&s.statusEnvio==="N\xE3o Enviados"&&(u=u.filter(w=>!(w!=null&&w.rotaJson))),"termoBusca"in s&&s.termoBusca.length>0){const w=$utils.removerAcentos(s.termoBusca.toUpperCase()).split(" ").filter(Boolean),S=w.filter(M=>M.match(/^\d+$/)),D=w.filter(M=>!M.match(/^\d+$/));u=u.filter(M=>{const O=$utils.removerAcentos([M.descricaoContato].join(" ").toUpperCase()),T=[M.numero].map(String);let I=!0;for(const N of S)I=I&&T.includes(N);for(const N of D)I=I&&O.includes(N);return I})}let c=[];c=await u.toArray()||[],i&&n&&(c=$lodash.orderBy(c,i,n));const d=c.length;let f=r,p=((a||1)-1)*f;c=c.splice(p,f);let v=c,g=d,x=Math.ceil(g/f)||1;return{data:v,total:g,totalPages:x}},ler:async e=>{e=e||{};let t={tipo:"Venda"};e!=null&&e.idContato&&(t.idContato=e.idContato),e!=null&&e.idFatura&&(t.idFatura=e.idFatura),e!=null&&e.idDocumentoAdicional&&(t.idDocumentoAdicional=e.idDocumentoAdicional),e!=null&&e.idContatoVendedor&&(t.idContatoVendedor=e.idContatoVendedor),e!=null&&e.idContatoDigitador&&(t.idContatoDigitador=e.idContatoDigitador),e!=null&&e.idEmpresa&&(t.idEmpresa=e.idEmpresa),e!=null&&e.documentoId&&(t.documentoId=e.documentoId),e!=null&&e.status&&(t.status=e.status),e!=null&&e.operacao&&(t.operacao=e.operacao);let o=Se().documento;Object.keys(t).length&&("periodoEmissao"in e||"periodoFinalizado"in e?o=o.where(t).and(function(a){if("periodoEmissao"in e&&e.periodoEmissao){let i=new Date(e.periodoEmissao.ini).setHours(0,0,0,0),n=new Date(e.periodoEmissao.fim).setHours(0,0,0,0),s=new Date(a.dataHoraEmissao).setHours(0,0,0,0);return i&&n?s>=i&&s<=n:i?s>=i:n?s<=n:!0}}).and(function(a){if("periodoFinalizado"in e&&e.periodoFinalizado){let i=new Date(e.periodoFinalizado.ini).setHours(0,0,0,0),n=new Date(e.periodoFinalizado.fim).setHours(0,0,0,0),s=new Date(a.dataHoraFinalizado).setHours(0,0,0,0);return i&&n?s>=i&&s<=n:i?s>=i:n?s<=n:!0}}):o=o.where(t)),e.or&&(o=o.filter(a=>{for(const i in e.or)if(a[i]===e.or[i])return!0;return!1})),e.and&&(o=o.filter(a=>{for(const i in e.and)if(a[i]!==e.and[i])return!1;return!0}));let r=parseInt(e.numero);return e.numero&&r&&(o=o.filter(a=>a.numero===r)),await o.toArray()||[]},le:async({filtros:e,colunas:t})=>{e=e||{};let o=[];if(localStorage.getItem("rede")==="offline"){if(e.id)return $db.hibrido.le({table:"documento",id:e.id});delete e.id,o=await Se().documento.toArray()||[],o=o.filter(r=>r.tipo==="Venda"),o=o.filter(r=>{let a=!0;for(const i in e)if(r[i]!==e[i]){a=!1;break}return a})}else{let r="";for(const i in e)r+=`${i} = '${e[i]}' and `;r+=" tipo = 'Venda'";let a=`select top 30 ${t.split(" ").join(", ")} from documento where ${r}`;o=await Do(a,"x_req48473u")}return o},leCompleto:async e=>{const t={};let o;t.venda=await $db.hibrido.le({table:"documento",id:e}),o=await $db.hibrido.lista({table:"documentoItem",where:{idDocumento:t.venda.id}}),o=o.filter(s=>!s.idDocumentoAdicional),o.sort((s,l)=>new Date(s.dataHoraEmissao)<new Date(l.dataHoraEmissao)?-1:1),t.carrinho=o,t.arquivo=await $db.arquivo.lista({tipoArquivo:"-",idTabelaMaster:t.venda.id}),t.condicaoPagamento=await $db.hibrido.lista({table:"documentoCondicaoPagamento",where:{idDocumento:t.venda.id}}),t.documentoEndereco=await $db.hibrido.lista({table:"documentoEndereco",where:{idDocumento:t.venda.id}});const[r,a,i,n]=await $db.hibrido.lista([{table:"documento",where:{tipo:"Envelope",documentoId:t.venda.id}},{table:"documento",where:{tipo:"Custom",documentoId:t.venda.id}},{table:"documento",where:{tipo:"Ordem de Servi\xE7o",documentoId:t.venda.id}},{table:"documento",where:{tipo:"Venda Kit",documentoId:t.venda.id}}]);t.itensEnvelopes=[],t.envelopes={};for(const s of r){t.envelopes[s.id]=s;const l=await $db.hibrido.lista({table:"documentoItem",where:{idDocumentoAdicional:s.id}});t.itensEnvelopes=[...t.itensEnvelopes,...l]}t.customs=a.map(s=>({documento:{...s}}));for(const s of t.customs)s.documentoItens=await $db.hibrido.lista({table:"documentoItem",where:{idDocumentoAdicional:s.documento.id}}),s.arquivo=await $db.arquivo.lista({tipoArquivo:"-",idTabelaMaster:s.documento.id});t.oss=i.map(s=>({documento:{...s}}));for(const s of t.oss)s.documentoItens=await $db.hibrido.lista({table:"documentoItem",where:{idDocumentoAdicional:s.documento.id}}),s.arquivo=await $db.arquivo.lista({tipoArquivo:"-",idTabelaMaster:s.documento.id});t.kits=n.map(s=>({documento:{...s}}));for(const s of t.kits)s.documentosItem=await $db.hibrido.lista({table:"documentoItem",where:{idDocumentoAdicional:s.documento.id}});t.item={};for(const s of t.carrinho){let l=s.idItem?await Se().item.get(s.idItem)||{}:{};l={...l,marca:l.marca||"",referencia:l.referencia||"",imagem:l.imagem||""},t.item[l.id]=l}return t},preparaDados:async e=>{const{carrinho:t,envelopes:o,customs:r,oss:a,kits:i}=e,n={venda:e,carrinho:t.filter(s=>!s.idDocumentoAdicional).sort((s,l)=>new Date(s.dataHoraEmissao)<new Date(l.dataHoraEmissao)?-1:1),envelopes:{},customs:r.map(s=>({documento:{...s}})),oss:a.map(s=>({documento:{...s}})),kits:i.map(s=>({documento:{...s}})),item:{}};for(const s of n.kits)s.documentosItem=await $db.hibrido.lista({table:"documentoItem",where:{idDocumentoAdicional:s.documento.id}});for(const s of o)n.envelopes[s.id]=s;for(const{item:s}of n.carrinho)n.item[s.id]={...s,marca:s.marca||"",referencia:s.referencia||"",imagem:s.imagem||""};return n},checarConflitoStatus:async({id:e,status:t})=>{try{await $db.documento.checarConflitoStatus({id:e,status:t})}catch(o){if(o.message==="status")throw new Error("N\xE3o \xE9 poss\xEDvel continuar pois o status atual difere do status encontrado no servidor.");const a=(await $db.configuracoes.le({nome:"vendas.bloqueia.offline"}))[0];if(Number(a==null?void 0:a.valor))throw new Error("N\xE3o foi poss\xEDvel consultar o status no servidor.")}},lerV2:$be,calcularTotais:Abe,checarTabelasPreco:Tbe,duplicar:Nbe,duplicarVenda:Vbe,finalizar:kbe,leListaCompletaOnline:Bbe,leListaCompletaItensOnline:qbe,leListaCompletaOffline:Lbe,separaSemEstoque:Fbe,titulosPendentesAtraso:Mbe,trocarStatus:Rbe};let _v=[];var zbe={async ler(){try{async function e(){navigator.onLine&&(_v=(await zr({vitrine:{funcao:"F61D68B6-3212-4B39-AF26-152634610BDD"}},{bancoDeDados:"GeeksPlat15A",convidado:!0})).data.vitrine)}if(_v.lenght>0)return $lodash.debounce(this.atualizar,3e4)(),_v;await e()}catch(e){console.error(e)}return _v}},Hbe={async gera(e){let t=!1;return $db.hibrido.isOnline()&&(t=await this.geraOnline(e)),t||($db.hibrido.isOnline()||await $utils.dormir(5e3),await $utils.sincronismoEnviar("adicionar","tokenBonus",e.id,{id:e.id})),t},async geraOnline(e,t){let o=!1;try{const r=await $utils.geeksApi({geraBonusAutomatico:{funcao:"E2C9CDDC-103A-4A95-A465-AAD175C6D212",idDocumento:e.id}},{bancoDeDados:t}),{tokens:a}=r.data.geraBonusAutomatico,i=a.join(", ");o=i||!0,i&&console.log(`Bonus ${i} criado com sucesso`)}catch(r){["J\xE1 existe b\xF4nus gerado para a Fatura","N\xE3o h\xE1 configura\xE7\xF5es de B\xF4nus"].includes(r.message)?o=!0:await $utils.dormir(5e3)}return o},async cancela(e){let t=!1;$db.hibrido.isOnline()&&(t=await this.cancelaOnline(e)),t||await $utils.sincronismoEnviar("remover","tokenBonus",e.id,{id:e.id,tokenBonusGerado:e.tokenBonusGerado})},async cancelaOnline(e,t){if(!e.tokenBonusGerado)return!0;let o=!1;for(const r of e.tokenBonusGerado.split(", "))try{const a=await $utils.geeksApi({cancelaBonus:{funcao:"459C0A26-6F81-4B5D-B427-B915142C6283",tokenBonus:r}},{bancoDeDados:t});o=!0,console.log(`Bonus ${r} cancelado com sucesso`)}catch(a){a.message==="B\xF4nus n\xE3o encontrado"||a.message.includes("N\xE3o \xE9 possivel cancelar um B\xF4nus com status")?o=!0:await $utils.dormir(5e3)}return o},leListaCompleta:async function(e){const{filtros:t={},limit:o=25,page:r=1,sort:a=["dataHoraCriacao"],dir:i=["desc"]}=e!=null?e:{},n=await $utils.geeksApi({listaBonus:{funcao:"AE6DE98D-AB55-4413-9E8F-DD728628BE17",filtros:t,limit:o,page:r,sort:a,dir:i}}),{data:s,total:l,totalPages:u}=n.data.listaBonus;return{data:s,total:l,totalPages:u}}};async function jbe(){try{return(await zr({rotasDinamicas:{funcao:"8A679A51-5C6E-4456-8253-C03A997D809C"}},{bancoDeDados:"GeeksPlat15A",convidado:!0})).data.rotasDinamicas}catch{}}var Gbe={lista:jbe},Wbe={leListaCompleta:async function(e){const{filtros:t,limit:o,page:r,sort:a,dir:i=!1}=e!=null?e:{},n=await $utils.geeksApi({listaSped:{funcao:"85D013E3-C09B-4B71-9326-FC28A291964D",filtros:t,limit:o,page:r,sort:a,dir:i}}),{data:s,total:l,totalPages:u}=n.data.listaSped;return{data:s,total:l,totalPages:u}}};const et={app:_pe,agenda:Dpe,arquivo:Ope,banco:Ppe,cache:Fpe,caixa:jpe,caixaConsolidacao:Gpe,caixaConsolidacao2:Wpe,cfop:Qpe,cidade:Xpe,compra:Ghe,configuracaoImposto:Yhe,configuracoes:e1e,contato:K0,contatoAnotacao:i1e,contatoCpf:s1e,contatoCreditoExtrato:l1e,contatoEmpresa:d1e,contatoEndereco:f1e,contatoGrupo:g1e,contatoTelefone:_1e,contrato:x1e,crm:w1e,custom:S1e,rotasDinamicas:Gbe,dispositivoCliente:I1e,documento:A1e,documentoCondicaoPagamento:T1e,documentoFiscalEletronico:D1e,documentoFiscalEletronicoErro:O1e,documentoFiscalEletronicoXml:P1e,documentoItem:F1e,documentoOperacao:M1e,documentoSat:N1e,documentoStatus:k1e,documentoXml:V1e,eCommerce:$1e,empresa:j1e,envelope:rve,equipamento:ive,estoqueSaldoProdutoEmpresa:cve,etiqueta:mve,fatura:gve,financeiroBanco:_ve,financeiroBoleto:bve,financeiroBoletoTitulo:yve,financeiroMovimentacao:xve,financeiroMovimentacaoN:Cve,financeiroPlanoConta:Sve,financeiroRenegociacao:Ive,financeiroTitulo:Tve,formaPagamento:Pve,hibrido:Kve,integracaoECommerce:dge,item:Fge,itemECommerce:Rge,itemEspecificacao:Lge,itemFornecedor:Hge,itemManipulacao:Gge,itemTabelaPreco:Wge,itemEstoqueMinimo:Kge,jornada:C_e,consultor:T_e,kit:F_e,log:k_e,ncm:V_e,nfeIbpt:B_e,nfse:G_e,nps:Q_e,os:J_e,pais:ebe,perfilContabilItem:tbe,permissao:pve,pupilometro:Xg,qualidadeSinal:rbe,receita:lbe,registro:dbe,sincronismo:fbe,sistemaUsoLog:vbe,spedArquivo:gbe,tarefa:Sbe,usuario:Y0,venda:Ube,vitrine:zbe,bonus:Hbe,sped:Wbe},sP={tentativaErro:1,async executarEnviar(){const e=mu("sincEnviar","verificando envio sincronismo erp");let t=0;try{if(!Gt.isOpen())return;const o=await gr.sincronismo.le();for(const r of o){const{bancoDeDados:a}=r;if(Io.proximoReiniciar>new Date){Wt.log("LogSinc",`${new Date().toLocaleTimeString("pt-br")} ${a} interrompeu executarEnviar`);break}t+=await this.enviarDados(a)||0}return t&&Io.descarregarErp(8),t}catch(o){console.error(`Erro no sincronismo erp enviar
`,o)}finally{pu(e,t)}return-1},async executarDescarregar(){const e=mu("sincDescarregar","verificando descarregamento sincronismo erp");let t=0;try{if(!et.usuario.logado.token||!Gt.isOpen())return;const o=await gr.sincronismo.le(),r=o.filter(n=>n.bancoDeDados===et.cache.get("bancoDeDados")),a=o.filter(n=>n.bancoDeDados!==et.cache.get("bancoDeDados")),i=[...r,...a];for(const n of i){if(Io.proximoReiniciar>new Date){Wt.log("LogSinc",`${new Date().toLocaleTimeString("pt-br")} ${n.bancoDeDados} interrompeu executarDescarregar`);break}!n.status||n.status==="sincronismoInicial"?t+=await this.descarregarInicial(n):t+=await this.descarregarPeriodico(n),n.bancoDeDados===et.cache.get("bancoDeDados")&&n.tamanhoPagina===0&&await this.enviarLogs(n.bancoDeDados)}Io.descarregarErp(60),this.tentativaErro=1}catch(o){this.tentativaErro+=1,console.error(`${new Date().toLocaleTimeString("pt-br")} Erro no descarregar. Nova tentativa: ${this.tentativaErro}
`,o.toString()),Io.descarregarErp(this.tentativaErro)}finally{pu(e,t)}},async enviarDados(e){var r,a;const t=Se(e);if(!t.isOpen())return;const o=await t.sincronismoFila.toArray();o.length>0&&await $db.usuario.verificaUsuarioClienteSistema();for(const i of o){let n=!1;if(Io.proximoReiniciar>new Date){Wt.log("LogSinc",`${new Date().toLocaleTimeString("pt-br")} ${e} interrompeu enviarDados`);break}if(e===et.cache.get("bancoDeDados")&&et.sincronismo.logar(`${new Date().toLocaleTimeString("pt-br")} subiu  ${i.tabela.padEnd(26)} ${i.chave} ${i.acao} ${e}`),i.tabela==="arquivo"){await $db.arquivo.operacaoSincronismo(i.acao,i.valor,e)&&await t.sincronismoFila.delete(i._ordem);continue}else if(i.tabela==="imagemGCP"){await $db.arquivo.gravaImagem(i.valor)&&await t.sincronismoFila.delete(i._ordem);continue}else if(i.tabela==="tokenBonus"){(i.acao==="adicionar"?await $db.bonus.geraOnline(i.valor,e):await $db.bonus.cancelaOnline(i.valor,e))&&await t.sincronismoFila.delete(i._ordem);continue}if(~["json","arquivo"].indexOf(i.tabela)&&(n=(await zr({consultaSincronismoId:{funcao:"5A7B9571-4222-46B4-823B-93D625F897FE",id:i.id}})).data.consultaSincronismoId),!n){const l=(await zr({sincronismoErpEnviar:{funcao:"FF40DFDD-BC07-4A9E-B854-FB00E3C125BD",dados:[{id:i.id,acao:i.acao,chave:i.chave,dataHora:i.dataHora,tabela:i.tabela,valor:JSON.stringify(i.valor),dispositivo:Io.obterIdDispositivo(),idUsuario:i.idUsuario,nomeUsuario:i.nomeUsuario}]}},{bancoDeDados:e})).data.sincronismoErpEnviar;if(!l.sucesso&&!~((a=(r=l==null?void 0:l.error)==null?void 0:r.message)==null?void 0:a.indexOf("idx_Sincronismo_id"))){console.error(`Erro no sincronismo ${e} enviar. ${JSON.stringify(l)}.`);break}}await t.sincronismoFila.delete(i._ordem)}return o.length&&Wt.log("LogSinc",`${new Date().toLocaleTimeString("pt-br")} ${e} enviar ${o.length} registro(s)`),o.length},enviarLogs:async e=>{const t=(await $db.sistemaUsoLog.le({limit:15,page:1})).data;if(t.length!==0)for(const o of t){const a=(await zr({sistemaUsoLog:{funcao:"ABEE8E19-1BEB-465C-8786-0AD6DA2817B2",...o}},{bancoDeDados:e})).data.sistemaUsoLog;if(!a.sucesso){console.error(`Erro no sincronismo ${e} enviar. ${JSON.stringify(a)}.`);break}await $db.sistemaUsoLog.remover(o.id)}},async descarregarInicial(e){let{bancoDeDados:t}=e;if(e.status="sincronismoInicial",!e.pagina){const r=await zr({sincronismoErpIniciarDispositivo:{funcao:"40AA16FD-4749-4B8F-A2BB-D07EE001D4B2",idDispositivo:Io.obterIdDispositivo()}},{bancoDeDados:t});e={...e,...r.data.sincronismoErpIniciarDispositivo,tabelas:void 0,adicionar:void 0,atualizar:void 0,remover:void 0},await gr.sincronismo.grava(e)}let o=zr({sincronismoErpInicial:{funcao:"4C94AD01-F71D-4322-A1F8-2B7842ED49B5",pagina:e.pagina,idDispositivo:Io.obterIdDispositivo()}},{bancoDeDados:t});for(;!e.finalizou;){if(Io.proximoReiniciar>new Date){Wt.log("LogSinc",`${new Date().toLocaleTimeString("pt-br")} ${t} interrompeu descarregarInicial`);break}const r=(await o).data.sincronismoErpInicial;if(!r.pagina){console.error(`Erro no sincronismo ${t}. P\xE1gina '${r.pagina}' inv\xE1lida. P\xE1gina anterior: '${e.pagina}'`);break}r.finalizou||(o=zr({sincronismoErpInicial:{funcao:"4C94AD01-F71D-4322-A1F8-2B7842ED49B5",pagina:r.pagina,idDispositivo:Io.obterIdDispositivo()}},{bancoDeDados:t})),await this.atualizarIndexdbBulk(t,r.tabelas);const a=(r.quantidadeRealizada/r.quantidadeTotal*1e4|0)/100;e={...e,...r,percentagem:a,ultimo:sa(),tabelas:void 0,adicionar:void 0,atualizar:void 0,remover:void 0,inicial:{ultimo:sa()}},e.finalizou&&(e.status="normal",e.percentagem=100),await gr.sincronismo.grava(e),$utils.emitter.emit("atualizarStatusSincronismo",t,{percentagem:a,status:e.status})}return e.finalizou&&t===et.cache.get("bancoDeDados")&&(Io.status.concluidoErp=!0,et.usuario.carregaDados()),e.quantidadeRealizada},async descarregarPeriodico(e){let{bancoDeDados:t}=e,o=zr({sincronismoErpPeriodico:{funcao:"7D5B80F7-8BEA-460E-8026-305B31E7647D",pagina:e.pagina,idDispositivo:Io.obterIdDispositivo()}},{bancoDeDados:t});for(e.finalizou=!1,e.status=gr.sincronismo.verificaBloqueioHoras(e)?"bloqueado":"normal";!e.finalizou;){if(Io.proximoReiniciar>new Date){Wt.log("LogSinc",`${new Date().toLocaleTimeString("pt-br")} ${t} interrompeu descarregarPeriodico`);break}const r=(await o).data.sincronismoErpPeriodico,a=r.quantidadeRestante+r.registrosPagina;if($utils.emitter.emit("atualizarStatusSincronismo",t,{quantidadeRestantePeriodico:a,dataHoraServidor:r.dataHoraServidor}),!r.pagina){console.error(`Erro no sincronismo ${t}. P\xE1gina '${r.pagina}' inv\xE1lida. P\xE1gina anterior: '${e.pagina}'`);break}r.finalizou||(o=zr({sincronismoErpPeriodico:{funcao:"7D5B80F7-8BEA-460E-8026-305B31E7647D",pagina:r.pagina,idDispositivo:Io.obterIdDispositivo()}},{bancoDeDados:t})),await this.crudIndexdb(t,r.dados,e.status==="normal");const i=Object.keys(r.dados||{}).length;e.periodico=e.periodico||{},e={...e,...r,tabelas:void 0,adicionar:void 0,atualizar:void 0,remover:void 0,ultimo:sa(),quantidadeRestantePeriodico:a,periodico:{ultimo:sa(),sequencia:(e.periodico.sequencia||0)+1,tamanho:i,tamanhoTotal:(e.periodico.tamanhoTotal||0)+i}},e.finalizou&&(e.status="normal",e.percentagem=100),await gr.sincronismo.grava(e)}return $utils.emitter.emit("atualizarStatusSincronismo",t,{status:e.status}),e.finalizou&&t===et.cache.get("bancoDeDados")&&(Io.status.concluidoErp=!0,et.usuario.carregaDados()),e.quantidadeRealizada},async atualizarIndexdbBulk(e,t){for(const o in t){const r=t[o];try{for(let i=0;i<r.length;i+=1e3){const n=r.slice(i,i+1e3);await Se(e)[o].bulkPut(n)}Wt.log("LogSinc",`${new Date().toLocaleTimeString("pt-br")} ${e} ${o} ${r.length} registro(s).`)}catch(a){console.error(`Erro no sincronismo ${e}. Falha no bulkPut tabela '${o}'.
`,a)}}},async acertaDados(e,t,o,r,a){a&&e===et.cache.get("bancoDeDados")&&(et.sincronismo.logar(`${new Date().toLocaleTimeString("pt-br")} desceu ${t.padEnd(26)} ${r.id} ${o} ${e}`),t==="contato"&&await et.contato.carregarMemoria(r.id),t==="item"&&await et.item.carregarMemoria(r.id))},async crudIndexdb(e,t,o){let r=0;for(const a in t){const{tabela:i,acao:n,valor:s}=t[a];try{if(n==="remover")await Se(e)[i].delete(s.id);else if(n==="adicionar")try{await Se(e)[i].add(s)}catch{await Se(e)[i].update(s.id,s)}else n==="atualizar"?await Se(e)[i].update(s.id,s)===0&&await Se(e)[i].put(s):console.error(`Erro no sincronismo ${e}. A\xE7\xE3o nao permitida '${n}' tabela '${i}'.`);await this.acertaDados(e,i,n,s,o);const l=37;r++,r>=l&&($utils.emitter.emit("atualizarStatusSincronismoPeriodico",e,l),r-=l)}catch(l){console.error(`Erro no sincronismo ${e}. Falha na tabela '${i}' acao '${n}'.
`,l)}}r&&$utils.emitter.emit("atualizarStatusSincronismoPeriodico",e,r)}},Qbe={tentativaErro:1,async executarDescarregar(){const e=mu("sincDescarregar","verificando descarregamento sincronismo plataforma");let t=0;try{if(!et.usuario.logado.token)return;const o=localStorage.getItem("clienteSistemaBaixados");if(!o)return;if(Io.proximoReiniciar>new Date){Wt.log("LogSinc",`${new Date().toLocaleTimeString("pt-br")} interrompeu executarDescarregarPlataforma`);return}localStorage.getItem("sincronismoPlat")!=="ok"?t=await this.descarregarInicial(o):($utils.emitter.emit("sincronismoPlataformaPercentagem","100 %"),t=await this.descarregarPeriodico(o)),Io.descarregarPlataforma(60)}catch(o){this.tentativaErro+=1,console.error(`${new Date().toLocaleTimeString("pt-br")} Erro no descarregar plataforma. Nova tentativa: ${this.tentativaErro}
`,o.toString()),Io.descarregarPlataforma(this.tentativaErro)}finally{pu(e,t)}},async descarregarInicial(e){const o=JSON.parse(e).map(a=>a.idClienteSistema);let r=et.cache.getJson("sincronismoPlataforma");for(r.pagina||(r=(await zr({sincronismoPlataformaIniciarDispositivo:{funcao:"912047D5-73D4-401C-AF27-5C7223586C27",idsClienteSistema:o,idDispositivo:Io.obterIdDispositivo()}})).data.sincronismoPlataformaIniciarDispositivo,et.cache.setJson("sincronismoPlataforma",r));!r.finalizou;){if(Io.proximoReiniciar>new Date){Wt.log("LogSinc",`${new Date().toLocaleTimeString("pt-br")} interrompeu descarregarInicialPlataforma`);break}const a=(await zr({sincronismoPlataformaInicial:{funcao:"0BA0A03C-7896-44C1-8CC6-5D6B55064F40",idsClienteSistema:o,pagina:r.pagina}})).data.sincronismoPlataformaInicial;await this.atualizarIndexdb(a.tabelas);const i=`${Math.floor(100*a.quantidadeRealizada/(a.quantidadeTotal||1e10))} %`;$utils.emitter.emit("sincronismoPlataformaPercentagem",i),Wt.log("LogSinc",`${new Date().toLocaleTimeString("pt-br")} plataforma descarregar ${a.registrosPagina} registro(s).`),r={...r,...a,tabelas:void 0,remover:void 0,inicial:{ultimo:sa()}},et.cache.setJson("sincronismoPlataforma",r)}return r.finalizou&&(localStorage.setItem("sincronismoPlat","ok"),$utils.emitter.emit("sincronismoPlataformaPercentagem","100 %")),r.quantidadeTotal||0},async descarregarPeriodico(e){const o=JSON.parse(e).map(s=>s.idClienteSistema);let r=et.cache.getJson("sincronismoPlataforma");r.versaoAtual||(r.versaoAtual=localStorage.getItem("versaoPlataforma")||"");const a=(await zr({sincronismoPlataformaPeriodico:{funcao:"94C02F51-5B68-4374-A099-35562E8DC419",idsClienteSistema:o,versaoAnterior:r.versaoAtual}})).data.sincronismoPlataformaPeriodico;await this.atualizarIndexdb(a.tabelas),await this.removerIndexdb(a.remover);const i=Object.keys(a.tabelas||{}).length,n=Object.keys(a.remover||{}).length;return r.periodico=r.periodico||{},r={...r,...a,tabelas:void 0,remover:void 0,periodico:{ultimo:sa(),sequencia:(r.periodico.sequencia||0)+1,tamanho:i,tamanhoTotal:(r.periodico.tamanhoTotal||0)+i,remover:n,removerTotal:(r.periodico.removerTotal||0)+n}},et.cache.setJson("sincronismoPlataforma",r),i+n},async atualizarIndexdb(e){for(const t in e){const o=e[t];try{for(let a=0;a<o.length;a+=100){const i=o.slice(a,a+100);await Gt[t].bulkPut(i)}Wt.log("LogSinc",`${new Date().toLocaleTimeString("pt-br")} plataforma ${t} ${o.length} registro(s).`)}catch(r){console.error(`Erro no sincronismo plataforma. Falha no bulkPut tabela '${t}'.
`,r)}}},async removerIndexdb(e){for(const t in e){const o=e[t];for(const r of o)try{await Gt[t].delete(r)}catch(a){console.error(`Erro no sincronismo plataforma. Falha no delete tabela '${t}' id '${r}'.
'`,a)}Wt.log("LogSinc",`${new Date().toLocaleTimeString("pt-br")} plataforma delete ${t} ${o.length} registro(s).`)}}},Io={executando:!1,dispositivo:null,proximoDescarregarErp:new Date,proximoDescarregarPlataforma:new Date,proximoReiniciar:new Date,status:{carregando:!1,carregou:!1,concluidoBancos:{},concluidoErp:!1,percentagemErp:"",tamanhoFila:0},sessaoId:Kt(),async atualizarStatus(){Wt.log("LogSinc",`${new Date().toLocaleTimeString("pt-br")} atualizarStatus`);const e=await gr.sincronismo.le();Wt.log("LogSinc",`${new Date().toLocaleTimeString("pt-br")} listaBancos
 ${e.map(o=>o.bancoDeDados+" "+(o.status||"???")).join(`
 `)}`);for(const o of e){if(gr.sincronismo.verificaBloqueioHoras(o)&&o.status==="normal"&&(o.status="bloqueado",await gr.sincronismo.grava({bancoDeDados:o.bancoDeDados,status:o.status}),Wt.log("LogSinc",`${new Date().toLocaleTimeString("pt-br")} ${o.bancoDeDados} ${o.status}`)),o.status==="normal"||o.status==="bloqueado")try{const a=(await zr({quantidadeRestante:{funcao:"6D66BC44-6EFC-46BB-9F97-390E00957F69",pagina:o.pagina}},{bancoDeDados:o.bancoDeDados})).data.quantidadeRestante.quant;await gr.sincronismo.grava({bancoDeDados:o.bancoDeDados,quantidadeRestantePeriodico:a}),Wt.log("LogSinc",`${new Date().toLocaleTimeString("pt-br")} quantidade restante ${o.bancoDeDados} ${a}`)}catch(r){console.error(`Erro no sincronismo roteador atualizarStatus
`,r),o.quantidadeRestantePeriodico=0}this.status.concluidoBancos[o.bancoDeDados]=o.status==="normal"}const t=et.cache.get("bancoDeDados");this.status.concluidoErp=this.status.concluidoBancos[t],this.status.carregou=!0},async carregarStatus(){!Gt.isOpen()||this.status.carregando||(this.status.carregando=!0,await this.atualizarStatus(),this.status.concluidoErp&&(await Vd(2e3),et.usuario.carregaDados()))},async executar(){var e,t,o,r;if(!$db.app.modoOnline.le()&&!!et.cache.getJson("clienteSistema")&&!!((t=(e=$db.usuario)==null?void 0:e.logado)!=null&&t.token)){if(!this.status.carregando){if(!((r=(o=$db.usuario)==null?void 0:o.logado)!=null&&r.token))return;await this.carregarStatus()}if(!!navigator.onLine&&!this.executando)try{if(this.executando=!0,navigator.storage&&navigator.storage.persist&&await navigator.storage.persist(),this.sessaoViva().sort()[0]!==this.sessaoId){et.sincronismo.log=localStorage.getItem("sincronismoLog")||et.sincronismo.log,Io.atualizarTamanhoFila();return}const i=new Date;if(this.proximoReiniciar>i){Wt.log("LogSinc",`${new Date().toLocaleTimeString("pt-br")} interrompeu sincronismoRoteadorExecutar`);return}let n=await sP.executarEnviar();this.proximoDescarregarPlataforma<i&&(this.descarregarPlataforma(60),await Qbe.executarDescarregar()),this.proximoDescarregarErp<i&&(this.descarregarErp(60),await sP.executarDescarregar()),n!==0&&Io.atualizarTamanhoFila()}catch(a){console.error(`Erro no sincronismo roteador
`,a)}finally{this.executando=!1}}},sessaoViva(){let e=JSON.parse(localStorage.getItem("sessoes")||"{}");for(const o in e)new Date-new Date(e[o])>3e4&&delete e[o];let t=[];for(const o in e)t.push(o);return e[this.sessaoId]=new Date,localStorage.setItem("sessoes",JSON.stringify(e)),t},async atualizarTamanhoFila(){const e=await gr.sincronismo.le();let t=0;for(const o of e){const{bancoDeDados:r}=o;t+=await Se(r).sincronismoFila.count()||0}t+=await Gt.sincronismoFila.count()||0,Io.status.tamanhoFila=t,Wt.log("sincronismoRoteador","tamanhoFila:",t)},descarregarErp(e=0){const t=new Date;this.proximoDescarregarErp=t,this.proximoDescarregarErp.setSeconds(t.getSeconds()+e)},descarregarPlataforma(e=0){const t=new Date;this.proximoDescarregarPlataforma=t,this.proximoDescarregarPlataforma.setSeconds(t.getSeconds()+e)},obterIdDispositivo(){return this.dispositivo||(this.dispositivo=localStorage.getItem("dispositivoCliente")||""),this.dispositivo},reiniciar(e=30){const t=new Date;this.proximoReiniciar=t,this.proximoReiniciar.setSeconds(t.getSeconds()+e),Wt.log("LogSinc",`${new Date().toLocaleTimeString("pt-br")} reiniciar - parar at\xE9 ${this.proximoReiniciar.toLocaleTimeString("pt-br")}`)}};Io.atualizarTamanhoFila();var Ra=Ct({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:t}){const o=j(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>G(e.tag,{class:o.value},uo(t.default))}});const Xbe=["top","middle","bottom"];var An=Ct({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Xbe.includes(e)}},setup(e,{slots:t}){const o=j(()=>e.align!==void 0?{verticalAlign:e.align}:null),r=j(()=>{const a=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(a!==void 0?` text-${a}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>G("div",{class:r.value,style:o.value,role:"status","aria-label":e.label},Mr(t.default,e.label!==void 0?[e.label]:[]))}}),fe=Ct({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:t}){const o=j(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>G("div",{class:o.value},uo(t.default))}}),Je=Ct({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:t}){const o=j(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>G("div",{class:o.value,role:"toolbar"},uo(t.default))}}),Re=Ct({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:t}){const o=j(()=>parseInt(e.lines,10)),r=j(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(o.value===1?" ellipsis":"")),a=j(()=>e.lines!==void 0&&o.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":o.value}:null);return()=>G("div",{style:a.value,class:r.value},uo(t.default))}});const ya={dark:{type:Boolean,default:null}};function xa(e,t){return j(()=>e.dark===null?t.dark.isActive:e.dark)}var qe=Ct({name:"QItem",props:{...ya,...bh,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:t,emit:o}){const{proxy:{$q:r}}=xt(),a=xa(e,r),{hasLink:i,linkAttrs:n,linkClass:s,linkTag:l,navigateOnClick:u}=U_(),c=Ue(null),d=Ue(null),f=j(()=>e.clickable===!0||i.value===!0||e.tag==="label"),m=j(()=>e.disable!==!0&&f.value===!0),p=j(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(a.value===!0?" q-item--dark":"")+(i.value===!0&&e.active===null?s.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(m.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),v=j(()=>{if(e.insetLevel===void 0)return null;const _=r.lang.rtl===!0?"Right":"Left";return{["padding"+_]:16+e.insetLevel*56+"px"}});function g(_){m.value===!0&&(d.value!==null&&(_.qKeyEvent!==!0&&document.activeElement===c.value?d.value.focus():document.activeElement===d.value&&c.value.focus()),u(_))}function x(_){if(m.value===!0&&cs(_,[13,32])===!0){zo(_),_.qKeyEvent=!0;const w=new MouseEvent("click",_);w.qKeyEvent=!0,c.value.dispatchEvent(w)}o("keyup",_)}function b(){const _=oE(t.default,[]);return m.value===!0&&_.unshift(G("div",{class:"q-focus-helper",tabindex:-1,ref:d})),_}return()=>{const _={ref:c,class:p.value,style:v.value,role:"listitem",onClick:g,onKeyup:x};return m.value===!0?(_.tabindex=e.tabindex||"0",Object.assign(_,n.value)):f.value===!0&&(_["aria-disabled"]="true"),G(l.value,_,b())}}}),At=Ct({name:"QList",props:{...ya,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:t}){const o=xt(),r=xa(e,o.proxy.$q),a=j(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(r.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>G(e.tag,{class:a.value},uo(t.default))}}),Kbe=Ct({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:t,emit:o}){let r=!1,a,i,n=null,s=null,l,u;function c(){a&&a(),a=null,r=!1,n!==null&&(clearTimeout(n),n=null),s!==null&&(clearTimeout(s),s=null),i!==void 0&&i.removeEventListener("transitionend",l),l=null}function d(v,g,x){g!==void 0&&(v.style.height=`${g}px`),v.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,r=!0,a=x}function f(v,g){v.style.overflowY=null,v.style.height=null,v.style.transition=null,c(),g!==u&&o(g)}function m(v,g){let x=0;i=v,r===!0?(c(),x=v.offsetHeight===v.scrollHeight?0:void 0):(u="hide",v.style.overflowY="hidden"),d(v,x,g),n=setTimeout(()=>{n=null,v.style.height=`${v.scrollHeight}px`,l=b=>{s=null,(Object(b)!==b||b.target===v)&&f(v,"show")},v.addEventListener("transitionend",l),s=setTimeout(l,e.duration*1.1)},100)}function p(v,g){let x;i=v,r===!0?c():(u="show",v.style.overflowY="hidden",x=v.scrollHeight),d(v,x,g),n=setTimeout(()=>{n=null,v.style.height=0,l=b=>{s=null,(Object(b)!==b||b.target===v)&&f(v,"hide")},v.addEventListener("transitionend",l),s=setTimeout(l,e.duration*1.1)},100)}return Vo(()=>{r===!0&&c()}),()=>G(Or,{css:!1,appear:e.appear,onEnter:m,onLeave:p},t.default)}});const Ybe={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},Hy={xs:2,sm:4,md:8,lg:16,xl:24};var No=Ct({name:"QSeparator",props:{...ya,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const t=xt(),o=xa(e,t.proxy.$q),r=j(()=>e.vertical===!0?"vertical":"horizontal"),a=j(()=>` q-separator--${r.value}`),i=j(()=>e.inset!==!1?`${a.value}-${Ybe[e.inset]}`:""),n=j(()=>`q-separator${a.value}${i.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(o.value===!0?" q-separator--dark":"")),s=j(()=>{const l={};if(e.size!==void 0&&(l[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const u=e.spaced===!0?`${Hy.md}px`:e.spaced in Hy?`${Hy[e.spaced]}px`:e.spaced,c=e.vertical===!0?["Left","Right"]:["Top","Bottom"];l[`margin${c[0]}`]=l[`margin${c[1]}`]=u}return l});return()=>G("hr",{class:n.value,style:s.value,"aria-orientation":r.value})}});function Jbe(e){return e==null?null:e}function lP(e,t){return e==null?t===!0?`f_${Cm()}`:null:e}function HI({getValue:e,required:t=!0}={}){if(ss.value===!0){const o=Ue(e!==void 0?Jbe(e()):null);return t===!0&&o.value===null&&Va(()=>{o.value=`f_${Cm()}`}),e!==void 0&&ct(e,r=>{o.value=lP(r,t)}),o}return e!==void 0?j(()=>lP(e(),t)):Ue(`f_${Cm()}`)}const Rh={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},Vh=["beforeShow","show","beforeHide","hide"];function Bh({showing:e,canShow:t,hideOnRouteChange:o,handleShow:r,handleHide:a,processOnMount:i}){const n=xt(),{props:s,emit:l,proxy:u}=n;let c;function d(b){e.value===!0?p(b):f(b)}function f(b){if(s.disable===!0||b!==void 0&&b.qAnchorHandled===!0||t!==void 0&&t(b)!==!0)return;const _=s["onUpdate:modelValue"]!==void 0;_===!0&&(l("update:modelValue",!0),c=b,Ao(()=>{c===b&&(c=void 0)})),(s.modelValue===null||_===!1)&&m(b)}function m(b){e.value!==!0&&(e.value=!0,l("beforeShow",b),r!==void 0?r(b):l("show",b))}function p(b){if(s.disable===!0)return;const _=s["onUpdate:modelValue"]!==void 0;_===!0&&(l("update:modelValue",!1),c=b,Ao(()=>{c===b&&(c=void 0)})),(s.modelValue===null||_===!1)&&v(b)}function v(b){e.value!==!1&&(e.value=!1,l("beforeHide",b),a!==void 0?a(b):l("hide",b))}function g(b){s.disable===!0&&b===!0?s["onUpdate:modelValue"]!==void 0&&l("update:modelValue",!1):b===!0!==e.value&&(b===!0?m:v)(c)}ct(()=>s.modelValue,g),o!==void 0&&LE(n)===!0&&ct(()=>u.$route.fullPath,()=>{o.value===!0&&e.value===!0&&p()}),i===!0&&Va(()=>{g(s.modelValue)});const x={show:f,hide:p,toggle:d};return Object.assign(u,x),x}const Qu=Zp({}),Zbe=Object.keys(bh);var Yr=Ct({name:"QExpansionItem",props:{...bh,...Rh,...ya,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Vh,"click","afterShow","afterHide"],setup(e,{slots:t,emit:o}){const{proxy:{$q:r}}=xt(),a=xa(e,r),i=Ue(e.modelValue!==null?e.modelValue:e.defaultOpened),n=Ue(null),s=HI(),{show:l,hide:u,toggle:c}=Bh({showing:i});let d,f;const m=j(()=>`q-expansion-item q-item-type q-expansion-item--${i.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),p=j(()=>{if(e.contentInsetLevel===void 0)return null;const X=r.lang.rtl===!0?"Right":"Left";return{["padding"+X]:e.contentInsetLevel*56+"px"}}),v=j(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),g=j(()=>{const X={};return Zbe.forEach(Y=>{X[Y]=e[Y]}),X}),x=j(()=>v.value===!0||e.expandIconToggle!==!0),b=j(()=>e.expandedIcon!==void 0&&i.value===!0?e.expandedIcon:e.expandIcon||r.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),_=j(()=>e.disable!==!0&&(v.value===!0||e.expandIconToggle===!0)),w=j(()=>({expanded:i.value===!0,detailsId:s.value,toggle:c,show:l,hide:u})),S=j(()=>{const X=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:r.lang.label[i.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":i.value===!0?"true":"false","aria-controls":s.value,"aria-label":X}});ct(()=>e.group,X=>{f!==void 0&&f(),X!==void 0&&N()});function D(X){v.value!==!0&&c(X),o("click",X)}function M(X){X.keyCode===13&&O(X,!0)}function O(X,Y){Y!==!0&&n.value!==null&&n.value.focus(),c(X),zo(X)}function T(){o("afterShow")}function I(){o("afterHide")}function N(){d===void 0&&(d=Cm()),i.value===!0&&(Qu[e.group]=d);const X=ct(i,de=>{de===!0?Qu[e.group]=d:Qu[e.group]===d&&delete Qu[e.group]}),Y=ct(()=>Qu[e.group],(de,ye)=>{ye===d&&de!==void 0&&de!==d&&u()});f=()=>{X(),Y(),Qu[e.group]===d&&delete Qu[e.group],f=void 0}}function P(){const X={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},Y=[G(Pe,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&i.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:b.value})];return _.value===!0&&(Object.assign(X,{tabindex:0,...S.value,onClick:O,onKeyup:M}),Y.unshift(G("div",{ref:n,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),G(fe,X,()=>Y)}function F(){let X;return t.header!==void 0?X=[].concat(t.header(w.value)):(X=[G(fe,()=>[G(Re,{lines:e.labelLines},()=>e.label||""),e.caption?G(Re,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&X[e.switchToggleSide===!0?"push":"unshift"](G(fe,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>G(Pe,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&X[e.switchToggleSide===!0?"unshift":"push"](P()),X}function L(){const X={ref:"item",style:e.headerStyle,class:e.headerClass,dark:a.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return x.value===!0&&(X.clickable=!0,X.onClick=D,Object.assign(X,v.value===!0?g.value:S.value)),G(qe,X,F)}function z(){return Ee(G("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:p.value,id:s.value},uo(t.default)),[[Eo,i.value]])}function H(){const X=[L(),G(Kbe,{duration:e.duration,onShow:T,onHide:I},z)];return e.expandSeparator===!0&&X.push(G(No,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:a.value}),G(No,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:a.value})),X}return e.group!==void 0&&N(),Vo(()=>{f!==void 0&&f()}),()=>G("div",{class:m.value},[G("div",{class:"q-expansion-item__container relative-position"},H())])}}),Mt=Ct({name:"QCard",props:{...ya,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:t}){const{proxy:{$q:o}}=xt(),r=xa(e,o),a=j(()=>"q-card"+(r.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>G(e.tag,{class:a.value},uo(t.default))}});function Yk(e,t,o){let r;function a(){r!==void 0&&(wp.remove(r),r=void 0)}return Vo(()=>{e.value===!0&&a()}),{removeFromHistory:a,addToHistory(){r={condition:()=>o.value===!0,handler:t},wp.add(r)}}}function hu(){let e=null;const t=xt();function o(){e!==null&&(clearTimeout(e),e=null)}return Bs(o),Vo(o),{removeTimeout:o,registerTimeout(r,a){o(),_d(t)===!1&&(e=setTimeout(()=>{e=null,r()},a))}}}function fm(){let e;const t=xt();function o(){e=void 0}return Bs(o),Vo(o),{removeTick:o,registerTick(r){e=r,Ao(()=>{e===r&&(_d(t)===!1&&e(),e=void 0)})}}}const Ed={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function wb(e,t=()=>{},o=()=>{}){return{transitionProps:j(()=>{const r=`q-transition--${e.transitionShow||t()}`,a=`q-transition--${e.transitionHide||o()}`;return{appear:!0,enterFromClass:`${r}-enter-from`,enterActiveClass:`${r}-enter-active`,enterToClass:`${r}-enter-to`,leaveFromClass:`${a}-leave-from`,leaveActiveClass:`${a}-leave-active`,leaveToClass:`${a}-leave-to`}}),transitionStyle:j(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}let dd=[],Qp=[];function Jk(e){Qp=Qp.filter(t=>t!==e)}function e2e(e){Jk(e),Qp.push(e)}function cP(e){Jk(e),Qp.length===0&&dd.length!==0&&(dd[dd.length-1](),dd=[])}function qh(e){Qp.length===0?e():dd.push(e)}function t2e(e){dd=dd.filter(t=>t!==e)}const mm=[];function o2e(e){return mm.find(t=>t.contentEl!==null&&t.contentEl.contains(e))}function Zk(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return qv(e)}else if(e.__qPortal===!0){const o=qv(e);return o!==void 0&&o.$options.name==="QPopupProxy"?(e.hide(t),o):e}e=qv(e)}while(e!=null)}function a2e(e,t,o){for(;o!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(o--,e.$options.name==="QMenu"){e=Zk(e,t);continue}e.hide(t)}e=qv(e)}}const r2e=Ct({name:"QPortal",setup(e,{slots:t}){return()=>t.default()}});function i2e(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function jI(e,t,o,r){const a=Ue(!1),i=Ue(!1);let n=null;const s={},l=r==="dialog"&&i2e(e);function u(d){if(d===!0){cP(s),i.value=!0;return}i.value=!1,a.value===!1&&(l===!1&&n===null&&(n=$_(!1,r)),a.value=!0,mm.push(e.proxy),e2e(s))}function c(d){if(i.value=!1,d!==!0)return;cP(s),a.value=!1;const f=mm.indexOf(e.proxy);f!==-1&&mm.splice(f,1),n!==null&&(ME(n),n=null)}return Hd(()=>{c(!0)}),e.proxy.__qPortal=!0,an(e.proxy,"contentEl",()=>t.value),{showPortal:u,hidePortal:c,portalIsActive:a,portalIsAccessible:i,renderPortal:()=>l===!0?o():a.value===!0?[G(Cw,{to:n},G(r2e,o))]:void 0}}function eR(){let e;return{preventBodyScroll(t){t!==e&&(e!==void 0||t===!0)&&(e=t,cC(t))}}}const Sd=[];let Dm;function n2e(e){Dm=e.keyCode===27}function s2e(){Dm===!0&&(Dm=!1)}function l2e(e){Dm===!0&&(Dm=!1,cs(e,27)===!0&&Sd[Sd.length-1](e))}function tR(e){window[e]("keydown",n2e),window[e]("blur",s2e),window[e]("keyup",l2e),Dm=!1}function oR(e){Ho.is.desktop===!0&&(Sd.push(e),Sd.length===1&&tR("addEventListener"))}function Kg(e){const t=Sd.indexOf(e);t!==-1&&(Sd.splice(t,1),Sd.length===0&&tR("removeEventListener"))}const Id=[];function aR(e){Id[Id.length-1](e)}function rR(e){Ho.is.desktop===!0&&(Id.push(e),Id.length===1&&document.body.addEventListener("focusin",aR))}function aw(e){const t=Id.indexOf(e);t!==-1&&(Id.splice(t,1),Id.length===0&&document.body.removeEventListener("focusin",aR))}let bv=0;const c2e={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},uP={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var Ht=Ct({name:"QDialog",inheritAttrs:!1,props:{...Rh,...Ed,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:e=>["standard","top","bottom","left","right"].includes(e)}},emits:[...Vh,"shake","click","escapeKey"],setup(e,{slots:t,emit:o,attrs:r}){const a=xt(),i=Ue(null),n=Ue(!1),s=Ue(!1);let l=null,u=null,c,d;const f=j(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:m}=eR(),{registerTimeout:p}=hu(),{registerTick:v,removeTick:g}=fm(),{transitionProps:x,transitionStyle:b}=wb(e,()=>uP[e.position][0],()=>uP[e.position][1]),_=j(()=>b.value+(e.backdropFilter!==void 0?`;backdrop-filter:${e.backdropFilter};-webkit-backdrop-filter:${e.backdropFilter}`:"")),{showPortal:w,hidePortal:S,portalIsAccessible:D,renderPortal:M}=jI(a,i,ke,"dialog"),{hide:O}=Bh({showing:n,hideOnRouteChange:f,handleShow:z,handleHide:H,processOnMount:!0}),{addToHistory:T,removeFromHistory:I}=Yk(n,O,f),N=j(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${c2e[e.position]}`+(s.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),P=j(()=>n.value===!0&&e.seamless!==!0),F=j(()=>e.autoClose===!0?{onClick:re}:{}),L=j(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${P.value===!0?"modal":"seamless"}`,r.class]);ct(()=>e.maximized,Ie=>{n.value===!0&&W(Ie)}),ct(P,Ie=>{m(Ie),Ie===!0?(rR(ve),oR(de)):(aw(ve),Kg(de))});function z(Ie){T(),u=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,W(e.maximized),w(),s.value=!0,e.noFocus!==!0?(document.activeElement!==null&&document.activeElement.blur(),v(X)):g(),p(()=>{if(a.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:he,bottom:De}=document.activeElement.getBoundingClientRect(),{innerHeight:Te}=window,J=window.visualViewport!==void 0?window.visualViewport.height:Te;he>0&&De>J/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-J,De>=Te?1/0:Math.ceil(document.scrollingElement.scrollTop+De-J/2))),document.activeElement.scrollIntoView()}d=!0,i.value.click(),d=!1}w(!0),s.value=!1,o("show",Ie)},e.transitionDuration)}function H(Ie){g(),I(),ye(!0),s.value=!0,S(),u!==null&&(((Ie&&Ie.type.indexOf("key")===0?u.closest('[tabindex]:not([tabindex^="-"])'):void 0)||u).focus(),u=null),p(()=>{S(!0),s.value=!1,o("hide",Ie)},e.transitionDuration)}function X(Ie){qh(()=>{let he=i.value;if(he!==null){if(Ie!==void 0){const De=he.querySelector(Ie);if(De!==null){De.focus({preventScroll:!0});return}}he.contains(document.activeElement)!==!0&&(he=he.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||he.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||he.querySelector("[autofocus], [data-autofocus]")||he,he.focus({preventScroll:!0}))}})}function Y(Ie){Ie&&typeof Ie.focus=="function"?Ie.focus({preventScroll:!0}):X(),o("shake");const he=i.value;he!==null&&(he.classList.remove("q-animate--scale"),he.classList.add("q-animate--scale"),l!==null&&clearTimeout(l),l=setTimeout(()=>{l=null,i.value!==null&&(he.classList.remove("q-animate--scale"),X())},170))}function de(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&Y():(o("escapeKey"),O()))}function ye(Ie){l!==null&&(clearTimeout(l),l=null),(Ie===!0||n.value===!0)&&(W(!1),e.seamless!==!0&&(m(!1),aw(ve),Kg(de))),Ie!==!0&&(u=null)}function W(Ie){Ie===!0?c!==!0&&(bv<1&&document.body.classList.add("q-body--dialog"),bv++,c=!0):c===!0&&(bv<2&&document.body.classList.remove("q-body--dialog"),bv--,c=!1)}function re(Ie){d!==!0&&(O(Ie),o("click",Ie))}function _e(Ie){e.persistent!==!0&&e.noBackdropDismiss!==!0?O(Ie):e.noShake!==!0&&Y()}function ve(Ie){e.allowFocusOutside!==!0&&D.value===!0&&XF(i.value,Ie.target)!==!0&&X('[tabindex]:not([tabindex="-1"])')}Object.assign(a.proxy,{focus:X,shake:Y,__updateRefocusTarget(Ie){u=Ie||null}}),Vo(ye);function ke(){return G("div",{role:"dialog","aria-modal":P.value===!0?"true":"false",...r,class:L.value},[G(Or,{name:"q-transition--fade",appear:!0},()=>P.value===!0?G("div",{class:"q-dialog__backdrop fixed-full",style:_.value,"aria-hidden":"true",tabindex:-1,onClick:_e}):null),G(Or,x.value,()=>n.value===!0?G("div",{ref:i,class:N.value,style:b.value,tabindex:-1,...F.value},uo(t.default)):null)])}return M}});function su(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),vg.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const iR={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},nR={...iR,contextMenu:Boolean};function GI({showing:e,avoidEmit:t,configureAnchorEl:o}){const{props:r,proxy:a,emit:i}=xt(),n=Ue(null);let s=null;function l(m){return n.value===null?!1:m===void 0||m.touches===void 0||m.touches.length<=1}const u={};o===void 0&&(Object.assign(u,{hide(m){a.hide(m)},toggle(m){a.toggle(m),m.qAnchorHandled=!0},toggleKey(m){cs(m,13)===!0&&u.toggle(m)},contextClick(m){a.hide(m),Vi(m),Ao(()=>{a.show(m),m.qAnchorHandled=!0})},prevent:Vi,mobileTouch(m){if(u.mobileCleanup(m),l(m)!==!0)return;a.hide(m),n.value.classList.add("non-selectable");const p=m.target;Ir(u,"anchor",[[p,"touchmove","mobileCleanup","passive"],[p,"touchend","mobileCleanup","passive"],[p,"touchcancel","mobileCleanup","passive"],[n.value,"contextmenu","prevent","notPassive"]]),s=setTimeout(()=>{s=null,a.show(m),m.qAnchorHandled=!0},300)},mobileCleanup(m){n.value.classList.remove("non-selectable"),s!==null&&(clearTimeout(s),s=null),e.value===!0&&m!==void 0&&su()}}),o=function(m=r.contextMenu){if(r.noParentEvent===!0||n.value===null)return;let p;m===!0?a.$q.platform.is.mobile===!0?p=[[n.value,"touchstart","mobileTouch","passive"]]:p=[[n.value,"mousedown","hide","passive"],[n.value,"contextmenu","contextClick","notPassive"]]:p=[[n.value,"click","toggle","passive"],[n.value,"keyup","toggleKey","passive"]],Ir(u,"anchor",p)});function c(){Fn(u,"anchor")}function d(m){for(n.value=m;n.value.classList.contains("q-anchor--skip");)n.value=n.value.parentNode;o()}function f(){if(r.target===!1||r.target===""||a.$el.parentNode===null)n.value=null;else if(r.target===!0)d(a.$el.parentNode);else{let m=r.target;if(typeof r.target=="string")try{m=document.querySelector(r.target)}catch{m=void 0}m!=null?(n.value=m.$el||m,o()):(n.value=null,console.error(`Anchor: target "${r.target}" not found`))}}return ct(()=>r.contextMenu,m=>{n.value!==null&&(c(),o(m))}),ct(()=>r.target,()=>{n.value!==null&&c(),f()}),ct(()=>r.noParentEvent,m=>{n.value!==null&&(m===!0?c():o())}),Va(()=>{f(),t!==!0&&r.modelValue===!0&&n.value===null&&i("update:modelValue",!1)}),Vo(()=>{s!==null&&clearTimeout(s),c()}),{anchorEl:n,canShow:l,anchorEvents:u}}function sR(e,t){const o=Ue(null);let r;function a(s,l){const u=`${l!==void 0?"add":"remove"}EventListener`,c=l!==void 0?l:r;s!==window&&s[u]("scroll",c,er.passive),window[u]("scroll",c,er.passive),r=l}function i(){o.value!==null&&(a(o.value),o.value=null)}const n=ct(()=>e.noParentEvent,()=>{o.value!==null&&(i(),t())});return Vo(n),{localScrollTarget:o,unconfigureScrollTarget:i,changeScrollEvent:a}}const{notPassiveCapture:Yg}=er,Ad=[];function Jg(e){const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let o=mm.length-1;for(;o>=0;){const r=mm[o].$;if(r.type.name==="QTooltip"){o--;continue}if(r.type.name!=="QDialog")break;if(r.props.seamless!==!0)return;o--}for(let r=Ad.length-1;r>=0;r--){const a=Ad[r];if((a.anchorEl.value===null||a.anchorEl.value.contains(t)===!1)&&(t===document.body||a.innerRef.value!==null&&a.innerRef.value.contains(t)===!1))e.qClickOutside=!0,a.onClickOutside(e);else return}}function lR(e){Ad.push(e),Ad.length===1&&(document.addEventListener("mousedown",Jg,Yg),document.addEventListener("touchstart",Jg,Yg))}function Zg(e){const t=Ad.findIndex(o=>o===e);t!==-1&&(Ad.splice(t,1),Ad.length===0&&(document.removeEventListener("mousedown",Jg,Yg),document.removeEventListener("touchstart",Jg,Yg)))}let dP,fP;function e_(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function cR(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const rw={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{rw[`${e}#ltr`]=e,rw[`${e}#rtl`]=e});function t_(e,t){const o=e.split(" ");return{vertical:o[0],horizontal:rw[`${o[1]}#${t===!0?"rtl":"ltr"}`]}}function u2e(e,t){let{top:o,left:r,right:a,bottom:i,width:n,height:s}=e.getBoundingClientRect();return t!==void 0&&(o-=t[1],r-=t[0],i+=t[1],a+=t[0],n+=t[0],s+=t[1]),{top:o,bottom:i,height:s,left:r,right:a,width:n,middle:r+(a-r)/2,center:o+(i-o)/2}}function d2e(e,t,o){let{top:r,left:a}=e.getBoundingClientRect();return r+=t.top,a+=t.left,o!==void 0&&(r+=o[1],a+=o[0]),{top:r,bottom:r+1,height:1,left:a,right:a+1,width:1,middle:a,center:r}}function f2e(e,t){return{top:0,center:t/2,bottom:t,left:0,middle:e/2,right:e}}function mP(e,t,o,r){return{top:e[o.vertical]-t[r.vertical],left:e[o.horizontal]-t[r.horizontal]}}function WI(e,t=0){if(e.targetEl===null||e.anchorEl===null||t>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{WI(e,t+1)},10);return}const{targetEl:o,offset:r,anchorEl:a,anchorOrigin:i,selfOrigin:n,absoluteOffset:s,fit:l,cover:u,maxHeight:c,maxWidth:d}=e;if(Ho.is.ios===!0&&window.visualViewport!==void 0){const D=document.body.style,{offsetLeft:M,offsetTop:O}=window.visualViewport;M!==dP&&(D.setProperty("--q-pe-left",M+"px"),dP=M),O!==fP&&(D.setProperty("--q-pe-top",O+"px"),fP=O)}const{scrollLeft:f,scrollTop:m}=o,p=s===void 0?u2e(a,u===!0?[0,0]:r):d2e(a,s,r);Object.assign(o.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:d||"100vw",maxHeight:c||"100vh",visibility:"visible"});const{offsetWidth:v,offsetHeight:g}=o,{elWidth:x,elHeight:b}=l===!0||u===!0?{elWidth:Math.max(p.width,v),elHeight:u===!0?Math.max(p.height,g):g}:{elWidth:v,elHeight:g};let _={maxWidth:d,maxHeight:c};(l===!0||u===!0)&&(_.minWidth=p.width+"px",u===!0&&(_.minHeight=p.height+"px")),Object.assign(o.style,_);const w=f2e(x,b);let S=mP(p,w,i,n);if(s===void 0||r===void 0)jy(S,p,w,i,n);else{const{top:D,left:M}=S;jy(S,p,w,i,n);let O=!1;if(S.top!==D){O=!0;const T=2*r[1];p.center=p.top-=T,p.bottom-=T+2}if(S.left!==M){O=!0;const T=2*r[0];p.middle=p.left-=T,p.right-=T+2}O===!0&&(S=mP(p,w,i,n),jy(S,p,w,i,n))}_={top:S.top+"px",left:S.left+"px"},S.maxHeight!==void 0&&(_.maxHeight=S.maxHeight+"px",p.height>S.maxHeight&&(_.minHeight=_.maxHeight)),S.maxWidth!==void 0&&(_.maxWidth=S.maxWidth+"px",p.width>S.maxWidth&&(_.minWidth=_.maxWidth)),Object.assign(o.style,_),o.scrollTop!==m&&(o.scrollTop=m),o.scrollLeft!==f&&(o.scrollLeft=f)}function jy(e,t,o,r,a){const i=o.bottom,n=o.right,s=Dv(),l=window.innerHeight-s,u=document.body.clientWidth;if(e.top<0||e.top+i>l)if(a.vertical==="center")e.top=t[r.vertical]>l/2?Math.max(0,l-i):0,e.maxHeight=Math.min(i,l);else if(t[r.vertical]>l/2){const c=Math.min(l,r.vertical==="center"?t.center:r.vertical===a.vertical?t.bottom:t.top);e.maxHeight=Math.min(i,c),e.top=Math.max(0,c-i)}else e.top=Math.max(0,r.vertical==="center"?t.center:r.vertical===a.vertical?t.top:t.bottom),e.maxHeight=Math.min(i,l-e.top);if(e.left<0||e.left+n>u)if(e.maxWidth=Math.min(n,u),a.horizontal==="middle")e.left=t[r.horizontal]>u/2?Math.max(0,u-n):0;else if(t[r.horizontal]>u/2){const c=Math.min(u,r.horizontal==="middle"?t.middle:r.horizontal===a.horizontal?t.right:t.left);e.maxWidth=Math.min(n,c),e.left=Math.max(0,c-e.maxWidth)}else e.left=Math.max(0,r.horizontal==="middle"?t.middle:r.horizontal===a.horizontal?t.left:t.right),e.maxWidth=Math.min(n,u-e.left)}var Ft=Ct({name:"QTooltip",inheritAttrs:!1,props:{...iR,...Rh,...Ed,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...Ed.transitionShow,default:"jump-down"},transitionHide:{...Ed.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:e_},self:{type:String,default:"top middle",validator:e_},offset:{type:Array,default:()=>[14,14],validator:cR},scrollTarget:D_,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...Vh],setup(e,{slots:t,emit:o,attrs:r}){let a,i;const n=xt(),{proxy:{$q:s}}=n,l=Ue(null),u=Ue(!1),c=j(()=>t_(e.anchor,s.lang.rtl)),d=j(()=>t_(e.self,s.lang.rtl)),f=j(()=>e.persistent!==!0),{registerTick:m,removeTick:p}=fm(),{registerTimeout:v}=hu(),{transitionProps:g,transitionStyle:x}=wb(e),{localScrollTarget:b,changeScrollEvent:_,unconfigureScrollTarget:w}=sR(e,ye),{anchorEl:S,canShow:D,anchorEvents:M}=GI({showing:u,configureAnchorEl:de}),{show:O,hide:T}=Bh({showing:u,canShow:D,handleShow:F,handleHide:L,hideOnRouteChange:f,processOnMount:!0});Object.assign(M,{delayShow:X,delayHide:Y});const{showPortal:I,hidePortal:N,renderPortal:P}=jI(n,l,re,"tooltip");if(s.platform.is.mobile===!0){const _e={anchorEl:S,innerRef:l,onClickOutside(ke){return T(ke),ke.target.classList.contains("q-dialog__backdrop")&&zo(ke),!0}},ve=j(()=>e.modelValue===null&&e.persistent!==!0&&u.value===!0);ct(ve,ke=>{(ke===!0?lR:Zg)(_e)}),Vo(()=>{Zg(_e)})}function F(_e){I(),m(()=>{i=new MutationObserver(()=>H()),i.observe(l.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),H(),ye()}),a===void 0&&(a=ct(()=>s.screen.width+"|"+s.screen.height+"|"+e.self+"|"+e.anchor+"|"+s.lang.rtl,H)),v(()=>{I(!0),o("show",_e)},e.transitionDuration)}function L(_e){p(),N(),z(),v(()=>{N(!0),o("hide",_e)},e.transitionDuration)}function z(){i!==void 0&&(i.disconnect(),i=void 0),a!==void 0&&(a(),a=void 0),w(),Fn(M,"tooltipTemp")}function H(){WI({targetEl:l.value,offset:e.offset,anchorEl:S.value,anchorOrigin:c.value,selfOrigin:d.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function X(_e){if(s.platform.is.mobile===!0){su(),document.body.classList.add("non-selectable");const ve=S.value,ke=["touchmove","touchcancel","touchend","click"].map(Ie=>[ve,Ie,"delayHide","passiveCapture"]);Ir(M,"tooltipTemp",ke)}v(()=>{O(_e)},e.delay)}function Y(_e){s.platform.is.mobile===!0&&(Fn(M,"tooltipTemp"),su(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),v(()=>{T(_e)},e.hideDelay)}function de(){if(e.noParentEvent===!0||S.value===null)return;const _e=s.platform.is.mobile===!0?[[S.value,"touchstart","delayShow","passive"]]:[[S.value,"mouseenter","delayShow","passive"],[S.value,"mouseleave","delayHide","passive"]];Ir(M,"anchor",_e)}function ye(){if(S.value!==null||e.scrollTarget!==void 0){b.value=O_(S.value,e.scrollTarget);const _e=e.noParentEvent===!0?H:T;_(b.value,_e)}}function W(){return u.value===!0?G("div",{...r,ref:l,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",r.class],style:[r.style,x.value],role:"tooltip"},uo(t.default)):null}function re(){return G(Or,g.value,W)}return Vo(z),Object.assign(n.proxy,{updatePosition:H}),P}}),St=(e,t)=>{const o=e.__vccOpts||e;for(const[r,a]of t)o[r]=a;return o};const m2e={computed:{classes(){return["Badge",this.denso?"Badge--denso":!1,`bg-${this.cor}`,this.escuro?"text-white":!1]}},props:{icone:{default:"",type:String},cor:{default:"light",type:String},denso:{default:!1,type:Boolean},escuro:{default:!1,type:Boolean},rotulo:{type:[String,Number]},dica:{default:null,type:String}}},p2e={class:"flex items-center"},h2e={class:"q-pa-none"};function v2e(e,t,o,r,a,i){return B(),be("div",{class:Li(i.classes),style:{padding:"1px 4px !important"}},[A("div",p2e,[o.icone?(B(),oe(Pe,{key:0,name:o.icone,size:"14px",style:{"margin-right":"2px"}},null,8,["name"])):ie("",!0),A("span",h2e,le(o.rotulo),1),o.dica?(B(),oe(Ft,{key:1,anchor:"bottom middle",self:"center middle"},{default:C(()=>[K(le(o.dica),1)]),_:1})):ie("",!0),ih(e.$slots,"default")])],2)}var Lh=St(m2e,[["render",v2e]]);const g2e={components:{Badge:Lh},data(){return{mostrar:!1,confrontos:[]}},methods:{totalDadosNaoEncontrados(e){return Object.keys(e.emitente).length+Object.keys(e.destinatario).length+Object.keys(e.outros).length},async confrontarFigurasFiscaisV2(e){const t=await $erp().configuracaoImposto.toArray();let o=[];for(const i of t)o.push(JSON.parse(i.json));o=$lodash.orderBy(o,"ordem");const r=[];for(const i of e){const n=[];for(const s of o)n.push({figura:s,descricaoFigura:s.descricao,ordemFigura:s.ordem,descricaoProduto:i.produto,encontrado:{destinatario:{...s.destinatario.consumidor==="T"||s.destinatario.consumidor===i.destinatario.consumidor?{consumidor:i.destinatario.consumidor}:{},...s.destinatario.destino==="T"||s.destinatario.destino===i.destinatario.destino?{destino:i.destinatario.destino}:{},...s.destinatario.indicadorIE==="T"||s.destinatario.indicadorIE===i.destinatario.indicadorIE?{indicadorIE:i.destinatario.indicadorIE}:{},...s.destinatario.pessoa==="T"||s.destinatario.pessoa===i.destinatario.pessoa?{pessoa:i.destinatario.pessoa}:{},...s.destinatario.regime==="T"||s.destinatario.regime===i.destinatario.regime?{regime:i.destinatario.regime}:{},...s.destinatario.tributacao==="T"||s.destinatario.tributacao===i.destinatario.tributacao?{tributacao:i.destinatario.tributacao}:{},...s.destinatario.tributacaoSetor==="T"||s.destinatario.tributacaoSetor===i.destinatario.tributacaoSetor?{tributacaoSetor:i.destinatario.tributacaoSetor}:{},...(s.destinatario.ufs||[]).length===0||(s.destinatario.ufs||[]).find(l=>l.codigo===i.destinatario.uf)?{uf:i.destinatario.uf}:{}},emitente:{...s.emitente.regime==="T"||s.emitente.regime===i.emitente.regime?{regime:i.emitente.regime}:{},...s.emitente.tributacao==="T"||s.emitente.tributacao===i.emitente.tributacao?{tributacao:i.emitente.tributacao}:{},...s.emitente.tributacaoSetor==="T"||s.emitente.tributacaoSetor===i.emitente.tributacaoSetor?{tributacaoSetor:i.emitente.tributacaoSetor}:{},...(s.emitente.ufs||[]).length===0||(s.emitente.ufs||[]).find(l=>l.codigo===i.emitente.uf)?{uf:i.emitente.uf}:{}},outros:{...(s.ncms||[]).length===0||(s.ncms||[]).find(l=>String(l.codigo)===String(i.ncm))?{ncm:i.ncm}:{},...(s.ncms||[]).length===0||(s.ncms||[]).find(l=>String(l.codigo)===i.ncm&&(!l.cest||l.cest===i.cest))?{cest:i.cest}:{},...(s.cfops||[]).length===0||(s.cfops||[]).find(l=>String(l.codigo)===String(i.cfop))?{cfop:i.cfop}:{},...s.origemMercadoria==="T"||s.origemMercadoria===i.origemMercadoria?{origemMercadoria:i.origemMercadoria}:{}}},naoEncontrado:{destinatario:{...s.destinatario.consumidor!=="T"&&s.destinatario.consumidor!==i.destinatario.consumidor?{consumidor:i.destinatario.consumidor}:{},...s.destinatario.destino!=="T"&&s.destinatario.destino!==i.destinatario.destino?{destino:i.destinatario.destino}:{},...s.destinatario.indicadorIE!=="T"&&s.destinatario.indicadorIE!==i.destinatario.indicadorIE?{indicadorIE:i.destinatario.indicadorIE}:{},...s.destinatario.pessoa!=="T"&&s.destinatario.pessoa!==i.destinatario.pessoa?{pessoa:i.destinatario.pessoa}:{},...s.destinatario.regime!=="T"&&s.destinatario.regime!==i.destinatario.regime?{regime:i.destinatario.regime}:{},...s.destinatario.tributacao!=="T"&&s.destinatario.tributacao!==i.destinatario.tributacao?{tributacao:i.destinatario.tributacao}:{},...s.destinatario.tributacaoSetor!=="T"&&s.destinatario.tributacaoSetor!==i.destinatario.tributacaoSetor?{tributacaoSetor:i.destinatario.tributacaoSetor}:{},...(s.destinatario.ufs||[]).length&&!(s.destinatario.ufs||[]).find(l=>l.codigo===i.destinatario.uf)?{uf:i.destinatario.uf}:{}},emitente:{...s.emitente.regime!=="T"&&s.emitente.regime!==i.emitente.regime?{regime:i.emitente.regime}:{},...s.emitente.tributacao!=="T"&&s.emitente.tributacao!==i.emitente.tributacao?{tributacao:i.emitente.tributacao}:{},...s.emitente.tributacaoSetor!=="T"&&s.emitente.tributacaoSetor!==i.emitente.tributacaoSetor?{tributacaoSetor:i.emitente.tributacaoSetor}:{},...(s.emitente.ufs||[]).length&&!(s.emitente.ufs||[]).find(l=>l.codigo===i.emitente.uf)?{uf:i.emitente.uf}:{}},outros:{...(s.ncms||[]).length&&!(s.ncms||[]).find(l=>String(l.codigo)===i.ncm)?{ncm:i.ncm}:{},...(s.ncms||[]).length&&!(s.ncms||[]).find(l=>String(l.codigo)===i.ncm&&(!l.cest||l.cest===i.cest))?{cest:i.cest}:{},...(s.cfops||[]).length&&!(s.cfops||[]).find(l=>String(l.codigo)===i.cfop)?{cfop:i.cfop}:{},...s.origemMercadoria!=="T"&&s.origemMercadoria!==i.origemMercadoria?{origemMercadoria:i.origemMercadoria}:{}}}});r.push(n)}const a=[];for(const i of r){const n=[],s=[];for(const u of i){if(this.totalDadosNaoEncontrados(u.naoEncontrado)===0){n.push(u);continue}s.push(u)}n.sort((u,c)=>{const d=Number(u.ordemFigura),f=Number(c.ordemFigura);return d<f?-1:1}),s.sort((u,c)=>{const d=Number(u.ordemFigura),f=Number(c.ordemFigura);return d<f?-1:1}),s.sort((u,c)=>{const d=this.totalDadosNaoEncontrados(u.naoEncontrado),f=this.totalDadosNaoEncontrados(c.naoEncontrado);return d<f?-1:1});const l=[];for(const u of n)l.push(u);for(const u of s)l.push(u);a.push(l)}this.confrontos=a,this.mostrar=!0}},mounted(){$utils.emitter.off("confrontarFigurasFiscais"),$utils.emitter.on("confrontarFigurasFiscais",this.confrontarFigurasFiscaisV2)}},_2e={class:"q-pa-md"},b2e={class:"row items-center"},y2e={class:"col-12 col-md-6"},x2e={class:"q-pl-sm q-pt-sm q-pb-sm"},C2e={class:"text-weight-bold"},w2e={class:"text-weight-bold"},E2e={class:"text-weight-bold"},S2e={class:"col-12 col-md-6"},I2e={class:"q-pr-sm q-pt-sm q-pb-sm"},A2e={class:"text-weight-bold"},T2e={class:"text-weight-bold"},D2e={class:"text-weight-bold"};function O2e(e,t,o,r,a,i){const n=Ve("badge"),s=Ve("row");return B(),oe(Ht,{modelValue:a.mostrar,"onUpdate:modelValue":t[0]||(t[0]=l=>a.mostrar=l)},{default:C(()=>[h(Mt,{style:{width:"768px","max-width":"100%"}},{default:C(()=>[h(Ra,null,{default:C(()=>t[1]||(t[1]=[A("div",{class:"text-h6"},"Confer\xEAncia de figuras fiscais",-1)])),_:1}),h(Ra,null,{default:C(()=>[h(At,{bordered:""},{default:C(()=>[(B(!0),be(Qe,null,qt(a.confrontos,l=>(B(),be("div",{key:l,group:"produtos"},[h(Yr,{"default-opened":a.confrontos.length===1,icon:"mdi-tag-minus",label:l[0].descricaoProduto,"header-class":"text-tertiary"},{default:C(()=>[A("div",_2e,[h(At,{bordered:""},{default:C(()=>[(B(!0),be(Qe,null,qt(l,u=>(B(),be("div",{key:u.descricaoFigura,group:"figuras"},[h(Yr,{"header-class":"text-tertiary"},{header:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(An,{color:"tertiary"},{default:C(()=>[K(" Ordem "+le(u.ordemFigura),1)]),_:2},1024)]),_:2},1024),h(fe,null,{default:C(()=>[K(le(u.descricaoFigura),1)]),_:2},1024),h(fe,{side:""},{default:C(()=>[A("div",b2e,[i.totalDadosNaoEncontrados(u.naoEncontrado)?(B(),oe(n,{key:0,cor:"negative",denso:"",escuro:""},{default:C(()=>[K(le(i.totalDadosNaoEncontrados(u.naoEncontrado)),1)]),_:2},1024)):(B(),oe(Pe,{key:1,name:"mdi-check-bold",color:"positive"}))])]),_:2},1024)]),default:C(()=>[h(s,{class:"q-mb-md"},{default:C(()=>[A("div",y2e,[A("div",x2e,[h(Je,{class:"bg-primary text-white shadow-2"},{default:C(()=>t[2]||(t[2]=[A("div",{class:"q-subtitle"},"Configura\xE7\xE3o encontrada",-1)])),_:1}),Object.keys(u.encontrado.emitente).length?(B(),oe(At,{key:0,bordered:"",padding:""},{default:C(()=>[h(qe,null,{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[3]||(t[3]=[K("Emitente")])),_:1}),(B(!0),be(Qe,null,qt(Object.keys(u.encontrado.emitente),c=>(B(),oe(Re,{key:c,caption:""},{default:C(()=>[A("span",C2e,le(c),1),K(" "+le(u.encontrado.emitente[c]),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)):ie("",!0),Object.keys(u.encontrado.destinatario).length?(B(),oe(At,{key:1,bordered:"",padding:""},{default:C(()=>[h(qe,null,{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[4]||(t[4]=[K("Destinat\xE1rio")])),_:1}),(B(!0),be(Qe,null,qt(Object.keys(u.encontrado.destinatario),c=>(B(),oe(Re,{key:c,caption:""},{default:C(()=>[A("span",w2e,le(c),1),K(" "+le(u.encontrado.destinatario[c]),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)):ie("",!0),Object.keys(u.encontrado.outros).length?(B(),oe(At,{key:2,bordered:"",padding:""},{default:C(()=>[h(qe,null,{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[5]||(t[5]=[K("Outros")])),_:1}),(B(!0),be(Qe,null,qt(Object.keys(u.encontrado.outros),c=>(B(),oe(Re,{key:c,caption:""},{default:C(()=>[A("span",E2e,le(c),1),K(" "+le(u.encontrado.outros[c]),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)):ie("",!0)])]),A("div",S2e,[A("div",I2e,[h(Je,{class:"bg-negative text-white shadow-2"},{default:C(()=>t[6]||(t[6]=[A("div",{class:"q-subtitle"},"Configura\xE7\xE3o n\xE3o encontrada",-1)])),_:1}),Object.keys(u.naoEncontrado.emitente).length?(B(),oe(At,{key:0,bordered:"",padding:""},{default:C(()=>[h(qe,null,{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[7]||(t[7]=[K("Emitente")])),_:1}),(B(!0),be(Qe,null,qt(Object.keys(u.naoEncontrado.emitente),c=>(B(),oe(Re,{key:c,caption:""},{default:C(()=>[A("span",A2e,le(c),1),K(" "+le(u.naoEncontrado.emitente[c]),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)):ie("",!0),Object.keys(u.naoEncontrado.destinatario).length?(B(),oe(At,{key:1,bordered:"",padding:""},{default:C(()=>[h(qe,null,{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[8]||(t[8]=[K("Destinat\xE1rio")])),_:1}),(B(!0),be(Qe,null,qt(Object.keys(u.naoEncontrado.destinatario),c=>(B(),oe(Re,{key:c,caption:""},{default:C(()=>[A("span",T2e,le(c),1),K(" "+le(u.naoEncontrado.destinatario[c]),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)):ie("",!0),Object.keys(u.naoEncontrado.outros).length?(B(),oe(At,{key:2,bordered:"",padding:""},{default:C(()=>[h(qe,null,{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[9]||(t[9]=[K("Outros")])),_:1}),(B(!0),be(Qe,null,qt(Object.keys(u.naoEncontrado.outros),c=>(B(),oe(Re,{key:c,caption:""},{default:C(()=>[A("span",D2e,le(c),1),K(" "+le(u.naoEncontrado.outros[c]),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)):ie("",!0)])])]),_:2},1024)]),_:2},1024),h(No)]))),128))]),_:2},1024)])]),_:2},1032,["default-opened","label"]),h(No)]))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}var P2e=St(g2e,[["render",O2e]]),lt=Ct({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:t}){const o=j(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>G("div",{class:o.value},uo(t.default))}});function pP(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}var st=uh({name:"close-popup",beforeMount(e,{value:t}){const o={depth:pP(t),handler(r){o.depth!==0&&setTimeout(()=>{const a=o2e(e);a!==void 0&&a2e(a,r,o.depth)})},handlerKey(r){cs(r,13)===!0&&o.handler(r)}};e.__qclosepopup=o,e.addEventListener("click",o.handler),e.addEventListener("keyup",o.handlerKey)},updated(e,{value:t,oldValue:o}){t!==o&&(e.__qclosepopup.depth=pP(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});const F2e={data(){return{modal:{visivel:!1,titulo:"Erro",erros:[],btn:[]}}},mounted(){$g.modalAlerta={show:e=>{var t,o;this.modal={visivel:!0,titulo:e.titulo||"Erro",erros:(t=e.erros)!=null?t:[],btn:(o=e.btn)!=null?o:[]}},hide:e=>{this.modal={visivel:!1,titulo:"Erro",erros:[],btn:[]}}}}};function M2e(e,t,o,r,a,i){const n=Ve("row");return B(),be("div",null,[h(Ht,{modelValue:a.modal.visivel,"onUpdate:modelValue":t[0]||(t[0]=s=>a.modal.visivel=s)},{default:C(()=>[h(Mt,null,{default:C(()=>[h(Je,{class:"bg-red text-white"},{default:C(()=>[h(lt,{class:"q-mx-sm"},{default:C(()=>[K(le(a.modal.titulo),1)]),_:1}),Ee(h(ae,{dense:"",flat:"",round:"",icon:"close"},null,512),[[st]])]),_:1}),h(Ra,{class:"text-body1 q-mx-lg q-my-sm"},{default:C(()=>[(B(!0),be(Qe,null,qt(a.modal.erros,(s,l)=>(B(),oe(n,{key:l},{default:C(()=>[K(le(s),1)]),_:2},1024))),128))]),_:1}),h(No),h(Je,{class:"bg-light"},{default:C(()=>[h(lt,null,{default:C(()=>[h(n,{class:"justify-end"},{default:C(()=>[a.modal.btn.length?ie("",!0):Ee((B(),oe(ae,{key:0,flat:"",label:"Fechar"},null,512)),[[st]]),(B(!0),be(Qe,null,qt(a.modal.btn,(s,l)=>(B(),oe(ae,{key:l,flat:"",label:s.label,color:s.color,onClick:s.click},null,8,["label","color","onClick"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var N2e=St(F2e,[["render",M2e]]);const k2e={data(){return{modal:{visivel:!1,titulo:"Sucesso",mensagens:[]}}},mounted(){$g.modalSucesso={show:e=>{this.modal={visivel:!0,titulo:e.titulo||"Sucesso",mensagens:e.mensagens||[]}}}}};function R2e(e,t,o,r,a,i){const n=Ve("row");return B(),oe(Ht,{modelValue:a.modal.visivel,"onUpdate:modelValue":t[0]||(t[0]=s=>a.modal.visivel=s)},{default:C(()=>[h(Mt,null,{default:C(()=>[h(Je,{class:"bg-primary text-white"},{default:C(()=>[h(lt,{class:"q-mx-sm"},{default:C(()=>[K(le(a.modal.titulo),1)]),_:1}),Ee(h(ae,{dense:"",flat:"",round:"",icon:"close"},null,512),[[st]])]),_:1}),h(Ra,{class:"text-body1 q-mx-lg q-my-sm"},{default:C(()=>[(B(!0),be(Qe,null,qt(a.modal.mensagens,(s,l)=>(B(),oe(n,{key:l},{default:C(()=>[K(le(s),1)]),_:2},1024))),128))]),_:1}),h(No),h(Je,{class:"bg-light"},{default:C(()=>[h(lt,null,{default:C(()=>[h(n,{class:"justify-end"},{default:C(()=>[Ee(h(ae,{flat:"",label:"OK"},null,512),[[st]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}var V2e=St(k2e,[["render",R2e]]),jo=Ct({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:t,emit:o}){const{proxy:{$q:r}}=xt(),a=kr(Rm,cr);if(a===cr)return console.error("QHeader needs to be child of QLayout"),cr;const i=Ue(parseInt(e.heightHint,10)),n=Ue(!0),s=j(()=>e.reveal===!0||a.view.value.indexOf("H")!==-1||r.platform.is.ios&&a.isContainer.value===!0),l=j(()=>{if(e.modelValue!==!0)return 0;if(s.value===!0)return n.value===!0?i.value:0;const b=i.value-a.scroll.value.position;return b>0?b:0}),u=j(()=>e.modelValue!==!0||s.value===!0&&n.value!==!0),c=j(()=>e.modelValue===!0&&u.value===!0&&e.reveal===!0),d=j(()=>"q-header q-layout__section--marginal "+(s.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(u.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),f=j(()=>{const b=a.rows.value.top,_={};return b[0]==="l"&&a.left.space===!0&&(_[r.lang.rtl===!0?"right":"left"]=`${a.left.size}px`),b[2]==="r"&&a.right.space===!0&&(_[r.lang.rtl===!0?"left":"right"]=`${a.right.size}px`),_});function m(b,_){a.update("header",b,_)}function p(b,_){b.value!==_&&(b.value=_)}function v({height:b}){p(i,b),m("size",b)}function g(b){c.value===!0&&p(n,!0),o("focusin",b)}ct(()=>e.modelValue,b=>{m("space",b),p(n,!0),a.animate()}),ct(l,b=>{m("offset",b)}),ct(()=>e.reveal,b=>{b===!1&&p(n,e.modelValue)}),ct(n,b=>{a.animate(),o("reveal",b)}),ct(a.scroll,b=>{e.reveal===!0&&p(n,b.direction==="up"||b.position<=e.revealOffset||b.position-b.inflectionPoint<100)});const x={};return a.instances.header=x,e.modelValue===!0&&m("size",i.value),m("space",e.modelValue),m("offset",l.value),Vo(()=>{a.instances.header===x&&(a.instances.header=void 0,m("size",0),m("offset",0),m("space",!1))}),()=>{const b=oE(t.default,[]);return e.elevated===!0&&b.push(G("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),b.push(G(fr,{debounce:0,onResize:v})),G("header",{class:d.value,style:f.value,onFocusin:g},b)}}}),Jo=Ct({name:"QPageContainer",setup(e,{slots:t}){const{proxy:{$q:o}}=xt(),r=kr(Rm,cr);if(r===cr)return console.error("QPageContainer needs to be child of QLayout"),cr;rl(jF,!0);const a=j(()=>{const i={};return r.header.space===!0&&(i.paddingTop=`${r.header.size}px`),r.right.space===!0&&(i[`padding${o.lang.rtl===!0?"Left":"Right"}`]=`${r.right.size}px`),r.footer.space===!0&&(i.paddingBottom=`${r.footer.size}px`),r.left.space===!0&&(i[`padding${o.lang.rtl===!0?"Right":"Left"}`]=`${r.left.size}px`),i});return()=>G("div",{class:"q-page-container",style:a.value},uo(t.default))}});const B2e={data(){return{dialog:{}}},methods:{limpar(){this.dialog.mostrar=!1,this.dialog.msgs=[]}},created(){this.limpar(),$g.modalLog={dialog:this.dialog}}};function q2e(e,t,o,r,a,i){const n=Ve("g-col"),s=Ve("g-row");return B(),oe(Ht,{modelValue:a.dialog.mostrar,"onUpdate:modelValue":t[0]||(t[0]=l=>a.dialog.mostrar=l),onHide:i.limpar,maximized:""},{default:C(()=>[h(To,{view:"hHh LpR fFf",container:"",class:"bg-light",style:{height:"100vh",width:"100vw","max-width":"100vw"}},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,null,{default:C(()=>[Ee(h(ae,{icon:"arrow_back",round:"",flat:"",dense:""},null,512),[[st]]),h(lt,null,{default:C(()=>t[1]||(t[1]=[K("Registro de Atividades")])),_:1})]),_:1})]),_:1}),h(Jo,{class:"u-container"},{default:C(()=>[(B(!0),be(Qe,null,qt(a.dialog.msgs,(l,u)=>(B(),oe(s,{key:u,gutter:"md",mg:"md",bg:"bg-white"},{default:C(()=>[h(n,{col:"12"},{default:C(()=>[h(Yr,{"expand-separator":"",icon:"description",label:e.$filters.dataHora(l.dataHora)+" - "+l.usuarioNome+" - "+l.usuarioCpf,caption:l.mensagem},{default:C(()=>[h(Mt,null,{default:C(()=>[h(Ra,{style:{whiteSpace:"pre-wrap"}},{default:C(()=>[K(le(l.documentoTipo),1),t[2]||(t[2]=A("br",null,null,-1)),K(" "+le(JSON.parse(l.dados||null)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["label","caption"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"])}var L2e=St(B2e,[["render",q2e]]);const hP=/^on[A-Z]/;function $2e(){const{attrs:e,vnode:t}=xt(),o={listeners:Ue({}),attributes:Ue({})};function r(){const a={},i={};for(const n in e)n!=="class"&&n!=="style"&&hP.test(n)===!1&&(a[n]=e[n]);for(const n in t.props)hP.test(n)===!0&&(i[n]=t.props[n]);o.attributes.value=a,o.listeners.value=i}return Nm(r),r(),o}function U2e({validate:e,resetValidation:t,requiresQForm:o}){const r=kr(GF,!1);if(r!==!1){const{props:a,proxy:i}=xt();Object.assign(i,{validate:e,resetValidation:t}),ct(()=>a.disable,n=>{n===!0?(typeof t=="function"&&t(),r.unbindComponent(i)):r.bindComponent(i)}),Va(()=>{a.disable!==!0&&r.bindComponent(i)}),Vo(()=>{a.disable!==!0&&r.unbindComponent(i)})}else o===!0&&console.error("Parent QForm not found on useFormChild()!")}const vP=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,gP=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,_P=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,yv=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,xv=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,Gy={date:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e),time:e=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(e),fulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(e),timeOrFulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(e),email:e=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e),hexColor:e=>vP.test(e),hexaColor:e=>gP.test(e),hexOrHexaColor:e=>_P.test(e),rgbColor:e=>yv.test(e),rgbaColor:e=>xv.test(e),rgbOrRgbaColor:e=>yv.test(e)||xv.test(e),hexOrRgbColor:e=>vP.test(e)||yv.test(e),hexaOrRgbaColor:e=>gP.test(e)||xv.test(e),anyColor:e=>_P.test(e)||yv.test(e)||xv.test(e)},z2e=[!0,!1,"ondemand"],H2e={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],default:!1,validator:e=>z2e.includes(e)}};function j2e(e,t){const{props:o,proxy:r}=xt(),a=Ue(!1),i=Ue(null),n=Ue(!1);U2e({validate:v,resetValidation:p});let s=0,l;const u=j(()=>o.rules!==void 0&&o.rules!==null&&o.rules.length!==0),c=j(()=>o.disable!==!0&&u.value===!0&&t.value===!1),d=j(()=>o.error===!0||a.value===!0),f=j(()=>typeof o.errorMessage=="string"&&o.errorMessage.length!==0?o.errorMessage:i.value);ct(()=>o.modelValue,()=>{n.value=!0,c.value===!0&&o.lazyRules===!1&&g()});function m(){o.lazyRules!=="ondemand"&&c.value===!0&&n.value===!0&&g()}ct(()=>o.reactiveRules,x=>{x===!0?l===void 0&&(l=ct(()=>o.rules,m,{immediate:!0,deep:!0})):l!==void 0&&(l(),l=void 0)},{immediate:!0}),ct(()=>o.lazyRules,m),ct(e,x=>{x===!0?n.value=!0:c.value===!0&&o.lazyRules!=="ondemand"&&g()});function p(){s++,t.value=!1,n.value=!1,a.value=!1,i.value=null,g.cancel()}function v(x=o.modelValue){if(o.disable===!0||u.value===!1)return!0;const b=++s,_=t.value!==!0?()=>{n.value=!0}:()=>{},w=(D,M)=>{D===!0&&_(),a.value=D,i.value=M||null,t.value=!1},S=[];for(let D=0;D<o.rules.length;D++){const M=o.rules[D];let O;if(typeof M=="function"?O=M(x,Gy):typeof M=="string"&&Gy[M]!==void 0&&(O=Gy[M](x)),O===!1||typeof O=="string")return w(!0,O),!1;O!==!0&&O!==void 0&&S.push(O)}return S.length===0?(w(!1),!0):(t.value=!0,Promise.all(S).then(D=>{if(D===void 0||Array.isArray(D)===!1||D.length===0)return b===s&&w(!1),!0;const M=D.find(O=>O===!1||typeof O=="string");return b===s&&w(M!==void 0,M),M===void 0},D=>(b===s&&(console.error(D),w(!0)),!1)))}const g=A_(v,0);return Vo(()=>{l!==void 0&&l(),g.cancel()}),Object.assign(r,{resetValidation:p,validate:v}),an(r,"hasError",()=>d.value),{isDirtyModel:n,hasRules:u,hasError:d,errorMessage:f,validate:v,resetValidation:p}}function Xp(e){return e!=null&&(""+e).length!==0}const G2e={...ya,...H2e,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String},Eb={...G2e,maxlength:[Number,String]},QI=["update:modelValue","clear","focus","blur"];function XI({requiredForAttr:e=!0,tagProp:t,changeEvent:o=!1}={}){const{props:r,proxy:a}=xt(),i=xa(r,a.$q),n=HI({required:e,getValue:()=>r.for});return{requiredForAttr:e,changeEvent:o,tag:t===!0?j(()=>r.tag):{value:"label"},isDark:i,editable:j(()=>r.disable!==!0&&r.readonly!==!0),innerLoading:Ue(!1),focused:Ue(!1),hasPopupOpen:!1,splitAttrs:$2e(),targetUid:n,rootRef:Ue(null),targetRef:Ue(null),controlRef:Ue(null)}}function KI(e){const{props:t,emit:o,slots:r,attrs:a,proxy:i}=xt(),{$q:n}=i;let s=null;e.hasValue===void 0&&(e.hasValue=j(()=>Xp(t.modelValue))),e.emitValue===void 0&&(e.emitValue=Y=>{o("update:modelValue",Y)}),e.controlEvents===void 0&&(e.controlEvents={onFocusin:T,onFocusout:I}),Object.assign(e,{clearValue:N,onControlFocusin:T,onControlFocusout:I,focus:M}),e.computedCounter===void 0&&(e.computedCounter=j(()=>{if(t.counter!==!1){const Y=typeof t.modelValue=="string"||typeof t.modelValue=="number"?(""+t.modelValue).length:Array.isArray(t.modelValue)===!0?t.modelValue.length:0,de=t.maxlength!==void 0?t.maxlength:t.maxValues;return Y+(de!==void 0?" / "+de:"")}}));const{isDirtyModel:l,hasRules:u,hasError:c,errorMessage:d,resetValidation:f}=j2e(e.focused,e.innerLoading),m=e.floatingLabel!==void 0?j(()=>t.stackLabel===!0||e.focused.value===!0||e.floatingLabel.value===!0):j(()=>t.stackLabel===!0||e.focused.value===!0||e.hasValue.value===!0),p=j(()=>t.bottomSlots===!0||t.hint!==void 0||u.value===!0||t.counter===!0||t.error!==null),v=j(()=>t.filled===!0?"filled":t.outlined===!0?"outlined":t.borderless===!0?"borderless":t.standout?"standout":"standard"),g=j(()=>`q-field row no-wrap items-start q-field--${v.value}`+(e.fieldClass!==void 0?` ${e.fieldClass.value}`:"")+(t.rounded===!0?" q-field--rounded":"")+(t.square===!0?" q-field--square":"")+(m.value===!0?" q-field--float":"")+(b.value===!0?" q-field--labeled":"")+(t.dense===!0?" q-field--dense":"")+(t.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(e.isDark.value===!0?" q-field--dark":"")+(e.getControl===void 0?" q-field--auto-height":"")+(e.focused.value===!0?" q-field--focused":"")+(c.value===!0?" q-field--error":"")+(c.value===!0||e.focused.value===!0?" q-field--highlighted":"")+(t.hideBottomSpace!==!0&&p.value===!0?" q-field--with-bottom":"")+(t.disable===!0?" q-field--disabled":t.readonly===!0?" q-field--readonly":"")),x=j(()=>"q-field__control relative-position row no-wrap"+(t.bgColor!==void 0?` bg-${t.bgColor}`:"")+(c.value===!0?" text-negative":typeof t.standout=="string"&&t.standout.length!==0&&e.focused.value===!0?` ${t.standout}`:t.color!==void 0?` text-${t.color}`:"")),b=j(()=>t.labelSlot===!0||t.label!==void 0),_=j(()=>"q-field__label no-pointer-events absolute ellipsis"+(t.labelColor!==void 0&&c.value!==!0?` text-${t.labelColor}`:"")),w=j(()=>({id:e.targetUid.value,editable:e.editable.value,focused:e.focused.value,floatingLabel:m.value,modelValue:t.modelValue,emitValue:e.emitValue})),S=j(()=>{const Y={};return e.targetUid.value&&(Y.for=e.targetUid.value),t.disable===!0&&(Y["aria-disabled"]="true"),Y});function D(){const Y=document.activeElement;let de=e.targetRef!==void 0&&e.targetRef.value;de&&(Y===null||Y.id!==e.targetUid.value)&&(de.hasAttribute("tabindex")===!0||(de=de.querySelector("[tabindex]")),de&&de!==Y&&de.focus({preventScroll:!0}))}function M(){qh(D)}function O(){t2e(D);const Y=document.activeElement;Y!==null&&e.rootRef.value.contains(Y)&&Y.blur()}function T(Y){s!==null&&(clearTimeout(s),s=null),e.editable.value===!0&&e.focused.value===!1&&(e.focused.value=!0,o("focus",Y))}function I(Y,de){s!==null&&clearTimeout(s),s=setTimeout(()=>{s=null,!(document.hasFocus()===!0&&(e.hasPopupOpen===!0||e.controlRef===void 0||e.controlRef.value===null||e.controlRef.value.contains(document.activeElement)!==!1))&&(e.focused.value===!0&&(e.focused.value=!1,o("blur",Y)),de!==void 0&&de())})}function N(Y){zo(Y),n.platform.is.mobile!==!0?(e.targetRef!==void 0&&e.targetRef.value||e.rootRef.value).focus():e.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),t.type==="file"&&(e.inputRef.value.value=null),o("update:modelValue",null),e.changeEvent===!0&&o("change",null),o("clear",t.modelValue),Ao(()=>{const de=l.value;f(),l.value=de})}function P(Y){[13,32].includes(Y.keyCode)&&N(Y)}function F(){const Y=[];return r.prepend!==void 0&&Y.push(G("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:Vi},r.prepend())),Y.push(G("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},L())),c.value===!0&&t.noErrorIcon===!1&&Y.push(H("error",[G(Pe,{name:n.iconSet.field.error,color:"negative"})])),t.loading===!0||e.innerLoading.value===!0?Y.push(H("inner-loading-append",r.loading!==void 0?r.loading():[G(Ns,{color:t.color})])):t.clearable===!0&&e.hasValue.value===!0&&e.editable.value===!0&&Y.push(H("inner-clearable-append",[G(Pe,{class:"q-field__focusable-action",name:t.clearIcon||n.iconSet.field.clear,tabindex:0,role:"button","aria-label":n.lang.label.clear,onKeyup:P,onClick:N})])),r.append!==void 0&&Y.push(G("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:Vi},r.append())),e.getInnerAppend!==void 0&&Y.push(H("inner-append",e.getInnerAppend())),e.getControlChild!==void 0&&Y.push(e.getControlChild()),Y}function L(){const Y=[];return t.prefix!==void 0&&t.prefix!==null&&Y.push(G("div",{class:"q-field__prefix no-pointer-events row items-center"},t.prefix)),e.getShadowControl!==void 0&&e.hasShadow.value===!0&&Y.push(e.getShadowControl()),e.getControl!==void 0?Y.push(e.getControl()):r.rawControl!==void 0?Y.push(r.rawControl()):r.control!==void 0&&Y.push(G("div",{ref:e.targetRef,class:"q-field__native row",tabindex:-1,...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0},r.control(w.value))),b.value===!0&&Y.push(G("div",{class:_.value},uo(r.label,t.label))),t.suffix!==void 0&&t.suffix!==null&&Y.push(G("div",{class:"q-field__suffix no-pointer-events row items-center"},t.suffix)),Y.concat(uo(r.default))}function z(){let Y,de;c.value===!0?d.value!==null?(Y=[G("div",{role:"alert"},d.value)],de=`q--slot-error-${d.value}`):(Y=uo(r.error),de="q--slot-error"):(t.hideHint!==!0||e.focused.value===!0)&&(t.hint!==void 0?(Y=[G("div",t.hint)],de=`q--slot-hint-${t.hint}`):(Y=uo(r.hint),de="q--slot-hint"));const ye=t.counter===!0||r.counter!==void 0;if(t.hideBottomSpace===!0&&ye===!1&&Y===void 0)return;const W=G("div",{key:de,class:"q-field__messages col"},Y);return G("div",{class:"q-field__bottom row items-start q-field__bottom--"+(t.hideBottomSpace!==!0?"animated":"stale"),onClick:Vi},[t.hideBottomSpace===!0?W:G(Or,{name:"q-transition--field-message"},()=>W),ye===!0?G("div",{class:"q-field__counter"},r.counter!==void 0?r.counter():e.computedCounter.value):null])}function H(Y,de){return de===null?null:G("div",{key:Y,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},de)}let X=!1;return Bs(()=>{X=!0}),ac(()=>{X===!0&&t.autofocus===!0&&i.focus()}),t.autofocus===!0&&Va(()=>{i.focus()}),Vo(()=>{s!==null&&clearTimeout(s)}),Object.assign(i,{focus:M,blur:O}),function(){const de=e.getControl===void 0&&r.control===void 0?{...e.splitAttrs.attributes.value,"data-autofocus":t.autofocus===!0||void 0,...S.value}:S.value;return G(e.tag.value,{ref:e.rootRef,class:[g.value,a.class],style:a.style,...de},[r.before!==void 0?G("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:Vi},r.before()):null,G("div",{class:"q-field__inner relative-position col self-stretch"},[G("div",{ref:e.controlRef,class:x.value,tabindex:-1,...e.controlEvents},F()),p.value===!0?z():null]),r.after!==void 0?G("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:Vi},r.after()):null])}}const bP={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},o_={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},uR=Object.keys(o_);uR.forEach(e=>{o_[e].regex=new RegExp(o_[e].pattern)});const W2e=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+uR.join("")+"])|(.)","g"),yP=/[.*+?^${}()|[\]\\]/g,vr=String.fromCharCode(1),Q2e={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function X2e(e,t,o,r){let a,i,n,s,l,u;const c=Ue(null),d=Ue(m());function f(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}ct(()=>e.type+e.autogrow,v),ct(()=>e.mask,T=>{if(T!==void 0)g(d.value,!0);else{const I=M(d.value);v(),e.modelValue!==I&&t("update:modelValue",I)}}),ct(()=>e.fillMask+e.reverseFillMask,()=>{c.value===!0&&g(d.value,!0)}),ct(()=>e.unmaskedValue,()=>{c.value===!0&&g(d.value)});function m(){if(v(),c.value===!0){const T=S(M(e.modelValue));return e.fillMask!==!1?O(T):T}return e.modelValue}function p(T){if(T<a.length)return a.slice(-T);let I="",N=a;const P=N.indexOf(vr);if(P!==-1){for(let F=T-N.length;F>0;F--)I+=vr;N=N.slice(0,P)+I+N.slice(P)}return N}function v(){if(c.value=e.mask!==void 0&&e.mask.length!==0&&f(),c.value===!1){s=void 0,a="",i="";return}const T=bP[e.mask]===void 0?e.mask:bP[e.mask],I=typeof e.fillMask=="string"&&e.fillMask.length!==0?e.fillMask.slice(0,1):"_",N=I.replace(yP,"\\$&"),P=[],F=[],L=[];let z=e.reverseFillMask===!0,H="",X="";T.replace(W2e,(W,re,_e,ve,ke)=>{if(ve!==void 0){const Ie=o_[ve];L.push(Ie),X=Ie.negate,z===!0&&(F.push("(?:"+X+"+)?("+Ie.pattern+"+)?(?:"+X+"+)?("+Ie.pattern+"+)?"),z=!1),F.push("(?:"+X+"+)?("+Ie.pattern+")?")}else if(_e!==void 0)H="\\"+(_e==="\\"?"":_e),L.push(_e),P.push("([^"+H+"]+)?"+H+"?");else{const Ie=re!==void 0?re:ke;H=Ie==="\\"?"\\\\\\\\":Ie.replace(yP,"\\\\$&"),L.push(Ie),P.push("([^"+H+"]+)?"+H+"?")}});const Y=new RegExp("^"+P.join("")+"("+(H===""?".":"[^"+H+"]")+"+)?"+(H===""?"":"["+H+"]*")+"$"),de=F.length-1,ye=F.map((W,re)=>re===0&&e.reverseFillMask===!0?new RegExp("^"+N+"*"+W):re===de?new RegExp("^"+W+"("+(X===""?".":X)+"+)?"+(e.reverseFillMask===!0?"$":N+"*")):new RegExp("^"+W));n=L,s=W=>{const re=Y.exec(e.reverseFillMask===!0?W:W.slice(0,L.length+1));re!==null&&(W=re.slice(1).join(""));const _e=[],ve=ye.length;for(let ke=0,Ie=W;ke<ve;ke++){const he=ye[ke].exec(Ie);if(he===null)break;Ie=Ie.slice(he.shift().length),_e.push(...he)}return _e.length!==0?_e.join(""):W},a=L.map(W=>typeof W=="string"?W:vr).join(""),i=a.split(vr).join(I)}function g(T,I,N){const P=r.value,F=P.selectionEnd,L=P.value.length-F,z=M(T);I===!0&&v();const H=S(z),X=e.fillMask!==!1?O(H):H,Y=d.value!==X;P.value!==X&&(P.value=X),Y===!0&&(d.value=X),document.activeElement===P&&Ao(()=>{if(X===i){const ye=e.reverseFillMask===!0?i.length:0;P.setSelectionRange(ye,ye,"forward");return}if(N==="insertFromPaste"&&e.reverseFillMask!==!0){const ye=P.selectionEnd;let W=F-1;for(let re=l;re<=W&&re<ye;re++)a[re]!==vr&&W++;b.right(P,W);return}if(["deleteContentBackward","deleteContentForward"].indexOf(N)!==-1){const ye=e.reverseFillMask===!0?F===0?X.length>H.length?1:0:Math.max(0,X.length-(X===i?0:Math.min(H.length,L)+1))+1:F;P.setSelectionRange(ye,ye,"forward");return}if(e.reverseFillMask===!0)if(Y===!0){const ye=Math.max(0,X.length-(X===i?0:Math.min(H.length,L+1)));ye===1&&F===1?P.setSelectionRange(ye,ye,"forward"):b.rightReverse(P,ye)}else{const ye=X.length-L;P.setSelectionRange(ye,ye,"backward")}else if(Y===!0){const ye=Math.max(0,a.indexOf(vr),Math.min(H.length,F)-1);b.right(P,ye)}else{const ye=F-1;b.right(P,ye)}});const de=e.unmaskedValue===!0?M(X):X;String(e.modelValue)!==de&&(e.modelValue!==null||de!=="")&&o(de,!0)}function x(T,I,N){const P=S(M(T.value));I=Math.max(0,a.indexOf(vr),Math.min(P.length,I)),l=I,T.setSelectionRange(I,N,"forward")}const b={left(T,I){const N=a.slice(I-1).indexOf(vr)===-1;let P=Math.max(0,I-1);for(;P>=0;P--)if(a[P]===vr){I=P,N===!0&&I++;break}if(P<0&&a[I]!==void 0&&a[I]!==vr)return b.right(T,0);I>=0&&T.setSelectionRange(I,I,"backward")},right(T,I){const N=T.value.length;let P=Math.min(N,I+1);for(;P<=N;P++)if(a[P]===vr){I=P;break}else a[P-1]===vr&&(I=P);if(P>N&&a[I-1]!==void 0&&a[I-1]!==vr)return b.left(T,N);T.setSelectionRange(I,I,"forward")},leftReverse(T,I){const N=p(T.value.length);let P=Math.max(0,I-1);for(;P>=0;P--)if(N[P-1]===vr){I=P;break}else if(N[P]===vr&&(I=P,P===0))break;if(P<0&&N[I]!==void 0&&N[I]!==vr)return b.rightReverse(T,0);I>=0&&T.setSelectionRange(I,I,"backward")},rightReverse(T,I){const N=T.value.length,P=p(N),F=P.slice(0,I+1).indexOf(vr)===-1;let L=Math.min(N,I+1);for(;L<=N;L++)if(P[L-1]===vr){I=L,I>0&&F===!0&&I--;break}if(L>N&&P[I-1]!==void 0&&P[I-1]!==vr)return b.leftReverse(T,N);T.setSelectionRange(I,I,"forward")}};function _(T){t("click",T),u=void 0}function w(T){if(t("keydown",T),T_(T)===!0||T.altKey===!0)return;const I=r.value,N=I.selectionStart,P=I.selectionEnd;if(T.shiftKey||(u=void 0),T.keyCode===37||T.keyCode===39){T.shiftKey&&u===void 0&&(u=I.selectionDirection==="forward"?N:P);const F=b[(T.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];if(T.preventDefault(),F(I,u===N?P:N),T.shiftKey){const L=I.selectionStart;I.setSelectionRange(Math.min(u,L),Math.max(u,L),"forward")}}else T.keyCode===8&&e.reverseFillMask!==!0&&N===P?(b.left(I,N),I.setSelectionRange(I.selectionStart,P,"backward")):T.keyCode===46&&e.reverseFillMask===!0&&N===P&&(b.rightReverse(I,P),I.setSelectionRange(N,I.selectionEnd,"forward"))}function S(T){if(T==null||T==="")return"";if(e.reverseFillMask===!0)return D(T);const I=n;let N=0,P="";for(let F=0;F<I.length;F++){const L=T[N],z=I[F];if(typeof z=="string")P+=z,L===z&&N++;else if(L!==void 0&&z.regex.test(L))P+=z.transform!==void 0?z.transform(L):L,N++;else return P}return P}function D(T){const I=n,N=a.indexOf(vr);let P=T.length-1,F="";for(let L=I.length-1;L>=0&&P!==-1;L--){const z=I[L];let H=T[P];if(typeof z=="string")F=z+F,H===z&&P--;else if(H!==void 0&&z.regex.test(H))do F=(z.transform!==void 0?z.transform(H):H)+F,P--,H=T[P];while(N===L&&H!==void 0&&z.regex.test(H));else return F}return F}function M(T){return typeof T!="string"||s===void 0?typeof T=="number"?s(""+T):T:s(T)}function O(T){return i.length-T.length<=0?T:e.reverseFillMask===!0&&T.length!==0?i.slice(0,-T.length)+T:T+i.slice(T.length)}return{innerValue:d,hasMask:c,moveCursorForPaste:x,updateMaskValue:g,onMaskedKeydown:w,onMaskedClick:_}}const Su={name:String};function YI(e){return j(()=>({type:"hidden",name:e.name,value:e.modelValue}))}function Ym(e={}){return(t,o,r)=>{t[o](G("input",{class:"hidden"+(r||""),...e.value}))}}function dR(e){return j(()=>e.name||e.for)}function K2e(e,t){function o(){const r=e.modelValue;try{const a="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(r)===r&&("length"in r?Array.from(r):[r]).forEach(i=>{a.items.add(i)}),{files:a.files}}catch{return{files:void 0}}}return j(t===!0?()=>{if(e.type==="file")return o()}:o)}const Y2e=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,J2e=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,Z2e=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,eye=/[a-z0-9_ -]$/i;function fR(e){return function(o){if(o.type==="compositionend"||o.type==="change"){if(o.target.qComposing!==!0)return;o.target.qComposing=!1,e(o)}else o.type==="compositionupdate"&&o.target.qComposing!==!0&&typeof o.data=="string"&&(Ho.is.firefox===!0?eye.test(o.data)===!1:Y2e.test(o.data)===!0||J2e.test(o.data)===!0||Z2e.test(o.data)===!0)===!0&&(o.target.qComposing=!0)}}var ma=Ct({name:"QInput",inheritAttrs:!1,props:{...Eb,...Q2e,...Su,modelValue:[String,Number,FileList],shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...QI,"paste","change","keydown","click","animationend"],setup(e,{emit:t,attrs:o}){const{proxy:r}=xt(),{$q:a}=r,i={};let n=NaN,s,l,u=null,c;const d=Ue(null),f=dR(e),{innerValue:m,hasMask:p,moveCursorForPaste:v,updateMaskValue:g,onMaskedKeydown:x,onMaskedClick:b}=X2e(e,t,H,d),_=K2e(e,!0),w=j(()=>Xp(m.value)),S=fR(L),D=XI({changeEvent:!0}),M=j(()=>e.type==="textarea"||e.autogrow===!0),O=j(()=>M.value===!0||["text","search","url","tel","password"].includes(e.type)),T=j(()=>{const re={...D.splitAttrs.listeners.value,onInput:L,onPaste:F,onChange:Y,onBlur:de,onFocus:en};return re.onCompositionstart=re.onCompositionupdate=re.onCompositionend=S,p.value===!0&&(re.onKeydown=x,re.onClick=b),e.autogrow===!0&&(re.onAnimationend=z),re}),I=j(()=>{const re={tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:f.value,...D.splitAttrs.attributes.value,id:D.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0};return M.value===!1&&(re.type=e.type),e.autogrow===!0&&(re.rows=1),re});ct(()=>e.type,()=>{d.value&&(d.value.value=e.modelValue)}),ct(()=>e.modelValue,re=>{if(p.value===!0){if(l===!0&&(l=!1,String(re)===n))return;g(re)}else m.value!==re&&(m.value=re,e.type==="number"&&i.hasOwnProperty("value")===!0&&(s===!0?s=!1:delete i.value));e.autogrow===!0&&Ao(X)}),ct(()=>e.autogrow,re=>{re===!0?Ao(X):d.value!==null&&o.rows>0&&(d.value.style.height="auto")}),ct(()=>e.dense,()=>{e.autogrow===!0&&Ao(X)});function N(){qh(()=>{const re=document.activeElement;d.value!==null&&d.value!==re&&(re===null||re.id!==D.targetUid.value)&&d.value.focus({preventScroll:!0})})}function P(){d.value!==null&&d.value.select()}function F(re){if(p.value===!0&&e.reverseFillMask!==!0){const _e=re.target;v(_e,_e.selectionStart,_e.selectionEnd)}t("paste",re)}function L(re){if(!re||!re.target)return;if(e.type==="file"){t("update:modelValue",re.target.files);return}const _e=re.target.value;if(re.target.qComposing===!0){i.value=_e;return}if(p.value===!0)g(_e,!1,re.inputType);else if(H(_e),O.value===!0&&re.target===document.activeElement){const{selectionStart:ve,selectionEnd:ke}=re.target;ve!==void 0&&ke!==void 0&&Ao(()=>{re.target===document.activeElement&&_e.indexOf(re.target.value)===0&&re.target.setSelectionRange(ve,ke)})}e.autogrow===!0&&X()}function z(re){t("animationend",re),X()}function H(re,_e){c=()=>{u=null,e.type!=="number"&&i.hasOwnProperty("value")===!0&&delete i.value,e.modelValue!==re&&n!==re&&(n=re,_e===!0&&(l=!0),t("update:modelValue",re),Ao(()=>{n===re&&(n=NaN)})),c=void 0},e.type==="number"&&(s=!0,i.value=re),e.debounce!==void 0?(u!==null&&clearTimeout(u),i.value=re,u=setTimeout(c,e.debounce)):c()}function X(){requestAnimationFrame(()=>{const re=d.value;if(re!==null){const _e=re.parentNode.style,{scrollTop:ve}=re,{overflowY:ke,maxHeight:Ie}=a.platform.is.firefox===!0?{}:window.getComputedStyle(re),he=ke!==void 0&&ke!=="scroll";he===!0&&(re.style.overflowY="hidden"),_e.marginBottom=re.scrollHeight-1+"px",re.style.height="1px",re.style.height=re.scrollHeight+"px",he===!0&&(re.style.overflowY=parseInt(Ie,10)<re.scrollHeight?"auto":"hidden"),_e.marginBottom="",re.scrollTop=ve}})}function Y(re){S(re),u!==null&&(clearTimeout(u),u=null),c!==void 0&&c(),t("change",re.target.value)}function de(re){re!==void 0&&en(re),u!==null&&(clearTimeout(u),u=null),c!==void 0&&c(),s=!1,l=!1,delete i.value,e.type!=="file"&&setTimeout(()=>{d.value!==null&&(d.value.value=m.value!==void 0?m.value:"")})}function ye(){return i.hasOwnProperty("value")===!0?i.value:m.value!==void 0?m.value:""}Vo(()=>{de()}),Va(()=>{e.autogrow===!0&&X()}),Object.assign(D,{innerValue:m,fieldClass:j(()=>`q-${M.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:j(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length!==0),inputRef:d,emitValue:H,hasValue:w,floatingLabel:j(()=>w.value===!0&&(e.type!=="number"||isNaN(m.value)===!1)||Xp(e.displayValue)),getControl:()=>G(M.value===!0?"textarea":"input",{ref:d,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle,...I.value,...T.value,...e.type!=="file"?{value:ye()}:_.value}),getShadowControl:()=>G("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(M.value===!0?"":" text-no-wrap")},[G("span",{class:"invisible"},ye()),G("span",e.shadowText)])});const W=KI(D);return Object.assign(r,{focus:N,select:P,getNativeElement:()=>d.value}),an(r,"nativeEl",()=>d.value),W}}),dn=Ct({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:t}){const{proxy:{$q:o}}=xt(),r=kr(Rm,cr);if(r===cr)return console.error("QPage needs to be a deep child of QLayout"),cr;if(kr(jF,cr)===cr)return console.error("QPage needs to be child of QPageContainer"),cr;const i=j(()=>{const s=(r.header.space===!0?r.header.size:0)+(r.footer.space===!0?r.footer.size:0);if(typeof e.styleFn=="function"){const l=r.isContainer.value===!0?r.containerHeight.value:o.screen.height;return e.styleFn(s,l)}return{minHeight:r.isContainer.value===!0?r.containerHeight.value-s+"px":o.screen.height===0?s!==0?`calc(100vh - ${s}px)`:"100vh":o.screen.height-s+"px"}}),n=j(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>G("main",{class:n.value,style:i.value},uo(t.default))}}),tye=[{valor:"1",rotulo:"1 - Entrada ou aquisi\xE7\xE3o de servi\xE7os do estado"},{valor:"2",rotulo:"2 - Entrada ou aquisi\xE7\xE3o de servi\xE7os de outros estados"},{valor:"3",rotulo:"3 - Entrada ou aquisi\xE7\xE3o de servi\xE7os do exterior"},{valor:"5",rotulo:"5 - Sa\xEDdas ou presta\xE7\xF5es de servi\xE7os para o estado"},{valor:"6",rotulo:"6 - Sa\xEDdas ou presta\xE7\xF5es de servi\xE7os para outros estados"},{valor:"7",rotulo:"7 - Sa\xEDdas ou presta\xE7\xF5es de servi\xE7os para o exterior"}];const oye={data(){return{carregando:!0,listaFiltrada:[],placeholder:"Selecione o CFOP",termo:"",visivel:!1}},methods:{filtrar(){let e;if(this.termo){const t=$utils.removerAcentos(this.termo.toUpperCase()).split(" ").filter(o=>o!=="");e=this.listaCompleta.filter(o=>{const r=$utils.removerAcentos(" "+$utils.stringOrEmpty(o.cfop)+" "+$utils.stringOrEmpty(o.descr).toUpperCase());let a=!0;for(const i of t)isNaN(Number(i))?a=a&&r.includes(i):a=a&&r.includes(" "+i+" ");return a})}else e=this.listaCompleta;this.listaFiltrada=e.slice(0,50),this.carregando=!1},classeCfop(e){const t=String(e||"").substr(0,1);return(tye.find(o=>o.valor===t)||{}).rotulo||""},limpar(){this.listaFiltrada=[],this.placeholder="Selecione o CFOP",this.termo=""},onHide(){this.resolve({}),this.limpar()},onShow(){this.$refs.search.focus()},item_click(e={}){this.resolve(e),this.visivel=!1},async show(e){return this.carregando=!0,this.visivel=!0,this.listaCompleta=(await $db.cfop.le()).sort((t,o)=>$utils.stringOrEmpty(t.cfop).localeCompare($utils.stringOrEmpty(o.cfop))),this.filtrar(),new Promise((t,o)=>{this.resolve=t})}},mounted(){$g.promptCfop={show:this.show}}},aye={key:0,class:"bg-light q-px-lg q-py-xl round-borders text-tertiary text-center"},rye={key:1,class:"bg-light q-px-lg q-py-xl round-borders text-tertiary text-center"};function iye(e,t,o,r,a,i){return B(),oe(Ht,{modelValue:a.visivel,"onUpdate:modelValue":t[1]||(t[1]=n=>a.visivel=n),onHide:t[2]||(t[2]=n=>i.onHide()),onShow:t[3]||(t[3]=n=>i.onShow()),maximized:""},{default:C(()=>[h(To,{class:"bg-white",container:""},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,null,{default:C(()=>[Ee(h(ae,{icon:"arrow_back",flat:"",round:"",dense:""},null,512),[[st]]),h(lt,null,{default:C(()=>[h(ma,{modelValue:a.termo,"onUpdate:modelValue":[t[0]||(t[0]=n=>a.termo=n),i.filtrar],placeholder:a.placeholder,ref:"search",debounce:"600","clear-icon":"close",clearable:"",standout:"",filled:"",dark:"",dense:""},null,8,["modelValue","placeholder","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1}),h(Jo,null,{default:C(()=>[h(dn,{class:"u-container"},{default:C(()=>[a.carregando?(B(),be("div",aye," Carregando... ")):a.listaFiltrada.length?(B(),oe(At,{key:2,link:"","no-border":"",separator:""},{default:C(()=>[(B(!0),be(Qe,null,qt(a.listaFiltrada,n=>(B(),oe(qe,{key:n.id,onClick:s=>i.item_click(n),clickable:"",class:"q-pa-sm"},{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>[A("strong",null,le(n.cfop),1),K(" - "+le(n.descr),1)]),_:2},1024),h(Re,{caption:""},{default:C(()=>[K(" Classe:"+le(i.classeCfop(n.cfop)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(B(),be("div",rye," Nenhum resultado encontrado "))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}var nye=St(oye,[["render",iye]]);const sye={computed:{badgeCor(){return this.contato.ativo?this.contato.condutaRestricao?"negative":this.contato.condutaObservacao?"orange":"positive":"tertiary"},eLista(){return this.modo==="lista"}},data(){return{telefones:"",municipios:"",crm:""}},methods:{selecionar(){this.$emit("selecionar",this.contato)},cpf_ou_cnpj(e){const t=e==null?void 0:e.replace(/[^\d]/g,"");return/^\d{11}$/.test(t)?"CPF":/^\d{14}$/.test(t)?"CNPJ":"Documento inv\xE1lido"}},emits:["selecionar"],props:{contato:{type:[Boolean,Object,String]},modo:{type:String,default:"card"}},created(){if(this.contato.id){Se().contatoTelefone.where({idContato:this.contato.id}).toArray().then(t=>{let o="";for(const r of t.map(a=>(a.telefone||"").replace(/\D/g,"")))r&&(o+=r+" | ");this.telefones=o.substring(0,o.length-3)}),Se().contatoEndereco.where({idContato:this.contato.id}).toArray().then(t=>{let o="";for(const r of t.map(a=>(a.municipio||"").replace(/\s+/g," ").trim()))r&&(o+=r+" | ");this.municipios=o.substring(0,o.length-3)});const e=(this.contato.numeroDocumentoMunicipal||"").trim();e&&Se().contatoGrupo.where({idContato:this.contato.id}).toArray().then(t=>{for(const o of t){let r;r=(o.descricao||"").trim().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),["medico","medica","medicos"].find(a=>a===r)&&(this.crm=e)}})}}};function lye(e,t,o,r,a,i){const n=Ve("avatar"),s=Ve("badge"),l=Ve("BadgeCopiarUid");return o.contato.id!=="0"?(B(),oe(qe,{key:0,onClick:i.selecionar,is:i.eLista?"q-item":"q-card",clickable:"",class:"q-pa-sm"},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(n,{imagem:o.contato.imagem,redondo:i.eLista,rotulo:o.contato.apelido,tamanho:"60"},null,8,["imagem","redondo","rotulo"])]),_:1}),h(fe,{label:i.eLista,is:i.eLista?"q-item-section":"q-card-section"},{default:C(()=>[o.contato.apelido?(B(),oe(Re,{key:0,class:"text-weight-medium"},{default:C(()=>[A("span",null,[K(le(o.contato.apelido||o.contato.nome)+" ",1),h(Ft,{anchor:"bottom middle",self:"center middle"},{default:C(()=>t[0]||(t[0]=[K(" Nome Fant\xE1sia ")])),_:1})])]),_:1})):ie("",!0),o.contato.nome!==o.contato.apelido?(B(),oe(Re,{key:1,caption:"",class:"text-weight-medium"},{default:C(()=>[A("span",null,[K(le(o.contato.nome)+" ",1),h(Ft,{anchor:"bottom middle",self:"center middle"},{default:C(()=>t[1]||(t[1]=[K(" Raz\xE3o Social ")])),_:1})])]),_:1})):ie("",!0),o.contato.numeroDocumentoNacional?(B(),oe(Re,{key:2,caption:""},{default:C(()=>[A("span",null,[K(le(o.contato.numeroDocumentoNacional)+" ",1),h(Ft,{anchor:"bottom middle",self:"center middle"},{default:C(()=>[K(le(i.cpf_ou_cnpj(o.contato.numeroDocumentoNacional)),1)]),_:1})])]),_:1})):ie("",!0),a.municipios?(B(),oe(Re,{key:3,caption:"",class:"hideondesktop"},{default:C(()=>[h(s,{rotulo:a.municipios,cor:"grey-3"},null,8,["rotulo"])]),_:1})):ie("",!0)]),_:1},8,["label","is"]),h(fe,{sublabel:i.eLista,is:i.eLista?"q-item-section":"q-card-section",class:"hideonmobile"},{default:C(()=>[a.crm?(B(),oe(Re,{key:0,caption:""},{default:C(()=>[t[2]||(t[2]=A("strong",null,"CRM:",-1)),K(" "+le(a.crm),1)]),_:1})):ie("",!0),a.telefones?(B(),oe(Re,{key:1,caption:""},{default:C(()=>[A("strong",null,le(/\s\|\s/g.test(a.telefones)?"Telefones:":"Telefone:"),1),K(" "+le(a.telefones),1)]),_:1})):ie("",!0),a.municipios?(B(),oe(Re,{key:2,caption:""},{default:C(()=>[A("strong",null,le(/\s\|\s/g.test(a.municipios)?"Munic\xEDpios:":"Munic\xEDpio:"),1),K(" "+le(a.municipios),1)]),_:1})):ie("",!0)]),_:1},8,["sublabel","is"]),i.eLista?(B(),oe(fe,{key:0,avatar:"",right:""},{default:C(()=>[h(l,{id:o.contato.id,dica:"C\xF3digo Contato",numero:o.contato.codigoContato,cor:i.badgeCor},null,8,["id","numero","cor"])]),_:1})):ie("",!0)]),_:1},8,["onClick","is"])):ie("",!0)}var cye=St(sye,[["render",lye]]),uye=Ct({name:"QField",inheritAttrs:!1,props:{...Eb,tag:{type:String,default:"label"}},emits:QI,setup(){return KI(XI({tagProp:!0}))}});const dye={xs:8,sm:10,md:14,lg:20,xl:24};var fye=Ct({name:"QChip",props:{...ya,...Wd,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:t,emit:o}){const{proxy:{$q:r}}=xt(),a=xa(e,r),i=Qd(e,dye),n=j(()=>e.selected===!0||e.icon!==void 0),s=j(()=>e.selected===!0?e.iconSelected||r.iconSet.chip.selected:e.icon),l=j(()=>e.iconRemove||r.iconSet.chip.remove),u=j(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),c=j(()=>{const g=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(g?` text-${g} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(u.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(a.value===!0?" q-chip--dark q-dark":"")}),d=j(()=>{const g=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},x={...g,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||r.lang.label.remove};return{chip:g,remove:x}});function f(g){g.keyCode===13&&m(g)}function m(g){e.disable||(o("update:selected",!e.selected),o("click",g))}function p(g){(g.keyCode===void 0||g.keyCode===13)&&(zo(g),e.disable===!1&&(o("update:modelValue",!1),o("remove")))}function v(){const g=[];u.value===!0&&g.push(G("div",{class:"q-focus-helper"})),n.value===!0&&g.push(G(Pe,{class:"q-chip__icon q-chip__icon--left",name:s.value}));const x=e.label!==void 0?[G("div",{class:"ellipsis"},[e.label])]:void 0;return g.push(G("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},e5(t.default,x))),e.iconRight&&g.push(G(Pe,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&g.push(G(Pe,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:l.value,...d.value.remove,onClick:p,onKeyup:p})),g}return()=>{if(e.modelValue===!1)return;const g={class:c.value,style:i.value};return u.value===!0&&Object.assign(g,d.value.chip,{onClick:m,onKeyup:f}),Fd("div",g,v(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[VE,e.ripple]])}}}),aa=Ct({name:"QMenu",inheritAttrs:!1,props:{...nR,...Rh,...ya,...Ed,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:e_},self:{type:String,validator:e_},offset:{type:Array,validator:cR},scrollTarget:D_,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Vh,"click","escapeKey"],setup(e,{slots:t,emit:o,attrs:r}){let a=null,i,n,s;const l=xt(),{proxy:u}=l,{$q:c}=u,d=Ue(null),f=Ue(!1),m=j(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),p=xa(e,c),{registerTick:v,removeTick:g}=fm(),{registerTimeout:x}=hu(),{transitionProps:b,transitionStyle:_}=wb(e),{localScrollTarget:w,changeScrollEvent:S,unconfigureScrollTarget:D}=sR(e,_e),{anchorEl:M,canShow:O}=GI({showing:f}),{hide:T}=Bh({showing:f,canShow:O,handleShow:ye,handleHide:W,hideOnRouteChange:m,processOnMount:!0}),{showPortal:I,hidePortal:N,renderPortal:P}=jI(l,d,De,"menu"),F={anchorEl:M,innerRef:d,onClickOutside(Te){if(e.persistent!==!0&&f.value===!0)return T(Te),(Te.type==="touchstart"||Te.target.classList.contains("q-dialog__backdrop"))&&zo(Te),!0}},L=j(()=>t_(e.anchor||(e.cover===!0?"center middle":"bottom start"),c.lang.rtl)),z=j(()=>e.cover===!0?L.value:t_(e.self||"top start",c.lang.rtl)),H=j(()=>(e.square===!0?" q-menu--square":"")+(p.value===!0?" q-menu--dark q-dark":"")),X=j(()=>e.autoClose===!0?{onClick:ve}:{}),Y=j(()=>f.value===!0&&e.persistent!==!0);ct(Y,Te=>{Te===!0?(oR(Ie),lR(F)):(Kg(Ie),Zg(F))});function de(){qh(()=>{let Te=d.value;Te&&Te.contains(document.activeElement)!==!0&&(Te=Te.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||Te.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||Te.querySelector("[autofocus], [data-autofocus]")||Te,Te.focus({preventScroll:!0}))})}function ye(Te){if(a=e.noRefocus===!1?document.activeElement:null,rR(ke),I(),_e(),i=void 0,Te!==void 0&&(e.touchPosition||e.contextMenu)){const J=ls(Te);if(J.left!==void 0){const{top:q,left:ne}=M.value.getBoundingClientRect();i={left:J.left-ne,top:J.top-q}}}n===void 0&&(n=ct(()=>c.screen.width+"|"+c.screen.height+"|"+e.self+"|"+e.anchor+"|"+c.lang.rtl,he)),e.noFocus!==!0&&document.activeElement.blur(),v(()=>{he(),e.noFocus!==!0&&de()}),x(()=>{c.platform.is.ios===!0&&(s=e.autoClose,d.value.click()),he(),I(!0),o("show",Te)},e.transitionDuration)}function W(Te){g(),N(),re(!0),a!==null&&(Te===void 0||Te.qClickOutside!==!0)&&(((Te&&Te.type.indexOf("key")===0?a.closest('[tabindex]:not([tabindex^="-"])'):void 0)||a).focus(),a=null),x(()=>{N(!0),o("hide",Te)},e.transitionDuration)}function re(Te){i=void 0,n!==void 0&&(n(),n=void 0),(Te===!0||f.value===!0)&&(aw(ke),D(),Zg(F),Kg(Ie)),Te!==!0&&(a=null)}function _e(){(M.value!==null||e.scrollTarget!==void 0)&&(w.value=O_(M.value,e.scrollTarget),S(w.value,he))}function ve(Te){s!==!0?(Zk(u,Te),o("click",Te)):s=!1}function ke(Te){Y.value===!0&&e.noFocus!==!0&&XF(d.value,Te.target)!==!0&&de()}function Ie(Te){o("escapeKey"),T(Te)}function he(){WI({targetEl:d.value,offset:e.offset,anchorEl:M.value,anchorOrigin:L.value,selfOrigin:z.value,absoluteOffset:i,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function De(){return G(Or,b.value,()=>f.value===!0?G("div",{role:"menu",...r,ref:d,tabindex:-1,class:["q-menu q-position-engine scroll"+H.value,r.class],style:[r.style,_.value],...X.value},uo(t.default)):null)}return Vo(re),Object.assign(u,{focus:de,updatePosition:he}),P}});let Kp=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const t=document.createElement("div");Object.assign(t.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(t),e.scrollLeft=-1e3,Kp=e.scrollLeft>=0,e.remove()}const ws=1e3,mye=["start","center","end","start-force","center-force","end-force"],mR=Array.prototype.filter,pye=window.getComputedStyle(document.body).overflowAnchor===void 0?Fs:function(e,t){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const o=e.children||[];mR.call(o,a=>a.dataset&&a.dataset.qVsAnchor!==void 0).forEach(a=>{delete a.dataset.qVsAnchor});const r=o[t];r&&r.dataset&&(r.dataset.qVsAnchor="")}))};function pm(e,t){return e+t}function Wy(e,t,o,r,a,i,n,s){const l=e===window?document.scrollingElement||document.documentElement:e,u=a===!0?"offsetWidth":"offsetHeight",c={scrollStart:0,scrollViewSize:-n-s,scrollMaxSize:0,offsetStart:-n,offsetEnd:-s};if(a===!0?(e===window?(c.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,c.scrollViewSize+=document.documentElement.clientWidth):(c.scrollStart=l.scrollLeft,c.scrollViewSize+=l.clientWidth),c.scrollMaxSize=l.scrollWidth,i===!0&&(c.scrollStart=(Kp===!0?c.scrollMaxSize-c.scrollViewSize:0)-c.scrollStart)):(e===window?(c.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,c.scrollViewSize+=document.documentElement.clientHeight):(c.scrollStart=l.scrollTop,c.scrollViewSize+=l.clientHeight),c.scrollMaxSize=l.scrollHeight),o!==null)for(let d=o.previousElementSibling;d!==null;d=d.previousElementSibling)d.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetStart+=d[u]);if(r!==null)for(let d=r.nextElementSibling;d!==null;d=d.nextElementSibling)d.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetEnd+=d[u]);if(t!==e){const d=l.getBoundingClientRect(),f=t.getBoundingClientRect();a===!0?(c.offsetStart+=f.left-d.left,c.offsetEnd-=f.width):(c.offsetStart+=f.top-d.top,c.offsetEnd-=f.height),e!==window&&(c.offsetStart+=c.scrollStart),c.offsetEnd+=c.scrollMaxSize-c.offsetStart}return c}function xP(e,t,o,r){t==="end"&&(t=(e===window?document.body:e)[o===!0?"scrollWidth":"scrollHeight"]),e===window?o===!0?(r===!0&&(t=(Kp===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-t),window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t):o===!0?(r===!0&&(t=(Kp===!0?e.scrollWidth-e.offsetWidth:0)-t),e.scrollLeft=t):e.scrollTop=t}function M0(e,t,o,r){if(o>=r)return 0;const a=t.length,i=Math.floor(o/ws),n=Math.floor((r-1)/ws)+1;let s=e.slice(i,n).reduce(pm,0);return o%ws!==0&&(s-=t.slice(i*ws,o).reduce(pm,0)),r%ws!==0&&r!==a&&(s-=t.slice(r,n*ws).reduce(pm,0)),s}const pR={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},hR=Object.keys(pR),iw={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...pR};function vR({virtualScrollLength:e,getVirtualScrollTarget:t,getVirtualScrollEl:o,virtualScrollItemSizeComputed:r}){const a=xt(),{props:i,emit:n,proxy:s}=a,{$q:l}=s;let u,c,d,f=[],m;const p=Ue(0),v=Ue(0),g=Ue({}),x=Ue(null),b=Ue(null),_=Ue(null),w=Ue({from:0,to:0}),S=j(()=>i.tableColspan!==void 0?i.tableColspan:100);r===void 0&&(r=j(()=>i.virtualScrollItemSize));const D=j(()=>r.value+";"+i.virtualScrollHorizontal),M=j(()=>D.value+";"+i.virtualScrollSliceRatioBefore+";"+i.virtualScrollSliceRatioAfter);ct(M,()=>{H()}),ct(D,O);function O(){z(c,!0)}function T(W){z(W===void 0?c:W)}function I(W,re){const _e=t();if(_e==null||_e.nodeType===8)return;const ve=Wy(_e,o(),x.value,b.value,i.virtualScrollHorizontal,l.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd);d!==ve.scrollViewSize&&H(ve.scrollViewSize),P(_e,ve,Math.min(e.value-1,Math.max(0,parseInt(W,10)||0)),0,mye.indexOf(re)!==-1?re:c!==-1&&W>c?"end":"start")}function N(){const W=t();if(W==null||W.nodeType===8)return;const re=Wy(W,o(),x.value,b.value,i.virtualScrollHorizontal,l.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd),_e=e.value-1,ve=re.scrollMaxSize-re.offsetStart-re.offsetEnd-v.value;if(u===re.scrollStart)return;if(re.scrollMaxSize<=0){P(W,re,0,0);return}d!==re.scrollViewSize&&H(re.scrollViewSize),F(w.value.from);const ke=Math.floor(re.scrollMaxSize-Math.max(re.scrollViewSize,re.offsetEnd)-Math.min(m[_e],re.scrollViewSize/2));if(ke>0&&Math.ceil(re.scrollStart)>=ke){P(W,re,_e,re.scrollMaxSize-re.offsetEnd-f.reduce(pm,0));return}let Ie=0,he=re.scrollStart-re.offsetStart,De=he;if(he<=ve&&he+re.scrollViewSize>=p.value)he-=p.value,Ie=w.value.from,De=he;else for(let Te=0;he>=f[Te]&&Ie<_e;Te++)he-=f[Te],Ie+=ws;for(;he>0&&Ie<_e;)he-=m[Ie],he>-re.scrollViewSize?(Ie++,De=he):De=m[Ie]+he;P(W,re,Ie,De)}function P(W,re,_e,ve,ke){const Ie=typeof ke=="string"&&ke.indexOf("-force")!==-1,he=Ie===!0?ke.replace("-force",""):ke,De=he!==void 0?he:"start";let Te=Math.max(0,_e-g.value[De]),J=Te+g.value.total;J>e.value&&(J=e.value,Te=Math.max(0,J-g.value.total)),u=re.scrollStart;const q=Te!==w.value.from||J!==w.value.to;if(q===!1&&he===void 0){Y(_e);return}const{activeElement:ne}=document,U=_.value;q===!0&&U!==null&&U!==ne&&U.contains(ne)===!0&&(U.addEventListener("focusout",L),setTimeout(()=>{U!==null&&U.removeEventListener("focusout",L)})),pye(U,_e-Te);const Z=he!==void 0?m.slice(Te,_e).reduce(pm,0):0;if(q===!0){const Ce=J>=w.value.from&&Te<=w.value.to?w.value.to:J;w.value={from:Te,to:Ce},p.value=M0(f,m,0,Te),v.value=M0(f,m,J,e.value),requestAnimationFrame(()=>{w.value.to!==J&&u===re.scrollStart&&(w.value={from:w.value.from,to:J},v.value=M0(f,m,J,e.value))})}requestAnimationFrame(()=>{if(u!==re.scrollStart)return;q===!0&&F(Te);const Ce=m.slice(Te,_e).reduce(pm,0),Q=Ce+re.offsetStart+p.value,V=Q+m[_e];let R=Q+ve;if(he!==void 0){const ee=Ce-Z,ce=re.scrollStart+ee;R=Ie!==!0&&ce<Q&&V<ce+re.scrollViewSize?ce:he==="end"?V-re.scrollViewSize:Q-(he==="start"?0:Math.round((re.scrollViewSize-m[_e])/2))}u=R,xP(W,R,i.virtualScrollHorizontal,l.lang.rtl),Y(_e)})}function F(W){const re=_.value;if(re){const _e=mR.call(re.children,Te=>Te.classList&&Te.classList.contains("q-virtual-scroll--skip")===!1),ve=_e.length,ke=i.virtualScrollHorizontal===!0?Te=>Te.getBoundingClientRect().width:Te=>Te.offsetHeight;let Ie=W,he,De;for(let Te=0;Te<ve;){for(he=ke(_e[Te]),Te++;Te<ve&&_e[Te].classList.contains("q-virtual-scroll--with-prev")===!0;)he+=ke(_e[Te]),Te++;De=he-m[Ie],De!==0&&(m[Ie]+=De,f[Math.floor(Ie/ws)]+=De),Ie++}}}function L(){_.value!==null&&_.value!==void 0&&_.value.focus()}function z(W,re){const _e=1*r.value;(re===!0||Array.isArray(m)===!1)&&(m=[]);const ve=m.length;m.length=e.value;for(let Ie=e.value-1;Ie>=ve;Ie--)m[Ie]=_e;const ke=Math.floor((e.value-1)/ws);f=[];for(let Ie=0;Ie<=ke;Ie++){let he=0;const De=Math.min((Ie+1)*ws,e.value);for(let Te=Ie*ws;Te<De;Te++)he+=m[Te];f.push(he)}c=-1,u=void 0,p.value=M0(f,m,0,w.value.from),v.value=M0(f,m,w.value.to,e.value),W>=0?(F(w.value.from),Ao(()=>{I(W)})):de()}function H(W){if(W===void 0&&typeof window!="undefined"){const he=t();he!=null&&he.nodeType!==8&&(W=Wy(he,o(),x.value,b.value,i.virtualScrollHorizontal,l.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd).scrollViewSize)}d=W;const re=parseFloat(i.virtualScrollSliceRatioBefore)||0,_e=parseFloat(i.virtualScrollSliceRatioAfter)||0,ve=1+re+_e,ke=W===void 0||W<=0?1:Math.ceil(W/r.value),Ie=Math.max(1,ke,Math.ceil((i.virtualScrollSliceSize>0?i.virtualScrollSliceSize:10)/ve));g.value={total:Math.ceil(Ie*ve),start:Math.ceil(Ie*re),center:Math.ceil(Ie*(.5+re)),end:Math.ceil(Ie*(1+re)),view:ke}}function X(W,re){const _e=i.virtualScrollHorizontal===!0?"width":"height",ve={["--q-virtual-scroll-item-"+_e]:r.value+"px"};return[W==="tbody"?G(W,{class:"q-virtual-scroll__padding",key:"before",ref:x},[G("tr",[G("td",{style:{[_e]:`${p.value}px`,...ve},colspan:S.value})])]):G(W,{class:"q-virtual-scroll__padding",key:"before",ref:x,style:{[_e]:`${p.value}px`,...ve}}),G(W,{class:"q-virtual-scroll__content",key:"content",ref:_,tabindex:-1},re.flat()),W==="tbody"?G(W,{class:"q-virtual-scroll__padding",key:"after",ref:b},[G("tr",[G("td",{style:{[_e]:`${v.value}px`,...ve},colspan:S.value})])]):G(W,{class:"q-virtual-scroll__padding",key:"after",ref:b,style:{[_e]:`${v.value}px`,...ve}})]}function Y(W){c!==W&&(i.onVirtualScroll!==void 0&&n("virtualScroll",{index:W,from:w.value.from,to:w.value.to-1,direction:W<c?"decrease":"increase",ref:s}),c=W)}H();const de=A_(N,l.platform.is.ios===!0?120:35);Mm(()=>{H()});let ye=!1;return Bs(()=>{ye=!0}),ac(()=>{if(ye!==!0)return;const W=t();u!==void 0&&W!==void 0&&W!==null&&W.nodeType!==8?xP(W,u,i.virtualScrollHorizontal,l.lang.rtl):I(c)}),Vo(()=>{de.cancel()}),Object.assign(s,{scrollTo:I,reset:O,refresh:T}),{virtualScrollSliceRange:w,virtualScrollSliceSizeComputed:g,setVirtualScrollSize:H,onVirtualScrollEvt:de,localResetVirtualScroll:z,padVirtualScroll:X,scrollTo:I,reset:O,refresh:T}}const CP=e=>["add","add-unique","toggle"].includes(e),hye=".*+?^${}()|[]\\",vye=Object.keys(Eb);var ii=Ct({name:"QSelect",inheritAttrs:!1,props:{...iw,...Su,...Eb,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:CP},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:iw.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...QI,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:t,emit:o}){const{proxy:r}=xt(),{$q:a}=r,i=Ue(!1),n=Ue(!1),s=Ue(-1),l=Ue(""),u=Ue(!1),c=Ue(!1);let d=null,f=null,m,p,v,g=null,x,b,_,w;const S=Ue(null),D=Ue(null),M=Ue(null),O=Ue(null),T=Ue(null),I=dR(e),N=fR(It),P=j(()=>Array.isArray(e.options)?e.options.length:0),F=j(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:L,virtualScrollSliceSizeComputed:z,localResetVirtualScroll:H,padVirtualScroll:X,onVirtualScrollEvt:Y,scrollTo:de,setVirtualScrollSize:ye}=vR({virtualScrollLength:P,getVirtualScrollTarget:ni,getVirtualScrollEl:zi,virtualScrollItemSizeComputed:F}),W=XI(),re=j(()=>{const Oe=e.mapOptions===!0&&e.multiple!==!0,Dt=e.modelValue!==void 0&&(e.modelValue!==null||Oe===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const bt=e.mapOptions===!0&&m!==void 0?m:[],mo=Dt.map(ha=>$e(ha,bt));return e.modelValue===null&&Oe===!0?mo.filter(ha=>ha!==null):mo}return Dt}),_e=j(()=>{const Oe={};return vye.forEach(Dt=>{const bt=e[Dt];bt!==void 0&&(Oe[Dt]=bt)}),Oe}),ve=j(()=>e.optionsDark===null?W.isDark.value:e.optionsDark),ke=j(()=>Xp(re.value)),Ie=j(()=>{let Oe="q-field__input q-placeholder col";return e.hideSelected===!0||re.value.length===0?[Oe,e.inputClass]:(Oe+=" q-field__input--padding",e.inputClass===void 0?Oe:[Oe,e.inputClass])}),he=j(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),De=j(()=>P.value===0),Te=j(()=>re.value.map(Oe=>pe.value(Oe)).join(", ")),J=j(()=>e.displayValue!==void 0?e.displayValue:Te.value),q=j(()=>e.optionsHtml===!0?()=>!0:Oe=>Oe!=null&&Oe.html===!0),ne=j(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||re.value.some(q.value))),U=j(()=>W.focused.value===!0?e.tabindex:-1),Z=j(()=>{const Oe={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":i.value===!0?"true":"false","aria-controls":`${W.targetUid.value}_lb`};return s.value>=0&&(Oe["aria-activedescendant"]=`${W.targetUid.value}_${s.value}`),Oe}),Ce=j(()=>({id:`${W.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),Q=j(()=>re.value.map((Oe,Dt)=>({index:Dt,opt:Oe,html:q.value(Oe),selected:!0,removeAtIndex:Pt,toggleOption:fo,tabindex:U.value}))),V=j(()=>{if(P.value===0)return[];const{from:Oe,to:Dt}=L.value;return e.options.slice(Oe,Dt).map((bt,mo)=>{const ha=we.value(bt)===!0,ca=Rt(bt)===!0,hr=Oe+mo,$a={clickable:!0,active:ca,activeClass:ce.value,manualFocus:!0,focused:!1,disable:ha,tabindex:-1,dense:e.optionsDense,dark:ve.value,role:"option","aria-selected":ca===!0?"true":"false",id:`${W.targetUid.value}_${hr}`,onClick:()=>{fo(bt)}};return ha!==!0&&(s.value===hr&&($a.focused=!0),a.platform.is.desktop===!0&&($a.onMousemove=()=>{i.value===!0&&He(hr)})),{index:hr,opt:bt,html:q.value(bt),label:pe.value(bt),selected:$a.active,focused:$a.focused,toggleOption:fo,setOptionIndex:He,itemProps:$a}})}),R=j(()=>e.dropdownIcon!==void 0?e.dropdownIcon:a.iconSet.arrow.dropdown),ee=j(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),ce=j(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),se=j(()=>dt(e.optionValue,"value")),pe=j(()=>dt(e.optionLabel,"label")),we=j(()=>dt(e.optionDisable,"disable")),Ne=j(()=>re.value.map(Oe=>se.value(Oe))),Ge=j(()=>{const Oe={onInput:It,onChange:N,onKeydown:pr,onKeyup:po,onKeypress:Ea,onFocus:Ut,onClick(Dt){p===!0&&en(Dt)}};return Oe.onCompositionstart=Oe.onCompositionupdate=Oe.onCompositionend=N,Oe});ct(re,Oe=>{m=Oe,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&W.innerLoading.value!==!0&&(n.value!==!0&&i.value!==!0||ke.value!==!0)&&(v!==!0&&pl(),(n.value===!0||i.value===!0)&&ro(""))},{immediate:!0}),ct(()=>e.fillInput,pl),ct(i,e0),ct(P,Fb);function Ze(Oe){return e.emitValue===!0?se.value(Oe):Oe}function ot(Oe){if(Oe!==-1&&Oe<re.value.length)if(e.multiple===!0){const Dt=e.modelValue.slice();o("remove",{index:Oe,value:Dt.splice(Oe,1)[0]}),o("update:modelValue",Dt)}else o("update:modelValue",null)}function Pt(Oe){ot(Oe),W.focus()}function $t(Oe,Dt){const bt=Ze(Oe);if(e.multiple!==!0){e.fillInput===!0&&Zt(pe.value(Oe),!0,!0),o("update:modelValue",bt);return}if(re.value.length===0){o("add",{index:0,value:bt}),o("update:modelValue",e.multiple===!0?[bt]:bt);return}if(Dt===!0&&Rt(Oe)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const mo=e.modelValue.slice();o("add",{index:mo.length,value:bt}),mo.push(bt),o("update:modelValue",mo)}function fo(Oe,Dt){if(W.editable.value!==!0||Oe===void 0||we.value(Oe)===!0)return;const bt=se.value(Oe);if(e.multiple!==!0){Dt!==!0&&(Zt(e.fillInput===!0?pe.value(Oe):"",!0,!0),ml()),D.value!==null&&D.value.focus(),(re.value.length===0||Ys(se.value(re.value[0]),bt)!==!0)&&o("update:modelValue",e.emitValue===!0?bt:Oe);return}if((p!==!0||u.value===!0)&&W.focus(),Ut(),re.value.length===0){const ca=e.emitValue===!0?bt:Oe;o("add",{index:0,value:ca}),o("update:modelValue",e.multiple===!0?[ca]:ca);return}const mo=e.modelValue.slice(),ha=Ne.value.findIndex(ca=>Ys(ca,bt));if(ha!==-1)o("remove",{index:ha,value:mo.splice(ha,1)[0]});else{if(e.maxValues!==void 0&&mo.length>=e.maxValues)return;const ca=e.emitValue===!0?bt:Oe;o("add",{index:mo.length,value:ca}),mo.push(ca)}o("update:modelValue",mo)}function He(Oe){if(a.platform.is.desktop!==!0)return;const Dt=Oe!==-1&&Oe<P.value?Oe:-1;s.value!==Dt&&(s.value=Dt)}function tt(Oe=1,Dt){if(i.value===!0){let bt=s.value;do bt=o3(bt+Oe,-1,P.value-1);while(bt!==-1&&bt!==s.value&&we.value(e.options[bt])===!0);s.value!==bt&&(He(bt),de(bt),Dt!==!0&&e.useInput===!0&&e.fillInput===!0&&Qt(bt>=0?pe.value(e.options[bt]):x,!0))}}function $e(Oe,Dt){const bt=mo=>Ys(se.value(mo),Oe);return e.options.find(bt)||Dt.find(bt)||Oe}function dt(Oe,Dt){const bt=Oe!==void 0?Oe:Dt;return typeof bt=="function"?bt:mo=>mo!==null&&typeof mo=="object"&&bt in mo?mo[bt]:mo}function Rt(Oe){const Dt=se.value(Oe);return Ne.value.find(bt=>Ys(bt,Dt))!==void 0}function Ut(Oe){e.useInput===!0&&D.value!==null&&(Oe===void 0||D.value===Oe.target&&Oe.target.value===Te.value)&&D.value.select()}function gt(Oe){cs(Oe,27)===!0&&i.value===!0&&(en(Oe),ml(),pl()),o("keyup",Oe)}function po(Oe){const{value:Dt}=Oe.target;if(Oe.keyCode!==void 0){gt(Oe);return}if(Oe.target.value="",d!==null&&(clearTimeout(d),d=null),f!==null&&(clearTimeout(f),f=null),pl(),typeof Dt=="string"&&Dt.length!==0){const bt=Dt.toLocaleLowerCase(),mo=ca=>{const hr=e.options.find($a=>ca.value($a).toLocaleLowerCase()===bt);return hr===void 0?!1:(re.value.indexOf(hr)===-1?fo(hr):ml(),!0)},ha=ca=>{mo(se)!==!0&&(mo(pe)===!0||ca===!0||ro(Dt,!0,()=>ha(!0)))};ha()}else W.clearValue(Oe)}function Ea(Oe){o("keypress",Oe)}function pr(Oe){if(o("keydown",Oe),T_(Oe)===!0)return;const Dt=l.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),bt=Oe.shiftKey!==!0&&e.multiple!==!0&&(s.value!==-1||Dt===!0);if(Oe.keyCode===27){Vi(Oe);return}if(Oe.keyCode===9&&bt===!1){$o();return}if(Oe.target===void 0||Oe.target.id!==W.targetUid.value||W.editable.value!==!0)return;if(Oe.keyCode===40&&W.innerLoading.value!==!0&&i.value===!1){zo(Oe),Hi();return}if(Oe.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&l.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?ot(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&o("update:modelValue",null);return}(Oe.keyCode===35||Oe.keyCode===36)&&(typeof l.value!="string"||l.value.length===0)&&(zo(Oe),s.value=-1,tt(Oe.keyCode===36?1:-1,e.multiple)),(Oe.keyCode===33||Oe.keyCode===34)&&z.value!==void 0&&(zo(Oe),s.value=Math.max(-1,Math.min(P.value,s.value+(Oe.keyCode===33?-1:1)*z.value.view)),tt(Oe.keyCode===33?1:-1,e.multiple)),(Oe.keyCode===38||Oe.keyCode===40)&&(zo(Oe),tt(Oe.keyCode===38?-1:1,e.multiple));const mo=P.value;if((_===void 0||w<Date.now())&&(_=""),mo>0&&e.useInput!==!0&&Oe.key!==void 0&&Oe.key.length===1&&Oe.altKey===!1&&Oe.ctrlKey===!1&&Oe.metaKey===!1&&(Oe.keyCode!==32||_.length!==0)){i.value!==!0&&Hi(Oe);const ha=Oe.key.toLocaleLowerCase(),ca=_.length===1&&_[0]===ha;w=Date.now()+1500,ca===!1&&(zo(Oe),_+=ha);const hr=new RegExp("^"+_.split("").map(ef=>hye.indexOf(ef)!==-1?"\\"+ef:ef).join(".*"),"i");let $a=s.value;if(ca===!0||$a<0||hr.test(pe.value(e.options[$a]))!==!0)do $a=o3($a+1,-1,mo-1);while($a!==s.value&&(we.value(e.options[$a])===!0||hr.test(pe.value(e.options[$a]))!==!0));s.value!==$a&&Ao(()=>{He($a),de($a),$a>=0&&e.useInput===!0&&e.fillInput===!0&&Qt(pe.value(e.options[$a]),!0)});return}if(!(Oe.keyCode!==13&&(Oe.keyCode!==32||e.useInput===!0||_!=="")&&(Oe.keyCode!==9||bt===!1))){if(Oe.keyCode!==9&&zo(Oe),s.value!==-1&&s.value<mo){fo(e.options[s.value]);return}if(Dt===!0){const ha=(ca,hr)=>{if(hr){if(CP(hr)!==!0)return}else hr=e.newValueMode;if(Zt("",e.multiple!==!0,!0),ca==null)return;(hr==="toggle"?fo:$t)(ca,hr==="add-unique"),e.multiple!==!0&&(D.value!==null&&D.value.focus(),ml())};if(e.onNewValue!==void 0?o("newValue",l.value,ha):ha(l.value),e.multiple!==!0)return}i.value===!0?$o():W.innerLoading.value!==!0&&Hi()}}function zi(){return p===!0?T.value:M.value!==null&&M.value.contentEl!==null?M.value.contentEl:void 0}function ni(){return zi()}function ps(){return e.hideSelected===!0?[]:t["selected-item"]!==void 0?Q.value.map(Oe=>t["selected-item"](Oe)).slice():t.selected!==void 0?[].concat(t.selected()):e.useChips===!0?Q.value.map((Oe,Dt)=>G(fye,{key:"option-"+Dt,removable:W.editable.value===!0&&we.value(Oe.opt)!==!0,dense:!0,textColor:e.color,tabindex:U.value,onRemove(){Oe.removeAtIndex(Dt)}},()=>G("span",{class:"ellipsis",[Oe.html===!0?"innerHTML":"textContent"]:pe.value(Oe.opt)}))):[G("span",{[ne.value===!0?"innerHTML":"textContent"]:J.value})]}function qn(){if(De.value===!0)return t["no-option"]!==void 0?t["no-option"]({inputValue:l.value}):void 0;const Oe=t.option!==void 0?t.option:bt=>G(qe,{key:bt.index,...bt.itemProps},()=>G(fe,()=>G(Re,()=>G("span",{[bt.html===!0?"innerHTML":"textContent"]:bt.label}))));let Dt=X("div",V.value.map(Oe));return t["before-options"]!==void 0&&(Dt=t["before-options"]().concat(Dt)),Mr(t["after-options"],Dt)}function Xe(Oe,Dt){const bt=Dt===!0?{...Z.value,...W.splitAttrs.attributes.value}:void 0,mo={ref:Dt===!0?D:void 0,key:"i_t",class:Ie.value,style:e.inputStyle,value:l.value!==void 0?l.value:"",type:"search",...bt,id:Dt===!0?W.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":Oe===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Ge.value};return Oe!==!0&&p===!0&&(Array.isArray(mo.class)===!0?mo.class=[...mo.class,"no-pointer-events"]:mo.class+=" no-pointer-events"),G("input",mo)}function It(Oe){d!==null&&(clearTimeout(d),d=null),f!==null&&(clearTimeout(f),f=null),!(Oe&&Oe.target&&Oe.target.qComposing===!0)&&(Qt(Oe.target.value||""),v=!0,x=l.value,W.focused.value!==!0&&(p!==!0||u.value===!0)&&W.focus(),e.onFilter!==void 0&&(d=setTimeout(()=>{d=null,ro(l.value)},e.inputDebounce)))}function Qt(Oe,Dt){l.value!==Oe&&(l.value=Oe,Dt===!0||e.inputDebounce===0||e.inputDebounce==="0"?o("inputValue",Oe):f=setTimeout(()=>{f=null,o("inputValue",Oe)},e.inputDebounce))}function Zt(Oe,Dt,bt){v=bt!==!0,e.useInput===!0&&(Qt(Oe,!0),(Dt===!0||bt!==!0)&&(x=Oe),Dt!==!0&&ro(Oe))}function ro(Oe,Dt,bt){if(e.onFilter===void 0||Dt!==!0&&W.focused.value!==!0)return;W.innerLoading.value===!0?o("filterAbort"):(W.innerLoading.value=!0,c.value=!0),Oe!==""&&e.multiple!==!0&&re.value.length!==0&&v!==!0&&Oe===pe.value(re.value[0])&&(Oe="");const mo=setTimeout(()=>{i.value===!0&&(i.value=!1)},10);g!==null&&clearTimeout(g),g=mo,o("filter",Oe,(ha,ca)=>{(Dt===!0||W.focused.value===!0)&&g===mo&&(clearTimeout(g),typeof ha=="function"&&ha(),c.value=!1,Ao(()=>{W.innerLoading.value=!1,W.editable.value===!0&&(Dt===!0?i.value===!0&&ml():i.value===!0?e0(!0):i.value=!0),typeof ca=="function"&&Ao(()=>{ca(r)}),typeof bt=="function"&&Ao(()=>{bt(r)})}))},()=>{W.focused.value===!0&&g===mo&&(clearTimeout(g),W.innerLoading.value=!1,c.value=!1),i.value===!0&&(i.value=!1)})}function la(){return G(aa,{ref:M,class:he.value,style:e.popupContentStyle,modelValue:i.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&De.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:ve.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:ee.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Ce.value,onScrollPassive:Y,onBeforeShow:zh,onBeforeHide:xe,onShow:Me},qn)}function xe(Oe){Hh(Oe),$o()}function Me(){ye()}function je(Oe){en(Oe),D.value!==null&&D.value.focus(),u.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function pt(Oe){en(Oe),Ao(()=>{u.value=!1})}function ht(){const Oe=[G(uye,{class:`col-auto ${W.fieldClass.value}`,..._e.value,for:W.targetUid.value,dark:ve.value,square:!0,loading:c.value,itemAligned:!1,filled:!0,stackLabel:l.value.length!==0,...W.splitAttrs.listeners.value,onFocus:je,onBlur:pt},{...t,rawControl:()=>W.getControl(!0),before:void 0,after:void 0})];return i.value===!0&&Oe.push(G("div",{ref:T,class:he.value+" scroll",style:e.popupContentStyle,...Ce.value,onClick:Vi,onScrollPassive:Y},qn())),G(Ht,{ref:O,modelValue:n.value,position:e.useInput===!0?"top":void 0,transitionShow:b,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:zh,onBeforeHide:Oo,onHide:Lt,onShow:ho},()=>G("div",{class:"q-select__dialog"+(ve.value===!0?" q-select__dialog--dark q-dark":"")+(u.value===!0?" q-select__dialog--focused":"")},Oe))}function Oo(Oe){Hh(Oe),O.value!==null&&O.value.__updateRefocusTarget(W.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),W.focused.value=!1}function Lt(Oe){ml(),W.focused.value===!1&&o("blur",Oe),pl()}function ho(){const Oe=document.activeElement;(Oe===null||Oe.id!==W.targetUid.value)&&D.value!==null&&D.value!==Oe&&D.value.focus(),ye()}function $o(){n.value!==!0&&(s.value=-1,i.value===!0&&(i.value=!1),W.focused.value===!1&&(g!==null&&(clearTimeout(g),g=null),W.innerLoading.value===!0&&(o("filterAbort"),W.innerLoading.value=!1,c.value=!1)))}function Hi(Oe){W.editable.value===!0&&(p===!0?(W.onControlFocusin(Oe),n.value=!0,Ao(()=>{W.focus()})):W.focus(),e.onFilter!==void 0?ro(l.value):(De.value!==!0||t["no-option"]!==void 0)&&(i.value=!0))}function ml(){n.value=!1,$o()}function pl(){e.useInput===!0&&Zt(e.multiple!==!0&&e.fillInput===!0&&re.value.length!==0&&pe.value(re.value[0])||"",!0,!0)}function e0(Oe){let Dt=-1;if(Oe===!0){if(re.value.length!==0){const bt=se.value(re.value[0]);Dt=e.options.findIndex(mo=>Ys(se.value(mo),bt))}H(Dt)}He(Dt)}function Fb(Oe,Dt){i.value===!0&&W.innerLoading.value===!1&&(H(-1,!0),Ao(()=>{i.value===!0&&W.innerLoading.value===!1&&(Oe>Dt?H():e0(!0))}))}function Uh(){n.value===!1&&M.value!==null&&M.value.updatePosition()}function zh(Oe){Oe!==void 0&&en(Oe),o("popupShow",Oe),W.hasPopupOpen=!0,W.onControlFocusin(Oe)}function Hh(Oe){Oe!==void 0&&en(Oe),o("popupHide",Oe),W.hasPopupOpen=!1,W.onControlFocusout(Oe)}function jh(){p=a.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?t["no-option"]!==void 0||e.onFilter!==void 0||De.value===!1:!0),b=a.platform.is.ios===!0&&p===!0&&e.useInput===!0?"fade":e.transitionShow}return Nm(jh),km(Uh),jh(),Vo(()=>{d!==null&&clearTimeout(d),f!==null&&clearTimeout(f)}),Object.assign(r,{showPopup:Hi,hidePopup:ml,removeAtIndex:ot,add:$t,toggleOption:fo,getOptionIndex:()=>s.value,setOptionIndex:He,moveOptionSelection:tt,filter:ro,updateMenuPosition:Uh,updateInputValue:Zt,isOptionSelected:Rt,getEmittingOptionValue:Ze,isOptionDisabled:(...Oe)=>we.value.apply(null,Oe)===!0,getOptionValue:(...Oe)=>se.value.apply(null,Oe),getOptionLabel:(...Oe)=>pe.value.apply(null,Oe)}),Object.assign(W,{innerValue:re,fieldClass:j(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:S,targetRef:D,hasValue:ke,showPopup:Hi,floatingLabel:j(()=>e.hideSelected!==!0&&ke.value===!0||typeof l.value=="number"||l.value.length!==0||Xp(e.displayValue)),getControlChild:()=>{if(W.editable.value!==!1&&(n.value===!0||De.value!==!0||t["no-option"]!==void 0))return p===!0?ht():la();W.hasPopupOpen===!0&&(W.hasPopupOpen=!1)},controlEvents:{onFocusin(Oe){W.onControlFocusin(Oe)},onFocusout(Oe){W.onControlFocusout(Oe,()=>{pl(),$o()})},onClick(Oe){if(Vi(Oe),p!==!0&&i.value===!0){$o(),D.value!==null&&D.value.focus();return}Hi(Oe)}},getControl:Oe=>{const Dt=ps(),bt=Oe===!0||n.value!==!0||p!==!0;if(e.useInput===!0)Dt.push(Xe(Oe,bt));else if(W.editable.value===!0){const ha=bt===!0?Z.value:void 0;Dt.push(G("input",{ref:bt===!0?D:void 0,key:"d_t",class:"q-select__focus-target",id:bt===!0?W.targetUid.value:void 0,value:J.value,readonly:!0,"data-autofocus":Oe===!0||e.autofocus===!0||void 0,...ha,onKeydown:pr,onKeyup:gt,onKeypress:Ea})),bt===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&Dt.push(G("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:po}))}if(I.value!==void 0&&e.disable!==!0&&Ne.value.length!==0){const ha=Ne.value.map(ca=>G("option",{value:ca,selected:!0}));Dt.push(G("select",{class:"hidden",name:I.value,multiple:e.multiple},ha))}const mo=e.useInput===!0||bt!==!0?void 0:W.splitAttrs.attributes.value;return G("div",{class:"q-field__native row items-center",...mo,...W.splitAttrs.listeners.value},Dt)},getInnerAppend:()=>e.loading!==!0&&c.value!==!0&&e.hideDropdownIcon!==!0?[G(Pe,{class:"q-select__dropdown-icon"+(i.value===!0?" rotate-180":""),name:R.value})]:null}),KI(W)}}),cl=Ct({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:t,emit:o}){const r=xt(),a=Ue(null);let i=0;const n=[];function s(m){const p=typeof m=="boolean"?m:e.noErrorFocus!==!0,v=++i,g=(_,w)=>{o(`validation${_===!0?"Success":"Error"}`,w)},x=_=>{const w=_.validate();return typeof w.then=="function"?w.then(S=>({valid:S,comp:_}),S=>({valid:!1,comp:_,err:S})):Promise.resolve({valid:w,comp:_})};return(e.greedy===!0?Promise.all(n.map(x)).then(_=>_.filter(w=>w.valid!==!0)):n.reduce((_,w)=>_.then(()=>x(w).then(S=>{if(S.valid===!1)return Promise.reject(S)})),Promise.resolve()).catch(_=>[_])).then(_=>{if(_===void 0||_.length===0)return v===i&&g(!0),!0;if(v===i){const{comp:w,err:S}=_[0];if(S!==void 0&&console.error(S),g(!1,w),p===!0){const D=_.find(({comp:M})=>typeof M.focus=="function"&&_d(M.$)===!1);D!==void 0&&D.comp.focus()}}return!1})}function l(){i++,n.forEach(m=>{typeof m.resetValidation=="function"&&m.resetValidation()})}function u(m){m!==void 0&&zo(m);const p=i+1;s().then(v=>{p===i&&v===!0&&(e.onSubmit!==void 0?o("submit",m):m!==void 0&&m.target!==void 0&&typeof m.target.submit=="function"&&m.target.submit())})}function c(m){m!==void 0&&zo(m),o("reset"),Ao(()=>{l(),e.autofocus===!0&&e.noResetFocus!==!0&&d()})}function d(){qh(()=>{if(a.value===null)return;const m=a.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||a.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||a.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(a.value.querySelectorAll("[tabindex]"),p=>p.tabIndex!==-1);m!=null&&m.focus({preventScroll:!0})})}rl(GF,{bindComponent(m){n.push(m)},unbindComponent(m){const p=n.indexOf(m);p!==-1&&n.splice(p,1)}});let f=!1;return Bs(()=>{f=!0}),ac(()=>{f===!0&&e.autofocus===!0&&d()}),Va(()=>{e.autofocus===!0&&d()}),Object.assign(r.proxy,{validate:s,resetValidation:l,submit:u,reset:c,focus:d,getValidationComponents:()=>n}),()=>G("form",{class:"q-form",ref:a,onSubmit:u,onReset:c},uo(t.default))}});const Di={habilitarSalvar:!0,habilitarVoltar:!0,idContato:"",somenteLeitura:!1,titulo:"Contato",visivel:!1},gye={components:{Badge:Lh},computed:{dataAberturaLabel(){return this.ehCPF?"Data Nascimento":this.ehCNPJ?"Data Abertura":"Data Nascimento/Data Abertura"},ehCPF(){var e;return((e=this.contato.numeroDocumentoNacional)==null?void 0:e.length)===14},ehCNPJ(){var e;return((e=this.contato.numeroDocumentoNacional)==null?void 0:e.length)===18},numeroDocumentoNacionalLabel(){return this.ehCPF?"CPF":this.ehCNPJ?"CNPJ":"CPF/CNPJ"},numeroDocumentoEstadualLabel(){return this.ehCPF?"RG":this.ehCNPJ?"Inscri\xE7\xE3o Estadual":"RG/IE"}},data(){let e=JSON.parse(localStorage.getItem("usuario"));return{contato:{codigoContatoVendedor:e==null?void 0:e.codigoContato},contatoCompletoOriginal:{},contatoEnderecos:[],contatoTelefones:[],usuario:e,enderecoTipos:[{label:"Principal",value:"Principal",icon:"star",color:"orange"},{label:"Cobran\xE7a",value:"Cobran\xE7a",icon:"attach_money"},{label:"Comercial",value:"Comercial",icon:"business"},{label:"Correspond\xEAncia",value:"Correspond\xEAncia",icon:"mail"},{label:"Entrega",value:"Entrega",icon:"local_shipping"},{label:"Instala\xE7\xE3o",value:"Instala\xE7\xE3o",icon:"build"},{label:"Residencial",value:"Residencial",icon:"store_mall_directory"},{label:"Outros",value:"Outros",icon:"location_city"}],model:{},telefoneTipos:[{label:"Principal",value:"Principal",color:"orange",icon:"star"},{label:"Comercial",value:"Comercial",color:"dark",icon:"phone"},{label:"Celular",value:"Celular",color:"dark",icon:"phone_iphone"},{label:"Fixo",value:"Fixo",color:"dark",icon:"phone"},{label:"WhatsApp",value:"WhatsApp",color:"positive",icon:"mdi-whatsapp",ix:"duo"}],validationRules:{}}},emits:["evento"],methods:{adicionarEndereco(){const e={id:$utils.uuid(),idContato:this.contato.id};this.contatoEnderecos.push(e)},adicionarTelefone(){const e={id:$utils.uuid(),idContato:this.contato.id};this.contatoTelefones.push(e)},cfgValidationRules(){this.validationRules={required:[e=>!!e||"Campo obrigat\xF3rio"],numeroDocumentoNacional:[()=>{const e=(this.contato.numeroDocumentoNacional||"").replace(/\D/g,"");return e.trim()?$utils.validarDocumentoNacional(e)?!0:"Documento inv\xE1lido":!0}]}},async ehDocumentoNacionalExistente(){var e,t;for(const o of $db.contato.contatos){if(o.id===this.contato.id)continue;const r=(e=o.numeroDocumentoNacional)==null?void 0:e.replace(/\D/g,"");if(!!r&&((t=this.contato.numeroDocumentoNacional)==null?void 0:t.replace(/\D/g,""))===r)return new Promise((a,i)=>{$q.dialog({title:"Contato encontrado. Deseja utiliz\xE1-lo?",message:`
                <div style="width:40px;text-align:right;font-weight:bold;display:inline-block;margin-right:10px;">Nome</div>
                ${o.nome}
                <br />
                <div style="width:40px;text-align:right;font-weight:bold;display:inline-block;margin-right:10px;">${this.ehCPF?"CPF":"CNPJ"}</div>
                ${o.numeroDocumentoNacional}
              `,persistent:!0,html:!0,cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-info",textColor:"white",flat:!0}}).onOk(()=>{a(!0),this.$emit("evento","contatoEncontrado",o.id)}).onCancel(()=>{a(!0)})})}},enderecoIcone(e){const t=this.enderecoTipos.find(o=>o.label===e)||{};return{color:t.color||"dark",name:t.icon||"store_mall_directory",size:e==="Principal"?"18px":"24px"}},removerEndereco(e){this.contatoEnderecos=this.contatoEnderecos.filter(t=>t.id!==e)},removerTelefone(e){this.contatoTelefones=this.contatoTelefones.filter(t=>t.id!==e)},async salvar(){if(!!this.model.habilitarSalvar&&!await this.ehDocumentoNacionalExistente())try{$q.loading.show({message:"Salvando contato...",html:!0,boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary"}),await $db.contato.gravar({atual:{...this.contatoCompletoOriginal,contato:this.contato,telefone:this.contatoTelefones,endereco:this.contatoEnderecos},original:this.contatoCompletoOriginal}),this.$emit("evento","sucessoAoSalvar",this.contato.id),this.$q.notify({message:"Contato salvo",type:"positive"}),this.resolve&&(this.resolve(this.contato),this.model.visivel=!1)}catch{this.$q.notify({message:"N\xE3o foi poss\xEDvel salvar o contato",type:"negative"})}finally{$q.loading.hide()}},async setup(){var a,i,n,s,l,u,c,d,f,m,p,v,g;if(!localStorage.getItem("bancoDeDados"))return;const e={habilitarVoltar:(i=(a=this.modelValue)==null?void 0:a.habilitarVoltar)!=null?i:Di==null?void 0:Di.habilitarVoltar,somenteLeitura:(s=(n=this.modelValue)==null?void 0:n.somenteLeitura)!=null?s:Di==null?void 0:Di.somenteLeitura,titulo:(u=(l=this.modelValue)==null?void 0:l.titulo)!=null?u:Di==null?void 0:Di.titulo,visivel:(d=(c=this.modelValue)==null?void 0:c.visivel)!=null?d:Di==null?void 0:Di.visivel,habilitarSalvar:(m=(f=this.modelValue)==null?void 0:f.habilitarSalvar)!=null?m:Di==null?void 0:Di.habilitarSalvar};let t,o,r;if(e.habilitarSalvar=!e.somenteLeitura&&e.habilitarSalvar,(p=this.modelValue)!=null&&p.idContato){const x=await $db.contato.leCompletoV3(this.modelValue.idContato);this.contatoCompletoOriginal=$utils.clonarV2(x),t=x==null?void 0:x.contato,o=x==null?void 0:x.telefone,r=x==null?void 0:x.endereco}if(!t){const x=JSON.parse(localStorage.getItem("usuario"))||{};let b=(await $db.contato.ler({filtros:{ativo:!0,vendedores:!0}})).data;t={id:$utils.uuid(),ativo:!0};for(const _ of b){if(!_.numeroDocumentoNacional)continue;const w=(v=_.numeroDocumentoNacional)==null?void 0:v.replace(/\D/g,""),S=(g=x.numeroDocumentoNacional)==null?void 0:g.replace(/\D/g,"");w===S&&(t.idContatoVendedor=_.id)}}this.contato=t,this.contatoTelefones=o!=null?o:[],this.contatoEnderecos=r!=null?r:[],this.cfgValidationRules(),this.model=e},voltar(){!this.model.habilitarVoltar||(this.model.visivel=!1)},show(){return this.model.visivel=!0,new Promise((e,t)=>{this.resolve=e})},consultarCep(e){const t=this.contatoEnderecos[e],o=t.cep.replace(/[^0-9]/g,"");o.length<8||$utils.buscarEndereco(o).then(async({data:r})=>{if(t.bairro=r.bairro,t.complemento=r.complemento,t.ibgeCod=r.ibge,t.logradouro=r.logradouro,t.municipio=r.localidade,t.pais="Brasil",t.codigoPais=1058,t.uf=r.uf,t.ufCod=$utils.mapearEstadoCodigo[r.uf],this.$refs.campoNumero.focus(),r.ibge){const a=await $db.cidade.le({cidadeCodIbge:r.ibge.toString(),ativo:!0});t.cidadeCodChave=(a.find(i=>i.cod)||{}).cod}})},preencherNome(){this.contato.nome=this.contato.apelido}},props:{modelValue:{type:Object,required:!0}},watch:{modelValue(){this.setup()}},created(){this.setup()}},_ye={class:"layout-padding q-pa-none q-pb-md"},bye={class:"u-container"},yye={class:"text-right"},xye={class:"col-12 col-md"},Cye={class:"col-12 col-md"},wye={class:"col-12 col-md"},Eye={class:"col-2 col-md-auto"},Sye={class:"col-4 col-md"},Iye={class:"col-6 col-md"},Aye={class:"col-10 col-md"},Tye={key:0,class:"col-2 col-md-auto text-right"},Dye={key:0,class:"q-mt-md text-center"},Oye={class:"col-2 col-md-auto"},Pye={class:"col-10 col-md-3"},Fye={class:"col-12 col-md-2"},Mye={class:"col-2 col-md-2"},Nye={class:"col-10 col-md"},kye={class:"col-12 col-md-7"},Rye={class:"col-12 col-md-2"},Vye={class:"col-12 col-md-3"},Bye={class:"col-12 col-md-6"},qye={class:"col-12 col-md"},Lye={key:0,class:"col-2 col-md-auto text-right"},$ye={key:0,class:"q-mt-md text-center"};function Uye(e,t,o,r,a,i){const n=Ve("Badge"),s=Ve("campo"),l=Ve("row"),u=ah("mask");return B(),oe(Ht,{modelValue:a.model.visivel,"onUpdate:modelValue":t[5]||(t[5]=c=>a.model.visivel=c),maximized:"",persistent:"",onKeyup:jr(i.voltar,["esc"])},{default:C(()=>[h(To,{container:"",class:"bg-light"},{default:C(()=>[h(cl,{onSubmit:i.salvar},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,{class:"bg-primary text-white"},{default:C(()=>[a.model.habilitarVoltar?(B(),oe(ae,{key:0,dense:"",flat:"",icon:"arrow_back",round:"",onClick:i.voltar},null,8,["onClick"])):ie("",!0),h(lt,null,{default:C(()=>[K(le(a.model.titulo),1)]),_:1}),a.model.habilitarSalvar?(B(),oe(ae,{key:1,class:"bg-white text-primary",label:"Salvar",type:"submit",unelevated:""})):ie("",!0)]),_:1})]),_:1}),h(Jo,null,{default:C(()=>[A("div",_ye,[A("div",bye,[h(l,{class:"q-col-gutter-md q-pt-md"},{default:C(()=>[h(Mt,{class:"q-pa-md q-pa-md q-mt-md bg-white no-shadow full-width"},{default:C(()=>[A("div",yye,[h(n,{cor:"positive",escuro:""},{default:C(()=>{var c,d;return[K("#"+le((d=a.contato.codigoContato)!=null?d:(c=a.contato.id)==null?void 0:c.slice(0,6)),1)]}),_:1})]),h(s,{modelValue:a.contato.apelido,"onUpdate:modelValue":t[0]||(t[0]=c=>a.contato.apelido=c),rotulo:"Apelido",dense:"",somenteLeitura:a.model.somenteLeitura,onChange:i.preencherNome},null,8,["modelValue","somenteLeitura","onChange"]),h(s,{modelValue:a.contato.nome,"onUpdate:modelValue":t[1]||(t[1]=c=>a.contato.nome=c),rotulo:"Nome completo",dense:"",somenteLeitura:a.model.somenteLeitura,rules:a.validationRules.required},null,8,["modelValue","somenteLeitura","rules"]),h(l,{class:"q-col-gutter-x-md"},{default:C(()=>[A("div",xye,[Ee(h(ma,{label:i.numeroDocumentoNacionalLabel,class:"q-pb-xs",modelValue:a.contato.numeroDocumentoNacional,"onUpdate:modelValue":t[2]||(t[2]=c=>a.contato.numeroDocumentoNacional=c),dense:"",rules:a.validationRules.numeroDocumentoNacional,onBlur:i.ehDocumentoNacionalExistente,readonly:a.model.somenteLeitura},null,8,["label","modelValue","rules","onBlur","readonly"]),[[u,["###.###.###-##","##.###.###/####-##"]]])]),A("div",Cye,[h(s,{modelValue:a.contato.numeroDocumentoEstadual,"onUpdate:modelValue":t[3]||(t[3]=c=>a.contato.numeroDocumentoEstadual=c),rotulo:i.numeroDocumentoEstadualLabel,dense:"",somenteLeitura:a.model.somenteLeitura},null,8,["modelValue","rotulo","somenteLeitura"])]),A("div",wye,[h(s,{modelValue:a.contato.dataAbertura,"onUpdate:modelValue":t[4]||(t[4]=c=>a.contato.dataAbertura=c),tipo:"data",rotulo:i.dataAberturaLabel,dense:"",somenteLeitura:a.model.somenteLeitura},null,8,["modelValue","rotulo","somenteLeitura"])])]),_:1})]),_:1}),h(Mt,{class:"q-pa-md q-pa-md q-mt-md bg-white no-shadow full-width"},{default:C(()=>[t[6]||(t[6]=A("div",{class:"q-mb-md q-subheading"},"Telefones",-1)),(B(!0),be(Qe,null,qt(a.contatoTelefones,c=>(B(),be("div",{key:c.id,class:"u-separador animate-pop"},[h(l,{class:"q-col-gutter-x-md items-baseline"},{default:C(()=>[A("div",Eye,[h(Pe,{color:"none",name:"phone",size:"xs"})]),A("div",Sye,[h(ii,{modelValue:c.tipoTelefone,"onUpdate:modelValue":d=>c.tipoTelefone=d,options:a.telefoneTipos,"option-value":"value","option-label":"label","emit-value":"","map-options":"",dense:"",label:"Tipo",readonly:a.model.somenteLeitura},{before:C(()=>[h(ae,{flat:"",round:"",icon:(a.telefoneTipos.find(d=>d.value===c.tipoTelefone)||{}).icon||"star",color:"tertiary",size:"sm"},null,8,["icon"])]),option:C(d=>[h(qe,ou({ref_for:!0},d.itemProps),{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:d.opt.icon},null,8,["name"])]),_:2},1024),h(fe,null,{default:C(()=>[h(Re,{innerHTML:d.opt.label},null,8,["innerHTML"])]),_:2},1024)]),_:2},1040)]),_:2},1032,["modelValue","onUpdate:modelValue","options","readonly"])]),A("div",Iye,[h(s,{modelValue:c.telefone,"onUpdate:modelValue":d=>c.telefone=d,rotulo:"Telefone",dense:"",somenteLeitura:a.model.somenteLeitura},null,8,["modelValue","onUpdate:modelValue","somenteLeitura"])]),A("div",Aye,[h(s,{modelValue:c.observacao,"onUpdate:modelValue":d=>c.observacao=d,rotulo:"Observa\xE7\xE3o",dense:"",somenteLeitura:a.model.somenteLeitura},null,8,["modelValue","onUpdate:modelValue","somenteLeitura"])]),a.model.somenteLeitura?ie("",!0):(B(),be("div",Tye,[h(ae,{color:"negative",size:"xs",icon:"remove",outline:"",round:"",onClick:d=>i.removerTelefone(c.id)},null,8,["onClick"])]))]),_:2},1024)]))),128)),a.model.somenteLeitura?ie("",!0):(B(),be("div",Dye,[h(ae,{color:"positive",icon:"add",label:"Telefone",outline:"",size:"sm",onClick:i.adicionarTelefone},null,8,["onClick"])]))]),_:1}),h(Mt,{class:"q-pa-md q-pa-md q-mt-md bg-white no-shadow full-width"},{default:C(()=>[t[7]||(t[7]=A("div",{class:"q-mb-md q-subheading"},"Endere\xE7os",-1)),(B(!0),be(Qe,null,qt(a.contatoEnderecos,(c,d)=>(B(),be("div",{key:c.id,class:"u-separador animate-pop"},[h(l,{class:"q-col-gutter-x-md items-baseline"},{default:C(()=>[A("div",Oye,[h(Pe,{color:"none u-semClique",size:"xs",name:"star"})]),A("div",Pye,[h(ii,{modelValue:c.grupo,"onUpdate:modelValue":f=>c.grupo=f,options:a.enderecoTipos,"option-value":"value","option-label":"label",class:"q-pb-md","emit-value":"","map-options":"",dense:"",label:"Grupo",readonly:a.model.somenteLeitura},{before:C(()=>[h(Pe,ou({ref_for:!0},i.enderecoIcone(c.grupo),{color:"tertiary",size:"xs",class:"q-mx-xs"}),null,16)]),option:C(f=>[h(qe,ou({ref_for:!0},f.itemProps),{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:f.opt.icon},null,8,["name"])]),_:2},1024),h(fe,null,{default:C(()=>[h(Re,{innerHTML:f.opt.label},null,8,["innerHTML"])]),_:2},1024)]),_:2},1040)]),_:2},1032,["modelValue","onUpdate:modelValue","options","readonly"])]),A("div",Fye,[h(s,{debounce:"500",rotulo:"CEP",tipo:"texto",modelValue:c.cep,"onUpdate:modelValue":f=>c.cep=f,onChange:f=>i.consultarCep(d),mask:"#####-###",dense:"",rules:[f=>f&&f.replace(/\D/g,"").length===8||"O CEP est\xE1 muito curto."],class:"q-pb-none",somenteLeitura:a.model.somenteLeitura},null,8,["modelValue","onUpdate:modelValue","onChange","rules","somenteLeitura"])]),A("div",Mye,[h(s,{"class-campo":"q-pb-none ",rotulo:"UF",maxlength:"2",modelValue:c.uf,"onUpdate:modelValue":f=>c.uf=f,dense:"",rules:[f=>f&&f.length===2||"Insira um UF."],somenteLeitura:a.model.somenteLeitura},null,8,["modelValue","onUpdate:modelValue","rules","somenteLeitura"])]),A("div",Nye,[h(s,{modelValue:c.municipio,"onUpdate:modelValue":f=>c.municipio=f,rotulo:"Munic\xEDpio",dense:"",somenteLeitura:a.model.somenteLeitura},null,8,["modelValue","onUpdate:modelValue","somenteLeitura"])])]),_:2},1024),h(l,{class:"q-col-gutter-x-md items-baseline"},{default:C(()=>[A("div",kye,[h(s,{modelValue:c.logradouro,"onUpdate:modelValue":f=>c.logradouro=f,rotulo:"Logradouro",dense:"",somenteLeitura:a.model.somenteLeitura},null,8,["modelValue","onUpdate:modelValue","somenteLeitura"])]),A("div",Rye,[h(s,{modelValue:c.numero,"onUpdate:modelValue":f=>c.numero=f,rotulo:"N\xFAmero",dense:"",somenteLeitura:a.model.somenteLeitura,ref_for:!0,ref:"campoNumero"},null,8,["modelValue","onUpdate:modelValue","somenteLeitura"])]),A("div",Vye,[h(s,{modelValue:c.complemento,"onUpdate:modelValue":f=>c.complemento=f,rotulo:"Complemento",dense:"",somenteLeitura:a.model.somenteLeitura},null,8,["modelValue","onUpdate:modelValue","somenteLeitura"])]),A("div",Bye,[h(s,{modelValue:c.bairro,"onUpdate:modelValue":f=>c.bairro=f,rotulo:"Bairro",dense:"",somenteLeitura:a.model.somenteLeitura},null,8,["modelValue","onUpdate:modelValue","somenteLeitura"])]),A("div",qye,[h(s,{modelValue:c.pais,"onUpdate:modelValue":f=>c.pais=f,rotulo:"Pa\xEDs",dense:"",somenteLeitura:a.model.somenteLeitura},null,8,["modelValue","onUpdate:modelValue","somenteLeitura"])]),a.model.somenteLeitura?ie("",!0):(B(),be("div",Lye,[h(ae,{color:"negative",size:"xs",icon:"remove",outline:"",round:"",onClick:f=>i.removerEndereco(c.id)},null,8,["onClick"])]))]),_:2},1024)]))),128)),a.model.somenteLeitura?ie("",!0):(B(),be("div",$ye,[h(ae,{color:"positive",icon:"add",label:"Endere\xE7o",outline:"",size:"sm",onClick:i.adicionarEndereco},null,8,["onClick"])]))]),_:1})]),_:1})])])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue","onKeyup"])}var zye=St(gye,[["render",Uye]]);const Hye={components:{ContatoCard:cye,ModalCriarContatoCompleto:zye},computed:{contatosEncontrados(){return this.contatos.length}},data(){return{carregando:!1,contatos:[],contato:{},filtro:{},placeholder:"Buscar",termo:"",visivel:!1,propsModalCriarContatoCompleto:{habilitarSalvar:!0,habilitarVoltar:!0,idContato:"",somenteLeitura:!1,titulo:"Contato",visivel:!1},habilitarBotaoNovoContato:!1}},methods:{async abrirModalCadastroContato(){await this.$refs.modalCriarContato.setup();let e=await this.$refs.modalCriarContato.show();this.contato=JSON.parse(JSON.stringify(e)),this.resolve(e),this.visivel=!1},async filtrar(){let e;try{this.carregando=!0,e=setTimeout(()=>{$q.loading.show({message:"Carregando informa\xE7\xF5es...",boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary"})},500);let t;this.filtro.ativo&&this.filtro.empresas?t=await $db.contatoEmpresa.listaCache({filtros:{termoBusca:this.termo,...this.filtro},sort:["nome"]}):t=(await $db.contato.ler({filtros:{termoBusca:this.termo,...this.filtro},limit:30,page:1,sort:["apelido"],dir:["asc"]})).data,this.contatos=t}finally{this.carregando=!1,clearTimeout(e),$q.loading.hide()}},limpar(){this.contatos=[],this.filtro={},this.placeholder="Buscar",this.termo="",this.visivel=!1},onHide(){this.resolve()},item_click(e={}){this.contato=JSON.parse(JSON.stringify(e)),this.resolve(e),this.visivel=!1},async eventoModalCriarContatoCompleto(e,t){var o;if(e==="contatoEncontrado"){const r=await $db.contato.ler({filtros:{id:t}}),a=(o=r==null?void 0:r.data)==null?void 0:o[0];a&&(this.propsModalCriarContatoCompleto={...this.propsModalCriarContatoCompleto,visivel:!1},this.resolve(a),this.visivel=!1)}},async show(e){var o,r;this.limpar(),this.habilitarBotaoNovoContato=!1,e.filtro&&(this.filtro=e.filtro),e.placeholder&&(this.placeholder=e.placeholder),e.habilitarBotaoNovoContato&&(this.habilitarBotaoNovoContato=e.habilitarBotaoNovoContato);const t=$utils.logarIni("PromptContato");return await this.filtrar(),((o=this.contatos)==null?void 0:o.length)===1?this.contatos[0]:($utils.logarFim(t,((r=this.contatos)==null?void 0:r.length)||0),this.visivel=!0,new Promise((a,i)=>{this.resolve=a}))}},mounted(){$g.promptContato={show:this.show}},updated(){this.$nextTick(function(){this.$refs.search&&this.$refs.search.focus()})}},jye={id:"PromptContato"},Gye={key:0},Wye={key:1,class:"bg-light q-px-lg q-py-xl round-borders text-tertiary text-subtitle1 text-center fit"};function Qye(e,t,o,r,a,i){const n=Ve("ContatoCard"),s=Ve("ModalCriarContatoCompleto");return B(),be("div",jye,[h(Ht,{modelValue:a.visivel,"onUpdate:modelValue":t[2]||(t[2]=l=>a.visivel=l),onHide:t[3]||(t[3]=l=>i.onHide()),maximized:""},{default:C(()=>[h(To,{container:"",class:"bg-grey-1"},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,{class:"q-px-sm"},{default:C(()=>[Ee(h(ae,{icon:"arrow_back",flat:"",round:"",dense:""},null,512),[[st]]),h(lt,null,{default:C(()=>[h(ma,{modelValue:a.termo,"onUpdate:modelValue":[t[0]||(t[0]=l=>a.termo=l),i.filtrar],placeholder:a.placeholder,clearable:"",filled:"",standout:"",dark:"",dense:"","clear-icon":"close",debounce:"1500",ref:"search",style:{"max-width":"600px",background:"rgba(255,255,255,.13)"},class:"q-mx-auto"},{prepend:C(()=>[h(Pe,{name:"mdi-filter",color:"white",class:"showScreenIcon"})]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1})]),_:1})]),_:1}),h(Jo,null,{default:C(()=>[h(dn,null,{default:C(()=>[i.contatosEncontrados?(B(),be("div",Gye,[h(At,{link:"","no-border":"",separator:""},{default:C(()=>[(B(!0),be(Qe,null,qt(a.contatos,l=>(B(),oe(n,{key:l.id,modo:"lista",onSelecionar:i.item_click,contato:l,class:"bg-white"},null,8,["onSelecionar","contato"]))),128))]),_:1})])):ie("",!0),!a.carregando&&!i.contatosEncontrados?(B(),be("div",Wye," Nenhum resultado encontrado ")):ie("",!0)]),_:1})]),_:1}),a.habilitarBotaoNovoContato?(B(),oe(ae,{key:0,onClick:t[1]||(t[1]=l=>i.abrirModalCadastroContato()),round:"",color:"primary",icon:"add",size:"lg",class:"fixed",style:{right:"18px",bottom:"18px"}})):ie("",!0)]),_:1})]),_:1},8,["modelValue"]),h(s,{modelValue:a.propsModalCriarContatoCompleto,"onUpdate:modelValue":t[4]||(t[4]=l=>a.propsModalCriarContatoCompleto=l),onEvento:i.eventoModalCriarContatoCompleto,ref:"modalCriarContato"},null,8,["modelValue","onEvento"])])}var Xye=St(Hye,[["render",Qye]]);const Kye=G("div",{class:"q-space"});var Yp=Ct({name:"QSpace",setup(){return()=>Kye}}),Sb=Ct({name:"QCardActions",props:{...BE,vertical:Boolean},setup(e,{slots:t}){const o=qE(e),r=j(()=>`q-card__actions ${o.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>G("div",{class:r.value},uo(t.default))}});const Yye={data(){return{carregando:!1,visivel:!1,campos:{cpf:"",senha:""},validacao:{campos:{cpf:[e=>!!e||"Preenchimento obrigat\xF3rio."],senha:[e=>!!e||"Preenchimento obrigat\xF3rio."]}}}},methods:{async show(e){return this.limpar(),this.visivel=!0,new Promise((t,o)=>{this.resolve=t})},hide(){this.resolve()},limpar(){this.campos.cpf="",this.campos.senha="",this.carregando=!1,this.visivel=!1},async confirmar(){if(!this.carregando)try{this.carregando=!0,this.resolve(this.campos),this.visivel=!1}catch(e){console.error(e),$q.notify({message:"Usu\xE1rio ou senha inv\xE1lido",type:"negative"})}finally{this.carregando=!1}}},mounted(){$g.promptLogin={show:this.show}}};function Jye(e,t,o,r,a,i){return B(),oe(Ht,{modelValue:a.visivel,"onUpdate:modelValue":t[2]||(t[2]=n=>a.visivel=n),onHide:t[3]||(t[3]=n=>i.hide()),persistent:""},{default:C(()=>[h(Mt,{style:{width:"350px"}},{default:C(()=>[h(cl,{autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false",novalidate:"",onSubmit:i.confirmar},{default:C(()=>[h(Ra,null,{default:C(()=>[h(ma,{modelValue:a.campos.cpf,"onUpdate:modelValue":t[0]||(t[0]=n=>a.campos.cpf=n),rules:a.validacao.campos.cpf,"lazy-rules":"",autofocus:"",dense:"",label:"CPF",ref:"cpf",class:"full-width"},null,8,["modelValue","rules"]),h(ma,{modelValue:a.campos.senha,"onUpdate:modelValue":t[1]||(t[1]=n=>a.campos.senha=n),rules:a.validacao.campos.senha,"lazy-rules":"",dense:"",label:"Senha",ref:"senha",type:"password",class:"full-width"},null,8,["modelValue","rules"])]),_:1}),h(Sb,{class:"text-primary bg-light q-pa-none"},{default:C(()=>[h(Je,{class:"float-right"},{default:C(()=>[h(Yp),Ee(h(ae,{label:"Cancelar",flat:"",color:"tertiary",class:"q-mr-xs"},null,512),[[st]]),h(ae,{type:"submit",label:"Confirmar",unelevated:"",color:"primary"})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])}var Zye=St(Yye,[["render",Jye]]);const exe={components:{},computed:{},data(){return{buttons:[],visivel:!1}},methods:{limpar(){this.visivel=!1},async show(e){const{buttons:t}=e!=null?e:{};let o=[],r,a,i;r=new Promise((n,s)=>{a=n});for(const n of t)o.push({label:n.label,resolvePromise:a});return this.buttons=o,this.visivel=!0,i=await r,this.visivel=!1,i}},mounted(){$g.promptServicoIntegrador={show:this.show}}};function txe(e,t,o,r,a,i){return B(),oe(Ht,{modelValue:a.visivel,"onUpdate:modelValue":t[0]||(t[0]=n=>a.visivel=n),persistent:""},{default:C(()=>[h(Mt,null,{default:C(()=>[h(Ra,{class:"row items-center"},{default:C(()=>[h(_M,{icon:"dns",color:"primary","text-color":"white"}),t[1]||(t[1]=A("span",{class:"q-ml-sm"},"Enviar utilizando servidor:",-1))]),_:1}),h(Sb,{align:"right"},{default:C(()=>[(B(!0),be(Qe,null,qt(a.buttons,(n,s)=>Ee((B(),oe(ae,{key:s,flat:"",label:n.label,color:"primary",onClick:()=>{n.resolvePromise(s)}},null,8,["label","onClick"])),[[st]])),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])}var oxe=St(exe,[["render",txe]]);const axe={data(){return{itens:[],termo:"",visivel:!1}},methods:{async atualizar(){const e=this.termo||"";if(this.itens=await $db.contato.leGruposUnicos(),!this.termo)return;const t=$utils.tratamentoCompletoString(e).split(" ");for(const o of t)this.itens=this.itens.filter(r=>$utils.tratamentoCompletoString(r.descricao).includes(o))},limpar(){this.itens=[],this.termo=""},onHide(){this.resolve({}),this.limpar()},onShow(){this.$refs.search.focus()},item_click(e={}){this.resolve(e),this.visivel=!1},async show(){return await this.atualizar(),this.visivel=!0,new Promise((e,t)=>{this.resolve=e})}},mounted(){$g.promptGrupoUnico={show:this.show}}},rxe={key:0,class:"bg-light q-pa-lg q-mt-lg round-borders text-black text-center"};function ixe(e,t,o,r,a,i){return B(),oe(Ht,{modelValue:a.visivel,"onUpdate:modelValue":t[1]||(t[1]=n=>a.visivel=n),maximized:"",onHide:t[2]||(t[2]=n=>i.onHide()),onShow:t[3]||(t[3]=n=>i.onShow())},{default:C(()=>[h(To,{class:"bg-white",container:""},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,{class:"bg-primary text-white"},{default:C(()=>[Ee(h(ae,{dense:"",flat:"",icon:"arrow_back",round:""},null,512),[[st]]),h(lt,null,{default:C(()=>[h(ma,{modelValue:a.termo,"onUpdate:modelValue":[t[0]||(t[0]=n=>a.termo=n),i.atualizar],color:"none",ref:"search",dark:"",placeholder:"Grupos",debounce:"600"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1}),h(Jo,null,{default:C(()=>[h(At,{link:"","no-border":"",separator:""},{default:C(()=>[(B(!0),be(Qe,null,qt(a.itens,n=>(B(),oe(qe,{key:n.id,clickable:"",onClick:s=>i.item_click(n)},{default:C(()=>[h(Re,{header:""},{default:C(()=>[K(le(n.descricao),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}),a.itens.length?ie("",!0):(B(),be("div",rxe," N\xE3o encontramos registros com os crit\xE9rios selecionados. "))]),_:1})]),_:1})]),_:1},8,["modelValue"])}var nxe=St(axe,[["render",ixe]]);const sxe={data(){return{itens:[],termo:"",visivel:!1}},methods:{async atualizar(){const e=this.termo||"";if(this.itens=await $db.contato.leSegmentosUnicos(),!this.termo)return;const t=$utils.tratamentoCompletoString(e).split(" ");for(const o of t)this.itens=this.itens.filter(r=>$utils.tratamentoCompletoString(r.descricao).includes(o))},limpar(){this.itens=[],this.termo=""},onHide(){this.resolve({}),this.limpar()},onShow(){this.$refs.search.focus()},item_click(e={}){this.resolve(e),this.visivel=!1},async show(){return await this.atualizar(),this.visivel=!0,new Promise((e,t)=>{this.resolve=e})}},mounted(){$g.promptSegmentoUnico={show:this.show}}},lxe={key:0,class:"bg-light q-pa-lg q-mt-lg round-borders text-black text-center"};function cxe(e,t,o,r,a,i){return B(),oe(Ht,{modelValue:a.visivel,"onUpdate:modelValue":t[1]||(t[1]=n=>a.visivel=n),maximized:"",onHide:t[2]||(t[2]=n=>i.onHide()),onShow:t[3]||(t[3]=n=>i.onShow())},{default:C(()=>[h(To,{class:"bg-white",container:""},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,{class:"bg-primary text-white"},{default:C(()=>[Ee(h(ae,{dense:"",flat:"",icon:"arrow_back",round:""},null,512),[[st]]),h(lt,null,{default:C(()=>[h(ma,{modelValue:a.termo,"onUpdate:modelValue":[t[0]||(t[0]=n=>a.termo=n),i.atualizar],color:"none",ref:"search",dark:"",placeholder:"Segmentos",debounce:"600"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1}),h(Jo,null,{default:C(()=>[h(At,{link:"","no-border":"",separator:""},{default:C(()=>[(B(!0),be(Qe,null,qt(a.itens,n=>(B(),oe(qe,{key:n.id,clickable:"",onClick:s=>i.item_click(n)},{default:C(()=>[h(Re,{header:""},{default:C(()=>[K(le(n.descricao),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}),a.itens.length?ie("",!0):(B(),be("div",lxe," N\xE3o encontramos registros com os crit\xE9rios selecionados. "))]),_:1})]),_:1})]),_:1},8,["modelValue"])}var uxe=St(sxe,[["render",cxe]]);const dxe={data(){return{itens:[],termo:"",visivel:!1}},methods:{async atualizar(){const e=this.termo||"";if(this.itens=await $db.contato.leOrigemMarketingUnicos(),!this.termo)return;const t=$utils.tratamentoCompletoString(e).split(" ");for(const o of t)this.itens=this.itens.filter(r=>$utils.tratamentoCompletoString(r.descricao).includes(o))},limpar(){this.itens=[],this.termo=""},onHide(){this.resolve({}),this.limpar()},onShow(){this.$refs.search.focus()},item_click(e={}){this.resolve(e),this.visivel=!1},async show(){return await this.atualizar(),this.visivel=!0,new Promise((e,t)=>{this.resolve=e})}},mounted(){$g.promptOrigemMarketingUnico={show:this.show}}},fxe={key:0,class:"bg-light q-pa-lg q-mt-lg round-borders text-black text-center"};function mxe(e,t,o,r,a,i){return B(),oe(Ht,{modelValue:a.visivel,"onUpdate:modelValue":t[1]||(t[1]=n=>a.visivel=n),maximized:"",onHide:t[2]||(t[2]=n=>i.onHide()),onShow:t[3]||(t[3]=n=>i.onShow())},{default:C(()=>[h(To,{class:"bg-white",container:""},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,{class:"bg-primary text-white"},{default:C(()=>[Ee(h(ae,{dense:"",flat:"",icon:"arrow_back",round:""},null,512),[[st]]),h(lt,null,{default:C(()=>[h(ma,{modelValue:a.termo,"onUpdate:modelValue":[t[0]||(t[0]=n=>a.termo=n),i.atualizar],color:"none",ref:"search",dark:"",placeholder:"Origem Marketing",debounce:"600"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1}),h(Jo,null,{default:C(()=>[h(At,{link:"","no-border":"",separator:""},{default:C(()=>[(B(!0),be(Qe,null,qt(a.itens,n=>(B(),oe(qe,{key:n.id,clickable:"",onClick:s=>i.item_click(n)},{default:C(()=>[h(Re,{header:""},{default:C(()=>[K(le(n.descricao),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}),a.itens.length?ie("",!0):(B(),be("div",fxe," N\xE3o encontramos registros com os crit\xE9rios selecionados. "))]),_:1})]),_:1})]),_:1},8,["modelValue"])}var pxe=St(dxe,[["render",mxe]]);const hxe={data(){return{itens:[],filtro:{},termo:"",visivel:!1}},methods:{atualizar(){},limpar(){this.itens=[],this.filtro={},this.placeholder="Buscar",this.termo=""},onHide(){this.resolve({}),this.limpar()},onShow(){this.$refs.search.focus()},item_click(e={}){this.resolve(e),this.visivel=!1},async show(e){return this.itens=await $db.formaPagamento.le(),this.visivel=!0,new Promise((t,o)=>{this.resolve=t})}}},vxe={class:"layout-padding",container:""},gxe={key:0,class:"bg-light q-pa-lg q-mt-lg round-borders text-black text-center"};function _xe(e,t,o,r,a,i){return B(),oe(Ht,{modelValue:a.visivel,"onUpdate:modelValue":t[1]||(t[1]=n=>a.visivel=n),maximized:"",onHide:t[2]||(t[2]=n=>i.onHide()),onShow:t[3]||(t[3]=n=>i.onShow())},{default:C(()=>[h(To,{class:"bg-white",container:""},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,null,{default:C(()=>[Ee(h(ae,{dense:"",flat:"",icon:"arrow_back",round:""},null,512),[[st]]),h(lt,null,{default:C(()=>[h(ma,{modelValue:a.termo,"onUpdate:modelValue":[t[0]||(t[0]=n=>a.termo=n),i.atualizar],color:"none",ref:"search",dark:"",placeholder:"Buscar",debounce:"600",standout:"",filled:"",dense:"",clearable:"","clear-icon":"close"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1}),h(Jo,null,{default:C(()=>[A("div",vxe,[h(At,{link:"","no-border":"",separator:""},{default:C(()=>[(B(!0),be(Qe,null,qt(a.itens,n=>(B(),oe(qe,{key:n.id,clickable:"",onClick:s=>i.item_click(n)},{default:C(()=>[h(Re,null,{default:C(()=>[h(Re,{header:""},{default:C(()=>[K(le(n.descricao),1)]),_:2},1024),h(Re,{caption:""},{default:C(()=>[t[4]||(t[4]=A("strong",null,"Tipo financeito:",-1)),K(le(n.tipoFinanceiro),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}),a.itens.length?ie("",!0):(B(),be("div",gxe," Nenhum resultado encontrado "))])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var bxe=St(hxe,[["render",_xe]]),Ui=Ct({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:t,emit:o}){const{proxy:{$q:r}}=xt(),a=kr(Rm,cr);if(a===cr)return console.error("QFooter needs to be child of QLayout"),cr;const i=Ue(parseInt(e.heightHint,10)),n=Ue(!0),s=Ue(ss.value===!0||a.isContainer.value===!0?0:window.innerHeight),l=j(()=>e.reveal===!0||a.view.value.indexOf("F")!==-1||r.platform.is.ios&&a.isContainer.value===!0),u=j(()=>a.isContainer.value===!0?a.containerHeight.value:s.value),c=j(()=>{if(e.modelValue!==!0)return 0;if(l.value===!0)return n.value===!0?i.value:0;const S=a.scroll.value.position+u.value+i.value-a.height.value;return S>0?S:0}),d=j(()=>e.modelValue!==!0||l.value===!0&&n.value!==!0),f=j(()=>e.modelValue===!0&&d.value===!0&&e.reveal===!0),m=j(()=>"q-footer q-layout__section--marginal "+(l.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(d.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(l.value!==!0?" hidden":""):"")),p=j(()=>{const S=a.rows.value.bottom,D={};return S[0]==="l"&&a.left.space===!0&&(D[r.lang.rtl===!0?"right":"left"]=`${a.left.size}px`),S[2]==="r"&&a.right.space===!0&&(D[r.lang.rtl===!0?"left":"right"]=`${a.right.size}px`),D});function v(S,D){a.update("footer",S,D)}function g(S,D){S.value!==D&&(S.value=D)}function x({height:S}){g(i,S),v("size",S)}function b(){if(e.reveal!==!0)return;const{direction:S,position:D,inflectionPoint:M}=a.scroll.value;g(n,S==="up"||D-M<100||a.height.value-u.value-D-i.value<300)}function _(S){f.value===!0&&g(n,!0),o("focusin",S)}ct(()=>e.modelValue,S=>{v("space",S),g(n,!0),a.animate()}),ct(c,S=>{v("offset",S)}),ct(()=>e.reveal,S=>{S===!1&&g(n,e.modelValue)}),ct(n,S=>{a.animate(),o("reveal",S)}),ct([i,a.scroll,a.height],b),ct(()=>r.screen.height,S=>{a.isContainer.value!==!0&&g(s,S)});const w={};return a.instances.footer=w,e.modelValue===!0&&v("size",i.value),v("space",e.modelValue),v("offset",c.value),Vo(()=>{a.instances.footer===w&&(a.instances.footer=void 0,v("size",0),v("offset",0),v("space",!1))}),()=>{const S=Mr(t.default,[G(fr,{debounce:0,onResize:x})]);return e.elevated===!0&&S.push(G("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),G("footer",{class:m.value,style:p.value,onFocusin:_},S)}}});const JI={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},yxe=Object.keys(JI);JI.all=!0;function a_(e){const t={};for(const o of yxe)e[o]===!0&&(t[o]=!0);return Object.keys(t).length===0?JI:(t.horizontal===!0?t.left=t.right=!0:t.left===!0&&t.right===!0&&(t.horizontal=!0),t.vertical===!0?t.up=t.down=!0:t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}const xxe=["INPUT","TEXTAREA"];function r_(e,t){return t.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof t.handler=="function"&&xxe.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(t.uid)===-1)}function Qy(e,t,o){const r=ls(e);let a,i=r.left-t.event.x,n=r.top-t.event.y,s=Math.abs(i),l=Math.abs(n);const u=t.direction;u.horizontal===!0&&u.vertical!==!0?a=i<0?"left":"right":u.horizontal!==!0&&u.vertical===!0?a=n<0?"up":"down":u.up===!0&&n<0?(a="up",s>l&&(u.left===!0&&i<0?a="left":u.right===!0&&i>0&&(a="right"))):u.down===!0&&n>0?(a="down",s>l&&(u.left===!0&&i<0?a="left":u.right===!0&&i>0&&(a="right"))):u.left===!0&&i<0?(a="left",s<l&&(u.up===!0&&n<0?a="up":u.down===!0&&n>0&&(a="down"))):u.right===!0&&i>0&&(a="right",s<l&&(u.up===!0&&n<0?a="up":u.down===!0&&n>0&&(a="down")));let c=!1;if(a===void 0&&o===!1){if(t.event.isFirst===!0||t.event.lastDir===void 0)return{};a=t.event.lastDir,c=!0,a==="left"||a==="right"?(r.left-=i,s=0,i=0):(r.top-=n,l=0,n=0)}return{synthetic:c,payload:{evt:e,touch:t.event.mouse!==!0,mouse:t.event.mouse===!0,position:r,direction:a,isFirst:t.event.isFirst,isFinal:o===!0,duration:Date.now()-t.event.time,distance:{x:s,y:l},offset:{x:i,y:n},delta:{x:r.left-t.event.lastX,y:r.top-t.event.lastY}}}}let Cxe=0;var Qa=uh({name:"touch-pan",beforeMount(e,{value:t,modifiers:o}){if(o.mouse!==!0&&Ho.has.touch!==!0)return;function r(i,n){o.mouse===!0&&n===!0?zo(i):(o.stop===!0&&en(i),o.prevent===!0&&Vi(i))}const a={uid:"qvtp_"+Cxe++,handler:t,modifiers:o,direction:a_(o),noop:Fs,mouseStart(i){r_(i,a)&&Jw(i)&&(Ir(a,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),a.start(i,!0))},touchStart(i){if(r_(i,a)){const n=i.target;Ir(a,"temp",[[n,"touchmove","move","notPassiveCapture"],[n,"touchcancel","end","passiveCapture"],[n,"touchend","end","passiveCapture"]]),a.start(i)}},start(i,n){if(Ho.is.firefox===!0&&om(e,!0),a.lastEvt=i,n===!0||o.stop===!0){if(a.direction.all!==!0&&(n!==!0||a.modifiers.mouseAllDir!==!0&&a.modifiers.mousealldir!==!0)){const u=i.type.indexOf("mouse")!==-1?new MouseEvent(i.type,i):new TouchEvent(i.type,i);i.defaultPrevented===!0&&Vi(u),i.cancelBubble===!0&&en(u),Object.assign(u,{qKeyEvent:i.qKeyEvent,qClickOutside:i.qClickOutside,qAnchorHandled:i.qAnchorHandled,qClonedBy:i.qClonedBy===void 0?[a.uid]:i.qClonedBy.concat(a.uid)}),a.initialEvent={target:i.target,event:u}}en(i)}const{left:s,top:l}=ls(i);a.event={x:s,y:l,time:Date.now(),mouse:n===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:s,lastY:l}},move(i){if(a.event===void 0)return;const n=ls(i),s=n.left-a.event.x,l=n.top-a.event.y;if(s===0&&l===0)return;a.lastEvt=i;const u=a.event.mouse===!0,c=()=>{r(i,u);let m;o.preserveCursor!==!0&&o.preservecursor!==!0&&(m=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),u===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),su(),a.styleCleanup=p=>{if(a.styleCleanup=void 0,m!==void 0&&(document.documentElement.style.cursor=m),document.body.classList.remove("non-selectable"),u===!0){const v=()=>{document.body.classList.remove("no-pointer-events--children")};p!==void 0?setTimeout(()=>{v(),p()},50):v()}else p!==void 0&&p()}};if(a.event.detected===!0){a.event.isFirst!==!0&&r(i,a.event.mouse);const{payload:m,synthetic:p}=Qy(i,a,!1);m!==void 0&&(a.handler(m)===!1?a.end(i):(a.styleCleanup===void 0&&a.event.isFirst===!0&&c(),a.event.lastX=m.position.left,a.event.lastY=m.position.top,a.event.lastDir=p===!0?void 0:m.direction,a.event.isFirst=!1));return}if(a.direction.all===!0||u===!0&&(a.modifiers.mouseAllDir===!0||a.modifiers.mousealldir===!0)){c(),a.event.detected=!0,a.move(i);return}const d=Math.abs(s),f=Math.abs(l);d!==f&&(a.direction.horizontal===!0&&d>f||a.direction.vertical===!0&&d<f||a.direction.up===!0&&d<f&&l<0||a.direction.down===!0&&d<f&&l>0||a.direction.left===!0&&d>f&&s<0||a.direction.right===!0&&d>f&&s>0?(a.event.detected=!0,a.move(i)):a.end(i,!0))},end(i,n){if(a.event!==void 0){if(Fn(a,"temp"),Ho.is.firefox===!0&&om(e,!1),n===!0)a.styleCleanup!==void 0&&a.styleCleanup(),a.event.detected!==!0&&a.initialEvent!==void 0&&a.initialEvent.target.dispatchEvent(a.initialEvent.event);else if(a.event.detected===!0){a.event.isFirst===!0&&a.handler(Qy(i===void 0?a.lastEvt:i,a).payload);const{payload:s}=Qy(i===void 0?a.lastEvt:i,a,!0),l=()=>{a.handler(s)};a.styleCleanup!==void 0?a.styleCleanup(l):l()}a.event=void 0,a.initialEvent=void 0,a.lastEvt=void 0}}};if(e.__qtouchpan=a,o.mouse===!0){const i=o.mouseCapture===!0||o.mousecapture===!0?"Capture":"";Ir(a,"main",[[e,"mousedown","mouseStart",`passive${i}`]])}Ho.has.touch===!0&&Ir(a,"main",[[e,"touchstart","touchStart",`passive${o.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const o=e.__qtouchpan;o!==void 0&&(t.oldValue!==t.value&&(typeof value!="function"&&o.end(),o.handler=t.value),o.direction=a_(t.modifiers))},beforeUnmount(e){const t=e.__qtouchpan;t!==void 0&&(t.event!==void 0&&t.end(),Fn(t,"main"),Fn(t,"temp"),Ho.is.firefox===!0&&om(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchpan)}});const gR={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},wxe=new RegExp(`^([\\d+]+|${Object.keys(gR).join("|")})$`,"i");function Exe(e,t){const{top:o,left:r}=ls(e);return Math.abs(r-t.left)>=7||Math.abs(o-t.top)>=7}var Tt=uh({name:"touch-repeat",beforeMount(e,{modifiers:t,value:o,arg:r}){const a=Object.keys(t).reduce((l,u)=>{if(wxe.test(u)===!0){const c=isNaN(parseInt(u,10))?gR[u.toLowerCase()]:parseInt(u,10);c>=0&&l.push(c)}return l},[]);if(t.mouse!==!0&&Ho.has.touch!==!0&&a.length===0)return;const i=typeof r=="string"&&r.length!==0?r.split(":").map(l=>parseInt(l,10)):[0,600,300],n=i.length-1,s={keyboard:a,handler:o,noop:Fs,mouseStart(l){s.event===void 0&&typeof s.handler=="function"&&Jw(l)===!0&&(Ir(s,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),s.start(l,!0))},keyboardStart(l){if(typeof s.handler=="function"&&cs(l,a)===!0){if((i[0]===0||s.event!==void 0)&&(zo(l),e.focus(),s.event!==void 0))return;Ir(s,"temp",[[document,"keyup","end","notPassiveCapture"],[document,"click","end","notPassiveCapture"]]),s.start(l,!1,!0)}},touchStart(l){if(l.target!==void 0&&typeof s.handler=="function"){const u=l.target;Ir(s,"temp",[[u,"touchmove","move","passiveCapture"],[u,"touchcancel","end","notPassiveCapture"],[u,"touchend","end","notPassiveCapture"]]),s.start(l)}},start(l,u,c){c!==!0&&(s.origin=ls(l));function d(m){s.styleCleanup=void 0,document.documentElement.style.cursor="";const p=()=>{document.body.classList.remove("non-selectable")};m===!0?(su(),setTimeout(p,10)):p()}Ho.is.mobile===!0&&(document.body.classList.add("non-selectable"),su(),s.styleCleanup=d),s.event={touch:u!==!0&&c!==!0,mouse:u===!0,keyboard:c===!0,startTime:Date.now(),repeatCount:0};const f=()=>{if(s.timer=void 0,s.event===void 0)return;s.event.repeatCount===0&&(s.event.evt=l,c===!0?s.event.keyCode=l.keyCode:s.event.position=ls(l),Ho.is.mobile!==!0&&(document.documentElement.style.cursor="pointer",document.body.classList.add("non-selectable"),su(),s.styleCleanup=d)),s.event.duration=Date.now()-s.event.startTime,s.event.repeatCount+=1,s.handler(s.event);const m=n<s.event.repeatCount?n:s.event.repeatCount;s.timer=setTimeout(f,i[m])};i[0]===0?f():s.timer=setTimeout(f,i[0])},move(l){s.event!==void 0&&s.timer!==void 0&&Exe(l,s.origin)===!0&&(clearTimeout(s.timer),s.timer=void 0)},end(l){s.event!==void 0&&(s.styleCleanup!==void 0&&s.styleCleanup(!0),l!==void 0&&s.event.repeatCount>0&&zo(l),Fn(s,"temp"),s.timer!==void 0&&(clearTimeout(s.timer),s.timer=void 0),s.event=void 0)}};if(e.__qtouchrepeat=s,t.mouse===!0){const l=t.mouseCapture===!0||t.mousecapture===!0?"Capture":"";Ir(s,"main",[[e,"mousedown","mouseStart",`passive${l}`]])}if(Ho.has.touch===!0&&Ir(s,"main",[[e,"touchstart","touchStart",`passive${t.capture===!0?"Capture":""}`],[e,"touchend","noop","passiveCapture"]]),a.length!==0){const l=t.keyCapture===!0||t.keycapture===!0?"Capture":"";Ir(s,"main",[[e,"keydown","keyboardStart",`notPassive${l}`]])}},updated(e,{oldValue:t,value:o}){const r=e.__qtouchrepeat;r!==void 0&&t!==o&&(typeof o!="function"&&r.end(),r.handler=o)},beforeUnmount(e){const t=e.__qtouchrepeat;t!==void 0&&(t.timer!==void 0&&clearTimeout(t.timer),Fn(t,"main"),Fn(t,"temp"),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchrepeat)}});const Sxe=/^rgb(a)?\((\d{1,3}),(\d{1,3}),(\d{1,3}),?([01]?\.?\d*?)?\)$/;function Ib({r:e,g:t,b:o,a:r}){const a=r!==void 0;if(e=Math.round(e),t=Math.round(t),o=Math.round(o),e>255||t>255||o>255||a&&r>100)throw new TypeError("Expected 3 numbers below 256 (and optionally one below 100)");return r=a?(Math.round(255*r/100)|1<<8).toString(16).slice(1):"","#"+(o|t<<8|e<<16|1<<24).toString(16).slice(1)+r}function Jke({r:e,g:t,b:o,a:r}){return`rgb${r!==void 0?"a":""}(${e},${t},${o}${r!==void 0?","+r/100:""})`}function _R(e){if(typeof e!="string")throw new TypeError("Expected a string");e=e.replace(/^#/,""),e.length===3?e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]:e.length===4&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);const t=parseInt(e,16);return e.length>6?{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:Math.round((t&255)/2.55)}:{r:t>>16,g:t>>8&255,b:t&255}}function Ixe({h:e,s:t,v:o,a:r}){let a,i,n;t=t/100,o=o/100,e=e/360;const s=Math.floor(e*6),l=e*6-s,u=o*(1-t),c=o*(1-l*t),d=o*(1-(1-l)*t);switch(s%6){case 0:a=o,i=d,n=u;break;case 1:a=c,i=o,n=u;break;case 2:a=u,i=o,n=d;break;case 3:a=u,i=c,n=o;break;case 4:a=d,i=u,n=o;break;case 5:a=o,i=u,n=c;break}return{r:Math.round(a*255),g:Math.round(i*255),b:Math.round(n*255),a:r}}function Axe({r:e,g:t,b:o,a:r}){const a=Math.max(e,t,o),i=Math.min(e,t,o),n=a-i,s=a===0?0:n/a,l=a/255;let u;switch(a){case i:u=0;break;case e:u=t-o+n*(t<o?6:0),u/=6*n;break;case t:u=o-e+n*2,u/=6*n;break;case o:u=e-t+n*4,u/=6*n;break}return{h:Math.round(u*360),s:Math.round(s*100),v:Math.round(l*100),a:r}}function vu(e){if(typeof e!="string")throw new TypeError("Expected a string");const t=e.replace(/ /g,""),o=Sxe.exec(t);if(o===null)return _R(t);const r={r:Math.min(255,parseInt(o[2],10)),g:Math.min(255,parseInt(o[3],10)),b:Math.min(255,parseInt(o[4],10))};if(o[1]){const a=parseFloat(o[5]);r.a=Math.min(1,isNaN(a)===!0?1:a)*100}return r}function Txe(e,t){if(typeof e!="string")throw new TypeError("Expected a string as color");if(typeof t!="number")throw new TypeError("Expected a numeric percent");const o=vu(e),r=t<0?0:255,a=Math.abs(t)/100,i=o.r,n=o.g,s=o.b;return"#"+(16777216+(Math.round((r-i)*a)+i)*65536+(Math.round((r-n)*a)+n)*256+(Math.round((r-s)*a)+s)).toString(16).slice(1)}function Dxe(e){if(typeof e!="string"&&(!e||e.r===void 0))throw new TypeError("Expected a string or a {r, g, b} object as color");const t=typeof e=="string"?vu(e):e,o=t.r/255,r=t.g/255,a=t.b/255,i=o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4),n=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4),s=a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4);return .2126*i+.7152*n+.0722*s}function Oxe(e){if(typeof e!="string"&&(!e||e.r===void 0))throw new TypeError("Expected a string or a {r, g, b} object as color");const t=typeof e=="string"?vu(e):e;return(t.r*299+t.g*587+t.b*114)/1e3}function Pxe(e,t){if(typeof e!="string"&&(!e||e.r===void 0))throw new TypeError("Expected a string or a {r, g, b[, a]} object as fgColor");if(typeof t!="string"&&(!t||t.r===void 0))throw new TypeError("Expected a string or a {r, g, b[, a]} object as bgColor");const o=typeof e=="string"?vu(e):e,r=o.r/255,a=o.g/255,i=o.b/255,n=o.a!==void 0?o.a/100:1,s=typeof t=="string"?vu(t):t,l=s.r/255,u=s.g/255,c=s.b/255,d=s.a!==void 0?s.a/100:1,f=n+d*(1-n),m=Math.round((r*n+l*d*(1-n))/f*255),p=Math.round((a*n+u*d*(1-n))/f*255),v=Math.round((i*n+c*d*(1-n))/f*255),g={r:m,g:p,b:v,a:Math.round(f*100)};return typeof e=="string"?Ib(g):g}function Fxe(e,t){if(typeof e!="string")throw new TypeError("Expected a string as color");if(t===void 0||t<-1||t>1)throw new TypeError("Expected offset to be between -1 and 1");const{r:o,g:r,b:a,a:i}=vu(e),n=i!==void 0?i/100:0;return Ib({r:o,g:r,b:a,a:Math.round(Math.min(1,Math.max(0,n+t))*100)})}function Mxe(e){if(typeof e!="string")throw new TypeError("Expected a string as color");const t=document.createElement("div");t.className=`text-${e} invisible fixed no-pointer-events`,document.body.appendChild(t);const o=getComputedStyle(t).getPropertyValue("color");return t.remove(),Ib(vu(o))}var Nxe={rgbToHex:Ib,hexToRgb:_R,hsvToRgb:Ixe,rgbToHsv:Axe,textToRgb:vu,lighten:Txe,luminosity:Dxe,brightness:Oxe,blend:Pxe,changeAlpha:Fxe,getPaletteColor:Mxe},wP={exports:{}};(function(e,t){(function(){var o={};o.Promise=typeof Promise!="undefined"?Promise:function(){throw new Error("No native promises and smartcrop.Promise not set.")},o.DEFAULTS={width:0,height:0,aspect:0,cropWidth:0,cropHeight:0,detailWeight:.2,skinColor:[.78,.57,.44],skinBias:.01,skinBrightnessMin:.2,skinBrightnessMax:1,skinThreshold:.8,skinWeight:1.8,saturationBrightnessMin:.05,saturationBrightnessMax:.9,saturationThreshold:.4,saturationBias:.2,saturationWeight:.3,scoreDownSample:8,step:8,scaleStep:.1,minScale:1,maxScale:1,edgeRadius:.4,edgeWeight:-20,outsideImportance:-.5,boostWeight:100,ruleOfThirds:!0,prescale:!0,imageOperations:null,canvasFactory:v,debug:!1},o.crop=function(I,N,P){var F=S({},o.DEFAULTS,N);F.aspect&&(F.width=F.aspect,F.height=1),F.imageOperations===null&&(F.imageOperations=g(F.canvasFactory));var L=F.imageOperations,z=1,H=1;return L.open(I,F.input).then(function(X){return F.width&&F.height&&(z=x(X.width/F.width,X.height/F.height),F.cropWidth=~~(F.width*z),F.cropHeight=~~(F.height*z),F.minScale=x(F.maxScale,b(1/z,F.minScale)),F.prescale!==!1&&(H=1/z/F.minScale,H<1?(X=L.resample(X,X.width*H,X.height*H),F.cropWidth=~~(F.cropWidth*H),F.cropHeight=~~(F.cropHeight*H),F.boost&&(F.boost=F.boost.map(function(Y){return{x:~~(Y.x*H),y:~~(Y.y*H),width:~~(Y.width*H),height:~~(Y.height*H),weight:Y.weight}}))):H=1)),X}).then(function(X){return L.getData(X).then(function(Y){for(var de=f(F,Y),ye=de.crops||[de.topCrop],W=0,re=ye.length;W<re;W++){var _e=ye[W];_e.x=~~(_e.x/H),_e.y=~~(_e.y/H),_e.width=~~(_e.width/H),_e.height=~~(_e.height/H)}return P&&P(de),de})})},o.isAvailable=function(I){if(!o.Promise)return!1;var N=I?I.canvasFactory:v;if(N===v){var P=document.createElement("canvas");if(!P.getContext("2d"))return!1}return!0};function r(I,N){for(var P=I.data,F=N.data,L=I.width,z=I.height,H=0;H<z;H++)for(var X=0;X<L;X++){var Y=(H*L+X)*4,de;X===0||X>=L-1||H===0||H>=z-1?de=O(P,Y):de=O(P,Y)*4-O(P,Y-L*4)-O(P,Y-4)-O(P,Y+4)-O(P,Y+L*4),F[Y+1]=de}}function a(I,N,P){for(var F=N.data,L=P.data,z=N.width,H=N.height,X=0;X<H;X++)for(var Y=0;Y<z;Y++){var de=(X*z+Y)*4,ye=M(F[de],F[de+1],F[de+2])/255,W=d(I,F[de],F[de+1],F[de+2]),re=W>I.skinThreshold,_e=ye>=I.skinBrightnessMin&&ye<=I.skinBrightnessMax;re&&_e?L[de]=(W-I.skinThreshold)*(255/(1-I.skinThreshold)):L[de]=0}}function i(I,N,P){for(var F=N.data,L=P.data,z=N.width,H=N.height,X=0;X<H;X++)for(var Y=0;Y<z;Y++){var de=(X*z+Y)*4,ye=M(F[de],F[de+1],F[de+2])/255,W=T(F[de],F[de+1],F[de+2]);W>I.saturationThreshold;var re=ye>=I.saturationBrightnessMin&&ye<=I.saturationBrightnessMax;re&&re?L[de+2]=(W-I.saturationThreshold)*(255/(1-I.saturationThreshold)):L[de+2]=0}}function n(I,N){if(!!I.boost){for(var P=N.data,F=0;F<N.width;F+=4)P[F+3]=0;for(F=0;F<I.boost.length;F++)s(I.boost[F],I,N)}}function s(I,N,P){for(var F=P.data,L=P.width,z=~~I.x,H=~~(I.x+I.width),X=~~I.y,Y=~~(I.y+I.height),de=I.weight*255,ye=X;ye<Y;ye++)for(var W=z;W<H;W++){var re=(ye*L+W)*4;F[re+3]+=de}}function l(I,N,P){for(var F=[],L=x(N,P),z=I.cropWidth||L,H=I.cropHeight||L,X=I.maxScale;X>=I.minScale;X-=I.scaleStep)for(var Y=0;Y+H*X<=P;Y+=I.step)for(var de=0;de+z*X<=N;de+=I.step)F.push({x:de,y:Y,width:z*X,height:H*X});return F}function u(I,N,P){for(var F={detail:0,saturation:0,skin:0,boost:0,total:0},L=N.data,z=I.scoreDownSample,H=1/z,X=N.height*z,Y=N.width*z,de=N.width,ye=0;ye<X;ye+=z)for(var W=0;W<Y;W+=z){var re=(~~(ye*H)*de+~~(W*H))*4,_e=c(I,P,W,ye),ve=L[re+1]/255;F.skin+=L[re]/255*(ve+I.skinBias)*_e,F.detail+=ve*_e,F.saturation+=L[re+2]/255*(ve+I.saturationBias)*_e,F.boost+=L[re+3]/255*_e}return F.total=(F.detail*I.detailWeight+F.skin*I.skinWeight+F.saturation*I.saturationWeight+F.boost*I.boostWeight)/(P.width*P.height),F}function c(I,N,P,F){if(N.x>P||P>=N.x+N.width||N.y>F||F>=N.y+N.height)return I.outsideImportance;P=(P-N.x)/N.width,F=(F-N.y)/N.height;var L=_(.5-P)*2,z=_(.5-F)*2,H=Math.max(L-1+I.edgeRadius,0),X=Math.max(z-1+I.edgeRadius,0),Y=(H*H+X*X)*I.edgeWeight,de=1.41-w(L*L+z*z);return I.ruleOfThirds&&(de+=Math.max(0,de+Y+.5)*1.2*(D(L)+D(z))),de+Y}o.importance=c;function d(I,N,P,F){var L=w(N*N+P*P+F*F),z=N/L-I.skinColor[0],H=P/L-I.skinColor[1],X=F/L-I.skinColor[2],Y=w(z*z+H*H+X*X);return 1-Y}function f(I,N){var P={},F=new m(N.width,N.height);r(N,F),a(I,N,F),i(I,N,F),n(I,F);for(var L=p(F,I.scoreDownSample),z=-1/0,H=null,X=l(I,N.width,N.height),Y=0,de=X.length;Y<de;Y++){var ye=X[Y];ye.score=u(I,L,ye),ye.score.total>z&&(H=ye,z=ye.score.total)}return P.topCrop=H,I.debug&&H&&(P.crops=X,P.debugOutput=F,P.debugOptions=I,P.debugTopCrop=S({},P.topCrop)),P}function m(I,N,P){this.width=I,this.height=N,P?this.data=new Uint8ClampedArray(P):this.data=new Uint8ClampedArray(I*N*4)}o.ImgData=m;function p(I,N){for(var P=I.data,F=I.width,L=Math.floor(I.width/N),z=Math.floor(I.height/N),H=new m(L,z),X=H.data,Y=1/(N*N),de=0;de<z;de++)for(var ye=0;ye<L;ye++){for(var W=(de*L+ye)*4,re=0,_e=0,ve=0,ke=0,Ie=0,he=0,De=0,Te=0;Te<N;Te++)for(var J=0;J<N;J++){var q=((de*N+Te)*F+(ye*N+J))*4;re+=P[q],_e+=P[q+1],ve+=P[q+2],ke+=P[q+3],Ie=Math.max(Ie,P[q]),he=Math.max(he,P[q+1]),De=Math.max(De,P[q+2])}X[W]=re*Y*.5+Ie*.5,X[W+1]=_e*Y*.7+he*.3,X[W+2]=ve*Y,X[W+3]=ke*Y}return H}o._downSample=p;function v(I,N){var P=document.createElement("canvas");return P.width=I,P.height=N,P}function g(I){return{open:function(N){var P=N.naturalWidth||N.width,F=N.naturalHeight||N.height,L=I(P,F),z=L.getContext("2d");return N.naturalWidth&&(N.naturalWidth!=N.width||N.naturalHeight!=N.height)?(L.width=N.naturalWidth,L.height=N.naturalHeight):(L.width=N.width,L.height=N.height),z.drawImage(N,0,0),o.Promise.resolve(L)},resample:function(N,P,F){return Promise.resolve(N).then(function(L){var z=I(~~P,~~F),H=z.getContext("2d");return H.drawImage(L,0,0,L.width,L.height,0,0,z.width,z.height),o.Promise.resolve(z)})},getData:function(N){return Promise.resolve(N).then(function(P){var F=P.getContext("2d"),L=F.getImageData(0,0,P.width,P.height);return new m(P.width,P.height,L.data)})}}}o._canvasImageOperations=g;var x=Math.min,b=Math.max,_=Math.abs,w=Math.sqrt;function S(I){for(var N=1,P=arguments.length;N<P;N++){var F=arguments[N];if(F)for(var L in F)I[L]=F[L]}return I}function D(I){return I=((I-1/3+1)%2*.5-.5)*16,Math.max(1-I*I,0)}function M(I,N,P){return .5126*P+.7152*N+.0722*I}function O(I,N){return M(I[N],I[N+1],I[N+2])}function T(I,N,P){var F=b(I/255,N/255,P/255),L=x(I/255,N/255,P/255);if(F===L)return 0;var z=(F+L)/2,H=F-L;return z>.5?H/(2-F-L):H/(F+L)}t.smartcrop=o,e.exports=o})()})(wP,wP.exports);const kxe={data(){return{cores:["#f44336","#ff4081","#9c27B0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffc107","#ff9800","#ff5722","#795548","#9e9e9e","#607D8b"],visualizador:{visivel:!1,nome:"",imagem:""},fator:1,zoom:100,quantidades:0,pinca:{zoom:0,scaling:!1,width:0,height:0,top:0,left:0},distancia:{x1i:0,y1i:0,x2i:0,y2i:0,x1f:0,y1f:0,x2f:0,y2f:0,distanciaInicial:0,distanciaFinal:0}}},emits:["update:imagem"],props:{editavel:{required:!1,type:Boolean,default:!1},imagem:{type:String,default:""},brilho:{type:[Number,String],default:60},color:{type:String,required:!1},icone:{type:String,default:"person"},redondo:{type:Boolean,default:!0},rotulo:{type:[Boolean,String]},tamanho:{type:[Number,String],default:50}},computed:{classes(){return{"cursor-pointer":this.editavel,"avatar--quadrado":!this.redondo}},cor(){return this.letras?this.cores[this.rotulo.length%this.cores.length]:this.cores[new Date().getDate()%this.cores.length]},estilos(){var t;let e={height:`${this.tamanho}px`,width:this.redondo?`${this.tamanho}px`:"100%"};return this.imagem||(e.backgroundColor=(t=this.color)!=null?t:this.cor,e.color=this.color?"#757575":this.fonteCor,e.fontSize=this.color?"20px":`${this.tamanho/2.5}px`),e},fonteCor(){return Nxe.lighten(this.cor,this.brilho)},letras(){const e=this.rotulo;return typeof e!="string"||!e||e.length<2?!1:e.slice(0,1)}},methods:{async visualizar(){var e;try{$q.loading.show(),this.visualizador.nome=(e=this.rotulo)!=null?e:"",this.visualizador.visivel=!0,this.imagem&&this.imagem!==""?this.visualizador.imagem=this.imagem:this.visualizador.imagem=""}catch{$q.notify({type:"negative",message:"Erro ao visualizar avatar"})}finally{$q.loading.hide()}},fechar(){this.visualizador={visivel:!1,nome:"",imagem:""}},async redimensionar(){if(this.visualizador.imagem){const t=this.$refs.quadro,o=document.body.clientWidth-20,r=window.innerHeight-(50+20);o>r?t.style.height=r+"px":t.style.height=o+"px",t.style.width=t.style.height,t.style.top=(window.innerHeight-parseInt(t.style.height)-50)/2+"px",t.style.left=(document.body.clientWidth-parseInt(t.style.width))/2+"px",await this.ajustar()}},async ajustar(){this.$nextTick(()=>{const e=this.$refs.quadro,t={top:parseInt(e.style.top),left:parseInt(e.style.left),width:parseInt(e.style.width),height:parseInt(e.style.height)},o=this.$refs.foto,r=new Image,a=this;r.onload=()=>{let i=r.width,n=r.height,s=1.001;r.width>r.height?s=t.width/r.height:s=t.width/r.width,i=parseInt(i*s),n=parseInt(n*s),o.style.top=(t.height-n)/2+t.top+"px",o.style.left=(t.width-i)/2+t.left+"px",o.style.width=i+"px",o.style.height=n+"px",a.fator=r.height/r.width},r.src=this.visualizador.imagem})},async tirarFoto(e){if($q.platform.is.desktop){const t=await $g.promptCamera.show();t.acao==="foto"&&(this.visualizador.imagem=t.foto,this.$nextTick(async()=>{await this.redimensionar()}))}if($q.platform.is.mobile){const t=await new Promise(o=>{const r=document.createElement("input");r.setAttribute("type","file"),r.setAttribute("accept","image/*"),r.setAttribute("capture","environment"),r.addEventListener("cancel",a=>{o(null)}),r.addEventListener("change",()=>{const a=r.files;if(FileReader&&a&&a.length){const i=new FileReader;i.onload=async()=>{o(i.result)},i.readAsDataURL(a[0])}}),r.click()});t&&(this.visualizador.imagem=t,this.$nextTick(async()=>{await this.redimensionar()}))}},async anexar(e){return new Promise(t=>{const o=document.createElement("input");o.setAttribute("type","file"),o.setAttribute("accept","image/*"),o.addEventListener("cancel",r=>{t(null)}),o.addEventListener("change",async()=>{const r=o.files;if(FileReader&&r&&r.length){const a=new FileReader;a.onload=async()=>{this.visualizador.imagem=a.result,this.$nextTick(async()=>{await this.redimensionar()})},a.readAsDataURL(r[0])}}),o.click()})},async salvar(){const e=document.createElement("canvas"),t=e.getContext("2d"),o=this.$refs.foto,r=200,a=200;e.width=r,e.height=a;const i={left:parseFloat(this.$refs.foto.style.left),width:parseFloat(this.$refs.foto.style.width),top:parseFloat(this.$refs.foto.style.top),height:parseFloat(this.$refs.foto.style.height),naturalWidth:this.$refs.foto.naturalWidth,naturalHeight:this.$refs.foto.naturalHeight},n={left:parseFloat(this.$refs.quadro.style.left),width:parseFloat(this.$refs.quadro.style.width),top:parseFloat(this.$refs.quadro.style.top),height:parseFloat(this.$refs.quadro.style.height)},s={left:n.left-i.left,top:n.top-i.top};if(t.drawImage(o,s.left/i.width*i.naturalWidth,s.top/i.height*i.naturalHeight,n.width/i.width*i.naturalWidth,n.height/i.height*i.naturalHeight,0,0,r,a),e){let l=.92,u=e.toDataURL("image/jpeg",l);const c=350*1024;for(;u.length>c&&l>.1;)l-=.05,u=e.toDataURL("image/jpeg",l);u&&this.$emit("update:imagem",u),this.visualizador={visivel:!1,nome:"",imagem:""}}},async baixar(e){try{$q.loading.show();const o=await(await fetch(e==null?void 0:e.imagem)).blob(),r=window.URL.createObjectURL(o),a=document.createElement("a"),i=e==null?void 0:e.nome;a.href=r,a.download=i,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(r)}catch(t){$q.notify({type:"negative",message:"Falha ao iniciar o download"}),console.error("Falha ao iniciar o download. ",t)}finally{$q.loading.hide(),$q.notify({type:"positive",message:"Imagem baixada com sucesso!"})}},toque(e){const t=this.$refs.foto;let o=0;try{o=e.evt.touches.length}catch{}if(this.quantidades=o,this.pinca.scaling||o!==2&&Math.abs(e.delta.x+e.delta.y)<=20&&(t.style.left=parseFloat(t.style.left)+e.delta.x+"px",t.style.top=parseFloat(t.style.top)+e.delta.y+"px"),!this.pinca.scaling&&o===2){const r=this.distancia;r.x1i=e.evt.touches[0].pageX,r.y1i=e.evt.touches[0].pageY,r.x2i=e.evt.touches[1].pageX,r.y2i=e.evt.touches[1].pageY,r.distanciaInicial=Math.hypot(e.evt.touches[0].pageX-e.evt.touches[1].pageX,e.evt.touches[0].pageY-e.evt.touches[1].pageY),this.pinca.width=parseFloat(t.style.width),this.pinca.height=parseFloat(t.style.height),this.pinca.top=parseFloat(t.style.top),this.pinca.left=parseFloat(t.style.left),this.pinca.zoom=Math.hypot(e.evt.touches[0].pageX-e.evt.touches[1].pageX,e.evt.touches[0].pageY-e.evt.touches[1].pageY),this.pinca.scaling=!0}if(this.pinca.scaling&&o===0&&setTimeout(()=>{this.pinca.scaling=!1},500),this.pinca.scaling&&o===2)try{const r=e.evt,a=Math.hypot(r.touches[0].pageX-r.touches[1].pageX,r.touches[0].pageY-r.touches[1].pageY)-this.pinca.zoom,i=this.$refs.foto;i.style.width=this.pinca.width+a+"px",i.style.height=this.pinca.height+a*this.fator+"px",i.style.top=this.pinca.top-a/2*this.fator+"px",i.style.left=this.pinca.left-a/2+"px"}catch(r){console.error(r)}},zoomMais(){const e=this.$refs.foto;e.style.width=parseFloat(e.style.width)+4+"px",e.style.height=parseFloat(e.style.height)+4*this.fator+"px",e.style.top=parseFloat(e.style.top)-2*this.fator+"px",e.style.left=parseFloat(e.style.left)-2+"px"},zoomMenos(){const e=this.$refs.foto;e.style.width=parseFloat(e.style.width)-4+"px",e.style.height=parseFloat(e.style.height)-4*this.fator+"px",e.style.top=parseFloat(e.style.top)+2*this.fator+"px",e.style.left=parseFloat(e.style.left)+2+"px"},moverCima(){this.$refs.foto.style.top=parseFloat(this.$refs.foto.style.top)-3+"px"},moverBaixo(){this.$refs.foto.style.top=parseFloat(this.$refs.foto.style.top)+3+"px"},moverDireita(){this.$refs.foto.style.left=parseFloat(this.$refs.foto.style.left)+3+"px"},moverEsquerda(){this.$refs.foto.style.left=parseFloat(this.$refs.foto.style.left)-3+"px"}}},Rxe=["src","alt"],Vxe={key:1,id:"letras"},Bxe={id:"toque",ref:"toque"},qxe={id:"quadro",ref:"quadro"},Lxe=["src"];function $xe(e,t,o,r,a,i){const n=Ve("g-col"),s=Ve("g-row");return B(),be("div",{onClick:t[21]||(t[21]=l=>o.editavel&&i.visualizar()),class:Li(i.classes),style:_u(i.estilos),id:"avatar"},[o.imagem?(B(),be("img",{key:0,src:o.imagem,alt:o.rotulo,id:"imagem"},null,8,Rxe)):i.letras?(B(),be("span",Vxe,le(i.letras),1)):(B(),oe(Pe,{key:2,name:o.icone},null,8,["name"])),h(Ht,{modelValue:a.visualizador.visivel,"onUpdate:modelValue":t[18]||(t[18]=l=>a.visualizador.visivel=l),onHide:t[19]||(t[19]=l=>i.fechar()),onKeyup:t[20]||(t[20]=jr(l=>i.fechar(),["esc"])),maximized:"",persistent:""},{default:C(()=>[h(To,{container:"",view:"hHh LpR fFf",class:"bg-white"},{default:C(()=>[h(fr,{onResize:t[0]||(t[0]=l=>i.redimensionar())}),h(jo,null,{default:C(()=>[h(Je,null,{default:C(()=>[Ee(h(ae,{icon:"arrow_back",flat:"",round:""},null,512),[[st]]),h(lt,null,{default:C(()=>t[22]||(t[22]=[K("Editar avatar")])),_:1})]),_:1})]),_:1}),h(Jo,{class:"overflow-hidden"},{default:C(()=>[h(dn,{class:"overflow-hidden"},{default:C(()=>[a.visualizador.imagem?(B(),be(Qe,{key:0},[Ee(A("div",Bxe,null,512),[[Qa,i.toque,void 0,{prevent:!0,mouse:!0}]]),A("div",qxe,t[23]||(t[23]=[A("div",{style:{width:"100%",height:"100%","border-radius":"100%",border:"3px dashed cyan"}},null,-1)]),512),A("img",{onContextmenu:t[1]||(t[1]=rt(()=>{},["prevent"])),src:a.visualizador.imagem,id:"foto",ref:"foto"},null,40,Lxe)],64)):(B(),oe(s,{key:1,items:"center",style:{height:"calc(100vh - 50px)"}},{default:C(()=>[h(n,{text:"center"},{default:C(()=>[h(ae,{onClick:t[2]||(t[2]=l=>i.anexar()),onContextmenu:t[3]||(t[3]=rt(()=>{},["prevent"])),flat:"",round:"",size:"60px",color:"tertiary",icon:"add_photo_alternate",class:"q-pa-xl"})]),_:1})]),_:1}))]),_:1})]),_:1}),h(Ui,null,{default:C(()=>[h(ae,{id:"salvar",color:"primary",size:"md",icon:"save",round:"",onClick:t[4]||(t[4]=l=>i.salvar()),onContextmenu:t[5]||(t[5]=rt(()=>{},["prevent"]))}),h(ae,{id:"tirarFoto",color:"primary",size:"md",icon:"camera",round:"",onClick:t[6]||(t[6]=l=>i.tirarFoto("editar")),onContextmenu:t[7]||(t[7]=rt(()=>{},["prevent"]))}),h(ae,{id:"anexar",color:"primary",size:"md",icon:"attachment",round:"",onClick:t[8]||(t[8]=l=>i.anexar()),onContextmenu:t[9]||(t[9]=rt(()=>{},["prevent"]))}),h(ae,{id:"baixar",color:"primary",size:"md",icon:"download",round:"",onClick:t[10]||(t[10]=l=>i.baixar(a.visualizador)),onContextmenu:t[11]||(t[11]=rt(()=>{},["prevent"]))}),Ee(h(ae,{id:"zoomMais",color:"primary",size:"md",icon:"zoom_in",round:"",onContextmenu:t[12]||(t[12]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.zoomMais,"0:20",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{id:"zoomMenos",color:"primary",size:"md",icon:"zoom_out",round:"",onContextmenu:t[13]||(t[13]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.zoomMenos,"0:20",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{id:"moverCima",icon:"keyboard_arrow_up",size:"md",color:"primary",round:"",onContextmenu:t[14]||(t[14]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.moverCima,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{id:"moverDireita",icon:"keyboard_arrow_right",size:"md",color:"primary",round:"",onContextmenu:t[15]||(t[15]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.moverDireita,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{id:"moverBaixo",icon:"keyboard_arrow_down",size:"md",color:"primary",round:"",onContextmenu:t[16]||(t[16]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.moverBaixo,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{id:"moverEsquerda",icon:"keyboard_arrow_left",size:"md",color:"primary",round:"",onContextmenu:t[17]||(t[17]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.moverEsquerda,"0:50",{mouse:!0,enter:!0,space:!0}]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],6)}var bR=St(kxe,[["render",$xe]]);const Uxe={components:{Avatar:bR},computed:{exibirBadgeSemEstoque(){var t,o;const e=(o=(t=this.estoque)==null?void 0:t.tiposSaldos)==null?void 0:o.find(r=>r.tipoEstoque==="Dispon\xEDvel");return this.checaEstoque&&((e==null?void 0:e.saldo)<=0&&(e==null?void 0:e.saldoTotal)<=0||!e)},exibirBadgeOutroEstoque(){var t,o;const e=(o=(t=this.estoque)==null?void 0:t.tiposSaldos)==null?void 0:o.find(r=>r.tipoEstoque==="Dispon\xEDvel");return this.checaEstoque&&(e==null?void 0:e.saldo)<=0&&(e==null?void 0:e.saldoTotal)>0},exibirBadgeEstoque(){return this.checaEstoque&&!this.exibirBadgeSemEstoque&&!this.exibirBadgeOutroEstoque},badgeCor(){return this.item.ativo?((this.estoque||{}).saldo||0)<0?"negative":((this.estoque||{}).saldo||0)<=(this.item.quantidadeMinimaEstoque||0)?"orange":"positive":"faded"},eLista(){return this.modo==="lista"},hintBottomMargin(){return this.hintValorVenda||this.item.embalagem?"q-mb-md":""},hintValorVenda(){var t,o;let e=this.hintDescontoPercentual;return this.valores.quantidadeMaiorQue&&(e&&(e+=" | "),e+=`>${this.valores.quantidadeMaiorQue-1}${(o=(t=this.item.unidade)==null?void 0:t.toLocaleLowerCase())!=null?o:"un"} = ${$filters.numeroZerosDireita(this.valores.valorVendaMaiorQue,4,2)}`),e},hintDescontoPercentual(){return`Orig: ${$filters.numeroZerosDireita(this.valorVendaOriginal,4,2)}`},habilitarDescontoPercentual(){return!(this.valorVenda>this.valorVendaOriginal||this.valorVenda<0&&this.valorVendaOriginal>0)}},data(){return{quantidade:this.quantidadeSelecionada||0,valorVenda:0,valorVendaOriginal:0,descontoPercentual:0}},emits:["adicionar","concluir"],methods:{abrirItem(){document.querySelectorAll(".input :focus").length||(this.adicionar(),this.$emit("concluir"))},adicionar(e){this.valores.quantidadeMaiorQue&&this.quantidade>=this.valores.quantidadeMaiorQue&&(this.valorVenda=this.valores.valorVendaMaiorQue),this.atualizarValores(e),this.valorVenda!==this.valorVendaOriginal&&!(this.quantidade>0)&&(this.quantidade=1),this.$emit("adicionar",{item:{...this.item,novoValorVenda:this.valorVenda},quantidade:this.quantidade})},atualizarValores(e){if(this.valorVenda>this.valorVendaOriginal||this.valorVenda<0&&this.valorVendaOriginal>0){this.descontoPercentual=0;return}e==="descontoPercentual"&&(this.descontoPercentual=(this.valorVendaOriginal-this.valorVenda)*100/(this.valorVendaOriginal||1)),e==="valorVenda"&&(this.valorVenda=this.valorVendaOriginal-this.valorVendaOriginal*this.descontoPercentual/100)}},props:{checaEstoque:{type:Boolean,default:!1},estoque:{type:Object},item:{type:Object,required:!0},idEmpresa:String,modo:{type:String,default:"card"},exibirValorVenda:{type:Boolean,default:!0},habilitarQuantidade:{type:Boolean,default:!1},quantidadeSelecionada:{type:Number},valores:{type:Object,default:()=>({}),required:!1},ultimaVenda:{type:Object,default:()=>({}),required:!1}},created(){this.valorVenda=this.item.novoValorVenda!==void 0?this.item.novoValorVenda:this.item.valorVenda,this.valorVendaOriginal=this.item.valorVenda,this.atualizarValores("descontoPercentual")}},zxe={key:0,style:{"text-decoration":"line-through"}};function Hxe(e,t,o,r,a,i){const n=Ve("avatar"),s=Ve("campo"),l=Ve("g-col"),u=Ve("g-row");return B(),oe(qe,{clickable:"",class:"q-pa-sm items-center listresponsive itemcard itemHover"},{default:C(()=>[h(fe,{onClick:t[0]||(t[0]=c=>i.abrirItem()),class:"no-margin"},{default:C(()=>[h(qe,{class:"no-padding"},{default:C(()=>[h(fe,{class:"no-margin",style:{"max-width":"40px"}},{default:C(()=>[h(n,{imagem:o.item.imagem,redondo:i.eLista,rotulo:o.item.descricao,tamanho:"40",style:{"max-width":"40px",display:"flex","align-self":"center"}},null,8,["imagem","redondo","rotulo"])]),_:1}),h(fe,{class:"no-margin q-pl-sm"},{default:C(()=>[h(Re,{class:"text-tertiary text-weight-bold"},{default:C(()=>[K(le(o.item.descricaoConcatenada||o.item.descricao),1)]),_:1}),h(Re,{caption:""},{default:C(()=>[h(An,{color:i.badgeCor,dark:"",class:"q-mr-sm"},{default:C(()=>[K(" #"+le((o.item.codigoItem||0).toString().padStart(6,"0"))+" ",1),h(Ft,{anchor:"bottom middle",self:"center middle",class:"hideonmobile"},{default:C(()=>t[10]||(t[10]=[K("C\xF3digo Item")])),_:1})]),_:1},8,["color"]),o.item.referencia?(B(),oe(An,{key:0,class:"q-mr-sm",color:"tertiary"},{default:C(()=>[K(le(o.item.referencia)+" ",1),h(Ft,{anchor:"bottom middle",self:"center middle",class:"hideonmobile"},{default:C(()=>t[11]||(t[11]=[K("Refer\xEAncia")])),_:1})]),_:1})):ie("",!0),o.item.unidade?(B(),oe(An,{key:1,class:"q-mr-sm text-tertiary",color:"light"},{default:C(()=>[K(le(o.item.unidade)+" ",1),h(Ft,{anchor:"bottom middle",self:"center middle",class:"hideonmobile"},{default:C(()=>t[12]||(t[12]=[K("Unidade")])),_:1})]),_:1})):ie("",!0),o.item.marca?(B(),oe(An,{key:2,color:"white",class:"text-tertiary"},{default:C(()=>[K(le(o.item.marca)+" ",1),h(Ft,{anchor:"bottom middle",self:"center middle",class:"hideonmobile"},{default:C(()=>t[13]||(t[13]=[K("Marca")])),_:1})]),_:1})):ie("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),h(fe,{onClick:t[1]||(t[1]=c=>i.abrirItem()),class:"no-margin q-pl-sm"},{default:C(()=>[h(qe,{class:"no-padding"},{default:C(()=>[h(fe,{class:"no-margin"},{default:C(()=>[o.estoque?(B(),oe(Re,{key:0,caption:""},{default:C(()=>{var c,d,f,m;return[i.exibirBadgeSemEstoque?(B(),be(Qe,{key:0},[h(An,{color:"red"},{default:C(()=>t[14]||(t[14]=[K("SEM ESTOQUE")])),_:1}),t[15]||(t[15]=K()),t[16]||(t[16]=A("br",null,null,-1))],64)):ie("",!0),i.exibirBadgeOutroEstoque?(B(),be(Qe,{key:1},[h(An,{color:"orange"},{default:C(()=>t[17]||(t[17]=[K("OUTRO ESTOQUE")])),_:1}),t[18]||(t[18]=K()),t[19]||(t[19]=A("br",null,null,-1))],64)):ie("",!0),(d=(c=o.estoque)==null?void 0:c.tiposSaldos)!=null&&d.length?(B(),be(Qe,{key:2},[i.exibirBadgeEstoque?(B(),be(Qe,{key:0},[h(An,{color:"green"},{default:C(()=>t[20]||(t[20]=[K("ESTOQUE")])),_:1}),t[21]||(t[21]=K()),t[22]||(t[22]=A("br",null,null,-1))],64)):ie("",!0),i.exibirBadgeEstoque?ie("",!0):(B(),be(Qe,{key:1},[t[23]||(t[23]=A("strong",null,"Estoque",-1)),t[24]||(t[24]=K()),t[25]||(t[25]=A("br",null,null,-1))],64))],64)):ie("",!0),(f=o.estoque)!=null&&f.offline?(B(),be(Qe,{key:3},[K(" (Offline) ")],64)):ie("",!0),(B(!0),be(Qe,null,qt((m=o.estoque)==null?void 0:m.tiposSaldos,p=>{var v,g,x,b;return B(),be("span",{key:p.tipoEstoque},[K(le(p.tipoEstoque)+" ",1),A("strong",null,le(p.saldo),1),"saldoTotal"in p?(B(),be(Qe,{key:0},[t[26]||(t[26]=K(" , Total ")),A("strong",null,le(p.saldoTotal),1)],64)):ie("",!0),((g=(v=o.estoque)==null?void 0:v.tiposSaldos)==null?void 0:g.indexOf(p))!==((b=(x=o.estoque)==null?void 0:x.tiposSaldos)==null?void 0:b.length)-1?(B(),be(Qe,{key:1},[K(" | ")],64)):ie("",!0)])}),128))]}),_:1})):ie("",!0),o.item.status==="Fora de Linha"?(B(),oe(Re,{key:1,class:"q-mt-sm"},{default:C(()=>[h(An,{class:"q-mr-sm text-tertiary",color:"light"},{default:C(()=>t[27]||(t[27]=[K("Fora de Linha")])),_:1})]),_:1})):ie("",!0)]),_:1}),o.ultimaVenda.valorItem&&o.ultimaVenda.dataHoraFinalizado?(B(),oe(fe,{key:0,class:"no-margin q-pl-sm"},{default:C(()=>[h(Re,{caption:""},{default:C(()=>[t[28]||(t[28]=A("strong",null,"\xDAltima venda",-1)),K(" "+le(e.$filters.data(o.ultimaVenda.dataHoraFinalizado))+":",1),t[29]||(t[29]=A("br",null,null,-1)),o.ultimaVenda.valorReal!==o.ultimaVenda.valorItem?(B(),be("span",zxe,le(e.$filters.numero(o.ultimaVenda.valorItem,2)),1)):ie("",!0),K(" "+le(e.$filters.numero(o.ultimaVenda.valorReal,2))+" x "+le(o.ultimaVenda.quantidade)+" = "+le(e.$filters.numero(o.ultimaVenda.valorRealTotal,2)),1)]),_:1})]),_:1})):ie("",!0)]),_:1})]),_:1}),h(fe,{class:"no-margin q-pl-sm"},{default:C(()=>[h(u,{gutter:"xs",items:"center",justify:"end"},{default:C(()=>[o.exibirValorVenda?(B(),oe(l,{key:0,col:o.habilitarQuantidade?"8 sm8 md8 lg9":"12",class:Li(`${i.hintBottomMargin}`)},{default:C(()=>[h(u,null,{default:C(()=>[h(l,null,{default:C(()=>[h(s,{modelValue:a.descontoPercentual,"onUpdate:modelValue":t[2]||(t[2]=c=>a.descontoPercentual=c),onBlur:t[3]||(t[3]=c=>i.adicionar("valorVenda")),opcoes:{minimumValue:0},somenteLeitura:!i.habilitarDescontoPercentual,rotulo:"Desconto",tipo:"decimal",decimals:"4",zerosDireita:"2",suffix:"%",aviso:"",outlined:"",dense:"",class:"input q-ma-none"},null,8,["modelValue","somenteLeitura"])]),_:1}),o.item.status!=="Promo\xE7\xE3o"?(B(),oe(l,{key:0},{default:C(()=>[h(s,{modelValue:a.valorVenda,"onUpdate:modelValue":t[4]||(t[4]=c=>a.valorVenda=c),opcoes:{minimumValue:0},onBlur:t[5]||(t[5]=c=>i.adicionar("descontoPercentual")),avisoRotulo:i.hintValorVenda,rotulo:"Valor de Venda",tipo:"decimal",decimals:"4",zerosDireita:"2",aviso:"",outlined:"",dense:"",class:"input q-ma-none"},null,8,["modelValue","avisoRotulo"])]),_:1})):ie("",!0),o.item.status==="Promo\xE7\xE3o"?(B(),oe(l,{key:1},{default:C(()=>[h(s,{modelValue:a.valorVenda,"onUpdate:modelValue":t[6]||(t[6]=c=>a.valorVenda=c),onBlur:t[7]||(t[7]=c=>i.adicionar("descontoPercentual")),before:[{icon:"mdi-fire",color:"red"}],opcoes:{minimumValue:0},avisoRotulo:i.hintValorVenda,rotulo:"Valor em Promo\xE7\xE3o",tipo:"decimal",decimals:"4",zerosDireita:"2",aviso:"",outlined:"",dense:"",class:"input q-ma-none"},null,8,["modelValue","avisoRotulo"])]),_:1})):ie("",!0)]),_:1})]),_:1},8,["col","class"])):ie("",!0),o.habilitarQuantidade?(B(),oe(l,{key:1,col:"4 sm4 md4 lg3",class:Li(`${i.hintBottomMargin}`)},{default:C(()=>[h(s,{modelValue:a.quantidade,"onUpdate:modelValue":[t[8]||(t[8]=c=>a.quantidade=c),t[9]||(t[9]=c=>i.adicionar())],avisoRotulo:o.item.embalagem,min:"0",tipo:"quantidade",decimals:"4",aviso:"",outlined:"",dense:""},null,8,["modelValue","avisoRotulo"])]),_:1},8,["class"])):ie("",!0)]),_:1})]),_:1})]),_:1})}var yR=St(Uxe,[["render",Hxe]]);const jxe={components:{ItemCard:yR},computed:{itensEncontrados(){return this.itens.length},sku(){let e=0;for(const t in this.itensSelecionados)e+=this.itensSelecionados[t].quantidade>0?1:0;return e},valorItensSelecionados(){let e=0;for(const t in this.itensSelecionados){const o=$utils.arredondar((this.itensSelecionados[t].item.novoValorVenda||this.itensSelecionados[t].item.valorVenda||0)*this.itensSelecionados[t].quantidade);e=$utils.arredondar(e+o)}return e}},data(){return{carregando:!0,carregandoEstoque:!0,estoque:[],itens:[],itensSelecionados:{},filtro:{},termo:"",visivel:!1,habilitarQuantidade:!1}},methods:{onShow(){this.$refs.search.focus()},onHide(){this.resolve({}),this.visivel=!1},adicionar(e){const t=$utils.clonarV2(this.itensSelecionados);t[e.item.id]=e,this.itensSelecionados=t},async atualizar(){this.carregando=!0,await $utils.dormir(500);let t=(await $db.item.ler({filtros:{termoBusca:this.termo,...this.filtro},limit:30})).data;if(t=$utils.clonarV2(t),t.length&&this.filtro.idTabelaPreco){let o=await $erp().itemTabelaPreco.get(this.filtro.idTabelaPreco)||{};if(o.id)for(let r of t.filter(a=>a.valorVenda)){let a;a=await $db.itemTabelaPreco.obterValores(o,r,4)||{},r.valorVenda=a.valorVenda||0,r.valorReal=a.valorVenda||0}}t=t.map(o=>this.itensSelecionados[o.id]?this.itensSelecionados[o.id].item:o),this.itens=t,this.carregarEstoque(),this.carregando=!1},async carregarEstoque(){this.carregandoEstoque=!0,this.estoque=[];let e=[];const t=this.itens.map(o=>o.id);if(t.length)try{const r=(((await this.$utils.geeksApi({estoque:{funcao:"CC9F3B9A-16B9-4AE8-A523-938E4433AFAA",idItem:t,idEmpresa:this.filtro.idEmpresa}})||{}).data||{}).estoque||[]).filter(a=>a.tipoEstoque==="Dispon\xEDvel");for(const a of t)e.push({idItem:a,saldo:r.filter(i=>i.idItem===a).reduce((i,n)=>i+n.saldo,0)})}catch{let r=await $erp().estoqueSaldoProdutoEmpresa.where("idItem").anyOf(t).toArray();r=r.filter(a=>a.tipoEstoque==="Dispon\xEDvel"),this.filtro.idEmpresa&&(r=r.filter(a=>a.idEmpresa===this.filtro.idEmpresa));for(const a of t)e.push({idItem:a,saldo:r.filter(i=>i.idItem===a).reduce((i,n)=>i+n.saldo,0),offline:!0})}this.carregandoEstoque=!1,this.estoque=e},async concluir(){this.resolve({acao:"selecionarItens",itensSelecionados:this.itensSelecionados}),this.visivel=!1},obterEstoque(e,t){if(!this.carregandoEstoque)return e?this.estoque.find(o=>o.idItem===e)||{}:{}},refresh(){this.carregando=!0,this.itens=[],this.itensSelecionados={}},selecionar(e,t){this.resolve({id:e,item:t}),this.visivel=!1},async show(e){return e.filtro&&(this.filtro=e.filtro),e.placeholder&&(this.placeholder=e.placeholder),e.habilitarQuantidade&&(this.habilitarQuantidade=e.habilitarQuantidade),this.itens=[],this.itensSelecionados={},await this.atualizar(),this.visivel=!0,new Promise((t,o)=>{this.resolve=t})}},mounted(){$g.promptItem={show:this.show}}},Gxe={class:"layout-padding"},Wxe={key:0,class:"q-mt-lg text-center"},Qxe={key:1,class:"q-py-xl"},Xxe={key:2,class:"bg-light q-pa-lg round-borders text-black text-center"},Kxe={class:"text-tertiary"},Yxe={class:"text-positive float-right"};function Jxe(e,t,o,r,a,i){const n=Ve("item-card");return B(),oe(Ht,{modelValue:a.visivel,"onUpdate:modelValue":t[1]||(t[1]=s=>a.visivel=s),maximized:"",onHide:t[2]||(t[2]=s=>i.onHide()),onShow:t[3]||(t[3]=s=>i.onShow())},{default:C(()=>[h(To,{class:"bg-white",container:""},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,null,{default:C(()=>[Ee(h(ae,{dense:"",flat:"",icon:"arrow_back",round:""},null,512),[[st]]),h(lt,null,{default:C(()=>[h(ma,{modelValue:a.termo,"onUpdate:modelValue":[t[0]||(t[0]=s=>a.termo=s),i.atualizar],color:"none",ref:"search",dark:"",placeholder:"Buscar",debounce:"600",standout:"",filled:"",dense:"",clearable:"","clear-icon":"close"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1}),A("div",Gxe,[a.carregando?(B(),be("div",Wxe,[h(Ns,{color:"faded",size:50})])):ie("",!0),!a.carregando&&i.itensEncontrados?(B(),be("div",Qxe,[h(At,{link:"","no-border":"",separator:""},{default:C(()=>[(B(!0),be(Qe,null,qt(a.itens,s=>(B(),oe(n,{key:s.id,item:s,estoque:i.obterEstoque(s.id),idEmpresa:a.filtro.idEmpresa,modo:"lista",onSelecionar:i.selecionar,onAdicionar:i.adicionar,onConcluir:i.concluir,quantidadeSelecionada:(a.itensSelecionados[s.id]||{}).quantidade||0,habilitarQuantidade:a.habilitarQuantidade},null,8,["item","estoque","idEmpresa","onSelecionar","onAdicionar","onConcluir","quantidadeSelecionada","habilitarQuantidade"]))),128))]),_:1})])):ie("",!0),!a.carregando&&!i.itensEncontrados?(B(),be("div",Xxe," N\xE3o encontramos itens com os crit\xE9rios selecionados. ")):ie("",!0)]),i.sku>0?(B(),oe(Ui,{key:0,class:"bg-light"},{default:C(()=>[h(Je,null,{default:C(()=>[h(lt,null,{default:C(()=>[A("span",Kxe,le(i.sku)+" SKU(s)",1),A("span",Yxe,"R$ "+le(e.$filters.numero(i.valorItensSelecionados,2)),1)]),_:1}),h(ae,{class:"q-ml-sm no-shadow float-right",color:"primary",label:"Concluir",onClick:i.concluir,unelevated:""},null,8,["onClick"])]),_:1})]),_:1})):ie("",!0)]),_:1})]),_:1},8,["modelValue"])}var Zxe=St(jxe,[["render",Jxe]]);const eCe={computed:{registrosEncontrados(){return!!this.itens.length}},data(){return{itens:[],termo:"",visivel:!1}},methods:{async atualizar(){},limpar(){this.itens=[],this.termo=""},onHide(){this.resolve({}),this.limpar()},item_click(e={}){this.resolve(e),this.visivel=!1},async show(e){return this.itens=await $erp().itemTabelaPreco.toArray(),this.visivel=!0,new Promise((t,o)=>{this.resolve=t})}},updated(){this.$nextTick(function(){this.$refs.search&&this.$refs.search.focus()})}},tCe={class:"layout-padding"},oCe={key:0,class:"bg-light q-pa-lg q-mt-lg round-borders text-black text-center"};function aCe(e,t,o,r,a,i){return B(),oe(Ht,{modelValue:a.visivel,"onUpdate:modelValue":t[1]||(t[1]=n=>a.visivel=n),maximized:"",onHide:t[2]||(t[2]=n=>i.onHide())},{default:C(()=>[h(To,{class:"bg-white",container:""},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,null,{default:C(()=>[Ee(h(ae,{dense:"",flat:"",icon:"arrow_back",round:""},null,512),[[st]]),h(lt,null,{default:C(()=>[h(ma,{modelValue:a.termo,"onUpdate:modelValue":[t[0]||(t[0]=n=>a.termo=n),i.atualizar],color:"none",ref:"search",dark:"",placeholder:"Tabela de Pre\xE7os",debounce:"600",standout:"",filled:"",dense:"",clearable:"","clear-icon":"close"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1}),h(Jo,null,{default:C(()=>[A("div",tCe,[h(At,{link:"","no-border":"",separator:""},{default:C(()=>[(B(!0),be(Qe,null,qt(a.itens,n=>(B(),oe(qe,{key:n.id,clickable:"",onClick:s=>i.item_click(n)},{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,{header:""},{default:C(()=>[K(le(n.descricao),1)]),_:2},1024),h(Re,{caption:""},{default:C(()=>[t[3]||(t[3]=A("strong",null,"Empresa: ",-1)),K(le(n.empresa),1)]),_:2},1024),n.fatorPercentual?(B(),oe(fe,{key:0,sublabel:""},{default:C(()=>[t[4]||(t[4]=A("strong",null,"Fator (%): ",-1)),K(le(e.$filters.numero(n.fatorPercentual,2))+" %",1)]),_:2},1024)):ie("",!0),h(Re,{caption:""},{default:C(()=>[t[5]||(t[5]=A("strong",null,"Arredondamento: ",-1)),K(le(n.arredondamento?"Sim":"N\xE3o"),1)]),_:2},1024)]),_:2},1024),h(No)]),_:2},1032,["onClick"]))),128))]),_:1}),a.itens.length?ie("",!0):(B(),be("div",oCe," N\xE3o encontramos registros com os crit\xE9rios selecionados. "))])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var rCe=St(eCe,[["render",aCe]]);const iCe={data(){return{carregando:!0,listaFiltrada:[],placeholder:"Selecione o NCM",termo:"",visivel:!1}},methods:{filtrar(){let e;if(this.termo){const t=$utils.removerAcentos(this.termo.toUpperCase()).split(" ").filter(o=>o!=="");e=this.listaCompleta.filter(o=>{const r=$utils.removerAcentos(" "+$utils.stringOrEmpty(o.ncm)+" "+$utils.stringOrEmpty(o.descricao).toUpperCase());let a=!0;for(const i of t)isNaN(Number(i))?a=a&&r.includes(i):a=a&&r.includes(" "+i);return a})}else e=this.listaCompleta;this.listaFiltrada=e.slice(0,50),this.carregando=!1},limpar(){this.listaFiltrada=[],this.placeholder="Selecione o NCM",this.termo=""},onHide(){this.resolve({}),this.limpar()},onShow(){this.$refs.search.focus()},item_click(e={}){this.resolve(e),this.visivel=!1},async show(e){return this.carregando=!0,this.visivel=!0,this.listaCompleta=(await $db.ncm.le()).sort((t,o)=>$utils.stringOrEmpty(t.ncm).localeCompare($utils.stringOrEmpty(o.ncm))),this.filtrar(),new Promise((t,o)=>{this.resolve=t})}},mounted(){$g.promptNcm={show:this.show}}},nCe={key:0,class:"bg-light q-pa-lg q-mt-lg round-borders text-black text-center"},sCe={key:1,class:"bg-light q-pa-lg q-mt-lg round-borders text-black text-center"};function lCe(e,t,o,r,a,i){return B(),oe(Ht,{modelValue:a.visivel,"onUpdate:modelValue":t[1]||(t[1]=n=>a.visivel=n),maximized:"",onHide:t[2]||(t[2]=n=>i.onHide()),onShow:t[3]||(t[3]=n=>i.onShow())},{default:C(()=>[h(To,{class:"bg-white",container:""},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,null,{default:C(()=>[Ee(h(ae,{dense:"",flat:"",icon:"arrow_back",round:""},null,512),[[st]]),h(lt,null,{default:C(()=>[h(ma,{modelValue:a.termo,"onUpdate:modelValue":[t[0]||(t[0]=n=>a.termo=n),i.filtrar],color:"none",ref:"search",dark:"",placeholder:a.placeholder,debounce:"600",standout:"",filled:"",dense:"",clearable:"","clear-icon":"close"},null,8,["modelValue","placeholder","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1}),h(Jo,{class:"u-container"},{default:C(()=>[h(dn,null,{default:C(()=>[a.carregando?(B(),be("div",nCe," Carregando... ")):a.listaFiltrada.length?(B(),oe(At,{key:2,link:"","no-border":"",separator:""},{default:C(()=>[(B(!0),be(Qe,null,qt(a.listaFiltrada,n=>(B(),oe(qe,{key:n.id,clickable:"",onClick:s=>i.item_click(n)},{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>[A("strong",null,le(n.ncm),1),K(" - "+le(n.descricao),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(B(),be("div",sCe," Nenhum resultado encontrado "))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}var cCe=St(iCe,[["render",lCe]]);const EP="q-slider__marker-labels",uCe=e=>({value:e}),dCe=({marker:e})=>G("div",{key:e.value,style:e.style,class:e.classes},e.label),xR=[34,37,40,33,39,38],fCe={...ya,...Su,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},mCe=["pan","update:modelValue","change"];function pCe({updateValue:e,updatePosition:t,getDragging:o,formAttrs:r}){const{props:a,emit:i,slots:n,proxy:{$q:s}}=xt(),l=xa(a,s),u=Ym(r),c=Ue(!1),d=Ue(!1),f=Ue(!1),m=Ue(!1),p=j(()=>a.vertical===!0?"--v":"--h"),v=j(()=>"-"+(a.switchLabelSide===!0?"switched":"standard")),g=j(()=>a.vertical===!0?a.reverse===!0:a.reverse!==(s.lang.rtl===!0)),x=j(()=>isNaN(a.innerMin)===!0||a.innerMin<a.min?a.min:a.innerMin),b=j(()=>isNaN(a.innerMax)===!0||a.innerMax>a.max?a.max:a.innerMax),_=j(()=>a.disable!==!0&&a.readonly!==!0&&x.value<b.value),w=j(()=>{if(a.step===0)return dt=>dt;const $e=(String(a.step).trim().split(".")[1]||"").length;return dt=>parseFloat(dt.toFixed($e))}),S=j(()=>a.step===0?1:a.step),D=j(()=>_.value===!0?a.tabindex||0:-1),M=j(()=>a.max-a.min),O=j(()=>b.value-x.value),T=j(()=>q(x.value)),I=j(()=>q(b.value)),N=j(()=>a.vertical===!0?g.value===!0?"bottom":"top":g.value===!0?"right":"left"),P=j(()=>a.vertical===!0?"height":"width"),F=j(()=>a.vertical===!0?"width":"height"),L=j(()=>a.vertical===!0?"vertical":"horizontal"),z=j(()=>{const $e={role:"slider","aria-valuemin":x.value,"aria-valuemax":b.value,"aria-orientation":L.value,"data-step":a.step};return a.disable===!0?$e["aria-disabled"]="true":a.readonly===!0&&($e["aria-readonly"]="true"),$e}),H=j(()=>`q-slider q-slider${p.value} q-slider--${c.value===!0?"":"in"}active inline no-wrap `+(a.vertical===!0?"row":"column")+(a.disable===!0?" disabled":" q-slider--enabled"+(_.value===!0?" q-slider--editable":""))+(f.value==="both"?" q-slider--focus":"")+(a.label||a.labelAlways===!0?" q-slider--label":"")+(a.labelAlways===!0?" q-slider--label-always":"")+(l.value===!0?" q-slider--dark":"")+(a.dense===!0?" q-slider--dense q-slider--dense"+p.value:""));function X($e){const dt="q-slider__"+$e;return`${dt} ${dt}${p.value} ${dt}${p.value}${v.value}`}function Y($e){const dt="q-slider__"+$e;return`${dt} ${dt}${p.value}`}const de=j(()=>{const $e=a.selectionColor||a.color;return"q-slider__selection absolute"+($e!==void 0?` text-${$e}`:"")}),ye=j(()=>Y("markers")+" absolute overflow-hidden"),W=j(()=>Y("track-container")),re=j(()=>X("pin")),_e=j(()=>X("label")),ve=j(()=>X("text-container")),ke=j(()=>X("marker-labels-container")+(a.markerLabelsClass!==void 0?` ${a.markerLabelsClass}`:"")),Ie=j(()=>"q-slider__track relative-position no-outline"+(a.trackColor!==void 0?` bg-${a.trackColor}`:"")),he=j(()=>{const $e={[F.value]:a.trackSize};return a.trackImg!==void 0&&($e.backgroundImage=`url(${a.trackImg}) !important`),$e}),De=j(()=>"q-slider__inner absolute"+(a.innerTrackColor!==void 0?` bg-${a.innerTrackColor}`:"")),Te=j(()=>{const $e=I.value-T.value,dt={[N.value]:`${100*T.value}%`,[P.value]:$e===0?"2px":`${100*$e}%`};return a.innerTrackImg!==void 0&&(dt.backgroundImage=`url(${a.innerTrackImg}) !important`),dt});function J($e){const{min:dt,max:Rt,step:Ut}=a;let gt=dt+$e*(Rt-dt);if(Ut>0){const po=(gt-x.value)%Ut;gt+=(Math.abs(po)>=Ut/2?(po<0?-1:1)*Ut:0)-po}return gt=w.value(gt),qi(gt,x.value,b.value)}function q($e){return M.value===0?0:($e-a.min)/M.value}function ne($e,dt){const Rt=ls($e),Ut=a.vertical===!0?qi((Rt.top-dt.top)/dt.height,0,1):qi((Rt.left-dt.left)/dt.width,0,1);return qi(g.value===!0?1-Ut:Ut,T.value,I.value)}const U=j(()=>Ep(a.markers)===!0?a.markers:S.value),Z=j(()=>{const $e=[],dt=U.value,Rt=a.max;let Ut=a.min;do $e.push(Ut),Ut+=dt;while(Ut<Rt);return $e.push(Rt),$e}),Ce=j(()=>{const $e=` ${EP}${p.value}-`;return EP+`${$e}${a.switchMarkerLabelsSide===!0?"switched":"standard"}${$e}${g.value===!0?"rtl":"ltr"}`}),Q=j(()=>a.markerLabels===!1?null:ee(a.markerLabels).map(($e,dt)=>({index:dt,value:$e.value,label:$e.label||$e.value,classes:Ce.value+($e.classes!==void 0?" "+$e.classes:""),style:{...ce($e.value),...$e.style||{}}}))),V=j(()=>({markerList:Q.value,markerMap:se.value,classes:Ce.value,getStyle:ce})),R=j(()=>{const $e=O.value===0?"2px":100*U.value/O.value;return{...Te.value,backgroundSize:a.vertical===!0?`2px ${$e}%`:`${$e}% 2px`}});function ee($e){if($e===!1)return null;if($e===!0)return Z.value.map(uCe);if(typeof $e=="function")return Z.value.map(Rt=>{const Ut=$e(Rt);return ei(Ut)===!0?{...Ut,value:Rt}:{value:Rt,label:Ut}});const dt=({value:Rt})=>Rt>=a.min&&Rt<=a.max;return Array.isArray($e)===!0?$e.map(Rt=>ei(Rt)===!0?Rt:{value:Rt}).filter(dt):Object.keys($e).map(Rt=>{const Ut=$e[Rt],gt=Number(Rt);return ei(Ut)===!0?{...Ut,value:gt}:{value:gt,label:Ut}}).filter(dt)}function ce($e){return{[N.value]:`${100*($e-a.min)/M.value}%`}}const se=j(()=>{if(a.markerLabels===!1)return null;const $e={};return Q.value.forEach(dt=>{$e[dt.value]=dt}),$e});function pe(){if(n["marker-label-group"]!==void 0)return n["marker-label-group"](V.value);const $e=n["marker-label"]||dCe;return Q.value.map(dt=>$e({marker:dt,...V.value}))}const we=j(()=>[[Qa,Ne,void 0,{[L.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Ne($e){$e.isFinal===!0?(m.value!==void 0&&(t($e.evt),$e.touch===!0&&e(!0),m.value=void 0,i("pan","end")),c.value=!1,f.value=!1):$e.isFirst===!0?(m.value=o($e.evt),t($e.evt),e(),c.value=!0,i("pan","start")):(t($e.evt),e())}function Ge(){f.value=!1}function Ze($e){t($e,o($e)),e(),d.value=!0,c.value=!0,document.addEventListener("mouseup",ot,!0)}function ot(){d.value=!1,c.value=!1,e(!0),Ge(),document.removeEventListener("mouseup",ot,!0)}function Pt($e){t($e,o($e)),e(!0)}function $t($e){xR.includes($e.keyCode)&&e(!0)}function fo($e){if(a.vertical===!0)return null;const dt=s.lang.rtl!==a.reverse?1-$e:$e;return{transform:`translateX(calc(${2*dt-1} * ${a.thumbSize} / 2 + ${50-100*dt}%))`}}function He($e){const dt=j(()=>d.value===!1&&(f.value===$e.focusValue||f.value==="both")?" q-slider--focus":""),Rt=j(()=>`q-slider__thumb q-slider__thumb${p.value} q-slider__thumb${p.value}-${g.value===!0?"rtl":"ltr"} absolute non-selectable`+dt.value+($e.thumbColor.value!==void 0?` text-${$e.thumbColor.value}`:"")),Ut=j(()=>({width:a.thumbSize,height:a.thumbSize,[N.value]:`${100*$e.ratio.value}%`,zIndex:f.value===$e.focusValue?2:void 0})),gt=j(()=>$e.labelColor.value!==void 0?` text-${$e.labelColor.value}`:""),po=j(()=>fo($e.ratio.value)),Ea=j(()=>"q-slider__text"+($e.labelTextColor.value!==void 0?` text-${$e.labelTextColor.value}`:""));return()=>{const pr=[G("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[G("path",{d:a.thumbPath})]),G("div",{class:"q-slider__focus-ring fit"})];return(a.label===!0||a.labelAlways===!0)&&(pr.push(G("div",{class:re.value+" absolute fit no-pointer-events"+gt.value},[G("div",{class:_e.value,style:{minWidth:a.thumbSize}},[G("div",{class:ve.value,style:po.value},[G("span",{class:Ea.value},$e.label.value)])])])),a.name!==void 0&&a.disable!==!0&&u(pr,"push")),G("div",{class:Rt.value,style:Ut.value,...$e.getNodeData()},pr)}}function tt($e,dt,Rt,Ut){const gt=[];a.innerTrackColor!=="transparent"&&gt.push(G("div",{key:"inner",class:De.value,style:Te.value})),a.selectionColor!=="transparent"&&gt.push(G("div",{key:"selection",class:de.value,style:$e.value})),a.markers!==!1&&gt.push(G("div",{key:"marker",class:ye.value,style:R.value})),Ut(gt);const po=[Fd("div",{key:"trackC",class:W.value,tabindex:dt.value,...Rt.value},[G("div",{class:Ie.value,style:he.value},gt)],"slide",_.value,()=>we.value)];if(a.markerLabels!==!1){const Ea=a.switchMarkerLabelsSide===!0?"unshift":"push";po[Ea](G("div",{key:"markerL",class:ke.value},pe()))}return po}return Vo(()=>{document.removeEventListener("mouseup",ot,!0)}),{state:{active:c,focus:f,preventFocus:d,dragging:m,editable:_,classes:H,tabindex:D,attributes:z,roundValueFn:w,keyStep:S,trackLen:M,innerMin:x,innerMinRatio:T,innerMax:b,innerMaxRatio:I,positionProp:N,sizeProp:P,isReversed:g},methods:{onActivate:Ze,onMobileClick:Pt,onBlur:Ge,onKeyup:$t,getContent:tt,getThumbRenderFn:He,convertRatioToModel:J,convertModelToRatio:q,getDraggingRatio:ne}}}const hCe=()=>({});var SP=Ct({name:"QSlider",props:{...fCe,modelValue:{required:!0,default:null,validator:e=>typeof e=="number"||e===null},labelValue:[String,Number]},emits:mCe,setup(e,{emit:t}){const{proxy:{$q:o}}=xt(),{state:r,methods:a}=pCe({updateValue:p,updatePosition:g,getDragging:v,formAttrs:YI(e)}),i=Ue(null),n=Ue(0),s=Ue(0);function l(){s.value=e.modelValue===null?r.innerMin.value:qi(e.modelValue,r.innerMin.value,r.innerMax.value)}ct(()=>`${e.modelValue}|${r.innerMin.value}|${r.innerMax.value}`,l),l();const u=j(()=>a.convertModelToRatio(s.value)),c=j(()=>r.active.value===!0?n.value:u.value),d=j(()=>{const _={[r.positionProp.value]:`${100*r.innerMinRatio.value}%`,[r.sizeProp.value]:`${100*(c.value-r.innerMinRatio.value)}%`};return e.selectionImg!==void 0&&(_.backgroundImage=`url(${e.selectionImg}) !important`),_}),f=a.getThumbRenderFn({focusValue:!0,getNodeData:hCe,ratio:c,label:j(()=>e.labelValue!==void 0?e.labelValue:s.value),thumbColor:j(()=>e.thumbColor||e.color),labelColor:j(()=>e.labelColor),labelTextColor:j(()=>e.labelTextColor)}),m=j(()=>r.editable.value!==!0?{}:o.platform.is.mobile===!0?{onClick:a.onMobileClick}:{onMousedown:a.onActivate,onFocus:x,onBlur:a.onBlur,onKeydown:b,onKeyup:a.onKeyup});function p(_){s.value!==e.modelValue&&t("update:modelValue",s.value),_===!0&&t("change",s.value)}function v(){return i.value.getBoundingClientRect()}function g(_,w=r.dragging.value){const S=a.getDraggingRatio(_,w);s.value=a.convertRatioToModel(S),n.value=e.snap!==!0||e.step===0?S:a.convertModelToRatio(s.value)}function x(){r.focus.value=!0}function b(_){if(!xR.includes(_.keyCode))return;zo(_);const w=([34,33].includes(_.keyCode)?10:1)*r.keyStep.value,S=([34,37,40].includes(_.keyCode)?-1:1)*(r.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*w;s.value=qi(r.roundValueFn.value(s.value+S),r.innerMin.value,r.innerMax.value),p()}return()=>{const _=a.getContent(d,r.tabindex,m,w=>{w.push(f())});return G("div",{ref:i,class:r.classes.value+(e.modelValue===null?" q-slider--no-value":""),...r.attributes.value,"aria-valuenow":e.modelValue},_)}}});const vCe={computed:{sensorHorizontalCor(){return this.sensor.horizontal<-10||this.sensor.horizontal>10?"red":"green"},sensorVerticalCor(){return this.sensor.vertical<85||this.sensor.vertical>95?"red":"green"}},data(){return{visivel:!1,sensor:{visivel:!1,horizontal:0,vertical:90},zoom:1,camera:"environment",flashicon:"flash_off",orientation:{},capabilities:{},cameras:[],selectedCamera:null}},methods:{zoomPlus(){try{this.zoom+=this.capabilities.zoom.step,this.zoom>this.capabilities.zoom.max&&(this.zoom=this.capabilities.zoom.max),this.track.applyConstraints({advanced:[{zoom:this.zoom}]})}catch(e){console.log("erro zoom + ",e)}},zoomLess(){try{this.zoom-=this.capabilities.zoom.step,this.zoom<this.capabilities.zoom.min&&(this.zoom=this.capabilities.zoom.min),this.track.applyConstraints({advanced:[{zoom:this.zoom}]})}catch(e){console.log("erro zoom + ",e)}},uploadClick(){this.$refs.upload.click()},openImage(){const e=this.$refs.upload.files;if(FileReader&&e&&e.length){var t=new FileReader;t.onload=()=>{this.resolve({acao:"foto",foto:t.result}),this.hide()},t.readAsDataURL(e[0])}},async photo(){const e=this;e.flashicon==="flash_auto"&&(e.track.applyConstraints({advanced:[{torch:!0}]}),await new Promise(t=>setTimeout(t,1e3))),e.imageCapture.takePhoto().then(t=>{const o=document.createElement("canvas"),r=o.getContext("2d"),a=new Image;a.onload=()=>{o.width=a.naturalWidth,o.height=a.naturalHeight,r.drawImage(a,0,0,a.naturalWidth,a.naturalHeight),this.resolve({acao:"foto",foto:o.toDataURL()+""}),this.hide(),e.flashicon==="flash_auto"&&e.track.applyConstraints({advanced:[{torch:!1}]})},a.src=URL.createObjectURL(t)}).catch(t=>console.error("takePhoto() failed: ",t))},flash(){switch(this.flashicon){case"flash_on":this.flashicon="flash_off",this.track.applyConstraints({advanced:[{torch:!1}]});break;case"flash_off":this.flashicon="flash_auto",this.track.applyConstraints({advanced:[{torch:!1}]});break;case"flash_auto":this.flashicon="flash_on",this.track.applyConstraints({advanced:[{torch:!0}]})}},async changeCamera(){function e(r=0){return new Promise(a=>setTimeout(a,r))}let t={};this.selectedCamera&&(t={audio:!1,video:{deviceId:{exact:this.selectedCamera},zoom:{ideal:1}}}),this.selectedCamera||(this.camera==="user"?this.camera="environment":this.camera="user",t={audio:!1,video:{facingMode:this.camera,zoom:{ideal:1}}});let o=document.getElementById("photo");o||await new Promise(r=>{this.interval=setInterval(()=>{o=document.getElementById("photo"),o&&(clearInterval(this.interval),r())},10)}),o.setAttribute("playsinline",""),o.setAttribute("autoplay",""),o.setAttribute("muted","");try{o.srcObject.getTracks().forEach(r=>r.stop())}catch{}navigator.mediaDevices.getUserMedia(t).then(async r=>{o.srcObject=r,await e(1e3),this.track=r.getVideoTracks()[0],this.capabilities=this.track.getCapabilities();const a=this.track.getSettings();this.zoom=a.zoom,this.imageCapture=new ImageCapture(this.track)})},availableCameras(){navigator.mediaDevices.enumerateDevices().then(e=>{this.cameras=e.filter(t=>t.kind==="videoinput").map(t=>({label:t.label||`C\xE2mera ${this.cameras.length+1}`,deviceId:t.deviceId}))}).catch(e=>{console.error("Erro ao obter as c\xE2meras:",e)})},chooseCamera(e){this.selectedCamera=e,this.changeCamera()},async sensorPosition(){await this.$nextTick();try{window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",e=>{var a,i,n,s,l,u,c,d;let t=0,o=0;window.orientation===90&&(o=parseInt(e.gamma),o=o<0?o*-1:180-Math.abs(o),o<91?t=parseInt(e.beta)*-1:(t=parseInt(e.beta)*-1,t=t>0?180-t:Math.abs(t)-180)),window.orientation===-90&&(t=parseInt(e.beta)*-1,o=parseInt(e.gamma),o=o<0?180+o:o,o<91?t=t===180?0:t:t=t>0?180-t:Math.abs(t)-180),window.orientation===0&&(o=parseInt(e.beta),o<91?t=parseInt(e.gamma)*-1:t=parseInt(e.gamma)),t>90&&(t=90),t<-90&&(t=-90),this.sensor.horizontal!==t&&(this.sensor.horizontal=t);let r=this.sensor.horizontal<-10||this.sensor.horizontal>10?"red":"green";r==="red"&&(i=(a=document.querySelector(".sensorHorizontal .q-slider__thumb"))==null?void 0:a.style)!=null&&i.visibility&&(document.querySelector(".sensorHorizontal .q-slider__thumb").style.visibility="visible"),r==="green"&&(s=(n=document.querySelector(".sensorHorizontal .q-slider__thumb"))==null?void 0:n.style)!=null&&s.visibility&&(document.querySelector(".sensorHorizontal .q-slider__thumb").style.visibility="hidden"),o>180&&(o=180),o<63&&(o=63),this.sensor.vertical!==o&&(this.sensor.vertical=o),r=this.sensor.vertical<85||this.sensor.vertical>95?"red":"green",r==="red"&&(u=(l=document.querySelector(".sensorVertical .q-slider__thumb"))==null?void 0:l.style)!=null&&u.visibility&&(document.querySelector(".sensorVertical .q-slider__thumb").style.visibility="visible"),r==="green"&&(d=(c=document.querySelector(".sensorVertical .q-slider__thumb"))==null?void 0:c.style)!=null&&d.visibility&&(document.querySelector(".sensorVertical .q-slider__thumb").style.visibility="hidden")},!1)}catch(e){console.log("Erro: ",e)}},async show(e){return e!=null&&e.sensor&&(this.sensor.visivel=e==null?void 0:e.sensor),this.availableCameras(),this.changeCamera(),this.visivel=!0,new Promise((t,o)=>{this.resolve=t})},async hide(){this.visivel=!1,await $utils.dormir(2e3),this.track&&this.track.stop()}},mounted(){$g.promptCamera={show:this.show}},beforeUnmount(){try{this.track.stop(),clearInterval(this.interval)}catch{}}},gCe={class:"container"},_Ce={class:"baseLeftBtns"},bCe={class:"baseRightBtns"};function yCe(e,t,o,r,a,i){return B(),oe(Ht,{modelValue:a.visivel,"onUpdate:modelValue":t[10]||(t[10]=n=>a.visivel=n),onShow:t[11]||(t[11]=n=>i.sensorPosition()),onHide:t[12]||(t[12]=n=>i.hide()),onKeyup:t[13]||(t[13]=jr(n=>i.hide(),["esc"])),persistent:"",maximized:""},{default:C(()=>[h(To,{view:"hHh LpR fFf",class:"bg-white",style:{overflow:"hidden"}},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,{class:"bg-primary text-white"},{default:C(()=>[h(lt,null,{default:C(()=>t[14]||(t[14]=[K("C\xE2mera")])),_:1}),h(ae,{onClick:t[0]||(t[0]=n=>i.hide()),icon:"close",flat:"",round:"",dense:""})]),_:1})]),_:1}),h(Jo,{style:{overflow:"hidden"}},{default:C(()=>[h(dn,{class:"bg-black",style:{overflow:"hidden"}},{default:C(()=>[A("div",gCe,[A("video",{onContextmenu:t[1]||(t[1]=rt(()=>{},["prevent"])),id:"photo",class:"video"},null,32),Ee(h(SP,{modelValue:a.sensor.horizontal,"onUpdate:modelValue":t[2]||(t[2]=n=>a.sensor.horizontal=n),color:i.sensorHorizontalCor,min:-90,max:90,ref:"horizontal",class:"sensorHorizontal"},null,8,["modelValue","color"]),[[Eo,a.sensor.visivel]]),Ee(h(Pe,{color:i.sensorHorizontalCor,name:"remove_red_eye",class:"removeRedEye"},null,8,["color"]),[[Eo,a.sensor.visivel]]),Ee(h(SP,{modelValue:a.sensor.vertical,"onUpdate:modelValue":t[3]||(t[3]=n=>a.sensor.vertical=n),color:i.sensorVerticalCor,min:63,max:180,ref:"vertical",class:"sensorVertical"},null,8,["modelValue","color"]),[[Eo,a.sensor.visivel]])])]),_:1})]),_:1}),h(Ui,null,{default:C(()=>[A("div",_Ce,[h(ae,{onClick:t[4]||(t[4]=n=>i.uploadClick()),icon:"attachment",color:"primary",size:"md",round:"",class:"btUpload"}),h(ae,{onClick:t[5]||(t[5]=n=>i.zoomPlus()),icon:"zoom_in",color:"primary",size:"md",round:"",class:"zoomPlus"}),h(ae,{onClick:t[6]||(t[6]=n=>i.zoomLess()),icon:"zoom_out",color:"primary",size:"md",round:"",class:"zoomLess"})]),h(ae,{onClick:t[7]||(t[7]=n=>i.photo()),icon:"camera",color:"primary",size:"xl",round:"",class:"btPhoto"}),A("div",bCe,[h(ae,{icon:"loop",color:"primary",size:"md",round:"",class:"btChangeCamera"},{default:C(()=>[h(aa,{anchor:"top left",self:"bottom middle"},{default:C(()=>[(B(!0),be(Qe,null,qt(a.cameras,(n,s)=>(B(),oe(qe,{onClick:l=>i.chooseCamera(n.deviceId),key:s,clickable:""},{default:C(()=>[h(fe,null,{default:C(()=>[K(le(n.label),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),h(ae,{onClick:t[8]||(t[8]=n=>i.flash()),icon:a.flashicon,color:"primary",size:"md",round:"",class:"btFlash"},null,8,["icon"])])]),_:1}),A("input",{onChange:t[9]||(t[9]=n=>i.openImage()),class:"upload",ref:"upload",type:"file"},null,544)]),_:1})]),_:1},8,["modelValue"])}var xCe=St(vCe,[["render",yCe],["__scopeId","data-v-d0c1f5e6"]]),nw=Ct({name:"QBanner",props:{...ya,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(e,{slots:t}){const{proxy:{$q:o}}=xt(),r=xa(e,o),a=j(()=>"q-banner row items-center"+(e.dense===!0?" q-banner--dense":"")+(r.value===!0?" q-banner--dark q-dark":"")+(e.rounded===!0?" rounded-borders":"")),i=j(()=>`q-banner__actions row items-center justify-end col-${e.inlineActions===!0?"auto":"all"}`);return()=>{const n=[G("div",{class:"q-banner__avatar col-auto row items-center self-start"},uo(t.avatar)),G("div",{class:"q-banner__content col text-body2"},uo(t.default))],s=uo(t.action);return s!==void 0&&n.push(G("div",{class:i.value},s)),G("div",{class:a.value+(e.inlineActions===!1&&s!==void 0?" q-banner--top-padding":""),role:"alert"},n)}}});function CR(e,t){const o=Ue(null),r=j(()=>e.disable===!0?null:G("span",{ref:o,class:"no-outline",tabindex:-1}));function a(i){const n=t.value;i!==void 0&&i.type.indexOf("key")===0?n!==null&&document.activeElement!==n&&n.contains(document.activeElement)===!0&&n.focus():o.value!==null&&(i===void 0||n!==null&&n.contains(i.target)===!0)&&o.value.focus()}return{refocusTargetEl:r,refocusTarget:a}}var wR={xs:30,sm:35,md:40,lg:50,xl:60};const ER={...ya,...Wd,...Su,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:e=>e==="tf"||e==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},SR=["update:modelValue"];function IR(e,t){const{props:o,slots:r,emit:a,proxy:i}=xt(),{$q:n}=i,s=xa(o,n),l=Ue(null),{refocusTargetEl:u,refocusTarget:c}=CR(o,l),d=Qd(o,wR),f=j(()=>o.val!==void 0&&Array.isArray(o.modelValue)),m=j(()=>{const P=go(o.val);return f.value===!0?o.modelValue.findIndex(F=>go(F)===P):-1}),p=j(()=>f.value===!0?m.value!==-1:go(o.modelValue)===go(o.trueValue)),v=j(()=>f.value===!0?m.value===-1:go(o.modelValue)===go(o.falseValue)),g=j(()=>p.value===!1&&v.value===!1),x=j(()=>o.disable===!0?-1:o.tabindex||0),b=j(()=>`q-${e} cursor-pointer no-outline row inline no-wrap items-center`+(o.disable===!0?" disabled":"")+(s.value===!0?` q-${e}--dark`:"")+(o.dense===!0?` q-${e}--dense`:"")+(o.leftLabel===!0?" reverse":"")),_=j(()=>{const P=p.value===!0?"truthy":v.value===!0?"falsy":"indet",F=o.color!==void 0&&(o.keepColor===!0||(e==="toggle"?p.value===!0:v.value!==!0))?` text-${o.color}`:"";return`q-${e}__inner relative-position non-selectable q-${e}__inner--${P}${F}`}),w=j(()=>{const P={type:"checkbox"};return o.name!==void 0&&Object.assign(P,{".checked":p.value,"^checked":p.value===!0?"checked":void 0,name:o.name,value:f.value===!0?o.val:o.trueValue}),P}),S=Ym(w),D=j(()=>{const P={tabindex:x.value,role:e==="toggle"?"switch":"checkbox","aria-label":o.label,"aria-checked":g.value===!0?"mixed":p.value===!0?"true":"false"};return o.disable===!0&&(P["aria-disabled"]="true"),P});function M(P){P!==void 0&&(zo(P),c(P)),o.disable!==!0&&a("update:modelValue",O(),P)}function O(){if(f.value===!0){if(p.value===!0){const P=o.modelValue.slice();return P.splice(m.value,1),P}return o.modelValue.concat([o.val])}if(p.value===!0){if(o.toggleOrder!=="ft"||o.toggleIndeterminate===!1)return o.falseValue}else if(v.value===!0){if(o.toggleOrder==="ft"||o.toggleIndeterminate===!1)return o.trueValue}else return o.toggleOrder!=="ft"?o.trueValue:o.falseValue;return o.indeterminateValue}function T(P){(P.keyCode===13||P.keyCode===32)&&zo(P)}function I(P){(P.keyCode===13||P.keyCode===32)&&M(P)}const N=t(p,g);return Object.assign(i,{toggle:M}),()=>{const P=N();o.disable!==!0&&S(P,"unshift",` q-${e}__native absolute q-ma-none q-pa-none`);const F=[G("div",{class:_.value,style:d.value,"aria-hidden":"true"},P)];u.value!==null&&F.push(u.value);const L=o.label!==void 0?Mr(r.default,[o.label]):uo(r.default);return L!==void 0&&F.push(G("div",{class:`q-${e}__label q-anchor--skip`},L)),G("div",{ref:l,class:b.value,...D.value,onClick:M,onKeydown:T,onKeyup:I},F)}}var ZI=Ct({name:"QToggle",props:{...ER,icon:String,iconColor:String},emits:SR,setup(e){function t(o,r){const a=j(()=>(o.value===!0?e.checkedIcon:r.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),i=j(()=>o.value===!0?e.iconColor:null);return()=>[G("div",{class:"q-toggle__track"}),G("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},a.value!==void 0?[G(Pe,{name:a.value,color:i.value})]:void 0)]}return IR("toggle",t)}});const CCe=G("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[G("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),G("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]);var Ri=Ct({name:"QRadio",props:{...ya,...Wd,...Su,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(e,{slots:t,emit:o}){const{proxy:r}=xt(),a=xa(e,r.$q),i=Qd(e,wR),n=Ue(null),{refocusTargetEl:s,refocusTarget:l}=CR(e,n),u=j(()=>go(e.modelValue)===go(e.val)),c=j(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(e.disable===!0?" disabled":"")+(a.value===!0?" q-radio--dark":"")+(e.dense===!0?" q-radio--dense":"")+(e.leftLabel===!0?" reverse":"")),d=j(()=>{const _=e.color!==void 0&&(e.keepColor===!0||u.value===!0)?` text-${e.color}`:"";return`q-radio__inner relative-position q-radio__inner--${u.value===!0?"truthy":"falsy"}${_}`}),f=j(()=>(u.value===!0?e.checkedIcon:e.uncheckedIcon)||null),m=j(()=>e.disable===!0?-1:e.tabindex||0),p=j(()=>{const _={type:"radio"};return e.name!==void 0&&Object.assign(_,{".checked":u.value===!0,"^checked":u.value===!0?"checked":void 0,name:e.name,value:e.val}),_}),v=Ym(p);function g(_){_!==void 0&&(zo(_),l(_)),e.disable!==!0&&u.value!==!0&&o("update:modelValue",e.val,_)}function x(_){(_.keyCode===13||_.keyCode===32)&&zo(_)}function b(_){(_.keyCode===13||_.keyCode===32)&&g(_)}return Object.assign(r,{set:g}),()=>{const _=f.value!==null?[G("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[G(Pe,{class:"q-radio__icon",name:f.value})])]:[CCe];e.disable!==!0&&v(_,"unshift"," q-radio__native q-ma-none q-pa-none");const w=[G("div",{class:d.value,style:i.value,"aria-hidden":"true"},_)];s.value!==null&&w.push(s.value);const S=e.label!==void 0?Mr(t.default,[e.label]):uo(t.default);return S!==void 0&&w.push(G("div",{class:"q-radio__label q-anchor--skip"},S)),G("div",{ref:n,class:c.value,tabindex:m.value,role:"radio","aria-label":e.label,"aria-checked":u.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:g,onKeydown:x,onKeyup:b},w)}}}),AR={exports:{}};(function(e,t){(function(o,r){e.exports=r(r.toString()).default})(vt,function(o){return function(r){function a(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return r[n].call(s.exports,s,s.exports,a),s.l=!0,s.exports}var i={};return a.m=r,a.c=i,a.i=function(n){return n},a.d=function(n,s,l){a.o(n,s)||Object.defineProperty(n,s,{configurable:!1,enumerable:!0,get:l})},a.n=function(n){var s=n&&n.__esModule?function(){return n.default}:function(){return n};return a.d(s,"a",s),s},a.o=function(n,s){return Object.prototype.hasOwnProperty.call(n,s)},a.p="/",a(a.s=166)}([function(r,a){function i(n){var s=typeof n;return n!=null&&(s=="object"||s=="function")}r.exports=i},function(r,a,i){function n(l,u){return this._row=[],this.config=l||{},this.supplements=u,this}var s=i(3);n.prototype._nextUnset=function(l,u){var c;for(u===void 0&&(u=0),c=u;c<l.length;c++)if(!l[c])return c;return l.length},n.prototype._matchPattern=function(l,u,c){var d,f,m,p,v=0,g=0,x=0,b=0;for(c=c||this.SINGLE_CODE_ERROR||1,d=0;d<l.length;d++)x+=l[d],b+=u[d];if(x<b)return Number.MAX_VALUE;for(f=x/b,c*=f,d=0;d<l.length;d++){if(m=l[d],p=u[d]*f,(g=Math.abs(m-p)/p)>c)return Number.MAX_VALUE;v+=g}return v/b},n.prototype._nextSet=function(l,u){var c;for(u=u||0,c=u;c<l.length;c++)if(l[c])return c;return l.length},n.prototype._correctBars=function(l,u,c){for(var d=c.length,f=0;d--;)(f=l[c[d]]*(1-(1-u)/2))>1&&(l[c[d]]=f)},n.prototype._matchTrace=function(l,u){var c,d,f=[],m=this,p=m._nextSet(m._row),v=!m._row[p],g=0,x={error:Number.MAX_VALUE,code:-1,start:0};if(l){for(c=0;c<l.length;c++)f.push(0);for(c=p;c<m._row.length;c++)if(m._row[c]^v)f[g]++;else{if(g===f.length-1)return d=m._matchPattern(f,l),d<u?(x.start=c-p,x.end=c,x.counter=f,x):null;g++,f[g]=1,v=!v}}else for(f.push(0),c=p;c<m._row.length;c++)m._row[c]^v?f[g]++:(g++,f.push(0),f[g]=1,v=!v);return x.start=p,x.end=m._row.length-1,x.counter=f,x},n.prototype.decodePattern=function(l){var u,c=this;return c._row=l,u=c._decode(),u===null?(c._row.reverse(),(u=c._decode())&&(u.direction=n.DIRECTION.REVERSE,u.start=c._row.length-u.start,u.end=c._row.length-u.end)):u.direction=n.DIRECTION.FORWARD,u&&(u.format=c.FORMAT),u},n.prototype._matchRange=function(l,u,c){var d;for(l=l<0?0:l,d=l;d<u;d++)if(this._row[d]!==c)return!1;return!0},n.prototype._fillCounters=function(l,u,c){var d,f=this,m=0,p=[];for(c=c===void 0||c,l=l!==void 0?l:f._nextUnset(f._row),u=u||f._row.length,p[m]=0,d=l;d<u;d++)f._row[d]^c?p[m]++:(m++,p[m]=1,c=!c);return p},n.prototype._toCounters=function(l,u){var c,d=this,f=u.length,m=d._row.length,p=!d._row[l],v=0;for(s.a.init(u,0),c=l;c<m;c++)if(d._row[c]^p)u[v]++;else{if(++v===f)break;u[v]=1,p=!p}return u},Object.defineProperty(n.prototype,"FORMAT",{value:"unknown",writeable:!1}),n.DIRECTION={FORWARD:1,REVERSE:-1},n.Exception={StartNotFoundException:"Start-Info was not found!",CodeNotFoundException:"Code could not be found!",PatternNotFoundException:"Pattern could not be found!"},n.CONFIG_KEYS={},a.a=n},function(r,a){var i=Array.isArray;r.exports=i},function(r,a,i){a.a={init:function(n,s){for(var l=n.length;l--;)n[l]=s},shuffle:function(n){var s,l,u=n.length-1;for(u;u>=0;u--)s=Math.floor(Math.random()*u),l=n[u],n[u]=n[s],n[s]=l;return n},toPointList:function(n){var s,l,u=[],c=[];for(s=0;s<n.length;s++){for(u=[],l=0;l<n[s].length;l++)u[l]=n[s][l];c[s]="["+u.join(",")+"]"}return"["+c.join(`,\r
`)+"]"},threshold:function(n,s,l){var u,c=[];for(u=0;u<n.length;u++)l.apply(n,[n[u]])>=s&&c.push(n[u]);return c},maxIndex:function(n){var s,l=0;for(s=0;s<n.length;s++)n[s]>n[l]&&(l=s);return l},max:function(s){var l,u=0;for(l=0;l<s.length;l++)s[l]>u&&(u=s[l]);return u},sum:function(s){for(var l=s.length,u=0;l--;)u+=s[l];return u}}},function(r,a,i){function n(m,p){m=u()(s(),m),c.a.call(this,m,p)}function s(){var m={};return Object.keys(n.CONFIG_KEYS).forEach(function(p){m[p]=n.CONFIG_KEYS[p].default}),m}var l=i(28),u=i.n(l),c=i(1),d=Object.assign||function(m){for(var p=1;p<arguments.length;p++){var v=arguments[p];for(var g in v)Object.prototype.hasOwnProperty.call(v,g)&&(m[g]=v[g])}return m},f={CODE_L_START:{value:0},CODE_G_START:{value:10},START_PATTERN:{value:[1,1,1]},STOP_PATTERN:{value:[1,1,1]},MIDDLE_PATTERN:{value:[1,1,1,1,1]},EXTENSION_START_PATTERN:{value:[1,1,2]},CODE_PATTERN:{value:[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2],[1,1,2,3],[1,2,2,2],[2,2,1,2],[1,1,4,1],[2,3,1,1],[1,3,2,1],[4,1,1,1],[2,1,3,1],[3,1,2,1],[2,1,1,3]]},CODE_FREQUENCY:{value:[0,11,13,14,19,25,28,21,22,26]},SINGLE_CODE_ERROR:{value:.7},AVG_CODE_ERROR:{value:.48},FORMAT:{value:"ean_13",writeable:!1}};n.prototype=Object.create(c.a.prototype,f),n.prototype.constructor=n,n.prototype._decodeCode=function(m,p){var v,g,x,b=[0,0,0,0],_=this,w=m,S=!_._row[w],D=0,M={error:Number.MAX_VALUE,code:-1,start:m,end:m};for(p||(p=_.CODE_PATTERN.length),v=w;v<_._row.length;v++)if(_._row[v]^S)b[D]++;else{if(D===b.length-1){for(g=0;g<p;g++)(x=_._matchPattern(b,_.CODE_PATTERN[g]))<M.error&&(M.code=g,M.error=x);return M.end=v,M.error>_.AVG_CODE_ERROR?null:M}D++,b[D]=1,S=!S}return null},n.prototype._findPattern=function(m,p,v,g,x){var b,_,w,S,D=[],M=this,O=0,T={error:Number.MAX_VALUE,code:-1,start:0,end:0};for(p||(p=M._nextSet(M._row)),v===void 0&&(v=!1),g===void 0&&(g=!0),x===void 0&&(x=M.AVG_CODE_ERROR),b=0;b<m.length;b++)D[b]=0;for(b=p;b<M._row.length;b++)if(M._row[b]^v)D[O]++;else{if(O===D.length-1){for(S=0,w=0;w<D.length;w++)S+=D[w];if((_=M._matchPattern(D,m))<x)return T.error=_,T.start=b-S,T.end=b,T;if(!g)return null;for(w=0;w<D.length-2;w++)D[w]=D[w+2];D[D.length-2]=0,D[D.length-1]=0,O--}else O++;D[O]=1,v=!v}return null},n.prototype._findStart=function(){for(var m,p,v=this,g=v._nextSet(v._row);!p;){if(!(p=v._findPattern(v.START_PATTERN,g)))return null;if((m=p.start-(p.end-p.start))>=0&&v._matchRange(m,p.start,0))return p;g=p.end,p=null}},n.prototype._verifyTrailingWhitespace=function(m){var p,v=this;return p=m.end+(m.end-m.start),p<v._row.length&&v._matchRange(m.end,p,0)?m:null},n.prototype._findEnd=function(m,p){var v=this,g=v._findPattern(v.STOP_PATTERN,m,p,!1);return g!==null?v._verifyTrailingWhitespace(g):null},n.prototype._calculateFirstDigit=function(m){var p,v=this;for(p=0;p<v.CODE_FREQUENCY.length;p++)if(m===v.CODE_FREQUENCY[p])return p;return null},n.prototype._decodePayload=function(m,p,v){var g,x,b=this,_=0;for(g=0;g<6;g++){if(!(m=b._decodeCode(m.end)))return null;m.code>=b.CODE_G_START?(m.code=m.code-b.CODE_G_START,_|=1<<5-g):_|=0<<5-g,p.push(m.code),v.push(m)}if((x=b._calculateFirstDigit(_))===null||(p.unshift(x),(m=b._findPattern(b.MIDDLE_PATTERN,m.end,!0,!1))===null))return null;for(v.push(m),g=0;g<6;g++){if(!(m=b._decodeCode(m.end,b.CODE_G_START)))return null;v.push(m),p.push(m.code)}return m},n.prototype._decode=function(){var m,p,v=this,g=[],x=[],b={};if(!(m=v._findStart())||(p={code:m.code,start:m.start,end:m.end},x.push(p),!(p=v._decodePayload(p,g,x)))||!(p=v._findEnd(p.end,!1))||(x.push(p),!v._checksum(g)))return null;if(this.supplements.length>0){var _=this._decodeExtensions(p.end);if(!_)return null;var w=_.decodedCodes[_.decodedCodes.length-1],S={start:w.start+((w.end-w.start)/2|0),end:w.end};if(!v._verifyTrailingWhitespace(S))return null;b={supplement:_,code:g.join("")+_.code}}return d({code:g.join(""),start:m.start,end:p.end,codeset:"",startInfo:m,decodedCodes:x},b)},n.prototype._decodeExtensions=function(m){var p,v,g=this._nextSet(this._row,m),x=this._findPattern(this.EXTENSION_START_PATTERN,g,!1,!1);if(x===null)return null;for(p=0;p<this.supplements.length;p++)if((v=this.supplements[p].decode(this._row,x.end))!==null)return{code:v.code,start:g,startInfo:x,end:v.end,codeset:"",decodedCodes:v.decodedCodes};return null},n.prototype._checksum=function(m){var p,v=0;for(p=m.length-2;p>=0;p-=2)v+=m[p];for(v*=3,p=m.length-1;p>=0;p-=2)v+=m[p];return v%10==0},n.CONFIG_KEYS={supplements:{type:"arrayOf(string)",default:[],description:"Allowed extensions to be decoded (2 and/or 5)"}},a.a=n},function(r,a,i){var n=i(38),s=typeof self=="object"&&self&&self.Object===Object&&self,l=n||s||Function("return this")();r.exports=l},function(r,a){function i(n){return n!=null&&typeof n=="object"}r.exports=i},function(r,a){function i(n){var s=new Float32Array(2);return s[0]=n[0],s[1]=n[1],s}r.exports=i},function(r,a,i){function n(m){return m==null?m===void 0?d:c:f&&f in Object(m)?l(m):u(m)}var s=i(11),l=i(119),u=i(146),c="[object Null]",d="[object Undefined]",f=s?s.toStringTag:void 0;r.exports=n},function(r,a,i){a.a={drawRect:function(n,s,l,u){l.strokeStyle=u.color,l.fillStyle=u.color,l.lineWidth=1,l.beginPath(),l.strokeRect(n.x,n.y,s.x,s.y)},drawPath:function(n,s,l,u){l.strokeStyle=u.color,l.fillStyle=u.color,l.lineWidth=u.lineWidth,l.beginPath(),l.moveTo(n[0][s.x],n[0][s.y]);for(var c=1;c<n.length;c++)l.lineTo(n[c][s.x],n[c][s.y]);l.closePath(),l.stroke()},drawImage:function(n,s,l){var u,c=l.getImageData(0,0,s.x,s.y),d=c.data,f=n.length,m=d.length;if(m/f!=4)return!1;for(;f--;)u=n[f],d[--m]=255,d[--m]=u,d[--m]=u,d[--m]=u;return l.putImageData(c,0,0),!0}}},function(r,a,i){function n(f){var m=-1,p=f==null?0:f.length;for(this.clear();++m<p;){var v=f[m];this.set(v[0],v[1])}}var s=i(133),l=i(134),u=i(135),c=i(136),d=i(137);n.prototype.clear=s,n.prototype.delete=l,n.prototype.get=u,n.prototype.has=c,n.prototype.set=d,r.exports=n},function(r,a,i){var n=i(5),s=n.Symbol;r.exports=s},function(r,a,i){function n(l,u){for(var c=l.length;c--;)if(s(l[c][0],u))return c;return-1}var s=i(17);r.exports=n},function(r,a,i){function n(d,f){return s(d)?d:l(d,f)?[d]:u(c(d))}var s=i(2),l=i(130),u=i(154),c=i(165);r.exports=n},function(r,a,i){function n(l,u){var c=l.__data__;return s(u)?c[typeof u=="string"?"string":"hash"]:c.map}var s=i(131);r.exports=n},function(r,a){function i(l,u){return!!(u=u==null?n:u)&&(typeof l=="number"||s.test(l))&&l>-1&&l%1==0&&l<u}var n=9007199254740991,s=/^(?:0|[1-9]\d*)$/;r.exports=i},function(r,a,i){var n=i(22),s=n(Object,"create");r.exports=s},function(r,a){function i(n,s){return n===s||n!==n&&s!==s}r.exports=i},function(r,a,i){var n=i(96),s=i(6),l=Object.prototype,u=l.hasOwnProperty,c=l.propertyIsEnumerable,d=n(function(){return arguments}())?n:function(f){return s(f)&&u.call(f,"callee")&&!c.call(f,"callee")};r.exports=d},function(r,a,i){function n(N,P){return{x:N,y:P,toVec2:function(){return O.clone([this.x,this.y])},toVec3:function(){return T.clone([this.x,this.y,1])},round:function(){return this.x=this.x>0?Math.floor(this.x+.5):Math.floor(this.x-.5),this.y=this.y>0?Math.floor(this.y+.5):Math.floor(this.y-.5),this}}}function s(N,P,F){F||(F=N);for(var L=N.data,z=L.length,H=F.data;z--;)H[z]=L[z]<P?1:0}function l(N,P){P||(P=8);for(var F=N.data,L=F.length,z=8-P,H=1<<P,X=new Int32Array(H);L--;)X[F[L]>>z]++;return X}function u(N,P){function F(Y,de){var ye,W=0;for(ye=Y;ye<=de;ye++)W+=H[ye];return W}function L(Y,de){var ye,W=0;for(ye=Y;ye<=de;ye++)W+=ye*H[ye];return W}function z(){var Y,de,ye,W,re,_e,ve,ke=[0],Ie=(1<<P)-1;for(H=l(N,P),W=1;W<Ie;W++)Y=F(0,W),de=F(W+1,Ie),ye=Y*de,ye===0&&(ye=1),re=L(0,W)*de,_e=L(W+1,Ie)*Y,ve=re-_e,ke[W]=ve*ve/ye;return M.a.maxIndex(ke)}P||(P=8);var H,X=8-P;return z()<<X}function c(N,P){var F=u(N);return s(N,F,P),F}function d(N,P,F){function L(ye){var W=!1;for(H=0;H<de.length;H++)X=de[H],X.fits(ye)&&(X.add(ye),W=!0);return W}var z,H,X,Y,de=[];for(F||(F="rad"),z=0;z<N.length;z++)Y=D.a.createPoint(N[z],z,F),L(Y)||de.push(D.a.create(Y,P));return de}function f(N,P,F){var L,z,H,X,Y=0,de=0,ye=[];for(L=0;L<P;L++)ye[L]={score:0,item:null};for(L=0;L<N.length;L++)if((z=F.apply(this,[N[L]]))>de)for(H=ye[Y],H.score=z,H.item=N[L],de=Number.MAX_VALUE,X=0;X<P;X++)ye[X].score<de&&(de=ye[X].score,Y=X);return ye}function m(N,P,F){for(var L,z=0,H=P.x,X=Math.floor(N.length/4),Y=P.x/2,de=0,ye=P.x;H<X;){for(L=0;L<Y;L++)F[de]=(.299*N[4*z+0]+.587*N[4*z+1]+.114*N[4*z+2]+(.299*N[4*(z+1)+0]+.587*N[4*(z+1)+1]+.114*N[4*(z+1)+2])+(.299*N[4*H+0]+.587*N[4*H+1]+.114*N[4*H+2])+(.299*N[4*(H+1)+0]+.587*N[4*(H+1)+1]+.114*N[4*(H+1)+2]))/4,de++,z+=2,H+=2;z+=ye,H+=ye}}function p(N,P,F){var L,z=N.length/4|0;if(F&&F.singleChannel===!0)for(L=0;L<z;L++)P[L]=N[4*L+0];else for(L=0;L<z;L++)P[L]=.299*N[4*L+0]+.587*N[4*L+1]+.114*N[4*L+2]}function v(N,P){for(var F=N.data,L=N.size.x,z=P.data,H=0,X=L,Y=F.length,de=L/2,ye=0;X<Y;){for(var W=0;W<de;W++)z[ye]=Math.floor((F[H]+F[H+1]+F[X]+F[X+1])/4),ye++,H+=2,X+=2;H+=L,X+=L}}function g(N,P){var F=N[0],L=N[1],z=N[2],H=z*L,X=H*(1-Math.abs(F/60%2-1)),Y=z-H,de=0,ye=0,W=0;return P=P||[0,0,0],F<60?(de=H,ye=X):F<120?(de=X,ye=H):F<180?(ye=H,W=X):F<240?(ye=X,W=H):F<300?(de=X,W=H):F<360&&(de=H,W=X),P[0]=255*(de+Y)|0,P[1]=255*(ye+Y)|0,P[2]=255*(W+Y)|0,P}function x(N){var P,F=[],L=[];for(P=1;P<Math.sqrt(N)+1;P++)N%P==0&&(L.push(P),P!==N/P&&F.unshift(Math.floor(N/P)));return L.concat(F)}function b(N,P){for(var F=0,L=0,z=[];F<N.length&&L<P.length;)N[F]===P[L]?(z.push(N[F]),F++,L++):N[F]>P[L]?L++:F++;return z}function _(N,P){function F(ve){for(var ke=0,Ie=ve[Math.floor(ve.length/2)];ke<ve.length-1&&ve[ke]<_e;)ke++;return ke>0&&(Ie=Math.abs(ve[ke]-_e)>Math.abs(ve[ke-1]-_e)?ve[ke-1]:ve[ke]),_e/Ie<de[W+1]/de[W]&&_e/Ie>de[W-1]/de[W]?{x:Ie,y:Ie}:null}var L,z=x(P.x),H=x(P.y),X=Math.max(P.x,P.y),Y=b(z,H),de=[8,10,15,20,32,60,80],ye={"x-small":5,small:4,medium:3,large:2,"x-large":1},W=ye[N]||ye.medium,re=de[W],_e=Math.floor(X/re);return L=F(Y),L||(L=F(x(X)))||(L=F(x(_e*re))),L}function w(N){return{value:parseFloat(N),unit:(N.indexOf("%"),N.length,"%")}}function S(N,P,F){var L={width:N,height:P},z=Object.keys(F).reduce(function(H,X){var Y=F[X],de=w(Y),ye=I[X](de,L);return H[X]=ye,H},{});return{sx:z.left,sy:z.top,sw:z.right-z.left,sh:z.bottom-z.top}}var D=i(50),M=i(3);a.b=n,a.f=c,a.g=d,a.h=f,a.c=m,a.d=p,a.i=v,a.a=g,a.e=_,a.j=S;var O={clone:i(7)},T={clone:i(83)},I={top:function(N,P){if(N.unit==="%")return Math.floor(P.height*(N.value/100))},right:function(N,P){if(N.unit==="%")return Math.floor(P.width-P.width*(N.value/100))},bottom:function(N,P){if(N.unit==="%")return Math.floor(P.height-P.height*(N.value/100))},left:function(N,P){if(N.unit==="%")return Math.floor(P.width*(N.value/100))}}},function(r,a,i){function n(d,f,m,p){f?this.data=f:m?(this.data=new m(d.x*d.y),m===Array&&p&&u.a.init(this.data,0)):(this.data=new Uint8Array(d.x*d.y),Uint8Array===Array&&p&&u.a.init(this.data,0)),this.size=d}var s=i(53),l=i(19),u=i(3),c={clone:i(7)};n.prototype.inImageWithBorder=function(d,f){return d.x>=f&&d.y>=f&&d.x<this.size.x-f&&d.y<this.size.y-f},n.sample=function(d,f,m){var p=Math.floor(f),v=Math.floor(m),g=d.size.x,x=v*d.size.x+p,b=d.data[x+0],_=d.data[x+1],w=d.data[x+g],S=d.data[x+g+1],D=b-_;return f-=p,m-=v,Math.floor(f*(m*(D-w+S)-D)+m*(w-b)+b)},n.clearArray=function(d){for(var f=d.length;f--;)d[f]=0},n.prototype.subImage=function(d,f){return new s.a(d,f,this)},n.prototype.subImageAsCopy=function(d,f){var m,p,v=d.size.y,g=d.size.x;for(m=0;m<g;m++)for(p=0;p<v;p++)d.data[p*g+m]=this.data[(f.y+p)*this.size.x+f.x+m]},n.prototype.copyTo=function(d){for(var f=this.data.length,m=this.data,p=d.data;f--;)p[f]=m[f]},n.prototype.get=function(d,f){return this.data[f*this.size.x+d]},n.prototype.getSafe=function(d,f){var m;if(!this.indexMapping){for(this.indexMapping={x:[],y:[]},m=0;m<this.size.x;m++)this.indexMapping.x[m]=m,this.indexMapping.x[m+this.size.x]=m;for(m=0;m<this.size.y;m++)this.indexMapping.y[m]=m,this.indexMapping.y[m+this.size.y]=m}return this.data[this.indexMapping.y[f+this.size.y]*this.size.x+this.indexMapping.x[d+this.size.x]]},n.prototype.set=function(d,f,m){return this.data[f*this.size.x+d]=m,this},n.prototype.zeroBorder=function(){var d,f=this.size.x,m=this.size.y,p=this.data;for(d=0;d<f;d++)p[d]=p[(m-1)*f+d]=0;for(d=1;d<m-1;d++)p[d*f]=p[d*f+(f-1)]=0},n.prototype.invert=function(){for(var d=this.data,f=d.length;f--;)d[f]=d[f]?0:1},n.prototype.convolve=function(d){var f,m,p,v,g=d.length/2|0,x=0;for(m=0;m<this.size.y;m++)for(f=0;f<this.size.x;f++){for(x=0,v=-g;v<=g;v++)for(p=-g;p<=g;p++)x+=d[v+g][p+g]*this.getSafe(f+p,m+v);this.data[m*this.size.x+f]=x}},n.prototype.moments=function(d){var f,m,p,v,g,x,b,_,w,S,D,M,O=this.data,T=this.size.y,I=this.size.x,N=[],P=[],F=Math.PI,L=F/4;if(d<=0)return P;for(g=0;g<d;g++)N[g]={m00:0,m01:0,m10:0,m11:0,m02:0,m20:0,theta:0,rad:0};for(m=0;m<T;m++)for(v=m*m,f=0;f<I;f++)(p=O[m*I+f])>0&&(x=N[p-1],x.m00+=1,x.m01+=m,x.m10+=f,x.m11+=f*m,x.m02+=v,x.m20+=f*f);for(g=0;g<d;g++)x=N[g],isNaN(x.m00)||x.m00===0||(S=x.m10/x.m00,D=x.m01/x.m00,b=x.m11/x.m00-S*D,_=x.m02/x.m00-D*D,w=x.m20/x.m00-S*S,M=(_-w)/(2*b),M=.5*Math.atan(M)+(b>=0?L:-L)+F,x.theta=(180*M/F+90)%180-90,x.theta<0&&(x.theta+=180),x.rad=M>F?M-F:M,x.vec=c.clone([Math.cos(M),Math.sin(M)]),P.push(x));return P},n.prototype.show=function(d,f){var m,p,v,g,x,b,_;for(f||(f=1),m=d.getContext("2d"),d.width=this.size.x,d.height=this.size.y,p=m.getImageData(0,0,d.width,d.height),v=p.data,g=0,_=0;_<this.size.y;_++)for(b=0;b<this.size.x;b++)x=_*this.size.x+b,g=this.get(b,_)*f,v[4*x+0]=g,v[4*x+1]=g,v[4*x+2]=g,v[4*x+3]=255;m.putImageData(p,0,0)},n.prototype.overlay=function(d,f,m){(!f||f<0||f>360)&&(f=360);for(var p=[0,1,1],v=[0,0,0],g=[255,255,255],x=[0,0,0],b=[],_=d.getContext("2d"),w=_.getImageData(m.x,m.y,this.size.x,this.size.y),S=w.data,D=this.data.length;D--;)p[0]=this.data[D]*f,b=p[0]<=0?g:p[0]>=360?x:i.i(l.a)(p,v),S[4*D+0]=b[0],S[4*D+1]=b[1],S[4*D+2]=b[2],S[4*D+3]=255;_.putImageData(w,m.x,m.y)},a.a=n},function(r,a,i){function n(l,u,c){u=="__proto__"&&s?s(l,u,{configurable:!0,enumerable:!0,value:c,writable:!0}):l[u]=c}var s=i(37);r.exports=n},function(r,a,i){function n(u,c){var d=l(u,c);return s(d)?d:void 0}var s=i(97),l=i(120);r.exports=n},function(r,a,i){function n(u){if(typeof u=="string"||s(u))return u;var c=u+"";return c=="0"&&1/u==-l?"-0":c}var s=i(27),l=1/0;r.exports=n},function(r,a,i){function n(u){return u!=null&&l(u.length)&&!s(u)}var s=i(25),l=i(26);r.exports=n},function(r,a,i){function n(m){if(!l(m))return!1;var p=s(m);return p==c||p==d||p==u||p==f}var s=i(8),l=i(0),u="[object AsyncFunction]",c="[object Function]",d="[object GeneratorFunction]",f="[object Proxy]";r.exports=n},function(r,a){function i(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=n}var n=9007199254740991;r.exports=i},function(r,a,i){function n(c){return typeof c=="symbol"||l(c)&&s(c)==u}var s=i(8),l=i(6),u="[object Symbol]";r.exports=n},function(r,a,i){var n=i(100),s=i(116),l=s(function(u,c,d){n(u,c,d)});r.exports=l},function(r,a){r.exports=function(i){return i.webpackPolyfill||(i.deprecate=function(){},i.paths=[],i.children||(i.children=[]),Object.defineProperty(i,"loaded",{enumerable:!0,get:function(){return i.l}}),Object.defineProperty(i,"id",{enumerable:!0,get:function(){return i.i}}),i.webpackPolyfill=1),i}},function(r,a,i){var n={searchDirections:[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],create:function(s,l){function u(x,b,_,w){var S,D,M;for(S=0;S<7;S++){if(D=x.cy+v[x.dir][0],M=x.cx+v[x.dir][1],f=D*g+M,m[f]===b&&(p[f]===0||p[f]===_))return p[f]=_,x.cy=D,x.cx=M,!0;p[f]===0&&(p[f]=w),x.dir=(x.dir+1)%8}return!1}function c(x,b,_){return{dir:_,x,y:b,next:null,prev:null}}function d(x,b,_,w,S){var D,M,O,T=null,I={cx:b,cy:x,dir:0};if(u(I,w,_,S)){T=c(b,x,I.dir),D=T,O=I.dir,M=c(I.cx,I.cy,0),M.prev=D,D.next=M,M.next=null,D=M;do I.dir=(I.dir+6)%8,u(I,w,_,S),O!==I.dir?(D.dir=I.dir,M=c(I.cx,I.cy,0),M.prev=D,D.next=M,M.next=null,D=M):(D.dir=O,D.x=I.cx,D.y=I.cy),O=I.dir;while(I.cx!==b||I.cy!==x);T.prev=D.prev,D.prev.next=T}return T}var f,m=s.data,p=l.data,v=this.searchDirections,g=s.size.x;return{trace:function(x,b,_,w){return u(x,b,_,w)},contourTracing:function(x,b,_,w,S){return d(x,b,_,w,S)}}}};a.a=n},function(r,a,i){function n(){s.a.call(this)}var s=i(1),l=i(3),u={ALPHABETH_STRING:{value:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. *$/+%"},ALPHABET:{value:[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,45,46,32,42,36,47,43,37]},CHARACTER_ENCODINGS:{value:[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,148,168,162,138,42]},ASTERISK:{value:148},FORMAT:{value:"code_39",writeable:!1}};n.prototype=Object.create(s.a.prototype,u),n.prototype.constructor=n,n.prototype._decode=function(){var c,d,f,m,p=this,v=[0,0,0,0,0,0,0,0,0],g=[],x=p._findStart();if(!x)return null;m=p._nextSet(p._row,x.end);do{if(v=p._toCounters(m,v),(f=p._toPattern(v))<0||(c=p._patternToChar(f))<0)return null;g.push(c),d=m,m+=l.a.sum(v),m=p._nextSet(p._row,m)}while(c!=="*");return g.pop(),g.length&&p._verifyTrailingWhitespace(d,m,v)?{code:g.join(""),start:x.start,end:m,startInfo:x,decodedCodes:g}:null},n.prototype._verifyTrailingWhitespace=function(c,d,f){var m=l.a.sum(f);return 3*(d-c-m)>=m},n.prototype._patternToChar=function(c){var d,f=this;for(d=0;d<f.CHARACTER_ENCODINGS.length;d++)if(f.CHARACTER_ENCODINGS[d]===c)return String.fromCharCode(f.ALPHABET[d]);return-1},n.prototype._findNextWidth=function(c,d){var f,m=Number.MAX_VALUE;for(f=0;f<c.length;f++)c[f]<m&&c[f]>d&&(m=c[f]);return m},n.prototype._toPattern=function(c){for(var d,f,m=c.length,p=0,v=m,g=0,x=this;v>3;){for(p=x._findNextWidth(c,p),v=0,d=0,f=0;f<m;f++)c[f]>p&&(d|=1<<m-1-f,v++,g+=c[f]);if(v===3){for(f=0;f<m&&v>0;f++)if(c[f]>p&&(v--,2*c[f]>=g))return-1;return d}}return-1},n.prototype._findStart=function(){var c,d,f,m=this,p=m._nextSet(m._row),v=p,g=[0,0,0,0,0,0,0,0,0],x=0,b=!1;for(c=p;c<m._row.length;c++)if(m._row[c]^b)g[x]++;else{if(x===g.length-1){if(m._toPattern(g)===m.ASTERISK&&(f=Math.floor(Math.max(0,v-(c-v)/4)),m._matchRange(f,v,0)))return{start:v,end:c};for(v+=g[0]+g[1],d=0;d<7;d++)g[d]=g[d+2];g[7]=0,g[8]=0,x--}else x++;g[x]=1,b=!b}return null},a.a=n},function(r,a){function i(n,s){return n[0]*s[0]+n[1]*s[1]}r.exports=i},function(r,a,i){var n=i(22),s=i(5),l=n(s,"Map");r.exports=l},function(r,a,i){function n(f){var m=-1,p=f==null?0:f.length;for(this.clear();++m<p;){var v=f[m];this.set(v[0],v[1])}}var s=i(138),l=i(139),u=i(140),c=i(141),d=i(142);n.prototype.clear=s,n.prototype.delete=l,n.prototype.get=u,n.prototype.has=c,n.prototype.set=d,r.exports=n},function(r,a,i){function n(u,c,d){(d===void 0||l(u[c],d))&&(d!==void 0||c in u)||s(u,c,d)}var s=i(21),l=i(17);r.exports=n},function(r,a,i){function n(d,f,m){var p=d[f];c.call(d,f)&&l(p,m)&&(m!==void 0||f in d)||s(d,f,m)}var s=i(21),l=i(17),u=Object.prototype,c=u.hasOwnProperty;r.exports=n},function(r,a,i){var n=i(22),s=function(){try{var l=n(Object,"defineProperty");return l({},"",{}),l}catch{}}();r.exports=s},function(r,a,i){(function(n){var s=typeof n=="object"&&n&&n.Object===Object&&n;r.exports=s}).call(a,i(47))},function(r,a,i){var n=i(147),s=n(Object.getPrototypeOf,Object);r.exports=s},function(r,a){function i(s){var l=s&&s.constructor;return s===(typeof l=="function"&&l.prototype||n)}var n=Object.prototype;r.exports=i},function(r,a,i){function n(u,c,d){return c=l(c===void 0?u.length-1:c,0),function(){for(var f=arguments,m=-1,p=l(f.length-c,0),v=Array(p);++m<p;)v[m]=f[c+m];m=-1;for(var g=Array(c+1);++m<c;)g[m]=f[m];return g[c]=d(v),s(u,this,g)}}var s=i(87),l=Math.max;r.exports=n},function(r,a,i){var n=i(106),s=i(148),l=s(n);r.exports=l},function(r,a){function i(n){return n}r.exports=i},function(r,a,i){(function(n){var s=i(5),l=i(163),u=typeof a=="object"&&a&&!a.nodeType&&a,c=u&&typeof n=="object"&&n&&!n.nodeType&&n,d=c&&c.exports===u,f=d?s.Buffer:void 0,m=f?f.isBuffer:void 0,p=m||l;n.exports=p}).call(a,i(29)(r))},function(r,a,i){var n=i(98),s=i(109),l=i(145),u=l&&l.isTypedArray,c=u?s(u):n;r.exports=c},function(r,a,i){function n(c){return u(c)?s(c,!0):l(c)}var s=i(88),l=i(99),u=i(24);r.exports=n},function(r,a){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(i=window)}r.exports=i},function(r,a,i){function n(R){f(R),X=ve.a.create(V.decoder,z)}function s(R){var ee;if(V.inputStream.type==="VideoStream")ee=document.createElement("video"),P=J.a.createVideoStream(ee);else if(V.inputStream.type==="ImageStream")P=J.a.createImageStream();else if(V.inputStream.type==="LiveStream"){var ce=l();ce&&((ee=ce.querySelector("video"))||(ee=document.createElement("video"),ce.appendChild(ee))),P=J.a.createLiveStream(ee),Ie.a.request(ee,V.inputStream.constraints).then(function(){P.trigger("canrecord")}).catch(function(se){return R(se)})}P.setAttribute("preload","auto"),P.setInputStream(V.inputStream),P.addEventListener("canrecord",u.bind(void 0,R))}function l(){var R=V.inputStream.target;if(R&&R.nodeName&&R.nodeType===1)return R;var ee=typeof R=="string"?R:"#interactive.viewport";return document.querySelector(ee)}function u(R){_e.a.checkImageConstraints(P,V.locator),d(),F=q.a.create(P,Z.dom.image),N(V.numOfWorkers,function(){V.numOfWorkers===0&&n(),c(R)})}function c(R){P.play(),R()}function d(){if(typeof document!="undefined"){var R=l();if(Z.dom.image=document.querySelector("canvas.imgBuffer"),Z.dom.image||(Z.dom.image=document.createElement("canvas"),Z.dom.image.className="imgBuffer",R&&V.inputStream.type==="ImageStream"&&R.appendChild(Z.dom.image)),Z.ctx.image=Z.dom.image.getContext("2d"),Z.dom.image.width=P.getCanvasSize().x,Z.dom.image.height=P.getCanvasSize().y,Z.dom.overlay=document.querySelector("canvas.drawingBuffer"),!Z.dom.overlay){Z.dom.overlay=document.createElement("canvas"),Z.dom.overlay.className="drawingBuffer",R&&R.appendChild(Z.dom.overlay);var ee=document.createElement("br");ee.setAttribute("clear","all"),R&&R.appendChild(ee)}Z.ctx.overlay=Z.dom.overlay.getContext("2d"),Z.dom.overlay.width=P.getCanvasSize().x,Z.dom.overlay.height=P.getCanvasSize().y}}function f(R){z=R||new re.a({x:P.getWidth(),y:P.getHeight()}),H=[U.clone([0,0]),U.clone([0,z.size.y]),U.clone([z.size.x,z.size.y]),U.clone([z.size.x,0])],_e.a.init(z,V.locator)}function m(){return V.locate?_e.a.locate():[[U.clone(H[0]),U.clone(H[1]),U.clone(H[2]),U.clone(H[3])]]}function p(R){function ee(Ge){for(var Ze=Ge.length;Ze--;)Ge[Ze][0]+=we,Ge[Ze][1]+=Ne}function ce(Ge){Ge[0].x+=we,Ge[0].y+=Ne,Ge[1].x+=we,Ge[1].y+=Ne}var se,pe=P.getTopRight(),we=pe.x,Ne=pe.y;if(we!==0||Ne!==0){if(R.barcodes)for(se=0;se<R.barcodes.length;se++)p(R.barcodes[se]);if(R.line&&R.line.length===2&&ce(R.line),R.box&&ee(R.box),R.boxes&&R.boxes.length>0)for(se=0;se<R.boxes.length;se++)ee(R.boxes[se])}}function v(R,ee){ee&&Y&&(R.barcodes?R.barcodes.filter(function(ce){return ce.codeResult}).forEach(function(ce){return v(ce,ee)}):R.codeResult&&Y.addResult(ee,P.getCanvasSize(),R.codeResult))}function g(R){return R&&(R.barcodes?R.barcodes.some(function(ee){return ee.codeResult}):R.codeResult)}function x(R,ee){var ce=R;R&&Q&&(p(R),v(R,ee),ce=R.barcodes||R),ke.a.publish("processed",ce),g(R)&&ke.a.publish("detected",ce)}function b(){var R,ee;ee=m(),ee?(R=X.decodeFromBoundingBoxes(ee),R=R||{},R.boxes=ee,x(R,z.data)):x()}function _(){var R;if(Q){if(Ce.length>0){if(!(R=Ce.filter(function(ee){return!ee.busy})[0]))return;F.attachData(R.imageData)}else F.attachData(z.data);F.grab()&&(R?(R.busy=!0,R.worker.postMessage({cmd:"process",imageData:R.imageData},[R.imageData.buffer])):b())}else b()}function w(){var R=null,ee=1e3/(V.frequency||60);L=!1,function ce(se){R=R||se,L||(se>=R&&(R+=ee,_()),window.requestAnimFrame(ce))}(performance.now())}function S(){Q&&V.inputStream.type==="LiveStream"?w():_()}function D(R){var ee,ce={worker:void 0,imageData:new Uint8Array(P.getWidth()*P.getHeight()),busy:!0};ee=T(),ce.worker=new Worker(ee),ce.worker.onmessage=function(se){if(se.data.event==="initialized")return URL.revokeObjectURL(ee),ce.busy=!1,ce.imageData=new Uint8Array(se.data.imageData),R(ce);se.data.event==="processed"?(ce.imageData=new Uint8Array(se.data.imageData),ce.busy=!1,x(se.data.result,ce.imageData)):se.data.event},ce.worker.postMessage({cmd:"init",size:{x:P.getWidth(),y:P.getHeight()},imageData:ce.imageData,config:M(V)},[ce.imageData.buffer])}function M(R){return ne({},R,{inputStream:ne({},R.inputStream,{target:null})})}function O(R){function ee(we){self.postMessage({event:"processed",imageData:pe.data,result:we},[pe.data.buffer])}function ce(){self.postMessage({event:"initialized",imageData:pe.data},[pe.data.buffer])}if(R){var se=R().default;if(!se)return void self.postMessage({event:"error",message:"Quagga could not be created"})}var pe;self.onmessage=function(we){if(we.data.cmd==="init"){var Ne=we.data.config;Ne.numOfWorkers=0,pe=new se.ImageWrapper({x:we.data.size.x,y:we.data.size.y},new Uint8Array(we.data.imageData)),se.init(Ne,ce,pe),se.onProcessed(ee)}else we.data.cmd==="process"?(pe.data=new Uint8Array(we.data.imageData),se.start()):we.data.cmd==="setReaders"&&se.setReaders(we.data.readers)}}function T(){var R,ee;return o!==void 0&&(ee=o),R=new Blob(["("+O.toString()+")("+ee+");"],{type:"text/javascript"}),window.URL.createObjectURL(R)}function I(R){X?X.setReaders(R):Q&&Ce.length>0&&Ce.forEach(function(ee){ee.worker.postMessage({cmd:"setReaders",readers:R})})}function N(R,ee){var ce=R-Ce.length;if(ce===0)return ee&&ee();if(ce<0)return Ce.slice(ce).forEach(function(we){we.worker.terminate()}),Ce=Ce.slice(0,ce),ee&&ee();for(var se=function(we){Ce.push(we),Ce.length>=R&&ee&&ee()},pe=0;pe<ce;pe++)D(se)}Object.defineProperty(a,"__esModule",{value:!0});var P,F,L,z,H,X,Y,de=i(28),ye=i.n(de),W=i(54),re=(i.n(W),i(20)),_e=i(64),ve=i(57),ke=i(51),Ie=i(59),he=i(9),De=i(49),Te=i(55),J=i(63),q=i(61),ne=Object.assign||function(R){for(var ee=1;ee<arguments.length;ee++){var ce=arguments[ee];for(var se in ce)Object.prototype.hasOwnProperty.call(ce,se)&&(R[se]=ce[se])}return R},U={clone:i(7)},Z={ctx:{image:null,overlay:null},dom:{image:null,overlay:null}},Ce=[],Q=!0,V={};a.default={init:function(R,ee,ce){if(V=ye()({},Te.a,R),ce)return Q=!1,n(ce),ee();s(ee)},start:function(){S()},stop:function(){L=!0,N(0),V.inputStream.type==="LiveStream"&&(Ie.a.release(),P.clearEventHandlers())},pause:function(){L=!0},onDetected:function(R){ke.a.subscribe("detected",R)},offDetected:function(R){ke.a.unsubscribe("detected",R)},onProcessed:function(R){ke.a.subscribe("processed",R)},offProcessed:function(R){ke.a.unsubscribe("processed",R)},setReaders:function(R){I(R)},registerResultCollector:function(R){R&&typeof R.addResult=="function"&&(Y=R)},canvas:Z,decodeSingle:function(R,ee){var ce=this;R=ye()({inputStream:{type:"ImageStream",sequence:!1,size:800,src:R.src},numOfWorkers:1,locator:{halfSample:!1}},R),this.init(R,function(){ke.a.once("processed",function(se){ce.stop(),ee.call(null,se)},!0),S()})},ImageWrapper:re.a,ImageDebug:he.a,ResultCollector:De.a,CameraAccess:Ie.a}},function(r,a,i){function n(u,c){return!!c&&c.some(function(d){return Object.keys(d).every(function(f){return d[f]===u[f]})})}function s(u,c){return typeof c!="function"||c(u)}var l=i(9);a.a={create:function(u){function c(g){return p&&g&&!n(g,u.blacklist)&&s(g,u.filter)}var d=document.createElement("canvas"),f=d.getContext("2d"),m=[],p=u.capacity||20,v=u.capture===!0;return{addResult:function(g,x,b){var _={};c(b)&&(p--,_.codeResult=b,v&&(d.width=x.x,d.height=x.y,l.a.drawImage(g,x,f),_.frame=d.toDataURL()),m.push(_))},getResults:function(){return m}}}}},function(r,a,i){var n={clone:i(7),dot:i(32)};a.a={create:function(s,l){function u(){c(s),d()}function c(v){p[v.id]=v,f.push(v)}function d(){var v,g=0;for(v=0;v<f.length;v++)g+=f[v].rad;m.rad=g/f.length,m.vec=n.clone([Math.cos(m.rad),Math.sin(m.rad)])}var f=[],m={rad:0,vec:n.clone([0,0])},p={};return u(),{add:function(v){p[v.id]||(c(v),d())},fits:function(v){return Math.abs(n.dot(v.point.vec,m.vec))>l},getPoints:function(){return f},getCenter:function(){return m}}},createPoint:function(s,l,u){return{rad:s[u],point:s,id:l}}}},function(r,a,i){a.a=function(){function n(d){return c[d]||(c[d]={subscribers:[]}),c[d]}function s(){c={}}function l(d,f){d.async?setTimeout(function(){d.callback(f)},4):d.callback(f)}function u(d,f,m){var p;if(typeof f=="function")p={callback:f,async:m};else if(p=f,!p.callback)throw"Callback was not specified on options";n(d).subscribers.push(p)}var c={};return{subscribe:function(d,f,m){return u(d,f,m)},publish:function(d,f){var m=n(d),p=m.subscribers;p.filter(function(v){return!!v.once}).forEach(function(v){l(v,f)}),m.subscribers=p.filter(function(v){return!v.once}),m.subscribers.forEach(function(v){l(v,f)})},once:function(d,f,m){u(d,{callback:f,async:m,once:!0})},unsubscribe:function(d,f){var m;d?(m=n(d),m.subscribers=m&&f?m.subscribers.filter(function(p){return p.callback!==f}):[]):s()}}}()},function(r,a,i){function n(){return navigator.mediaDevices&&typeof navigator.mediaDevices.enumerateDevices=="function"?navigator.mediaDevices.enumerateDevices():Promise.reject(new Error("enumerateDevices is not defined"))}function s(l){return navigator.mediaDevices&&typeof navigator.mediaDevices.getUserMedia=="function"?navigator.mediaDevices.getUserMedia(l):Promise.reject(new Error("getUserMedia is not defined"))}a.b=n,a.a=s},function(r,a,i){function n(s,l,u){u||(u={data:null,size:l}),this.data=u.data,this.originalSize=u.size,this.I=u,this.from=s,this.size=l}n.prototype.show=function(s,l){var u,c,d,f,m,p,v;for(l||(l=1),u=s.getContext("2d"),s.width=this.size.x,s.height=this.size.y,c=u.getImageData(0,0,s.width,s.height),d=c.data,f=0,m=0;m<this.size.y;m++)for(p=0;p<this.size.x;p++)v=m*this.size.x+p,f=this.get(p,m)*l,d[4*v+0]=f,d[4*v+1]=f,d[4*v+2]=f,d[4*v+3]=255;c.data=d,u.putImageData(c,0,0)},n.prototype.get=function(s,l){return this.data[(this.from.y+l)*this.originalSize.x+this.from.x+s]},n.prototype.updateData=function(s){this.originalSize=s.size,this.data=s.data},n.prototype.updateFrom=function(s){return this.from=s,this},a.a=n},function(r,a){typeof window!="undefined"&&(window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(i){window.setTimeout(i,1e3/60)}}()),Math.imul=Math.imul||function(i,n){var s=i>>>16&65535,l=65535&i,u=n>>>16&65535,c=65535&n;return l*c+(s*c+l*u<<16>>>0)|0},typeof Object.assign!="function"&&(Object.assign=function(i){if(i===null)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(i),s=1;s<arguments.length;s++){var l=arguments[s];if(l!==null)for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(n[u]=l[u])}return n})},function(r,a,i){var n=void 0;n=i(56),a.a=n},function(r,a){r.exports={inputStream:{name:"Live",type:"LiveStream",constraints:{width:640,height:480,facingMode:"environment"},area:{top:"0%",right:"0%",left:"0%",bottom:"0%"},singleChannel:!1},locate:!0,numOfWorkers:4,decoder:{readers:["code_128_reader"]},locator:{halfSample:!0,patchSize:"medium"}}},function(r,a,i){var n=i(58),s=(i(9),i(69)),l=i(4),u=i(31),c=i(70),d=i(68),f=i(77),m=i(74),p=i(72),v=i(73),g=i(76),x=i(75),b=i(67),_=i(71),w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},S={code_128_reader:s.a,ean_reader:l.a,ean_5_reader:v.a,ean_2_reader:p.a,ean_8_reader:m.a,code_39_reader:u.a,code_39_vin_reader:c.a,codabar_reader:d.a,upc_reader:f.a,upc_e_reader:g.a,i2of5_reader:x.a,"2of5_reader":b.a,code_93_reader:_.a};a.a={create:function(D,M){function O(){D.readers.forEach(function(H){var X,Y={},de=[];(H===void 0?"undefined":w(H))==="object"?(X=H.format,Y=H.config):typeof H=="string"&&(X=H),Y.supplements&&(de=Y.supplements.map(function(ye){return new S[ye]})),z.push(new S[X](Y,de))})}function T(H,X,Y){function de(ye){var W={y:ye*Math.sin(X),x:ye*Math.cos(X)};H[0].y-=W.y,H[0].x-=W.x,H[1].y+=W.y,H[1].x+=W.x}for(de(Y);Y>1&&(!M.inImageWithBorder(H[0],0)||!M.inImageWithBorder(H[1],0));)Y-=Math.ceil(Y/2),de(-Y);return H}function I(H){return[{x:(H[1][0]-H[0][0])/2+H[0][0],y:(H[1][1]-H[0][1])/2+H[0][1]},{x:(H[3][0]-H[2][0])/2+H[2][0],y:(H[3][1]-H[2][1])/2+H[2][1]}]}function N(H){var X,Y=null,de=n.a.getBarcodeLine(M,H[0],H[1]);for(n.a.toBinaryLine(de),X=0;X<z.length&&Y===null;X++)Y=z[X].decodePattern(de.line);return Y===null?null:{codeResult:Y,barcodeLine:de}}function P(H,X,Y){var de,ye,W,re=Math.sqrt(Math.pow(H[1][0]-H[0][0],2)+Math.pow(H[1][1]-H[0][1],2)),_e=16,ve=null,ke=Math.sin(Y),Ie=Math.cos(Y);for(de=1;de<_e&&ve===null;de++)ye=re/_e*de*(de%2==0?-1:1),W={y:ye*ke,x:ye*Ie},X[0].y+=W.x,X[0].x-=W.y,X[1].y+=W.x,X[1].x-=W.y,ve=N(X);return ve}function F(H){return Math.sqrt(Math.pow(Math.abs(H[1].y-H[0].y),2)+Math.pow(Math.abs(H[1].x-H[0].x),2))}function L(H){var X,Y,de,ye;return X=I(H),ye=F(X),Y=Math.atan2(X[1].y-X[0].y,X[1].x-X[0].x),(X=T(X,Y,Math.floor(.1*ye)))===null?null:(de=N(X),de===null&&(de=P(H,X,Y)),de===null?null:{codeResult:de.codeResult,line:X,angle:Y,pattern:de.barcodeLine.line,threshold:de.barcodeLine.threshold})}var z=[];return O(),{decodeFromBoundingBox:function(H){return L(H)},decodeFromBoundingBoxes:function(H){var X,Y,de=[],ye=D.multiple;for(X=0;X<H.length;X++){var W=H[X];if(Y=L(W)||{},Y.box=W,ye)de.push(Y);else if(Y.codeResult)return Y}if(ye)return{barcodes:de}},setReaders:function(H){D.readers=H,z.length=0,O()}}}}},function(r,a,i){var n=(i(20),{}),s={DIR:{UP:1,DOWN:-1}};n.getBarcodeLine=function(l,u,c){function d(L,z){_=I[z*N+L],P=_<P?_:P,F=_>F?_:F,T.push(_)}var f,m,p,v,g,x,b,_,w=0|u.x,S=0|u.y,D=0|c.x,M=0|c.y,O=Math.abs(M-S)>Math.abs(D-w),T=[],I=l.data,N=l.size.x,P=255,F=0;for(O&&(x=w,w=S,S=x,x=D,D=M,M=x),w>D&&(x=w,w=D,D=x,x=S,S=M,M=x),f=D-w,m=Math.abs(M-S),p=f/2|0,g=S,v=S<M?1:-1,b=w;b<D;b++)O?d(g,b):d(b,g),(p-=m)<0&&(g+=v,p+=f);return{line:T,min:P,max:F}},n.toBinaryLine=function(l){var u,c,d,f,m,p,v=l.min,g=l.max,x=l.line,b=v+(g-v)/2,_=[],w=(g-v)/12,S=-w;for(d=x[0]>b?s.DIR.UP:s.DIR.DOWN,_.push({pos:0,val:x[0]}),m=0;m<x.length-2;m++)u=x[m+1]-x[m],c=x[m+2]-x[m+1],f=u+c<S&&x[m+1]<1.5*b?s.DIR.DOWN:u+c>w&&x[m+1]>.5*b?s.DIR.UP:d,d!==f&&(_.push({pos:m,val:x[m]}),d=f);for(_.push({pos:x.length,val:x[x.length-1]}),p=_[0].pos;p<_[1].pos;p++)x[p]=x[p]>b?0:1;for(m=1;m<_.length-1;m++)for(w=_[m+1].val>_[m].val?_[m].val+(_[m+1].val-_[m].val)/3*2|0:_[m+1].val+(_[m].val-_[m+1].val)/3|0,p=_[m].pos;p<_[m+1].pos;p++)x[p]=x[p]>w?0:1;return{line:x,threshold:w}},n.debug={printFrequency:function(l,u){var c,d=u.getContext("2d");for(u.width=l.length,u.height=256,d.beginPath(),d.strokeStyle="blue",c=0;c<l.length;c++)d.moveTo(c,255),d.lineTo(c,255-l[c]);d.stroke(),d.closePath()},printPattern:function(l,u){var c,d=u.getContext("2d");for(u.width=l.length,d.fillColor="black",c=0;c<l.length;c++)l[c]===1&&d.fillRect(c,0,1,100)}},a.a=n},function(r,a,i){function n(g){return new Promise(function(x,b){function _(){w>0?g.videoWidth>10&&g.videoHeight>10?x():window.setTimeout(_,500):b("Unable to play video stream. Is webcam working?"),w--}var w=10;_()})}function s(g,x){return i.i(v.a)(x).then(function(b){return new Promise(function(_){f=b,g.setAttribute("autoplay",!0),g.setAttribute("muted",!0),g.setAttribute("playsinline",!0),g.srcObject=b,g.addEventListener("loadedmetadata",function(){g.play(),_()})})}).then(n.bind(null,g))}function l(g){var x=p()(g,["width","height","facingMode","aspectRatio","deviceId"]);return g.minAspectRatio!==void 0&&g.minAspectRatio>0&&(x.aspectRatio=g.minAspectRatio,console.log("WARNING: Constraint 'minAspectRatio' is deprecated; Use 'aspectRatio' instead")),g.facing!==void 0&&(x.facingMode=g.facing,console.log("WARNING: Constraint 'facing' is deprecated. Use 'facingMode' instead'")),x}function u(g){var x={audio:!1,video:l(g)};return x.video.deviceId&&x.video.facingMode&&delete x.video.facingMode,Promise.resolve(x)}function c(){return i.i(v.b)().then(function(g){return g.filter(function(x){return x.kind==="videoinput"})})}function d(){if(f){var g=f.getVideoTracks();if(g&&g.length)return g[0]}}var f,m=i(162),p=i.n(m),v=i(52);a.a={request:function(g,x){return u(x).then(s.bind(null,g))},release:function(){var g=f&&f.getVideoTracks();g&&g.length&&g[0].stop(),f=null},enumerateVideoDevices:c,getActiveStreamLabel:function(){var g=d();return g?g.label:""},getActiveTrack:d}},function(r,a,i){function n(g){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v;return/^blob\:/i.test(g)?l(g).then(s).then(function(b){return u(b,x)}):Promise.resolve(null)}function s(g){return new Promise(function(x){var b=new FileReader;b.onload=function(_){return x(_.target.result)},b.readAsArrayBuffer(g)})}function l(g){return new Promise(function(x,b){var _=new XMLHttpRequest;_.open("GET",g,!0),_.responseType="blob",_.onreadystatechange=function(){_.readyState!==XMLHttpRequest.DONE||_.status!==200&&_.status!==0||x(this.response)},_.onerror=b,_.send()})}function u(g){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v,b=new DataView(g),_=g.byteLength,w=x.reduce(function(D,M){var O=Object.keys(p).filter(function(T){return p[T]===M})[0];return O&&(D[O]=M),D},{}),S=2;if(b.getUint8(0)!==255||b.getUint8(1)!==216)return!1;for(;S<_;){if(b.getUint8(S)!==255)return!1;if(b.getUint8(S+1)===225)return c(b,S+4,w);S+=2+b.getUint16(S+2)}}function c(g,x,b){if(m(g,x,4)!=="Exif")return!1;var _=x+6,w=void 0;if(g.getUint16(_)===18761)w=!1;else{if(g.getUint16(_)!==19789)return!1;w=!0}if(g.getUint16(_+2,!w)!==42)return!1;var S=g.getUint32(_+4,!w);return!(S<8)&&d(g,_,_+S,b,w)}function d(g,x,b,_,w){for(var S=g.getUint16(b,!w),D={},M=0;M<S;M++){var O=b+12*M+2,T=_[g.getUint16(O,!w)];T&&(D[T]=f(g,O,x,b,w))}return D}function f(g,x,b,_,w){var S=g.getUint16(x+2,!w),D=g.getUint32(x+4,!w);switch(S){case 3:if(D===1)return g.getUint16(x+8,!w)}}function m(g,x,b){for(var _="",w=x;w<x+b;w++)_+=String.fromCharCode(g.getUint8(w));return _}a.a=n;var p={274:"orientation"},v=Object.keys(p).map(function(g){return p[g]})},function(r,a,i){function n(c,d){c.width!==d.x&&(c.width=d.x),c.height!==d.y&&(c.height=d.y)}var s=i(19),l=Math.PI/180,u={};u.create=function(c,d){var f,m={},p=c.getConfig(),v=(i.i(s.b)(c.getRealWidth(),c.getRealHeight()),c.getCanvasSize()),g=i.i(s.b)(c.getWidth(),c.getHeight()),x=c.getTopRight(),b=x.x,_=x.y,w=null,S=null;return f=d||document.createElement("canvas"),f.width=v.x,f.height=v.y,w=f.getContext("2d"),S=new Uint8Array(g.x*g.y),m.attachData=function(D){S=D},m.getData=function(){return S},m.grab=function(){var D,M=p.halfSample,O=c.getFrame(),T=O,I=0;if(T){if(n(f,v),p.type==="ImageStream"&&(T=O.img,O.tags&&O.tags.orientation))switch(O.tags.orientation){case 6:I=90*l;break;case 8:I=-90*l}return I!==0?(w.translate(v.x/2,v.y/2),w.rotate(I),w.drawImage(T,-v.y/2,-v.x/2,v.y,v.x),w.rotate(-I),w.translate(-v.x/2,-v.y/2)):w.drawImage(T,0,0,v.x,v.y),D=w.getImageData(b,_,g.x,g.y).data,M?i.i(s.c)(D,g,S):i.i(s.d)(D,S,p),!0}return!1},m.getSize=function(){return g},m},a.a=u},function(r,a,i){function n(u,c){u.onload=function(){c.loaded(this)}}var s=i(60),l={};l.load=function(u,c,d,f,m){var p,v,g,x=new Array(f),b=new Array(x.length);if(m===!1)x[0]=u;else for(p=0;p<x.length;p++)g=d+p,x[p]=u+"image-"+("00"+g).slice(-3)+".jpg";for(b.notLoaded=[],b.addImage=function(_){b.notLoaded.push(_)},b.loaded=function(_){for(var w=b.notLoaded,S=0;S<w.length;S++)if(w[S]===_){w.splice(S,1);for(var D=0;D<x.length;D++){var M=x[D].substr(x[D].lastIndexOf("/"));if(_.src.lastIndexOf(M)!==-1){b[D]={img:_};break}}break}w.length===0&&(m===!1?i.i(s.a)(u,["orientation"]).then(function(O){b[0].tags=O,c(b)}).catch(function(O){console.log(O),c(b)}):c(b))},p=0;p<x.length;p++)v=new Image,b.addImage(v),n(v,b),v.src=x[p]},a.a=l},function(r,a,i){var n=i(62),s={};s.createVideoStream=function(l){function u(){var b=l.videoWidth,_=l.videoHeight;c=m.size?b/_>1?m.size:Math.floor(b/_*m.size):b,d=m.size?b/_>1?Math.floor(_/b*m.size):m.size:_,x.x=c,x.y=d}var c,d,f={},m=null,p=["canrecord","ended"],v={},g={x:0,y:0},x={x:0,y:0};return f.getRealWidth=function(){return l.videoWidth},f.getRealHeight=function(){return l.videoHeight},f.getWidth=function(){return c},f.getHeight=function(){return d},f.setWidth=function(b){c=b},f.setHeight=function(b){d=b},f.setInputStream=function(b){m=b,l.src=b.src!==void 0?b.src:""},f.ended=function(){return l.ended},f.getConfig=function(){return m},f.setAttribute=function(b,_){l.setAttribute(b,_)},f.pause=function(){l.pause()},f.play=function(){l.play()},f.setCurrentTime=function(b){m.type!=="LiveStream"&&(l.currentTime=b)},f.addEventListener=function(b,_,w){p.indexOf(b)!==-1?(v[b]||(v[b]=[]),v[b].push(_)):l.addEventListener(b,_,w)},f.clearEventHandlers=function(){p.forEach(function(b){var _=v[b];_&&_.length>0&&_.forEach(function(w){l.removeEventListener(b,w)})})},f.trigger=function(b,_){var w,S=v[b];if(b==="canrecord"&&u(),S&&S.length>0)for(w=0;w<S.length;w++)S[w].apply(f,_)},f.setTopRight=function(b){g.x=b.x,g.y=b.y},f.getTopRight=function(){return g},f.setCanvasSize=function(b){x.x=b.x,x.y=b.y},f.getCanvasSize=function(){return x},f.getFrame=function(){return l},f},s.createLiveStream=function(l){l.setAttribute("autoplay",!0);var u=s.createVideoStream(l);return u.ended=function(){return!1},u},s.createImageStream=function(){function l(){b=!1,n.a.load(D,function(P){if(_=P,P[0].tags&&P[0].tags.orientation)switch(P[0].tags.orientation){case 6:case 8:p=P[0].img.height,v=P[0].img.width;break;default:p=P[0].img.width,v=P[0].img.height}else p=P[0].img.width,v=P[0].img.height;c=m.size?p/v>1?m.size:Math.floor(p/v*m.size):p,d=m.size?p/v>1?Math.floor(v/p*m.size):m.size:v,N.x=c,N.y=d,b=!0,g=0,setTimeout(function(){u("canrecord",[])},0)},S,w,m.sequence)}function u(P,F){var L,z=T[P];if(z&&z.length>0)for(L=0;L<z.length;L++)z[L].apply(f,F)}var c,d,f={},m=null,p=0,v=0,g=0,x=!0,b=!1,_=null,w=0,S=1,D=null,M=!1,O=["canrecord","ended"],T={},I={x:0,y:0},N={x:0,y:0};return f.trigger=u,f.getWidth=function(){return c},f.getHeight=function(){return d},f.setWidth=function(P){c=P},f.setHeight=function(P){d=P},f.getRealWidth=function(){return p},f.getRealHeight=function(){return v},f.setInputStream=function(P){m=P,P.sequence===!1?(D=P.src,w=1):(D=P.src,w=P.length),l()},f.ended=function(){return M},f.setAttribute=function(){},f.getConfig=function(){return m},f.pause=function(){x=!0},f.play=function(){x=!1},f.setCurrentTime=function(P){g=P},f.addEventListener=function(P,F){O.indexOf(P)!==-1&&(T[P]||(T[P]=[]),T[P].push(F))},f.setTopRight=function(P){I.x=P.x,I.y=P.y},f.getTopRight=function(){return I},f.setCanvasSize=function(P){N.x=P.x,N.y=P.y},f.getCanvasSize=function(){return N},f.getFrame=function(){var P;return b?(x||(P=_[g],g<w-1?g++:setTimeout(function(){M=!0,u("ended",[])},0)),P):null},f},a.a=s},function(r,a,i){(function(n){function s(){var ve;_=b.halfSample?new L.a({x:P.size.x/2|0,y:P.size.y/2|0}):P,N=i.i(z.e)(b.patchSize,_.size),_e.x=_.size.x/N.x|0,_e.y=_.size.y/N.y|0,I=new L.a(_.size,void 0,Uint8Array,!1),D=new L.a(N,void 0,Array,!0),ve=new ArrayBuffer(65536),S=new L.a(N,new Uint8Array(ve,0,N.x*N.y)),w=new L.a(N,new Uint8Array(ve,N.x*N.y*3,N.x*N.y),void 0,!0),F=i.i(de.a)(typeof window!="undefined"?window:typeof self!="undefined"?self:n,{size:N.x},ve),T=new L.a({x:_.size.x/S.size.x|0,y:_.size.y/S.size.y|0},void 0,Array,!0),M=new L.a(T.size,void 0,void 0,!0),O=new L.a(T.size,void 0,Int32Array,!0)}function l(){b.useWorker||typeof document=="undefined"||(re.dom.binary=document.createElement("canvas"),re.dom.binary.className="binaryBuffer",re.ctx.binary=re.dom.binary.getContext("2d"),re.dom.binary.width=I.size.x,re.dom.binary.height=I.size.y)}function u(ve){var ke,Ie,he,De,Te,J,q,ne=I.size.x,U=I.size.y,Z=-I.size.x,Ce=-I.size.y;for(ke=0,Ie=0;Ie<ve.length;Ie++)De=ve[Ie],ke+=De.rad;for(ke/=ve.length,ke=(180*ke/Math.PI+90)%180-90,ke<0&&(ke+=180),ke=(180-ke)*Math.PI/180,Te=W.copy(W.create(),[Math.cos(ke),Math.sin(ke),-Math.sin(ke),Math.cos(ke)]),Ie=0;Ie<ve.length;Ie++)for(De=ve[Ie],he=0;he<4;he++)ye.transformMat2(De.box[he],De.box[he],Te);for(Ie=0;Ie<ve.length;Ie++)for(De=ve[Ie],he=0;he<4;he++)De.box[he][0]<ne&&(ne=De.box[he][0]),De.box[he][0]>Z&&(Z=De.box[he][0]),De.box[he][1]<U&&(U=De.box[he][1]),De.box[he][1]>Ce&&(Ce=De.box[he][1]);for(J=[[ne,U],[Z,U],[Z,Ce],[ne,Ce]],q=b.halfSample?2:1,Te=W.invert(Te,Te),he=0;he<4;he++)ye.transformMat2(J[he],J[he],Te);for(he=0;he<4;he++)ye.scale(J[he],J[he],q);return J}function c(){i.i(z.f)(_,I),I.zeroBorder()}function d(){var ve,ke,Ie,he,De,Te,J,q=[];for(ve=0;ve<_e.x;ve++)for(ke=0;ke<_e.y;ke++)Ie=S.size.x*ve,he=S.size.y*ke,v(Ie,he),w.zeroBorder(),H.a.init(D.data,0),Te=X.a.create(w,D),J=Te.rasterize(0),De=D.moments(J.count),q=q.concat(g(De,[ve,ke],Ie,he));return q}function f(ve){var ke,Ie,he=[];for(ke=0;ke<ve;ke++)he.push(0);for(Ie=O.data.length;Ie--;)O.data[Ie]>0&&he[O.data[Ie]-1]++;return he=he.map(function(De,Te){return{val:De,label:Te+1}}),he.sort(function(De,Te){return Te.val-De.val}),he.filter(function(De){return De.val>=5})}function m(ve,ke){var Ie,he,De,Te,J=[],q=[];for(Ie=0;Ie<ve.length;Ie++){for(he=O.data.length,J.length=0;he--;)O.data[he]===ve[Ie].label&&(De=T.data[he],J.push(De));Te=u(J),Te&&q.push(Te)}return q}function p(ve){var ke=i.i(z.g)(ve,.9),Ie=i.i(z.h)(ke,1,function(J){return J.getPoints().length}),he=[],De=[];if(Ie.length===1){he=Ie[0].item.getPoints();for(var Te=0;Te<he.length;Te++)De.push(he[Te].point)}return De}function v(ve,ke){I.subImageAsCopy(S,i.i(z.b)(ve,ke)),F.skeletonize()}function g(ve,ke,Ie,he){var De,Te,J,q,ne=[],U=[],Z=Math.ceil(N.x/3);if(ve.length>=2){for(De=0;De<ve.length;De++)ve[De].m00>Z&&ne.push(ve[De]);if(ne.length>=2){for(J=p(ne),Te=0,De=0;De<J.length;De++)Te+=J[De].rad;J.length>1&&J.length>=ne.length/4*3&&J.length>ve.length/4&&(Te/=J.length,q={index:ke[1]*_e.x+ke[0],pos:{x:Ie,y:he},box:[ye.clone([Ie,he]),ye.clone([Ie+S.size.x,he]),ye.clone([Ie+S.size.x,he+S.size.y]),ye.clone([Ie,he+S.size.y])],moments:J,rad:Te,vec:ye.clone([Math.cos(Te),Math.sin(Te)])},U.push(q))}}return U}function x(ve){function ke(){var ne;for(ne=0;ne<O.data.length;ne++)if(O.data[ne]===0&&M.data[ne]===1)return ne;return O.length}function Ie(ne){var U,Z,Ce,Q,V,R={x:ne%O.size.x,y:ne/O.size.x|0};if(ne<O.data.length)for(Ce=T.data[ne],O.data[ne]=Te,V=0;V<Y.a.searchDirections.length;V++)Z=R.y+Y.a.searchDirections[V][0],U=R.x+Y.a.searchDirections[V][1],Q=Z*O.size.x+U,M.data[Q]!==0?O.data[Q]===0&&Math.abs(ye.dot(T.data[Q].vec,Ce.vec))>J&&Ie(Q):O.data[Q]=Number.MAX_VALUE}var he,De,Te=0,J=.95,q=0;for(H.a.init(M.data,0),H.a.init(O.data,0),H.a.init(T.data,null),he=0;he<ve.length;he++)De=ve[he],T.data[De.index]=De,M.data[De.index]=1;for(M.zeroBorder();(q=ke())<O.data.length;)Te++,Ie(q);return Te}var b,_,w,S,D,M,O,T,I,N,P,F,L=i(20),z=i(19),H=i(3),X=(i(9),i(65)),Y=i(30),de=i(66),ye={clone:i(7),dot:i(32),scale:i(81),transformMat2:i(82)},W={copy:i(78),create:i(79),invert:i(80)},re={ctx:{binary:null},dom:{binary:null}},_e={x:0,y:0};a.a={init:function(ve,ke){b=ke,P=ve,s(),l()},locate:function(){var ve,ke;if(b.halfSample&&i.i(z.i)(P,_),c(),ve=d(),ve.length<_e.x*_e.y*.05)return null;var Ie=x(ve);return Ie<1?null:(ke=f(Ie),ke.length===0?null:m(ke))},checkImageConstraints:function(ve,ke){var Ie,he,De,Te=ve.getWidth(),J=ve.getHeight(),q=ke.halfSample?.5:1;if(ve.getConfig().area&&(De=i.i(z.j)(Te,J,ve.getConfig().area),ve.setTopRight({x:De.sx,y:De.sy}),ve.setCanvasSize({x:Te,y:J}),Te=De.sw,J=De.sh),he={x:Math.floor(Te*q),y:Math.floor(J*q)},Ie=i.i(z.e)(ke.patchSize,he),ve.setWidth(Math.floor(Math.floor(he.x/Ie.x)*(1/q)*Ie.x)),ve.setHeight(Math.floor(Math.floor(he.y/Ie.y)*(1/q)*Ie.y)),ve.getWidth()%Ie.x==0&&ve.getHeight()%Ie.y==0)return!0;throw new Error("Image dimensions do not comply with the current settings: Width ("+Te+" )and height ("+J+") must a multiple of "+Ie.x)}}}).call(a,i(47))},function(r,a,i){var n=i(30),s={createContour2D:function(){return{dir:null,index:null,firstVertex:null,insideContours:null,nextpeer:null,prevpeer:null}},CONTOUR_DIR:{CW_DIR:0,CCW_DIR:1,UNKNOWN_DIR:2},DIR:{OUTSIDE_EDGE:-32767,INSIDE_EDGE:-32766},create:function(l,u){var c=l.data,d=u.data,f=l.size.x,m=l.size.y,p=n.a.create(l,u);return{rasterize:function(v){var g,x,b,_,w,S,D,M,O,T,I,N,P=[],F=0;for(N=0;N<400;N++)P[N]=0;for(P[0]=c[0],O=null,S=1;S<m-1;S++)for(_=0,x=P[0],w=1;w<f-1;w++)if(I=S*f+w,d[I]===0)if((g=c[I])!==x){if(_===0)b=F+1,P[b]=g,x=g,(D=p.contourTracing(S,w,b,g,s.DIR.OUTSIDE_EDGE))!==null&&(F++,_=b,M=s.createContour2D(),M.dir=s.CONTOUR_DIR.CW_DIR,M.index=_,M.firstVertex=D,M.nextpeer=O,M.insideContours=null,O!==null&&(O.prevpeer=M),O=M);else if((D=p.contourTracing(S,w,s.DIR.INSIDE_EDGE,g,_))!==null){for(M=s.createContour2D(),M.firstVertex=D,M.insideContours=null,M.dir=v===0?s.CONTOUR_DIR.CCW_DIR:s.CONTOUR_DIR.CW_DIR,M.index=v,T=O;T!==null&&T.index!==_;)T=T.nextpeer;T!==null&&(M.nextpeer=T.insideContours,T.insideContours!==null&&(T.insideContours.prevpeer=M),T.insideContours=M)}}else d[I]=_;else d[I]===s.DIR.OUTSIDE_EDGE||d[I]===s.DIR.INSIDE_EDGE?(_=0,x=d[I]===s.DIR.INSIDE_EDGE?c[I]:P[0]):(_=d[I],x=P[_]);for(T=O;T!==null;)T.index=v,T=T.nextpeer;return{cc:O,count:F}},debug:{drawContour:function(v,g){var x,b,_,w=v.getContext("2d"),S=g;for(w.strokeStyle="red",w.fillStyle="red",w.lineWidth=1,x=S!==null?S.insideContours:null;S!==null;){switch(x!==null?(b=x,x=x.nextpeer):(b=S,S=S.nextpeer,x=S!==null?S.insideContours:null),b.dir){case s.CONTOUR_DIR.CW_DIR:w.strokeStyle="red";break;case s.CONTOUR_DIR.CCW_DIR:w.strokeStyle="blue";break;case s.CONTOUR_DIR.UNKNOWN_DIR:w.strokeStyle="green"}_=b.firstVertex,w.beginPath(),w.moveTo(_.x,_.y);do _=_.next,w.lineTo(_.x,_.y);while(_!==b.firstVertex);w.stroke()}}}}}};a.a=s},function(r,a,i){function n(s,l,u){var c=new s.Uint8Array(u),d=l.size|0,f=s.Math.imul;function m(D,M){D=D|0,M=M|0;var O=0,T=0,I=0,N=0,P=0,F=0,L=0,z=0;for(O=1;(O|0)<(d-1|0);O=O+1|0)for(z=z+d|0,T=1;(T|0)<(d-1|0);T=T+1|0)N=z-d|0,P=z+d|0,F=T-1|0,L=T+1|0,I=(c[D+N+F|0]|0)+(c[D+N+L|0]|0)+(c[D+z+T|0]|0)+(c[D+P+F|0]|0)+(c[D+P+L|0]|0)|0,(I|0)==5?c[M+z+T|0]=1:c[M+z+T|0]=0}function p(D,M,O){D=D|0,M=M|0,O=O|0;var T=0;for(T=f(d,d)|0;(T|0)>0;)T=T-1|0,c[O+T|0]=(c[D+T|0]|0)-(c[M+T|0]|0)|0}function v(D,M,O){D=D|0,M=M|0,O=O|0;var T=0;for(T=f(d,d)|0;(T|0)>0;)T=T-1|0,c[O+T|0]=c[D+T|0]|0|(c[M+T|0]|0)|0}function g(D){D=D|0;var M=0,O=0;for(O=f(d,d)|0;(O|0)>0;)O=O-1|0,M=(M|0)+(c[D+O|0]|0)|0;return M|0}function x(D,M){D=D|0,M=M|0;var O=0;for(O=f(d,d)|0;(O|0)>0;)O=O-1|0,c[D+O|0]=M}function b(D,M){D=D|0,M=M|0;var O=0,T=0,I=0,N=0,P=0,F=0,L=0,z=0;for(O=1;(O|0)<(d-1|0);O=O+1|0)for(z=z+d|0,T=1;(T|0)<(d-1|0);T=T+1|0)N=z-d|0,P=z+d|0,F=T-1|0,L=T+1|0,I=(c[D+N+F|0]|0)+(c[D+N+L|0]|0)+(c[D+z+T|0]|0)+(c[D+P+F|0]|0)+(c[D+P+L|0]|0)|0,(I|0)>0?c[M+z+T|0]=1:c[M+z+T|0]=0}function _(D,M){D=D|0,M=M|0;var O=0;for(O=f(d,d)|0;(O|0)>0;)O=O-1|0,c[M+O|0]=c[D+O|0]|0}function w(D){D=D|0;var M=0,O=0;for(M=0;(M|0)<(d-1|0);M=M+1|0)c[D+M|0]=0,c[D+O|0]=0,O=O+d-1|0,c[D+O|0]=0,O=O+1|0;for(M=0;(M|0)<(d|0);M=M+1|0)c[D+O|0]=0,O=O+1|0}function S(){var D=0,M=0,O=0,T=0,I=0,N=0;M=f(d,d)|0,O=M+M|0,T=O+M|0,x(T,0),w(D);do m(D,M),b(M,O),p(D,O,O),v(T,O,T),_(M,D),I=g(D)|0,N=(I|0)==0|0;while(!N)}return{skeletonize:S}}a.a=n},function(r,a,i){function n(f){s.a.call(this,f),this.barSpaceRatio=[1,1]}var s=i(1),l=1,u=3,c={START_PATTERN:{value:[u,l,u,l,l,l]},STOP_PATTERN:{value:[u,l,l,l,u]},CODE_PATTERN:{value:[[l,l,u,u,l],[u,l,l,l,u],[l,u,l,l,u],[u,u,l,l,l],[l,l,u,l,u],[u,l,u,l,l],[l,u,u,l,l],[l,l,l,u,u],[u,l,l,u,l],[l,u,l,u,l]]},SINGLE_CODE_ERROR:{value:.78,writable:!0},AVG_CODE_ERROR:{value:.3,writable:!0},FORMAT:{value:"2of5"}},d=c.START_PATTERN.value.reduce(function(f,m){return f+m},0);n.prototype=Object.create(s.a.prototype,c),n.prototype.constructor=n,n.prototype._findPattern=function(f,m,p,v){var g,x,b,_,w=[],S=this,D=0,M={error:Number.MAX_VALUE,code:-1,start:0,end:0},O=S.AVG_CODE_ERROR;for(p=p||!1,v=v||!1,m||(m=S._nextSet(S._row)),g=0;g<f.length;g++)w[g]=0;for(g=m;g<S._row.length;g++)if(S._row[g]^p)w[D]++;else{if(D===w.length-1){for(_=0,b=0;b<w.length;b++)_+=w[b];if((x=S._matchPattern(w,f))<O)return M.error=x,M.start=g-_,M.end=g,M;if(!v)return null;for(b=0;b<w.length-2;b++)w[b]=w[b+2];w[w.length-2]=0,w[w.length-1]=0,D--}else D++;w[D]=1,p=!p}return null},n.prototype._findStart=function(){for(var f,m,p=this,v=p._nextSet(p._row),g=1;!m;){if(!(m=p._findPattern(p.START_PATTERN,v,!1,!0)))return null;if(g=Math.floor((m.end-m.start)/d),(f=m.start-5*g)>=0&&p._matchRange(f,m.start,0))return m;v=m.end,m=null}},n.prototype._verifyTrailingWhitespace=function(f){var m,p=this;return m=f.end+(f.end-f.start)/2,m<p._row.length&&p._matchRange(f.end,m,0)?f:null},n.prototype._findEnd=function(){var f,m,p,v=this;return v._row.reverse(),p=v._nextSet(v._row),f=v._findPattern(v.STOP_PATTERN,p,!1,!0),v._row.reverse(),f===null?null:(m=f.start,f.start=v._row.length-f.end,f.end=v._row.length-m,f!==null?v._verifyTrailingWhitespace(f):null)},n.prototype._decodeCode=function(f){var m,p,v,g=this,x=0,b=g.AVG_CODE_ERROR,_={error:Number.MAX_VALUE,code:-1,start:0,end:0};for(m=0;m<f.length;m++)x+=f[m];for(v=0;v<g.CODE_PATTERN.length;v++)(p=g._matchPattern(f,g.CODE_PATTERN[v]))<_.error&&(_.code=v,_.error=p);if(_.error<b)return _},n.prototype._decodePayload=function(f,m,p){for(var v,g,x=this,b=0,_=f.length,w=[0,0,0,0,0];b<_;){for(v=0;v<5;v++)w[v]=f[b]*this.barSpaceRatio[0],b+=2;if(!(g=x._decodeCode(w)))return null;m.push(g.code+""),p.push(g)}return g},n.prototype._verifyCounterLength=function(f){return f.length%10==0},n.prototype._decode=function(){var f,m,p,v=this,g=[],x=[];return(f=v._findStart())?(x.push(f),(m=v._findEnd())?(p=v._fillCounters(f.end,m.start,!1),v._verifyCounterLength(p)&&v._decodePayload(p,g,x)?g.length<5?null:(x.push(m),{code:g.join(""),start:f.start,end:m.end,startInfo:f,decodedCodes:x}):null):null):null},a.a=n},function(r,a,i){function n(){s.a.call(this),this._counters=[]}var s=i(1),l={ALPHABETH_STRING:{value:"0123456789-$:/.+ABCD"},ALPHABET:{value:[48,49,50,51,52,53,54,55,56,57,45,36,58,47,46,43,65,66,67,68]},CHARACTER_ENCODINGS:{value:[3,6,9,96,18,66,33,36,48,72,12,24,69,81,84,21,26,41,11,14]},START_END:{value:[26,41,11,14]},MIN_ENCODED_CHARS:{value:4},MAX_ACCEPTABLE:{value:2},PADDING:{value:1.5},FORMAT:{value:"codabar",writeable:!1}};n.prototype=Object.create(s.a.prototype,l),n.prototype.constructor=n,n.prototype._decode=function(){var u,c,d,f,m,p=this,v=[];if(this._counters=p._fillCounters(),!(u=p._findStart()))return null;f=u.startCounter;do{if((d=p._toPattern(f))<0||(c=p._patternToChar(d))<0)return null;if(v.push(c),f+=8,v.length>1&&p._isStartEnd(d))break}while(f<p._counters.length);return v.length-2<p.MIN_ENCODED_CHARS||!p._isStartEnd(d)?null:p._verifyWhitespace(u.startCounter,f-8)&&p._validateResult(v,u.startCounter)?(f=f>p._counters.length?p._counters.length:f,m=u.start+p._sumCounters(u.startCounter,f-8),{code:v.join(""),start:u.start,end:m,startInfo:u,decodedCodes:v}):null},n.prototype._verifyWhitespace=function(u,c){return(u-1<=0||this._counters[u-1]>=this._calculatePatternLength(u)/2)&&(c+8>=this._counters.length||this._counters[c+7]>=this._calculatePatternLength(c)/2)},n.prototype._calculatePatternLength=function(u){var c,d=0;for(c=u;c<u+7;c++)d+=this._counters[c];return d},n.prototype._thresholdResultPattern=function(u,c){var d,f,m,p,v,g=this,x={space:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}},bar:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}}},b=c;for(m=0;m<u.length;m++){for(v=g._charToPattern(u[m]),p=6;p>=0;p--)d=(1&p)==2?x.bar:x.space,f=(1&v)==1?d.wide:d.narrow,f.size+=g._counters[b+p],f.counts++,v>>=1;b+=8}return["space","bar"].forEach(function(_){var w=x[_];w.wide.min=Math.floor((w.narrow.size/w.narrow.counts+w.wide.size/w.wide.counts)/2),w.narrow.max=Math.ceil(w.wide.min),w.wide.max=Math.ceil((w.wide.size*g.MAX_ACCEPTABLE+g.PADDING)/w.wide.counts)}),x},n.prototype._charToPattern=function(u){var c,d=this,f=u.charCodeAt(0);for(c=0;c<d.ALPHABET.length;c++)if(d.ALPHABET[c]===f)return d.CHARACTER_ENCODINGS[c];return 0},n.prototype._validateResult=function(u,c){var d,f,m,p,v,g,x=this,b=x._thresholdResultPattern(u,c),_=c;for(d=0;d<u.length;d++){for(g=x._charToPattern(u[d]),f=6;f>=0;f--){if(m=(1&f)==0?b.bar:b.space,p=(1&g)==1?m.wide:m.narrow,(v=x._counters[_+f])<p.min||v>p.max)return!1;g>>=1}_+=8}return!0},n.prototype._patternToChar=function(u){var c,d=this;for(c=0;c<d.CHARACTER_ENCODINGS.length;c++)if(d.CHARACTER_ENCODINGS[c]===u)return String.fromCharCode(d.ALPHABET[c]);return-1},n.prototype._computeAlternatingThreshold=function(u,c){var d,f,m=Number.MAX_VALUE,p=0;for(d=u;d<c;d+=2)f=this._counters[d],f>p&&(p=f),f<m&&(m=f);return(m+p)/2|0},n.prototype._toPattern=function(u){var c,d,f,m,p=7,v=u+p,g=1<<p-1,x=0;if(v>this._counters.length)return-1;for(c=this._computeAlternatingThreshold(u,v),d=this._computeAlternatingThreshold(u+1,v),f=0;f<p;f++)m=(1&f)==0?c:d,this._counters[u+f]>m&&(x|=g),g>>=1;return x},n.prototype._isStartEnd=function(u){var c;for(c=0;c<this.START_END.length;c++)if(this.START_END[c]===u)return!0;return!1},n.prototype._sumCounters=function(u,c){var d,f=0;for(d=u;d<c;d++)f+=this._counters[d];return f},n.prototype._findStart=function(){var u,c,d,f=this,m=f._nextUnset(f._row);for(u=1;u<this._counters.length;u++)if((c=f._toPattern(u))!==-1&&f._isStartEnd(c))return m+=f._sumCounters(0,u),d=m+f._sumCounters(u,u+8),{start:m,end:d,startCounter:u,endCounter:u+8}},a.a=n},function(r,a,i){function n(){l.a.call(this)}function s(c,d,f){for(var m=f.length,p=0,v=0;m--;)v+=c[f[m]],p+=d[f[m]];return v/p}var l=i(1),u={CODE_SHIFT:{value:98},CODE_C:{value:99},CODE_B:{value:100},CODE_A:{value:101},START_CODE_A:{value:103},START_CODE_B:{value:104},START_CODE_C:{value:105},STOP_CODE:{value:106},CODE_PATTERN:{value:[[2,1,2,2,2,2],[2,2,2,1,2,2],[2,2,2,2,2,1],[1,2,1,2,2,3],[1,2,1,3,2,2],[1,3,1,2,2,2],[1,2,2,2,1,3],[1,2,2,3,1,2],[1,3,2,2,1,2],[2,2,1,2,1,3],[2,2,1,3,1,2],[2,3,1,2,1,2],[1,1,2,2,3,2],[1,2,2,1,3,2],[1,2,2,2,3,1],[1,1,3,2,2,2],[1,2,3,1,2,2],[1,2,3,2,2,1],[2,2,3,2,1,1],[2,2,1,1,3,2],[2,2,1,2,3,1],[2,1,3,2,1,2],[2,2,3,1,1,2],[3,1,2,1,3,1],[3,1,1,2,2,2],[3,2,1,1,2,2],[3,2,1,2,2,1],[3,1,2,2,1,2],[3,2,2,1,1,2],[3,2,2,2,1,1],[2,1,2,1,2,3],[2,1,2,3,2,1],[2,3,2,1,2,1],[1,1,1,3,2,3],[1,3,1,1,2,3],[1,3,1,3,2,1],[1,1,2,3,1,3],[1,3,2,1,1,3],[1,3,2,3,1,1],[2,1,1,3,1,3],[2,3,1,1,1,3],[2,3,1,3,1,1],[1,1,2,1,3,3],[1,1,2,3,3,1],[1,3,2,1,3,1],[1,1,3,1,2,3],[1,1,3,3,2,1],[1,3,3,1,2,1],[3,1,3,1,2,1],[2,1,1,3,3,1],[2,3,1,1,3,1],[2,1,3,1,1,3],[2,1,3,3,1,1],[2,1,3,1,3,1],[3,1,1,1,2,3],[3,1,1,3,2,1],[3,3,1,1,2,1],[3,1,2,1,1,3],[3,1,2,3,1,1],[3,3,2,1,1,1],[3,1,4,1,1,1],[2,2,1,4,1,1],[4,3,1,1,1,1],[1,1,1,2,2,4],[1,1,1,4,2,2],[1,2,1,1,2,4],[1,2,1,4,2,1],[1,4,1,1,2,2],[1,4,1,2,2,1],[1,1,2,2,1,4],[1,1,2,4,1,2],[1,2,2,1,1,4],[1,2,2,4,1,1],[1,4,2,1,1,2],[1,4,2,2,1,1],[2,4,1,2,1,1],[2,2,1,1,1,4],[4,1,3,1,1,1],[2,4,1,1,1,2],[1,3,4,1,1,1],[1,1,1,2,4,2],[1,2,1,1,4,2],[1,2,1,2,4,1],[1,1,4,2,1,2],[1,2,4,1,1,2],[1,2,4,2,1,1],[4,1,1,2,1,2],[4,2,1,1,1,2],[4,2,1,2,1,1],[2,1,2,1,4,1],[2,1,4,1,2,1],[4,1,2,1,2,1],[1,1,1,1,4,3],[1,1,1,3,4,1],[1,3,1,1,4,1],[1,1,4,1,1,3],[1,1,4,3,1,1],[4,1,1,1,1,3],[4,1,1,3,1,1],[1,1,3,1,4,1],[1,1,4,1,3,1],[3,1,1,1,4,1],[4,1,1,1,3,1],[2,1,1,4,1,2],[2,1,1,2,1,4],[2,1,1,2,3,2],[2,3,3,1,1,1,2]]},SINGLE_CODE_ERROR:{value:.64},AVG_CODE_ERROR:{value:.3},FORMAT:{value:"code_128",writeable:!1},MODULE_INDICES:{value:{bar:[0,2,4],space:[1,3,5]}}};n.prototype=Object.create(l.a.prototype,u),n.prototype.constructor=n,n.prototype._decodeCode=function(c,d){var f,m,p,v=[0,0,0,0,0,0],g=this,x=c,b=!g._row[x],_=0,w={error:Number.MAX_VALUE,code:-1,start:c,end:c,correction:{bar:1,space:1}};for(f=x;f<g._row.length;f++)if(g._row[f]^b)v[_]++;else{if(_===v.length-1){for(d&&g._correct(v,d),m=0;m<g.CODE_PATTERN.length;m++)(p=g._matchPattern(v,g.CODE_PATTERN[m]))<w.error&&(w.code=m,w.error=p);return w.end=f,w.code===-1||w.error>g.AVG_CODE_ERROR?null:(g.CODE_PATTERN[w.code]&&(w.correction.bar=s(g.CODE_PATTERN[w.code],v,this.MODULE_INDICES.bar),w.correction.space=s(g.CODE_PATTERN[w.code],v,this.MODULE_INDICES.space)),w)}_++,v[_]=1,b=!b}return null},n.prototype._correct=function(c,d){this._correctBars(c,d.bar,this.MODULE_INDICES.bar),this._correctBars(c,d.space,this.MODULE_INDICES.space)},n.prototype._findStart=function(){var c,d,f,m,p,v=[0,0,0,0,0,0],g=this,x=g._nextSet(g._row),b=!1,_=0,w={error:Number.MAX_VALUE,code:-1,start:0,end:0,correction:{bar:1,space:1}};for(c=x;c<g._row.length;c++)if(g._row[c]^b)v[_]++;else{if(_===v.length-1){for(p=0,m=0;m<v.length;m++)p+=v[m];for(d=g.START_CODE_A;d<=g.START_CODE_C;d++)(f=g._matchPattern(v,g.CODE_PATTERN[d]))<w.error&&(w.code=d,w.error=f);if(w.error<g.AVG_CODE_ERROR)return w.start=c-p,w.end=c,w.correction.bar=s(g.CODE_PATTERN[w.code],v,this.MODULE_INDICES.bar),w.correction.space=s(g.CODE_PATTERN[w.code],v,this.MODULE_INDICES.space),w;for(m=0;m<4;m++)v[m]=v[m+2];v[4]=0,v[5]=0,_--}else _++;v[_]=1,b=!b}return null},n.prototype._decode=function(){var c,d,f=this,m=f._findStart(),p=null,v=!1,g=[],x=0,b=0,_=[],w=[],S=!1,D=!0;if(m===null)return null;switch(p={code:m.code,start:m.start,end:m.end,correction:{bar:m.correction.bar,space:m.correction.space}},w.push(p),b=p.code,p.code){case f.START_CODE_A:c=f.CODE_A;break;case f.START_CODE_B:c=f.CODE_B;break;case f.START_CODE_C:c=f.CODE_C;break;default:return null}for(;!v;){if(d=S,S=!1,(p=f._decodeCode(p.end,p.correction))!==null)switch(p.code!==f.STOP_CODE&&(D=!0),p.code!==f.STOP_CODE&&(_.push(p.code),x++,b+=x*p.code),w.push(p),c){case f.CODE_A:if(p.code<64)g.push(String.fromCharCode(32+p.code));else if(p.code<96)g.push(String.fromCharCode(p.code-64));else switch(p.code!==f.STOP_CODE&&(D=!1),p.code){case f.CODE_SHIFT:S=!0,c=f.CODE_B;break;case f.CODE_B:c=f.CODE_B;break;case f.CODE_C:c=f.CODE_C;break;case f.STOP_CODE:v=!0}break;case f.CODE_B:if(p.code<96)g.push(String.fromCharCode(32+p.code));else switch(p.code!==f.STOP_CODE&&(D=!1),p.code){case f.CODE_SHIFT:S=!0,c=f.CODE_A;break;case f.CODE_A:c=f.CODE_A;break;case f.CODE_C:c=f.CODE_C;break;case f.STOP_CODE:v=!0}break;case f.CODE_C:if(p.code<100)g.push(p.code<10?"0"+p.code:p.code);else switch(p.code!==f.STOP_CODE&&(D=!1),p.code){case f.CODE_A:c=f.CODE_A;break;case f.CODE_B:c=f.CODE_B;break;case f.STOP_CODE:v=!0}}else v=!0;d&&(c=c===f.CODE_A?f.CODE_B:f.CODE_A)}return p===null?null:(p.end=f._nextUnset(f._row,p.end),f._verifyTrailingWhitespace(p)?(b-=x*_[_.length-1])%103!==_[_.length-1]?null:g.length?(D&&g.splice(g.length-1,1),{code:g.join(""),start:m.start,end:p.end,codeset:c,startInfo:m,decodedCodes:w,endInfo:p}):null:null)},l.a.prototype._verifyTrailingWhitespace=function(c){var d,f=this;return d=c.end+(c.end-c.start)/2,d<f._row.length&&f._matchRange(c.end,d,0)?c:null},a.a=n},function(r,a,i){function n(){s.a.call(this)}var s=i(31),l={IOQ:/[IOQ]/g,AZ09:/[A-Z0-9]{17}/};n.prototype=Object.create(s.a.prototype),n.prototype.constructor=n,n.prototype._decode=function(){var u=s.a.prototype._decode.apply(this);if(!u)return null;var c=u.code;return c?(c=c.replace(l.IOQ,""),c.match(l.AZ09)&&this._checkChecksum(c)?(u.code=c,u):null):null},n.prototype._checkChecksum=function(u){return!!u},a.a=n},function(r,a,i){function n(){s.a.call(this)}var s=i(1),l=i(3),u="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",c={ALPHABETH_STRING:{value:u},ALPHABET:{value:u.split("").map(function(d){return d.charCodeAt(0)})},CHARACTER_ENCODINGS:{value:[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350]},ASTERISK:{value:350},FORMAT:{value:"code_93",writeable:!1}};n.prototype=Object.create(s.a.prototype,c),n.prototype.constructor=n,n.prototype._decode=function(){var d,f,m,p,v=this,g=[0,0,0,0,0,0],x=[],b=v._findStart();if(!b)return null;p=v._nextSet(v._row,b.end);do{if(g=v._toCounters(p,g),(m=v._toPattern(g))<0||(d=v._patternToChar(m))<0)return null;x.push(d),f=p,p+=l.a.sum(g),p=v._nextSet(v._row,p)}while(d!=="*");return x.pop(),x.length&&v._verifyEnd(f,p,g)&&v._verifyChecksums(x)?(x=x.slice(0,x.length-2),(x=v._decodeExtended(x))===null?null:{code:x.join(""),start:b.start,end:p,startInfo:b,decodedCodes:x}):null},n.prototype._verifyEnd=function(d,f){return!(d===f||!this._row[f])},n.prototype._patternToChar=function(d){var f,m=this;for(f=0;f<m.CHARACTER_ENCODINGS.length;f++)if(m.CHARACTER_ENCODINGS[f]===d)return String.fromCharCode(m.ALPHABET[f]);return-1},n.prototype._toPattern=function(d){for(var f=d.length,m=0,p=0,v=0;v<f;v++)p+=d[v];for(var g=0;g<f;g++){var x=Math.round(9*d[g]/p);if(x<1||x>4)return-1;if((1&g)==0)for(var b=0;b<x;b++)m=m<<1|1;else m<<=x}return m},n.prototype._findStart=function(){var d,f,m,p=this,v=p._nextSet(p._row),g=v,x=[0,0,0,0,0,0],b=0,_=!1;for(d=v;d<p._row.length;d++)if(p._row[d]^_)x[b]++;else{if(b===x.length-1){if(p._toPattern(x)===p.ASTERISK&&(m=Math.floor(Math.max(0,g-(d-g)/4)),p._matchRange(m,g,0)))return{start:g,end:d};for(g+=x[0]+x[1],f=0;f<4;f++)x[f]=x[f+2];x[4]=0,x[5]=0,b--}else b++;x[b]=1,_=!_}return null},n.prototype._decodeExtended=function(d){for(var f=d.length,m=[],p=0;p<f;p++){var v=d[p];if(v>="a"&&v<="d"){if(p>f-2)return null;var g=d[++p],x=g.charCodeAt(0),b=void 0;switch(v){case"a":if(!(g>="A"&&g<="Z"))return null;b=String.fromCharCode(x-64);break;case"b":if(g>="A"&&g<="E")b=String.fromCharCode(x-38);else if(g>="F"&&g<="J")b=String.fromCharCode(x-11);else if(g>="K"&&g<="O")b=String.fromCharCode(x+16);else if(g>="P"&&g<="S")b=String.fromCharCode(x+43);else{if(!(g>="T"&&g<="Z"))return null;b=String.fromCharCode(127)}break;case"c":if(g>="A"&&g<="O")b=String.fromCharCode(x-32);else{if(g!=="Z")return null;b=":"}break;case"d":if(!(g>="A"&&g<="Z"))return null;b=String.fromCharCode(x+32)}m.push(b)}else m.push(v)}return m},n.prototype._verifyChecksums=function(d){return this._matchCheckChar(d,d.length-2,20)&&this._matchCheckChar(d,d.length-1,15)},n.prototype._matchCheckChar=function(d,f,m){var p=this,v=d.slice(0,f),g=v.length,x=v.reduce(function(b,_,w){return b+((w*-1+(g-1))%m+1)*p.ALPHABET.indexOf(_.charCodeAt(0))},0);return this.ALPHABET[x%47]===d[f].charCodeAt(0)},a.a=n},function(r,a,i){function n(){s.a.call(this)}var s=i(4),l={FORMAT:{value:"ean_2",writeable:!1}};n.prototype=Object.create(s.a.prototype,l),n.prototype.constructor=n,n.prototype.decode=function(u,c){this._row=u;var d,f=0,m=0,p=c,v=this._row.length,g=[],x=[];for(m=0;m<2&&p<v;m++){if(!(d=this._decodeCode(p)))return null;x.push(d),g.push(d.code%10),d.code>=this.CODE_G_START&&(f|=1<<1-m),m!=1&&(p=this._nextSet(this._row,d.end),p=this._nextUnset(this._row,p))}return g.length!=2||parseInt(g.join(""))%4!==f?null:{code:g.join(""),decodedCodes:x,end:d.end}},a.a=n},function(r,a,i){function n(){u.a.call(this)}function s(f){var m;for(m=0;m<10;m++)if(f===d[m])return m;return null}function l(f){var m,p=f.length,v=0;for(m=p-2;m>=0;m-=2)v+=f[m];for(v*=3,m=p-1;m>=0;m-=2)v+=f[m];return(v*=3)%10}var u=i(4),c={FORMAT:{value:"ean_5",writeable:!1}},d=[24,20,18,17,12,6,3,10,9,5];n.prototype=Object.create(u.a.prototype,c),n.prototype.constructor=n,n.prototype.decode=function(f,m){this._row=f;var p,v=0,g=0,x=m,b=this._row.length,_=[],w=[];for(g=0;g<5&&x<b;g++){if(!(p=this._decodeCode(x)))return null;w.push(p),_.push(p.code%10),p.code>=this.CODE_G_START&&(v|=1<<4-g),g!=4&&(x=this._nextSet(this._row,p.end),x=this._nextUnset(this._row,x))}return _.length!=5||l(_)!==s(v)?null:{code:_.join(""),decodedCodes:w,end:p.end}},a.a=n},function(r,a,i){function n(u,c){s.a.call(this,u,c)}var s=i(4),l={FORMAT:{value:"ean_8",writeable:!1}};n.prototype=Object.create(s.a.prototype,l),n.prototype.constructor=n,n.prototype._decodePayload=function(u,c,d){var f,m=this;for(f=0;f<4;f++){if(!(u=m._decodeCode(u.end,m.CODE_G_START)))return null;c.push(u.code),d.push(u)}if((u=m._findPattern(m.MIDDLE_PATTERN,u.end,!0,!1))===null)return null;for(d.push(u),f=0;f<4;f++){if(!(u=m._decodeCode(u.end,m.CODE_G_START)))return null;d.push(u),c.push(u.code)}return u},a.a=n},function(r,a,i){function n(p){p=u()(s(),p),c.a.call(this,p),this.barSpaceRatio=[1,1],p.normalizeBarSpaceWidth&&(this.SINGLE_CODE_ERROR=.38,this.AVG_CODE_ERROR=.09)}function s(){var p={};return Object.keys(n.CONFIG_KEYS).forEach(function(v){p[v]=n.CONFIG_KEYS[v].default}),p}var l=i(28),u=i.n(l),c=i(1),d=1,f=3,m={START_PATTERN:{value:[d,d,d,d]},STOP_PATTERN:{value:[d,d,f]},CODE_PATTERN:{value:[[d,d,f,f,d],[f,d,d,d,f],[d,f,d,d,f],[f,f,d,d,d],[d,d,f,d,f],[f,d,f,d,d],[d,f,f,d,d],[d,d,d,f,f],[f,d,d,f,d],[d,f,d,f,d]]},SINGLE_CODE_ERROR:{value:.78,writable:!0},AVG_CODE_ERROR:{value:.38,writable:!0},MAX_CORRECTION_FACTOR:{value:5},FORMAT:{value:"i2of5"}};n.prototype=Object.create(c.a.prototype,m),n.prototype.constructor=n,n.prototype._matchPattern=function(p,v){if(this.config.normalizeBarSpaceWidth){var g,x=[0,0],b=[0,0],_=[0,0],w=this.MAX_CORRECTION_FACTOR,S=1/w;for(g=0;g<p.length;g++)x[g%2]+=p[g],b[g%2]+=v[g];for(_[0]=b[0]/x[0],_[1]=b[1]/x[1],_[0]=Math.max(Math.min(_[0],w),S),_[1]=Math.max(Math.min(_[1],w),S),this.barSpaceRatio=_,g=0;g<p.length;g++)p[g]*=this.barSpaceRatio[g%2]}return c.a.prototype._matchPattern.call(this,p,v)},n.prototype._findPattern=function(p,v,g,x){var b,_,w,S,D=[],M=this,O=0,T={error:Number.MAX_VALUE,code:-1,start:0,end:0},I=M.AVG_CODE_ERROR;for(g=g||!1,x=x||!1,v||(v=M._nextSet(M._row)),b=0;b<p.length;b++)D[b]=0;for(b=v;b<M._row.length;b++)if(M._row[b]^g)D[O]++;else{if(O===D.length-1){for(S=0,w=0;w<D.length;w++)S+=D[w];if((_=M._matchPattern(D,p))<I)return T.error=_,T.start=b-S,T.end=b,T;if(!x)return null;for(w=0;w<D.length-2;w++)D[w]=D[w+2];D[D.length-2]=0,D[D.length-1]=0,O--}else O++;D[O]=1,g=!g}return null},n.prototype._findStart=function(){for(var p,v,g=this,x=g._nextSet(g._row),b=1;!v;){if(!(v=g._findPattern(g.START_PATTERN,x,!1,!0)))return null;if(b=Math.floor((v.end-v.start)/4),(p=v.start-10*b)>=0&&g._matchRange(p,v.start,0))return v;x=v.end,v=null}},n.prototype._verifyTrailingWhitespace=function(p){var v,g=this;return v=p.end+(p.end-p.start)/2,v<g._row.length&&g._matchRange(p.end,v,0)?p:null},n.prototype._findEnd=function(){var p,v,g=this;return g._row.reverse(),p=g._findPattern(g.STOP_PATTERN),g._row.reverse(),p===null?null:(v=p.start,p.start=g._row.length-p.end,p.end=g._row.length-v,p!==null?g._verifyTrailingWhitespace(p):null)},n.prototype._decodePair=function(p){var v,g,x=[],b=this;for(v=0;v<p.length;v++){if(!(g=b._decodeCode(p[v])))return null;x.push(g)}return x},n.prototype._decodeCode=function(p){var v,g,x,b=this,_=0,w=b.AVG_CODE_ERROR,S={error:Number.MAX_VALUE,code:-1,start:0,end:0};for(v=0;v<p.length;v++)_+=p[v];for(x=0;x<b.CODE_PATTERN.length;x++)(g=b._matchPattern(p,b.CODE_PATTERN[x]))<S.error&&(S.code=x,S.error=g);if(S.error<w)return S},n.prototype._decodePayload=function(p,v,g){for(var x,b,_=this,w=0,S=p.length,D=[[0,0,0,0,0],[0,0,0,0,0]];w<S;){for(x=0;x<5;x++)D[0][x]=p[w]*this.barSpaceRatio[0],D[1][x]=p[w+1]*this.barSpaceRatio[1],w+=2;if(!(b=_._decodePair(D)))return null;for(x=0;x<b.length;x++)v.push(b[x].code+""),g.push(b[x])}return b},n.prototype._verifyCounterLength=function(p){return p.length%10==0},n.prototype._decode=function(){var p,v,g,x=this,b=[],_=[];return(p=x._findStart())?(_.push(p),(v=x._findEnd())?(g=x._fillCounters(p.end,v.start,!1),x._verifyCounterLength(g)&&x._decodePayload(g,b,_)?b.length%2!=0||b.length<6?null:(_.push(v),{code:b.join(""),start:p.start,end:v.end,startInfo:p,decodedCodes:_}):null):null):null},n.CONFIG_KEYS={normalizeBarSpaceWidth:{type:"boolean",default:!1,description:"If true, the reader tries to normalize thewidth-difference between bars and spaces"}},a.a=n},function(r,a,i){function n(u,c){s.a.call(this,u,c)}var s=i(4),l={CODE_FREQUENCY:{value:[[56,52,50,49,44,38,35,42,41,37],[7,11,13,14,19,25,28,21,22,26]]},STOP_PATTERN:{value:[1/6*7,1/6*7,1/6*7,1/6*7,1/6*7,1/6*7]},FORMAT:{value:"upc_e",writeable:!1}};n.prototype=Object.create(s.a.prototype,l),n.prototype.constructor=n,n.prototype._decodePayload=function(u,c,d){var f,m=this,p=0;for(f=0;f<6;f++){if(!(u=m._decodeCode(u.end)))return null;u.code>=m.CODE_G_START&&(u.code=u.code-m.CODE_G_START,p|=1<<5-f),c.push(u.code),d.push(u)}return m._determineParity(p,c)?u:null},n.prototype._determineParity=function(u,c){var d,f;for(f=0;f<this.CODE_FREQUENCY.length;f++)for(d=0;d<this.CODE_FREQUENCY[f].length;d++)if(u===this.CODE_FREQUENCY[f][d])return c.unshift(f),c.push(d),!0;return!1},n.prototype._convertToUPCA=function(u){var c=[u[0]],d=u[u.length-2];return c=d<=2?c.concat(u.slice(1,3)).concat([d,0,0,0,0]).concat(u.slice(3,6)):d===3?c.concat(u.slice(1,4)).concat([0,0,0,0,0]).concat(u.slice(4,6)):d===4?c.concat(u.slice(1,5)).concat([0,0,0,0,0,u[5]]):c.concat(u.slice(1,6)).concat([0,0,0,0,d]),c.push(u[u.length-1]),c},n.prototype._checksum=function(u){return s.a.prototype._checksum.call(this,this._convertToUPCA(u))},n.prototype._findEnd=function(u,c){return c=!0,s.a.prototype._findEnd.call(this,u,c)},n.prototype._verifyTrailingWhitespace=function(u){var c,d=this;if((c=u.end+(u.end-u.start)/2)<d._row.length&&d._matchRange(u.end,c,0))return u},a.a=n},function(r,a,i){function n(u,c){s.a.call(this,u,c)}var s=i(4),l={FORMAT:{value:"upc_a",writeable:!1}};n.prototype=Object.create(s.a.prototype,l),n.prototype.constructor=n,n.prototype._decode=function(){var u=s.a.prototype._decode.call(this);return u&&u.code&&u.code.length===13&&u.code.charAt(0)==="0"?(u.code=u.code.substring(1),u):null},a.a=n},function(r,a){function i(n,s){return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n}r.exports=i},function(r,a){function i(){var n=new Float32Array(4);return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n}r.exports=i},function(r,a){function i(n,s){var l=s[0],u=s[1],c=s[2],d=s[3],f=l*d-c*u;return f?(f=1/f,n[0]=d*f,n[1]=-u*f,n[2]=-c*f,n[3]=l*f,n):null}r.exports=i},function(r,a){function i(n,s,l){return n[0]=s[0]*l,n[1]=s[1]*l,n}r.exports=i},function(r,a){function i(n,s,l){var u=s[0],c=s[1];return n[0]=l[0]*u+l[2]*c,n[1]=l[1]*u+l[3]*c,n}r.exports=i},function(r,a){function i(n){var s=new Float32Array(3);return s[0]=n[0],s[1]=n[1],s[2]=n[2],s}r.exports=i},function(r,a,i){function n(f){var m=-1,p=f==null?0:f.length;for(this.clear();++m<p;){var v=f[m];this.set(v[0],v[1])}}var s=i(122),l=i(123),u=i(124),c=i(125),d=i(126);n.prototype.clear=s,n.prototype.delete=l,n.prototype.get=u,n.prototype.has=c,n.prototype.set=d,r.exports=n},function(r,a,i){function n(m){var p=this.__data__=new s(m);this.size=p.size}var s=i(10),l=i(149),u=i(150),c=i(151),d=i(152),f=i(153);n.prototype.clear=l,n.prototype.delete=u,n.prototype.get=c,n.prototype.has=d,n.prototype.set=f,r.exports=n},function(r,a,i){var n=i(5),s=n.Uint8Array;r.exports=s},function(r,a){function i(n,s,l){switch(l.length){case 0:return n.call(s);case 1:return n.call(s,l[0]);case 2:return n.call(s,l[0],l[1]);case 3:return n.call(s,l[0],l[1],l[2])}return n.apply(s,l)}r.exports=i},function(r,a,i){function n(v,g){var x=u(v),b=!x&&l(v),_=!x&&!b&&c(v),w=!x&&!b&&!_&&f(v),S=x||b||_||w,D=S?s(v.length,String):[],M=D.length;for(var O in v)!g&&!p.call(v,O)||S&&(O=="length"||_&&(O=="offset"||O=="parent")||w&&(O=="buffer"||O=="byteLength"||O=="byteOffset")||d(O,M))||D.push(O);return D}var s=i(107),l=i(18),u=i(2),c=i(44),d=i(15),f=i(45),m=Object.prototype,p=m.hasOwnProperty;r.exports=n},function(r,a){function i(n,s){for(var l=-1,u=n==null?0:n.length,c=Array(u);++l<u;)c[l]=s(n[l],l,n);return c}r.exports=i},function(r,a){function i(n,s){for(var l=-1,u=s.length,c=n.length;++l<u;)n[c+l]=s[l];return n}r.exports=i},function(r,a,i){var n=i(0),s=Object.create,l=function(){function u(){}return function(c){if(!n(c))return{};if(s)return s(c);u.prototype=c;var d=new u;return u.prototype=void 0,d}}();r.exports=l},function(r,a,i){function n(u,c,d,f,m){var p=-1,v=u.length;for(d||(d=l),m||(m=[]);++p<v;){var g=u[p];c>0&&d(g)?c>1?n(g,c-1,d,f,m):s(m,g):f||(m[m.length]=g)}return m}var s=i(90),l=i(128);r.exports=n},function(r,a,i){var n=i(117),s=n();r.exports=s},function(r,a,i){function n(u,c){c=s(c,u);for(var d=0,f=c.length;u!=null&&d<f;)u=u[l(c[d++])];return d&&d==f?u:void 0}var s=i(13),l=i(23);r.exports=n},function(r,a){function i(n,s){return n!=null&&s in Object(n)}r.exports=i},function(r,a,i){function n(c){return l(c)&&s(c)==u}var s=i(8),l=i(6),u="[object Arguments]";r.exports=n},function(r,a,i){function n(b){return!(!u(b)||l(b))&&(s(b)?x:f).test(c(b))}var s=i(25),l=i(132),u=i(0),c=i(155),d=/[\\^$.*+?()[\]{}|]/g,f=/^\[object .+?Constructor\]$/,m=Function.prototype,p=Object.prototype,v=m.toString,g=p.hasOwnProperty,x=RegExp("^"+v.call(g).replace(d,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");r.exports=n},function(r,a,i){function n(d){return u(d)&&l(d.length)&&!!c[s(d)]}var s=i(8),l=i(26),u=i(6),c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c["[object Arguments]"]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c["[object Function]"]=c["[object Map]"]=c["[object Number]"]=c["[object Object]"]=c["[object RegExp]"]=c["[object Set]"]=c["[object String]"]=c["[object WeakMap]"]=!1,r.exports=n},function(r,a,i){function n(f){if(!s(f))return u(f);var m=l(f),p=[];for(var v in f)(v!="constructor"||!m&&d.call(f,v))&&p.push(v);return p}var s=i(0),l=i(40),u=i(144),c=Object.prototype,d=c.hasOwnProperty;r.exports=n},function(r,a,i){function n(m,p,v,g,x){m!==p&&u(p,function(b,_){if(d(b))x||(x=new s),c(m,p,_,v,n,g,x);else{var w=g?g(m[_],b,_+"",m,p,x):void 0;w===void 0&&(w=b),l(m,_,w)}},f)}var s=i(85),l=i(35),u=i(93),c=i(101),d=i(0),f=i(46);r.exports=n},function(r,a,i){function n(S,D,M,O,T,I,N){var P=S[M],F=D[M],L=N.get(F);if(L)return void s(S,M,L);var z=I?I(P,F,M+"",S,D,N):void 0,H=z===void 0;if(H){var X=m(F),Y=!X&&v(F),de=!X&&!Y&&_(F);z=F,X||Y||de?m(P)?z=P:p(P)?z=c(P):Y?(H=!1,z=l(F,!0)):de?(H=!1,z=u(F,!0)):z=[]:b(F)||f(F)?(z=P,f(P)?z=w(P):(!x(P)||O&&g(P))&&(z=d(F))):H=!1}H&&(N.set(F,z),T(z,F,O,I,N),N.delete(F)),s(S,M,z)}var s=i(35),l=i(111),u=i(112),c=i(113),d=i(127),f=i(18),m=i(2),p=i(159),v=i(44),g=i(25),x=i(0),b=i(160),_=i(45),w=i(164);r.exports=n},function(r,a,i){function n(u,c){return s(u,c,function(d,f){return l(u,f)})}var s=i(103),l=i(158);r.exports=n},function(r,a,i){function n(c,d,f){for(var m=-1,p=d.length,v={};++m<p;){var g=d[m],x=s(c,g);f(x,g)&&l(v,u(g,c),x)}return v}var s=i(94),l=i(105),u=i(13);r.exports=n},function(r,a,i){function n(c,d){return u(l(c,d,s),c+"")}var s=i(43),l=i(41),u=i(42);r.exports=n},function(r,a,i){function n(f,m,p,v){if(!c(f))return f;m=l(m,f);for(var g=-1,x=m.length,b=x-1,_=f;_!=null&&++g<x;){var w=d(m[g]),S=p;if(g!=b){var D=_[w];S=v?v(D,w,_):void 0,S===void 0&&(S=c(D)?D:u(m[g+1])?[]:{})}s(_,w,S),_=_[w]}return f}var s=i(36),l=i(13),u=i(15),c=i(0),d=i(23);r.exports=n},function(r,a,i){var n=i(156),s=i(37),l=i(43),u=s?function(c,d){return s(c,"toString",{configurable:!0,enumerable:!1,value:n(d),writable:!0})}:l;r.exports=u},function(r,a){function i(n,s){for(var l=-1,u=Array(n);++l<n;)u[l]=s(l);return u}r.exports=i},function(r,a,i){function n(p){if(typeof p=="string")return p;if(u(p))return l(p,n)+"";if(c(p))return m?m.call(p):"";var v=p+"";return v=="0"&&1/p==-d?"-0":v}var s=i(11),l=i(89),u=i(2),c=i(27),d=1/0,f=s?s.prototype:void 0,m=f?f.toString:void 0;r.exports=n},function(r,a){function i(n){return function(s){return n(s)}}r.exports=i},function(r,a,i){function n(l){var u=new l.constructor(l.byteLength);return new s(u).set(new s(l)),u}var s=i(86);r.exports=n},function(r,a,i){(function(n){function s(p,v){if(v)return p.slice();var g=p.length,x=m?m(g):new p.constructor(g);return p.copy(x),x}var l=i(5),u=typeof a=="object"&&a&&!a.nodeType&&a,c=u&&typeof n=="object"&&n&&!n.nodeType&&n,d=c&&c.exports===u,f=d?l.Buffer:void 0,m=f?f.allocUnsafe:void 0;n.exports=s}).call(a,i(29)(r))},function(r,a,i){function n(l,u){var c=u?s(l.buffer):l.buffer;return new l.constructor(c,l.byteOffset,l.length)}var s=i(110);r.exports=n},function(r,a){function i(n,s){var l=-1,u=n.length;for(s||(s=Array(u));++l<u;)s[l]=n[l];return s}r.exports=i},function(r,a,i){function n(u,c,d,f){var m=!d;d||(d={});for(var p=-1,v=c.length;++p<v;){var g=c[p],x=f?f(d[g],u[g],g,d,u):void 0;x===void 0&&(x=u[g]),m?l(d,g,x):s(d,g,x)}return d}var s=i(36),l=i(21);r.exports=n},function(r,a,i){var n=i(5),s=n["__core-js_shared__"];r.exports=s},function(r,a,i){function n(u){return s(function(c,d){var f=-1,m=d.length,p=m>1?d[m-1]:void 0,v=m>2?d[2]:void 0;for(p=u.length>3&&typeof p=="function"?(m--,p):void 0,v&&l(d[0],d[1],v)&&(p=m<3?void 0:p,m=1),c=Object(c);++f<m;){var g=d[f];g&&u(c,g,f,p)}return c})}var s=i(104),l=i(129);r.exports=n},function(r,a){function i(n){return function(s,l,u){for(var c=-1,d=Object(s),f=u(s),m=f.length;m--;){var p=f[n?m:++c];if(l(d[p],p,d)===!1)break}return s}}r.exports=i},function(r,a,i){function n(c){return u(l(c,void 0,s),c+"")}var s=i(157),l=i(41),u=i(42);r.exports=n},function(r,a,i){function n(f){var m=u.call(f,d),p=f[d];try{f[d]=void 0;var v=!0}catch{}var g=c.call(f);return v&&(m?f[d]=p:delete f[d]),g}var s=i(11),l=Object.prototype,u=l.hasOwnProperty,c=l.toString,d=s?s.toStringTag:void 0;r.exports=n},function(r,a){function i(n,s){return n==null?void 0:n[s]}r.exports=i},function(r,a,i){function n(m,p,v){p=s(p,m);for(var g=-1,x=p.length,b=!1;++g<x;){var _=f(p[g]);if(!(b=m!=null&&v(m,_)))break;m=m[_]}return b||++g!=x?b:!!(x=m==null?0:m.length)&&d(x)&&c(_,x)&&(u(m)||l(m))}var s=i(13),l=i(18),u=i(2),c=i(15),d=i(26),f=i(23);r.exports=n},function(r,a,i){function n(){this.__data__=s?s(null):{},this.size=0}var s=i(16);r.exports=n},function(r,a){function i(n){var s=this.has(n)&&delete this.__data__[n];return this.size-=s?1:0,s}r.exports=i},function(r,a,i){function n(d){var f=this.__data__;if(s){var m=f[d];return m===l?void 0:m}return c.call(f,d)?f[d]:void 0}var s=i(16),l="__lodash_hash_undefined__",u=Object.prototype,c=u.hasOwnProperty;r.exports=n},function(r,a,i){function n(c){var d=this.__data__;return s?d[c]!==void 0:u.call(d,c)}var s=i(16),l=Object.prototype,u=l.hasOwnProperty;r.exports=n},function(r,a,i){function n(u,c){var d=this.__data__;return this.size+=this.has(u)?0:1,d[u]=s&&c===void 0?l:c,this}var s=i(16),l="__lodash_hash_undefined__";r.exports=n},function(r,a,i){function n(c){return typeof c.constructor!="function"||u(c)?{}:s(l(c))}var s=i(91),l=i(39),u=i(40);r.exports=n},function(r,a,i){function n(d){return u(d)||l(d)||!!(c&&d&&d[c])}var s=i(11),l=i(18),u=i(2),c=s?s.isConcatSpreadable:void 0;r.exports=n},function(r,a,i){function n(d,f,m){if(!c(m))return!1;var p=typeof f;return!!(p=="number"?l(m)&&u(f,m.length):p=="string"&&f in m)&&s(m[f],d)}var s=i(17),l=i(24),u=i(15),c=i(0);r.exports=n},function(r,a,i){function n(d,f){if(s(d))return!1;var m=typeof d;return!(m!="number"&&m!="symbol"&&m!="boolean"&&d!=null&&!l(d))||c.test(d)||!u.test(d)||f!=null&&d in Object(f)}var s=i(2),l=i(27),u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/;r.exports=n},function(r,a){function i(n){var s=typeof n;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?n!=="__proto__":n===null}r.exports=i},function(r,a,i){function n(u){return!!l&&l in u}var s=i(115),l=function(){var u=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}();r.exports=n},function(r,a){function i(){this.__data__=[],this.size=0}r.exports=i},function(r,a,i){function n(c){var d=this.__data__,f=s(d,c);return!(f<0)&&(f==d.length-1?d.pop():u.call(d,f,1),--this.size,!0)}var s=i(12),l=Array.prototype,u=l.splice;r.exports=n},function(r,a,i){function n(l){var u=this.__data__,c=s(u,l);return c<0?void 0:u[c][1]}var s=i(12);r.exports=n},function(r,a,i){function n(l){return s(this.__data__,l)>-1}var s=i(12);r.exports=n},function(r,a,i){function n(l,u){var c=this.__data__,d=s(c,l);return d<0?(++this.size,c.push([l,u])):c[d][1]=u,this}var s=i(12);r.exports=n},function(r,a,i){function n(){this.size=0,this.__data__={hash:new s,map:new(u||l),string:new s}}var s=i(84),l=i(10),u=i(33);r.exports=n},function(r,a,i){function n(l){var u=s(this,l).delete(l);return this.size-=u?1:0,u}var s=i(14);r.exports=n},function(r,a,i){function n(l){return s(this,l).get(l)}var s=i(14);r.exports=n},function(r,a,i){function n(l){return s(this,l).has(l)}var s=i(14);r.exports=n},function(r,a,i){function n(l,u){var c=s(this,l),d=c.size;return c.set(l,u),this.size+=c.size==d?0:1,this}var s=i(14);r.exports=n},function(r,a,i){function n(u){var c=s(u,function(f){return d.size===l&&d.clear(),f}),d=c.cache;return c}var s=i(161),l=500;r.exports=n},function(r,a){function i(n){var s=[];if(n!=null)for(var l in Object(n))s.push(l);return s}r.exports=i},function(r,a,i){(function(n){var s=i(38),l=typeof a=="object"&&a&&!a.nodeType&&a,u=l&&typeof n=="object"&&n&&!n.nodeType&&n,c=u&&u.exports===l,d=c&&s.process,f=function(){try{return d&&d.binding&&d.binding("util")}catch{}}();n.exports=f}).call(a,i(29)(r))},function(r,a){function i(l){return s.call(l)}var n=Object.prototype,s=n.toString;r.exports=i},function(r,a){function i(n,s){return function(l){return n(s(l))}}r.exports=i},function(r,a){function i(u){var c=0,d=0;return function(){var f=l(),m=s-(f-d);if(d=f,m>0){if(++c>=n)return arguments[0]}else c=0;return u.apply(void 0,arguments)}}var n=800,s=16,l=Date.now;r.exports=i},function(r,a,i){function n(){this.__data__=new s,this.size=0}var s=i(10);r.exports=n},function(r,a){function i(n){var s=this.__data__,l=s.delete(n);return this.size=s.size,l}r.exports=i},function(r,a){function i(n){return this.__data__.get(n)}r.exports=i},function(r,a){function i(n){return this.__data__.has(n)}r.exports=i},function(r,a,i){function n(d,f){var m=this.__data__;if(m instanceof s){var p=m.__data__;if(!l||p.length<c-1)return p.push([d,f]),this.size=++m.size,this;m=this.__data__=new u(p)}return m.set(d,f),this.size=m.size,this}var s=i(10),l=i(33),u=i(34),c=200;r.exports=n},function(r,a,i){var n=i(143),s=/^\./,l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,u=/\\(\\)?/g,c=n(function(d){var f=[];return s.test(d)&&f.push(""),d.replace(l,function(m,p,v,g){f.push(v?g.replace(u,"$1"):p||m)}),f});r.exports=c},function(r,a){function i(l){if(l!=null){try{return s.call(l)}catch{}try{return l+""}catch{}}return""}var n=Function.prototype,s=n.toString;r.exports=i},function(r,a){function i(n){return function(){return n}}r.exports=i},function(r,a,i){function n(l){return l!=null&&l.length?s(l,1):[]}var s=i(92);r.exports=n},function(r,a,i){function n(u,c){return u!=null&&l(u,c,s)}var s=i(95),l=i(121);r.exports=n},function(r,a,i){function n(u){return l(u)&&s(u)}var s=i(24),l=i(6);r.exports=n},function(r,a,i){function n(g){if(!u(g)||s(g)!=c)return!1;var x=l(g);if(x===null)return!0;var b=p.call(x,"constructor")&&x.constructor;return typeof b=="function"&&b instanceof b&&m.call(b)==v}var s=i(8),l=i(39),u=i(6),c="[object Object]",d=Function.prototype,f=Object.prototype,m=d.toString,p=f.hasOwnProperty,v=m.call(Object);r.exports=n},function(r,a,i){function n(u,c){if(typeof u!="function"||c!=null&&typeof c!="function")throw new TypeError(l);var d=function(){var f=arguments,m=c?c.apply(this,f):f[0],p=d.cache;if(p.has(m))return p.get(m);var v=u.apply(this,f);return d.cache=p.set(m,v)||p,v};return d.cache=new(n.Cache||s),d}var s=i(34),l="Expected a function";n.Cache=s,r.exports=n},function(r,a,i){var n=i(102),s=i(118),l=s(function(u,c){return u==null?{}:n(u,c)});r.exports=l},function(r,a){function i(){return!1}r.exports=i},function(r,a,i){function n(u){return s(u,l(u))}var s=i(114),l=i(46);r.exports=n},function(r,a,i){function n(l){return l==null?"":s(l)}var s=i(108);r.exports=n},function(r,a,i){r.exports=i(48)}])})})(AR);var N0=RQ(AR.exports);const wCe={computed:{podeUsarAlternativo(){return typeof cordova=="undefined"?!1:cordova&&cordova.plugins&&cordova.plugins.barcodeScanner},suportaNativo(){return window&&window.navigator&&window.navigator.mediaDevices},temDispositivos(){return!!this.dispositivos.length}},data(){return{aberto:!1,carregando:!0,codigoBarrasOuQrCode:"",dispositivo:null,dispositivos:[],leitor:null,seletorDispositivo:!1,cameraStatus:0}},emits:["escanear","update:modelValue"],methods:{onStopQ(){N0.stop(),this.cameraStatus=0},startScanLineQ(){const e=this;let t=25,o=!1;const r=this.$refs.scanLine;r.style.top=t+"%",r.style.display="initial",setInterval(()=>{o=!o,o?t=10:t=90,r.style.top=t+"%",e.cameraStatus},1e3)},iniciarLeitorQ(){this.cameraStatus=1,N0.init({inputStream:{name:"Live",type:"LiveStream",constraints:{width:640,height:400},target:document.querySelector("#scan")},frequency:10,decoder:{readers:["ean_reader"],multiple:!1}},e=>{if(e){console.log(e);return}console.log("Initialization finished. Ready to start"),N0.start(),this.startScanLineQ();let t=document.querySelector("#scan video"),o=document.querySelector("#scan canvas");t.style.objectFit="cover",t.style.width="100%",t.style.height="100%",o.style.width="100%",o.style.height="100%",o.style.position="absolute",this.carregando=!1,N0.onDetected(this.aoDetectar)})},aoAbrir(){this.useQuagga?this.iniciarLeitorQ():this.inicializarTransmissao()},aoDetectar(e){this.code||(this.code=e.codeResult.code,this.useQuagga&&this.onStopQ(),this.fechar(),this.$emit("escanear",this.code))},aoFechar(){this.useQuagga?(N0.stop(),this.cameraStatus=0):(this.encerrarTransmissao(),this.carregando=!0),delete this.code},aoMudarDispositivo(e){this.seletorDispositivo=!1,localStorage.setItem("dispositivo",e),this.reiniciarTransmissao()},fechar(e){e&&e.preventDefault(),this.aberto=!1},encerrarTransmissao(){this.leitor.reset(),this.leitor=!1},async enviarCodigo(){try{this.codigoBarrasOuQrCode&&(this.$emit("escanear",this.codigoBarrasOuQrCode),this.codigoBarrasOuQrCode="")}catch(e){this.$q.notifyError("Ocorreu um erro ao enviar c\xF3digo",e)}},async inicializarTransmissao(){if(!this.suportaNativo&&this.podeUsarAlternativo)try{return await this.solicitarCamera(),cordova.plugins.barcodeScanner.scan(t=>this.aoDetectar(t),t=>this.$q.notifyError("Erro ao ler c\xF3digo de barras.",t),{prompt:""})}catch{return this.$q.notifyError("Erro ao abrir o leitor de c\xF3digo de barras."),this.fechar()}this.leitor=new Qfe;try{this.dispositivos=await this.leitor.getVideoInputDevices()}catch(t){return this.$q.notifyError("Erro ao obter dispositivos.",t)}if(this.carregando=!1,!this.temDispositivos)return;this.dispositivo||(this.dispositivo=this.dispositivos[0].deviceId);const e=await this.leitor.decodeFromInputVideoDevice(this.dispositivo,this.$refs.transmissao);this.aoDetectar(e)},reiniciarTransmissao(){this.encerrarTransmissao(),this.inicializarTransmissao()},solicitarCamera(){return new Promise((e,t)=>{const o=new Error("Unable to request permission.");try{const r=cordova.plugins.permissions,a=r.CAMERA;r.checkPermission(a,i=>{i.hasPermission?e():r.requestPermission(a,n=>{n.hasPermission?e():t(o)},n=>t(n))},i=>t(i))}catch(r){t(r)}})}},props:{modelValue:{default:!1,required:!0,type:Boolean},useQuagga:{default:!1,type:Boolean}},watch:{aberto(e){this.$emit("update:modelValue",e)},modelValue(e){this.aberto=e}},beforeUnmount(){document.removeEventListener("backbutton",this.fechar)},created(){document.addEventListener("backbutton",this.fechar),this.dispositivo=localStorage.getItem("dispositivo")}},ECe={key:0,class:"layout-padding q-mt-lg text-center"},SCe={key:1,class:"layout-padding q-mt-lg text-center"},ICe={key:2,class:"layout-padding"},ACe={class:"bg-white q-px-md q-py-md"},TCe={key:3,class:"PromptCodigoBarras-transmissao"},DCe={ref:"transmissao",height:"480",width:"320"},OCe={key:4,id:"scan"},PCe={ref:"scanLine",id:"scanLine"};function FCe(e,t,o,r,a,i){return B(),oe(Ht,{modelValue:a.aberto,"onUpdate:modelValue":t[3]||(t[3]=n=>a.aberto=n),onShow:i.aoAbrir,onHide:i.aoFechar,maximized:""},{default:C(()=>[h(To,{container:"",class:"bg-white"},{default:C(()=>[h(jo,{class:"bg-primary text-white"},{default:C(()=>[h(Je,null,{default:C(()=>[Ee(h(ae,{dense:"",flat:"",icon:"arrow_back",round:"",clikable:""},null,512),[[st]]),h(lt,null,{default:C(()=>t[4]||(t[4]=[K("Escanear C\xF3digo de Barras")])),_:1}),a.dispositivos.length>1?(B(),oe(ae,{key:0,dense:"",flat:"",icon:"switch_camera",round:""},{default:C(()=>[h(aa,{modelValue:a.seletorDispositivo,"onUpdate:modelValue":t[1]||(t[1]=n=>a.seletorDispositivo=n)},{default:C(()=>[h(At,{link:"",separator:""},{default:C(()=>[h(Re,{header:""},{default:C(()=>t[5]||(t[5]=[K("Dispositivos")])),_:1}),(B(!0),be(Qe,null,qt(a.dispositivos,(n,s)=>(B(),oe(qe,{key:s},{default:C(()=>[h(Ri,{modelValue:a.dispositivo,"onUpdate:modelValue":[t[0]||(t[0]=l=>a.dispositivo=l),i.aoMudarDispositivo],label:n.label||`Dispositivo ${s+1}`,val:n.deviceId},null,8,["modelValue","label","val","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"])]),_:1})):ie("",!0)]),_:1})]),_:1}),h(Jo,null,{default:C(()=>[h(dn,null,{default:C(()=>[!i.suportaNativo&&!i.podeUsarAlternativo?(B(),be("div",ECe,[h(Pe,{color:"tertiary",name:"error_outline",size:"50px"}),t[6]||(t[6]=A("div",{class:"q-mt-md text-tertiary text-center"},"Este dispositivo n\xE3o suporta este recurso.",-1))])):a.carregando?(B(),be("div",SCe,[h(Ns,{color:"tertiary",size:50})])):!i.temDispositivos&&!o.useQuagga?(B(),be("div",ICe,[t[7]||(t[7]=A("div",{class:"bg-light q-pa-lg round-borders text-black text-center"}," N\xE3o foi poss\xEDvel localizar um dispositivo de v\xEDdeo conectado \xE0 sua m\xE1quina. ",-1)),A("div",ACe,[o.useQuagga?ie("",!0):(B(),oe(ma,{key:0,after:[{icon:"mdi-barcode-scan",handler:i.enviarCodigo}],autofocus:"",placeholder:"C\xF3digo de barras ou QRCode",modelValue:a.codigoBarrasOuQrCode,"onUpdate:modelValue":t[2]||(t[2]=n=>a.codigoBarrasOuQrCode=n),modelModifiers:{trim:!0},onKeyup:jr(i.enviarCodigo,["enter"])},null,8,["after","modelValue","onKeyup"]))])])):ie("",!0),o.useQuagga?ie("",!0):Ee((B(),be("div",TCe,[A("video",DCe,null,512),t[8]||(t[8]=A("div",{class:"PromptCodigoBarras-laser"},null,-1))],512)),[[Eo,i.temDispositivos&&!a.carregando]]),o.useQuagga?Ee((B(),be("div",OCe,[A("div",PCe,null,512)],512)),[[Eo,a.cameraStatus===1]]):ie("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onShow","onHide"])}var MCe=St(wCe,[["render",FCe],["__scopeId","data-v-a08d8e36"]]);const NCe=G("div",{key:"svg",class:"q-checkbox__bg absolute"},[G("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[G("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),G("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var hm=Ct({name:"QCheckbox",props:ER,emits:SR,setup(e){function t(o,r){const a=j(()=>(o.value===!0?e.checkedIcon:r.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>a.value!==null?[G("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[G(Pe,{class:"q-checkbox__icon",name:a.value})])]:[NCe]}return IR("checkbox",t)}});const IP=150;var TR=Ct({name:"QDrawer",inheritAttrs:!1,props:{...Rh,...ya,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...Vh,"onLayout","miniState"],setup(e,{slots:t,emit:o,attrs:r}){const a=xt(),{proxy:{$q:i}}=a,n=xa(e,i),{preventBodyScroll:s}=eR(),{registerTimeout:l,removeTimeout:u}=hu(),c=kr(Rm,cr);if(c===cr)return console.error("QDrawer needs to be child of QLayout"),cr;let d,f=null,m;const p=Ue(e.behavior==="mobile"||e.behavior!=="desktop"&&c.totalWidth.value<=e.breakpoint),v=j(()=>e.mini===!0&&p.value!==!0),g=j(()=>v.value===!0?e.miniWidth:e.width),x=Ue(e.showIfAbove===!0&&p.value===!1?!0:e.modelValue===!0),b=j(()=>e.persistent!==!0&&(p.value===!0||ye.value===!0));function _(we,Ne){if(M(),we!==!1&&c.animate(),U(0),p.value===!0){const Ge=c.instances[H.value];Ge!==void 0&&Ge.belowBreakpoint===!0&&Ge.hide(!1),Z(1),c.isContainer.value!==!0&&s(!0)}else Z(0),we!==!1&&Ce(!1);l(()=>{we!==!1&&Ce(!0),Ne!==!0&&o("show",we)},IP)}function w(we,Ne){O(),we!==!1&&c.animate(),Z(0),U(N.value*g.value),ee(),Ne!==!0?l(()=>{o("hide",we)},IP):u()}const{show:S,hide:D}=Bh({showing:x,hideOnRouteChange:b,handleShow:_,handleHide:w}),{addToHistory:M,removeFromHistory:O}=Yk(x,D,b),T={belowBreakpoint:p,hide:D},I=j(()=>e.side==="right"),N=j(()=>(i.lang.rtl===!0?-1:1)*(I.value===!0?1:-1)),P=Ue(0),F=Ue(!1),L=Ue(!1),z=Ue(g.value*N.value),H=j(()=>I.value===!0?"left":"right"),X=j(()=>x.value===!0&&p.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:g.value:0),Y=j(()=>e.overlay===!0||e.miniToOverlay===!0||c.view.value.indexOf(I.value?"R":"L")!==-1||i.platform.is.ios===!0&&c.isContainer.value===!0),de=j(()=>e.overlay===!1&&x.value===!0&&p.value===!1),ye=j(()=>e.overlay===!0&&x.value===!0&&p.value===!1),W=j(()=>"fullscreen q-drawer__backdrop"+(x.value===!1&&F.value===!1?" hidden":"")),re=j(()=>({backgroundColor:`rgba(0,0,0,${P.value*.4})`})),_e=j(()=>I.value===!0?c.rows.value.top[2]==="r":c.rows.value.top[0]==="l"),ve=j(()=>I.value===!0?c.rows.value.bottom[2]==="r":c.rows.value.bottom[0]==="l"),ke=j(()=>{const we={};return c.header.space===!0&&_e.value===!1&&(Y.value===!0?we.top=`${c.header.offset}px`:c.header.space===!0&&(we.top=`${c.header.size}px`)),c.footer.space===!0&&ve.value===!1&&(Y.value===!0?we.bottom=`${c.footer.offset}px`:c.footer.space===!0&&(we.bottom=`${c.footer.size}px`)),we}),Ie=j(()=>{const we={width:`${g.value}px`,transform:`translateX(${z.value}px)`};return p.value===!0?we:Object.assign(we,ke.value)}),he=j(()=>"q-drawer__content fit "+(c.isContainer.value!==!0?"scroll":"overflow-auto")),De=j(()=>`q-drawer q-drawer--${e.side}`+(L.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(n.value===!0?" q-drawer--dark q-dark":"")+(F.value===!0?" no-transition":x.value===!0?"":" q-layout--prevent-focus")+(p.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${v.value===!0?"mini":"standard"}`+(Y.value===!0||de.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(_e.value===!0?" q-drawer--top-padding":""))),Te=j(()=>{const we=i.lang.rtl===!0?e.side:H.value;return[[Qa,V,void 0,{[we]:!0,mouse:!0}]]}),J=j(()=>{const we=i.lang.rtl===!0?H.value:e.side;return[[Qa,R,void 0,{[we]:!0,mouse:!0}]]}),q=j(()=>{const we=i.lang.rtl===!0?H.value:e.side;return[[Qa,R,void 0,{[we]:!0,mouse:!0,mouseAllDir:!0}]]});function ne(){se(p,e.behavior==="mobile"||e.behavior!=="desktop"&&c.totalWidth.value<=e.breakpoint)}ct(p,we=>{we===!0?(d=x.value,x.value===!0&&D(!1)):e.overlay===!1&&e.behavior!=="mobile"&&d!==!1&&(x.value===!0?(U(0),Z(0),ee()):S(!1))}),ct(()=>e.side,(we,Ne)=>{c.instances[Ne]===T&&(c.instances[Ne]=void 0,c[Ne].space=!1,c[Ne].offset=0),c.instances[we]=T,c[we].size=g.value,c[we].space=de.value,c[we].offset=X.value}),ct(c.totalWidth,()=>{(c.isContainer.value===!0||document.qScrollPrevented!==!0)&&ne()}),ct(()=>e.behavior+e.breakpoint,ne),ct(c.isContainer,we=>{x.value===!0&&s(we!==!0),we===!0&&ne()}),ct(c.scrollbarWidth,()=>{U(x.value===!0?0:void 0)}),ct(X,we=>{ce("offset",we)}),ct(de,we=>{o("onLayout",we),ce("space",we)}),ct(I,()=>{U()}),ct(g,we=>{U(),pe(e.miniToOverlay,we)}),ct(()=>e.miniToOverlay,we=>{pe(we,g.value)}),ct(()=>i.lang.rtl,()=>{U()}),ct(()=>e.mini,()=>{e.noMiniAnimation||e.modelValue===!0&&(Q(),c.animate())}),ct(v,we=>{o("miniState",we)});function U(we){we===void 0?Ao(()=>{we=x.value===!0?0:g.value,U(N.value*we)}):(c.isContainer.value===!0&&I.value===!0&&(p.value===!0||Math.abs(we)===g.value)&&(we+=N.value*c.scrollbarWidth.value),z.value=we)}function Z(we){P.value=we}function Ce(we){const Ne=we===!0?"remove":c.isContainer.value!==!0?"add":"";Ne!==""&&document.body.classList[Ne]("q-body--drawer-toggle")}function Q(){f!==null&&clearTimeout(f),a.proxy&&a.proxy.$el&&a.proxy.$el.classList.add("q-drawer--mini-animate"),L.value=!0,f=setTimeout(()=>{f=null,L.value=!1,a&&a.proxy&&a.proxy.$el&&a.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function V(we){if(x.value!==!1)return;const Ne=g.value,Ge=qi(we.distance.x,0,Ne);if(we.isFinal===!0){Ge>=Math.min(75,Ne)===!0?S():(c.animate(),Z(0),U(N.value*Ne)),F.value=!1;return}U((i.lang.rtl===!0?I.value!==!0:I.value)?Math.max(Ne-Ge,0):Math.min(0,Ge-Ne)),Z(qi(Ge/Ne,0,1)),we.isFirst===!0&&(F.value=!0)}function R(we){if(x.value!==!0)return;const Ne=g.value,Ge=we.direction===e.side,Ze=(i.lang.rtl===!0?Ge!==!0:Ge)?qi(we.distance.x,0,Ne):0;if(we.isFinal===!0){Math.abs(Ze)<Math.min(75,Ne)===!0?(c.animate(),Z(1),U(0)):D(),F.value=!1;return}U(N.value*Ze),Z(qi(1-Ze/Ne,0,1)),we.isFirst===!0&&(F.value=!0)}function ee(){s(!1),Ce(!0)}function ce(we,Ne){c.update(e.side,we,Ne)}function se(we,Ne){we.value!==Ne&&(we.value=Ne)}function pe(we,Ne){ce("size",we===!0?e.miniWidth:Ne)}return c.instances[e.side]=T,pe(e.miniToOverlay,g.value),ce("space",de.value),ce("offset",X.value),e.showIfAbove===!0&&e.modelValue!==!0&&x.value===!0&&e["onUpdate:modelValue"]!==void 0&&o("update:modelValue",!0),Va(()=>{o("onLayout",de.value),o("miniState",v.value),d=e.showIfAbove===!0;const we=()=>{(x.value===!0?_:w)(!1,!0)};if(c.totalWidth.value!==0){Ao(we);return}m=ct(c.totalWidth,()=>{m(),m=void 0,x.value===!1&&e.showIfAbove===!0&&p.value===!1?S(!1):we()})}),Vo(()=>{m!==void 0&&m(),f!==null&&(clearTimeout(f),f=null),x.value===!0&&ee(),c.instances[e.side]===T&&(c.instances[e.side]=void 0,ce("size",0),ce("offset",0),ce("space",!1))}),()=>{const we=[];p.value===!0&&(e.noSwipeOpen===!1&&we.push(Ee(G("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),Te.value)),we.push(Fd("div",{ref:"backdrop",class:W.value,style:re.value,"aria-hidden":"true",onClick:D},void 0,"backdrop",e.noSwipeBackdrop!==!0&&x.value===!0,()=>q.value)));const Ne=v.value===!0&&t.mini!==void 0,Ge=[G("div",{...r,key:""+Ne,class:[he.value,r.class]},Ne===!0?t.mini():uo(t.default))];return e.elevated===!0&&x.value===!0&&Ge.push(G("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),we.push(Fd("aside",{ref:"content",class:De.value,style:Ie.value},Ge,"contentclose",e.noSwipeClose!==!0&&p.value===!0,()=>J.value)),G("div",{class:"q-drawer-container"},we)}}});function Cv(e,t){return[!0,!1].includes(e)?e:t}var kCe=Ct({name:"QPagination",props:{...ya,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||wM.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:t}){const{proxy:o}=xt(),{$q:r}=o,a=xa(e,r),i=j(()=>parseInt(e.min,10)),n=j(()=>parseInt(e.max,10)),s=j(()=>parseInt(e.maxPages,10)),l=j(()=>p.value+" / "+n.value),u=j(()=>Cv(e.boundaryLinks,e.input)),c=j(()=>Cv(e.boundaryNumbers,!e.input)),d=j(()=>Cv(e.directionLinks,e.input)),f=j(()=>Cv(e.ellipses,!e.input)),m=Ue(null),p=j({get:()=>e.modelValue,set:F=>{if(F=parseInt(F,10),e.disable||isNaN(F))return;const L=qi(F,i.value,n.value);e.modelValue!==L&&t("update:modelValue",L)}});ct(()=>`${i.value}|${n.value}`,()=>{p.value=e.modelValue});const v=j(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),g=j(()=>e.gutter in Og?`${Og[e.gutter]}px`:e.gutter||null),x=j(()=>g.value!==null?`--q-pagination-gutter-parent:-${g.value};--q-pagination-gutter-child:${g.value}`:null),b=j(()=>{const F=[e.iconFirst||r.iconSet.pagination.first,e.iconPrev||r.iconSet.pagination.prev,e.iconNext||r.iconSet.pagination.next,e.iconLast||r.iconSet.pagination.last];return r.lang.rtl===!0?F.reverse():F}),_=j(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),w=j(()=>$E(e,"flat")),S=j(()=>({[w.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),D=j(()=>{const F={[w.value]:!1};return e.activeDesign!==""&&(F[e.activeDesign]=!0),F}),M=j(()=>({...D.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),O=j(()=>{let F=Math.max(s.value,1+(f.value?2:0)+(c.value?2:0));const L={pgFrom:i.value,pgTo:n.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(n.value).length)}em`}};return s.value&&F<n.value-i.value+1&&(F=1+Math.floor(F/2)*2,L.pgFrom=Math.max(i.value,Math.min(n.value-F+1,e.modelValue-Math.floor(F/2))),L.pgTo=Math.min(n.value,L.pgFrom+F-1),c.value&&(L.boundaryStart=!0,L.pgFrom++),f.value&&L.pgFrom>i.value+(c.value?1:0)&&(L.ellipsesStart=!0,L.pgFrom++),c.value&&(L.boundaryEnd=!0,L.pgTo--),f.value&&L.pgTo<n.value-(c.value?1:0)&&(L.ellipsesEnd=!0,L.pgTo--)),L});function T(F){p.value=F}function I(F){p.value=p.value+F}const N=j(()=>{function F(){p.value=m.value,m.value=null}return{"onUpdate:modelValue":L=>{m.value=L},onKeyup:L=>{cs(L,13)===!0&&F()},onBlur:F}});function P(F,L,z){const H={"aria-label":L,"aria-current":"false",...S.value,...F};return z===!0&&Object.assign(H,{"aria-current":"true",...M.value}),L!==void 0&&(e.toFn!==void 0?H.to=e.toFn(L):H.onClick=()=>{T(L)}),G(ae,H)}return Object.assign(o,{set:T,setByOffset:I}),()=>{const F=[],L=[];let z;if(u.value===!0&&(F.push(P({key:"bls",disable:e.disable||e.modelValue<=i.value,icon:b.value[0]},i.value)),L.unshift(P({key:"ble",disable:e.disable||e.modelValue>=n.value,icon:b.value[3]},n.value))),d.value===!0&&(F.push(P({key:"bdp",disable:e.disable||e.modelValue<=i.value,icon:b.value[1]},e.modelValue-1)),L.unshift(P({key:"bdn",disable:e.disable||e.modelValue>=n.value,icon:b.value[2]},e.modelValue+1))),e.input!==!0){z=[];const{pgFrom:H,pgTo:X,marginalStyle:Y}=O.value;if(O.value.boundaryStart===!0){const de=i.value===e.modelValue;F.push(P({key:"bns",style:Y,disable:e.disable,label:i.value},i.value,de))}if(O.value.boundaryEnd===!0){const de=n.value===e.modelValue;L.unshift(P({key:"bne",style:Y,disable:e.disable,label:n.value},n.value,de))}O.value.ellipsesStart===!0&&F.push(P({key:"bes",style:Y,disable:e.disable,label:"\u2026",ripple:!1},H-1)),O.value.ellipsesEnd===!0&&L.unshift(P({key:"bee",style:Y,disable:e.disable,label:"\u2026",ripple:!1},X+1));for(let de=H;de<=X;de++)z.push(P({key:`bpg${de}`,style:Y,disable:e.disable,label:de},de,de===e.modelValue))}return G("div",{class:v.value,..._.value},[G("div",{class:"q-pagination__content row no-wrap items-center",style:x.value},[...F,e.input===!0?G(ma,{class:"inline",style:{width:`${l.value.length/1.5}em`},type:"number",dense:!0,value:m.value,disable:e.disable,dark:a.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:l.value,min:i.value,max:n.value,...N.value}):G("div",{class:"q-pagination__middle row justify-center"},z),...L])])}}});async function RCe(){var t;if(!localStorage.getItem("bancoDeDados"))return;const e=await et.configuracoes.le({nome:"item.tipo"});for(const o of e){const r=(t=o.valor)==null?void 0:t.trim();!r||eA.push({rotulo:r,valor:r})}}let eA=[{rotulo:"Produto",valor:"Produto"},{rotulo:"Servi\xE7o",valor:"Servi\xE7o"},{rotulo:"Equipamento",valor:"Equipamento"}];HE()==="optisoul"&&(eA=[{rotulo:"\xD3culos de Sol",valor:"\xD3culos Sol"},{rotulo:"\xD3culos Vista (Pronto)",valor:"\xD3culos Pronto"},{rotulo:"Arma\xE7\xE3o",valor:"Arma\xE7\xE3o"},{rotulo:"Lente Oft\xE1lmica",valor:"Lente"},{rotulo:"Lente de Contato",valor:"Lente Contato"},{rotulo:"Tratamento",valor:"Tratamento"},{rotulo:"Outro Produto",valor:"Produto"},{rotulo:"Servi\xE7o",valor:"Servi\xE7o"}]);var VCe=eA;const Tl=e=>$utils.removerAcentos((e||"").trim().toLowerCase()),BCe={data(){return{value:"",valueTmp:"",values:[],options:[],hint:"",lastItemCached:null,loadingOptions:null,rules:{add:[e=>(e||"").trim()!==""||"Campo obrigat\xF3rio",async e=>{await this.getOptions();const t=Tl(e);return this.values.some(r=>{const a=typeof r=="object"?r[this.campo]:r;return Tl(a)===t})?`${this.label||"Valor"} j\xE1 existente`:!0}],value:this.required?[e=>e!==""||"Campo obrigat\xF3rio"]:[]},addDialog:!1}},emits:["update:modelValue"],methods:{showAddDialog(){this.valueTmp="",this.addDialog=!0},add(){this.select(this.valueTmp),this.values=[],this.lastItemCached=null,this.addDialog=!1},async search(e,t){if((!e||e.length<1)&&!this.buscarSemCaractere)return!1;await this.getOptions(),setTimeout(()=>{t(()=>{if(!e){this.options=this.values;return}const o=Tl(e).replace(/\s+/," ").trim().split(" ");this.options=this.values.filter(r=>{const a=typeof r=="object"?r[this.campo]:r,i=Tl(a);for(const n of o)if(!i.includes(n))return!1;return!0})})},500)},select(e,t){let o=this;this.value=e,this.$emit("update:modelValue",e),this.clearAfterSelect&&setTimeout(()=>{o.value=""},100)},async getOptions(){return this.loadingOptions?(this.loadingOptions.then(()=>{if(this.tabela==="item"&&this.lastItemCached&&$db.item.itens.length){const e=$db.item.itens[$db.item.itens.length-1],t=(e[this.campo]||"").trim(),o=Tl(t);if(e.id!==this.lastItemCached.id||Tl(this.lastItemCached[this.campo])!==o){const r=this.values.some(a=>Tl(a)===o);t&&!r&&this.values.push(t)}}}),this.loadingOptions):this.values.length>0?Promise.resolve():(this.loadingOptions=new Promise(async(e,t)=>{try{if(this.tabela==="item"){await $db.item.carregarMemoria();const o=$db.item.itens.filter(r=>{var n;const a=(r[this.campo]||"").trim(),i=!((n=this.filtro)!=null&&n.tipo)||(r==null?void 0:r.tipo)===this.filtro.tipo;return a&&i});this.values=Array.from(new Set(o.map(r=>r[this.campo]))),$db.item.itens.length&&(this.lastItemCached=$db.item.itens[$db.item.itens.length-1])}if(this.tabela==="contato"){await $db.contato.carregarMemoria();let o=$db.contato.contatos;if(this.filtro&&this.filtro.vendedores){const a=["vendedor","vendedora","vendedores","Vendedor","Vendedora","Vendedores","VENDEDOR","VENDEDORA","VENDEDORES"],n=(await Se().contatoGrupo.where("descricao").anyOf(a).toArray()).map(s=>s.idContato);o=o.filter(s=>n.includes(s.id))}const r=o.filter(a=>{var i;return(i=a[this.campo])==null?void 0:i.trim()});this.enableObj?this.values=Array.from(new Set(r.map(a=>({label:a.nome,value:a.id,nome:a.nome})))):this.values=Array.from(new Set(r.map(a=>a[this.campo])))}if(this.tabela==="contatoGrupo"){let o=await $db.contato.leGruposUnicos();this.values=o.map(r=>({label:r.descricao,value:r.descricao}))}if(!~["contato","item","contatoGrupo"].includes(this.tabela)){let o,r;r=1e4,o=await $erp()[this.tabela].count();let a=[];for(let i=0;i<o;i+=r)await $erp()[this.tabela].offset(i).limit(r).each(n=>{var u;const s=(n[this.campo]||"").trim(),l=!((u=this.filtro)!=null&&u.tipo)||n.tipo===this.filtro.tipo;s&&l&&a.push(s)});this.values=Array.from(new Set(a))}this.values=Array.from(new Set(this.values)),this.tabela!=="contatoGrupo"&&(this.tabela!=="contato"||!this.enableObj)&&this.values.sort((o,r)=>{const a=typeof o=="object"?o.nome:o,i=typeof r=="object"?r.nome:r;return Tl(a)<Tl(i)?-1:1}),this.options=this.values,e()}catch(o){t(o)}finally{this.loadingOptions=null}}),this.loadingOptions)}},props:{campo:{type:String,required:!0},onKeyDown:{type:Function,required:!1,default:()=>!1},tabela:{type:String,required:!0},clearable:{type:Boolean,required:!1,default:!0},filtro:{},label:{type:String},maxLength:{type:[Number,String],default:50},modelValue:{type:String},onFocus:{type:Function,required:!1,default:()=>!1},buscarSemCaractere:{type:Boolean,required:!1,default:!1},required:Boolean,enableAdd:Boolean,clearAfterSelect:{type:Boolean,required:!1,default:!1},enableObj:{type:Boolean,required:!1,default:!1}},watch:{modelValue(){this.value=this.modelValue}},created(){this.value=this.modelValue}},qCe={class:"text-h5"},LCe={class:"col-12 flex justify-end"};function $Ce(e,t,o,r,a,i){const n=Ve("campo");return B(),be("div",null,[h(ii,{ref:"select","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",dense:"",onFilter:i.search,"onUpdate:modelValue":i.select,onClear:t[0]||(t[0]=s=>i.select("")),"model-value":a.value,clearable:o.clearable,label:o.label,options:a.options,"emit-value":!o.enableObj,hint:a.hint,rules:a.rules.value},{append:C(()=>[o.enableAdd?(B(),oe(ae,{key:0,color:"tertiary",size:"md",icon:"add_circle",dense:"",flat:"",round:"",onClick:rt(i.showAddDialog,["stop"])},null,8,["onClick"])):ie("",!0)]),"no-option":C(()=>[h(qe,null,{default:C(()=>[h(fe,{class:"text-grey"},{default:C(()=>t[3]||(t[3]=[K(" Resultado n\xE3o encontrado ")])),_:1})]),_:1})]),_:1},8,["onFilter","onUpdate:modelValue","model-value","clearable","label","options","emit-value","hint","rules"]),h(Ht,{modelValue:a.addDialog,"onUpdate:modelValue":t[2]||(t[2]=s=>a.addDialog=s)},{default:C(()=>[h(Mt,null,{default:C(()=>[h(Ra,null,{default:C(()=>[A("div",qCe,le(o.label),1)]),_:1}),h(Ra,null,{default:C(()=>[h(cl,{class:"row q-pr-md q-gutter-md",onSubmit:i.add},{default:C(()=>[h(n,{modelValue:a.valueTmp,"onUpdate:modelValue":t[1]||(t[1]=s=>a.valueTmp=s),modelModifiers:{trim:!0},class:"col-12",rules:a.rules.add,maxlength:o.maxLength,rotulo:o.label},null,8,["modelValue","rules","maxlength","rotulo"]),A("div",LCe,[Ee(h(ae,{flat:"",color:"tertiary",label:"Cancelar"},null,512),[[st]]),h(ae,{unelevated:"",color:"primary",type:"submit",label:"Criar"})])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var UCe=St(BCe,[["render",$Ce]]);const zCe={components:{ItemCard:yR,SeletorCampoTabela:UCe},computed:{habilitarOpcaoUltimaVenda(){return this.filtro.idEmpresa&&this.filtro.idContato&&!this.contatoConsumidor},itensEncontrados(){return this.itens.length},sku(){let e=0;for(const t in this.itensSelecionados)e+=this.itensSelecionados[t].quantidade>0?1:0;return e},valorItensSelecionados(){let e=0;if(this.calculaItemCusto)for(const t in this.itensSelecionados){const o=lr((this.itensSelecionados[t].item.valorCustoReposicao||0)*this.itensSelecionados[t].quantidade);e=lr(e+o)}else for(const t in this.itensSelecionados){const o=lr((this.itensSelecionados[t].item.novoValorVenda||this.itensSelecionados[t].item.valorVenda||0)*this.itensSelecionados[t].quantidade);e=lr(e+o)}return e},opcoesStatus(){return[{rotulo:"Linha",valor:"Linha"},{rotulo:"Fora de Linha",valor:"Fora de Linha"},{rotulo:"Promo\xE7\xE3o",valor:"Promo\xE7\xE3o"}]}},data(){var e;return{carregando:!0,mostrarFiltroAvancado:!1,mostrarUltimaVenda:!1,focarNaBusca:!0,checaEstoque:!1,carregandoEstoque:!0,estoque:[],itens:[],ultimaVenda:{},itensSelecionados:{},valores:{},termo:"",status:"",contatoConsumidor:null,historicoVendasOnline:{executando:!1,sucesso:!1,erro:!1},opcoesTipo:[],paginacao:{atual:1,maximo:1,limite:(e=localStorage.getItem("promptItemV2PaginacaoLimite"))!=null?e:30},paginaAtual:1,visibilidade:{modal:!1}}},emits:["update:modelValue","selecionarItens","limparFiltroAvancado","fechar"],methods:{toggleUltimaVenda(){this.mostrarUltimaVenda=!this.mostrarUltimaVenda,this.atualizar()},togglePromocao(){if(this.status==="Promo\xE7\xE3o"){this.status="",this.atualizar();return}this.status!=="Promo\xE7\xE3o"&&(this.status="Promo\xE7\xE3o",this.atualizar())},adicionar(e){this.focarNaBusca=!1;const t=$utils.clonarV2(this.itensSelecionados);t[e.item.id]=e,this.itensSelecionados=t,this.termo=""},async leOpcoesTipo(){this.opcoesTipo=VCe},limparFiltroAvancado(){var e;this.filtroAvancado.descricaoAplicacao="",this.filtroAvancado.codigoItem="",this.filtroAvancado.codigoBarras="",this.filtroAvancado.referencia="",this.filtroAvancado.marca="",this.filtroAvancado.fornecedores="",this.filtroAvancado.grupo="",this.filtroAvancado.subGrupo="",this.filtroAvancado.estoque="",this.filtroAvancado.tipo="",this.filtroAvancado.codigoCompra="",this.status="",this.paginacao.limite=(e=localStorage.getItem("promptItemV2PaginacaoLimite"))!=null?e:30,this.mostrarUltimaVenda=!1,this.$emit("limparFiltroAvancado"),this.$nextTick(this.atualizar)},async obterHistoricoVendasOnline(){if(this.contatoConsumidor===null){const e=await $db.configuracoes.leValorNumerico("venda.codigoconsumidor"),t=(await $db.contato.ler({filtros:{codigoContato:Number(e)}})).data[0];this.contatoConsumidor=(t==null?void 0:t.id)===this.filtro.idContato}if(!(this.obtendoHistoricoVendasOnline||!this.habilitarOpcaoUltimaVenda))return this.obtendoHistoricoVendasOnline=new Promise(async(e,t)=>{var o,r;this.historicoVendasOnline={executando:!0,sucesso:!1,erro:!1};try{const a={},i=await $utils.geeksApi({historicoVenda:{funcao:"E662FDB1-71E0-42BC-BD11-FC28269BBD73",idEmpresa:this.filtro.idEmpresa,idContato:this.filtro.idContato}});(r=(o=i==null?void 0:i.data)==null?void 0:o.historicoVenda)==null||r.forEach(n=>{a[n.idItem]=n}),this.ultimaVenda=a,this.historicoVendasOnline.sucesso=!0,e()}catch{this.historicoVendasOnline.erro=!0,delete this.obtendoHistoricoVendasOnline,e()}this.historicoVendasOnline.executando=!1}),this.obtendoHistoricoVendasOnline},async atualizar(){this.carregando=!0,await Vd(200);const e=this.termo==="#teste100#";let t=[],o,r,a,i;if(localStorage.setItem("promptItemV2PaginacaoLimite",this.paginacao.limite),this.paginacao.atual===this.paginaAtual&&(this.paginacao.atual=1),this.mostrarUltimaVenda&&await this.obterHistoricoVendasOnline(),a=this.paginacao.limite,i=this.paginacao.atual,r=this.termo,e&&($q.loading.show({message:"Coletando dados para teste...",html:!0,boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary"}),await Vd(200),a=i=r=void 0),o=await $db.item.ler({filtros:{...this.filtro,...this.filtroAvancado,...this.mostrarUltimaVenda?{ids:Object.keys(this.ultimaVenda)}:{},termoBusca:r,status:this.status},limit:a,page:i,sort:["descricaoConcatenada"]}),this.paginaAtual=this.paginacao.atual,this.paginacao.maximo=o.totalPages,t=o.data,t.length&&this.filtro.idTabelaPreco){let n=await $erp().itemTabelaPreco.get(this.filtro.idTabelaPreco)||{};if(n.id){const s=await $erp().itemTabelaPreco.toArray();for(let l of t.filter(u=>u.valorVenda)){let u=await $db.itemTabelaPreco.obterValores(n,l,4,s)||{};this.valores[l.id]=u,l.valorVenda=u.valorVenda||0,l.valorReal=u.valorVenda||0}}}if(t=t.map(n=>this.itensSelecionados[n.id]?this.itensSelecionados[n.id].item:n),this.itens=t,await this.obterConfigChecaEstoque(),await this.carregarEstoque(),e){for(const n of this.estoque)n.tiposSaldos.find(s=>s.tipoEstoque==="Dispon\xEDvel"&&s.saldo>0)||(t=t.filter(s=>s.id!==n.idItem));t.sort((n,s)=>n.valorVenda<s.valorVenda?1:-1),t=t.slice(0,100);for(const n of t)n.novoValorVenda=n.valorVenda,this.itensSelecionados[n.id]={item:n,quantidade:1};$q.loading.hide(),this.$emit("selecionarItens",this.itensSelecionados,e),await this.fechar();return}this.carregando=!1},async obterConfigChecaEstoque(){var t;const e=await $db.configuracoes.porNome("vendas.checaestoque",this.filtro.idEmpresa);this.checaEstoque=!!Number((t=e.find(o=>o.id))==null?void 0:t.valor)},async carregarEstoque(){this.carregandoEstoque=!0,this.estoque=[];let e=[];const t=this.itens.map(a=>a.id);let r=(await $erp().empresa.toArray()).filter(a=>a.ativo);if(t.length)try{let i=((await this.$utils.geeksApi({estoque:{funcao:"CC9F3B9A-16B9-4AE8-A523-938E4433AFAA",idItem:t}})||{}).data||{}).estoque||[];i=i.filter(n=>r.find(s=>s.idContato===n.idEmpresa));for(const n of t){let s=[];const l=i.filter(c=>c.idItem===n),u=new Set(l.map(c=>c.tipoEstoque));for(const c of Array.from(u)){const d=l.find(f=>f.tipoEstoque===c).saldoTotal||0;if(this.filtro.idEmpresa){const f=l.filter(m=>m.tipoEstoque===c&&m.idEmpresa===this.filtro.idEmpresa).reduce((m,p)=>m+Number(p.saldo||0),0);s.push({tipoEstoque:c,saldo:f,saldoTotal:d})}this.filtro.idEmpresa||s.push({tipoEstoque:c,saldo:d,saldoTotal:d})}e.push({idItem:n,tiposSaldos:s})}}catch{let i=await $erp().estoqueSaldoProdutoEmpresa.where("idItem").anyOf(t).toArray();for(const n of i)n.saldoTotal=i.filter(s=>s.idItem===n.idItem&&s.tipoEstoque===n.tipoEstoque).reduce((s,l)=>s+(l.saldo||0),0);for(const n of t){let s=[];const l=i.filter(c=>c.idItem===n),u=new Set(l.map(c=>c.tipoEstoque));for(const c of Array.from(u)){const d=l.find(f=>f.tipoEstoque===c).saldoTotal||0;if(this.filtro.idEmpresa){const f=l.filter(m=>m.tipoEstoque===c&&m.idEmpresa===this.filtro.idEmpresa).reduce((m,p)=>m+Number(p.saldo||0),0);s.push({tipoEstoque:c,saldo:f,saldoTotal:d})}this.filtro.idEmpresa||s.push({tipoEstoque:c,saldo:d,saldoTotal:d})}e.push({idItem:n,tiposSaldos:s,offline:!0})}}this.carregandoEstoque=!1,this.estoque=e},async filtroFornecedor_click(){const e=await $g.promptContato.show({filtro:{ativo:!0}});e.nome&&(this.filtroAvancado.fornecedores=e.nome)},async concluir(e,t){var o;if(t){try{await new Promise((r,a)=>{var i;$q.dialog({message:this.mensagemAddItem!==""?this.mensagemAddItem:`Deseja adicionar ${((i=this.itensSelecionados[t.id])==null?void 0:i.quantidade)||1}x do Produto ${t.descricao}?`,title:"Adi\xE7\xE3o de item",cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(r).onCancel(a)})}catch{return}this.itensSelecionados[t.id].quantidade=((o=this.itensSelecionados[t.id])==null?void 0:o.quantidade)||1}this.$emit("selecionarItens",this.itensSelecionados),await this.fechar()},onHide(){this.$emit("fechar",this.voltar)},async fechar(e){if(this.voltar=!1,e){if(e.stopPropagation(),!$lodash.isEqual(this.itensSelecionados,this.itensSelecionadosOrig))try{await new Promise((t,o)=>{$q.dialog({message:"Deseja descartar as modifica\xE7\xF5es?",title:"Aten\xE7\xE3o!",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Descartar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(t).onCancel(o)})}catch{return}this.voltar=!0}this.refresh(),this.$emit("update:modelValue",!1)},limparTermo(){this.termo="",this.atualizar()},obterEstoque(e,t){if(!this.carregandoEstoque)return e?this.estoque.find(o=>o.idItem===e)||{}:{}},refresh(){this.visibilidade.modal=!1,this.carregando=!0,this.focarNaBusca=!0,this.itens=[],this.itensSelecionados={},this.termo=""}},props:{filtro:{default:()=>({}),type:Object},filtroAvancado:{default:()=>({}),type:Object},modelValue:{required:!0,type:Boolean},habilitarQuantidade:{type:Boolean,default:!1},exibirValorVenda:{type:Boolean,default:!0},calculaItemCusto:{type:Boolean,default:!1},mensagemAddItem:{type:String,default:""}},watch:{modelValue(e){e&&(this.mostrarFiltroAvancado=!1,this.visibilidade.modal=!0,this.itensSelecionadosOrig=$utils.clonarV2(this.itensSelecionados),this.termo==="#teste100#"&&(this.termo=""),this.atualizar(),this.obterHistoricoVendasOnline())}},updated(){this.$nextTick(function(){this.$refs.search&&this.$refs.search.focus()})}},HCe={key:0,class:"row justify-center q-pt-sm"},jCe={key:1},GCe={key:2,class:"bg-light q-pa-lg round-borders text-black text-center"},WCe={class:"text-tertiary"},QCe={class:"text-positive float-right"};function XCe(e,t,o,r,a,i){const n=Ve("g-col"),s=Ve("g-row"),l=Ve("ItemCard"),u=Ve("campo"),c=Ve("SeletorCampoTabela");return B(),oe(Ht,{modelValue:a.visibilidade.modal,"onUpdate:modelValue":t[21]||(t[21]=d=>a.visibilidade.modal=d),onHide:i.onHide,onKeyup:t[22]||(t[22]=jr(d=>i.fechar(d),["esc"])),persistent:"",maximized:""},{default:C(()=>[h(To,{view:"hHr lpR fFr",container:"",class:"bg-white"},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,null,{default:C(()=>[h(ae,{onClick:t[0]||(t[0]=d=>i.fechar(d)),icon:"arrow_back",flat:"",round:"",dense:"",class:"q-mr-md"}),h(s,{relative:"",width:"100%"},{default:C(()=>[h(n,{text:"center"},{default:C(()=>[h(ma,{modelValue:a.termo,"onUpdate:modelValue":[t[1]||(t[1]=d=>a.termo=d),i.atualizar],placeholder:"Buscar",clearable:"",filled:"",standout:"",dark:"",dense:"","clear-icon":"close",debounce:"1500",ref:"search",style:{"max-width":"600px",background:"rgba(255,255,255,.13)",margin:"0 auto"}},{prepend:C(()=>[h(Pe,{name:"mdi-filter",color:"white",class:"showScreenIcon"})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),h(n,{col:"shrink",text:"right",self:"center"},{default:C(()=>[a.historicoVendasOnline.executando?(B(),oe(Pe,{key:0,name:"cloud_sync",size:"sm",flat:"",round:"",dense:"",class:"q-ml-sm"})):ie("",!0),a.historicoVendasOnline.erro?(B(),oe(Pe,{key:1,name:"cloud_off",size:"sm",flat:"",round:"",dense:"",class:"q-ml-sm"},{default:C(()=>[h(Ft,{anchor:"bottom middle",self:"center middle",class:"hideonmobile"},{default:C(()=>t[23]||(t[23]=[K(" N\xE3o foi poss\xEDvel obter o hist\xF3rico de vendas (online) ")])),_:1})]),_:1})):ie("",!0),i.habilitarOpcaoUltimaVenda?(B(),oe(ae,{key:2,onClick:i.toggleUltimaVenda,flat:"",round:"",dense:"",icon:a.mostrarUltimaVenda?"mdi-star":"mdi-star-outline",class:"q-ml-sm"},{default:C(()=>[h(Ft,{anchor:"bottom middle",self:"center middle",class:"hideonmobile"},{default:C(()=>t[24]||(t[24]=[K(" Vendidos ")])),_:1})]),_:1},8,["onClick","icon"])):ie("",!0),h(ae,{onClick:i.togglePromocao,flat:a.status!=="Promo\xE7\xE3o",outline:a.status==="Promo\xE7\xE3o",icon:"mdi-fire",round:"",dense:"",class:"q-ml-sm"},{default:C(()=>[h(Ft,{anchor:"bottom middle",self:"center middle",class:"hideonmobile"},{default:C(()=>t[25]||(t[25]=[K(" Promo\xE7\xE3o ")])),_:1})]),_:1},8,["onClick","flat","outline"]),h(ae,{onClick:t[2]||(t[2]=d=>a.mostrarFiltroAvancado=!a.mostrarFiltroAvancado),icon:"mdi-tune",flat:"",round:"",dense:"",class:"q-ml-sm"},{default:C(()=>[h(Ft,{anchor:"bottom middle",self:"center middle",class:"hideonmobile"},{default:C(()=>t[26]||(t[26]=[K(" Filtro Avan\xE7ado ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),h(Jo,null,{default:C(()=>[h(dn,null,{default:C(()=>[a.carregando?(B(),be("div",HCe,[h(Ns,{color:"faded",size:50})])):ie("",!0),!a.carregando&&i.itensEncontrados?(B(),be("div",jCe,[h(At,{link:"","no-border":"",separator:""},{default:C(()=>[(B(!0),be(Qe,null,qt(a.itens,d=>(B(),oe(l,{modo:"lista",key:d.id,onAdicionar:i.adicionar,onConcluir:f=>i.concluir(null,d),item:d,estoque:i.obterEstoque(d.id),idEmpresa:o.filtro.idEmpresa,checaEstoque:a.checaEstoque,quantidadeSelecionada:(a.itensSelecionados[d.id]||{}).quantidade||0,habilitarQuantidade:o.habilitarQuantidade,valores:a.valores[d.id],exibirValorVenda:o.exibirValorVenda,ultimaVenda:a.ultimaVenda[d.id]},null,8,["onAdicionar","onConcluir","item","estoque","idEmpresa","checaEstoque","quantidadeSelecionada","habilitarQuantidade","valores","exibirValorVenda","ultimaVenda"]))),128))]),_:1})])):ie("",!0),!a.carregando&&!i.itensEncontrados?(B(),be("div",GCe," N\xE3o encontramos itens com os crit\xE9rios selecionados. ")):ie("",!0)]),_:1})]),_:1}),h(TR,{modelValue:a.mostrarFiltroAvancado,"onUpdate:modelValue":t[18]||(t[18]=d=>a.mostrarFiltroAvancado=d),onKeyup:jr(i.atualizar,["enter"]),bordered:"",side:"right"},{default:C(()=>[h(To,{view:"hHh lpR lFr"},{default:C(()=>[h(jo,{class:"bg-white","height-hint":"98"},{default:C(()=>[h(Je,{color:"white",class:"text-tertiary"},{default:C(()=>[h(Pe,{class:"text-h5",name:"mdi-filter"}),h(lt,null,{default:C(()=>t[27]||(t[27]=[K("Filtro Avan\xE7ado")])),_:1}),h(ae,{onClick:t[3]||(t[3]=d=>a.mostrarFiltroAvancado=!a.mostrarFiltroAvancado),icon:"close",flat:"",round:"",dense:""})]),_:1})]),_:1}),h(Jo,null,{default:C(()=>[h(dn,{class:"q-pa-md"},{default:C(()=>[ih(e.$slots,"camposFiltroAvancado",{},()=>[h(u,{modelValue:o.filtroAvancado.descricaoAplicacao,"onUpdate:modelValue":t[4]||(t[4]=d=>o.filtroAvancado.descricaoAplicacao=d),rotulo:"Descri\xE7\xE3o/Aplica\xE7\xE3o",dense:"",class:"q-field--with-bottom"},null,8,["modelValue"]),h(u,{modelValue:o.filtroAvancado.codigoItem,"onUpdate:modelValue":t[5]||(t[5]=d=>o.filtroAvancado.codigoItem=d),tipo:"decimal",decimals:"0",prefix:"#",rotulo:"C\xF3digo",zerosDireita:"0",dense:"",class:"q-field--with-bottom"},null,8,["modelValue"]),h(u,{modelValue:o.filtroAvancado.referencia,"onUpdate:modelValue":t[6]||(t[6]=d=>o.filtroAvancado.referencia=d),rotulo:"Refer\xEAncia",dense:"",class:"q-field--with-bottom"},null,8,["modelValue"]),h(u,{modelValue:o.filtroAvancado.codigoBarras,"onUpdate:modelValue":t[7]||(t[7]=d=>o.filtroAvancado.codigoBarras=d),rotulo:"C\xF3d. Barras",dense:"",class:"q-field--with-bottom"},null,8,["modelValue"]),h(c,{modelValue:o.filtroAvancado.marca,"onUpdate:modelValue":t[8]||(t[8]=d=>o.filtroAvancado.marca=d),buscarSemCaractere:!0,tabela:"item",campo:"marca",label:"Marca"},null,8,["modelValue"]),h(u,{modelValue:o.filtroAvancado.fornecedores,"onUpdate:modelValue":t[9]||(t[9]=d=>o.filtroAvancado.fornecedores=d),after:[{icon:"search",handler:i.filtroFornecedor_click}],rotulo:"Fornecedor",dense:"",class:"q-field--with-bottom"},null,8,["modelValue","after"]),h(c,{modelValue:o.filtroAvancado.grupo,"onUpdate:modelValue":t[10]||(t[10]=d=>o.filtroAvancado.grupo=d),buscarSemCaractere:!0,tabela:"item",campo:"grupo",label:"Grupo"},null,8,["modelValue"]),h(c,{modelValue:o.filtroAvancado.subGrupo,"onUpdate:modelValue":t[11]||(t[11]=d=>o.filtroAvancado.subGrupo=d),buscarSemCaractere:!0,tabela:"item",campo:"subGrupo",label:"Subgrupo"},null,8,["modelValue"]),h(u,{modelValue:o.filtroAvancado.estoque,"onUpdate:modelValue":t[12]||(t[12]=d=>o.filtroAvancado.estoque=d),tipo:"decimal",decimals:"4",prefix:">",rotulo:"Estoque",dense:"",class:"q-field--with-bottom"},null,8,["modelValue"]),h(u,{modelValue:o.filtroAvancado.tipo,"onUpdate:modelValue":t[13]||(t[13]=d=>o.filtroAvancado.tipo=d),onClick:i.leOpcoesTipo,opcoes:a.opcoesTipo,tipo:"seletor",rotuloFixo:"Tipo",filter:"",dense:"",class:"q-field--with-bottom"},null,8,["modelValue","onClick","opcoes"]),h(u,{modelValue:o.filtroAvancado.codigoCompra,"onUpdate:modelValue":t[14]||(t[14]=d=>o.filtroAvancado.codigoCompra=d),tipo:"decimal",decimals:"0",prefix:"#",zerosDireita:"0",rotulo:"Compra C\xF3d.",dense:"",class:"q-field--with-bottom"},null,8,["modelValue"]),h(u,{modelValue:a.paginacao.limite,"onUpdate:modelValue":t[15]||(t[15]=d=>a.paginacao.limite=d),tipo:"quantidade",min:"1",rotulo:"Quantidade por p\xE1gina",dense:"",class:"q-field--with-bottom"},null,8,["modelValue"]),h(u,{modelValue:a.status,"onUpdate:modelValue":[t[16]||(t[16]=d=>a.status=d),i.atualizar],opcoes:i.opcoesStatus,tipo:"seletor",rotuloFixo:"Status",clearable:"",dense:""},null,8,["modelValue","onUpdate:modelValue","opcoes"]),i.habilitarOpcaoUltimaVenda?(B(),oe(hm,{key:0,modelValue:a.mostrarUltimaVenda,"onUpdate:modelValue":[t[17]||(t[17]=d=>a.mostrarUltimaVenda=d),i.atualizar],label:"Produtos vendidos","left-label":"","checked-icon":"mdi-star","unchecked-icon":"mdi-star-outline",style:{left:"0"},class:"q-field--with-bottom"},null,8,["modelValue","onUpdate:modelValue"])):ie("",!0)],!0)]),_:3})]),_:3}),h(Ui,{class:"bg-white"},{default:C(()=>[h(Je,{class:"bg-white q-pa-sm"},{default:C(()=>[h(ae,{onClick:i.limparFiltroAvancado,label:"Limpar",color:"tertiary",flat:"",class:"fit"},null,8,["onClick"]),h(ae,{onClick:i.atualizar,label:"Aplicar",color:"primary",unelevated:"",class:"fit"},null,8,["onClick"])]),_:1})]),_:1})]),_:3})]),_:3},8,["modelValue","onKeyup"]),h(Ui,{class:"bg-light border-top q-px-sm"},{default:C(()=>[h(Je,{class:"bg-transparent no-padding no-margin"},{default:C(()=>[h(Yp),h(kCe,{modelValue:a.paginacao.atual,"onUpdate:modelValue":[t[19]||(t[19]=d=>a.paginacao.atual=d),i.atualizar],max:a.paginacao.maximo,input:"",push:"","boundary-links":"",color:"tertiary"},null,8,["modelValue","onUpdate:modelValue","max"]),h(Yp)]),_:1}),i.sku>0?(B(),oe(Je,{key:0,class:"bg-transparent q-pa-sm border-top"},{default:C(()=>[h(lt,null,{default:C(()=>[A("span",WCe,le(i.sku)+" SKU(s)",1),A("span",QCe,"R$ "+le(e.$filters.numero(i.valorItensSelecionados,2)),1)]),_:1}),h(ae,{onClick:t[20]||(t[20]=d=>i.concluir(d)),label:"Concluir",color:"primary",unelevated:"",class:"q-ml-sm"})]),_:1})):ie("",!0)]),_:1})]),_:3})]),_:3},8,["modelValue","onHide"])}var Zd=St(zCe,[["render",XCe],["__scopeId","data-v-7b35a636"]]);const KCe={components:{PromptCodigoBarras:MCe,PromptItemV2:Zd},data(){return{codigoBarras:"",promptItem:{visivel:!1,filtros:{}},promptCodigoBarras:!1}},emits:["adicionar","atualizar"],methods:{abrirPromptCodigoBarras(){this.promptCodigoBarras=!0},async abrirPromptItem(){let e={};for(const t of this.documentoItens){if(!t.idItem)continue;this.itemPrompt||(this.itemPrompt={}),this.itemPrompt[t.idItem]||(this.itemPrompt[t.idItem]=await $erp().item.get(t.idItem));let o=$utils.clonarV2(this.itemPrompt[t.idItem]);o.novoValorVenda=t.valorReal,e[t.idItem]={item:o,quantidade:t.quantidade}}this.$refs.promptItem.itensSelecionados=e,this.promptItem.filtros=this.itemFiltros,this.promptItem.visivel=!0},async buscarCodigoBarras(e=null){e||(e=this.codigoBarras);const t={termoBusca:e};this.codigoBarras="",/999\d{10}$/.test(e)&&(t.codigoBarras=e);const o=await $db.item.ler({filtros:{...t,...this.itemFiltros},limit:30});if(!o.data.length){this.$q.notifyError("Item n\xE3o encontrado");return}if(o.data.length===1){let r=o.data[0];this.$emit("adicionar",r);return}this.$refs.promptItem.termo=e,this.abrirPromptItem()},selecionarItens(e){this.$emit("atualizar",e)}},props:{documentoItens:{type:Array,default:()=>[]},itemFiltros:{type:Object,default:()=>({})}}};function YCe(e,t,o,r,a,i){const n=Ve("g-col"),s=Ve("g-row"),l=Ve("promptCodigoBarras"),u=Ve("PromptItemV2");return B(),be(Qe,null,[h(s,{gutter:"xs"},{default:C(()=>[h(n,{class:"hideonmobile"},{default:C(()=>[h(ma,{modelValue:a.codigoBarras,"onUpdate:modelValue":t[0]||(t[0]=c=>a.codigoBarras=c),onKeydown:t[1]||(t[1]=jr(c=>i.buscarCodigoBarras(),["enter"])),dense:"",outlined:"",class:"text-primary",placeholder:"C\xF3digo de barras, etc..."},null,8,["modelValue"])]),_:1}),h(n,{col:"shrink"},{default:C(()=>[h(ae,{onClick:i.abrirPromptCodigoBarras,color:"primary",flat:"",round:"",icon:"mdi-barcode-scan"},null,8,["onClick"])]),_:1})]),_:1}),h(l,{modelValue:a.promptCodigoBarras,"onUpdate:modelValue":t[2]||(t[2]=c=>a.promptCodigoBarras=c),onEscanear:i.buscarCodigoBarras,useQuagga:!0},null,8,["modelValue","onEscanear"]),h(u,{modelValue:a.promptItem.visivel,"onUpdate:modelValue":t[3]||(t[3]=c=>a.promptItem.visivel=c),onSelecionarItens:i.selecionarItens,filtro:a.promptItem.filtros,habilitarQuantidade:!0,ref:"promptItem"},null,8,["modelValue","onSelecionarItens","filtro"])],64)}var Jm=St(KCe,[["render",YCe]]),DR=Ct({name:"QInnerLoading",props:{...ya,...Ed,showing:Boolean,color:String,size:{type:[String,Number],default:"42px"},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(e,{slots:t}){const o=xt(),r=xa(e,o.proxy.$q),{transitionProps:a,transitionStyle:i}=wb(e),n=j(()=>"q-inner-loading q--avoid-card-border absolute-full column flex-center"+(r.value===!0?" q-inner-loading--dark":"")),s=j(()=>"q-inner-loading__label"+(e.labelClass!==void 0?` ${e.labelClass}`:""));function l(){const c=[G(Ns,{size:e.size,color:e.color})];return e.label!==void 0&&c.push(G("div",{class:s.value,style:e.labelStyle},[e.label])),c}function u(){return e.showing===!0?G("div",{class:n.value,style:i.value},t.default!==void 0?t.default():l()):null}return()=>G(Or,a.value,u)}});const JCe={ratio:[String,Number]};function ZCe(e,t){return j(()=>{const o=Number(e.ratio||(t!==void 0?t.value:void 0));return isNaN(o)!==!0&&o>0?{paddingBottom:`${100/o}%`}:null})}const ewe=1.7778;var Rf=Ct({name:"QImg",props:{...JCe,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:ewe},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:t,emit:o}){const r=Ue(e.initialRatio),a=ZCe(e,r),i=xt(),{registerTimeout:n,removeTimeout:s}=hu(),{registerTimeout:l,removeTimeout:u}=hu(),c=j(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),d=j(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),f=[Ue(null),Ue(c.value)],m=Ue(0),p=Ue(!1),v=Ue(!1),g=j(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),x=j(()=>({width:e.width,height:e.height})),b=j(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),_=j(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function w(){if(u(),e.loadingShowDelay===0){p.value=!0;return}l(()=>{p.value=!0},e.loadingShowDelay)}function S(){u(),p.value=!1}function D({target:P}){_d(i)===!1&&(s(),r.value=P.naturalHeight===0?.5:P.naturalWidth/P.naturalHeight,M(P,1))}function M(P,F){F===1e3||_d(i)===!0||(P.complete===!0?O(P):n(()=>{M(P,F+1)},50))}function O(P){_d(i)!==!0&&(m.value=m.value^1,f[m.value].value=null,S(),P.getAttribute("__qerror")!=="true"&&(v.value=!1),o("load",P.currentSrc||P.src))}function T(P){s(),S(),v.value=!0,f[m.value].value=d.value,f[m.value^1].value=c.value,o("error",P)}function I(P){const F=f[P].value,L={key:"img_"+P,class:b.value,style:_.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...F};return m.value===P?Object.assign(L,{class:L.class+"current",onLoad:D,onError:T}):L.class+="loaded",G("div",{class:"q-img__container absolute-full",key:"img"+P},G("img",L))}function N(){return p.value===!1?G("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},uo(t[v.value===!0?"error":"default"])):G("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},t.loading!==void 0?t.loading():e.noSpinner===!0?void 0:[G(Ns,{color:e.spinnerColor,size:e.spinnerSize})])}{let P=function(){ct(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,F=>{s(),v.value=!1,F===null?(S(),f[m.value^1].value=c.value):w(),f[m.value].value=F},{immediate:!0})};ss.value===!0?Va(P):P()}return()=>{const P=[];return a.value!==null&&P.push(G("div",{key:"filler",style:a.value})),f[0].value!==null&&P.push(I(0)),f[1].value!==null&&P.push(I(1)),P.push(G(Or,{name:"q-transition--fade"},N)),G("div",{key:"main",class:g.value,style:x.value,role:"img","aria-label":e.alt},P)}}});const twe={data(){return{online:navigator.onLine,somenteLeitura:!1,visualizador:{visivel:!1},fator:1,zoom:100,quantidades:0,pinca:{zoom:0,scaling:!1,width:0,height:0,top:0,left:0},distancia:{x1i:0,y1i:0,x2i:0,y2i:0,x1f:0,y1f:0,x2f:0,y2f:0,distanciaInicial:0,distanciaFinal:0}}},emits:["atualizar"],props:{id:{type:String,required:!1},arquivos:{type:Array},tipo:{type:String,required:!1},redimensionar:{type:Object,required:!1},edicao:{required:!1,default:!0,type:Boolean},cartao:{required:!1,default:!1,type:Boolean},lista:{required:!1,default:!1,type:Boolean}},methods:{async visualizar(e){try{$q.loading.show();const t=await $db.arquivo.le(e),o=URL.createObjectURL(t);this.visualizador={visivel:!0,titulo:e.nome.slice(0,e.nome.lastIndexOf(".")),...e,arquivo:o},await this.ajustar()}catch{$q.notify({type:"negative",message:"Erro ao carregar visualiza\xE7\xE3o"})}finally{$q.loading.hide()}},reAjustar(){var e,t,o;if((e=this.visualizador)!=null&&e.arquivo){const i=this.$refs.quadro,n=((t=this.redimensionar)==null?void 0:t.width)||1200,s=((o=this.redimensionar)==null?void 0:o.height)||1200;let l=n,u=s;document.body.clientWidth<l+20&&(l=document.body.clientWidth-20,u=s*(l/n)),window.innerHeight-50<u+20&&(u=window.innerHeight-(50+20),l=n*(u/s)),i.style.width=l+"px",i.style.height=u+"px",i.style.top=(window.innerHeight-u-50)/2+"px",i.style.left=(document.body.clientWidth-l)/2+"px",this.ajustar()}},async ajustar(){this.$nextTick(()=>{var i;const e=this.$refs.quadro,t={top:parseInt(e.style.top),left:parseInt(e.style.left),width:parseInt(e.style.width),height:parseInt(e.style.height)},o=this.$refs.foto,r=new Image,a=this;r.onload=()=>{const n=Math.trunc(t.width/t.height*100)/100,s=Math.trunc(r.width/r.height*100)/100;if(n===s)o.style.top=t.top+"px",o.style.left=t.left+"px",o.style.width=t.width+"px",o.style.height=t.height+"px";else{let l=r.width,u=r.height,c=1.001;r.width>r.height?c=t.width/r.height:c=t.width/r.width,l=parseInt(l*c),u=parseInt(u*c),o.style.top=(t.height-u)/2+t.top+"px",o.style.left=(t.width-l)/2+t.left+"px",o.style.width=l+"px",o.style.height=u+"px",a.fator=r.height/r.width}},r.src=(i=this.visualizador)==null?void 0:i.arquivo})},async tirarFoto(e){let t="";if($q.platform.is.desktop){const o=await $g.promptCamera.show();o.acao==="foto"&&(t=o.foto)}if($q.platform.is.mobile){const o=await new Promise(r=>{const a=document.createElement("input");a.setAttribute("type","file"),a.setAttribute("accept","image/*"),a.setAttribute("capture","environment"),a.addEventListener("cancel",i=>{r(null)}),a.addEventListener("change",()=>{const i=a.files;if(FileReader&&i&&i.length){const n=new FileReader;n.onload=async()=>{r(n.result)},n.readAsDataURL(i[0])}}),a.click()});o&&(t=o)}if(t){let o;if(e==="editar"){const r=this.arquivos.findIndex(a=>{var i;return a.id===((i=this.visualizador)==null?void 0:i.id)});this.arquivos.splice(r,1)}o={id:$utils.uuid(),dataCriacao:$utils.dataAtual(),nome:`imagem-${this.arquivos.length}.jpg`,arquivo:t},this.id&&(o.idTabelaMaster=this.id),this.tipo&&(o.tipoArquivo=this.tipo),o&&(this.arquivos.push(o),this.visualizador={visivel:!0,titulo:o.nome.slice(0,o.nome.lastIndexOf(".")),...o},this.$nextTick(()=>{this.reAjustar()}),await this.ajustar())}},async anexar(e){return new Promise(t=>{const o=document.createElement("input");o.setAttribute("type","file"),o.setAttribute("accept","*/*"),o.addEventListener("cancel",r=>{t(null)}),o.addEventListener("change",async()=>{const r=o.files;if(FileReader&&r&&r.length){const a=r[0],i=a==null?void 0:a.name,n=this.checkTypeFile(i,"jpeg|png|jpg|bmp|webp"),s=await this.toBase64(a);let l;if(e==="editar"){const u=this.arquivos.findIndex(c=>{var d;return c.id===((d=this.visualizador)==null?void 0:d.id)});this.arquivos.splice(u,1)}l={id:$utils.uuid(),dataCriacao:$utils.dataAtual(),nome:i,arquivo:s},this.id&&(l.idTabelaMaster=this.id),this.tipo&&(l.tipoArquivo=this.tipo),l&&this.arquivos.push(l),n?(this.visualizador={visivel:!0,titulo:l.nome.slice(0,l.nome.lastIndexOf(".")),...l},this.$nextTick(()=>{this.reAjustar()}),await this.ajustar()):this.visualizador={visivel:!1}}}),o.click()})},async salvar(){var d,f,m,p,v,g;const e=document.createElement("canvas"),t=e.getContext("2d"),o=this.$refs.foto,r=(d=this.redimensionar)==null?void 0:d.width,a=(f=this.redimensionar)==null?void 0:f.height,i=((m=this.redimensionar)==null?void 0:m.crop)||!1,n=!!((p=this.redimensionar)!=null&&p.height)&&!!((v=this.redimensionar)!=null&&v.width),s=this.checkTypeFile((g=this.visualizador)==null?void 0:g.nome,"jpeg|png|jpg|bmp|webp");e.width=r,e.height=a;const l={left:parseFloat(this.$refs.foto.style.left),width:parseFloat(this.$refs.foto.style.width),top:parseFloat(this.$refs.foto.style.top),height:parseFloat(this.$refs.foto.style.height),naturalWidth:this.$refs.foto.naturalWidth,naturalHeight:this.$refs.foto.naturalHeight},u={left:parseFloat(this.$refs.quadro.style.left),width:parseFloat(this.$refs.quadro.style.width),top:parseFloat(this.$refs.quadro.style.top),height:parseFloat(this.$refs.quadro.style.height)},c={left:u.left-l.left,top:u.top-l.top};if(t.drawImage(o,c.left/l.width*l.naturalWidth,c.top/l.height*l.naturalHeight,u.width/l.width*l.naturalWidth,u.height/l.height*l.naturalHeight,0,0,r,a),i&&n&&s){let x=.92,b=e.toDataURL("image/jpeg",x);const _=350*1024;for(;b.length>_&&x>.1;)x-=.05,b=e.toDataURL("image/jpeg",x);const w=this.arquivos.find(S=>{var D;return S.id===((D=this.visualizador)==null?void 0:D.id)});w&&(w.nome=`${w.nome.replace(/\.[^/.]+$/,"")}.jpg`,w.arquivo=b),this.visualizador={visivel:!1}}else if(s){const x=document.createElement("canvas"),b=x.getContext("2d");x.width=o.naturalWidth,x.height=o.naturalHeight,b.drawImage(o,0,0,x.width,x.height);const _=.9,w=x.toDataURL("image/jpeg",_),S=this.arquivos.find(D=>{var M;return D.id===((M=this.visualizador)==null?void 0:M.id)});S&&(S.nome=`${S.nome.replace(/\.[^/.]+$/,"")}.jpg`,S.arquivo=w),this.visualizador={visivel:!1}}},async editar(e){$q.dialog({title:"Editar nome do arquivo",message:"N\xE3o \xE9 necess\xE1rio informar a extens\xE3o do arquivo.",prompt:{model:`${e.nome.slice(0,e.nome.lastIndexOf("."))}`,type:"text"},cancel:{label:"Cancelar",color:"tertiary",flat:!0},ok:{label:"Salvar",color:"primary",unelevated:!0}}).onOk(async t=>{const o=this.arquivos.findIndex(i=>i.id===e.id),a=`${t}.jpg`;if(this.arquivos[o].nome===a){$q.notifyPositive("Nenhuma altera\xE7\xE3o realizada.");return}this.arquivos[o].nome=a,this.arquivos[o].editado=!0,this.arquivos.sort((i,n)=>i.nome.localeCompare(n.nome))}).onCancel(()=>{})},async editarNome(){const e=this.visualizador,t=this.arquivos.find(a=>a.id===(e==null?void 0:e.id)),o="jpg",r=`${e==null?void 0:e.titulo}.${o}`;t.nome=r,this.arquivos.sort((a,i)=>a.nome.localeCompare(i.nome))},async remover(e){try{$q.loading.show(),$q.dialog({title:"Remover",message:"Deseja remover o arquivo "+e.nome+".",cancel:{label:"N\xE3o",color:"tertiary",flat:!0},ok:{label:"Sim",color:"negative",unelevated:!0}}).onOk(()=>{const t=this.arquivos.findIndex(o=>o.id===e.id);this.arquivos.splice(t,1)})}catch(t){$q.notifyError(`Erro ao remover arquivo: ${t.message}`),console.error(t)}finally{$q.loading.hide()}},async baixarArquivo(e){try{$q.loading.show();const t=await $db.arquivo.le(e),o=URL.createObjectURL(t);let r=document.createElement("a");r.href=o,r.download=e.nome,r.click()}catch(t){$q.notify({type:"negative",message:"Falha ao iniciar o download"}),console.error("Falha ao iniciar o download. ",t)}finally{$q.loading.hide(),$q.notify({type:"positive",message:"Arquivo baixado com sucesso!"})}},async baixarImagem(e){try{$q.loading.show();const o=await(await fetch(e==null?void 0:e.arquivo)).blob(),r=window.URL.createObjectURL(o),a=document.createElement("a"),i=e==null?void 0:e.nome;a.href=r,a.download=i,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(r)}catch(t){$q.notify({type:"negative",message:"Falha ao iniciar o download"}),console.error("Falha ao iniciar o download. ",t)}finally{$q.loading.hide(),$q.notify({type:"positive",message:"Imagem baixada com sucesso!"})}},toque(e){const t=this.$refs.foto;let o=0;try{o=e.evt.touches.length}catch{}if(this.quantidades=o,this.pinca.scaling||o!==2&&Math.abs(e.delta.x+e.delta.y)<=20&&(t.style.left=parseFloat(t.style.left)+e.delta.x+"px",t.style.top=parseFloat(t.style.top)+e.delta.y+"px"),!this.pinca.scaling&&o===2){const r=this.distancia;r.x1i=e.evt.touches[0].pageX,r.y1i=e.evt.touches[0].pageY,r.x2i=e.evt.touches[1].pageX,r.y2i=e.evt.touches[1].pageY,r.distanciaInicial=Math.hypot(e.evt.touches[0].pageX-e.evt.touches[1].pageX,e.evt.touches[0].pageY-e.evt.touches[1].pageY),this.pinca.width=parseFloat(t.style.width),this.pinca.height=parseFloat(t.style.height),this.pinca.top=parseFloat(t.style.top),this.pinca.left=parseFloat(t.style.left),this.pinca.zoom=Math.hypot(e.evt.touches[0].pageX-e.evt.touches[1].pageX,e.evt.touches[0].pageY-e.evt.touches[1].pageY),this.pinca.scaling=!0}if(this.pinca.scaling&&o===0&&setTimeout(()=>{this.pinca.scaling=!1},500),this.pinca.scaling&&o===2)try{const r=e.evt,a=Math.hypot(r.touches[0].pageX-r.touches[1].pageX,r.touches[0].pageY-r.touches[1].pageY)-this.pinca.zoom,i=this.$refs.foto;i.style.width=this.pinca.width+a+"px",i.style.height=this.pinca.height+a*this.fator+"px",i.style.top=this.pinca.top-a/2*this.fator+"px",i.style.left=this.pinca.left-a/2+"px"}catch(r){console.error(r)}},zoomMais(){const e=this.$refs.foto;e.style.width=parseFloat(e.style.width)+4+"px",e.style.height=parseFloat(e.style.height)+4*this.fator+"px",e.style.top=parseFloat(e.style.top)-2*this.fator+"px",e.style.left=parseFloat(e.style.left)-2+"px"},zoomMenos(){const e=this.$refs.foto;e.style.width=parseFloat(e.style.width)-4+"px",e.style.height=parseFloat(e.style.height)-4*this.fator+"px",e.style.top=parseFloat(e.style.top)+2*this.fator+"px",e.style.left=parseFloat(e.style.left)+2+"px"},moverCima(){this.$refs.foto.style.top=parseFloat(this.$refs.foto.style.top)-3+"px"},moverBaixo(){this.$refs.foto.style.top=parseFloat(this.$refs.foto.style.top)+3+"px"},moverDireita(){this.$refs.foto.style.left=parseFloat(this.$refs.foto.style.left)+3+"px"},moverEsquerda(){this.$refs.foto.style.left=parseFloat(this.$refs.foto.style.left)-3+"px"},toBase64(e){return new Promise((t,o)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(r.result),r.onerror=a=>o(a)})},checkTypeFile(e,t){try{const o=e.split(".").pop().toLowerCase();return t.split("|").includes(o)}catch{return!1}}},beforeMount(){this.offlineEvent=e=>{this.online=!1},this.onlineEvent=e=>{this.online=!0},window.addEventListener("offline",this.offlineEvent),window.addEventListener("online",this.onlineEvent)},unmounted(){window.removeEventListener("offline",this.offlineEvent),window.removeEventListener("online",this.onlineEvent)}},owe={id:"Arquivo"},awe={class:"border-full rounded-borders"},rwe={class:"clickable"},iwe={class:"border-full rounded-borders"},nwe={id:"toque",ref:"toque"},swe=["src"];function lwe(e,t,o,r,a,i){const n=Ve("g-col"),s=Ve("g-label"),l=Ve("g-row");return B(),be("div",owe,[o.cartao?(B(),oe(l,{key:0,id:"cartao",bordered:"","rounded-borders":""},{default:C(()=>[h(n,{col:"12",text:"right",bordered:"bottom"},{default:C(()=>[a.online?ie("",!0):(B(),oe(Pe,{key:0,name:"cloud_off",size:"sm",class:"q-pa-sm"},{default:C(()=>[h(Ft,{anchor:"bottom middle",self:"center middle"},{default:C(()=>t[22]||(t[22]=[K(" N\xE3o foi poss\xEDvel acessar arquivos online ")])),_:1})]),_:1})),h(ae,{onClick:t[0]||(t[0]=u=>i.anexar()),disable:!o.edicao,icon:"add",flat:"",round:""},null,8,["disable"]),h(ae,{onClick:t[1]||(t[1]=u=>i.tirarFoto()),disable:!o.edicao,icon:"photo_camera",flat:"",round:""},null,8,["disable"])]),_:1}),(B(!0),be(Qe,null,qt(o.arquivos,u=>(B(),oe(n,{col:"6 sm4 md3 lg2",key:u.id,relative:"","overflow-hidden":""},{default:C(()=>[A("div",awe,[A("div",rwe,[!u.delete&&i.checkTypeFile(u.nome,"jpeg|png|jpg|bmp|webp")?(B(),oe(l,{key:0,onClick:c=>i.visualizar(u),gutter:"xs","cursor-pointer":""},{default:C(()=>[h(n,{col:"12"},{default:C(()=>[h(Rf,{src:u.arquivo,"spinner-color":"primary",fit:"scale-down",style:{"min-height":"160px","max-height":"160px"}},null,8,["src"])]),_:2},1024),h(n,{col:"12"},{default:C(()=>[h(s,{label:u.nome,lines:"1"},null,8,["label"])]),_:2},1024)]),_:2},1032,["onClick"])):ie("",!0),i.checkTypeFile(u.nome,"jpeg|png|jpg|bmp|webp")?ie("",!0):(B(),oe(l,{key:1,onClick:c=>i.baixarArquivo(u),gutter:"xs","cursor-pointer":""},{default:C(()=>[i.checkTypeFile(u.nome,"pdf")?(B(),oe(n,{key:0,col:"12"},{default:C(()=>[h(Rf,{src:"/statics/svgs/file-pdf.svg","spinner-color":"primary",fit:"scale-down",style:{"min-height":"160px","max-height":"160px"}})]),_:1})):(B(),oe(n,{key:1,col:"12"},{default:C(()=>[h(Rf,{src:"/statics/svgs/file.svg","spinner-color":"primary",fit:"scale-down",style:{"min-height":"160px","max-height":"160px"}})]),_:1})),h(n,{col:"12"},{default:C(()=>[h(s,{label:u.nome,lines:"1"},null,8,["label"])]),_:2},1024)]),_:2},1032,["onClick"]))]),h(l,{gutter:"xs"},{default:C(()=>[h(n,{text:"right"},{default:C(()=>[o.edicao?(B(),oe(ae,{key:0,onClick:c=>i.editar(u),icon:"edit",flat:"",round:"",dense:""},null,8,["onClick"])):ie("",!0),o.edicao?(B(),oe(ae,{key:1,onClick:c=>i.remover(u),icon:"delete",flat:"",round:"",dense:""},null,8,["onClick"])):ie("",!0)]),_:2},1024)]),_:2},1024)])]),_:2},1024))),128))]),_:1})):ie("",!0),o.lista?(B(),oe(l,{key:1,id:"lista",bordered:"","rounded-borders":""},{default:C(()=>[h(n,{col:"12",text:"right",bordered:"bottom"},{default:C(()=>[a.online?ie("",!0):(B(),oe(Pe,{key:0,name:"cloud_off",size:"sm",class:"q-pa-sm"},{default:C(()=>[h(Ft,{anchor:"bottom middle",self:"center middle"},{default:C(()=>t[23]||(t[23]=[K(" N\xE3o foi poss\xEDvel acessar arquivos online ")])),_:1})]),_:1})),h(ae,{onClick:t[2]||(t[2]=u=>i.anexar()),disable:!o.edicao,icon:"add",flat:"",round:""},null,8,["disable"]),h(ae,{onClick:t[3]||(t[3]=u=>i.tirarFoto()),disable:!o.edicao,icon:"photo_camera",flat:"",round:""},null,8,["disable"])]),_:1}),(B(!0),be(Qe,null,qt(o.arquivos,u=>(B(),oe(n,{col:"12",key:u.id,relative:"","overflow-hidden":""},{default:C(()=>[A("div",iwe,[h(l,{gutter:"xs",items:"center"},{default:C(()=>[!u.delete&&i.checkTypeFile(u.nome,"jpeg|png|jpg|bmp|webp")?(B(),oe(n,{key:0,"cursor-pointer":"",clickable:""},{default:C(()=>[h(l,{onClick:c=>i.visualizar(u),items:"center"},{default:C(()=>[h(n,{col:"12 sm4 md3 lg2"},{default:C(()=>[h(Rf,{src:u.arquivo,"spinner-color":"primary",fit:"scale-down",style:{"min-height":"160px","max-height":"160px"}},null,8,["src"])]),_:2},1024),h(n,null,{default:C(()=>[h(s,{label:u.nome,lines:"1"},null,8,["label"])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)):ie("",!0),i.checkTypeFile(u.nome,"jpeg|png|jpg|bmp|webp")?ie("",!0):(B(),oe(n,{key:1,"cursor-pointer":"",clickable:""},{default:C(()=>[h(l,{onClick:c=>i.baixarArquivo(u),items:"center"},{default:C(()=>[i.checkTypeFile(u.nome,"pdf")?(B(),oe(n,{key:0,col:"12 sm4 md3 lg2"},{default:C(()=>[h(Rf,{src:"/statics/svgs/file-pdf.svg","spinner-color":"primary",fit:"scale-down",style:{"min-height":"40px","max-height":"40px"}})]),_:1})):(B(),oe(n,{key:1,col:"12 sm4 md3 lg2"},{default:C(()=>[h(Rf,{src:"/statics/svgs/file.svg","spinner-color":"primary",fit:"scale-down",style:{"min-height":"40px","max-height":"40px"}})]),_:1})),h(n,null,{default:C(()=>[h(s,{label:u.nome,lines:"1"},null,8,["label"])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)),h(n,{col:"shrink",text:"right"},{default:C(()=>[o.edicao?(B(),oe(ae,{key:0,onClick:c=>i.editar(u),icon:"edit",flat:"",round:"",dense:""},null,8,["onClick"])):ie("",!0),o.edicao?(B(),oe(ae,{key:1,onClick:c=>i.remover(u),icon:"delete",flat:"",round:"",dense:""},null,8,["onClick"])):ie("",!0)]),_:2},1024)]),_:2},1024)])]),_:2},1024))),128))]),_:1})):ie("",!0),h(Ht,{modelValue:a.visualizador.visivel,"onUpdate:modelValue":t[21]||(t[21]=u=>a.visualizador.visivel=u),maximized:""},{default:C(()=>[h(To,{container:"",view:"hHh LpR fFf",class:"bg-white"},{default:C(()=>[h(fr,{onResize:t[4]||(t[4]=u=>i.reAjustar())}),h(jo,null,{default:C(()=>[h(Je,null,{default:C(()=>[Ee(h(ae,{icon:"arrow_back",flat:"",round:""},null,512),[[st]]),h(lt,null,{default:C(()=>[h(ma,{modelValue:a.visualizador.titulo,"onUpdate:modelValue":[t[5]||(t[5]=u=>a.visualizador.titulo=u),i.editarNome],debounce:"1500",filled:"",standout:"",dark:"",dense:"",style:{"max-width":"600px",background:"rgba(255,255,255,.13)",margin:"0 auto"}},{prepend:C(()=>[h(Pe,{name:"wallpaper",color:"white",class:"showScreenIcon"})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1}),h(Jo,{class:"overflow-hidden"},{default:C(()=>[h(dn,{class:"overflow-hidden"},{default:C(()=>{var u,c;return[Ee(A("div",nwe,null,512),[[Qa,i.toque,void 0,{prevent:!0,mouse:!0}]]),A("div",{id:"quadro",ref:"quadro",style:_u(`${(u=this.redimensionar)!=null&&u.crop?"":"border:none"}`)},null,4),A("img",{onContextmenu:t[6]||(t[6]=rt(()=>{},["prevent"])),src:(c=a.visualizador)==null?void 0:c.arquivo,id:"foto",ref:"foto"},null,40,swe)]}),_:1})]),_:1}),h(Ui,{class:"bg-light"},{default:C(()=>[h(ae,{id:"salvar",color:"primary",size:"md",icon:"save",round:"",onClick:t[7]||(t[7]=u=>i.salvar()),onContextmenu:t[8]||(t[8]=rt(()=>{},["prevent"])),disable:!o.edicao},null,8,["disable"]),h(ae,{id:"tirarFoto",color:"primary",size:"md",icon:"camera",round:"",onClick:t[9]||(t[9]=u=>i.tirarFoto("editar")),onContextmenu:t[10]||(t[10]=rt(()=>{},["prevent"]))}),h(ae,{id:"anexar",color:"primary",size:"md",icon:"attachment",round:"",onClick:t[11]||(t[11]=u=>i.anexar("editar")),onContextmenu:t[12]||(t[12]=rt(()=>{},["prevent"])),disable:!o.edicao},null,8,["disable"]),h(ae,{id:"baixarImagem",color:"primary",size:"md",icon:"download",round:"",onClick:t[13]||(t[13]=u=>i.baixarImagem(a.visualizador)),onContextmenu:t[14]||(t[14]=rt(()=>{},["prevent"]))}),Ee(h(ae,{id:"zoomMais",color:"primary",size:"md",icon:"zoom_in",round:"",onContextmenu:t[15]||(t[15]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.zoomMais,"0:20",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{id:"zoomMenos",color:"primary",size:"md",icon:"zoom_out",round:"",onContextmenu:t[16]||(t[16]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.zoomMenos,"0:20",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{id:"moverCima",icon:"keyboard_arrow_up",size:"md",color:"primary",round:"",onContextmenu:t[17]||(t[17]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.moverCima,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{id:"moverDireita",icon:"keyboard_arrow_right",size:"md",color:"primary",round:"",onContextmenu:t[18]||(t[18]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.moverDireita,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{id:"moverBaixo",icon:"keyboard_arrow_down",size:"md",color:"primary",round:"",onContextmenu:t[19]||(t[19]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.moverBaixo,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{id:"moverEsquerda",icon:"keyboard_arrow_left",size:"md",color:"primary",round:"",onContextmenu:t[20]||(t[20]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.moverEsquerda,"0:50",{mouse:!0,enter:!0,space:!0}]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var Zm=St(twe,[["render",lwe],["__scopeId","data-v-17bff5ef"]]);const Xy={documento:{},documentoItens:[],arquivo:[]},cwe={components:{Arquivo:Zm,CodigoBarras:Jm,PromptItemV2:Zd},computed:{new(){for(const e of this.dataTmp.documentoItens)e.descricaoAgrupamento=this.descricaoAgrupamento;return{...this.data,...this.dataTmp,arquivo:this.$refs.arquivo.arquivos.map(e=>({...e,idTabelaMaster:this.dataTmp.documento.id,tabelaMaster:"custom"}))}},readonly(){return this.dataTmp.documento.status!=="Or\xE7amento"}},data(){return{contato:{},checarErros:!1,data:{},dataTmp:{},descricaoAgrupamento:"",item:{},hintValorUnitario:{},modalItem:{},subTotal:{},visible:!1,valoresTabelaPreco:[],warningLabel:{}}},emits:["salvar"],methods:{fechar(e){if(e.stopPropagation(),this.isEqual()){this.visible=!1;return}$q.dialog({message:"Ao continuar voc\xEA ir\xE1 perder todas as modifica\xE7\xF5es.",title:"Tem certeza?",cancel:{label:"CANCELAR",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{this.visible=!1})},async abrirModalItem(e){let t={};for(const o of this.dataTmp.documentoItens){if(!o.idItem)continue;this.itemPrompt||(this.itemPrompt={}),this.itemPrompt[o.idItem]||(this.itemPrompt[o.idItem]=await $erp().item.get(o.idItem));let r=$utils.clonarV2(this.itemPrompt[o.idItem]);r.novoValorVenda=o.valorReal,t[o.idItem]={item:r,quantidade:o.quantidade}}this.$refs.promptItem.itensSelecionados=t,this.modalItem.filtros={ativo:!0,bloquearVenda:!1,tipo:e,idEmpresa:this.dataTmp.documento.idEmpresa,idTabelaPreco:this.dataTmp.documento.idItemTabelaPreco},this.modalItem.visivel=!0},async prepararItem(e,t={}){if(!!e&&!this.item[e]&&(t.id||(t=await $db.item.le({id:e})),t.id)){const o=$utils.clonarV2(this.item);o[t.id]={marca:t.marca||"",referencia:t.referencia||"",imagem:t.imagem||"",embalagem:t.embalagem||""},this.item=o}},calculaTotal(){const e=$utils.clonarV2(this.dataTmp.documento);let t=0;for(const o of this.dataTmp.documentoItens)t+=o.subTotal;e.subTotal=$utils.arredondar(t),e.totalDocumento=e.subTotal,this.dataTmp.documento=e},async calculaTotalItem(e,t){const o=$utils.clonarV2(this.dataTmp.documentoItens[e]);if(t==="quantidade"&&this.dataTmp.documento.idItemTabelaPreco){const i=await $erp().itemTabelaPreco.get(this.dataTmp.documento.idItemTabelaPreco);if(i){await this.configurarValoresTabelaPreco(i,o);let n=this.valoresTabelaPreco.find(s=>s.id===o.id);n.quantidadeMaiorQue&&(this.hintValorUnitario[o.id]=`>${n.quantidadeMaiorQue-1}un = ${$filters.numeroZerosDireita(n.valorVendaMaiorQue,4,2)}`),n.quantidadeMaiorQue&&o.quantidade>=n.quantidadeMaiorQue?(o.valorOriginal!==n.valorVendaMaiorQue&&(o.valorOriginal=o.valorItem=n.valorVendaMaiorQue,o.descontoItem=o.descontoPercentualItem=0),this.warningLabel[o.id]="Valor Diferenciado"):(o.valorOriginal!==n.valorVenda&&(o.valorOriginal=o.valorItem=n.valorVenda,o.descontoItem=o.descontoPercentualItem=0),this.warningLabel[o.id]="")}}o.valorItem<o.valorOriginal&&(o.valorItem=o.valorOriginal),t==="descontoPercentualItem"&&(o.descontoItem=$utils.arredondar(o.descontoPercentualItem/100*o.valorItem,4)),["descontoItem","valorItem"].includes(t)&&(o.descontoPercentualItem=$utils.arredondar(o.descontoItem/o.valorItem*100)),o.descontoItem>o.valorItem&&(o.descontoPercentualItem=o.descontoItem=0),["subTotal"].includes(t)&&(this.subTotal[o.id]!==void 0?o.descontoItem=$utils.arredondar(o.valorItem-this.subTotal[o.id],4):o.descontoItem=$utils.arredondar(o.valorItem-o.subTotal,4),o.descontoPercentualItem=$utils.arredondar(o.descontoItem/o.valorItem*100),this.subTotal[o.id]>0&&this.subTotal[o.id]>o.valorItem&&(o.valorItem=this.subTotal[o.id]));let r=$utils.arredondar(o.valorItem-o.descontoItem,4);o.descontoItem=$utils.arredondar(o.valorItem-r,4),$utils.arredondar(r)>$utils.arredondar(o.valorItem)&&(r=o.valorItem,o.descontoPercentualItem=o.descontoItem=0);const a=$utils.clonarV2(this.subTotal);if(a[o.id]=r,this.subTotal=a,o.subTotal=$utils.arredondar(r*o.quantidade),o.total=o.subTotal,o.valorReal=$utils.arredondar(r),o.valorRealTotal=o.total,t==="valorItem"){let i=$utils.clonarV2(this.dataTmp.documentoItens);i[e]={...o,valorItem:0},this.dataTmp.documentoItens=i,this.$nextTick(()=>{i[e]=o,this.dataTmp.documentoItens=i,this.calculaTotal()})}else{let i=$utils.clonarV2(this.dataTmp.documentoItens);i[e]=o,this.dataTmp.documentoItens=i}this.calculaTotal()},async configurarValoresTabelaPreco(e,t){let o=this.valoresTabelaPreco.find(a=>a.id===t.id);if(o)return;let r=await $erp().item.get(t.idItem);o=await $db.itemTabelaPreco.obterValores(e,r,4),this.valoresTabelaPreco.push({id:t.id,...o})},isEqual(){const e={...Xy,...$utils.clonarV2(this.data)},t=$utils.diferencaObjetos(e,this.new);return!Object.keys(t).length},async mostrar(){this.dataTmp={...Xy,...$utils.clonarV2(this.data)},this.warningLabel={},this.valoresTabelaPreco=[],this.checarErros=!1,this.descricaoAgrupamento="",this.dataTmp.documentoItens.length&&(this.descricaoAgrupamento=this.dataTmp.documentoItens[0].descricaoAgrupamento);for(const e of this.dataTmp.documentoItens){this.descricaoAgrupamento||(this.descricaoAgrupamento=e.descricaoAgrupamento),this.prepararItem(e.idItem);const t=$utils.clonarV2(this.subTotal);t[e.id]=e.valorItem-e.descontoItem,this.subTotal=t}this.contato={codigo:"",descricao:"",imagem:""},await $db.contato.le({id:this.dataTmp.documento.idContato}).then(e=>{this.contato.codigo=e.codigoContato||e.id.slice(-6)||"",this.contato.descricao=e.nome||e.apelido||"",this.contato.imagem=e.imagem||""}),this.visible=!0,await this.$nextTick()},async removerItem(e){const t=(this.dataTmp.documentoItens[e]||{}).id;this.dataTmp.documentoItens=this.dataTmp.documentoItens.filter(o=>o.id!==t),this.calculaTotal()},salvar(){if(this.checarErros=!0,!this.dataTmp.documento.dataHoraPrevisto){this.$q.notifyError("Previs\xE3o de entrega n\xE3o preenchida");return}if(this.dataTmp.documento.dataHoraPrevisto){const t=new Date().setHours(0,0,0,0);if(new Date(this.dataTmp.documento.dataHoraPrevisto)<new Date(t)){this.$q.notifyError("Previs\xE3o de entrega incorreta");return}}if(!this.dataTmp.documento.descricao){this.$q.notifyError("Descri\xE7\xE3o n\xE3o preenchida");return}if(!this.dataTmp.documentoItens.length){this.$q.notifyError("N\xE3o h\xE1 itens no carrinho");return}let e=!1;for(const t of this.data.documentoItens){const o=this.new.documentoItens.find(r=>t.id===r.id);if(e=o&&o.quantidade!==t.quantidade,e)break}this.$emit("salvar",{dados:this.new,reiniciarQtde:!this.isEqual()}),this.visible=!1},adicionarItem(e){const t=this.dataTmp.documentoItens.find(a=>a.idItem===e.id);let o=1;e.novoValorVenda=e.valorVenda,t&&(e.novoValorVenda=t.valorReal,o=t.quantidade+1);const r={};r[e.id]={item:e,quantidade:o},this.selecionarItens(r)},async selecionarItens(e){for(const t in e){const o=e[t].item||{},r=e[t].quantidade||0;let a=this.dataTmp.documentoItens.findIndex(i=>i.idItem===t);await this.selecionarItem(t,o,r),a===-1&&(a=this.dataTmp.documentoItens.findIndex(i=>i.idItem===t),a!==-1&&this.calculaTotalItem(a,"quantidade"))}},async selecionarItem(e,t,o){let r=this.dataTmp.documentoItens.findIndex(u=>u.idItem===e);if(r!==-1){t.novoValorVenda!==this.dataTmp.documentoItens[r].valorOriginal&&(t.novoValorVenda<=this.dataTmp.documentoItens[r].valorOriginal?(this.dataTmp.documentoItens[r].valorItem=this.dataTmp.documentoItens[r].valorOriginal,this.dataTmp.documentoItens[r].descontoItem=$utils.arredondar(this.dataTmp.documentoItens[r].valorOriginal-t.novoValorVenda)):(this.dataTmp.documentoItens[r].valorItem=t.novoValorVenda,this.dataTmp.documentoItens[r].descontoItem=0),this.calculaTotalItem(r,"descontoItem")),this.dataTmp.documentoItens[r].quantidade!==o&&(this.dataTmp.documentoItens[r].quantidade=o||1,this.calculaTotalItem(r,"quantidade"));return}const a=await $utils.selecionarCfop({ncm:t.ncm,idItem:t.id,itemTipo:t.tipo,codigoDocumentoOperacao:this.dataTmp.documento.codigoDocumentoOperacao,idContatoDestinatario:this.dataTmp.documento.idContato,idContatoEmitente:this.dataTmp.documento.idEmpresa,operacaoFator:-1});if(!a){this.$q.notify("N\xE3o foi poss\xEDvel localizar o CFOP.");return}const i=(await $db.estoqueSaldoProdutoEmpresa.le({idItem:t.id,idEmpresa:$lodash.get(this.dataTmp,"documento.idEmpresa",""),tipoEstoque:"Dispon\xEDvel"})).find(u=>u.idItem),n=$utils.uuid(),s=$utils.clonarV2(this.subTotal);s[n]=t.valorVenda,this.subTotal=s,this.prepararItem(e,t);const l={id:n,idItem:t.id,idDocumento:this.dataTmp.documento.documentoId,idDocumentoAdicional:this.dataTmp.documento.id,codigoPlanoContaDestino:139,codigoPlanoContaEstoque:146,dataHoraEmissao:$utils.dataAtual(),descontoItem:0,descontoPercentualItem:0,descontoSubTotal:0,descricaoItem:t.descricaoConcatenada,operacao:a==null?void 0:a.operacao,operacaoFator:a==null?void 0:a.fator,idCfop:a==null?void 0:a.id,quantidade:o||1,status:this.dataTmp.documento.status,subTotal:t.valorVenda,tipoItem:t.tipo,total:t.valorVenda,valorCusto:0,valorCustoMedio:$lodash.get(i,"valorCustoMedio",0),valorCustoReposicao:t.valorCustoReposicao||0,valorCustoUltimo:$lodash.get(i,"valorCusto",0),valorItem:t.valorVenda,valorItemUltimo:0,valorOriginal:t.valorVenda,valorReal:t.valorVenda,valorRealTotal:t.valorVenda};this.dataTmp.documentoItens.push(l),r=this.dataTmp.documentoItens.findIndex(u=>u.idItem===e),r!==-1&&t.novoValorVenda!==this.dataTmp.documentoItens[r].valorOriginal&&(t.novoValorVenda<=this.dataTmp.documentoItens[r].valorOriginal?(this.dataTmp.documentoItens[r].valorItem=this.dataTmp.documentoItens[r].valorOriginal,this.dataTmp.documentoItens[r].descontoItem=$utils.arredondar(this.dataTmp.documentoItens[r].valorOriginal-t.novoValorVenda)):(this.dataTmp.documentoItens[r].valorItem=t.novoValorVenda,this.dataTmp.documentoItens[r].descontoItem=0),this.calculaTotalItem(r,"descontoItem")),o||this.calculaTotal()}},created(){this.dataTmp={...Xy},this.modalItem={filtros:{},visivel:!1}}},uwe={class:"layout-padding q-pa-none q-pb-md"},dwe={class:"u-container"},fwe={class:"row items-center"},mwe={class:"col q-ma-sm q-title"},pwe={class:"col-12"},hwe={class:"col-12 col-sm-6"},vwe={class:"col-12 col-sm-6"},gwe={class:"bg-white q-mt-md"},_we={class:"q-pa-md"},bwe={class:"bg-white q-mt-md"},ywe={key:0,class:"q-pa-lg text-center"},xwe={class:"col-auto"},Cwe={class:"col-12 q-mb-lg"},wwe={class:"q-col-gutter-x-sm row"},Ewe=["warning","warning-label"],Swe={class:"col-4 col-sm-3 col-lg-2"},Iwe={class:"col-4 col-sm-3 col-lg-2"},Awe={class:"col-3 col-lg-2"},Twe={class:"col-5 col-sm-8 col-lg-2"},Dwe={class:"col-4 col-lg-2"},Owe={class:"col-12"},Pwe={class:"u-container"},Fwe={class:"q-ml-sm"};function Mwe(e,t,o,r,a,i){const n=Ve("Avatar"),s=Ve("badge"),l=Ve("campo"),u=Ve("row"),c=Ve("Arquivo"),d=Ve("CodigoBarras"),f=Ve("PromptItemV2");return B(),be(Qe,null,[h(Ht,{modelValue:a.visible,"onUpdate:modelValue":t[6]||(t[6]=m=>a.visible=m),persistent:"",maximized:"",onKeyup:jr(i.fechar,["esc"])},{default:C(()=>[h(To,{container:"",class:"bg-light"},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,null,{default:C(()=>[h(ae,{icon:"arrow_back",flat:"",round:"",dense:"",onClick:i.fechar},null,8,["onClick"]),h(lt,null,{default:C(()=>t[8]||(t[8]=[K("Custom")])),_:1}),h(ae,{class:"q-ml-sm no-shadow",color:"white","text-color":"primary",label:"Salvar",onClick:i.salvar,unelevated:""},null,8,["onClick"])]),_:1})]),_:1}),h(Jo,null,{default:C(()=>[A("div",uwe,[A("div",dwe,[h(Mt,{class:"q-pa-md q-pa-md q-mt-md bg-white no-shadow"},{default:C(()=>[h(Je,{class:"q-pb-md q-px-none",color:"black",dark:""},{default:C(()=>[h(lt,{class:"q-px-none"},{default:C(()=>[A("div",fwe,[h(n,{imagem:a.contato.imagem,rotulo:a.contato.descricao,tamanho:"40",style:{float:"left"}},null,8,["imagem","rotulo"]),A("div",mwe,le(a.contato.descricao),1)])]),_:1}),h(s,null,{default:C(()=>[K("#"+le(a.contato.codigo),1)]),_:1})]),_:1}),h(u,{class:"q-col-gutter-md"},{default:C(()=>[A("div",pwe,[h(l,{modelValue:a.dataTmp.documento.descricao,"onUpdate:modelValue":t[0]||(t[0]=m=>a.dataTmp.documento.descricao=m),rotuloFixo:"Descri\xE7\xE3o",tipo:"texto",autogrow:"","somente-leitura":i.readonly},null,8,["modelValue","somente-leitura"])]),A("div",hwe,[h(l,{modelValue:a.dataTmp.documento.observacao,"onUpdate:modelValue":t[1]||(t[1]=m=>a.dataTmp.documento.observacao=m),rotuloFixo:"Observa\xE7\xE3o",tipo:"textoArea","somente-leitura":i.readonly},null,8,["modelValue","somente-leitura"])]),A("div",vwe,[h(l,{modelValue:a.descricaoAgrupamento,"onUpdate:modelValue":t[2]||(t[2]=m=>a.descricaoAgrupamento=m),rotuloFixo:"Descri\xE7\xE3o Agrupamento",tipo:"texto",autogrow:"",somenteLeitura:i.readonly,"class-campo":"q-mb-md"},null,8,["modelValue","somenteLeitura"]),h(l,{modelValue:a.dataTmp.documento.dataHoraPrevisto,"onUpdate:modelValue":t[3]||(t[3]=m=>a.dataTmp.documento.dataHoraPrevisto=m),maxlength:"10",rotulo:"Previs\xE3o de Entrega",tipo:"data",somenteLeitura:i.readonly},null,8,["modelValue","somenteLeitura"])])]),_:1})]),_:1}),A("div",gwe,[h(Je,{class:"text-tertiary"},{default:C(()=>[h(Pe,{name:"image",size:"24px"}),h(lt,null,{default:C(()=>t[9]||(t[9]=[K("Imagens")])),_:1})]),_:1}),A("div",_we,[h(c,{id:a.data.id,arquivos:a.data.arquivo,edicao:!i.readonly,tipo:"customArquivo",redimensionar:{crop:!0,width:1200,height:1200},cartao:"",ref:"arquivo"},null,8,["id","arquivos","edicao"])])]),A("div",bwe,[h(Je,null,{default:C(()=>[h(Pe,{name:"shopping_cart",size:"24px",class:"text-tertiary"}),h(lt,{class:"text-tertiary"},{default:C(()=>t[10]||(t[10]=[K("Carrinho")])),_:1}),h(ae,{class:"hideondesktop",color:"primary",flat:"",round:"",icon:"add",size:"md"},{default:C(()=>[h(aa,null,{default:C(()=>[h(At,{link:"","no-border":"",separator:""},{default:C(()=>[Ee((B(),oe(qe,{clickable:""},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"add"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[11]||(t[11]=[K("Produtos")])),_:1})]),_:1})]),_:1})),[[st]]),Ee((B(),oe(qe,{clickable:""},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"add"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[12]||(t[12]=[K("Servi\xE7os")])),_:1})]),_:1})]),_:1})),[[st]])]),_:1})]),_:1})]),_:1}),i.readonly?ie("",!0):(B(),oe(ae,{key:0,color:"primary",flat:"",icon:"add",label:"Produto",class:"hideonmobile q-px-sm q-ml-sm",onClick:t[4]||(t[4]=m=>i.abrirModalItem("Produto"))})),i.readonly?ie("",!0):(B(),oe(ae,{key:1,color:"primary",flat:"",icon:"add",label:"Servi\xE7o",class:"hideonmobile q-px-sm q-ml-sm",onClick:t[5]||(t[5]=m=>i.abrirModalItem("Servi\xE7o"))})),i.readonly?ie("",!0):(B(),oe(d,{key:2,itemFiltros:{ativo:!0,bloquearVenda:!1,idEmpresa:a.dataTmp.documento.idEmpresa,idItemTabelaPreco:a.dataTmp.documento.idItemTabelaPreco},documentoItens:a.dataTmp.documentoItens,onAdicionar:i.adicionarItem,onAtualizar:i.selecionarItens},null,8,["itemFiltros","documentoItens","onAdicionar","onAtualizar"]))]),_:1}),a.dataTmp.documentoItens.length?(B(!0),be(Qe,{key:1},qt(a.dataTmp.documentoItens,(m,p)=>(B(),be("div",{class:"items-carrinho items-center row q-py-sm q-mx-lg",key:p},[A("div",xwe,[h(n,{imagem:(a.item[m.idItem]||{}).imagem,rotulo:m.descricaoItem,tamanho:"40"},null,8,["imagem","rotulo"])]),h(Je,{class:"Venda-itemBarra bg-transparent col q-pr-none q-py-none",color:"black",dark:""},{default:C(()=>[h(fe,{class:"q-px-none"},{default:C(()=>[h(Re,null,{default:C(()=>[K(le(m.descricaoItem),1)]),_:2},1024),h(Re,{caption:""},{default:C(()=>[K(le((a.item[m.idItem]||{}).marca),1)]),_:2},1024)]),_:2},1024),h(s,{denso:""},{default:C(()=>[K(le(m.tipoItem!=="Produto"?m.tipoItem:"")+" ",1),A("span",null,[K(le((a.item[m.idItem]||{}).referencia)+" ",1),h(Ft,null,{default:C(()=>t[14]||(t[14]=[K("Refer\xEAncia")])),_:1})])]),_:2},1024),i.readonly?ie("",!0):(B(),oe(ae,{key:0,color:"tertiary",dense:"",flat:"",icon:"delete",round:"",onClick:v=>i.removerItem(p)},{default:C(()=>[h(Ft,null,{default:C(()=>t[15]||(t[15]=[K("Remover Item")])),_:1})]),_:2},1032,["onClick"]))]),_:2},1024),A("div",Cwe,[A("div",wwe,[A("div",{class:"col-4 col-sm-3 col-lg-2",warning:!!a.warningLabel[m.id],"warning-label":a.warningLabel[m.id]},[h(l,{"class-campo":"u-campoCompacto",align:"left",tipo:"decimal",decimals:"4",zerosDireita:"2","somente-leitura":i.readonly,modelValue:m.valorItem,"onUpdate:modelValue":v=>m.valorItem=v,rotulo:"Valor do produto 1",outlined:"",onBlur:v=>i.calculaTotalItem(p,"valorItem"),aviso:"",avisoRotulo:a.hintValorUnitario[m.id]},null,8,["somente-leitura","modelValue","onUpdate:modelValue","onBlur","avisoRotulo"])],8,Ewe),A("div",Swe,[h(u,{class:"items-center"},{default:C(()=>[h(Pe,{name:"mdi-minus",color:"primary"}),h(l,{"class-campo":"u-campoCompacto ",opcoes:{maximumValue:100},tipo:"decimal",decimals:"2",rotulo:"Desconto percentual",outlined:"",suffix:"%",modelValue:m.descontoPercentualItem,"onUpdate:modelValue":v=>m.descontoPercentualItem=v,"somente-leitura":i.readonly,onBlur:v=>i.calculaTotalItem(p,"descontoPercentualItem")},null,8,["modelValue","onUpdate:modelValue","somente-leitura","onBlur"])]),_:2},1024)]),A("div",Iwe,[h(l,{"class-campo":"u-campoCompacto",opcoes:{maximumValue:m.valorItem,minimumValue:0},tipo:"decimal",decimals:"4",zerosDireita:"2",modelValue:m.descontoItem,"onUpdate:modelValue":v=>m.descontoItem=v,"somente-leitura":i.readonly,rotulo:"Desconto em reais",outlined:"",onBlur:v=>i.calculaTotalItem(p,"descontoItem")},null,8,["opcoes","modelValue","onUpdate:modelValue","somente-leitura","onBlur"])]),A("div",Awe,[h(u,{class:"items-center"},{default:C(()=>[h(Pe,{name:"mdi-equal",color:"primary",class:"hideonmobile"}),h(l,{"class-campo":"u-campoCompacto text-weight-bold",align:e.$q.screen.lt.sm?"left":"right",rotulo:"Subtotal",outlined:"",opcoes:{maximumValue:m.valorItem,minimumValue:0},tipo:"decimal",decimals:"4",zerosDireita:"2",modelValue:a.subTotal[m.id],"onUpdate:modelValue":v=>a.subTotal[m.id]=v,"somente-leitura":i.readonly,onBlur:v=>i.calculaTotalItem(p,"subTotal")},null,8,["align","opcoes","modelValue","onUpdate:modelValue","somente-leitura","onBlur"])]),_:2},1024)]),A("div",Twe,[h(u,{class:"items-center"},{default:C(()=>[h(Pe,{name:"mdi-close",color:"primary"}),h(l,{"class-campo":"u-campoCompacto",min:"0",modelValue:m.quantidade,"onUpdate:modelValue":[v=>m.quantidade=v,v=>i.calculaTotalItem(p,"quantidade")],"somente-leitura":i.readonly,outlined:"",tipo:"quantidade",decimals:"4",aviso:"",avisoRotulo:(a.item[m.idItem]||{}).embalagem},null,8,["modelValue","onUpdate:modelValue","somente-leitura","avisoRotulo"])]),_:2},1024)]),A("div",Dwe,[h(u,{class:"items-center"},{default:C(()=>[h(Pe,{name:"mdi-equal",color:"primary",class:"hideonmobile"}),h(l,{"class-campo":"u-campoCompacto text-weight-bold","somente-leitura":"",rotulo:"Total",outlined:"",tipo:"decimal",decimals:"2",modelValue:m.total,"onUpdate:modelValue":v=>m.total=v},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)])])]),A("div",Owe,[h(l,{rotulo:"Observa\xE7\xE3o",modelValue:m.observacao,"onUpdate:modelValue":v=>m.observacao=v},null,8,["modelValue","onUpdate:modelValue"])])]))),128)):(B(),be("div",ywe,t[13]||(t[13]=[A("p",null,"N\xE3o h\xE1 itens no carrinho",-1),A("p",{class:"text-caption"},"Para adicionar, utilize os bot\xF5es acima ou insira o c\xF3digo de barras",-1)])))])])])]),_:1}),h(Ui,{class:"bg-light"},{default:C(()=>[A("div",Pwe,[h(Je,{class:"text-tertiary bg-light"},{default:C(()=>[h(lt),t[16]||(t[16]=K(" Total ")),A("strong",Fwe,le(e.$filters.numero(a.dataTmp.documento.totalDocumento,2)),1)]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue","onKeyup"]),h(f,{modelValue:a.modalItem.visivel,"onUpdate:modelValue":t[7]||(t[7]=m=>a.modalItem.visivel=m),filtro:a.modalItem.filtros,habilitarQuantidade:!0,onSelecionarItens:i.selecionarItens,ref:"promptItem"},null,8,["modelValue","filtro","onSelecionarItens"])],64)}var Nwe=St(cwe,[["render",Mwe]]);const kwe={props:{documento:{required:!0,type:Object,default:()=>({})},prioridade:Object},computed:{status(){return this.documento.status||null},cor(){if(!this.status)return;if(this.prioridade&&this.prioridade.cor)return this.prioridade.cor;const e=this.status.toUpperCase();return{ABERTA:"positive","AGUARDANDO FATURAMENTO":"warning","AGUARDANDO PAGAMENTO":"warning",CANCELADO:"negative",FATURADO:"tertiary",FINALIZADO:"tertiary","N\xC3O APROVADO":"negative",OR\u00C7AMENTO:"positive"}[e]||"positive"}}};function Rwe(e,t,o,r,a,i){var s,l;const n=Ve("BadgeCopiarUid");return B(),oe(n,{id:(s=o.documento)==null?void 0:s.id,numero:(l=o.documento)==null?void 0:l.numero,escuro:i.cor!=="warning",cor:i.cor,dica:`${i.status} ${o.prioridade&&o.prioridade.tooltip?o.prioridade.tooltip:""}`},null,8,["id","numero","escuro","cor","dica"])}var OR=St(kwe,[["render",Rwe]]);const Vwe={data(){return{documento:{},documentoContato:[],metaDados:{}}},watch:{async documento(){const e=this.documento,t={};e.idFatura||(t.Emitente=[e.descricaoEmpresa,e.numeroDocumentoEmpresa]);const o=this.documentoContato.find(l=>(l.descricao||"").trim().toLowerCase()==="comprador"),r=this.documentoContato.find(l=>(l.descricao||"").trim().toLowerCase()==="representando"),a=this.documentoContato.find(l=>(l.descricao||"").trim().toLowerCase()==="conv\xEAnio");let i;o!=null&&o.idContato&&(i=await et.contato.le({id:o.idContato}));let n;r!=null&&r.idContato&&(n=await et.contato.le({id:r.idContato}));let s;a!=null&&a.idContato&&(s=await et.contato.le({id:a.idContato})),e.idContatoVendedor&&(t.Vendedor=[(await et.contato.le({id:e.idContatoVendedor})).nome]),e.idContatoDigitador&&(t.Digitador=[(await et.contato.le({id:e.idContatoDigitador})).nome]),e.idContatoIndicacao&&(t.Indica\u00E7\u00E3o=[(await et.contato.le({id:e.idContatoIndicacao})).nome]),e.idContatoResponsavel&&(t.Respons\u00E1vel=[(await et.contato.le({id:e.idContatoResponsavel})).nome]),i&&(t.Comprador=[i.nome]),n&&(t.Representando=[n.nome]),s&&(t.Conv\u00EAnio=[s.nome]),e.operacao&&(t.Opera\u00E7\u00E3o=[e.operacao]),e.idItemTabelaPreco&&(t["Tabela de Pre\xE7o"]=[(await et.itemTabelaPreco.le({id:e.idItemTabelaPreco})).descricao]),e.dataHoraEmissao&&(t.Emiss\u00E3o=[this.$filters.dataHora(e.dataHoraEmissao)]),e.dataHoraFinalizado&&(t.Finaliza\u00E7\u00E3o=[this.$filters.dataHora(e.dataHoraFinalizado)]),!e.idFatura&&e.idContato&&(t["Tel."]=[e.telefoneContato]),!e.idFatura&&e.idContato&&(t["End."]=[e.descricaoContatoEndereco]),!e.idFatura&&e.tokenBonusGerado&&$db.usuario.desenvolvedor()&&(t["B\xF4nus Gerado"]=[e.tokenBonusGerado]),this.metaDados=Vr(t)}}};function Bwe(e,t,o,r,a,i){const n=Ve("g-label"),s=Ve("g-col"),l=Ve("g-row");return B(),oe(l,{gutter:"xs-x"},{default:C(()=>[(B(!0),be(Qe,null,qt(a.metaDados,(u,c)=>(B(),oe(s,{key:c,col:c==="End."?"12":"12 md"},{default:C(()=>[h(n,{text:"caption bold"},{default:C(()=>[K(le(c)+" ",1),(B(!0),be(Qe,null,qt(u,(d,f)=>(B(),be("span",{key:f,class:"text-weight-regular q-ml-xs"},le(d),1))),128))]),_:2},1024)]),_:2},1032,["col"]))),128))]),_:1})}var PR=St(Vwe,[["render",Bwe]]);const qwe={data(){return{visivel:!1,campos:{nome:"",numeroDocumentoNacional:""},validations:{nome:[e=>(e||"").trim()!==""||"O nome \xE9 obrigat\xF3rio",e=>e.length>=2&&e.length<=50||"Use 2 ou mais caracteres"],numeroDocumentoNacional:[async e=>{const t=(this.campos||{}).id||"",{valido:o,mensagem:r}=await $utils.validarDocumentoNacionalUnico(e,t);return o||r}]},observacaoFilho:""}},methods:{async criarContato(){try{const e=await $db.contato.criarContatoBasico(this.campos);e.observacaoFilho=this.observacaoFilho,this.resolve(e),this.visivel=!1,this.$q.notifyPositive(this.msgSucesso)}catch(e){this.$q.notifyError(this.msgErro,e)}},onHide(){this.resolve()},mostrar(){return this.campos={nome:"",numeroDocumentoNacional:""},this.observacaoFilho="",this.visivel=!0,new Promise((e,t)=>{this.resolve=e})}},props:{cpfCnpj:{default:!1,type:Boolean},dataNascimento:{default:!1,type:Boolean},msgErro:{default:"Ocorreu um erro ao salvar.",type:String},msgSucesso:{default:"Contato criado com sucesso.",type:String},numeroDocumentoMunicipal:{type:String},observacao:{default:!1,type:Boolean},titulo:{default:"Criar contato",type:String}}},Lwe={class:"row justify-end"};function $we(e,t,o,r,a,i){const n=Ve("campo"),s=Ve("row"),l=ah("mask");return B(),oe(Ht,{modelValue:a.visivel,"onUpdate:modelValue":t[5]||(t[5]=u=>a.visivel=u),onHide:t[6]||(t[6]=u=>i.onHide())},{default:C(()=>[h(Mt,null,{default:C(()=>[h(cl,{class:"ItemFicha",onSubmit:i.criarContato},{default:C(()=>[h(Je,{class:"bg-primary text-white"},{default:C(()=>[Ee(h(ae,{dense:"",flat:"",icon:"arrow_back",round:""},null,512),[[st]]),h(lt,null,{default:C(()=>[K(le(o.titulo),1)]),_:1})]),_:1}),h(Ra,null,{default:C(()=>[h(s,null,{default:C(()=>[h(n,{col:"12",modelValue:a.campos.nome,"onUpdate:modelValue":t[0]||(t[0]=u=>a.campos.nome=u),modelModifiers:{trim:!0},rotulo:"Nome do contato",rules:a.validations.nome,maxlength:"50"},null,8,["modelValue","rules"]),o.cpfCnpj?Ee((B(),oe(n,{key:0,col:"12",modelValue:a.campos.numeroDocumentoNacional,"onUpdate:modelValue":t[1]||(t[1]=u=>a.campos.numeroDocumentoNacional=u),modelModifiers:{trim:!0},rotulo:"CPF/CNPJ",rules:a.validations.numeroDocumentoNacional},null,8,["modelValue","rules"])),[[l,["###.###.###-##","##.###.###/####-##"]]]):ie("",!0),o.numeroDocumentoMunicipal?(B(),oe(n,{key:1,col:"12",modelValue:a.campos.numeroDocumentoMunicipal,"onUpdate:modelValue":t[2]||(t[2]=u=>a.campos.numeroDocumentoMunicipal=u),rotulo:o.numeroDocumentoMunicipal},null,8,["modelValue","rotulo"])):ie("",!0),o.dataNascimento?(B(),oe(n,{key:2,modelValue:a.campos.dataAbertura,"onUpdate:modelValue":t[3]||(t[3]=u=>a.campos.dataAbertura=u),col:"12",rotulo:"Data de nascimento",tipo:"data"},null,8,["modelValue"])):ie("",!0),o.observacao?(B(),oe(n,{key:3,modelValue:a.observacaoFilho,"onUpdate:modelValue":t[4]||(t[4]=u=>a.observacaoFilho=u),modelModifiers:{trim:!0},col:"12",maxlength:"50",rotulo:"Observacao"},null,8,["modelValue"])):ie("",!0)]),_:1})]),_:1}),h(Je,null,{default:C(()=>[h(lt,null,{default:C(()=>[A("div",Lwe,[Ee(h(ae,{flat:"",color:"tertiary",label:"Cancelar"},null,512),[[st]]),h(ae,{unelevated:"",color:"primary",label:"Criar",type:"submit"})])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])}var tA=St(qwe,[["render",$we]]);let Uwe=0;const FR=["click","keydown"],MR={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${Uwe++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function NR(e,t,o,r){const a=kr(WF,cr);if(a===cr)return console.error("QTab/QRouteTab component needs to be child of QTabs"),cr;const{proxy:i}=xt(),n=Ue(null),s=Ue(null),l=Ue(null),u=j(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),c=j(()=>a.currentModel.value===e.name),d=j(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(c.value===!0?" q-tab--active"+(a.tabProps.value.activeClass?" "+a.tabProps.value.activeClass:"")+(a.tabProps.value.activeColor?` text-${a.tabProps.value.activeColor}`:"")+(a.tabProps.value.activeBgColor?` bg-${a.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&a.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||a.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(r!==void 0?r.linkClass.value:"")),f=j(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(a.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),m=j(()=>e.disable===!0||a.hasFocus.value===!0||c.value===!1&&a.hasActiveTab.value===!0?-1:e.tabindex||0);function p(_,w){if(w!==!0&&n.value!==null&&n.value.focus(),e.disable===!0){r!==void 0&&r.hasRouterLink.value===!0&&zo(_);return}if(r===void 0){a.updateModel({name:e.name}),o("click",_);return}if(r.hasRouterLink.value===!0){const S=(D={})=>{let M;const O=D.to===void 0||Ys(D.to,e.to)===!0?a.avoidRouteWatcher=Cm():null;return r.navigateToRouterLink(_,{...D,returnRouterError:!0}).catch(T=>{M=T}).then(T=>{if(O===a.avoidRouteWatcher&&(a.avoidRouteWatcher=!1,M===void 0&&(T===void 0||T.message!==void 0&&T.message.startsWith("Avoided redundant navigation")===!0)&&a.updateModel({name:e.name})),D.returnRouterError===!0)return M!==void 0?Promise.reject(M):T})};o("click",_,S),_.defaultPrevented!==!0&&S();return}o("click",_)}function v(_){cs(_,[13,32])?p(_,!0):T_(_)!==!0&&_.keyCode>=35&&_.keyCode<=40&&_.altKey!==!0&&_.metaKey!==!0&&a.onKbdNavigate(_.keyCode,i.$el)===!0&&zo(_),o("keydown",_)}function g(){const _=a.tabProps.value.narrowIndicator,w=[],S=G("div",{ref:l,class:["q-tab__indicator",a.tabProps.value.indicatorClass]});e.icon!==void 0&&w.push(G(Pe,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&w.push(G("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&w.push(e.alertIcon!==void 0?G(Pe,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):G("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),_===!0&&w.push(S);const D=[G("div",{class:"q-focus-helper",tabindex:-1,ref:n}),G("div",{class:f.value},Mr(t.default,w))];return _===!1&&D.push(S),D}const x={name:j(()=>e.name),rootRef:s,tabIndicatorRef:l,routeData:r};Vo(()=>{a.unregisterTab(x)}),Va(()=>{a.registerTab(x)});function b(_,w){const S={ref:s,class:d.value,tabindex:m.value,role:"tab","aria-selected":c.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:p,onKeydown:v,...w};return Ee(G(_,S,g()),[[VE,u.value]])}return{renderTab:b,$tabs:a}}var Jc=Ct({name:"QTab",props:MR,emits:FR,setup(e,{slots:t,emit:o}){const{renderTab:r}=NR(e,t,o);return()=>r("div")}});function zwe(e,t,o){const r=o===!0?["left","right"]:["top","bottom"];return`absolute-${t===!0?r[0]:r[1]}${e?` text-${e}`:""}`}const Hwe=["left","center","right","justify"];var Ab=Ct({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>Hwe.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:t,emit:o}){const{proxy:r}=xt(),{$q:a}=r,{registerTick:i}=fm(),{registerTick:n}=fm(),{registerTick:s}=fm(),{registerTimeout:l,removeTimeout:u}=hu(),{registerTimeout:c,removeTimeout:d}=hu(),f=Ue(null),m=Ue(null),p=Ue(e.modelValue),v=Ue(!1),g=Ue(!0),x=Ue(!1),b=Ue(!1),_=[],w=Ue(0),S=Ue(!1);let D=null,M=null,O;const T=j(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:zwe(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),I=j(()=>{const se=w.value,pe=p.value;for(let we=0;we<se;we++)if(_[we].name.value===pe)return!0;return!1}),N=j(()=>`q-tabs__content--align-${v.value===!0?"left":b.value===!0?"justify":e.align}`),P=j(()=>`q-tabs row no-wrap items-center q-tabs--${v.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),F=j(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+N.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),L=j(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),z=j(()=>e.vertical!==!0&&a.lang.rtl===!0),H=j(()=>Kp===!1&&z.value===!0);ct(z,re),ct(()=>e.modelValue,se=>{X({name:se,setCurrent:!0,skipEmit:!0})}),ct(()=>e.outsideArrows,Y);function X({name:se,setCurrent:pe,skipEmit:we}){p.value!==se&&(we!==!0&&e["onUpdate:modelValue"]!==void 0&&o("update:modelValue",se),(pe===!0||e["onUpdate:modelValue"]===void 0)&&(ye(p.value,se),p.value=se))}function Y(){i(()=>{de({width:f.value.offsetWidth,height:f.value.offsetHeight})})}function de(se){if(L.value===void 0||m.value===null)return;const pe=se[L.value.container],we=Math.min(m.value[L.value.scroll],Array.prototype.reduce.call(m.value.children,(Ge,Ze)=>Ge+(Ze[L.value.content]||0),0)),Ne=pe>0&&we>pe;v.value=Ne,Ne===!0&&n(re),b.value=pe<parseInt(e.breakpoint,10)}function ye(se,pe){const we=se!=null&&se!==""?_.find(Ge=>Ge.name.value===se):null,Ne=pe!=null&&pe!==""?_.find(Ge=>Ge.name.value===pe):null;if(we&&Ne){const Ge=we.tabIndicatorRef.value,Ze=Ne.tabIndicatorRef.value;D!==null&&(clearTimeout(D),D=null),Ge.style.transition="none",Ge.style.transform="none",Ze.style.transition="none",Ze.style.transform="none";const ot=Ge.getBoundingClientRect(),Pt=Ze.getBoundingClientRect();Ze.style.transform=e.vertical===!0?`translate3d(0,${ot.top-Pt.top}px,0) scale3d(1,${Pt.height?ot.height/Pt.height:1},1)`:`translate3d(${ot.left-Pt.left}px,0,0) scale3d(${Pt.width?ot.width/Pt.width:1},1,1)`,s(()=>{D=setTimeout(()=>{D=null,Ze.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",Ze.style.transform="none"},70)})}Ne&&v.value===!0&&W(Ne.rootRef.value)}function W(se){const{left:pe,width:we,top:Ne,height:Ge}=m.value.getBoundingClientRect(),Ze=se.getBoundingClientRect();let ot=e.vertical===!0?Ze.top-Ne:Ze.left-pe;if(ot<0){m.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(ot),re();return}ot+=e.vertical===!0?Ze.height-Ge:Ze.width-we,ot>0&&(m.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(ot),re())}function re(){const se=m.value;if(se===null)return;const pe=se.getBoundingClientRect(),we=e.vertical===!0?se.scrollTop:Math.abs(se.scrollLeft);z.value===!0?(g.value=Math.ceil(we+pe.width)<se.scrollWidth-1,x.value=we>0):(g.value=we>0,x.value=e.vertical===!0?Math.ceil(we+pe.height)<se.scrollHeight:Math.ceil(we+pe.width)<se.scrollWidth)}function _e(se){M!==null&&clearInterval(M),M=setInterval(()=>{Te(se)===!0&&Ie()},5)}function ve(){_e(H.value===!0?Number.MAX_SAFE_INTEGER:0)}function ke(){_e(H.value===!0?0:Number.MAX_SAFE_INTEGER)}function Ie(){M!==null&&(clearInterval(M),M=null)}function he(se,pe){const we=Array.prototype.filter.call(m.value.children,Pt=>Pt===pe||Pt.matches&&Pt.matches(".q-tab.q-focusable")===!0),Ne=we.length;if(Ne===0)return;if(se===36)return W(we[0]),we[0].focus(),!0;if(se===35)return W(we[Ne-1]),we[Ne-1].focus(),!0;const Ge=se===(e.vertical===!0?38:37),Ze=se===(e.vertical===!0?40:39),ot=Ge===!0?-1:Ze===!0?1:void 0;if(ot!==void 0){const Pt=z.value===!0?-1:1,$t=we.indexOf(pe)+ot*Pt;return $t>=0&&$t<Ne&&(W(we[$t]),we[$t].focus({preventScroll:!0})),!0}}const De=j(()=>H.value===!0?{get:se=>Math.abs(se.scrollLeft),set:(se,pe)=>{se.scrollLeft=-pe}}:e.vertical===!0?{get:se=>se.scrollTop,set:(se,pe)=>{se.scrollTop=pe}}:{get:se=>se.scrollLeft,set:(se,pe)=>{se.scrollLeft=pe}});function Te(se){const pe=m.value,{get:we,set:Ne}=De.value;let Ge=!1,Ze=we(pe);const ot=se<Ze?-1:1;return Ze+=ot*5,Ze<0?(Ge=!0,Ze=0):(ot===-1&&Ze<=se||ot===1&&Ze>=se)&&(Ge=!0,Ze=se),Ne(pe,Ze),re(),Ge}function J(se,pe){for(const we in se)if(se[we]!==pe[we])return!1;return!0}function q(){let se=null,pe={matchedLen:0,queryDiff:9999,hrefLen:0};const we=_.filter(ot=>ot.routeData!==void 0&&ot.routeData.hasRouterLink.value===!0),{hash:Ne,query:Ge}=r.$route,Ze=Object.keys(Ge).length;for(const ot of we){const Pt=ot.routeData.exact.value===!0;if(ot.routeData[Pt===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:$t,query:fo,matched:He,href:tt}=ot.routeData.resolvedLink.value,$e=Object.keys(fo).length;if(Pt===!0){if($t!==Ne||$e!==Ze||J(Ge,fo)===!1)continue;se=ot.name.value;break}if($t!==""&&$t!==Ne||$e!==0&&J(fo,Ge)===!1)continue;const dt={matchedLen:He.length,queryDiff:Ze-$e,hrefLen:tt.length-$t.length};if(dt.matchedLen>pe.matchedLen){se=ot.name.value,pe=dt;continue}else if(dt.matchedLen!==pe.matchedLen)continue;if(dt.queryDiff<pe.queryDiff)se=ot.name.value,pe=dt;else if(dt.queryDiff!==pe.queryDiff)continue;dt.hrefLen>pe.hrefLen&&(se=ot.name.value,pe=dt)}se===null&&_.some(ot=>ot.routeData===void 0&&ot.name.value===p.value)===!0||X({name:se,setCurrent:!0})}function ne(se){if(u(),S.value!==!0&&f.value!==null&&se.target&&typeof se.target.closest=="function"){const pe=se.target.closest(".q-tab");pe&&f.value.contains(pe)===!0&&(S.value=!0,v.value===!0&&W(pe))}}function U(){l(()=>{S.value=!1},30)}function Z(){R.avoidRouteWatcher===!1?c(q):d()}function Ce(){if(O===void 0){const se=ct(()=>r.$route.fullPath,Z);O=()=>{se(),O=void 0}}}function Q(se){_.push(se),w.value++,Y(),se.routeData===void 0||r.$route===void 0?c(()=>{if(v.value===!0){const pe=p.value,we=pe!=null&&pe!==""?_.find(Ne=>Ne.name.value===pe):null;we&&W(we.rootRef.value)}}):(Ce(),se.routeData.hasRouterLink.value===!0&&Z())}function V(se){_.splice(_.indexOf(se),1),w.value--,Y(),O!==void 0&&se.routeData!==void 0&&(_.every(pe=>pe.routeData===void 0)===!0&&O(),Z())}const R={currentModel:p,tabProps:T,hasFocus:S,hasActiveTab:I,registerTab:Q,unregisterTab:V,verifyRouteModel:Z,updateModel:X,onKbdNavigate:he,avoidRouteWatcher:!1};rl(WF,R);function ee(){D!==null&&clearTimeout(D),Ie(),O!==void 0&&O()}let ce;return Vo(ee),Bs(()=>{ce=O!==void 0,ee()}),ac(()=>{ce===!0&&Ce(),Y()}),()=>G("div",{ref:f,class:P.value,role:"tablist",onFocusin:ne,onFocusout:U},[G(fr,{onResize:de}),G("div",{ref:m,class:F.value,onScroll:re},uo(t.default)),G(Pe,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(g.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||a.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:ve,onTouchstartPassive:ve,onMouseupPassive:Ie,onMouseleavePassive:Ie,onTouchendPassive:Ie}),G(Pe,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(x.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||a.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:ke,onTouchstartPassive:ke,onMouseupPassive:Ie,onMouseleavePassive:Ie,onTouchendPassive:Ie})])}});function jwe(e){const t=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((o,r)=>{const a=parseFloat(o);a&&(t[r]=a)}),t}var Gwe=uh({name:"touch-swipe",beforeMount(e,{value:t,arg:o,modifiers:r}){if(r.mouse!==!0&&Ho.has.touch!==!0)return;const a=r.mouseCapture===!0?"Capture":"",i={handler:t,sensitivity:jwe(o),direction:a_(r),noop:Fs,mouseStart(n){r_(n,i)&&Jw(n)&&(Ir(i,"temp",[[document,"mousemove","move",`notPassive${a}`],[document,"mouseup","end","notPassiveCapture"]]),i.start(n,!0))},touchStart(n){if(r_(n,i)){const s=n.target;Ir(i,"temp",[[s,"touchmove","move","notPassiveCapture"],[s,"touchcancel","end","notPassiveCapture"],[s,"touchend","end","notPassiveCapture"]]),i.start(n)}},start(n,s){Ho.is.firefox===!0&&om(e,!0);const l=ls(n);i.event={x:l.left,y:l.top,time:Date.now(),mouse:s===!0,dir:!1}},move(n){if(i.event===void 0)return;if(i.event.dir!==!1){zo(n);return}const s=Date.now()-i.event.time;if(s===0)return;const l=ls(n),u=l.left-i.event.x,c=Math.abs(u),d=l.top-i.event.y,f=Math.abs(d);if(i.event.mouse!==!0){if(c<i.sensitivity[1]&&f<i.sensitivity[1]){i.end(n);return}}else if(window.getSelection().toString()!==""){i.end(n);return}else if(c<i.sensitivity[2]&&f<i.sensitivity[2])return;const m=c/s,p=f/s;i.direction.vertical===!0&&c<f&&c<100&&p>i.sensitivity[0]&&(i.event.dir=d<0?"up":"down"),i.direction.horizontal===!0&&c>f&&f<100&&m>i.sensitivity[0]&&(i.event.dir=u<0?"left":"right"),i.direction.up===!0&&c<f&&d<0&&c<100&&p>i.sensitivity[0]&&(i.event.dir="up"),i.direction.down===!0&&c<f&&d>0&&c<100&&p>i.sensitivity[0]&&(i.event.dir="down"),i.direction.left===!0&&c>f&&u<0&&f<100&&m>i.sensitivity[0]&&(i.event.dir="left"),i.direction.right===!0&&c>f&&u>0&&f<100&&m>i.sensitivity[0]&&(i.event.dir="right"),i.event.dir!==!1?(zo(n),i.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),su(),i.styleCleanup=v=>{i.styleCleanup=void 0,document.body.classList.remove("non-selectable");const g=()=>{document.body.classList.remove("no-pointer-events--children")};v===!0?setTimeout(g,50):g()}),i.handler({evt:n,touch:i.event.mouse!==!0,mouse:i.event.mouse,direction:i.event.dir,duration:s,distance:{x:c,y:f}})):i.end(n)},end(n){i.event!==void 0&&(Fn(i,"temp"),Ho.is.firefox===!0&&om(e,!1),i.styleCleanup!==void 0&&i.styleCleanup(!0),n!==void 0&&i.event.dir!==!1&&zo(n),i.event=void 0)}};if(e.__qtouchswipe=i,r.mouse===!0){const n=r.mouseCapture===!0||r.mousecapture===!0?"Capture":"";Ir(i,"main",[[e,"mousedown","mouseStart",`passive${n}`]])}Ho.has.touch===!0&&Ir(i,"main",[[e,"touchstart","touchStart",`passive${r.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const o=e.__qtouchswipe;o!==void 0&&(t.oldValue!==t.value&&(typeof t.value!="function"&&o.end(),o.handler=t.value),o.direction=a_(t.modifiers))},beforeUnmount(e){const t=e.__qtouchswipe;t!==void 0&&(Fn(t,"main"),Fn(t,"temp"),Ho.is.firefox===!0&&om(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchswipe)}});function kR(){let e=Object.create(null);return{getCache:(t,o)=>e[t]===void 0?e[t]=typeof o=="function"?o():o:e[t],setCache(t,o){e[t]=o},hasCache(t){return Object.hasOwnProperty.call(e,t)},clearCache(t){t!==void 0?delete e[t]:e=Object.create(null)}}}const RR={name:{required:!0},disable:Boolean},AP={setup(e,{slots:t}){return()=>G("div",{class:"q-panel scroll",role:"tabpanel"},uo(t.default))}},VR={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},BR=["update:modelValue","beforeTransition","transition"];function qR(){const{props:e,emit:t,proxy:o}=xt(),{getCache:r}=kR();let a,i;const n=Ue(null),s=Ue(null);function l(F){const L=e.vertical===!0?"up":"left";M((o.$q.lang.rtl===!0?-1:1)*(F.direction===L?1:-1))}const u=j(()=>[[Gwe,l,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),c=j(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),d=j(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),f=j(()=>`--q-transition-duration: ${e.transitionDuration}ms`),m=j(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),p=j(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),v=j(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);ct(()=>e.modelValue,(F,L)=>{const z=_(F)===!0?w(F):-1;i!==!0&&D(z===-1?0:z<w(L)?-1:1),n.value!==z&&(n.value=z,t("beforeTransition",F,L),Ao(()=>{t("transition",F,L)}))});function g(){M(1)}function x(){M(-1)}function b(F){t("update:modelValue",F)}function _(F){return F!=null&&F!==""}function w(F){return a.findIndex(L=>L.props.name===F&&L.props.disable!==""&&L.props.disable!==!0)}function S(){return a.filter(F=>F.props.disable!==""&&F.props.disable!==!0)}function D(F){const L=F!==0&&e.animated===!0&&n.value!==-1?"q-transition--"+(F===-1?c.value:d.value):null;s.value!==L&&(s.value=L)}function M(F,L=n.value){let z=L+F;for(;z!==-1&&z<a.length;){const H=a[z];if(H!==void 0&&H.props.disable!==""&&H.props.disable!==!0){D(F),i=!0,t("update:modelValue",H.props.name),setTimeout(()=>{i=!1});return}z+=F}e.infinite===!0&&a.length!==0&&L!==-1&&L!==a.length&&M(F,F===-1?a.length:-1)}function O(){const F=w(e.modelValue);return n.value!==F&&(n.value=F),!0}function T(){const F=_(e.modelValue)===!0&&O()&&a[n.value];return e.keepAlive===!0?[G(Sw,p.value,[G(v.value===!0?r(m.value,()=>({...AP,name:m.value})):AP,{key:m.value,style:f.value},()=>F)])]:[G("div",{class:"q-panel scroll",style:f.value,key:m.value,role:"tabpanel"},[F])]}function I(){if(a.length!==0)return e.animated===!0?[G(Or,{name:s.value},T)]:T()}function N(F){return a=xM(uo(F.default,[])).filter(L=>L.props!==null&&L.props.slot===void 0&&_(L.props.name)===!0),a.length}function P(){return a}return Object.assign(o,{next:g,previous:x,goTo:b}),{panelIndex:n,panelDirectives:u,updatePanelsList:N,updatePanelIndex:O,getPanelContent:I,getEnabledPanels:S,getPanels:P,isValidPanelName:_,keepAliveProps:p,needsUniqueKeepAliveWrapper:v,goToPanelByOffset:M,goToPanel:b,nextPanel:g,previousPanel:x}}var fd=Ct({name:"QTabPanel",props:RR,setup(e,{slots:t}){return()=>G("div",{class:"q-tab-panel",role:"tabpanel"},uo(t.default))}}),oA=Ct({name:"QTabPanels",props:{...VR,...ya},emits:BR,setup(e,{slots:t}){const o=xt(),r=xa(e,o.proxy.$q),{updatePanelsList:a,getPanelContent:i,panelDirectives:n}=qR(),s=j(()=>"q-tab-panels q-panel-parent"+(r.value===!0?" q-tab-panels--dark q-dark":""));return()=>(a(t),Fd("div",{class:s.value},i(),"pan",e.swipeable,()=>n.value))}}),Wwe={data(){return{codigoQrCode:"",modalQrCode:!1}},methods:{abrirModalQrCode(){this.modalQrCode=!0},escanearQrCode(e){Wt.log("importarReceita","escanearQrCode",e),this.codigoQrCode=e,this.modalQrCode=!1,this.importarQrCode()},async importarQrCode(){try{Na(!this.codigoQrCode,"QR Code n\xE3o fornecido");const e=this.codigoQrCode.lastIndexOf("_"),t=this.codigoQrCode.length;Na(e<1||e>t-2,"QR Code inv\xE1lido");const o=this.codigoQrCode.substr(0,e),r=+this.codigoQrCode.substr(e+1);Na(!r,"QR Code inv\xE1lido"),Wt.log("importarReceita","importarQrCode",this.codigoQrCode,o,r);const a=await this.$utils.geeksApi({importarReceita:{funcao:"1EDA7D08-2981-48E4-8A15-3CF9EE38B829",codigoReceita:r,bancoDeDados:o}}),i=a.data.importarReceita;this.$q.notifyPositive(a.data.combinarProdutos.mensagem),Wt.log("importarReceita","importarQrCode retorno Gaphql",i);const{paciente:n,medico:s,receitaItens:l}=i;Wt.log("importarReceita","importarQrCode retorno Gaphql",n,s),n.dataAlteracao=n.dataCadastro=sa(),$f("contato",n),s.dataAlteracao=s.dataCadastro=sa(),$f("contato",s),i.idContato=n.id,$f("documento",i);let u={};u.idContato=s.id,u.idDocumento=i.id,u.descricao="Medico",$f("documentoContato",u);for(const c in l){const d=l[c];d.idDocumento=i.id,$f("documentoItem",d)}this.$router.push({name:"AtendimentoOticaReceita",params:{id:n.id}})}catch(e){this.$q.notifyError("Ocorreu um erro ao importar receita pelo QR Code.",e)}}}};const Qwe={OftalmoscopiaDireta:!1,AcuiVisual:!1,ReflPup:!1,AvaliacaoMotora:!1,Ppc:!1,CoverTeste:!1,ReservasFusionais:!1,Subjetivo:!1,Ambulatorial:!1,Afinamento:!1,Biomicroscopia:!1,RXFinal:!1,Diagnostico:!1},Xwe={visivel:!1,sinaisSintomas:"",antecedentePessoais:"",atencedenteFamiliares:"",oftalmoscopiaDireta:{od:{bruckner:null,lente:null,escavacao:null,relacaoAV:null,macula:null,fixacao:null,cor:null,papila:null,observacao:""},oe:{bruckner:null,lente:null,escavacao:null,relacaoAV:null,macula:null,fixacao:null,cor:null,papila:null,observacao:""}},acuiVisual:{od:{VLSC:null,PH:null,VPSC:null,VLCC:null,VPCC:null},oe:{VLSC:null,PH:null,VPSC:null,VLCC:null,VPCC:null},optotipo:""},reflPup:{od:{fotomotor:null,consensual:null,acomodativo:null},oe:{fotomotor:null,consensual:null,acomodativo:null}},avaliacaoMotora:{od:{kappa:null,hirschberg:null,duccoes:null,versoes:{ava_mot_ver_od_0:!1,ava_mot_ver_od_1:!1,ava_mot_ver_od_2:!1,ava_mot_ver_od_3:!1,ava_mot_ver_od_4:!1,ava_mot_ver_od_5:!1},observacao:""},oe:{kappa:null,hirschberg:null,duccoes:null,versoes:{ava_mot_ver_oe_0:!1,ava_mot_ver_oe_1:!1,ava_mot_ver_oe_2:!1,ava_mot_ver_oe_3:!1,ava_mot_ver_oe_4:!1,ava_mot_ver_oe_5:!1},observacao:""}},ppc:{objetoReal:null,luz:null,filtro:null},coverTeste:{sc:{dist6m:null,dist40cm:null,dist20cm:null},cc:{dist6m:null,dist40cm:null,dist20cm:null}},reservasFusionais:{vl:{rfn:null,rfp:null},vp:{rfn:null,rfp:null}},subjetivo:{od:{esf:null,cil:null,eixo:null,avl:null,avp:null},oe:{esf:null,cil:null,eixo:null,avl:null,avp:null},add:{esf:null,cil:null,eixo:null,avl:null,avp:null}},ambulatorial:{od:{esf:null,cil:null,eixo:null,avl:null,avp:null},oe:{esf:null,cil:null,eixo:null,avl:null,avp:null},add:{esf:null,cil:null,eixo:null,avl:null,avp:null}},afinamento:{od:{esf:null,cil:null,eixo:null,avl:null,avp:null},oe:{esf:null,cil:null,eixo:null,avl:null,avp:null},add:{esf:null,cil:null,eixo:null,avl:null,avp:null}},biomicroscopia:{od:{sobrancelhas:null,cilios:null,palpepras:null,conjuntivas:null,corneas:null,iris:null,cristalinos:null,observacao:""},oe:{sobrancelhas:null,cilios:null,palpepras:null,conjuntivas:null,corneas:null,iris:null,cristalinos:null,observacao:""}},rxFinal:{od:{esf:null,cil:null,eixo:null,avl:null,avp:null},oe:{esf:null,cil:null,eixo:null,avl:null,avp:null},add:{esf:null,cil:null,eixo:null,avl:null,avp:null}},diagnostico:{od:{patologico:null,motor:null,refrativo:null},oe:{patologico:null,motor:null,refrativo:null},obs:{patologico:"",motor:"",refrativo:""}}},Kwe={components:{ContatoCriar:tA,Arquivo:Zm},data(){return{abasOptometria:{},camposOptometria:{},verOptometria:!1,abaSelecionada:"dioptria",campos:{id:"",idEmpresa:"",paciente:{id:"",nome:"",idade:""},medico:{id:"",nome:""},data:null,validade:null,observacoes:"",prescricao:{dioptria:{od:{longe:{cilindrico:null,dnp:null,eixo:null,esferico:null,id:"",operacao:"",status:""},medio:{adicao:null,cilindrico:null,dnp:null,eixo:null,esferico:null,id:"",operacao:"",status:""},perto:{adicao:null,cilindrico:null,dnp:null,eixo:null,esferico:null,id:"",operacao:"",status:""}},oe:{longe:{cilindrico:null,dnp:null,eixo:null,esferico:null,id:"",operacao:"",status:""},medio:{adicao:null,cilindrico:null,dnp:null,eixo:null,esferico:null,id:"",operacao:"",status:""},perto:{adicao:null,cilindrico:null,dnp:null,eixo:null,esferico:null,id:"",operacao:"",status:""}}},prisma:{od:{base:"",valor:null},oe:{base:"",valor:null}}}},receitaOriginal:{},confirmaHabilitaPerto:!1,habilitaAE:!1,habilitaMedio:!1,habilitaPerto:!1,odLongeEsferico:null,odMedioAdicao:null,odMedioEsferico:null,odPertoAdicao:null,odPertoEsferico:null,oeLongeEsferico:null,oeMedioAdicao:null,oeMedioEsferico:null,oePertoAdicao:null,oePertoEsferico:null,opcoesPacientes:[],opcoesMedicos:[],visivel:!1,arquivosOriginal:[],arquivos:[]}},emits:["atualizar"],methods:{visibilidadeOptometriaAlterado(){this.camposOptometria.visivel=this.verOptometria},carregaAbasAbertas(){let e=localStorage.getItem("abasOptometria");if(e){const t=JSON.parse(e);this.abasOptometria.OftalmoscopiaDireta=t.OftalmoscopiaDireta,this.abasOptometria.AcuiVisual=t.AcuiVisual,this.abasOptometria.ReflPup=t.ReflPup,this.abasOptometria.AvaliacaoMotora=t.AvaliacaoMotora,this.abasOptometria.Ppc=t.Ppc,this.abasOptometria.CoverTeste=t.CoverTeste,this.abasOptometria.ReservasFusionais=t.ReservasFusionais,this.abasOptometria.Subjetivo=t.Subjetivo,this.abasOptometria.Ambulatorial=t.Ambulatorial,this.abasOptometria.Afinamento=t.Afinamento,this.abasOptometria.Biomicroscopia=t.Biomicroscopia,this.abasOptometria.RXFinal=t.RXFinal,this.abasOptometria.Diagnostico=t.Diagnostico}},setAba(){console.log("setAba"),localStorage.setItem("abasOptometria",JSON.stringify({OftalmoscopiaDireta:this.abasOptometria.OftalmoscopiaDireta,AcuiVisual:this.abasOptometria.AcuiVisual,ReflPup:this.abasOptometria.ReflPup,AvaliacaoMotora:this.abasOptometria.AvaliacaoMotora,Ppc:this.abasOptometria.Ppc,CoverTeste:this.abasOptometria.CoverTeste,ReservasFusionais:this.abasOptometria.ReservasFusionais,Subjetivo:this.abasOptometria.Subjetivo,Ambulatorial:this.abasOptometria.Ambulatorial,Afinamento:this.abasOptometria.Afinamento,Biomicroscopia:this.abasOptometria.Biomicroscopia,RXFinal:this.abasOptometria.RXFinal,Diagnostico:this.abasOptometria.Diagnostico}))},calcDates(e){const t=e.split("/");var o=new Date().getFullYear();return Number(o)-Number(t[2])},async criarOpcoesPacientes(){try{const e=await $db.contato.leFilhos($db.contato.selecionado.id);e.push($db.contato.selecionado);const t=e.map(o=>({label:o.nome,value:o.id,avisoRotulo:$filters.data(o.dataAbertura)+" "+this.calcDates($filters.data(o.dataAbertura))+"anos"}));return t.sort((o,r)=>o.label<r.label?1:-1),t}catch(e){this.$q.notifyError("N\xE3o foi poss\xEDvel carregar os dados de pacientes",e)}},filtrarPacientes(e,t){setTimeout(()=>{t(async()=>{const o=await this.criarOpcoesPacientes();if(e==="")this.opcoesPacientes=o;else{const r=$utils.removerAcentos(e.toLowerCase()).split(" ");this.opcoesPacientes=o.filter(a=>{const i=$utils.removerAcentos(a.label.toLowerCase());for(const n of r)if(!(i.indexOf(n)>-1))return!1;return!0})}})},500)},async criarOpcoesMedicos(){try{const e=await $db.hibrido.lista({table:"contatoGrupo",columns:["idContato"],where:{descricao:"M\xE9dico"}}),o=(await $db.hibrido.lista({table:"contato",columns:["id","nome","numeroDocumentoMunicipal"],whereIn:{id:e.map(({idContato:r})=>r)},whereFilter:{ativo:!0}})).filter(r=>{var a,i;return((a=r.nome)==null?void 0:a.trim())||((i=r.numeroDocumentoMunicipal)==null?void 0:i.trim())}).map(r=>{var a,i;return{label:((a=r.nome)!=null?a:"").trim(),sublabel:((i=r.numeroDocumentoMunicipal)!=null?i:"").trim(),value:r.id}});return o.sort((r,a)=>r.label<a.label?1:-1),o}catch(e){this.$q.notifyError("N\xE3o foi poss\xEDvel carregar os dados de m\xE9dicos",e)}},async filtrarMedicos(e,t){const o=await this.criarOpcoesMedicos();t(()=>{if(e==="")this.opcoesMedicos=o;else{const r=$utils.removerAcentos(e.toLowerCase()).split(" ");this.opcoesMedicos=o.filter(a=>{var n,s;const i=$utils.removerAcentos(((n=a.label)==null?void 0:n.toLowerCase())+" "+((s=a.sublabel)==null?void 0:s.toLowerCase()));for(const l of r)if(!(i.indexOf(l)>-1))return!1;return!0})}})},async abrirModalDependente(){const e=await this.$refs.modalDependente.mostrar();(e||{}).id&&this.criarDependencia(e)},async abrirModalMedico(){const e=await this.$refs.modalMedico.mostrar();(e||{}).id&&this.criarMedico(e)},async aoCopiarODOE(e){$q.dialog({message:"Esta a\xE7\xE3o ir\xE1 sobrescrever os dados do olho esquerdo.",title:"Tem certeza?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{e()})},selecionarPaciente(e){this.campos.paciente.nome=e.label,this.campos.paciente.avisoRotulo=e.avisoRotulo,this.campos.paciente.id=e.value},async atualizar(){this.carregaAbasAbertas();const e=await $db.receita.le({id:this.id,idContato:this.idContato,descricaoContato:this.descricaoContato});this.campos=e,this.receitaOriginal=$utils.clonar(e),this.campos.idEmpresa||(this.campos.idEmpresa=this.idEmpresa);let t=!1;(this.campos.prescricao.dioptria.od.longe.esferico||this.campos.prescricao.dioptria.od.longe.cilindrico||this.campos.prescricao.dioptria.od.longe.eixo||this.campos.prescricao.dioptria.od.longe.dnp||this.campos.prescricao.dioptria.oe.longe.esferico||this.campos.prescricao.dioptria.oe.longe.cilindrico||this.campos.prescricao.dioptria.oe.longe.eixo||this.campos.prescricao.dioptria.oe.longe.dnp)&&(t=!0),(this.campos.prescricao.dioptria.od.medio.esferico||this.campos.prescricao.dioptria.od.medio.adicao||this.campos.prescricao.dioptria.od.medio.dnp||this.campos.prescricao.dioptria.oe.medio.esferico||this.campos.prescricao.dioptria.oe.medio.adicao||this.campos.prescricao.dioptria.oe.medio.dnp)&&(this.habilitaMedio=!0),!t&&(this.campos.prescricao.dioptria.od.perto.cilindrico||this.campos.prescricao.dioptria.od.perto.eixo||this.campos.prescricao.dioptria.oe.perto.cilindrico||this.campos.prescricao.dioptria.oe.perto.eixo)&&(this.confirmaHabilitaPerto=this.habilitaPerto=!0),this.odLongeEsferico=this.campos.prescricao.dioptria.od.longe.esferico,this.oeLongeEsferico=this.campos.prescricao.dioptria.oe.longe.esferico,this.odMedioAdicao=this.campos.prescricao.dioptria.od.medio.adicao,this.oeMedioAdicao=this.campos.prescricao.dioptria.oe.medio.adicao,this.odMedioEsferico=this.campos.prescricao.dioptria.od.medio.esferico,this.oeMedioEsferico=this.campos.prescricao.dioptria.oe.medio.esferico,this.odPertoAdicao=this.campos.prescricao.dioptria.od.perto.adicao,this.oePertoAdicao=this.campos.prescricao.dioptria.oe.perto.adicao,this.odPertoEsferico=this.campos.prescricao.dioptria.od.perto.esferico,this.oePertoEsferico=this.campos.prescricao.dioptria.oe.perto.esferico,this.arquivosOriginal=await $db.arquivo.lista({tipoArquivo:"-",idTabelaMaster:this.id}),this.arquivos=$utils.clonarV2(this.arquivosOriginal),await this.carregarOptometria()},atualizarValidade(){if(this.campos.data){let e=new Date(this.campos.data);e.setFullYear(e.getFullYear()+1),this.campos.validade=Xo.formatDate(e),this.verificarValidade()}},verificarValidade(){try{const e=new Date(this.campos.data),t=new Date(this.campos.validade),r=(t.getTime()-e.getTime())/(1e3*60*60*24),a=Math.floor(r/30);t.getTime()<e.getTime()?$q.notify({icon:"error",message:"A Data de Validade n\xE3o pode ser menor que a Data de Emiss\xE3o.",color:"negative"}):t.getTime()===e.getTime()?$q.notify({icon:"warning",message:"A data de Validade n\xE3o pode ser igual \xE0 Data de Emiss\xE3o.",color:"negative"}):a<=1?$q.notify({icon:"warning",message:"A receita vencer\xE1 em 30 dias ou menos.",color:"negative"}):a<6?$q.notify({icon:"warning",message:`A Receita vencer\xE1 em ${a} meses.`,color:"orange-9"}):a>=6&&a<=10&&$q.notify({icon:"warning",message:`A receita vencer\xE1 em ${a} meses.`,color:"amber-8"})}catch(e){$q.notifyError("Erro ao verificar validade da receita.",e)}},calcularAE(){let e=this.campos.prescricao.dioptria.od.longe.esferico,t=this.campos.prescricao.dioptria.oe.longe.esferico;if(this.habilitaMedio){let o=this.campos.prescricao.dioptria.od.medio.adicao,r=this.campos.prescricao.dioptria.od.medio.esferico;(o!==this.odMedioAdicao||r!==this.odMedioEsferico||e!==this.odLongeEsferico&&(!!o||!!r))&&(this.habilitaAE?o=r===null||e===null?null:r-e:r=e===null||o===null?null:e+o,this.odLongeEsferico=this.campos.prescricao.dioptria.od.longe.esferico=e,this.odMedioAdicao=this.campos.prescricao.dioptria.od.medio.adicao=o,this.odMedioEsferico=this.campos.prescricao.dioptria.od.medio.esferico=r);let a=this.campos.prescricao.dioptria.oe.medio.adicao,i=this.campos.prescricao.dioptria.oe.medio.esferico;(a!==this.oeMedioAdicao||i!==this.oeMedioEsferico||t!==this.oeLongeEsferico&&(!!a||!!i))&&(this.habilitaAE?a=i===null||t===null?null:i-t:i=t===null||a===null?null:t+a,this.oeLongeEsferico=this.campos.prescricao.dioptria.oe.longe.esferico=t,this.oeMedioAdicao=this.campos.prescricao.dioptria.oe.medio.adicao=a,this.oeMedioEsferico=this.campos.prescricao.dioptria.oe.medio.esferico=i)}if(!this.habilitaPerto){let o=this.campos.prescricao.dioptria.od.perto.adicao,r=this.campos.prescricao.dioptria.od.perto.esferico;(o!==this.odPertoAdicao||r!==this.odPertoEsferico||e!==this.odLongeEsferico&&(!!o||!!r))&&(this.habilitaAE?o=r===null||e===null?null:r-e:r=e===null||o===null?null:e+o,this.odLongeEsferico=this.campos.prescricao.dioptria.od.longe.esferico=e,this.odPertoAdicao=this.campos.prescricao.dioptria.od.perto.adicao=o,this.odPertoEsferico=this.campos.prescricao.dioptria.od.perto.esferico=r);let a=this.campos.prescricao.dioptria.oe.perto.adicao,i=this.campos.prescricao.dioptria.oe.perto.esferico;(a!==this.oePertoAdicao||i!==this.oePertoEsferico||t!==this.oeLongeEsferico&&(!!a||!!i))&&(this.habilitaAE?a=i===null||t===null?null:i-t:i=t===null||a===null?null:t+a,this.oeLongeEsferico=this.campos.prescricao.dioptria.oe.longe.esferico=t,this.oePertoAdicao=this.campos.prescricao.dioptria.oe.perto.adicao=a,this.oePertoEsferico=this.campos.prescricao.dioptria.oe.perto.esferico=i)}},copiarODDioptria(){this.aoCopiarODOE(()=>{this.campos.prescricao.dioptria.oe.longe.cilindrico=this.campos.prescricao.dioptria.od.longe.cilindrico,this.campos.prescricao.dioptria.oe.longe.dnp=this.campos.prescricao.dioptria.od.longe.dnp,this.campos.prescricao.dioptria.oe.longe.eixo=this.campos.prescricao.dioptria.od.longe.eixo,this.campos.prescricao.dioptria.oe.longe.esferico=this.campos.prescricao.dioptria.od.longe.esferico,this.campos.prescricao.dioptria.oe.medio.adicao=this.campos.prescricao.dioptria.od.medio.adicao,this.campos.prescricao.dioptria.oe.medio.dnp=this.campos.prescricao.dioptria.od.medio.dnp,this.campos.prescricao.dioptria.oe.medio.esferico=this.campos.prescricao.dioptria.od.medio.esferico,this.campos.prescricao.dioptria.oe.medio.cilindrico=this.campos.prescricao.dioptria.od.medio.cilindrico,this.campos.prescricao.dioptria.oe.medio.eixo=this.campos.prescricao.dioptria.od.medio.eixo,this.campos.prescricao.dioptria.oe.perto.adicao=this.campos.prescricao.dioptria.od.perto.adicao,this.campos.prescricao.dioptria.oe.perto.cilindrico=this.campos.prescricao.dioptria.od.perto.cilindrico,this.campos.prescricao.dioptria.oe.perto.dnp=this.campos.prescricao.dioptria.od.perto.dnp,this.campos.prescricao.dioptria.oe.perto.eixo=this.campos.prescricao.dioptria.od.perto.eixo,this.campos.prescricao.dioptria.oe.perto.esferico=this.campos.prescricao.dioptria.od.perto.esferico})},copiarODPrisma(){this.aoCopiarODOE(()=>{this.campos.prescricao.prisma.oe=$utils.clonar(this.campos.prescricao.prisma.od)})},async criarDependencia(e){try{await $db.contato.criarDependenciaContatos({contatoPai:$db.contato.selecionado,contatoFilho:e}),await $db.contato.carregarMemoria($db.contato.selecionado.id),await $db.contato.carregarMemoria(e.id),this.campos.paciente.id=e.id,this.campos.paciente.nome=e.nome}catch(t){this.$q.notifyError("Ocorreu um erro ao criar a depend\xEAncia.",t)}},async criarMedico(e){try{await $db.contato.criarContatoGrupo({idContato:e.id,descricaoGrupo:"M\xE9dico"}),await $db.contato.carregarMemoria(e.id),this.campos.medico.id=e.id,this.campos.medico.nome=e.nome}catch(t){this.$q.notifyError("Ocorreu um erro ao adicionar o contato ao grupo M\xE9dico.",t)}},selecionarMedico(e){this.campos.medico.id=e.value,this.campos.medico.nome=e.label},async salvarReceita(){let e="Ocorreu um erro ao salvar a receita.";try{const t=$utils.dataAtual();let o=new Date(t).setHours(0,0,0,0),r=new Date(this.campos.data).setHours(0,0,0,0),a=new Date(this.campos.validade).setHours(0,0,0,0);$utils.verificarErro(!this.campos.data||!this.campos.validade,"Preencha o per\xEDodo."),$utils.verificarErro(r===a,"A data de Validade n\xE3o pode ser igual \xE0 Data de Emiss\xE3o."),$utils.verificarErro(r>a,"A Data de Validade n\xE3o pode ser menor que a Data de Emiss\xE3o."),$utils.verificarErro(r>o,"Data da receita n\xE3o pode ser maior que hoje."),$utils.verificarErro(!this.campos.medico.id||!this.campos.medico.nome,"Selecione o m\xE9dico."),$utils.verificarErro(!this.campos.paciente.id||!this.campos.paciente.nome,"Selecione o paciente.");let i="Receita salva com sucesso.";this.duplicarReceita&&(this.campos.id=$utils.uuid(),this.campos.medico.idDocumentoContato=$utils.uuid(),this.campos.prescricao.dioptria.od.longe.id=$utils.uuid(),this.campos.prescricao.dioptria.od.medio.id=$utils.uuid(),this.campos.prescricao.dioptria.od.perto.id=$utils.uuid(),this.campos.prescricao.dioptria.oe.longe.id=$utils.uuid(),this.campos.prescricao.dioptria.oe.medio.id=$utils.uuid(),this.campos.prescricao.dioptria.oe.perto.id=$utils.uuid(),delete this.campos.dadosOriginais,i="Receita duplicada com sucesso.",e="Ocorreu um erro ao duplicar a receita."),this.$q.loading.show({delay:200,message:"Salvando a receita"}),await $db.receita.grava(this.campos),await this.gravarOptometria(),await $db.arquivo.remove(this.arquivosOriginal.filter(n=>!this.arquivos.find(s=>s.id===n.id)));for(const n of this.arquivos){let s={};Object.keys(this.arquivosOriginal).length?s={original:this.arquivosOriginal.find(l=>l.id===n.id)||[{}],atual:n}:s={atual:n},(n==null?void 0:n.name)&&(n==null?void 0:n.editado)&&await $db.arquivo.edita(s),n!=null&&n.name||await $db.arquivo.grava(s)}this.visivel=!1,this.$q.notifyPositive(i),this.$emit("atualizar",this.campos.id)}catch(t){this.$q.notifyError(e,t)}finally{this.$q.loading.hide()}},async zerarCamposLongeMedio(){const e=async()=>{await this.zerarCamposMedio(!1),this.campos.prescricao.dioptria.od.longe.esferico=null,this.campos.prescricao.dioptria.od.longe.cilindrico=null,this.campos.prescricao.dioptria.od.longe.eixo=null,this.campos.prescricao.dioptria.od.longe.dnp=null,this.campos.prescricao.dioptria.od.perto.adicao=null,this.campos.prescricao.dioptria.od.perto.esferico=null,this.campos.prescricao.dioptria.od.perto.dnp=null,this.campos.prescricao.dioptria.od.perto.cilindrico=null,this.campos.prescricao.dioptria.od.perto.eixo=null,this.campos.prescricao.dioptria.oe.longe.esferico=null,this.campos.prescricao.dioptria.oe.longe.cilindrico=null,this.campos.prescricao.dioptria.oe.longe.eixo=null,this.campos.prescricao.dioptria.oe.longe.dnp=null,this.campos.prescricao.dioptria.oe.perto.adicao=null,this.campos.prescricao.dioptria.oe.perto.esferico=null,this.campos.prescricao.dioptria.oe.perto.dnp=null,this.campos.prescricao.dioptria.oe.perto.cilindrico=null,this.campos.prescricao.dioptria.oe.perto.eixo=null};let t=!1;this.habilitaPerto?t=this.campos.prescricao.dioptria.od.longe.esferico||this.campos.prescricao.dioptria.od.longe.cilindrico||this.campos.prescricao.dioptria.od.longe.eixo||this.campos.prescricao.dioptria.od.longe.dnp||this.campos.prescricao.dioptria.od.medio.adicao||this.campos.prescricao.dioptria.od.medio.esferico||this.campos.prescricao.dioptria.od.medio.dnp||this.campos.prescricao.dioptria.od.perto.adicao||this.campos.prescricao.dioptria.od.perto.esferico||this.campos.prescricao.dioptria.od.perto.dnp||this.campos.prescricao.dioptria.oe.longe.esferico||this.campos.prescricao.dioptria.oe.longe.cilindrico||this.campos.prescricao.dioptria.oe.longe.eixo||this.campos.prescricao.dioptria.oe.longe.dnp||this.campos.prescricao.dioptria.oe.medio.adicao||this.campos.prescricao.dioptria.oe.medio.esferico||this.campos.prescricao.dioptria.oe.medio.dnp||this.campos.prescricao.dioptria.oe.perto.adicao||this.campos.prescricao.dioptria.oe.perto.esferico||this.campos.prescricao.dioptria.oe.perto.dnp:t=this.campos.prescricao.dioptria.od.perto.esferico||this.campos.prescricao.dioptria.od.perto.dnp||this.campos.prescricao.dioptria.od.perto.cilindrico||this.campos.prescricao.dioptria.od.perto.eixo||this.campos.prescricao.dioptria.oe.perto.esferico||this.campos.prescricao.dioptria.oe.perto.dnp||this.campos.prescricao.dioptria.oe.perto.cilindrico||this.campos.prescricao.dioptria.oe.perto.eixo,t?await new Promise((o,r)=>{this.$q.dialog({message:"Ao continuar os dados ser\xE3o perdidos.",noRefocus:!0,preventClose:!0,title:"Tem certeza?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{e().then(()=>{this.habilitaMedio=!1,this.habilitaAE=!1})}).onCancel(()=>{this.habilitaPerto=!this.habilitaPerto}).onDismiss(()=>{o()})}):(this.habilitaMedio=!1,this.habilitaAE=!1),this.confirmaHabilitaPerto=this.habilitaPerto},async zerarCamposMedio(e){const t=()=>{this.odMedioAdicao=this.campos.prescricao.dioptria.od.medio.adicao=null,this.odMedioEsferico=this.campos.prescricao.dioptria.od.medio.esferico=null,this.campos.prescricao.dioptria.od.medio.dnp=null,this.oeMedioAdicao=this.campos.prescricao.dioptria.oe.medio.adicao=null,this.oeMedioEsferico=this.campos.prescricao.dioptria.oe.medio.esferico=null,this.campos.prescricao.dioptria.oe.medio.dnp=null,this.campos.prescricao.dioptria.od.medio.cilindrico=null,this.campos.prescricao.dioptria.od.medio.eixo=null,this.campos.prescricao.dioptria.oe.medio.cilindrico=null,this.campos.prescricao.dioptria.oe.medio.eixo=null};e?(this.campos.prescricao.dioptria.od.medio.adicao||this.campos.prescricao.dioptria.od.medio.esferico||this.campos.prescricao.dioptria.od.medio.dnp||this.campos.prescricao.dioptria.oe.medio.adicao||this.campos.prescricao.dioptria.oe.medio.esferico||this.campos.prescricao.dioptria.oe.medio.dnp)&&await new Promise((r,a)=>{this.$q.dialog({message:"Ao continuar os dados ser\xE3o perdidos.",noRefocus:!0,preventClose:!0,title:"Tem certeza?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{t()}).onCancel(()=>{this.habilitaMedio=!this.habilitaMedio}).onDismiss(()=>{r()})}):t()},calcularDnpPerto(e){if(e==="direito"){const t=(this.campos.prescricao.dioptria.od.perto.adicao||this.campos.prescricao.dioptria.od.perto.esferico)&&!this.campos.prescricao.dioptria.od.perto.dnp,o=this.campos.prescricao.dioptria.od.longe.dnp;$utils.isNumber(o)&&!!o&&t&&(this.campos.prescricao.dioptria.od.perto.dnp=o-1.5)}if(e==="esquerdo"){const t=(this.campos.prescricao.dioptria.oe.perto.adicao||this.campos.prescricao.dioptria.oe.perto.esferico)&&!this.campos.prescricao.dioptria.oe.perto.dnp,o=this.campos.prescricao.dioptria.oe.longe.dnp;$utils.isNumber(o)&&!!o&&t&&(this.campos.prescricao.dioptria.oe.perto.dnp=o-1.5)}},async mostrar(e){const{duplicarReceita:t=!1,id:o="",idEmpresa:r="",idContato:a="",descricaoContato:i=""}=e;this.id=o,this.idEmpresa=r,this.idContato=a,this.descricaoContato=i,this.duplicarReceita=t,this.abaSelecionada="dioptria",this.habilitaAE=!1,this.habilitaMedio=!1,this.habilitaPerto=this.confirmaHabilitaPerto=!1,this.abasOptometria=$utils.clonarV2(Qwe),this.camposOptometria=$utils.clonarV2(Xwe),this.verOptometria=!1,await this.atualizar(),this.visivel=!0},async carregarOptometria(){let e;this.optometriaOriginal=await $db.receita.obterOptometria({idDocumento:this.id}),e=this.optometriaOriginal.json,e&&(this.camposOptometria=JSON.parse(e),this.verOptometria=this.camposOptometria.visivel)},async gravarOptometria(){const e=this.optometriaOriginal,t={...this.optometriaOriginal,json:JSON.stringify(this.camposOptometria)};await $db.receita.gravarOptometria({original:e,atual:t,idDocumento:this.id})}},mixins:[Wwe]},Ywe={class:"layout-padding q-pa-none q-pb-md q-mt-md"},Jwe={class:"u-container"},Zwe={class:"col-12 col-md-3"},eEe={class:"col-12 col-md-3"},tEe={class:"col-12 col-md-3"},oEe={class:"col-12 col-md-3"},aEe={class:"q-pa-md"},rEe={class:"col-12 col-md-4"},iEe={class:"col-12 col-md-4"},nEe={class:"col-12 col-md-4"},sEe={class:"q-pa-md"},lEe={key:0,class:"col-xs-12 col-md-6"},cEe={style:{"overflow-x":"auto"}},uEe={key:0},dEe={key:1},fEe={key:2},mEe={key:3},pEe={key:1,class:"col-xs-12 col-md-3"},hEe={style:{"overflow-x":"auto"}},vEe={key:0,class:"esferico"},gEe={key:1,class:"esferico"},_Ee={key:2,class:"dnp"},bEe={key:0},yEe={key:1},xEe={key:0},CEe={key:1},wEe={style:{"overflow-x":"auto"}},EEe={key:0,class:"esferico"},SEe={key:1,class:"esferico"},IEe={key:2,class:"esferico"},AEe={key:3,class:"cilindrico"},TEe={key:4,class:"eixo"},DEe={key:0},OEe={key:1},PEe={key:0},FEe={key:1},MEe={class:"col-12 col-md-auto"},NEe={class:"col-12 col-md"},kEe={class:"q-pa-md"},REe={class:"col"},VEe={class:"col"},BEe={class:"col-12 col-md-auto q-pt-none text-center"},qEe={class:"col-12 col-md"},LEe={class:"q-pa-md"},$Ee={class:"col"},UEe={class:"col"},zEe={class:"q-pa-md"},HEe={class:"col"},jEe={style:{"font-size":".9rem","font-weight":"bold"}},GEe={class:"col"},WEe={style:{"font-size":".9rem","font-weight":"bold"}},QEe={class:"col"},XEe={style:{"font-size":".9rem","font-weight":"bold"}},KEe={class:"col"},YEe={style:{"font-size":".9rem","font-weight":"bold"}},JEe={class:"col"},ZEe={style:{"font-size":".9rem","font-weight":"bold"}},eSe={class:"col"},tSe={style:{"font-size":".9rem","font-weight":"bold"}},oSe={class:"col"},aSe={style:{"font-size":".9rem","font-weight":"bold"}},rSe={class:"col"},iSe={style:{"font-size":".9rem","font-weight":"bold"}},nSe={class:"col"},sSe={style:{"font-size":".9rem","font-weight":"bold"}},lSe={class:"col"},cSe={style:{"font-size":".9rem","font-weight":"bold"}},uSe={class:"col"},dSe={style:{"font-size":".9rem","font-weight":"bold"}},fSe={class:"col"},mSe={style:{"font-size":".9rem","font-weight":"bold"}},pSe={class:"col"},hSe={style:{"font-size":".9rem","font-weight":"bold"}},vSe={class:"col"},gSe={style:{"font-size":".9rem","font-weight":"bold"}},_Se={class:"col"},bSe={style:{"font-size":".9rem","font-weight":"bold"}},ySe={class:"col"},xSe={style:{"font-size":".9rem","font-weight":"bold"}},CSe={class:"col"},wSe={style:{"font-size":".9rem","font-weight":"bold"}},ESe={class:"col"},SSe={style:{"font-size":".9rem","font-weight":"bold"}},ISe={class:"q-pa-md"},ASe={class:"col"},TSe={class:"col"},DSe={class:"col"},OSe={class:"col"},PSe={class:"col"},FSe={class:"col"},MSe={class:"col"},NSe={class:"col"},kSe={class:"col"},RSe={class:"col"},VSe={class:"col-12 q-mt-sm"},BSe={class:"q-pa-md"},qSe={class:"col"},LSe={class:"col"},$Se={class:"col"},USe={class:"col"},zSe={class:"col"},HSe={class:"col"},jSe={class:"q-pa-md"},GSe={class:"col"},WSe={style:{"font-size":".9rem","font-weight":"bold"}},QSe={class:"col"},XSe={style:{"font-size":".9rem","font-weight":"bold"}},KSe={class:"col"},YSe={style:{"font-size":".9rem","font-weight":"bold"}},JSe={class:"col"},ZSe={style:{"font-size":".9rem","font-weight":"bold"}},eIe={class:"col"},tIe={style:{"font-size":".9rem","font-weight":"bold"}},oIe={class:"col"},aIe={style:{"font-size":".9rem","font-weight":"bold"}},rIe={class:"col"},iIe={class:"versoes"},nIe={class:"checkbox checkbox-success ex-0"},sIe={class:"checkbox checkbox-success ex-1"},lIe={class:"checkbox checkbox-success ex-2"},cIe={class:"checkbox checkbox-success ex-3"},uIe={class:"checkbox checkbox-success ex-4"},dIe={class:"checkbox checkbox-success ex-5"},fIe={class:"col"},mIe={class:"versoes"},pIe={class:"checkbox checkbox-success ex-0"},hIe={class:"checkbox checkbox-success ex-1"},vIe={class:"checkbox checkbox-success ex-2"},gIe={class:"checkbox checkbox-success ex-3"},_Ie={class:"checkbox checkbox-success ex-4"},bIe={class:"checkbox checkbox-success ex-5"},yIe={class:"col"},xIe={style:{"font-size":".9rem","font-weight":"bold"}},CIe={class:"col"},wIe={style:{"font-size":".9rem","font-weight":"bold"}},EIe={class:"q-pa-md"},SIe={class:"col"},IIe={class:"col"},AIe={class:"col"},TIe={class:"q-pa-md"},DIe={class:"col"},OIe={style:{"font-size":".9rem","font-weight":"bold"}},PIe={class:"col"},FIe={style:{"font-size":".9rem","font-weight":"bold"}},MIe={class:"col"},NIe={style:{"font-size":".9rem","font-weight":"bold"}},kIe={class:"col"},RIe={style:{"font-size":".9rem","font-weight":"bold"}},VIe={class:"col"},BIe={style:{"font-size":".9rem","font-weight":"bold"}},qIe={class:"col"},LIe={style:{"font-size":".9rem","font-weight":"bold"}},$Ie={class:"q-pa-md"},UIe={class:"col"},zIe={style:{"font-size":".9rem","font-weight":"bold"}},HIe={class:"col"},jIe={style:{"font-size":".9rem","font-weight":"bold"}},GIe={class:"col"},WIe={style:{"font-size":".9rem","font-weight":"bold"}},QIe={class:"col"},XIe={style:{"font-size":".9rem","font-weight":"bold"}},KIe={class:"q-pa-md"},YIe={class:"col"},JIe={class:"col"},ZIe={class:"col"},eAe={class:"col"},tAe={class:"col"},oAe={class:"col"},aAe={class:"col"},rAe={class:"col"},iAe={class:"col"},nAe={class:"col"},sAe={class:"col"},lAe={class:"col"},cAe={class:"col"},uAe={class:"col"},dAe={class:"col"},fAe={class:"q-pa-md"},mAe={class:"col"},pAe={class:"col"},hAe={class:"col"},vAe={class:"col"},gAe={class:"col"},_Ae={class:"col"},bAe={class:"col"},yAe={class:"col"},xAe={class:"col"},CAe={class:"col"},wAe={class:"col"},EAe={class:"col"},SAe={class:"col"},IAe={class:"col"},AAe={class:"col"},TAe={class:"q-pa-md"},DAe={class:"col"},OAe={class:"col"},PAe={class:"col"},FAe={class:"col"},MAe={class:"col"},NAe={class:"col"},kAe={class:"col"},RAe={class:"col"},VAe={class:"col"},BAe={class:"col"},qAe={class:"col"},LAe={class:"col"},$Ae={class:"col"},UAe={class:"col"},zAe={class:"col"},HAe={class:"q-pa-md"},jAe={class:"col"},GAe={style:{"font-size":".9rem","font-weight":"bold"}},WAe={class:"col"},QAe={style:{"font-size":".9rem","font-weight":"bold"}},XAe={class:"col"},KAe={style:{"font-size":".9rem","font-weight":"bold"}},YAe={class:"col"},JAe={style:{"font-size":".9rem","font-weight":"bold"}},ZAe={class:"col"},eTe={style:{"font-size":".9rem","font-weight":"bold"}},tTe={class:"col"},oTe={style:{"font-size":".9rem","font-weight":"bold"}},aTe={class:"col"},rTe={style:{"font-size":".9rem","font-weight":"bold"}},iTe={class:"col"},nTe={style:{"font-size":".9rem","font-weight":"bold"}},sTe={class:"col"},lTe={style:{"font-size":".9rem","font-weight":"bold"}},cTe={class:"col"},uTe={style:{"font-size":".9rem","font-weight":"bold"}},dTe={class:"col"},fTe={style:{"font-size":".9rem","font-weight":"bold"}},mTe={class:"col"},pTe={style:{"font-size":".9rem","font-weight":"bold"}},hTe={class:"col"},vTe={style:{"font-size":".9rem","font-weight":"bold"}},gTe={class:"col"},_Te={style:{"font-size":".9rem","font-weight":"bold"}},bTe={class:"col"},yTe={style:{"font-size":".9rem","font-weight":"bold"}},xTe={class:"col"},CTe={style:{"font-size":".9rem","font-weight":"bold"}},wTe={class:"q-pa-md"},ETe={class:"col"},STe={class:"col"},ITe={class:"col"},ATe={class:"col"},TTe={class:"col"},DTe={class:"col"},OTe={class:"col"},PTe={class:"col"},FTe={class:"col"},MTe={class:"col"},NTe={class:"col"},kTe={class:"col"},RTe={class:"col"},VTe={class:"col"},BTe={class:"col"},qTe={class:"q-pa-md"},LTe={class:"col"},$Te={class:"col"},UTe={class:"col"},zTe={class:"col"},HTe={class:"col"},jTe={class:"col"},GTe={class:"col"},WTe={class:"col"},QTe={class:"col"},XTe={class:"col-12 col-md-6"},KTe={class:"col-12 col-md-6"};function YTe(e,t,o,r,a,i){const n=Ve("campo"),s=Ve("row"),l=Ve("Arquivo"),u=Ve("contato-criar");return B(),oe(Ht,{modelValue:a.visivel,"onUpdate:modelValue":t[217]||(t[217]=c=>a.visivel=c),maximized:""},{default:C(()=>[h(To,{container:"",class:"bg-light"},{default:C(()=>[A("form",{onSubmit:t[216]||(t[216]=rt((...c)=>i.salvarReceita&&i.salvarReceita(...c),["prevent"]))},[h(jo,null,{default:C(()=>[h(Je,null,{default:C(()=>[Ee(h(ae,{flat:"",round:"",dense:"",icon:"arrow_back"},null,512),[[st]]),h(lt,null,{default:C(()=>t[218]||(t[218]=[K("Receita")])),_:1}),h(s,{class:"items-center"},{default:C(()=>[h(n,{modelValue:a.verOptometria,"onUpdate:modelValue":[t[0]||(t[0]=c=>a.verOptometria=c),i.visibilidadeOptometriaAlterado],rotulo:"Optometria",tipo:"logico",dense:"",class:"q-mr-md",color:"white"},null,8,["modelValue","onUpdate:modelValue"]),h(ae,{color:"white","text-color":"primary",class:"no-shadow",label:"Salvar",type:"submit",unelevated:""})]),_:1})]),_:1})]),_:1}),h(Jo,null,{default:C(()=>[A("div",Ywe,[A("div",Jwe,[h(Mt,{class:"bg-white no-shadow q-pa-md q-mb-md"},{default:C(()=>[h(s,{class:"q-col-gutter-md"},{default:C(()=>[A("div",Zwe,[h(ii,{"model-value":a.campos.paciente.nome,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",dense:"",label:"Paciente",options:a.opcoesPacientes,onFilter:i.filtrarPacientes,"onUpdate:modelValue":i.selecionarPaciente,hint:a.campos.paciente.avisoRotulo},{prepend:C(()=>[h(ae,{color:"tertiary",size:"md",icon:"person_add",dense:"",flat:"",round:"",onClick:rt(i.abrirModalDependente,["stop"])},{default:C(()=>[h(Ft,null,{default:C(()=>t[219]||(t[219]=[K("Incluir paciente")])),_:1})]),_:1},8,["onClick"])]),"no-option":C(()=>[h(qe,null,{default:C(()=>[h(fe,{class:"text-grey"},{default:C(()=>t[220]||(t[220]=[K(" Resultado n\xE3o encontrado ")])),_:1})]),_:1})]),_:1},8,["model-value","options","onFilter","onUpdate:modelValue","hint"])]),A("div",eEe,[h(ii,{"model-value":a.campos.medico.nome,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",dense:"",label:"M\xE9dico ou Optometrista",options:a.opcoesMedicos,onFilter:i.filtrarMedicos,"onUpdate:modelValue":i.selecionarMedico},{prepend:C(()=>[h(ae,{color:"tertiary",size:"md",icon:"person_add",dense:"",flat:"",round:"",onClick:rt(i.abrirModalMedico,["stop"])},{default:C(()=>[h(Ft,null,{default:C(()=>t[221]||(t[221]=[K("Incluir m\xE9dico")])),_:1})]),_:1},8,["onClick"])]),"no-option":C(()=>[h(qe,null,{default:C(()=>[h(fe,{class:"text-grey"},{default:C(()=>t[222]||(t[222]=[K(" Resultado n\xE3o encontrado ")])),_:1})]),_:1})]),option:C(c=>[h(qe,u_(sh(c.itemProps)),{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>[K(le(c.opt.label),1)]),_:2},1024),c.opt.sublabel?(B(),oe(Re,{key:0,caption:""},{default:C(()=>[t[223]||(t[223]=A("strong",null,"CRM: ",-1)),K(" "+le(c.opt.sublabel),1)]),_:2},1024)):ie("",!0)]),_:2},1024)]),_:2},1040)]),_:1},8,["model-value","options","onFilter","onUpdate:modelValue"])]),A("div",tEe,[h(n,{modelValue:a.campos.data,"onUpdate:modelValue":[t[1]||(t[1]=c=>a.campos.data=c),t[2]||(t[2]=c=>i.atualizarValidade())],maxlength:"10",rotulo:"Data",tipo:"data"},null,8,["modelValue"])]),A("div",oEe,[h(n,{modelValue:a.campos.validade,"onUpdate:modelValue":t[3]||(t[3]=c=>a.campos.validade=c),onBlur:t[4]||(t[4]=c=>i.verificarValidade()),maxlength:"10",rotulo:"Validade",tipo:"data"},null,8,["modelValue"])]),h(n,{modelValue:a.campos.observacoes,"onUpdate:modelValue":t[5]||(t[5]=c=>a.campos.observacoes=c),class:"col-12",maxlength:"4096",rotulo:"Observa\xE7\xF5es",rows:"2",tipo:"textoArea",autogrow:""},null,8,["modelValue"])]),_:1})]),_:1}),a.verOptometria?(B(),oe(Mt,{key:0,class:"bg-white q-mb-md no-shadow"},{default:C(()=>[h(Je,{class:"text-tertiary"},{default:C(()=>[h(Pe,{name:"history",size:"24px"}),h(lt,null,{default:C(()=>t[224]||(t[224]=[K("Motivos da consulta")])),_:1})]),_:1}),A("div",aEe,[h(s,{class:"q-col-gutter-md"},{default:C(()=>[A("div",rEe,[h(n,{modelValue:a.camposOptometria.sinaisSintomas,"onUpdate:modelValue":t[6]||(t[6]=c=>a.camposOptometria.sinaisSintomas=c),class:"col-12",maxlength:"4096",rotulo:"Sinais e Sintomas",rows:"2",tipo:"textoArea",autogrow:""},null,8,["modelValue"])]),A("div",iEe,[h(n,{modelValue:a.camposOptometria.antecedentesPessoais,"onUpdate:modelValue":t[7]||(t[7]=c=>a.camposOptometria.antecedentesPessoais=c),class:"col-12",maxlength:"4096",rotulo:"Antecedentes Pessoais",rows:"2",tipo:"textoArea",autogrow:""},null,8,["modelValue"])]),A("div",nEe,[h(n,{modelValue:a.camposOptometria.antecedentesFamiliares,"onUpdate:modelValue":t[8]||(t[8]=c=>a.camposOptometria.antecedentesFamiliares=c),class:"col-12",maxlength:"4096",rotulo:"Antecedentes Familiares",rows:"2",tipo:"textoArea",autogrow:""},null,8,["modelValue"])])]),_:1})])]),_:1})):ie("",!0),h(Mt,{class:"bg-white q-mb-md no-shadow"},{default:C(()=>[h(Je,{class:"text-tertiary"},{default:C(()=>[h(Pe,{name:"image",size:"24px"}),h(lt,null,{default:C(()=>t[225]||(t[225]=[K("Arquivos")])),_:1})]),_:1}),A("div",sEe,[h(l,{id:a.campos.id,arquivos:a.arquivos,ref:"arquivo",cartao:""},null,8,["id","arquivos"])])]),_:1}),h(Ab,{modelValue:a.abaSelecionada,"onUpdate:modelValue":t[9]||(t[9]=c=>a.abaSelecionada=c),align:"justify",class:"bg-transparent q-mt-lg text-primary",style:{"border-bottom":"1px solid rgba(0, 0, 0, 0.12)"},color:"transparent"},{default:C(()=>[h(Jc,{label:"Dioptria",name:"dioptria"}),h(Jc,{label:"Prisma",name:"prisma"})]),_:1},8,["modelValue"]),h(oA,{modelValue:a.abaSelecionada,"onUpdate:modelValue":t[49]||(t[49]=c=>a.abaSelecionada=c),animated:""},{default:C(()=>[h(fd,{name:"dioptria",class:"bg-light q-px-none"},{default:C(()=>[a.habilitaPerto?ie("",!0):(B(),oe(Je,{key:0},{default:C(()=>[h(lt),A("div",null,[a.confirmaHabilitaPerto?ie("",!0):(B(),oe(n,{key:0,modelValue:a.habilitaAE,"onUpdate:modelValue":t[10]||(t[10]=c=>a.habilitaAE=c),rotulo:"Adi\xE7\xE3o / Esf\xE9rico",tipo:"logico",dense:""},null,8,["modelValue"]))])]),_:1})),h(s,{class:"q-col-gutter-md q-mb-md"},{default:C(()=>[a.habilitaPerto?ie("",!0):(B(),be("div",lEe,[h(Mt,{class:"no-shadow rounded-borders"},{default:C(()=>[h(Je,null,{default:C(()=>[h(lt,{class:"text-tertiary"},{default:C(()=>t[226]||(t[226]=[K("Longe")])),_:1})]),_:1}),A("div",cEe,[A("table",null,[A("tbody",null,[t[229]||(t[229]=A("tr",null,[A("th"),A("th",{class:"esferico"},"Esf\xE9rico"),A("th",{class:"cilindrico"},"Cil\xEDndrico"),A("th",{class:"eixo"},"Eixo"),A("th",{class:"dnp"},"DNP")],-1)),A("tr",null,[t[227]||(t[227]=A("td",null,"OD",-1)),A("td",null,[h(n,{modelValue:a.campos.prescricao.dioptria.od.longe.esferico,"onUpdate:modelValue":[t[11]||(t[11]=c=>a.campos.prescricao.dioptria.od.longe.esferico=c),i.calcularAE],dense:"",min:"-30",max:"30",step:".25",tipo:"quantidade",decimals:"2",sinalPositivo:"",permiteNull:""},null,8,["modelValue","onUpdate:modelValue"])]),A("td",null,[h(n,{modelValue:a.campos.prescricao.dioptria.od.longe.cilindrico,"onUpdate:modelValue":t[12]||(t[12]=c=>a.campos.prescricao.dioptria.od.longe.cilindrico=c),min:"-10",max:"10",step:".25",tipo:"quantidade",decimals:"2",dense:"",sinalPositivo:"",permiteNull:""},null,8,["modelValue"])]),A("td",null,[h(n,{modelValue:a.campos.prescricao.dioptria.od.longe.eixo,"onUpdate:modelValue":t[13]||(t[13]=c=>a.campos.prescricao.dioptria.od.longe.eixo=c),dense:"",readonly:a.campos.prescricao.dioptria.od.longe.cilindrico==0,disable:a.campos.prescricao.dioptria.od.longe.cilindrico==0,min:"0",max:"180",tipo:"decimal",decimals:"0",permiteNull:""},null,8,["modelValue","readonly","disable"])]),A("td",null,[h(n,{modelValue:a.campos.prescricao.dioptria.od.longe.dnp,"onUpdate:modelValue":t[14]||(t[14]=c=>a.campos.prescricao.dioptria.od.longe.dnp=c),min:"0",tipo:"decimal",dense:"",decimals:"2",onBlur:t[15]||(t[15]=c=>i.calcularDnpPerto("direito")),permiteNull:""},null,8,["modelValue"])])]),A("tr",null,[t[228]||(t[228]=A("td",null,"OE",-1)),a.confirmaHabilitaPerto?ie("",!0):(B(),be("td",uEe,[h(n,{modelValue:a.campos.prescricao.dioptria.oe.longe.esferico,"onUpdate:modelValue":[t[16]||(t[16]=c=>a.campos.prescricao.dioptria.oe.longe.esferico=c),i.calcularAE],dense:"",min:"-30",max:"30",step:".25",tipo:"quantidade",decimals:"2",sinalPositivo:"",permiteNull:""},null,8,["modelValue","onUpdate:modelValue"])])),a.confirmaHabilitaPerto?ie("",!0):(B(),be("td",dEe,[h(n,{modelValue:a.campos.prescricao.dioptria.oe.longe.cilindrico,"onUpdate:modelValue":t[17]||(t[17]=c=>a.campos.prescricao.dioptria.oe.longe.cilindrico=c),min:"-10",max:"10",step:".25",tipo:"quantidade",decimals:"2",dense:"",sinalPositivo:"",permiteNull:""},null,8,["modelValue"])])),a.confirmaHabilitaPerto?ie("",!0):(B(),be("td",fEe,[h(n,{modelValue:a.campos.prescricao.dioptria.oe.longe.eixo,"onUpdate:modelValue":t[18]||(t[18]=c=>a.campos.prescricao.dioptria.oe.longe.eixo=c),dense:"",readonly:a.campos.prescricao.dioptria.oe.longe.cilindrico==0,disable:a.campos.prescricao.dioptria.oe.longe.cilindrico==0,min:"0",max:"180",tipo:"decimal",decimals:"0",permiteNull:""},null,8,["modelValue","readonly","disable"])])),a.confirmaHabilitaPerto?ie("",!0):(B(),be("td",mEe,[h(n,{modelValue:a.campos.prescricao.dioptria.oe.longe.dnp,"onUpdate:modelValue":t[19]||(t[19]=c=>a.campos.prescricao.dioptria.oe.longe.dnp=c),min:"0",tipo:"decimal",dense:"",decimals:"2",onBlur:t[20]||(t[20]=c=>i.calcularDnpPerto("esquerdo")),permiteNull:""},null,8,["modelValue"])]))])])])])]),_:1})])),a.habilitaPerto?ie("",!0):(B(),be("div",pEe,[h(Mt,{class:"no-shadow rounded-borders"},{default:C(()=>[h(Je,null,{default:C(()=>[h(lt,{class:"text-tertiary"},{default:C(()=>[h(n,{modelValue:a.habilitaMedio,"onUpdate:modelValue":[t[21]||(t[21]=c=>a.habilitaMedio=c),t[22]||(t[22]=c=>i.zerarCamposMedio(!0))],tipo:"logico",rotulo:"M\xE9dio"},null,8,["modelValue"])]),_:1})]),_:1}),A("div",hEe,[A("table",null,[A("tbody",null,[A("tr",null,[t[230]||(t[230]=A("th",null,null,-1)),!a.confirmaHabilitaPerto&&!a.habilitaAE?(B(),be("th",vEe,"Adi\xE7\xE3o")):ie("",!0),!a.confirmaHabilitaPerto&&a.habilitaAE?(B(),be("th",gEe,"Esf\xE9rico")):ie("",!0),a.confirmaHabilitaPerto?ie("",!0):(B(),be("th",_Ee,"DNP"))]),A("tr",null,[t[231]||(t[231]=A("td",null,"OD",-1)),a.confirmaHabilitaPerto?ie("",!0):(B(),be("td",bEe,[a.habilitaAE?ie("",!0):(B(),oe(n,{key:0,modelValue:a.campos.prescricao.dioptria.od.medio.adicao,"onUpdate:modelValue":[t[23]||(t[23]=c=>a.campos.prescricao.dioptria.od.medio.adicao=c),i.calcularAE],readonly:!a.habilitaMedio,disable:!a.habilitaMedio,min:"-30",max:"30",step:".25",tipo:"quantidade",decimals:"2",sinalPositivo:"",permiteNull:""},null,8,["modelValue","onUpdate:modelValue","readonly","disable"])),a.habilitaAE?(B(),oe(n,{key:1,modelValue:a.campos.prescricao.dioptria.od.medio.esferico,"onUpdate:modelValue":[t[24]||(t[24]=c=>a.campos.prescricao.dioptria.od.medio.esferico=c),i.calcularAE],disable:!a.habilitaMedio,readonly:!a.habilitaMedio,min:"-30",max:"30",step:".25",tipo:"quantidade",decimals:"2",sinalPositivo:"",permiteNull:""},null,8,["modelValue","onUpdate:modelValue","disable","readonly"])):ie("",!0)])),a.confirmaHabilitaPerto?ie("",!0):(B(),be("td",yEe,[h(n,{modelValue:a.campos.prescricao.dioptria.od.medio.dnp,"onUpdate:modelValue":t[25]||(t[25]=c=>a.campos.prescricao.dioptria.od.medio.dnp=c),disable:!a.habilitaMedio,readonly:!a.habilitaMedio,min:"0",tipo:"decimal",decimals:"2",permiteNull:""},null,8,["modelValue","disable","readonly"])]))]),A("tr",null,[t[232]||(t[232]=A("td",null,"OE",-1)),a.confirmaHabilitaPerto?ie("",!0):(B(),be("td",xEe,[a.habilitaAE?ie("",!0):(B(),oe(n,{key:0,modelValue:a.campos.prescricao.dioptria.oe.medio.adicao,"onUpdate:modelValue":[t[26]||(t[26]=c=>a.campos.prescricao.dioptria.oe.medio.adicao=c),i.calcularAE],disable:!a.habilitaMedio,readonly:!a.habilitaMedio,min:"-30",max:"30",step:".25",tipo:"quantidade",decimals:"2",sinalPositivo:"",permiteNull:""},null,8,["modelValue","disable","readonly","onUpdate:modelValue"])),a.habilitaAE?(B(),oe(n,{key:1,modelValue:a.campos.prescricao.dioptria.oe.medio.esferico,"onUpdate:modelValue":[t[27]||(t[27]=c=>a.campos.prescricao.dioptria.oe.medio.esferico=c),i.calcularAE],disable:!a.habilitaMedio,readonly:!a.habilitaMedio,min:"-30",max:"30",step:".25",tipo:"quantidade",decimals:"2",sinalPositivo:"",permiteNull:""},null,8,["modelValue","disable","readonly","onUpdate:modelValue"])):ie("",!0)])),a.confirmaHabilitaPerto?ie("",!0):(B(),be("td",CEe,[h(n,{modelValue:a.campos.prescricao.dioptria.oe.medio.dnp,"onUpdate:modelValue":t[28]||(t[28]=c=>a.campos.prescricao.dioptria.oe.medio.dnp=c),disable:!a.habilitaMedio,readonly:!a.habilitaMedio,min:"0",tipo:"decimal",decimals:"2",permiteNull:""},null,8,["modelValue","disable","readonly"])]))])])])])]),_:1})])),A("div",{class:Li(a.habilitaPerto?"col-xs-12":"col-xs-12 col-md-3")},[h(Mt,{class:"no-shadow rounded-borders"},{default:C(()=>[h(Je,null,{default:C(()=>[h(lt,{class:"text-tertiary"},{default:C(()=>[h(n,{modelValue:a.habilitaPerto,"onUpdate:modelValue":[t[29]||(t[29]=c=>a.habilitaPerto=c),t[30]||(t[30]=c=>i.zerarCamposLongeMedio())],tipo:"logico",rotulo:"Perto"},null,8,["modelValue"])]),_:1})]),_:1}),A("div",wEe,[A("table",null,[A("tbody",null,[A("tr",null,[t[233]||(t[233]=A("th",null,null,-1)),!a.habilitaPerto&&!a.habilitaAE?(B(),be("th",EEe,"Adi\xE7\xE3o")):ie("",!0),!a.habilitaPerto&&a.habilitaAE?(B(),be("th",SEe,"Esf\xE9rico")):ie("",!0),a.habilitaPerto?(B(),be("th",IEe,"Esf\xE9rico")):ie("",!0),a.habilitaPerto?(B(),be("th",AEe,"Cil\xEDndrico")):ie("",!0),a.habilitaPerto?(B(),be("th",TEe,"Eixo")):ie("",!0),t[234]||(t[234]=A("th",{class:"dnp"},"DNP",-1))]),A("tr",null,[t[235]||(t[235]=A("td",null,"OD",-1)),A("td",null,[!a.habilitaAE&&!a.habilitaPerto?(B(),oe(n,{key:0,modelValue:a.campos.prescricao.dioptria.od.perto.adicao,"onUpdate:modelValue":[t[31]||(t[31]=c=>a.campos.prescricao.dioptria.od.perto.adicao=c),i.calcularAE],min:"-30",max:"30",step:".25",tipo:"quantidade",decimals:"2",sinalPositivo:"",onBlur:t[32]||(t[32]=c=>i.calcularDnpPerto("direito")),permiteNull:""},null,8,["modelValue","onUpdate:modelValue"])):ie("",!0),a.habilitaAE||a.habilitaPerto?(B(),oe(n,{key:1,modelValue:a.campos.prescricao.dioptria.od.perto.esferico,"onUpdate:modelValue":[t[33]||(t[33]=c=>a.campos.prescricao.dioptria.od.perto.esferico=c),i.calcularAE],min:"-30",max:"30",step:".25",tipo:"quantidade",decimals:"2",sinalPositivo:"",onBlur:t[34]||(t[34]=c=>i.calcularDnpPerto("direito")),permiteNull:""},null,8,["modelValue","onUpdate:modelValue"])):ie("",!0)]),a.habilitaPerto?(B(),be("td",DEe,[h(n,{modelValue:a.campos.prescricao.dioptria.od.perto.cilindrico,"onUpdate:modelValue":t[35]||(t[35]=c=>a.campos.prescricao.dioptria.od.perto.cilindrico=c),aviso:a.campos.prescricao.dioptria.od.perto.cilindrico<-8||a.campos.prescricao.dioptria.od.perto.cilindrico>0,avisoRotulo:"Cil\xEDndrico est\xE1 fora do comum '0 a -8'.",min:"-10",max:"10",step:".25",tipo:"quantidade",decimals:"2",sinalPositivo:"",permiteNull:""},null,8,["modelValue","aviso"])])):ie("",!0),a.habilitaPerto?(B(),be("td",OEe,[h(n,{modelValue:a.campos.prescricao.dioptria.od.perto.eixo,"onUpdate:modelValue":t[36]||(t[36]=c=>a.campos.prescricao.dioptria.od.perto.eixo=c),readonly:a.campos.prescricao.dioptria.od.perto.cilindrico==0,disable:a.campos.prescricao.dioptria.od.perto.cilindrico==0,min:"0",max:"180",tipo:"decimal",decimals:"0",permiteNull:""},null,8,["modelValue","readonly","disable"])])):ie("",!0),A("td",null,[h(n,{modelValue:a.campos.prescricao.dioptria.od.perto.dnp,"onUpdate:modelValue":t[37]||(t[37]=c=>a.campos.prescricao.dioptria.od.perto.dnp=c),min:"0",tipo:"decimal",decimals:"2",permiteNull:""},null,8,["modelValue"])])]),A("tr",null,[t[236]||(t[236]=A("td",null,"OE",-1)),A("td",null,[!a.habilitaAE&&!a.habilitaPerto?(B(),oe(n,{key:0,modelValue:a.campos.prescricao.dioptria.oe.perto.adicao,"onUpdate:modelValue":[t[38]||(t[38]=c=>a.campos.prescricao.dioptria.oe.perto.adicao=c),i.calcularAE],min:"-30",max:"30",step:".25",tipo:"quantidade",decimals:"2",sinalPositivo:"",onBlur:t[39]||(t[39]=c=>i.calcularDnpPerto("esquerdo")),permiteNull:""},null,8,["modelValue","onUpdate:modelValue"])):ie("",!0),a.habilitaAE||a.habilitaPerto?(B(),oe(n,{key:1,modelValue:a.campos.prescricao.dioptria.oe.perto.esferico,"onUpdate:modelValue":[t[40]||(t[40]=c=>a.campos.prescricao.dioptria.oe.perto.esferico=c),i.calcularAE],min:"-30",max:"30",step:".25",tipo:"quantidade",decimals:"2",sinalPositivo:"",onBlur:t[41]||(t[41]=c=>i.calcularDnpPerto("esquerdo")),permiteNull:""},null,8,["modelValue","onUpdate:modelValue"])):ie("",!0)]),a.habilitaPerto?(B(),be("td",PEe,[h(n,{modelValue:a.campos.prescricao.dioptria.oe.perto.cilindrico,"onUpdate:modelValue":t[42]||(t[42]=c=>a.campos.prescricao.dioptria.oe.perto.cilindrico=c),aviso:a.campos.prescricao.dioptria.oe.perto.cilindrico<-8||a.campos.prescricao.dioptria.oe.perto.cilindrico>0,avisoRotulo:"Cil\xEDndrico est\xE1 fora do comum '0 a -8'.",min:"-10",max:"10",step:".25",tipo:"quantidade",decimals:"2",sinalPositivo:"",permiteNull:""},null,8,["modelValue","aviso"])])):ie("",!0),a.habilitaPerto?(B(),be("td",FEe,[h(n,{modelValue:a.campos.prescricao.dioptria.oe.perto.eixo,"onUpdate:modelValue":t[43]||(t[43]=c=>a.campos.prescricao.dioptria.oe.perto.eixo=c),readonly:a.campos.prescricao.dioptria.oe.perto.cilindrico==0,disable:a.campos.prescricao.dioptria.oe.perto.cilindrico==0,min:"0",max:"180",tipo:"decimal",decimals:"0",permiteNull:""},null,8,["modelValue","readonly","disable"])])):ie("",!0),A("td",null,[h(n,{modelValue:a.campos.prescricao.dioptria.oe.perto.dnp,"onUpdate:modelValue":t[44]||(t[44]=c=>a.campos.prescricao.dioptria.oe.perto.dnp=c),min:"0",tipo:"decimal",decimals:"2",permiteNull:""},null,8,["modelValue"])])])])])])]),_:1})],2)]),_:1}),h(s,{class:"items-center q-col-gutter-md q-mb-md"},{default:C(()=>[A("div",MEe,[h(ae,{color:"primary",icon:"content_copy",label:"Copiar OD > OE",unelevated:"",onClick:i.copiarODDioptria},null,8,["onClick"])])]),_:1})]),_:1}),h(fd,{name:"prisma",class:"bg-light q-px-none"},{default:C(()=>[h(s,{class:"items-center q-col-gutter-md q-mb-md"},{default:C(()=>[A("div",NEe,[h(Mt,{class:"no-shadow rounded-borders q-mb-md"},{default:C(()=>[A("div",kEe,[h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[237]||(t[237]=A("div",{class:"col-auto"}," OD ",-1)),A("div",REe,[h(n,{modelValue:a.campos.prescricao.prisma.od.valor,"onUpdate:modelValue":t[45]||(t[45]=c=>a.campos.prescricao.prisma.od.valor=c),rotulo:"Prisma",min:"-30",max:"30",passo:".25",tipo:"decimal",decimals:"2",permiteNull:""},null,8,["modelValue"])]),A("div",VEe,[h(n,{modelValue:a.campos.prescricao.prisma.od.base,"onUpdate:modelValue":t[46]||(t[46]=c=>a.campos.prescricao.prisma.od.base=c),rotulo:"Base",tipo:"seletor",opcoes:["Nasal","Temporal","Superior","Inferior"]},null,8,["modelValue"])])]),_:1})])]),_:1})]),A("div",BEe,[h(ae,{color:"primary",unelevated:"",icon:"content_copy",label:"Copiar OD > OE",onClick:i.copiarODPrisma,class:"'q-my-none'"},null,8,["onClick"])]),A("div",qEe,[h(Mt,{class:"no-shadow rounded-borders q-mb-md"},{default:C(()=>[A("div",LEe,[h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[238]||(t[238]=A("div",{class:"col-auto"}," OE ",-1)),A("div",$Ee,[h(n,{modelValue:a.campos.prescricao.prisma.oe.valor,"onUpdate:modelValue":t[47]||(t[47]=c=>a.campos.prescricao.prisma.oe.valor=c),rotulo:"Prisma",min:"-30",max:"30",passo:".25",tipo:"decimal",decimals:"2",permiteNull:""},null,8,["modelValue"])]),A("div",UEe,[h(n,{modelValue:a.campos.prescricao.prisma.oe.base,"onUpdate:modelValue":t[48]||(t[48]=c=>a.campos.prescricao.prisma.oe.base=c),rotulo:"Base",tipo:"seletor",opcoes:["Nasal","Temporal","Superior","Inferior"]},null,8,["modelValue"])])]),_:1})])]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a.verOptometria?(B(),be(Qe,{key:1},[h(Yr,{"expand-separator":"","default-opened":"",modelValue:a.abasOptometria.OftalmoscopiaDireta,"onUpdate:modelValue":t[68]||(t[68]=c=>a.abasOptometria.OftalmoscopiaDireta=c),label:"Oftalmoscopia Direta",onShow:i.setAba,onHide:i.setAba},{default:C(()=>[h(Mt,{class:"bg-white q-mb-md no-shadow"},{default:C(()=>[A("div",zEe,[h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>t[239]||(t[239]=[A("div",{class:"col-2 col-sm-1"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}})],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"OD")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"OE")],-1)])),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[240]||(t[240]=A("div",{class:"col-2 col-sm-1"}," Bruckner ",-1)),A("div",HEe,[A("label",jEe,[h(n,{modelValue:a.camposOptometria.oftalmoscopiaDireta.od.bruckner,"onUpdate:modelValue":t[50]||(t[50]=c=>a.camposOptometria.oftalmoscopiaDireta.od.bruckner=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",GEe,[A("label",WEe,[h(n,{modelValue:a.camposOptometria.oftalmoscopiaDireta.oe.bruckner,"onUpdate:modelValue":t[51]||(t[51]=c=>a.camposOptometria.oftalmoscopiaDireta.oe.bruckner=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[241]||(t[241]=A("div",{class:"col-2 col-sm-1"}," Lente ",-1)),A("div",QEe,[A("label",XEe,[h(n,{modelValue:a.camposOptometria.oftalmoscopiaDireta.od.lente,"onUpdate:modelValue":t[52]||(t[52]=c=>a.camposOptometria.oftalmoscopiaDireta.od.lente=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",KEe,[A("label",YEe,[h(n,{modelValue:a.camposOptometria.oftalmoscopiaDireta.oe.lente,"onUpdate:modelValue":t[53]||(t[53]=c=>a.camposOptometria.oftalmoscopiaDireta.oe.lente=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[242]||(t[242]=A("div",{class:"col-2 col-sm-1"}," Escava\xE7\xE3o ",-1)),A("div",JEe,[A("label",ZEe,[h(n,{modelValue:a.camposOptometria.oftalmoscopiaDireta.od.escavacao,"onUpdate:modelValue":t[54]||(t[54]=c=>a.camposOptometria.oftalmoscopiaDireta.od.escavacao=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",eSe,[A("label",tSe,[h(n,{modelValue:a.camposOptometria.oftalmoscopiaDireta.oe.escavacao,"onUpdate:modelValue":t[55]||(t[55]=c=>a.camposOptometria.oftalmoscopiaDireta.oe.escavacao=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[243]||(t[243]=A("div",{class:"col-2 col-sm-1"}," Rela\xE7\xE3o AV ",-1)),A("div",oSe,[A("label",aSe,[h(n,{modelValue:a.camposOptometria.oftalmoscopiaDireta.od.relacaoAV,"onUpdate:modelValue":t[56]||(t[56]=c=>a.camposOptometria.oftalmoscopiaDireta.od.relacaoAV=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",rSe,[A("label",iSe,[h(n,{modelValue:a.camposOptometria.oftalmoscopiaDireta.oe.relacaoAV,"onUpdate:modelValue":t[57]||(t[57]=c=>a.camposOptometria.oftalmoscopiaDireta.oe.relacaoAV=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[244]||(t[244]=A("div",{class:"col-2 col-sm-1"}," M\xE1cula ",-1)),A("div",nSe,[A("label",sSe,[h(n,{modelValue:a.camposOptometria.oftalmoscopiaDireta.od.macula,"onUpdate:modelValue":t[58]||(t[58]=c=>a.camposOptometria.oftalmoscopiaDireta.od.macula=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",lSe,[A("label",cSe,[h(n,{modelValue:a.camposOptometria.oftalmoscopiaDireta.oe.macula,"onUpdate:modelValue":t[59]||(t[59]=c=>a.camposOptometria.oftalmoscopiaDireta.oe.macula=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[245]||(t[245]=A("div",{class:"col-2 col-sm-1"}," Fixa\xE7\xE3o ",-1)),A("div",uSe,[A("label",dSe,[h(n,{modelValue:a.camposOptometria.oftalmoscopiaDireta.od.fixacao,"onUpdate:modelValue":t[60]||(t[60]=c=>a.camposOptometria.oftalmoscopiaDireta.od.fixacao=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",fSe,[A("label",mSe,[h(n,{modelValue:a.camposOptometria.oftalmoscopiaDireta.oe.fixacao,"onUpdate:modelValue":t[61]||(t[61]=c=>a.camposOptometria.oftalmoscopiaDireta.oe.fixacao=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[246]||(t[246]=A("div",{class:"col-2 col-sm-1"}," Cor ",-1)),A("div",pSe,[A("label",hSe,[h(n,{modelValue:a.camposOptometria.oftalmoscopiaDireta.od.cor,"onUpdate:modelValue":t[62]||(t[62]=c=>a.camposOptometria.oftalmoscopiaDireta.od.cor=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",vSe,[A("label",gSe,[h(n,{modelValue:a.camposOptometria.oftalmoscopiaDireta.oe.cor,"onUpdate:modelValue":t[63]||(t[63]=c=>a.camposOptometria.oftalmoscopiaDireta.oe.cor=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[247]||(t[247]=A("div",{class:"col-2 col-sm-1"}," Papila ",-1)),A("div",_Se,[A("label",bSe,[h(n,{modelValue:a.camposOptometria.oftalmoscopiaDireta.od.papila,"onUpdate:modelValue":t[64]||(t[64]=c=>a.camposOptometria.oftalmoscopiaDireta.od.papila=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",ySe,[A("label",xSe,[h(n,{modelValue:a.camposOptometria.oftalmoscopiaDireta.oe.papila,"onUpdate:modelValue":t[65]||(t[65]=c=>a.camposOptometria.oftalmoscopiaDireta.oe.papila=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[248]||(t[248]=A("div",{class:"col-2 col-sm-1"}," Observa\xE7\xE3o ",-1)),A("div",CSe,[A("label",wSe,[h(n,{modelValue:a.camposOptometria.oftalmoscopiaDireta.od.observacao,"onUpdate:modelValue":t[66]||(t[66]=c=>a.camposOptometria.oftalmoscopiaDireta.od.observacao=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",ESe,[A("label",SSe,[h(n,{modelValue:a.camposOptometria.oftalmoscopiaDireta.oe.observacao,"onUpdate:modelValue":t[67]||(t[67]=c=>a.camposOptometria.oftalmoscopiaDireta.oe.observacao=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1})])]),_:1})]),_:1},8,["modelValue","onShow","onHide"]),h(Yr,{"expand-separator":"",modelValue:a.abasOptometria.AcuiVisual,"onUpdate:modelValue":t[80]||(t[80]=c=>a.abasOptometria.AcuiVisual=c),onShow:i.setAba,onHide:i.setAba,label:"Acui. Visual"},{default:C(()=>[h(Mt,{class:"bg-white q-mb-md no-shadow"},{default:C(()=>[A("div",ISe,[h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>t[249]||(t[249]=[A("div",{class:"col-2 col-sm-1"}," \xA0\xA0\xA0 ",-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"VL-SC")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"PH")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"VP-SC")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"VL-CC")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"VP-CC")],-1)])),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[250]||(t[250]=A("div",{class:"col-2 col-sm-1"}," OD ",-1)),A("div",ASe,[h(n,{modelValue:a.camposOptometria.acuiVisual.od.VLSC,"onUpdate:modelValue":t[69]||(t[69]=c=>a.camposOptometria.acuiVisual.od.VLSC=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",TSe,[h(n,{modelValue:a.camposOptometria.acuiVisual.od.PH,"onUpdate:modelValue":t[70]||(t[70]=c=>a.camposOptometria.acuiVisual.od.PH=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",DSe,[h(n,{modelValue:a.camposOptometria.acuiVisual.od.VPSC,"onUpdate:modelValue":t[71]||(t[71]=c=>a.camposOptometria.acuiVisual.od.VPSC=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",OSe,[h(n,{modelValue:a.camposOptometria.acuiVisual.od.VLCC,"onUpdate:modelValue":t[72]||(t[72]=c=>a.camposOptometria.acuiVisual.od.VLCC=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",PSe,[h(n,{modelValue:a.camposOptometria.acuiVisual.od.VPCC,"onUpdate:modelValue":t[73]||(t[73]=c=>a.camposOptometria.acuiVisual.od.VPCC=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[251]||(t[251]=A("div",{class:"col-2 col-sm-1"}," OE ",-1)),A("div",FSe,[h(n,{modelValue:a.camposOptometria.acuiVisual.oe.VLSC,"onUpdate:modelValue":t[74]||(t[74]=c=>a.camposOptometria.acuiVisual.oe.VLSC=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",MSe,[h(n,{modelValue:a.camposOptometria.acuiVisual.oe.PH,"onUpdate:modelValue":t[75]||(t[75]=c=>a.camposOptometria.acuiVisual.oe.PH=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",NSe,[h(n,{modelValue:a.camposOptometria.acuiVisual.oe.VPSC,"onUpdate:modelValue":t[76]||(t[76]=c=>a.camposOptometria.acuiVisual.oe.VPSC=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",kSe,[h(n,{modelValue:a.camposOptometria.acuiVisual.oe.VLCC,"onUpdate:modelValue":t[77]||(t[77]=c=>a.camposOptometria.acuiVisual.oe.VLCC=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",RSe,[h(n,{modelValue:a.camposOptometria.acuiVisual.oe.VPCC,"onUpdate:modelValue":t[78]||(t[78]=c=>a.camposOptometria.acuiVisual.oe.VPCC=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),_:1}),h(s,null,{default:C(()=>[A("div",VSe,[h(n,{modelValue:a.camposOptometria.acuiVisual.optotipo,"onUpdate:modelValue":t[79]||(t[79]=c=>a.camposOptometria.acuiVisual.optotipo=c),tipo:"texto",rotulo:"Optotipo",dense:""},null,8,["modelValue"])])]),_:1})])]),_:1})]),_:1},8,["modelValue","onShow","onHide"]),h(Yr,{"expand-separator":"",modelValue:a.abasOptometria.ReflPup,"onUpdate:modelValue":t[87]||(t[87]=c=>a.abasOptometria.ReflPup=c),onShow:i.setAba,onHide:i.setAba,label:"Refl. Pup"},{default:C(()=>[h(Mt,{class:"bg-white q-mb-md no-shadow"},{default:C(()=>[A("div",BSe,[h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>t[252]||(t[252]=[A("div",{class:"col-2 col-sm-1"}," \xA0\xA0\xA0 ",-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Fotomotor")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Consensual")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Acomodativo")],-1)])),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[253]||(t[253]=A("div",{class:"col-2 col-sm-1"}," OD ",-1)),A("div",qSe,[h(n,{modelValue:a.camposOptometria.reflPup.od.fotomotor,"onUpdate:modelValue":t[81]||(t[81]=c=>a.camposOptometria.reflPup.od.fotomotor=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",LSe,[h(n,{modelValue:a.camposOptometria.reflPup.od.consensual,"onUpdate:modelValue":t[82]||(t[82]=c=>a.camposOptometria.reflPup.od.consensual=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",$Se,[h(n,{modelValue:a.camposOptometria.reflPup.od.acomodativo,"onUpdate:modelValue":t[83]||(t[83]=c=>a.camposOptometria.reflPup.od.acomodativo=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[254]||(t[254]=A("div",{class:"col-2 col-sm-1"}," OE ",-1)),A("div",USe,[h(n,{modelValue:a.camposOptometria.reflPup.oe.fotomotor,"onUpdate:modelValue":t[84]||(t[84]=c=>a.camposOptometria.reflPup.oe.fotomotor=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",zSe,[h(n,{modelValue:a.camposOptometria.reflPup.oe.consensual,"onUpdate:modelValue":t[85]||(t[85]=c=>a.camposOptometria.reflPup.oe.consensual=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",HSe,[h(n,{modelValue:a.camposOptometria.reflPup.oe.acomodativo,"onUpdate:modelValue":t[86]||(t[86]=c=>a.camposOptometria.reflPup.oe.acomodativo=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),_:1})])]),_:1})]),_:1},8,["modelValue","onShow","onHide"]),h(Yr,{"expand-separator":"",modelValue:a.abasOptometria.AvaliacaoMotora,"onUpdate:modelValue":t[108]||(t[108]=c=>a.abasOptometria.AvaliacaoMotora=c),onShow:i.setAba,onHide:i.setAba,label:"Avalia\xE7\xE3o Motora"},{default:C(()=>[h(Mt,{class:"bg-white q-mb-md no-shadow"},{default:C(()=>[A("div",jSe,[h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>t[255]||(t[255]=[A("div",{class:"col-2 col-sm-1"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}})],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"OD")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"OE")],-1)])),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[256]||(t[256]=A("div",{class:"col-2 col-sm-1"}," Kappa ",-1)),A("div",GSe,[A("label",WSe,[h(n,{modelValue:a.camposOptometria.avaliacaoMotora.od.kappa,"onUpdate:modelValue":t[88]||(t[88]=c=>a.camposOptometria.avaliacaoMotora.od.kappa=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",QSe,[A("label",XSe,[h(n,{modelValue:a.camposOptometria.avaliacaoMotora.oe.kappa,"onUpdate:modelValue":t[89]||(t[89]=c=>a.camposOptometria.avaliacaoMotora.oe.kappa=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[257]||(t[257]=A("div",{class:"col-2 col-sm-1"}," Hirschberg ",-1)),A("div",KSe,[A("label",YSe,[h(n,{modelValue:a.camposOptometria.avaliacaoMotora.od.hirschberg,"onUpdate:modelValue":t[90]||(t[90]=c=>a.camposOptometria.avaliacaoMotora.od.hirschberg=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",JSe,[A("label",ZSe,[h(n,{modelValue:a.camposOptometria.avaliacaoMotora.oe.hirschberg,"onUpdate:modelValue":t[91]||(t[91]=c=>a.camposOptometria.avaliacaoMotora.oe.hirschberg=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[258]||(t[258]=A("div",{class:"col-2 col-sm-1"}," Duc\xE7\xF5es ",-1)),A("div",eIe,[A("label",tIe,[h(n,{modelValue:a.camposOptometria.avaliacaoMotora.od.duccoes,"onUpdate:modelValue":t[92]||(t[92]=c=>a.camposOptometria.avaliacaoMotora.od.duccoes=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",oIe,[A("label",aIe,[h(n,{modelValue:a.camposOptometria.avaliacaoMotora.oe.duccoes,"onUpdate:modelValue":t[93]||(t[93]=c=>a.camposOptometria.avaliacaoMotora.oe.duccoes=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[273]||(t[273]=A("div",{class:"col-2 col-sm-1"}," Vers\xF5es ",-1)),A("div",rIe,[A("div",iIe,[t[265]||(t[265]=A("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},[A("line",{x1:"0",y1:"50%",x2:"100%",y2:"50%",style:{stroke:"rgb(0,0,0)","stroke-width":"2"}}),A("line",{x1:"34%",y1:"0",x2:"34%",y2:"100%",style:{stroke:"rgb(0,0,0)","stroke-width":"2"}}),A("line",{x1:"66%",y1:"0",x2:"66%",y2:"100%",style:{stroke:"rgb(0,0,0)","stroke-width":"2"}})],-1)),A("div",nIe,[Ee(A("input",{type:"checkbox",id:"c_ava_mot_ver_od_0",name:"ava_mot_ver_od_0","onUpdate:modelValue":t[94]||(t[94]=c=>a.camposOptometria.avaliacaoMotora.od.versoes.ava_mot_ver_od_0=c)},null,512),[[mi,a.camposOptometria.avaliacaoMotora.od.versoes.ava_mot_ver_od_0]]),t[259]||(t[259]=A("label",{for:"c_ava_mot_ver_od_0"},null,-1))]),A("div",sIe,[Ee(A("input",{type:"checkbox",id:"c_ava_mot_ver_od_1",name:"ava_mot_ver_od_1","onUpdate:modelValue":t[95]||(t[95]=c=>a.camposOptometria.avaliacaoMotora.od.versoes.ava_mot_ver_od_1=c)},null,512),[[mi,a.camposOptometria.avaliacaoMotora.od.versoes.ava_mot_ver_od_1]]),t[260]||(t[260]=A("label",{for:"c_ava_mot_ver_od_1"},null,-1))]),A("div",lIe,[Ee(A("input",{type:"checkbox",id:"c_ava_mot_ver_od_2",name:"ava_mot_ver_od_2","onUpdate:modelValue":t[96]||(t[96]=c=>a.camposOptometria.avaliacaoMotora.od.versoes.ava_mot_ver_od_2=c)},null,512),[[mi,a.camposOptometria.avaliacaoMotora.od.versoes.ava_mot_ver_od_2]]),t[261]||(t[261]=A("label",{for:"c_ava_mot_ver_od_2"},null,-1))]),A("div",cIe,[Ee(A("input",{type:"checkbox",id:"c_ava_mot_ver_od_3",name:"ava_mot_ver_od_3","onUpdate:modelValue":t[97]||(t[97]=c=>a.camposOptometria.avaliacaoMotora.od.versoes.ava_mot_ver_od_3=c)},null,512),[[mi,a.camposOptometria.avaliacaoMotora.od.versoes.ava_mot_ver_od_3]]),t[262]||(t[262]=A("label",{for:"c_ava_mot_ver_od_3"},null,-1))]),A("div",uIe,[Ee(A("input",{type:"checkbox",id:"c_ava_mot_ver_od_4",name:"ava_mot_ver_od_4","onUpdate:modelValue":t[98]||(t[98]=c=>a.camposOptometria.avaliacaoMotora.od.versoes.ava_mot_ver_od_4=c)},null,512),[[mi,a.camposOptometria.avaliacaoMotora.od.versoes.ava_mot_ver_od_4]]),t[263]||(t[263]=A("label",{for:"c_ava_mot_ver_od_4"},null,-1))]),A("div",dIe,[Ee(A("input",{type:"checkbox",id:"c_ava_mot_ver_od_5",name:"ava_mot_ver_od_5","onUpdate:modelValue":t[99]||(t[99]=c=>a.camposOptometria.avaliacaoMotora.od.versoes.ava_mot_ver_od_5=c)},null,512),[[mi,a.camposOptometria.avaliacaoMotora.od.versoes.ava_mot_ver_od_5]]),t[264]||(t[264]=A("label",{for:"c_ava_mot_ver_od_5"},null,-1))])])]),A("div",fIe,[A("div",mIe,[t[272]||(t[272]=A("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},[A("line",{x1:"0",y1:"50%",x2:"100%",y2:"50%",style:{stroke:"rgb(0,0,0)","stroke-width":"2"}}),A("line",{x1:"34%",y1:"0",x2:"34%",y2:"100%",style:{stroke:"rgb(0,0,0)","stroke-width":"2"}}),A("line",{x1:"66%",y1:"0",x2:"66%",y2:"100%",style:{stroke:"rgb(0,0,0)","stroke-width":"2"}})],-1)),A("div",pIe,[Ee(A("input",{type:"checkbox",id:"c_ava_mot_ver_oe_0",name:"ava_mot_ver_oe_0","onUpdate:modelValue":t[100]||(t[100]=c=>a.camposOptometria.avaliacaoMotora.oe.versoes.ava_mot_ver_oe_0=c)},null,512),[[mi,a.camposOptometria.avaliacaoMotora.oe.versoes.ava_mot_ver_oe_0]]),t[266]||(t[266]=A("label",{for:"c_ava_mot_ver_oe_0"},null,-1))]),A("div",hIe,[Ee(A("input",{type:"checkbox",id:"c_ava_mot_ver_oe_1",name:"ava_mot_ver_oe_1","onUpdate:modelValue":t[101]||(t[101]=c=>a.camposOptometria.avaliacaoMotora.oe.versoes.ava_mot_ver_oe_1=c)},null,512),[[mi,a.camposOptometria.avaliacaoMotora.oe.versoes.ava_mot_ver_oe_1]]),t[267]||(t[267]=A("label",{for:"c_ava_mot_ver_oe_1"},null,-1))]),A("div",vIe,[Ee(A("input",{type:"checkbox",id:"c_ava_mot_ver_oe_2",name:"ava_mot_ver_oe_2","onUpdate:modelValue":t[102]||(t[102]=c=>a.camposOptometria.avaliacaoMotora.oe.versoes.ava_mot_ver_oe_2=c)},null,512),[[mi,a.camposOptometria.avaliacaoMotora.oe.versoes.ava_mot_ver_oe_2]]),t[268]||(t[268]=A("label",{for:"c_ava_mot_ver_oe_2"},null,-1))]),A("div",gIe,[Ee(A("input",{type:"checkbox",id:"c_ava_mot_ver_oe_3",name:"ava_mot_ver_oe_3","onUpdate:modelValue":t[103]||(t[103]=c=>a.camposOptometria.avaliacaoMotora.oe.versoes.ava_mot_ver_oe_3=c)},null,512),[[mi,a.camposOptometria.avaliacaoMotora.oe.versoes.ava_mot_ver_oe_3]]),t[269]||(t[269]=A("label",{for:"c_ava_mot_ver_oe_3"},null,-1))]),A("div",_Ie,[Ee(A("input",{type:"checkbox",id:"c_ava_mot_ver_oe_4",name:"ava_mot_ver_oe_4","onUpdate:modelValue":t[104]||(t[104]=c=>a.camposOptometria.avaliacaoMotora.oe.versoes.ava_mot_ver_oe_4=c)},null,512),[[mi,a.camposOptometria.avaliacaoMotora.oe.versoes.ava_mot_ver_oe_4]]),t[270]||(t[270]=A("label",{for:"c_ava_mot_ver_oe_4"},null,-1))]),A("div",bIe,[Ee(A("input",{type:"checkbox",id:"c_ava_mot_ver_oe_5",name:"ava_mot_ver_oe_5","onUpdate:modelValue":t[105]||(t[105]=c=>a.camposOptometria.avaliacaoMotora.oe.versoes.ava_mot_ver_oe_5=c)},null,512),[[mi,a.camposOptometria.avaliacaoMotora.oe.versoes.ava_mot_ver_oe_5]]),t[271]||(t[271]=A("label",{for:"c_ava_mot_ver_oe_5"},null,-1))])])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[274]||(t[274]=A("div",{class:"col-2 col-sm-1"}," Observa\xE7\xE3o ",-1)),A("div",yIe,[A("label",xIe,[h(n,{modelValue:a.camposOptometria.avaliacaoMotora.od.observacao,"onUpdate:modelValue":t[106]||(t[106]=c=>a.camposOptometria.avaliacaoMotora.od.observacao=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",CIe,[A("label",wIe,[h(n,{modelValue:a.camposOptometria.avaliacaoMotora.oe.observacao,"onUpdate:modelValue":t[107]||(t[107]=c=>a.camposOptometria.avaliacaoMotora.oe.observacao=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1})])]),_:1})]),_:1},8,["modelValue","onShow","onHide"]),h(Yr,{"expand-separator":"",modelValue:a.abasOptometria.Ppc,"onUpdate:modelValue":t[112]||(t[112]=c=>a.abasOptometria.Ppc=c),onShow:i.setAba,onHide:i.setAba,label:"PPC"},{default:C(()=>[h(Mt,{class:"bg-white q-mb-md no-shadow"},{default:C(()=>[A("div",EIe,[h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>t[275]||(t[275]=[A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Objeto Real")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Luz")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Filtro")],-1)])),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[A("div",SIe,[h(n,{modelValue:a.camposOptometria.ppc.objetoReal,"onUpdate:modelValue":t[109]||(t[109]=c=>a.camposOptometria.ppc.objetoReal=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",IIe,[h(n,{modelValue:a.camposOptometria.ppc.luz,"onUpdate:modelValue":t[110]||(t[110]=c=>a.camposOptometria.ppc.luz=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",AIe,[h(n,{modelValue:a.camposOptometria.ppc.filtro,"onUpdate:modelValue":t[111]||(t[111]=c=>a.camposOptometria.ppc.filtro=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),_:1})])]),_:1})]),_:1},8,["modelValue","onShow","onHide"]),h(Yr,{modelValue:a.abasOptometria.CoverTeste,"onUpdate:modelValue":t[119]||(t[119]=c=>a.abasOptometria.CoverTeste=c),onShow:i.setAba,onHide:i.setAba,"expand-separator":"",label:"Cover Teste"},{default:C(()=>[h(Mt,{class:"bg-white q-mb-md no-shadow"},{default:C(()=>[A("div",TIe,[h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>t[276]||(t[276]=[A("div",{class:"col-2 col-sm-1"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Distancia")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"S.C.\u2206")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"C.C.\u2206")],-1)])),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[277]||(t[277]=A("div",{class:"col-2 col-sm-1"}," 6m ",-1)),A("div",DIe,[A("label",OIe,[h(n,{modelValue:a.camposOptometria.coverTeste.sc.dist6m,"onUpdate:modelValue":t[113]||(t[113]=c=>a.camposOptometria.coverTeste.sc.dist6m=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",PIe,[A("label",FIe,[h(n,{modelValue:a.camposOptometria.coverTeste.cc.dist6m,"onUpdate:modelValue":t[114]||(t[114]=c=>a.camposOptometria.coverTeste.cc.dist6m=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[278]||(t[278]=A("div",{class:"col-2 col-sm-1"}," 40cm ",-1)),A("div",MIe,[A("label",NIe,[h(n,{modelValue:a.camposOptometria.coverTeste.sc.dist40cm,"onUpdate:modelValue":t[115]||(t[115]=c=>a.camposOptometria.coverTeste.sc.dist40cm=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",kIe,[A("label",RIe,[h(n,{modelValue:a.camposOptometria.coverTeste.cc.dist40cm,"onUpdate:modelValue":t[116]||(t[116]=c=>a.camposOptometria.coverTeste.cc.dist40cm=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[279]||(t[279]=A("div",{class:"col-2 col-sm-1"}," 20cm ",-1)),A("div",VIe,[A("label",BIe,[h(n,{modelValue:a.camposOptometria.coverTeste.sc.dist20cm,"onUpdate:modelValue":t[117]||(t[117]=c=>a.camposOptometria.coverTeste.sc.dist20cm=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",qIe,[A("label",LIe,[h(n,{modelValue:a.camposOptometria.coverTeste.cc.dist20cm,"onUpdate:modelValue":t[118]||(t[118]=c=>a.camposOptometria.coverTeste.cc.dist20cm=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1})])]),_:1})]),_:1},8,["modelValue","onShow","onHide"]),h(Yr,{"expand-separator":"",modelValue:a.abasOptometria.ReservasFusionais,"onUpdate:modelValue":t[124]||(t[124]=c=>a.abasOptometria.ReservasFusionais=c),onShow:i.setAba,onHide:i.setAba,label:"Reservas Fusionais"},{default:C(()=>[h(Mt,{class:"bg-white q-mb-md no-shadow"},{default:C(()=>[A("div",$Ie,[h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>t[280]||(t[280]=[A("div",{class:"col-2 col-sm-1"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}})],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"VL")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"VP")],-1)])),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[281]||(t[281]=A("div",{class:"col-2 col-sm-1"}," RFN ",-1)),A("div",UIe,[A("label",zIe,[h(n,{modelValue:a.camposOptometria.reservasFusionais.vl.rfn,"onUpdate:modelValue":t[120]||(t[120]=c=>a.camposOptometria.reservasFusionais.vl.rfn=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",HIe,[A("label",jIe,[h(n,{modelValue:a.camposOptometria.reservasFusionais.vp.rfn,"onUpdate:modelValue":t[121]||(t[121]=c=>a.camposOptometria.reservasFusionais.vp.rfn=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[282]||(t[282]=A("div",{class:"col-2 col-sm-1"}," RFP ",-1)),A("div",GIe,[A("label",WIe,[h(n,{modelValue:a.camposOptometria.reservasFusionais.vl.rfp,"onUpdate:modelValue":t[122]||(t[122]=c=>a.camposOptometria.reservasFusionais.vl.rfp=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",QIe,[A("label",XIe,[h(n,{modelValue:a.camposOptometria.reservasFusionais.vp.rfp,"onUpdate:modelValue":t[123]||(t[123]=c=>a.camposOptometria.reservasFusionais.vp.rfp=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1})])]),_:1})]),_:1},8,["modelValue","onShow","onHide"]),h(Yr,{modelValue:a.abasOptometria.Subjetivo,"onUpdate:modelValue":t[140]||(t[140]=c=>a.abasOptometria.Subjetivo=c),onShow:i.setAba,onHide:i.setAba,"expand-separator":"",label:"Subjetivo"},{default:C(()=>[h(Mt,{class:"bg-white q-mb-md no-shadow"},{default:C(()=>[A("div",KIe,[h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>t[283]||(t[283]=[A("div",{class:"col-2 col-sm-1"}," \xA0\xA0\xA0 ",-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"ESF.")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"CIL.")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"EIXO")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"A.V.L.")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"A.V.P")],-1)])),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[284]||(t[284]=A("div",{class:"col-2 col-sm-1"}," OD ",-1)),A("div",YIe,[h(n,{modelValue:a.camposOptometria.subjetivo.od.esf,"onUpdate:modelValue":t[125]||(t[125]=c=>a.camposOptometria.subjetivo.od.esf=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",JIe,[h(n,{modelValue:a.camposOptometria.subjetivo.od.cil,"onUpdate:modelValue":t[126]||(t[126]=c=>a.camposOptometria.subjetivo.od.cil=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",ZIe,[h(n,{modelValue:a.camposOptometria.subjetivo.od.eixo,"onUpdate:modelValue":t[127]||(t[127]=c=>a.camposOptometria.subjetivo.od.eixo=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",eAe,[h(n,{modelValue:a.camposOptometria.subjetivo.od.avl,"onUpdate:modelValue":t[128]||(t[128]=c=>a.camposOptometria.subjetivo.od.avl=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",tAe,[h(n,{modelValue:a.camposOptometria.subjetivo.od.avp,"onUpdate:modelValue":t[129]||(t[129]=c=>a.camposOptometria.subjetivo.od.avp=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[285]||(t[285]=A("div",{class:"col-2 col-sm-1"}," OE ",-1)),A("div",oAe,[h(n,{modelValue:a.camposOptometria.subjetivo.oe.esf,"onUpdate:modelValue":t[130]||(t[130]=c=>a.camposOptometria.subjetivo.oe.esf=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",aAe,[h(n,{modelValue:a.camposOptometria.subjetivo.oe.cil,"onUpdate:modelValue":t[131]||(t[131]=c=>a.camposOptometria.subjetivo.oe.cil=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",rAe,[h(n,{modelValue:a.camposOptometria.subjetivo.oe.eixo,"onUpdate:modelValue":t[132]||(t[132]=c=>a.camposOptometria.subjetivo.oe.eixo=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",iAe,[h(n,{modelValue:a.camposOptometria.subjetivo.oe.avl,"onUpdate:modelValue":t[133]||(t[133]=c=>a.camposOptometria.subjetivo.oe.avl=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",nAe,[h(n,{modelValue:a.camposOptometria.subjetivo.oe.avp,"onUpdate:modelValue":t[134]||(t[134]=c=>a.camposOptometria.subjetivo.oe.avp=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[286]||(t[286]=A("div",{class:"col-2 col-sm-1"}," ADD ",-1)),A("div",sAe,[h(n,{modelValue:a.camposOptometria.subjetivo.add.esf,"onUpdate:modelValue":t[135]||(t[135]=c=>a.camposOptometria.subjetivo.add.esf=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",lAe,[h(n,{modelValue:a.camposOptometria.subjetivo.add.cil,"onUpdate:modelValue":t[136]||(t[136]=c=>a.camposOptometria.subjetivo.add.cil=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",cAe,[h(n,{modelValue:a.camposOptometria.subjetivo.add.eixo,"onUpdate:modelValue":t[137]||(t[137]=c=>a.camposOptometria.subjetivo.add.eixo=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",uAe,[h(n,{modelValue:a.camposOptometria.subjetivo.add.avl,"onUpdate:modelValue":t[138]||(t[138]=c=>a.camposOptometria.subjetivo.add.avl=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",dAe,[h(n,{modelValue:a.camposOptometria.subjetivo.add.avp,"onUpdate:modelValue":t[139]||(t[139]=c=>a.camposOptometria.subjetivo.add.avp=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),_:1})])]),_:1})]),_:1},8,["modelValue","onShow","onHide"]),h(Yr,{"expand-separator":"",modelValue:a.abasOptometria.Ambulatorial,"onUpdate:modelValue":t[156]||(t[156]=c=>a.abasOptometria.Ambulatorial=c),onShow:i.setAba,onHide:i.setAba,label:"Ambulatorial"},{default:C(()=>[h(Mt,{class:"bg-white q-mb-md no-shadow"},{default:C(()=>[A("div",fAe,[h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>t[287]||(t[287]=[A("div",{class:"col-2 col-sm-1"}," \xA0\xA0\xA0 ",-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"ESF.")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"CIL.")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"EIXO")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"A.V.L.")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"A.V.P")],-1)])),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[288]||(t[288]=A("div",{class:"col-2 col-sm-1"}," OD ",-1)),A("div",mAe,[h(n,{modelValue:a.camposOptometria.ambulatorial.od.esf,"onUpdate:modelValue":t[141]||(t[141]=c=>a.camposOptometria.ambulatorial.od.esf=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",pAe,[h(n,{modelValue:a.camposOptometria.ambulatorial.od.cil,"onUpdate:modelValue":t[142]||(t[142]=c=>a.camposOptometria.ambulatorial.od.cil=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",hAe,[h(n,{modelValue:a.camposOptometria.ambulatorial.od.eixo,"onUpdate:modelValue":t[143]||(t[143]=c=>a.camposOptometria.ambulatorial.od.eixo=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",vAe,[h(n,{modelValue:a.camposOptometria.ambulatorial.od.avl,"onUpdate:modelValue":t[144]||(t[144]=c=>a.camposOptometria.ambulatorial.od.avl=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",gAe,[h(n,{modelValue:a.camposOptometria.ambulatorial.od.avp,"onUpdate:modelValue":t[145]||(t[145]=c=>a.camposOptometria.ambulatorial.od.avp=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[289]||(t[289]=A("div",{class:"col-2 col-sm-1"}," OE ",-1)),A("div",_Ae,[h(n,{modelValue:a.camposOptometria.ambulatorial.oe.esf,"onUpdate:modelValue":t[146]||(t[146]=c=>a.camposOptometria.ambulatorial.oe.esf=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",bAe,[h(n,{modelValue:a.camposOptometria.ambulatorial.oe.cil,"onUpdate:modelValue":t[147]||(t[147]=c=>a.camposOptometria.ambulatorial.oe.cil=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",yAe,[h(n,{modelValue:a.camposOptometria.ambulatorial.oe.eixo,"onUpdate:modelValue":t[148]||(t[148]=c=>a.camposOptometria.ambulatorial.oe.eixo=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",xAe,[h(n,{modelValue:a.camposOptometria.ambulatorial.oe.avl,"onUpdate:modelValue":t[149]||(t[149]=c=>a.camposOptometria.ambulatorial.oe.avl=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",CAe,[h(n,{modelValue:a.camposOptometria.ambulatorial.oe.avp,"onUpdate:modelValue":t[150]||(t[150]=c=>a.camposOptometria.ambulatorial.oe.avp=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[290]||(t[290]=A("div",{class:"col-2 col-sm-1"}," ADD ",-1)),A("div",wAe,[h(n,{modelValue:a.camposOptometria.ambulatorial.add.esf,"onUpdate:modelValue":t[151]||(t[151]=c=>a.camposOptometria.ambulatorial.add.esf=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",EAe,[h(n,{modelValue:a.camposOptometria.ambulatorial.add.cil,"onUpdate:modelValue":t[152]||(t[152]=c=>a.camposOptometria.ambulatorial.add.cil=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",SAe,[h(n,{modelValue:a.camposOptometria.ambulatorial.add.eixo,"onUpdate:modelValue":t[153]||(t[153]=c=>a.camposOptometria.ambulatorial.add.eixo=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",IAe,[h(n,{modelValue:a.camposOptometria.ambulatorial.add.avl,"onUpdate:modelValue":t[154]||(t[154]=c=>a.camposOptometria.ambulatorial.add.avl=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",AAe,[h(n,{modelValue:a.camposOptometria.ambulatorial.add.avp,"onUpdate:modelValue":t[155]||(t[155]=c=>a.camposOptometria.ambulatorial.add.avp=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),_:1})])]),_:1})]),_:1},8,["modelValue","onShow","onHide"]),h(Yr,{"expand-separator":"",modelValue:a.abasOptometria.Afinamento,"onUpdate:modelValue":t[172]||(t[172]=c=>a.abasOptometria.Afinamento=c),onShow:i.setAba,onHide:i.setAba,label:"Afinamento"},{default:C(()=>[h(Mt,{class:"bg-white q-mb-md no-shadow"},{default:C(()=>[A("div",TAe,[h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>t[291]||(t[291]=[A("div",{class:"col-2 col-sm-1"}," \xA0\xA0\xA0 ",-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"ESF.")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"CIL.")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"EIXO")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"A.V.L.")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"A.V.P")],-1)])),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[292]||(t[292]=A("div",{class:"col-2 col-sm-1"}," OD ",-1)),A("div",DAe,[h(n,{modelValue:a.camposOptometria.afinamento.od.esf,"onUpdate:modelValue":t[157]||(t[157]=c=>a.camposOptometria.afinamento.od.esf=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",OAe,[h(n,{modelValue:a.camposOptometria.afinamento.od.cil,"onUpdate:modelValue":t[158]||(t[158]=c=>a.camposOptometria.afinamento.od.cil=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",PAe,[h(n,{modelValue:a.camposOptometria.afinamento.od.eixo,"onUpdate:modelValue":t[159]||(t[159]=c=>a.camposOptometria.afinamento.od.eixo=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",FAe,[h(n,{modelValue:a.camposOptometria.afinamento.od.avl,"onUpdate:modelValue":t[160]||(t[160]=c=>a.camposOptometria.afinamento.od.avl=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",MAe,[h(n,{modelValue:a.camposOptometria.afinamento.od.avp,"onUpdate:modelValue":t[161]||(t[161]=c=>a.camposOptometria.afinamento.od.avp=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[293]||(t[293]=A("div",{class:"col-2 col-sm-1"}," OE ",-1)),A("div",NAe,[h(n,{modelValue:a.camposOptometria.afinamento.oe.esf,"onUpdate:modelValue":t[162]||(t[162]=c=>a.camposOptometria.afinamento.oe.esf=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",kAe,[h(n,{modelValue:a.camposOptometria.afinamento.oe.cil,"onUpdate:modelValue":t[163]||(t[163]=c=>a.camposOptometria.afinamento.oe.cil=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",RAe,[h(n,{modelValue:a.camposOptometria.afinamento.oe.eixo,"onUpdate:modelValue":t[164]||(t[164]=c=>a.camposOptometria.afinamento.oe.eixo=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",VAe,[h(n,{modelValue:a.camposOptometria.afinamento.oe.avl,"onUpdate:modelValue":t[165]||(t[165]=c=>a.camposOptometria.afinamento.oe.avl=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",BAe,[h(n,{modelValue:a.camposOptometria.afinamento.oe.avp,"onUpdate:modelValue":t[166]||(t[166]=c=>a.camposOptometria.afinamento.oe.avp=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[294]||(t[294]=A("div",{class:"col-2 col-sm-1"}," ADD ",-1)),A("div",qAe,[h(n,{modelValue:a.camposOptometria.afinamento.add.esf,"onUpdate:modelValue":t[167]||(t[167]=c=>a.camposOptometria.afinamento.add.esf=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",LAe,[h(n,{modelValue:a.camposOptometria.afinamento.add.cil,"onUpdate:modelValue":t[168]||(t[168]=c=>a.camposOptometria.afinamento.add.cil=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",$Ae,[h(n,{modelValue:a.camposOptometria.afinamento.add.eixo,"onUpdate:modelValue":t[169]||(t[169]=c=>a.camposOptometria.afinamento.add.eixo=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",UAe,[h(n,{modelValue:a.camposOptometria.afinamento.add.avl,"onUpdate:modelValue":t[170]||(t[170]=c=>a.camposOptometria.afinamento.add.avl=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",zAe,[h(n,{modelValue:a.camposOptometria.afinamento.add.avp,"onUpdate:modelValue":t[171]||(t[171]=c=>a.camposOptometria.afinamento.add.avp=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),_:1})])]),_:1})]),_:1},8,["modelValue","onShow","onHide"]),h(Yr,{"expand-separator":"",modelValue:a.abasOptometria.Biomicroscopia,"onUpdate:modelValue":t[189]||(t[189]=c=>a.abasOptometria.Biomicroscopia=c),onShow:i.setAba,onHide:i.setAba,label:"Biomicroscopia"},{default:C(()=>[h(Mt,{class:"bg-white q-mb-md no-shadow"},{default:C(()=>[A("div",HAe,[h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>t[295]||(t[295]=[A("div",{class:"col-2 col-sm-1"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}})],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"OD")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"OE")],-1)])),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[296]||(t[296]=A("div",{class:"col-2 col-sm-1"}," Sobrancelhas ",-1)),A("div",jAe,[A("label",GAe,[h(n,{modelValue:a.camposOptometria.biomicroscopia.od.sobrancelhas,"onUpdate:modelValue":t[173]||(t[173]=c=>a.camposOptometria.biomicroscopia.od.sobrancelhas=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",WAe,[A("label",QAe,[h(n,{modelValue:a.camposOptometria.biomicroscopia.oe.sobrancelhas,"onUpdate:modelValue":t[174]||(t[174]=c=>a.camposOptometria.biomicroscopia.oe.sobrancelhas=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[297]||(t[297]=A("div",{class:"col-2 col-sm-1"}," C\xEDlios ",-1)),A("div",XAe,[A("label",KAe,[h(n,{modelValue:a.camposOptometria.biomicroscopia.od.cilios,"onUpdate:modelValue":t[175]||(t[175]=c=>a.camposOptometria.biomicroscopia.od.cilios=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",YAe,[A("label",JAe,[h(n,{modelValue:a.camposOptometria.biomicroscopia.oe.cilios,"onUpdate:modelValue":t[176]||(t[176]=c=>a.camposOptometria.biomicroscopia.oe.cilios=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[298]||(t[298]=A("div",{class:"col-2 col-sm-1"}," P\xE1lpebras ",-1)),A("div",ZAe,[A("label",eTe,[h(n,{modelValue:a.camposOptometria.biomicroscopia.od.palpepras,"onUpdate:modelValue":t[177]||(t[177]=c=>a.camposOptometria.biomicroscopia.od.palpepras=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",tTe,[A("label",oTe,[h(n,{modelValue:a.camposOptometria.biomicroscopia.oe.palpepras,"onUpdate:modelValue":t[178]||(t[178]=c=>a.camposOptometria.biomicroscopia.oe.palpepras=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[299]||(t[299]=A("div",{class:"col-2 col-sm-1"}," Conjuntivas ",-1)),A("div",aTe,[A("label",rTe,[h(n,{modelValue:a.camposOptometria.biomicroscopia.od.conjuntivas,"onUpdate:modelValue":t[179]||(t[179]=c=>a.camposOptometria.biomicroscopia.od.conjuntivas=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",iTe,[A("label",nTe,[h(n,{modelValue:a.camposOptometria.biomicroscopia.oe.conjuntivas,"onUpdate:modelValue":t[180]||(t[180]=c=>a.camposOptometria.biomicroscopia.oe.conjuntivas=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[300]||(t[300]=A("div",{class:"col-2 col-sm-1"}," C\xF3rneas ",-1)),A("div",sTe,[A("label",lTe,[h(n,{modelValue:a.camposOptometria.biomicroscopia.od.corneas,"onUpdate:modelValue":t[181]||(t[181]=c=>a.camposOptometria.biomicroscopia.od.corneas=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",cTe,[A("label",uTe,[h(n,{modelValue:a.camposOptometria.biomicroscopia.oe.corneas,"onUpdate:modelValue":t[182]||(t[182]=c=>a.camposOptometria.biomicroscopia.oe.corneas=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[301]||(t[301]=A("div",{class:"col-2 col-sm-1"}," \xCDris ",-1)),A("div",dTe,[A("label",fTe,[h(n,{modelValue:a.camposOptometria.biomicroscopia.od.iris,"onUpdate:modelValue":t[183]||(t[183]=c=>a.camposOptometria.biomicroscopia.od.iris=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",mTe,[A("label",pTe,[h(n,{modelValue:a.camposOptometria.biomicroscopia.oe.iris,"onUpdate:modelValue":t[184]||(t[184]=c=>a.camposOptometria.biomicroscopia.oe.iris=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[302]||(t[302]=A("div",{class:"col-2 col-sm-1"}," Cristalinos ",-1)),A("div",hTe,[A("label",vTe,[h(n,{modelValue:a.camposOptometria.biomicroscopia.od.cristalinos,"onUpdate:modelValue":t[185]||(t[185]=c=>a.camposOptometria.biomicroscopia.od.cristalinos=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",gTe,[A("label",_Te,[h(n,{modelValue:a.camposOptometria.biomicroscopia.oe.cristalinos,"onUpdate:modelValue":t[186]||(t[186]=c=>a.camposOptometria.biomicroscopia.oe.cristalinos=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[303]||(t[303]=A("div",{class:"col-2 col-sm-1"}," Observa\xE7\xE3o ",-1)),A("div",bTe,[A("label",yTe,[h(n,{modelValue:a.camposOptometria.biomicroscopia.od.observacao,"onUpdate:modelValue":t[187]||(t[187]=c=>a.camposOptometria.biomicroscopia.od.observacao=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),A("div",xTe,[A("label",CTe,[h(n,{modelValue:a.camposOptometria.biomicroscopia.oe.observacao,"onUpdate:modelValue":t[188]||(t[188]=c=>a.camposOptometria.biomicroscopia.oe.observacao=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])])]),_:1})])]),_:1})]),_:1},8,["modelValue","onShow","onHide"]),h(Yr,{"expand-separator":"",modelValue:a.abasOptometria.RXFinal,"onUpdate:modelValue":t[205]||(t[205]=c=>a.abasOptometria.RXFinal=c),onShow:i.setAba,onHide:i.setAba,label:"RX Final"},{default:C(()=>[h(Mt,{class:"bg-white q-mb-md no-shadow"},{default:C(()=>[A("div",wTe,[h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>t[304]||(t[304]=[A("div",{class:"col-2 col-sm-1"}," \xA0\xA0\xA0 ",-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"ESF.")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"CIL.")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"EIXO")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"A.V.L.")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"A.V.P")],-1)])),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[305]||(t[305]=A("div",{class:"col-2 col-sm-1"}," OD ",-1)),A("div",ETe,[h(n,{modelValue:a.camposOptometria.rxFinal.od.esf,"onUpdate:modelValue":t[190]||(t[190]=c=>a.camposOptometria.rxFinal.od.esf=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",STe,[h(n,{modelValue:a.camposOptometria.rxFinal.od.cil,"onUpdate:modelValue":t[191]||(t[191]=c=>a.camposOptometria.rxFinal.od.cil=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",ITe,[h(n,{modelValue:a.camposOptometria.rxFinal.od.eixo,"onUpdate:modelValue":t[192]||(t[192]=c=>a.camposOptometria.rxFinal.od.eixo=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",ATe,[h(n,{modelValue:a.camposOptometria.rxFinal.od.avl,"onUpdate:modelValue":t[193]||(t[193]=c=>a.camposOptometria.rxFinal.od.avl=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",TTe,[h(n,{modelValue:a.camposOptometria.rxFinal.od.avp,"onUpdate:modelValue":t[194]||(t[194]=c=>a.camposOptometria.rxFinal.od.avp=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[306]||(t[306]=A("div",{class:"col-2 col-sm-1"}," OE ",-1)),A("div",DTe,[h(n,{modelValue:a.camposOptometria.rxFinal.oe.esf,"onUpdate:modelValue":t[195]||(t[195]=c=>a.camposOptometria.rxFinal.oe.esf=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",OTe,[h(n,{modelValue:a.camposOptometria.rxFinal.oe.cil,"onUpdate:modelValue":t[196]||(t[196]=c=>a.camposOptometria.rxFinal.oe.cil=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",PTe,[h(n,{modelValue:a.camposOptometria.rxFinal.oe.eixo,"onUpdate:modelValue":t[197]||(t[197]=c=>a.camposOptometria.rxFinal.oe.eixo=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",FTe,[h(n,{modelValue:a.camposOptometria.rxFinal.oe.avl,"onUpdate:modelValue":t[198]||(t[198]=c=>a.camposOptometria.rxFinal.oe.avl=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",MTe,[h(n,{modelValue:a.camposOptometria.rxFinal.oe.avp,"onUpdate:modelValue":t[199]||(t[199]=c=>a.camposOptometria.rxFinal.oe.avp=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[307]||(t[307]=A("div",{class:"col-2 col-sm-1"}," ADD ",-1)),A("div",NTe,[h(n,{modelValue:a.camposOptometria.rxFinal.add.esf,"onUpdate:modelValue":t[200]||(t[200]=c=>a.camposOptometria.rxFinal.add.esf=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",kTe,[h(n,{modelValue:a.camposOptometria.rxFinal.add.cil,"onUpdate:modelValue":t[201]||(t[201]=c=>a.camposOptometria.rxFinal.add.cil=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",RTe,[h(n,{modelValue:a.camposOptometria.rxFinal.add.eixo,"onUpdate:modelValue":t[202]||(t[202]=c=>a.camposOptometria.rxFinal.add.eixo=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",VTe,[h(n,{modelValue:a.camposOptometria.rxFinal.add.avl,"onUpdate:modelValue":t[203]||(t[203]=c=>a.camposOptometria.rxFinal.add.avl=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",BTe,[h(n,{modelValue:a.camposOptometria.rxFinal.add.avp,"onUpdate:modelValue":t[204]||(t[204]=c=>a.camposOptometria.rxFinal.add.avp=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),_:1})])]),_:1})]),_:1},8,["modelValue","onShow","onHide"]),h(Yr,{"expand-separator":"",modelValue:a.abasOptometria.Diagnostico,"onUpdate:modelValue":t[215]||(t[215]=c=>a.abasOptometria.Diagnostico=c),onShow:i.setAba,onHide:i.setAba,label:"Diagnostico"},{default:C(()=>[h(Mt,{class:"bg-white q-mb-md no-shadow"},{default:C(()=>[A("div",qTe,[h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>t[308]||(t[308]=[A("div",{class:"col-2 col-sm-1"}," \xA0\xA0\xA0 ",-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Patol\xF3gico")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Motor")],-1),A("div",{class:"col"},[A("label",{style:{"font-size":".9rem","font-weight":"bold"}},"Refrativo")],-1)])),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[309]||(t[309]=A("div",{class:"col-2 col-sm-1"}," OD ",-1)),A("div",LTe,[h(n,{modelValue:a.camposOptometria.diagnostico.od.patologico,"onUpdate:modelValue":t[206]||(t[206]=c=>a.camposOptometria.diagnostico.od.patologico=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",$Te,[h(n,{modelValue:a.camposOptometria.diagnostico.od.motor,"onUpdate:modelValue":t[207]||(t[207]=c=>a.camposOptometria.diagnostico.od.motor=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",UTe,[h(n,{modelValue:a.camposOptometria.diagnostico.od.refrativo,"onUpdate:modelValue":t[208]||(t[208]=c=>a.camposOptometria.diagnostico.od.refrativo=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[310]||(t[310]=A("div",{class:"col-2 col-sm-1"}," OE ",-1)),A("div",zTe,[h(n,{modelValue:a.camposOptometria.diagnostico.oe.patologico,"onUpdate:modelValue":t[209]||(t[209]=c=>a.camposOptometria.diagnostico.oe.patologico=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",HTe,[h(n,{modelValue:a.camposOptometria.diagnostico.oe.motor,"onUpdate:modelValue":t[210]||(t[210]=c=>a.camposOptometria.diagnostico.oe.motor=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",jTe,[h(n,{modelValue:a.camposOptometria.diagnostico.oe.refrativo,"onUpdate:modelValue":t[211]||(t[211]=c=>a.camposOptometria.diagnostico.oe.refrativo=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),_:1}),h(s,{class:"items-end q-col-gutter-md"},{default:C(()=>[t[311]||(t[311]=A("div",{class:"col-2 col-sm-1"}," OBS ",-1)),A("div",GTe,[h(n,{modelValue:a.camposOptometria.diagnostico.obs.patologico,"onUpdate:modelValue":t[212]||(t[212]=c=>a.camposOptometria.diagnostico.obs.patologico=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",WTe,[h(n,{modelValue:a.camposOptometria.diagnostico.obs.motor,"onUpdate:modelValue":t[213]||(t[213]=c=>a.camposOptometria.diagnostico.obs.motor=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])]),A("div",QTe,[h(n,{modelValue:a.camposOptometria.diagnostico.obs.refrativo,"onUpdate:modelValue":t[214]||(t[214]=c=>a.camposOptometria.diagnostico.obs.refrativo=c),dense:"",tipo:"texto",permiteNull:""},null,8,["modelValue"])])]),_:1})])]),_:1})]),_:1},8,["modelValue","onShow","onHide"]),h(Mt,{class:"bg-white q-my-md no-shadow"},{default:C(()=>[h(s,null,{default:C(()=>[A("div",XTe,[h(Je,{class:"text-tertiary"},{default:C(()=>[h(Pe,{name:"history",size:"24px"}),h(lt,null,{default:C(()=>t[312]||(t[312]=[K("Termo de autoriza\xE7\xE3o")])),_:1})]),_:1}),t[313]||(t[313]=A("p",{class:"q-pa-md"},"Recebi instru\xE7\xF5es sobre cuidado visual e me foi explicado os resultados do exame. Sou ciente de que o exame \xE9 praticado por um profissional da \xE1rea da saude n\xE3o m\xE9dico: Optometrista, o qual \xE9 o fisiologista visual, encarregado de previnir, diagnosticar e tratar altera\xE7\xF5es do sistema visual e motor.",-1))]),A("div",KTe,[h(Je,{class:"text-tertiary"},{default:C(()=>[h(Pe,{name:"history",size:"24px"}),h(lt,null,{default:C(()=>t[314]||(t[314]=[K("Encaminhamento")])),_:1})]),_:1}),t[315]||(t[315]=A("p",{class:"q-pa-md"},"Declaro ter sido orientado(a) a procurar um profissional m\xE9dico por suspeita de altera\xE7\xE3o patologica, detectada no exame do optometrista / ortoptista / neuro optometrista e que a resposabilidade pela conduta cl\xEDnica ficar\xE1 a cargo do profissional m\xE9dico escolhido(a) por mim: ",-1))])]),_:1})]),_:1})],64)):ie("",!0)])])]),_:1})],32)]),_:1}),h(u,{ref:"modalDependente","cpf-cnpj":"","data-nascimento":"","msg-erro":"Ocorreu um erro ao incluir o paciente.","msg-sucesso":"Paciente inclu\xEDdo com sucesso.",titulo:"Incluir Paciente",observacao:""},null,512),h(u,{ref:"modalMedico","msg-erro":"Ocorreu um erro ao incluir o m\xE9dico.","msg-sucesso":"Inclu\xEDdo com sucesso.",numeroDocumentoMunicipal:"CRM/CRO",titulo:"Incluir M\xE9dico ou Optometrista"},null,512)]),_:1},8,["modelValue"])}var LR=St(Kwe,[["render",YTe],["__scopeId","data-v-17121c92"]]);const JTe={computed:{showMenu(){return this.dados.length>1},video(){return this.dialog.type==="video"}},data(){return{show:!1,dialog:{show:!1,title:"",type:"",url:""},dados:[]}},methods:{icon(e){switch(e.type){case"video":return"mdi-youtube"}return"help_outline"},showDialog(e){this.dialog={show:!0,...e}}},props:{componente:{type:String,required:!0}},async created(){try{const e=await this.$utils.geeksApi({tutorial:{funcao:"36FB3AC2-EDE6-483C-9645-FD09B69B10DA",componente:this.componente,sistema:$utils.sistemaPai(),mobile:this.$q.platform.is.mobile}});this.dados=e.data.tutorial}catch(e){console.log(e)}finally{this.dados.length&&(this.show=!0)}}},ZTe={key:0},e4e=["src"];function t4e(e,t,o,r,a,i){return a.show?(B(),be("div",ZTe,[i.showMenu?(B(),oe(ae,{key:0,icon:"help_outline",flat:"",dense:"",round:""},{default:C(()=>[h(aa,null,{default:C(()=>[h(At,{link:"","no-border":"",separator:""},{default:C(()=>[(B(!0),be(Qe,null,qt(a.dados,(n,s)=>Ee((B(),oe(qe,{key:s,clickable:"",onClick:l=>i.showDialog(n)},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:i.icon(n)},null,8,["name"])]),_:2},1024),h(fe,null,{default:C(()=>[K(le(n.title),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[st]])),128))]),_:1})]),_:1})]),_:1})):(B(),oe(ae,{key:1,icon:"help_outline",flat:"",dense:"",round:"",onClick:t[0]||(t[0]=n=>i.showDialog(a.dados[0]))})),h(Ht,{modelValue:a.dialog.show,"onUpdate:modelValue":t[1]||(t[1]=n=>a.dialog.show=n)},{default:C(()=>[h(To,{container:"",class:"bg-light",style:{height:"420px"}},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,null,{default:C(()=>[h(lt,null,{default:C(()=>[K(le(a.dialog.title),1)]),_:1}),Ee(h(ae,{dense:"",flat:"",icon:"close",round:""},null,512),[[st]])]),_:1})]),_:1}),h(Jo,null,{default:C(()=>[i.video?(B(),be("iframe",{key:0,style:{height:"348px",width:"calc(100% - 16px)"},class:"q-ma-sm",src:a.dialog.url,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,e4e)):ie("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])])):ie("",!0)}var $R=St(JTe,[["render",t4e]]);const o4e={data(){return{dbPupilometro:$db.pupilometro,foto:"",fotoFator:1,showCamera:!1,imagemBranco:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAQAAAAkGDomAAAATklEQVR42u3OMQEAAAgDINc/9Czh4QEJSDuvRVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUPDSAovln7Gzmi7KAAAAAElFTkSuQmCC",zoom:1,qtde:0,pinca:{zoom:0,scaling:!1,width:0,height:0,top:0,left:0},distancia:{x1i:0,y1i:0,x2i:0,y2i:0,x1f:0,y1f:0,x2f:0,y2f:0,distanciaInicial:0,distanciaFinal:0}}},emits:["mudarTela","upload"],methods:{touch(e){const t=this.$refs.foto;let o=0;try{o=e.evt.touches.length}catch{}if(this.qtde=o,this.pinca.scaling||o!==2&&Math.abs(e.delta.x+e.delta.y)<=20&&(t.style.left=parseFloat(t.style.left)+e.delta.x+"px",t.style.top=parseFloat(t.style.top)+e.delta.y+"px"),!this.pinca.scaling&&o===2){const r=this.distancia;r.x1i=e.evt.touches[0].pageX,r.y1i=e.evt.touches[0].pageY,r.x2i=e.evt.touches[1].pageX,r.y2i=e.evt.touches[1].pageY,r.distanciaInicial=Math.hypot(e.evt.touches[0].pageX-e.evt.touches[1].pageX,e.evt.touches[0].pageY-e.evt.touches[1].pageY),this.pinca.width=parseFloat(t.style.width),this.pinca.height=parseFloat(t.style.height),this.pinca.top=parseFloat(t.style.top),this.pinca.left=parseFloat(t.style.left),this.pinca.zoom=Math.hypot(e.evt.touches[0].pageX-e.evt.touches[1].pageX,e.evt.touches[0].pageY-e.evt.touches[1].pageY),this.pinca.scaling=!0}if(this.pinca.scaling&&o===0&&setTimeout(()=>{this.pinca.scaling=!1},300),this.pinca.scaling&&o===2)try{const r=e.evt,a=Math.hypot(r.touches[0].pageX-r.touches[1].pageX,r.touches[0].pageY-r.touches[1].pageY)-this.pinca.zoom,i=this.$refs.foto;i.style.width=this.pinca.width+a+"px",i.style.height=this.pinca.height+a*this.fotoFator+"px",i.style.top=this.pinca.top-a/2*this.fotoFator+"px",i.style.left=this.pinca.left-a/2+"px"}catch(r){console.log(r)}},zoomMais(){const e=this.$refs.foto;e.style.width=parseFloat(e.style.width)+2+"px",e.style.height=parseFloat(e.style.height)+2*this.fotoFator+"px",e.style.top=parseFloat(e.style.top)-1*this.fotoFator+"px",e.style.left=parseFloat(e.style.left)-1+"px"},zoomMenos(){const e=this.$refs.foto;e.style.width=parseFloat(e.style.width)-2+"px",e.style.height=parseFloat(e.style.height)-2*this.fotoFator+"px",e.style.top=parseFloat(e.style.top)+1*this.fotoFator+"px",e.style.left=parseFloat(e.style.left)+1+"px"},moveUp(){this.$refs.foto.style.top=parseFloat(this.$refs.foto.style.top)-1+"px"},moveDown(){this.$refs.foto.style.top=parseFloat(this.$refs.foto.style.top)+1+"px"},moveRight(){this.$refs.foto.style.left=parseFloat(this.$refs.foto.style.left)+1+"px"},moveLeft(){this.$refs.foto.style.left=parseFloat(this.$refs.foto.style.left)-1+"px"},async btFechar(){!await $q.dialogSimNao({title:"Fechar pupil\xF4metro",message:"Ao continuar voc\xEA ir\xE1 perder os dados inseridos."})||this.$emit("mudarTela","Fim")},btProximo(){this.foto!==this.imagemBranco?this.$emit("mudarTela","TamanhoFoto"):$q.notifyAlert("Para prosseguir \xE9 necessario tirar uma foto")},excluirFoto(){$q.dialog({title:"Deseja continuar?",message:"Ao continuar voc\xEA ir\xE1 remover a imagem.",cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(async()=>{$q.loading.show(),this.foto=this.imagemBranco,this.dbPupilometro.fotoOriginal=this.imagemBranco,this.dbPupilometro.foto=this.imagemBranco,$q.loading.hide()})},async imagemCameraInput(){const e=await $g.promptCamera.show({sensor:!0});e.acao==="foto"&&(this.foto=e.foto,this.dbPupilometro.fotoOriginal=e.foto,this.redimensiona(),this.$emit("mudarTela","TamanhoFoto"))},uploadClick(){this.$emit("mudarTela","TamanhoFoto"),this.$emit("upload")},redimensiona(){const e=this.$refs.foto,t=new Image,o=this;t.onload=()=>{const r=document.body.clientWidth-20,a=window.innerHeight-100-20;let i=t.width,n=t.height,s=1.001;t.width/r>t.height/a?s=r/t.width:s=a/t.height,i=parseInt(i*s),n=parseInt(n*s),e.style.top=(a-n)/2+10+"px",e.style.left=(r-i)/2+10+"px",e.style.width=i+"px",e.style.height=n+"px",o.fotoFator=t.height/t.width},t.src=this.foto}},async mounted(){this.foto=this.dbPupilometro.fotoOriginal,this.redimensiona()}},a4e={id:"pupilometroTirarFoto"},r4e={class:"img-container"},i4e=["src"],n4e={class:"ZonaTouch"};function s4e(e,t,o,r,a,i){return B(),be("div",a4e,[h(Je,{class:"bg-primary text-white q-px-sm"},{default:C(()=>[h(ae,{onClick:t[0]||(t[0]=n=>i.btFechar()),icon:"arrow_back",round:"",flat:"",dense:""}),h(lt,null,{default:C(()=>t[11]||(t[11]=[K("Tirar Foto")])),_:1}),h(ae,{onClick:t[1]||(t[1]=n=>i.btFechar()),icon:"close",round:"",flat:"",dense:""}),h(ae,{onClick:t[2]||(t[2]=n=>i.btProximo()),icon:"arrow_forward",round:"",flat:"",dense:"",class:"q-ml-sm"})]),_:1}),h(fr,{onResize:i.redimensiona},null,8,["onResize"]),A("div",r4e,[A("img",{src:a.foto,ref:"foto",class:"Foto",onContextmenu:t[3]||(t[3]=rt(()=>{},["prevent"]))},null,40,i4e)]),h(ae,{class:"BtUpload",icon:"attachment",size:"md",round:"",color:"primary",onContextmenu:t[4]||(t[4]=rt(()=>{},["prevent"])),onClick:i.uploadClick},null,8,["onClick"]),h(ae,{class:"TirarFoto",onClick:i.imagemCameraInput,color:"primary",size:"md",round:"",icon:"camera"},null,8,["onClick"]),h(ae,{class:"ExcluirFoto",onClick:i.excluirFoto,color:"primary",size:"md",round:"",icon:"delete"},null,8,["onClick"]),Ee(h(ae,{class:"ZoomMais",color:"primary",size:"md",round:"",icon:"zoom_in",onContextmenu:t[5]||(t[5]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.zoomMais,"0:20",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"ZoomMenos",color:"primary",size:"md",round:"",icon:"zoom_out",onContextmenu:t[6]||(t[6]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.zoomMenos,"0:20",{mouse:!0,enter:!0,space:!0}]]),Ee(A("div",n4e,null,512),[[Qa,i.touch,void 0,{prevent:!0,mouse:!0}]]),t[12]||(t[12]=A("div",{class:"BaseBotoes"},null,-1)),Ee(h(ae,{class:"moveUp",icon:"keyboard_arrow_up",size:"md",round:"",color:"primary",onContextmenu:t[7]||(t[7]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.moveUp,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"moveDown",icon:"keyboard_arrow_down",size:"md",round:"",color:"primary",onContextmenu:t[8]||(t[8]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.moveDown,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"moveRight",icon:"keyboard_arrow_right",size:"md",round:"",color:"primary",onContextmenu:t[9]||(t[9]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.moveRight,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"moveLeft",icon:"keyboard_arrow_left",size:"md",round:"",color:"primary",onContextmenu:t[10]||(t[10]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.moveLeft,"0:50",{mouse:!0,enter:!0,space:!0}]])])}var l4e=St(o4e,[["render",s4e],["__scopeId","data-v-ffda1a9c"]]);const c4e={data(){return{dbPupilometro:$db.pupilometro,foto:{},fotoFator:1,tipoRosto:1,sensor:{horizontal:0,vertical:0},zoom:100,pinca:{zoom:0,scaling:!1,width:0,height:0,top:0,left:0},distancia:{x1i:0,y1i:0,x2i:0,y2i:0,x1f:0,y1f:0,x2f:0,y2f:0,distanciaInicial:0,distanciaFinal:0},qtde:0}},watch:{"dbPupilometro.fotoOriginal":function(){this.mudaCentralizaFoto()}},emits:["mudarTela"],methods:{touch(e){const t=this.$refs.foto;let o=0;try{o=e.evt.touches.length}catch{}if(this.qtde=o,console.log(o),this.pinca.scaling||o!==2&&Math.abs(e.delta.x+e.delta.y)<=20&&(t.style.left=parseFloat(t.style.left)+e.delta.x+"px",t.style.top=parseFloat(t.style.top)+e.delta.y+"px"),!this.pinca.scaling&&o===2){const r=this.distancia;r.x1i=e.evt.touches[0].pageX,r.y1i=e.evt.touches[0].pageY,r.x2i=e.evt.touches[1].pageX,r.y2i=e.evt.touches[1].pageY,r.distanciaInicial=Math.hypot(e.evt.touches[0].pageX-e.evt.touches[1].pageX,e.evt.touches[0].pageY-e.evt.touches[1].pageY),this.pinca.width=parseFloat(t.style.width),this.pinca.height=parseFloat(t.style.height),this.pinca.top=parseFloat(t.style.top),this.pinca.left=parseFloat(t.style.left),this.pinca.zoom=Math.hypot(e.evt.touches[0].pageX-e.evt.touches[1].pageX,e.evt.touches[0].pageY-e.evt.touches[1].pageY),this.pinca.scaling=!0,console.log("touchstart")}if(this.pinca.scaling&&o===0&&setTimeout(()=>{this.pinca.scaling=!1},500),this.pinca.scaling&&o===2)try{const r=e.evt,a=Math.hypot(r.touches[0].pageX-r.touches[1].pageX,r.touches[0].pageY-r.touches[1].pageY)-this.pinca.zoom,i=this.$refs.foto;i.style.width=this.pinca.width+a+"px",i.style.height=this.pinca.height+a*this.fotoFator+"px",i.style.top=this.pinca.top-a/2*this.fotoFator+"px",i.style.left=this.pinca.left-a/2+"px"}catch(r){console.log(r)}},zoomMais(){const e=this.$refs.foto;e.style.width=parseFloat(e.style.width)+2+"px",e.style.height=parseFloat(e.style.height)+2*this.fotoFator+"px",e.style.top=parseFloat(e.style.top)-1*this.fotoFator+"px",e.style.left=parseFloat(e.style.left)-1+"px"},zoomMenos(){const e=this.$refs.foto;e.style.width=parseFloat(e.style.width)-2+"px",e.style.height=parseFloat(e.style.height)-2*this.fotoFator+"px",e.style.top=parseFloat(e.style.top)+1*this.fotoFator+"px",e.style.left=parseFloat(e.style.left)+1+"px"},moveUp(){this.$refs.foto.style.top=parseFloat(this.$refs.foto.style.top)-1+"px"},moveDown(){this.$refs.foto.style.top=parseFloat(this.$refs.foto.style.top)+1+"px"},moveRight(){this.$refs.foto.style.left=parseFloat(this.$refs.foto.style.left)+1+"px"},moveLeft(){this.$refs.foto.style.left=parseFloat(this.$refs.foto.style.left)-1+"px"},uploadClick(){this.$refs.Upload.click()},abrirFoto(e){const t=this.$refs.Upload.files;if(FileReader&&t&&t.length){var o=new FileReader;o.onload=()=>{this.dbPupilometro.fotoOriginal=o.result},o.readAsDataURL(t[0])}},mudaCentralizaFoto(){const e=this.$refs.quadro,t={top:parseInt(e.style.top),left:parseInt(e.style.left),width:parseInt(e.style.width),height:parseInt(e.style.height)},o=this.$refs.foto,r=new Image,a=this;r.onload=()=>{let i=r.width,n=r.height,s=1.001;r.width>r.height?s=t.width/r.height:s=t.width/r.width,i=parseInt(i*s),n=parseInt(n*s),o.style.top=(t.height-n)/2+t.top+"px",o.style.left=(t.width-i)/2+t.left+"px",o.style.width=i+"px",o.style.height=n+"px",a.fotoFator=r.height/r.width},r.src=this.dbPupilometro.fotoOriginal},btProximo(){const e=document.createElement("canvas"),t=e.getContext("2d"),o=this.$refs.foto;e.width=1200,e.height=1200;const r={left:parseFloat(this.$refs.foto.style.left),width:parseFloat(this.$refs.foto.style.width),top:parseFloat(this.$refs.foto.style.top),height:parseFloat(this.$refs.foto.style.height),naturalWidth:this.$refs.foto.naturalWidth,naturalHeight:this.$refs.foto.naturalHeight},a={left:parseFloat(this.$refs.quadro.style.left),width:parseFloat(this.$refs.quadro.style.width),top:parseFloat(this.$refs.quadro.style.top),height:parseFloat(this.$refs.quadro.style.height)},i={left:a.left-r.left,top:a.top-r.top};t.drawImage(o,i.left/r.width*r.naturalWidth,i.top/r.height*r.naturalHeight,a.width/r.width*r.naturalWidth,a.height/r.height*r.naturalHeight,0,0,1200,1200),this.dbPupilometro.foto=e.toDataURL()+"",this.$emit("mudarTela","TamanhoArmacao")},btAnterior(){this.$emit("mudarTela","TirarFoto")},async btFechar(){!await $q.dialogSimNao({title:"Fechar pupil\xF4metro",message:"Ao continuar voc\xEA ir\xE1 perder os dados inseridos."})||this.$emit("mudarTela","Fim")},redimensiona(){const e=this.$refs.quadro,t=document.body.clientWidth-20,o=window.innerHeight-100-20;t>o?e.style.height=o+"px":e.style.height=t+"px",e.style.width=e.style.height,e.style.top=(window.innerHeight-parseInt(e.style.height)-20)/2+"px",e.style.left=(document.body.clientWidth-parseInt(e.style.width))/2+"px";const r=document.getElementsByClassName("rosto");for(const a of r)a.style.position="absolute",a.style.top=e.style.top,a.style.left=e.style.left,a.style.width=e.style.width,a.style.height=e.style.height}},mounted(){this.redimensiona();const e=this.$refs.quadro,t=this.$refs.foto;t.style.top=e.style.top,t.style.left=e.style.left,t.style.width=e.style.width,t.style.height=e.style.height}},u4e={id:"telaTamanhoFoto"},d4e=["src"],f4e={class:"quadro",ref:"quadro"},m4e={key:0,class:"rosto",viewBox:"0 0 300 420"},p4e={key:1,class:"rosto",viewBox:"0 0 300 420"},h4e={key:2,class:"rosto",viewBox:"0 0 300 420"},v4e={key:3,class:"btRosto",viewBox:"0 0 300 420"},g4e={key:4,class:"btRosto",viewBox:"0 0 300 420"},_4e={class:"ZonaTouch"};function b4e(e,t,o,r,a,i){return B(),be("div",u4e,[h(fr,{onResize:i.redimensiona},null,8,["onResize"]),A("img",{class:"Foto",ref:"foto",src:a.dbPupilometro.fotoOriginal,onContextmenu:t[0]||(t[0]=rt(()=>{},["prevent"]))},null,40,d4e),A("div",f4e,null,512),h(Je,{class:"bg-primary text-white q-px-sm"},{default:C(()=>[h(ae,{onClick:t[1]||(t[1]=n=>i.btAnterior()),icon:"arrow_back",round:"",flat:"",dense:""}),h(lt,null,{default:C(()=>t[12]||(t[12]=[K("Tratamento Foto")])),_:1}),h(ae,{onClick:t[2]||(t[2]=n=>i.btFechar()),icon:"close",round:"",flat:"",dense:""}),h(ae,{onClick:t[3]||(t[3]=n=>i.btProximo()),icon:"arrow_forward",round:"",flat:"",dense:"",class:"q-ml-sm"})]),_:1}),A("div",null,[a.tipoRosto===1?(B(),be("svg",m4e,t[13]||(t[13]=[A("path",{"stroke-width":"2",stroke:"rgb(200, 10, 10)",fill:"none",d:"M154.7,27.6c41,0,95.2,20.4,112.7,77.9c21,69.1,9.3,153.6-3,190.6c-11.5,34.6-62.2,96.4-122,96.4c-27.9,0-69.5-19-109.8-109.7c-11.4-25.6-21-128.4,6.3-195.2C62,30.8,130.2,27.9,143.7,27.9c0.8,0,1.3,0,1.4,0l0.6,0l0.6,0C148.9,27.7,151.7,27.6,154.7,27.6z"},null,-1)]))):ie("",!0),a.tipoRosto===2?(B(),be("svg",p4e,t[14]||(t[14]=[A("path",{"stroke-width":"2",stroke:"rgb(200, 10, 10)",fill:"none",d:"M264.7,94.6C249.3,32.9,176.4,19,152,19l-1.1,0v0c-0.1,0-0.3,0-0.4,0l-0.5,0l-0.5,0c-0.1,0-0.3,0-0.4,0v0l-1.1,0c-24.3,0-97.2,13.9-112.6,75.6c-15.5,62-18.1,176.7,0.3,213.6c18.2,36.4,73.9,89.5,76.2,91.6l1.2,1.1l36,0.1v0l1,0l1,0v0l36-0.1l1.2-1.1c2.4-2.1,58-55.1,76.2-91.6C282.8,271.3,280.2,156.6,264.7,94.6z"},null,-1)]))):ie("",!0),a.tipoRosto===3?(B(),be("svg",h4e,t[15]||(t[15]=[A("path",{"stroke-width":"2",stroke:"rgb(200, 10, 10)",fill:"none",d:"M289.8,214.2c-5.9-82.9-9.5-133-34.3-159.2C232.1,30.3,189.1,13.9,150,14.5C110.9,13.9,67.9,30.3,44.5,55c-24.8,26.2-28.4,76.2-34.3,159.2l-0.1,0.9l0.3,0.9C42.2,305.7,98.9,407,150,405.5c51.1,1.5,107.8-99.9,139.6-189.5l0.3-0.9L289.8,214.2z"},null,-1)]))):ie("",!0),a.tipoRosto===4?(B(),be("svg",v4e,t[16]||(t[16]=[A("path",{"stroke-width":"2",stroke:"rgb(200, 10, 10)",fill:"none",d:`M264.7,101C255,52.4,204.6,12.7,151,10.4v-0.1c-0.3,0-0.7,0-1,0c-0.3,0-0.7,0-1,0v0.1
          C95.4,12.7,45,52.4,35.3,101c-7.4,37-6.8,100.2-6.3,150.9c0.1,11.9,0.2,23.2,0.2,33.5v0.6l0.2,0.6
          c14.3,48.7,74.8,115.3,119.6,122.8v0.3c0.3,0,0.7-0.1,1-0.2c0.3,0,0.7,0.1,1,0.2v-0.3c44.8-7.5,105.3-74.1,119.6-122.8l0.2-0.6
          v-0.6c0-10.2,0.1-21.5,0.2-33.5C271.5,201.2,272.1,138.1,264.7,101z`},null,-1)]))):ie("",!0),a.tipoRosto===5?(B(),be("svg",g4e,t[17]||(t[17]=[A("path",{"stroke-width":"2",stroke:"rgb(200, 10, 10)",fill:"none",d:"M280.7,173.8c-13.1-65.3-32.8-109.4-60.4-134.8c-24.7-22.7-51.4-25.6-70.3-25.3c-18.9-0.3-45.6,2.6-70.3,25.3c-27.6,25.3-47.3,69.4-60.4,134.8l-0.1,0.5l0,0.5c1.5,68.2,15.3,97.7,36.1,142.3l0.4,0.9c26.2,56.1,60,88.3,92.8,88.3c0.5,0,1,0,1.5,0c0.5,0,1,0,1.5,0c32.8,0,66.6-32.2,92.8-88.3l0.4-0.9c20.8-44.6,34.6-74.1,36.1-142.3l0-0.5L280.7,173.8z"},null,-1)]))):ie("",!0)]),h(ae,{class:"BtUpload",icon:"attachment",size:"md",round:"",color:"primary",onClick:i.uploadClick,onContextmenu:t[4]||(t[4]=rt(()=>{},["prevent"]))},null,8,["onClick"]),Ee(h(ae,{class:"ZoomMais",color:"primary",size:"md",round:"",icon:"zoom_in",onContextmenu:t[5]||(t[5]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.zoomMais,"0:20",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"ZoomMenos",color:"primary",size:"md",round:"",icon:"zoom_out",onContextmenu:t[6]||(t[6]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.zoomMenos,"0:20",{mouse:!0,enter:!0,space:!0}]]),Ee(A("div",_4e,null,512),[[Qa,i.touch,void 0,{prevent:!0,mouse:!0}]]),t[18]||(t[18]=A("div",{class:"BaseBotoes"},null,-1)),Ee(h(ae,{class:"moveUp",icon:"keyboard_arrow_up",size:"md",round:"",color:"primary",onContextmenu:t[7]||(t[7]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.moveUp,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"moveDown",icon:"keyboard_arrow_down",size:"md",round:"",color:"primary",onContextmenu:t[8]||(t[8]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.moveDown,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"moveRight",icon:"keyboard_arrow_right",size:"md",round:"",color:"primary",onContextmenu:t[9]||(t[9]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.moveRight,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"moveLeft",icon:"keyboard_arrow_left",size:"md",round:"",color:"primary",onContextmenu:t[10]||(t[10]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.moveLeft,"0:50",{mouse:!0,enter:!0,space:!0}]]),A("input",{ref:"Upload",type:"file",id:"Upload",onChange:t[11]||(t[11]=(...n)=>i.abrirFoto&&i.abrirFoto(...n)),style:{visibility:"hidden"}},null,544),t[19]||(t[19]=A("div",{class:"btsTipoRosto"},null,-1))])}var y4e=St(c4e,[["render",b4e],["__scopeId","data-v-132a7e42"]]);const x4e={components:{},data(){return{dbPupilometro:$db.pupilometro}},emits:["mudarTela"],methods:{btProximo(){this.$emit("mudarTela","Olho")},btAnterior(){this.$emit("mudarTela","TamanhoFoto")},async btFechar(){!await $q.dialogSimNao({title:"Fechar pupil\xF4metro",message:"Ao continuar voc\xEA ir\xE1 perder os dados inseridos."})||this.$emit("mudarTela","Fim")},redimensiona(){const e=this.$refs.foto;e.style.position="absolute";const t=document.body.clientWidth-20,o=window.innerHeight-120-20;t>o?e.style.height=o+"px":e.style.height=t+"px",e.style.width=e.style.height,e.style.top="50.5px",e.style.left=(document.body.clientWidth-parseInt(e.style.width))/2+"px"}}},C4e=["src"];function w4e(e,t,o,r,a,i){const n=Ve("campo");return B(),be("div",null,[h(Je,{class:"bg-primary text-white q-px-sm"},{default:C(()=>[h(ae,{onClick:t[0]||(t[0]=s=>i.btAnterior()),icon:"arrow_back",round:"",flat:"",dense:""}),h(lt,null,{default:C(()=>t[5]||(t[5]=[K("Tamanho Arma\xE7\xE3o")])),_:1}),h(n,{modelValue:a.dbPupilometro.medidas.tamanhoArmacao,"onUpdate:modelValue":t[1]||(t[1]=s=>a.dbPupilometro.medidas.tamanhoArmacao=s),tipo:"decimal",decimals:"2",suffix:"mm",color:"white","label-color":"white",dark:"",dense:"",class:"q-mr-md",style:{"max-width":"90px"}},null,8,["modelValue"]),h(ae,{onClick:t[2]||(t[2]=s=>i.btFechar()),icon:"close",round:"",flat:"",dense:""}),h(ae,{onClick:t[3]||(t[3]=s=>i.btProximo()),icon:"arrow_forward",round:"",flat:"",dense:"",class:"q-ml-sm"})]),_:1}),A("img",{ref:"foto",class:"Foto",src:a.dbPupilometro.foto,onContextmenu:t[4]||(t[4]=rt(()=>{},["prevent"]))},null,40,C4e),h(fr,{onResize:i.redimensiona},null,8,["onResize"])])}var E4e=St(x4e,[["render",w4e]]);const S4e={data(){return{dbPupilometro:$db.pupilometro,sensor:{horizontal:0,vertical:0},foto:"",passo:1,isDown:!1,x:0,y:0,zoom:2,pinca:{scaling:!1},qtde:0}},computed:{titulo(){const e=[];return e[1]="Olho Direito",e[2]="Olho Direito",e[3]="Centro Olho Direito",e[4]="Olho Esquerdo",e[5]="Olho Esquerdo",e[6]="Centro Olho Esquerdo",e[this.passo]}},emits:["mudarTela"],methods:{sleep(e=0){return new Promise(t=>setTimeout(t,e))},desenha(){const e=this.$refs.quadro;let t=`scale(${this.zoom})`;[1,2,3].indexOf(this.passo)!==-1?t+=" translateX(15%)":t+=" translateX(-15%)",e.style.transform=t},zoomMais(){this.zoom+=.01,this.desenha()},zoomMenos(){this.zoom-=.01,this.desenha()},touch(e){let t=0;try{t=e.evt.touches.length}catch{}if(this.qtde=t,this.pinca.scaling||t!==2&&(this.$refs["p"+this.passo].style.left=parseFloat(this.$refs["p"+this.passo].style.left)+e.delta.x/this.zoom+"px",this.$refs["p"+this.passo].style.top=parseFloat(this.$refs["p"+this.passo].style.top)+e.delta.y/this.zoom+"px"),!this.pinca.scaling&&t===2&&(this.pinca.zoom=Math.hypot(e.evt.touches[0].pageX-e.evt.touches[1].pageX,e.evt.touches[0].pageY-e.evt.touches[1].pageY),this.zoomIni=parseFloat(this.zoom+""),this.pinca.scaling=!0),this.pinca.scaling&&t===0&&setTimeout(()=>{this.pinca.scaling=!1},250),this.pinca.scaling&&t===2)try{const o=Math.hypot(e.evt.touches[0].pageX-e.evt.touches[1].pageX,e.evt.touches[0].pageY-e.evt.touches[1].pageY)-this.pinca.zoom;this.zoom=this.zoomIni+o/1e3,this.desenha()}catch{}},btProximo(){if(this.passo>=1&&this.passo<=5){this.passo+=1,this.desenha();return}this.passo===6&&(this.dbPupilometro.medidas.olhoDireito={...this.dbPupilometro.medidas.olhoDireito,superior:{top:parseFloat(this.$refs.p1.style.top),left:parseFloat(this.$refs.p1.style.left)},centroOlho:{top:parseFloat(this.$refs.p3.style.top),left:parseFloat(this.$refs.p3.style.left)},inferior:{top:parseFloat(this.$refs.p2.style.top),left:parseFloat(this.$refs.p2.style.left)}},this.dbPupilometro.medidas.olhoEsquerdo={...this.dbPupilometro.medidas.olhoEsquerdo,superior:{top:parseFloat(this.$refs.p5.style.top),left:parseFloat(this.$refs.p5.style.left)},centroOlho:{top:parseFloat(this.$refs.p6.style.top),left:parseFloat(this.$refs.p6.style.left)},inferior:{top:parseFloat(this.$refs.p4.style.top),left:parseFloat(this.$refs.p4.style.left)}},this.dbPupilometro.medidas.diagonal.p1.left===0&&(this.dbPupilometro.medidas.diagonal.p1.left=this.dbPupilometro.medidas.olhoEsquerdo.inferior.left,this.dbPupilometro.medidas.diagonal.p1.top=this.dbPupilometro.medidas.olhoEsquerdo.inferior.top,this.dbPupilometro.medidas.diagonal.p2.left=this.dbPupilometro.medidas.olhoEsquerdo.superior.left,this.dbPupilometro.medidas.diagonal.p2.top=this.dbPupilometro.medidas.olhoEsquerdo.superior.top),this.dbPupilometro.calcularDistancias(),this.$emit("mudarTela","Diagonal"))},btAnterior(){if(this.passo===1){this.$emit("mudarTela","TamanhoArmacao");return}this.passo>=2&&this.passo<=6&&(this.passo-=1,this.desenha())},async btFechar(){!await $q.dialogSimNao({title:"Fechar pupil\xF4metro",message:"Ao continuar voc\xEA ir\xE1 perder os dados inseridos."})||this.$emit("mudarTela","Fim")},moveu(e){const t=this.$refs["p"+this.passo];if(e==="up"){let o=parseFloat(t.style.top)-1;o<0&&(o=0),t.style.top=o+"px"}if(e==="down"&&(this.$refs["p"+this.passo].style.top=parseFloat(this.$refs["p"+this.passo].style.top)+1+"px"),e==="left"){let o=parseFloat(t.style.left)-1;o<0&&(o=0),t.style.left=o+"px"}e==="right"&&(this.$refs["p"+this.passo].style.left=parseFloat(this.$refs["p"+this.passo].style.left)+1+"px")},redimensiona(){const e=this.$refs.quadro;e.style.position="absolute";const t=document.body.clientWidth-20,o=window.innerHeight-60-20;t>o?this.zoom=o/1200:this.zoom=t/1200,this.zoom=this.zoom*2,e.style.top=(window.innerHeight-1200)/2+"px",e.style.left=(document.body.clientWidth-1200)/2+"px",this.desenha()},centralizaQuadroTela(){const e=this.$refs.quadro;e.style.position="absolute",e.style.top=(window.innerHeight-1200)/2+"px",e.style.left=(document.body.clientWidth-1200)/2+"px",this.desenha()}},mounted(){this.$refs.quadro.style.top="0px",this.$refs.quadro.style.left="0px",this.$refs.quadro.style.width="1200px",this.$refs.quadro.style.height="1200px";const e=this.dbPupilometro.medidas;this.$refs.p1.style.top=e.olhoDireito.superior.top+"px",this.$refs.p1.style.left=e.olhoDireito.superior.left+"px",this.$refs.p3.style.top=e.olhoDireito.centroOlho.top+"px",this.$refs.p3.style.left=e.olhoDireito.centroOlho.left+"px",this.$refs.p2.style.top=e.olhoDireito.inferior.top+"px",this.$refs.p2.style.left=e.olhoDireito.inferior.left+"px",this.$refs.p5.style.top=e.olhoEsquerdo.superior.top+"px",this.$refs.p5.style.left=e.olhoEsquerdo.superior.left+"px",this.$refs.p6.style.top=e.olhoEsquerdo.centroOlho.top+"px",this.$refs.p6.style.left=e.olhoEsquerdo.centroOlho.left+"px",this.$refs.p4.style.top=e.olhoEsquerdo.inferior.top+"px",this.$refs.p4.style.left=e.olhoEsquerdo.inferior.left+"px",this.redimensiona()}},I4e={id:"telaOlho"},A4e={ref:"quadro"},T4e=["src"],D4e={ref:"p1",id:"p1"},O4e={ref:"p2",id:"p2"},P4e={ref:"p3",id:"p3"},F4e={ref:"p4",id:"p4"},M4e={ref:"p5",id:"p5"},N4e={ref:"p6",id:"p6"},k4e={class:"ZonaTouch"};function R4e(e,t,o,r,a,i){return B(),be("div",I4e,[A("div",A4e,[A("img",{ref:"foto",class:"Foto",src:a.dbPupilometro.foto,onContextmenu:t[0]||(t[0]=rt(()=>{},["prevent"]))},null,40,T4e),Ee(A("div",D4e,null,512),[[Eo,a.passo===1]]),Ee(A("div",O4e,null,512),[[Eo,a.passo===2]]),Ee(A("div",P4e,null,512),[[Eo,a.passo===3]]),Ee(A("div",F4e,null,512),[[Eo,a.passo===4]]),Ee(A("div",M4e,null,512),[[Eo,a.passo===5]]),Ee(A("div",N4e,null,512),[[Eo,a.passo===6]])],512),h(Je,{class:"bg-primary text-white q-px-sm"},{default:C(()=>[h(ae,{onClick:t[1]||(t[1]=n=>i.btAnterior()),icon:"arrow_back",round:"",flat:"",dense:""}),h(lt,null,{default:C(()=>[K(le(i.titulo),1)]),_:1}),h(ae,{onClick:t[2]||(t[2]=n=>i.btFechar()),icon:"close",round:"",flat:"",dense:""}),h(ae,{onClick:t[3]||(t[3]=n=>i.btProximo()),icon:"arrow_forward",round:"",flat:"",dense:"",class:"q-ml-sm"})]),_:1}),Ee(h(ae,{class:"ZoomMais",icon:"zoom_in",size:"md",round:"",color:"primary",onContextmenu:t[4]||(t[4]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.zoomMais,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"ZoomMenos",icon:"zoom_out",size:"md",round:"",color:"primary",onContextmenu:t[5]||(t[5]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.zoomMenos,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(A("div",k4e,null,512),[[Qa,i.touch,void 0,{prevent:!0,mouse:!0}]]),t[10]||(t[10]=A("div",{class:"BaseBotoes"},null,-1)),Ee(h(ae,{class:"BtUp",icon:"keyboard_arrow_up",size:"md",round:"",color:"primary",onContextmenu:t[6]||(t[6]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("up"),"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"BtDown",icon:"keyboard_arrow_down",size:"md",round:"",color:"primary",onContextmenu:t[7]||(t[7]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("down"),"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"BtLeft",icon:"keyboard_arrow_left",size:"md",round:"",color:"primary",onContextmenu:t[8]||(t[8]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("left"),"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"BtRight",icon:"keyboard_arrow_right",size:"md",round:"",color:"primary",onContextmenu:t[9]||(t[9]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("right"),"0:50",{mouse:!0,enter:!0,space:!0}]]),h(fr,{onResize:i.centralizaQuadroTela},null,8,["onResize"])])}var V4e=St(S4e,[["render",R4e],["__scopeId","data-v-6a273d2f"]]);const B4e={data(){return{dbPupilometro:$db.pupilometro,sensor:{horizontal:0,vertical:0},foto:"",passo:1,isDown:!1,x:0,y:0,zoom:.87,pinca:{scaling:!1},linhaDiagonal:{x1:0,y1:0,x2:0,y2:0}}},emits:["mudarTela"],methods:{desenha(){const e=this.dbPupilometro.medidas;e.diagonal.distanciapx=Math.hypot(Math.abs(e.diagonal.p2.left-e.diagonal.p1.left),Math.abs(e.diagonal.p1.top-e.diagonal.p2.top)),e.diagonal.distancia=e.diagonal.distanciapx/e.fator,this.$refs.p1.style.top=e.diagonal.p1.top+"px",this.$refs.p1.style.left=e.diagonal.p1.left+"px",this.$refs.p2.style.top=e.diagonal.p2.top+"px",this.$refs.p2.style.left=e.diagonal.p2.left+"px",this.$refs.p2.style.height=e.diagonal.distanciapx+"px";const t=this.$refs.quadro;let o=`scale(${this.zoom.toFixed(2)})`;t.style.transform=o,this.linhaDiagonal.x1=e.diagonal.p1.left,this.linhaDiagonal.y1=e.diagonal.p1.top,this.linhaDiagonal.x2=e.diagonal.p2.left,this.linhaDiagonal.y2=e.diagonal.p2.top},zoomMais(){this.zoom+=.01,this.desenha()},zoomMenos(){this.zoom-=.01,this.desenha()},touch(e){let t=0;try{t=e.evt.touches.length}catch{}if(this.qtde=t,this.pinca.scaling||t!==2&&Math.abs(e.delta.x+e.delta.y)<=20&&(this.$refs.quadro.style.left=parseFloat(this.$refs.quadro.style.left)+e.delta.x+"px",this.$refs.quadro.style.top=parseFloat(this.$refs.quadro.style.top)+e.delta.y+"px"),!this.pinca.scaling&&t===2&&(this.pinca.zoom=Math.hypot(e.evt.touches[0].pageX-e.evt.touches[1].pageX,e.evt.touches[0].pageY-e.evt.touches[1].pageY),this.zoomIni=parseFloat(this.zoom+""),this.pinca.scaling=!0),this.pinca.scaling&&t===0&&setTimeout(()=>{this.pinca.scaling=!1},250),this.pinca.scaling&&t===2)try{const o=Math.hypot(e.evt.touches[0].pageX-e.evt.touches[1].pageX,e.evt.touches[0].pageY-e.evt.touches[1].pageY)-this.pinca.zoom;this.zoom=this.zoomIni+o/1e3,this.$refs.quadro.style.transform=`scale(${this.zoom.toFixed(2)})`}catch{}},touchP(e,t){let o=0;try{o=e.evt.touches.length}catch{}this.pinca.scaling||o!==2&&(this.dbPupilometro.medidas.diagonal[t].top=this.dbPupilometro.medidas.diagonal[t].top+e.delta.y/this.zoom,this.dbPupilometro.medidas.diagonal[t].left=this.dbPupilometro.medidas.diagonal[t].left+e.delta.x/this.zoom,this.desenha())},touchP1(e){this.touchP(e,"p1")},touchP2(e){this.touchP(e,"p2")},btProximo(){this.dbPupilometro.calcularDistancias(),this.dbPupilometro.medidas.bifocal?this.$emit("mudarTela","Bifocal"):this.$emit("mudarTela","Medidas")},btAnterior(){this.$emit("mudarTela","Olho")},async btFechar(){!await $q.dialogSimNao({title:"Fechar pupil\xF4metro",message:"Ao continuar voc\xEA ir\xE1 perder os dados inseridos."})||this.$emit("mudarTela","Fim")},moveu(e){e==="Bt1Up"&&(this.dbPupilometro.medidas.diagonal.p1.top=this.dbPupilometro.medidas.diagonal.p1.top-1),e==="Bt1Down"&&(this.dbPupilometro.medidas.diagonal.p1.top=this.dbPupilometro.medidas.diagonal.p1.top+1),e==="Bt1Left"&&(this.dbPupilometro.medidas.diagonal.p1.left=this.dbPupilometro.medidas.diagonal.p1.left-1),e==="Bt1Right"&&(this.dbPupilometro.medidas.diagonal.p1.left=this.dbPupilometro.medidas.diagonal.p1.left+1),e==="Bt2Up"&&(this.dbPupilometro.medidas.diagonal.p2.top=this.dbPupilometro.medidas.diagonal.p2.top-1),e==="Bt2Down"&&(this.dbPupilometro.medidas.diagonal.p2.top=this.dbPupilometro.medidas.diagonal.p2.top+1),e==="Bt2Left"&&(this.dbPupilometro.medidas.diagonal.p2.left=this.dbPupilometro.medidas.diagonal.p2.left-1),e==="Bt2Right"&&(this.dbPupilometro.medidas.diagonal.p2.left=this.dbPupilometro.medidas.diagonal.p2.left+1),this.desenha()},redimensiona(){const e=this.$refs.quadro;e.style.position="absolute";const t=document.body.clientWidth-20,o=window.innerHeight-60-20;t>o?this.zoom=o/600:this.zoom=t/600,e.style.top=(window.innerHeight-1200)/2+"px",e.style.left=(document.body.clientWidth-1200)/2+"px",this.desenha()},centralizaQuadroTela(){const e=this.$refs.quadro;e.style.position="absolute",e.style.top=(window.innerHeight-1200)/2+"px",e.style.left="-500px",this.desenha()}},mounted(){this.$refs.quadro.style.top="0px",this.$refs.quadro.style.left="0px",this.$refs.quadro.style.width="1200px",this.$refs.quadro.style.height="1200px";const e=this.$refs.quadro;this.$refs.svgDiagonal.style.position="absolute",this.$refs.svgDiagonal.style.top=0,this.$refs.svgDiagonal.style.left=0,this.$refs.svgDiagonal.style.width=e.style.width,this.$refs.svgDiagonal.style.height=e.style.height,this.redimensiona()}},q4e={id:"telaBifocal"},L4e={ref:"quadro"},$4e=["src"],U4e={ref:"svgDiagonal",class:"svgDiagonal"},z4e=["x1","y1","x2","y2"],H4e={ref:"p2",id:"p2",class:"text-primary"},j4e={ref:"p1",id:"p1",class:"text-primary"};function G4e(e,t,o,r,a,i){return B(),be("div",q4e,[A("div",L4e,[A("img",{ref:"foto",class:"Foto",src:a.dbPupilometro.foto,onContextmenu:t[0]||(t[0]=rt(()=>{},["prevent"]))},null,40,$4e),Ee((B(),be("svg",U4e,[A("line",{stroke:"#0397ef","stroke-width":"5",x1:a.linhaDiagonal.x1,y1:a.linhaDiagonal.y1,x2:a.linhaDiagonal.x2,y2:a.linhaDiagonal.y2},null,8,z4e)])),[[Qa,i.touch,void 0,{prevent:!0,mouse:!0}]]),A("div",H4e,[Ee(h(Pe,{name:"open_with",style:{"font-size":"4rem"}},null,512),[[Qa,i.touchP2,void 0,{prevent:!0,mouse:!0}]])],512),A("div",j4e,[Ee(h(Pe,{name:"open_with",style:{"font-size":"4rem"}},null,512),[[Qa,i.touchP1,void 0,{prevent:!0,mouse:!0}]]),A("div",null,le(e.$filters.numero(a.dbPupilometro.medidas.diagonal.distancia,2))+" mm",1)],512)],512),h(Je,{class:"bg-primary text-white q-px-sm"},{default:C(()=>[h(ae,{onClick:t[1]||(t[1]=n=>i.btAnterior()),icon:"arrow_back",round:"",flat:"",dense:""}),h(lt,null,{default:C(()=>t[14]||(t[14]=[K("Diagonal")])),_:1}),h(ae,{onClick:t[2]||(t[2]=n=>i.btFechar()),icon:"close",round:"",flat:"",dense:""}),h(ae,{onClick:t[3]||(t[3]=n=>i.btProximo()),icon:"arrow_forward",round:"",flat:"",dense:"",class:"q-ml-sm"})]),_:1}),Ee(h(ae,{class:"ZoomMais",color:"primary",size:"md",round:"",icon:"zoom_in",onContextmenu:t[4]||(t[4]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.zoomMais,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"ZoomMenos",color:"primary",size:"md",round:"",icon:"zoom_out",onContextmenu:t[5]||(t[5]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.zoomMenos,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"Bt1Up",icon:"keyboard_arrow_up",size:"md",round:"",color:"primary",onContextmenu:t[6]||(t[6]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("Bt1Up"),"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"Bt1Down",icon:"keyboard_arrow_down",size:"md",round:"",color:"primary",onContextmenu:t[7]||(t[7]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("Bt1Down"),"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"Bt1Left",icon:"keyboard_arrow_left",size:"md",round:"",color:"primary",onContextmenu:t[8]||(t[8]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("Bt1Left"),"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"Bt1Right",icon:"keyboard_arrow_right",size:"md",round:"",color:"primary",onContextmenu:t[9]||(t[9]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("Bt1Right"),"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"Bt2Up",icon:"keyboard_arrow_up",size:"md",round:"",color:"primary",onContextmenu:t[10]||(t[10]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("Bt2Up"),"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"Bt2Down",icon:"keyboard_arrow_down",size:"md",round:"",color:"primary",onContextmenu:t[11]||(t[11]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("Bt2Down"),"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"Bt2Left",icon:"keyboard_arrow_left",size:"md",round:"",color:"primary",onContextmenu:t[12]||(t[12]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("Bt2Left"),"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"Bt2Right",icon:"keyboard_arrow_right",size:"md",round:"",color:"primary",onContextmenu:t[13]||(t[13]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("Bt2Right"),"0:50",{mouse:!0,enter:!0,space:!0}]]),h(fr,{onResize:i.centralizaQuadroTela},null,8,["onResize"])])}var W4e=St(B4e,[["render",G4e],["__scopeId","data-v-67a535b3"]]);const Q4e={data(){return{dbPupilometro:$db.pupilometro,sensor:{horizontal:0,vertical:0},foto:"",passo:1,isDown:!1,x:0,y:0,zoom:1.6,pinca:{scaling:!1}}},emits:["mudarTela"],methods:{sleep(e=0){return new Promise(t=>setTimeout(t,e))},desenha(){const e=this.dbPupilometro.medidas;this.$refs.odbifocal.style.height=e.olhoDireito.bifocalAltura+"px",this.$refs.odbifocal.style.left=e.olhoDireito.centroOlho.left+"px",this.$refs.odbifocal.style.top=e.olhoDireito.inferior.top-e.olhoDireito.bifocalAltura+"px",this.$refs.oebifocal.style.height=e.olhoEsquerdo.bifocalAltura+"px",this.$refs.oebifocal.style.left=e.olhoEsquerdo.centroOlho.left+"px",this.$refs.oebifocal.style.top=e.olhoEsquerdo.inferior.top-e.olhoEsquerdo.bifocalAltura+"px";const t=this.$refs.quadro;let o=`scale(${this.zoom.toFixed(2)})`;t.style.transform=o},zoomMais(){this.zoom+=.01,this.desenha()},zoomMenos(){this.zoom-=.01,this.desenha()},touch(e){let t=0;try{t=e.evt.touches.length}catch{}if(this.qtde=t,!this.pinca.scaling&&t===2&&(this.pinca.zoom=Math.hypot(e.evt.touches[0].pageX-e.evt.touches[1].pageX,e.evt.touches[0].pageY-e.evt.touches[1].pageY),this.zoomIni=parseFloat(this.zoom+""),this.pinca.scaling=!0),this.pinca.scaling&&t===0&&setTimeout(()=>{this.pinca.scaling=!1},250),this.pinca.scaling&&t===2)try{const o=Math.hypot(e.evt.touches[0].pageX-e.evt.touches[1].pageX,e.evt.touches[0].pageY-e.evt.touches[1].pageY)-this.pinca.zoom;this.zoom=this.zoomIni+o/1e3,this.$refs.quadro.style.transform=`scale(${this.zoom.toFixed(2)})`}catch{}},btProximo(){this.dbPupilometro.calcularDistancias(),this.$emit("mudarTela","Medidas")},btAnterior(){this.$emit("mudarTela","Diagonal")},async btFechar(){!await $q.dialogSimNao({title:"Fechar pupil\xF4metro",message:"Ao continuar voc\xEA ir\xE1 perder os dados inseridos."})||this.$emit("mudarTela","Fim")},moveu(e){e==="od-up"&&(this.dbPupilometro.medidas.olhoDireito.bifocalAltura=this.dbPupilometro.medidas.olhoDireito.bifocalAltura+1,this.desenha()),e==="od-down"&&(this.dbPupilometro.medidas.olhoDireito.bifocalAltura=this.dbPupilometro.medidas.olhoDireito.bifocalAltura-1,this.desenha()),e==="oe-up"&&(this.dbPupilometro.medidas.olhoEsquerdo.bifocalAltura=this.dbPupilometro.medidas.olhoEsquerdo.bifocalAltura+1,this.desenha()),e==="oe-down"&&(this.dbPupilometro.medidas.olhoEsquerdo.bifocalAltura=this.dbPupilometro.medidas.olhoEsquerdo.bifocalAltura-1,this.desenha())},redimensiona(){const e=this.$refs.quadro;e.style.position="absolute";const t=document.body.clientWidth-20,o=window.innerHeight-60-20;t>o?this.zoom=o/1200:this.zoom=t/1200,e.style.top=(window.innerHeight-1200)/2+"px",e.style.left=(document.body.clientWidth-1200)/2+"px",this.desenha()},centralizaQuadroTela(){const e=this.$refs.quadro;e.style.position="absolute",e.style.top=(window.innerHeight-1200)/2+"px",e.style.left=(document.body.clientWidth-1200)/2+"px",this.desenha()}},mounted(){this.$refs.quadro.style.top="0px",this.$refs.quadro.style.left="0px",this.$refs.quadro.style.width="1200px",this.$refs.quadro.style.height="1200px",this.redimensiona()}},X4e={id:"telaBifocal"},K4e={ref:"quadro"},Y4e=["src"],J4e={ref:"p1",id:"p1"},Z4e={ref:"p2",id:"p2"},eDe={ref:"odbifocal",id:"odbifocal"},tDe={ref:"oebifocal",id:"oebifocal"};function oDe(e,t,o,r,a,i){return B(),be("div",X4e,[A("div",K4e,[Ee(A("img",{ref:"foto",class:"Foto",src:a.dbPupilometro.foto,onContextmenu:t[0]||(t[0]=rt(()=>{},["prevent"]))},null,40,Y4e),[[Qa,i.touch,void 0,{prevent:!0,mouse:!0}]]),Ee(A("div",J4e,null,512),[[Eo,a.passo===1]]),Ee(A("div",Z4e,null,512),[[Eo,a.passo===2]]),A("div",eDe,t[10]||(t[10]=[A("div",null,null,-1),A("div",null,null,-1),A("div",null,null,-1)]),512),A("div",tDe,t[11]||(t[11]=[A("div",null,null,-1),A("div",null,null,-1),A("div",null,null,-1)]),512)],512),h(Je,{class:"bg-primary text-white q-px-sm"},{default:C(()=>[h(ae,{onClick:t[1]||(t[1]=n=>i.btAnterior()),icon:"arrow_back",round:"",flat:"",dense:""}),h(lt,null,{default:C(()=>t[12]||(t[12]=[K("Bifocal")])),_:1}),h(ae,{onClick:t[2]||(t[2]=n=>i.btFechar()),icon:"close",round:"",flat:"",dense:""}),h(ae,{onClick:t[3]||(t[3]=n=>i.btProximo()),icon:"arrow_forward",round:"",flat:"",dense:"",class:"q-ml-sm"})]),_:1}),Ee(h(ae,{class:"ZoomMais",icon:"zoom_in",size:"md",round:"",color:"primary",onContextmenu:t[4]||(t[4]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.zoomMais,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"ZoomMenos",icon:"zoom_out",size:"md",round:"",color:"primary",onContextmenu:t[5]||(t[5]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.zoomMenos,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"BtOdUp",icon:"keyboard_arrow_up",size:"md",round:"",color:"primary",onContextmenu:t[6]||(t[6]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("od-up"),"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"BtOdDown",icon:"keyboard_arrow_down",size:"md",round:"",color:"primary",onContextmenu:t[7]||(t[7]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("od-down"),"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"BtOeUp",icon:"keyboard_arrow_up",size:"md",round:"",color:"primary",onContextmenu:t[8]||(t[8]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("oe-up"),"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"BtOeDown",icon:"keyboard_arrow_down",size:"md",round:"",color:"primary",onContextmenu:t[9]||(t[9]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("oe-down"),"0:50",{mouse:!0,enter:!0,space:!0}]]),h(fr,{onResize:i.centralizaQuadroTela},null,8,["onResize"])])}var aDe=St(Q4e,[["render",oDe],["__scopeId","data-v-0348f0d6"]]);const rDe={data(){return{dbPupilometro:$db.pupilometro,foto:"",isDown:!1,x:0,y:0,zoom:1.6,zoomAnt:0,pinca:{scaling:!1},tela:{},qtde:0}},watch:{"dbPupilometro.medidas.bifocal":function(){this.dbPupilometro.medidas.bifocal&&!this.somenteLeitura&&this.$emit("mudarTela","Bifocal")}},emits:["mudarTela"],methods:{desenha(){try{const e=this.dbPupilometro.medidas;this.$refs.ods.style.top=this.dbPupilometro.medidas.olhoDireito.superior.top+"px",this.$refs.ods.style.left=this.dbPupilometro.medidas.olhoDireito.superior.left+"px",this.$refs.odi.style.top=this.dbPupilometro.medidas.olhoDireito.inferior.top+"px",this.$refs.odi.style.left=this.dbPupilometro.medidas.olhoDireito.inferior.left+"px",this.$refs.odc.style.top=this.dbPupilometro.medidas.olhoDireito.centroOlho.top+"px",this.$refs.odc.style.left=this.dbPupilometro.medidas.olhoDireito.centroOlho.left+"px",this.$refs.oes.style.top=this.dbPupilometro.medidas.olhoEsquerdo.superior.top+"px",this.$refs.oes.style.left=this.dbPupilometro.medidas.olhoEsquerdo.superior.left+"px",this.$refs.oei.style.top=this.dbPupilometro.medidas.olhoEsquerdo.inferior.top+"px",this.$refs.oei.style.left=this.dbPupilometro.medidas.olhoEsquerdo.inferior.left+"px",this.$refs.oec.style.top=this.dbPupilometro.medidas.olhoEsquerdo.centroOlho.top+"px",this.$refs.oec.style.left=this.dbPupilometro.medidas.olhoEsquerdo.centroOlho.left+"px",this.$refs.tamanhoarmacao.style.top=this.dbPupilometro.medidas.olhoDireito.superior.top-120+"px",this.$refs.tamanhoarmacao.style.left=this.dbPupilometro.medidas.olhoDireito.superior.left+"px",this.$refs.tamanhoarmacao.style.width=this.dbPupilometro.medidas.olhoEsquerdo.superior.left-this.dbPupilometro.medidas.olhoDireito.superior.left+"px",this.$refs.diptotal.style.top=this.dbPupilometro.medidas.olhoDireito.superior.top-80+"px",this.$refs.diptotal.style.left=this.dbPupilometro.medidas.olhoDireito.centroOlho.left+"px",this.$refs.diptotal.style.width=this.dbPupilometro.medidas.olhoEsquerdo.centroOlho.left-this.dbPupilometro.medidas.olhoDireito.centroOlho.left+"px",this.$refs.dnpOd.style.top=this.dbPupilometro.medidas.olhoDireito.superior.top-40+"px",this.$refs.dnpOd.style.left=this.dbPupilometro.medidas.olhoDireito.centroOlho.left+"px",this.$refs.dnpOd.style.width=e.tamanhoArmacaoPx/2-(e.olhoDireito.centroOlho.left-e.olhoDireito.superior.left)+"px",this.$refs.dnpOe.style.top=this.dbPupilometro.medidas.olhoEsquerdo.superior.top-40+"px",this.$refs.dnpOe.style.width=this.dbPupilometro.medidas.tamanhoArmacaoPx/2-(e.olhoEsquerdo.superior.left-e.olhoEsquerdo.centroOlho.left)+"px",this.$refs.dnpOe.style.left=this.dbPupilometro.medidas.olhoEsquerdo.superior.left-this.dbPupilometro.medidas.tamanhoArmacaoPx/2+"px",this.$refs.ponte.style.top=this.dbPupilometro.medidas.olhoDireito.superior.top+30+"px",this.$refs.ponte.style.left=this.dbPupilometro.medidas.olhoDireito.inferior.left+"px",this.$refs.ponte.style.width=this.dbPupilometro.medidas.olhoEsquerdo.inferior.left-this.dbPupilometro.medidas.olhoDireito.inferior.left+"px",this.$refs.odaltura.style.top=this.dbPupilometro.medidas.olhoDireito.centroOlho.top+"px",this.$refs.odaltura.style.left=this.dbPupilometro.medidas.olhoDireito.centroOlho.left-60+"px",this.$refs.odaltura.style.height=this.dbPupilometro.medidas.olhoDireito.inferior.top-this.dbPupilometro.medidas.olhoDireito.centroOlho.top+"px",this.$refs.oealtura.style.top=this.dbPupilometro.medidas.olhoEsquerdo.centroOlho.top+"px",this.$refs.oealtura.style.left=this.dbPupilometro.medidas.olhoEsquerdo.centroOlho.left+60+"px",this.$refs.oealtura.style.height=this.dbPupilometro.medidas.olhoEsquerdo.inferior.top-this.dbPupilometro.medidas.olhoEsquerdo.centroOlho.top+"px",this.$refs.odbifocal.style.height=e.olhoDireito.bifocalAltura+"px",this.$refs.odbifocal.style.left=e.olhoDireito.centroOlho.left+"px",this.$refs.odbifocal.style.top=e.olhoDireito.inferior.top-e.olhoDireito.bifocalAltura+"px",this.$refs.oebifocal.style.height=e.olhoEsquerdo.bifocalAltura+"px",this.$refs.oebifocal.style.left=e.olhoEsquerdo.centroOlho.left+"px",this.$refs.oebifocal.style.top=e.olhoEsquerdo.inferior.top-e.olhoEsquerdo.bifocalAltura+"px",this.$refs.oddiagonal.style.height=e.diagonal.distanciapx+"px",this.$refs.oddiagonal.style.left=e.diagonal.p2.left+"px",this.$refs.oddiagonal.style.top=e.diagonal.p2.top+"px";let t=e.diagonal.p2.left-e.diagonal.p1.left;t=Math.asin(t/e.diagonal.distanciapx)*(180/Math.PI),this.$refs.oddiagonal.style.transform=`rotate(${t}deg)`,this.$refs.oddiagonal.style["transform-origin"]="0% 0%",document.querySelector("#oddiagonal div:nth-child(1)").style.transform=`rotate(-${t}deg)`;const o=this.$refs.quadro;let r=`scale(${this.zoom.toFixed(2)})`;o.style.transform=r}catch(e){console.log(e)}},redimensiona(){const e=this.$refs.quadro;e.style.position="absolute";const t={clientWidth:document.body.clientWidth,clientHeight:window.innerHeight};if(JSON.stringify(this.tela)!==JSON.stringify(t)){this.tela=t;const o=document.body.clientWidth-20,r=window.innerHeight-60-20;o>r?this.zoom=r/1200:this.zoom=o/1200}e.style.top=(window.innerHeight-1200)/2+"px",e.style.left=(document.body.clientWidth-1200)/2+"px",this.desenha()},centralizaQuadroTela(){const e=this.$refs.quadro;e.style.position="absolute",e.style.top=(window.innerHeight-1200)/2+"px",e.style.left=(document.body.clientWidth-1200)/2+"px",this.desenha()},zoomMais(){this.zoom+=.01,this.$refs.quadro.style.transform=`scale(${this.zoom.toFixed(2)})`},zoomMenos(){this.zoom-=.01,this.$refs.quadro.style.transform=`scale(${this.zoom.toFixed(2)})`},btBifocal(){this.dbPupilometro.medidas.bifocal=!this.dbPupilometro.medidas.bifocal,this.dbPupilometro.medidas.bifocal&&this.$emit("mudarTela","Bifocal")},touch(e){let t=0;try{t=e.evt.touches.length}catch{}if(this.qtde=t,this.pinca.scaling||t!==2&&Math.abs(e.delta.x+e.delta.y)<=20&&(this.$refs.quadro.style.left=parseFloat(this.$refs.quadro.style.left)+e.delta.x+"px",this.$refs.quadro.style.top=parseFloat(this.$refs.quadro.style.top)+e.delta.y+"px"),!this.pinca.scaling&&t===2&&(this.pinca.zoom=Math.hypot(e.evt.touches[0].pageX-e.evt.touches[1].pageX,e.evt.touches[0].pageY-e.evt.touches[1].pageY),this.zoomIni=parseFloat(this.zoom+""),this.pinca.scaling=!0),this.pinca.scaling&&t===0&&setTimeout(()=>{this.pinca.scaling=!1},250),this.pinca.scaling&&t===2)try{const o=Math.hypot(e.evt.touches[0].pageX-e.evt.touches[1].pageX,e.evt.touches[0].pageY-e.evt.touches[1].pageY)-this.pinca.zoom;this.zoom=this.zoomIni+o/1e3,this.$refs.quadro.style.transform=`scale(${this.zoom.toFixed(2)})`}catch{}},btProximo(){this.$emit("mudarTela","Contato")},btAnterior(){this.dbPupilometro.medidas.bifocal?this.$emit("mudarTela","Bifocal"):this.$emit("mudarTela","Diagonal")},async btFechar(){!await $q.dialogSimNao({title:"Fechar pupil\xF4metro",message:"Ao continuar voc\xEA ir\xE1 perder os dados inseridos."})||this.$emit("mudarTela","Fim")}},props:{somenteLeitura:Boolean},mounted(){this.$refs.quadro.style.top="0px",this.$refs.quadro.style.left="0px",this.redimensiona()}},iDe={id:"telaMedidas"},nDe={ref:"quadro",class:"Quadro"},sDe=["src"],lDe={ref:"ods",id:"ods"},cDe={ref:"odi",id:"odi"},uDe={ref:"odc",id:"odc"},dDe={ref:"oei",id:"oei"},fDe={ref:"oes",id:"oes"},mDe={ref:"oec",id:"oec"},pDe={ref:"tamanhoarmacao",id:"tamanhoarmacao"},hDe={ref:"ponte",id:"ponte"},vDe={ref:"diptotal",id:"diptotal"},gDe={ref:"dnpOd",id:"dnpOd",class:"medidaHorizontal"},_De={ref:"dnpOe",id:"dnpOe",class:"medidaHorizontal"},bDe={ref:"odaltura",id:"odaltura"},yDe={ref:"oealtura",id:"oealtura"},xDe={ref:"odbifocal",id:"odbifocal"},CDe={ref:"oebifocal",id:"oebifocal"},wDe={ref:"oddiagonal",id:"oddiagonal",class:"medidaVerticalAzul"};function EDe(e,t,o,r,a,i){return B(),be("div",iDe,[A("div",nDe,[Ee(A("img",{ref:"foto",class:"Foto",src:a.dbPupilometro.foto,onContextmenu:t[0]||(t[0]=rt(()=>{},["prevent"]))},null,40,sDe),[[Qa,i.touch,void 0,{prevent:!0,stop:!0,mouse:!0}]]),A("div",lDe,null,512),A("div",cDe,null,512),A("div",uDe,null,512),A("div",dDe,null,512),A("div",fDe,null,512),A("div",mDe,null,512),A("div",pDe,[A("div",null,le(e.$filters.numero(a.dbPupilometro.medidas.tamanhoArmacao,2)),1),t[7]||(t[7]=A("div",null,null,-1)),t[8]||(t[8]=A("div",null,null,-1))],512),A("div",hDe,[A("div",null,le(e.$filters.numero(a.dbPupilometro.medidas.ponte,2)),1),t[9]||(t[9]=A("div",null,null,-1)),t[10]||(t[10]=A("div",null,null,-1))],512),A("div",vDe,[A("div",null,le(e.$filters.numero(a.dbPupilometro.medidas.dip.total,2)),1),t[11]||(t[11]=A("div",null,null,-1)),t[12]||(t[12]=A("div",null,null,-1))],512),A("div",gDe,[A("div",null,le(e.$filters.numero(a.dbPupilometro.medidas.dnp.od,2)),1),t[13]||(t[13]=A("div",null,null,-1)),t[14]||(t[14]=A("div",null,null,-1))],512),A("div",_De,[A("div",null,le(e.$filters.numero(a.dbPupilometro.medidas.dnp.oe,2)),1),t[15]||(t[15]=A("div",null,null,-1)),t[16]||(t[16]=A("div",null,null,-1))],512),A("div",bDe,[A("div",null,le(e.$filters.numero(a.dbPupilometro.medidas.dip.od.altura,2)),1),t[17]||(t[17]=A("div",null,null,-1)),t[18]||(t[18]=A("div",null,null,-1))],512),A("div",yDe,[A("div",null,le(e.$filters.numero(a.dbPupilometro.medidas.dip.oe.altura,2)),1),t[19]||(t[19]=A("div",null,null,-1)),t[20]||(t[20]=A("div",null,null,-1))],512),Ee(A("div",xDe,[A("div",null,le(e.$filters.numero(a.dbPupilometro.medidas.bifocalOlhoDireito,2)),1),t[21]||(t[21]=A("div",null,null,-1)),t[22]||(t[22]=A("div",null,null,-1))],512),[[Eo,a.dbPupilometro.medidas.bifocal]]),Ee(A("div",CDe,[A("div",null,le(e.$filters.numero(a.dbPupilometro.medidas.bifocalOlhoEsquerdo,2)),1),t[23]||(t[23]=A("div",null,null,-1)),t[24]||(t[24]=A("div",null,null,-1))],512),[[Eo,a.dbPupilometro.medidas.bifocal]]),A("div",wDe,[A("div",null,le(e.$filters.numero(a.dbPupilometro.medidas.diagonal.distancia,2)),1),t[25]||(t[25]=A("div",null,null,-1)),t[26]||(t[26]=A("div",null,null,-1))],512)],512),h(Je,{class:"bg-primary text-white q-px-sm"},{default:C(()=>[Ee(h(ae,{onClick:t[1]||(t[1]=n=>i.btAnterior()),icon:"arrow_back",round:"",flat:"",dense:""},null,512),[[Eo,!o.somenteLeitura]]),h(lt,null,{default:C(()=>t[27]||(t[27]=[K("Medidas")])),_:1}),h(ae,{onClick:t[2]||(t[2]=n=>i.btFechar()),icon:"close",round:"",flat:"",dense:""}),h(ae,{onClick:t[3]||(t[3]=n=>i.btProximo()),icon:"arrow_forward",round:"",flat:"",dense:"",class:"q-ml-sm"})]),_:1}),Ee(h(ae,{class:"ZoomMais",icon:"zoom_in",size:"md",round:"",color:"primary",onContextmenu:t[4]||(t[4]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.zoomMais,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"ZoomMenos",icon:"zoom_out",size:"md",round:"",color:"primary",onContextmenu:t[5]||(t[5]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.zoomMenos,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"Bifocal",label:"Bifocal",color:"primary",onClick:i.btBifocal,onContextmenu:t[6]||(t[6]=rt(()=>{},["prevent"]))},null,8,["onClick"]),[[Eo,!o.somenteLeitura]]),h(fr,{onResize:i.centralizaQuadroTela},null,8,["onResize"])])}var SDe=St(rDe,[["render",EDe],["__scopeId","data-v-5572ffa0"]]);const IDe={data(){return{dbPupilometro:$db.pupilometro}},emits:["mudarTela"],methods:{btProximo(){this.$emit("mudarTela","Medidas")},btAnterior(){this.$emit("mudarTela","Medidas")},async btFechar(){!await $q.dialogSimNao({title:"Fechar pupil\xF4metro",message:"Ao continuar voc\xEA ir\xE1 perder os dados inseridos."})||this.$emit("mudarTela","Fim")}}};function ADe(e,t,o,r,a,i){return B(),be("div",null,[h(Je,{class:"bg-primary text-white q-px-sm"},{default:C(()=>[h(ae,{onClick:t[0]||(t[0]=n=>i.btAnterior()),icon:"arrow_back",round:"",flat:"",dense:""}),h(lt,null,{default:C(()=>t[3]||(t[3]=[K("Palpebra")])),_:1}),h(ae,{onClick:t[1]||(t[1]=n=>i.btFechar()),icon:"close",round:"",flat:"",dense:""}),h(ae,{onClick:t[2]||(t[2]=n=>i.btProximo()),icon:"arrow_forward",round:"",flat:"",dense:"",class:"q-ml-sm"})]),_:1}),A("pre",null,le(JSON.stringify(a.dbPupilometro.medidas,null,2)),1)])}var TDe=St(IDe,[["render",ADe]]);const DDe={data(){return{dbPupilometro:$db.pupilometro,imagemBranco:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAQAAAAkGDomAAAATklEQVR42u3OMQEAAAgDINc/9Czh4QEJSDuvRVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUPDSAovln7Gzmi7KAAAAAElFTkSuQmCC",fotoFator:1,zoom:100,pinca:{zoom:0,scaling:!1,width:0,height:0,top:0,left:0},distancia:{x1i:0,y1i:0,x2i:0,y2i:0,x1f:0,y1f:0,x2f:0,y2f:0,distanciaInicial:0,distanciaFinal:0},qtde:0}},emits:["mudarTela"],methods:{touch(e){const t=this.$refs.foto;let o=0;try{o=e.evt.touches.length}catch{}if(this.qtde=o,this.pinca.scaling||o!==2&&Math.abs(e.delta.x+e.delta.y)<=20&&(t.style.left=parseFloat(t.style.left)+e.delta.x+"px",t.style.top=parseFloat(t.style.top)+e.delta.y+"px"),!this.pinca.scaling&&o===2){const r=this.distancia;r.x1i=e.evt.touches[0].pageX,r.y1i=e.evt.touches[0].pageY,r.x2i=e.evt.touches[1].pageX,r.y2i=e.evt.touches[1].pageY,r.distanciaInicial=Math.hypot(e.evt.touches[0].pageX-e.evt.touches[1].pageX,e.evt.touches[0].pageY-e.evt.touches[1].pageY),this.pinca.width=parseFloat(t.style.width),this.pinca.height=parseFloat(t.style.height),this.pinca.top=parseFloat(t.style.top),this.pinca.left=parseFloat(t.style.left),this.pinca.zoom=Math.hypot(e.evt.touches[0].pageX-e.evt.touches[1].pageX,e.evt.touches[0].pageY-e.evt.touches[1].pageY),this.pinca.scaling=!0,console.log("touchstart")}if(this.pinca.scaling&&o===0&&setTimeout(()=>{this.pinca.scaling=!1},500),this.pinca.scaling&&o===2)try{const r=e.evt,a=Math.hypot(r.touches[0].pageX-r.touches[1].pageX,r.touches[0].pageY-r.touches[1].pageY)-this.pinca.zoom,i=this.$refs.foto;i.style.width=this.pinca.width+a+"px",i.style.height=this.pinca.height+a*this.fotoFator+"px",i.style.top=this.pinca.top-a/2*this.fotoFator+"px",i.style.left=this.pinca.left-a/2+"px"}catch(r){console.log(r)}},zoomMais(){const e=this.$refs.foto;e.style.width=parseFloat(e.style.width)+2+"px",e.style.height=parseFloat(e.style.height)+2*this.fotoFator+"px",e.style.top=parseFloat(e.style.top)-1*this.fotoFator+"px",e.style.left=parseFloat(e.style.left)-1+"px"},zoomMenos(){const e=this.$refs.foto;e.style.width=parseFloat(e.style.width)-2+"px",e.style.height=parseFloat(e.style.height)-2*this.fotoFator+"px",e.style.top=parseFloat(e.style.top)+1*this.fotoFator+"px",e.style.left=parseFloat(e.style.left)+1+"px"},moveUp(){this.$refs.foto.style.top=parseFloat(this.$refs.foto.style.top)-1+"px"},moveDown(){this.$refs.foto.style.top=parseFloat(this.$refs.foto.style.top)+1+"px"},moveRight(){this.$refs.foto.style.left=parseFloat(this.$refs.foto.style.left)+1+"px"},moveLeft(){this.$refs.foto.style.left=parseFloat(this.$refs.foto.style.left)-1+"px"},uploadClick(){this.$refs.Upload.click()},abrirFoto(e){const t=this.$refs.Upload.files;if(FileReader&&t&&t.length){var o=new FileReader;o.onload=()=>{this.dbPupilometro.fotoOriginal=o.result,this.mudaCentralizaFoto()},o.readAsDataURL(t[0])}},mudaCentralizaFoto(){const e=this.$refs.quadro,t={top:parseInt(e.style.top),left:parseInt(e.style.left),width:parseInt(e.style.width),height:parseInt(e.style.height)},o=this.$refs.foto,r=new Image,a=this;r.onload=()=>{let i=r.width,n=r.height,s=1.001;r.width>r.height?s=t.width/r.height:s=t.width/r.width,i=parseInt(i*s),n=parseInt(n*s),o.style.top=(t.height-n)/2+t.top+"px",o.style.left=(t.width-i)/2+t.left+"px",o.style.width=i+"px",o.style.height=n+"px",a.fotoFator=r.height/r.width},r.src=$db.pupilometro.fotoOriginal},btProximo(){if(this.dbPupilometro.fotoOriginal!==this.imagemBranco){const e=document.createElement("canvas"),t=e.getContext("2d"),o=this.$refs.foto;e.width=720,e.height=960;const r={left:parseFloat(this.$refs.foto.style.left),width:parseFloat(this.$refs.foto.style.width),top:parseFloat(this.$refs.foto.style.top),height:parseFloat(this.$refs.foto.style.height),naturalWidth:this.$refs.foto.naturalWidth,naturalHeight:this.$refs.foto.naturalHeight},a={left:parseFloat(this.$refs.quadro.style.left),width:parseFloat(this.$refs.quadro.style.width),top:parseFloat(this.$refs.quadro.style.top),height:parseFloat(this.$refs.quadro.style.height)},i={left:a.left-r.left,top:a.top-r.top};t.drawImage(o,i.left/r.width*r.naturalWidth,i.top/r.height*r.naturalHeight,a.width/r.width*r.naturalWidth,a.height/r.height*r.naturalHeight,0,0,720,960),$db.pupilometro.foto=e.toDataURL()+"",$db.pupilometro.medidas.cartao.p1.left===0&&($db.pupilometro.medidas.cartao.p1.left=720/2-720/4,$db.pupilometro.medidas.cartao.p1.top=960/10*8,$db.pupilometro.medidas.cartao.p2.left=720/2+720/4,$db.pupilometro.medidas.cartao.p2.top=960/10*8),this.$emit("mudarTela","CartaoTamanho")}else $q.notifyAlert("Para prosseguir \xE9 necessario tirar uma foto")},async btFechar(){!await $q.dialogSimNao({title:"Fechar pupil\xF4metro",message:"Ao continuar voc\xEA ir\xE1 perder os dados inseridos."})||this.$emit("mudarTela","Fim")},redimensiona(){const e=this.$refs.quadro,t=document.body.clientWidth-20,o=window.innerHeight-100-20;t>o?(e.style.height=o+"px",e.style.width=parseInt(parseInt(e.style.height)/4*3)+"px"):(e.style.width=t+"px",e.style.height=parseInt(parseInt(e.style.width)/3*4)+"px"),e.style.top=(window.innerHeight-parseInt(e.style.height)-20)/2+"px",e.style.left=(document.body.clientWidth-parseInt(e.style.width))/2+"px";const r=document.getElementsByClassName("rosto");for(const a of r)a.style.position="absolute",a.style.top=e.style.top,a.style.left=e.style.left,a.style.width=e.style.width,a.style.height=e.style.width}},mounted(){this.redimensiona()}},ODe=["src"],PDe={ref:"quadro",class:"quadro"},FDe={class:"ZonaTouch"};function MDe(e,t,o,r,a,i){return B(),be("div",null,[h(fr,{onResize:i.redimensiona},null,8,["onResize"]),A("img",{ref:"foto",class:"Foto",src:a.dbPupilometro.fotoOriginal,onContextmenu:t[0]||(t[0]=rt(()=>{},["prevent"]))},null,40,ODe),A("div",PDe,null,512),h(Je,{class:"bg-primary text-white q-px-sm"},{default:C(()=>[h(ae,{onClick:t[1]||(t[1]=n=>i.btFechar()),icon:"arrow_back",round:"",flat:"",dense:""}),h(lt,null,{default:C(()=>t[11]||(t[11]=[K("Tratamento Foto")])),_:1}),h(ae,{onClick:t[2]||(t[2]=n=>i.btFechar()),icon:"close",round:"",flat:"",dense:""}),h(ae,{onClick:t[3]||(t[3]=n=>i.btProximo()),icon:"arrow_forward",round:"",flat:"",dense:"",class:"q-ml-sm"})]),_:1}),t[12]||(t[12]=A("div",null,[A("svg",{class:"rosto",viewBox:"0 0 300 420"},[A("path",{"stroke-width":"2",stroke:"rgb(200, 10, 10)",fill:"none",d:"M154.7,27.6c41,0,95.2,20.4,112.7,77.9c21,69.1,9.3,153.6-3,190.6c-11.5,34.6-62.2,96.4-122,96.4c-27.9,0-69.5-19-109.8-109.7c-11.4-25.6-21-128.4,6.3-195.2C62,30.8,130.2,27.9,143.7,27.9c0.8,0,1.3,0,1.4,0l0.6,0l0.6,0C148.9,27.7,151.7,27.6,154.7,27.6z"})])],-1)),h(ae,{onClick:i.uploadClick,icon:"attachment",size:"md",color:"primary",round:"",class:"BtUpload"},null,8,["onClick"]),Ee(h(ae,{class:"ZoomMais",icon:"zoom_in",size:"md",color:"primary",round:"",onContextmenu:t[4]||(t[4]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.zoomMais,"0:20",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"ZoomMenos",icon:"zoom_out",size:"md",color:"primary",round:"",onContextmenu:t[5]||(t[5]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.zoomMenos,"0:20",{mouse:!0,enter:!0,space:!0}]]),Ee(A("div",FDe,null,512),[[Qa,i.touch,void 0,{prevent:!0,mouse:!0}]]),t[13]||(t[13]=A("div",{class:"BaseBotoes"},null,-1)),Ee(h(ae,{class:"moveUp",icon:"keyboard_arrow_up",size:"md",color:"primary",round:"",onContextmenu:t[6]||(t[6]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.moveUp,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"moveDown",icon:"keyboard_arrow_down",size:"md",color:"primary",round:"",onContextmenu:t[7]||(t[7]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.moveDown,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"moveRight",icon:"keyboard_arrow_right",size:"md",color:"primary",round:"",onContextmenu:t[8]||(t[8]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.moveRight,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"moveLeft",icon:"keyboard_arrow_left",size:"md",color:"primary",round:"",onContextmenu:t[9]||(t[9]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.moveLeft,"0:50",{mouse:!0,enter:!0,space:!0}]]),A("input",{onChange:t[10]||(t[10]=(...n)=>i.abrirFoto&&i.abrirFoto(...n)),ref:"Upload",id:"Upload",type:"file",style:{visibility:"hidden"}},null,544)])}var NDe=St(DDe,[["render",MDe],["__scopeId","data-v-140b0f56"]]);const kDe={data(){return{dbPupilometro:$db.pupilometro,x:0,y:0,zoom:.87,pinca:{scaling:!1},cartao:{x1:0,y1:0,x2:0,y2:0}}},emits:["mudarTela"],methods:{desenha(){const e=$db.pupilometro.medidas;this.$refs.p1.style.top=e.cartao.p1.top+"px",this.$refs.p1.style.left=e.cartao.p1.left+"px",this.$refs.p2.style.top=e.cartao.p2.top+"px",this.$refs.p2.style.left=e.cartao.p2.left+"px";const t=this.$refs.quadro;let o=`scale(${this.zoom.toFixed(2)})`;t.style.transform=o,this.cartao.x1=e.cartao.p1.left,this.cartao.y1=e.cartao.p1.top,this.cartao.x2=e.cartao.p2.left,this.cartao.y2=e.cartao.p2.top},zoomMais(){this.zoom+=.01,this.desenha()},zoomMenos(){this.zoom-=.01,this.desenha()},touch(e){let t=0;try{t=e.evt.touches.length}catch{}if(this.qtde=t,this.pinca.scaling||t!==2&&Math.abs(e.delta.x+e.delta.y)<=20&&(this.$refs.quadro.style.left=parseFloat(this.$refs.quadro.style.left)+e.delta.x+"px",this.$refs.quadro.style.top=parseFloat(this.$refs.quadro.style.top)+e.delta.y+"px"),!this.pinca.scaling&&t===2&&(this.pinca.zoom=Math.hypot(e.evt.touches[0].pageX-e.evt.touches[1].pageX,e.evt.touches[0].pageY-e.evt.touches[1].pageY),this.zoomIni=parseFloat(this.zoom+""),this.pinca.scaling=!0),this.pinca.scaling&&t===0&&setTimeout(()=>{this.pinca.scaling=!1},250),this.pinca.scaling&&t===2)try{const o=Math.hypot(e.evt.touches[0].pageX-e.evt.touches[1].pageX,e.evt.touches[0].pageY-e.evt.touches[1].pageY)-this.pinca.zoom;this.zoom=this.zoomIni+o/1e3,this.$refs.quadro.style.transform=`scale(${this.zoom.toFixed(2)})`}catch{}},touchP(e,t){let o=0;try{o=e.evt.touches.length}catch{}this.pinca.scaling||o!==2&&($db.pupilometro.medidas.cartao[t].top=$db.pupilometro.medidas.cartao[t].top+e.delta.y/this.zoom,$db.pupilometro.medidas.cartao[t].left=$db.pupilometro.medidas.cartao[t].left+e.delta.x/this.zoom,this.desenha())},touchP1(e){this.touchP(e,"p1")},touchP2(e){this.touchP(e,"p2")},btProximo(){this.$emit("mudarTela","CartaoOlho")},btAnterior(){this.$emit("mudarTela","CartaoFoto")},async btFechar(){!await $q.dialogSimNao({title:"Fechar pupil\xF4metro",message:"Ao continuar voc\xEA ir\xE1 perder os dados inseridos."})||this.$emit("mudarTela","Fim")},moveu(e){e==="Bt1Up"&&($db.pupilometro.medidas.cartao.p1.top=$db.pupilometro.medidas.cartao.p1.top-1),e==="Bt1Down"&&($db.pupilometro.medidas.cartao.p1.top=$db.pupilometro.medidas.cartao.p1.top+1),e==="Bt1Left"&&($db.pupilometro.medidas.cartao.p1.left=$db.pupilometro.medidas.cartao.p1.left-1),e==="Bt1Right"&&($db.pupilometro.medidas.cartao.p1.left=$db.pupilometro.medidas.cartao.p1.left+1),e==="Bt2Up"&&($db.pupilometro.medidas.cartao.p2.top=$db.pupilometro.medidas.cartao.p2.top-1),e==="Bt2Down"&&($db.pupilometro.medidas.cartao.p2.top=$db.pupilometro.medidas.cartao.p2.top+1),e==="Bt2Left"&&($db.pupilometro.medidas.cartao.p2.left=$db.pupilometro.medidas.cartao.p2.left-1),e==="Bt2Right"&&($db.pupilometro.medidas.cartao.p2.left=$db.pupilometro.medidas.cartao.p2.left+1),this.desenha()},redimensiona(){const e=document.body.clientWidth-20,t=window.innerHeight-60-20,o=e>t?"horizontal":"vertical";this.zoom===.87&&(o==="horizontal"?this.zoom=t/960:this.zoom=e/720);const r=this.$refs.quadro;r.style.position="absolute",r.style.left=(document.body.clientWidth-720)/2+"px",o==="horizontal"?r.style.top=(60+(window.innerHeight-60-960))/2+"px":r.style.top=(window.innerHeight-108-960)/2+"px",this.desenha()}},mounted(){this.$refs.quadro.style.top="0px",this.$refs.quadro.style.left="0px",this.$refs.quadro.style.width="720px",this.$refs.quadro.style.height="960px";const e=this.$refs.quadro;this.$refs.svgCartao.style.position="absolute",this.$refs.svgCartao.style.top=0,this.$refs.svgCartao.style.left=0,this.$refs.svgCartao.style.width=e.style.width,this.$refs.svgCartao.style.height=e.style.height,this.redimensiona()}},RDe={ref:"quadro"},VDe=["src"],BDe={ref:"svgCartao",class:"svgCartao"},qDe=["x1","y1","x2","y2"],LDe={ref:"p2",id:"p2",class:"text-primary"},$De={ref:"p1",id:"p1",class:"text-primary"};function UDe(e,t,o,r,a,i){return B(),be("div",null,[A("div",RDe,[A("img",{ref:"foto",class:"Foto",src:a.dbPupilometro.foto,onContextmenu:t[0]||(t[0]=rt(()=>{},["prevent"]))},null,40,VDe),Ee((B(),be("svg",BDe,[A("line",{ref:"lnCartao",id:"lnCartao",stroke:"#0397ef","stroke-width":"5",x1:a.cartao.x1,y1:a.cartao.y1,x2:a.cartao.x2,y2:a.cartao.y2},null,8,qDe)])),[[Qa,i.touch,void 0,{prevent:!0,mouse:!0}]]),A("div",LDe,[Ee(h(Pe,{name:"open_with",style:{"font-size":"4rem"}},null,512),[[Qa,i.touchP2,void 0,{prevent:!0,mouse:!0}]])],512),A("div",$De,[Ee(h(Pe,{name:"open_with",style:{"font-size":"4rem"}},null,512),[[Qa,i.touchP1,void 0,{prevent:!0,mouse:!0}]])],512)],512),h(Je,{class:"bg-primary text-white q-px-sm"},{default:C(()=>[h(ae,{onClick:t[1]||(t[1]=n=>i.btAnterior()),icon:"arrow_back",round:"",flat:"",dense:""}),h(lt,null,{default:C(()=>t[14]||(t[14]=[K("Foto com Cart\xE3o")])),_:1}),h(ae,{onClick:t[2]||(t[2]=n=>i.btFechar()),icon:"close",round:"",flat:"",dense:""}),h(ae,{onClick:t[3]||(t[3]=n=>i.btProximo()),icon:"arrow_forward",round:"",flat:"",dense:"",class:"q-ml-sm"})]),_:1}),Ee(h(ae,{class:"ZoomMais",icon:"zoom_in",size:"md",color:"primary",round:"",onContextmenu:t[4]||(t[4]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.zoomMais,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"ZoomMenos",icon:"zoom_out",size:"md",color:"primary",round:"",onContextmenu:t[5]||(t[5]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.zoomMenos,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"Bt1Up",icon:"keyboard_arrow_up",size:"md",color:"primary",round:"",onContextmenu:t[6]||(t[6]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("Bt1Up"),"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"Bt1Down",icon:"keyboard_arrow_down",size:"md",color:"primary",round:"",onContextmenu:t[7]||(t[7]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("Bt1Down"),"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"Bt1Left",icon:"keyboard_arrow_left",size:"md",color:"primary",round:"",onContextmenu:t[8]||(t[8]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("Bt1Left"),"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"Bt1Right",icon:"keyboard_arrow_right",size:"md",color:"primary",round:"",onContextmenu:t[9]||(t[9]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("Bt1Right"),"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"Bt2Up",icon:"keyboard_arrow_up",size:"md",color:"primary",round:"",onContextmenu:t[10]||(t[10]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("Bt2Up"),"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"Bt2Down",icon:"keyboard_arrow_down",size:"md",color:"primary",round:"",onContextmenu:t[11]||(t[11]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("Bt2Down"),"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"Bt2Left",icon:"keyboard_arrow_left",size:"md",color:"primary",round:"",onContextmenu:t[12]||(t[12]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("Bt2Left"),"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"Bt2Right",icon:"keyboard_arrow_right",size:"md",color:"primary",round:"",onContextmenu:t[13]||(t[13]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("Bt2Right"),"0:50",{mouse:!0,enter:!0,space:!0}]]),h(fr,{onResize:i.redimensiona},null,8,["onResize"])])}var zDe=St(kDe,[["render",UDe],["__scopeId","data-v-401e4270"]]);const HDe={data(){return{dbPupilometro:$db.pupilometro,passo:3,x:0,y:0,zoom:2,pinca:{scaling:!1}}},computed:{titulo(){const e=[];return e[3]="Centro Olho Direito",e[6]="Centro Olho Esquerdo",e[7]="Centro Nariz",e[this.passo]}},emits:["mudarTela"],methods:{sleep(e=0){return new Promise(t=>setTimeout(t,e))},desenha(){const e=this.$refs.quadro;let t=`scale(${this.zoom})`;this.passo===3&&(t+=" translateX(15%)"),this.passo===6&&(t+=" translateX(-15%)"),e.style.transform=t},zoomMais(){this.zoom+=.01,this.desenha()},zoomMenos(){this.zoom-=.01,this.desenha()},touch(e){let t=0;try{t=e.evt.touches.length}catch{}if(this.pinca.scaling||t!==2&&(this.$refs["p"+this.passo].style.left=parseFloat(this.$refs["p"+this.passo].style.left)+e.delta.x/this.zoom+"px",this.$refs["p"+this.passo].style.top=parseFloat(this.$refs["p"+this.passo].style.top)+e.delta.y/this.zoom+"px"),!this.pinca.scaling&&t===2&&(this.pinca.zoom=Math.hypot(e.evt.touches[0].pageX-e.evt.touches[1].pageX,e.evt.touches[0].pageY-e.evt.touches[1].pageY),this.zoomIni=parseFloat(this.zoom+""),this.pinca.scaling=!0),this.pinca.scaling&&t===0&&setTimeout(()=>{this.pinca.scaling=!1},250),this.pinca.scaling&&t===2)try{const o=Math.hypot(e.evt.touches[0].pageX-e.evt.touches[1].pageX,e.evt.touches[0].pageY-e.evt.touches[1].pageY)-this.pinca.zoom;this.zoom=this.zoomIni+o/1e3,this.desenha()}catch{}},btProximo(){if(this.passo===3){this.passo=6,this.desenha();return}if(this.passo===6){parseFloat(this.$refs.p7.style.top)===0&&(this.$refs.p7.style.top=(parseFloat(this.$refs.p6.style.top)+parseFloat(this.$refs.p3.style.top))/2-50+"px",this.$refs.p7.style.left=(parseFloat(this.$refs.p6.style.left)+parseFloat(this.$refs.p3.style.left))/2+"px"),this.passo=7,this.desenha();return}this.passo===7&&($db.pupilometro.medidas.olhoDireito={...$db.pupilometro.medidas.olhoDireito,centroOlho:{top:parseFloat(this.$refs.p3.style.top),left:parseFloat(this.$refs.p3.style.left)}},$db.pupilometro.medidas.olhoEsquerdo={...$db.pupilometro.medidas.olhoEsquerdo,centroOlho:{top:parseFloat(this.$refs.p6.style.top),left:parseFloat(this.$refs.p6.style.left)}},$db.pupilometro.medidas.nariz={...$db.pupilometro.medidas.nariz,top:parseFloat(this.$refs.p7.style.top),left:parseFloat(this.$refs.p7.style.left)},$db.pupilometro.calcularDistanciasCartao(),this.$emit("mudarTela","CartaoMedidas"))},btAnterior(){if(this.passo===3){this.$emit("mudarTela","CartaoTamanho");return}if(this.passo===6){this.passo=3,this.desenha();return}this.passo===7&&(this.passo=6,this.desenha())},async btFechar(){!await $q.dialogSimNao({title:"Fechar pupil\xF4metro",message:"Ao continuar voc\xEA ir\xE1 perder os dados inseridos."})||this.$emit("mudarTela","Fim")},moveu(e){const t=this.$refs["p"+this.passo];if(e==="up"){let o=parseFloat(t.style.top)-1;o<0&&(o=0),t.style.top=o+"px"}if(e==="down"&&(t.style.top=parseFloat(t.style.top)+1+"px"),e==="left"){let o=parseFloat(t.style.left)-1;o<0&&(o=0),t.style.left=o+"px"}e==="right"&&(t.style.left=parseFloat(t.style.left)+1+"px")},redimensiona(){const e=document.body.clientWidth-20,t=window.innerHeight-60-20;this.orientacao=e>t?"landscape":"portrait",this.orientacao==="landscape"?(this.zoom=e/720,this.zoom=this.zoom*1.6):(this.zoom=t/960,this.zoom=this.zoom*2);const o=this.$refs.quadro;o.style.position="absolute",o.style.left=(document.body.clientWidth-720)/2+"px",this.orientacao,o.style.top=(window.innerHeight-960/3*2)/2+"px",this.desenha()},tamanhoPonte(){const e=$db.pupilometro.medidas;this.$refs.p8.style.top="50px",this.$refs.p8.style.left=(e.ponte-1)/2*-1+"px",this.$refs.p8.style.width=e.ponte+"px"}},mounted(){this.$refs.quadro.style.top="0px",this.$refs.quadro.style.left="0px",this.$refs.quadro.style.width="720px",this.$refs.quadro.style.height="960px";const e=$db.pupilometro.medidas;this.$refs.p3.style.top=e.olhoDireito.centroOlho.top+"px",this.$refs.p3.style.left=e.olhoDireito.centroOlho.left+"px",this.$refs.p6.style.top=e.olhoEsquerdo.centroOlho.top+"px",this.$refs.p6.style.left=e.olhoEsquerdo.centroOlho.left+"px",this.$refs.p7.style.top=e.nariz.top+"px",this.$refs.p7.style.left=e.nariz.left+"px",this.$refs.p8.style.top="50px",this.$refs.p8.style.left=(e.ponte-1)/2*-1+"px",this.$refs.p8.style.width=e.ponte+"px",this.redimensiona()}},jDe={ref:"quadro"},GDe=["src"],WDe={ref:"p3",id:"p3"},QDe={ref:"p6",id:"p6"},XDe={ref:"p7",id:"p7"},KDe={ref:"p8",id:"p8"},YDe={class:"ZonaTouch"};function JDe(e,t,o,r,a,i){const n=Ve("campo");return B(),be("div",null,[A("div",jDe,[A("img",{ref:"foto",class:"Foto",src:a.dbPupilometro.foto,onContextmenu:t[0]||(t[0]=rt(()=>{},["prevent"]))},null,40,GDe),Ee(A("div",WDe,null,512),[[Eo,a.passo===3]]),Ee(A("div",QDe,null,512),[[Eo,a.passo===6]]),Ee(A("div",XDe,[A("div",KDe,t[11]||(t[11]=[A("div",null,null,-1),A("div",null,null,-1)]),512)],512),[[Eo,a.passo===7]])],512),h(Je,{class:"bg-primary text-white q-px-sm"},{default:C(()=>[h(ae,{onClick:t[1]||(t[1]=s=>i.btAnterior()),icon:"arrow_back",round:"",flat:"",dense:""}),h(lt,null,{default:C(()=>[K(le(i.titulo),1)]),_:1}),Ee(h(n,{modelValue:a.dbPupilometro.medidas.ponte,"onUpdate:modelValue":[t[2]||(t[2]=s=>a.dbPupilometro.medidas.ponte=s),i.tamanhoPonte],tipo:"decimal",decimals:"2",suffix:"mm","rotulo-fixo":"Ponte",color:"white","label-color":"white",dark:"",dense:"",class:"q-mr-md",style:{"max-width":"90px"}},null,8,["modelValue","onUpdate:modelValue"]),[[Eo,a.passo===7]]),h(ae,{onClick:t[3]||(t[3]=s=>i.btFechar()),icon:"close",round:"",flat:"",dense:""}),h(ae,{onClick:t[4]||(t[4]=s=>i.btProximo()),icon:"arrow_forward",round:"",flat:"",dense:"",class:"q-ml-sm"})]),_:1}),Ee(h(ae,{class:"ZoomMais",icon:"zoom_in",size:"md",color:"primary",round:"",onContextmenu:t[5]||(t[5]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.zoomMais,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"ZoomMenos",icon:"zoom_out",size:"md",color:"primary",round:"",onContextmenu:t[6]||(t[6]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.zoomMenos,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(A("div",YDe,null,512),[[Qa,i.touch,void 0,{prevent:!0,mouse:!0}]]),t[12]||(t[12]=A("div",{class:"BaseBotoes"},null,-1)),Ee(h(ae,{class:"BtUp",icon:"keyboard_arrow_up",size:"md",color:"primary",round:"",onContextmenu:t[7]||(t[7]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("up"),"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"BtDown",icon:"keyboard_arrow_down",size:"md",color:"primary",round:"",onContextmenu:t[8]||(t[8]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("down"),"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"BtLeft",icon:"keyboard_arrow_left",size:"md",color:"primary",round:"",onContextmenu:t[9]||(t[9]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("left"),"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"BtRight",icon:"keyboard_arrow_right",size:"md",color:"primary",round:"",onContextmenu:t[10]||(t[10]=rt(()=>{},["prevent"]))},null,512),[[Tt,()=>i.moveu("right"),"0:50",{mouse:!0,enter:!0,space:!0}]]),h(fr,{onResize:i.redimensiona},null,8,["onResize"])])}var ZDe=St(HDe,[["render",JDe],["__scopeId","data-v-e4fd0074"]]);const e3e={data(){return{dbPupilometro:$db.pupilometro,x:0,y:0,zoom:1.6,zoomAnt:0,pinca:{scaling:!1},tela:{},qtde:0}},emits:["mudarTela"],props:{somenteLeitura:Boolean},methods:{desenha(){try{const e=$db.pupilometro.medidas;this.$refs.diptotal.style.top=e.olhoDireito.centroOlho.top-70+"px",this.$refs.diptotal.style.left=e.olhoDireito.centroOlho.left+"px",this.$refs.diptotal.style.width=e.olhoEsquerdo.centroOlho.left-e.olhoDireito.centroOlho.left+"px",this.$refs.dnpOd.style.top=e.olhoDireito.centroOlho.top-30+"px",this.$refs.dnpOd.style.left=e.olhoDireito.centroOlho.left+"px",this.$refs.dnpOd.style.width=e.nariz.left-e.olhoDireito.centroOlho.left+"px",this.$refs.dnpOe.style.top=e.olhoEsquerdo.centroOlho.top-30+"px",this.$refs.dnpOe.style.left=e.nariz.left+"px",this.$refs.dnpOe.style.width=e.olhoEsquerdo.centroOlho.left-e.nariz.left+"px",this.$refs.nariz.style.top=e.nariz.top+"px",this.$refs.nariz.style.left=e.nariz.left-1+"px",this.$refs.ponte.style.top="50px",this.$refs.ponte.style.left=(e.ponte-1)/2*-1+"px",this.$refs.ponte.style.width=e.ponte+"px";const t=this.$refs.quadro;let o=`scale(${this.zoom.toFixed(2)})`;t.style.transform=o}catch(e){console.log(e)}},redimensiona(){const e={clientWidth:document.body.clientWidth,clientHeight:window.innerHeight},t=document.body.clientWidth-20,o=window.innerHeight-60-20,r=t>o?"horizontal":"vertical";JSON.stringify(this.tela)!==JSON.stringify(e)&&(this.tela=e,r==="horizontal"?this.zoom=o/720*1.2:this.zoom=t/(960/3));const a=this.$refs.quadro;a.style.position="absolute",a.style.left=(document.body.clientWidth-720)/2+"px",r==="horizontal"?a.style.top=(window.innerHeight-960)/2+"px":a.style.top=(window.innerHeight-920)/2+"px",this.desenha()},zoomMais(){this.zoom+=.01,this.$refs.quadro.style.transform=`scale(${this.zoom.toFixed(2)})`},zoomMenos(){this.zoom-=.01,this.$refs.quadro.style.transform=`scale(${this.zoom.toFixed(2)})`},touch(e){let t=0;try{t=e.evt.touches.length}catch{}if(this.qtde=t,this.pinca.scaling||t!==2&&Math.abs(e.delta.x+e.delta.y)<=20&&(this.$refs.quadro.style.left=parseFloat(this.$refs.quadro.style.left)+e.delta.x+"px",this.$refs.quadro.style.top=parseFloat(this.$refs.quadro.style.top)+e.delta.y+"px"),!this.pinca.scaling&&t===2&&(this.pinca.zoom=Math.hypot(e.evt.touches[0].pageX-e.evt.touches[1].pageX,e.evt.touches[0].pageY-e.evt.touches[1].pageY),this.zoomIni=parseFloat(this.zoom+""),this.pinca.scaling=!0),this.pinca.scaling&&t===0&&setTimeout(()=>{this.pinca.scaling=!1},250),this.pinca.scaling&&t===2)try{const o=Math.hypot(e.evt.touches[0].pageX-e.evt.touches[1].pageX,e.evt.touches[0].pageY-e.evt.touches[1].pageY)-this.pinca.zoom;this.zoom=this.zoomIni+o/1e3,this.$refs.quadro.style.transform=`scale(${this.zoom.toFixed(2)})`}catch{}},btProximo(){this.$emit("mudarTela","Contato")},btAnterior(){this.$emit("mudarTela","CartaoOlho")},async btFechar(){!await $q.dialogSimNao({title:"Fechar pupil\xF4metro",message:"Ao continuar voc\xEA ir\xE1 perder os dados inseridos."})||this.$emit("mudarTela","Fim")}},mounted(){this.$refs.quadro.style.top="0px",this.$refs.quadro.style.left="0px",this.redimensiona()}},t3e={ref:"quadro",class:"Quadro"},o3e=["src"],a3e={ref:"odc",id:"odc"},r3e={ref:"oec",id:"oec"},i3e={ref:"diptotal",id:"diptotal"},n3e={ref:"dnpOd",id:"dnpOd",class:"medidaHorizontal"},s3e={ref:"dnpOe",id:"dnpOe",class:"medidaHorizontal"},l3e={ref:"nariz",id:"nariz"},c3e={ref:"ponte",id:"ponte"};function u3e(e,t,o,r,a,i){return B(),be("div",null,[A("div",t3e,[Ee(A("img",{ref:"foto",class:"Foto",src:a.dbPupilometro.foto,onContextmenu:t[0]||(t[0]=rt(()=>{},["prevent"]))},null,40,o3e),[[Qa,i.touch,void 0,{prevent:!0,stop:!0,mouse:!0}]]),A("div",a3e,null,512),A("div",r3e,null,512),A("div",i3e,[A("div",null,le(e.$filters.numero(a.dbPupilometro.medidas.dip.total,2)),1),t[6]||(t[6]=A("div",null,null,-1)),t[7]||(t[7]=A("div",null,null,-1))],512),A("div",n3e,[A("div",null,le(e.$filters.numero(a.dbPupilometro.medidas.dnp.od,2)),1),t[8]||(t[8]=A("div",null,null,-1)),t[9]||(t[9]=A("div",null,null,-1))],512),A("div",s3e,[A("div",null,le(e.$filters.numero(a.dbPupilometro.medidas.dnp.oe,2)),1),t[10]||(t[10]=A("div",null,null,-1)),t[11]||(t[11]=A("div",null,null,-1))],512),A("div",l3e,[A("div",c3e,[t[12]||(t[12]=A("div",null,null,-1)),t[13]||(t[13]=A("div",null,null,-1)),A("div",null,le(e.$filters.numero(a.dbPupilometro.medidas.ponte,2)),1)],512)],512)],512),h(Je,{class:"bg-primary text-white q-px-sm"},{default:C(()=>[Ee(h(ae,{onClick:t[1]||(t[1]=n=>i.btAnterior()),icon:"arrow_back",round:"",flat:"",dense:""},null,512),[[Eo,!o.somenteLeitura]]),h(lt,null,{default:C(()=>t[14]||(t[14]=[K("Medidas")])),_:1}),h(ae,{onClick:t[2]||(t[2]=n=>i.btFechar()),icon:"close",round:"",flat:"",dense:""}),h(ae,{onClick:t[3]||(t[3]=n=>i.btProximo()),icon:"arrow_forward",round:"",flat:"",dense:"",class:"q-ml-sm"})]),_:1}),Ee(h(ae,{class:"ZoomMais",icon:"zoom_in",size:"md",color:"primary",round:"",onContextmenu:t[4]||(t[4]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.zoomMais,"0:50",{mouse:!0,enter:!0,space:!0}]]),Ee(h(ae,{class:"ZoomMenos",icon:"zoom_out",size:"md",color:"primary",round:"",onContextmenu:t[5]||(t[5]=rt(()=>{},["prevent"]))},null,512),[[Tt,i.zoomMenos,"0:50",{mouse:!0,enter:!0,space:!0}]]),h(fr,{onResize:i.redimensiona},null,8,["onResize"])])}var d3e=St(e3e,[["render",u3e],["__scopeId","data-v-48344841"]]);const f3e={components:{TirarFoto:l4e,TamanhoFoto:y4e,TamanhoArmacao:E4e,Olho:V4e,Diagonal:W4e,Bifocal:aDe,Medidas:SDe,Palpebra:TDe,CartaoFoto:NDe,CartaoTamanho:zDe,CartaoOlho:ZDe,CartaoMedidas:d3e},data(){return{tela:""}},emits:["fecharModal"],props:{avancar:String,somenteLeitura:Boolean},methods:{async mudarTela(e){if(e==="Fim"){this.$emit("fecharModal","fechar");return}if(e==="Contato"){this.$emit("fecharModal","abrirContato");return}this.tela=e,e==="Olho"&&(await new Promise(t=>setTimeout(t,500)),this.$refs.Olho.desenha()),e==="Medidas"&&(await new Promise(t=>setTimeout(t,500)),this.$refs.Medidas.desenha())},upload(){this.$refs.TamanhoFoto.uploadClick()},cartaoNovo(){this.$refs.CartaoFoto.uploadClick()}},created(){this.tela=this.avancar||"TirarFoto",history.pushState(null,null,location.href),history.go(1)}};function m3e(e,t,o,r,a,i){const n=Ve("tirar-foto"),s=Ve("tamanho-foto"),l=Ve("tamanho-armacao"),u=Ve("olho"),c=Ve("diagonal"),d=Ve("bifocal"),f=Ve("medidas"),m=Ve("palpebra"),p=Ve("cartao-foto"),v=Ve("cartao-tamanho"),g=Ve("cartao-olho"),x=Ve("cartao-medidas");return B(),be(Qe,null,[e.$db.pupilometro.medidas.tipo!=="Cart\xE3o"?(B(),be(Qe,{key:0},[a.tela==="TirarFoto"?(B(),oe(n,{key:0,onMudarTela:i.mudarTela,onUpload:i.upload},null,8,["onMudarTela","onUpload"])):ie("",!0),Ee(h(s,{ref:"TamanhoFoto",onMudarTela:i.mudarTela},null,8,["onMudarTela"]),[[Eo,a.tela==="TamanhoFoto"]]),Ee(h(l,{ref:"TamanhoArmacao",onMudarTela:i.mudarTela},null,8,["onMudarTela"]),[[Eo,a.tela==="TamanhoArmacao"]]),Ee(h(u,{ref:"Olho",onMudarTela:i.mudarTela},null,8,["onMudarTela"]),[[Eo,a.tela==="Olho"]]),Ee(h(c,{onMudarTela:i.mudarTela},null,8,["onMudarTela"]),[[Eo,a.tela==="Diagonal"]]),Ee(h(d,{onMudarTela:i.mudarTela},null,8,["onMudarTela"]),[[Eo,a.tela==="Bifocal"]]),Ee(h(f,{ref:"Medidas",somenteLeitura:o.somenteLeitura,onMudarTela:i.mudarTela},null,8,["somenteLeitura","onMudarTela"]),[[Eo,a.tela==="Medidas"]]),Ee(h(m,{ref:"Palpebra",onMudarTela:i.mudarTela},null,8,["onMudarTela"]),[[Eo,a.tela==="Palpebra"]])],64)):ie("",!0),e.$db.pupilometro.medidas.tipo==="Cart\xE3o"?(B(),be(Qe,{key:1},[Ee(h(p,{ref:"CartaoFoto",onMudarTela:i.mudarTela},null,8,["onMudarTela"]),[[Eo,a.tela==="CartaoFoto"]]),Ee(h(v,{ref:"CartaoTamanho",onMudarTela:i.mudarTela},null,8,["onMudarTela"]),[[Eo,a.tela==="CartaoTamanho"]]),Ee(h(g,{ref:"CartaoOlho",onMudarTela:i.mudarTela},null,8,["onMudarTela"]),[[Eo,a.tela==="CartaoOlho"]]),Ee(h(x,{ref:"CartaoMedidas",somenteLeitura:o.somenteLeitura,onMudarTela:i.mudarTela},null,8,["somenteLeitura","onMudarTela"]),[[Eo,a.tela==="CartaoMedidas"]])],64)):ie("",!0)],64)}var aA=St(f3e,[["render",m3e]]),p3e=Object.freeze(Object.defineProperty({__proto__:null,default:aA},Symbol.toStringTag,{value:"Module"}));const h3e={components:{Arquivo:Zm,CodigoBarras:Jm,ContatoCriar:tA,PromptItemV2:Zd,Receita:LR,Tutorial:$R,Pupilometro:aA},computed:{carrinhoSemArmacaoVazia(){return this.carrinho.filter(e=>!(e.tipoItem==="Arma\xE7\xE3o"&&!e.descricaoItem.trim()&&e.total===0&&e.valorItem===0))},envelopeVazio(){return{id:"",idDocumentoAdicional:"",docId:"",docTipo:"",carrinho:[],totalDesconto:0,totalPercentualDesconto:0,subTotal:0,totalDocumento:0,paciente:{id:"",nome:""},tipo:"Envelope",tipoEnvelope:"Oculos",tipoLente:"",tipoOculos:"Vista"}},erroDataHoraPrevisto(){if(this.campos.dataHoraPrevisto){const e=new Date().setHours(0,0,0,0);if(new Date(this.campos.dataHoraPrevisto)<new Date(e))return"Previs\xE3o de entrega n\xE3o pode ser menor do que a data de hoje"}return""}},data(){return{armacao:{alturaMontagemOD:null,alturaMontagemOE:null,diagonal:null,ponte:null,altura:null,tamanho:"",armacaoMaterial:"",tipoMontagem:""},armacaoMaterialModal:!1,armacaoMaterialDescricao:"",envelope:{},visivel:!1,opcoesArmacaoMaterial:[],tipoMontagemModal:!1,tipoMontagemDescricao:"",opcoesTipoMontagem:[],campos:{totalDesconto:0,totalPercentualDesconto:0,subTotal:0,totalDocumento:0,idContato:"",descricaoContato:"",idDocumentoAdicional:"",dataHoraPrevisto:""},tipo:"Envelope",tipoEnvelope:"Oculos",tipoLente:"",tipoOculos:"Vista",carrinho:[],documentoContato:[],duplicarReceita:!1,idPacienteSelecionado:"",descricaoReceitaSelecionada:"",modalItem:{visivel:!1,filtros:{}},modalPupilometro:{},tipoPupilometro:"",permissaoPupilometro:!1,descricaoLaboratorio:"",documentoContatoLaboratorio:{},descricaoResponsavel:"",itensTipo:[],itens:{},tipoDescontoPercentagem:!0,tipoDescontoTotal:!0,pacientes:[{label:"",value:""}],tipoLentes:[],tipoLentesOculos:["","Monofocal (Longe)","Monofocal (M\xE9dio)","Monofocal (Perto)","Bifocal (Longe e Perto)","Multifocal (Longe e Perto)","Intermedi\xE1rio (M\xE9dio e Perto)","Intermedi\xE1rio (Longe e M\xE9dio)"],tipoLentesContato:["","Monofocal (Longe)","Bifocal (Longe e Perto)","Multifocal (Longe e Perto)"],receita:{},receitasDescricao:[],modalReceita:{visivel:!1,id:"",idEmpresa:"",duplicar:!1},arquivo:[],opcoesPacientes:[],filtroAvancado:void 0,dataPrevisaoEntrega:null,horaPrevisaoEntrega:null}},emits:["salvarEnvelope"],methods:{ajustarDataHoraPrevisaoEntrega(){let e;e=new Date(this.dataPrevisaoEntrega),e.setHours(this.horaPrevisaoEntrega.slice(0,2)),e.setMinutes(this.horaPrevisaoEntrega.slice(3,5)),this.campos.dataHoraPrevisto=Xo.formatDate(e)},async criarOpcoesPacientes(){try{const e=await $db.contato.le({id:this.campos.idContato}),t=await $db.contato.leFilhos(this.campos.idContato);t.push(e);const o=t.map(r=>({label:r.nome,value:r.id}));return o.sort((r,a)=>r.label<a.label?1:-1),o}catch(e){this.$q.notifyError("N\xE3o foi poss\xEDvel carregar os dados de pacientes",e)}},filtrarPacientes(e,t){t(async()=>{const o=await this.criarOpcoesPacientes();if(e==="")this.opcoesPacientes=o;else{const r=e.toLowerCase();this.opcoesPacientes=o.filter(a=>a.label.toLowerCase().indexOf(r)>-1)}})},fecharModalPupilometro(){if(this.modalPupilometro.visivel=!1,$db.pupilometro.fotoOriginal==="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAQAAAAkGDomAAAATklEQVR42u3OMQEAAAgDINc/9Czh4QEJSDuvRVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUPDSAovln7Gzmi7KAAAAAElFTkSuQmCC")return;let e={id:(this.modalPupilometro.pupilometroAtual||{}).id||$utils.uuid(),descricao:"Pupil\xF4metro",referencia:"idEnvelope:"+this.campos.id,json:JSON.stringify({foto:$db.pupilometro.foto,fotoOriginal:$db.pupilometro.fotoOriginal,medidas:$db.pupilometro.medidas})};this.modalPupilometro.pupilometroAtual=e,this.armacao.largura=$db.pupilometro.medidas.tamanhoArmacao,this.armacao.ponte=$db.pupilometro.medidas.ponte,this.armacao.altura=$db.pupilometro.medidas.alturaArmacao,this.armacao.diagonal=$db.pupilometro.medidas.diagonal.distancia,$db.pupilometro.medidas.bifocal?(this.armacao.alturaMontagemOD=$db.pupilometro.medidas.bifocalOlhoDireito,this.armacao.alturaMontagemOE=$db.pupilometro.medidas.bifocalOlhoEsquerdo):(this.armacao.alturaMontagemOD=$db.pupilometro.medidas.dip.od.altura,this.armacao.alturaMontagemOE=$db.pupilometro.medidas.dip.oe.altura),this.salvarDnp()},abrirModalPupilometro(e){if(this.modalPupilometro={...this.modalPupilometro,visivel:!1,avancar:this.envelope.somenteLeitura?"Medidas":""},$db.pupilometro.limpar(),$db.pupilometro.medidas.tipo="Presencial",this.armacao.largura&&($db.pupilometro.medidas.tamanhoArmacao=this.armacao.largura),this.armacao.ponte&&($db.pupilometro.medidas.ponte=this.armacao.ponte),this.armacao.diagonal&&($db.pupilometro.medidas.diagonal.distancia=this.armacao.diagonal),this.armacao.altura&&($db.pupilometro.medidas.alturaArmacao=this.armacao.altura),(this.modalPupilometro.pupilometroAtual||{}).json){const t=JSON.parse(this.modalPupilometro.pupilometroAtual.json);$db.pupilometro.foto=t.foto,$db.pupilometro.fotoOriginal=t.fotoOriginal,$db.pupilometro.medidas=t.medidas,this.armacao.largura&&($db.pupilometro.medidas.tamanhoArmacao=this.armacao.largura),this.armacao.ponte&&($db.pupilometro.medidas.ponte=this.armacao.ponte),this.armacao.diagonal&&($db.pupilometro.medidas.diagonal.distancia=this.armacao.diagonal),this.envelope.somenteLeitura||$db.pupilometro.foto!=="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAQAAAAkGDomAAAATklEQVR42u3OMQEAAAgDINc/9Czh4QEJSDuvRVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUPDSAovln7Gzmi7KAAAAAElFTkSuQmCC"?this.modalPupilometro.avancar="Medidas":this.modalPupilometro.avancar="TirarFoto"}if(e==="Cart\xE3o"){$db.pupilometro.medidas.tipo=e,$db.pupilometro.medidas.olhoDireito.centroOlho.top=345,$db.pupilometro.medidas.olhoDireito.centroOlho.left=255,$db.pupilometro.medidas.olhoEsquerdo.centroOlho.top=345,$db.pupilometro.medidas.olhoEsquerdo.centroOlho.left=450,$db.pupilometro.medidas.nariz.top=0,$db.pupilometro.medidas.nariz.left=0,$db.pupilometro.medidas.ponte=23,this.envelope.somenteLeitura||$db.pupilometro.foto!=="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAQAAAAkGDomAAAATklEQVR42u3OMQEAAAgDINc/9Czh4QEJSDuvRVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUPDSAovln7Gzmi7KAAAAAElFTkSuQmCC"?this.modalPupilometro.avancar="CartaoMedidas":this.modalPupilometro.avancar="CartaoFoto",this.modalPupilometro={...this.modalPupilometro,visivel:!0},this.$nextTick(()=>{this.modalPupilometro.avancar==="CartaoFoto"&&this.$refs.pupilometro.cartaoNovo()});return}this.$nextTick(()=>{this.modalPupilometro.visivel=!0})},abrirArmacaoMaterialModal(){this.envelope.somenteLeitura||(this.armacaoMaterialModal=!0)},abrirTipoMontagemModal(){this.envelope.somenteLeitura||(this.tipoMontagemModal=!0)},async atualizarArmacaoMaterial(){console.log("atualizarArmacaoMaterial");let e=[];await $db.item.carregarMemoria();for(const o of $db.item.itens)o.armacaoMaterial&&!~e.indexOf(o.armacaoMaterial)&&e.push(o.armacaoMaterial);e=e.map(o=>({armacaoMaterial:o,sort:o.toLowerCase()})),e=$lodash.orderBy(e,"sort","asc");const t=[];for(const o of e)t.push({rotulo:o.armacaoMaterial,valor:o.armacaoMaterial});this.opcoesArmacaoMaterial=t},async atualizarTipoMontagem(){let e=[];await $db.item.carregarMemoria();for(const o of $db.item.itens)o.tipoMontagem&&!~e.indexOf(o.tipoMontagem)&&e.push(o.tipoMontagem);e=e.map(o=>({tipoMontagem:o,sort:o.toLowerCase()})),e=$lodash.orderBy(e,"sort","asc");const t=[];for(const o of e)t.push({rotulo:o.tipoMontagem,valor:o.tipoMontagem});this.opcoesTipoMontagem=t},async criarArmacaoMaterial(){this.opcoesArmacaoMaterial=$lodash.orderBy([...this.opcoesArmacaoMaterial,{rotulo:this.armacaoMaterialDescricao,valor:this.armacaoMaterialDescricao,sort:this.armacaoMaterialDescricao.toLowerCase()}],"sort","asc"),this.armacao.armacaoMaterial=this.armacaoMaterialDescricao,this.armacaoMaterialModal=!1},async criarTipoMontagem(){this.opcoesTipoMontagem=$lodash.orderBy([...this.opcoesTipoMontagem,{rotulo:this.tipoMontagemDescricao,valor:this.tipoMontagemDescricao,sort:this.tipoMontagemDescricao.toLowerCase()}],"sort","asc"),this.armacao.tipoMontagem=this.tipoMontagemDescricao,this.tipoMontagemModal=!1},async selecionarLaboratorio(){if(this.envelope.somenteLeitura)return;const e=await $g.promptContato.show({filtro:{ativo:!0,segmento:"Laborat\xF3rio"},placeholder:"Selecione o laborat\xF3rio"});if(!(e!=null&&e.id))return;const t=e.id;this.documentoContatoLaboratorio.idContato=t,this.descricaoLaboratorio=(await $db.contato.le({id:t})).apelido||""},laboratorioLimpar(){this.documentoContatoLaboratorio.idContato="",this.descricaoLaboratorio=""},responsavelLimpar(){this.campos.idContatoResponsavel="",this.descricaoResponsavel=""},async selecionarResponsavel(){if(this.envelope.somenteLeitura)return;const e=await $g.promptContato.show({filtro:{ativo:!0,vendedores:!0},placeholder:"Selecione o respons\xE1vel"});if(!(e!=null&&e.id))return;const t=e.id;this.campos.idContatoResponsavel=t,this.descricaoResponsavel=(await $db.contato.le({id:t})).apelido||""},alterarTipoLente(){for(const e of this.carrinho)e.oculos=this.tipoLente},async selecionarPaciente(e){this.campos.idContato=e.value,this.campos.descricaoContato=e.label,await this.filtrarReceitas()},async atualizarReceita(e){var t;await this.filtrarReceitas(),e||this.receitasDescricao.length&&(e=this.receitasDescricao[0].value),e&&(this.receita=await $db.receita.le({id:e||this.receita.id}),await this.pacientesAtualizar(),this.campos.idContato=this.receita.paciente.id,this.campos.descricaoContato=(t=this.pacientes.filter(o=>o.value===this.campos.idContato)[0])==null?void 0:t.label)},calculaTotal(e){$db.envelope.calculaTotal({envelope:$utils.clonar(this.campos),itensEnvelope:$utils.clonar(this.carrinho),campoAlterado:e}).then(t=>{this.carrinho=t.itensEnvelope,this.campos=t.envelope})},async calculaTotalItem(e,t){const r=(await $db.envelope.calculaTotalItem({envelope:$utils.clonar(this.campos),itemEnvelope:$utils.clonar(this.carrinho[e]),campoAlterado:t})).itemEnvelope;if(t==="valorItem"){const a=$utils.clonarV2(this.carrinho);a[e]={...r,valorItem:0},this.carrinho=a,this.$nextTick(()=>{const i=$utils.clonarV2(this.carrinho);i[e]=r,this.carrinho=i,this.calculaTotal()})}else{const a=$utils.clonarV2(this.carrinho);a[e]=r,this.carrinho=a}this.calculaTotal()},async abrirModalDependente(){const e=await this.$refs.modalDependente.mostrar();(e||{}).id&&(await this.criarDependencia(e),await this.filtrarReceitas())},async abrirModalReceita(e,t){try{this.$refs.modalReceita.mostrar({id:e||$utils.uuid(),idEmpresa:$lodash.get(this.envelope,"documento.idEmpresa",""),duplicar:t})}catch(o){this.$q.notifyError("Ocorreu um erro ao carregar a receita.",o)}},limparFiltroAvancado(){this.filtroAvancado={...this.filtroAvancado,cilindrico:{lte:0},esfericoInicial:{lte:0},esfericoFinal:{gte:0},tipo:"Lente"}},abrirModalItem(e,t){var d,f,m,p,v,g,x,b,_,w,S,D,M,O,T,I,N,P,F,L,z,H,X,Y,de,ye,W,re,_e,ve,ke,Ie,he,De,Te,J,q,ne,U,Z,Ce,Q,V,R,ee,ce,se,pe,we,Ne;let o,r,a,i,n,s,l,u,c;switch(e){case"Lentes":this.modalItem.filtros={tipo:"Lente",ativo:!0,bloquearVenda:!1},this.tipoLente&&(~this.tipoLente.indexOf("Monofocal")&&(c="Monofocal"),~this.tipoLente.indexOf("Bifocal")&&(c="Bifocal"),(~this.tipoLente.indexOf("Multifocal")||~this.tipoLente.indexOf("Intermedi\xE1rio"))&&(c="Multifocal")),r=(v=(p=(m=(f=(d=this.receita)==null?void 0:d.prescricao)==null?void 0:f.dioptria)==null?void 0:m.od)==null?void 0:p.longe)==null?void 0:v.cilindrico,a=(w=(_=(b=(x=(g=this.receita)==null?void 0:g.prescricao)==null?void 0:x.dioptria)==null?void 0:b.oe)==null?void 0:_.longe)==null?void 0:w.cilindrico,i=(T=(O=(M=(D=(S=this.receita)==null?void 0:S.prescricao)==null?void 0:D.dioptria)==null?void 0:M.od)==null?void 0:O.longe)==null?void 0:T.esferico,n=(L=(F=(P=(N=(I=this.receita)==null?void 0:I.prescricao)==null?void 0:N.dioptria)==null?void 0:P.oe)==null?void 0:F.longe)==null?void 0:L.esferico,o=(de=(Y=(X=(H=(z=this.receita)==null?void 0:z.prescricao)==null?void 0:H.dioptria)==null?void 0:X.od)==null?void 0:Y.medio)==null?void 0:de.esferico,(!i||o&&o>i)&&(i=o),o=(ve=(_e=(re=(W=(ye=this.receita)==null?void 0:ye.prescricao)==null?void 0:W.dioptria)==null?void 0:re.oe)==null?void 0:_e.medio)==null?void 0:ve.esferico,(!n||o&&o>n)&&(n=o),o=(Te=(De=(he=(Ie=(ke=this.receita)==null?void 0:ke.prescricao)==null?void 0:Ie.dioptria)==null?void 0:he.od)==null?void 0:De.perto)==null?void 0:Te.cilindrico,(!r||o&&o>r)&&(r=o),o=(Z=(U=(ne=(q=(J=this.receita)==null?void 0:J.prescricao)==null?void 0:q.dioptria)==null?void 0:ne.oe)==null?void 0:U.perto)==null?void 0:Z.cilindrico,(!a||o&&o>a)&&(a=o),o=(ee=(R=(V=(Q=(Ce=this.receita)==null?void 0:Ce.prescricao)==null?void 0:Q.dioptria)==null?void 0:V.od)==null?void 0:R.perto)==null?void 0:ee.esferico,(!i||o&&o>i)&&(i=o),o=(Ne=(we=(pe=(se=(ce=this.receita)==null?void 0:ce.prescricao)==null?void 0:se.dioptria)==null?void 0:pe.oe)==null?void 0:we.perto)==null?void 0:Ne.esferico,(!n||o&&o>n)&&(n=o),r=Number(r||void 0),a=Number(a||void 0),i=Number(i||void 0),n=Number(n||void 0),Number.isNaN(r)&&Number.isNaN(a)||(s=r>a?r:a),(Number.isNaN(r)||Number.isNaN(a))&&(s=r||a),Number.isNaN(i)&&Number.isNaN(n)||(l=i<n?i:n,u=i>n?i:n),(Number.isNaN(i)||Number.isNaN(n))&&(l=u=i||n),this.filtroAvancado={cilindrico:{lte:s||0},esfericoInicial:{lte:l||0},esfericoFinal:{gte:u||0},lenteTipo:c,opcoesTiposLente:["","Monofocal","Bifocal","Multifocal"]};break;case"LentesContato":this.modalItem.filtros={tipo:"Lente Contato",ativo:!0,bloquearVenda:!1},this.filtroAvancado=void 0;break;case"Armacao":this.modalItem.filtros={tipo:["Arma\xE7\xE3o","\xD3culos Sol"],ativo:!0,bloquearVenda:!1},this.filtroAvancado=void 0;break;case"Tratamento LOD":this.modalItem.filtros={tipo:"Tratamento",ativo:!0,bloquearVenda:!1},this.filtroAvancado=void 0,this.tipoTratamento="TLOD",this.idDocumentoItemPai=t;break;case"Tratamento LOE":this.modalItem.filtros={tipo:"Tratamento",ativo:!0,bloquearVenda:!1},this.filtroAvancado=void 0,this.tipoTratamento="TLOE",this.idDocumentoItemPai=t;break}this.modalItem.filtros.idEmpresa=this.campos.idEmpresa,this.modalItem.filtros.idTabelaPreco=this.campos.idItemTabelaPreco,this.modalItem.visivel=!0},async alterarTipoEnvelope(){const e=async()=>{this.tipoOculos=this.tipoEnvelope==="Oculos"?"Vista":"",this.carrinho=[],this.tipoEnvelope==="Oculos"?(this.tipoOculos="Vista",this.tipoLentes=this.tipoLentesOculos):(this.tipoOculos="",this.tipoLentes=this.tipoLentesContato)};if(!this.carrinho.length){e();return}$q.dialog({cancel:"Cancelar",message:"Esta a\xE7\xE3o ir\xE1 remover os itens do carrinho.",ok:"Continuar",title:"Tem certeza?"}).onOk(()=>{e()}).onCancel(()=>{this.tipoEnvelope=this.tipoEnvelope==="Oculos"?"Lentes":"Oculos"})},async criarDependencia(e){try{const t=await $db.hibrido.le({table:"documento",id:this.campos.documentoId});await $db.contato.criarDependenciaContatos({contatoPai:{id:t.idContato},contatoFilho:e}),this.campos.paciente||(this.campos.paciente={}),this.campos.idContato=this.campos.paciente.id=this.idPacienteSelecionado=e.id,this.campos.descricaoContato=this.campos.paciente.nome=e.nome}catch(t){this.$q.notifyError("Ocorreu um erro ao criar a depend\xEAncia.",t)}},async filtrarReceitas(){let e=[],t=await $db.hibrido.lista({table:"documento",where:{tipo:"Prescri\xE7\xE3o",idContato:this.campos.idContato}});t=$lodash.orderBy(t,"dataHoraEmissao","desc");const o=new Date().setHours(0,0,0,0);for(let r of t){r=await $db.receita.le({id:r.id}),this.receita.id||(this.receita=r);let a=`De ${r.medico.nome}, `;a+=`${this.$filters.data(r.data)} `,a+=`v\xE1lido at\xE9 ${this.$filters.data(r.validade)}`;let i={};new Date(r.validade).setHours(0,0,0,0)<o?i={icon:"alarm_off",color:"negative",stamp:"Vencida"}:i={icon:"alarm",stamp:"\xC0 vencer"};const n={label:a,value:r.id,...i};e.push(n)}this.receitasDescricao=e},mostrar(){this.atualizarLoading()},async fechar(e){e.stopPropagation(),this.visivel=!1},ordenarCarrinho(){const e={LOE:1,TLOE:2,LOD:3,TLOD:4,Arma\u00E7\u00E3o:5};this.carrinho=(this.carrinho||[]).sort((t,o)=>e[t.tipoItem]-e[o.tipoItem])},async removerItem(e){const t=(this.carrinho[e]||{}).id;this.carrinho=this.carrinho.filter(o=>o.id!==t&&o.idDocumentoItemPai!==t),this.calculaTotal()},async salvarDnp(){if(!this.receita.id)return;const e=JSON.parse((this.modalPupilometro.pupilometroAtual||{}).json||null);if(!e)return;let t=await $db.hibrido.lista({table:"documentoItem",where:{idDocumento:this.receita.id}});for(const o of t){let r=0;o.operacao==="Olho Esquerdo"&&(r=$utils.arredondar(e.medidas.dnp.oe)),o.operacao==="Olho Direito"&&(r=$utils.arredondar(e.medidas.dnp.od)),r!==o.di&&(await $erpUpdate().documentoItem.update(o.id,{di:r}),await $utils.sincronismoEnviar("atualizar","documentoItem",o.id,{di:r}))}this.atualizarReceita(this.receita.id)},async salvarEnvelope(){if(!this.tipoLente){this.$q.notifyError("Selecione o tipo da lente");return}if(!this.receita.id){this.$q.notifyError("Selecione uma receita");return}if(!this.carrinho.length){this.$q.notifyError("N\xE3o h\xE1 itens no carrinho");return}if(this.erroDataHoraPrevisto){this.$q.notifyError("Erro no preenchimento do formul\xE1rio");return}let e={};if(this.tipoEnvelope==="Oculos"){let o=!1;for(const r in this.carrinho)if(this.carrinho[r].tipoItem==="Arma\xE7\xE3o"){this.carrinho[r].alturaMontagemOD=$utils.numberOrNull(this.armacao.alturaMontagemOD),this.carrinho[r].alturaMontagemOE=$utils.numberOrNull(this.armacao.alturaMontagemOE),this.carrinho[r].diagonal=$utils.numberOrNull(this.armacao.diagonal),this.carrinho[r].ponte=$utils.numberOrNull(this.armacao.ponte),this.carrinho[r].altura=$utils.numberOrNull(this.armacao.altura),this.carrinho[r].largura=$utils.numberOrNull(this.armacao.largura),this.carrinho[r].armacaoMaterial=this.armacao.armacaoMaterial,this.carrinho[r].tipoMontagem=this.armacao.tipoMontagem,this.carrinho[r].oculos=this.tipoLente,this.carrinho[r].tipoOculos=this.tipoOculos,this.carrinho[r].idItem&&(e.id=this.carrinho[r].idItem,e.armacaoMaterial=this.armacao.armacaoMaterial,e.tipoMontagem=this.armacao.tipoMontagem,e.diagonal=$utils.numberOrNull(this.armacao.diagonal),e.ponte=$utils.numberOrNull(this.armacao.ponte),e.altura=$utils.numberOrNull(this.armacao.altura),e.largura=$utils.numberOrNull(this.armacao.largura)),o=!0;break}o||this.carrinho.push({id:$utils.uuid(),idDocumento:this.campos.documentoId,idDocumentoAdicional:this.campos.id,dataHoraEmissao:$utils.dataAtual(),descontoItem:0,descontoPercentualItem:0,descontoSubTotal:0,descricaoItem:"",operacaoFator:0,oculos:this.tipoLente,tipoOculos:this.tipoOculos,quantidade:0,status:this.campos.status,subTotal:0,tipoItem:"Arma\xE7\xE3o",total:0,valorCusto:0,valorCustoMedio:0,valorCustoReposicao:0,valorCustoUltimo:0,valorItem:0,valorItemUltimo:0,valorOriginal:0,valorReal:0,alturaMontagemOD:$utils.numberOrNull(this.armacao.alturaMontagemOD),alturaMontagemOE:$utils.numberOrNull(this.armacao.alturaMontagemOE),diagonal:$utils.numberOrNull(this.armacao.diagonal),ponte:$utils.numberOrNull(this.armacao.ponte),altura:$utils.numberOrNull(this.armacao.altura),largura:$utils.numberOrNull(this.armacao.largura),armacaoMaterial:this.armacao.armacaoMaterial,tipoMontagem:this.armacao.tipoMontagem})}this.campos.idDocumentoAdicional=this.receita.id;const t={documento:$utils.clonar(this.campos),documentoItens:$utils.clonar(this.carrinho),armacao:e,arquivo:this.$refs.arquivo.arquivos.map(o=>({...o,idTabelaMaster:this.campos.id,tabelaMaster:"envelope"})),arquivoOriginal:this.envelope.arquivoOriginal,pupilometro:{original:$utils.clonarV2(this.modalPupilometro.pupilometroOriginal),atual:$utils.clonarV2(this.modalPupilometro.pupilometroAtual)}};this.documentoContatoLaboratorio.idContato&&(this.documentoContatoLaboratorio.id||(this.documentoContatoLaboratorio.id=$utils.uuid(),this.documentoContatoLaboratorio.idDocumento=t.documento.id,this.documentoContatoLaboratorio.descricao="Laborat\xF3rio"),this.documentoContato=this.documentoContato.filter(o=>o.descricao!=="Laborat\xF3rio"),t.documentoContato=[...this.documentoContato,this.documentoContatoLaboratorio]),this.salvarDnp(),this.$emit("salvarEnvelope",t),this.visivel=!1},adicionarItem(e){const t=this.carrinho.find(a=>a.idItem===e.id);let o=1;e.novoValorVenda=e.valorVenda,t&&(e.novoValorVenda=t.valorReal,o=t.quantidade);const r={};r[e.id]={item:e,quantidade:o},this.selecionarItens(r)},async selecionarItens(e){for(const t in e){const o=e[t].item||{};await this.selecionarItem(t,o)}},async selecionarItem(e,t){var a;let o=[];if(["Arma\xE7\xE3o","\xD3culos Sol"].includes(t.tipo))o=["Arma\xE7\xE3o"];else if(t.tipo==="Tratamento")o=[this.tipoTratamento];else if(["Lente","Lente Contato"].includes(t.tipo))try{o=["LOD","LOE"];for(const i of this.carrinho){const n=o.indexOf(i.tipoItem);n!==-1&&o.splice(n,1)}o.length===0&&(o=["LOD","LOE"])}catch{return}this.modalItem.visivel=!1;const r=await $utils.selecionarCfop({ncm:t.ncm,idItem:t.id,itemTipo:t.tipo,codigoDocumentoOperacao:this.campos.codigoDocumentoOperacao,idContatoDestinatario:this.campos.idContato,idContatoEmitente:this.campos.idEmpresa,operacaoFator:-1});if(!r){this.$q.notify("N\xE3o foi poss\xEDvel localizar o CFOP.");return}for(const i of o){if(!["TLOD","TLOE"].includes(i))for(const l in this.carrinho)((a=this.carrinho[l])==null?void 0:a.tipoItem)===i&&await this.removerItem(l);const n=(await $db.estoqueSaldoProdutoEmpresa.le({idItem:t.id,idEmpresa:$lodash.get(this.envelope,"documento.idEmpresa",""),tipoEstoque:"Dispon\xEDvel"})).find(l=>l.idItem),s={id:$utils.uuid(),idItem:t.id,idDocumento:this.campos.documentoId,idDocumentoAdicional:this.campos.id,codigoPlanoContaDestino:139,codigoPlanoContaEstoque:146,dataHoraEmissao:$utils.dataAtual(),descontoItem:0,descontoPercentualItem:0,descontoSubTotal:0,descricaoItem:t.descricaoConcatenada,operacao:r==null?void 0:r.operacao,operacaoFator:r==null?void 0:r.fator,idCfop:r==null?void 0:r.id,oculos:this.tipoLente,tipoOculos:i==="Arma\xE7\xE3o"?this.tipoOculos:"",lenteTipo:i!=="Arma\xE7\xE3o"?this.tipoOculos:"",quantidade:1,status:this.campos.status,subTotal:t.valorVenda,tipoItem:i,total:t.valorVenda,valorCusto:0,valorCustoMedio:$lodash.get(n,"valorCustoMedio",0),valorCustoReposicao:t.valorCustoReposicao||0,valorCustoUltimo:$lodash.get(n,"valorCusto",0),valorItem:t.valorVenda,valorItemUltimo:0,valorOriginal:t.valorVenda,valorReal:t.valorVenda,valorRealTotal:t.valorVenda,alturaMontagemOD:null,alturaMontagemOE:null,diagonal:$utils.numberOrNull(t.diagonal),ponte:$utils.numberOrNull(t.ponte),altura:$utils.numberOrNull(t.altura),largura:$utils.numberOrNull(t.largura),armacaoMaterial:t.armacaoMaterial||"",tipoMontagem:t.tipoMontagem||""};["TLOD","TLOE"].includes(i)&&this.idDocumentoItemPai&&(s.idDocumentoItemPai=this.idDocumentoItemPai),i==="Arma\xE7\xE3o"&&(this.armacao.diagonal=$utils.numberOrNull(s.diagonal),this.armacao.ponte=$utils.numberOrNull(s.ponte),this.armacao.altura=$utils.numberOrNull(s.altura),this.armacao.largura=$utils.numberOrNull(s.largura),this.armacao.armacaoMaterial=s.armacaoMaterial,this.armacao.tipoMontagem=s.tipoMontagem),this.carrinho.push(s),this.ordenarCarrinho(),this.carregarItens(),this.calculaTotal()}},async pacientesAtualizar(){const e=await $db.contato.le({id:this.campos.idContato}),t=await $db.contato.leFilhos(e.id);t.push({nome:e.nome,id:e.id});const o=[];for(const r of t)o.push({label:r.nome,value:r.id});this.pacientes=$lodash.orderBy(o,"label")},async atualizarLoading(){const e=$utils.logarIni("Envelope");await $tryLoading(this.atualizar),$utils.logarFim(e,1)},async atualizar(){this.campos=$utils.clonar({...$db.envelope.vazio,...this.envelope.documento}),this.tipoLente="",this.tipoLentes=this.tipoLentesOculos,this.carrinho=$utils.clonar(this.envelope.documentoItens||[]),this.armacao.alturaMontagemOD=null,this.armacao.alturaMontagemOE=null,this.armacao.diagonal=null,this.armacao.ponte=null,this.armacao.altura=null,this.armacao.largura=null,this.armacao.armacaoMaterial="",this.armacao.tipoMontagem="";const e=[];for(const r in this.carrinho){if(this.carrinho[r].idItem){const a=await $erp().item.get(this.carrinho[r].idItem);e.push(a.tipo||"")}if(this.carrinho[r].tipoItem==="Arma\xE7\xE3o"){this.armacao.alturaMontagemOD=$utils.numberOrNull(this.carrinho[r].alturaMontagemOD),this.armacao.alturaMontagemOE=$utils.numberOrNull(this.carrinho[r].alturaMontagemOE),this.armacao.diagonal=$utils.numberOrNull(this.carrinho[r].diagonal),this.armacao.ponte=$utils.numberOrNull(this.carrinho[r].ponte),this.armacao.altura=$utils.numberOrNull(this.carrinho[r].altura),this.armacao.largura=$utils.numberOrNull(this.carrinho[r].largura),this.armacao.armacaoMaterial=this.carrinho[r].armacaoMaterial,this.armacao.tipoMontagem=this.carrinho[r].tipoMontagem,this.tipoLente=this.carrinho[r].oculos;break}}this.tipoEnvelope="Oculos";const t=new RegExp(/contato/i);for(const r of e)if(t.test(r)){this.tipoEnvelope="Lentes";break}if(this.documentoContato=$utils.clonar(this.envelope.documentoContato||[]),this.documentoContatoLaboratorio=this.documentoContato.find(r=>r.descricao==="Laborat\xF3rio")||{},this.descricaoLaboratorio="",this.documentoContatoLaboratorio.id&&(this.descricaoLaboratorio=(await $db.contato.le({id:this.documentoContatoLaboratorio.idContato})).apelido||""),this.descricaoResponsavel=(await $db.contato.le({id:this.campos.idContatoResponsavel})).apelido||"",!this.campos.dataHoraPrevisto){let r="",a=await $db.configuracoes.le({nome:"venda.envelope.previsaoentrega"});a.length&&(a=parseInt(a[0].valor)),Number.isInteger(a)||(a=15);let i=new Date;const n=i.getDate();i.setDate(n+a),r=new Date(i.setHours(0,0,0,0)),this.campos.dataHoraPrevisto=Xo.formatDate(r)}let o;o=String(new Date(this.campos.dataHoraPrevisto).getHours()).padStart(2,"0"),o+=":",o+=String(new Date(this.campos.dataHoraPrevisto).getMinutes()).padStart(2,"0"),this.dataPrevisaoEntrega=new Date(new Date(this.campos.dataHoraPrevisto).toDateString()),this.horaPrevisaoEntrega=o,this.$refs.arquivo&&(this.$refs.arquivo.somenteLeitura=this.envelope.somenteLeitura),await Promise.all([this.pacientesAtualizar(),this.atualizarArmacaoMaterial(),this.atualizarTipoMontagem(),this.atualizarReceita(this.campos.idDocumentoAdicional),this.ordenarCarrinho(),this.carregarItens(),this.carregarPupilometro()]),this.visivel=!0},async carregarItens(){for(const e of this.carrinho)if(!!e.idItem&&!(e.idItem in this.itens)){let t=await $erp().item.get(e.idItem);t={...t,marca:t.marca||"",referencia:t.referencia||"",observacao:t.observacao||"",aplicacao:t.aplicacao||"",imagem:t.imagem||""};const o=$utils.clonarV2(this.itens);o[t.id]=t,this.itens=o}},async carregarPupilometro(){var o,r;let e,t;$db.permissao.objeto("pupilometro").then(a=>{this.permissaoPupilometro=a}),e=await $erp().json.where({descricao:"Pupil\xF4metro",referencia:"idEnvelope:"+this.campos.id}).toArray(),t=e.find(a=>a.id),this.modalPupilometro.pupilometroOriginal={},this.modalPupilometro.pupilometroAtual={},t&&(this.modalPupilometro.pupilometroOriginal=$utils.clonarV2(t),this.modalPupilometro.pupilometroAtual=$utils.clonarV2(t)),this.tipoPupilometro="";try{t=JSON.parse(this.modalPupilometro.pupilometroAtual.json),this.tipoPupilometro=(r=(o=t==null?void 0:t.medidas)==null?void 0:o.tipo)!=null?r:"Presencial"}catch{}}},props:{enableChanges:{type:Boolean,required:!1,default:!1}}},v3e={class:"layout-padding q-pa-none q-pb-md q-mt-md"},g3e={class:"u-container"},_3e={class:"q-pa-md"},b3e={class:"col-12 col-md"},y3e={class:"col-12 col-md-auto"},x3e={class:"col-12 col-md"},C3e={class:"col-12 col-md-auto"},w3e={class:"q-pa-md"},E3e={key:0,class:"q-pa-lg text-center"},S3e={class:"col-12 col-lg-4"},I3e={class:"col-12 col-lg-4"},A3e={class:"col-12 col-lg-2"},T3e={class:"col-12 col-lg-2"},D3e={key:0,class:"col-12"},O3e={class:"col"},P3e={class:"col"},F3e={class:"col"},M3e={class:"col"},N3e={class:"col"},k3e={class:"col"},R3e={class:"col"},V3e={class:"col"},B3e={class:"col"},q3e={class:"col"},L3e={class:"col"},$3e={class:"col"},U3e={class:"col"},z3e={class:"col"},H3e={class:"col"},j3e={class:"col"},G3e={class:"q-pa-md"},W3e={class:"q-pa-md"},Q3e={key:0,class:"text-center"},X3e={class:"col-12 col-md-auto"},K3e={class:"col-12 col-md"},Y3e={class:"col-4 col-md"},J3e={class:"col-4 col-md"},Z3e={class:"col-4 col-md"},eOe={class:"col-4 col-md"},tOe={class:"q-col-gutter-sm row justify-end q-mt-sm"},oOe={class:"col-12 col-md-4 offset-md-8"},aOe={class:"col-8 text-right"},rOe={class:"col-8 q-mt-sm text-right",style:{"padding-top":"8px"}},iOe={class:"q-pa-md"},nOe={class:"col-12 col-md"},sOe={class:"col-xs-6 col-md"},lOe={class:"col-xs-6 col-md"},cOe={class:"col-12 col-md"},uOe={class:"col-12 col-md"},dOe={class:"col-xs-6 col-md"},fOe={class:"col-xs-6 col-md"},mOe={class:"q-pa-md"},pOe={class:"col-6 col-md"},hOe={class:"col-6 col-md"},vOe={class:"col-6 col-md"},gOe={class:"col-6 col-md"},_Oe={class:"col-12 col-lg-3"},bOe={class:"col-12 col-lg-3"},yOe={class:"row justify-end"},xOe={class:"row justify-end"};function COe(e,t,o,r,a,i){const n=Ve("campo"),s=Ve("row"),l=Ve("Arquivo"),u=Ve("CodigoBarras"),c=Ve("avatar"),d=Ve("badge"),f=Ve("Tutorial"),m=Ve("pupilometro"),p=Ve("ContatoCriar"),v=Ve("PromptItemV2"),g=Ve("receita");return B(),be(Qe,null,[h(Ht,{modelValue:a.visivel,"onUpdate:modelValue":t[35]||(t[35]=x=>a.visivel=x),persistent:"",maximized:"",onKeyup:jr(i.fechar,["esc"])},{default:C(()=>[h(To,{container:"",class:"bg-light"},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,null,{default:C(()=>[Ee(h(ae,{flat:"",round:"",dense:"",icon:"arrow_back"},null,512),[[st]]),h(lt,null,{default:C(()=>t[50]||(t[50]=[K("Envelope")])),_:1}),A("form",{onSubmit:t[0]||(t[0]=rt((...x)=>i.salvarEnvelope&&i.salvarEnvelope(...x),["prevent"]))},[a.envelope.somenteLeitura?ie("",!0):(B(),oe(ae,{key:0,class:"q-ml-sm no-shadow",color:"white","text-color":"primary",unelevated:"",label:"Salvar",type:"submit"}))],32)]),_:1})]),_:1}),h(Jo,null,{default:C(()=>[A("div",v3e,[A("div",g3e,[h(Mt,{class:"q-mb-md bg-white no-shadow"},{default:C(()=>[h(Je,{class:"text-tertiary"},{default:C(()=>[h(lt,null,{default:C(()=>t[51]||(t[51]=[K("Dados Principais")])),_:1})]),_:1}),A("div",_3e,[h(s,{class:"items-center q-col-gutter-md"},{default:C(()=>[A("div",b3e,[h(ii,{modelValue:a.campos.descricaoContato,"onUpdate:modelValue":[t[1]||(t[1]=x=>a.campos.descricaoContato=x),i.selecionarPaciente],"use-input":"","hide-selected":"","fill-input":"","input-debounce":"500","stack-label":"",label:"Paciente",options:a.opcoesPacientes,onFilter:i.filtrarPacientes},{prepend:C(()=>[h(ae,{color:"tertiary",size:"md",icon:"person_add",dense:"",flat:"",round:"",onClick:i.abrirModalDependente},{default:C(()=>[h(Ft,null,{default:C(()=>t[52]||(t[52]=[K("Incluir paciente")])),_:1})]),_:1},8,["onClick"])]),"no-option":C(()=>[h(qe,null,{default:C(()=>[h(fe,{class:"text-grey"},{default:C(()=>t[53]||(t[53]=[K(" Resultado n\xE3o encontrado ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","onUpdate:modelValue"])]),A("div",y3e,[h(Ri,{readonly:a.envelope.somenteLeitura,modelValue:a.tipoEnvelope,"onUpdate:modelValue":[t[2]||(t[2]=x=>a.tipoEnvelope=x),i.alterarTipoEnvelope],class:"q-mr-sm",label:"\xD3culos",val:"Oculos"},null,8,["readonly","modelValue","onUpdate:modelValue"]),h(Ri,{readonly:a.envelope.somenteLeitura,modelValue:a.tipoEnvelope,"onUpdate:modelValue":[t[3]||(t[3]=x=>a.tipoEnvelope=x),i.alterarTipoEnvelope],label:"LDC",val:"Lentes"},{default:C(()=>[h(Ft,null,{default:C(()=>t[54]||(t[54]=[K("Lentes de Contato")])),_:1})]),_:1},8,["readonly","modelValue","onUpdate:modelValue"])]),A("div",x3e,[h(n,{modelValue:a.tipoLente,"onUpdate:modelValue":[t[4]||(t[4]=x=>a.tipoLente=x),i.alterarTipoLente],class:"col-12 col-lg-4",maxlength:"60",rotulo:"Tipo",tipo:"seletor",opcoes:a.tipoLentes,somenteLeitura:a.envelope.somenteLeitura},null,8,["modelValue","opcoes","somenteLeitura","onUpdate:modelValue"])]),A("div",C3e,[h(Ri,{modelValue:a.tipoOculos,"onUpdate:modelValue":t[5]||(t[5]=x=>a.tipoOculos=x),class:"q-mr-sm",disable:a.envelope.somenteLeitura||a.tipoEnvelope!=="Oculos",label:"Vista",val:"Vista"},null,8,["modelValue","disable"]),h(Ri,{modelValue:a.tipoOculos,"onUpdate:modelValue":t[6]||(t[6]=x=>a.tipoOculos=x),disable:a.envelope.somenteLeitura||a.tipoEnvelope!=="Oculos",label:"Solar",val:"Solar"},null,8,["modelValue","disable"])])]),_:1})])]),_:1}),h(Mt,{class:"q-mb-md no-shadow"},{default:C(()=>[h(Je,null,{default:C(()=>[h(Pe,{name:"mdi-file-eye",size:"24px",class:"text-tertiary"}),h(lt,{class:"text-tertiary"},{default:C(()=>t[55]||(t[55]=[K(" Receita ")])),_:1}),a.envelope.somenteLeitura?ie("",!0):(B(),oe(ae,{key:0,color:"primary",dense:"",flat:"",icon:"search",round:"",onClick:i.filtrarReceitas},{default:C(()=>[h(aa,null,{default:C(()=>[h(At,{separator:"",link:""},{default:C(()=>[(B(!0),be(Qe,null,qt(a.receitasDescricao,x=>Ee((B(),oe(qe,{clickable:"",key:x.value,onClick:b=>i.atualizarReceita(x.value)},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:x.icon,color:x.color},null,8,["name","color"])]),_:2},1024),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>[K(le(x.label),1)]),_:2},1024),h(Re,{caption:""},{default:C(()=>[A("small",null,le(x.stamp),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[st]])),128))]),_:1})]),_:1}),h(Ft,null,{default:C(()=>t[56]||(t[56]=[K("Selecionar receita")])),_:1})]),_:1},8,["onClick"])),a.envelope.somenteLeitura?ie("",!0):(B(),oe(ae,{key:1,color:"primary",dense:"",flat:"",icon:"add",onClick:t[7]||(t[7]=x=>i.abrirModalReceita("",!1)),round:""},{default:C(()=>[h(Ft,null,{default:C(()=>t[57]||(t[57]=[K("Adicionar")])),_:1})]),_:1})),a.envelope.somenteLeitura?ie("",!0):(B(),oe(ae,{key:2,color:"tertiary",dense:"",flat:"",icon:"more_vert",round:""},{default:C(()=>[h(aa,null,{default:C(()=>[h(At,{link:"",separator:""},{default:C(()=>[a.receitasDescricao.length?Ee((B(),oe(qe,{key:0,clickable:"",onClick:t[8]||(t[8]=x=>i.abrirModalReceita(a.receita.id,!1))},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"edit"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[58]||(t[58]=[K("Editar")])),_:1})]),_:1})]),_:1})),[[st]]):ie("",!0),a.receitasDescricao.length?Ee((B(),oe(qe,{key:1,clickable:"",onClick:t[9]||(t[9]=x=>i.abrirModalReceita(a.receita.id,!0))},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"file_copy"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[59]||(t[59]=[K("Duplicar")])),_:1})]),_:1})]),_:1})),[[st]]):ie("",!0)]),_:1})]),_:1})]),_:1}))]),_:1}),A("div",w3e,[a.receitasDescricao.length?ie("",!0):(B(),be("div",E3e,[A("p",null,"N\xE3o h\xE1 receitas para o paciente "+le(a.campos.descricaoContato)+".",1),t[60]||(t[60]=A("p",{class:"text-caption"},"Para incluir, utilize os bot\xF5es acima ou insira via QR Code.",-1))])),a.receitasDescricao.length?(B(),oe(s,{key:1,class:"q-col-gutter-md"},{default:C(()=>[A("div",S3e,[t[61]||(t[61]=A("span",{class:"text-body2"},"Paciente: ",-1)),A("strong",null,le((a.receita.paciente||{}).nome),1)]),A("div",I3e,[t[62]||(t[62]=A("span",{class:"text-body2"},"M\xE9dico: ",-1)),A("strong",null,le((a.receita.medico||{}).nome),1)]),A("div",A3e,[t[63]||(t[63]=A("span",{class:"text-body2"},"Data: ",-1)),A("strong",null,le(e.$filters.data(a.receita.data)),1)]),A("div",T3e,[t[64]||(t[64]=A("span",{class:"text-body2"},"Validade: ",-1)),A("strong",null,le(e.$filters.data(a.receita.validade)),1)]),a.receita.observacoes?(B(),be("div",D3e,[t[65]||(t[65]=A("strong",{class:"text-body2"},"Observa\xE7\xE3o:",-1)),A("p",null,le(a.receita.observacoes),1)])):ie("",!0)]),_:1})):ie("",!0),a.receitasDescricao.length?(B(),oe(s,{key:2,class:"q-col-gutter-md"},{default:C(()=>[h(At,{class:"col-12 col-lg-6",highlight:"","no-border":""},{default:C(()=>[h(qe,{class:"q-px-none"},{default:C(()=>[h(fe,{avatar:"",class:"mw100"}),h(fe,{class:"text-subtitle1 text-weight-bold"},{default:C(()=>t[66]||(t[66]=[K("Longe")])),_:1})]),_:1}),h(qe,{class:"q-px-none"},{default:C(()=>[h(fe,{avatar:"",class:"mw100"}),h(fe,{class:"text-body2 text-weight-bold"},{default:C(()=>[h(s,null,{default:C(()=>t[67]||(t[67]=[A("div",{class:"col"},"Esf\xE9rico",-1),A("div",{class:"col"},"Cilindrico",-1),A("div",{class:"col"},"Eixo",-1),A("div",{class:"col"},"DNP",-1)])),_:1})]),_:1})]),_:1}),h(qe,{class:"q-px-none"},{default:C(()=>[h(fe,{avatar:"",class:"mw100"},{default:C(()=>[h(fe,null,{default:C(()=>t[68]||(t[68]=[K("OD")])),_:1})]),_:1}),h(fe,null,{default:C(()=>[h(s,null,{default:C(()=>{var x,b,_,w,S,D,M,O,T,I,N,P,F,L,z,H,X,Y,de,ye;return[A("div",O3e,le(e.$filters.numeroSinal((S=(w=(_=(b=(x=a.receita)==null?void 0:x.prescricao)==null?void 0:b.dioptria)==null?void 0:_.od)==null?void 0:w.longe)==null?void 0:S.esferico,2)),1),A("div",P3e,le(e.$filters.numeroSinal((I=(T=(O=(M=(D=a.receita)==null?void 0:D.prescricao)==null?void 0:M.dioptria)==null?void 0:O.od)==null?void 0:T.longe)==null?void 0:I.cilindrico,2)),1),A("div",F3e,le(e.$filters.numeroOuBranco((z=(L=(F=(P=(N=a.receita)==null?void 0:N.prescricao)==null?void 0:P.dioptria)==null?void 0:F.od)==null?void 0:L.longe)==null?void 0:z.eixo)),1),A("div",M3e,le(e.$filters.numeroOuBranco((ye=(de=(Y=(X=(H=a.receita)==null?void 0:H.prescricao)==null?void 0:X.dioptria)==null?void 0:Y.od)==null?void 0:de.longe)==null?void 0:ye.dnp,2)),1)]}),_:1})]),_:1})]),_:1}),h(qe,{class:"q-px-none"},{default:C(()=>[h(fe,{avatar:"",class:"mw100"},{default:C(()=>[h(fe,null,{default:C(()=>t[69]||(t[69]=[K("OE")])),_:1})]),_:1}),h(fe,null,{default:C(()=>[h(s,null,{default:C(()=>{var x,b,_,w,S,D,M,O,T,I,N,P,F,L,z,H;return[A("div",N3e,le(e.$filters.numeroSinal((w=(_=(b=(x=a.receita.prescricao)==null?void 0:x.dioptria)==null?void 0:b.oe)==null?void 0:_.longe)==null?void 0:w.esferico,2)),1),A("div",k3e,le(e.$filters.numeroSinal((O=(M=(D=(S=a.receita.prescricao)==null?void 0:S.dioptria)==null?void 0:D.oe)==null?void 0:M.longe)==null?void 0:O.cilindrico,2)),1),A("div",R3e,le(e.$filters.numeroOuBranco((P=(N=(I=(T=a.receita.prescricao)==null?void 0:T.dioptria)==null?void 0:I.oe)==null?void 0:N.longe)==null?void 0:P.eixo)),1),A("div",V3e,le(e.$filters.numeroOuBranco((H=(z=(L=(F=a.receita.prescricao)==null?void 0:F.dioptria)==null?void 0:L.oe)==null?void 0:z.longe)==null?void 0:H.dnp,2)),1)]}),_:1})]),_:1})]),_:1})]),_:1}),h(At,{class:"col-12 col-lg-6",highlight:"","no-border":""},{default:C(()=>[h(qe,{class:"q-px-none"},{default:C(()=>[h(fe,{avatar:"",class:"mw100"},{default:C(()=>t[70]||(t[70]=[K("\xA0\xA0")])),_:1}),h(fe,{class:"text-subtitle1 text-weight-bold"},{default:C(()=>[h(s,null,{default:C(()=>t[71]||(t[71]=[A("div",{class:"col"},"M\xE9dio",-1),A("div",{class:"col"},"Perto",-1)])),_:1})]),_:1})]),_:1}),h(qe,{class:"q-px-none"},{default:C(()=>[h(fe,{avatar:"",class:"mw100"},{default:C(()=>t[72]||(t[72]=[K("\xA0\xA0")])),_:1}),h(fe,{class:"text-body2 text-weight-bold"},{default:C(()=>[h(s,null,{default:C(()=>t[73]||(t[73]=[A("div",{class:"col"},"Esf\xE9rico",-1),A("div",{class:"col"},"DNP",-1),A("div",{class:"col"},"Esf\xE9rico",-1),A("div",{class:"col"},"DNP",-1)])),_:1})]),_:1})]),_:1}),h(qe,null,{default:C(()=>[h(fe,{avatar:"",class:"mw100"},{default:C(()=>[h(fe,null,{default:C(()=>t[74]||(t[74]=[K("OD")])),_:1})]),_:1}),h(fe,null,{default:C(()=>[h(s,null,{default:C(()=>{var x,b,_,w,S,D,M,O,T,I,N,P,F,L,z,H;return[A("div",B3e,le(e.$filters.numeroSinal((w=(_=(b=(x=a.receita.prescricao)==null?void 0:x.dioptria)==null?void 0:b.od)==null?void 0:_.medio)==null?void 0:w.esferico,2)),1),A("div",q3e,le(e.$filters.numeroOuBranco((O=(M=(D=(S=a.receita.prescricao)==null?void 0:S.dioptria)==null?void 0:D.od)==null?void 0:M.medio)==null?void 0:O.dnp,2)),1),A("div",L3e,le(e.$filters.numeroSinal((P=(N=(I=(T=a.receita.prescricao)==null?void 0:T.dioptria)==null?void 0:I.od)==null?void 0:N.perto)==null?void 0:P.esferico,2)),1),A("div",$3e,le(e.$filters.numeroOuBranco((H=(z=(L=(F=a.receita.prescricao)==null?void 0:F.dioptria)==null?void 0:L.od)==null?void 0:z.perto)==null?void 0:H.dnp,2)),1)]}),_:1})]),_:1})]),_:1}),h(qe,null,{default:C(()=>[h(fe,{avatar:"",class:"mw100"},{default:C(()=>[h(fe,null,{default:C(()=>t[75]||(t[75]=[K("OE")])),_:1})]),_:1}),h(fe,null,{default:C(()=>[h(s,null,{default:C(()=>{var x,b,_,w,S,D,M,O,T,I,N,P,F,L,z,H;return[A("div",U3e,le(e.$filters.numeroSinal((w=(_=(b=(x=a.receita.prescricao)==null?void 0:x.dioptria)==null?void 0:b.oe)==null?void 0:_.medio)==null?void 0:w.esferico,2)),1),A("div",z3e,le(e.$filters.numeroOuBranco((O=(M=(D=(S=a.receita.prescricao)==null?void 0:S.dioptria)==null?void 0:D.oe)==null?void 0:M.medio)==null?void 0:O.dnp,2)),1),A("div",H3e,le(e.$filters.numeroSinal((P=(N=(I=(T=a.receita.prescricao)==null?void 0:T.dioptria)==null?void 0:I.oe)==null?void 0:N.perto)==null?void 0:P.esferico,2)),1),A("div",j3e,le(e.$filters.numeroOuBranco((H=(z=(L=(F=a.receita.prescricao)==null?void 0:F.dioptria)==null?void 0:L.oe)==null?void 0:z.perto)==null?void 0:H.dnp,2)),1)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):ie("",!0)])]),_:1}),h(Mt,{class:"bg-white q-mb-md no-shadow"},{default:C(()=>[h(Je,null,{default:C(()=>[h(Pe,{name:"attach_file",size:"24px"}),h(lt,null,{default:C(()=>t[76]||(t[76]=[K("Arquivos")])),_:1})]),_:1}),A("div",G3e,[h(l,{id:a.envelope.id,arquivos:a.envelope.arquivo,edicao:o.enableChanges,cartao:"",ref:"arquivo"},null,8,["id","arquivos","edicao"])])]),_:1}),h(Mt,{class:"q-mb-md bg-white no-shadow"},{default:C(()=>[h(Je,null,{default:C(()=>[h(Pe,{name:"mdi-glasses",size:"24px",class:"text-tertiary"}),h(lt,{class:"text-tertiary"},{default:C(()=>t[77]||(t[77]=[K(" Carrinho ")])),_:1}),h(ae,{class:"hideondesktop",color:"primary",dense:"",flat:"",icon:"add",round:""},{default:C(()=>[h(aa,null,{default:C(()=>[h(At,{link:"",separator:""},{default:C(()=>[!a.envelope.somenteLeitura&&a.tipoEnvelope==="Lentes"?Ee((B(),oe(qe,{key:0,clickable:"",onClick:t[10]||(t[10]=x=>i.abrirModalItem("LentesContato"))},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"add"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[78]||(t[78]=[K("Lentes de Contato")])),_:1})]),_:1})]),_:1})),[[st]]):ie("",!0),!a.envelope.somenteLeitura&&a.tipoEnvelope==="Oculos"&&["Vista","Solar"].includes(a.tipoOculos)?Ee((B(),oe(qe,{key:1,clickable:"",onClick:t[11]||(t[11]=x=>i.abrirModalItem("Lentes"))},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"add"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[79]||(t[79]=[K("Lentes")])),_:1})]),_:1})]),_:1})),[[st]]):ie("",!0),!a.envelope.somenteLeitura&&a.tipoEnvelope==="Oculos"&&["Vista","Solar"].includes(a.tipoOculos)?Ee((B(),oe(qe,{key:2,clickable:"",onClick:t[12]||(t[12]=x=>i.abrirModalItem("Armacao"))},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"add"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[80]||(t[80]=[K("Arma\xE7\xE3o")])),_:1})]),_:1})]),_:1})),[[st]]):ie("",!0)]),_:1})]),_:1})]),_:1}),!a.envelope.somenteLeitura&&a.tipoEnvelope==="Lentes"?(B(),oe(ae,{key:0,color:"primary",flat:"",icon:"add",class:"hideonmobile",label:"Lentes de Contato",onClick:t[13]||(t[13]=x=>i.abrirModalItem("LentesContato"))})):ie("",!0),!a.envelope.somenteLeitura&&a.tipoEnvelope==="Oculos"&&["Vista","Solar"].includes(a.tipoOculos)?(B(),oe(ae,{key:1,class:"hideonmobile",color:"primary",flat:"",icon:"add",label:"Lentes",onClick:t[14]||(t[14]=x=>i.abrirModalItem("Lentes"))})):ie("",!0),!a.envelope.somenteLeitura&&a.tipoEnvelope==="Oculos"&&["Vista","Solar"].includes(a.tipoOculos)?(B(),oe(ae,{key:2,class:"hideonmobile",color:"primary",flat:"",icon:"add",label:"Arma\xE7\xE3o",onClick:t[15]||(t[15]=x=>i.abrirModalItem("Armacao"))})):ie("",!0),!a.envelope.somenteLeitura&&(a.tipoEnvelope==="Lentes"||a.tipoEnvelope==="Oculos"&&["Vista","Solar"].includes(a.tipoOculos))?(B(),oe(u,{key:3,itemFiltros:{ativo:!0,bloquearVenda:!1,idEmpresa:a.campos.idEmpresa,idItemTabelaPreco:a.campos.idItemTabelaPreco},documentoItens:a.carrinho,onAdicionar:i.adicionarItem,onAtualizar:i.selecionarItens},null,8,["itemFiltros","documentoItens","onAdicionar","onAtualizar"])):ie("",!0)]),_:1}),A("div",W3e,[a.carrinho.length?(B(!0),be(Qe,{key:1},qt(i.carrinhoSemArmacaoVazia,(x,b)=>(B(),oe(s,{class:"items-start q-col-gutter-md",key:b},{default:C(()=>[A("div",X3e,[h(c,{imagem:(a.itens[x.idItem]||{}).imagem||"",rotulo:x.descricaoItem,tamanho:"120"},null,8,["imagem","rotulo"])]),A("div",K3e,[h(Je,{class:"Venda-itemBarra bg-transparent q-pa-none",color:"black",dark:""},{default:C(()=>[h(lt,{class:"q-pl-none"},{default:C(()=>[K(le(x.descricaoItem),1),A("span",null,le((a.itens[x.idItem]||{}).marca||""),1)]),_:2},1024),h(d,{class:"q-mr-sm"},{default:C(()=>[K(le(x.tipoItem)+" "+le((a.itens[x.idItem]||{}).referencia||""),1)]),_:2},1024),a.envelope.somenteLeitura?ie("",!0):(B(),oe(ae,{key:0,color:"tertiary",dense:"",flat:"",icon:"delete",round:"",onClick:_=>i.removerItem(b)},null,8,["onClick"]))]),_:2},1024),h(s,{class:"q-col-gutter-sm"},{default:C(()=>[A("div",Y3e,[h(n,{somenteLeitura:a.envelope.somenteLeitura,modelValue:x.valorItem,"onUpdate:modelValue":_=>x.valorItem=_,dense:"",outlined:"","rotulo-fixo":"Valor",onBlur:_=>i.calculaTotalItem(b,"valorItem"),tipo:"decimal",decimals:"2"},null,8,["somenteLeitura","modelValue","onUpdate:modelValue","onBlur"])]),A("div",J3e,[h(s,{class:"items-center"},{default:C(()=>[h(Pe,{name:"mdi-minus",color:"primary"}),h(n,{somenteLeitura:a.envelope.somenteLeitura,modelValue:x.descontoPercentualItem,"onUpdate:modelValue":_=>x.descontoPercentualItem=_,dense:"",outlined:"",opcoes:{maximumValue:100},"rotulo-fixo":"Desconto",tipo:"decimal",decimals:"2",suffix:"%",onBlur:_=>i.calculaTotalItem(b,"descontoPercentualItem")},null,8,["somenteLeitura","modelValue","onUpdate:modelValue","onBlur"])]),_:2},1024)]),A("div",Z3e,[h(n,{somenteLeitura:a.envelope.somenteLeitura,modelValue:x.descontoItem,"onUpdate:modelValue":_=>x.descontoItem=_,dense:"",outlined:"",opcoes:{minimumValue:0},"rotulo-fixo":"Desconto",onBlur:_=>i.calculaTotalItem(b,"descontoItem"),tipo:"decimal",decimals:"2"},null,8,["somenteLeitura","modelValue","onUpdate:modelValue","onBlur"])]),A("div",eOe,[h(s,{class:"items-center"},{default:C(()=>[h(Pe,{name:"mdi-equal",color:"primary",class:"hideonmobile"}),h(n,{modelValue:x.total,"onUpdate:modelValue":_=>x.total=_,dense:"",outlined:"","somente-leitura":"","rotulo-fixo":"Total",tipo:"decimal",decimals:"2"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)])]),_:2},1024),A("div",tOe,[!a.envelope.somenteLeitura&&x.tipoItem==="LOE"?(B(),oe(ae,{key:0,color:"primary",flat:"",icon:"add",label:"Tratamento LOE",onClick:_=>i.abrirModalItem("Tratamento LOE",x.id)},null,8,["onClick"])):ie("",!0),!a.envelope.somenteLeitura&&x.tipoItem==="LOD"?(B(),oe(ae,{key:1,color:"primary",flat:"",icon:"add",label:"Tratamento LOD",onClick:_=>i.abrirModalItem("Tratamento LOD",x.id)},null,8,["onClick"])):ie("",!0)])])]),_:2},1024))),128)):(B(),be("div",Q3e,t[81]||(t[81]=[A("p",null,"N\xE3o h\xE1 itens no carrinho",-1),A("p",{class:"text-caption"},"Para adicionar, utilize os bot\xF5es acima ou insira o c\xF3digo de barras",-1)]))),a.carrinho.length?(B(),oe(s,{key:2,class:"q-col-gutter-md q-mt-md"},{default:C(()=>[A("div",oOe,[h(s,{class:"q-col-gutter-md"},{default:C(()=>[t[82]||(t[82]=A("div",{class:"col-4"},"Subtotal",-1)),A("strong",aOe,le(e.$filters.numero(a.campos.subTotal,2)),1),t[83]||(t[83]=A("div",{class:"col-4",style:{"padding-top":"16px"}},"Desconto",-1)),h(n,{"somente-leitura":a.envelope.somenteLeitura,modelValue:a.campos.totalPercentualDesconto,"onUpdate:modelValue":t[16]||(t[16]=x=>a.campos.totalPercentualDesconto=x),class:"col-3",opcoes:{maximumValue:100},tipo:"decimal",decimals:"2",suffix:"%",onBlur:t[17]||(t[17]=x=>i.calculaTotal("descontoPercentual"))},null,8,["somente-leitura","modelValue"]),h(n,{"somente-leitura":a.envelope.somenteLeitura,modelValue:a.campos.totalDesconto,"onUpdate:modelValue":t[18]||(t[18]=x=>a.campos.totalDesconto=x),class:"col-5",opcoes:{minimumValue:0},onBlur:t[19]||(t[19]=x=>i.calculaTotal("desconto")),tipo:"decimal",decimals:"2"},null,8,["somente-leitura","modelValue"]),t[84]||(t[84]=A("div",{class:"col-4 q-mt-sm",style:{"padding-top":"8px"}},"Total",-1)),A("strong",rOe,le(e.$filters.numero(a.campos.totalDocumento,2)),1)]),_:1})])]),_:1})):ie("",!0)])]),_:1}),(B(),oe(Mt,{key:0,class:"q-mb-md bg-white no-shadow"},{default:C(()=>[A("div",iOe,[h(s,{class:"q-col-gutter-md"},{default:C(()=>[A("div",nOe,[h(s,{class:"q-px-none q-mx-none"},{default:C(()=>[a.permissaoPupilometro&&this.tipoPupilometro?(B(),oe(ae,{key:0,label:"Pupil\xF4metro",icon:"mdi-eye-settings-outline",unelevated:"",color:"primary",onClick:t[20]||(t[20]=x=>i.abrirModalPupilometro(this.tipoPupilometro))})):ie("",!0),a.permissaoPupilometro&&!this.tipoPupilometro?(B(),oe(ae,{key:1,label:"Pupil\xF4metro",icon:"mdi-eye-settings-outline",unelevated:"",color:"primary"},{default:C(()=>[h(aa,null,{default:C(()=>[h(At,{link:"","no-border":"",separator:""},{default:C(()=>[Ee((B(),oe(qe,{clickable:"",onClick:t[21]||(t[21]=x=>i.abrirModalPupilometro("Presencial"))},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"add"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[85]||(t[85]=[K("Pupil\xF4metro (Arma\xE7\xE3o)")])),_:1})]),_:1})]),_:1})),[[st]]),Ee((B(),oe(qe,{clickable:"",onClick:t[22]||(t[22]=x=>i.abrirModalPupilometro("Cart\xE3o"))},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"add"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[86]||(t[86]=[K("Pupil\xF4metro (Cart\xE3o)")])),_:1})]),_:1})]),_:1})),[[st]])]),_:1})]),_:1})]),_:1})):ie("",!0),h(f,{componente:"Envelope"})]),_:1})]),A("div",sOe,[h(n,{"somente-leitura":a.envelope.somenteLeitura,modelValue:a.armacao.alturaMontagemOD,"onUpdate:modelValue":t[23]||(t[23]=x=>a.armacao.alturaMontagemOD=x),rotulo:"Alt. Mont. OD",tipo:"decimal",decimals:"2",permiteNull:""},null,8,["somente-leitura","modelValue"])]),A("div",lOe,[h(n,{"somente-leitura":a.envelope.somenteLeitura,modelValue:a.armacao.alturaMontagemOE,"onUpdate:modelValue":t[24]||(t[24]=x=>a.armacao.alturaMontagemOE=x),rotulo:"Alt. Mont. OE",tipo:"decimal",decimals:"2",permiteNull:""},null,8,["somente-leitura","modelValue"])]),A("div",cOe,[h(ii,{dense:"",rounded:"",modelValue:a.descricaoLaboratorio,"onUpdate:modelValue":t[25]||(t[25]=x=>a.descricaoLaboratorio=x),label:"Laborat\xF3rio",options:["a","b"],onFilter:i.selecionarLaboratorio,class:"col-12 col-sm-4"},{append:C(()=>[a.descricaoLaboratorio!==""?(B(),oe(Pe,{key:0,name:"close",onClick:rt(i.laboratorioLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):ie("",!0),h(Pe,{name:"search",onClick:rt(i.selecionarLaboratorio,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onFilter"])]),A("div",uOe,[h(ii,{dense:"",rounded:"",modelValue:a.descricaoResponsavel,"onUpdate:modelValue":t[26]||(t[26]=x=>a.descricaoResponsavel=x),label:"Respons\xE1vel",options:["a","b"],onFilter:i.selecionarResponsavel,class:"col-12 col-sm-4"},{append:C(()=>[a.descricaoResponsavel!==""?(B(),oe(Pe,{key:0,name:"close",onClick:rt(i.responsavelLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):ie("",!0),h(Pe,{name:"search",onClick:rt(i.selecionarResponsavel,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onFilter"])]),A("div",dOe,[h(n,{modelValue:a.dataPrevisaoEntrega,"onUpdate:modelValue":[t[27]||(t[27]=x=>a.dataPrevisaoEntrega=x),i.ajustarDataHoraPrevisaoEntrega],rotulo:"Data Previs\xE3o de Entrega",maxlength:"10",tipo:"data",error:!!i.erroDataHoraPrevisto,errorMessage:i.erroDataHoraPrevisto},null,8,["modelValue","error","errorMessage","onUpdate:modelValue"])]),A("div",fOe,[h(n,{modelValue:a.horaPrevisaoEntrega,"onUpdate:modelValue":[t[28]||(t[28]=x=>a.horaPrevisaoEntrega=x),i.ajustarDataHoraPrevisaoEntrega],rotulo:"Hora Previs\xE3o de Entrega",maxlength:"4",tipo:"hora"},null,8,["modelValue","onUpdate:modelValue"])])]),_:1})])]),_:1})),(B(),oe(Mt,{key:1,class:"q-mb-md bg-white no-shadow"},{default:C(()=>[A("div",mOe,[h(s,{class:"q-col-gutter-md"},{default:C(()=>[A("div",pOe,[h(n,{"somente-leitura":a.envelope.somenteLeitura,modelValue:a.armacao.diagonal,"onUpdate:modelValue":t[29]||(t[29]=x=>a.armacao.diagonal=x),tipo:"decimal",decimals:"2",rotulo:"Diagonal",permiteNull:""},null,8,["somente-leitura","modelValue"])]),A("div",hOe,[h(n,{"somente-leitura":a.envelope.somenteLeitura,modelValue:a.armacao.ponte,"onUpdate:modelValue":t[30]||(t[30]=x=>a.armacao.ponte=x),tipo:"decimal",decimals:"2",rotulo:"Ponte",permiteNull:""},null,8,["somente-leitura","modelValue"])]),A("div",vOe,[h(n,{"somente-leitura":a.envelope.somenteLeitura,modelValue:a.armacao.altura,"onUpdate:modelValue":t[31]||(t[31]=x=>a.armacao.altura=x),tipo:"decimal",decimals:"2",rotulo:"Altura Vertical",permiteNull:""},null,8,["somente-leitura","modelValue"])]),A("div",gOe,[h(n,{"somente-leitura":a.envelope.somenteLeitura,modelValue:a.armacao.largura,"onUpdate:modelValue":t[32]||(t[32]=x=>a.armacao.largura=x),rotulo:"Largura",tipo:"decimal",decimals:"2",permiteNull:""},null,8,["somente-leitura","modelValue"])]),A("div",_Oe,[h(n,{"somente-leitura":a.envelope.somenteLeitura,modelValue:a.armacao.armacaoMaterial,"onUpdate:modelValue":t[33]||(t[33]=x=>a.armacao.armacaoMaterial=x),after:[{icon:"add_circle",handler(){i.abrirArmacaoMaterialModal()}}],opcoes:a.opcoesArmacaoMaterial,"rotulo-fixo":"Material",tipo:"seletor"},null,8,["somente-leitura","modelValue","after","opcoes"])]),A("div",bOe,[h(n,{"somente-leitura":a.envelope.somenteLeitura,modelValue:a.armacao.tipoMontagem,"onUpdate:modelValue":t[34]||(t[34]=x=>a.armacao.tipoMontagem=x),after:[{icon:"add_circle",handler(){i.abrirTipoMontagemModal()}}],opcoes:a.opcoesTipoMontagem,"rotulo-fixo":"Tipo Montagem",tipo:"seletor"},null,8,["somente-leitura","modelValue","after","opcoes"])])]),_:1})])]),_:1}))])])]),_:1})]),_:1})]),_:1},8,["modelValue","onKeyup"]),h(Ht,{modelValue:a.armacaoMaterialModal,"onUpdate:modelValue":t[38]||(t[38]=x=>a.armacaoMaterialModal=x)},{default:C(()=>[h(Mt,null,{default:C(()=>[h(Je,null,{default:C(()=>[h(lt,null,{default:C(()=>t[87]||(t[87]=[K("Cadastrar Material")])),_:1})]),_:1}),h(Ra,null,{default:C(()=>[h(n,{modelValue:a.armacaoMaterialDescricao,"onUpdate:modelValue":t[36]||(t[36]=x=>a.armacaoMaterialDescricao=x),modelModifiers:{trim:!0},class:"row",maxlength:"60",rotulo:"Material"},null,8,["modelValue"])]),_:1}),h(Je,null,{default:C(()=>[h(lt,null,{default:C(()=>[A("div",yOe,[h(ae,{flat:"",color:"tertiary",onClick:t[37]||(t[37]=x=>a.armacaoMaterialModal=!1),label:"Cancelar"}),h(ae,{unelevated:"",color:"primary",onClick:i.criarArmacaoMaterial,label:"Criar"},null,8,["onClick"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),h(Ht,{modelValue:a.tipoMontagemModal,"onUpdate:modelValue":t[41]||(t[41]=x=>a.tipoMontagemModal=x)},{default:C(()=>[h(Mt,null,{default:C(()=>[h(Je,null,{default:C(()=>[h(lt,null,{default:C(()=>t[88]||(t[88]=[K("Cadastrar Tipo Montagem")])),_:1})]),_:1}),h(Ra,null,{default:C(()=>[h(n,{modelValue:a.tipoMontagemDescricao,"onUpdate:modelValue":t[39]||(t[39]=x=>a.tipoMontagemDescricao=x),modelModifiers:{trim:!0},class:"row",maxlength:"60",rotulo:"Tipo Montagem"},null,8,["modelValue"])]),_:1}),h(Je,null,{default:C(()=>[h(lt,null,{default:C(()=>[A("div",xOe,[h(ae,{flat:"",color:"tertiary",onClick:t[40]||(t[40]=x=>a.tipoMontagemModal=!1),label:"Cancelar"}),h(ae,{unelevated:"",color:"primary",onClick:i.criarTipoMontagem,label:"Criar"},null,8,["onClick"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),h(Ht,{modelValue:a.modalPupilometro.visivel,"onUpdate:modelValue":t[43]||(t[43]=x=>a.modalPupilometro.visivel=x),maximized:"",onHide:t[44]||(t[44]=x=>i.fecharModalPupilometro())},{default:C(()=>[h(To,{class:"bg-light"},{default:C(()=>[h(m,{ref:"pupilometro",avancar:a.modalPupilometro.avancar,somenteLeitura:a.envelope.somenteLeitura,onFecharModal:t[42]||(t[42]=x=>i.fecharModalPupilometro())},null,8,["avancar","somenteLeitura"])]),_:1})]),_:1},8,["modelValue"]),h(p,{ref:"modalDependente","cpf-cnpj":"","data-nascimento":"","msg-erro":"Ocorreu um erro ao incluir o paciente.","msg-sucesso":"Paciente inclu\xEDdo com sucesso.",titulo:"Incluir Paciente",observacao:""},null,512),h(v,{modelValue:a.modalItem.visivel,"onUpdate:modelValue":t[49]||(t[49]=x=>a.modalItem.visivel=x),filtro:a.modalItem.filtros,filtroAvancado:a.filtroAvancado,onSelecionarItens:i.selecionarItens,onLimparFiltroAvancado:i.limparFiltroAvancado},rh({_:2},[a.filtroAvancado?{name:"camposFiltroAvancado",fn:C(()=>[h(n,{modelValue:a.filtroAvancado.lenteTipo,"onUpdate:modelValue":t[45]||(t[45]=x=>a.filtroAvancado.lenteTipo=x),class:"col-12 col-lg-4",maxlength:"60",rotulo:"Tipo",tipo:"seletor",opcoes:a.filtroAvancado.opcoesTiposLente},null,8,["modelValue","opcoes"]),h(n,{modelValue:a.filtroAvancado.esfericoInicial.lte,"onUpdate:modelValue":t[46]||(t[46]=x=>a.filtroAvancado.esfericoInicial.lte=x),prefix:"<=",rotulo:"Esf\xE9rico Inicial",tipo:"decimal",decimals:"2",dense:""},null,8,["modelValue"]),h(n,{modelValue:a.filtroAvancado.esfericoFinal.gte,"onUpdate:modelValue":t[47]||(t[47]=x=>a.filtroAvancado.esfericoFinal.gte=x),prefix:">=",rotulo:"Esf\xE9rico Final",tipo:"decimal",decimals:"2",dense:""},null,8,["modelValue"]),h(n,{modelValue:a.filtroAvancado.cilindrico.lte,"onUpdate:modelValue":t[48]||(t[48]=x=>a.filtroAvancado.cilindrico.lte=x),prefix:"<=",rotulo:"Cil\xEDndrico",tipo:"decimal",decimals:"2",dense:""},null,8,["modelValue"])]),key:"0"}:void 0]),1032,["modelValue","filtro","filtroAvancado","onSelecionarItens","onLimparFiltroAvancado"]),h(g,{ref:"modalReceita",onAtualizar:i.atualizarReceita},null,8,["onAtualizar"])],64)}var wOe=St(h3e,[["render",COe]]);const EOe={data(){return{campos:{valor:0,idCaixa:"",observacao:""},caixas:[],visivel:!1}},methods:{async abrirCaixa(){await $tryLoading(async()=>{await $db.caixa.abra(this.campos),this.$emit("aberto"),$q.notifyPositive("Caixa aberto com sucesso."),this.visivel=!1},{mensagem:"Abrindo caixa..."})},async atualizar(){const e=(await $db.hibrido.lista({table:"documento",columns:["idCaixa"],where:{tipo:"Caixa"},whereFilter:{status:["Aberto","Reaberto"]}})).map(a=>a.idCaixa),t=await $db.contatoEmpresa.listaCache(),o=(await $db.caixa.listaCache()).filter(a=>a.ativo&&!e.includes(a.id)).filter(a=>{const i=t.filter(n=>n.id===a.idEmpresa);if(i.length)return a.apelidoEmpresa=i[0].apelido,!0});if(!o.length){$q.notify({message:"N\xE3o h\xE1 caixas para abrir.",type:"warning"});return}const r=[];for(const a of o)r.push({value:a.id,label:a.descricao+" "+a.apelidoEmpresa,...a});this.caixas=r,this.campos.idCaixa=this.caixas[0].id,this.visivel=!0},async mostrar(){this.campos={valor:0,idCaixa:"",observacao:""},await this.atualizar()}},emits:["aberto"]},SOe={class:"col-12"},IOe={class:"col-12"},AOe={class:"col-12"},TOe={class:"q-mt-lg text-right"};function DOe(e,t,o,r,a,i){const n=Ve("campo"),s=Ve("row");return B(),oe(Ht,{modelValue:a.visivel,"onUpdate:modelValue":t[3]||(t[3]=l=>a.visivel=l),"content-css":{minWidth:"50vw"}},{default:C(()=>[h(Mt,null,{default:C(()=>[h(Je,{class:"bg-primary text-white"},{default:C(()=>[h(lt,null,{default:C(()=>t[4]||(t[4]=[K("Abertura de Caixa")])),_:1}),Ee(h(ae,{dense:"",flat:"",icon:"close",round:""},null,512),[[st]])]),_:1}),h(Ra,null,{default:C(()=>[h(cl,{onSubmit:i.abrirCaixa},{default:C(()=>[h(s,{class:"q-col-gutter-md"},{default:C(()=>[A("div",SOe,[h(ii,{modelValue:a.campos.idCaixa,"onUpdate:modelValue":t[0]||(t[0]=l=>a.campos.idCaixa=l),label:"Caixa",options:a.caixas,"option-value":"id","option-label":"label","emit-value":"","map-options":""},null,8,["modelValue","options"])]),A("div",IOe,[h(n,{modelValue:a.campos.valor,"onUpdate:modelValue":t[1]||(t[1]=l=>a.campos.valor=l),class:"row",tipo:"decimal",decimals:"2",rotulo:"Valor inicial"},null,8,["modelValue"])]),A("div",AOe,[h(n,{modelValue:a.campos.observacao,"onUpdate:modelValue":t[2]||(t[2]=l=>a.campos.observacao=l),class:"row",tipo:"texto",rotulo:"Observa\xE7\xE3o"},null,8,["modelValue"])])]),_:1}),A("div",TOe,[Ee(h(ae,{color:"tertiary",flat:"",label:"Cancelar"},null,512),[[st]]),h(ae,{color:"primary",class:"q-ml-sm no-shadow",unelevated:"",label:"Abrir",type:"submit"})])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var OOe=St(EOe,[["render",DOe]]),POe={data(){return{condicaoPagamento:[],condicaoPagamentoOriginal:[],condicaoPagamentoResumo:[]}},methods:{async resumeCondicaoPagamento(){const e=await $db.formaPagamento.le(),t=this.condicaoPagamento.filter(r=>this.condicaoPagamentoOriginal.find(a=>a.id===r.id&&(a.valor!==r.valor||a.dataVencimento!==r.dataVencimento))).map(r=>r.id);for(let r of this.condicaoPagamento)t.includes(r.id)&&(r.id=$utils.uuid());let o=this.condicaoPagamento.reduce((r,a)=>{let i=-1,n=e.find(s=>s.id===a.idFormaPagamento)||{};return a.parcelas=1,a.formaPagamento=n.descricao,a.autorizacao&&(i=r.findIndex(s=>a.autorizacao===s.autorizacao&&a.idFormaPagamento===s.idFormaPagamento&&a.idDocumentoCaixa===s.idDocumentoCaixa)),i!==-1?(r[i].parcelas++,n.tipo!==5&&(r[i].valor+=a.valor)):r.push($utils.clonar(a)),r},[]);for(const r of o){const a=e.find(i=>i.id===r.idFormaPagamento);if(r.idFinanceiroTitulo&&a&&a.tipoFinanceiro==="T\xEDtulo em aberto"){let i,n;i=await $erp().financeiroTitulo.get(r.idFinanceiroTitulo),i&&i.idFinanceiroMovimentacaoAgrupamento&&(n=await $db.hibrido.lista({table:"financeiroMovimentacao",where:{idFinanceiroMovimentacaoN:i.idFinanceiroMovimentacaoAgrupamento}}),n=n.find(s=>s.idFinanceiroCheque),n&&(i=await $erp().financeiroTitulo.get(n.idFinanceiroCheque))),i&&i.dataPagamento&&(r.liquidado=!0)}}this.condicaoPagamentoResumo=$lodash.orderBy(o,["idFormaPagamento","dataVencimento"],["","asc"])}}};const FOe="http://localhost:5555/tef",Ky={valorTransacao:"003-000",statusTransacao:"009-000",codigoTransacao:"011-000",nsu:"012-000",codigoAutorizacao:"013-000",parcelas:"018-000",dataTransacao:"022-000",mensagemOperador:"030-000"};async function MOe({documento:e,formaPagamento:t,valor:o,parcelas:r}){var n,s;let a;t.tipo===17&&(a={GetCard:51}),t.tipo===3&&(r===1&&(a={GetCard:10,SiTef:56}),r>1&&(a={GetCard:11,SiTef:56})),t.tipo===4&&(a={GetCard:20,SiTef:32});const i=await Tb("crt",{idLoja:(n=e.numeroDocumentoEmpresa)==null?void 0:n.replace(/\D/g,""),idAutomacao:$utils.sistemaPai()==="b15"?"07660198000189":"09492015000199",valorTransacao:$utils.arredondar(o,2).toLocaleString("pt-BR",{minimumFractionDigits:2}),codigoTransacao:a,parcelas:r,nroDocFiscal:(s=e.numero)!=null?s:e.id.replace(/\D/g,"").slice(-6)});if(i!=null&&i.fileContent){const l=os("mensagemOperador",i.fileContent),u=rA(i.fileContent),c=os("statusTransacao",i.fileContent),d=os("nsu",i.fileContent),f=u.length>0&&c==="0"&&d;return l&&$q.notify({message:l,type:f?"positive":"negative"}),f?{codigoAutorizacao:os("codigoAutorizacao",i.fileContent),nsu:d,tefRetorno:i.fileContent,comprovantes:u,idFormaPagamento:t.id,parcelas:Number(os("parcelas",i.fileContent))||1}:void 0}}async function NOe(e){for(const t of e)await Tb("print",{content:t,opts:{txt:!0}})}function rA(e,t){var i;function o(n,s){var f;const l=[];let u=e!=null?e:"";const c=u.indexOf(n),d=u.indexOf(s);return c!==-1&&d!==-1&&(u=u.substring(c,d-1),u.split(`
`).length>1&&l.push((f=u.replace(/"/g,""))==null?void 0:f.replace(/(\d{3}-\d{3}\s=)(\s\s|\s)?/g,""))),l}const r=(i=t==null?void 0:t.todos)!=null?i:!1,a=[];return a.push(...o("029-001","030-000")),(a.length===0||r)&&(a.push(...o("713-001","714-000")),a.push(...o("715-001","718-000"))),a}function os(e,t){let o=t!=null?t:"";return~o.indexOf(Ky[e])?(o=o.substring(o.indexOf(Ky[e])),o=o.substring(0,o.indexOf(`
`)),o=o.substring(0,o.indexOf("\r")),o=o.replace(`${Ky[e]} = `,""),o):""}async function Tb(e,t){try{const o=new Headers;let r;if($q.loading.show(),o.append("Content-type","application/json; charset=utf-8"),r=await fetch(`${FOe}/${e}`,{method:"POST",mode:"cors",headers:o,body:JSON.stringify(t)}),r=await r.json(),r.error)throw new Error(r.error);return r}catch(o){let r="Falha ao comunicar com o TEF. Verifique se o integrador e o cliente SiTef est\xE3o abertos.";e==="print"&&(r="Verifique se o integrador foi iniciado!"),/^GError:.+/.test(o.message)&&(r=o.message.slice(7)),$q.notify({message:r,type:"negative"})}finally{$q.loading.hide()}}async function kOe({documento:e,condicaoPagamento:t}){const o=os("valorTransacao",t.tefRetorno),r=os("dataTransacao",t.tefRetorno),a=os("nsu",t.tefRetorno);if(o&&r&&a){const i=await Tb("cnc",{tefRetorno:t.tefRetorno}),n=os("mensagemOperador",i.fileContent),s=rA(i.fileContent),l=os("statusTransacao",i.fileContent),u=os("nsu",i.fileContent),c=s.length>0&&l==="0"&&u;if(n&&$q.notify({message:n,type:c?"positive":"negative"}),!c)return;if(c)return{comprovantes:s}}}var wv={adicionarCondicaoPagamento:MOe,extrairCampo:os,extrairComprovantes:rA,imprimirComprovantes:NOe,oper:Tb,removerCondicaoPagamento:kOe};const ROe={components:{CaixaAbrir:OOe},computed:{desabilitadoDataVencimento(){if(this.formaPagamento.tipo===99&&!this.formaPagamento.contaCredito)return!1;const e=this.formaPagamento?this.formaPagamento.tipo:!1,{dataVencimento:t}=this.perfisFormasPagamento;return e?!~t.indexOf(e):!0},perfisFormasPagamento(){return{parcelas:[2,3,4,5,97],dataVencimento:[2,5,97]}},temParcelamento(){if(this.formaPagamento.tipo===99&&!this.formaPagamento.contaCredito)return!0;const e=this.formaPagamento?this.formaPagamento.tipo:!1,{parcelas:t}=this.perfisFormasPagamento;return e?~t.indexOf(e):!1}},data(){return{habilitaFaturamento:!1,faturamento:"",descricaoBanco:"",campos:{agencia:"",autorizacao:"",nomeTitular:"",idBanco:"",idDocumento:"",idDocumentoCondicaoPagamento:"",conta:"",dataVencimento:"",documento:"",idFormaPagamento:"",numeroCheque:"",observacao:"",valor:0,tefRetorno:""},modalPagamento:!1,idFormaPagamentoObservacao:"",parcelas:1,formaPagamento:{},formasPagamento:[],idDocumentoCaixa:"",caixas:[],temCaixaEmpresa:!1,valorRestante:0,checaLimite:!1,creditoDevolucao:0,creditoDisponivel:0,somenteLeitura:{observacaoFaturamento:!1,caixas:!1,formasPagamento:!1,condicaoPagamento:{}},opcoesBanco:[],verificarValor:!1,verificarErroParcelamento:!1,verificarDataVencimento:!1,verificarDadosCartao:!1,visivel:!1,permissaoCaixa:!1,troco:0,rules:{valor:[]}}},methods:{ajustarValorCarnes(){let e;e=this.condicaoPagamento.filter(i=>i.idFormaPagamento===this.campos.idFormaPagamento&&!this.condicaoPagamentoResumo.find(n=>n.id===i.id&&n.liquidado)),e=$lodash.orderBy(e,["dataVencimento"],["asc"]);const t=$utils.arredondar(e.reduce((i,n)=>(n.id===this.campos.id?i+=this.campos.edicao.valor:i+=n.valor,i),0));let o=!1,r=$utils.arredondar(e.reduce((i,n)=>(n.id===this.campos.id&&(o=!0),o||(i+=n.valor),i),this.campos.valor));o=!1,e=e.map(i=>{if(o){let n=this.campos.valor;return $utils.arredondar(r+n)>t&&(n=$utils.arredondar(t-r)),r+=n,{...i,valor:n}}return i.id===this.campos.id&&(o=!0),i});let a=e[e.length-1].valor;a=$utils.arredondar(a+(t-r)),e[e.length-1].valor=a,this.condicaoPagamento=this.condicaoPagamento.map(i=>{const n=e.find(s=>s.id===i.id);return n&&(i.valor=n.valor),i})},ajustarDatasCarnes(){let e=new Date(this.campos.dataVencimento).getMonth(),t=!1;this.condicaoPagamento=$lodash.orderBy(this.condicaoPagamento,["dataVencimento"],["asc"]).map(o=>{if(t&&o.idFormaPagamento===this.campos.idFormaPagamento&&!this.condicaoPagamentoResumo.find(r=>r.id===o.id&&r.liquidado)){let r=new Date(this.campos.dataVencimento).setMonth(++e);return{...o,dataVencimento:Xo.formatDate(r)}}return o.id===this.campos.id&&(t=!0),o})},async adicionarPagamento(){if(this.formasPagamento.some(p=>p.id===this.campos.idFormaPagamento&&p.tipo===17))try{const{permissao:p,autenticado:v}=await $db.fatura.permissaoPagamento("PIX",this.documento.idEmpresa);if(p){let g=`Pagamento via PIX no valor de R$ ${this.$filters.numero(this.campos.valor,2)} autorizado pelo usu\xE1rio`;v?g=g+` ${v.nome} (${v.numeroDocumentoNacional}).`:g=g+` ${$db.usuario.logado.nome} (${$db.usuario.logado.numeroDocumentoNacional}).`,await $db.log.gravar({documentoTipo:"Fatura",documentoId:this.documento.id,mensagem:g})}else return}catch(p){$q.notifyError(p.message);return}this.limparErro(),await this.checarCaixa();const e=$utils.arredondar(this.condicaoPagamento.reduce((p,v)=>p+v.valor,0)),t=$utils.arredondar(this.documento.totalDocumento-e),o=this.formasPagamento.find(p=>p.id===this.campos.idFormaPagamento&&p.tef);let r;if(o){if(this.campos.valor>t){$q.notify({message:"Opera\xE7\xE3o n\xE3o permitida",type:"negative"});return}const p=await wv.adicionarCondicaoPagamento({documento:this.documento,formaPagamento:o,valor:this.campos.valor,parcelas:this.parcelas});if(p)this.campos.autorizacao=p.codigoAutorizacao,this.campos.documento=p.nsu,this.campos.tefRetorno=p.tefRetorno,this.campos.idFormaPagamento=p.idFormaPagamento,r=p.comprovantes,this.parcelas=p.parcelas;else return}const a=this.campos.edicao&&(this.formasPagamento.find(p=>p.id===this.campos.edicao.idFormaPagamento)||{}).tipo===5,i=this.campos.edicao&&(this.formasPagamento.find(p=>p.id===this.campos.edicao.idFormaPagamento)||{}).tipo===97,n=this.campos.edicao&&(this.formasPagamento.find(p=>p.id===this.campos.edicao.idFormaPagamento)||{}).tipo===99&&!(this.formasPagamento.find(p=>p.id===this.campos.edicao.idFormaPagamento)||{}).contaCredito;if(this.campos.edicao&&(a||i||n)){this.campos.dataVencimento!==this.campos.edicao.dataVencimento&&await new Promise((v,g)=>{this.$q.dialog({message:"Deseja ajustar as pr\xF3ximas parcelas para o mesmo dia e meses seguintes?",noRefocus:!0,preventClose:!0,title:"Ajustar vencimentos",cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(()=>{v(),this.ajustarDatasCarnes()}).onCancel(()=>{v()})}),this.campos.valor!==this.campos.edicao.valor&&this.ajustarValorCarnes();const p=this.condicaoPagamento.findIndex(v=>v.id===this.campos.id);p!==-1&&(this.condicaoPagamento[p].dataVencimento=this.campos.dataVencimento,this.condicaoPagamento[p].valor=this.campos.valor,this.condicaoPagamento[p].observacao=this.campos.observacao),await this.resumeCondicaoPagamento(),await this.atualizaValorRestante(),await this.redefinirCampos();return}this.campos.edicao&&(this.campos.edicao.autorizacao?this.condicaoPagamento=this.condicaoPagamento.filter(p=>!(p.autorizacao===this.campos.edicao.autorizacao&&p.idFormaPagamento===this.campos.edicao.idFormaPagamento&&p.idDocumentoCaixa===this.campos.edicao.idDocumentoCaixa)):this.condicaoPagamento=this.condicaoPagamento.filter(p=>p.id!==this.campos.edicao.id)),delete this.campos.edicao;const s=p=>p*24*60*60*1e3,l=$utils.clonar(this.campos);this.documento.totalDocumento<0&&(l.valor=$utils.arredondar(l.valor*-1)),this.troco=0,l.valor>t&&(this.formaPagamento.tipo===1&&(this.troco=$utils.arredondar(l.valor-t),this.$q.notifyPositive("Troco: "+this.$filters.numero(this.troco,2))),l.valor=$utils.arredondar(t));let u=$utils.clonar(this.condicaoPagamento);const{diasPrimeira:c,diasDemais:d}=this.formaPagamento;if(!l.dataVencimento){let p=new Date;const v=this.caixas.reduce((g,x)=>(g[x.id]||(g[x.id]=x),g),{});v[this.idDocumentoCaixa]&&(p=new Date(v[this.idDocumentoCaixa].dataHoraEmissao)),l.dataVencimento=p.getTime()+(c?s(c):0)}const f=(l.valor/this.parcelas*100|0)/100,m=$utils.arredondar(f+(l.valor-f*this.parcelas));for(let p=1;p<=this.parcelas;p++){const v=$utils.clonar(l);v.valor=p===1?m:f;let g=new Date(v.dataVencimento);this.formaPagamento.tipo===5&&(d===30||d===31)?v.dataVencimento=Xo.formatDate(g.setMonth(g.getMonth()+p-1)):v.dataVencimento=Xo.formatDate(g.getTime()+(d?s(d)*(p-1):0)),v.id=$utils.uuid(),v.idDocumento=this.documento.id,v.idDocumentoCondicaoPagamento=v.id,v.idDocumentoCaixa=this.idDocumentoCaixa,u.push(v)}u=$lodash.orderBy(u,["idFormaPagamento","dataVencimento"],["","asc"]),this.condicaoPagamento=u,await this.resumeCondicaoPagamento(),await this.atualizaValorRestante(),await this.redefinirCampos(),o&&(this.$emit("executar","salvarFatura"),await wv.imprimirComprovantes(r))},aoSelecionarFormaPagamento(){const e=this.formasPagamento.find(o=>o.id===this.campos.idFormaPagamento);let t=1;e!=null&&e.tef&&(t=0),this.formaPagamento=e,this.parcelas=t,this.campos.dataVencimento=""},async aoSelecionarFormaPagamentoObservacao(){var o;const t=(this.formasPagamento.find(r=>r.id===this.idFormaPagamentoObservacao)||{}).descricao;t&&((o=this.documento)!=null&&o.observacaoFaturamento?this.documento.observacaoFaturamento=t+" | "+this.documento.observacaoFaturamento:this.documento.observacaoFaturamento=t),this.idFormaPagamentoObservacao=""},async alterarPagamento(e){if(this.campos=$utils.clonar(e),this.campos.idBanco){const t=await $erp()._banco.get(this.campos.idBanco);t&&(this.descricaoBanco=`${t.descricao||""} - ${t.numero||""}`)}this.documento.totalDocumento<0&&(this.campos.valor=$utils.arredondar(this.campos.valor*-1)),this.campos.edicao=$utils.clonar(e),this.parcelas=this.campos.parcelas,this.formaPagamento=this.formasPagamento.filter(t=>t.id===e.idFormaPagamento)[0],this.modalPagamento=!0},async atualizar(){const e=await $db.contato.le({id:this.documento.idContato});this.creditoDevolucao=$utils.arredondar(e.creditoDevolucao);let t=await $db.formaPagamento.le();if(t=t.map(o=>{let r=!!o.ativo;return(this.documento.totalDocumento<0&&!(o.tipo===99&&o.contaCredito)||this.documento.totalDocumento>=0&&this.saldoCreditoCliente<=0&&o.tipo===99&&o.contaCredito||this.documento.totalDocumento<o.valorMinimoVenda)&&(r=!1),o.idContatoEmpresa&&o.idContatoEmpresa!==this.documento.idEmpresa&&(r=!1),{rotulo:o.descricao,valor:o.id,visivel:r,...o}}),this.formasPagamento=$lodash.orderBy(t,"rotulo","asc"),this.checaLimite=!!this.formasPagamento.find(o=>o.utilizaLimite),this.checaLimite&&(this.creditoDisponivel=$utils.arredondar(e.creditoDisponivel)),this.temCaixaEmpresa=!!(await $erp().caixa.where({idEmpresa:this.documento.idEmpresa}).toArray()).filter(o=>o.ativo).length,this.idDocumentoCaixa="",this.temCaixaEmpresa){let o;$db.usuario.logado.cpf&&(o=(await $db.contato.ler({filtros:{termoBusca:$db.usuario.logado.cpf}})).data.find(i=>{var n,s;return((n=i.numeroDocumentoNacional)==null?void 0:n.replace(/\D/g,""))===((s=$db.usuario.logado.cpf)==null?void 0:s.replace(/\D/g,""))}));try{this.permissaoCaixa=await $db.permissao.objeto("caixa/empresas"),await $db.permissao.objeto("Diretiva_Caixa_LivreUtilizacao")&&(o=null)}catch{this.$q.notify("N\xE3o foi poss\xEDvel recuperar informa\xE7\xF5es de permiss\xE3o.")}let r=(await $db.caixa.le({aberto:!0})).filter(a=>a.idEmpresa===this.documento.idEmpresa);if(this.documento.tipo!=="Venda"&&(r=r.filter(a=>!o||a.idContato===(o==null?void 0:o.id))),r.length){for(const a of r)a.rotulo=((await $db.caixa.le({id:a.idCaixa})||{}).descricao||"")+" - Aberto em "+this.$filters.dataHora(a.dataHoraEmissao)+(a.status==="Reaberto"?" - Reaberto":""),a.valor=a.id;this.caixas=$lodash.orderBy(r,"dataHoraEmissao","desc")}this.idDocumentoCaixa=(this.caixas[0]||{}).valor||""}await this.resumeCondicaoPagamento(),await this.atualizaValorRestante(),this.preencherSomenteLeitura(),await this.redefinirCampos(),this.habilitarFaturamento(),this.visivel=this.temCaixaEmpresa&&this.idDocumentoCaixa||!this.temCaixaEmpresa},async habilitarFaturamento(){if(this.documento.tipo==="Fatura"&&(this.habilitaFaturamento=!0),this.documento.idEmpresa&&this.documento.tipo==="Venda"){let e=await $db.configuracoes.le({nome:"vendas.gerafatura"}),t=e.find(r=>r.idEmpresa===this.documento.idEmpresa);t||(t=e.find(r=>!r.idEmpresa));const o=t?parseInt(t.valor):0;this.habilitaFaturamento=[0,2].includes(o)}},configRules(){this.rules={valor:[()=>{if(!this.verificarValor)return!0;if(this.campos.valor<=0)return"Valor n\xE3o permitido";if(this.formaPagamento.tipo===99&&this.formaPagamento.contaCredito&&this.documento.totalDocumento>0){let e;if(e=this.condicaoPagamentoResumo.reduce((t,o)=>(this.formaPagamento.id===o.idFormaPagamento&&!o.sinal&&(t+=o.valor),t),this.campos.valor),e=$utils.arredondar(e),e>this.creditoDevolucao)return"Cr\xE9dito de devolu\xE7\xE3o dispon\xEDvel: "+this.$filters.numero(this.creditoDevolucao,2)}if(this.formaPagamento.utilizaLimite&&this.documento.totalDocumento>0&&$utils.arredondar(this.$lodash.get(this.campos,"valor",0))>$utils.arredondar(this.$lodash.get(this.campos,"edicao.valor",0))){let e=0;for(const t of this.condicaoPagamentoResumo)(this.formasPagamento.find(r=>r.id===t.idFormaPagamento)||{}).utilizaLimite&&(e+=t.valor);if($utils.arredondar(e+this.campos.valor)>this.creditoDisponivel)return"Limite restante de cr\xE9dito dispon\xEDvel: "+this.$filters.numero(this.creditoDisponivel-e,2)}return!0}],parcelamento:[()=>{if(!this.verificarErroParcelamento)return!0;if(this.temParcelamento){if(!this.parcelas)return"Preenchimento obrigat\xF3rio";const e=this.formaPagamento.parcelamentoMinimo||1,t=this.formaPagamento.parcelamentoMaximo||1;if(this.parcelas<e)return"M\xEDnimo permitido: "+e;if(this.parcelas>t)return"M\xE1ximo permitido: "+t}return!0}],dataVencimento:[()=>{if(!this.verificarDataVencimento)return!0;let e=new Date(new Date().toDateString()),t="Data vencimento n\xE3o pode ser menor que a data de hoje.";const o=this.caixas.reduce((r,a)=>(r[a.id]||(r[a.id]=a),r),{});return o[this.idDocumentoCaixa]&&(e=new Date(new Date(o[this.idDocumentoCaixa].dataHoraEmissao).toDateString()),t="Data vencimento n\xE3o pode ser menor que a data do caixa."),this.campos.dataVencimento&&new Date(new Date(this.campos.dataVencimento).toDateString())<e?t:!0}],autorizacaoCartao:[()=>this.verificarDadosCartao?this.campos.autorizacao?!0:"Campo Obrigat\xF3rio":!0],documentoCartao:[()=>this.verificarDadosCartao?this.campos.documento?!0:"Campo Obrigat\xF3rio":!0]}},async temErro(){let e=!1;return this.verificarErroParcelamento=!0,this.verificarDataVencimento=!0,this.verificarValor=!0,await this.$nextTick(),this.$refs.formAdicionarPagamento.getValidationComponents().forEach(t=>{!t.validate()&&!e&&(e=!0)}),this.$refs.formEditarPagamento&&this.$refs.formEditarPagamento.getValidationComponents().forEach(t=>{!t.validate()&&!e&&(e=!0)}),e},limparErro(){this.verificarErroParcelamento=!1,this.verificarDataVencimento=!1,this.verificarValor=!1,this.verificarDadosCartao=!1},async aoAdicionarPagamento(){if(this.descricaoBanco="",this.campos.agencia="",this.campos.autorizacao="",this.campos.documento="",this.campos.nomeTitular=$db.contato.selecionado.nome,this.campos.idBanco="",this.campos.conta="",this.campos.numeroCheque="",this.campos.observacao="",await this.temErro())return;const e=this.formasPagamento.find(o=>o.id===this.campos.idFormaPagamento);[2,3,4].includes(e==null?void 0:e.tipo)&&!(e!=null&&e.tef)?this.modalPagamento=!0:this.adicionarPagamento()},aoCancelarModalPagamento(e){e&&e.preventDefault(),this.campos.idDocumentoCondicaoPagamento&&this.redefinirCampos(),this.modalPagamento=!1},async aoSalvarModalPagamento(){if([3,4].includes(this.formaPagamento.tipo)){let e=await $db.configuracoes.porNome("pagamento.cartao.dadosobrigatorios",this.documento.idEmpresa);if(this.verificarDadosCartao=!!(e.length&&parseInt(e[0].valor)),this.erroPreenchimentoAutorizacaoCartao||this.erroPreenchimentoDocumentoCartao)return}await this.temErro()||(this.adicionarPagamento(),this.modalPagamento=!1,this.verificarDataVencimento=!1,this.verificarValor=!1,this.verificarDadosCartao=!1)},async atualizaValorRestante(){const e=this.condicaoPagamento.reduce((t,{valor:o})=>t+o,0);this.valorRestante=Math.abs($utils.arredondar(this.documento.totalDocumento-e))},selecionarBanco(e){this.descricaoBanco=e.label,this.campos.idBanco=e.value},filtrarBancos(e,t){setTimeout(()=>{t(async()=>{if(await this.leOpcoesBanco(),e!==""){const o=$utils.removerAcentos(e.toLowerCase()).split(" ");this.opcoesBanco=this.opcoesBanco.filter(r=>{const a=$utils.removerAcentos(r.label.toLowerCase());for(const i of o)if(!(a.indexOf(i)>-1))return!1;return!0})}})},500)},async leOpcoesBanco(){this.opcoesBanco.length||(this.opcoesBanco=(await $db.banco.le()).map(e=>({label:`${e.descricao} - ${e.numero}`,value:e.id})))},preencherSomenteLeitura(){const e={};e.observacaoFaturamento=!1,e.caixas=!1,e.formasPagamento=!1,e.condicaoPagamento={};const t=this.caixas.reduce((o,r)=>(r.status==="Reaberto"&&!o[r.id]&&(o[r.id]=r),o),{});for(const o of this.condicaoPagamentoResumo)!!o.tefRetorno&&this.documento.status!=="Aberta"&&(e.condicaoPagamento[o.id]=!0),o.idDocumentoCaixa&&o.idDocumentoCaixa!==this.idDocumentoCaixa&&(e.condicaoPagamento[o.id]=!0),t[o.idDocumentoCaixa]&&(e.observacaoFaturamento=!1,e.caixas=!1,e.formasPagamento=!1);this.somenteLeitura=e},redefinirCampos(){this.parcelas=1,this.descricaoBanco="",this.campos={agencia:"",autorizacao:"",nomeTitular:"",idBanco:"",idDocumentoCondicaoPagamento:"",conta:"",dataVencimento:"",documento:"",idFormaPagamento:"",numeroCheque:"",observacao:"",valor:this.valorRestante}},async removerPagamento(e,t=!0){const o=this.formasPagamento.find(n=>n.id===e.idFormaPagamento);if(e.tefRetorno){const n=await wv.removerCondicaoPagamento({documento:this.documento,condicaoPagamento:e});if(n!=null&&n.comprovantes){const s=this.condicaoPagamento.filter(l=>l.idFormaPagamento===e.idFormaPagamento&&l.autorizacao===e.autorizacao&&l.documento===e.documento&&l.tefRetorno===e.tefRetorno);for(const l of s)await $db.documentoCondicaoPagamento.remover(l.id);this.condicaoPagamento=this.condicaoPagamento.filter(l=>!s.map(u=>u.id).includes(l.id)),await this.resumeCondicaoPagamento(),await this.atualizaValorRestante(),await this.redefinirCampos(),this.$emit("executar","salvarFatura"),await wv.imprimirComprovantes(n.comprovantes)}return}const r=o.tipo===5,a=o.tipo===97,i=o.tipo===99&&!o.contaCredito;if((r||a||i)&&this.condicaoPagamento.filter(n=>n.idFormaPagamento===o.id).length>1&&!this.condicaoPagamentoResumo.find(n=>n.idFormaPagamento===e.idFormaPagamento&&n.liquidado))try{if(t){let n="";r&&(n="Deseja remover todos os carn\xEAs?"),a&&(n="Deseja remover todos os conv\xEAnios?"),i&&(n="Deseja remover todos os boletos?"),await new Promise((s,l)=>{this.$q.dialog({message:n,title:"Tem certeza?",cancel:{label:"N\xC3O",push:!0,color:"tertiary",flat:!0},ok:{label:"SIM",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{s()}).onCancel(()=>{l()})})}this.condicaoPagamento=this.condicaoPagamento.filter(n=>n.idFormaPagamento!==o.id),await this.resumeCondicaoPagamento(),await this.atualizaValorRestante(),await this.redefinirCampos();return}catch{}try{t&&await new Promise((n,s)=>{$q.dialog({message:"Ao continuar voc\xEA ir\xE1 remover este item",title:"Tem certeza?",cancel:{label:"CANCELAR",push:!0,color:"tertiary",flat:!0},ok:{label:"CONTINUAR",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{n()}).onCancel(()=>{s()})}),this.troco=0,e.autorizacao?this.condicaoPagamento=this.condicaoPagamento.filter(n=>!(n.autorizacao===e.autorizacao&&n.idFormaPagamento===e.idFormaPagamento&&n.idDocumentoCaixa===e.idDocumentoCaixa)):((r||i)&&(this.campos.id=e.id,this.campos.idFormaPagamento=e.idFormaPagamento,this.campos.valor=0),this.condicaoPagamento=this.condicaoPagamento.filter(n=>n.id!==e.id)),await this.resumeCondicaoPagamento(),await this.atualizaValorRestante(),await this.redefinirCampos()}catch{}},calcularParcelas(){let e="",t=1,o=1,r={};const a=$lodash.orderBy(this.condicaoPagamento,["idFormaPagamento","autorizacao","dataVencimento"]);for(const i of a){const n=i.idFormaPagamento+(String(i.autorizacao)||"");if(e===n){r[i.id]=String(t++)+"/"+String(o);continue}e=n,t=1,o=a.reduce((s,l)=>s+(l.idFormaPagamento+(String(l.autorizacao)||"")===e?1:0),0),r[i.id]=String(t++)+"/"+String(o)}return r},async checarCaixa(){let e,t,o,r;if(!!this.idDocumentoCaixa&&(e=this.caixas.filter(a=>a.valor===this.idDocumentoCaixa),(!e.length||!e[0].dataHoraEmissao)&&(t="N\xE3o \xE9 poss\xEDvel verificar a data de abertura do caixa."),t||(o=new Date().setHours(0,0,0,0),r=new Date(e[0].dataHoraEmissao).setHours(0,0,0,0),e[0].status!=="Reaberto"&&r<o&&(t="N\xE3o \xE9 poss\xEDvel incluir forma de pagamento de caixa com data diferente de hoje.")),t))throw $q.notify({message:t,type:"negative"}),new Error(t)},async validar(){var e;try{const t=await $db.contato.le({id:this.documento.idContato});$utils.verificarExcecao(!t.id,"N\xE3o foi poss\xEDvel encontrar o contato do documento.");const o=$utils.arredondar(this.condicaoPagamento.reduce((p,v)=>p+v.valor,0)),r=$utils.arredondar(this.documento.totalDocumento);$utils.verificarExcecao(!$utils.isNumber(o),"Valor inv\xE1lido na condi\xE7\xE3o de pagamento."),$utils.verificarExcecao(!$utils.isNumber(r),"Valor inv\xE1lido no total do documento.");const i=(await $erp().formaPagamento.toArray()).filter(p=>!p.tef&&p.ativo).map(p=>p.id),n=this.condicaoPagamento.find(p=>p.tefRetorno&&i.includes(p.idFormaPagamento));$utils.verificarErro(!!n,"Erro na transa\xE7\xE3o TEF.");const s=this.condicaoPagamentoOriginal.map(p=>p.id),l=this.condicaoPagamento.filter(p=>!s.includes(p.id));let u;for(const p of l){let v;if(p.idDocumentoCaixa?(v=await $db.hibrido.le({table:"documento",id:p.idDocumentoCaixa}),u=new Date(v.dataHoraEmissao).setHours(0,0,0,0)):(v={},u=new Date().setHours(0,0,0,0)),new Date(new Date(p.dataVencimento).setHours(0,0,0,0))<u){const b="Existe condi\xE7\xE3o de pagamento com data anterior \xE0 "+(v.dataHoraEmissao?"data de abertura do caixa":"data de hoje");$utils.verificarErro(!0,b)}const x=v.id&&this.documento.idEmpresa!==v.idEmpresa;$utils.verificarErro(x,"Condi\xE7\xE3o de pagamento incorreta: caixa e documento pertencem a empresas diferentes.")}let c=r&&!o;$utils.verificarErro(c,"N\xE3o h\xE1 condi\xE7\xE3o de pagamento."),c=r>=0&&o>r,$utils.verificarErro(c,"O total das condi\xE7\xF5es de pagamento \xE9 maior que o total do documento.");const d=await $db.caixa.leNew({idEmpresa:this.documento.idEmpresa});if($utils.verificarErro(d.filter(p=>p.ativo).length&&!this.idDocumentoCaixa,"Selecione um caixa para continuar."),this.checaLimite){const p=$utils.arredondar(t.creditoDisponivel);let v;for(const g of this.condicaoPagamentoResumo){const x=this.formasPagamento.find(b=>b.id===g.idFormaPagamento);x!=null&&x.utilizaLimite&&(v||(v=0),v+=g.valor||0)}$utils.verificarErro(v&&$utils.isNumber(p)&&p<$utils.arredondar(v),"Limite de cr\xE9dito insuficiente.")}const f=this.formasPagamento.filter(p=>p.tipo===99&&p.contaCredito).map(p=>p.id),m=this.condicaoPagamento.find(p=>f.includes(p.idFormaPagamento)&&!p.sinal);if(r>0&&m){let p;const v=$utils.arredondar(t.creditoDevolucao);p=this.condicaoPagamento.filter(g=>~f.indexOf(g.idFormaPagamento)&&!g.sinal),p=p.reduce((g,x)=>g+x.valor,0),p=$utils.arredondar(p),$utils.verificarErro($utils.isNumber(v)&&v<p,"Cr\xE9dito de devolu\xE7\xE3o insuficiente.")}if(o&&o<r){const p=(await $db.configuracoes.le({nome:"fatura.sinal.percentualminimo"}))[0]||{},v=Number((e=p==null?void 0:p.valor)==null?void 0:e.replace(",","."));if(await $db.fatura.checaPagamentoMinimo(v,o,r,"percentualMinimo")){const x=this.$q.loading.isActive;this.$q.loading.hide(),await new Promise((b,_)=>{this.$q.dialog({message:`O total das condi\xE7\xF5es de pagamento \xE9 menor que o valor minimo para sinal (${v}%). Deseja aprovar esse pagamento?`,noRefocus:!0,preventClose:!0,title:"Confirma?",cancel:{label:"n\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"aprovar",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(async()=>{try{const{permissao:w,autenticado:S}=await $db.fatura.permissaoPagamento("Sinal");if(w){let D=`Autorizada a venda com sinal abaixo de ${v}% pelo usu\xE1rio`;S?D=D+` ${S.nome} (${S.numeroDocumentoNacional}).`:D=D+` ${$db.usuario.logado.nome} (${$db.usuario.logado.numeroDocumentoNacional}).`,await $db.log.gravar({documentoTipo:"Fatura",documentoId:this.documento.id,mensagem:D}),await b()}}catch(w){$q.notifyError(w.message);return}}).onCancel(()=>{_()})}),x&&this.$q.loading.show({message:"Processando..."})}else{const x=this.$q.loading.isActive;this.$q.loading.hide(),await new Promise((b,_)=>{this.$q.dialog({message:"O total das condi\xE7\xF5es de pagamento \xE9 menor que o total do documento. Deseja finalizar como sinal?",noRefocus:!0,preventClose:!0,title:"Confirma?",cancel:{label:"n\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"sim",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(()=>{b()}).onCancel(()=>{_()})}),x&&this.$q.loading.show({message:"Processando..."})}}}catch(t){throw this.$q.loading.hide(),t}},observacaoAutorizacao(e){e&&(this.formaPagamento.tipo===3&&(this.campos.observacao=`${this.campos.observacao} - Cart\xE3o de Cr\xE9dito (Autoriza\xE7\xE3o ${e})`),this.formaPagamento.tipo===4&&(this.campos.observacao=`${this.campos.observacao} - Cart\xE3o de D\xE9bito (Autoriza\xE7\xE3o ${e})`))}},mixins:[POe],props:{documento:{default:()=>({}),required:!0,type:Object}},watch:{"documento.totalDocumento"(){this.documento.id&&this.atualizar()},documento(){this.documento.id&&(this.idDocumento!==this.documento.id&&(this.idDocumento=this.documento.id),this.atualizar())},idDocumentoCaixa(){this.preencherSomenteLeitura()}},created(){this.configRules()},mounted(){this.visivel=!1}},VOe={id:"Faturamento"},BOe={class:"text-body2"},qOe={class:"text-body2"},LOe={class:"text-body2"},$Oe={class:"text-body2"},UOe={key:2,class:"col-12"};function zOe(e,t,o,r,a,i){const n=Ve("g-label"),s=Ve("g-col"),l=Ve("campo"),u=Ve("g-row"),c=Ve("badge"),d=Ve("CaixaAbrir");return B(),be("div",VOe,[a.visivel?(B(),oe(u,{key:0,gutter:"sm"},{default:C(()=>[h(s,{col:"12"},{default:C(()=>[h(n,{icon:"credit_card sm tertiary left",text:"sub2 medium"},{default:C(()=>t[20]||(t[20]=[K("Faturar")])),_:1}),h(No)]),_:1}),a.habilitaFaturamento?ie("",!0):(B(),oe(s,{key:0,col:"12 md4"},{default:C(()=>[h(l,{opcoes:a.formasPagamento.filter(f=>f.visivel),modelValue:a.idFormaPagamentoObservacao,"onUpdate:modelValue":[t[0]||(t[0]=f=>a.idFormaPagamentoObservacao=f),i.aoSelecionarFormaPagamentoObservacao],rotulo:"Forma de pagamento",tipo:"seletor"},null,8,["opcoes","modelValue","onUpdate:modelValue"])]),_:1})),h(s,{col:a.habilitaFaturamento?"12":"md8"},{default:C(()=>[h(l,{modelValue:o.documento.observacaoFaturamento,"onUpdate:modelValue":t[1]||(t[1]=f=>o.documento.observacaoFaturamento=f),rotulo:"Observa\xE7\xE3o faturamento","somente-leitura":a.somenteLeitura.observacaoFaturamento,tipo:"textoArea"},null,8,["modelValue","somente-leitura"])]),_:1},8,["col"]),h(s,{col:"12"},{default:C(()=>[a.temCaixaEmpresa&&!a.somenteLeitura.caixas&&a.habilitaFaturamento?(B(),oe(l,{key:0,modelValue:a.idDocumentoCaixa,"onUpdate:modelValue":t[2]||(t[2]=f=>a.idDocumentoCaixa=f),opcoes:a.caixas,tipo:"seletor"},null,8,["modelValue","opcoes"])):ie("",!0)]),_:1})]),_:1})):ie("",!0),!a.visivel&&a.permissaoCaixa?(B(),oe(u,{key:1,gutter:"sm"},{default:C(()=>[h(s,{col:"12"},{default:C(()=>[h(ae,{onClick:t[3]||(t[3]=f=>e.$refs.modalCaixaAbrir.mostrar()),stack:"",outline:"",color:"primary",class:"full-width"},{default:C(()=>[h(Pe,{name:"lock_open",size:"sm",class:"q-my-sm"}),t[21]||(t[21]=K(" Abrir caixa "))]),_:1})]),_:1})]),_:1})):ie("",!0),h(cl,{ref:"formAdicionarPagamento"},{default:C(()=>[a.visivel&&!a.somenteLeitura.formasPagamento&&a.habilitaFaturamento?(B(),oe(u,{key:0,gutter:"sm",items:"center"},{default:C(()=>[h(s,{col:"12 md4"},{default:C(()=>[h(l,{modelValue:a.campos.idFormaPagamento,"onUpdate:modelValue":[t[4]||(t[4]=f=>a.campos.idFormaPagamento=f),i.aoSelecionarFormaPagamento],opcoes:a.formasPagamento.filter(f=>f.visivel),tipo:"seletor",rotulo:"Forma de pagamento",class:"q-field--with-bottom"},null,8,["modelValue","onUpdate:modelValue","opcoes"])]),_:1}),h(s,{col:"12 md"},{default:C(()=>[h(l,{modelValue:a.campos.valor,"onUpdate:modelValue":t[5]||(t[5]=f=>a.campos.valor=f),rules:a.rules.valor,rotulo:"Valor",tipo:"decimal",decimals:"2"},null,8,["modelValue","rules"])]),_:1}),i.temParcelamento?(B(),oe(s,{key:0,col:"12 md"},{default:C(()=>[h(l,{modelValue:a.parcelas,"onUpdate:modelValue":t[6]||(t[6]=f=>a.parcelas=f),rules:a.rules.parcelamento,"rotulo-fixo":"Parcelas",tipo:"decimal",zerosDireita:"0"},null,8,["modelValue","rules"])]),_:1})):ie("",!0),i.desabilitadoDataVencimento?ie("",!0):(B(),oe(s,{key:1,col:"12 md"},{default:C(()=>[h(l,{modelValue:a.campos.dataVencimento,"onUpdate:modelValue":t[7]||(t[7]=f=>a.campos.dataVencimento=f),rules:a.rules.dataVencimento,tipo:"data",rotulo:"Data"},null,8,["modelValue","rules"])]),_:1})),h(s,{col:"12 md-auto",text:"center"},{default:C(()=>[h(ae,{onClick:i.aoAdicionarPagamento,disabled:!a.campos.idFormaPagamento,outline:"",label:"Forma de pagamento",icon:"add",size:"sm",color:"positive",class:"q-mt-xs q-mb-md"},null,8,["onClick","disabled"])]),_:1})]),_:1})):ie("",!0)]),_:1},512),e.condicaoPagamentoResumo.length?(B(),oe(u,{key:2,gutter:"sm"},{default:C(()=>[h(s,{col:"12"},{default:C(()=>[h(At,null,{default:C(()=>[(B(!0),be(Qe,null,qt(e.condicaoPagamentoResumo,(f,m)=>(B(),be("div",{key:m},[h(qe,{dense:"","manual-focus":"",class:"q-pa-none items-center"},{default:C(()=>[h(fe,{class:"col-md col-lg col-xl no-margin"},{default:C(()=>[h(Re,{lines:"2"},{default:C(()=>[K(le(f.formaPagamento),1)]),_:2},1024),h(Re,{caption:"",class:"hideondesktop"},{default:C(()=>[h(Pe,{name:"mdi-calendar-today"}),K(" "+le(e.$filters.data(f.dataVencimento)),1)]),_:2},1024),h(Re,{class:"hideondesktop"},{default:C(()=>[K(le(e.$filters.numero(f.valor,2))+le(f.parcelas>1?` (em ${f.parcelas}x)`:"")+" ",1),f.sinal?(B(),oe(c,{key:0,cor:"positive",escuro:""},{default:C(()=>t[22]||(t[22]=[K("Sinal")])),_:1})):ie("",!0)]),_:2},1024)]),_:2},1024),h(fe,{class:"hideonmobile maxw240 q-pl-sm no-margin"},{default:C(()=>[h(Re,null,{default:C(()=>[K(le(e.$filters.numero(f.valor,2))+le(f.parcelas>1?` (em ${f.parcelas}x)`:"")+" ",1),f.sinal?(B(),oe(c,{key:0,cor:"positive",escuro:""},{default:C(()=>t[23]||(t[23]=[K("Sinal")])),_:1})):ie("",!0)]),_:2},1024)]),_:2},1024),h(fe,{class:"hideonmobile maxw240 q-pl-sm no-margin"},{default:C(()=>[h(Re,null,{default:C(()=>[h(Pe,{name:"mdi-calendar-today"}),K(" "+le(e.$filters.data(f.dataVencimento)),1)]),_:2},1024)]),_:2},1024),!f.tefRetorno&&!f.liquidado&&!a.somenteLeitura.condicaoPagamento[f.id]?(B(),oe(fe,{key:0,class:"col-auto no-margin"},{default:C(()=>[h(qe,{class:"q-pa-none"},{default:C(()=>[h(fe,{class:"no-margin",style:{"max-width":"32px"}},{default:C(()=>[h(ae,{onClick:p=>i.removerPagamento(f),round:"",flat:"",dense:"",icon:"delete",size:"md",color:"tertiary"},null,8,["onClick"])]),_:2},1024),h(fe,{class:"no-margin",style:{"max-width":"32px"}},{default:C(()=>[h(ae,{onClick:p=>i.alterarPagamento(f),round:"",flat:"",dense:"",icon:"edit",size:"md",color:"primary"},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)):ie("",!0),f.tefRetorno?(B(),oe(fe,{key:1,class:"col-auto no-margin"},{default:C(()=>[h(qe,{class:"q-pa-none"},{default:C(()=>[a.formasPagamento.some(p=>p.id===f.idFormaPagamento&&p.tef)?ie("",!0):(B(),oe(fe,{key:0,class:"no-margin",style:{"max-width":"32px"}},{default:C(()=>[h(ae,{icon:"info",color:"negative",dense:"",flat:"",round:""},{default:C(()=>[h(Ft,{anchor:"bottom middle",self:"center middle"},{default:C(()=>t[24]||(t[24]=[K(" Forma de pagamento deve ser configurada para TEF nas configura\xE7\xF5es de forma de pagamento, d\xFAvidas acione o suporte. ")])),_:1})]),_:1})]),_:1})),h(fe,{class:"no-margin",style:{"max-width":"32px"}},{default:C(()=>[h(ae,{onClick:p=>i.alterarPagamento(f),flat:"",round:"",dense:"",icon:"mdi-eye",color:"primary"},null,8,["onClick"])]),_:2},1024),a.somenteLeitura.condicaoPagamento[f.id]?ie("",!0):(B(),oe(fe,{key:1,class:"no-margin",style:{"max-width":"32px"}},{default:C(()=>[h(ae,{onClick:p=>i.removerPagamento(f),flat:"",round:"",dense:"",color:"tertiary",icon:"delete"},{default:C(()=>[h(Ft,{anchor:"bottom middle",self:"center middle"},{default:C(()=>t[25]||(t[25]=[K(" Cancelar transa\xE7\xE3o TEF ")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024))]),_:2},1024)]),_:2},1024)):ie("",!0)]),_:2},1024),h(No)]))),128))]),_:1})]),_:1})]),_:1})):ie("",!0),h(u,{gutter:"sm",text:"center caption uppercase"},{default:C(()=>[a.habilitaFaturamento&&a.valorRestante>0?(B(),oe(s,{key:0,col:"12"},{default:C(()=>[t[26]||(t[26]=A("strong",{class:"q-mr-md"},"Valor restante",-1)),A("span",BOe,le(e.$filters.numero(a.valorRestante,2)),1)]),_:1})):ie("",!0),a.habilitaFaturamento&&a.troco>0?(B(),oe(s,{key:1,col:"12"},{default:C(()=>[t[27]||(t[27]=A("strong",{class:"q-mr-md"},"Troco",-1)),A("span",qOe,le(e.$filters.numero(a.troco,2)),1)]),_:1})):ie("",!0),a.creditoDevolucao?(B(),oe(s,{key:2,col:"12"},{default:C(()=>[t[28]||(t[28]=A("strong",{class:"q-mr-md"},"Cr\xE9dito de devolu\xE7\xE3o",-1)),t[29]||(t[29]=K()),A("span",LOe,le(e.$filters.numero(a.creditoDevolucao,2)),1)]),_:1})):ie("",!0),a.checaLimite?(B(),oe(s,{key:3,col:"12"},{default:C(()=>[t[30]||(t[30]=A("strong",{class:"q-mr-md"},"Limite de cr\xE9dito",-1)),t[31]||(t[31]=K()),A("span",$Oe,le(e.$filters.numero(a.creditoDisponivel,2)),1)]),_:1})):ie("",!0)]),_:1}),a.formaPagamento?(B(),oe(Ht,{key:3,modelValue:a.modalPagamento,"onUpdate:modelValue":t[19]||(t[19]=f=>a.modalPagamento=f)},{default:C(()=>[h(To,{container:"",view:"hHh LpR fFf",class:"bg-white rounded-borders",style:{height:"100%","max-height":"500px"}},{default:C(()=>[h(cl,{ref:"formEditarPagamento",spellcheck:"false",novalidate:"",autocorrect:"off",autocapitalize:"off",autocomplete:"off"},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,null,{default:C(()=>[h(lt,null,{default:C(()=>[h(Pe,{name:"money",size:"sm",class:"q-mr-sm"}),K(" "+le(a.formaPagamento.rotulo),1)]),_:1}),Ee(h(ae,{dense:"",flat:"",icon:"close",round:""},null,512),[[st]])]),_:1})]),_:1}),h(Jo,null,{default:C(()=>[h(dn,null,{default:C(()=>[h(u,{gutter:"md",items:"center"},{default:C(()=>[a.formaPagamento.tipo===2?(B(),be(Qe,{key:0},[h(s,{col:"12"},{default:C(()=>[h(l,{modelValue:a.campos.nomeTitular,"onUpdate:modelValue":t[8]||(t[8]=f=>a.campos.nomeTitular=f),filled:"",rotulo:"Titular",maxlength:"255",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1}),h(s,{col:"12"},{default:C(()=>[h(ii,{onFilter:i.filtrarBancos,"onUpdate:modelValue":i.selecionarBanco,"model-value":a.descricaoBanco,options:a.opcoesBanco,dense:"","use-input":"","hide-selected":"","fill-input":"",filled:"","input-debounce":"0",label:"Banco"},{"no-option":C(()=>[h(qe,null,{default:C(()=>[h(fe,{class:"text-grey"},{default:C(()=>t[32]||(t[32]=[K(" Resultado n\xE3o encontrado ")])),_:1})]),_:1})]),_:1},8,["onFilter","onUpdate:modelValue","model-value","options"])]),_:1}),h(s,{col:"12"},{default:C(()=>[h(l,{modelValue:a.campos.agencia,"onUpdate:modelValue":t[9]||(t[9]=f=>a.campos.agencia=f),filled:"",rotulo:"Ag\xEAncia",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1}),h(s,{col:"12"},{default:C(()=>[h(l,{modelValue:a.campos.conta,"onUpdate:modelValue":t[10]||(t[10]=f=>a.campos.conta=f),filled:"",rotulo:"Conta",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1}),h(s,{col:"12"},{default:C(()=>[h(l,{modelValue:a.campos.numeroCheque,"onUpdate:modelValue":t[11]||(t[11]=f=>a.campos.numeroCheque=f),filled:"",tipo:"decimal",zerosDireita:"0",decimals:"0",rotulo:"N\xFAmero do cheque",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1})],64)):ie("",!0),[3,4].includes(a.formaPagamento.tipo)?(B(),be(Qe,{key:1},[h(s,{col:"12"},{default:C(()=>[h(l,{modelValue:a.campos.autorizacao,"onUpdate:modelValue":t[12]||(t[12]=f=>a.campos.autorizacao=f),modelModifiers:{trim:!0},"somente-leitura":!!a.campos.tefRetorno,rules:a.rules.autorizacaoCartao,onBlur:t[13]||(t[13]=f=>i.observacaoAutorizacao(a.campos.autorizacao)),filled:"",rotulo:"Autoriza\xE7\xE3o Cart\xE3o",class:"q-field--with-bottom"},null,8,["modelValue","somente-leitura","rules"])]),_:1}),h(s,{col:"12"},{default:C(()=>[h(l,{modelValue:a.campos.documento,"onUpdate:modelValue":t[14]||(t[14]=f=>a.campos.documento=f),modelModifiers:{trim:!0},rules:a.rules.documentoCartao,"somente-leitura":!!a.campos.tefRetorno,filled:"",rotulo:"N\xFAmero Documento",class:"q-field--with-bottom"},null,8,["modelValue","rules","somente-leitura"])]),_:1})],64)):ie("",!0),[2,5,97].includes(a.formaPagamento.tipo)||a.formaPagamento.tipo===99&&!a.formaPagamento.contaCredito?(B(),be("div",UOe,[h(l,{modelValue:a.campos.dataVencimento,"onUpdate:modelValue":t[15]||(t[15]=f=>a.campos.dataVencimento=f),rules:a.rules.dataVencimento,filled:"",rotulo:"Data",tipo:"data",class:"q-field--with-bottom"},null,8,["modelValue","rules"])])):ie("",!0),h(s,{col:"12"},{default:C(()=>[h(l,{modelValue:a.campos.valor,"onUpdate:modelValue":t[16]||(t[16]=f=>a.campos.valor=f),"somente-leitura":!!a.campos.tefRetorno,rules:a.rules.valor,filled:"",tipo:"decimal",decimals:"2",rotulo:"Valor",class:"q-field--with-bottom"},null,8,["modelValue","somente-leitura","rules"])]),_:1}),h(s,{col:"12"},{default:C(()=>[h(l,{modelValue:a.campos.observacao,"onUpdate:modelValue":t[17]||(t[17]=f=>a.campos.observacao=f),"somente-leitura":!!a.campos.tefRetorno,filled:"",tipo:"textoArea",rotulo:"Observa\xE7\xE3o",class:"q-field--with-bottom"},null,8,["modelValue","somente-leitura"])]),_:1}),a.campos.tefRetorno?(B(),oe(s,{key:3,col:"12"},{default:C(()=>[h(l,{modelValue:a.campos.tefRetorno,"onUpdate:modelValue":t[18]||(t[18]=f=>a.campos.tefRetorno=f),"somente-leitura":"",filled:"",tipo:"textoArea",rotulo:"TEF Retorno",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1})):ie("",!0)]),_:1})]),_:1})]),_:1}),a.campos.tefRetorno?ie("",!0):(B(),oe(Ui,{key:0,class:"bg-white text-right border-top q-pa-sm"},{default:C(()=>[h(ae,{onClick:i.aoCancelarModalPagamento,flat:"",label:"Cancelar",color:"tertiary"},null,8,["onClick"]),h(ae,{onClick:i.aoSalvarModalPagamento,unelevated:"",label:"Salvar",color:"primary",class:"q-ml-xs"},null,8,["onClick"])]),_:1}))]),_:1},512)]),_:1})]),_:1},8,["modelValue"])):ie("",!0),h(d,{onAberto:i.atualizar,ref:"modalCaixaAbrir"},null,8,["onAberto"])])}var UR=St(ROe,[["render",zOe]]),Ec=Ct({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:t}){const o=xt(),r=j(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return G("td",{class:r.value},uo(t.default));const a=o.vnode.key,i=(e.props.colsMap!==void 0?e.props.colsMap[a]:null)||e.props.col;if(i===void 0)return;const{row:n}=e.props;return G("td",{class:r.value+i.__tdClass(n),style:i.__tdStyle(n)},uo(t.default))}}}),TP=Ct({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:t}){const o=j(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>G("tr",{class:o.value},uo(t.default))}}),HOe=Ct({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:t,emit:o}){const r=xt(),{proxy:{$q:a}}=r,i=n=>{o("click",n)};return()=>{if(e.props===void 0)return G("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:i},uo(t.default));let n,s;const l=r.vnode.key;if(l){if(n=e.props.colsMap[l],n===void 0)return}else n=e.props.col;if(n.sortable===!0){const c=n.align==="right"?"unshift":"push";s=oE(t.default,[]),s[c](G(Pe,{class:n.__iconClass,name:a.iconSet.table.arrowUp}))}else s=uo(t.default);const u={class:n.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:n.headerStyle,onClick:c=>{n.sortable===!0&&e.props.sort(n),i(c)}};return G("th",u,s)}}});const jOe=["horizontal","vertical","cell","none"];var GOe=Ct({name:"QMarkupTable",props:{...ya,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>jOe.includes(e)}},setup(e,{slots:t}){const o=xt(),r=xa(e,o.proxy.$q),a=j(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(r.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>G("div",{class:a.value},[G("table",{class:"q-table"},uo(t.default))])}});function zR(e,t){return G("div",e,[G("table",{class:"q-table"},t)])}const WOe={list:At,table:GOe},QOe=["list","table","__qtable"];var HR=Ct({name:"QVirtualScroll",props:{...iw,type:{type:String,default:"list",validator:e=>QOe.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:D_},setup(e,{slots:t,attrs:o}){let r;const a=Ue(null),i=j(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:n,localResetVirtualScroll:s,padVirtualScroll:l,onVirtualScrollEvt:u}=vR({virtualScrollLength:i,getVirtualScrollTarget:p,getVirtualScrollEl:m}),c=j(()=>{if(i.value===0)return[];const b=(_,w)=>({index:n.value.from+w,item:_});return e.itemsFn===void 0?e.items.slice(n.value.from,n.value.to).map(b):e.itemsFn(n.value.from,n.value.to-n.value.from).map(b)}),d=j(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),f=j(()=>e.scrollTarget!==void 0?{}:{tabindex:0});ct(i,()=>{s()}),ct(()=>e.scrollTarget,()=>{g(),v()});function m(){return a.value.$el||a.value}function p(){return r}function v(){r=O_(m(),e.scrollTarget),r.addEventListener("scroll",u,er.passive)}function g(){r!==void 0&&(r.removeEventListener("scroll",u,er.passive),r=void 0)}function x(){let b=l(e.type==="list"?"div":"tbody",c.value.map(t.default));return t.before!==void 0&&(b=t.before().concat(b)),Mr(t.after,b)}return Mm(()=>{s()}),Va(()=>{v()}),ac(()=>{v()}),Bs(()=>{g()}),Vo(()=>{g()}),()=>{if(t.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?zR({ref:a,class:"q-table__middle "+d.value},x()):G(WOe[e.type],{...o,ref:a,class:[o.class,d.value],...f.value},x)}}});const XOe={xs:2,sm:4,md:6,lg:10,xl:14};function DP(e,t,o){return{transform:t===!0?`translateX(${o.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}var jR=Ct({name:"QLinearProgress",props:{...ya,...Wd,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:t}){const{proxy:o}=xt(),r=xa(e,o.$q),a=Qd(e,XOe),i=j(()=>e.indeterminate===!0||e.query===!0),n=j(()=>e.reverse!==e.query),s=j(()=>({...a.value!==null?a.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),l=j(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),u=j(()=>DP(e.buffer!==void 0?e.buffer:1,n.value,o.$q)),c=j(()=>`with${e.instantFeedback===!0?"out":""}-transition`),d=j(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${c.value} q-linear-progress__track--${r.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),f=j(()=>DP(i.value===!0?1:e.value,n.value,o.$q)),m=j(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${c.value} q-linear-progress__model--${i.value===!0?"in":""}determinate`),p=j(()=>({width:`${e.value*100}%`})),v=j(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${c.value}`);return()=>{const g=[G("div",{class:d.value,style:u.value}),G("div",{class:m.value,style:f.value})];return e.stripe===!0&&i.value===!1&&g.push(G("div",{class:v.value,style:p.value})),G("div",{class:l.value,style:s.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},Mr(t.default,g))}}});let k0=0;const GR={fullscreen:Boolean,noRouteFullscreenExit:Boolean},WR=["update:fullscreen","fullscreen"];function QR(){const e=xt(),{props:t,emit:o,proxy:r}=e;let a,i,n;const s=Ue(!1);LE(e)===!0&&ct(()=>r.$route.fullPath,()=>{t.noRouteFullscreenExit!==!0&&c()}),ct(()=>t.fullscreen,d=>{s.value!==d&&l()}),ct(s,d=>{o("update:fullscreen",d),o("fullscreen",d)});function l(){s.value===!0?c():u()}function u(){s.value!==!0&&(s.value=!0,n=r.$el.parentNode,n.replaceChild(i,r.$el),document.body.appendChild(r.$el),k0++,k0===1&&document.body.classList.add("q-body--fullscreen-mixin"),a={handler:c},wp.add(a))}function c(){s.value===!0&&(a!==void 0&&(wp.remove(a),a=void 0),n.replaceChild(r.$el,i),s.value=!1,k0=Math.max(0,k0-1),k0===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),r.$el.scrollIntoView!==void 0&&setTimeout(()=>{r.$el.scrollIntoView()})))}return Mm(()=>{i=document.createElement("span")}),Va(()=>{t.fullscreen===!0&&u()}),Vo(c),Object.assign(r,{toggleFullscreen:l,setFullscreen:u,exitFullscreen:c}),{inFullscreen:s,toggleFullscreen:l}}function KOe(e,t){return new Date(e)-new Date(t)}const YOe={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function JOe(e,t,o,r){const a=j(()=>{const{sortBy:s}=t.value;return s&&o.value.find(l=>l.name===s)||null}),i=j(()=>e.sortMethod!==void 0?e.sortMethod:(s,l,u)=>{const c=o.value.find(m=>m.name===l);if(c===void 0||c.field===void 0)return s;const d=u===!0?-1:1,f=typeof c.field=="function"?m=>c.field(m):m=>m[c.field];return s.sort((m,p)=>{let v=f(m),g=f(p);return c.rawSort!==void 0?c.rawSort(v,g,m,p)*d:v==null?-1*d:g==null?1*d:c.sort!==void 0?c.sort(v,g,m,p)*d:Ep(v)===!0&&Ep(g)===!0?(v-g)*d:bg(v)===!0&&bg(g)===!0?KOe(v,g)*d:typeof v=="boolean"&&typeof g=="boolean"?(v-g)*d:([v,g]=[v,g].map(x=>(x+"").toLocaleString().toLowerCase()),v<g?-1*d:v===g?0:d)})});function n(s){let l=e.columnSortOrder;if(ei(s)===!0)s.sortOrder&&(l=s.sortOrder),s=s.name;else{const d=o.value.find(f=>f.name===s);d!==void 0&&d.sortOrder&&(l=d.sortOrder)}let{sortBy:u,descending:c}=t.value;u!==s?(u=s,c=l==="da"):e.binaryStateSort===!0?c=!c:c===!0?l==="ad"?u=null:c=!1:l==="ad"?c=!0:u=null,r({sortBy:u,descending:c,page:1})}return{columnToSort:a,computedSortMethod:i,sort:n}}const ZOe={filter:[String,Object],filterMethod:Function};function ePe(e,t){const o=j(()=>e.filterMethod!==void 0?e.filterMethod:(r,a,i,n)=>{const s=a?a.toLowerCase():"";return r.filter(l=>i.some(u=>{const c=n(u,l)+"";return(c==="undefined"||c==="null"?"":c.toLowerCase()).indexOf(s)!==-1}))});return ct(()=>e.filter,()=>{Ao(()=>{t({page:1},!0)})},{deep:!0}),{computedFilterMethod:o}}function tPe(e,t){for(const o in t)if(t[o]!==e[o])return!1;return!0}function OP(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const oPe={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function aPe(e,t){const{props:o,emit:r}=e,a=Ue(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:o.rowsPerPageOptions.length!==0?o.rowsPerPageOptions[0]:5},o.pagination)),i=j(()=>{const c=o["onUpdate:pagination"]!==void 0?{...a.value,...o.pagination}:a.value;return OP(c)}),n=j(()=>i.value.rowsNumber!==void 0);function s(c){l({pagination:c,filter:o.filter})}function l(c={}){Ao(()=>{r("request",{pagination:c.pagination||i.value,filter:c.filter||o.filter,getCellValue:t})})}function u(c,d){const f=OP({...i.value,...c});if(tPe(i.value,f)===!0){n.value===!0&&d===!0&&s(f);return}if(n.value===!0){s(f);return}o.pagination!==void 0&&o["onUpdate:pagination"]!==void 0?r("update:pagination",f):a.value=f}return{innerPagination:a,computedPagination:i,isServerSide:n,requestServerInteraction:l,setPagination:u}}function rPe(e,t,o,r,a,i){const{props:n,emit:s,proxy:{$q:l}}=e,u=j(()=>r.value===!0?o.value.rowsNumber||0:i.value),c=j(()=>{const{page:w,rowsPerPage:S}=o.value;return(w-1)*S}),d=j(()=>{const{page:w,rowsPerPage:S}=o.value;return w*S}),f=j(()=>o.value.page===1),m=j(()=>o.value.rowsPerPage===0?1:Math.max(1,Math.ceil(u.value/o.value.rowsPerPage))),p=j(()=>d.value===0?!0:o.value.page>=m.value),v=j(()=>(n.rowsPerPageOptions.includes(t.value.rowsPerPage)?n.rowsPerPageOptions:[t.value.rowsPerPage].concat(n.rowsPerPageOptions)).map(S=>({label:S===0?l.lang.table.allRows:""+S,value:S})));ct(m,(w,S)=>{if(w===S)return;const D=o.value.page;w&&!D?a({page:1}):w<D&&a({page:w})});function g(){a({page:1})}function x(){const{page:w}=o.value;w>1&&a({page:w-1})}function b(){const{page:w,rowsPerPage:S}=o.value;d.value>0&&w*S<u.value&&a({page:w+1})}function _(){a({page:m.value})}return n["onUpdate:pagination"]!==void 0&&s("update:pagination",{...o.value}),{firstRowIndex:c,lastRowIndex:d,isFirstPage:f,isLastPage:p,pagesNumber:m,computedRowsPerPageOptions:v,computedRowsNumber:u,firstPage:g,prevPage:x,nextPage:b,lastPage:_}}const iPe={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},nPe=["update:selected","selection"];function sPe(e,t,o,r){const a=j(()=>{const p={};return e.selected.map(r.value).forEach(v=>{p[v]=!0}),p}),i=j(()=>e.selection!=="none"),n=j(()=>e.selection==="single"),s=j(()=>e.selection==="multiple"),l=j(()=>o.value.length!==0&&o.value.every(p=>a.value[r.value(p)]===!0)),u=j(()=>l.value!==!0&&o.value.some(p=>a.value[r.value(p)]===!0)),c=j(()=>e.selected.length);function d(p){return a.value[p]===!0}function f(){t("update:selected",[])}function m(p,v,g,x){t("selection",{rows:v,added:g,keys:p,evt:x});const b=n.value===!0?g===!0?v:[]:g===!0?e.selected.concat(v):e.selected.filter(_=>p.includes(r.value(_))===!1);t("update:selected",b)}return{hasSelectionMode:i,singleSelection:n,multipleSelection:s,allRowsSelected:l,someRowsSelected:u,rowsSelectedNumber:c,isRowSelected:d,clearSelection:f,updateSelection:m}}function PP(e){return Array.isArray(e)?e.slice():[]}const lPe={expanded:Array},cPe=["update:expanded"];function uPe(e,t){const o=Ue(PP(e.expanded));ct(()=>e.expanded,n=>{o.value=PP(n)});function r(n){return o.value.includes(n)}function a(n){e.expanded!==void 0?t("update:expanded",n):o.value=n}function i(n,s){const l=o.value.slice(),u=l.indexOf(n);s===!0?u===-1&&(l.push(n),a(l)):u!==-1&&(l.splice(u,1),a(l))}return{isRowExpanded:r,setExpanded:a,updateExpanded:i}}const dPe={visibleColumns:Array};function fPe(e,t,o){const r=j(()=>{if(e.columns!==void 0)return e.columns;const s=e.rows[0];return s!==void 0?Object.keys(s).map(l=>({name:l,label:l.toUpperCase(),field:l,align:Ep(s[l])?"right":"left",sortable:!0})):[]}),a=j(()=>{const{sortBy:s,descending:l}=t.value;return(e.visibleColumns!==void 0?r.value.filter(c=>c.required===!0||e.visibleColumns.includes(c.name)===!0):r.value).map(c=>{const d=c.align||"right",f=`text-${d}`;return{...c,align:d,__iconClass:`q-table__sort-icon q-table__sort-icon--${d}`,__thClass:f+(c.headerClasses!==void 0?" "+c.headerClasses:"")+(c.sortable===!0?" sortable":"")+(c.name===s?` sorted ${l===!0?"sort-desc":""}`:""),__tdStyle:c.style!==void 0?typeof c.style!="function"?()=>c.style:c.style:()=>null,__tdClass:c.classes!==void 0?typeof c.classes!="function"?()=>f+" "+c.classes:m=>f+" "+c.classes(m):()=>f}})}),i=j(()=>{const s={};return a.value.forEach(l=>{s[l.name]=l}),s}),n=j(()=>e.tableColspan!==void 0?e.tableColspan:a.value.length+(o.value===!0?1:0));return{colList:r,computedCols:a,computedColsMap:i,computedColspan:n}}const Ev="q-table__bottom row items-center",XR={};hR.forEach(e=>{XR[e]={}});var sw=Ct({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},...XR,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...ya,...GR,...dPe,...ZOe,...oPe,...lPe,...iPe,...YOe},emits:["request","virtualScroll",...WR,...cPe,...nPe],setup(e,{slots:t,emit:o}){const r=xt(),{proxy:{$q:a}}=r,i=xa(e,a),{inFullscreen:n,toggleFullscreen:s}=QR(),l=j(()=>typeof e.rowKey=="function"?e.rowKey:Xe=>Xe[e.rowKey]),u=Ue(null),c=Ue(null),d=j(()=>e.grid!==!0&&e.virtualScroll===!0),f=j(()=>" q-table__card"+(i.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),m=j(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":f.value)+(i.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(n.value===!0?" fullscreen scroll":"")),p=j(()=>m.value+(e.loading===!0?" q-table--loading":""));ct(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+m.value,()=>{d.value===!0&&c.value!==null&&c.value.reset()});const{innerPagination:v,computedPagination:g,isServerSide:x,requestServerInteraction:b,setPagination:_}=aPe(r,He),{computedFilterMethod:w}=ePe(e,_),{isRowExpanded:S,setExpanded:D,updateExpanded:M}=uPe(e,o),O=j(()=>{let Xe=e.rows;if(x.value===!0||Xe.length===0)return Xe;const{sortBy:It,descending:Qt}=g.value;return e.filter&&(Xe=w.value(Xe,e.filter,W.value,He)),ve.value!==null&&(Xe=ke.value(e.rows===Xe?Xe.slice():Xe,It,Qt)),Xe}),T=j(()=>O.value.length),I=j(()=>{let Xe=O.value;if(x.value===!0)return Xe;const{rowsPerPage:It}=g.value;return It!==0&&(he.value===0&&e.rows!==Xe?Xe.length>De.value&&(Xe=Xe.slice(0,De.value)):Xe=Xe.slice(he.value,De.value)),Xe}),{hasSelectionMode:N,singleSelection:P,multipleSelection:F,allRowsSelected:L,someRowsSelected:z,rowsSelectedNumber:H,isRowSelected:X,clearSelection:Y,updateSelection:de}=sPe(e,o,I,l),{colList:ye,computedCols:W,computedColsMap:re,computedColspan:_e}=fPe(e,g,N),{columnToSort:ve,computedSortMethod:ke,sort:Ie}=JOe(e,g,ye,_),{firstRowIndex:he,lastRowIndex:De,isFirstPage:Te,isLastPage:J,pagesNumber:q,computedRowsPerPageOptions:ne,computedRowsNumber:U,firstPage:Z,prevPage:Ce,nextPage:Q,lastPage:V}=rPe(r,v,g,x,_,T),R=j(()=>I.value.length===0),ee=j(()=>{const Xe={};return hR.forEach(It=>{Xe[It]=e[It]}),Xe.virtualScrollItemSize===void 0&&(Xe.virtualScrollItemSize=e.dense===!0?28:48),Xe});function ce(){d.value===!0&&c.value.reset()}function se(){if(e.grid===!0)return qn();const Xe=e.hideHeader!==!0?Rt:null;if(d.value===!0){const Qt=t["top-row"],Zt=t["bottom-row"],ro={default:la=>Ge(la.item,t.body,la.index)};if(Qt!==void 0){const la=G("tbody",Qt({cols:W.value}));ro.before=Xe===null?()=>la:()=>[Xe()].concat(la)}else Xe!==null&&(ro.before=Xe);return Zt!==void 0&&(ro.after=()=>G("tbody",Zt({cols:W.value}))),G(HR,{ref:c,class:e.tableClass,style:e.tableStyle,...ee.value,scrollTarget:e.virtualScrollTarget,items:I.value,type:"__qtable",tableColspan:_e.value,onVirtualScroll:we},ro)}const It=[Ze()];return Xe!==null&&It.unshift(Xe()),zR({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},It)}function pe(Xe,It){if(c.value!==null){c.value.scrollTo(Xe,It);return}Xe=parseInt(Xe,10);const Qt=u.value.querySelector(`tbody tr:nth-of-type(${Xe+1})`);if(Qt!==null){const Zt=u.value.querySelector(".q-table__middle.scroll"),ro=Qt.offsetTop-e.virtualScrollStickySizeStart,la=ro<Zt.scrollTop?"decrease":"increase";Zt.scrollTop=ro,o("virtualScroll",{index:Xe,from:0,to:v.value.rowsPerPage-1,direction:la})}}function we(Xe){o("virtualScroll",Xe)}function Ne(){return[G(jR,{class:"q-table__linear-progress",color:e.color,dark:i.value,indeterminate:!0,trackColor:"transparent"})]}function Ge(Xe,It,Qt){const Zt=l.value(Xe),ro=X(Zt);if(It!==void 0)return It(ot({key:Zt,row:Xe,pageIndex:Qt,__trClass:ro?"selected":""}));const la=t["body-cell"],xe=W.value.map(je=>{const pt=t[`body-cell-${je.name}`],ht=pt!==void 0?pt:la;return ht!==void 0?ht(Pt({key:Zt,row:Xe,pageIndex:Qt,col:je})):G("td",{class:je.__tdClass(Xe),style:je.__tdStyle(Xe)},He(je,Xe))});if(N.value===!0){const je=t["body-selection"],pt=je!==void 0?je($t({key:Zt,row:Xe,pageIndex:Qt})):[G(hm,{modelValue:ro,color:e.color,dark:i.value,dense:e.dense,"onUpdate:modelValue":(ht,Oo)=>{de([Zt],[Xe],ht,Oo)}})];xe.unshift(G("td",{class:"q-table--col-auto-width"},pt))}const Me={key:Zt,class:{selected:ro}};return e.onRowClick!==void 0&&(Me.class["cursor-pointer"]=!0,Me.onClick=je=>{o("rowClick",je,Xe,Qt)}),e.onRowDblclick!==void 0&&(Me.class["cursor-pointer"]=!0,Me.onDblclick=je=>{o("rowDblclick",je,Xe,Qt)}),e.onRowContextmenu!==void 0&&(Me.class["cursor-pointer"]=!0,Me.onContextmenu=je=>{o("rowContextmenu",je,Xe,Qt)}),G("tr",Me,xe)}function Ze(){const Xe=t.body,It=t["top-row"],Qt=t["bottom-row"];let Zt=I.value.map((ro,la)=>Ge(ro,Xe,la));return It!==void 0&&(Zt=It({cols:W.value}).concat(Zt)),Qt!==void 0&&(Zt=Zt.concat(Qt({cols:W.value}))),G("tbody",Zt)}function ot(Xe){return fo(Xe),Xe.cols=Xe.cols.map(It=>an({...It},"value",()=>He(It,Xe.row))),Xe}function Pt(Xe){return fo(Xe),an(Xe,"value",()=>He(Xe.col,Xe.row)),Xe}function $t(Xe){return fo(Xe),Xe}function fo(Xe){Object.assign(Xe,{cols:W.value,colsMap:re.value,sort:Ie,rowIndex:he.value+Xe.pageIndex,color:e.color,dark:i.value,dense:e.dense}),N.value===!0&&an(Xe,"selected",()=>X(Xe.key),(It,Qt)=>{de([Xe.key],[Xe.row],It,Qt)}),an(Xe,"expand",()=>S(Xe.key),It=>{M(Xe.key,It)})}function He(Xe,It){const Qt=typeof Xe.field=="function"?Xe.field(It):It[Xe.field];return Xe.format!==void 0?Xe.format(Qt,It):Qt}const tt=j(()=>({pagination:g.value,pagesNumber:q.value,isFirstPage:Te.value,isLastPage:J.value,firstPage:Z,prevPage:Ce,nextPage:Q,lastPage:V,inFullscreen:n.value,toggleFullscreen:s}));function $e(){const Xe=t.top,It=t["top-left"],Qt=t["top-right"],Zt=t["top-selection"],ro=N.value===!0&&Zt!==void 0&&H.value>0,la="q-table__top relative-position row items-center";if(Xe!==void 0)return G("div",{class:la},[Xe(tt.value)]);let xe;if(ro===!0?xe=Zt(tt.value).slice():(xe=[],It!==void 0?xe.push(G("div",{class:"q-table__control"},[It(tt.value)])):e.title&&xe.push(G("div",{class:"q-table__control"},[G("div",{class:["q-table__title",e.titleClass]},e.title)]))),Qt!==void 0&&(xe.push(G("div",{class:"q-table__separator col"})),xe.push(G("div",{class:"q-table__control"},[Qt(tt.value)]))),xe.length!==0)return G("div",{class:la},xe)}const dt=j(()=>z.value===!0?null:L.value);function Rt(){const Xe=Ut();return e.loading===!0&&t.loading===void 0&&Xe.push(G("tr",{class:"q-table__progress"},[G("th",{class:"relative-position",colspan:_e.value},Ne())])),G("thead",Xe)}function Ut(){const Xe=t.header,It=t["header-cell"];if(Xe!==void 0)return Xe(gt({header:!0})).slice();const Qt=W.value.map(Zt=>{const ro=t[`header-cell-${Zt.name}`],la=ro!==void 0?ro:It,xe=gt({col:Zt});return la!==void 0?la(xe):G(HOe,{key:Zt.name,props:xe},()=>Zt.label)});if(P.value===!0&&e.grid!==!0)Qt.unshift(G("th",{class:"q-table--col-auto-width"}," "));else if(F.value===!0){const Zt=t["header-selection"],ro=Zt!==void 0?Zt(gt({})):[G(hm,{color:e.color,modelValue:dt.value,dark:i.value,dense:e.dense,"onUpdate:modelValue":po})];Qt.unshift(G("th",{class:"q-table--col-auto-width"},ro))}return[G("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},Qt)]}function gt(Xe){return Object.assign(Xe,{cols:W.value,sort:Ie,colsMap:re.value,color:e.color,dark:i.value,dense:e.dense}),F.value===!0&&an(Xe,"selected",()=>dt.value,po),Xe}function po(Xe){z.value===!0&&(Xe=!1),de(I.value.map(l.value),I.value,Xe)}const Ea=j(()=>{const Xe=[e.iconFirstPage||a.iconSet.table.firstPage,e.iconPrevPage||a.iconSet.table.prevPage,e.iconNextPage||a.iconSet.table.nextPage,e.iconLastPage||a.iconSet.table.lastPage];return a.lang.rtl===!0?Xe.reverse():Xe});function pr(){if(e.hideBottom===!0)return;if(R.value===!0){if(e.hideNoData===!0)return;const Qt=e.loading===!0?e.loadingLabel||a.lang.table.loading:e.filter?e.noResultsLabel||a.lang.table.noResults:e.noDataLabel||a.lang.table.noData,Zt=t["no-data"],ro=Zt!==void 0?[Zt({message:Qt,icon:a.iconSet.table.warning,filter:e.filter})]:[G(Pe,{class:"q-table__bottom-nodata-icon",name:a.iconSet.table.warning}),Qt];return G("div",{class:Ev+" q-table__bottom--nodata"},ro)}const Xe=t.bottom;if(Xe!==void 0)return G("div",{class:Ev},[Xe(tt.value)]);const It=e.hideSelectedBanner!==!0&&N.value===!0&&H.value>0?[G("div",{class:"q-table__control"},[G("div",[(e.selectedRowsLabel||a.lang.table.selectedRecords)(H.value)])])]:[];if(e.hidePagination!==!0)return G("div",{class:Ev+" justify-end"},ni(It));if(It.length!==0)return G("div",{class:Ev},It)}function zi(Xe){_({page:1,rowsPerPage:Xe.value})}function ni(Xe){let It;const{rowsPerPage:Qt}=g.value,Zt=e.paginationLabel||a.lang.table.pagination,ro=t.pagination,la=e.rowsPerPageOptions.length>1;if(Xe.push(G("div",{class:"q-table__separator col"})),la===!0&&Xe.push(G("div",{class:"q-table__control"},[G("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||a.lang.table.recordsPerPage]),G(ii,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:Qt,options:ne.value,displayValue:Qt===0?a.lang.table.allRows:Qt,dark:i.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":zi})])),ro!==void 0)It=ro(tt.value);else if(It=[G("span",Qt!==0?{class:"q-table__bottom-item"}:{},[Qt?Zt(he.value+1,Math.min(De.value,U.value),U.value):Zt(1,T.value,U.value)])],Qt!==0&&q.value>1){const xe={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(xe.size="sm"),q.value>2&&It.push(G(ae,{key:"pgFirst",...xe,icon:Ea.value[0],disable:Te.value,onClick:Z})),It.push(G(ae,{key:"pgPrev",...xe,icon:Ea.value[1],disable:Te.value,onClick:Ce}),G(ae,{key:"pgNext",...xe,icon:Ea.value[2],disable:J.value,onClick:Q})),q.value>2&&It.push(G(ae,{key:"pgLast",...xe,icon:Ea.value[3],disable:J.value,onClick:V}))}return Xe.push(G("div",{class:"q-table__control"},It)),Xe}function ps(){const Xe=e.gridHeader===!0?[G("table",{class:"q-table"},[Rt()])]:e.loading===!0&&t.loading===void 0?Ne():void 0;return G("div",{class:"q-table__middle"},Xe)}function qn(){const Xe=t.item!==void 0?t.item:It=>{const Qt=It.cols.map(ro=>G("div",{class:"q-table__grid-item-row"},[G("div",{class:"q-table__grid-item-title"},[ro.label]),G("div",{class:"q-table__grid-item-value"},[ro.value])]));if(N.value===!0){const ro=t["body-selection"],la=ro!==void 0?ro(It):[G(hm,{modelValue:It.selected,color:e.color,dark:i.value,dense:e.dense,"onUpdate:modelValue":(xe,Me)=>{de([It.key],[It.row],xe,Me)}})];Qt.unshift(G("div",{class:"q-table__grid-item-row"},la),G(No,{dark:i.value}))}const Zt={class:["q-table__grid-item-card"+f.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(Zt.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(Zt.onClick=ro=>{o("RowClick",ro,It.row,It.pageIndex)}),e.onRowDblclick!==void 0&&(Zt.onDblclick=ro=>{o("RowDblclick",ro,It.row,It.pageIndex)})),G("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(It.selected===!0?" q-table__grid-item--selected":"")},[G("div",Zt,Qt)])};return G("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},I.value.map((It,Qt)=>Xe(ot({key:l.value(It),row:It,pageIndex:Qt}))))}return Object.assign(r.proxy,{requestServerInteraction:b,setPagination:_,firstPage:Z,prevPage:Ce,nextPage:Q,lastPage:V,isRowSelected:X,clearSelection:Y,isRowExpanded:S,setExpanded:D,sort:Ie,resetVirtualScroll:ce,scrollTo:pe,getCellValue:He}),SG(r.proxy,{filteredSortedRows:()=>O.value,computedRows:()=>I.value,computedRowsNumber:()=>U.value}),()=>{const Xe=[$e()],It={ref:u,class:p.value};return e.grid===!0?Xe.push(ps()):Object.assign(It,{class:[It.class,e.cardClass],style:e.cardStyle}),Xe.push(se(),pr()),e.loading===!0&&t.loading!==void 0&&Xe.push(t.loading()),G("div",It,Xe)}}}),FP=[{cest:"01.001.00",ncmsh:"38151210;38151290",descricao:"Catalisadores em colmeia cer\xE2mica ou met\xE1lica para convers\xE3o catal\xEDtica de gases de escape de ve\xEDculos e outros catalisadores"},{cest:"01.002.00",ncmsh:"3917",descricao:"Tubos e seus acess\xF3rios (por exemplo, juntas, cotovelos, flanges, uni\xF5es), de pl\xE1sticos"},{cest:"01.003.00",ncmsh:"39181000",descricao:"Protetores de ca\xE7amba"},{cest:"01.004.00",ncmsh:"39233000",descricao:"Reservat\xF3rios de \xF3leo"},{cest:"01.005.00",ncmsh:"39263000",descricao:"Frisos, decalques, molduras e acabamentos"},{cest:"01.006.00",ncmsh:"40103;59100000",descricao:"Correias de transmiss\xE3o de borracha vulcanizada, de mat\xE9rias t\xEAxteis, mesmo impregnadas, revestidas ou recobertas, de pl\xE1stico, ou estratificadas com pl\xE1stico ou refor\xE7adas com metal ou com outras mat\xE9rias"},{cest:"01.007.00",ncmsh:"40169300;4823909",descricao:"Juntas, gaxetas e outros elementos com fun\xE7\xE3o semelhante de veda\xE7\xE3o"},{cest:"01.008.00",ncmsh:"40161010",descricao:"Partes de ve\xEDculos autom\xF3veis, tratores e m\xE1quinas autopropulsadas"},{cest:"01.009.00",ncmsh:"40169990;57050000",descricao:"Tapetes, revestimentos, mesmo confeccionados, batentes, buchas e coxins"},{cest:"01.010.00",ncmsh:"59039000",descricao:"Tecidos impregnados, revestidos, recobertos ou estratificados, com pl\xE1stico"},{cest:"01.011.00",ncmsh:"59090000",descricao:"Mangueiras e tubos semelhantes, de mat\xE9rias t\xEAxteis, mesmo com refor\xE7o ou acess\xF3rios de outras mat\xE9rias"},{cest:"01.012.00",ncmsh:"63061",descricao:"Encerados e toldos"},{cest:"01.013.00",ncmsh:"65061000",descricao:"Capacetes e artefatos de uso semelhante, de prote\xE7\xE3o, para uso em motocicletas, inclu\xEDdos ciclomotores"},{cest:"01.014.00",ncmsh:"6813",descricao:"Guarni\xE7\xF5es de fric\xE7\xE3o (por exemplo, placas, rolos, tiras, segmentos, discos, an\xE9is, pastilhas), n\xE3o montadas, para freios, embreagens ou qualquer outro mecanismo de fric\xE7\xE3o, \xE0 base de amianto, de outras subst\xE2ncias minerais ou de celulose, mesmo combinadas com t\xEAxteis ou outras mat\xE9rias"},{cest:"01.015.00",ncmsh:"70071100;70072100",descricao:"Vidros de dimens\xF5es e formatos que permitam aplica\xE7\xE3o automotiva"},{cest:"01.016.00",ncmsh:"70091000",descricao:"Espelhos retrovisores"},{cest:"01.017.00",ncmsh:"70140000",descricao:"Lentes de far\xF3is, lanternas e outros utens\xEDlios"},{cest:"01.018.00",ncmsh:"73110000",descricao:"Cilindro de a\xE7o para GNV (g\xE1s natural veicular)"},{cest:"01.019.00",ncmsh:"73110000",descricao:"Recipientes para gases comprimidos ou liquefeitos, de ferro fundido, ferro ou a\xE7o, exceto o descrito no item 18.0"},{cest:"01.020.00",ncmsh:"7320",descricao:"Molas e folhas de molas, de ferro ou a\xE7o"},{cest:"01.021.00",ncmsh:"7325",descricao:"Obras moldadas, de ferro fundido, ferro ou a\xE7o, exceto as do c\xF3digo 7325.91.00"},{cest:"01.022.00",ncmsh:"780600",descricao:"Peso de chumbo para balanceamento de roda"},{cest:"01.023.00",ncmsh:"80070090",descricao:"Peso para balanceamento de roda e outros utens\xEDlios de estanho"},{cest:"01.024.00",ncmsh:"830120;830160",descricao:"Fechaduras e partes de fechaduras"},{cest:"01.025.00",ncmsh:"830170",descricao:"Chaves apresentadas isoladamente"},{cest:"01.026.00",ncmsh:"83021000;83023000",descricao:"Dobradi\xE7as, guarni\xE7\xF5es, ferragens e artigos semelhantes de metais comuns"},{cest:"01.027.00",ncmsh:"831000",descricao:"Tri\xE2ngulo de seguran\xE7a"},{cest:"01.028.00",ncmsh:"84073",descricao:"Motores de pist\xE3o alternativo dos tipos utilizados para propuls\xE3o de ve\xEDculos do Cap\xEDtulo 87"},{cest:"01.029.00",ncmsh:"840820",descricao:"Motores dos tipos utilizados para propuls\xE3o de ve\xEDculos automotores"},{cest:"01.030.00",ncmsh:"84099",descricao:"Partes reconhec\xEDveis como exclusiva ou principalmente destinadas aos motores das posi\xE7\xF5es 8407 ou 8408"},{cest:"01.031.00",ncmsh:"84122",descricao:"Motores hidr\xE1ulicos"},{cest:"01.032.00",ncmsh:"841330",descricao:"Bombas para combust\xEDveis, lubrificantes ou l\xEDquidos de arrefecimento, pr\xF3prias para motores de igni\xE7\xE3o por centelha ou por compress\xE3o"},{cest:"01.033.00",ncmsh:"84141000",descricao:"Bombas de v\xE1cuo"},{cest:"01.034.00",ncmsh:"8414801;8414802",descricao:"Compressores e turbocompressores de ar"},{cest:"01.035.00",ncmsh:"84139190;84149010;8414903;84149039",descricao:"Partes das bombas, compressores e turbocompressores dos CEST 01.032.00, 01.033.00 e 01.034.00"},{cest:"01.036.00",ncmsh:"841520",descricao:"M\xE1quinas e aparelhos de ar condicionado"},{cest:"01.037.00",ncmsh:"84212300",descricao:"Aparelhos para filtrar \xF3leos minerais nos motores de igni\xE7\xE3o por centelha ou por compress\xE3o"},{cest:"01.038.00",ncmsh:"84212990",descricao:"Filtros a v\xE1cuo"},{cest:"01.039.00",ncmsh:"84219",descricao:"Partes dos aparelhos para filtrar ou depurar l\xEDquidos ou gases"},{cest:"01.040.00",ncmsh:"84241000",descricao:"Extintores, mesmo carregados"},{cest:"01.041.00",ncmsh:"84213100",descricao:"Filtros de entrada de ar para motores de igni\xE7\xE3o por centelha ou por compress\xE3o"},{cest:"01.042.00",ncmsh:"84213920",descricao:"Depuradores por convers\xE3o catal\xEDtica de gases de escape"},{cest:"01.043.00",ncmsh:"84254200",descricao:"Macacos"},{cest:"01.044.00",ncmsh:"84311010",descricao:"Partes para macacos do CEST 01.043.00"},{cest:"01.045.00",ncmsh:"8431492",descricao:"Partes reconhec\xEDveis como exclusiva ou principalmente destinadas \xE0s m\xE1quinas agr\xEDcolas ou rodovi\xE1rias"},{cest:"01.045.01",ncmsh:"84339090",descricao:"Partes reconhec\xEDveis como exclusiva ou principalmente destinadas \xE0s m\xE1quinas agr\xEDcolas ou rodovi\xE1rias"},{cest:"01.046.00",ncmsh:"84811000",descricao:"V\xE1lvulas redutoras de press\xE3o"},{cest:"01.047.00",ncmsh:"84812",descricao:"V\xE1lvulas para transmiss\xE3o \xF3leo-hidr\xE1ulicas ou pneum\xE1ticas"},{cest:"01.048.00",ncmsh:"84818092",descricao:"V\xE1lvulas solenoides"},{cest:"01.049.00",ncmsh:"8482",descricao:"Rolamentos"},{cest:"01.050.00",ncmsh:"8483",descricao:"\xC1rvores de transmiss\xE3o (inclu\xEDdas as \xE1rvores de \u201Ccames\u201D e virabrequins) e manivelas; mancais e \u201Cbronzes\u201D; engrenagens e rodas de fric\xE7\xE3o; eixos de esferas ou de roletes; redutores, multiplicadores, caixas de transmiss\xE3o e variadores de velocidade, inclu\xEDdos os conversores de torque; volantes e polias, inclu\xEDdas as polias para cadernais; embreagens e dispositivos de acoplamento, inclu\xEDdas as juntas de articula\xE7\xE3o"},{cest:"01.051.00",ncmsh:"8484",descricao:"Juntas metalopl\xE1sticas; jogos ou sortidos de juntas de composi\xE7\xF5es diferentes, apresentados em bolsas, envelopes ou embalagens semelhantes; juntas de veda\xE7\xE3o mec\xE2nicas (selos mec\xE2nicos)"},{cest:"01.052.00",ncmsh:"850520",descricao:"Acoplamentos, embreagens, variadores de velocidade e freios, eletromagn\xE9ticos"},{cest:"01.053.00",ncmsh:"850710",descricao:"Acumuladores el\xE9tricos de chumbo, do tipo utilizado para o arranque dos motores de pist\xE3o, exceto os classificados no CEST 01.053.01"},{cest:"01.053.01",ncmsh:"85071010",descricao:"Acumuladores el\xE9tricos de chumbo, do tipo utilizado para o arranque dos motores de pist\xE3o e de capacidade inferior ou igual a 20 Ah e tens\xE3o inferior ou igual a 12 V"},{cest:"01.054.00",ncmsh:"8511",descricao:"Aparelhos e dispositivos el\xE9tricos de igni\xE7\xE3o ou de arranque para motores de igni\xE7\xE3o por centelha ou por compress\xE3o (por exemplo, magnetos, d\xEDnamos-magnetos, bobinas de igni\xE7\xE3o, velas de igni\xE7\xE3o ou de aquecimento, motores de arranque); geradores (d\xEDnamos e alternadores, por exemplo) e conjuntores-disjuntores utilizados com estes motores"},{cest:"01.055.00",ncmsh:"851220;851240;85129000",descricao:"Aparelhos el\xE9tricos de ilumina\xE7\xE3o ou de sinaliza\xE7\xE3o (exceto os da posi\xE7\xE3o 8539), limpadores de para-brisas, degeladores e desemba\xE7adores (desembaciadores) el\xE9tricos e suas partes"},{cest:"01.056.00",ncmsh:"85171213",descricao:"Telefones m\xF3veis do tipo dos utilizados em ve\xEDculos autom\xF3veis."},{cest:"01.057.00",ncmsh:"8518",descricao:"Alto-falantes, amplificadores el\xE9tricos de audiofrequ\xEAncia e partes"},{cest:"01.058.00",ncmsh:"85185000",descricao:"Aparelhos el\xE9tricos de amplifica\xE7\xE3o de som para ve\xEDculos automotores"},{cest:"01.059.00",ncmsh:"851981",descricao:"Aparelhos de reprodu\xE7\xE3o de som"},{cest:"01.060.00",ncmsh:"8525501;85256010",descricao:"Aparelhos transmissores (emissores) de radiotelefonia ou radiotelegrafia (r\xE1dio receptor/transmissor)"},{cest:"01.061.00",ncmsh:"85272100",descricao:"Aparelhos receptores de radiodifus\xE3o que s\xF3 funcionem com fonte externa de energia combinados com um aparelho de grava\xE7\xE3o ou de reprodu\xE7\xE3o de som, do tipo utilizado em ve\xEDculos autom\xF3veis"},{cest:"01.062.00",ncmsh:"85272900",descricao:"Outros aparelhos receptores de radiodifus\xE3o que s\xF3 funcionem com fonte externa de energia, do tipo utilizado em ve\xEDculos autom\xF3veis"},{cest:"01.062.01",ncmsh:"85219090",descricao:"Outros aparelhos videof\xF4nicos de grava\xE7\xE3o ou de reprodu\xE7\xE3o, mesmo incorporando um receptor de sinais videof\xF4nicos, dos tipos utilizados exclusivamente em ve\xEDculos automotores"},{cest:"01.063.00",ncmsh:"85291090",descricao:"Antenas"},{cest:"01.064.00",ncmsh:"853400",descricao:"Circuitos impressos"},{cest:"01.065.00",ncmsh:"853530;853650",descricao:"Interruptores e seccionadores e comutadores"},{cest:"01.066.00",ncmsh:"85361000",descricao:"Fus\xEDveis e corta-circuitos de fus\xEDveis"},{cest:"01.067.00",ncmsh:"85362000",descricao:"Disjuntores"},{cest:"01.068.00",ncmsh:"85364",descricao:"Rel\xE9s"},{cest:"01.069.00",ncmsh:"8538",descricao:"Partes reconhec\xEDveis como exclusivas ou principalmente destinados aos aparelhos dos CEST 01.065.00, 01.066.00, 01.067.00 e 01.068.00"},{cest:"01.070.00",ncmsh:"853910",descricao:"Far\xF3is e projetores, em unidades seladas"},{cest:"01.071.00",ncmsh:"85392",descricao:"L\xE2mpadas e tubos de incandesc\xEAncia, exceto de raios ultravioleta ou infravermelhos"},{cest:"01.072.00",ncmsh:"85442000",descricao:"Cabos coaxiais e outros condutores el\xE9tricos coaxiais"},{cest:"01.073.00",ncmsh:"85443000",descricao:"Jogos de fios para velas de igni\xE7\xE3o e outros jogos de fios"},{cest:"01.074.00",ncmsh:"8707",descricao:"Carro\xE7arias para os ve\xEDculos autom\xF3veis das posi\xE7\xF5es 8701 a 8705, inclu\xEDdas as cabinas"},{cest:"01.075.00",ncmsh:"8708",descricao:"Partes e acess\xF3rios dos ve\xEDculos autom\xF3veis das posi\xE7\xF5es 8701 a 8705"},{cest:"01.076.00",ncmsh:"87141",descricao:"Parte e acess\xF3rios de motocicletas (inclu\xEDdos os ciclomotores)"},{cest:"01.077.00",ncmsh:"87169090",descricao:"Engates para reboques e semirreboques"},{cest:"01.078.00",ncmsh:"902610",descricao:"Medidores de n\xEDvel; Medidores de vaz\xE3o"},{cest:"01.079.00",ncmsh:"902620",descricao:"Aparelhos para medida ou controle da press\xE3o"},{cest:"01.080.00",ncmsh:"9029",descricao:"Contadores, indicadores de velocidade e tac\xF4metros, suas partes e acess\xF3rios"},{cest:"01.081.00",ncmsh:"90303321",descricao:"Amper\xEDmetros"},{cest:"01.082.00",ncmsh:"90318040",descricao:"Aparelhos digitais, de uso em ve\xEDculos autom\xF3veis, para medida e indica\xE7\xE3o de m\xFAltiplas grandezas tais como: velocidade m\xE9dia, consumos instant\xE2neo e m\xE9dio e autonomia (computador de bordo)"},{cest:"01.083.00",ncmsh:"9032892",descricao:"Controladores eletr\xF4nicos"},{cest:"01.084.00",ncmsh:"91040000",descricao:"Rel\xF3gios para pain\xE9is de instrumentos e rel\xF3gios semelhantes"},{cest:"01.085.00",ncmsh:"94012000;94019090",descricao:"Assentos e partes de assentos"},{cest:"01.086.00",ncmsh:"96138000",descricao:"Acendedores"},{cest:"01.087.00",ncmsh:"4009",descricao:"Tubos de borracha vulcanizada n\xE3o endurecida, mesmo providos de seus acess\xF3rios"},{cest:"01.088.00",ncmsh:"45049000;68129910",descricao:"Juntas de veda\xE7\xE3o de corti\xE7a natural e de amianto"},{cest:"01.089.00",ncmsh:"48234000",descricao:"Papel-diagrama para tac\xF3grafo, em disco"},{cest:"01.090.00",ncmsh:"39191000;39199000;87082999",descricao:"Fitas, tiras, adesivos, autocolantes, de pl\xE1stico, refletores, mesmo em rolos; placas met\xE1licas com pel\xEDcula de pl\xE1stico refletora, pr\xF3prias para coloca\xE7\xE3o em carrocerias, para-choques de ve\xEDculos de carga, motocicletas, ciclomotores, capacetes, bon\xE9s de agentes de tr\xE2nsito e de condutores de ve\xEDculos, atuando como dispositivos refletivos de seguran\xE7a rodovi\xE1rios"},{cest:"01.091.00",ncmsh:"84123110",descricao:"Cilindros pneum\xE1ticos"},{cest:"01.092.00",ncmsh:"84131900;84135090;84138100",descricao:"Bomba el\xE9trica de lavador de para-brisa"},{cest:"01.093.00",ncmsh:"84136019;84137010",descricao:"Bomba de assist\xEAncia de dire\xE7\xE3o hidr\xE1ulica"},{cest:"01.094.00",ncmsh:"84145910;84145990",descricao:"Motoventiladores"},{cest:"01.095.00",ncmsh:"84213990",descricao:"Filtros de p\xF3len do ar-condicionado"},{cest:"01.096.00",ncmsh:"85011019",descricao:"\u201CM\xE1quina\u201D de vidro el\xE9trico de porta"},{cest:"01.097.00",ncmsh:"85013110",descricao:"Motor de limpador de para-brisa"},{cest:"01.098.00",ncmsh:"85045000",descricao:"Bobinas de reat\xE2ncia e de autoindu\xE7\xE3o"},{cest:"01.099.00",ncmsh:"850720;850730",descricao:"Baterias de chumbo e de n\xEDquel-c\xE1dmio"},{cest:"01.100.00",ncmsh:"85123000",descricao:"Aparelhos de sinaliza\xE7\xE3o ac\xFAstica (buzina)"},{cest:"01.101.00",ncmsh:"9032898;9032899",descricao:"Instrumentos para regula\xE7\xE3o de grandezas n\xE3o el\xE9tricas"},{cest:"01.102.00",ncmsh:"90271000",descricao:"Analisadores de gases ou de fuma\xE7a (sonda lambda)"},{cest:"01.103.00",ncmsh:"40081100",descricao:"Perfilados de borracha vulcanizada n\xE3o endurecida"},{cest:"01.104.00",ncmsh:"56012219",descricao:"Artefatos de pasta de fibra de uso automotivo"},{cest:"01.105.00",ncmsh:"57032000",descricao:"Tapetes/carpetes - nail\xF3n"},{cest:"01.106.00",ncmsh:"57033000",descricao:"Tapetes de mat\xE9rias t\xEAxteis sint\xE9ticas"},{cest:"01.107.00",ncmsh:"59119000",descricao:"Forra\xE7\xE3o interior capacete"},{cest:"01.108.00",ncmsh:"69039099",descricao:"Outros para-brisas"},{cest:"01.109.00",ncmsh:"70072900",descricao:"Moldura com espelho"},{cest:"01.110.00",ncmsh:"73145000",descricao:"REVOGADO"},{cest:"01.111.00",ncmsh:"73151100",descricao:"Corrente transmiss\xE3o"},{cest:"01.112.00",ncmsh:"73151210",descricao:"Outras correntes de transmiss\xE3o"},{cest:"01.113.00",ncmsh:"84189900",descricao:"Condensador tubular met\xE1lico"},{cest:"01.114.00",ncmsh:"841950",descricao:"Trocadores de calor"},{cest:"01.115.00",ncmsh:"84249090",descricao:"Partes de aparelhos mec\xE2nicos de pulverizar ou dispersar"},{cest:"01.116.00",ncmsh:"84254910",descricao:"Macacos manuais para ve\xEDculos"},{cest:"01.117.00",ncmsh:"84314100",descricao:"Ca\xE7ambas, p\xE1s, ganchos e tenazes para m\xE1quinas rodovi\xE1rias"},{cest:"01.118.00",ncmsh:"85016100",descricao:"Geradores de corrente alternada de pot\xEAncia n\xE3o superior a 75 kva"},{cest:"01.119.00",ncmsh:"85311090",descricao:"Aparelhos el\xE9tricos para alarme de uso automotivo"},{cest:"01.120.00",ncmsh:"90141000",descricao:"B\xFAssolas"},{cest:"01.121.00",ncmsh:"90251990",descricao:"Indicadores de temperatura"},{cest:"01.122.00",ncmsh:"90259010",descricao:"Partes de indicadores de temperatura"},{cest:"01.123.00",ncmsh:"902690",descricao:"Partes de aparelhos de medida ou controle"},{cest:"01.124.00",ncmsh:"90321010",descricao:"Termostatos"},{cest:"01.125.00",ncmsh:"90321090",descricao:"Instrumentos e aparelhos para regula\xE7\xE3o"},{cest:"01.126.00",ncmsh:"90322000",descricao:"Pressostatos"},{cest:"01.127.00",ncmsh:"871690",descricao:"Pe\xE7as para reboques e semirreboques, exceto os itens classificados no CEST 01.077.00"},{cest:"01.128.00",ncmsh:"73229010",descricao:"Geradores de ar quente a combust\xEDvel l\xEDquido, com capacidade superior ou igual a 1.500 kcal/h, mas inferior ou igual a 10.400 kcal/h, do tipo dos utilizados em ve\xEDculos autom\xF3veis"},{cest:"02.001.00",ncmsh:"2205;22089000",descricao:"Aperitivos, amargos, bitter e similares"},{cest:"02.002.00",ncmsh:"22089000",descricao:"Batida e similares"},{cest:"02.003.00",ncmsh:"22089000",descricao:"Bebida ice"},{cest:"02.004.00",ncmsh:"220720;22084000",descricao:"Cacha\xE7a e aguardentes"},{cest:"02.005.00",ncmsh:"2205;22060090;22089000",descricao:"Catuaba e similares"},{cest:"02.006.00",ncmsh:"22082000",descricao:"Conhaque, brandy e similares"},{cest:"02.007.00",ncmsh:"22060090;22089000",descricao:"Cooler"},{cest:"02.008.00",ncmsh:"22085000",descricao:"Gim (gin) e genebra"},{cest:"02.009.00",ncmsh:"2205;22060090;22089000",descricao:"Jurubeba e similares"},{cest:"02.010.00",ncmsh:"22087000",descricao:"Licores e similares"},{cest:"02.011.00",ncmsh:"22082000",descricao:"Pisco"},{cest:"02.012.00",ncmsh:"22084000",descricao:"Rum"},{cest:"02.013.00",ncmsh:"22060090",descricao:"Saqu\xEA"},{cest:"02.014.00",ncmsh:"22089000",descricao:"Steinhaeger"},{cest:"02.015.00",ncmsh:"22089000",descricao:"Tequila"},{cest:"02.016.00",ncmsh:"220830",descricao:"U\xEDsque"},{cest:"02.017.00",ncmsh:"2205",descricao:"Vermute e similares"},{cest:"02.018.00",ncmsh:"22086000",descricao:"Vodka"},{cest:"02.019.00",ncmsh:"22089000",descricao:"Derivados de vodka"},{cest:"02.020.00",ncmsh:"22089000",descricao:"Arak"},{cest:"02.021.00",ncmsh:"22082000",descricao:"Aguardente v\xEDnica / grappa"},{cest:"02.022.00",ncmsh:"22060010",descricao:"Sidra e similares"},{cest:"02.023.00",ncmsh:"2205;22060090;22089000",descricao:"Sangrias e coquet\xE9is"},{cest:"02.024.00",ncmsh:"2204",descricao:"Vinhos de uvas frescas, incluindo os vinhos enriquecidos com \xE1lcool; mostos de uvas."},{cest:"02.999.00",ncmsh:"2205;2206;2207;2208",descricao:"Outras bebidas alco\xF3licas n\xE3o especificadas nos itens anteriores"},{cest:"03.001.00",ncmsh:"22011000",descricao:"\xC1gua mineral, gasosa ou n\xE3o, ou pot\xE1vel, naturais, em garrafa de vidro, retorn\xE1vel ou n\xE3o, com capacidade de at\xE9 500 ml"},{cest:"03.002.00",ncmsh:"22011000",descricao:"\xC1gua mineral, gasosa ou n\xE3o, ou pot\xE1vel, naturais, em embalagem com capacidade igual ou superior a 5.000 ml; exceto as classificadas no CEST 03.024.00 e 03.025.00"},{cest:"03.003.00",ncmsh:"22011000",descricao:"\xC1gua mineral, gasosa ou n\xE3o, ou pot\xE1vel, naturais, em embalagem de vidro, n\xE3o retorn\xE1vel, com capacidade de at\xE9 300 ml"},{cest:"03.004.00",ncmsh:"22011000",descricao:"\xC1gua mineral, gasosa ou n\xE3o, ou pot\xE1vel, naturais, em garrafa pl\xE1stica de 1.500 ml"},{cest:"03.005.00",ncmsh:"22011000",descricao:"\xC1gua mineral, gasosa ou n\xE3o, ou pot\xE1vel, naturais, em copos pl\xE1sticos e embalagem pl\xE1stica com capacidade de at\xE9 500 ml"},{cest:"03.006.00",ncmsh:"22011000",descricao:"Outras \xE1guas minerais, pot\xE1veis ou naturais, gasosas ou n\xE3o, inclusive gaseificadas; exceto as classificadas no CEST 03.024.00 e 03.025.00"},{cest:"03.007.00",ncmsh:"22021000",descricao:"\xC1guas minerais, pot\xE1veis ou naturais, gasosas ou n\xE3o, inclusive gaseificadas ou aromatizadas artificialmente, exceto os refrescos e refrigerantes"},{cest:"03.008.00",ncmsh:"22029900",descricao:"Outras \xE1guas minerais, pot\xE1veis ou naturais, gasosas ou n\xE3o, inclusive gaseificadas ou aromatizadas artificialmente"},{cest:"03.010.00",ncmsh:"2202",descricao:"Refrigerantes em garrafa com capacidade igual ou superior a 600 ml, exceto os classificados no CEST 03.011.01"},{cest:"03.011.00",ncmsh:"2202",descricao:"Demais refrigerantes, exceto os classificados no CEST 03.010.00 e 03.011.01"},{cest:"03.011.01",ncmsh:"2202",descricao:"Espumantes sem \xE1lcool"},{cest:"03.012.00",ncmsh:"21069010",descricao:"Xarope ou extrato concentrado destinados ao preparo de refrigerante em m\xE1quina \u201Cpr\xE9-mix\u201D ou \u201Cpost-mix\u201D"},{cest:"03.013.00",ncmsh:"210690;22029900",descricao:"Bebidas energ\xE9ticas em embalagem com capacidade inferior a 600ml"},{cest:"03.014.00",ncmsh:"210690;22029900",descricao:"Bebidas energ\xE9ticas em embalagem com capacidade igual ou superior a 600ml"},{cest:"03.015.00",ncmsh:"210690;22029900",descricao:"Bebidas hidroeletrol\xEDticas (isot\xF4nicas) em embalagem com capacidade inferior a 600ml"},{cest:"03.016.00",ncmsh:"210690;22029900",descricao:"Bebidas hidroeletrol\xEDticas (isot\xF4nicas) em embalagem com capacidade igual ou superior a 600ml"},{cest:"03.021.00",ncmsh:"22030000",descricao:"Cerveja"},{cest:"03.022.00",ncmsh:"22029100",descricao:"Cerveja sem \xE1lcool"},{cest:"03.023.00",ncmsh:"22030000",descricao:"Chope"},{cest:"03.024.00",ncmsh:"22011000",descricao:"\xC1gua mineral em embalagens retorn\xE1veis com capacidade igual ou superior a 10 (dez) e inferior a 20 (vinte) litros"},{cest:"03.025.00",ncmsh:"22011000",descricao:"\xC1gua mineral em embalagens retorn\xE1veis com capacidade igual ou superior a 20 (vinte) litros"},{cest:"04.001.00",ncmsh:"2402",descricao:"Charutos, cigarrilhas e cigarros, de tabaco ou dos seus suced\xE2neos"},{cest:"04.002.00",ncmsh:"24031",descricao:"Tabaco para fumar, mesmo contendo suced\xE2neos de tabaco em qualquer propor\xE7\xE3o"},{cest:"05.001.00",ncmsh:"2523",descricao:"Cimento"},{cest:"06.001.00",ncmsh:"22071010",descricao:"\xC1lcool et\xEDlico n\xE3o desnaturado, com um teor alco\xF3lico em volume igual ou superior a 80% vol - Com um teor de \xE1gua igual ou inferior a 1 % vol (\xE1lcool et\xEDlico anidro combust\xEDvel)"},{cest:"06.001.01",ncmsh:"22071090",descricao:"\xC1lcool et\xEDlico n\xE3o desnaturado, com um teor alco\xF3lico em volume igual ou superior a 80% vol - Outros (\xE1lcool et\xEDlico hidratado combust\xEDvel)"},{cest:"06.002.00",ncmsh:"27101259",descricao:"Gasolina automotiva A, exceto Premium"},{cest:"06.002.01",ncmsh:"27101259",descricao:"Gasolina automotiva C, exceto Premium"},{cest:"06.002.02",ncmsh:"27101259",descricao:"Gasolina automotiva A Premium"},{cest:"06.002.03",ncmsh:"27101259",descricao:"Gasolina automotiva C Premium"},{cest:"06.003.00",ncmsh:"27101251",descricao:"Gasolina de avia\xE7\xE3o"},{cest:"06.004.00",ncmsh:"27101919",descricao:"Querosenes, exceto de avia\xE7\xE3o"},{cest:"06.005.00",ncmsh:"27101911",descricao:"Querosene de avia\xE7\xE3o"},{cest:"06.006.00",ncmsh:"2710192",descricao:"\xD3leo diesel A, exceto S10 e Mar\xEDtimo"},{cest:"06.006.01",ncmsh:"2710192",descricao:"\xD3leo diesel B, exceto S10 (mistura obrigat\xF3ria)"},{cest:"06.006.02",ncmsh:"2710192",descricao:"\xD3leo diesel B, exceto S10 (misturas autorizativas)"},{cest:"06.006.03",ncmsh:"2710192",descricao:"\xD3leo diesel B, exceto S10 (misturas experimentais)"},{cest:"06.006.04",ncmsh:"2710192",descricao:"\xD3leo diesel A S10"},{cest:"06.006.05",ncmsh:"2710192",descricao:"\xD3leo diesel B S10 (mistura obrigat\xF3ria)"},{cest:"06.006.06",ncmsh:"2710192",descricao:"\xD3leo diesel B S10 (misturas autorizativas)"},{cest:"06.006.07",ncmsh:"2710192",descricao:"\xD3leo diesel B S10 (misturas experimentais)"},{cest:"06.006.08",ncmsh:"2710192",descricao:"\xD3leo Diesel Mar\xEDtimo"},{cest:"06.006.09",ncmsh:"2710192",descricao:"Outros \xF3leos combust\xEDveis, exceto os classificados no CEST 06.006.10 e 06.006.11"},{cest:"06.006.10",ncmsh:"2710192",descricao:"\xD3leo combust\xEDvel derivado de xisto"},{cest:"06.006.11",ncmsh:"27101922",descricao:"\xD3leo combust\xEDvel pesado"},{cest:"06.007.00",ncmsh:"2710193",descricao:"\xD3leos lubrificantes"},{cest:"06.008.00",ncmsh:"2710199",descricao:"Outros \xF3leos de petr\xF3leo ou de minerais betuminosos (exceto \xF3leos brutos) e prepara\xE7\xF5es n\xE3o especificadas nem compreendidas noutras posi\xE7\xF5es, que contenham, como constituintes b\xE1sicos, 70% ou mais, em peso, de \xF3leos de petr\xF3leo ou de minerais betuminosos, exceto os que contenham biodiesel, exceto os res\xEDduos de \xF3leos e exceto as graxas lubrificantes"},{cest:"06.008.01",ncmsh:"2710199",descricao:"Graxa lubrificante"},{cest:"06.009.00",ncmsh:"27109",descricao:"Res\xEDduos de \xF3leos"},{cest:"06.010.00",ncmsh:"2711",descricao:"G\xE1s de petr\xF3leo e outros hidrocarbonetos gasosos, exceto GLP, GLGN, G\xE1s Natural e G\xE1s de xisto."},{cest:"06.011.00",ncmsh:"27111910",descricao:"G\xE1s liquefeito de petr\xF3leo em botij\xE3o de 13 Kg (GLP)"},{cest:"06.011.01",ncmsh:"27111910",descricao:"G\xE1s liquefeito de petr\xF3leo (GLP), exceto em botij\xE3o de 13 Kg"},{cest:"06.011.02",ncmsh:"27111910",descricao:"G\xE1s liquefeito de petr\xF3leo em botij\xE3o de 13 Kg (GLGNn)"},{cest:"06.011.03",ncmsh:"27111910",descricao:"G\xE1s liquefeito de petr\xF3leo (GLGNn), exceto em botij\xE3o de 13 Kg"},{cest:"06.011.04",ncmsh:"27111910",descricao:"G\xE1s liquefeito de petr\xF3leo em botij\xE3o de 13 Kg (GLGNi)"},{cest:"06.011.05",ncmsh:"27111910",descricao:"G\xE1s liquefeito de petr\xF3leo (GLGNi), exceto em botij\xE3o de 13 Kg"},{cest:"06.011.06",ncmsh:"27111910",descricao:"G\xE1s liquefeito de petr\xF3leo em botij\xE3o de 13 kg (Misturas)"},{cest:"06.011.07",ncmsh:"27111910",descricao:"G\xE1s liquefeito de petr\xF3leo (Misturas), exceto em botij\xE3o de 13 Kg"},{cest:"06.012.00",ncmsh:"27111100",descricao:"G\xE1s Natural Liquefeito"},{cest:"06.013.00",ncmsh:"27112100",descricao:"G\xE1s Natural Gasoso"},{cest:"06.014.00",ncmsh:"27112990",descricao:"G\xE1s de xisto"},{cest:"06.015.00",ncmsh:"2713",descricao:"Coque de petr\xF3leo e outros res\xEDduos de \xF3leo de petr\xF3leo ou de minerais betuminosos"},{cest:"06.016.00",ncmsh:"38260000",descricao:"Biodiesel e suas misturas, que n\xE3o contenham ou que contenham menos de 70%, em peso, de \xF3leos de petr\xF3leo ou de \xF3leos minerais betuminosos"},{cest:"06.017.00",ncmsh:"3403",descricao:"Prepara\xE7\xF5es lubrificantes, exceto as contendo, como constituintes de base, 70% ou mais, em peso, de \xF3leos de petr\xF3leo ou de minerais betuminosos"},{cest:"06.018.00",ncmsh:"27102000",descricao:"\xD3leos de petr\xF3leo ou de minerais betuminosos (exceto \xF3leos brutos) e prepara\xE7\xF5es n\xE3o especificadas nem compreendidas noutras posi\xE7\xF5es, que contenham, como constituintes b\xE1sicos, 70% ou mais, em peso, de \xF3leos de petr\xF3leo ou de minerais betuminosos, que contenham biodiesel, exceto os res\xEDduos de \xF3leos"},{cest:"07.001.00",ncmsh:"27160000",descricao:"Energia el\xE9trica"},{cest:"08.001.00",ncmsh:"40169990",descricao:"Ferramentas de borracha vulcanizada n\xE3o endurecida"},{cest:"08.002.00",ncmsh:"44170010;44170090",descricao:"Ferramentas, arma\xE7\xF5es e cabos de ferramentas, de madeira"},{cest:"08.003.00",ncmsh:"6804",descricao:"M\xF3s e artefatos semelhantes, sem arma\xE7\xE3o, para moer, desfibrar, triturar, amolar, polir, retificar ou cortar; pedras para amolar ou para polir, manualmente, e suas partes, de pedras naturais, de abrasivos naturais ou artificiais aglomerados ou de cer\xE2mica, mesmo com partes de outras mat\xE9rias"},{cest:"08.004.00",ncmsh:"8201",descricao:"P\xE1s, alvi\xF5es, picaretas, enxadas, sachos, forcados e forquilhas, ancinhos e raspadeiras; machados, pod\xF5es e ferramentas semelhantes com gume; tesouras de podar de todos os tipos; foices e foicinhas, facas para feno ou para palha, tesouras para sebes, cunhas e outras ferramentas manuais para agricultura, horticultura ou silvicultura"},{cest:"08.005.00",ncmsh:"82022000",descricao:"Folhas de serras de fita"},{cest:"08.006.00",ncmsh:"82029100",descricao:"L\xE2minas de serras m\xE1quinas"},{cest:"08.007.00",ncmsh:"8202",descricao:"Serras manuais e outras folhas de serras (inclu\xEDdas as fresas-serras e as folhas n\xE3o dentadas para serrar), exceto as classificadas nos CEST 08.005.00 e 08.006.00"},{cest:"08.008.00",ncmsh:"8203",descricao:"Limas, grosas, alicates (mesmo cortantes), tenazes, pin\xE7as, cisalhas para metais, corta-tubos, corta-pinos, saca-bocados e ferramentas semelhantes, manuais, exceto as pin\xE7as para sobrancelhas classificadas na posi\xE7\xE3o 8203.20.90"},{cest:"08.009.00",ncmsh:"8204",descricao:"Chaves de porcas, manuais (inclu\xEDdas as chaves dinamom\xE9tricas); chaves de caixa intercambi\xE1veis, mesmo com cabos"},{cest:"08.010.00",ncmsh:"8205",descricao:"Ferramentas manuais (inclu\xEDdos os diamantes de vidraceiro) n\xE3o especificadas nem compreendidas em outras posi\xE7\xF5es, lamparinas ou l\xE2mpadas de soldar (ma\xE7aricos) e semelhantes; tornos de apertar, sargentos e semelhantes, exceto os acess\xF3rios ou partes de m\xE1quinas-ferramentas; bigornas; forjas-port\xE1teis; m\xF3s com arma\xE7\xE3o, manuais ou de pedal"},{cest:"08.011.00",ncmsh:"82060000",descricao:"Ferramentas de pelo menos duas das posi\xE7\xF5es 8202 a 8205, acondicionadas em sortidos para venda a retalho"},{cest:"08.012.00",ncmsh:"820740;820760;820770",descricao:"Ferramentas de roscar interior ou exteriormente; de mandrilar ou de brochar; e de fresar"},{cest:"08.013.00",ncmsh:"8207",descricao:"Outras ferramentas intercambi\xE1veis para ferramentas manuais, mesmo mec\xE2nicas, ou para m\xE1quinas-ferramentas (por exemplo, de embutir, estampar, puncionar, furar, tornear, aparafusar), inclu\xEDdas as fieiras de estiragem ou de extrus\xE3o, para metais, e as ferramentas de perfura\xE7\xE3o ou de sondagem, exceto forma ou gabarito de produtos em epoxy e as classificadas no CEST 08.012.00"},{cest:"08.014.00",ncmsh:"8208",descricao:"Facas e l\xE2minas cortantes, para m\xE1quinas ou para aparelhos mec\xE2nicos"},{cest:"08.015.00",ncmsh:"82090011",descricao:"Plaquetas ou pastilhas intercambi\xE1veis"},{cest:"08.016.00",ncmsh:"820900",descricao:"Outras plaquetas, varetas, pontas e objetos semelhantes para ferramentas, n\xE3o montados, de ceramais (\u201Ccermets\u201D), exceto as classificadas no CEST 08.015.00"},{cest:"08.017.00",ncmsh:"8211",descricao:"Facas de l\xE2mina cortante ou serrilhada, inclu\xEDdas as podadeiras de l\xE2mina m\xF3vel, e suas l\xE2minas, exceto as de uso dom\xE9stico"},{cest:"08.018.00",ncmsh:"8213",descricao:"Tesouras e suas l\xE2minas"},{cest:"08.019.00",ncmsh:"8467",descricao:"Ferramentas pneum\xE1ticas, hidr\xE1ulicas ou com motor (el\xE9trico ou n\xE3o el\xE9trico) incorporado, de uso manual, exceto o descrito no CEST 08.019.01"},{cest:"08.019.01",ncmsh:"84678100",descricao:"Moto-serras port\xE1teis de corrente, com motor incorporado, n\xE3o el\xE9trico, de uso agr\xEDcola"},{cest:"08.020.00",ncmsh:"9015",descricao:"Instrumentos e aparelhos de geodesia, topografia, agrimensura, nivelamento, fotogrametria, hidrografia, oceanografia, hidrologia, meteorologia ou de geof\xEDsica, exceto bussolas; tel\xEAmetros"},{cest:"08.021.00",ncmsh:"90172000;901730;901780;90179090",descricao:"Instrumentos de desenho, de tra\xE7ado ou de c\xE1lculo; metros, micr\xF4metros, paqu\xEDmetros, calibres e semelhantes; partes e acess\xF3rios"},{cest:"08.022.00",ncmsh:"90251190;90259010",descricao:"Term\xF4metros, suas partes e acess\xF3rios"},{cest:"08.023.00",ncmsh:"902519;90259090",descricao:"Pir\xF4metros, suas partes e acess\xF3rios"},{cest:"09.001.00",ncmsh:"8539",descricao:"L\xE2mpadas el\xE9tricas"},{cest:"09.002.00",ncmsh:"8540",descricao:"L\xE2mpadas eletr\xF4nicas"},{cest:"09.003.00",ncmsh:"85041000",descricao:"Reatores para l\xE2mpadas ou tubos de descargas"},{cest:"09.004.00",ncmsh:"853650",descricao:"\u201CStarter\u201D"},{cest:"09.005.00",ncmsh:"85395000",descricao:"L\xE2mpadas de LED (Diodos Emissores de Luz)"},{cest:"10.001.00",ncmsh:"2522",descricao:"Cal"},{cest:"10.002.00",ncmsh:"3816001;38245000",descricao:"Argamassas"},{cest:"10.003.00",ncmsh:"32149000",descricao:"Outras argamassas"},{cest:"10.004.00",ncmsh:"391000",descricao:"Silicones em formas prim\xE1rias, para uso na constru\xE7\xE3o"},{cest:"10.005.00",ncmsh:"3916",descricao:"Revestimentos de PVC e outros pl\xE1sticos; forro, sancas e afins de PVC, para uso na constru\xE7\xE3o"},{cest:"10.006.00",ncmsh:"3917",descricao:"Tubos, e seus acess\xF3rios (por exemplo, juntas, cotovelos, flanges, uni\xF5es), de pl\xE1sticos, para uso na constru\xE7\xE3o"},{cest:"10.007.00",ncmsh:"3918",descricao:"Revestimento de pavimento de PVC e outros pl\xE1sticos"},{cest:"10.008.00",ncmsh:"3919",descricao:"Chapas, folhas, tiras, fitas, pel\xEDculas e outras formas planas, autoadesivas, de pl\xE1sticos, mesmo em rolos, para uso na constru\xE7\xE3o"},{cest:"10.009.00",ncmsh:"3919;3920;3921",descricao:"Veda rosca, lona pl\xE1stica para uso na constru\xE7\xE3o, fitas isolantes e afins"},{cest:"10.010.00",ncmsh:"3921",descricao:"Telha de pl\xE1stico, mesmo refor\xE7ada com fibra de vidro"},{cest:"10.011.00",ncmsh:"3921",descricao:"Cumeeira de pl\xE1stico, mesmo refor\xE7ada com fibra de vidro"},{cest:"10.012.00",ncmsh:"3921",descricao:"Chapas, laminados pl\xE1sticos em bobina, para uso na constru\xE7\xE3o, exceto os descritos no CEST 10.010.00 e 10.011.00"},{cest:"10.013.00",ncmsh:"3922",descricao:"Banheiras, boxes para chuveiros, pias, lavat\xF3rios, bid\xEAs, sanit\xE1rios e seus assentos e tampas, caixas de descarga e artigos semelhantes para usos sanit\xE1rios ou higi\xEAnicos, de pl\xE1sticos"},{cest:"10.014.00",ncmsh:"3924",descricao:"Artefatos de higiene/toucador de pl\xE1stico, para uso na constru\xE7\xE3o"},{cest:"10.015.00",ncmsh:"39251000",descricao:"Caixa d\u2019\xE1gua, inclusive sua tampa, de pl\xE1stico, mesmo refor\xE7adas com fibra de vidro"},{cest:"10.016.00",ncmsh:"392590",descricao:"Outras telhas, cumeeira e caixa d\u2019\xE1gua, inclusive sua tampa, de pl\xE1stico, mesmo refor\xE7adas com fibra de vidro"},{cest:"10.017.00",ncmsh:"39251000;392590",descricao:"Artefatos para apetrechamento de constru\xE7\xF5es, de pl\xE1sticos, n\xE3o especificados nem compreendidos em outras posi\xE7\xF5es, incluindo persianas, sancas, molduras, apliques e rosetas, caixilhos de polietileno e outros pl\xE1sticos, exceto os descritos nos CEST 10.015.00 e 10.016.00"},{cest:"10.018.00",ncmsh:"39252000",descricao:"Portas, janelas e seus caixilhos, alizares e soleiras"},{cest:"10.019.00",ncmsh:"39253000",descricao:"Postigos, estores (inclu\xEDdas as venezianas) e artefatos semelhantes e suas partes"},{cest:"10.020.00",ncmsh:"392690",descricao:"Outras obras de pl\xE1stico, para uso na constru\xE7\xE3o"},{cest:"10.021.00",ncmsh:"4814",descricao:"Papel de parede e revestimentos de parede semelhantes; papel para vitrais"},{cest:"10.022.00",ncmsh:"68101900",descricao:"Telhas de concreto"},{cest:"10.023.00",ncmsh:"6811",descricao:"REVOGADO"},{cest:"10.024.00",ncmsh:"6811",descricao:"Caixas d\u2019\xE1gua, tanques e reservat\xF3rios e suas tampas, telhas, calhas, cumeeiras e afins, de fibrocimento, cimento-celulose ou semelhantes, contendo ou n\xE3o amianto."},{cest:"10.025.00",ncmsh:"69010000",descricao:"Tijolos, placas (lajes), ladrilhos e outras pe\xE7as cer\xE2micas de farinhas siliciosas f\xF3sseis (\u201Ckieselghur\u201D, tripolita, diatomita, por exemplo) ou de terras siliciosas semelhantes"},{cest:"10.026.00",ncmsh:"6902",descricao:"Tijolos, placas (lajes), ladrilhos e pe\xE7as cer\xE2micas semelhantes, para uso na constru\xE7\xE3o, refrat\xE1rios, que n\xE3o sejam de farinhas siliciosas f\xF3sseis nem de terras siliciosas semelhantes"},{cest:"10.027.00",ncmsh:"6904",descricao:"Tijolos para constru\xE7\xE3o, tijoleiras, tapa-vigas e produtos semelhantes, de cer\xE2mica"},{cest:"10.028.00",ncmsh:"6905",descricao:"Telhas, elementos de chamin\xE9s, condutores de fuma\xE7a, ornamentos arquitet\xF4nicos, de cer\xE2mica, e outros produtos cer\xE2micos para uso na constru\xE7\xE3o"},{cest:"10.029.00",ncmsh:"69060000",descricao:"Tubos, calhas ou algerozes e acess\xF3rios para canaliza\xE7\xF5es, de cer\xE2mica"},{cest:"10.030.00",ncmsh:"6907",descricao:"Ladrilhos e placas de cer\xE2mica, exclusivamente para pavimenta\xE7\xE3o ou revestimento"},{cest:"10.030.01",ncmsh:"6907",descricao:"Cubos, pastilhas e artigos semelhantes de cer\xE2mica, mesmo com suporte, exceto os descritos CEST 10.030.00"},{cest:"10.031.00",ncmsh:"6910",descricao:"Pias, lavat\xF3rios, colunas para lavat\xF3rios, banheiras, bid\xEAs, sanit\xE1rios, caixas de descarga, mict\xF3rios e aparelhos fixos semelhantes para usos sanit\xE1rios, de cer\xE2mica"},{cest:"10.032.00",ncmsh:"69120000",descricao:"Artefatos de higiene/toucador de cer\xE2mica"},{cest:"10.033.00",ncmsh:"7003",descricao:"Vidro vazado ou laminado, em chapas, folhas ou perfis, mesmo com camada absorvente, refletora ou n\xE3o, mas sem qualquer outro trabalho"},{cest:"10.034.00",ncmsh:"7004",descricao:"Vidro estirado ou soprado, em folhas, mesmo com camada absorvente, refletora ou n\xE3o, mas sem qualquer outro trabalho"},{cest:"10.035.00",ncmsh:"7005",descricao:"Vidro flotado e vidro desbastado ou polido em uma ou em ambas as faces, em chapas ou em folhas, mesmo com camada absorvente, refletora ou n\xE3o, mas sem qualquer outro trabalho"},{cest:"10.036.00",ncmsh:"70071900",descricao:"Vidros temperados"},{cest:"10.037.00",ncmsh:"70072900",descricao:"Vidros laminados"},{cest:"10.038.00",ncmsh:"7008",descricao:"Vidros isolantes de paredes m\xFAltiplas"},{cest:"10.039.00",ncmsh:"7016",descricao:"Blocos, placas, tijolos, ladrilhos, telhas e outros artefatos, de vidro prensado ou moldado, mesmo armado, para uso na constru\xE7\xE3o; cubos, pastilhas e outros artigos semelhantes"},{cest:"10.040.00",ncmsh:"72142000",descricao:"Barras pr\xF3prias para constru\xE7\xF5es, exceto vergalh\xF5es"},{cest:"10.041.00",ncmsh:"73089010",descricao:"Outras barras pr\xF3prias para constru\xE7\xF5es, exceto vergalh\xF5es"},{cest:"10.041.01",ncmsh:"73089010",descricao:"Outros vergalh\xF5es"},{cest:"10.042.00",ncmsh:"72142000",descricao:"Vergalh\xF5es"},{cest:"10.043.00",ncmsh:"7213",descricao:"Outros vergalh\xF5es"},{cest:"10.044.00",ncmsh:"72171090;7312",descricao:"Fios de ferro ou a\xE7o n\xE3o ligados, n\xE3o revestidos, mesmo polidos; cordas, cabos, tran\xE7as (entran\xE7ados), lingas e artefatos semelhantes, de ferro ou a\xE7o, n\xE3o isolados para usos el\xE9tricos"},{cest:"10.045.00",ncmsh:"72172010",descricao:"Outros fios de ferro ou a\xE7o, n\xE3o ligados, galvanizados com teor de carbono superior ou igual a 0,6%, em peso"},{cest:"10.045.01",ncmsh:"72172090",descricao:"Outros fios de ferro ou a\xE7o, n\xE3o ligados, galvanizados"},{cest:"10.046.00",ncmsh:"7307",descricao:"Acess\xF3rios para tubos (inclusive uni\xF5es, cotovelos, luvas ou mangas), de ferro fundido, ferro ou a\xE7o"},{cest:"10.047.00",ncmsh:"73083000",descricao:"Portas e janelas, e seus caixilhos, alizares e soleiras de ferro fundido, ferro ou a\xE7o"},{cest:"10.048.00",ncmsh:"73084000;730890",descricao:"Material para andaimes, para arma\xE7\xF5es (cofragens) e para escoramentos, (inclusive arma\xE7\xF5es prontas, para estruturas de concreto armado ou argamassa armada), eletrocalhas e perfilados de ferro fundido, ferro ou a\xE7o, pr\xF3prios para constru\xE7\xE3o, exceto treli\xE7as de a\xE7o"},{cest:"10.049.00",ncmsh:"73084000",descricao:"Treli\xE7as de a\xE7o"},{cest:"10.050.00",ncmsh:"73089090",descricao:"Telhas met\xE1licas"},{cest:"10.051.00",ncmsh:"7310",descricao:"Caixas diversas (tais como caixa de correio, de entrada de \xE1gua, de energia, de instala\xE7\xE3o) de ferro fundido, ferro ou a\xE7o; pr\xF3prias para a constru\xE7\xE3o"},{cest:"10.052.00",ncmsh:"73130000",descricao:"Arame farpado, de ferro ou a\xE7o, arames ou tiras, retorcidos, mesmo farpados, de ferro ou a\xE7o, dos tipos utilizados em cercas"},{cest:"10.053.00",ncmsh:"7314",descricao:"Telas met\xE1licas, grades e redes, de fios de ferro ou a\xE7o"},{cest:"10.054.00",ncmsh:"73151100",descricao:"Correntes de rolos, de ferro fundido, ferro ou a\xE7o"},{cest:"10.055.00",ncmsh:"73151290",descricao:"Outras correntes de elos articulados, de ferro fundido, ferro ou a\xE7o"},{cest:"10.056.00",ncmsh:"73158200",descricao:"Correntes de elos soldados, de ferro fundido, de ferro ou a\xE7o"},{cest:"10.057.00",ncmsh:"731700",descricao:"Tachas, pregos, percevejos, esc\xE1pulas, grampos ondulados ou biselados e artefatos semelhantes, de ferro fundido, ferro ou a\xE7o, mesmo com a cabe\xE7a de outra mat\xE9ria, exceto cobre"},{cest:"10.058.00",ncmsh:"7318",descricao:"Parafusos, pinos ou pernos, roscados, porcas, tira-fundos, ganchos roscados, rebites, chavetas, cavilhas, contrapinos, arruelas (inclu\xEDdas as de press\xE3o) e artefatos semelhantes, de ferro fundido, ferro ou a\xE7o"},{cest:"10.059.00",ncmsh:"7323",descricao:"Palha de ferro ou a\xE7o, exceto os de uso dom\xE9stico classificados na posi\xE7\xE3o NCM 7323.10.00"},{cest:"10.059.01",ncmsh:"7323",descricao:"Esponjas, esfreg\xF5es, luvas e artefatos semelhantes para limpeza, polimento e usos semelhantes, de ferro ou a\xE7o, exceto os de uso dom\xE9stico classificados na posi\xE7\xE3o NCM 7323.10.00"},{cest:"10.060.00",ncmsh:"7324",descricao:"Artefatos de higiene ou de toucador, e suas partes, de ferro fundido, ferro ou a\xE7o, inclu\xEDdas as pias, banheiras, lavat\xF3rios, cubas, mict\xF3rios, tanques e afins de ferro fundido, ferro ou a\xE7o, para uso na constru\xE7\xE3o"},{cest:"10.061.00",ncmsh:"7325",descricao:"Outras obras moldadas, de ferro fundido, ferro ou a\xE7o, para uso na constru\xE7\xE3o"},{cest:"10.062.00",ncmsh:"7326",descricao:"Abra\xE7adeiras"},{cest:"10.063.00",ncmsh:"7407",descricao:"Barras de cobre"},{cest:"10.064.00",ncmsh:"74111010",descricao:"Tubos de cobre e suas ligas, para instala\xE7\xF5es de \xE1gua quente e g\xE1s, para uso na constru\xE7\xE3o"},{cest:"10.065.00",ncmsh:"7412",descricao:"Acess\xF3rios para tubos (por exemplo, uni\xF5es, cotovelos, luvas ou mangas) de cobre e suas ligas, para uso na constru\xE7\xE3o"},{cest:"10.066.00",ncmsh:"7415",descricao:"Tachas, pregos, percevejos, esc\xE1pulas e artefatos semelhantes, de cobre, ou de ferro ou a\xE7o com cabe\xE7a de cobre, parafusos, pinos ou pernos, roscados, porcas, ganchos roscados, rebites, chavetas, cavilhas, contrapinos, arruelas (inclu\xEDdas as de press\xE3o), e artefatos semelhantes, de cobre"},{cest:"10.067.00",ncmsh:"74182000",descricao:"Artefatos de higiene/toucador de cobre, para uso na constru\xE7\xE3o"},{cest:"10.068.00",ncmsh:"76071990",descricao:"Manta de subcobertura aluminizada"},{cest:"10.069.00",ncmsh:"7608",descricao:"Tubos de alum\xEDnio e suas ligas, para refrigera\xE7\xE3o e ar condicionado, para uso na constru\xE7\xE3o"},{cest:"10.070.00",ncmsh:"76090000",descricao:"Acess\xF3rios para tubos (por exemplo, uni\xF5es, cotovelos, luvas ou mangas), de alum\xEDnio, para uso na constru\xE7\xE3o"},{cest:"10.071.00",ncmsh:"7610",descricao:"Constru\xE7\xF5es e suas partes (por exemplo, pontes e elementos de pontes, torres, p\xF3rticos ou pilones, pilares, colunas, arma\xE7\xF5es, estruturas para telhados, portas e janelas, e seus caixilhos, alizares e soleiras, balaustradas), de alum\xEDnio, exceto as constru\xE7\xF5es pr\xE9-fabricadas da posi\xE7\xE3o 9406; chapas, barras, perfis, tubos e semelhantes, de alum\xEDnio, pr\xF3prios para constru\xE7\xF5es"},{cest:"10.072.00",ncmsh:"76152000",descricao:"Artefatos de higiene/toucador de alum\xEDnio, para uso na constru\xE7\xE3o"},{cest:"10.073.00",ncmsh:"7616",descricao:"Outras obras de alum\xEDnio, pr\xF3prias para constru\xE7\xF5es, inclu\xEDdas as persianas"},{cest:"10.074.00",ncmsh:"83024100",descricao:"Outras guarni\xE7\xF5es, ferragens e artigos semelhantes de metais comuns, para constru\xE7\xF5es, inclusive puxadores."},{cest:"10.075.00",ncmsh:"8301",descricao:"Fechaduras e ferrolhos (de chave, de segredo ou el\xE9tricos), de metais comuns, inclu\xEDdas as suas partes fechos e arma\xE7\xF5es com fecho, com fechadura, de metais comuns chaves para estes artigos, de metais comuns; exceto os de uso automotivo"},{cest:"10.076.00",ncmsh:"83021000",descricao:"Dobradi\xE7as de metais comuns, de qualquer tipo"},{cest:"10.077.00",ncmsh:"8307",descricao:"Tubos flex\xEDveis de metais comuns, mesmo com acess\xF3rios, para uso na constru\xE7\xE3o"},{cest:"10.078.00",ncmsh:"8311",descricao:"Fios, varetas, tubos, chapas, eletrodos e artefatos semelhantes, de metais comuns ou de carbonetos met\xE1licos, revestidos exterior ou interiormente de decapantes ou de fundentes, para soldagem (soldadura) ou dep\xF3sito de metal ou de carbonetos met\xE1licos fios e varetas de p\xF3s de metais comuns aglomerados, para metaliza\xE7\xE3o por proje\xE7\xE3o"},{cest:"10.079.00",ncmsh:"8481",descricao:"Torneiras, v\xE1lvulas (inclu\xEDdas as redutoras de press\xE3o e as termost\xE1ticas) e dispositivos semelhantes, para canaliza\xE7\xF5es, caldeiras, reservat\xF3rios, cubas e outros recipientes"},{cest:"10.080.00",ncmsh:"7009",descricao:"Espelhos de vidro, mesmo emoldurados, exceto os de uso automotivo"},{cest:"11.001.00",ncmsh:"28289011;28289019;32064100;34022000;38089419;34025000",descricao:"\xC1gua sanit\xE1ria, branqueador e outros alvejantes"},{cest:"11.002.00",ncmsh:"34012090",descricao:"Sab\xF5es em p\xF3, flocos, palhetas, gr\xE2nulos ou outras formas semelhantes, para lavar roupas"},{cest:"11.003.00",ncmsh:"34012090",descricao:"Sab\xF5es l\xEDquidos para lavar roupas"},{cest:"11.004.00",ncmsh:"34022000",descricao:"Detergentes em p\xF3, flocos, palhetas, gr\xE2nulos ou outras formas semelhantes"},{cest:"11.005.00",ncmsh:"34022000",descricao:"Detergentes l\xEDquidos, exceto para lavar roupa"},{cest:"11.006.00",ncmsh:"34022000",descricao:"Detergente l\xEDquido para lavar roupa"},{cest:"11.007.00",ncmsh:"3402",descricao:"Outros agentes org\xE2nicos de superf\xEDcie (exceto sab\xF5es); prepara\xE7\xF5es tensoativas, prepara\xE7\xF5es para lavagem (inclu\xEDdas as prepara\xE7\xF5es auxiliares para lavagem) e prepara\xE7\xF5es para limpeza (inclusive multiuso e limpadores), mesmo contendo sab\xE3o, exceto os produtos descritos nos CEST 11.001.00, 11.004.00, 11.005.00 e 11.006.00; em embalagem de conte\xFAdo inferior ou igual a 50 litros ou 50 kg"},{cest:"11.008.00",ncmsh:"38099190",descricao:"Amaciante/suavizante"},{cest:"11.009.00",ncmsh:"39241000;39249000;68053010;68053090",descricao:"Esponjas para limpeza"},{cest:"11.010.00",ncmsh:"2207;22089000",descricao:"\xC1lcool et\xEDlico para limpeza"},{cest:"11.011.00",ncmsh:"73231000",descricao:"Esponjas e palhas de a\xE7o; esponjas para limpeza, polimento ou uso semelhantes; todas de uso dom\xE9stico"},{cest:"11.012.00",ncmsh:"39232",descricao:"Sacos de lixo de conte\xFAdo igual ou inferior a 100 litros"},{cest:"12.001.00",ncmsh:"8504",descricao:"Transformadores, bobinas de reat\xE2ncia e de auto indu\xE7\xE3o, inclusive os transformadores de pot\xEAncia superior a 16 KVA, classificados nas posi\xE7\xF5es 8504.33.00 e 8504.34.00; exceto os demais transformadores da subposi\xE7\xE3o 8504.3, os reatores para l\xE2mpadas el\xE9tricas de descarga classificados no c\xF3digo 8504.10.00, os carregadores de acumuladores do c\xF3digo 8504.40.10, os equipamentos de alimenta\xE7\xE3o ininterrupta de energia (UPS ou \u201Cno break\u201D), no c\xF3digo 8504.40.40 e os de uso automotivo"},{cest:"12.002.00",ncmsh:"8516",descricao:"Aquecedores el\xE9tricos de \xE1gua, inclu\xEDdos os de imers\xE3o, chuveiros ou duchas el\xE9tricos, torneiras el\xE9tricas, resist\xEAncias de aquecimento, inclusive as de duchas e chuveiros el\xE9tricos e suas partes; exceto outros fornos, fogareiros (inclu\xEDdas as chapas de coc\xE7\xE3o), grelhas e assadeiras, classificados na posi\xE7\xE3o 8516.60.00"},{cest:"12.003.00",ncmsh:"8535",descricao:"Aparelhos para interrup\xE7\xE3o, seccionamento, prote\xE7\xE3o, deriva\xE7\xE3o, liga\xE7\xE3o ou conex\xE3o de circuitos el\xE9tricos (por exemplo, interruptores, comutadores, corta-circuitos, para-raios, limitadores de tens\xE3o, eliminadores de onda, tomadas de corrente e outros conectores, caixas de jun\xE7\xE3o), para tens\xE3o superior a 1.000V, exceto os de uso automotivo"},{cest:"12.004.00",ncmsh:"8536",descricao:"Aparelhos para interrup\xE7\xE3o, seccionamento, prote\xE7\xE3o, deriva\xE7\xE3o, liga\xE7\xE3o ou conex\xE3o de circuitos el\xE9tricos (por exemplo, interruptores, comutadores, rel\xE9s, corta-circuitos, eliminadores de onda, plugues e tomadas de corrente, suportes para l\xE2mpadas e outros conectores, caixas de jun\xE7\xE3o), para uma tens\xE3o n\xE3o superior a 1.000V; conectores para fibras \xF3pticas, feixes ou cabos de fibras \xF3pticas; exceto \u201Cstarter\u201D classificado na subposi\xE7\xE3o 8536.50 e os de uso automotivo"},{cest:"12.005.00",ncmsh:"8538",descricao:"Partes reconhec\xEDveis como exclusiva ou principalmente destinadas aos aparelhos das posi\xE7\xF5es 8535 e 8536"},{cest:"12.006.00",ncmsh:"74130000",descricao:"Cabos, tran\xE7as e semelhantes, de cobre, n\xE3o isolados para usos el\xE9tricos, exceto os de uso automotivo"},{cest:"12.007.00",ncmsh:"8544;7605;7614",descricao:"Fios, cabos (inclu\xEDdos os cabos coaxiais) e outros condutores, isolados ou n\xE3o, para usos el\xE9tricos (inclu\xEDdos os de cobre ou alum\xEDnio, envernizados ou oxidados anodicamente), mesmo com pe\xE7as de conex\xE3o, inclusive fios e cabos el\xE9tricos, para tens\xE3o n\xE3o superior a 1000V, para uso na constru\xE7\xE3o; fios e cabos telef\xF4nicos e para transmiss\xE3o de dados; cabos de fibras \xF3pticas, constitu\xEDdos de fibras embainhadas individualmente, mesmo com condutores el\xE9tricos ou munidos de pe\xE7as de conex\xE3o; cordas, cabos, tran\xE7as e semelhantes, de alum\xEDnio, n\xE3o isolados para uso el\xE9tricos; exceto os de uso automotivo"},{cest:"12.008.00",ncmsh:"8546",descricao:"Isoladores de qualquer mat\xE9ria, para usos el\xE9tricos"},{cest:"12.009.00",ncmsh:"8547",descricao:"Pe\xE7as isolantes inteiramente de mat\xE9rias isolantes, ou com simples pe\xE7as met\xE1licas de montagem (suportes roscados, por exemplo) incorporadas na massa, para m\xE1quinas, aparelhos e instala\xE7\xF5es el\xE9tricas; tubos isoladores e suas pe\xE7as de liga\xE7\xE3o, de metais comuns, isolados interiormente"},{cest:"13.001.00",ncmsh:"3003;3004",descricao:"Medicamentos de refer\xEAncia - positiva, exceto para uso veterin\xE1rio"},{cest:"13.001.01",ncmsh:"3003;3004",descricao:"Medicamentos de refer\xEAncia - negativa, exceto para uso veterin\xE1rio"},{cest:"13.001.02",ncmsh:"3003;3004",descricao:"Medicamentos de refer\xEAncia - neutra, exceto para uso veterin\xE1rio"},{cest:"13.002.00",ncmsh:"3003;3004",descricao:"Medicamentos gen\xE9rico - positiva, exceto para uso veterin\xE1rio"},{cest:"13.002.01",ncmsh:"3003;3004",descricao:"Medicamentos gen\xE9rico - negativa, exceto para uso veterin\xE1rio"},{cest:"13.002.02",ncmsh:"3003;3004",descricao:"Medicamentos gen\xE9rico - neutra, exceto para uso veterin\xE1rio"},{cest:"13.003.00",ncmsh:"3003;3004",descricao:"Medicamentos similar - positiva, exceto para uso veterin\xE1rio"},{cest:"13.003.01",ncmsh:"3003;3004",descricao:"Medicamentos similar - negativa, exceto para uso veterin\xE1rio"},{cest:"13.003.02",ncmsh:"3003;3004",descricao:"Medicamentos similar - neutra, exceto para uso veterin\xE1rio"},{cest:"13.004.00",ncmsh:"3003;3004",descricao:"Outros tipos de medicamentos - positiva, exceto para uso veterin\xE1rio"},{cest:"13.004.01",ncmsh:"3003;3004",descricao:"Outros tipos de medicamentos - negativa, exceto para uso veterin\xE1rio"},{cest:"13.004.02",ncmsh:"3003;3004",descricao:"Outros tipos de medicamentos - neutra, exceto para uso veterin\xE1rio"},{cest:"13.005.00",ncmsh:"30066000",descricao:"Prepara\xE7\xF5es qu\xEDmicas contraceptivas de refer\xEAncia, \xE0 base de horm\xF4nios, de outros produtos da posi\xE7\xE3o 29.37 ou de espermicidas - positiva."},{cest:"13.005.01",ncmsh:"30066000",descricao:"Prepara\xE7\xF5es qu\xEDmicas contraceptivas de refer\xEAncia, \xE0 base de horm\xF4nios, de outros produtos da posi\xE7\xE3o 29.37 ou de espermicidas - negativa."},{cest:"13.005.02",ncmsh:"30066000",descricao:"Prepara\xE7\xF5es qu\xEDmicas contraceptivas gen\xE9rico, \xE0 base de horm\xF4nios, de outros produtos da posi\xE7\xE3o 29.37 ou de espermicidas \u2013 positiva."},{cest:"13.005.03",ncmsh:"30066000",descricao:"Prepara\xE7\xF5es qu\xEDmicas contraceptivas gen\xE9rico, \xE0 base de horm\xF4nios, de outros produtos da posi\xE7\xE3o 29.37 ou de espermicidas \u2013 negativa."},{cest:"13.005.04",ncmsh:"30066000",descricao:"Prepara\xE7\xF5es qu\xEDmicas contraceptivas similar, \xE0 base de horm\xF4nios, de outros produtos da posi\xE7\xE3o 29.37 ou de espermicidas \u2013 positiva."},{cest:"13.005.05",ncmsh:"30066000",descricao:"Prepara\xE7\xF5es qu\xEDmicas contraceptivas similar, \xE0 base de horm\xF4nios, de outros produtos da posi\xE7\xE3o 29.37 ou de espermicidas \u2013 negativa."},{cest:"13.006.00",ncmsh:"2936",descricao:"Provitaminas e vitaminas, naturais ou reproduzidas por s\xEDntese (inclu\xEDdos os concentrados naturais), bem como os seus derivados utilizados principalmente como vitaminas, misturados ou n\xE3o entre si, mesmo em quaisquer solu\xE7\xF5es - neutra"},{cest:"13.007.00",ncmsh:"300630",descricao:"Prepara\xE7\xF5es opacificantes (contrastantes) para exames radiogr\xE1ficos e reagentes de diagn\xF3stico concebidos para serem administrados ao paciente - positiva"},{cest:"13.007.01",ncmsh:"300630",descricao:"Prepara\xE7\xF5es opacificantes (contrastantes) para exames radiogr\xE1ficos e reagentes de diagn\xF3stico concebidos para serem administrados ao paciente - negativa"},{cest:"13.008.00",ncmsh:"3002",descricao:"Antissoro, outras fra\xE7\xF5es do sangue, produtos imunol\xF3gicos modificados, mesmo obtidos por via biotecnol\xF3gica, exceto para uso veterin\xE1rio - positiva"},{cest:"13.008.01",ncmsh:"3002",descricao:"Antissoro, outras fra\xE7\xF5es do sangue, produtos imunol\xF3gicos modificados, mesmo obtidos por via biotecnol\xF3gica, exceto para uso veterin\xE1rio - negativa"},{cest:"13.009.00",ncmsh:"3002",descricao:"Vacinas e produtos semelhantes, exceto para uso veterin\xE1rio - positiva;"},{cest:"13.009.01",ncmsh:"3002",descricao:"Vacinas e produtos semelhantes, exceto para uso veterin\xE1rio - negativa;"},{cest:"13.010.00",ncmsh:"30051010",descricao:"Curativos (pensos) adesivos e outros artigos com uma camada adesiva, impregnados ou recobertos de subst\xE2ncias farmac\xEAuticas - Lista Positiva"},{cest:"13.010.01",ncmsh:"30051010",descricao:"Curativos (pensos) adesivos e outros artigos com uma camada adesiva, impregnados ou recobertos de subst\xE2ncias farmac\xEAuticas - Lista Negativa"},{cest:"13.011.00",ncmsh:"3005",descricao:"Algod\xE3o, atadura, esparadrapo, gazes, pensos, sinapismos, e outros, acondicionados para venda a retalho para usos medicinais, cir\xFArgicos ou dent\xE1rios, n\xE3o impregnados ou recobertos de subst\xE2ncias farmac\xEAuticas - Lista Neutra"},{cest:"13.012.00",ncmsh:"40151100;40151900",descricao:"Luvas cir\xFArgicas e luvas de procedimento - neutra"},{cest:"13.013.00",ncmsh:"40141000",descricao:"Preservativo \u2013 neutra"},{cest:"13.014.00",ncmsh:"901831",descricao:"Seringas, mesmo com agulhas - neutra"},{cest:"13.015.00",ncmsh:"9018321",descricao:"Agulhas para seringas - neutra"},{cest:"13.016.00",ncmsh:"39269090;90189099",descricao:"Contraceptivos (dispositivos intrauterinos - DIU) - neutra"},{cest:"14.001.00",ncmsh:"7013",descricao:"Objetos de vidro para servi\xE7o de mesa ou de cozinha"},{cest:"14.002.00",ncmsh:"70133700",descricao:"Outros copos, exceto de vitrocer\xE2mica"},{cest:"14.003.00",ncmsh:"70134290",descricao:"Objetos para servi\xE7o de mesa (exceto copos) ou de cozinha, exceto de vitrocer\xE2mica"},{cest:"14.004.00",ncmsh:"3919;3920;3921",descricao:"Lonas pl\xE1sticas, exceto as para uso na constru\xE7\xE3o"},{cest:"14.005.00",ncmsh:"3924",descricao:"Artefatos de higiene/toucador de pl\xE1stico, exceto os para uso na constru\xE7\xE3o"},{cest:"14.006.00",ncmsh:"39241000",descricao:"Servi\xE7os de mesa e outros utens\xEDlios de mesa ou de cozinha, de pl\xE1stico, n\xE3o descart\xE1veis"},{cest:"14.006.01",ncmsh:"39241000",descricao:"Servi\xE7os de mesa e outros utens\xEDlios de mesa ou de cozinha, de pl\xE1stico, descart\xE1veis"},{cest:"14.007.00",ncmsh:"69111010",descricao:"Artigos para servi\xE7o de mesa ou de cozinha, de porcelana, inclusive os descart\xE1veis - estojos"},{cest:"14.008.00",ncmsh:"69111090",descricao:"Artigos para servi\xE7o de mesa ou de cozinha, de porcelana, inclusive os descart\xE1veis - avulsos"},{cest:"14.009.00",ncmsh:"69120000",descricao:"Artigos para servi\xE7o de mesa ou de cozinha, de cer\xE2mica"},{cest:"14.010.00",ncmsh:"69120000",descricao:"Velas para filtros"},{cest:"14.011.00",ncmsh:"4823209",descricao:"Filtros descart\xE1veis para coar caf\xE9 ou ch\xE1"},{cest:"14.012.00",ncmsh:"48236",descricao:"Bandejas, travessas, pratos, x\xEDcaras ou ch\xE1venas, ta\xE7as, copos e artigos semelhantes, de papel ou cart\xE3o"},{cest:"14.013.00",ncmsh:"48131000",descricao:"Papel para cigarro"},{cest:"16.001.00",ncmsh:"40111000",descricao:"Pneus novos, dos tipos utilizados em autom\xF3veis de passageiros (inclu\xEDdos os ve\xEDculos de uso misto - camionetas e os autom\xF3veis de corrida)"},{cest:"16.002.00",ncmsh:"4011",descricao:"Pneus novos, dos tipos utilizados em caminh\xF5es (inclusive para os fora-de-estrada), \xF4nibus, avi\xF5es, m\xE1quinas de terraplenagem, de constru\xE7\xE3o e conserva\xE7\xE3o de estradas, m\xE1quinas e tratores agr\xEDcolas, p\xE1-carregadeira"},{cest:"16.003.00",ncmsh:"40114000",descricao:"Pneus novos para motocicletas"},{cest:"16.004.00",ncmsh:"4011",descricao:"Outros tipos de pneus novos, exceto os itens classificados no CEST 16.005.00"},{cest:"16.005.00",ncmsh:"40115000",descricao:"Pneus novos de borracha dos tipos utilizados em bicicletas"},{cest:"16.006.00",ncmsh:"40121",descricao:"Pneus recauchutados"},{cest:"16.007.00",ncmsh:"401290",descricao:"Protetores de borracha, exceto os itens classificados no CEST 16.007.01"},{cest:"16.007.01",ncmsh:"401290",descricao:"Protetores de borracha para bicicletas"},{cest:"16.008.00",ncmsh:"4013",descricao:"C\xE2maras de ar de borracha, exceto os itens classificados no CEST 16.009.00"},{cest:"16.009.00",ncmsh:"40132000",descricao:"C\xE2maras de ar de borracha dos tipos utilizados em bicicletas"},{cest:"17.001.00",ncmsh:"17049010",descricao:"Chocolate branco, em embalagens de conte\xFAdo inferior ou igual a 1 kg, exclu\xEDdos os ovos de p\xE1scoa de chocolate."},{cest:"17.002.00",ncmsh:"18063110;18063120",descricao:"Chocolates contendo cacau, em embalagens de conte\xFAdo inferior ou igual a 1 kg"},{cest:"17.003.00",ncmsh:"18063210;18063220",descricao:"Chocolate em barras, tabletes ou blocos ou no estado l\xEDquido, em pasta, em p\xF3, gr\xE2nulos ou formas semelhantes, em recipientes ou embalagens imediatas de conte\xFAdo inferior ou igual a 2 kg"},{cest:"17.004.00",ncmsh:"18069000",descricao:"Chocolates e outras prepara\xE7\xF5es aliment\xEDcias contendo cacau, em embalagens de conte\xFAdo inferior ou igual a 1 kg, exclu\xEDdos os achocolatados em p\xF3 e ovos de p\xE1scoa de chocolate."},{cest:"17.005.00",ncmsh:"17049010",descricao:"Ovos de p\xE1scoa de chocolate branco"},{cest:"17.005.01",ncmsh:"18069000",descricao:"Ovos de p\xE1scoa de chocolate"},{cest:"17.006.00",ncmsh:"18069000",descricao:"Achocolatados em p\xF3, em embalagens de conte\xFAdo inferior ou igual a 1 kg, exceto os classificados no CEST 17.006.02"},{cest:"17.006.01",ncmsh:"18061000",descricao:"Cacau em p\xF3, com adi\xE7\xE3o de a\xE7\xFAcar ou de outros edulcorantes, em embalagens de conte\xFAdo inferior ou igual a 1kg"},{cest:"17.006.02",ncmsh:"18069000",descricao:"Achocolatados em p\xF3, em c\xE1psulas"},{cest:"17.007.00",ncmsh:"18069000",descricao:"Caixas de bombons contendo cacau, em embalagens de conte\xFAdo inferior ou igual a 1 kg"},{cest:"17.008.00",ncmsh:"17049090",descricao:"Bombons, inclusive \xE0 base de chocolate branco sem cacau"},{cest:"17.009.00",ncmsh:"18069000",descricao:"Bombons, balas, caramelos, confeitos, pastilhas e outros produtos de confeitaria, contendo cacau"},{cest:"17.010.00",ncmsh:"2009",descricao:"Sucos de frutas ou de produtos hort\xEDcolas; mistura de sucos"},{cest:"17.011.00",ncmsh:"20098",descricao:"\xC1gua de coco"},{cest:"17.012.00",ncmsh:"04021;04022;04029",descricao:"Leite em p\xF3, blocos ou gr\xE2nulos, exceto creme de leite"},{cest:"17.013.00",ncmsh:"19011020",descricao:"Farinha l\xE1ctea"},{cest:"17.014.00",ncmsh:"19011010",descricao:"Leite modificado para alimenta\xE7\xE3o de crian\xE7as"},{cest:"17.015.00",ncmsh:"19011090;19011030",descricao:"Prepara\xE7\xF5es para alimenta\xE7\xE3o infantil \xE0 base de farinhas, grumos, s\xEAmolas ou amidos e outros"},{cest:"17.016.00",ncmsh:"04011010;04012010",descricao:"Leite \u201Clonga vida\u201D (UHT - \u201CUltra High Temperature\u201D), em recipiente de conte\xFAdo inferior ou igual a 2 litros"},{cest:"17.016.01",ncmsh:"04011010;04012010",descricao:"Leite \u201Clonga vida\u201D (UHT - \u201CUltra High Temperature\u201D), em recipiente de conte\xFAdo superior a 2 litros e inferior ou igual a 5 litros"},{cest:"17.017.00",ncmsh:"04014010;04015010",descricao:"Leite em recipiente de conte\xFAdo inferior ou igual a 1 litro"},{cest:"17.017.01",ncmsh:"04014010;04015010",descricao:"Leite em recipiente de conte\xFAdo superior a 1 litro e inferior ou igual a 5 litros"},{cest:"17.018.00",ncmsh:"04011090;04012090",descricao:"Leite do tipo pasteurizado em recipiente de conte\xFAdo inferior ou igual a 1 litro"},{cest:"17.018.01",ncmsh:"04011090;04012090",descricao:"Leite do tipo pasteurizado em recipiente de conte\xFAdo superior a 1 litro e inferior ou igual a 5 litros"},{cest:"17.019.00",ncmsh:"0401402;04022130;04022930;04029",descricao:"Creme de leite, em recipiente de conte\xFAdo inferior ou igual a 1 kg"},{cest:"17.019.01",ncmsh:"0401402;04022130;04022930;04029",descricao:"Creme de leite, em recipiente de conte\xFAdo superior a 1 kg"},{cest:"17.019.02",ncmsh:"040110;040120;040150;040210;04022920",descricao:"Outros cremes de leite, em recipiente de conte\xFAdo inferior ou igual a 1kg"},{cest:"17.019.03",ncmsh:"040110;040120;040150;040210;04022920",descricao:"Outros cremes de leite, em recipiente de conte\xFAdo superior a 1kg"},{cest:"17.020.00",ncmsh:"04029",descricao:"Leite condensado, em recipiente de conte\xFAdo inferior ou igual a 1 kg"},{cest:"17.020.01",ncmsh:"04029",descricao:"Leite condensado, em recipiente de conte\xFAdo superior a 1 kg"},{cest:"17.021.00",ncmsh:"403",descricao:"Iogurte e leite fermentado em recipiente de conte\xFAdo inferior ou igual a 2 litros, exceto o item classificado no CEST 17.022.00"},{cest:"17.021.01",ncmsh:"403",descricao:"Iogurte e leite fermentado em recipiente de conte\xFAdo superior a 2 litros, exceto o item classificado no CEST 17.022.00"},{cest:"17.022.00",ncmsh:"04039000",descricao:"Coalhada"},{cest:"17.023.00",ncmsh:"406",descricao:"Requeij\xE3o e similares, em recipiente de conte\xFAdo inferior ou igual a 1 kg, exceto as embalagens individuais de conte\xFAdo inferior ou igual a 10 g"},{cest:"17.023.01",ncmsh:"406",descricao:"Requeij\xE3o e similares, em recipiente de conte\xFAdo superior a 1 kg"},{cest:"17.024.00",ncmsh:"406",descricao:"Queijos, exceto os dos CEST 17.024.01, 17.024.02, 17.024.03 e 17.024.04"},{cest:"17.024.01",ncmsh:"04061010",descricao:"Queijo mu\xE7arela"},{cest:"17.024.02",ncmsh:"04061090",descricao:"Queijo minas frescal"},{cest:"17.024.03",ncmsh:"04061090",descricao:"Queijo ricota"},{cest:"17.024.04",ncmsh:"04061090",descricao:"Queijo petitsuisse"},{cest:"17.025.00",ncmsh:"04051000",descricao:"Manteiga, em embalagem de conte\xFAdo inferior ou igual a 1 kg, exceto as embalagens individuais de conte\xFAdo inferior ou igual a 10 g"},{cest:"17.025.01",ncmsh:"04051000",descricao:"Manteiga, em embalagem de conte\xFAdo superior a 1 kg"},{cest:"17.025.02",ncmsh:"04059090",descricao:"Manteiga de garrafa"},{cest:"17.026.00",ncmsh:"15171000",descricao:"Margarina e creme vegetal em recipiente de conte\xFAdo inferior ou igual a 500 g, exceto as embalagens individuais de conte\xFAdo inferior ou igual a 10 g"},{cest:"17.027.00",ncmsh:"15171000",descricao:"Margarina e creme vegetal, em recipiente de conte\xFAdo superior a 500 g e inferior ou igual a 1 kg, exceto as embalagens individuais de conte\xFAdo inferior ou igual a 10 g"},{cest:"17.027.01",ncmsh:"15171000",descricao:"Margarina e creme vegetal, em recipiente de conte\xFAdo superior a 1 kg"},{cest:"17.027.02",ncmsh:"151790",descricao:"Outras margarinas e cremes vegetais em recipiente de conte\xFAdo inferior a 1 kg, exceto as embalagens individuais de conte\xFAdo inferior ou igual a 10 g"},{cest:"17.028.00",ncmsh:"15162000",descricao:"Gorduras e \xF3leos vegetais e respectivas fra\xE7\xF5es, parcial ou totalmente hidrogenados, interesterificados, reesterificados ou elaidinizados, mesmo refinados, mas n\xE3o preparados de outro modo, em recipiente de conte\xFAdo inferior ou igual a 1 kg, exceto as embalagens individuais de conte\xFAdo inferior ou igual a 10 g"},{cest:"17.028.01",ncmsh:"15162000",descricao:"Gorduras e \xF3leos vegetais e respectivas fra\xE7\xF5es, parcial ou totalmente hidrogenados, interesterificados, reesterificados ou elaidinizados, mesmo refinados, mas n\xE3o preparados de outro modo, em recipiente de conte\xFAdo superior a 1 kg, exceto as embalagens individuais de conte\xFAdo inferior ou igual a 10 g"},{cest:"17.029.00",ncmsh:"19019020",descricao:"Doces de leite"},{cest:"17.030.00",ncmsh:"19041000;19049000",descricao:"Produtos \xE0 base de cereais, obtidos por expans\xE3o ou torrefa\xE7\xE3o"},{cest:"17.031.00",ncmsh:"19059090",descricao:"Salgadinhos diversos, exceto os classificados no CEST 17.031.01 e 17.031.02"},{cest:"17.031.01",ncmsh:"19059090",descricao:"Salgadinhos diversos, derivados de farinha de trigo"},{cest:"17.031.02",ncmsh:"19059090",descricao:"Biscoitos de polvilho"},{cest:"17.032.00",ncmsh:"20052000;20059",descricao:"Batata frita, inhame e mandioca fritos"},{cest:"17.033.00",ncmsh:"20081",descricao:"Amendoim e castanhas tipo aperitivo, em embalagem de conte\xFAdo inferior ou igual a 1 kg"},{cest:"17.033.01",ncmsh:"20081",descricao:"Amendoim e castanhas tipo aperitivo, em embalagem de conte\xFAdo superior a 1 kg"},{cest:"17.034.00",ncmsh:"21032010",descricao:"Catchup em embalagens imediatas de conte\xFAdo inferior ou igual a 650 g, exceto as embalagens contendo envelopes individualizados (sach\xEAs) de conte\xFAdo inferior ou igual a 10 g"},{cest:"17.035.00",ncmsh:"21039021;21039091",descricao:"Condimentos e temperos compostos, incluindo molho de pimenta e outros molhos, em embalagens imediatas de conte\xFAdo inferior ou igual a 1 kg, exceto as embalagens contendo envelopes individualizados (sach\xEAs) de conte\xFAdo inferior ou igual a 3 g"},{cest:"17.036.00",ncmsh:"21031010",descricao:"Molhos de soja preparados em embalagens imediatas de conte\xFAdo inferior ou igual a 650 g, exceto as embalagens contendo envelopes individualizados (sach\xEAs) de conte\xFAdo inferior ou igual a 10 g"},{cest:"17.037.00",ncmsh:"21033010",descricao:"Farinha de mostarda em embalagens de conte\xFAdo inferior ou igual a 1 kg"},{cest:"17.038.00",ncmsh:"21033021",descricao:"Mostarda preparada em embalagens imediatas de conte\xFAdo inferior ou igual a 650 g, exceto as embalagens contendo envelopes individualizados (sach\xEAs) de conte\xFAdo inferior ou igual a 10 g"},{cest:"17.039.00",ncmsh:"21039011",descricao:"Maionese em embalagens imediatas de conte\xFAdo inferior ou igual a 650 g, exceto as embalagens contendo envelopes individualizados (sach\xEAs) de conte\xFAdo inferior ou igual a 10 g"},{cest:"17.040.00",ncmsh:"2002",descricao:"Tomates preparados ou conservados, exceto em vinagre ou em \xE1cido ac\xE9tico, em embalagens de conte\xFAdo inferior ou igual a 1 kg"},{cest:"17.041.00",ncmsh:"21032010",descricao:"Molhos de tomate em embalagens imediatas de conte\xFAdo inferior ou igual a 1 kg"},{cest:"17.042.00",ncmsh:"17049090;19042000;19049000",descricao:"Barra de cereais"},{cest:"17.043.00",ncmsh:"18063120;18063220;18069000",descricao:"Barra de cereais contendo cacau"},{cest:"17.044.00",ncmsh:"11010010",descricao:"Farinha de trigo especial, em embalagem inferior ou igual a 1 kg"},{cest:"17.044.01",ncmsh:"11010010",descricao:"Farinha de trigo especial, em embalagem superior a 1 kg e inferior a 5 kg"},{cest:"17.044.02",ncmsh:"11010010",descricao:"Farinha de trigo especial, em embalagem igual a 5 kg"},{cest:"17.044.03",ncmsh:"11010010",descricao:"Farinha de trigo especial, em embalagem superior a 5 kg e inferior ou igual a 25 kg"},{cest:"17.044.04",ncmsh:"11010010",descricao:"Farinha de trigo especial, em embalagem superior a 25 kg e inferior ou igual a 50 kg"},{cest:"17.044.05",ncmsh:"11010010",descricao:"Farinha de trigo comum, em embalagem igual a 5 kg"},{cest:"17.044.06",ncmsh:"11010010",descricao:"Farinha de trigo comum, em embalagem superior a 5 kg e inferior ou igual a 25 kg"},{cest:"17.044.07",ncmsh:"11010010",descricao:"Farinha de trigo comum, em embalagem superior a 25 kg e inferior ou igual a 50 kg"},{cest:"17.044.08",ncmsh:"11010010",descricao:"Farinha de trigo dom\xE9stica especial, em embalagem superior a 5 kg e inferior e igual a 10 kg"},{cest:"17.044.09",ncmsh:"11010010",descricao:"Farinha de trigo dom\xE9stica com fermento, em embalagem superior a 5 kg e inferior e igual a 10 kg"},{cest:"17.044.10",ncmsh:"11010010",descricao:"Farinha de trigo especial, em embalagem superior a 50 Kg"},{cest:"17.044.11",ncmsh:"11010010",descricao:"Farinha de trigo comum, em embalagem inferior ou igual a 1 kg"},{cest:"17.044.12",ncmsh:"11010010",descricao:"Farinha de trigo comum, em embalagem superior a 1 kg e inferior a 5 Kg"},{cest:"17.044.13",ncmsh:"11010010",descricao:"Farinha de trigo comum, em embalagem superior a 50 kg"},{cest:"17.044.14",ncmsh:"11010010",descricao:"Farinha de trigo dom\xE9stica especial, em embalagem inferior ou igual a 1 kg"},{cest:"17.044.15",ncmsh:"11010010",descricao:"Farinha de trigo dom\xE9stica especial, em embalagem superior a 1 kg e inferior a 5 Kg"},{cest:"17.044.16",ncmsh:"11010010",descricao:"Farinha de trigo dom\xE9stica especial, em embalagem igual a 5 Kg"},{cest:"17.044.17",ncmsh:"11010010",descricao:"Farinha de trigo dom\xE9stica especial, em embalagem superior a 10 Kg"},{cest:"17.044.18",ncmsh:"11010010",descricao:"Farinha de trigo dom\xE9stica com fermento, em embalagem inferior ou igual a 1 kg"},{cest:"17.044.19",ncmsh:"11010010",descricao:"Farinha de trigo dom\xE9stica com fermento, em embalagem superior a 1 kg e inferior a 5 Kg"},{cest:"17.044.20",ncmsh:"11010010",descricao:"Farinha de trigo dom\xE9stica com fermento, em embalagem igual a 5 Kg"},{cest:"17.044.21",ncmsh:"11010010",descricao:"Farinha de trigo dom\xE9stica com fermento, em embalagem superior a 10 Kg"},{cest:"17.044.22",ncmsh:"11010010",descricao:"Outras farinhas de trigo, em embalagem inferior ou igual a 1 kg"},{cest:"17.044.23",ncmsh:"11010010",descricao:"Outras farinhas de trigo, em embalagem superior a 1 kg e inferior a 5 Kg"},{cest:"17.044.24",ncmsh:"11010010",descricao:"Outras farinhas de trigo, em embalagem igual a 5 Kg"},{cest:"17.044.25",ncmsh:"11010010",descricao:"Outras farinhas de trigo, em embalagem superior a 5 Kg e inferior ou igual a 25 kg"},{cest:"17.044.26",ncmsh:"11010010",descricao:"Outras farinhas de trigo, em embalagem superior a 25 Kg e inferior ou igual a 50 kg"},{cest:"17.044.27",ncmsh:"11010010",descricao:"Outras farinhas de trigo, em embalagem superior a 50 Kg"},{cest:"17.045.00",ncmsh:"11010020",descricao:"Farinha de mistura de trigo com centeio (m\xE9teil)"},{cest:"17.046.00",ncmsh:"19012000;19019090",descricao:"Misturas e prepara\xE7\xF5es para bolos, em embalagem inferior 5 kg"},{cest:"17.046.01",ncmsh:"19012000;19019090",descricao:"Misturas e prepara\xE7\xF5es para bolos, em embalagem igual a 5 kg"},{cest:"17.046.02",ncmsh:"19012000;19019090",descricao:"Misturas e prepara\xE7\xF5es para bolos, em embalagem superior a 5 kg e inferior ou igual a 25 Kg"},{cest:"17.046.03",ncmsh:"19012000;19019090",descricao:"Misturas e prepara\xE7\xF5es para bolos, em embalagem superior a 25 kg e inferior ou igual a 50 Kg"},{cest:"17.046.04",ncmsh:"19012000;19019090",descricao:"Misturas e prepara\xE7\xF5es para bolos, em embalagem superior a 50 Kg"},{cest:"17.046.05",ncmsh:"19012000;19019090",descricao:"Misturas e prepara\xE7\xF5es para p\xE3es com menos de 80% de farinha de trigo na sua composi\xE7\xE3o final, em embalagem inferior a 5 kg"},{cest:"17.046.06",ncmsh:"19012000;19019090",descricao:"Misturas e prepara\xE7\xF5es para p\xE3es com menos de 80% de farinha de trigo na sua composi\xE7\xE3o final, em embalagem igual a 5 kg"},{cest:"17.046.07",ncmsh:"19012000;19019090",descricao:"Misturas e prepara\xE7\xF5es para p\xE3es com menos de 80% de farinha de trigo na sua composi\xE7\xE3o final, em embalagem superior a 5 kg e inferior ou igual a 25 Kg"},{cest:"17.046.08",ncmsh:"19012000;19019090",descricao:"Misturas e prepara\xE7\xF5es para p\xE3es com menos de 80% de farinha de trigo na sua composi\xE7\xE3o final, em embalagem superior a 25 kg e inferior ou igual a 50 Kg"},{cest:"17.046.09",ncmsh:"19012000;19019090",descricao:"Misturas e prepara\xE7\xF5es para p\xE3es com menos de 80% de farinha de trigo na sua composi\xE7\xE3o final, em embalagem superior a 50 Kg"},{cest:"17.046.10",ncmsh:"19012000;19019090",descricao:"Misturas e prepara\xE7\xF5es para p\xE3es com, no m\xEDnimo, 80% de farinha de trigo na sua composi\xE7\xE3o final, em embalagem inferior a 5 kg"},{cest:"17.046.11",ncmsh:"19012000;19019090",descricao:"Misturas e prepara\xE7\xF5es para p\xE3es com, no m\xEDnimo, 80% de farinha de trigo na sua composi\xE7\xE3o final, em embalagem igual a 5 kg"},{cest:"17.046.12",ncmsh:"19012000;19019090",descricao:"Misturas e prepara\xE7\xF5es para p\xE3es com, no m\xEDnimo, 80% de farinha de trigo na sua composi\xE7\xE3o final, em embalagem superior a 5 kg e inferior ou igual a 25 Kg"},{cest:"17.046.13",ncmsh:"19012000;19019090",descricao:"Misturas e prepara\xE7\xF5es para p\xE3es com, no m\xEDnimo, 80% de farinha de trigo na sua composi\xE7\xE3o final, em embalagem superior a 25 kg e inferior ou igual a 50 Kg"},{cest:"17.046.14",ncmsh:"19012000;19019090",descricao:"Misturas e prepara\xE7\xF5es para p\xE3es com, no m\xEDnimo, 80% de farinha de trigo na sua composi\xE7\xE3o final, em embalagem superior a 50 Kg"},{cest:"17.046.15",ncmsh:"19012000;19019090",descricao:"Misturas e pastas para a prepara\xE7\xE3o de produtos de padaria, pastelaria e da ind\xFAstria de bolachas e biscoitos, da posi\xE7\xE3o 19.05, exceto os previstos nos CEST 17.046.00 a 17.046.14 e 17.046.16."},{cest:"17.046.16",ncmsh:"19012000;19019090",descricao:"Misturas e prepara\xE7\xF5es com, no m\xEDnimo, 80% de farinha de trigo na sua composi\xE7\xE3o final, exceto as descritas nos CEST 17.046.10 a 17.046.15."},{cest:"17.047.00",ncmsh:"19023000",descricao:"Massas aliment\xEDcias tipo instant\xE2nea, exceto as descritas no CEST 17047.01."},{cest:"17.047.01",ncmsh:"19023000",descricao:"Massas aliment\xEDcias tipo instant\xE2nea, derivadas de farinha de trigo."},{cest:"17.048.00",ncmsh:"1902",descricao:"Massas aliment\xEDcias, cozidas ou recheadas (de carne ou de outras subst\xE2ncias) ou preparadas de outro modo, exceto as descritas nos CEST 17.047.00, 17.048.01, e 17.048.02"},{cest:"17.048.01",ncmsh:"19024000",descricao:"Cuscuz"},{cest:"17.048.02",ncmsh:"19022000",descricao:"Massas aliment\xEDcias recheadas (mesmo cozidas ou preparadas de outro modo)"},{cest:"17.049.00",ncmsh:"19021",descricao:"Massas aliment\xEDcias do tipo comum, n\xE3o cozidas, nem recheadas, nem preparadas de outro modo, exceto as descritas nos CEST 17.049.03 e 17.049.06"},{cest:"17.049.01",ncmsh:"19021",descricao:"Massas aliment\xEDcias do tipo s\xEAmola, n\xE3o cozidas, nem recheadas, nem preparadas de outro modo, exceto as descritas nos CEST 17.049.04 e 17.049.07"},{cest:"17.049.02",ncmsh:"19021",descricao:"Massas aliment\xEDcias do tipo granoduro, n\xE3o cozidas, nem recheadas, nem preparadas de outro modo, exceto a descrita no CEST 17.049.05"},{cest:"17.049.03",ncmsh:"19021900",descricao:"Massas aliment\xEDcias do tipo comum, n\xE3o cozidas, nem recheadas, nem preparadas de outro modo, que n\xE3o contenham ovos, derivadas de farinha de trigo, exceto as descritas no CEST17.049.08"},{cest:"17.049.04",ncmsh:"19021900",descricao:"Massas aliment\xEDcias do tipo s\xEAmola, n\xE3o cozidas, nem recheadas, nem preparadas de outro modo, que n\xE3o contenham ovos, derivadas de farinha de trigo, exceto as descritas no CEST 17.049.09"},{cest:"17.049.05",ncmsh:"19021900",descricao:"Massas aliment\xEDcias do tipo granoduro, n\xE3o cozidas, nem recheadas, nem preparadas de outro modo, que n\xE3o contenham ovos"},{cest:"17.049.06",ncmsh:"19021",descricao:"Massas aliment\xEDcias do tipo comum, n\xE3o cozidas, nem recheadas, nem preparadas de outro modo, exceto a descrita no CEST 17.049.03, derivadas de farinha de trigo"},{cest:"17.049.07",ncmsh:"19021",descricao:"Massas aliment\xEDcias do tipo s\xEAmola, n\xE3o cozidas, nem recheadas, nem preparadas de outro modo, exceto a descrita no CEST 17.049.04, derivadas de farinha de trigo"},{cest:"17.049.08",ncmsh:"19021900",descricao:"Massas aliment\xEDcias do tipo comum, n\xE3o cozidas, nem recheadas, nem preparadas de outro modo, que n\xE3o contenham ovos, derivadas de farinha de trigo"},{cest:"17.049.09",ncmsh:"19021900",descricao:"Massas aliment\xEDcias do tipo s\xEAmola, n\xE3o cozidas, nem recheadas, nem preparadas de outro modo, que n\xE3o contenham ovos, derivadas de farinha de trigo"},{cest:"17.050.00",ncmsh:"190520",descricao:"P\xE3es industrializados, inclusive de especiarias, exceto panetones e bolo de forma"},{cest:"17.051.00",ncmsh:"19052090",descricao:"Bolo de forma, inclusive de especiarias"},{cest:"17.052.00",ncmsh:"19052010",descricao:"Panetones"},{cest:"17.053.00",ncmsh:"19053100",descricao:"Biscoitos e bolachas derivados de farinha de trigo; (exceto dos tipos \u201Ccream cracker\u201D, \u201C\xE1gua e sal\u201D, \u201Cmaisena\u201D, \u201Cmaria\u201D e outros de consumo popular que n\xE3o sejam adicionados de cacau, nem recheados, cobertos ou amanteigados, independentemente de sua denomina\xE7\xE3o comercial)"},{cest:"17.053.01",ncmsh:"19053100",descricao:"Biscoitos e bolachas derivados de farinha de trigo dos tipos \u201Cmaisena\u201D e \u201Cmaria\u201D e outros de consumo popular que n\xE3o sejam adicionados de cacau, nem recheados, cobertos ou amanteigados, independentemente de sua denomina\xE7\xE3o comercial, exceto o CEST 17.053.02"},{cest:"17.053.02",ncmsh:"19053100",descricao:'Biscoitos e bolachas derivados de farinha de trigo dos tipos "cream cracker" e "\xE1gua e sal" de consumo popular'},{cest:"17.054.00",ncmsh:"19053100",descricao:'Biscoitos e bolachas n\xE3o derivados de farinha de trigo; (exceto dos tipos "cream cracker", "\xE1gua e sal", "maisena" e "maria" e outros de consumo popular que n\xE3o sejam adicionados de cacau, nem recheados, cobertos ou amanteigados, independentemente de sua denomina\xE7\xE3o comercial)'},{cest:"17.054.01",ncmsh:"19053100",descricao:'Biscoitos e bolachas n\xE3o derivados de farinha de trigo dos tipos "maisena" e "maria" e outros de consumo popular que n\xE3o sejam adicionados de cacau, nem recheados, cobertos ou amanteigados, independentemente de sua denomina\xE7\xE3o comercial, exceto o CEST 17.054.02'},{cest:"17.054.02",ncmsh:"19053100",descricao:'Biscoitos e bolachas n\xE3o derivados de farinha de trigo dos tipos "cream cracker" e "\xE1gua e sal" de consumo popular'},{cest:"17.056.00",ncmsh:"19059020",descricao:"Biscoitos e bolachas derivados de farinha de trigo dos tipos \u201Ccream cracker\u201D e \u201C\xE1gua e sal\u201D"},{cest:"17.056.01",ncmsh:"19059020",descricao:"Biscoitos e bolachas n\xE3o derivados de farinha de trigo dos tipos \u201Ccream cracker\u201D e \u201C\xE1gua e sal\u201D"},{cest:"17.056.02",ncmsh:"19059020",descricao:"Outras bolachas, exceto casquinhas para sorvete e os biscoitos e bolachas relacionados nos CEST 17.056.00 e 17.056.01"},{cest:"17.057.00",ncmsh:"19053200",descricao:"\u201CWaffles\u201D e \u201Cwafers\u201D - sem cobertura"},{cest:"17.058.00",ncmsh:"19053200",descricao:"\u201CWaffles\u201D e \u201Cwafers\u201D - com cobertura"},{cest:"17.059.00",ncmsh:"19054000",descricao:"Torradas, p\xE3o torrado e produtos semelhantes torrados"},{cest:"17.060.00",ncmsh:"19059010",descricao:"Outros p\xE3es de forma"},{cest:"17.062.00",ncmsh:"19059090",descricao:"Outros p\xE3es, exceto o classificado no CEST 17.062.03"},{cest:"17.062.01",ncmsh:"19059090",descricao:"Outros bolos industrializados e produtos de panifica\xE7\xE3o n\xE3o especificados anteriormente, incluindo as pizzas; exceto os classificados nos CEST 17.062.02 e 17.062.03"},{cest:"17.062.02",ncmsh:"19059020;19059090",descricao:"Casquinhas para sorvete"},{cest:"17.062.03",ncmsh:"19059090",descricao:"P\xE3o franc\xEAs at\xE9 200g"},{cest:"17.063.00",ncmsh:"19051000",descricao:"P\xE3o denominado knackebrot"},{cest:"17.064.00",ncmsh:"190590",descricao:"Demais p\xE3es industrializados"},{cest:"17.065.00",ncmsh:"15079011",descricao:"\xD3leo de soja refinado, em recipientes com capacidade inferior ou igual a 5 litros, exceto as embalagens individuais de conte\xFAdo inferior ou igual a 15 mililitros"},{cest:"17.066.00",ncmsh:"1508",descricao:"\xD3leo de amendoim refinado, em recipientes com capacidade inferior ou igual a 5 litros, exceto as embalagens individuais de conte\xFAdo inferior ou igual a 15 mililitros"},{cest:"17.067.00",ncmsh:"1509",descricao:"Azeites de oliva, em recipientes com capacidade inferior a 2 litros, exceto as embalagens individuais de conte\xFAdo inferior ou igual a 20 mililitros"},{cest:"17.067.01",ncmsh:"1509",descricao:"Azeites de oliva, em recipientes com capacidade igual ou superior a 2 litros e inferior ou igual a 5 litros"},{cest:"17.067.02",ncmsh:"1509",descricao:"Azeites de oliva, em recipientes com capacidade superior a 5 litros"},{cest:"17.068.00",ncmsh:"15100000",descricao:"Outros \xF3leos e respectivas fra\xE7\xF5es, obtidos exclusivamente a partir de azeitonas, mesmo refinados, mas n\xE3o quimicamente modificados, e misturas desses \xF3leos ou fra\xE7\xF5es com \xF3leos ou fra\xE7\xF5es da posi\xE7\xE3o 15.09, em recipientes com capacidade inferior ou igual a 5 litros, exceto as embalagens individuais de conte\xFAdo inferior ou igual a 15 mililitros"},{cest:"17.069.00",ncmsh:"15121911",descricao:"\xD3leo de girassol em recipientes com capacidade inferior ou igual a 5 litros, exceto as embalagens individuais de conte\xFAdo inferior ou igual a 15 mililitros"},{cest:"17.069.01",ncmsh:"15122910",descricao:"\xD3leo de algod\xE3o refinado em recipientes com capacidade inferior ou igual a 5 litros, exceto as embalagens individuais de conte\xFAdo inferior ou igual a 15 mililitros"},{cest:"17.070.00",ncmsh:"15141",descricao:"\xD3leo de canola, em recipientes com capacidade inferior ou igual a 5 litros, exceto as embalagens individuais de conte\xFAdo inferior ou igual a 15 mililitros"},{cest:"17.071.00",ncmsh:"15151900",descricao:"\xD3leo de linha\xE7a refinado, em recipientes com capacidade inferior ou igual a 5 litros, exceto as embalagens individuais de conte\xFAdo inferior ou igual a 15 mililitros"},{cest:"17.072.00",ncmsh:"15152910",descricao:"\xD3leo de milho refinado, em recipientes com capacidade inferior ou igual a 5 litros, exceto as embalagens individuais de conte\xFAdo inferior ou igual a 15 mililitros"},{cest:"17.073.00",ncmsh:"15122990",descricao:"Outros \xF3leos refinados, em recipientes com capacidade inferior ou igual a 5 litros, exceto as embalagens individuais de conte\xFAdo inferior ou igual a 15 mililitros"},{cest:"17.074.00",ncmsh:"15179010",descricao:"Misturas de \xF3leos refinados, para consumo humano, em recipientes com capacidade inferior ou igual a 5 litros, exceto as embalagens individuais de conte\xFAdo inferior ou igual a 15 mililitros"},{cest:"17.075.00",ncmsh:"1511;1513;1514;1515;1516;1518",descricao:"Outros \xF3leos vegetais comest\xEDveis n\xE3o especificados anteriormente"},{cest:"17.076.00",ncmsh:"16010000",descricao:"Enchidos (embutidos) e produtos semelhantes, de carne, miudezas ou sangue; exceto salsicha, lingui\xE7a e mortadela"},{cest:"17.077.00",ncmsh:"16010000",descricao:"Salsicha e lingui\xE7a, exceto as descritas nos CEST 17.077.01"},{cest:"17.077.01",ncmsh:"16010000",descricao:"Salsicha em lata"},{cest:"17.078.00",ncmsh:"16010000",descricao:"Mortadela"},{cest:"17.079.00",ncmsh:"1602",descricao:"Outras prepara\xE7\xF5es e conservas de carne, miudezas ou de sangue, exceto as descritas nos CEST 17.079.01, 17.079.02, 17.079.03, 17.079.04, 17.079.05, 17.079.06 e 17.079.07"},{cest:"17.079.01",ncmsh:"16023100",descricao:"Outras prepara\xE7\xF5es e conservas de carne, de miudezas ou de sangue, de aves da posi\xE7\xE3o 01.05: de peruas e de perus."},{cest:"17.079.02",ncmsh:"16023210",descricao:"Outras prepara\xE7\xF5es e conservas de carne, de miudezas ou de sangue, de aves da posi\xE7\xE3o 01.05: de galos e de galinhas, com conte\xFAdo de carne ou de miudezas superior ou igual a 57 %, em peso, n\xE3o cozidas"},{cest:"17.079.03",ncmsh:"16023220",descricao:"Outras prepara\xE7\xF5es e conservas de carne, de miudezas ou de sangue, todas de aves da posi\xE7\xE3o 01.05: de galos e de galinhas, com conte\xFAdo de carne ou de miudezas superior ou igual a 57 %, em peso, cozidas"},{cest:"17.079.04",ncmsh:"16024100",descricao:"Outras prepara\xE7\xF5es e conservas de carne, de miudezas ou de sangue, da esp\xE9cie su\xEDna: pernas e respectivos peda\xE7os"},{cest:"17.079.05",ncmsh:"16024900",descricao:"Outras prepara\xE7\xF5es e conservas de carne, de miudezas ou de sangue, da esp\xE9cie su\xEDna: outras, incluindo as misturas, exceto os descritos no CEST 17.079.07"},{cest:"17.079.06",ncmsh:"16025000",descricao:"Outras prepara\xE7\xF5es e conservas de carne, de miudezas ou de sangue, da esp\xE9cie bovina"},{cest:"17.079.07",ncmsh:"16024900",descricao:"Apresuntado"},{cest:"17.080.00",ncmsh:"1604",descricao:"Prepara\xE7\xF5es e conservas de peixes; caviar e seus suced\xE2neos preparados a partir de ovas de peixe; exceto os descritos nos CEST 17.080.01 e 17.081.00"},{cest:"17.080.01",ncmsh:"16042010",descricao:"Outras prepara\xE7\xF5es e conservas de atuns"},{cest:"17.081.00",ncmsh:"1604",descricao:"Sardinha em conserva"},{cest:"17.082.00",ncmsh:"1605",descricao:"Crust\xE1ceos, moluscos e outros invertebrados aqu\xE1ticos, preparados ou em conservas"},{cest:"17.083.00",ncmsh:"02102000;02109900;1502",descricao:"Carne de gado bovino, ovino e bufalino e produtos comest\xEDveis resultantes da matan\xE7a desse gado submetidos \xE0 salga, secagem ou desidrata\xE7\xE3o, exceto os descritos no CEST 17.083.01"},{cest:"17.083.01",ncmsh:"02102000",descricao:"Charque e jerkedbeef"},{cest:"17.084.00",ncmsh:"0201;0202;0204;0206",descricao:"Carne de gado bovino, ovino e bufalino e demais produtos comest\xEDveis resultantes da matan\xE7a desse gado frescos, refrigerados ou congelados"},{cest:"17.085.00",ncmsh:"204",descricao:"Carnes de animais das esp\xE9cies caprina, frescas, refrigeradas ou congeladas"},{cest:"17.086.00",ncmsh:"02109900;15021019;15029000",descricao:"Carnes e demais produtos comest\xEDveis frescos, resfriados, congelados, salgados ou salmourados resultantes do abate de caprinos"},{cest:"17.087.00",ncmsh:"0207;0209;02109900;1501",descricao:"Carnes e demais produtos comest\xEDveis frescos, resfriados, congelados, salgados, em salmoura, simplesmente temperados, secos ou defumados, resultantes do abate de aves, exceto os descritos no CEST 17.087.02"},{cest:"17.087.01",ncmsh:"0203;0206;0209;02101;02109900;1501",descricao:"Carnes e demais produtos comest\xEDveis frescos, resfriados, congelados, salgados, em salmoura, simplesmente temperados, secos ou defumados, resultantes do abate de su\xEDnos"},{cest:"17.087.02",ncmsh:"02071;02072",descricao:"Carnes de aves inteiras e com peso unit\xE1rio superior a 3 kg, temperadas"},{cest:"17.088.00",ncmsh:"710",descricao:"Produtos hort\xEDcolas, cozidos em \xE1gua ou vapor, congelados, em embalagens de conte\xFAdo inferior ou igual a 1 kg"},{cest:"17.088.01",ncmsh:"710",descricao:"Produtos hort\xEDcolas, cozidos em \xE1gua ou vapor, congelados, em embalagens de conte\xFAdo superior a 1 kg"},{cest:"17.089.00",ncmsh:"0811",descricao:"Frutas, n\xE3o cozidas ou cozidas em \xE1gua ou vapor, congeladas, mesmo adicionadas de a\xE7\xFAcar ou de outros edulcorantes, em embalagens de conte\xFAdo inferior ou igual a 1 kg"},{cest:"17.089.01",ncmsh:"0811;2008",descricao:"Frutas, n\xE3o cozidas ou cozidas em \xE1gua ou vapor, congeladas, mesmo adicionadas de a\xE7\xFAcar ou de outros edulcorantes, em embalagens de conte\xFAdo superior a 1 kg"},{cest:"17.090.00",ncmsh:"2001",descricao:"Produtos hort\xEDcolas, frutas e outras partes comest\xEDveis de plantas, preparados ou conservados em vinagre ou em \xE1cido ac\xE9tico, em embalagens de conte\xFAdo inferior ou igual a 1 kg"},{cest:"17.090.01",ncmsh:"2001",descricao:"Produtos hort\xEDcolas, frutas e outras partes comest\xEDveis de plantas, preparados ou conservados em vinagre ou em \xE1cido ac\xE9tico, em embalagens de conte\xFAdo superior a 1 kg"},{cest:"17.091.00",ncmsh:"2004",descricao:"Outros produtos hort\xEDcolas preparados ou conservados, exceto em vinagre ou em \xE1cido ac\xE9tico, congelados, com exce\xE7\xE3o dos produtos da posi\xE7\xE3o 20.06, em embalagens de conte\xFAdo inferior ou igual a 1 kg"},{cest:"17.091.01",ncmsh:"2004",descricao:"Outros produtos hort\xEDcolas preparados ou conservados, exceto em vinagre ou em \xE1cido ac\xE9tico, congelados, com exce\xE7\xE3o dos produtos da posi\xE7\xE3o 20.06, em embalagens de conte\xFAdo superior a 1 kg"},{cest:"17.092.00",ncmsh:"2005",descricao:"Outros produtos hort\xEDcolas preparados ou conservados, exceto em vinagre ou em \xE1cido ac\xE9tico, n\xE3o congelados, com exce\xE7\xE3o dos produtos da posi\xE7\xE3o 20.06, exclu\xEDdos batata, inhame e mandioca fritos, em embalagens de conte\xFAdo inferior ou igual a 1 kg"},{cest:"17.092.01",ncmsh:"2005",descricao:"Outros produtos hort\xEDcolas preparados ou conservados, exceto em vinagre ou em \xE1cido ac\xE9tico, n\xE3o congelados, com exce\xE7\xE3o dos produtos da posi\xE7\xE3o 20.06, exclu\xEDdos batata, inhame e mandioca fritos, em embalagens de conte\xFAdo superior a 1 kg"},{cest:"17.093.00",ncmsh:"20060000",descricao:"Produtos hort\xEDcolas, frutas, cascas de frutas e outras partes de plantas, conservados com a\xE7\xFAcar (passados por calda, glaceados ou cristalizados), em embalagens de conte\xFAdo inferior ou igual a 1 kg"},{cest:"17.093.01",ncmsh:"20060000",descricao:"Produtos hort\xEDcolas, frutas, cascas de frutas e outras partes de plantas, conservados com a\xE7\xFAcar (passados por calda, glaceados ou cristalizados), em embalagens de conte\xFAdo superior a 1 kg"},{cest:"17.094.00",ncmsh:"2007",descricao:"Doces, geleias, \u201Cmarmelades\u201D, pur\xEAs e pastas de frutas, obtidos por cozimento, com ou sem adi\xE7\xE3o de a\xE7\xFAcar ou de outros edulcorantes, em embalagens de conte\xFAdo inferior ou igual a 1 kg, exceto as embalagens individuais de conte\xFAdo inferior ou igual a 10 g"},{cest:"17.094.01",ncmsh:"2007",descricao:"Doces, geleias, \u201Cmarmelades\u201D, pur\xEAs e pastas de frutas, obtidos por cozimento, com ou sem adi\xE7\xE3o de a\xE7\xFAcar ou de outros edulcorantes, em embalagens de conte\xFAdo superior a 1 kg"},{cest:"17.095.00",ncmsh:"2008",descricao:"Frutas e outras partes comest\xEDveis de plantas, preparadas ou conservadas de outro modo, com ou sem adi\xE7\xE3o de a\xE7\xFAcar ou de outros edulcorantes ou de \xE1lcool, n\xE3o especificadas nem compreendidas em outras posi\xE7\xF5es, exclu\xEDdos os amendoins e castanhas tipo aperitivo, da posi\xE7\xE3o 2008.1, em embalagens de conte\xFAdo inferior ou igual a 1 kg"},{cest:"17.095.01",ncmsh:"2008",descricao:"Frutas e outras partes comest\xEDveis de plantas, preparadas ou conservadas de outro modo, com ou sem adi\xE7\xE3o de a\xE7\xFAcar ou de outros edulcorantes ou de \xE1lcool, n\xE3o especificadas nem compreendidas em outras posi\xE7\xF5es, exclu\xEDdos os amendoins e castanhas tipo aperitivo, da posi\xE7\xE3o 2008.1, em embalagens superior a 1 kg"},{cest:"17.096.00",ncmsh:"901",descricao:"Caf\xE9 torrado e mo\xEDdo, em embalagens de conte\xFAdo inferior ou igual a 2 kg, exceto os classificados nos CEST 17.096.04 e 17.096.05"},{cest:"17.096.01",ncmsh:"901",descricao:"Caf\xE9 torrado e mo\xEDdo, em embalagens de conte\xFAdo superior a 2 kg"},{cest:"17.096.02",ncmsh:"901",descricao:"Caf\xE9 torrado em gr\xE3o, em embalagens de conte\xFAdo inferior ou igual a 2 kg"},{cest:"17.096.03",ncmsh:"901",descricao:"Caf\xE9 torrado em gr\xE3o, em embalagens de conte\xFAdo superior a 2 kg"},{cest:"17.096.04",ncmsh:"901",descricao:"Caf\xE9 torrado e mo\xEDdo, em c\xE1psulas, exceto os descritos no CEST 17.096.05"},{cest:"17.096.05",ncmsh:"901",descricao:"Caf\xE9 descafeinado torrado e mo\xEDdo, em c\xE1psulas"},{cest:"17.097.00",ncmsh:"0902;12119090;21069090",descricao:"Ch\xE1, mesmo aromatizado"},{cest:"17.098.00",ncmsh:"090300",descricao:"Mate"},{cest:"17.099.00",ncmsh:"17011;17019900",descricao:"A\xE7\xFAcar refinado, em embalagens de conte\xFAdo inferior ou igual a 2 kg, exceto as embalagens contendo envelopes individualizados (sach\xEAs) de conte\xFAdo inferior ou igual a 10 g"},{cest:"17.099.01",ncmsh:"17011;17019900",descricao:"A\xE7\xFAcar refinado, em embalagens de conte\xFAdo superior a 2 kg e inferior ou igual a 5 kg"},{cest:"17.099.02",ncmsh:"17011;17019900",descricao:"A\xE7\xFAcar refinado, em embalagens de conte\xFAdo superior a 5 kg"},{cest:"17.100.00",ncmsh:"17019100",descricao:"A\xE7\xFAcar refinado adicionado de aromatizante ou de corante em embalagens de conte\xFAdo inferior ou igual a 2 kg, exceto as embalagens contendo envelopes individualizados (sach\xEAs) de conte\xFAdo inferior ou igual a 10 g"},{cest:"17.100.01",ncmsh:"17019100",descricao:"A\xE7\xFAcar refinado adicionado de aromatizante ou de corante em embalagens de conte\xFAdo superior a 2 kg e inferior ou igual a 5 kg"},{cest:"17.100.02",ncmsh:"17019100",descricao:"A\xE7\xFAcar refinado adicionado de aromatizante ou de corante em embalagens de conte\xFAdo superior a 5 kg"},{cest:"17.101.00",ncmsh:"17011;17019900",descricao:"A\xE7\xFAcar cristal, em embalagens de conte\xFAdo inferior ou igual a 2 kg, exceto as embalagens contendo envelopes individualizados (sach\xEAs) de conte\xFAdo inferior ou igual a 10 g"},{cest:"17.101.01",ncmsh:"17011;17019900",descricao:"A\xE7\xFAcar cristal, em embalagens de conte\xFAdo superior a 2 kg e inferior ou igual a 5 kg"},{cest:"17.101.02",ncmsh:"17011;17019900",descricao:"A\xE7\xFAcar cristal, em embalagens de conte\xFAdo superior a 5 kg"},{cest:"17.102.00",ncmsh:"17019100",descricao:"A\xE7\xFAcar cristal adicionado de aromatizante ou de corante, em embalagens de conte\xFAdo inferior ou igual a 2 kg, exceto as embalagens contendo envelopes individualizados (sach\xEAs) de conte\xFAdo inferior ou igual a 10 g"},{cest:"17.102.01",ncmsh:"17019100",descricao:"A\xE7\xFAcar cristal adicionado de aromatizante ou de corante, em embalagens de conte\xFAdo superior a 2 kg e inferior ou igual a 5 kg"},{cest:"17.102.02",ncmsh:"170191",descricao:"A\xE7\xFAcar cristal adicionado de aromatizante ou de corante, em embalagens de conte\xFAdo superior a 5 kg"},{cest:"17.103.00",ncmsh:"17011;17019900",descricao:"Outros tipos de a\xE7\xFAcar, em embalagens de conte\xFAdo inferior ou igual a 2 kg, exceto as embalagens contendo envelopes individualizados (sach\xEAs) de conte\xFAdo inferior ou igual a 10 g"},{cest:"17.103.01",ncmsh:"17011;17019900",descricao:"Outros tipos de a\xE7\xFAcar, em embalagens de conte\xFAdo superior a 2 kg e inferior ou igual a 5 kg"},{cest:"17.103.02",ncmsh:"17011;17019900",descricao:"Outros tipos de a\xE7\xFAcar, em embalagens de conte\xFAdo superior a 5 kg"},{cest:"17.104.00",ncmsh:"17019100",descricao:"Outros tipos de a\xE7\xFAcar adicionado de aromatizante ou de corante, em embalagens de conte\xFAdo inferior ou igual a 2 kg, exceto as embalagens contendo envelopes individualizados (sach\xEAs) de conte\xFAdo inferior ou igual a 10 g"},{cest:"17.104.01",ncmsh:"17019100",descricao:"Outros tipos de a\xE7\xFAcar adicionado de aromatizante ou de corante, em embalagens de conte\xFAdo superior a 2 kg e inferior ou igual a 5 kg"},{cest:"17.104.02",ncmsh:"17019100",descricao:"Outros tipos de a\xE7\xFAcar adicionado de aromatizante ou de corante, em embalagens de conte\xFAdo superior a 5 kg"},{cest:"17.105.00",ncmsh:"1702",descricao:"Outros a\xE7\xFAcares em embalagens de conte\xFAdo inferior ou igual a 2 kg, exceto as embalagens contendo envelopes individualizados (sach\xEAs) de conte\xFAdo inferior ou igual a 10 g"},{cest:"17.105.01",ncmsh:"1702",descricao:"Outros a\xE7\xFAcares, em embalagens de conte\xFAdo superior a 2 kg e inferior ou igual a 5 kg"},{cest:"17.105.02",ncmsh:"1702",descricao:"Outros a\xE7\xFAcares, em embalagens de conte\xFAdo superior a 5 kg"},{cest:"17.106.00",ncmsh:"20081900",descricao:"Milho para pipoca (micro-ondas)"},{cest:"17.107.00",ncmsh:"21011",descricao:"Extratos, ess\xEAncias e concentrados de caf\xE9 e prepara\xE7\xF5es \xE0 base destes extratos, ess\xEAncias ou concentrados ou \xE0 base de caf\xE9, em embalagens de conte\xFAdo inferior ou igual a 500 g, exceto os classificados no CEST 17.107.01"},{cest:"17.107.01",ncmsh:"21011",descricao:"Extratos, ess\xEAncias e concentrados de caf\xE9 e prepara\xE7\xF5es \xE0 base destes extratos, ess\xEAncias ou concentrados ou \xE0 base de caf\xE9, em c\xE1psulas"},{cest:"17.108.00",ncmsh:"210120",descricao:"Extratos, ess\xEAncias e concentrados de ch\xE1 ou de mate e prepara\xE7\xF5es \xE0 base destes extratos, ess\xEAncias ou concentrados ou \xE0 base de ch\xE1 ou de mate, em embalagens de conte\xFAdo inferior ou igual a 500 g, exceto as bebidas prontas \xE0 base de mate ou ch\xE1 e os itens classificados no CEST 17.108.01"},{cest:"17.108.01",ncmsh:"210120",descricao:"Extratos, ess\xEAncias e concentrados de ch\xE1 ou de mate e prepara\xE7\xF5es \xE0 base destes extratos, ess\xEAncias ou concentrados ou \xE0 base de ch\xE1 ou de mate, em c\xE1psulas"},{cest:"17.109.00",ncmsh:"19019090;21011190;21011200",descricao:"Prepara\xE7\xF5es em p\xF3 para cappuccino e similares, em embalagens de conte\xFAdo inferior ou igual a 500 g"},{cest:"17.110.00",ncmsh:"22021000",descricao:"Refrescos e outras bebidas prontas para beber, \xE0 base de ch\xE1 e mate"},{cest:"17.111.00",ncmsh:"22021000",descricao:"Refrescos e outras bebidas n\xE3o alco\xF3licas, exceto os refrigerantes e as demais bebidas nos CEST 03.007.00 e 17.110.00"},{cest:"17.112.00",ncmsh:"22029900",descricao:"N\xE9ctares de frutas e outras bebidas n\xE3o alco\xF3licas prontas para beber, exceto isot\xF4nicos e energ\xE9ticos"},{cest:"17.113.00",ncmsh:"210120;22029900",descricao:"Bebidas prontas \xE0 base de mate ou ch\xE1"},{cest:"17.114.00",ncmsh:"22029900",descricao:"Bebidas prontas \xE0 base de caf\xE9"},{cest:"17.115.00",ncmsh:"22029900",descricao:"Bebidas alimentares prontas \xE0 base de soja, leite ou cacau, inclusive os produtos denominados bebidas l\xE1cteas"},{cest:"17.116.00",ncmsh:"00813;00909",descricao:"Sementes de anis (erva-doce), badiana (anis-estrelado), funcho, coentro, cominho ou alcaravia; bagas de zimbro; fruta seca, misturas de fruta seca ou de fruta de casa rija; quando acondicionadas em saquinhos, especialmente, para a prepara\xE7\xE3o de infus\xF5es ou de tisanas (\u201Cch\xE1s\u201D)"},{cest:"19.001.00",ncmsh:"32131000",descricao:"Tinta guache"},{cest:"19.002.00",ncmsh:"39162000",descricao:"Espiral - perfil para encaderna\xE7\xE3o, de pl\xE1stico e outros materiais classificados nas posi\xE7\xF5es 3901 a 3914"},{cest:"19.003.00",ncmsh:"39161000;391690",descricao:"Outros espirais - perfil para encaderna\xE7\xE3o, de pl\xE1stico e outros materiais classificados nas posi\xE7\xF5es 3901 a 3914"},{cest:"19.004.00",ncmsh:"39261000",descricao:"Artigos de escrit\xF3rio e artigos escolares de pl\xE1stico e outros materiais classificados nas posi\xE7\xF5es 3901 a 3914, exceto estojos"},{cest:"19.005.00",ncmsh:"42021;42029",descricao:"Maletas e pastas para documentos e de estudante, e artefatos semelhantes"},{cest:"19.005.01",ncmsh:"42021;42029",descricao:"Ba\xFAs, malas e maletas para viagem"},{cest:"19.006.00",ncmsh:"39269090",descricao:"Prancheta de pl\xE1stico"},{cest:"19.007.00",ncmsh:"48022090;48119090",descricao:"Bobina para fax"},{cest:"19.008.00",ncmsh:"4802549",descricao:"Papel seda"},{cest:"19.009.00",ncmsh:"48025499;48025799;48162000",descricao:"Bobina para m\xE1quina de calcular, PDV ou equipamentos similares"},{cest:"19.010.00",ncmsh:"4802569;4802579;4802589",descricao:"Cartolina escolar e papel cart\xE3o, brancos e coloridos, cortados em folhas em que um lado seja inferior ou igual a 500 mm e o outro inferior ou igual a 700 mm, quando n\xE3o dobradas, e peso igual ou superior a 120g/m\xB2; recados autoadesivos (LP note); pap\xE9is de presente; todos cortados em tamanho pronto para uso escolar e dom\xE9stico"},{cest:"19.011.00",ncmsh:"37031010;37031029;37032000;37039010;37040000;48022000",descricao:"Papel fotogr\xE1fico, exceto: (i) os pap\xE9is fotogr\xE1ficos emulsionados com haleto de prata tipo brilhante, matte ou lustre, em rolo e, com largura igual ou superior a 102 mm e comprimento inferior ou igual a 350 m, (ii) os pap\xE9is fotogr\xE1ficos emulsionados com haleto de prata tipo brilhante ou fosco, em folha e com largura igual ou superior a 152 mm e comprimento inferior ou igual a 307 mm, (iii) papel de qualidade fotogr\xE1fica com tecnologia \u201CThermo-autochrome\u201D, que submetido a um processo de aquecimento seja capaz de formar imagens por rea\xE7\xE3o qu\xEDmica e combina\xE7\xE3o das camadas cyan, magenta e amarela"},{cest:"19.012.00",ncmsh:"48101390",descricao:"Papel alma\xE7o"},{cest:"19.013.00",ncmsh:"48169010",descricao:"Papel hectogr\xE1fico"},{cest:"19.014.00",ncmsh:"39202019",descricao:"Papel celofane e tipo celofane"},{cest:"19.015.00",ncmsh:"48062000",descricao:"Papel imperme\xE1vel"},{cest:"19.016.00",ncmsh:"48081000",descricao:"Papel crepon"},{cest:"19.017.00",ncmsh:"48102290",descricao:"Papel fantasia"},{cest:"19.018.00",ncmsh:"4809;4816",descricao:"Papel-carbono, papel autocopiativo (exceto os vendidos em rolos de di\xE2metro igual ou superior a 60 cm e os vendidos em folhas de formato igual ou superior a 60 cm de altura e igual ou superior a 90 cm de largura) e outros pap\xE9is para c\xF3pia ou duplica\xE7\xE3o (inclu\xEDdos os pap\xE9is para est\xEAnceis ou para chapas ofsete), est\xEAnceis completos e chapas ofsete, de papel, em folhas, mesmo acondicionados em caixas"},{cest:"19.019.00",ncmsh:"4817",descricao:"Envelopes, aerogramas, bilhetes-postais n\xE3o ilustrados e cart\xF5es para correspond\xEAncia, de papel ou cart\xE3o, caixas, sacos e semelhantes, de papel ou cart\xE3o, contendo um sortido de artigos para correspond\xEAncia"},{cest:"19.020.00",ncmsh:"48201000",descricao:"Livros de registro e de contabilidade, blocos de notas, de encomendas, de recibos, de apontamentos, de papel para cartas, agendas e artigos semelhantes"},{cest:"19.021.00",ncmsh:"48202000",descricao:"Cadernos"},{cest:"19.022.00",ncmsh:"48203000",descricao:"Classificadores, capas para encaderna\xE7\xE3o (exceto as capas para livros) e capas de processos"},{cest:"19.023.00",ncmsh:"48204000",descricao:"Formul\xE1rios em blocos tipo \u201Cmanifold\u201D, mesmo com folhas intercaladas de papel-carbono"},{cest:"19.024.00",ncmsh:"48205000",descricao:"\xC1lbuns para amostras ou para cole\xE7\xF5es"},{cest:"19.025.00",ncmsh:"48209000",descricao:"Pastas para documentos, outros artigos escolares, de escrit\xF3rio ou de papelaria, de papel ou cart\xE3o e capas para livros, de papel ou cart\xE3o"},{cest:"19.026.00",ncmsh:"49090000",descricao:"Cart\xF5es postais impressos ou ilustrados, cart\xF5es impressos com votos ou mensagens pessoais, mesmo ilustrados, com ou sem envelopes, guarni\xE7\xF5es ou aplica\xE7\xF5es (conhecidos como cart\xF5es de express\xE3o social - de \xE9poca/sentimento)"},{cest:"19.027.00",ncmsh:"96081000",descricao:"Canetas esferogr\xE1ficas"},{cest:"19.028.00",ncmsh:"96082000",descricao:"Canetas e marcadores, com ponta de feltro ou com outras pontas porosas"},{cest:"19.029.00",ncmsh:"96083000",descricao:"Canetas tinteiro"},{cest:"19.030.00",ncmsh:"9608",descricao:"Outras canetas; sortidos de canetas"},{cest:"19.031.00",ncmsh:"480256",descricao:"Papel cortado \u201Ccutsize\u201D (tipo A3, A4, of\xEDcio I e II, carta e outros)"},{cest:"19.032.00",ncmsh:"52105990",descricao:"Papel camur\xE7a"},{cest:"19.033.00",ncmsh:"76071190",descricao:"Papel laminado e papel espelho"},{cest:"20.001.00",ncmsh:"12119090",descricao:"Henna (embalagens de conte\xFAdo inferior ou igual a 200 g)"},{cest:"20.001.01",ncmsh:"12119090",descricao:"Henna (embalagens de conte\xFAdo superior a 200 g)"},{cest:"20.002.00",ncmsh:"27121000",descricao:"Vaselina"},{cest:"20.003.00",ncmsh:"28142000",descricao:"Amon\xEDaco em solu\xE7\xE3o aquosa (am\xF4nia)"},{cest:"20.004.00",ncmsh:"28470000",descricao:"Per\xF3xido de hidrog\xEAnio, em embalagens de conte\xFAdo inferior ou igual a 500 ml"},{cest:"20.005.00",ncmsh:"30067000",descricao:"Lubrifica\xE7\xE3o \xEDntima"},{cest:"20.006.00",ncmsh:"3301",descricao:"\xD3leos essenciais (desterpenados ou n\xE3o), inclu\xEDdos os chamados \u201Cconcretos\u201D ou \u201Cabsolutos\u201D; resinoides; oleorresinas de extra\xE7\xE3o; solu\xE7\xF5es concentradas de \xF3leos essenciais em gorduras, em \xF3leos fixos, em ceras ou em mat\xE9rias an\xE1logas, obtidas por tratamento de flores atrav\xE9s de subst\xE2ncias gordas ou por macera\xE7\xE3o; subprodutos terp\xEAnicos residuais da desterpena\xE7\xE3o dos \xF3leos essenciais; \xE1guas destiladas arom\xE1ticas e solu\xE7\xF5es aquosas de \xF3leos essenciais, em embalagens de conte\xFAdo inferior ou igual a 500 ml"},{cest:"20.007.00",ncmsh:"33030010",descricao:"Perfumes (extratos)"},{cest:"20.008.00",ncmsh:"33030020",descricao:"\xC1guas-de-col\xF4nia"},{cest:"20.009.00",ncmsh:"33041000",descricao:"Produtos de maquilagem para os l\xE1bios"},{cest:"20.010.00",ncmsh:"33042010",descricao:"Sombra, delineador, l\xE1pis para sobrancelhas e r\xEDmel"},{cest:"20.011.00",ncmsh:"33042090",descricao:"Outros produtos de maquilagem para os olhos"},{cest:"20.012.00",ncmsh:"33043000",descricao:"Prepara\xE7\xF5es para manicuros e pedicuros, incluindo removedores de esmalte \xE0 base de acetona"},{cest:"20.013.00",ncmsh:"33049100",descricao:"P\xF3s, inclu\xEDdos os compactos"},{cest:"20.014.00",ncmsh:"33049910",descricao:"Cremes de beleza, cremes nutritivos e lo\xE7\xF5es t\xF4nicas"},{cest:"20.015.00",ncmsh:"33049990",descricao:"Outros produtos de beleza ou de maquilagem preparados e prepara\xE7\xF5es para conserva\xE7\xE3o ou cuidados da pele, exceto as prepara\xE7\xF5es solares e antissolares"},{cest:"20.016.00",ncmsh:"33049990",descricao:"Prepara\xE7\xF5es solares e antissolares"},{cest:"20.017.00",ncmsh:"33051000",descricao:"Xampus para o cabelo"},{cest:"20.018.00",ncmsh:"33052000",descricao:"Prepara\xE7\xF5es para ondula\xE7\xE3o ou alisamento, permanentes, dos cabelos"},{cest:"20.019.00",ncmsh:"33053000",descricao:"Laqu\xEAs para o cabelo"},{cest:"20.020.00",ncmsh:"33059000",descricao:"Outras prepara\xE7\xF5es capilares, incluindo m\xE1scaras e finalizadores"},{cest:"20.021.00",ncmsh:"33059000",descricao:"Condicionadores"},{cest:"20.022.00",ncmsh:"33059000",descricao:"Tintura para o cabelo"},{cest:"20.023.00",ncmsh:"33061000",descricao:"Dentifr\xEDcios"},{cest:"20.024.00",ncmsh:"33062000",descricao:"Fios utilizados para limpar os espa\xE7os interdentais (fios dentais)"},{cest:"20.025.00",ncmsh:"33069000",descricao:"Outras prepara\xE7\xF5es para higiene bucal ou dent\xE1ria"},{cest:"20.026.00",ncmsh:"33071000",descricao:"Prepara\xE7\xF5es para barbear (antes, durante ou ap\xF3s)"},{cest:"20.027.00",ncmsh:"33072010",descricao:"Desodorantes (desodorizantes) corporais l\xEDquidos, exceto os classificados no CEST 20.027.01"},{cest:"20.027.01",ncmsh:"33072010",descricao:"Lo\xE7\xF5es e \xF3leos desodorantes hidratantes l\xEDquidos"},{cest:"20.028.00",ncmsh:"33072010",descricao:"Antiperspirantes l\xEDquidos"},{cest:"20.029.00",ncmsh:"33072090",descricao:"Outros desodorantes (desodorizantes) corporais, exceto os classificados no CEST 20.029.01"},{cest:"20.029.01",ncmsh:"33072090",descricao:"Outras lo\xE7\xF5es e \xF3leos desodorantes hidratantes"},{cest:"20.030.00",ncmsh:"33072090",descricao:"Outros antiperspirantes"},{cest:"20.031.00",ncmsh:"33073000",descricao:"Sais perfumados e outras prepara\xE7\xF5es para banhos"},{cest:"20.032.00",ncmsh:"33079000",descricao:"Outros produtos de perfumaria preparados"},{cest:"20.032.01",ncmsh:"33079000",descricao:"Outros produtos de toucador preparados"},{cest:"20.033.00",ncmsh:"33079000",descricao:"Solu\xE7\xF5es para lentes de contato ou para olhos artificiais"},{cest:"20.034.00",ncmsh:"34011190",descricao:"Sab\xF5es de toucador em barras, peda\xE7os ou figuras moldados, exceto CEST 20.034.01"},{cest:"20.034.01",ncmsh:"34011190",descricao:"Len\xE7os umedecidos"},{cest:"20.035.00",ncmsh:"34011900",descricao:"Outros sab\xF5es, produtos e prepara\xE7\xF5es, em barras, peda\xE7os ou figuras moldados"},{cest:"20.036.00",ncmsh:"34012010",descricao:"Sab\xF5es de toucador sob outras formas"},{cest:"20.037.00",ncmsh:"34013000",descricao:"Produtos e prepara\xE7\xF5es org\xE2nicos tensoativos para lavagem da pele, na forma de l\xEDquido ou de creme, acondicionados para venda a retalho, mesmo contendo sab\xE3o"},{cest:"20.038.00",ncmsh:"40149010",descricao:"Bolsa para gelo ou para \xE1gua quente"},{cest:"20.039.00",ncmsh:"40149090",descricao:"Chupetas e bicos para mamadeiras e para chupetas, de borracha"},{cest:"20.040.00",ncmsh:"39249000;39269040;9269090",descricao:"Chupetas e bicos para mamadeiras e para chupetas, de silicone"},{cest:"20.041.00",ncmsh:"42021",descricao:"Malas e maletas de toucador"},{cest:"20.042.00",ncmsh:"48181000",descricao:"Papel higi\xEAnico - folha simples"},{cest:"20.043.00",ncmsh:"48181000",descricao:"Papel higi\xEAnico - folha dupla e tripla"},{cest:"20.044.00",ncmsh:"48182000",descricao:"Len\xE7os (inclu\xEDdos os de maquilagem) e toalhas de m\xE3o"},{cest:"20.045.00",ncmsh:"48182000",descricao:"Papel toalha de uso institucional do tipo comercializado em rolos igual ou superior a 80 metros e do tipo comercializado em folhas intercaladas"},{cest:"20.046.00",ncmsh:"48183000",descricao:"Toalhas e guardanapos de mesa"},{cest:"20.047.00",ncmsh:"48189090",descricao:"Toalhas de cozinha (papel toalha de uso dom\xE9stico)"},{cest:"20.048.00",ncmsh:"96190000",descricao:"Fraldas, exceto os descritos no CEST 20.048.01"},{cest:"20.048.01",ncmsh:"96190000",descricao:"Fraldas de fibras t\xEAxteis"},{cest:"20.049.00",ncmsh:"96190000",descricao:"Tamp\xF5es higi\xEAnicos"},{cest:"20.050.00",ncmsh:"96190000",descricao:"Absorventes higi\xEAnicos externos"},{cest:"20.051.00",ncmsh:"56012190",descricao:"Hastes flex\xEDveis (uso n\xE3o medicinal)"},{cest:"20.052.00",ncmsh:"56039290",descricao:"Suti\xE3 descart\xE1vel, assemelhados e papel para depila\xE7\xE3o"},{cest:"20.053.00",ncmsh:"82032090",descricao:"Pin\xE7as para sobrancelhas"},{cest:"20.054.00",ncmsh:"82141000",descricao:"Esp\xE1tulas (artigos de cutelaria)"},{cest:"20.055.00",ncmsh:"82142000",descricao:"Utens\xEDlios e sortidos de utens\xEDlios de manicuros ou de pedicuros (inclu\xEDdas as limas para unhas)"},{cest:"20.056.00",ncmsh:"90251110;90251990",descricao:"Term\xF4metros, inclusive o digital"},{cest:"20.057.00",ncmsh:"96032",descricao:"Escovas e pinc\xE9is de barba, escovas para cabelos, para c\xEDlios ou para unhas e outras escovas de toucador de pessoas, inclu\xEDdas as que sejam partes de aparelhos, exceto escovas de dentes"},{cest:"20.058.00",ncmsh:"96032100",descricao:"Escovas de dentes, inclu\xEDdas as escovas para dentaduras"},{cest:"20.059.00",ncmsh:"96033000",descricao:"Pinc\xE9is para aplica\xE7\xE3o de produtos cosm\xE9ticos"},{cest:"20.060.00",ncmsh:"96050000",descricao:"Sortidos de viagem, para toucador de pessoas para costura ou para limpeza de cal\xE7ado ou de roupas"},{cest:"20.061.00",ncmsh:"9615",descricao:"Pentes, travessas para cabelo e artigos semelhantes; grampos (alfinetes) para cabelo; pin\xE7as (pinceguiches), onduladores, bobes (rolos) e artefatos semelhantes para penteados, e suas partes, exceto os classificados na posi\xE7\xE3o 8516 e suas partes"},{cest:"20.062.00",ncmsh:"96162000",descricao:"Borlas ou esponjas para p\xF3s ou para aplica\xE7\xE3o de outros cosm\xE9ticos ou de produtos de toucador"},{cest:"20.063.00",ncmsh:"39233000;39249000;39241000;40149090;70102000",descricao:"Mamadeiras"},{cest:"20.064.00",ncmsh:"82121020;82122010",descricao:"Aparelhos e l\xE2minas de barbear"},{cest:"21.001.00",ncmsh:"73211100;73218100;73219000",descricao:"Fog\xF5es de cozinha de uso dom\xE9stico e suas partes"},{cest:"21.002.00",ncmsh:"84181000",descricao:"Combina\xE7\xF5es de refrigeradores e congeladores (\u201Cfreezers\u201D), munidos de portas exteriores separadas"},{cest:"21.003.00",ncmsh:"84182100",descricao:"Refrigeradores do tipo dom\xE9stico, de compress\xE3o"},{cest:"21.004.00",ncmsh:"84182900",descricao:"Outros refrigeradores do tipo dom\xE9stico"},{cest:"21.005.00",ncmsh:"84183000",descricao:"Congeladores (\u201Cfreezers\u201D) horizontais tipo arca, de capacidade n\xE3o superior a 800 litros"},{cest:"21.006.00",ncmsh:"84184000",descricao:"Congeladores (\u201Cfreezers\u201D) verticais tipo arm\xE1rio, de capacidade n\xE3o superior a 900 litros"},{cest:"21.007.00",ncmsh:"841850",descricao:"Outros m\xF3veis (arcas, arm\xE1rios, vitrines, balc\xF5es e m\xF3veis semelhantes) para a conserva\xE7\xE3o e exposi\xE7\xE3o de produtos, que incorporem um equipamento para a produ\xE7\xE3o de frio"},{cest:"21.008.00",ncmsh:"8418699",descricao:"Mini adega e similares"},{cest:"21.009.00",ncmsh:"84186999",descricao:"M\xE1quinas para produ\xE7\xE3o de gelo"},{cest:"21.010.00",ncmsh:"84189900",descricao:"Partes dos refrigeradores, congeladores, mini adegas e similares, m\xE1quinas para produ\xE7\xE3o de gelo e bebedouros descritos nos CEST 21.002.00, 21.003.00, 21.004.00, 21.005.00, 21.006.00, 21.007.00, 21.008.00, 21.009.00 e 21.013.00"},{cest:"21.011.00",ncmsh:"842112",descricao:"Secadoras de roupa de uso dom\xE9stico"},{cest:"21.012.00",ncmsh:"84211990",descricao:"Outras secadoras de roupas e centr\xEDfugas de uso dom\xE9stico"},{cest:"21.013.00",ncmsh:"84186931",descricao:"Bebedouros refrigerados para \xE1gua"},{cest:"21.014.00",ncmsh:"84219",descricao:"Partes das secadoras de roupas e centr\xEDfugas de uso dom\xE9stico e dos aparelhos para filtrar ou depurar \xE1gua, descritos nos CEST 21.011.00 e 21.012.00 e 21.098.00"},{cest:"21.015.00",ncmsh:"84221100;84229010",descricao:"M\xE1quinas de lavar lou\xE7a do tipo dom\xE9stico e suas partes"},{cest:"21.016.00",ncmsh:"844331",descricao:"M\xE1quinas que executem pelo menos duas das seguintes fun\xE7\xF5es: impress\xE3o, c\xF3pia ou transmiss\xE3o de telec\xF3pia (fax), capazes de ser conectadas a uma m\xE1quina autom\xE1tica para processamento de dados ou a uma rede"},{cest:"21.017.00",ncmsh:"844332",descricao:"Outras impressoras, m\xE1quinas copiadoras e telecopiadores (fax), mesmo combinados entre si, capazes de ser conectados a uma m\xE1quina autom\xE1tica para processamento de dados ou a uma rede"},{cest:"21.018.00",ncmsh:"84439",descricao:"Partes e acess\xF3rios de m\xE1quinas e aparelhos de impress\xE3o por meio de blocos, cilindros e outros elementos de impress\xE3o da posi\xE7\xE3o 8442; e de outras impressoras, m\xE1quinas copiadoras e telecopiadores (fax), mesmo combinados entre si"},{cest:"21.019.00",ncmsh:"84501100",descricao:"M\xE1quinas de lavar roupa, mesmo com dispositivos de secagem, de uso dom\xE9stico, de capacidade n\xE3o superior a 10 kg, em peso de roupa seca, inteiramente autom\xE1ticas"},{cest:"21.020.00",ncmsh:"84501200",descricao:"Outras m\xE1quinas de lavar roupa, mesmo com dispositivos de secagem, de uso dom\xE9stico, com secador centr\xEDfugo incorporado"},{cest:"21.021.00",ncmsh:"84501900",descricao:"Outras m\xE1quinas de lavar roupa, mesmo com dispositivos de secagem, de uso dom\xE9stico"},{cest:"21.022.00",ncmsh:"845020",descricao:"M\xE1quinas de lavar roupa, mesmo com dispositivos de secagem, de uso dom\xE9stico, de capacidade superior a 10 kg, em peso de roupa seca"},{cest:"21.023.00",ncmsh:"845090",descricao:"Partes de m\xE1quinas de lavar roupa, mesmo com dispositivos de secagem, de uso dom\xE9stico"},{cest:"21.024.00",ncmsh:"84512100",descricao:"M\xE1quinas de secar de uso dom\xE9stico de capacidade n\xE3o superior a 10 kg, em peso de roupa seca"},{cest:"21.025.00",ncmsh:"84512990",descricao:"Outras m\xE1quinas de secar de uso dom\xE9stico"},{cest:"21.026.00",ncmsh:"845190",descricao:"Partes de m\xE1quinas de secar de uso dom\xE9stico"},{cest:"21.027.00",ncmsh:"84521000",descricao:"M\xE1quinas de costura de uso dom\xE9stico"},{cest:"21.028.00",ncmsh:"847130",descricao:"M\xE1quinas autom\xE1ticas para processamento de dados, port\xE1teis, de peso n\xE3o superior a 10 kg, contendo pelo menos uma unidade central de processamento, um teclado e uma tela"},{cest:"21.029.00",ncmsh:"84714",descricao:"Outras m\xE1quinas autom\xE1ticas para processamento de dados"},{cest:"21.030.00",ncmsh:"84715010",descricao:"Unidades de processamento, de pequena capacidade, exceto as das subposi\xE7\xF5es 8471.41 ou 8471.49, podendo conter, no mesmo corpo, um ou dois dos seguintes tipos de unidades: unidade de mem\xF3ria, unidade de entrada e unidade de sa\xEDda; baseadas em microprocessadores, com capacidade de instala\xE7\xE3o, dentro do mesmo gabinete, de unidades de mem\xF3ria da subposi\xE7\xE3o 8471.70, podendo conter m\xFAltiplos conectores de expans\xE3o (\u201Cslots\u201D), e valor FOB inferior ou igual a US$ 12.500,00, por unidade"},{cest:"21.031.00",ncmsh:"8471605",descricao:"Unidades de entrada, exceto as classificadas no c\xF3digo 8471.60.54"},{cest:"21.032.00",ncmsh:"84716090",descricao:"Outras unidades de entrada ou de sa\xEDda, podendo conter, no mesmo corpo, unidades de mem\xF3ria"},{cest:"21.033.00",ncmsh:"847170",descricao:"Unidades de mem\xF3ria"},{cest:"21.034.00",ncmsh:"847190",descricao:"Outras m\xE1quinas autom\xE1ticas para processamento de dados e suas unidades; leitores magn\xE9ticos ou \xF3pticos, m\xE1quinas para registrar dados em suporte sob forma codificada, e m\xE1quinas para processamento desses dados, n\xE3o especificadas nem compreendidas em outras posi\xE7\xF5es"},{cest:"21.035.00",ncmsh:"847330",descricao:"Partes e acess\xF3rios das m\xE1quinas da posi\xE7\xE3o 84.71"},{cest:"21.036.00",ncmsh:"85043",descricao:"Outros transformadores, exceto os classificados nos c\xF3digos 8504.33.00 e 8504.34.00"},{cest:"21.037.00",ncmsh:"85044010",descricao:"Carregadores de acumuladores"},{cest:"21.038.00",ncmsh:"85044040",descricao:"Equipamentos de alimenta\xE7\xE3o ininterrupta de energia (UPS ou \u201Cno break\u201D)"},{cest:"21.039.00",ncmsh:"85078000",descricao:"Outros acumuladores"},{cest:"21.040.00",ncmsh:"8508",descricao:"Aspiradores"},{cest:"21.041.00",ncmsh:"8509",descricao:"Aparelhos eletromec\xE2nicos de motor el\xE9trico incorporado, de uso dom\xE9stico e suas partes"},{cest:"21.042.00",ncmsh:"85098010",descricao:"Enceradeiras"},{cest:"21.043.00",ncmsh:"85161000",descricao:"Chaleiras el\xE9tricas"},{cest:"21.044.00",ncmsh:"85164000",descricao:"Ferros el\xE9tricos de passar"},{cest:"21.045.00",ncmsh:"85165000",descricao:"Fornos de micro-ondas"},{cest:"21.046.00",ncmsh:"85166000",descricao:"Outros fornos; fogareiros (inclu\xEDdas as chapas de coc\xE7\xE3o), grelhas e assadeiras, exceto os port\xE1teis"},{cest:"21.047.00",ncmsh:"85166000",descricao:"Outros fornos; fogareiros (inclu\xEDdas as chapas de coc\xE7\xE3o), grelhas e assadeiras, port\xE1teis"},{cest:"21.048.00",ncmsh:"85167100",descricao:"Outros aparelhos eletrot\xE9rmicos de uso dom\xE9stico - Cafeteiras"},{cest:"21.049.00",ncmsh:"85167200",descricao:"Outros aparelhos eletrot\xE9rmicos de uso dom\xE9stico - Torradeiras"},{cest:"21.050.00",ncmsh:"851679",descricao:"Outros aparelhos eletrot\xE9rmicos de uso dom\xE9stico"},{cest:"21.051.00",ncmsh:"85169000",descricao:"Partes das chaleiras, ferros, fornos e outros aparelhos eletrot\xE9rmicos da posi\xE7\xE3o 85.16, descritos nos CEST 21.043.00, 21.044.00, 21.045.00, 21.046.00, 21.047.00, 21.048.00, 21.049.00 e 21.050.00"},{cest:"21.052.00",ncmsh:"85171100",descricao:"Aparelhos telef\xF4nicos por fio com unidade auscultador - microfone sem fio"},{cest:"21.053.00",ncmsh:"8517123",descricao:"Telefones para redes celulares, exceto por sat\xE9lite, os de uso automotivo e os classificados no CEST 21.053.01"},{cest:"21.053.01",ncmsh:"85171231",descricao:"Telefones para redes celulares port\xE1teis, exceto por sat\xE9lite"},{cest:"21.054.00",ncmsh:"851712",descricao:"Outros telefones para outras redes sem fio, exceto para redes de celulares e os de uso automotivo"},{cest:"21.055.00",ncmsh:"85171891",descricao:"Outros aparelhos telef\xF4nicos n\xE3o combinados com outros aparelhos"},{cest:"21.055.01",ncmsh:"85171899",descricao:"Outros aparelhos telef\xF4nicos"},{cest:"21.056.00",ncmsh:"85176259",descricao:"Outros aparelhos para transmiss\xE3o ou recep\xE7\xE3o de voz, imagem ou outros dados em rede com fio."},{cest:"21.056.01",ncmsh:"85176254;85176255",descricao:"Distribuidores de conex\xF5es para rede (\u201Chubs\u201D) e moduladores/demoduladores (\u201Cmodens\u201D)."},{cest:"21.057.00",ncmsh:"8518",descricao:"Microfones e seus suportes; alto-falantes, mesmo montados nos seus recept\xE1culos, fones de ouvido (auscultadores), mesmo combinados com microfone e conjuntos ou sortidos constitu\xEDdos por um microfone e um ou mais alto-falantes, amplificadores el\xE9tricos de audiofrequ\xEAncia, aparelhos el\xE9tricos de amplifica\xE7\xE3o de som; suas partes e acess\xF3rios; exceto os de uso automotivo"},{cest:"21.058.00",ncmsh:"8519;8522;85271",descricao:"Aparelhos de radiodifus\xE3o suscet\xEDveis de funcionarem sem fonte externa de energia. Aparelhos de grava\xE7\xE3o de som; aparelhos de reprodu\xE7\xE3o de som; aparelhos de grava\xE7\xE3o e de reprodu\xE7\xE3o de som; partes e acess\xF3rios; exceto os de uso automotivo"},{cest:"21.059.00",ncmsh:"85198190",descricao:"Outros aparelhos de grava\xE7\xE3o de som; aparelhos de reprodu\xE7\xE3o de som; aparelhos de grava\xE7\xE3o e de reprodu\xE7\xE3o de som; partes e acess\xF3rios; exceto os de uso automotivo"},{cest:"21.060.00",ncmsh:"85219010",descricao:"Gravador-reprodutor e editor de imagem e som, em discos, por meio magn\xE9tico, \xF3ptico ou optomagn\xE9tico, exceto de uso automotivo"},{cest:"21.061.00",ncmsh:"85219090",descricao:"Outros aparelhos videof\xF4nicos de grava\xE7\xE3o ou reprodu\xE7\xE3o, mesmo incorporando um receptor de sinais videof\xF4nicos, exceto os de uso automotivo"},{cest:"21.062.00",ncmsh:"85235110",descricao:'Cart\xF5es de mem\xF3ria ("memorycards")'},{cest:"21.063.00",ncmsh:"85235200",descricao:'Cart\xF5es inteligentes ("smartcards"), exceto o item classificado no CEST 21.064.00'},{cest:"21.064.00",ncmsh:"85235200",descricao:'Cart\xF5es inteligentes ("sim cards")'},{cest:"21.065.00",ncmsh:"8525802",descricao:"C\xE2meras fotogr\xE1ficas digitais e c\xE2meras de v\xEDdeo e suas partes"},{cest:"21.066.00",ncmsh:"85279",descricao:"Outros aparelhos receptores para radiodifus\xE3o, mesmo combinados num inv\xF3lucro, com um aparelho de grava\xE7\xE3o ou de reprodu\xE7\xE3o de som, ou com um rel\xF3gio, inclusive caixa ac\xFAstica para Home Theaters classificados na posi\xE7\xE3o 8518"},{cest:"21.067.00",ncmsh:"85284929;85285920;852869",descricao:"Monitores e projetores que n\xE3o incorporem aparelhos receptores de televis\xE3o, policrom\xE1ticos"},{cest:"21.067.01",ncmsh:"85286200",descricao:"Projetores capazes de serem conectados diretamente a uma m\xE1quina autom\xE1tica para processamento de dados da posi\xE7\xE3o 84.71 e concebidos para serem utilizados com esta m\xE1quina"},{cest:"21.068.00",ncmsh:"85285220",descricao:"Outros monitores capazes de serem conectados diretamente a uma m\xE1quina autom\xE1tica para processamento de dados da posi\xE7\xE3o 84.71 e concebidos para serem utilizados com esta m\xE1quina, policrom\xE1ticos"},{cest:"21.069.00",ncmsh:"85287",descricao:"Aparelhos receptores de televis\xE3o, mesmo que incorporem um aparelho receptor de radiodifus\xE3o ou um aparelho de grava\xE7\xE3o ou reprodu\xE7\xE3o de som ou de imagens - Televisores de CRT (tubo de raios cat\xF3dicos)"},{cest:"21.070.00",ncmsh:"85287",descricao:"Aparelhos receptores de televis\xE3o, mesmo que incorporem um aparelho receptor de radiodifus\xE3o ou um aparelho de grava\xE7\xE3o ou reprodu\xE7\xE3o de som ou de imagens - Televisores de LCD (Display de Cristal L\xEDquido)"},{cest:"21.071.00",ncmsh:"85287",descricao:"Aparelhos receptores de televis\xE3o, mesmo que incorporem um aparelho receptor de radiodifus\xE3o ou um aparelho de grava\xE7\xE3o ou reprodu\xE7\xE3o de som ou de imagens - Televisores de Plasma"},{cest:"21.072.00",ncmsh:"85287",descricao:"Outros aparelhos receptores de televis\xE3o n\xE3o dotados de monitores ou display de v\xEDdeo"},{cest:"21.073.00",ncmsh:"85287",descricao:"Outros aparelhos receptores de televis\xE3o n\xE3o relacionados nos CEST 21.069.00, 21.070.00, 21.071.00 e 21.072.00"},{cest:"21.074.00",ncmsh:"900659",descricao:"C\xE2meras fotogr\xE1ficas dos tipos utilizadas para prepara\xE7\xE3o de clich\xEAs ou cilindros de impress\xE3o"},{cest:"21.075.00",ncmsh:"90064000",descricao:"C\xE2meras fotogr\xE1ficas para filmes de revela\xE7\xE3o e copiagem instant\xE2neas"},{cest:"21.076.00",ncmsh:"90189050",descricao:"Aparelhos de diatermia"},{cest:"21.077.00",ncmsh:"90191000",descricao:"Aparelhos de massagem"},{cest:"21.078.00",ncmsh:"90328911",descricao:"Reguladores de voltagem eletr\xF4nicos"},{cest:"21.079.00",ncmsh:"95045000",descricao:"Consoles e m\xE1quinas de jogos de v\xEDdeo, exceto os classificados na subposi\xE7\xE3o 9504.30"},{cest:"21.080.00",ncmsh:"8517621",descricao:"Multiplexadores e concentradores"},{cest:"21.081.00",ncmsh:"85176222",descricao:"Centrais autom\xE1ticas privadas, de capacidade inferior ou igual a 25 ramais"},{cest:"21.082.00",ncmsh:"85176239",descricao:"Outros aparelhos para comuta\xE7\xE3o"},{cest:"21.083.00",ncmsh:"8517624",descricao:"Roteadores digitais, em redes com ou sem fio"},{cest:"21.084.00",ncmsh:"85176262",descricao:"Aparelhos emissores com receptor incorporado de sistema troncalizado (\u201Ctrunking\u201D), de tecnologia celular"},{cest:"21.085.00",ncmsh:"8517629",descricao:"Outros aparelhos de recep\xE7\xE3o, convers\xE3o e transmiss\xE3o ou regenera\xE7\xE3o de voz, imagens ou outros dados, incluindo os aparelhos de comuta\xE7\xE3o e roteamento"},{cest:"21.086.00",ncmsh:"85177021",descricao:"Antenas pr\xF3prias para telefones celulares port\xE1teis, exceto as telesc\xF3picas"},{cest:"21.087.00",ncmsh:"821490;8510",descricao:"Aparelhos ou m\xE1quinas de barbear, m\xE1quinas de cortar o cabelo ou de tosquiar e aparelhos de depilar, e suas partes"},{cest:"21.088.00",ncmsh:"84145",descricao:"Ventiladores, exceto os de uso agr\xEDcola"},{cest:"21.089.00",ncmsh:"84145990",descricao:"Ventiladores de uso agr\xEDcola"},{cest:"21.090.00",ncmsh:"84146000",descricao:"Coifas com dimens\xE3o horizontal m\xE1xima n\xE3o superior a 120 cm"},{cest:"21.091.00",ncmsh:"84149020",descricao:"Partes de ventiladores ou coifas aspirantes"},{cest:"21.092.00",ncmsh:"841510;84158",descricao:"M\xE1quinas e aparelhos de ar condicionado contendo um ventilador motorizado e dispositivos pr\xF3prios para modificar a temperatura e a umidade, inclu\xEDdos as m\xE1quinas e aparelhos em que a umidade n\xE3o seja regul\xE1vel separadamente"},{cest:"21.093.00",ncmsh:"84151011",descricao:"Aparelhos de ar-condicionado tipo Split System (sistema com elementos separados) com unidade externa e interna"},{cest:"21.094.00",ncmsh:"84151019",descricao:"Aparelhos de ar-condicionado com capacidade inferior ou igual a 30.000 frigorias/hora"},{cest:"21.095.00",ncmsh:"84151090",descricao:"Aparelhos de ar-condicionado com capacidade acima de 30.000 frigorias/hora"},{cest:"21.096.00",ncmsh:"84159010",descricao:"Unidades evaporadoras (internas) de aparelho de ar-condicionado do tipo Split System (sistema com elementos separados), com capacidade inferior ou igual a 30.000 frigorias/hora"},{cest:"21.097.00",ncmsh:"84159020",descricao:"Unidades condensadoras (externas) de aparelho de ar-condicionado do tipo Split System (sistema com elementos separados), com capacidade inferior ou igual a 30.000 frigorias/hora"},{cest:"21.098.00",ncmsh:"84212100",descricao:"Aparelhos el\xE9tricos para filtrar ou depurar \xE1gua (purificadores de \xE1gua refrigerados), exceto os itens classificados no CEST 21.098.01"},{cest:"21.098.01",ncmsh:"84212100",descricao:"Outros aparelhos el\xE9tricos para filtrar ou depurar \xE1gua"},{cest:"21.099.00",ncmsh:"84243010;84243090;84249090",descricao:"Lavadora de alta press\xE3o e suas partes"},{cest:"21.100.00",ncmsh:"84672100",descricao:"Furadeiras el\xE9tricas"},{cest:"21.101.00",ncmsh:"85162",descricao:"Aparelhos el\xE9tricos para aquecimento de ambientes"},{cest:"21.102.00",ncmsh:"85163100",descricao:"Secadores de cabelo"},{cest:"21.103.00",ncmsh:"85163200",descricao:"Outros aparelhos para arranjos do cabelo"},{cest:"21.104.00",ncmsh:"8527",descricao:"Aparelhos receptores para radiodifus\xE3o, mesmo combinados num mesmo inv\xF3lucro, com um aparelho de grava\xE7\xE3o ou de reprodu\xE7\xE3o de som, ou com um rel\xF3gio, exceto os classificados na posi\xE7\xE3o 8527.1, 8527.2 e 8527.9 que sejam de uso automotivo"},{cest:"21.105.00",ncmsh:"84796000",descricao:"Climatizadores de ar"},{cest:"21.106.00",ncmsh:"84159090",descricao:"Outras partes para m\xE1quinas e aparelhos de ar-condicionado que contenham um ventilador motorizado e dispositivos pr\xF3prios para modificar a temperatura e a umidade, incluindo as m\xE1quinas e aparelhos em que a umidade n\xE3o seja regul\xE1vel separadamente"},{cest:"21.107.00",ncmsh:"85258019",descricao:"C\xE2meras de televis\xE3o e suas partes"},{cest:"21.108.00",ncmsh:"84231000",descricao:"Balan\xE7as de uso dom\xE9stico"},{cest:"21.109.00",ncmsh:"8540",descricao:"Tubos e v\xE1lvulas, eletr\xF4nicos, de c\xE1todo quente, c\xE1todo frio ou fotoc\xE1todo (por exemplo, tubos e v\xE1lvulas, de v\xE1cuo, de vapor ou de g\xE1s, ampolas retificadoras de vapor de merc\xFArio, tubos cat\xF3dicos, tubos e v\xE1lvulas para c\xE2meras de televis\xE3o)"},{cest:"21.110.00",ncmsh:"8517",descricao:"Aparelhos el\xE9tricos para telefonia; outros aparelhos para transmiss\xE3o ou recep\xE7\xE3o de voz, imagens ou outros dados, inclu\xEDdos os aparelhos para comunica\xE7\xE3o em redes por fio ou redes sem fio (tal como uma rede local (LAN) ou uma rede de \xE1rea estendida (WAN), inclu\xEDdas suas partes, exceto os de uso automotivo e os classificados nos c\xF3digos 8517.62.51, 8517.62.52 e 8517.62.53"},{cest:"21.111.00",ncmsh:"8517",descricao:"Interfones, seus acess\xF3rios, tomadas e \u201Cplugs\u201D"},{cest:"21.112.00",ncmsh:"8529",descricao:"Partes reconhec\xEDveis como exclusiva ou principalmente destinadas aos aparelhos das posi\xE7\xF5es 8525 a 8528; exceto as de uso automotivo"},{cest:"21.113.00",ncmsh:"8531",descricao:"Aparelhos el\xE9tricos de sinaliza\xE7\xE3o ac\xFAstica ou visual (por exemplo, campainhas, sirenes, quadros indicadores, aparelhos de alarme para prote\xE7\xE3o contra roubo ou inc\xEAndio); exceto os de uso automotivo e os classificados nas posi\xE7\xF5es 8531.10 e 8531.80.00."},{cest:"21.114.00",ncmsh:"853110",descricao:"Aparelhos el\xE9tricos de alarme, para prote\xE7\xE3o contra roubo ou inc\xEAndio e aparelhos semelhantes, exceto os de uso automotivo"},{cest:"21.115.00",ncmsh:"85318000",descricao:"Outros aparelhos de sinaliza\xE7\xE3o ac\xFAstica ou visual, exceto os de uso automotivo"},{cest:"21.116.00",ncmsh:"853400",descricao:"Circuitos impressos, exceto os de uso automotivo"},{cest:"21.117.00",ncmsh:"85414011;85414021;85414022",descricao:"Diodos emissores de luz (LED), exceto diodos \u201Claser\u201D"},{cest:"21.118.00",ncmsh:"85437092",descricao:"Eletrificadores de cercas eletr\xF4nicos"},{cest:"21.119.00",ncmsh:"90303",descricao:"Aparelhos e instrumentos para medida ou controle da tens\xE3o, intensidade, resist\xEAncia ou da pot\xEAncia, sem dispositivo registrador; exceto os de uso automotivo"},{cest:"21.120.00",ncmsh:"903089",descricao:"Analisadores l\xF3gicos de circuitos digitais, de espectro de frequ\xEAncia, frequenc\xEDmetros, fas\xEDmetros, e outros instrumentos e aparelhos de controle de grandezas el\xE9tricas e detec\xE7\xE3o"},{cest:"21.121.00",ncmsh:"910700",descricao:"Interruptores hor\xE1rios e outros aparelhos que permitam acionar um mecanismo em tempo determinado, munidos de maquinismo de aparelhos de relojoaria ou de motor s\xEDncrono"},{cest:"21.122.00",ncmsh:"9405",descricao:"Aparelhos de ilumina\xE7\xE3o (inclu\xEDdos os projetores) e suas partes, n\xE3o especificados nem compreendidos em outras posi\xE7\xF5es; an\xFAncios, cartazes ou tabuletas e placas indicadoras luminosos, e artigos semelhantes, contendo uma fonte luminosa fixa permanente, e suas partes n\xE3o especificadas nem compreendidas em outras posi\xE7\xF5es, com exce\xE7\xE3o dos itens classificados nos CEST 21.123.00, 21.124.00 e 21.125.00"},{cest:"21.123.00",ncmsh:"940510;94059",descricao:"Lustres e outros aparelhos el\xE9tricos de ilumina\xE7\xE3o, pr\xF3prios para serem suspensos ou fixados no teto ou na parede, exceto os dos tipos utilizados na ilumina\xE7\xE3o p\xFAblica; e suas partes"},{cest:"21.124.00",ncmsh:"94052000;94059",descricao:"Abajures de cabeceiras, de escrit\xF3rio e lampad\xE1rios de interior, el\xE9tricos e suas partes"},{cest:"21.125.00",ncmsh:"940540;94059",descricao:"Outros aparelhos el\xE9tricos de ilumina\xE7\xE3o e suas partes"},{cest:"21.126.00",ncmsh:"85423190",descricao:"Microprocessador"},{cest:"22.001.00",ncmsh:"2309",descricao:"Ra\xE7\xE3o tipo \u201Cpet\u201D para animais dom\xE9sticos"},{cest:"23.001.00",ncmsh:"210500",descricao:"Sorvetes de qualquer esp\xE9cie"},{cest:"23.002.00",ncmsh:"1806;1901;2106",descricao:"Preparados para fabrica\xE7\xE3o de sorvete em m\xE1quina"},{cest:"24.001.00",ncmsh:"3208;3209;321000",descricao:"Tintas, vernizes"},{cest:"24.002.00",ncmsh:"2821;32041700;3206",descricao:"Xadrez e p\xF3s assemelhados, em embalagem de conte\xFAdo inferior ou igual a 1 kg, exceto pigmentos \xE0 base de di\xF3xido de tit\xE2nio classificados no c\xF3digo 3206.11.19"},{cest:"24.002.01",ncmsh:"2821;32041700;3206",descricao:"Xadrez e p\xF3s assemelhados, em embalagem de conte\xFAdo superior a 1 kg, exceto pigmentos \xE0 base de di\xF3xido de tit\xE2nio classificados no c\xF3digo NCM 3206.11.19"},{cest:"24.003.00",ncmsh:"3204;32050000;3206;3212",descricao:"Corantes para aplica\xE7\xE3o em bases, tintas e vernizes"},{cest:"25.001.00",ncmsh:"87021000",descricao:"Ve\xEDculos autom\xF3veis para transporte de 10 pessoas ou mais, incluindo o motorista, unicamente com motor de pist\xE3o, de igni\xE7\xE3o por compress\xE3o (diesel ou semidiesel), com volume interno de habit\xE1culo, destinado a passageiros e motorista, superior a 6 m\xB3, mas inferior a 9 m\xB3"},{cest:"25.002.00",ncmsh:"87024090",descricao:"Ve\xEDculos autom\xF3veis para transporte de 10 pessoas ou mais, incluindo o motorista, unicamente com motor el\xE9trico para propuls\xE3o, com volume interno de habit\xE1culo, destinado a passageiros e motorista, superior a 6 m\xB3, mas inferior a 9 m\xB3"},{cest:"25.003.00",ncmsh:"87032100",descricao:"Autom\xF3veis unicamente com motor de pist\xE3o alternativo de igni\xE7\xE3o por centelha (fa\xEDsca*), de cilindrada n\xE3o superior a 1000 cm\xB3"},{cest:"25.004.00",ncmsh:"87032210",descricao:"Autom\xF3veis unicamente com motor de pist\xE3o alternativo de igni\xE7\xE3o por centelha (fa\xEDsca*), de cilindrada superior a 1000 cm\xB3, mas n\xE3o superior a 1500 cm\xB3, com capacidade de transporte de pessoas sentadas inferior ou igual a 6, inclu\xEDdo o condutor, exceto carro celular"},{cest:"25.005.00",ncmsh:"87032290",descricao:"Outros autom\xF3veis unicamente com motor de pist\xE3o alternativo de igni\xE7\xE3o por centelha (fa\xEDsca*), de cilindrada superior a 1000 cm\xB3, mas n\xE3o superior a 1500 cm\xB3, exceto carro celular"},{cest:"25.006.00",ncmsh:"87032310",descricao:"Autom\xF3veis unicamente com motor de pist\xE3o alternativo de igni\xE7\xE3o por centelha (fa\xEDsca*), de cilindrada superior a 1500 cm\xB3, mas n\xE3o superior a 3000 cm\xB3, com capacidade de transporte de pessoas sentadas inferior ou igual a 6, inclu\xEDdo o condutor, exceto carro celular, carro funer\xE1rio e autom\xF3veis de corrida"},{cest:"25.007.00",ncmsh:"87032390",descricao:"Outros autom\xF3veis unicamente com motor de pist\xE3o alternativo de igni\xE7\xE3o por centelha (fa\xEDsca*), de cilindrada superior a 1500 cm\xB3, mas n\xE3o superior a 3000 cm\xB3, exceto carro celular, carro funer\xE1rio e autom\xF3veis de corrida"},{cest:"25.008.00",ncmsh:"87032410",descricao:"Autom\xF3veis unicamente com motor de pist\xE3o alternativo de igni\xE7\xE3o por centelha (fa\xEDsca*), de cilindrada superior a 3000 cm\xB3, com capacidade de transporte de pessoas sentadas inferior ou igual a 6, inclu\xEDdo o condutor, exceto carro celular, carro funer\xE1rio e autom\xF3veis de corrida"},{cest:"25.009.00",ncmsh:"87032490",descricao:"Outros autom\xF3veis unicamente com motor de pist\xE3o alternativo de igni\xE7\xE3o por centelha (fa\xEDsca*), de cilindrada superior a 3000 cm\xB3, exceto carro celular, carro funer\xE1rio e autom\xF3veis de corrida"},{cest:"25.010.00",ncmsh:"87033210",descricao:"Autom\xF3veis unicamente com motor diesel ou semidiesel, de cilindrada superior a 1500 cm\xB3, mas n\xE3o superior a 2500 cm\xB3, com capacidade de transporte de pessoas sentadas inferior ou igual a 6, inclu\xEDdo o condutor, exceto ambul\xE2ncia, carro celular e carro funer\xE1rio"},{cest:"25.011.00",ncmsh:"87033290",descricao:"Outros autom\xF3veis unicamente com motor diesel ou semidiesel, de cilindrada superior a 1500 cm\xB3, mas n\xE3o superior a 2500 cm\xB3, exceto ambul\xE2ncia, carro celular e carro funer\xE1rio"},{cest:"25.012.00",ncmsh:"87033310",descricao:"Autom\xF3veis unicamente com motor diesel ou semidiesel, de cilindrada superior a 2500 cm\xB3, com capacidade de transporte de pessoas sentadas inferior ou igual a 6, inclu\xEDdo o condutor, exceto carro celular e carro funer\xE1rio"},{cest:"25.013.00",ncmsh:"87033390",descricao:"Outros autom\xF3veis unicamente com motor diesel ou semidiesel, de cilindrada superior a 2500 cm\xB3, exceto carro celular e carro funer\xE1rio"},{cest:"25.014.00",ncmsh:"87042110",descricao:"Ve\xEDculos autom\xF3veis para transporte de mercadorias, de peso em carga m\xE1xima n\xE3o superior a 5 toneladas, chassis com motor diesel ou semidiesel e cabina, exceto caminh\xE3o de peso em carga m\xE1xima superior a 3,9 toneladas"},{cest:"25.015.00",ncmsh:"87042120",descricao:"Ve\xEDculos autom\xF3veis para transporte de mercadorias, de peso em carga m\xE1xima n\xE3o superior a 5 toneladas, com motor diesel ou semidiesel, com caixa basculante, exceto caminh\xE3o de peso em carga m\xE1xima superior a 3,9 toneladas"},{cest:"25.016.00",ncmsh:"87042130",descricao:"Ve\xEDculos autom\xF3veis para transporte de mercadorias, de peso em carga m\xE1xima n\xE3o superior a 5 toneladas, frigor\xEDficos ou isot\xE9rmicos, com motor diesel ou semidiesel, exceto caminh\xE3o de peso em carga m\xE1xima superior a 3,9 toneladas"},{cest:"25.017.00",ncmsh:"87042190",descricao:"Outros ve\xEDculos autom\xF3veis para transporte de mercadorias, de peso em carga m\xE1xima n\xE3o superior a 5 toneladas, com motor diesel ou semidiesel, exceto carro-forte para transporte de valores e caminh\xE3o de peso em carga m\xE1xima superior a 3,9 toneladas"},{cest:"25.018.00",ncmsh:"87043110",descricao:"Ve\xEDculos autom\xF3veis para transporte de mercadorias, de peso em carga m\xE1xima n\xE3o superior a 5 toneladas, com motor a explos\xE3o, chassis e cabina, exceto caminh\xE3o de peso em carga m\xE1xima superior a 3,9 toneladas"},{cest:"25.019.00",ncmsh:"87043120",descricao:"Ve\xEDculos autom\xF3veis para transporte de mercadorias, de peso em carga m\xE1xima n\xE3o superior a 5 toneladas, com motor explos\xE3o com caixa basculante, exceto caminh\xE3o de peso em carga m\xE1xima superior a 3,9 toneladas"},{cest:"25.020.00",ncmsh:"87043130,",descricao:"Ve\xEDculos autom\xF3veis para transporte de mercadorias, de peso em carga m\xE1xima n\xE3o superior a 5 toneladas, frigor\xEDficos ou isot\xE9rmicos com motor explos\xE3o, exceto caminh\xE3o de peso em carga m\xE1xima superior a 3,9 toneladas"},{cest:"25.021.00",ncmsh:"87043190,",descricao:"Outros ve\xEDculos autom\xF3veis para transporte de mercadorias, de peso em carga m\xE1xima n\xE3o superior a 5 toneladas, com motor a explos\xE3o, exceto carro-forte para transporte de valores e caminh\xE3o de peso em carga m\xE1xima superior a 3,9 toneladas"},{cest:"25.022.00",ncmsh:"87022000",descricao:"Ve\xEDculos autom\xF3veis para transporte de 10 pessoas ou mais, incluindo o motorista, com motor de pist\xE3o, de igni\xE7\xE3o por compress\xE3o (diesel ou semidiesel) e um motor el\xE9trico, com volume interno de habit\xE1culo, destinado a passageiros e motorista, superior a 6 m\xB3, mas inferior a 9 m\xB3"},{cest:"25.023.00",ncmsh:"87023000",descricao:"Ve\xEDculos autom\xF3veis para transporte de 10 pessoas ou mais, incluindo o motorista, com motor de pist\xE3o alternativo, de igni\xE7\xE3o por centelha (fa\xEDsca) e um motor el\xE9trico, com volume interno de habit\xE1culo, destinado a passageiros e motorista, superior a 6 m\xB3, mas inferior a 9 m\xB3"},{cest:"25.024.00",ncmsh:"87029000",descricao:"\xA0Outros ve\xEDculos autom\xF3veis para transporte de 10 pessoas ou mais, incluindo o motorista, com volume interno de habit\xE1culo, destinado a passageiros e motorista, superior a 6 m\xB3, mas inferior a 9 m\xB3"},{cest:"25.025.00",ncmsh:"87034000",descricao:"Autom\xF3veis equipados para propuls\xE3o, simultaneamente, com um motor de pist\xE3o alternativo de igni\xE7\xE3o por centelha (fa\xEDsca*) e um motor el\xE9trico, exceto os suscet\xEDveis de serem carregados por conex\xE3o a uma fonte externa de energia el\xE9trica, o carro celular e o carro funer\xE1rio"},{cest:"25.026.00",ncmsh:"87035000",descricao:"Autom\xF3veis equipados para propuls\xE3o, simultaneamente, com um motor de pist\xE3o por compress\xE3o (diesel ou semidiesel) e um motor el\xE9trico, exceto os suscet\xEDveis de serem carregados por conex\xE3o a uma fonte externa de energia el\xE9trica, exceto o carro celular e o carro funer\xE1rio"},{cest:"25.027.00",ncmsh:"87036000",descricao:"Autom\xF3veis equipados para propuls\xE3o, simultaneamente, com um motor de pist\xE3o alternativo de igni\xE7\xE3o por centelha (fa\xEDsca*) e um motor el\xE9trico, suscet\xEDveis de serem carregados por conex\xE3o a uma fonte externa de energia el\xE9trica, exceto o carro celular e o carro funer\xE1rio"},{cest:"25.028.00",ncmsh:"87037000",descricao:"Autom\xF3veis equipados para propuls\xE3o, simultaneamente, com um motor de pist\xE3o por compress\xE3o (diesel ou semidiesel) e um motor el\xE9trico, suscet\xEDveis de serem carregados por conex\xE3o a uma fonte externa de energia el\xE9trica, exceto o carro celular e o carro funer\xE1rio"},{cest:"25.029.00",ncmsh:"87038000",descricao:"Outros ve\xEDculos, equipados unicamente com motor el\xE9trico para propuls\xE3o"},{cest:"26.001.00",ncmsh:"8711",descricao:"Motocicletas (inclu\xEDdos os ciclomotores) e outros ciclos equipados com motor auxiliar, mesmo com carro lateral; carros laterais"},{cest:"28.001.00",ncmsh:"33030010",descricao:"Perfumes (extratos)"},{cest:"28.002.00",ncmsh:"33030020",descricao:"\xC1guas-de-col\xF4nia"},{cest:"28.003.00",ncmsh:"33041000",descricao:"Produtos de maquiagem para os l\xE1bios"},{cest:"28.004.00",ncmsh:"33042010",descricao:"Sombra, delineador, l\xE1pis para sobrancelhas e r\xEDmel"},{cest:"28.005.00",ncmsh:"33042090",descricao:"Outros produtos de maquiagem para os olhos"},{cest:"28.006.00",ncmsh:"33043000",descricao:"Prepara\xE7\xF5es para manicuros e pedicuros"},{cest:"28.007.00",ncmsh:"33049100",descricao:"P\xF3s para maquiagem, incluindo os compactos"},{cest:"28.008.00",ncmsh:"33049910",descricao:"Cremes de beleza, cremes nutritivos e lo\xE7\xF5es t\xF4nicas"},{cest:"28.009.00",ncmsh:"33049990",descricao:"Outros produtos de beleza ou de maquiagem preparados e prepara\xE7\xF5es para conserva\xE7\xE3o ou cuidados da pele, exceto as prepara\xE7\xF5es antissolares e os bronzeadores"},{cest:"28.010.00",ncmsh:"33049990",descricao:"Prepara\xE7\xF5es antissolares e os bronzeadores"},{cest:"28.011.00",ncmsh:"33051000",descricao:"Xampus para o cabelo"},{cest:"28.012.00",ncmsh:"33052000",descricao:"Prepara\xE7\xF5es para ondula\xE7\xE3o ou alisamento, permanentes, dos cabelos"},{cest:"28.013.00",ncmsh:"33059000",descricao:"Outras prepara\xE7\xF5es capilares"},{cest:"28.014.00",ncmsh:"33059000",descricao:"Tintura para o cabelo"},{cest:"28.015.00",ncmsh:"33071000",descricao:"Prepara\xE7\xF5es para barbear (antes, durante ou ap\xF3s)"},{cest:"28.016.00",ncmsh:"33072010",descricao:"Desodorantes (desodorizantes) corporais l\xEDquidos, exceto os classificados no CEST 28.016.01"},{cest:"28.016.01",ncmsh:"33072010",descricao:"Lo\xE7\xF5es e \xF3leos desodorantes hidratantes l\xEDquidos"},{cest:"28.016.02",ncmsh:"33072010",descricao:"Antiperspirantes l\xEDquidos"},{cest:"28.017.00",ncmsh:"33072090",descricao:"Outros desodorantes (desodorizantes) corporais, exceto os classificados no CEST 28.017.01"},{cest:"28.017.01",ncmsh:"33072090",descricao:"Outras lo\xE7\xF5es e \xF3leos desodorantes hidratantes"},{cest:"28.017.02",ncmsh:"33072090",descricao:"Outros antiperspirantes"},{cest:"28.018.00",ncmsh:"33079000",descricao:"Outros produtos de perfumaria ou de toucador preparados"},{cest:"28.019.00",ncmsh:"33079000",descricao:"Outras prepara\xE7\xF5es cosm\xE9ticas"},{cest:"28.020.00",ncmsh:"34011190",descricao:"Sab\xF5es de toucador em barras, peda\xE7os ou figuras moldados, exceto CEST 28.020.01"},{cest:"28.020.01",ncmsh:"34011190",descricao:"Len\xE7os umedecidos"},{cest:"28.021.00",ncmsh:"34011900",descricao:"Outros sab\xF5es, produtos e prepara\xE7\xF5es org\xE2nicos tensoativos, inclusive papel, pastas (ouates), feltros e falsos tecidos, impregnados, revestidos ou recobertos de sab\xE3o ou de detergentes"},{cest:"28.022.00",ncmsh:"34012010",descricao:"Sab\xF5es de toucador sob outras formas"},{cest:"28.023.00",ncmsh:"34013000",descricao:"Produtos e prepara\xE7\xF5es org\xE2nicos tensoativos para lavagem da pele, em forma de l\xEDquido ou de creme, acondicionados para venda a retalho, mesmo contendo sab\xE3o"},{cest:"28.024.00",ncmsh:"48182000",descricao:"Len\xE7os de papel, incluindo os de desmaquiar"},{cest:"28.024.01",ncmsh:"48182000",descricao:"Toalhas de m\xE3o"},{cest:"28.025.00",ncmsh:"82141000",descricao:"Apontadores de l\xE1pis para maquiagem"},{cest:"28.025.01",ncmsh:"82141000",descricao:"Esp\xE1tulas, abre-cartas e raspadeiras"},{cest:"28.025.02",ncmsh:"82141000",descricao:"L\xE2minas de esp\xE1tulas, de abre-cartas, de raspadeiras e de apontadores de l\xE1pis"},{cest:"28.026.00",ncmsh:"82142000",descricao:"Utens\xEDlios e sortidos de utens\xEDlios de manicuros ou de pedicuros (incluindo as limas para unhas)"},{cest:"28.027.00",ncmsh:"96032900",descricao:"Escovas e pinc\xE9is de barba, escovas para cabelos, para c\xEDlios ou para unhas e outras escovas de toucador de pessoas"},{cest:"28.027.01",ncmsh:"96032900",descricao:"Vassouras e escovas, mesmo constituindo partes de m\xE1quinas, de aparelhos ou de ve\xEDculos, vassouras mec\xE2nicas de uso manual n\xE3o motorizadas, pinc\xE9is e espanadores; cabe\xE7as preparadas para escovas, pinc\xE9is e artigos semelhantes; bonecas e rolos para pintura; rodos de borracha ou de mat\xE9rias flex\xEDveis semelhantes, outros"},{cest:"28.028.00",ncmsh:"96033000",descricao:"Pinc\xE9is para aplica\xE7\xE3o de produtos cosm\xE9ticos"},{cest:"28.028.01",ncmsh:"96033000",descricao:"Pinc\xE9is e escovas, para artistas e pinc\xE9is de escrever"},{cest:"28.029.00",ncmsh:"96161000",descricao:"Vaporizadores de toucador, suas arma\xE7\xF5es e cabe\xE7as de arma\xE7\xF5es"},{cest:"28.030.00",ncmsh:"96162000",descricao:"Borlas ou esponjas para p\xF3s ou para aplica\xE7\xE3o de outros cosm\xE9ticos ou de produtos de toucador"},{cest:"28.031.00",ncmsh:"42021",descricao:"Malas e maletas de toucador"},{cest:"28.032.00",ncmsh:"9615",descricao:"Pentes, travessas para cabelo e artigos semelhantes; grampos (alfinetes) para cabelo; pin\xE7as (\u201Cpinceguiches\u201D), onduladores, bobs (rolos) e artefatos semelhantes para penteados, e suas partes"},{cest:"28.033.00",ncmsh:"39233000;39249000;39241000;40149090;70102000",descricao:"Mamadeiras"},{cest:"28.034.00",ncmsh:"40149090",descricao:"Chupetas e bicos para mamadeiras e para chupetas"},{cest:"28.035.00",ncmsh:"12119090",descricao:"Outras plantas e partes, para perfumaria, medicina e semelhantes"},{cest:"28.036.00",ncmsh:"39262000",descricao:"Vestu\xE1rio e seus acess\xF3rios, de pl\xE1sticos, inclusive luvas"},{cest:"28.037.00",ncmsh:"39264000",descricao:"Estatuetas e outros objetos de ornamenta\xE7\xE3o, de pl\xE1sticos"},{cest:"28.038.00",ncmsh:"39269090",descricao:"Outras obras de pl\xE1sticos"},{cest:"28.039.00",ncmsh:"42022210",descricao:"Bolsas de folhas de pl\xE1stico"},{cest:"28.040.00",ncmsh:"42022220",descricao:"Bolsas de mat\xE9rias t\xEAxteis"},{cest:"28.041.00",ncmsh:"42022900",descricao:"Bolsas de outras mat\xE9rias"},{cest:"28.042.00",ncmsh:"42023900",descricao:"Artigos de bolsos/bolsas, de outras mat\xE9rias"},{cest:"28.043.00",ncmsh:"42029200",descricao:"Outros artefatos, de folhas de pl\xE1sticos ou mat\xE9rias t\xEAxteis"},{cest:"28.044.00",ncmsh:"42029900;38244000",descricao:"Outros artefatos, de outras mat\xE9rias"},{cest:"28.045.00",ncmsh:"48192000",descricao:"Caixas e cartonagens, dobr\xE1veis, de papel/cart\xE3o, n\xE3o ondulados"},{cest:"28.046.00",ncmsh:"48194000",descricao:"Outros sacos, bolsas e cartuchos, de papel ou cart\xE3o"},{cest:"28.047.00",ncmsh:"48211000",descricao:"Etiquetas de papel ou cart\xE3o, impressas"},{cest:"28.048.00",ncmsh:"49111090",descricao:"Outros impressos publicit\xE1rios, cat\xE1logos comerciais e semelhantes"},{cest:"28.049.00",ncmsh:"61159900",descricao:"Outras meias de malha de outras mat\xE9rias t\xEAxteis"},{cest:"28.050.00",ncmsh:"62171000",descricao:"Outros acess\xF3rios confeccionados, de vestu\xE1rio"},{cest:"28.051.00",ncmsh:"63026000",descricao:"Roupas de toucador/cozinha, de tecidos atoalhados de algod\xE3o"},{cest:"28.052.00",ncmsh:"63079090",descricao:"Outros artefatos t\xEAxteis confeccionados"},{cest:"28.053.00",ncmsh:"65069900",descricao:"Chap\xE9us e outros artefatos de outras mat\xE9rias, exceto de malha"},{cest:"28.054.00",ncmsh:"95059000",descricao:"Artigos para outras festas, carnaval ou outros divertimentos"},{cest:"28.055.00",ncmsh:"33",descricao:"Produtos destinados \xE0 higiene bucal"},{cest:"28.056.00",ncmsh:"33;34",descricao:"Outros produtos cosm\xE9ticos e de higiene pessoal n\xE3o relacionados em outros itens deste anexo"},{cest:"28.057.00",ncmsh:"14;39;40;44;48;63;64;65;67;70;82;90;96",descricao:"Outros artigos destinados a cuidados pessoais n\xE3o relacionados em outros itens deste anexo"},{cest:"28.058.00",ncmsh:"39;42;48;52;61;71;83;90;91",descricao:"Acess\xF3rios (por exemplo, bijuterias, rel\xF3gios, \xF3culos de sol, bolsas, mochilas, frasqueiras, carteiras, porta-cart\xF5es, porta-documentos, porta-celulares e embalagens presente\xE1veis (por exemplo, caixinhas de papel), entre outros itens assemelhados)"},{cest:"28.059.00",ncmsh:"61;62;64",descricao:"Vestu\xE1rio e seus acess\xF3rios; cal\xE7ados, polainas e artefatos semelhantes, e suas partes"},{cest:"28.060.00",ncmsh:"42;52;55;58;63;65",descricao:"Outros artigos de vestu\xE1rio em geral, exceto os relacionados no item anterior"},{cest:"28.061.00",ncmsh:"39;40;52;56;62;63;66;69;70;73;76;82;83;84;91;94;96",descricao:"Artigos de casa"},{cest:"28.062.00",ncmsh:"13;15;16;17;18;19;20;21;22;23",descricao:"Produtos das ind\xFAstrias alimentares e bebidas"},{cest:"28.063.00",ncmsh:"22;27;28;29;33;34;35;38;39;63;68;73;84;85;96",descricao:"Produtos de limpeza e conserva\xE7\xE3o dom\xE9stica"},{cest:"28.064.00",ncmsh:"39;49;95;96",descricao:"Artigos infantis"}],MP={"01":"Autope\xE7as","02":"Bebidas alco\xF3licas, exceto cerveja e chope","03":"Cervejas, chopes, refrigerantes, \xE1guas e outras bebidas","04":"Cigarros e outros produtos derivados do fumo","05":"Cimentos","06":"Combust\xEDveis e lubrificantes","07":"Energia el\xE9trica","08":"Ferramentas","09":"L\xE2mpadas, reatores e \u201Cstarter\u201D",10:"Materiais de constru\xE7\xE3o e cong\xEAneres",11:"Materiais de limpeza",12:"Materiais el\xE9tricos",13:"Medicamentos de uso humano e outros produtos farmac\xEAuticos para uso humano ou veterin\xE1rio",14:"Pap\xE9is",15:"Pl\xE1sticos",16:"Pneum\xE1ticos, c\xE2maras de ar e protetores de borracha",17:"Produtos aliment\xEDcios",18:"Produtos cer\xE2micos",19:"Produtos de papelaria",20:"Produtos de perfumaria e de higiene pessoal e cosm\xE9ticos",21:"Produtos eletr\xF4nicos, eletroeletr\xF4nicos e eletrodom\xE9sticos",22:"Ra\xE7\xF5es para animais dom\xE9sticos",23:"Sorvetes e preparados para fabrica\xE7\xE3o de sorvetes em m\xE1quinas",24:"Tintas e vernizes",25:"Ve\xEDculos automotores",26:"Ve\xEDculos de duas e tr\xEAs rodas motorizados",27:"Vidros",28:"Venda de mercadorias pelo sistema porta a porta"};const mPe={computed:{metadados(){return Zn}},data(){return{valor:"",descricaoCest:"",opcoesCest:[]}},emits:["update:modelValue"],methods:{atualizar(){try{this.valor=this.modelValue||"";let e=this.opcoesCest.find(o=>o.valor===this.valor);e||(e={rotulo:this.valor,valor:this.valor},this.opcoesCest.push(e)),e.rotulo=this.valor;const t=FP.find(o=>o.cest===this.valor);this.descricaoCest=this.valor.length===9?t?MP[t.cest.substring(0,2)]+" - "+t.descricao:"CEST inv\xE1lido":"Forne\xE7a um CEST (7 d\xEDgitos)"}catch(e){this.$q.notifyError("Ocorreu erro ao consultar CEST",e)}},eventoClick(){const e=this.ncm||"";this.opcoesCest=FP.filter(t=>t.ncmsh.split(";").reduce((o,r)=>o||e.startsWith(r),!1)).map(t=>({rotulo:t.cest+" - "+t.descricao,sublabel:MP[t.cest.substring(0,2)],valor:t.cest}))},selecionar(){this.$emit("update:modelValue",this.valor)}},props:{modelValue:{default:"",type:String},ncm:{default:"",type:String}},watch:{modelValue(){this.atualizar()},ncm(){this.atualizar()}},created(){this.atualizar()}};function pPe(e,t,o,r,a,i){const n=Ve("campo");return B(),be("div",null,[h(n,{modelValue:a.valor,"onUpdate:modelValue":[t[0]||(t[0]=s=>a.valor=s),i.selecionar],ajuda:a.descricaoCest,dica:i.metadados.infNFe.det.lista.prod.opcional.CEST._doc,filter:"",dense:"",maxlength:"9",opcoes:a.opcoesCest,rotulo:i.metadados.infNFe.det.lista.prod.opcional.CEST._titulo,tipo:"seletor",onClick:i.eventoClick,clearable:""},null,8,["modelValue","ajuda","dica","opcoes","rotulo","onClick","onUpdate:modelValue"])])}var hPe=St(mPe,[["render",pPe]]);const vPe={data(){return{ncm:"",descricaoNcm:""}},emits:["update:modelValue"],methods:{async abrirPrompt(){try{if(this.somenteLeitura)return;const e=await $g.promptNcm.show({});this.selecionar(e)}catch(e){this.$q.notifyError("Erro ao abrir itens",e)}},async atualizar(){try{const e=this.modelValue&&this.modelValue.length===8?(await $db.ncm.le({ncm:this.modelValue}))[0]||{}:{};this.descricaoNcm=this.modelValue&&this.modelValue.length===8?e.descricao||"NCM inv\xE1lido":"Forne\xE7a um NCM (8 d\xEDgitos)",this.ncm=e.ncm||""}catch(e){this.$q.notifyError("Ocorreu erro ao consultar NCM",e)}},selecionar(e){try{if(!e||!e.ncm)return;this.descricaoNcm=e.descricao||"NCM inv\xE1lido",this.ncm=e.ncm||"",this.updateValue()}catch(t){this.$q.notifyError("Erro ao selecionar",t)}},updateValue(){this.$emit("update:modelValue",this.ncm),this.$nextTick(()=>{this.atualizar()})}},props:{modelValue:{default:"",type:String},somenteLeitura:{type:Boolean}},watch:{modelValue(e){e!==this.ncm&&this.atualizar()}},created(){this.atualizar()}};function gPe(e,t,o,r,a,i){const n=Ve("campo"),s=ah("mask");return Ee((B(),oe(n,ou({modelValue:a.ncm,"onUpdate:modelValue":t[0]||(t[0]=l=>a.ncm=l),maxlength:"8",ajuda:a.descricaoNcm,dica:"C\xF3digo NCM (8 posi\xE7\xF5es) - Nomenclatura Comum ao Mercosul",onBlur:i.updateValue,after:o.somenteLeitura?void 0:[{icon:"search",handler:i.abrirPrompt}],rotulo:"NCM"},e.$attrs),null,16,["modelValue","ajuda","onBlur","after"])),[[s,"########"]])}var _Pe=St(vPe,[["render",gPe]]);const bPe={components:{SeletorCest:hPe,SeletorNcm:_Pe},data(){return{documentoItem:{},documentoVenda:{},imposto:{},item:{},cfop:{},abaSelecionada:"tab1",visivel:!1,estoque:{},tabelaEstoque:{colunas:[{name:"empresa",label:"Empresa",align:"left"},{name:"tipoEstoque",label:"Tipo estoque",align:"right"},{name:"lote",label:"Lote",align:"right"},{name:"quantidade",label:"Quantidade",align:"right"}],paginacao:{page:1,rowsPerPage:5}},historico:{},tabelaHistorico:{colunas:[{name:"documento",label:"Documento",align:"left"},{name:"valorUnitario",label:"Valor Unit\xE1rio",align:"right"},{name:"quantidade",label:"Quantidade",align:"right"},{name:"valorTotal",label:"Valor Total",align:"right"}],paginacao:{page:1,rowsPerPage:5}}}},emits:["salvar"],methods:{mostrarConfrontoFigurasFiscais(){$utils.emitter.emit("confrontarFigurasFiscais",[this.imposto.entrada])},async atualizar(){this.item=await $db.item.le({id:this.documentoItem.idItem}),this.documentoItem.idCfop&&(this.cfop=await $erp().cfop.get(this.documentoItem.idCfop));const e=[];this.imposto=await $utils.impostoV2({documento:this.documentoVenda,documentoItem:this.documentoItem,erro:e}),e.length&&(this.imposto.erro=!0);let t=await $db.hibrido.lista({table:"documento",where:{idContato:this.documentoVenda.idContato}});t=t.filter(n=>n.id!==this.documentoVenda.id);let o={},r=[];for(const n of t){const s=(await $db.hibrido.lista({table:"documentoItem",where:{idDocumento:n.id,idItem:this.documentoItem.idItem}})).find(l=>l.id);s&&(r.push({idDocumento:$lodash.get(s,"idDocumento",""),valorReal:$lodash.get(s,"valorReal",0),valorItem:$lodash.get(s,"valorItem",0),quantidade:$lodash.get(s,"quantidade",0),operacaoFator:$lodash.get(s,"operacaoFator",0),valorRealTotal:$lodash.get(s,"valorRealTotal",0),dataHoraEmissao:$lodash.get(s,"dataHoraEmissao",""),dataHoraFinalizado:$lodash.get(s,"dataHoraFinalizado",""),docDataHoraEmissao:$lodash.get(n,"dataHoraEmissao",""),docDataHoraFinalizado:$lodash.get(n,"dataHoraFinalizado","")}),o[n.id]||(o[n.id]={id:$lodash.get(n,"id",""),tipo:$lodash.get(n,"tipo",""),numero:$lodash.get(n,"numero",""),status:$lodash.get(n,"status",""),dataHoraFinalizado:$lodash.get(n,"dataHoraFinalizado",""),dataHoraEmissao:$lodash.get(n,"dataHoraEmissao","")}))}this.historico.documentos=o,this.historico.documentosItens=$lodash.orderBy(r,["docDataHoraFinalizado","docDataHoraEmissao","dataHoraFinalizado","dataHoraEmissao"],["desc","desc","desc","desc"]);const a=await $db.estoqueSaldoProdutoEmpresa.le({idItem:this.documentoItem.idItem});let i={};for(const n of a)if(!i[n.idEmpresa]){const s=await $db.contato.le({id:n.idEmpresa});s.id&&(i[n.idEmpresa]=s)}this.estoque=a.map(n=>({...n,nomeEmpresa:$lodash.get(i[n.idEmpresa],"nome",""),apelidoEmpresa:$lodash.get(i[n.idEmpresa],"apelido","")}))},async mostrar(e){const{documentoItem:t={},documentoVenda:o={}}=e;this.documentoItem=$utils.clonarV2(t),this.documentoVenda=$utils.clonarV2(o),await this.atualizar(),this.visivel=!0},salvar(){this.$emit("salvar",this.documentoItem),this.visivel=!1}}},yPe={class:"q-pa-md"},xPe={class:"col-12 text-center"},CPe=["src"],wPe={class:"col-12"},EPe={class:"col-12 col-md-6 q-mb-md"},SPe={class:"q-item__label",style:{"white-space":"pre-line"}},IPe={class:"col-12 col-md-6 q-mb-md"},APe={class:"q-item__label",style:{"white-space":"pre-line"}},TPe={class:"col-4"},DPe={class:"q-item__label"},OPe={key:0,class:"col-2"},PPe={class:"q-item__label"},FPe={key:1,class:"col-2"},MPe={class:"q-item__label"},NPe={key:2,class:"col-2"},kPe={class:"q-item__label",style:{"white-space":"pre-line"}},RPe={key:3,class:"col-2"},VPe={class:"q-item__label",style:{"white-space":"pre-line"}},BPe={key:0,style:{"text-decoration":"line-through"}};function qPe(e,t,o,r,a,i){const n=Ve("campo"),s=Ve("row"),l=Ve("SeletorNcm"),u=Ve("SeletorCest");return B(),oe(Ht,{modelValue:a.visivel,"onUpdate:modelValue":t[6]||(t[6]=c=>a.visivel=c),maximized:""},{default:C(()=>[h(To,{class:"q-layout-modal bg-white",style:{"max-width":"990px"}},{default:C(()=>[h(Je,{class:"bg-primary text-white"},{default:C(()=>[h(lt,null,{default:C(()=>[K(le(a.documentoItem.descricaoItem)+" - "+le(a.item.marca),1)]),_:1}),Ee(h(ae,{dense:"",flat:"",icon:"close",round:""},null,512),[[st]])]),_:1}),A("div",yPe,[A("div",xPe,[a.item.imagem?(B(),be("img",{key:0,src:a.item.imagem,alt:"",style:{"max-width":"100%"}},null,8,CPe)):ie("",!0)]),h(Ab,{modelValue:a.abaSelecionada,"onUpdate:modelValue":t[0]||(t[0]=c=>a.abaSelecionada=c),align:"justify",dense:"","indicator-color":"light-blue-4",class:"text-primary"},{default:C(()=>[h(Jc,{default:"",name:"tab1",icon:"info",label:"Detalhes",class:"cinza"}),h(Jc,{name:"tab2",icon:"account_balance",label:"Impostos",class:"cinza"}),h(Jc,{name:"tab3",icon:"history",label:"Hist\xF3rico",class:"cinza"}),h(Jc,{name:"tab4",icon:"compare_arrows",label:"Estoque",class:"cinza"})]),_:1},8,["modelValue"]),h(oA,{modelValue:a.abaSelecionada,"onUpdate:modelValue":t[5]||(t[5]=c=>a.abaSelecionada=c),animated:"",class:"text-tertiary"},{default:C(()=>[h(fd,{name:"tab1",class:"q-px-none"},{default:C(()=>[h(s,null,{default:C(()=>[A("p",wPe,[h(n,{modelValue:a.documentoItem.descricaoAgrupamento,"onUpdate:modelValue":t[1]||(t[1]=c=>a.documentoItem.descricaoAgrupamento=c),modelModifiers:{trim:!0},tipo:"texto",rotulo:"Agrupamento",autogrow:""},null,8,["modelValue"])]),A("div",EPe,[t[7]||(t[7]=A("div",{class:"text-weight-bold text-caption"},"Observa\xE7\xE3o",-1)),A("div",SPe,le(a.item.observacao),1)]),A("div",IPe,[t[8]||(t[8]=A("div",{class:"text-weight-bold text-caption"},"Aplica\xE7\xE3o",-1)),A("div",APe,le(a.item.aplicacao),1)])]),_:1})]),_:1}),h(fd,{name:"tab2",class:"q-col-gutter-y-sm",style:{overflow:"hidden"}},{default:C(()=>[h(s,null,{default:C(()=>[!Object.keys(a.imposto).length||a.imposto.erro?(B(),oe(nw,{key:0,"inline-actions":"",class:"text-white bg-red col-12"},rh({default:C(()=>[t[9]||(t[9]=K(" N\xE3o foi poss\xEDvel encontrar par\xE2metros de imposto. "))]),_:2},[Object.keys(a.imposto).length?{name:"action",fn:C(()=>[h(ae,{flat:"",color:"white",label:"Conferir Figuras Fiscais",onClick:i.mostrarConfrontoFigurasFiscais},null,8,["onClick"])]),key:"0"}:void 0]),1024)):ie("",!0),Object.keys(a.imposto).length&&!a.imposto.erro?(B(),oe(nw,{key:1,"inline-actions":"",class:"bg-grey-3 col-12"},{action:C(()=>[h(ae,{flat:"",color:"primary",label:"Conferir Figuras Fiscais",onClick:i.mostrarConfrontoFigurasFiscais},null,8,["onClick"])]),default:C(()=>[t[10]||(t[10]=K(" Par\xE2metros de imposto encontrados na figura fiscal ")),h(An,{color:"tertiary"},{default:C(()=>[K(" Ordem "+le(a.imposto.ordem),1)]),_:1})]),_:1})):ie("",!0)]),_:1}),h(s,null,{default:C(()=>{var c,d,f,m,p,v,g,x,b;return[A("div",TPe,[t[11]||(t[11]=A("div",{class:"text-weight-bold text-caption"},"CFOP",-1)),A("div",DPe,le((c=a.cfop)==null?void 0:c.cfop),1)]),(f=(d=a.imposto)==null?void 0:d.saida)!=null&&f.pIPI?(B(),be("div",OPe,[t[12]||(t[12]=A("div",{class:"text-weight-bold text-caption"},"IPI",-1)),A("div",PPe,le(e.$filters.numero(a.imposto.saida.pIPI,2))+"%",1)])):ie("",!0),(p=(m=a.imposto)==null?void 0:m.saida)!=null&&p.pMVAST?(B(),be("div",FPe,[t[13]||(t[13]=A("div",{class:"text-weight-bold text-caption"},"MVA/ST",-1)),A("div",MPe,le(e.$filters.numero(a.imposto.saida.pMVAST,2))+"%",1)])):ie("",!0),(g=(v=a.imposto)==null?void 0:v.saida)!=null&&g.pICMS?(B(),be("div",NPe,[t[14]||(t[14]=A("div",{class:"text-weight-bold text-caption"}," ICMS ",-1)),A("div",kPe,le(e.$filters.numero(a.imposto.saida.pICMS,2))+"% ",1)])):ie("",!0),(b=(x=a.imposto)==null?void 0:x.saida)!=null&&b.pICMSST?(B(),be("div",RPe,[t[15]||(t[15]=A("div",{class:"text-weight-bold text-caption"}," ICMS/ST ",-1)),A("div",VPe,le(e.$filters.numero(a.imposto.saida.pICMSST,2))+"% ",1)])):ie("",!0)]}),_:1}),h(s,{class:"q-mt-md q-col-gutter-x-sm"},{default:C(()=>[h(l,{modelValue:a.documentoItem.ncm,"onUpdate:modelValue":t[2]||(t[2]=c=>a.documentoItem.ncm=c),class:"col-12 col-md-6","class-campo":"q-pb-lg"},null,8,["modelValue"]),h(u,{modelValue:a.documentoItem.cest,"onUpdate:modelValue":t[3]||(t[3]=c=>a.documentoItem.cest=c),class:"col-12 col-md-6","class-campo":"q-pb-lg",ncm:a.documentoItem.ncm},null,8,["modelValue","ncm"])]),_:1})]),_:1}),h(fd,{name:"tab3",class:"q-px-none"},{default:C(()=>[a.historico.documentosItens&&a.historico.documentosItens.length?(B(),oe(sw,{key:0,rows:a.historico.documentosItens,columns:a.tabelaHistorico.colunas,pagination:a.tabelaHistorico.paginacao,"onUpdate:pagination":t[4]||(t[4]=c=>a.tabelaHistorico.paginacao=c),class:"no-shadow text-left"},{body:C(c=>[h(TP,{props:c},{default:C(()=>[h(Ec,{key:"documento",props:c},{default:C(()=>[K(le(a.historico.documentos[c.row.idDocumento].tipo)+" #"+le(parseInt(a.historico.documentos[c.row.idDocumento].numero)||(a.historico.documentos[c.row.idDocumento].id||"").slice(-6)),1),t[16]||(t[16]=A("br",null,null,-1)),K(" "+le(a.historico.documentos[c.row.idDocumento].status),1),t[17]||(t[17]=A("br",null,null,-1)),K(" "+le(e.$filters.dataHora(a.historico.documentos[c.row.idDocumento].dataHoraFinalizado||a.historico.documentos[c.row.idDocumento].dataHoraEmissao)),1)]),_:2},1032,["props"]),h(Ec,{key:"valorUnitario",props:c},{default:C(()=>[c.row.valorReal!==c.row.valorItem?(B(),be("span",BPe,le(e.$filters.numero(c.row.valorItem,2)),1)):ie("",!0),K(" "+le(e.$filters.numero(c.row.valorReal,2)),1)]),_:2},1032,["props"]),h(Ec,{key:"quantidade",props:c},{default:C(()=>[K(le(c.row.quantidade*c.row.operacaoFator*-1),1)]),_:2},1032,["props"]),h(Ec,{key:"valorTotal",props:c},{default:C(()=>[K(le(e.$filters.numero(c.row.valorRealTotal,2)),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"])):ie("",!0)]),_:1}),h(fd,{name:"tab4",class:"q-px-none"},{default:C(()=>[a.estoque&&a.estoque.length?(B(),oe(sw,{key:0,rows:a.estoque,columns:a.tabelaEstoque.colunas,pagination:a.tabelaEstoque.paginacao,class:"no-shadow text-left"},{body:C(c=>[h(TP,{props:c},{default:C(()=>[h(Ec,{key:"empresa",props:c},{default:C(()=>[K(le(c.row.apelidoEmpresa)+" ",1),t[18]||(t[18]=A("br",null,null,-1)),K(" "+le(c.row.nomeEmpresa),1)]),_:2},1032,["props"]),h(Ec,{key:"tipoEstoque",props:c},{default:C(()=>[K(le(c.row.tipoEstoque),1)]),_:2},1032,["props"]),h(Ec,{key:"lote",props:c},{default:C(()=>[K(le(c.row.loteEmpresa),1)]),_:2},1032,["props"]),h(Ec,{key:"quantidade",props:c},{default:C(()=>[K(le(c.row.saldo),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"])):ie("",!0)]),_:1})]),_:1},8,["modelValue"])]),h(Ui,null,{default:C(()=>[h(Je,{class:"bg-light"},{default:C(()=>[Ee(h(ae,{flat:"",size:"md","no-ripple":"",color:"tertiary",label:"Cancelar",class:"q-mr-sm"},null,512),[[st]]),h(ae,{"no-ripple":"",label:"Salvar",color:"primary",unelevated:"",class:"no-shadow",onClick:i.salvar},null,8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}var LPe=St(bPe,[["render",qPe]]);const $Pe={computed:{marcaModeloCor(){return["marca","modelo","cor"].map(e=>this.equipamento[e]).filter(e=>e).join(" - ")}},props:{equipamento:{required:!0,type:Object}}},UPe={class:"row q-col-gutter-xs"},zPe={key:0,class:"col-12"},HPe={class:"col-12"},jPe={class:"col-12"},GPe={class:"q-pr-md"},WPe={class:"q-pr-md"},QPe={class:"q-pr-md"},XPe={class:"q-pr-md"},KPe={class:"q-pr-md"},YPe={class:"q-pr-md"},JPe={key:1,class:"col-12"};function ZPe(e,t,o,r,a,i){return B(),be("div",UPe,[o.equipamento.descricao?(B(),be("div",zPe,[A("strong",null,le(o.equipamento.descricao),1)])):ie("",!0),A("div",HPe,le(i.marcaModeloCor),1),A("div",jPe,[o.equipamento.placa?(B(),be(Qe,{key:0},[t[0]||(t[0]=A("span",{class:"text-body2"},"Placa: ",-1)),A("strong",GPe,le(o.equipamento.placa),1)],64)):ie("",!0),o.equipamento.chassi?(B(),be(Qe,{key:1},[t[1]||(t[1]=A("span",{class:"text-body2"},"Chassi: ",-1)),A("strong",WPe,le(o.equipamento.chassi),1)],64)):ie("",!0),o.equipamento.btu?(B(),be(Qe,{key:2},[t[2]||(t[2]=A("span",{class:"text-body2"},"BTU: ",-1)),A("strong",QPe,le(o.equipamento.btu),1)],64)):ie("",!0),o.equipamento.numeroSerie?(B(),be(Qe,{key:3},[t[3]||(t[3]=A("span",{class:"text-body2"},"N\xFAmero de s\xE9rie: ",-1)),A("strong",XPe,le(o.equipamento.numeroSerie),1)],64)):ie("",!0),o.equipamento.dataValidade?(B(),be(Qe,{key:4},[t[4]||(t[4]=A("span",{class:"text-body2"},"Validade: ",-1)),A("strong",KPe,le(e.$filters.data(o.equipamento.dataValidade)),1)],64)):ie("",!0),o.equipamento.dataFinalGarantia?(B(),be(Qe,{key:5},[t[5]||(t[5]=A("span",{class:"text-body2"}," Garantia: ",-1)),A("strong",YPe,le(e.$filters.data(o.equipamento.dataFinalGarantia)),1)],64)):ie("",!0)]),o.equipamento.observacao?(B(),be("div",JPe,[t[6]||(t[6]=A("strong",{class:"text-body2"},"Observa\xE7\xE3o: ",-1)),K(le(o.equipamento.observacao),1)])):ie("",!0)])}var KR=St($Pe,[["render",ZPe]]);const e8e={data(){return{id:"",valorExibirInterno:""}},emits:["update:modelValue","selecionar","selecionarItens"],methods:{async abrirPrompt(){try{if(this.somenteLeitura)return;const e=await $g.promptItem.show({filtro:this.filtro,placeholder:this.rotulo||"Selecione o item"});this.selecionar(e)}catch(e){this.$q.notifyError("Erro ao abrir itens",e)}},async atualizar(){try{if(this.valorExibir)this.valorExibirInterno=this.valorExibir,this.id=this.modelValue||"";else{const e=await $db.item.le({id:this.modelValue});this.valorExibirInterno=e.descricao||"",this.id=e.id||""}}catch(e){this.$q.notifyError("Erro ao consultar",e)}},selecionar(e){try{e.acao==="selecionarItens"&&(e=e.itensSelecionados);const t=Object.keys(e)[0],o=e[t].item;if(!o||!o.id)return;this.valorExibir||(this.valorExibirInterno=o.descricao||""),this.id=o.id||"",this.$emit("update:modelValue",o.id),this.$emit("selecionar",o),this.$emit("selecionarItens",e)}catch(t){this.$q.notifyError("Erro ao selecionar",t)}}},props:{modelValue:{default:"",type:String},after:{type:Object},filtro:{default:()=>({ativo:!0}),type:Object},rotulo:{default:"",type:String},somenteLeitura:{type:Boolean},valorExibir:{default:"",type:String}},watch:{modelValue(e){e!==this.id&&this.atualizar()},valorExibir(e){this.valorExibirInterno=e||""}},created(){this.atualizar()}};function t8e(e,t,o,r,a,i){const n=Ve("campo");return B(),oe(n,ou({modelValue:a.valorExibirInterno,after:o.after,before:o.somenteLeitura?void 0:[{icon:"search",handler:i.abrirPrompt}],rotulo:o.rotulo},e.$attrs,{"somente-leitura":""}),null,16,["modelValue","after","before","rotulo"])}var o8e=St(e8e,[["render",t8e]]);const a8e={components:{SeletorItem:o8e},data(){return{opcoesTipoEquipamento:[],campos:{},visivel:!1}},emits:["atualizar"],methods:{async atualizar(){try{const e=await $db.configuracoes.leValor("equipamento.tipos","Equipamento");this.opcoesTipoEquipamento=e.split(";").filter(t=>t).map(t=>({rotulo:t.trim(),valor:t.trim()})),this.campos.tipo||(this.campos.tipo=this.opcoesTipoEquipamento[0].valor)}catch(e){this.$q.notifyError("Erro ao carregar os dados",e)}},async salvarEquipamento(){const e=$utils.clonarV2(this.campos);$utils.gconsole.log("Equipamentos","salvarEquipamento",e),$utils.verificarErro(!e.tipo,"Tipo de equipamento n\xE3o selecionado"),e.id||(e.id=$utils.uuid()),e.dataCadastro||(e.dataCadastro=$utils.dataAtual()),e.idContato||(e.idContato=$db.contato.selecionado.id),e.tipo==="Ve\xEDculo"?(e.placa=(e.placa||"").replace(/ /g,""),e.numeroSerie="",e.dataValidade=""):(e.chassi="",e.placa=""),e.tipo!=="Ar condicionado"&&(e.btu=""),await $db.equipamento.grava({atual:e,original:this.original}),this.$q.notifyPositive("Equipamento salvo com sucesso"),this.visivel=!1,this.$emit("atualizar",e)}},mounted(){this.atualizar()}},r8e={class:"layout-padding q-px-none q-py-md"},i8e={class:"u-container"},n8e={class:"bg-white q-mx-md q-pa-md"},s8e={class:"col-12 col-sm-6"},l8e={class:"col-12 col-sm-6"},c8e={class:"col-12"},u8e={class:"col-12 col-md-4"},d8e={class:"col-12 col-md-4"},f8e={class:"col-12 col-md-4"},m8e={class:"col-12 col-md-4"},p8e={class:"col-12 col-md-4"},h8e={class:"col-12 col-md-4"},v8e={class:"col-12 col-md-3"},g8e={class:"col-12 col-md-3"},_8e={class:"col-12 col-md-3"},b8e={class:"col-12 col-md-3"},y8e={class:"col-12"},x8e={key:0};function C8e(e,t,o,r,a,i){const n=Ve("campo"),s=Ve("SeletorItem"),l=Ve("row");return B(),oe(Ht,{modelValue:a.visivel,"onUpdate:modelValue":t[16]||(t[16]=u=>a.visivel=u),maximized:""},{default:C(()=>[h(To,{container:"",class:"bg-light"},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,null,{default:C(()=>[Ee(h(ae,{dense:"",flat:"",icon:"arrow_back",round:"",clikable:""},null,512),[[st]]),h(lt,null,{default:C(()=>t[17]||(t[17]=[K("Equipamento")])),_:1}),h(ae,{class:"q-ml-sm no-shadow",color:"white",label:"Salvar",unelevated:"","text-color":"primary",onClick:t[0]||(t[0]=u=>e.tryLoading(i.salvarEquipamento,{erro:"Ocorreu erro ao salvar equipamento"}))})]),_:1})]),_:1}),h(Jo,null,{default:C(()=>[A("div",r8e,[A("div",i8e,[A("div",n8e,[h(l,{class:"q-col-gutter-md"},{default:C(()=>[A("div",s8e,[h(n,{modelValue:a.campos.tipo,"onUpdate:modelValue":t[1]||(t[1]=u=>a.campos.tipo=u),rotulo:"Tipo",tipo:"seletor",opcoes:a.opcoesTipoEquipamento},null,8,["modelValue","opcoes"])]),A("div",l8e,[h(s,{modelValue:a.campos.idItem,"onUpdate:modelValue":t[2]||(t[2]=u=>a.campos.idItem=u),rotulo:"Produto"},null,8,["modelValue"])]),A("div",c8e,[h(n,{modelValue:a.campos.descricao,"onUpdate:modelValue":t[3]||(t[3]=u=>a.campos.descricao=u),rotulo:"Descri\xE7\xE3o"},null,8,["modelValue"])]),A("div",u8e,[h(n,{modelValue:a.campos.marca,"onUpdate:modelValue":t[4]||(t[4]=u=>a.campos.marca=u),rotulo:"Marca",class:"full-width"},null,8,["modelValue"])]),A("div",d8e,[h(n,{modelValue:a.campos.modelo,"onUpdate:modelValue":t[5]||(t[5]=u=>a.campos.modelo=u),rotulo:"Modelo",class:"full-width"},null,8,["modelValue"])]),A("div",f8e,[h(n,{modelValue:a.campos.cor,"onUpdate:modelValue":t[6]||(t[6]=u=>a.campos.cor=u),rotulo:"Cor",class:"full-width"},null,8,["modelValue"])]),a.campos.tipo==="Ve\xEDculo"?(B(),be(Qe,{key:0},[A("div",m8e,[h(n,{modelValue:a.campos.placa,"onUpdate:modelValue":[t[7]||(t[7]=u=>a.campos.placa=u),t[8]||(t[8]=u=>a.campos.placa=a.campos.placa.toUpperCase())],rotulo:"Placa"},null,8,["modelValue"])]),A("div",p8e,[h(n,{modelValue:a.campos.chassi,"onUpdate:modelValue":t[9]||(t[9]=u=>a.campos.chassi=u),rotulo:"Chassi"},null,8,["modelValue"])]),A("div",h8e,[h(n,{modelValue:a.campos.dataFinalGarantia,"onUpdate:modelValue":t[10]||(t[10]=u=>a.campos.dataFinalGarantia=u),rotulo:"Data final garantia",tipo:"data"},null,8,["modelValue"])])],64)):(B(),be(Qe,{key:1},[A("div",v8e,[h(n,{modelValue:a.campos.numeroSerie,"onUpdate:modelValue":t[11]||(t[11]=u=>a.campos.numeroSerie=u),rotulo:"N\xFAmero de s\xE9rie"},null,8,["modelValue"])]),A("div",g8e,[a.campos.tipo==="Ar condicionado"?(B(),oe(n,{key:0,modelValue:a.campos.btu,"onUpdate:modelValue":t[12]||(t[12]=u=>a.campos.btu=u),rotulo:"BTU"},null,8,["modelValue"])):ie("",!0)]),A("div",_8e,[h(n,{modelValue:a.campos.dataValidade,"onUpdate:modelValue":t[13]||(t[13]=u=>a.campos.dataValidade=u),rotulo:"Data de validade",tipo:"data"},null,8,["modelValue"])]),A("div",b8e,[h(n,{modelValue:a.campos.dataFinalGarantia,"onUpdate:modelValue":t[14]||(t[14]=u=>a.campos.dataFinalGarantia=u),rotulo:"Data final garantia",tipo:"data"},null,8,["modelValue"])])],64)),A("div",y8e,[h(n,{modelValue:a.campos.observacao,"onUpdate:modelValue":t[15]||(t[15]=u=>a.campos.observacao=u),rotulo:"Observa\xE7\xE3o",tipo:"textoArea"},null,8,["modelValue"])])]),_:1})]),h(l,{class:"items-center justify-around q-my-lg"},{default:C(()=>[a.campos.dataCadastro?(B(),be("small",x8e,"Data do cadastro: "+le(e.$filters.dataHora(a.campos.dataCadastro)),1)):ie("",!0)]),_:1})])])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var w8e=St(a8e,[["render",C8e]]);const E8e={components:{EquipamentoCard:KR},data(){return{dados:[],visivel:!1,termo:""}},emits:["selecionar"],methods:{atualizar(){let e=this.termo.replace(/\s+/g," ");!e||(e=this.termo.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").split(" "),this.dados=this.dados.filter(t=>{const o=[];o.push(t.descricao||""),o.push(t.placa||""),o.push(t.marca||""),o.push(t.modelo||""),o.push(t.cor||""),o.push(t.numeroSerie||""),o.push(t.chassi||""),o.push(t.tipo||""),o.push(t.btu||""),o.push(t.observacao||"");const r=o.join(" ").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");for(const a of e)if(!(r.search(a)>-1))return!1;return!0}))},fechar(){this.visivel=!1,this.dados=[]},async mostrar(e){const{filtro:t={}}=e;this.dados=await $db.equipamento.le(t),this.visivel=!0},selecionar(e){this.$emit("selecionar",e),this.fechar()}}},S8e={class:"layout-padding"},I8e={class:"q-py-xl"};function A8e(e,t,o,r,a,i){const n=Ve("EquipamentoCard");return B(),oe(Ht,{modelValue:a.visivel,"onUpdate:modelValue":t[1]||(t[1]=s=>a.visivel=s),persistent:"",maximized:"",onKeyup:jr(i.fechar,["esc"])},{default:C(()=>[h(To,{class:"bg-white",container:""},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,null,{default:C(()=>[Ee(h(ae,{dense:"",flat:"",icon:"arrow_back",round:""},null,512),[[st]]),h(lt,null,{default:C(()=>[h(ma,{modelValue:a.termo,"onUpdate:modelValue":[t[0]||(t[0]=s=>a.termo=s),i.atualizar],modelModifiers:{trim:!0},color:"none",ref:"search",dark:"",dense:"",placeholder:"Buscar",debounce:"600"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1}),A("div",S8e,[A("div",I8e,[h(At,{link:"","no-border":"",separator:""},{default:C(()=>[(B(!0),be(Qe,null,qt(a.dados,s=>(B(),oe(qe,{key:s.id,clickable:"",style:{cursor:"pointer"},onClick:l=>i.selecionar(s)},{default:C(()=>[h(n,{equipamento:s},null,8,["equipamento"])]),_:2},1032,["onClick"]))),128))]),_:1})])])]),_:1})]),_:1},8,["modelValue","onKeyup"])}var T8e=St(E8e,[["render",A8e]]);const D8e={components:{PromptEquipamento:T8e},data(){return{descricaoEquipamento:"",campos:{},modal:!1}},emits:["selecionar","update:modelValue"],methods:{abrirPromptEquipamento(){this.$refs.promptEquipamento.mostrar({filtro:this.filtro})},async atualizar(){try{this.campos=await $db.equipamento.le({id:this.modelValue})}catch(e){this.$q.notifyError("Erro ao consultar equipamento",e)}},selecionar(e){try{this.mostraDescricao&&(this.descricaoEquipamento=e.placa||e.descricao||e.marca+" - "+e.modelo||e.tipo||e.id),this.campos=e,this.$emit("update:modelValue",e.id),this.$emit("selecionar",e),this.modal=!1}catch(t){this.$q.notifyError("Erro ao selecionar",t)}}},props:{modelValue:{default:"",type:String},rotulo:{default:"",type:String},filtro:{type:Object},mostraDescricao:{default:!1,type:Boolean},apenasIcone:{default:!1,type:Boolean}},watch:{async modelValue(e){e!==this.campos.id&&this.atualizar()}},created(){this.atualizar()}};function O8e(e,t,o,r,a,i){const n=Ve("campo"),s=Ve("PromptEquipamento");return B(),be("div",null,[o.apenasIcone?(B(),oe(ae,{key:0,color:"primary",flat:"",icon:"search",label:"Equipamento",onClick:i.abrirPromptEquipamento},null,8,["onClick"])):(B(),oe(n,{key:1,modelValue:a.descricaoEquipamento,before:[{icon:"search",handler:()=>a.modal=!0}],rotulo:o.rotulo,onClick:t[0]||(t[0]=l=>a.modal=!0),"apenas-leitura":""},null,8,["modelValue","before","rotulo"])),h(s,{ref:"promptEquipamento",onSelecionar:i.selecionar},null,8,["onSelecionar"])])}var P8e=St(D8e,[["render",O8e]]);const Yy={documento:{},documentoItens:[],arquivo:[]},F8e={components:{Arquivo:Zm,CodigoBarras:Jm,EquipamentoCard:KR,EquipamentoModal:w8e,PromptItemV2:Zd,SeletorEquipamento:P8e},computed:{new(){for(const e of this.dataTmp.documentoItens)e.descricaoAgrupamento=this.descricaoAgrupamento,e.dataGarantiaFim=this.dataGarantiaFim;return{...this.data,...this.dataTmp,arquivo:this.$refs.arquivo.arquivos.map(e=>({...e,idTabelaMaster:this.dataTmp.documento.id,tabelaMaster:"os"}))}},readonly(){return this.dataTmp.documento.status!=="Or\xE7amento"}},data(){return{contato:{},dataGarantiaFim:"",data:{},dataTmp:{},descricaoAgrupamento:"",descricaoResponsavel:"",equipamento:{},modalItem:{},item:{},hintValorUnitario:{},rules:{},subTotal:{},visible:!1,valoresTabelaPreco:[],warningLabel:{},permissao:{}}},emits:["salvar"],methods:{abrirModalEquipamento(){this.$refs.modalEquipamento.campos={},this.$refs.modalEquipamento.visivel=!0},async abrirModalItem(e){let t={};for(const o of this.dataTmp.documentoItens){if(!o.idItem)continue;this.item||(this.item={}),this.item[o.idItem]||(this.item[o.idItem]=await $erp().item.get(o.idItem));let r=$utils.clonarV2(this.item[o.idItem]);r.novoValorVenda=o.valorReal,t[o.idItem]={item:r,quantidade:o.quantidade}}this.$refs.promptItem.itensSelecionados=t,this.modalItem.filtros={ativo:!0,bloquearVenda:!1,tipo:e,idEmpresa:this.dataTmp.documento.idEmpresa,idTabelaPreco:this.dataTmp.documento.idItemTabelaPreco},this.modalItem.visivel=!0},async abrirModalResponsavel(){if(!this.readonly){const e=await $g.promptContato.show({filtro:{ativo:!0,tecnicos:!0},placeholder:"Selecione o t\xE9cnico respons\xE1vel"});e&&this.selecionarResponsavel(e.id)}},adicionarItem(e){const t=this.dataTmp.documentoItens.find(a=>a.idItem===e.id);let o=1;e.novoValorVenda=e.valorVenda,t&&(e.novoValorVenda=t.valorReal,o=t.quantidade+1);const r={};r[e.id]={item:e,quantidade:o},this.selecionarItens(r)},async prepararItem(e,t={}){if(!!e&&!this.item[e]&&(t.id||(t=await $db.item.le({id:e})),t.id)){const o=$utils.clonarV2(this.item);o[t.id]={marca:t.marca||"",referencia:t.referencia||"",imagem:t.imagem||"",embalagem:t.embalagem||""},this.item=o}},calculaTotal(){const e=$utils.clonarV2(this.dataTmp.documento);let t=0;for(const o of this.dataTmp.documentoItens)t+=o.subTotal;e.subTotal=$utils.arredondar(t),e.totalDocumento=e.subTotal,this.dataTmp.documento=e},async calculaTotalItem(e,t){const o=$utils.clonarV2(this.dataTmp.documentoItens[e]);if(t==="quantidade"&&this.dataTmp.documento.idItemTabelaPreco){const n=await $erp().itemTabelaPreco.get(this.dataTmp.documento.idItemTabelaPreco);if(n){await this.configurarValoresTabelaPreco(n,o);let s=this.valoresTabelaPreco.find(l=>l.id===o.id);s.quantidadeMaiorQue&&(this.hintValorUnitario[o.id]=`>${s.quantidadeMaiorQue-1}un = ${$filters.numeroZerosDireita(s.valorVendaMaiorQue,4,2)}`),s.quantidadeMaiorQue&&o.quantidade>=s.quantidadeMaiorQue?(o.valorOriginal!==s.valorVendaMaiorQue&&(o.valorOriginal=o.valorItem=s.valorVendaMaiorQue,o.descontoItem=o.descontoPercentualItem=0),this.warningLabel[o.id]="Valor Diferenciado"):(o.valorOriginal!==s.valorVenda&&(o.valorOriginal=o.valorItem=s.valorVenda,o.descontoItem=o.descontoPercentualItem=0),this.warningLabel[o.id]="")}}o.valorItem<o.valorOriginal&&(o.valorItem=o.valorOriginal),t==="descontoPercentualItem"&&(o.descontoItem=$utils.arredondar(o.descontoPercentualItem/100*o.valorItem,4)),["descontoItem","valorItem"].includes(t)&&(o.descontoPercentualItem=$utils.arredondar(o.descontoItem/o.valorItem*100)),o.descontoItem>o.valorItem&&(o.descontoPercentualItem=o.descontoItem=0),["subTotal"].includes(t)&&(this.subTotal[o.id]!==void 0?o.descontoItem=$utils.arredondar(o.valorItem-this.subTotal[o.id],4):o.descontoItem=$utils.arredondar(o.valorItem-o.subTotal,4),o.descontoPercentualItem=$utils.arredondar(o.descontoItem/o.valorItem*100),this.subTotal[o.id]>0&&this.subTotal[o.id]>o.valorItem&&(o.valorItem=this.subTotal[o.id]));let r=$utils.arredondar(o.valorItem-o.descontoItem,4);o.descontoItem=$utils.arredondar(o.valorItem-r,4),$utils.arredondar(r)>$utils.arredondar(o.valorItem)&&(r=o.valorItem,o.descontoPercentualItem=o.descontoItem=0);const a=$utils.clonarV2(this.subTotal);a[o.id]=r,this.subTotal=a,o.subTotal=$utils.arredondar(r*o.quantidade),o.total=o.subTotal,o.valorReal=$utils.arredondar(r),o.valorRealTotal=o.total;const i=$utils.clonarV2(this.dataTmp.documentoItens);t==="valorItem"?(i[e]={...o,valorItem:0},this.dataTmp.documentoItens=i,this.$nextTick(()=>{i[e]=o,this.dataTmp.documentoItens=i,this.calculaTotal()})):(i[e]=o,this.dataTmp.documentoItens=i),this.calculaTotal()},async configurarValoresTabelaPreco(e,t){let o=this.valoresTabelaPreco.find(a=>a.id===t.id);if(o)return;let r=await $erp().item.get(t.idItem);o=await $db.itemTabelaPreco.obterValores(e,r,4),this.valoresTabelaPreco.push({id:t.id,...o})},async fechar(e){if(e.stopPropagation(),this.isEqual()){this.visible=!1;return}$q.dialog({message:"Ao continuar voc\xEA ir\xE1 perder todas as modifica\xE7\xF5es.",title:"Tem certeza?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{this.visible=!1})},isEqual(){const e={...Yy,...$utils.clonarV2(this.data)},t=$utils.diferencaObjetos(e,this.new);return!Object.keys(t).length},async mostrar(){this.dataTmp={...Yy,...$utils.clonarV2(this.data)},this.warningLabel={},this.valoresTabelaPreco=[],this.descricaoAgrupamento="",this.dataGarantiaFim="",this.descricaoAgrupamento=$lodash.get(this.dataTmp.documentoItens.find(e=>e.id),"descricaoAgrupamento",""),this.dataGarantiaFim=$lodash.get(this.dataTmp.documentoItens.find(e=>e.dataGarantiaFim),"dataGarantiaFim","");for(const e of this.dataTmp.documentoItens){this.prepararItem(e.idItem);const t=$utils.clonarV2(this.subTotal);t[e.id]=e.valorItem-e.descontoItem,this.subTotal=t}this.contato={codigo:"",descricao:"",imagem:""},await $db.contato.le({id:this.dataTmp.documento.idContato}).then(e=>{this.contato.codigo=e.codigoContato||e.id.slice(-6)||"",this.contato.descricao=e.nome||e.apelido||"",this.contato.imagem=e.imagem||""}),this.descricaoResponsavel="",this.dataTmp.documento.idContatoResponsavel&&this.selecionarResponsavel(this.dataTmp.documento.idContatoResponsavel),this.equipamento=await $db.equipamento.le({id:this.dataTmp.documento.idEquipamento}),this.visible=!0,await this.$nextTick()},async removerItem(e){const t=(this.dataTmp.documentoItens[e]||{}).id;this.dataTmp.documentoItens=this.dataTmp.documentoItens.filter(o=>o.id!==t),this.calculaTotal()},async salvar(){const e=new Date(new Date().toDateString());this.rules={dataGarantiaFim:[()=>!(this.dataGarantiaFim||"").trim()||new Date(this.dataGarantiaFim)>=e?!0:"Data garantia deve ser maior ou igual \xE0 data de hoje"]},await this.$nextTick();let t=!1;if(this.$refs.form.getValidationComponents().forEach(o=>{!o.validate()&&!t&&(t=!0)}),t){this.$q.notifyError("Corrija os campos em destaque");return}if(!this.dataTmp.documentoItens.length){this.$q.notifyError("N\xE3o h\xE1 itens no carrinho");return}this.$emit("salvar",{dados:this.new}),this.visible=!1},async selecionarItens(e){for(const t in e){const o=e[t].item||{},r=e[t].quantidade||0;let a=this.dataTmp.documentoItens.findIndex(i=>i.idItem===t);await this.selecionarItem(t,o,r),a===-1&&(a=this.dataTmp.documentoItens.findIndex(i=>i.idItem===t),a!==-1&&this.calculaTotalItem(a,"quantidade"))}},async selecionarItem(e,t,o){let r=this.dataTmp.documentoItens.findIndex(u=>u.idItem===e);if(r!==-1){t.novoValorVenda!==this.dataTmp.documentoItens[r].valorOriginal&&(t.novoValorVenda<=this.dataTmp.documentoItens[r].valorOriginal?(this.dataTmp.documentoItens[r].valorItem=this.dataTmp.documentoItens[r].valorOriginal,this.dataTmp.documentoItens[r].descontoItem=$utils.arredondar(this.dataTmp.documentoItens[r].valorOriginal-t.novoValorVenda)):(this.dataTmp.documentoItens[r].valorItem=t.novoValorVenda,this.dataTmp.documentoItens[r].descontoItem=0),this.calculaTotalItem(r,"descontoItem")),this.dataTmp.documentoItens[r].quantidade!==o&&(this.dataTmp.documentoItens[r].quantidade=o||1,this.calculaTotalItem(r,"quantidade"));return}const a=await $utils.selecionarCfop({ncm:t.ncm,idItem:t.id,itemTipo:t.tipo,codigoDocumentoOperacao:this.dataTmp.documento.codigoDocumentoOperacao,idContatoDestinatario:this.dataTmp.documento.idContato,idContatoEmitente:this.dataTmp.documento.idEmpresa,operacaoFator:-1});if(!a){this.$q.notify("N\xE3o foi poss\xEDvel localizar o CFOP.");return}const i=(await $db.estoqueSaldoProdutoEmpresa.le({idItem:t.id,idEmpresa:$lodash.get(this.dataTmp,"documento.idEmpresa",""),tipoEstoque:"Dispon\xEDvel"})).find(u=>u.idItem),n=$utils.uuid(),s=$utils.clonarV2(this.subTotal);s[n]=t.valorVenda,this.subTotal=s,this.prepararItem(e,t);const l={id:n,idItem:t.id,idDocumento:this.dataTmp.documento.documentoId,idDocumentoAdicional:this.dataTmp.documento.id,codigoPlanoContaDestino:139,codigoPlanoContaEstoque:146,dataHoraEmissao:$utils.dataAtual(),descontoItem:0,descontoPercentualItem:0,descontoSubTotal:0,descricaoItem:t.descricaoConcatenada,operacao:t.tipo==="Servi\xE7o"?"Ordem de Servi\xE7o":a==null?void 0:a.operacao,operacaoFator:t.tipo==="Servi\xE7o"?"":a==null?void 0:a.fator,idCfop:a==null?void 0:a.id,quantidade:o||1,status:this.dataTmp.documento.status,subTotal:t.valorVenda,tipoItem:t.tipo,total:t.valorVenda,valorCusto:0,valorCustoMedio:$lodash.get(i,"valorCustoMedio",0),valorCustoReposicao:t.valorCustoReposicao||0,valorCustoUltimo:$lodash.get(i,"valorCusto",0),valorItem:t.valorVenda,valorItemUltimo:0,valorOriginal:t.valorVenda,valorReal:t.valorVenda,valorRealTotal:t.valorVenda};this.dataTmp.documentoItens.push(l),r=this.dataTmp.documentoItens.findIndex(u=>u.idItem===e),r!==-1&&t.novoValorVenda!==this.dataTmp.documentoItens[r].valorOriginal&&(t.novoValorVenda<=this.dataTmp.documentoItens[r].valorOriginal?(this.dataTmp.documentoItens[r].valorItem=this.dataTmp.documentoItens[r].valorOriginal,this.dataTmp.documentoItens[r].descontoItem=$utils.arredondar(this.dataTmp.documentoItens[r].valorOriginal-t.novoValorVenda)):(this.dataTmp.documentoItens[r].valorItem=t.novoValorVenda,this.dataTmp.documentoItens[r].descontoItem=0),this.calculaTotalItem(r,"descontoItem")),o||this.calculaTotal()},limparResponsavel(){this.dataTmp.documento.idContatoResponsavel="",this.descricaoResponsavel=""},async selecionarResponsavel(e){this.dataTmp.documento.idContatoResponsavel=e||"",this.descricaoResponsavel=(await $db.contato.le({id:e})).apelido||""}},created(){this.permissao={equipamento:!1},$db.permissao.objeto("atendimento//equipamento").then(e=>{this.permissao.equipamento=e}),this.dataTmp={...Yy},this.modalItem={filtros:{},visivel:!1}}},M8e={class:"layout-padding q-pa-none q-pb-md"},N8e={class:"u-container"},k8e={class:"col q-ma-sm q-title"},R8e={class:"col-12 col-sm-6"},V8e={class:"col-12 col-sm-6"},B8e={class:"col-12 col-md-3"},q8e={class:"col-12 col-md-3"},L8e={class:"col-12 col-md-3"},$8e={key:0,class:"bg-white q-mt-md"},U8e={class:"q-pa-md"},z8e={class:"bg-white q-mt-md"},H8e={class:"q-pa-md"},j8e={class:"bg-white q-mt-md"},G8e={class:"q-pa-md"},W8e={key:0,class:"q-pa-lg text-center"},Q8e={class:"col-12 q-mb-lg"},X8e=["warning","warning-label"],K8e={class:"col-4 col-md"},Y8e={class:"col-4 col-md"},J8e={class:"col-6 col-md"},Z8e={class:"col-6 col-md"},e9e={class:"col-12 col-md"},t9e={class:"u-container"},o9e={class:"q-ml-sm"};function a9e(e,t,o,r,a,i){const n=Ve("avatar"),s=Ve("badge"),l=Ve("campo"),u=Ve("row"),c=Ve("EquipamentoModal"),d=Ve("SeletorEquipamento"),f=Ve("EquipamentoCard"),m=Ve("Arquivo"),p=Ve("CodigoBarras"),v=Ve("PromptItemV2");return B(),be(Qe,null,[h(Ht,{modelValue:a.visible,"onUpdate:modelValue":t[13]||(t[13]=g=>a.visible=g),persistent:"",maximized:"",onKeyup:jr(i.fechar,["esc"])},{default:C(()=>[h(To,{container:"",class:"bg-light"},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,null,{default:C(()=>[h(ae,{icon:"arrow_back",flat:"",round:"",dense:"",onClick:i.fechar},null,8,["onClick"]),h(lt,null,{default:C(()=>t[15]||(t[15]=[K("Ordem de Servi\xE7o")])),_:1}),h(ae,{class:"q-ml-sm no-shadow",color:"white","text-color":"primary",label:"Salvar",onClick:i.salvar,unelevated:""},null,8,["onClick"])]),_:1})]),_:1}),h(Jo,null,{default:C(()=>[A("div",M8e,[A("div",N8e,[h(Mt,{class:"q-pa-md q-mt-md bg-white no-shadow"},{default:C(()=>[h(Je,{class:"q-pb-md q-px-none"},{default:C(()=>[h(n,{imagem:a.contato.imagem,rotulo:a.contato.descricao,tamanho:"40"},null,8,["imagem","rotulo"]),h(lt,{class:"q-px-none"},{default:C(()=>[A("div",k8e,le(a.contato.descricao),1)]),_:1}),h(s,null,{default:C(()=>[K("#"+le(a.contato.codigo),1)]),_:1})]),_:1}),h(cl,{ref:"form"},{default:C(()=>[h(u,{class:"q-col-gutter-md"},{default:C(()=>[A("div",R8e,[h(l,{modelValue:a.dataTmp.documento.descricao,"onUpdate:modelValue":t[0]||(t[0]=g=>a.dataTmp.documento.descricao=g),modelModifiers:{trim:!0},rotuloFixo:"Problema",tipo:"textoArea","somente-leitura":i.readonly},null,8,["modelValue","somente-leitura"])]),A("div",V8e,[h(l,{modelValue:a.dataTmp.documento.observacao,"onUpdate:modelValue":t[1]||(t[1]=g=>a.dataTmp.documento.observacao=g),modelModifiers:{trim:!0},rotuloFixo:"Solu\xE7\xE3o","somente-leitura":i.readonly,tipo:"textoArea"},null,8,["modelValue","somente-leitura"])]),h(ii,{dense:"",rounded:"",modelValue:a.descricaoResponsavel,"onUpdate:modelValue":t[2]||(t[2]=g=>a.descricaoResponsavel=g),label:"T\xE9cnico",options:["a","b"],onFilter:i.abrirModalResponsavel,class:"col-12 col-md-3"},{append:C(()=>[a.descricaoResponsavel?(B(),oe(Pe,{key:0,name:"close",onClick:rt(i.limparResponsavel,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):ie("",!0),h(Pe,{name:"search",onClick:rt(i.abrirModalResponsavel,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onFilter"]),A("div",B8e,[h(l,{modelValue:a.dataTmp.documento.dataHoraPrevisto,"onUpdate:modelValue":t[3]||(t[3]=g=>a.dataTmp.documento.dataHoraPrevisto=g),maxlength:"10",rotulo:"Previs\xE3o de Entrega",tipo:"data",somenteLeitura:i.readonly},null,8,["modelValue","somenteLeitura"])]),A("div",q8e,[h(l,{modelValue:a.dataGarantiaFim,"onUpdate:modelValue":t[4]||(t[4]=g=>a.dataGarantiaFim=g),maxlength:"10",rotulo:"Garantia do(s) Servi\xE7o(s)",tipo:"data",somenteLeitura:i.readonly,rules:a.rules.dataGarantiaFim},null,8,["modelValue","somenteLeitura","rules"])]),A("div",L8e,[h(l,{modelValue:a.descricaoAgrupamento,"onUpdate:modelValue":t[5]||(t[5]=g=>a.descricaoAgrupamento=g),modelModifiers:{trim:!0},rotuloFixo:"Descri\xE7\xE3o Agrupamento",autogrow:"",somenteLeitura:i.readonly},null,8,["modelValue","somenteLeitura"])])]),_:1})]),_:1},512)]),_:1}),a.permissao.equipamento?(B(),be("div",$8e,[h(Je,null,{default:C(()=>[h(Pe,{name:"mdi-car",size:"24px",class:"text-tertiary"}),h(lt,{class:"text-tertiary"},{default:C(()=>t[16]||(t[16]=[K("Equipamento")])),_:1}),i.readonly?ie("",!0):(B(),oe(ae,{key:0,color:"primary",flat:"",icon:"add",label:"Equipamento",onClick:i.abrirModalEquipamento},null,8,["onClick"]))]),_:1}),A("div",U8e,[h(c,{ref:"modalEquipamento",onAtualizar:t[6]||(t[6]=g=>{a.equipamento=g,a.dataTmp.documento.idEquipamento=g.id})},null,512),h(d,{modelValue:a.dataTmp.documento.idEquipamento,"onUpdate:modelValue":t[7]||(t[7]=g=>a.dataTmp.documento.idEquipamento=g),apenasIcone:"",class:"col-auto",filtro:{idContato:a.dataTmp.documento.idContato},onSelecionar:t[8]||(t[8]=g=>a.equipamento=g)},null,8,["modelValue","filtro"]),h(f,{equipamento:a.equipamento},null,8,["equipamento"])])])):ie("",!0),A("div",z8e,[h(Je,{class:"text-tertiary"},{default:C(()=>[h(Pe,{name:"attach_file",size:"24px"}),h(lt,null,{default:C(()=>t[17]||(t[17]=[K("Arquivos")])),_:1})]),_:1}),A("div",H8e,[h(m,{id:a.data.id,arquivos:a.data.arquivo,edicao:!i.readonly,cartao:"",ref:"arquivo"},null,8,["id","arquivos","edicao"])])]),A("div",j8e,[h(Je,null,{default:C(()=>[h(Pe,{name:"shopping_cart",size:"24px"}),h(lt,null,{default:C(()=>t[18]||(t[18]=[K("Carrinho")])),_:1}),h(ae,{class:"hideondesktop",color:"primary",flat:"",round:"",icon:"add",size:"md"},{default:C(()=>[h(aa,null,{default:C(()=>[Ee((B(),oe(At,{link:"","no-border":"",separator:""},{default:C(()=>[h(qe,{clickable:"",onClick:t[9]||(t[9]=g=>i.abrirModalItem("Produto"))},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"add"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[19]||(t[19]=[K("Produto")])),_:1})]),_:1})]),_:1}),h(qe,{clickable:"",onClick:t[10]||(t[10]=g=>i.abrirModalItem("Servi\xE7o"))},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"add"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[20]||(t[20]=[K("Servi\xE7o")])),_:1})]),_:1})]),_:1})]),_:1})),[[st]])]),_:1})]),_:1}),i.readonly?ie("",!0):(B(),oe(ae,{key:0,color:"primary",flat:"",icon:"add",label:"Produto",class:"hideonmobile q-px-sm q-ml-sm",onClick:t[11]||(t[11]=g=>i.abrirModalItem("Produto"))})),i.readonly?ie("",!0):(B(),oe(ae,{key:1,color:"primary",flat:"",icon:"add",label:"Servi\xE7o",class:"hideonmobile q-px-sm q-ml-sm",onClick:t[12]||(t[12]=g=>i.abrirModalItem("Servi\xE7o"))})),i.readonly?ie("",!0):(B(),oe(p,{key:2,itemFiltros:{ativo:!0,bloquearVenda:!1,idEmpresa:a.dataTmp.documento.idEmpresa,idItemTabelaPreco:a.dataTmp.documento.idItemTabelaPreco},documentoItens:a.dataTmp.documentoItens,onAdicionar:i.adicionarItem,onAtualizar:i.selecionarItens},null,8,["itemFiltros","documentoItens","onAdicionar","onAtualizar"]))]),_:1}),A("div",G8e,[a.dataTmp.documentoItens.length?(B(!0),be(Qe,{key:1},qt(a.dataTmp.documentoItens,(g,x)=>(B(),oe(u,{key:x,class:"items-carrinho items-center q-px-sm q-pt-sm"},{default:C(()=>[h(At,{class:"full-width"},{default:C(()=>[h(qe,{class:"q-px-none"},{default:C(()=>[h(fe,{avatar:"",class:"col-auto"},{default:C(()=>[h(n,{imagem:a.item[g.idItem].imagem,rotulo:g.descricaoItem,tamanho:"40"},null,8,["imagem","rotulo"])]),_:2},1024),h(fe,{class:"q-px-none"},{default:C(()=>[h(Re,null,{default:C(()=>[K(le(g.descricaoItem),1)]),_:2},1024),h(Re,{caption:""},{default:C(()=>[K(le(a.item[g.idItem].marca),1)]),_:2},1024)]),_:2},1024),h(fe,{avatar:""},{default:C(()=>[h(s,{denso:""},{default:C(()=>[K(le(g.tipoItem)+" "+le(a.item[g.idItem].referencia),1)]),_:2},1024)]),_:2},1024),h(fe,{avatar:""},{default:C(()=>[h(ae,{color:"tertiary",dense:"",flat:"",icon:"delete",round:"",onClick:b=>i.removerItem(x)},{default:C(()=>[h(Ft,null,{default:C(()=>t[22]||(t[22]=[K("Remover Item")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024),A("div",Q8e,[h(u,{class:"q-col-gutter-x-sm"},{default:C(()=>[A("div",{class:"col-4 col-md",warning:!!a.warningLabel[g.id],"warning-label":a.warningLabel[g.id]},[h(l,{"class-campo":"u-campoCompacto",align:"left",tipo:"decimal",decimals:"4",zerosDireita:"2",outlined:"",rotulo:"Valor do produto","somente-leitura":i.readonly,modelValue:g.valorItem,"onUpdate:modelValue":b=>g.valorItem=b,onBlur:b=>i.calculaTotalItem(x,"valorItem"),aviso:"",avisoRotulo:a.hintValorUnitario[g.id]},null,8,["somente-leitura","modelValue","onUpdate:modelValue","onBlur","avisoRotulo"])],8,X8e),A("div",K8e,[h(u,{class:"items-center"},{default:C(()=>[h(Pe,{name:"mdi-minus",color:"primary"}),h(l,{"class-campo":"u-campoCompacto ",opcoes:{maximumValue:100},tipo:"decimal",outlined:"",rotulo:"Desconto percentual",decimals:"2",suffix:"%",modelValue:g.descontoPercentualItem,"onUpdate:modelValue":b=>g.descontoPercentualItem=b,"somente-leitura":i.readonly,onBlur:b=>i.calculaTotalItem(x,"descontoPercentualItem")},null,8,["modelValue","onUpdate:modelValue","somente-leitura","onBlur"])]),_:2},1024)]),A("div",Y8e,[h(l,{"class-campo":"u-campoCompacto",opcoes:{maximumValue:g.valorItem,minimumValue:0},rotulo:"Desconto em reais",tipo:"decimal",decimals:"4",zerosDireita:"2",modelValue:g.descontoItem,"onUpdate:modelValue":b=>g.descontoItem=b,"somente-leitura":i.readonly,outlined:"",onBlur:b=>i.calculaTotalItem(x,"descontoItem")},null,8,["opcoes","modelValue","onUpdate:modelValue","somente-leitura","onBlur"])]),A("div",J8e,[h(u,{class:"items-center"},{default:C(()=>[h(Pe,{name:"mdi-equal",color:"primary",class:"hideonmobile"}),h(l,{"class-campo":"u-campoCompacto text-weight-bold",rotulo:"Subtotal",align:e.$q.screen.lt.sm?"left":"right",opcoes:{maximumValue:g.valorItem,minimumValue:0},tipo:"decimal",outlined:"",decimals:"4",zerosDireita:"2",modelValue:a.subTotal[g.id],"onUpdate:modelValue":b=>a.subTotal[g.id]=b,"somente-leitura":i.readonly,onBlur:b=>i.calculaTotalItem(x,"subTotal")},null,8,["align","opcoes","modelValue","onUpdate:modelValue","somente-leitura","onBlur"])]),_:2},1024)]),A("div",Z8e,[h(u,{class:"items-center"},{default:C(()=>[h(Pe,{name:"mdi-close",color:"primary"}),h(l,{"class-campo":"u-campoCompacto",min:"0",modelValue:g.quantidade,"onUpdate:modelValue":[b=>g.quantidade=b,b=>i.calculaTotalItem(x,"quantidade")],outlined:"","somente-leitura":i.readonly,tipo:"quantidade",decimals:"4",zerosDireita:"0",aviso:"",avisoRotulo:a.item[g.idItem].embalagem},null,8,["modelValue","onUpdate:modelValue","somente-leitura","avisoRotulo"])]),_:2},1024)]),A("div",e9e,[h(u,{class:"items-center"},{default:C(()=>[h(Pe,{name:"mdi-equal",color:"primary",class:"hideonmobile"}),h(l,{"class-campo":"u-campoCompacto text-weight-bold","somente-leitura":"",tipo:"decimal",outlined:"",rotulo:"Total",decimals:"2",modelValue:g.total,"onUpdate:modelValue":b=>g.total=b},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)])]),_:2},1024)])]),_:2},1024))),128)):(B(),be("div",W8e,t[21]||(t[21]=[A("p",null,"N\xE3o h\xE1 itens no carrinho",-1),A("p",{class:"text-caption"},"Para adicionar, utilize os bot\xF5es acima ou insira o c\xF3digo de barras",-1)])))])])])])]),_:1}),h(Ui,{class:"bg-light"},{default:C(()=>[A("div",t9e,[h(Je,{class:"text-tertiary bg-light"},{default:C(()=>[h(lt),t[23]||(t[23]=K(" Total ")),A("strong",o9e,le(e.$filters.numero(a.dataTmp.documento.totalDocumento,2)),1)]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue","onKeyup"]),h(v,{modelValue:a.modalItem.visivel,"onUpdate:modelValue":t[14]||(t[14]=g=>a.modalItem.visivel=g),onSelecionarItens:i.selecionarItens,filtro:a.modalItem.filtros,habilitarQuantidade:!0,ref:"promptItem"},null,8,["modelValue","onSelecionarItens","filtro"])],64)}var r9e=St(F8e,[["render",a9e]]);const i9e={computed:{documentosEncontrados(){return this.documentos.length}},data(){return{carregando:!1,cfop:{},documentos:[],filtro:{},placeholder:"Buscar",termo:"",visivel:!1}},emits:["selecionar"],methods:{async filtrar(){let e;try{this.carregando=!0,e=setTimeout(()=>{$q.loading.show({message:"Carregando informa\xE7\xF5es...",boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary"})},500);let t=await $db.documentoOperacao.ler();t=t.filter(o=>{let r=[99,100];return this.classificacaoDestinatario!==1&&(r=[100]),~r.indexOf(o.finalidade)?o.ativo:!1});for(const o of t)if(o.codigoCfop&&!this.cfop[o.codigoCfop]){let r,a;r=await $erp().cfop.where({codigoCfop:o.codigoCfop}).toArray(),a=r.find(i=>i.codigoCfop)||{},a.codigoCfop&&(this.cfop[a.codigoCfop]={cfop:a.cfop,operacao:(a.operacao||"").trim()})}if(this.termo){let o=new Set(this.termo.toLowerCase().replace(/\s+/g," ").normalize("NFD").replace(/[\u0300-\u036f]/g,"").split(" "));o=Array.from(o),o.sort((r,a)=>r<a?1:-1),t=t.filter(r=>{let a=(r.descricao||"")+" "+((this.cfop[r.codigoCfop]||{}).operacao||"")+" "+(r.codigoCfop||"");a=a.toLowerCase().replace(/\s+/g," ").normalize("NFD").replace(/[\u0300-\u036f]/g,"");for(const i of o)if(a.indexOf(i)===-1)return!1;return!0})}t.sort((o,r)=>o.descricao>r.descricao?1:-1),this.documentos=t.slice(0,30)}finally{this.carregando=!1,clearTimeout(e),$q.loading.hide()}},descricaoFinalidade(e){return e===99?"Revenda":e===100?"Consumo":""},fechar(){this.limpar(),this.selecionar()},limpar(){this.carregando=!1,this.documentos=[],this.filtro={},this.placeholder="Buscar",this.termo=""},mostrar(e={}){this.classificacaoDestinatario=e.classificacaoDestinatario,this.filtrar(),this.visivel=!0},onShow(){this.$refs.search.focus()},selecionar(e={}){this.$emit("selecionar",$lodash.cloneDeep(e)),this.visivel=!1}}},n9e={class:"layout-padding",container:""},s9e={key:0},l9e={key:1,class:"bg-light q-pa-lg q-mt-lg round-borders text-black text-center"};function c9e(e,t,o,r,a,i){return B(),oe(Ht,{modelValue:a.visivel,"onUpdate:modelValue":t[1]||(t[1]=n=>a.visivel=n),persistent:"",maximized:"",onKeyup:jr(i.fechar,["esc"]),onShow:i.onShow},{default:C(()=>[h(To,{class:"bg-white",container:""},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,null,{default:C(()=>[Ee(h(ae,{dense:"",flat:"",icon:"arrow_back",round:"",onClick:i.fechar},null,8,["onClick"]),[[st]]),h(lt,null,{default:C(()=>[h(ma,{modelValue:a.termo,"onUpdate:modelValue":[t[0]||(t[0]=n=>a.termo=n),i.filtrar],color:"none",ref:"search",dark:"",placeholder:a.placeholder,debounce:"1000"},null,8,["modelValue","placeholder","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1}),h(Jo,null,{default:C(()=>[A("div",n9e,[i.documentosEncontrados?(B(),be("div",s9e,[h(At,{link:"","no-border":"",separator:""},{default:C(()=>[(B(!0),be(Qe,null,qt(a.documentos,n=>(B(),be("div",{key:n.id,style:{cursor:"pointer"}},[h(qe,{clickable:"",onClick:s=>i.selecionar(n)},{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>[K(le(n.descricao)+" ",1),i.descricaoFinalidade(n.finalidade)?(B(),oe(An,{key:0,color:"tertiary",small:""},{default:C(()=>[K(le(i.descricaoFinalidade(n.finalidade)),1)]),_:2},1024)):ie("",!0)]),_:2},1024)]),_:2},1024),a.cfop[n.codigoCfop]&&!n.json?(B(),oe(fe,{key:0,caption:""},{default:C(()=>[t[2]||(t[2]=A("strong",null,"CFOP: ",-1)),K(le(a.cfop[n.codigoCfop].cfop)+" - "+le(a.cfop[n.codigoCfop].operacao),1)]),_:2},1024)):ie("",!0)]),_:2},1032,["onClick"]),h(No)]))),128))]),_:1})])):ie("",!0),!a.carregando&&!i.documentosEncontrados?(B(),be("div",l9e," Nenhum resultado encontrado ")):ie("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue","onKeyup","onShow"])}var YR=St(i9e,[["render",c9e]]);const u9e={components:{},computed:{itensEncontrados(){return this.itens.length}},data(){return{carregando:!1,contato:{},itens:[],item:{},filtro:{},placeholder:"Buscar",termo:"",visivel:!1}},emits:["selecionar"],methods:{async filtrar(){let e;try{this.carregando=!0,e=setTimeout(()=>{$q.loading.show({message:"Carregando informa\xE7\xF5es...",boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary"})},500);let t;t=await $erp().itemTabelaPreco.filter(o=>o.tabelaMaster===1&&(!o.idEmpresa||o.idEmpresa===this.filtro.idContatoEmpresa)).toArray();for(const o of t){if(!o.idEmpresa||this.contato[o.idEmpresa])continue;const r=await $db.contato.le({id:o.idEmpresa});r.id&&(this.contato[r.id]=r)}if(this.termo){let o=new Set(this.termo.toLowerCase().replace(/\s+/g," ").normalize("NFD").replace(/[\u0300-\u036f]/g,"").split(" "));o=Array.from(o),o.sort((r,a)=>r<a?1:-1),t=t.filter(r=>{let a=(r.descricao||"")+" "+((this.contato[r.idEmpresa]||{}).nome||"");a=a.toLowerCase().replace(/\s+/g," ").normalize("NFD").replace(/[\u0300-\u036f]/g,"");for(const i of o)if(a.indexOf(i)===-1)return!1;return!0})}t.sort((o,r)=>o.descricao>r.descricao?1:-1),this.itens=t.slice(0,30)}finally{this.carregando=!1,clearTimeout(e),$q.loading.hide()}},limpar(){this.carregando=!1,this.itens=[],this.item={},this.filtro={},this.placeholder="Buscar",this.termo=""},mostrar(){this.filtrar(),this.visivel=!0},onHide(){this.$emit("selecionar",JSON.parse(JSON.stringify(this.item))),this.limpar()},selecionar(e={}){this.item=e,this.visivel=!1}},updated(){this.$nextTick(function(){this.$refs.search&&this.$refs.search.focus()})}},d9e={class:"layout-padding",container:""},f9e={key:0},m9e={key:1,class:"bg-light q-pa-lg q-mt-lg round-borders text-black text-center"};function p9e(e,t,o,r,a,i){return B(),oe(Ht,{modelValue:a.visivel,"onUpdate:modelValue":t[1]||(t[1]=n=>a.visivel=n),maximized:"",onHide:t[2]||(t[2]=n=>i.onHide())},{default:C(()=>[h(To,{class:"bg-white",container:""},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,null,{default:C(()=>[Ee(h(ae,{dense:"",flat:"",icon:"arrow_back",round:""},null,512),[[st]]),h(lt,null,{default:C(()=>[h(ma,{modelValue:a.termo,"onUpdate:modelValue":[t[0]||(t[0]=n=>a.termo=n),i.filtrar],color:"none",ref:"search",dark:"",placeholder:a.placeholder,debounce:"1000"},null,8,["modelValue","placeholder","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1}),h(Jo,null,{default:C(()=>[A("div",d9e,[i.itensEncontrados?(B(),be("div",f9e,[h(At,{link:"","no-border":"",separator:""},{default:C(()=>[(B(!0),be(Qe,null,qt(a.itens,n=>(B(),be("div",{key:n.id,style:{cursor:"pointer"}},[h(qe,{clickable:"",onClick:s=>i.selecionar(n)},{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>[K(le(n.descricao),1)]),_:2},1024)]),_:2},1024),a.contato[n.idEmpresa]?(B(),oe(fe,{key:0,caption:""},{default:C(()=>[t[3]||(t[3]=A("strong",null,"Empresa: ",-1)),K(le(a.contato[n.idEmpresa].nome),1)]),_:2},1024)):ie("",!0)]),_:2},1032,["onClick"]),h(No)]))),128))]),_:1})])):ie("",!0),!a.carregando&&!i.itensEncontrados?(B(),be("div",m9e," Nenhum resultado encontrado ")):ie("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var JR=St(u9e,[["render",p9e]]);const h9e={data(){return{contatoTransportadora:{},dataPrevistaEntrega:null,horaPrevistaEntrega:null,enderecoClienteOpts:[],idContatoEnderecoCliente:"",obsEntrega:"",promptContato:{visivel:!1,filtro:{}},transporte:"",transporteOpts:[]}},methods:{async selecionarContatoTransportadora(){const e=await $g.promptContato.show({filtro:{ativo:!0,transportadoras:!0},placeholder:"Selecione a transportadora"});e&&(this.contatoTransportadora=e)},async obterEnderecoClienteOpts(){const e=await $erp().contatoEndereco.where({idContato:this.idContatoCliente}).toArray();this.enderecoClienteOpts=e.map(t=>{let o="";return o+=t.logradouro||"",t.numero&&(o+=o?", ":"",o+=t.numero),t.complemento&&(o+=o?" ":"",o+=t.complemento),t.bairro&&(o+=o?" - ":"",o+=t.bairro),t.cep&&(o+=o?" - ":"",o+=t.cep),t.municipio&&(o+=o?" - ":"",o+=t.municipio),t.uf&&(o+=o?"/":"",o+=t.uf),{rotulo:o,valor:t.id}})},obterTransporteOpts(){this.transporteOpts=[{rotulo:"Transportadora",valor:1},{rotulo:"Entrega Pr\xF3pria",valor:2},{rotulo:"Entrega na Viagem",valor:3},{rotulo:"Retirar",valor:4}]},limparTransporte(){this.transporte=0,this.transporteOpts=[{rotulo:"Selecionar",valor:0}]},limparEnderecoCliente(){this.enderecoClienteOpts=[{rotulo:"Selecionar",valor:0}],this.idContatoEnderecoCliente=0},get(){let e="",t=null;if(this.idContatoEnderecoCliente&&(e=(this.enderecoClienteOpts.find(r=>r.valor===this.idContatoEnderecoCliente)||{}).rotulo||""),this.dataPrevistaEntrega){const o=`${this.dataPrevistaEntrega} ${this.horaPrevistaEntrega||"00:00:00"}`;t=Xo.formatDate(o)}return{tipoTransporte:this.transporte||"",dataHoraPrevisto:t||"",descricaoContatoEnderecoEntrega:e,idContatoTransportadora:this.contatoTransportadora.id||"",observacaoEntrega:this.obsEntrega}},async set(e){if(e.dataHoraPrevisto&&(this.dataPrevistaEntrega=e.dataHoraPrevisto.slice(0,10),this.horaPrevistaEntrega=e.dataHoraPrevisto.slice(11,16)),e.idContatoTransportadora){const t=await $db.contato.le({id:e.idContatoTransportadora});t.id&&(this.contatoTransportadora=t)}this.obsEntrega=e.observacaoEntrega||"",e.tipoTransporte&&(this.obterTransporteOpts(),this.transporteOpts.find(t=>t.valor===e.tipoTransporte)?this.transporte=e.tipoTransporte:this.limparTransporte()),e.descricaoContatoEnderecoEntrega&&this.obterEnderecoClienteOpts().then(()=>{const t=this.enderecoClienteOpts.find(o=>o.rotulo===e.descricaoContatoEnderecoEntrega)||{};this.idContatoEnderecoCliente=t.valor||0,this.idContatoEnderecoCliente||(this.enderecoClienteOpts=[{rotulo:e.descricaoContatoEnderecoEntrega||"Selecionar",valor:0}])})}},props:{idContatoCliente:{required:!0,type:String}},watch:{transporte(e,t){t&&!e&&this.limparTransporte()},idContatoEnderecoCliente(e,t){t&&!e&&this.limparEnderecoCliente()}},created(){this.limparTransporte(),this.limparEnderecoCliente()}},v9e={class:"q-pa-md q-pt-none"},g9e={class:"col-xs-12 col-sm-4"},_9e={class:"col-6 bg-transparent"},b9e={class:"col-6 bg-transparent"};function y9e(e,t,o,r,a,i){const n=Ve("campo"),s=Ve("row");return B(),be(Qe,null,[h(Je,{class:"text-tertiary"},{default:C(()=>[h(Pe,{name:"airplanemode_active",size:"24px"}),h(lt,null,{default:C(()=>t[7]||(t[7]=[K("Transporte")])),_:1})]),_:1}),A("div",v9e,[h(s,{class:"q-col-gutter-x-md"},{default:C(()=>[h(n,{modelValue:a.transporte,"onUpdate:modelValue":t[0]||(t[0]=l=>a.transporte=l),after:[{icon:"cancel",handler(){a.transporte=""}}],opcoes:a.transporteOpts,rotulo:"Transporte",class:"col-xs-12 col-sm-4","class-campo":"q-mb-sm",onClick:i.obterTransporteOpts,tipo:"seletor"},null,8,["modelValue","after","opcoes","onClick"]),h(ii,{dense:"",rounded:"",modelValue:a.contatoTransportadora.nome,"onUpdate:modelValue":t[2]||(t[2]=l=>a.contatoTransportadora.nome=l),label:"Transportadora",options:["a","b"],onFilter:i.selecionarContatoTransportadora,class:"col-12 col-sm-4"},{append:C(()=>[a.contatoTransportadora.nome?(B(),oe(Pe,{key:0,name:"close",onClick:t[1]||(t[1]=rt(l=>a.contatoTransportadora={},["stop"])),class:"cursor-pointer"})):ie("",!0),h(Pe,{name:"search",onClick:rt(i.selecionarContatoTransportadora,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onFilter"]),A("div",g9e,[h(s,null,{default:C(()=>[A("div",_9e,[h(ma,{modelValue:a.dataPrevistaEntrega,"onUpdate:modelValue":t[3]||(t[3]=l=>a.dataPrevistaEntrega=l),type:"date",clearable:"",dense:"","stack-label":"",label:"Data Prevista Entrega"},null,8,["modelValue"])]),A("div",b9e,[h(ma,{modelValue:a.horaPrevistaEntrega,"onUpdate:modelValue":t[4]||(t[4]=l=>a.horaPrevistaEntrega=l),type:"time",clearable:"",dense:"","stack-label":"",label:"Hora Prevista Entrega"},null,8,["modelValue"])])]),_:1})]),h(n,{modelValue:a.idContatoEnderecoCliente,"onUpdate:modelValue":t[5]||(t[5]=l=>a.idContatoEnderecoCliente=l),"class-campo":"q-my-sm",after:[{icon:"cancel",handler(){a.idContatoEnderecoCliente=""}}],filter:"",opcoes:a.enderecoClienteOpts,class:"col-xs-12",rotulo:"Endere\xE7o",onClick:i.obterEnderecoClienteOpts,tipo:"seletor"},null,8,["modelValue","after","opcoes","onClick"]),h(n,{modelValue:a.obsEntrega,"onUpdate:modelValue":t[6]||(t[6]=l=>a.obsEntrega=l),tipo:"textoArea",class:"col-xs-12","class-campo":"q-mt-sm",rotulo:"Obs. de Entrega"},null,8,["modelValue"])]),_:1})])],64)}var x9e=St(h9e,[["render",y9e]]);const C9e={computed:{totalTitulosVencidosCorrigidos(){return this.model.titulosPendentesAtraso.reduce((e,t)=>e+t.valorARealizar,0)},totalTitulosVencidos(){return this.model.titulosPendentesAtraso.reduce((e,t)=>e+t.valor,0)}},data(){return{visivel:!1,mostrarBotaoAprovar:!1}},props:{model:{type:Object,required:!0}},watch:{model(){$db.permissao.objeto("Diretiva_Vendas_Inadimplencia").then(e=>{this.mostrarBotaoAprovar=e,this.visivel=!0})}}},w9e={class:"layout-padding"},E9e={class:"q-pa-sm"},S9e={class:"q-mt-lg text-right"};function I9e(e,t,o,r,a,i){return B(),oe(Ht,{modelValue:a.visivel,"onUpdate:modelValue":t[2]||(t[2]=n=>a.visivel=n),minimized:"",onHide:t[3]||(t[3]=n=>o.model.acao("cancelar"))},{default:C(()=>[h(Mt,{class:"q-dialog-plugin"},{default:C(()=>[h(Je,{class:"bg-primary text-white"},{default:C(()=>[h(lt,null,{default:C(()=>t[4]||(t[4]=[K("T\xEDtulo(s) pendente(s) em atraso!")])),_:1}),Ee(h(ae,{dense:"",flat:"",icon:"close",round:""},null,512),[[st]])]),_:1}),A("div",w9e,[A("form",E9e,[h(At,{"no-border":"",dense:""},{default:C(()=>[h(qe,null,{default:C(()=>[h(Re,null,{default:C(()=>[K(" Total de t\xEDtulos vencidos: "+le(Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i.totalTitulosVencidos))+" ",1),t[5]||(t[5]=A("br",null,null,-1)),K(" Total corrigido: "+le(Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i.totalTitulosVencidosCorrigidos)),1)]),_:1})]),_:1})]),_:1}),A("div",S9e,[Ee(h(ae,{color:"tertiary",flat:"",label:"Cancelar"},null,512),[[st]]),Ee(h(ae,{color:"primary",class:"q-ml-sm no-shadow",label:"Continuar",unelevated:"",onClick:t[0]||(t[0]=n=>o.model.acao("continuar"))},null,512),[[st]]),a.mostrarBotaoAprovar?Ee((B(),oe(ae,{key:0,color:"primary",class:"q-ml-sm no-shadow",unelevated:"",label:"Aprovar",onClick:t[1]||(t[1]=n=>o.model.acao("aprovar"))},null,512)),[[st]]):ie("",!0)])])])]),_:1})]),_:1},8,["modelValue"])}var ZR=St(C9e,[["render",I9e]]);async function e7(e){var s;const{idDocumento:t}=e!=null?e:{},o=await $db.hibrido.lista({table:"documentoSat",where:{idDocumento:t}}),r=o.filter(l=>l.cancelamento).map(l=>l.chaveCupomCancelado),i=o.filter(l=>!r.includes(l.chaveCupom)).filter(l=>!l.cancelamento),n=(s=await $db.hibrido.lista({table:"documentoFiscalEletronico",where:{idDocumento:t}}))==null?void 0:s[0];if(i.length||~["Emitido","Carta de Corre\xE7\xE3o"].indexOf(n==null?void 0:n.situacao))throw new Error("Documento fiscal emitido. Opera\xE7\xE3o n\xE3o permitida.")}const A9e={components:{PromptItemV2:Zd},computed:{destino(){return this.model.documentosItem.find(e=>e.operacaoFator===this.model.operacaoFatorDestino&&e.operacao!=="Manipula\xE7\xE3o")},temDestino(){return this.model.documentosItem.some(e=>e.operacaoFator===this.model.operacaoFatorDestino&&e.operacao!=="Manipula\xE7\xE3o")},origem(){return this.model.documentosItem.filter(e=>e.operacaoFator===this.model.operacaoFatorOrigem&&e.operacao!=="Manipula\xE7\xE3o")},totalDestino(){const e=this.model.documentosItem.reduce((t,o)=>o.operacaoFator===this.model.operacaoFatorDestino&&o.operacao!=="Manipula\xE7\xE3o"?t+o.total:t,0);return $utils.arredondar(e)},totalOrigem(){const e=this.model.documentosItem.reduce((t,o)=>o.operacaoFator===this.model.operacaoFatorOrigem&&o.operacao!=="Manipula\xE7\xE3o"?t+o.total:t,0);return $utils.arredondar(e)},somenteLeitura(){return!!this.destino.dataHoraFinalizado}},data(){return{promptItem:{show:!1,filtro:{}},showKit:!1,item:{},descricaoAgrupamento:null,observacao:null}},emits:["destroy","salvar"],methods:{async adicionarItem(){const e={};await this.obterItens();for(const t of this.origem)e[t.idItem]={item:{...this.item[t.idItem],novoValorVenda:t.valorItem},quantidade:t.quantidade};this.$refs.promptItem.itensSelecionados=e,this.showPromptItem()},showPromptItem(){this.promptItem={show:!0,filtro:{ativo:!0,bloquearVenda:!1,idEmpresa:this.model.idEmpresa,idContato:this.model.idContato,idTabelaPreco:this.model.idItemTabelaPreco}}},promptItemFechar(e){!this.temDestino&&e&&this.$emit("destroy")},async modelChanged(){var e,t,o;this.observacao=(e=this.destino)==null?void 0:e.observacao,this.descricaoAgrupamento=(t=this.destino)==null?void 0:t.descricaoAgrupamento,this.quantidadeDestinoPrev=(o=this.destino)==null?void 0:o.quantidade,await this.obterItens(),this.documentosItemOriginal=$utils.clonarV2(this.model.documentosItem),this.destino&&(this.showKit=!0),this.destino||this.showPromptItem()},voltar(e){e.preventDefault(),e.stopPropagation();const t=this.houveAlteracao();if(!t){this.showKit=!1;return}t&&$q.dialog({cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},message:"Descartar as modifica\xE7\xF5es?",ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{this.showKit=!1})},houveAlteracao(){for(const e of this.model.documentosItem){const t=this.documentosItemOriginal.find(o=>o.id===e.id);if(!t)return!0;for(const o of Object.keys(t))if(e[o]!==t[o])return!0}return!1},async salvar(){if(this.totalDestino<this.totalOrigem){$q.notify({type:"negative",message:"Total do destino n\xE3o deve ser menor do que total da origem"});return}this.destino.observacao=this.observacao,this.destino.descricaoAgrupamento=this.descricaoAgrupamento,this.showKit=!1,await this.$nextTick(),this.$emit("salvar",$utils.clonarV2(this.model.documentosItem))},async obterItens(){const e=await $erp().item.where("id").anyOf(this.model.documentosItem.map(t=>t.idItem)).toArray();for(const t of e)this.item[t.id]=t},quantidadeDestinoAlterada(){this.recalcularQuantidadeOrigem(),this.recalcularTotal(this.destino),this.quantidadeDestinoPrev=this.destino.quantidade},recalcularQuantidadeOrigem(){if(this.quantidadeDestinoPrev!==0&&this.destino.quantidade!==this.quantidadeDestinoPrev)for(const e of this.origem)e.quantidade=e.quantidade*this.destino.quantidade/this.quantidadeDestinoPrev,this.recalcularTotal(e)},recalcularTotal(e){e.total=e.valorItem*e.quantidade,e.subTotal=e.total},recalcularQuantidade(e){e.valorItem>0&&(e.quantidade=e.total/e.valorItem)},async removerTodos(){try{await new Promise((e,t)=>{$q.dialog({cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},message:"Remover todos os itens?",ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(e).onCancel(t)})}catch{return}this.model.documentosItem=this.model.documentosItem.filter(e=>e.operacaoFator===this.model.operacaoFatorDestino&&e.operacao!=="Manipula\xE7\xE3o")},async remover(e){try{await new Promise((t,o)=>{$q.dialog({cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},message:"Remover este item?",ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(t).onCancel(o)})}catch{return}this.model.documentosItem=this.model.documentosItem.filter(t=>t.id!==e)},obterDocumentoItem(e,t,o){var i;const r=(i=e.novoValorVenda)!=null?i:e.valorVenda,a=t*r;return{id:$utils.uuid(),idItem:e.id,descricaoItem:e.descricaoConcatenada,tipoItem:e.tipo,operacaoFator:o,descontoItem:0,descontoPercentualItem:0,descontoSubTotal:0,descontoTotalRateado:0,descontoFaturaRateado:0,valorCusto:0,valorCustoReposicao:e.valorCustoReposicao,valorItem:r,valorItemUltimo:r,valorOriginal:r,quantidade:t,unidade:e.unidade,subTotal:r,total:a,valorReal:r,valorRealTotal:a,ncm:e.ncm,cest:e.cest,dataHoraEmissao:$utils.dataAtual()}},async selecionarItens(e){var t;if(!this.temDestino){const o=(t=e[Object.keys(e!=null?e:{})[0]])==null?void 0:t.item,r=this.obterDocumentoItem(o,e[o.id].quantidade,this.model.operacaoFatorDestino);let a,i;this.model.documentosItem.push(r),this.quantidadeDestinoPrev=r.quantidade,a=await $erp().itemComposicao.where({idItem:o.id}).toArray(),a.sort((n,s)=>n.ordem<s.ordem?-1:1),i=await $erp().item.where("id").anyOf(a.map(n=>n.idItemUtilizado)).toArray();for(const n of i){const s=a.find(u=>u.idItemUtilizado===n.id),l=this.obterDocumentoItem(n,s.quantidade,this.model.operacaoFatorOrigem);this.model.documentosItem.push(l)}await this.obterItens(),this.showKit=!0;return}if(this.temDestino){for(const o of Object.keys(e)){const r=e[o].item,a=this.model.documentosItem.find(n=>n.idItem===o&&n.operacaoFator===this.model.operacaoFatorOrigem&&n.operacao!=="Manipula\xE7\xE3o"),i=this.obterDocumentoItem(r,e[o].quantidade,this.model.operacaoFatorOrigem);if(a||this.model.documentosItem.push(i),a){const n=this.model.documentosItem.findIndex(s=>s.id===a.id);this.model.documentosItem.splice(n,1,{...i,id:a.id,dataHoraEmissao:a.dataHoraEmissao})}}await this.obterItens()}}},props:{model:{type:Object,required:!0}},watch:{model(){this.modelChanged()}},async mounted(){await this.modelChanged()}},T9e={class:"col-6"},D9e={class:"col-6"},O9e={class:"col-12 col-md-6"},P9e={class:"q-item-label q-mb-none",style:{color:"#0c0c0c"}},F9e={key:0,class:"col-6 col-md-1 text-right"},M9e={class:"col-2 col-md-2"},N9e={key:0},k9e={key:1},R9e={class:"col-10 col-md-4"},V9e={class:"col-6 col-md text-right"},B9e={class:"col-6 col-md text-right"},q9e={class:"col-6 col-md text-right"},L9e={key:0,class:"col-6 col-md-1 text-right"},$9e={class:"col-6 col-md text-right"},U9e={key:0,class:"col-6 col-md-1 text-right"},z9e={class:"col-12 col-md-6"},H9e={class:"q-item-label q-mb-none",style:{color:"#0c0c0c"}},j9e={class:"col-2 col-md-2"},G9e={key:0},W9e={key:1},Q9e={class:"col-10 col-md-4"},X9e={class:"col-6 col-md text-right"},K9e={class:"col-6 col-md text-right"},Y9e={class:"col-6 col-md text-right"},J9e={class:"col-6 col-md text-right"},Z9e={class:"col-6 col-md text-right"};function eFe(e,t,o,r,a,i){const n=Ve("campo"),s=Ve("row"),l=Ve("PromptItemV2");return B(),be("div",null,[h(Ht,{modelValue:a.showKit,"onUpdate:modelValue":t[7]||(t[7]=u=>a.showKit=u),persistent:"",maximized:"",onKeyup:jr(i.voltar,["esc"]),onHide:t[8]||(t[8]=()=>{e.$emit("destroy")})},{default:C(()=>[h(To,{class:"bg-light",container:""},{default:C(()=>[h(Jo,{class:"u-container"},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,null,{default:C(()=>[h(ae,{dense:"",flat:"",icon:"arrow_back",round:"",onClick:i.voltar},null,8,["onClick"]),h(lt,null,{default:C(()=>t[10]||(t[10]=[K("Kit")])),_:1}),i.somenteLeitura?ie("",!0):(B(),oe(ae,{key:0,class:"q-ml-sm no-shadow",color:"white",unelevated:"","text-color":"primary",label:"Salvar",onClick:i.salvar},null,8,["onClick"]))]),_:1})]),_:1}),h(dn,null,{default:C(()=>[h(Mt,{class:"bg-white q-pa-md q-mt-md no-shadow"},{default:C(()=>[h(s,{class:"q-col-gutter-sm"},{default:C(()=>[A("div",T9e,[h(n,{modelValue:a.observacao,"onUpdate:modelValue":t[0]||(t[0]=u=>a.observacao=u),rotulo:"Observa\xE7\xE3o",tipo:"texto",somenteLeitura:i.somenteLeitura,counter:"",maxlength:"100"},null,8,["modelValue","somenteLeitura"])]),A("div",D9e,[h(n,{modelValue:a.descricaoAgrupamento,"onUpdate:modelValue":t[1]||(t[1]=u=>a.descricaoAgrupamento=u),rotulo:"Descri\xE7\xE3o Agrupamento",tipo:"texto",somenteLeitura:i.somenteLeitura,counter:"",maxlength:"100"},null,8,["modelValue","somenteLeitura"])])]),_:1})]),_:1}),h(s,{class:"q-col-gutter-x-sm q-mt-md"},{default:C(()=>[A("div",O9e,[h(Mt,{class:"no-shadow bg-white full-width fit q-pa-md"},{default:C(()=>[h(Je,{class:"q-pa-none q-ma-none q-mb-md",color:"none","text-color":"black",style:{"min-height":"auto"}},{default:C(()=>[A("p",P9e,[h(Pe,{class:"q-mr-md",name:"shopping_cart",size:"24px",style:{color:"#737373"}}),t[11]||(t[11]=K(" Origem "))]),h(lt,{class:"q-pa-none q-ma-none",style:{height:"0 !important","min-height":"auto"}}),i.somenteLeitura?ie("",!0):(B(),oe(ae,{key:0,color:"tertiary",dense:"",flat:"",icon:"delete",round:"",size:"md",onClick:i.removerTodos},{default:C(()=>[h(Ft,null,{default:C(()=>t[12]||(t[12]=[K("Remover todos")])),_:1})]),_:1},8,["onClick"])),i.somenteLeitura?ie("",!0):(B(),oe(ae,{key:1,color:"positive",dense:"",flat:"",icon:"add",round:"",size:"md",onClick:i.adicionarItem},{default:C(()=>[h(Ft,null,{default:C(()=>t[13]||(t[13]=[K("Adicionar Item")])),_:1})]),_:1},8,["onClick"]))]),_:1}),h(At,{class:"col-12 no-border q-mx-none q-pa-none"},{default:C(()=>[h(qe,{class:"q-pa-none"},{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>[h(s,{class:"q-col-gutter-md text-weight-bold text-left justify-around"},{default:C(()=>[t[14]||(t[14]=A("div",{class:"col-2 col-md"},"Ref/C\xF3d.",-1)),t[15]||(t[15]=A("div",{class:"col-10 col-md-4"},"Descri\xE7\xE3o",-1)),t[16]||(t[16]=A("div",{class:"col-6 col-md text-right"},"Quantidade",-1)),t[17]||(t[17]=A("div",{class:"col-6 col-md text-right"},"Valor",-1)),t[18]||(t[18]=A("div",{class:"col-6 col-md text-right"},"Total",-1)),i.somenteLeitura?ie("",!0):(B(),be("div",F9e,"A\xE7\xF5es"))]),_:1})]),_:1}),h(No,{class:"q-mt-sm q-mb-lg"}),(B(!0),be(Qe,null,qt(i.origem,u=>(B(),be("div",{key:u.id},[h(Re,{caption:""},{default:C(()=>[h(s,{class:"text-left justify-around"},{default:C(()=>{var c,d;return[A("div",M9e,[(c=a.item[u.idItem])!=null&&c.referencia?(B(),be("span",N9e,le(a.item[u.idItem].referencia),1)):(d=a.item[u.idItem])!=null&&d.codigoItem?(B(),be("span",k9e," #"+le(a.item[u.idItem].codigoItem),1)):ie("",!0)]),A("div",R9e,le(u.descricaoItem||"-"),1),A("div",V9e,[h(n,{modelValue:u.quantidade,"onUpdate:modelValue":f=>u.quantidade=f,decimals:"4",tipo:"decimal",onBlur:f=>i.recalcularTotal(u),somenteLeitura:i.somenteLeitura},null,8,["modelValue","onUpdate:modelValue","onBlur","somenteLeitura"])]),A("div",B9e,[h(n,{modelValue:u.valorItem,"onUpdate:modelValue":f=>u.valorItem=f,decimals:"4",disable:"",tipo:"decimal"},null,8,["modelValue","onUpdate:modelValue"])]),A("div",q9e,[h(n,{modelValue:u.total,"onUpdate:modelValue":f=>u.total=f,decimals:"4",tipo:"decimal",onBlur:f=>i.recalcularQuantidade(u),somenteLeitura:i.somenteLeitura},null,8,["modelValue","onUpdate:modelValue","onBlur","somenteLeitura"])]),i.somenteLeitura?ie("",!0):(B(),be("div",L9e,[h(ae,{dense:"",flat:"",icon:"delete",round:"",size:"md",onClick:f=>i.remover(u.id)},{default:C(()=>[h(Ft,null,{default:C(()=>t[19]||(t[19]=[K("Excluir")])),_:1})]),_:2},1032,["onClick"])]))]}),_:2},1024)]),_:2},1024),h(Re,{caption:""})]))),128))]),_:1})]),_:1}),h(qe,{class:"q-pa-none"},{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>[h(s,{class:"text-weight-bold text-left justify-around"},{default:C(()=>[t[20]||(t[20]=A("div",{class:"col-2 col-md"},null,-1)),t[21]||(t[21]=A("div",{class:"col-10 col-md-4"},null,-1)),t[22]||(t[22]=A("div",{class:"col-6 col-md text-right"},null,-1)),t[23]||(t[23]=A("div",{class:"col-6 col-md text-right"},null,-1)),A("div",$9e,le(e.$filters.numero(i.totalOrigem,2)),1),i.somenteLeitura?ie("",!0):(B(),be("div",U9e,"\xA0"))]),_:1})]),_:1})]),_:1})]),_:1}),i.somenteLeitura?ie("",!0):(B(),oe(qe,{key:0,class:"q-px-none"},{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,{class:"text-center"},{default:C(()=>[h(ae,{class:"q-mx-auto",color:"positive",icon:"add",label:"Adicionar item",outline:"",size:"xs",onClick:i.adicionarItem},null,8,["onClick"])]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1})]),A("div",z9e,[h(Mt,{class:"no-shadow bg-white full-width fit q-pa-md"},{default:C(()=>[h(Je,{class:"q-pa-none q-ma-none q-mb-md",color:"none","text-color":"black",style:{"min-height":"auto"}},{default:C(()=>[A("p",H9e,[h(Pe,{class:"q-mr-md",name:"shopping_cart",size:"24px",style:{color:"#737373"}}),t[24]||(t[24]=K(" Destino "))]),h(lt,{class:"q-pa-none q-ma-none",style:{height:"0 !important","min-height":"auto"}})]),_:1}),h(At,{class:"col-12 no-border q-mx-none q-pa-none"},{default:C(()=>[h(qe,{class:"q-pa-none"},{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>[h(s,{class:"q-col-gutter-md text-weight-bold text-left justify-around"},{default:C(()=>t[25]||(t[25]=[A("div",{class:"col-2 col-md"},"Ref/C\xF3d.",-1),A("div",{class:"col-10 col-md-4"},"Descri\xE7\xE3o",-1),A("div",{class:"col-6 col-md text-right"},"Quantidade",-1),A("div",{class:"col-6 col-md text-right"},"Unidade",-1),A("div",{class:"col-6 col-md text-right"},"Valor",-1),A("div",{class:"col-6 col-md text-right"},"Total",-1)])),_:1})]),_:1}),h(No,{class:"q-mt-sm q-mb-lg"}),A("div",null,[h(Re,{caption:""},{default:C(()=>[h(s,{class:"text-left justify-around"},{default:C(()=>{var u,c;return[A("div",j9e,[(u=a.item[i.destino.idItem])!=null&&u.referencia?(B(),be("span",G9e,le(a.item[i.destino.idItem].referencia),1)):(c=a.item[i.destino.idItem])!=null&&c.codigoItem?(B(),be("span",W9e," #"+le(a.item[i.destino.idItem].codigoItem),1)):ie("",!0)]),A("div",Q9e,le(i.destino.descricaoItem||"-"),1),A("div",X9e,[h(n,{modelValue:i.destino.quantidade,"onUpdate:modelValue":t[2]||(t[2]=d=>i.destino.quantidade=d),decimals:"4",tipo:"decimal",onBlur:i.quantidadeDestinoAlterada,somenteLeitura:i.somenteLeitura},null,8,["modelValue","onBlur","somenteLeitura"])]),A("div",K9e,le(i.destino.unidade),1),A("div",Y9e,[h(n,{modelValue:i.destino.valorItem,"onUpdate:modelValue":t[3]||(t[3]=d=>i.destino.valorItem=d),decimals:"4",tipo:"decimal",onBlur:t[4]||(t[4]=d=>i.recalcularTotal(i.destino)),somenteLeitura:i.somenteLeitura},null,8,["modelValue","somenteLeitura"])]),A("div",J9e,[h(n,{modelValue:i.destino.total,"onUpdate:modelValue":t[5]||(t[5]=d=>i.destino.total=d),decimals:"4",tipo:"decimal",onBlur:t[6]||(t[6]=d=>i.recalcularQuantidade(i.destino)),somenteLeitura:i.somenteLeitura},null,8,["modelValue","somenteLeitura"])])]}),_:1})]),_:1}),h(Re,{caption:""})])]),_:1})]),_:1}),h(qe,{class:"q-pa-none"},{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>[h(s,{class:"text-weight-bold text-left justify-around"},{default:C(()=>[t[26]||(t[26]=A("div",{class:"col-2 col-md"},null,-1)),t[27]||(t[27]=A("div",{class:"col-10 col-md-4"},null,-1)),t[28]||(t[28]=A("div",{class:"col-6 col-md text-right"},null,-1)),t[29]||(t[29]=A("div",{class:"col-6 col-md text-right"},null,-1)),A("div",Z9e,le(e.$filters.numero(i.totalDestino,2)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onKeyup"]),h(l,{modelValue:a.promptItem.show,"onUpdate:modelValue":t[9]||(t[9]=u=>a.promptItem.show=u),filtro:a.promptItem.filtro,habilitarQuantidade:i.temDestino,onSelecionarItens:i.selecionarItens,onFechar:i.promptItemFechar,ref:"promptItem"},null,8,["modelValue","filtro","habilitarQuantidade","onSelecionarItens","onFechar"])])}var tFe=St(A9e,[["render",eFe]]);const Mi={};async function NP(){const e=new Date;if((Mi==null?void 0:Mi.timeout)&&!(e>new Date(Mi.timeout)))return;const t=await $db.configuracoes.le(),o=await $erp().financeiroPlanoConta.toArray();Mi.configuracoes=t,Mi.financeiroPlanoConta=o,Mi.timeout=e.setSeconds(e.getSeconds()+3)}const oFe={components:{Avatar:bR,Badge:Lh,CodigoBarras:Jm,Custom:Nwe,DocumentoCodigo:OR,DocumentoMetas:PR,Envelope:wOe,Faturamento:UR,ModalEditarProduto:LPe,VendaTransporte:x9e,TitulosPendentesEmAtraso:ZR,OrdemServico:r9e,PromptDocumentoOperacao:YR,PromptItemV2:Zd,PromptItemTabelaPrecoNovo:JR,Arquivo:Zm,Kit:tFe},computed:{descricaoClassificacaoDestinatario(){return this.classificacaoDestinatario===0?"PF N\xE3o Contribuinte":this.classificacaoDestinatario===1?"PJ Contribuinte":this.classificacaoDestinatario===2?"PJ N\xE3o Contribuinte":"Sem classifica\xE7\xE3o de destinat\xE1rio"},ehOrcamento(){return["AGUARDANDO LIBERA\xC7\xC3O","AGUARDANDO ESTOQUE","AGUARDANDO FINANCEIRO","OR\xC7AMENTO"].includes(((this.venda||{}).status||"").toUpperCase())&&((this.venda||{}).tipo||"").toUpperCase()==="VENDA"},temItens(){return this.carrinho.length>0},titulo(){return((this.venda||{}).operacao||"").toUpperCase()==="VENDA DE MERCADORIA"&&((this.venda||{}).status||"").toUpperCase()==="OR\xC7AMENTO"&&((this.venda||{}).tipo||"").toUpperCase()==="VENDA"?"Or\xE7amento":"Venda"}},data(){return{warningLabel:{},imposto:{},dbUsuario:$db.usuario,contatos:{},vendaOriginal:{},venda:{},geraFatura:0,pesoTotal:null,pesoBrutoTotal:null,metroCubicoTotal:null,hintValorUnitario:{},configImpressaoOrcamento:[],condicaoPagamento:[],condicaoPagamentoOriginal:[],calcularTributacao:!1,documentoEndereco:[],documentoEnderecoOriginal:[],documentoContato:[],documentoContatoOriginal:[],documentoStatus:[],exibirCarregando:!1,carrinhoOriginal:[],carrinho:[],item:{},envelopes:{},envelopesOriginal:{},envelope:{},itensEnvelopes:[],itensEnvelopesOriginal:[],permissaoMargem:!1,margem:{},classificacaoDestinatario:null,permissaoAlterarVendedor:!1,oss:[],permissaoOSs:!1,customs:[],permissaoCustoms:!1,permissaoKits:!1,kitModel:null,documentoItemKit:{},produtos:[],menuVenda:!1,modalContato:!1,modalDescontoMaximo:{},modalItemSemEstoque:{},modalProdutoControlado:{},modalCreditoDisponivel:{},modalItem:!1,mostrarDetalhes:!1,mostrarTitulosPendentesEmAtraso:{},arquivoOriginal:[],arquivo:[],erroCalculo:!1,sistemaPai:"",configImpressosWhatsapp:[],configImpressosEmail:[]}},emits:["adicionar","atualizar","cancelada","executar","fechar"],methods:{cortarEspacos(e){const t=e.keyCode||e.which;(t===32||t===13)&&e.preventDefault()},async calcularPesoTotal(){var a,i;const e={},t=[];let o=0,r=0;for(const n of this.carrinho)t.push(n);for(const n of this.itensEnvelopes)t.push(n);for(const n of this.customs)for(const s of n.documentoItens)t.push(s);for(const n of this.kits||[])t.push(n.documentosItem.find(s=>s.operacaoFator===-1&&s.operacao!=="Manipula\xE7\xE3o"));for(const n of this.oss)for(const s of n.documentoItens)t.push(s);for(const n of t)if(n.operacaoFator===-1){if(n.idItem&&!e[n.idItem]){const s=await $erp().item.get(n.idItem);s&&(e[n.idItem]=s)}o+=(((a=e[n.idItem])==null?void 0:a.peso)||0)*(n.quantidade||0),r+=(((i=e[n.idItem])==null?void 0:i.pesoBruto)||0)*(n.quantidade||0)}o=$utils.arredondar(o,4),r=$utils.arredondar(r,4),this.pesoTotal=o?$filters.numeroZerosDireita(o,4,2):null,this.pesoBrutoTotal=r?$filters.numeroZerosDireita(r,4,2):null},async calcularMetroCubicoTotal(){var r,a,i;const e={},t=[];let o=0;for(const n of this.carrinho)t.push(n);for(const n of this.itensEnvelopes)t.push(n);for(const n of this.customs)for(const s of n.documentoItens)t.push(s);for(const n of this.kits||[])t.push(n.documentosItem.find(s=>s.operacaoFator===-1&&s.operacao!=="Manipula\xE7\xE3o"));for(const n of this.oss)for(const s of n.documentoItens)t.push(s);for(const n of t){if(n.operacaoFator!==-1||n.tipoItem!=="Produto")continue;if(n.idItem&&!e[n.idItem]){const u=await $erp().item.get(n.idItem);u&&(e[n.idItem]=u)}const s=((r=e[n.idItem])==null?void 0:r.altura)*((a=e[n.idItem])==null?void 0:a.largura)*((i=e[n.idItem])==null?void 0:i.comprimento)||0,l=n.quantidade||0;o+=s>0?s*l:0}o=$utils.arredondar(o,4),this.metroCubicoTotal=o?$filters.numeroZerosDireita(o,4,2):null},async obterClassificacaoDestinatario(e){if(this.classificacaoDestinatario=null,!e)return;const t=await $erp().contato.get(e);if(!t)return;const o=(t.numeroDocumentoNacional||"").trim().replace(/\D/g,""),r=(t.numeroDocumentoEstadual||"").trim().replace(/\D/g,"");if(o.length===14){this.classificacaoDestinatario=2,r&&(r||"").toLowerCase()!=="isento"&&(this.classificacaoDestinatario=1);return}this.classificacaoDestinatario=0},async obterPermissaoAlterarVendedor(){await $db.contato.carregarMemoria();const e=($db.usuario.logado.cpf||"").replace(/\D/g,"");let t;if(e){for(const r of $db.contato.contatos)if((r.numeroDocumentoNacional||"").replace(/\D/g,"")===e){t=r.id;break}}(await $db.permissao.objeto("Diretiva_Vendas_TrocarVendedor")||t&&t===this.venda.idContatoVendedor)&&(this.permissaoAlterarVendedor=!0)},atualizarDocumentoMetas(){!this.$refs.documentoMetas||(this.$refs.documentoMetas.documento=$utils.clonarV2(this.venda),this.$refs.documentoMetas.documentoContato=$utils.clonarV2(this.documentoContato))},async alterarCliente(){const e=await this.selecionarContato({placeholder:"Selecione o cliente",filtro:{ativo:!0,somenteCarteira:!0}});if(!e.id)return;const t=e.id;this.exibirCarregando=!0;try{const o=await $db.contato.leCompleto(t);if((await $db.venda.titulosPendentesAtraso({idContato:o.id})).length&&$q.notify({message:"O Cliente possui t\xEDtulo(s) pendente(s) em atraso!",timeout:0,type:"warning",closeBtn:!0}),(o.condutaRestricao||"").trim()){$q.notify({message:o.condutaRestricao,timeout:0,type:"negative",closeBtn:!0});return}const a=u=>u.grupo?u.grupo.toUpperCase()==="PRINCIPAL":!1,i=o.endereco.find(a)||o.endereco[0],n=o.telefone.find(a)||o.telefone[0];let s=[],l="";i&&(l="".concat((i==null?void 0:i.logradouro)||"",", ",(i==null?void 0:i.numero)||""," ",(i==null?void 0:i.complemento)||""," - ",(i==null?void 0:i.bairro)||""," - ",(i==null?void 0:i.cep)||""," - ",(i==null?void 0:i.municipio)||"","/",(i==null?void 0:i.uf)||""),s=[{id:$utils.uuid(),idContato:o.id,idContatoEndereco:i==null?void 0:i.id,idCidade:i==null?void 0:i.idCidade,idDocumento:this.venda.id,descricao:l,logradouro:i==null?void 0:i.logradouro,numero:i==null?void 0:i.numero,complemento:i==null?void 0:i.complemento,condominio:i==null?void 0:i.condominio,bairro:i==null?void 0:i.bairro,cep:i==null?void 0:i.cep,ibgeCod:i==null?void 0:i.ibgeCod,municipio:i==null?void 0:i.municipio,uf:i==null?void 0:i.uf,ufCod:i==null?void 0:i.ufCod,pais:i==null?void 0:i.pais,grupo:i==null?void 0:i.grupo,cidadeCodChave:i==null?void 0:i.cidadeCodChave,observacao:i==null?void 0:i.observacao}],this.documentoEndereco=s,this.venda.descricaoContatoEndereco=l),this.venda.idContato=t,this.venda.descricaoContato=o.nome,this.venda.telefoneContato=n?n.telefone:"",this.obterClassificacaoDestinatario(this.venda.idContato),this.atualizarDocumentoMetas()}catch(o){$q.notifyError("Erro ao alterar o contato do documento.",o)}this.exibirCarregando=!1},async alterarDocumentoOperacao(){try{const e=await this.selecionarDocumentoOperacaoViaPrompt();e.id&&(this.venda.operacao=e.descricao,this.venda.codigoDocumentoOperacao=e.codigoDocumentoOperacao,this.finalidadeDestinatario=e.finalidade,this.atualizarDocumentoMetas())}catch(e){console.error("alterarDocumentoOperacao: ",e)}},async selecionarDocumentoOperacaoViaPrompt(e){if(!e)return this.$refs.promptDocumentoOperacao.placeholder="Selecione a opera\xE7\xE3o",this.$refs.promptDocumentoOperacao.mostrar({classificacaoDestinatario:this.classificacaoDestinatario}),new Promise((t,o)=>{this.resolve=t,this.reject=o});if(!e.id){this.reject("Opera\xE7\xE3o n\xE3o selecionada");return}this.resolve(e)},async alterarVendedor(){const e=await this.selecionarContato({placeholder:"Selecione o vendedor",filtro:{ativo:!0,vendedores:!0}});e.id&&(this.venda.idContatoVendedor=e.id,this.atualizarDocumentoMetas())},async selecionarContatoIndicacao(){const e=await this.selecionarContato({placeholder:"Selecione a indica\xE7\xE3o",filtro:{ativo:!0}});e.id&&(this.venda.idContatoIndicacao=e.id,this.atualizarDocumentoMetas())},finalizar(){$db.venda.finalizar({tela:this,continueMesmaTela:this.continueMesmaTela})},subtotal2(e){return this.subTotal[e]},salvarEdicaoProduto(e){const t=this.carrinho.findIndex(o=>o.id===e.id);if(t!==-1){const o=$utils.clonarV2(this.carrinho);o.splice(t,1,e),this.carrinho=o}this.unirProdutos(),this.produtoEditandoVisivel=!1},editarProduto(e){this.$refs.modalEditarProduto.mostrar({documentoItem:e,documentoVenda:this.venda})},async calcularMargens(){const e=parseInt(await $db.configuracoes.leValorComFiltroEmpresa("vendas.margem.alerta",this.venda.idEmpresa,0))||0,t=parseInt(await $db.configuracoes.leValorComFiltroEmpresa("vendas.margem.limite",this.venda.idEmpresa,0))||0;let o=0,r=0;for(const s of this.produtos.filter(l=>l.id)){let l=100;if(s.valorReal&&s.valorCustoReposicao&&s.quantidade){r+=s.valorCustoReposicao*s.quantidade;const c=s.valorCustoReposicao,d=s.valorReal,f=d-c;l=$utils.arredondar(f/d*100)}let u=$utils.clonarV2(this.margem);u||(u={}),u[s.id]={valor:l,alerta:l<=e,limite:l<t},this.margem=u}for(const s of this.produtos.filter(l=>l.documento)){const l=s.documento.tipo==="Venda Kit";let u=0,c=0;if(l){const p=s.documentosItem.find(v=>v.operacaoFator===-1);p.valorCustoReposicao&&p.quantidade&&(c+=p.valorCustoReposicao*p.quantidade)}if(!l)for(const p of s.documentoItens)p.valorCustoReposicao&&p.quantidade&&(c+=p.valorCustoReposicao*p.quantidade);r+=c;const d=s.documento.totalDocumento,f=d-c;u=$utils.arredondar(f/d*100);let m=$utils.clonarV2(this.margem);m||(m={}),m[s.documento.id]={valor:u,alerta:u<=e,limite:u<t},this.margem=m}for(const s in this.envelopes){let l=0,u=0;for(const m of this.itensEnvelopes.filter(p=>p.idDocumentoAdicional===s))m.valorCustoReposicao&&m.quantidade&&(u+=m.valorCustoReposicao*m.quantidade);r+=u;const c=this.envelopes[s].totalDocumento,d=c-u;l=$utils.arredondar(d/c*100);let f=$utils.clonarV2(this.margem);f||(f={}),f[s]={valor:l,alerta:l<=e,limite:l<t},this.margem=f}const a=this.venda.subTotal-this.venda.totalDesconto,i=a-r;o=$utils.arredondar(i/a*100);let n=$utils.clonarV2(this.margem);n||(n={}),n[this.venda.id]={valor:o,alerta:o<=e,limite:o<t},this.margem=n},async calcularImposto(){var i,n,s;const e={valorIpi:0,valorIcmsSt:0,valorDifal:0},t=this.venda,o=[];this.finalidadeDestinatario;let r,a;for(const l of this.carrinho)o.push(l);for(const l of this.itensEnvelopes)!l.idItem||o.push(l);for(const l of this.customs)for(const u of l.documentoItens)o.push(u);for(const l of this.kits||[])o.push(l.documentosItem.find(u=>u.operacaoFator===-1&&u.operacao!=="Manipula\xE7\xE3o"));for(const l of this.oss)for(const u of l.documentoItens)o.push(u);a=o.filter(l=>l.operacaoFator===1),r=o.filter(l=>l.operacaoFator!==1),r.length&&this.ehOrcamento&&await Xhe({documento:t,documentosItens:r});for(const l of a){if(!l.idDocumentoItemVenda)continue;let u,c,d;const f=await $db.hibrido.le({table:"documentoItem",id:l.idDocumentoItemVenda});f.quantidade>0&&(u=(f.valorIpi||0)/f.quantidade*-1,c=(f.valorIcmsSt||0)/f.quantidade*-1,d=(f.valorDifal||0)/f.quantidade*-1),l.valorIpi=u*l.quantidade||0,l.valorIcmsSt=c*l.quantidade||0,l.valorDifal=d*l.quantidade||0}for(const l of[...a,...r])e.valorIpi+=(i=l.valorIpi)!=null?i:0,e.valorIcmsSt+=(n=l.valorIcmsSt)!=null?n:0,e.valorDifal+=(s=l.valorDifal)!=null?s:0,t.calcularTributacao||(l.valorIpi=0,l.valorIcmsSt=0,l.valorDifal=0);e.valorIpi=$utils.arredondar(e.valorIpi),e.valorIcmsSt=$utils.arredondar(e.valorIcmsSt),e.valorDifal=$utils.arredondar(e.valorDifal),this.imposto=e},faturamentoAtualizar(e){this.condicaoPagamento=e},removerConvenio(){let e=$utils.clonar(this.documentoContato);e=e.filter(t=>t.descricao!=="Conv\xEAnio"),this.documentoContato=$utils.clonar(e),this.atualizarDocumentoMetas()},async selecionarConvenio(){const e=await this.selecionarContato({placeholder:"Selecione o convenio",filtro:{convenios:!0,idContato:this.venda.idContato}});if(!(e!=null&&e.id))return;let t=$utils.clonar(this.documentoContato);t.some(o=>o.descricao==="Conv\xEAnio"&&o.idContato===e.id)||(t=t.filter(o=>o.descricao!=="Conv\xEAnio"),t.push({id:$utils.uuid(),idContato:e.id,idDocumento:this.venda.id,descricao:"Conv\xEAnio"}),this.documentoContato=$utils.clonar(t),await this.atualizarDocumentoMetas())},removerComprador(){this.documentoContato=this.documentoContato.filter(e=>(e.descricao||"").trim().toLowerCase()!=="comprador"),this.atualizarDocumentoMetas()},async selecionarComprador(){const e=await this.selecionarContato({placeholder:"Selecione o comprador",filtro:{compradores:!0,idContato:this.venda.idContato}});if(e){let t=$utils.clonarV2(this.documentoContato);t=t.filter(o=>(o.descricao||"").trim().toLowerCase()!=="comprador"),t.push({id:$utils.uuid(),idContato:e.id,descricao:"Comprador",idDocumento:this.venda.id}),this.documentoContato=t,this.atualizarDocumentoMetas()}},async salvarCustom(e={}){const{dados:t,reiniciarQtde:o}=e;let r=$utils.clonarV2(this.customs);const a=r.findIndex(i=>i.documento.id===t.documento.id);o&&(t.documento.numero=1),a===-1?r.push(t):r[a]=t,this.customs=r,this.unirProdutos(),await this.calcularTotais()},async salvarOS(e={}){const{dados:t}=e;let o=$utils.clonarV2(this.oss);const r=o.findIndex(a=>a.documento.id===t.documento.id);r===-1?o.push(t):o[r]=t,this.oss=o,this.unirProdutos(),await this.calcularTotais()},async removerKit(e){$q.dialog({cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},message:"Remover este item?",ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(async()=>{try{$q.loading.show({message:"Removendo..."}),this.kits=this.kits.filter(t=>t.documento.id!==e),this.unirProdutos(),await this.calcularTotais()}finally{$q.loading.hide()}})},abrirKit(e){let t=[];e&&(t=$utils.clonarV2(this.kits.find(r=>r.documento.id===e)).documentosItem),this.kitModel={operacaoFatorDestino:-1,operacaoFatorOrigem:0,idEmpresa:this.venda.idEmpresa,idContato:this.venda.idContato,idItemTabelaPreco:this.venda.idItemTabelaPreco,documentosItem:t}},async salvarKit(e){var d,f,m,p;const t=e.find(v=>v.operacaoFator===-1),o=await $erp().item.get(t.idItem),r=await $utils.selecionarCfop({ncm:o.ncm,idItem:o.id,itemTipo:o.tipo,codigoDocumentoOperacao:this.venda.codigoDocumentoOperacao,idContatoDestinatario:this.venda.idContato,idContatoEmitente:this.venda.idEmpresa,operacaoFator:-1});if(!r){$q.notify("N\xE3o foi poss\xEDvel localizar o CFOP.");return}let a="",i="";const n=await $db.perfilContabilItem.le({idPerfilContabil:o.idPerfilContabil,idCfop:r.id,and:{idPerfilContabil:o.idPerfilContabil,idCfop:r.id}});if(n.length&&(a=n[0].idPlanoContaEstoque,i=n[0].idPlanoContaDestino),(!a||!i)&&(a=r.idPlanoContaEstoque,i=r.idPlanoContaDestino),!a||!i){await NP();let v,g,x,b;v=Mi.configuracoes.find(_=>_.nome==="financeiro.planocontas.comprageral"),x=Number(v==null?void 0:v.valor),b=Mi.financeiroPlanoConta.find(_=>_.codigoFinanceiroPlanoConta===x),a=b==null?void 0:b.id,g=Mi.configuracoes.find(_=>_.nome==="financeiro.planocontas.faturamentogeral"),x=Number(g==null?void 0:g.valor),b=Mi.financeiroPlanoConta.find(_=>_.codigoFinanceiroPlanoConta===x),i=b==null?void 0:b.id}const s=(await $db.estoqueSaldoProdutoEmpresa.le({idItem:o.id,idEmpresa:this.venda.idEmpresa,tipoEstoque:"Dispon\xEDvel"})).find(v=>v.idItem);t.idDocumento=this.venda.id,t.status=this.venda.status,t.operacao=r.operacao,t.operacaoFator=r.fator,t.idCfop=r.id,t.idPlanoContaEstoque=a,t.idPlanoContaDestino=i,t.valorCustoMedio=(d=s==null?void 0:s.valorCustoMedio)!=null?d:0,t.valorCustoUltimo=(f=s==null?void 0:s.valorCusto)!=null?f:0;const l=t.quantidade,u=this.kits.findIndex(v=>v.documentosItem.some(g=>g.id===t.id));let c;if(u!==-1){c=this.kits[u];for(const v of e)v.idDocumentoAdicional=c.documento.id;c.quantidadeDestinoPrev=l,c.documento.totalDocumento=t.total,c.documentosItem=e,this.kits.splice(u,1,c)}if(u===-1){const v={id:$utils.uuid(),tipo:"Venda Kit",documentoId:this.venda.id,totalDocumento:t.total,subTotal:t.total,idEmpresa:this.venda.idEmpresa,descricaoEmpresa:this.venda.descricaoEmpresa,idContato:this.venda.idContato,descricaoContato:this.venda.descricaoContato,idItemTabelaPreco:this.venda.idItemTabelaPreco,codigoDocumentoOperacao:this.venda.codigoDocumentoOperacao,dataHoraEmissao:$utils.dataAtual()};for(const g of e)if(g.idDocumentoAdicional=v.id,g.operacaoFator===0){const x=await $erp().item.get(g.idItem),b=(await $db.estoqueSaldoProdutoEmpresa.le({idItem:x.id,idEmpresa:this.venda.idEmpresa,tipoEstoque:"Dispon\xEDvel"})).find(_=>_.idItem);g.operacao="Venda Kit",g.idDocumento=v.id,g.valorCustoMedio=(m=b==null?void 0:b.valorCustoMedio)!=null?m:0,g.valorCustoUltimo=(p=b==null?void 0:b.valorCusto)!=null?p:0}c={quantidadeDestinoPrev:l,documento:v,documentosItem:e},this.kits.push(c)}this.documentoItemKit[c.documento.id]=t,await this.carregarItens(),this.unirProdutos(),await this.calcularTotais(),this.kitModel=null},abrirModalCustom(e=null){if(e)this.custom=this.customs.find(t=>t.documento.id===e);else{let t={id:$utils.uuid(),numero:1,tipo:"Custom",descricao:"",documentoId:this.venda.id,documentoTipo:"Venda",status:"Or\xE7amento",dataHoraEmissao:$utils.dataAtual(),idEmpresa:this.venda.idEmpresa,idItemTabelaPreco:this.venda.idItemTabelaPreco,descricaoEmpresa:this.venda.descricaoEmpresa,idContato:this.venda.idContato,descricaoContato:this.venda.descricaoContato,codigoDocumentoOperacao:this.venda.codigoDocumentoOperacao};this.custom={documento:t,documentoItens:[],arquivo:[]}}this.$refs.modalCustom.data=$utils.clonarV2(this.custom),this.$refs.modalCustom.mostrar()},abrirModalOS(e=null){if(e)this.os=this.oss.find(t=>t.documento.id===e);else{let t={id:$utils.uuid(),tipo:"Ordem de Servi\xE7o",operacao:"Ordem de Servi\xE7o",descricao:"",documentoId:this.venda.id,documentoTipo:"Venda",status:"Or\xE7amento",dataHoraEmissao:$utils.dataAtual(),idEmpresa:this.venda.idEmpresa,idItemTabelaPreco:this.venda.idItemTabelaPreco,descricaoEmpresa:this.venda.descricaoEmpresa,idContato:this.venda.idContato,descricaoContato:this.venda.descricaoContato,codigoDocumentoOperacao:this.venda.codigoDocumentoOperacao};this.os={documento:t,documentoItens:[],arquivo:[]}}this.$refs.modalOS.data=$utils.clonarV2(this.os),this.$refs.modalOS.mostrar()},async abrirModalEnvelope(e=null){if(e){const t=this.itensEnvelopes.filter(o=>o.idDocumentoAdicional===e);this.envelope={documento:this.envelopes[e],documentoContato:this.envelopes[e].documentoContato,documentoItens:t,somenteLeitura:!this.ehOrcamento,arquivo:this.envelopes[e].arquivo}}else{let t={id:$utils.uuid(),tipo:"Envelope",documentoId:this.venda.id,documentoTipo:"Venda",status:"Or\xE7amento",dataHoraEmissao:$utils.dataAtual(),idEmpresa:this.venda.idEmpresa,idItemTabelaPreco:this.venda.idItemTabelaPreco,descricaoEmpresa:this.venda.descricaoEmpresa,idContato:this.venda.idContato,descricaoContato:this.venda.descricaoContato,codigoDocumentoOperacao:this.venda.codigoDocumentoOperacao};this.envelope={documento:t,documentoContato:[],documentoItens:[],somenteLeitura:!this.ehOrcamento,arquivo:[]}}this.$refs.modalEnvelope.envelope=$utils.clonarV2(this.envelope),this.$refs.modalEnvelope.mostrar()},abrirModalItem(){let e={};for(const t of this.carrinho.filter(o=>o.operacaoFator===-1)){let o=$utils.clonarV2(this.item[t.idItem]);o.novoValorVenda=t.valorReal,e[t.idItem]={item:o,quantidade:t.quantidade}}this.$refs.promptItem.itensSelecionados=e,this.modalItem=!0},async obterContatoUsuario(){const e=JSON.parse(localStorage.getItem("usuario"))||{};let t={};return e.codigoUsuario&&(t=(await $erp().contato.where({codigoUsuario:e.codigoUsuario}).toArray()).find(o=>o.id)||{}),t},removerRepresentando(){this.documentoContato=this.documentoContato.filter(e=>(e.descricao||"").trim().toLowerCase()!=="representando"),this.atualizarDocumentoMetas()},async selecionarRepresentando(){const e=await this.selecionarContato({placeholder:"Selecione o representando",filtro:{ativo:!0}});if(e){let t=$utils.clonarV2(this.documentoContato);t=t.filter(o=>(o.descricao||"").trim().toLowerCase()!=="representando"),t.push({id:$utils.uuid(),idContato:e.id,descricao:"Representando",idDocumento:this.venda.id}),this.documentoContato=t,this.atualizarDocumentoMetas()}},async alterarTabelaPreco(){const e=await this.selecionarItemTabelaPreco(null,this.venda.idEmpresa);e.id&&(this.venda.idItemTabelaPreco=e.id,this.atualizarDocumentoMetas())},async selecionarItemTabelaPreco(e,t){if(!e)return this.$refs.promptItemTabelaPreco.placeholder="Selecione a tabela de pre\xE7o",this.$refs.promptItemTabelaPreco.filtro={tabelaMaster:!0,idContatoEmpresa:t},this.$refs.promptItemTabelaPreco.mostrar(),new Promise((o,r)=>{this.resolve=o,this.reject=r});e.id||this.reject("Tabela de pre\xE7o n\xE3o selecionada"),this.resolve(e)},async obterContatoVendedor(e){const o=((await $db.configuracoes.le({nome:"vendas.usaCarteira"}))[0]||{}).valor==="1",r=(e||{}).idContatoVendedor;if(r&&o){const n=await $erp().contato.get(r)||{};if(n.id)return n}const a=JSON.parse(localStorage.getItem("usuario"))||{};let i=(await $db.contato.ler({filtros:{ativo:!0,vendedores:!0}})).data;if(i.length===1)return i[0];for(const n of i){if(!(n||{}).numeroDocumentoNacional)continue;const s=(n.numeroDocumentoNacional||"").replace(/\D/g,""),l=(a.numeroDocumentoNacional||"").replace(/\D/g,"");if(s===l)return n}return this.selecionarContato({placeholder:"Selecione o vendedor",filtro:{ativo:!0,vendedores:!0}})},async adicionar(){var D,M;await Promise.all([$db.contatoEmpresa.atualizaCache(),$db.configuracoes.atualizaCache()]);let e={},t=this.idContato,o;if(t&&(e=await $db.contato.le({id:t})),e.id||(e=await this.selecionarContato({placeholder:"Selecione o cliente",filtro:{ativo:!0,somenteCarteira:!0}})),!e.id){this.$emit("fechar"),$q.notifyError("Cliente n\xE3o selecionado");return}o=await $db.venda.titulosPendentesAtraso({idContato:e.id}),o.length&&$q.notify({message:"O Cliente possui t\xEDtulo(s) pendente(s) em atraso!",timeout:0,type:"warning",closeBtn:!0}),await this.obterClassificacaoDestinatario(e.id);let r="";if(e.idFormaPagamento&&(r=((await $erp().formaPagamento.get(e.idFormaPagamento)||{}).descricao||"").trim()),this.contatos={},this.contatos[e.id]=e,!(await $db.contatoEmpresa.listaCache()).length){$q.notify({message:"N\xE3o h\xE1 empresa configurada",timeout:0,type:"negative",closeBtn:!0});return}if((e.condutaRestricao||"").trim()){this.$emit("fechar"),$q.notify({message:e.condutaRestricao,timeout:0,type:"negative",closeBtn:!0});return}let i=await $db.contatoTelefone.le({idContato:e.id});i.length?i=i[0].telefone:i="";const n=await $db.contatoEndereco.le({idContato:e.id}),s=n.filter(O=>O.grupo==="Principal");let l=[],u="";if(n.length){const O=[...s,...n][0];u="".concat((O==null?void 0:O.logradouro)||"",", ",(O==null?void 0:O.numero)||""," ",(O==null?void 0:O.complemento)||""," - ",(O==null?void 0:O.bairro)||""," - ",(O==null?void 0:O.cep)||""," - ",(O==null?void 0:O.municipio)||"","/",(O==null?void 0:O.uf)||""),l=[{id:$utils.uuid(),idContato:e.id,idContatoEndereco:O==null?void 0:O.id,idCidade:O==null?void 0:O.idCidade,descricao:u,logradouro:O==null?void 0:O.logradouro,numero:O==null?void 0:O.numero,complemento:O==null?void 0:O.complemento,condominio:O==null?void 0:O.condominio,bairro:O==null?void 0:O.bairro,cep:O==null?void 0:O.cep,ibgeCod:O==null?void 0:O.ibgeCod,municipio:O==null?void 0:O.municipio,uf:O==null?void 0:O.uf,ufCod:O==null?void 0:O.ufCod,pais:O==null?void 0:O.pais,grupo:O==null?void 0:O.grupo,cidadeCodChave:O==null?void 0:O.cidadeCodChave,observacao:O==null?void 0:O.observacao}]}let c;try{c=await this.selecionarEmpresa()}catch(O){this.$emit("fechar"),$q.notifyError(O.message,O);return}await this.configuraImpressaoOrcamento(c.idContato);const d=await $db.contatoEndereco.le({idContato:c.idContato});if(!d.length){this.$emit("fechar"),$q.notifyError("Empresa sem endere\xE7o.");return}let f=d.find(O=>(O.grupo||"").toLowerCase()==="principal");f||(f=d[0]);let m="";if(e.idItemTabelaPreco){const O=await $db.itemTabelaPreco.le({id:e.idItemTabelaPreco});(O==null?void 0:O.id)&&(!O.idEmpresa||O.idEmpresa===c.idContato)&&(m=e.idItemTabelaPreco)}if(!m){const O=await $db.configuracoes.le({nome:"vendas.tabelapadrao"});let T,I;T=O.find(N=>N.idEmpresa===c.idContato),I=Number(T==null?void 0:T.valor),I||(T=O.find(N=>!N.idEmpresa),I=Number(T==null?void 0:T.valor)),I&&(m=(D=(await $erp().itemTabelaPreco.filter(P=>Number(P.codigoItemTabelaPreco)===I).toArray())[0])==null?void 0:D.id)}if(!m){const O=await $erp().itemTabelaPreco.filter(T=>T.tabelaMaster===1&&(!T.idEmpresa||T.idEmpresa===c.idContato)).toArray();if(O.length===1)m=O[0].id;else if(O.length>1)try{m=(await this.selecionarItemTabelaPreco(null,c.idContato)).id}catch(T){this.$emit("fechar"),$q.notifyError(T);return}}let p=await $db.documentoOperacao.ler();if(p=p.filter(O=>O.ativo),!p.length){this.$emit("fechar"),$q.notifyError("N\xE3o foi poss\xEDvel localizar a Opera\xE7\xE3o.");return}let v=await $db.configuracoes.le({nome:"vendas.codigovenda"}),g=v[0],x={},b=2;for(;b--;){if(g){const O=Number(g==null?void 0:g.valor);O&&Number.isInteger(O)&&(x=p.find(T=>T.codigoDocumentoOperacao===O))}if(!(x!=null&&x.json)&&f&&l[0]&&(f==null?void 0:f.uf)!==((M=l[0])==null?void 0:M.uf)){v=await $db.configuracoes.le({nome:"vendas.codigovenda.foraestado"}),g=v[0];continue}break}if((x==null?void 0:x.finalidade)===99&&this.classificacaoDestinatario!==1){x=null;const O=this.classificacaoDestinatario===1?99:100,T=p.filter(I=>I.finalidade===O);if(!T.length){this.$emit("fechar"),$q.notifyError("N\xE3o foi poss\xEDvel localizar a Opera\xE7\xE3o.");return}T.length===1&&(x=T[0])}if(!(x!=null&&x.idCfop)&&!(x!=null&&x.json))try{x=await this.selecionarDocumentoOperacaoViaPrompt()}catch(O){this.$emit("fechar"),$q.notifyError(O);return}this.finalidadeDestinatario=x.finalidade;const _=await this.obterContatoUsuario();let w;try{w=await this.obterContatoVendedor(e)}catch(O){this.$emit("fechar"),$q.notifyError(O.message,O);return}const S={id:this.id,idContato:e.id,idContatoTransportadora:e.idContatoTransportadora,idContatoResponsavel:"",descricaoEmpresa:c.nome,idEmpresa:c.idContato,idEmpresaEndereco:f.id,numeroDocumentoEmpresa:c.numeroDocumentoNacional,calcularAutomatico:"Sim",calcularTributacao:!0,dataHoraEmissao:$utils.dataAtual(),descricaoContato:e.nome,numeroDocumentoContato:e.numeroDocumentoNacional,freteSeparado:!0,status:"Or\xE7amento",tipo:"Venda",tipoFrete:"CIF",valorFrete:0,totalPercentualDesconto:0,totalDesconto:0,totalDocumento:0,subTotal:0,codigoDocumentoOperacao:x.codigoDocumentoOperacao,operacao:x.descricao,idContatoVendedor:w.id,idContatoDigitador:_.id,telefoneContato:i,descricaoContatoEndereco:u,idItemTabelaPreco:m,observacaoFaturamento:r};if(l.length&&(l[0].idDocumento=S.id),this.venda={},this.vendaOriginal={},this.envelopes={},this.envelopesOriginal={},this.carrinho=[],this.carrinhoOriginal=[],this.itensEnvelopes=[],this.itensEnvelopesOriginal=[],this.condicaoPagamento=[],this.condicaoPagamentoOriginal=[],this.documentoEndereco=[],this.documentoEnderecoOriginal=[],this.documentoStatus=[],this.documentoContato=[],this.kits=[],this.permissaoCustoms=await $db.permissao.objeto("atendimento//venda/custom"),this.permissaoKits=await $db.permissao.objeto("atendimento//venda/kit"),this.permissaoOSs=await $db.permissao.objeto("atendimento//venda/os"),await this.atualizaUsaFatura(c),this.venda=S,this.documentoEndereco=l,this.atualizarDocumentoMetas(),this.obterPermissaoAlterarVendedor(),await this.$nextTick(),this.$refs.transporte&&await this.$refs.transporte.set(this.venda),localStorage.documentoItemDevolucao)try{let O=JSON.parse(localStorage.getItem("documentoItemDevolucao"));localStorage.removeItem("documentoItemDevolucao"),O.idDocumento=this.venda.id,O.dataHoraEmissao=$utils.dataAtual(),this.carrinho.push(O),await this.carregarItens(),this.unirProdutos(),await this.calcularTotais(),$q.notify({message:"Item adicionado ao or\xE7amento.",type:"positive"})}catch{$q.notify("N\xE3o foi poss\xEDvel adicionar item ao or\xE7amento.")}this.$emit("adicionar"),this.vendaAdicionada=!0},async atualizaUsaFatura(e){let t=await $db.configuracoes.le({nome:"vendas.gerafatura"}),o=t.find(r=>r.idEmpresa===e.idContato);o||(o=t.find(r=>!r.idEmpresa)),this.geraFatura=o?parseInt(o.valor):0},async calcularQuantidadeCustom(e){const t=this.customs.find(a=>a.documento.id===e),o=$utils.arredondar(t.documento.numero,4),r=$utils.arredondar(t.documento.totalDocumento/t.documento.subTotal,4);t.documento.totalDocumento=$utils.arredondar(t.documento.subTotal*o,2);for(const a of t.documentoItens){const i=a.valorItem-a.descontoItem;a.quantidade=$utils.arredondar(a.quantidade/r*o,4),a.subTotal=$utils.arredondar(i*a.quantidade),a.total=a.subTotal,a.valorReal=$utils.arredondar(i),a.valorRealTotal=a.total}await this.calcularTotais()},async cancelar(){if(!this.ehOrcamento){try{await $q.dialog({message:"Cancelar a venda?",noRefocus:!0,preventClose:!0,cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}})}catch{return}try{this.logInfo("Cancelando..."),$q.loading.show({message:"Cancelando..."});const e=$utils.dataAtual();this.venda.status="Cancelado",this.venda.idFatura="",this.venda.dataHoraFinalizado=e;for(const t of this.carrinho)t.status=this.venda.status,t.dataHoraFinalizado=e;this.$refs.faturamento.condicaoPagamento=[],await this.salvarVenda(),this.$emit("cancelada"),$q.notifyPositive("Venda cancelada")}catch{$q.notify("N\xE3o foi poss\xEDvel cancelar a venda."),$q.loading.hide()}finally{this.logInfo("Cancelou"),$q.loading.hide()}}},async salvarEnvelope(e){this.envelopes[e.documento.id]=e.documento,this.envelopes[e.documento.id].documentoContato=e.documentoContato,this.envelopes[e.documento.id].armacao=e.armacao,this.envelopes[e.documento.id].pupilometro=e.pupilometro;let t=this.itensEnvelopes.filter(o=>o.idDocumentoAdicional!==e.documento.id);t=[...t,...e.documentoItens],this.itensEnvelopes=t,this.envelopes[e.documento.id].arquivo=e.arquivo,await this.calcularTotais()},descricaoEnvelope(e){let t="";for(const o of this.itensEnvelopes)o.idDocumentoAdicional===e&&o.descricaoItem.trim()&&(t+=o.descricaoItem.trim()+" | ");return t.slice(0,-3)},async removerEnvelope(e){const t=$utils.clonarV2(this.envelopes);let o=$utils.clonarV2(this.itensEnvelopes);delete t[e],this.envelopes=t,o=o.filter(r=>r.idDocumentoAdicional!==e),this.itensEnvelopes=o,await this.calcularTotais()},async removerCustom(e){this.$q.dialog({cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},message:"Remover este item?",ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(async()=>{try{$q.loading.show({message:"Removendo..."}),this.customs=this.customs.filter(t=>t.documento.id!==e),this.unirProdutos(),await this.calcularTotais()}finally{$q.loading.hide()}})},async removerItem(e){this.$q.dialog({cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},message:"Remover este item?",ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(async()=>{try{this.logInfo("Removendo..."),$q.loading.show({message:"Removendo..."});for(const t in this.carrinho)if(this.carrinho[t].id===e){this.carrinho.splice(t,1),this.unirProdutos(),await this.calcularTotais();return}}finally{this.logInfo("Removeu..."),$q.loading.hide()}})},async removerOS(e){this.$q.dialog({cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},message:"Remover este item?",ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(async()=>{try{$q.loading.show({message:"Removendo..."}),this.oss=this.oss.filter(t=>t.documento.id!==e),this.unirProdutos(),await this.calcularTotais()}finally{$q.loading.hide()}})},async reprovarOrcamento(){try{const e=await new Promise((t,o)=>$q.dialog({message:"Especifique o motivo:",noRefocus:!0,preventClose:!0,prompt:{model:"",type:"text",class:"bg-light"},title:"Reprovar or\xE7amento?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(r=>{t(r.trim())}).onCancel(()=>{o()}));if(e)try{this.logInfo("Reprovando..."),$q.loading.show({message:"Reprovando..."});const t=$utils.dataAtual(),o="N\xE3o Aprovado",a=((await $db.contato.le({numeroDocumentoNacional:$db.usuario.logado.numeroDocumentoNacional}))[0]||{}).id||"";let i;i={id:$utils.uuid(),idDocumento:this.venda.id,dataHoraEmissao:t,operacao:this.venda.operacao,statusOriginal:this.venda.status,statusFinalizado:o,observacao:e,cpfUsuario:$db.usuario.logado.numeroDocumentoNacional},this.venda.motivoCancelamento=e,this.venda.status=o,this.venda.dataHoraFinalizado=t;for(const n of this.carrinho)n.status=o,n.dataHoraFinalizado=t;return this.$refs.faturamento.condicaoPagamento=[],this.documentoStatus.push(i),await this.salvarVenda(),$q.notifyPositive("Or\xE7amento reprovado"),!0}catch(t){return $q.notifyError("Ocorreu um erro ao reprovar o or\xE7amento.",t),$q.loading.hide(),!1}finally{this.logInfo("Reprovou"),$q.loading.hide()}else return $q.notifyError("Especifique o motivo"),!1}catch{return!1}},async retornarOrcamento(){try{$q.loading.show(),await e7({idDocumento:this.venda.id})}catch(e){this.$q.notifyError(e.message);return}finally{$q.loading.hide()}this.$q.dialog({message:"Retornar para or\xE7amento?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(async()=>{try{this.logInfo("Retornando..."),$q.loading.show({message:"Retornando..."});try{await $db.venda.checarConflitoStatus({id:this.venda.id,status:this.vendaOriginal.status})}catch(i){return $q.notifyError(i.message),!1}let e=await $db.documentoStatus.le({idDocumento:this.venda.id});if(e=$lodash.orderBy(e,"dataHoraEmissao","desc")[0],["Faturado","Aguardando Pagamento"].includes(this.venda.status))return $q.notifyError("N\xE3o \xE9 poss\xEDvel reabrir vendas de faturas j\xE1 pagas! Por favor, reabra a fatura."),!1;if(!await $db.permissao.objeto("Diretiva_Vendas_Reabertura")){const i=new Date,n=new Date(this.venda.dataHoraFinalizado);if(n.getFullYear()<i.getFullYear()||n.getMonth()<i.getMonth())return $q.notifyError("N\xE3o \xE9 poss\xEDvel reabrir vendas de meses passados!"),!1}this.documentoStatus=[];const t=$utils.dataAtual(),r=((await $db.contato.le({numeroDocumentoNacional:$db.usuario.logado.numeroDocumentoNacional}))[0]||{}).id||"";for(const i of this.carrinho)i.status="Or\xE7amento",i.tipoItem!=="Local"&&(i.dataHoraFinalizado="");for(const i in this.envelopes)this.documentoStatus.push({id:$utils.uuid(),idDocumento:this.envelopes[i].id,operacao:"Mudan\xE7a status envelope",statusOriginal:this.envelopes[i].status,statusFinalizado:"Or\xE7amento",dataHoraEmissao:t,cpfUsuario:$db.usuario.logado.numeroDocumentoNacional}),this.envelopes[i].status="Or\xE7amento",this.envelopes[i].dataHoraFinalizado="";for(const i of this.itensEnvelopes)i.status="Or\xE7amento",i.dataHoraFinalizado="";for(const i of this.customs)i.documento.status="Or\xE7amento",i.documento.dataHoraFinalizado="";for(const i of this.oss)i.documento.status="Or\xE7amento",i.documento.dataHoraFinalizado="";for(const i of this.customs.reduce((n,s)=>[...n,...s.documentoItens||[]],[]))i.status="Or\xE7amento",i.dataHoraFinalizado="";for(const i of this.oss.reduce((n,s)=>[...n,...s.documentoItens||[]],[]))i.status="Or\xE7amento",i.dataHoraFinalizado="";let a=!1;for(const i of this.kits||[]){const n=i.documentosItem.find(s=>s.operacaoFator===-1&&s.operacao!=="Manipula\xE7\xE3o");if(i.documento.status="Or\xE7amento",i.documento.dataHoraFinalizado="",n.status="Or\xE7amento",n.dataHoraFinalizado="",!a&&i.documento.idDocumentoAdicional)try{$q.loading.hide(),await new Promise((s,l)=>{$q.dialog({cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},title:"Esta venda possui Kit amarrado com Produ\xE7\xE3o (PCP), estes documentos ser\xE3o removidos se reabrir a venda.",message:"Tem certeza que deseja prosseguir?",ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{a=!0,s()}).onCancel(l)})}catch(s){console.error(s);return}finally{$q.loading.show({message:"Retornando..."})}a&&(i.documento.idDocumentoAdicional="")}return this.venda.idFatura="",this.venda.idContatoFinalizado="",this.venda.status="Or\xE7amento",this.venda.dataHoraFinalizado="",this.venda.dataHoraRealizado="",this.venda.motivoCancelamento="",this.documentoStatus.push({id:$utils.uuid(),idDocumento:this.venda.id,dataHoraEmissao:t,operacao:this.venda.operacao,statusOriginal:(e||{}).statusFinalizado,statusFinalizado:"Or\xE7amento",cpfUsuario:$db.usuario.logado.numeroDocumentoNacional}),await this.salvarVenda(),this.atualizar(),this.$emit("executar","retornarOrcamento"),$q.notifyPositive("Venda retornada para or\xE7amento"),!0}catch(e){return $q.notifyError("N\xE3o foi poss\xEDvel retornar para or\xE7amento.",e),!1}finally{$q.loading.hide()}})},async selecionarEmpresa(){const e=await $erp().empresa.toArray();let t;if(!e.filter(r=>r.ativo).length)throw new Error("Empresa n\xE3o encontrada");if(e.filter(r=>r.ativo).length===1)return e.find(r=>r.ativo);const o=await $g.promptContato.show({filtro:{ativo:!0,empresas:!0},placeholder:"Selecione a empresa"});if((o||{}).id&&(t=(await $db.empresa.le({idContato:o.id})).find(a=>a.id)),!t)throw new Error("Empresa n\xE3o selecionada");return t},async selecionarContato(e){const{placeholder:t,filtro:o}={placeholder:"Selecione o contato",filtro:{ativo:!0},...e},r=await $g.promptContato.show({filtro:o,placeholder:t});if(!r)throw new Error("Contato n\xE3o selecionado");return r},async configurarValoresTabelaPreco(e,t){if(!t.idItem)return;let o=this.valoresTabelaPreco.find(a=>a.id===t.id);if(o)return;let r=await $erp().item.get(t.idItem);o=await $db.itemTabelaPreco.obterValores(e,r,4),this.valoresTabelaPreco.push({id:t.id,...o})},adicionarItem(e){const t=this.carrinho.find(a=>a.idItem===e.id);let o=1;e.novoValorVenda=e.valorVenda,t&&(e.novoValorVenda=t.valorReal,o=t.quantidade+1);const r={};r[e.id]={item:e,quantidade:o},this.selecionarItens(r)},async selecionarItens(e,t){let o,r;try{t&&(o=new Date),$q.loading.show({message:"Carregando itens no carrinho...",html:!0,boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary"});for(const a in e){const i=e[a].item||{},n=e[a].quantidade||0;let s=this.carrinho.findIndex(l=>l.idItem===a&&l.operacaoFator===-1);s!==-1&&!n&&this.carrinho.splice(s,1),n&&(await this.selecionarItem(a,i,n),s===-1&&(s=this.carrinho.findIndex(l=>l.idItem===a),s!==-1&&this.carrinho[s].operacaoFator===-1&&await this.carrinhoCalcularTotais(this.carrinho[s].id,"quantidade",!1)))}await this.carregarItens(),this.unirProdutos(),await this.calcularTotais()}finally{if($q.loading.hide(),t){let a;r=new Date,a=(r.getTime()-o.getTime())/1e3,$q.dialog({title:"Dados estat\xEDsticos do teste",message:`Tempo para carregamento de itens no carrinho: <strong>${new Intl.NumberFormat("pt-BR").format(a)}s</strong>`,html:!0}).onOk(()=>{}).onCancel(()=>{}).onDismiss(()=>{})}}},async selecionarItem(e,t,o){var c,d;this.modalItem=!1;let r=this.carrinho.findIndex(f=>f.idItem===e&&f.operacaoFator===-1);if(r!==-1){t.novoValorVenda!==this.carrinho[r].valorOriginal&&(t.novoValorVenda<=this.carrinho[r].valorOriginal?(this.carrinho[r].valorItem=this.carrinho[r].valorOriginal,this.carrinho[r].descontoItem=$utils.arredondar(this.carrinho[r].valorOriginal-t.novoValorVenda)):(this.carrinho[r].valorItem=t.novoValorVenda,this.carrinho[r].descontoItem=0),await this.carrinhoCalcularTotais(this.carrinho[r].id,"descontoItem",!1)),this.carrinho[r].quantidade!==o&&(this.carrinho[r].quantidade=o||1,await this.carrinhoCalcularTotais(this.carrinho[r].id,"quantidade",!1));return}const a=await $utils.selecionarCfop({ncm:t.ncm,idItem:t.id,itemTipo:t.tipo,codigoDocumentoOperacao:this.venda.codigoDocumentoOperacao,idContatoDestinatario:this.venda.idContato,idContatoEmitente:this.venda.idEmpresa,operacaoFator:-1});if(!a){$q.notify("N\xE3o foi poss\xEDvel localizar o CFOP.");return}let i="",n="";const s=await $db.perfilContabilItem.le({idPerfilContabil:t.idPerfilContabil,idCfop:a.id,and:{idPerfilContabil:t.idPerfilContabil,idCfop:a.id}});if(s.length&&(i=s[0].idPlanoContaEstoque,n=s[0].idPlanoContaDestino),(!i||!n)&&(i=a.idPlanoContaEstoque,n=a.idPlanoContaDestino),!i||!n){await NP();let f,m,p,v;f=Mi.configuracoes.find(g=>g.nome==="financeiro.planocontas.comprageral"),p=Number(f==null?void 0:f.valor),v=Mi.financeiroPlanoConta.find(g=>g.codigoFinanceiroPlanoConta===p),i=v==null?void 0:v.id,m=Mi.configuracoes.find(g=>g.nome==="financeiro.planocontas.faturamentogeral"),p=Number(m==null?void 0:m.valor),v=Mi.financeiroPlanoConta.find(g=>g.codigoFinanceiroPlanoConta===p),n=v==null?void 0:v.id}if(!i){$q.notify("N\xE3o foi poss\xEDvel localizar Conta de Estoque.");return}if(!n){$q.notify("N\xE3o foi poss\xEDvel localizar Conta de Destino.");return}const l=(await $db.estoqueSaldoProdutoEmpresa.le({idItem:t.id,idEmpresa:$lodash.get(this.venda,"idEmpresa",""),tipoEstoque:"Dispon\xEDvel"})).find(f=>f.idItem),u={id:$utils.uuid(),idItem:t.id,idDocumento:this.venda.id,dataHoraEmissao:$utils.dataAtual(),descontoItem:0,descontoPercentualItem:0,descontoSubTotal:0,descontoTotalRateado:0,descontoFaturaRateado:0,descricaoItem:t.descricaoConcatenada,operacao:a==null?void 0:a.operacao,operacaoFator:a==null?void 0:a.fator,idCfop:a==null?void 0:a.id,idPlanoContaEstoque:i,idPlanoContaDestino:n,quantidade:o||1,status:this.venda.status,tipoItem:t.tipo,subTotal:t.valorVenda,total:t.valorVenda,valorCusto:0,valorCustoMedio:(c=l==null?void 0:l.valorCustoMedio)!=null?c:0,valorCustoReposicao:t.valorCustoReposicao||0,valorCustoUltimo:(d=l==null?void 0:l.valorCusto)!=null?d:0,valorItem:t.valorVenda,valorItemUltimo:t.valorVenda,valorOriginal:t.valorVenda,valorReal:t.valorVenda,valorRealTotal:t.valorVenda,ncm:t.ncm,cest:t.cest};this.carrinho.push(u),r=this.carrinho.findIndex(f=>f.idItem===e&&f.operacaoFator===-1),r!==-1&&t.novoValorVenda!==this.carrinho[r].valorOriginal&&(t.novoValorVenda<=this.carrinho[r].valorOriginal?(this.carrinho[r].valorItem=this.carrinho[r].valorOriginal,this.carrinho[r].descontoItem=$utils.arredondar(this.carrinho[r].valorOriginal-t.novoValorVenda)):(this.carrinho[r].valorItem=t.novoValorVenda,this.carrinho[r].descontoItem=0),await this.carrinhoCalcularTotais(this.carrinho[r].id,"descontoItem",!1)),o||(await this.carregarItens(),this.unirProdutos(),await this.calcularTotais())},async salvarVenda(){var e;try{$q.loading.show({message:"Salvando..."});try{Object.keys(this.vendaOriginal).length&&await $db.venda.checarConflitoStatus({id:this.venda.id,status:this.vendaOriginal.status})}catch(s){return $q.notifyError(s.message),!1}for(const s of this.carrinho.map(l=>l.id))await this.carrinhoCalcularTotais(s,null,!1);await this.calcularTotais(),this.$refs.transporte&&(this.venda={...this.venda,...this.$refs.transporte.get()});let t=$utils.clonarV2((this.$refs.faturamento||{}).condicaoPagamento||[]);for(let s in t)delete t[s].idDocumentoCondicaoPagamento,delete t[s].parcelas,delete t[s].formaPagamento,delete t[s].edicao,delete t[s].codigoDocumento,delete t[s].codigoDocumentoCaixa;const o=[],r=[];for(const s in this.envelopes)o.push(this.envelopes[s]);for(const s in this.envelopesOriginal)r.push(this.envelopesOriginal[s]);const a={venda:this.vendaOriginal,envelopes:r,customs:this.customsOriginal,kits:this.kitsOriginal,oss:this.ossOriginal,carrinho:[...this.carrinhoOriginal,...this.itensEnvelopesOriginal],condicaoPagamento:this.condicaoPagamentoOriginal,documentoEndereco:this.documentoEnderecoOriginal,documentoContato:this.documentoContatoOriginal,arquivo:this.arquivoOriginal},i={venda:this.venda,envelopes:o,customs:this.customs,kits:this.kits,oss:this.oss,carrinho:[...this.carrinho,...this.itensEnvelopes],condicaoPagamento:t,documentoEndereco:this.documentoEndereco,documentoContato:this.documentoContato,arquivo:this.arquivo};let n=Object.keys(this.envelopes);for(const s of n){(e=this.envelopes[s].arquivoOriginal)!=null&&e.length&&await $db.arquivo.remove(this.envelopes[s].arquivoOriginal.filter(l=>!this.envelopes[s].arquivo.find(u=>u.id===l.id)));for(const l of this.envelopes[s].arquivo){let u={};this.envelopes[s].arquivoOriginal?u={original:this.envelopes[s].arquivoOriginal.find(c=>c.id===l.id),atual:l}:u={atual:l},await $db.arquivo.grava({original:u.original,atual:u.atual})}}await $db.arquivo.remove(this.arquivoOriginal.filter(s=>!this.arquivo.find(l=>l.id===s.id)));for(const s of this.arquivo){let l={};Object.keys(this.arquivoOriginal).length?l={original:this.arquivoOriginal.find(u=>u.id===s.id)||[{}],atual:s}:l={atual:s},(s==null?void 0:s.name)&&(s==null?void 0:s.editado)&&await $db.arquivo.edita(l),s!=null&&s.name||await $db.arquivo.grava(l)}return Object.keys($utils.diferencaObjetos(a,i)).length&&(await $db.venda.grava({venda:this.venda,vendaOriginal:this.vendaOriginal,customs:this.customs,customsOriginal:this.customsOriginal,kits:this.kits,kitsOriginal:this.kitsOriginal,oss:this.oss,ossOriginal:this.ossOriginal,envelopes:o,envelopesOriginal:r,carrinho:[...this.carrinho,...this.itensEnvelopes],carrinhoOriginal:[...this.carrinhoOriginal,...this.itensEnvelopesOriginal],condicaoPagamento:t,condicaoPagamentoOriginal:this.condicaoPagamentoOriginal,documentoEndereco:this.documentoEndereco,documentoEnderecoOriginal:this.documentoEnderecoOriginal,documentoContato:this.documentoContato,documentoContatoOriginal:this.documentoContatoOriginal,documentoStatus:this.documentoStatus}),this.logInfo("Salvou"),this.atualizar(),this.$emit("atualizar")),!0}catch(t){return $q.notifyError("Erro ao salvar.",t),!1}finally{$q.loading.hide()}},async configuraImpressaoOrcamento(e){const t=await $db.configuracoes.porNome("impressao.venda",e),o=[{valor:"invoice",texto:"Or\xE7amento/Venda (Invoice)"}];this.sistemaPai==="optisoul"&&o.push({valor:"orcamento",texto:"Or\xE7amento (Antigo)"},{valor:"termoGarantia",texto:"Termo de Garantia"}),this.configImpressaoOrcamento=[...t.length?t.map(r=>({texto:"Imprimir Or\xE7amento",...r})):o]},async atualizar(){try{this.logInfo("Atualizando..."),$q.loading.show({message:"Atualizando..."}),await this.atualizarNucleo(),await this.atualizarDocumentoMetas()}catch(e){$q.notifyError("Erro ao carregar venda",e)}finally{this.logInfo("Atualizou"),$q.loading.hide()}},async atualizarNucleo(){let e=[];if(this.erroCalculo=!1,this.valoresTabelaPreco=[],this.maximoDesconto=[],this.warningLabel={},this.modalDescontoMaximo={permiteDescontoMaximo:!1,titulo:"",msg:"",itens:[],resolve:void 0,reject:void 0,visivel:!1},this.modalItemSemEstoque={itens:[],resolve:void 0,reject:void 0,visivel:!1,opcao:"",opcoes:[]},this.modalProdutoControlado={permiteQuantidadeExcedida:!1,itens:[],resolve:void 0,reject:void 0,visivel:!1},this.modalCreditoDisponivel={permiteFinalizar:!1,resolve:void 0,reject:void 0,visivel:!1},this.vendaOriginal=await $db.hibrido.le({table:"documento",id:this.id}),this.permissaoMargem=await $db.permissao.objeto("Diretiva_Vendas_VerMargem"),!Object.keys(this.vendaOriginal).length){this.adicionar();return}this.venda=$utils.clonarV2(this.vendaOriginal),this.arquivoOriginal=await $db.arquivo.lista({tipoArquivo:"vendaArquivo",idTabelaMaster:this.venda.id}),this.arquivo=$utils.clonarV2(this.arquivoOriginal),await this.obterClassificacaoDestinatario(this.venda.idContato),await this.obterPermissaoAlterarVendedor(),await this.atualizaUsaFatura({idContato:this.venda.idEmpresa}),await this.configuraImpressaoOrcamento(this.venda.idEmpresa),e=await $db.hibrido.lista({table:"documentoItem",where:{idDocumento:this.venda.id}}),e.sort((n,s)=>new Date(n.dataHoraEmissao)<new Date(s.dataHoraEmissao)?-1:1),this.carrinho=e.filter(n=>!n.idDocumentoAdicional),this.carrinhoOriginal=$utils.clonarV2(this.carrinho),this.condicaoPagamentoOriginal=await $db.hibrido.lista({table:"documentoCondicaoPagamento",where:{idDocumento:this.venda.id}}),this.condicaoPagamento=$utils.clonarV2(this.condicaoPagamentoOriginal),this.$refs.faturamento&&(this.$refs.faturamento.condicaoPagamento=$utils.clonarV2(this.condicaoPagamentoOriginal)),this.documentoEnderecoOriginal=await $db.hibrido.lista({table:"documentoEndereco",where:{idDocumento:this.venda.id}}),this.documentoEndereco=$utils.clonarV2(this.documentoEnderecoOriginal),this.documentoContatoOriginal=await $db.hibrido.lista({table:"documentoContato",where:{idDocumento:this.venda.id}}),this.documentoContato=$utils.clonarV2(this.documentoContatoOriginal);const t=await $db.hibrido.lista({table:"documento",where:{tipo:"Envelope",documentoId:this.venda.id}});this.itensEnvelopesOriginal=[],this.envelopesOriginal={};for(const n of t){n.documentoContato=[];let s=await $db.hibrido.lista({table:"documentoContato",where:{idDocumento:n.id}});s=s.find(c=>c.descricao==="Laborat\xF3rio"),s&&n.documentoContato.push(s);let l=[],u=await $db.arquivo.lista({tipoArquivo:"-",idTabelaMaster:n.id});l=$utils.clonarV2(u),n.arquivoOriginal=u,n.arquivo=l,this.envelopesOriginal[n.id]=n,this.itensEnvelopesOriginal=[...this.itensEnvelopesOriginal,...await $db.hibrido.lista({table:"documentoItem",where:{idDocumentoAdicional:n.id}})]}this.envelopes=$utils.clonarV2(this.envelopesOriginal),this.itensEnvelopes=$utils.clonarV2(this.itensEnvelopesOriginal),this.contatos={};for(const n in this.envelopes){const s=this.envelopes[n].idContato;this.contatos[s]||(this.contatos[s]=await $db.contato.le({id:s}))}if(this.venda.idContato){const n=this.venda.idContato;this.contatos[n]||(this.contatos[n]=await $db.contato.le({id:n}))}let o=(await $db.hibrido.lista({table:"documento",where:{tipo:"Custom",documentoId:this.venda.id}})).map(n=>({documento:{...n}}));for(const n of o)n.documentoItens=await $db.hibrido.lista({table:"documentoItem",where:{idDocumentoAdicional:n.documento.id}}),n.arquivo=await $db.arquivo.lista({tipoArquivo:"-",idTabelaMaster:n.documento.id});this.customs=o,this.customsOriginal=$utils.clonarV2(o),this.permissaoCustoms=await $db.permissao.objeto("atendimento//venda/custom");let r=(await $db.hibrido.lista({table:"documento",where:{tipo:"Venda Kit",documentoId:this.venda.id}})).map(n=>({documento:{...n}}));for(const n of r){const s=await $db.hibrido.lista({table:"documentoItem",where:{idDocumentoAdicional:n.documento.id}}),l=s.find(u=>u.operacaoFator===-1&&u.operacao!=="Manipula\xE7\xE3o");n.documentosItem=s,n.quantidadeDestinoPrev=l.quantidade,this.documentoItemKit[n.documento.id]=l}this.kits=r,this.kitsOriginal=$utils.clonarV2(r),this.permissaoKits=await $db.permissao.objeto("atendimento//venda/kit");let a=(await $db.hibrido.lista({table:"documento",where:{tipo:"Ordem de Servi\xE7o",documentoId:this.venda.id}})).map(n=>({documento:{...n}}));for(const n of a)n.documentoItens=await $db.hibrido.lista({table:"documentoItem",where:{idDocumentoAdicional:n.documento.id}}),n.arquivo=await $db.arquivo.lista({tipoArquivo:"-",idTabelaMaster:n.documento.id});this.oss=a,this.ossOriginal=$utils.clonarV2(a),this.permissaoOSs=await $db.permissao.objeto("atendimento//venda/os"),await this.carregarItens(),this.unirProdutos();let i=[];for(const n in this.envelopes){const s=await $db.arquivo.lista({tipoArquivo:"-",idTabelaMaster:n});i=[...i,...s]}await this.calcularTotais(),await this.$nextTick(),this.$refs.transporte&&await this.$refs.transporte.set(this.venda),localStorage.documentoItemDevolucao&&(localStorage.removeItem("documentoItemDevolucao"),this.salvarVenda())},unirProdutos(){var r,a;let e=[],t=[];for(const i of this.carrinho)e.push({obj:i,dataHoraEmissao:new Date(i.dataHoraEmissao),descricao:(i.descricaoAgrupamento||"").toUpperCase()});for(const i of this.customs)e.push({obj:i,dataHoraEmissao:new Date(i.documento.dataHoraEmissao),descricao:(i.documentoItens.length&&i.documentoItens[0].descricaoAgrupamento||"").toUpperCase()});for(const i of this.oss)e.push({obj:i,dataHoraEmissao:new Date(i.documento.dataHoraEmissao),descricao:(i.documentoItens.length&&i.documentoItens[0].descricaoAgrupamento||"").toUpperCase()});for(const i of this.kits||[]){const n=i.documentosItem.find(s=>s.operacaoFator===-1&&s.operacao!=="Manipula\xE7\xE3o");!i.documento||!n||e.push({obj:i,dataHoraEmissao:new Date(n.dataHoraEmissao),descricao:(a=(r=n.descricaoAgrupamento)==null?void 0:r.toUpperCase())!=null?a:""})}e.sort((i,n)=>i.descricao+i.dataHoraEmissao.getTime()<n.descricao+n.dataHoraEmissao.getTime()?-1:1);let o="";for(const i of e)o!==i.descricao&&(o=i.descricao,t.push({caption:o})),t.push(i.obj);this.produtos=t},async carregarItens(){let e={};const t=[];for(const o of this.kits||[])t.push(o.documentosItem.find(r=>r.operacaoFator===-1&&r.operacao!=="Manipula\xE7\xE3o"));for(const o of this.carrinho.concat(t)){{const r=o.valorItem-o.descontoItem;this.subTotal[o.id]=r}if(!(o.idItem in e)){let r=await $erp().item.get(o.idItem);r={...r,marca:r.marca||"",referencia:r.referencia||"",observacao:r.observacao||"",aplicacao:r.aplicacao||"",imagem:r.imagem||""},e[r.id]=r}}this.item={...this.item,...e}},async calcularTotais(e){await this.calcularImposto(),await $db.venda.calcularTotais({objsVenda:{venda:$utils.clonarV2(this.venda),carrinho:$utils.clonarV2(this.carrinho),envelopes:$utils.clonarV2(this.envelopes),itensEnvelopes:$utils.clonarV2(this.itensEnvelopes),customs:$utils.clonarV2(this.customs),oss:$utils.clonarV2(this.oss),kits:$utils.clonarV2(this.kits)},campoAlterado:e}).then(t=>{this.venda=t.venda}),this.calcularTributacao=this.venda.calcularTributacao,this.erroCalculo=!1,(this.venda.totalPercentualDesconto<0||this.venda.totalPercentualDesconto>100)&&(this.erroCalculo=!0),await this.calcularPesoTotal(),await this.calcularMetroCubicoTotal(),await this.calcularMargens()},async carrinhoCalcularTotais(e,t,o=!0){let r,a;for(const n of this.kits||[])if(a=n.documentosItem.find(s=>s.id===e),a){r=a;break}if(r||(r=this.carrinho.find(n=>n.id===e)),r=$utils.clonarV2(r),t==="quantidade"&&r.operacaoFator===-1&&this.venda.idItemTabelaPreco){const n=await $erp().itemTabelaPreco.get(this.venda.idItemTabelaPreco);if(n){await this.configurarValoresTabelaPreco(n,r);let s=this.valoresTabelaPreco.find(l=>l.id===r.id);s.quantidadeMaiorQue&&(this.hintValorUnitario[r.id]=`>${s.quantidadeMaiorQue-1}un = ${$filters.numeroZerosDireita(s.valorVendaMaiorQue,4,2)}`),s.quantidadeMaiorQue&&r.quantidade>=s.quantidadeMaiorQue?(r.valorOriginal!==s.valorVendaMaiorQue&&(r.valorOriginal=s.valorVendaMaiorQue,r.valorItem=s.valorVendaMaiorQue,r.descontoItem=r.descontoPercentualItem=0),this.warningLabel[r.id]="Valor Diferenciado"):(r.valorOriginal!==s.valorVenda&&(r.valorOriginal=s.valorVenda,r.valorItem=s.valorVenda,r.descontoItem=r.descontoPercentualItem=0),this.warningLabel[r.id]="")}}r.valorItem>0&&r.valorItem<r.valorOriginal&&(r.valorItem=r.valorOriginal),t==="descontoPercentualItem"&&(r.descontoItem=$utils.arredondar(r.descontoPercentualItem/100*r.valorItem,4)),["descontoItem","valorItem"].includes(t)&&(r.descontoPercentualItem=$utils.arredondar(r.descontoItem/r.valorItem*100)),r.descontoItem>r.valorItem&&r.operacaoFator===-1&&(r.descontoPercentualItem=r.descontoItem=0),["subTotal"].includes(t)&&(this.subTotal[r.id]!==void 0?r.descontoItem=$utils.arredondar(r.valorItem-this.subTotal[r.id],4):r.descontoItem=$utils.arredondar(r.valorItem-r.subTotal,4),r.descontoPercentualItem=$utils.arredondar(r.descontoItem/r.valorItem*100),this.subTotal[r.id]>0&&this.subTotal[r.id]>r.valorItem&&(r.valorItem=this.subTotal[r.id]));let i=$utils.arredondar(r.valorItem-r.descontoItem,4);if(r.descontoItem=$utils.arredondar(r.valorItem-i,4),$utils.arredondar(i)>$utils.arredondar(r.valorItem)&&r.operacaoFator===-1&&(i=r.valorItem,r.descontoPercentualItem=r.descontoItem=0),this.subTotal[r.id]=i,r.subTotal=$utils.arredondar(i*r.quantidade),r.total=r.subTotal,r.valorReal=i,r.valorRealTotal=r.total,!a){const n=this.carrinho.findIndex(s=>s.id===e);n!==-1&&this.carrinho.splice(n,1,r)}if(a)for(const n of this.kits||[]){const s=n.documentosItem.findIndex(l=>l.id===e);if(s!==-1){if(n.quantidadeDestinoPrev!==0&&r.quantidade!==n.quantidadeDestinoPrev)for(const l of n.documentosItem.filter(u=>u.operacaoFator===0))l.quantidade=l.quantidade*r.quantidade/n.quantidadeDestinoPrev,l.total=l.valorItem*l.quantidade;this.documentoItemKit[n.documento.id]=r,n.quantidadeDestinoPrev=r.quantidade,n.documento.totalDocumento=r.total,n.documentosItem.splice(s,1,r);break}}o&&(this.unirProdutos(),await this.calcularTotais())},async configuraImpressosWhatsapp(){let e=await $db.configuracoes.le({prefixoNome:"venda.whatsapp.enviar."});e=e.filter(t=>t.idEmpresa===this.venda.idEmpresa||!t.idEmpresa),this.configImpressosWhatsapp=e.map(t=>({...t,idVenda:this.venda.id}))},async configuraImpressosEmail(){let e=await $db.configuracoes.le({prefixoNome:"venda.email.enviar."});e=e.filter(t=>t.idEmpresa===this.venda.idEmpresa||!t.idEmpresa),this.configImpressosEmail=e.map(t=>({...t,idVenda:this.venda.id}))},async enviarImpresso(e,t){e==="whatsapp"&&await $utils.enviarWhatsapp({configuracao:$utils.clonar(t),documento:$utils.clonar(this.venda),loading:!0,dialog:!0}),e==="email"&&await $utils.enviarEmail({configuracao:$utils.clonar(t),documento:$utils.clonar(this.venda),loading:!0,dialog:!0})}},props:{id:{default:"",required:!0,type:String},idContato:{type:String},continueMesmaTela:{type:Boolean,required:!1,default:!1},enableChanges:{type:Boolean,required:!1,default:!0}},watch:{id(){this.atualizar()}},async mounted(){await this.atualizar(),this.configuraImpressosWhatsapp(),this.configuraImpressosEmail(),$db.app.tela.venda=this},created(){this.sistemaPai=$utils.sistemaPai(),this.subTotal={}},unmounted(){delete $db.app.tela.venda}},aFe={id:"Venda",class:"Venda round-borders"},rFe={class:"bg-white round-borders q-pa-md q-py-md q-my-md"},iFe={class:"bg-white round-borders q-pa-md q-py-md q-mb-md"},nFe={key:0,class:"text-center"},sFe={key:1},lFe={key:0,class:"text-body1 text-weight-medium q-mt-xl"},cFe={class:"row items-center"},uFe={class:"col-auto"},dFe={class:"col-auto"},fFe={class:"row items-center"},mFe={class:"col-auto"},pFe={class:"col-auto"},hFe={class:"col-12"},vFe={class:"col-6 col-md"},gFe={class:"col-6 col-md"},_Fe={class:"col-12 col-md"},bFe={key:1,class:"col-12 col-md"},yFe={class:"row items-center"},xFe={class:"col-auto"},CFe={class:"col-auto"},wFe={class:"col-12"},EFe=["warning","warning-label"],SFe={class:"col-4 col-md"},IFe={class:"col-4 col-md"},AFe={class:"col-6 col-md"},TFe={class:"col-6 col-md"},DFe={class:"col-12 col-md"},OFe={class:"row items-center"},PFe={class:"col-auto"},FFe={class:"col-auto"},MFe={class:"col-12"},NFe=["warning","warning-label"],kFe={class:"col-4 col-md"},RFe={class:"col-4 col-md"},VFe={key:2,class:"col-6 col-md"},BFe={key:3,class:"col-6 col-md"},qFe={class:"col-12 col-md"},LFe={class:"border-1"},$Fe={class:"row items-center"},UFe={class:"col-auto"},zFe={class:"col-auto"},HFe={class:"col-12"},jFe={key:0,class:"row q-mt-md"},GFe={class:"col-12 col-md-4 offset-md-8"},WFe={class:"items-center row q-col-gutter-x-sm",style:{"min-height":"49px"}},QFe={class:"col text-right text-weight-bold"},XFe={class:"items-center row q-col-gutter-x-sm"},KFe={class:"col"},YFe={class:"col"},JFe={class:"items-center row q-col-gutter-x-sm"},ZFe={class:"col"},e5e={class:"col"},t5e={class:"items-center row q-col-gutter-x-sm q-mt-md"},o5e={class:"col text-right text-weight-bold"},a5e={key:0},r5e={key:0,class:"items-center row q-col-gutter-x-sm",style:{"min-height":"49px"}},i5e={key:1,class:"items-center row q-col-gutter-x-sm",style:{"min-height":"49px"}},n5e={key:2,class:"items-center row q-col-gutter-x-sm",style:{"min-height":"49px"}},s5e={class:"items-center row q-col-gutter-x-sm",style:{"min-height":"49px"}},l5e={class:"col-6 text-weight-bold"},c5e={class:"col text-right text-weight-bold"},u5e={key:1,class:"items-center row q-col-gutter-x-sm q-mt-md"},d5e={class:"col text-right"},f5e={key:2,class:"items-center row q-col-gutter-x-sm q-mt-md"},m5e={class:"col text-right"},p5e={key:3,class:"items-center row q-col-gutter-x-sm q-mt-md"},h5e={class:"col text-right"},v5e={class:"Venda-faturamento bg-white round-borders q-pa-sm q-mb-md"},g5e={key:0,class:"Venda-faturamento bg-white round-borders q-mb-md"},_5e={class:"bg-white round-borders q-px-md q-pt-none q-pb-md q-mb-xl"},b5e={class:"bg-white round-borders q-px-md q-pt-none q-pb-md q-mb-md"},y5e={class:"col-12 col-sm-4"},x5e={class:"col-12 col-sm-4"},C5e={class:"col-12 col-sm-4"},w5e={class:"layout-padding"},E5e={class:"q-mt-lg text-right"},S5e={class:"layout-padding"},I5e={class:"q-pa-sm"},A5e={key:0},T5e={class:"q-mt-lg text-right"},D5e={class:"layout-padding"},O5e={class:"q-pa-sm"},P5e={class:"q-mt-lg text-right"},F5e={class:"layout-padding"},M5e={class:"q-mt-lg text-right"};function N5e(e,t,o,r,a,i){const n=Ve("avatar"),s=Ve("badge"),l=Ve("documento-codigo"),u=Ve("documento-metas"),c=Ve("CodigoBarras"),d=Ve("Avatar"),f=Ve("campo"),m=Ve("row"),p=Ve("faturamento"),v=Ve("VendaTransporte"),g=Ve("Arquivo"),x=Ve("envelope"),b=Ve("Custom"),_=Ve("OrdemServico"),w=Ve("TitulosPendentesEmAtraso"),S=Ve("ModalEditarProduto"),D=Ve("prompt-item-tabela-preco-novo"),M=Ve("prompt-documento-operacao"),O=Ve("Kit"),T=Ve("PromptItemV2");return B(),be("div",aFe,[A("div",rFe,[h(Je,{class:"Venda-barra q-px-none q-pb-md"},{default:C(()=>[h(n,{imagem:(a.contatos[a.venda.idContato]||{}).imagem,rotulo:a.venda.descricaoContato,tamanho:"50"},null,8,["imagem","rotulo"]),h(lt,null,{default:C(()=>[A("div",null,le(a.venda.descricaoContato),1),A("div",null,[h(s,{denso:""},{default:C(()=>[K(le(i.descricaoClassificacaoDestinatario),1)]),_:1})])]),_:1}),a.margem[a.venda.id]&&a.permissaoMargem?(B(),oe(l,{key:0,documento:a.venda,prioridade:{tooltip:`| \xCDndice ${e.$filters.numero(a.margem[a.venda.id].valor,2)}%`,cor:a.margem[a.venda.id].limite?"negative":a.margem[a.venda.id].alerta?"warning":void 0}},null,8,["documento","prioridade"])):(B(),oe(l,{key:1,documento:a.venda},null,8,["documento"])),i.ehOrcamento?(B(),oe(ae,{key:2,color:"tertiary",flat:"",icon:"more_vert",round:""},{default:C(()=>[h(aa,{modelValue:a.menuVenda,"onUpdate:modelValue":t[6]||(t[6]=I=>a.menuVenda=I)},{default:C(()=>[Ee((B(),oe(At,{link:"",separator:""},{default:C(()=>[(B(!0),be(Qe,null,qt(a.configImpressosWhatsapp.filter(I=>I.valor),I=>(B(),oe(qe,{key:I.valor,onClick:N=>i.enviarImpresso("whatsapp",I),clickable:""},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"mdi-whatsapp"})]),_:1}),h(fe,null,{default:C(()=>[K(le(I.valor),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),(B(!0),be(Qe,null,qt(a.configImpressosEmail.filter(I=>I.valor),I=>(B(),oe(qe,{key:I.valor,onClick:N=>i.enviarImpresso("email",I),clickable:""},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"mail"})]),_:1}),h(fe,null,{default:C(()=>[K(le(I.valor),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),h(qe,{clickable:"",onClick:i.alterarCliente},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"how_to_reg"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[43]||(t[43]=[K("Alterar cliente")])),_:1})]),_:1})]),_:1},8,["onClick"]),a.permissaoAlterarVendedor?(B(),oe(qe,{key:0,clickable:"",onClick:i.alterarVendedor},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"how_to_reg"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[44]||(t[44]=[K("Alterar vendedor")])),_:1})]),_:1})]),_:1},8,["onClick"])):ie("",!0),Object.keys(a.envelopes).length||a.produtos.length?ie("",!0):(B(),oe(qe,{key:1,clickable:"",onClick:i.alterarTabelaPreco},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"attach_money"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[45]||(t[45]=[K("Alterar tabela de pre\xE7o")])),_:1})]),_:1})]),_:1},8,["onClick"])),Object.keys(a.envelopes).length||a.produtos.length?ie("",!0):(B(),oe(qe,{key:2,clickable:"",onClick:i.alterarDocumentoOperacao},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"attach_money"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[46]||(t[46]=[K("Alterar Opera\xE7\xE3o")])),_:1})]),_:1})]),_:1},8,["onClick"])),h(qe,{clickable:"",onClick:i.selecionarContatoIndicacao},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"how_to_reg"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[47]||(t[47]=[K("Selecionar indica\xE7\xE3o")])),_:1})]),_:1})]),_:1},8,["onClick"]),a.documentoContato.find(I=>(I.descricao||"").trim().toLowerCase()==="comprador")?(B(),oe(qe,{key:3,clickable:"",onClick:t[0]||(t[0]=I=>i.removerComprador())},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"assignment_ind"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[48]||(t[48]=[K("Remover comprador")])),_:1})]),_:1})]),_:1})):(B(),oe(qe,{key:4,clickable:"",onClick:t[1]||(t[1]=I=>i.selecionarComprador())},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"assignment_ind"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[49]||(t[49]=[K("Selecionar comprador")])),_:1})]),_:1})]),_:1})),a.documentoContato.find(I=>(I.descricao||"").trim().toLowerCase()==="representando")?(B(),oe(qe,{key:5,clickable:"",onClick:t[2]||(t[2]=I=>i.removerRepresentando())},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"how_to_reg"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[50]||(t[50]=[K("Remover representando")])),_:1})]),_:1})]),_:1})):(B(),oe(qe,{key:6,clickable:"",onClick:t[3]||(t[3]=I=>i.selecionarRepresentando())},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"how_to_reg"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[51]||(t[51]=[K("Informar representando")])),_:1})]),_:1})]),_:1})),a.documentoContato.length>=1?(B(),oe(qe,{key:7,clickable:"",onClick:t[4]||(t[4]=I=>i.removerConvenio())},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"input"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[52]||(t[52]=[K("Remover conv\xEAnio")])),_:1})]),_:1})]),_:1})):(B(),oe(qe,{key:8,clickable:"",onClick:t[5]||(t[5]=I=>i.selecionarConvenio())},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"input"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[53]||(t[53]=[K("Alocar conv\xEAnio")])),_:1})]),_:1})]),_:1}))]),_:1})),[[st]])]),_:1},8,["modelValue"])]),_:1})):ie("",!0)]),_:1}),!i.ehOrcamento&&!a.venda.idFatura&&!~["Cancelado","N\xE3o Aprovado"].indexOf(a.venda.status)?(B(),oe(Je,{key:0,class:"q-px-none q-pb-md"},{default:C(()=>[h(Yp),h(ae,{onClick:i.retornarOrcamento,color:"primary",class:"q-px-sm"},{default:C(()=>[h(Pe,{name:"undo",class:"q-mr-sm"}),t[54]||(t[54]=K(" Retornar para or\xE7amento "))]),_:1},8,["onClick"])]),_:1})):ie("",!0),h(u,{ref:"documentoMetas"},null,512)]),A("div",iFe,[h(Je,{class:"q-px-none"},{default:C(()=>[h(Pe,{name:"shopping_cart",size:"24px"}),h(lt,null,{default:C(()=>t[55]||(t[55]=[K("Carrinho")])),_:1}),h(ae,{class:"hideondesktop",color:"primary",flat:"",round:"",icon:"add",size:"md"},{default:C(()=>[h(aa,null,{default:C(()=>[h(At,{link:"","no-border":"",separator:""},{default:C(()=>[i.ehOrcamento?Ee((B(),oe(qe,{key:0,clickable:"",onClick:i.abrirModalItem},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"add"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[56]||(t[56]=[K("Produtos")])),_:1})]),_:1})]),_:1},8,["onClick"])),[[st]]):ie("",!0),i.ehOrcamento&&a.permissaoOSs?Ee((B(),oe(qe,{key:1,clickable:"",onClick:t[7]||(t[7]=I=>i.abrirModalOS())},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"add"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[57]||(t[57]=[K("OS")])),_:1})]),_:1})]),_:1})),[[st]]):ie("",!0),i.ehOrcamento&&a.permissaoKits?Ee((B(),oe(qe,{key:2,clickable:"",onClick:t[8]||(t[8]=I=>i.abrirKit())},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"add"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[58]||(t[58]=[K("Kit")])),_:1})]),_:1})]),_:1})),[[st]]):ie("",!0),i.ehOrcamento&&a.permissaoCustoms?Ee((B(),oe(qe,{key:3,clickable:"",onClick:t[9]||(t[9]=I=>i.abrirModalCustom())},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"add"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[59]||(t[59]=[K("Custom")])),_:1})]),_:1})]),_:1})),[[st]]):ie("",!0)]),_:1})]),_:1})]),_:1}),i.ehOrcamento?(B(),oe(ae,{key:0,onClick:i.abrirModalItem,color:"primary",flat:"",class:"hideonmobile q-pl-xs q-pr-sm"},{default:C(()=>[h(Pe,{name:"add",class:"q-mr-xs"}),t[60]||(t[60]=K(" Produto "))]),_:1},8,["onClick"])):ie("",!0),i.ehOrcamento&&a.permissaoOSs?(B(),oe(ae,{key:1,onClick:t[10]||(t[10]=I=>i.abrirModalOS()),color:"primary",flat:"",class:"hideonmobile q-pl-xs q-pr-sm"},{default:C(()=>[h(Pe,{name:"add",class:"q-mr-xs"}),t[61]||(t[61]=K(" OS "))]),_:1})):ie("",!0),i.ehOrcamento&&a.permissaoKits?(B(),oe(ae,{key:2,onClick:t[11]||(t[11]=I=>i.abrirKit()),color:"primary",flat:"",class:"hideonmobile q-pl-xs q-pr-sm"},{default:C(()=>[h(Pe,{name:"add",class:"q-mr-xs"}),t[62]||(t[62]=K(" Kit "))]),_:1})):ie("",!0),i.ehOrcamento&&a.permissaoCustoms?(B(),oe(ae,{key:3,onClick:t[12]||(t[12]=I=>i.abrirModalCustom()),color:"primary",flat:"",class:"hideonmobile q-pl-xs q-pr-sm"},{default:C(()=>[h(Pe,{name:"add",class:"q-mr-xs"}),t[63]||(t[63]=K(" Custom "))]),_:1})):ie("",!0),i.ehOrcamento?(B(),oe(c,{key:4,onAdicionar:i.adicionarItem,onAtualizar:i.selecionarItens,documentoItens:a.carrinho,itemFiltros:{ativo:!0,bloquearVenda:!1,idEmpresa:a.venda.idEmpresa,idContato:a.venda.idContato,idItemTabelaPreco:a.venda.idItemTabelaPreco}},null,8,["onAdicionar","onAtualizar","documentoItens","itemFiltros"])):ie("",!0)]),_:1}),Object.keys(a.envelopes).length||a.produtos.length?(B(),be("div",sFe,[(B(!0),be(Qe,null,qt(a.produtos,(I,N)=>(B(),be("div",{class:"items-carrinho items-center row q-py-sm",key:N},[I.caption?(B(),be("div",lFe,le(I.caption),1)):ie("",!0),I.documento&&I.documento.tipo!=="Venda Kit"?(B(),be(Qe,{key:1},[h(At,{class:"full-width"},{default:C(()=>[h(qe,{class:"q-px-none"},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(d,{imagem:I.arquivo.length?I.arquivo[0].arquivo:"",rotulo:I.documento.descricao,tamanho:"40"},null,8,["imagem","rotulo"])]),_:2},1024),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>[K(le(I.documento.descricao),1)]),_:2},1024),h(Re,{caption:""},{default:C(()=>[K(le(I.documento.observacao),1)]),_:2},1024)]),_:2},1024),a.margem[I.documento.id]&&a.permissaoMargem?(B(),oe(fe,{key:0,avatar:""},{default:C(()=>[a.margem[I.documento.id].limite?(B(),oe(s,{key:0,cor:"negative",denso:"",escuro:""},{default:C(()=>[K(le(I.documento.tipo)+" ",1),h(Ft,null,{default:C(()=>[K("\xCDndice "+le(e.$filters.numero(a.margem[I.documento.id].valor,2))+"%",1)]),_:2},1024)]),_:2},1024)):a.margem[I.documento.id].alerta?(B(),oe(s,{key:1,cor:"warning",denso:""},{default:C(()=>[K(le(I.documento.tipo)+" ",1),h(Ft,null,{default:C(()=>[K("\xCDndice "+le(e.$filters.numero(a.margem[I.documento.id].valor,2))+"%",1)]),_:2},1024)]),_:2},1024)):(B(),oe(s,{key:2},{default:C(()=>[K(le(I.documento.tipo)+" ",1),h(Ft,null,{default:C(()=>[K("\xCDndice "+le(e.$filters.numero(a.margem[I.documento.id].valor,2))+"%",1)]),_:2},1024)]),_:2},1024))]),_:2},1024)):(B(),oe(fe,{key:1,avatar:""},{default:C(()=>[h(s,{denso:""},{default:C(()=>[K(le(I.documento.tipo),1)]),_:2},1024)]),_:2},1024)),I.documento.tipo==="Custom"?(B(),oe(fe,{key:2,avatar:""},{default:C(()=>[A("div",cFe,[A("div",uFe,[i.ehOrcamento&&a.permissaoCustoms?(B(),oe(ae,{key:0,color:"primary",dense:"",flat:"",icon:"edit",round:"",onClick:P=>i.abrirModalCustom(I.documento.id)},{default:C(()=>[h(Ft,null,{default:C(()=>t[65]||(t[65]=[K("Editar Custom")])),_:1})]),_:2},1032,["onClick"])):ie("",!0)]),A("div",dFe,[i.ehOrcamento&&a.permissaoCustoms?(B(),oe(ae,{key:0,color:"tertiary",dense:"",flat:"",icon:"delete",round:"",onClick:P=>i.removerCustom(I.documento.id)},{default:C(()=>[h(Ft,null,{default:C(()=>t[66]||(t[66]=[K("Remover Custom")])),_:1})]),_:2},1032,["onClick"])):ie("",!0)])])]),_:2},1024)):ie("",!0),I.documento.tipo==="Ordem de Servi\xE7o"?(B(),oe(fe,{key:3,avatar:""},{default:C(()=>[A("div",fFe,[A("div",mFe,[i.ehOrcamento&&a.permissaoOSs?(B(),oe(ae,{key:0,color:"primary",dense:"",flat:"",icon:"edit",round:"",onClick:P=>i.abrirModalOS(I.documento.id)},{default:C(()=>[h(Ft,null,{default:C(()=>t[67]||(t[67]=[K("Editar Ordem de Servi\xE7o")])),_:1})]),_:2},1032,["onClick"])):ie("",!0)]),A("div",pFe,[i.ehOrcamento&&a.permissaoOSs?(B(),oe(ae,{key:0,color:"tertiary",dense:"",flat:"",icon:"delete",round:"",onClick:P=>i.removerOS(I.documento.id)},{default:C(()=>[h(Ft,null,{default:C(()=>t[68]||(t[68]=[K("Remover Ordem de Servi\xE7o")])),_:1})]),_:2},1032,["onClick"])):ie("",!0)])])]),_:2},1024)):ie("",!0)]),_:2},1024)]),_:2},1024),A("div",hFe,[h(m,{class:"q-col-gutter-sm row justify-end"},{default:C(()=>[I.documento.tipo==="Custom"?(B(),be(Qe,{key:0},[A("div",vFe,[h(m,{class:"items-center"},{default:C(()=>[h(f,{dense:"",align:e.$q.screen.lt.sm?"left":"right",outlined:"",tipo:"decimal",decimals:"4",zerosDireita:"2",rotulo:"Subtotal",modelValue:I.documento.subTotal,"onUpdate:modelValue":P=>I.documento.subTotal=P,"somente-leitura":!0},null,8,["align","modelValue","onUpdate:modelValue"]),h(Pe,{name:"mdi-close",color:"primary"})]),_:2},1024)]),A("div",gFe,[h(f,{dense:"",min:"1",modelValue:I.documento.numero,"onUpdate:modelValue":P=>I.documento.numero=P,outlined:"","somente-leitura":!i.ehOrcamento,tipo:i.ehOrcamento?"quantidade":"decimal",decimals:"4",zerosDireita:"0",onBlur:P=>i.calcularQuantidadeCustom(I.documento.id)},null,8,["modelValue","onUpdate:modelValue","somente-leitura","tipo","onBlur"]),h(Ft,null,{default:C(()=>t[69]||(t[69]=[K("Quantidade")])),_:1})]),A("div",_Fe,[h(m,{class:"items-center"},{default:C(()=>[h(Pe,{name:"mdi-equal",color:"primary",class:"hideonmobile"}),h(f,{dense:"",tipo:"decimal",decimals:"2","somente-leitura":!0,rotulo:"Total",modelValue:I.documento.totalDocumento,"onUpdate:modelValue":P=>I.documento.totalDocumento=P,outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)])],64)):ie("",!0),I.documento.tipo==="Ordem de Servi\xE7o"?(B(),be("div",bFe,[h(f,{dense:"",tipo:"decimal",decimals:"2",modelValue:I.documento.totalDocumento,"onUpdate:modelValue":P=>I.documento.totalDocumento=P,outlined:"",rotulo:"Total","somente-leitura":!0},null,8,["modelValue","onUpdate:modelValue"])])):ie("",!0)]),_:2},1024)])],64)):ie("",!0),I.documento&&I.documento.tipo==="Venda Kit"?(B(),be(Qe,{key:2},[h(At,{class:"full-width"},{default:C(()=>[h(qe,{class:"q-px-none"},{default:C(()=>[h(fe,{avatar:"",class:"col-auto"},{default:C(()=>{var P;return[h(n,{imagem:(P=a.item[a.documentoItemKit[I.documento.id].idItem])==null?void 0:P.imagem,rotulo:a.documentoItemKit[I.documento.id].descricaoItem,tamanho:"40"},null,8,["imagem","rotulo"])]}),_:2},1024),h(fe,{class:"q-px-none"},{default:C(()=>[h(Re,null,{default:C(()=>[K(le(a.documentoItemKit[I.documento.id].descricaoItem),1)]),_:2},1024),h(Re,{caption:""},{default:C(()=>{var P;return[K(le((P=a.item[a.documentoItemKit[I.documento.id].idItem])==null?void 0:P.marca),1)]}),_:2},1024)]),_:2},1024),a.margem[I.documento.id]&&a.permissaoMargem?(B(),oe(fe,{key:0,avatar:""},{default:C(()=>[a.margem[I.documento.id].limite?(B(),oe(s,{key:0,cor:"negative",denso:"",escuro:""},{default:C(()=>{var P;return[K(" Kit "+le((P=a.item[a.documentoItemKit[I.documento.id].idItem])==null?void 0:P.referencia)+" ",1),h(Ft,null,{default:C(()=>[K("\xCDndice "+le(e.$filters.numero(a.margem[I.documento.id].valor,2))+"%",1)]),_:2},1024)]}),_:2},1024)):a.margem[I.documento.id].alerta?(B(),oe(s,{key:1,cor:"warning",denso:""},{default:C(()=>{var P;return[K(" Kit "+le((P=a.item[a.documentoItemKit[I.documento.id].idItem])==null?void 0:P.referencia)+" ",1),h(Ft,null,{default:C(()=>[K("\xCDndice "+le(e.$filters.numero(a.margem[I.documento.id].valor,2))+"%",1)]),_:2},1024)]}),_:2},1024)):(B(),oe(s,{key:2,denso:""},{default:C(()=>{var P;return[K(" Kit "+le((P=a.item[a.documentoItemKit[I.documento.id].idItem])==null?void 0:P.referencia)+" ",1),h(Ft,null,{default:C(()=>[K("\xCDndice "+le(e.$filters.numero(a.margem[I.documento.id].valor,2))+"%",1)]),_:2},1024)]}),_:2},1024))]),_:2},1024)):(B(),oe(fe,{key:1,avatar:""},{default:C(()=>[h(s,{denso:""},{default:C(()=>{var P;return[K(" Kit "+le((P=a.item[a.documentoItemKit[I.documento.id].idItem])==null?void 0:P.referencia),1)]}),_:2},1024)]),_:2},1024)),h(fe,{avatar:""},{default:C(()=>[A("div",yFe,[A("div",xFe,[i.ehOrcamento?ie("",!0):(B(),oe(ae,{key:0,color:"primary",dense:"",flat:"",icon:"mdi-eye",round:"",onClick:P=>i.abrirKit(I.documento.id)},{default:C(()=>[h(Ft,null,{default:C(()=>t[70]||(t[70]=[K("Visualizar Kit")])),_:1})]),_:2},1032,["onClick"])),i.ehOrcamento?(B(),oe(ae,{key:1,color:"primary",dense:"",flat:"",icon:"edit",round:"",onClick:P=>i.abrirKit(I.documento.id)},{default:C(()=>[h(Ft,null,{default:C(()=>t[71]||(t[71]=[K("Editar Kit")])),_:1})]),_:2},1032,["onClick"])):ie("",!0)]),A("div",CFe,[i.ehOrcamento?(B(),oe(ae,{key:0,color:"tertiary",dense:"",flat:"",icon:"delete",round:"",onClick:P=>i.removerKit(I.documento.id)},{default:C(()=>[h(Ft,null,{default:C(()=>t[72]||(t[72]=[K("Remover Kit")])),_:1})]),_:2},1032,["onClick"])):ie("",!0)])])]),_:2},1024)]),_:2},1024)]),_:2},1024),A("div",wFe,[h(m,{class:"q-col-gutter-sm"},{default:C(()=>[A("div",{class:"col-4 col-md",warning:!!a.warningLabel[a.documentoItemKit[I.documento.id].id],"warning-label":a.warningLabel[a.documentoItemKit[I.documento.id].id]},[h(m,{class:"items-center"},{default:C(()=>[h(f,{dense:"",align:"left",tipo:"decimal",decimals:"4",zerosDireita:"2",outlined:"","somente-leitura":a.documentoItemKit[I.documento.id].operacaoFator===1,modelValue:a.documentoItemKit[I.documento.id].valorItem,"onUpdate:modelValue":P=>a.documentoItemKit[I.documento.id].valorItem=P,rotulo:"Valor do produto",onBlur:P=>i.carrinhoCalcularTotais(a.documentoItemKit[I.documento.id].id,"valorItem"),aviso:"",avisoRotulo:a.hintValorUnitario[a.documentoItemKit[I.documento.id].id]},null,8,["somente-leitura","modelValue","onUpdate:modelValue","onBlur","avisoRotulo"])]),_:2},1024)],8,EFe),A("div",SFe,[h(m,{class:"items-center"},{default:C(()=>[h(Pe,{name:"mdi-minus",color:"primary"}),h(f,{dense:"",opcoes:{maximumValue:100},tipo:"decimal",decimals:"2",rotulo:"Desconto percentual",modelValue:a.documentoItemKit[I.documento.id].descontoPercentualItem,"onUpdate:modelValue":P=>a.documentoItemKit[I.documento.id].descontoPercentualItem=P,outlined:"","somente-leitura":!i.ehOrcamento||a.documentoItemKit[I.documento.id].operacaoFator===1,suffix:"%",onBlur:P=>i.carrinhoCalcularTotais(a.documentoItemKit[I.documento.id].id,"descontoPercentualItem")},null,8,["modelValue","onUpdate:modelValue","somente-leitura","onBlur"])]),_:2},1024)]),A("div",IFe,[h(f,{dense:"",opcoes:{maximumValue:a.documentoItemKit[I.documento.id].valorItem,minimumValue:0},tipo:"decimal",decimals:"4",zerosDireita:"2",modelValue:a.documentoItemKit[I.documento.id].descontoItem,"onUpdate:modelValue":P=>a.documentoItemKit[I.documento.id].descontoItem=P,outlined:"",rotulo:"Desconto em reais","somente-leitura":!i.ehOrcamento||a.documentoItemKit[I.documento.id].operacaoFator===1,prefix:"R$",onBlur:P=>i.carrinhoCalcularTotais(a.documentoItemKit[I.documento.id].id,"descontoItem")},null,8,["opcoes","modelValue","onUpdate:modelValue","somente-leitura","onBlur"])]),A("div",AFe,[h(m,{class:"items-center"},{default:C(()=>[h(Pe,{name:"mdi-equal",color:"primary",class:"hideonmobile"}),h(f,{dense:"",align:e.$q.screen.lt.sm?"left":"right",outlined:"",opcoes:{maximumValue:a.documentoItemKit[I.documento.id].valorItem,minimumValue:0},rotulo:"Subtotal",tipo:"decimal",decimals:"4",zerosDireita:"2","model-value":i.subtotal2(a.documentoItemKit[I.documento.id].id),"somente-leitura":!i.ehOrcamento||a.documentoItemKit[I.documento.id].operacaoFator===1,onBlur:P=>i.carrinhoCalcularTotais(a.documentoItemKit[I.documento.id].id,"subTotal"),"onUpdate:modelValue":P=>{e.subTotal[a.documentoItemKit[I.documento.id].id]=P}},null,8,["align","opcoes","model-value","somente-leitura","onBlur","onUpdate:modelValue"])]),_:2},1024)]),A("div",TFe,[h(m,{class:"items-center"},{default:C(()=>{var P;return[h(Pe,{name:"mdi-close",color:"primary"}),h(f,{dense:"",max:a.documentoItemKit[I.documento.id].quantidadeDisponivel,min:"0",outlined:"",modelValue:a.documentoItemKit[I.documento.id].quantidade,"onUpdate:modelValue":[F=>a.documentoItemKit[I.documento.id].quantidade=F,F=>i.carrinhoCalcularTotais(a.documentoItemKit[I.documento.id].id,"quantidade")],"somente-leitura":!i.ehOrcamento,tipo:i.ehOrcamento?"quantidade":"decimal",decimals:"4",zerosDireita:"0",aviso:"",avisoRotulo:(P=a.item[a.documentoItemKit[I.documento.id].idItem])==null?void 0:P.embalagem},null,8,["max","modelValue","onUpdate:modelValue","somente-leitura","tipo","avisoRotulo"]),h(Ft,null,{default:C(()=>t[73]||(t[73]=[K("Quantidade")])),_:1})]}),_:2},1024)]),A("div",DFe,[h(m,{class:"items-center"},{default:C(()=>[h(Pe,{name:"mdi-equal",color:"primary",class:"hideonmobile"}),h(f,{dense:"",tipo:"decimal",decimals:"2",rotulo:"Total","somente-leitura":!0,modelValue:a.documentoItemKit[I.documento.id].total,"onUpdate:modelValue":P=>a.documentoItemKit[I.documento.id].total=P,outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)])]),_:2},1024)])],64)):ie("",!0),I.id?(B(),be(Qe,{key:3},[h(At,{class:"full-width"},{default:C(()=>[h(qe,{class:"q-px-none"},{default:C(()=>[h(fe,{avatar:"",class:"col-auto"},{default:C(()=>[h(n,{imagem:(a.item[I.idItem]||{}).imagem,rotulo:I.descricaoItem,tamanho:"40"},null,8,["imagem","rotulo"])]),_:2},1024),h(fe,{class:"q-px-none"},{default:C(()=>[h(Re,null,{default:C(()=>[K(le(I.descricaoItem),1)]),_:2},1024),h(Re,{caption:""},{default:C(()=>[K(le((a.item[I.idItem]||{}).marca),1)]),_:2},1024)]),_:2},1024),a.margem[I.id]&&a.permissaoMargem?(B(),oe(fe,{key:0,avatar:""},{default:C(()=>[a.margem[I.id].limite?(B(),oe(s,{key:0,cor:"negative",denso:"",escuro:""},{default:C(()=>[K(le(I.tipoItem)+" "+le((a.item[I.idItem]||{}).referencia)+" ",1),h(Ft,null,{default:C(()=>[K("\xCDndice "+le(e.$filters.numero(a.margem[I.id].valor,2))+"%",1)]),_:2},1024)]),_:2},1024)):a.margem[I.id].alerta?(B(),oe(s,{key:1,cor:"warning",denso:""},{default:C(()=>[K(le(I.tipoItem)+" "+le((a.item[I.idItem]||{}).referencia)+" ",1),h(Ft,null,{default:C(()=>[K("\xCDndice "+le(e.$filters.numero(a.margem[I.id].valor,2))+"%",1)]),_:2},1024)]),_:2},1024)):(B(),oe(s,{key:2,denso:""},{default:C(()=>[K(le(I.tipoItem)+" "+le((a.item[I.idItem]||{}).referencia)+" ",1),h(Ft,null,{default:C(()=>[K("\xCDndice "+le(e.$filters.numero(a.margem[I.id].valor,2))+"%",1)]),_:2},1024)]),_:2},1024))]),_:2},1024)):(B(),oe(fe,{key:1,avatar:""},{default:C(()=>[h(s,{denso:""},{default:C(()=>[K(le(I.tipoItem)+" "+le((a.item[I.idItem]||{}).referencia),1)]),_:2},1024)]),_:2},1024)),h(fe,{avatar:""},{default:C(()=>[A("div",OFe,[A("div",PFe,[i.ehOrcamento?(B(),oe(ae,{key:0,color:"primary",dense:"",flat:"",icon:"edit",round:"",onClick:P=>i.editarProduto(I)},null,8,["onClick"])):ie("",!0)]),A("div",FFe,[i.ehOrcamento?(B(),oe(ae,{key:0,color:"tertiary",dense:"",flat:"",icon:"delete",round:"",onClick:P=>i.removerItem(I.id)},{default:C(()=>[h(Ft,null,{default:C(()=>t[74]||(t[74]=[K("Remover Item")])),_:1})]),_:2},1032,["onClick"])):ie("",!0)])])]),_:2},1024)]),_:2},1024)]),_:2},1024),A("div",MFe,[h(m,{class:"q-col-gutter-sm"},{default:C(()=>[I.tipoItem!=="Envelope"?(B(),be("div",{key:0,class:"col-4 col-md",warning:!!a.warningLabel[I.id],"warning-label":a.warningLabel[I.id]},[h(m,{class:"items-center"},{default:C(()=>[h(f,{dense:"",align:"left",tipo:"decimal",decimals:"4",zerosDireita:"2",outlined:"","somente-leitura":I.operacaoFator===1,modelValue:I.valorItem,"onUpdate:modelValue":P=>I.valorItem=P,rotulo:"Valor do produto",onBlur:P=>i.carrinhoCalcularTotais(I.id,"valorItem"),aviso:"",avisoRotulo:a.hintValorUnitario[I.id]},null,8,["somente-leitura","modelValue","onUpdate:modelValue","onBlur","avisoRotulo"])]),_:2},1024)],8,NFe)):ie("",!0),I.tipoItem!=="Envelope"?(B(),be(Qe,{key:1},[A("div",kFe,[h(m,{class:"items-center"},{default:C(()=>[h(Pe,{name:"mdi-minus",color:"primary"}),h(f,{dense:"",opcoes:{maximumValue:100},tipo:"decimal",decimals:"2",rotulo:"Desconto percentual",modelValue:I.descontoPercentualItem,"onUpdate:modelValue":P=>I.descontoPercentualItem=P,outlined:"","somente-leitura":!i.ehOrcamento||I.operacaoFator===1,suffix:"%",onBlur:P=>i.carrinhoCalcularTotais(I.id,"descontoPercentualItem")},null,8,["modelValue","onUpdate:modelValue","somente-leitura","onBlur"])]),_:2},1024)]),A("div",RFe,[h(f,{dense:"",opcoes:{maximumValue:I.valorItem,minimumValue:0},tipo:"decimal",decimals:"4",zerosDireita:"2",modelValue:I.descontoItem,"onUpdate:modelValue":P=>I.descontoItem=P,outlined:"",rotulo:"Desconto em reais","somente-leitura":!i.ehOrcamento||I.operacaoFator===1,prefix:"R$",onBlur:P=>i.carrinhoCalcularTotais(I.id,"descontoItem")},null,8,["opcoes","modelValue","onUpdate:modelValue","somente-leitura","onBlur"])])],64)):ie("",!0),I.tipoItem!=="Envelope"?(B(),be("div",VFe,[h(m,{class:"items-center"},{default:C(()=>[h(Pe,{name:"mdi-equal",color:"primary",class:"hideonmobile"}),h(f,{dense:"",align:e.$q.screen.lt.sm?"left":"right",outlined:"",opcoes:{maximumValue:I.valorItem,minimumValue:0},rotulo:"Subtotal",tipo:"decimal",decimals:"4",zerosDireita:"2","model-value":i.subtotal2(I.id),"somente-leitura":!i.ehOrcamento||I.operacaoFator===1,onBlur:P=>i.carrinhoCalcularTotais(I.id,"subTotal"),"onUpdate:modelValue":P=>{e.subTotal[I.id]=P}},null,8,["align","opcoes","model-value","somente-leitura","onBlur","onUpdate:modelValue"])]),_:2},1024)])):ie("",!0),I.tipoItem!=="Envelope"?(B(),be("div",BFe,[h(m,{class:"items-center"},{default:C(()=>[h(Pe,{name:"mdi-close",color:"primary"}),h(f,{dense:"",max:I.quantidadeDisponivel,min:"0",outlined:"",modelValue:I.quantidade,"onUpdate:modelValue":[P=>I.quantidade=P,P=>i.carrinhoCalcularTotais(I.id,"quantidade")],"somente-leitura":!i.ehOrcamento,tipo:i.ehOrcamento?"quantidade":"decimal",decimals:"4",zerosDireita:"0",aviso:"",avisoRotulo:(a.item[I.idItem]||{}).embalagem},null,8,["max","modelValue","onUpdate:modelValue","somente-leitura","tipo","avisoRotulo"]),h(Ft,null,{default:C(()=>t[75]||(t[75]=[K("Quantidade")])),_:1})]),_:2},1024)])):ie("",!0),A("div",qFe,[h(m,{class:"items-center"},{default:C(()=>[h(Pe,{name:"mdi-equal",color:"primary",class:"hideonmobile"}),h(f,{dense:"",tipo:"decimal",decimals:"2",rotulo:"Total","somente-leitura":!0,modelValue:I.total,"onUpdate:modelValue":P=>I.total=P,outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)])]),_:2},1024)])],64)):ie("",!0)]))),128)),A("div",LFe,[(B(!0),be(Qe,null,qt(a.envelopes,I=>(B(),be("div",{class:"items-carrinho items-center row q-py-sm",key:I.id},[h(At,{class:"full-width"},{default:C(()=>[h(qe,{class:"q-px-none"},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(n,{imagem:(a.contatos[I.idContato]||{}).imagem,rotulo:I.tipo,tamanho:"40"},null,8,["imagem","rotulo"])]),_:2},1024),h(fe,null,{default:C(()=>[h(Re,{class:"text-body1"},{default:C(()=>[K(le(i.descricaoEnvelope(I.id)),1)]),_:2},1024),h(Re,{caption:""},{default:C(()=>[K(le(I.descricaoContato),1)]),_:2},1024)]),_:2},1024),h(fe,{avatar:""},{default:C(()=>[a.margem[I.id]&&a.permissaoMargem?(B(),be(Qe,{key:0},[a.margem[I.id].limite?(B(),oe(s,{key:0,cor:"negative",denso:"",escuro:""},{default:C(()=>[K(le(I.tipo)+" ",1),h(Ft,null,{default:C(()=>[K("\xCDndice "+le(e.$filters.numero(a.margem[I.id].valor,2))+"%",1)]),_:2},1024)]),_:2},1024)):a.margem[I.id].alerta?(B(),oe(s,{key:1,cor:"warning",denso:""},{default:C(()=>[K(le(I.tipo)+" ",1),h(Ft,null,{default:C(()=>[K("\xCDndice "+le(e.$filters.numero(a.margem[I.id].valor,2))+"%",1)]),_:2},1024)]),_:2},1024)):(B(),oe(s,{key:2,denso:""},{default:C(()=>[K(le(I.tipo)+" ",1),h(Ft,null,{default:C(()=>[K("\xCDndice "+le(e.$filters.numero(a.margem[I.id].valor,2))+"%",1)]),_:2},1024)]),_:2},1024))],64)):(B(),oe(s,{key:1,denso:""},{default:C(()=>[K(le(I.tipo),1)]),_:2},1024))]),_:2},1024),h(fe,{avatar:""},{default:C(()=>[A("div",$Fe,[A("div",UFe,[i.ehOrcamento?(B(),oe(ae,{key:0,color:"primary",dense:"",flat:"",icon:"edit",round:"",onClick:N=>i.abrirModalEnvelope(I.id)},{default:C(()=>[h(Ft,null,{default:C(()=>t[76]||(t[76]=[K("Editar Envelope")])),_:1})]),_:2},1032,["onClick"])):ie("",!0)]),A("div",zFe,[i.ehOrcamento?ie("",!0):(B(),oe(ae,{key:0,color:"primary",dense:"",flat:"",icon:"open_in_browser",round:"",onClick:N=>i.abrirModalEnvelope(I.id)},null,8,["onClick"])),i.ehOrcamento?(B(),oe(ae,{key:1,color:"tertiary",dense:"",flat:"",icon:"delete",round:"",onClick:N=>i.removerEnvelope(I.id)},{default:C(()=>[h(Ft,null,{default:C(()=>t[77]||(t[77]=[K("Remover Envelope")])),_:1})]),_:2},1032,["onClick"])):ie("",!0)])])]),_:2},1024)]),_:2},1024)]),_:2},1024),A("div",HFe,[h(m,{class:"q-col-gutter-sm"},{default:C(()=>[h(f,{dense:"",tipo:"decimal",decimals:"2",modelValue:I.totalDocumento,"onUpdate:modelValue":N=>I.totalDocumento=N,outlined:"",rotulo:"Total","somente-leitura":!0},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)])]))),128))]),a.produtos.length||Object.keys(a.envelopes).length?(B(),be("div",jFe,[A("div",GFe,[A("div",WFe,[t[78]||(t[78]=A("div",{class:"col-3"},"Subtotal",-1)),A("strong",QFe,le(e.$filters.numero(a.venda.subTotal,2)),1)]),A("div",XFe,[t[79]||(t[79]=A("div",{class:"col-3"},"Desconto",-1)),A("div",KFe,[h(f,{"somente-leitura":!i.ehOrcamento,opcoes:{maximumValue:100},tipo:"decimal",decimals:"2",modelValue:a.venda.totalPercentualDesconto,"onUpdate:modelValue":[t[13]||(t[13]=I=>a.venda.totalPercentualDesconto=I),t[14]||(t[14]=I=>i.calcularTotais("totalPercentualDesconto"))],suffix:"%",error:a.erroCalculo},null,8,["somente-leitura","modelValue","error"])]),A("div",YFe,[h(f,{"somente-leitura":!i.ehOrcamento,opcoes:{maximumValue:a.venda.subTotal,minimumValue:0},tipo:"decimal",decimals:"2",modelValue:a.venda.totalDesconto,"onUpdate:modelValue":[t[15]||(t[15]=I=>a.venda.totalDesconto=I),t[16]||(t[16]=I=>i.calcularTotais("totalDesconto"))],error:a.erroCalculo},null,8,["somente-leitura","opcoes","modelValue","error"])])]),A("div",JFe,[t[80]||(t[80]=A("div",{class:"col-3"},"Frete",-1)),A("div",ZFe,[h(Ri,{class:"q-mr-md",label:"CIF",val:"CIF",modelValue:a.venda.tipoFrete,"onUpdate:modelValue":[t[17]||(t[17]=I=>a.venda.tipoFrete=I),i.calcularTotais],disable:!i.ehOrcamento,dense:""},null,8,["modelValue","disable","onUpdate:modelValue"]),h(Ri,{label:"FOB",val:"FOB",modelValue:a.venda.tipoFrete,"onUpdate:modelValue":[t[18]||(t[18]=I=>a.venda.tipoFrete=I),i.calcularTotais],disable:!i.ehOrcamento,dense:""},null,8,["modelValue","disable","onUpdate:modelValue"])]),A("div",e5e,[h(f,{opcoes:{maximumValue:a.venda.subTotal,minimumValue:0},tipo:"decimal",decimals:"2","somente-leitura":!i.ehOrcamento,modelValue:a.venda.valorFrete,"onUpdate:modelValue":[t[19]||(t[19]=I=>a.venda.valorFrete=I),i.calcularTotais]},null,8,["opcoes","somente-leitura","modelValue","onUpdate:modelValue"])])]),A("div",t5e,[t[81]||(t[81]=A("div",{class:"col-4 text-weight-bold"},"Total",-1)),A("strong",o5e,le(e.$filters.numero(a.venda.totalDocumento-(a.calcularTributacao?(a.imposto.valorIpi||0)+(a.imposto.valorIcmsSt||0)+(a.imposto.valorDifal||0):0),2)),1)]),a.imposto.valorIpi||a.imposto.valorIcmsSt||a.imposto.valorDifal?(B(),be("div",a5e,[a.imposto.valorIpi?(B(),be("div",r5e,[t[82]||(t[82]=A("div",{class:"col-3"}," IPI ",-1)),A("div",{class:Li(["col text-right",{"text-strike":!a.calcularTributacao}])},le(e.$filters.numero(a.imposto.valorIpi,2)),3)])):ie("",!0),a.imposto.valorIcmsSt?(B(),be("div",i5e,[t[83]||(t[83]=A("div",{class:"col-3"}," ICMS/ST ",-1)),A("div",{class:Li(["col text-right",{"text-strike":!a.calcularTributacao}])},le(e.$filters.numero(a.imposto.valorIcmsSt,2)),3)])):ie("",!0),a.imposto.valorDifal?(B(),be("div",n5e,[t[84]||(t[84]=A("div",{class:"col-3"}," DIFAL ",-1)),A("div",{class:Li(["col text-right",{"text-strike":!a.calcularTributacao}])},le(e.$filters.numero(a.imposto.valorDifal,2)),3)])):ie("",!0),A("div",s5e,[A("div",l5e,[t[85]||(t[85]=K(" Total c/ Impostos ")),h(ZI,{disable:!i.ehOrcamento,modelValue:a.venda.calcularTributacao,"onUpdate:modelValue":[t[20]||(t[20]=I=>a.venda.calcularTributacao=I),i.calcularTotais],"checked-icon":"check",color:"green","unchecked-icon":"clear"},null,8,["disable","modelValue","onUpdate:modelValue"])]),A("strong",c5e,le(e.$filters.numero(a.venda.totalDocumento,2)),1)])])):ie("",!0),a.pesoTotal?(B(),be("div",u5e,[t[86]||(t[86]=A("div",{class:"col-4"},"Peso Total",-1)),A("span",d5e,le(a.pesoTotal),1)])):ie("",!0),a.pesoBrutoTotal?(B(),be("div",f5e,[t[87]||(t[87]=A("div",{class:"col-4"},"Peso Bruto Total",-1)),A("span",m5e,le(a.pesoBrutoTotal),1)])):ie("",!0),a.metroCubicoTotal?(B(),be("div",p5e,[t[88]||(t[88]=A("div",{class:"col-4"},"Metro C\xFAbico Total",-1)),A("span",h5e,le(a.metroCubicoTotal),1)])):ie("",!0)])])):ie("",!0)])):(B(),be("div",nFe,t[64]||(t[64]=[A("p",null,"Ainda n\xE3o h\xE1 itens adicionados.",-1),A("p",{class:"text-caption"},"Para adicionar, utilize os bot\xF5es acima ou insira o c\xF3digo de barras.",-1)])))]),A("div",v5e,[h(p,{documento:a.venda,onMudou:i.faturamentoAtualizar,ref:"faturamento"},null,8,["documento","onMudou"])]),a.venda.idContato&&a.sistemaPai!=="optisoul"?(B(),be("div",g5e,[h(v,{idContatoCliente:a.venda.idContato,ref:"transporte"},null,8,["idContatoCliente"])])):ie("",!0),A("div",_5e,[h(Je,{class:"q-pa-none"},{default:C(()=>[h(Pe,{name:"attach_file",size:"24px"}),h(lt,null,{default:C(()=>t[89]||(t[89]=[K("Arquivos")])),_:1})]),_:1}),h(g,{id:a.venda.id,arquivos:a.arquivo,edicao:o.enableChanges,cartao:"",redimensionar:{crop:!0,width:1200,height:1200},tipo:"vendaArquivo"},null,8,["id","arquivos","edicao"])]),A("div",b5e,[Object.keys(a.envelopes).length||a.produtos.length?(B(),oe(Je,{key:0,class:"q-pa-none"},{default:C(()=>[h(Pe,{name:"description",size:"24px"}),h(lt,null,{default:C(()=>t[90]||(t[90]=[K("Observa\xE7\xF5es")])),_:1})]),_:1})):ie("",!0),h(m,{class:"q-col-gutter-md"},{default:C(()=>[A("div",y5e,[h(f,{modelValue:a.venda.observacao,"onUpdate:modelValue":t[21]||(t[21]=I=>a.venda.observacao=I),tipo:"textoArea",rotulo:"Observa\xE7\xE3o","somente-leitura":!i.ehOrcamento},null,8,["modelValue","somente-leitura"])]),A("div",x5e,[h(f,{modelValue:a.venda.observacaoInterna,"onUpdate:modelValue":t[22]||(t[22]=I=>a.venda.observacaoInterna=I),tipo:"textoArea",rotulo:"Observa\xE7\xE3o interna","somente-leitura":!i.ehOrcamento},null,8,["modelValue","somente-leitura"])]),A("div",C5e,[h(f,{modelValue:a.venda.numeroOrdemCompra,"onUpdate:modelValue":t[23]||(t[23]=I=>a.venda.numeroOrdemCompra=I),autogrow:"",rotulo:"Ordem de Compra","somente-leitura":!i.ehOrcamento,maxlength:"15",onKeydown:i.cortarEspacos},null,8,["modelValue","somente-leitura","onKeydown"])])]),_:1})]),h(x,{onSalvarEnvelope:i.salvarEnvelope,enableChanges:o.enableChanges,ref:"modalEnvelope"},null,8,["onSalvarEnvelope","enableChanges"]),h(b,{onSalvar:i.salvarCustom,ref:"modalCustom"},null,8,["onSalvar"]),h(_,{onSalvar:i.salvarOS,ref:"modalOS"},null,8,["onSalvar"]),h(w,{model:a.mostrarTitulosPendentesEmAtraso},null,8,["model"]),h(S,{ref:"modalEditarProduto",onSalvar:i.salvarEdicaoProduto},null,8,["onSalvar"]),h(D,{ref:"promptItemTabelaPreco",onSelecionar:i.selecionarItemTabelaPreco},null,8,["onSelecionar"]),h(M,{ref:"promptDocumentoOperacao",onSelecionar:i.selecionarDocumentoOperacaoViaPrompt},null,8,["onSelecionar"]),a.kitModel?(B(),oe(O,{key:1,model:a.kitModel,onDestroy:t[24]||(t[24]=()=>{a.kitModel=null}),onSalvar:i.salvarKit},null,8,["model","onSalvar"])):ie("",!0),h(Ht,{modelValue:a.modalDescontoMaximo.visivel,"onUpdate:modelValue":t[28]||(t[28]=I=>a.modalDescontoMaximo.visivel=I),minimized:"",onHide:t[29]||(t[29]=I=>a.modalDescontoMaximo.reject())},{default:C(()=>[h(Mt,{class:"q-dialog-plugin"},{default:C(()=>[h(Je,{class:"bg-primary text-white"},{default:C(()=>[h(lt,null,{default:C(()=>[K(le(a.modalDescontoMaximo.titulo),1)]),_:1}),Ee(h(ae,{dense:"",flat:"",icon:"close",round:""},null,512),[[st]])]),_:1}),A("div",w5e,[A("form",{class:"q-pa-sm",onSubmit:t[27]||(t[27]=rt(I=>a.modalDescontoMaximo.resolve(),["prevent"]))},[h(At,{"no-border":"",dense:""},{default:C(()=>[(B(!0),be(Qe,null,qt(a.modalDescontoMaximo.itens,(I,N)=>(B(),be(Qe,{key:N+I.descricao},[N?(B(),oe(No,{key:0})):ie("",!0),h(qe,null,{default:C(()=>[h(Re,null,{default:C(()=>[h(Re,{header:""},{default:C(()=>[K(le(I.descricao)+" ",1),h(Ft,null,{default:C(()=>[K(" M\xE1ximo permitido: "+le(I.maximoDesconto)+"% ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)],64))),128)),a.modalDescontoMaximo.msg?(B(),be(Qe,{key:0},[a.modalDescontoMaximo.itens.length?(B(),oe(No,{key:0})):ie("",!0),h(qe,null,{default:C(()=>[h(Re,null,{default:C(()=>[h(Re,{header:""},{default:C(()=>[K(le(a.modalDescontoMaximo.msg),1)]),_:1})]),_:1})]),_:1})],64)):ie("",!0)]),_:1}),A("div",E5e,[Ee(h(ae,{color:"tertiary",flat:"",label:"Cancelar"},null,512),[[st]]),h(ae,{color:"primary",class:"q-ml-sm no-shadow",label:"Continuar",unelevated:"",onClick:t[25]||(t[25]=I=>a.modalDescontoMaximo.resolve("continuar"))}),a.modalDescontoMaximo.permiteDescontoMaximo?(B(),oe(ae,{key:0,color:"primary",class:"q-ml-sm no-shadow",unelevated:"",label:"Aprovar",onClick:t[26]||(t[26]=I=>a.modalDescontoMaximo.resolve("aprovar"))})):ie("",!0)])],32)])]),_:1})]),_:1},8,["modelValue"]),h(Ht,{modelValue:a.modalItemSemEstoque.visivel,"onUpdate:modelValue":t[32]||(t[32]=I=>a.modalItemSemEstoque.visivel=I),minimized:"",onShow:t[33]||(t[33]=I=>e.$q.loading.hide()),onHide:t[34]||(t[34]=I=>a.modalItemSemEstoque.reject())},{default:C(()=>[h(Mt,{class:"q-dialog-plugin"},{default:C(()=>[h(Je,{class:"bg-primary text-white"},{default:C(()=>[h(lt,null,{default:C(()=>[K(le((a.modalItemSemEstoque.itens||[]).length>1?"Itens":"Item")+" sem estoque ",1)]),_:1}),Ee(h(ae,{dense:"",flat:"",icon:"close",round:""},null,512),[[st]])]),_:1}),A("div",S5e,[A("form",I5e,[h(At,{"no-border":"",dense:""},{default:C(()=>[(B(!0),be(Qe,null,qt(a.modalItemSemEstoque.itens,(I,N)=>(B(),be(Qe,{key:N+I.descricao},[N?(B(),oe(No,{key:0})):ie("",!0),h(qe,null,{default:C(()=>[h(Re,null,{default:C(()=>[h(Re,{header:""},{default:C(()=>[K(le(I.descricao),1)]),_:2},1024),h(Re,{caption:""},{default:C(()=>[K(" Estoque: "+le(I.saldo)+" ",1),I.offline?(B(),be("span",A5e,"(Offline)")):ie("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)],64))),128))]),_:1}),h(At,{"no-border":"",dense:""},{default:C(()=>[(B(!0),be(Qe,null,qt(a.modalItemSemEstoque.opcoes,(I,N)=>(B(),oe(qe,{key:N},{default:C(()=>[h(Re,null,{default:C(()=>[h(Ri,{modelValue:a.modalItemSemEstoque.opcao,"onUpdate:modelValue":t[30]||(t[30]=P=>a.modalItemSemEstoque.opcao=P),class:"q-mr-sm",label:I.label,val:I.value},null,8,["modelValue","label","val"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),A("div",T5e,[Ee(h(ae,{color:"tertiary",flat:"",label:"Cancelar"},null,512),[[st]]),h(ae,{color:"primary",class:"q-ml-sm no-shadow",label:"Finalizar",unelevated:"",onClick:t[31]||(t[31]=I=>a.modalItemSemEstoque.resolve("finalizar"))})])])])]),_:1})]),_:1},8,["modelValue"]),h(Ht,{modelValue:a.modalCreditoDisponivel.visivel,"onUpdate:modelValue":t[37]||(t[37]=I=>a.modalCreditoDisponivel.visivel=I),minimized:"",onHide:t[38]||(t[38]=I=>a.modalCreditoDisponivel.reject())},{default:C(()=>[h(Mt,{class:"q-dialog-plugin"},{default:C(()=>[h(Je,{class:"bg-primary text-white"},{default:C(()=>[h(lt,null,{default:C(()=>[K(le(a.modalCreditoDisponivel.title),1)]),_:1}),Ee(h(ae,{dense:"",flat:"",icon:"close",round:""},null,512),[[st]])]),_:1}),A("div",D5e,[A("form",O5e,[h(At,{"no-border":"",dense:""},{default:C(()=>[h(qe,null,{default:C(()=>[h(Re,null,{default:C(()=>[h(Re,{header:""},{default:C(()=>[K(le(a.modalCreditoDisponivel.body),1)]),_:1})]),_:1})]),_:1})]),_:1}),A("div",P5e,[Ee(h(ae,{color:"tertiary",flat:"",label:"Cancelar"},null,512),[[st]]),h(ae,{color:"primary",class:"q-ml-sm no-shadow",label:"Continuar",unelevated:"",onClick:t[35]||(t[35]=I=>a.modalCreditoDisponivel.resolve("continuar"))}),a.modalCreditoDisponivel.permiteFinalizar?(B(),oe(ae,{key:0,color:"primary",class:"q-ml-sm no-shadow",unelevated:"",label:"Aprovar",onClick:t[36]||(t[36]=I=>a.modalCreditoDisponivel.resolve("aprovar"))})):ie("",!0)])])])]),_:1})]),_:1},8,["modelValue"]),h(Ht,{modelValue:a.modalProdutoControlado.visivel,"onUpdate:modelValue":t[40]||(t[40]=I=>a.modalProdutoControlado.visivel=I),minimized:"",onHide:t[41]||(t[41]=I=>a.modalProdutoControlado.reject())},{default:C(()=>[h(Mt,{class:"q-dialog-plugin"},{default:C(()=>[h(Je,{class:"bg-primary text-white"},{default:C(()=>[h(lt,null,{default:C(()=>t[91]||(t[91]=[K("Produto(s) Controlado(s) - Quantidade Excedida")])),_:1}),Ee(h(ae,{dense:"",flat:"",icon:"close",round:""},null,512),[[st]])]),_:1}),A("div",F5e,[A("form",{class:"q-pa-sm",onSubmit:t[39]||(t[39]=rt(I=>a.modalProdutoControlado.resolve(),["prevent"]))},[h(At,{"no-border":"",dense:""},{default:C(()=>[(B(!0),be(Qe,null,qt(a.modalProdutoControlado.itens,(I,N)=>(B(),be(Qe,{key:N+I.descricao},[N?(B(),oe(No,{key:0})):ie("",!0),h(qe,null,{default:C(()=>[h(Re,null,{default:C(()=>[h(Re,{header:""},{default:C(()=>[K(le(I.descricao)+" ",1),h(Ft,null,{default:C(()=>[K(le(I.tooltip),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)],64))),128))]),_:1}),A("div",M5e,[Ee(h(ae,{color:"tertiary",flat:"",label:"Cancelar"},null,512),[[st]]),a.modalProdutoControlado.permiteQuantidadeExcedida?(B(),oe(ae,{key:0,color:"primary",class:"q-ml-sm no-shadow",unelevated:"",label:"Continuar",type:"submit"})):ie("",!0)])],32)])]),_:1})]),_:1},8,["modelValue"]),h(T,{modelValue:a.modalItem,"onUpdate:modelValue":t[42]||(t[42]=I=>a.modalItem=I),onSelecionarItens:i.selecionarItens,habilitarQuantidade:!0,ref:"promptItem",filtro:{ativo:!0,bloquearVenda:!1,idTabelaPreco:a.venda.idItemTabelaPreco,idEmpresa:a.venda.idEmpresa,idContato:a.venda.idContato}},null,8,["modelValue","onSelecionarItens","filtro"]),h(DR,{color:"primary",size:"50px",visible:a.exibirCarregando},null,8,["visible"])])}var k5e=St(oFe,[["render",N5e]]);const R5e={components:{CodigoBarras:Jm,Venda:k5e},data(){return{titulo:"",venda:{},vendaVisivel:!1,visivel:!1,id:"",idContato:"",itemFiltros:{},visibilidade:{botao:{cancelar:!1,finalizar:!1,naoAprovado:!1,salvar:!1}}}},emits:["executar","atualizarAtendimentoVenda"],methods:{configurarFiltroCodigoBarras(e){e||(e=this.$refs.venda.venda),this.itemFiltros={ativo:!0,bloquearVenda:!1,idEmpresa:e.idEmpresa,idContato:e.idContato,idItemTabelaPreco:e.idItemTabelaPreco}},voltar(e){e.stopPropagation(),$q.dialog({message:"Deseja descartar as modifica\xE7\xF5es?",title:"Aten\xE7\xE3o!",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Descartar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{this.fechar()})},async atualizar(){let e,t;e="Venda",t={id:$utils.uuid(),idContato:this.idContato,tipo:"Venda",status:"Or\xE7amento"},this.id&&(t=await $db.hibrido.le({table:"documento",id:this.id}),$utils.verificarErro(!(t!=null&&t.id),"Erro ao obter dados"),this.configurarFiltroCodigoBarras(t)),e+=" - "+t.status,this.venda=t,this.titulo=e,this.visibilidade.botao.finalizar=!1,this.visibilidade.botao.naoAprovado=!1,this.visibilidade.botao.salvar=!1,["Aguardando Libera\xE7\xE3o","Aguardando Estoque","Aguardando Financeiro","Or\xE7amento"].includes(t.status)&&(this.visibilidade.botao.finalizar=!0,this.visibilidade.botao.naoAprovado=!0,this.visibilidade.botao.salvar=!0),await $db.contato.exibirCondutaObservacao(t.idContato,$q.notify)},async executar(e){switch(e){case"cancelar":await this.$refs.venda.cancelar();break;case"finalizar":if(await this.$refs.venda.finalizar()){let t=await $db.hibrido.le({table:"documento",id:this.venda.id});t.idFatura&&localStorage.setItem("idFatura",t.idFatura)}else return;break;case"reprovar":if(!await this.$refs.venda.reprovarOrcamento())return;break}this.$emit("executar",e),this.fechar()},fechar(){this.visivel=!1},async mostrar(e={}){const t=$utils.logarIni("VendaModal");await $tryLoading(async()=>{this.id=e.id,this.idContato=e.idContato,await this.atualizar(),this.visivel=!0,await this.$nextTick(),this.vendaVisivel=!0}),$utils.logarFim(t,1)},onHide(){this.titulo="",this.venda={},this.vendaVisivel=!1,this.visibilidade={botao:{cancelar:!1,finalizar:!1,naoAprovado:!1,salvar:!1}}},async salvar(){!await this.$refs.venda.salvarVenda()||($utils.emitter.emit("atualizarAtendimentoVenda"),this.$emit("atualizarAtendimentoVenda"),this.fechar())}},props:{continueMesmaTela:{type:Boolean,required:!1,default:!1}}},V5e={class:"layout-padding q-pa-none q-pb-md"},B5e={class:"u-container"},q5e={class:"bg-white"},L5e={class:"u-container"},$5e={class:"u-container"};function U5e(e,t,o,r,a,i){const n=Ve("venda"),s=Ve("CodigoBarras");return B(),oe(Ht,{id:"VendaModal",modelValue:a.visivel,"onUpdate:modelValue":t[5]||(t[5]=l=>a.visivel=l),persistent:"",maximized:"",onHide:i.onHide,onKeyup:jr(i.voltar,["esc"])},{default:C(()=>[h(To,{view:"hHh LpR fFf",container:"",class:"bg-light"},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,null,{default:C(()=>[h(ae,{onClick:i.voltar,icon:"arrow_back",flat:"",round:"",dense:""},null,8,["onClick"]),h(lt,null,{default:C(()=>[K(le(a.titulo),1)]),_:1}),a.visibilidade.botao.salvar?(B(),oe(ae,{key:0,onClick:i.salvar,label:"Salvar",color:"white","text-color":"primary",class:"q-ml-sm",unelevated:""},null,8,["onClick"])):ie("",!0)]),_:1})]),_:1}),h(Jo,null,{default:C(()=>[A("div",V5e,[A("div",B5e,[a.venda.id?(B(),oe(n,{key:0,ref:"venda",onExecutar:i.executar,onFechar:i.fechar,onAdicionar:i.configurarFiltroCodigoBarras,id:a.venda.id,idContato:a.venda.idContato,enableChanges:a.visibilidade.botao.salvar,continueMesmaTela:o.continueMesmaTela},null,8,["onExecutar","onFechar","onAdicionar","id","idContato","enableChanges","continueMesmaTela"])):ie("",!0)])])]),_:1}),h(Ui,{class:"bg-light",bordered:""},{default:C(()=>[A("div",q5e,[A("div",L5e,[a.vendaVisivel?(B(),oe(Je,{key:0,class:"bg-white"},{default:C(()=>[h(lt,null,{default:C(()=>[e.$refs.venda.ehOrcamento?(B(),oe(s,{key:0,itemFiltros:a.itemFiltros,documentoItens:e.$refs.venda.carrinho,onAdicionar:e.$refs.venda.adicionarItem,onAtualizar:e.$refs.venda.selecionarItens},null,8,["itemFiltros","documentoItens","onAdicionar","onAtualizar"])):ie("",!0)]),_:1}),e.$refs.venda.ehOrcamento?(B(),oe(ae,{key:0,class:"q-px-sm",color:"primary",icon:"add",label:"Produto",flat:"",onClick:e.$refs.venda.abrirModalItem},null,8,["onClick"])):ie("",!0),e.$refs.venda.ehOrcamento&&e.$refs.venda.permissaoOSs?(B(),oe(ae,{key:1,class:"q-px-sm",color:"primary",flat:"",icon:"add",label:"OS",onClick:t[0]||(t[0]=l=>e.$refs.venda.abrirModalOS())})):ie("",!0),e.$refs.venda.ehOrcamento&&e.$refs.venda.permissaoCustoms?(B(),oe(ae,{key:2,class:"q-px-sm",color:"primary",icon:"add",label:"Custom",flat:"",onClick:t[1]||(t[1]=l=>e.$refs.venda.abrirModalCustom())})):ie("",!0),e.$refs.venda.ehOrcamento&&e.$refs.venda.permissaoKits?(B(),oe(ae,{key:3,class:"q-px-sm",color:"primary",icon:"add",label:"Kit",flat:"",onClick:t[2]||(t[2]=l=>e.$refs.venda.abrirKit())})):ie("",!0)]),_:1})):ie("",!0)])]),A("div",$5e,[h(Je,{class:"bg-light"},{default:C(()=>[h(lt,{class:"text-right"},{default:C(()=>[a.visibilidade.botao.naoAprovado?(B(),oe(ae,{key:0,class:"q-mx-md",color:"negative",flat:"",label:"N\xE3o aprovado",onClick:t[3]||(t[3]=l=>i.executar("reprovar"))})):ie("",!0),a.visibilidade.botao.finalizar?(B(),oe(ae,{key:1,color:"primary",label:"Finalizar",unelevated:"",onClick:t[4]||(t[4]=l=>i.executar("finalizar"))})):ie("",!0)]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide","onKeyup"])}var z5e=St(R5e,[["render",U5e]]);const H5e={components:{Badge:Lh},computed:{dadosEncontrados(){return this.dados.length}},data(){return{carregando:!1,dados:[],dado:{},filtro:{},placeholder:"Buscar",termo:"",visivel:!1}},emits:["selecionar"],methods:{async filtrar(){if(!this.termo){this.dados=[];return}let e;try{let t=[],o,r,a,i=!1;if(i=!$db.usuario.logado.administrador&&await $db.permissao.objetoClienteSistema("Diretiva_Contatos_AcessaTodosContatos")&&!await $db.permissao.objeto("Diretiva_Contatos_AcessaTodosContatos"),i){let n,s;n=await $db.configuracoes.le({nome:"venda.codigoconsumidor"}),s=Number(n[0].valor),s&&(r=(await $erp().contato.where({codigoContato:s}).toArray())[0]),$db.usuario.logado.numeroDocumentoNacional&&(a=(await $erp().contato.where({numeroDocumentoNacional:$db.usuario.logado.numeroDocumentoNacional}).toArray())[0])}this.carregando=!0,e=setTimeout(()=>{$q.loading.show({message:"Carregando informa\xE7\xF5es...",boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary"})},300);try{this.termo.length>2&&(o=await $utils.geeksApi({hibrido:{funcao:"741886FF-5D81-4687-8459-6E64258ED716",termoBusca:this.termo}}))}catch(n){$q.notifyError(n.message);return}o=((o||{}).data||{}).hibrido||[];for(const n of o){let s;!n.id||i&&(s=await $erp().contato.get(n.id),!s||!~[a==null?void 0:a.id,r==null?void 0:r.id].indexOf(s.id)&&!~[s.idContatoVendedor,s.idContatoAssistente].indexOf(a==null?void 0:a.id))||t.push(n)}this.dados=t}finally{this.carregando=!1,clearTimeout(e),$q.loading.hide()}},limpar(){this.carregando=!1,this.dados=[],this.dado={},this.filtro={},this.placeholder="Contato, documento, equipamento...",this.termo=""},mostrar(){this.filtrar(),this.visivel=!0},onHide(){this.dado.id&&this.$emit("selecionar",JSON.parse(JSON.stringify(this.dado))),this.limpar()},onShow(){this.$refs.search.focus()},selecionar(e={}){this.dado=e,this.visivel=!1}}},j5e={class:"layout-padding",container:""},G5e={key:0},W5e={class:"col-12"},Q5e={class:"col-12"},X5e={key:1,class:"bg-light q-pa-lg q-mt-lg round-borders text-black text-center"},K5e={key:0,class:"text-red-6"};function Y5e(e,t,o,r,a,i){const n=Ve("badge"),s=Ve("row");return B(),oe(Ht,{modelValue:a.visivel,"onUpdate:modelValue":t[2]||(t[2]=l=>a.visivel=l),maximized:"",onHide:t[3]||(t[3]=l=>i.onHide()),onShow:t[4]||(t[4]=l=>i.onShow())},{default:C(()=>[h(To,{class:"bg-white",container:""},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,null,{default:C(()=>[Ee(h(ae,{icon:"arrow_back",round:"",dense:"",flat:""},null,512),[[st]]),h(lt,null,{default:C(()=>[h(ma,{modelValue:a.termo,"onUpdate:modelValue":[t[0]||(t[0]=l=>a.termo=l),i.filtrar],modelModifiers:{trim:!0},onClear:t[1]||(t[1]=()=>{a.termo=""}),placeholder:a.placeholder,debounce:"1000",color:"none",ref:"search","clear-icon":"close",dark:"",standout:"",filled:"",dense:"",clearable:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:1})]),_:1})]),_:1}),h(Jo,null,{default:C(()=>[A("div",j5e,[i.dadosEncontrados?(B(),be("div",G5e,[h(At,{class:"rounded-borders"},{default:C(()=>[(B(!0),be(Qe,null,qt(a.dados,l=>(B(),be("div",{key:l.id+l.c3,style:{cursor:"pointer"}},[h(qe,{clickable:"",onClick:u=>i.selecionar(l),class:"items-center d-flex q-py-xs"},{default:C(()=>[h(fe,{avatar:"",class:"hideonmobile"},{default:C(()=>[h(n,{cor:"positive",escuro:""},{default:C(()=>[K(le(l.tipo),1)]),_:2},1024)]),_:2},1024),h(fe,{class:"hideonmobile"},{default:C(()=>[h(Re,null,{default:C(()=>[K(le(l.c1),1)]),_:2},1024)]),_:2},1024),h(fe,{class:"hideonmobile"},{default:C(()=>[h(Re,{class:"text-tertiary"},{default:C(()=>[K(le(l.c2),1)]),_:2},1024)]),_:2},1024),h(fe,{class:"hideonmobile"},{default:C(()=>[h(Re,{class:"text-tertiary"},{default:C(()=>[K(le(l.c4),1)]),_:2},1024)]),_:2},1024),h(fe,{class:"hideonmobile"},{default:C(()=>[h(Re,{caption:""},{default:C(()=>[(B(!0),be(Qe,null,qt(l.c3.split("%;%").filter(u=>(u||"").trim()&&u.split(":").filter(c=>c.trim()).length>1),u=>(B(),oe(s,{key:u},{default:C(()=>[A("div",W5e,le(u),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),h(fe,{class:"hideondesktop"},{default:C(()=>[h(Re,{caption:""},{default:C(()=>[h(n,{cor:"positive",escuro:""},{default:C(()=>[K(le(l.tipo),1)]),_:2},1024)]),_:2},1024),h(Re,{class:"text-tertiary"},{default:C(()=>[K(le(l.c1),1)]),_:2},1024),h(Re,{class:"text-tertiary"},{default:C(()=>[K(le(l.c2),1)]),_:2},1024),h(Re,{class:"text-tertiary"},{default:C(()=>[K(le(l.c4),1)]),_:2},1024),h(Re,{class:"q-my-xs",caption:""},{default:C(()=>[(B(!0),be(Qe,null,qt(l.c3.split("%;%").filter(u=>(u||"").trim()&&u.split(":").filter(c=>c.trim()).length>1),u=>(B(),oe(s,{key:u},{default:C(()=>[A("div",Q5e,le(u),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]),h(No)]))),128))]),_:1})])):ie("",!0),!a.carregando&&!i.dadosEncontrados?(B(),be("div",X5e,[t[5]||(t[5]=K(" Nenhum resultado encontrado ")),a.termo.length>0&&!(a.termo.length>2)?(B(),be("div",K5e," Para melhor resultado digite pelo menos 3 caracteres ")):ie("",!0)])):ie("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var J5e=St(H5e,[["render",Y5e]]);const Z5e={components:{},data(){return{form:{senhaAtual:"",senhaNova:"",senhaNovaRepetida:""},validationForm:{}}},methods:{async alterarSenha(){try{let e=!1;if(await this.validar().catch(o=>{e=!!o}),e)return;this.$q.loading.show();const t=await this.$utils.geeksApi({alterarSenha:{funcao:"6E4B10C1-548D-49F2-AEEA-64F53151D349",senhaAtual:this.form.senhaAtual,senhaNova:this.form.senhaNova}});this.$q.notify({type:"positive",message:t.data.alterarSenha.mensagem}),this.$refs.dialog.hide()}catch(e){this.$q.notifyError(e.message,e)}finally{this.$q.loading.hide()}},limpar(){this.form={senhaAtual:"",senhaNova:"",senhaNovaRepetida:""},this.validationForm={}},async validar(){const e=[n=>n.length||"Informe a senha atual"],t=[n=>n.length||"Informe a nova senha"],o=[n=>n.length||"Repetir a nova senha"];if(this.form.senhaAtual.length){let n=!0,s="N\xE3o foi poss\xEDvel verificar a validade da senha";await $utils.geeksApi({login:{funcao:"0F8E5067-A8B2-4C82-9275-25B114B9ED70",cpf:$db.usuario.logado.numeroDocumentoNacional,senha:this.form.senhaAtual}}).catch(l=>{n=!1,l.message==="Senha inv\xE1lida!"&&(s=l.message)}),e.push(()=>n||s),n&&this.form.senhaAtual===this.form.senhaNova&&t.push(()=>"A nova senha deve ser diferente da senha atual")}this.form.senhaNova.length&&this.form.senhaNovaRepetida.length&&this.form.senhaNova!==this.form.senhaNovaRepetida&&o.push(()=>"Novas senhas n\xE3o coincidem"),this.validationForm.senhaAtual=e,this.validationForm.senhaNova=t,this.validationForm.senhaNovaRepetida=o,this.$refs.senhaAtual.validate(),this.$refs.senhaNova.validate(),this.$refs.senhaNovaRepetida.validate(),await this.$nextTick();const r=this.$refs.senhaAtual.validate(),a=this.$refs.senhaNova.validate(),i=this.$refs.senhaNovaRepetida.validate();if(!(r&&a&&i))throw new Error("Erro no preenchimento dos campos")}}};function eMe(e,t,o,r,a,i){return B(),oe(Ht,{ref:"dialog",onHide:i.limpar},{default:C(()=>[h(Mt,{class:"card"},{default:C(()=>[h(Ra,{class:"text-h6"},{default:C(()=>t[3]||(t[3]=[K(" Alterar Senha ")])),_:1}),h(cl,{onSubmit:i.alterarSenha},{default:C(()=>[h(Ra,{class:"q-pt-none q-mr-md q-col-gutter-md"},{default:C(()=>[h(ma,{dense:"",modelValue:a.form.senhaAtual,"onUpdate:modelValue":t[0]||(t[0]=n=>a.form.senhaAtual=n),modelModifiers:{trim:!0},label:"Senha atual",type:"password",autofocus:"","lazy-rules":"",ref:"senhaAtual",rules:a.validationForm.senhaAtual},null,8,["modelValue","rules"]),h(ma,{dense:"",modelValue:a.form.senhaNova,"onUpdate:modelValue":t[1]||(t[1]=n=>a.form.senhaNova=n),modelModifiers:{trim:!0},label:"Senha nova",type:"password","lazy-rules":"",ref:"senhaNova",rules:a.validationForm.senhaNova},null,8,["modelValue","rules"]),h(ma,{dense:"",modelValue:a.form.senhaNovaRepetida,"onUpdate:modelValue":t[2]||(t[2]=n=>a.form.senhaNovaRepetida=n),modelModifiers:{trim:!0},label:"Confirme a nova senha",type:"password","lazy-rules":"",ref:"senhaNovaRepetida",rules:a.validationForm.senhaNovaRepetida},null,8,["modelValue","rules"])]),_:1}),h(Sb,{class:"text-primary float-right"},{default:C(()=>[Ee(h(ae,{flat:"",label:"Cancelar",color:"tertiary"},null,512),[[st]]),h(ae,{unelevated:"",color:"primary",type:"submit",label:"Alterar"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["onHide"])}var tMe=St(Z5e,[["render",eMe],["__scopeId","data-v-3916ba61"]]);const oMe={components:{Badge:Lh},methods:{copiarUid(){const e=this.$refs.badgeUid;e.type="text";try{e.select(),document.execCommand("copy"),this.$q.notify({message:"UID copiado para a \xE1rea de transfer\xEAncia.",type:"info"})}catch(t){this.$q.notifyError("Erro ao copiar uid",t)}e.type="hidden",window.getSelection().removeAllRanges()}},props:{cor:{required:!1,type:String},numero:{required:!1,type:[Number,String]},id:{required:!1,type:String},dica:{required:!1,type:String},textoCompleto:{required:!1,default:!1,type:Boolean},semHashtag:{required:!1,default:!1,type:Boolean}}},aMe={key:0},rMe={key:0},iMe={key:0},nMe={key:0},sMe=["value"];function lMe(e,t,o,r,a,i){const n=Ve("badge");return B(),oe(n,{onClick:i.copiarUid,cor:o.cor,escuro:"",class:"text-caption g-badgeCopiarUid"},{default:C(()=>{var s,l,u,c;return[o.numero?(B(),be(Qe,{key:0},[o.textoCompleto?(B(),be(Qe,{key:0},[o.semHashtag?ie("",!0):(B(),be("span",aMe,"#")),K(le((s=o.numero||0)==null?void 0:s.toString()),1)],64)):(B(),be(Qe,{key:1},[o.semHashtag?ie("",!0):(B(),be("span",rMe,"#")),K(le((u=(l=o.numero||0)==null?void 0:l.toString())==null?void 0:u.padStart(6,"0")),1)],64))],64)):(B(),be(Qe,{key:1},[o.textoCompleto?(B(),be(Qe,{key:0},[o.semHashtag?ie("",!0):(B(),be("span",iMe,"#")),K(le(o.id||""),1)],64)):(B(),be(Qe,{key:1},[o.semHashtag?ie("",!0):(B(),be("span",nMe,"#")),K(le((c=o.id||"")==null?void 0:c.slice(-6)),1)],64))],64)),ih(e.$slots,"default",{},void 0,!0),A("input",{value:o.id,type:"hidden",ref:"badgeUid"},null,8,sMe),o.dica?(B(),oe(Ft,{key:2,anchor:"bottom middle",self:"center middle"},{default:C(()=>[K(le(o.dica),1)]),_:1})):ie("",!0)]}),_:3},8,["onClick","cor"])}var cMe=St(oMe,[["render",lMe],["__scopeId","data-v-fe201fd0"]]);const uMe={components:{BadgeCopiarUid:cMe},data(){return{cor:"tertiary",botao:"",status:"",telDestino:"11999990000",clienteSistema:{},dbUsuario:et.usuario,conexao:{},conexoes:[],igmblank:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAQAAAAkGDomAAAATklEQVR42u3OMQEAAAgDINc/9Czh4QEJSDuvRVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUPDSAovln7Gzmi7KAAAAAElFTkSuQmCC",imgsrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAQAAAAkGDomAAAATklEQVR42u3OMQEAAAgDINc/9Czh4QEJSDuvRVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUPDSAovln7Gzmi7KAAAAAElFTkSuQmCC",urlapi:"https://whats.b15.com.br/",permissao:!1,socket:{conectado:!1,socket:{}},tabSelecionada:{valor:"Conexao"},tabs:[{icone:"",rotulo:"Conex\xE3o",valor:"Conexao"},{icone:"",rotulo:"Pendentes",valor:"Pendentes"}],pendentes:$api.whatsapp.pendentes}},methods:{async btEnviarTeste_click(){var r;const e=this.telDestino,t="Mensagem de teste!",o=(r=this.conexao)==null?void 0:r.value;this.whatsEnvia({funcao:"enviar mensagem",telDestino:e,mensa:t,banco:o})},async conectar_click(e){e!=null&&e.value?(this.botao==="Conectar"&&this.whatsEnvia({funcao:"conectar",banco:e==null?void 0:e.value}),this.botao==="Desconectar"&&this.whatsEnvia({funcao:"desconectar",banco:e==null?void 0:e.value})):$q.notifyAlert("Selecione uma conex\xE3o!")},whatsInicializar(){const e=this.socket;if(e.conectado)return!0;e.socket=new WebSocket("wss://whats.b15.com.br/websockets"),e.socket.onopen=()=>{var o;e.conectado=!0,this.cor="tertiary",this.status="aguardando status";const t=this.whatsTrataMensagem;e.socket.onmessage=t,this.whatsEnvia({funcao:"status",banco:(o=this.conexao)==null?void 0:o.value}),$g.conexaoWpp=e},e.socket.onclose=()=>{e.conectado=!1,this.whatsSemRede(),setTimeout(()=>{this.whatsInicializar()},5e3)}},whatsSemRede(){this.cor="tertiary",this.status="sem rede",this.imgsrc=this.igmblank,this.botao=""},trocaConexao(){var e;localStorage.setItem("whatsappConexoes",JSON.stringify(this.conexao)),this.cor="tertiary",this.status="aguardando Status",this.imgsrc=this.igmblank,this.botao="",this.whatsEnvia({funcao:"status",banco:(e=this.conexao)==null?void 0:e.value})},whatsTrataMensagem(e){if(e=JSON.parse(e.data),e.funcao==="qr"&&(this.imgsrc=e.qr||this.igmblank),e.funcao==="status"){this.status=e.status||"",["Conectado","Desconectado"].find(o=>o===e.status)&&(this.imgsrc=this.igmblank);let t="Desconectar";e.status==="Conectado"&&(this.cor="positive"),e.status==="Desconectado"&&(t="Conectar",this.cor="tertiary"),this.botao=t}},whatsEnvia(e){this.socket.conectado&&this.socket.socket.send(JSON.stringify(e))},async whatsListaConexoes(){const e=[];e.push({icon:"storage",label:this.clienteSistema.bancoDeDados,value:this.clienteSistema.bancoDeDados,tipo:"base"});const t=await $db.empresa.ler({filtro:{ativo:!0}});for(const r of t)r.numeroDocumentoNacional&&e.push({icon:"business",label:(r==null?void 0:r.sigla)||(r==null?void 0:r.apelido),value:`cnpj${r.numeroDocumentoNacional.replace("/","_")}`,tipo:"empresa"});e.push({avatar:this.dbUsuario.logado.img,label:this.dbUsuario.logado.nome,value:`cpf${this.dbUsuario.logado.numeroDocumentoNacional}`,tipo:"usuario"});let o=JSON.parse(localStorage.getItem("whatsappConexoes")||"{}");(!(o!=null&&o.value)||!e.some(r=>r.value===(o==null?void 0:o.value)))&&(o=e[0]),this.whatsEnvia({funcao:"status",banco:o==null?void 0:o.value}),this.conexoes=e,this.conexao=o},async irParaCampanha(e){this.$router.push({name:"Campanhas",params:{id:e}})}},async mounted(){this.clienteSistema=JSON.parse(localStorage.getItem("clienteSistema"))||{},this.whatsSemRede(),this.whatsInicializar(),await this.whatsListaConexoes()},async created(){this.permissao=await $db.permissao.objeto("campanhas")}},dMe=["src"];function fMe(e,t,o,r,a,i){const n=Ve("g-label"),s=Ve("avatar"),l=Ve("BadgeCopiarUid");return a.permissao?(B(),oe(ae,{key:0,flat:a.pendentes.length===0&&a.cor==="tertiary",unelevated:a.pendentes.length>0||a.cor==="green",color:a.pendentes.length>0?"red-6":a.cor,size:"md",icon:"mdi-whatsapp",round:"",dense:"",class:"hideonmobile"},{default:C(()=>[h(Ft,{anchor:"bottom middle",self:"center middle"},{default:C(()=>t[4]||(t[4]=[K("Whatsapp Beta")])),_:1}),h(aa,{class:Li(["BarraTopo-usuarioPopover no-padding no-margin",a.tabSelecionada.valor==="Pendentes"?"no-scroll":""])},{default:C(()=>[h(At,null,{default:C(()=>[h(qe,{class:"q-px-md"},{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,{class:"text-h6 text-tertiary text-weight-bold"},{default:C(()=>[h(Pe,{name:"mdi-whatsapp",size:"24px"}),t[5]||(t[5]=K(" Whatsapp Beta "))]),_:1})]),_:1})]),_:1}),a.tabs.length?(B(),oe(Ab,{key:0,modelValue:a.tabSelecionada.valor,"onUpdate:modelValue":t[0]||(t[0]=u=>a.tabSelecionada.valor=u),"outside-arrows":"","mobile-arrows":"",dense:"","inline-label":"","active-color":"primary","indicator-color":"primary",align:"left",class:"col-shrink tabsHorizontal border-bottom"},{default:C(()=>[(B(!0),be(Qe,null,qt(a.tabs,u=>(B(),oe(Jc,{key:u==null?void 0:u.valor,name:u==null?void 0:u.valor},{default:C(()=>[h(n,{class:"q-px-xs"},{default:C(()=>[K(le(u==null?void 0:u.rotulo),1)]),_:2},1024),(u==null?void 0:u.valor)==="Pendentes"?(B(),oe(An,{key:0,color:a.pendentes.length?"red-6":"primary","text-color":"white",label:a.pendentes.length},null,8,["color","label"])):ie("",!0)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])):ie("",!0),Ee(h(qe,{class:"q-px-md"},{default:C(()=>[h(fe,null,{default:C(()=>[h(qe,{class:"q-px-none"},{default:C(()=>[h(fe,null,{default:C(()=>[h(ii,{modelValue:a.conexao,"onUpdate:modelValue":[t[1]||(t[1]=u=>a.conexao=u),i.trocaConexao],options:a.conexoes,clearable:"",filled:"",dense:"",label:"Conex\xF5es",color:"primary","options-selected-class":"text-primary","popup-content-class":"conexoesDropdown"},{option:C(u=>[u.opt.tipo==="usuario"?(B(),oe(No,{key:0,class:"q-mx-xl q-my-xs"})):ie("",!0),h(qe,u_(sh(u.itemProps)),{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[u.opt.icon?(B(),oe(Pe,{key:0,name:u.opt.icon,size:"sm"},null,8,["name"])):(B(),oe(s,{key:1,imagem:u.opt.avatar,color:"#eeeeee",tamanho:"24"},null,8,["imagem"]))]),_:2},1024),h(fe,null,{default:C(()=>[h(Re,{class:"text-weight-medium",lines:"1"},{default:C(()=>[K(le(u.opt.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040),u.opt.tipo==="base"?(B(),oe(No,{key:1,class:"q-mx-xl q-my-xs"})):ie("",!0)]),_:1},8,["modelValue","options","onUpdate:modelValue"])]),_:1})]),_:1}),h(No,{class:"q-mb-sm"}),A("img",{src:a.imgsrc,style:{"max-width":"100%",display:"block",margin:"0 auto"}},null,8,dMe),t[6]||(t[6]=A("span",null,null,-1)),h(No,{class:"q-mt-sm"}),h(qe,{class:"q-px-none"},{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,{class:"caption text-tertiary text-center"},{default:C(()=>[a.status==="Conectando"?(B(),oe(Pe,{key:0,name:"sync",size:"xs",color:"red-6",class:"q-mr-xs"})):ie("",!0),a.status==="Conectado"?(B(),oe(Pe,{key:1,name:"done_all",size:"xs",color:"positive",class:"q-mr-xs"})):ie("",!0),a.status==="Desconectado"?(B(),oe(Pe,{key:2,name:"remove_done",size:"xs",color:"tertiary",class:"q-mr-xs"})):ie("",!0),K(" "+le(a.status),1)]),_:1}),h(qe,{class:"no-padding q-px-xs"},{default:C(()=>[h(fe,null,{default:C(()=>[a.botao!==""?(B(),oe(ae,{key:0,onClick:t[2]||(t[2]=u=>i.conectar_click(a.conexao)),label:a.botao,disable:!(a.conexao!==""&&a.conexao!==null),color:"primary",unelevated:"",dense:"",class:"full-width q-py-sm"},null,8,["label","disable"])):ie("",!0),a.status==="Conectado"?(B(),be(Qe,{key:1},[h(ma,{modelValue:a.telDestino,"onUpdate:modelValue":t[3]||(t[3]=u=>a.telDestino=u),label:"telefone p/ teste"},null,8,["modelValue"]),h(ae,{onClick:i.btEnviarTeste_click,label:"Enviar teste!",color:"primary",unelevated:"",dense:"",class:"full-width"},null,8,["onClick"])],64)):ie("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512),[[Eo,a.tabSelecionada.valor==="Conexao"]]),Ee(h(qe,{class:"no-padding no-margin"},{default:C(()=>[h(fe,null,{default:C(()=>[h(HR,{items:a.pendentes,separator:"",style:{"max-height":"300px"}},{default:C(({item:u,index:c})=>[(B(),oe(qe,{class:"q-px-md",key:c},{default:C(()=>[h(fe,{class:"no-padding"},{default:C(()=>[a.pendentes.length?(B(),oe(qe,{key:0,class:"no-padding"},{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,{lines:"2",class:"text-weight-medium ellipsis-2-lines"},{default:C(()=>[K(le(u==null?void 0:u.descricao),1)]),_:2},1024),h(Re,{caption:""},{default:C(()=>[h(l,{id:(u==null?void 0:u.id)||"0000",numero:((u==null?void 0:u.id)||"0000").slice(-8),cor:"red-6",class:"center"},null,8,["id","numero"])]),_:2},1024)]),_:2},1024),h(fe,{side:"",class:"no-padding"},{default:C(()=>[h(ae,{icon:"arrow_forward",onClick:d=>i.irParaCampanha(u==null?void 0:u.id),flat:"",round:"",dense:""},null,8,["onClick"])]),_:2},1024)]),_:2},1024)):ie("",!0)]),_:2},1024)]),_:2},1024))]),_:1},8,["items"]),a.tabSelecionada.valor==="Pendentes"&&!a.pendentes.length?(B(),oe(qe,{key:0},{default:C(()=>[h(fe,{class:"q-py-md"},{default:C(()=>[h(n,{text:"sub3 medium center"},{default:C(()=>t[7]||(t[7]=[K("N\xE3o h\xE1 nenhuma campanha pendente")])),_:1})]),_:1})]),_:1})):ie("",!0)]),_:1})]),_:1},512),[[Eo,a.tabSelecionada.valor==="Pendentes"]])]),_:1})]),_:1},8,["class"])]),_:1},8,["flat","unelevated","color"])):ie("",!0)}var mMe=St(uMe,[["render",fMe]]);const pMe={data(){return{visivel:!1,titulo:"",descricao:"",file:"",json:{},btnDisable:!0}},methods:{voltar(e){e.stopPropagation(),$q.dialog({message:"Deseja descartar as modifica\xE7\xF5es?",title:"Aten\xE7\xE3o!",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Descartar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{this.fechar()})},fechar(){this.titulo="",this.descricao="",this.file="",this.json={},this.visivel=!1},mostrar(){this.visivel=!0},adicionarVideo(e){this.file=e[0]},async salvar(){const e=$utils.uuid();$q.loading.show({message:"Enviando v\xEDdeo...",html:!0,boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary"});try{this.json={id:e,titulo:this.titulo,descricao:this.descricao,usuario:$db.usuario.logado,usuarioId:$db.usuario.logado.id,usuarioNome:$db.usuario.logado.nome,usuarioDocumento:$db.usuario.logado.numeroDocumentoNacional,dataHora:new Date};const t=new Headers;let o={};const r=new FormData;r.append("arquivo",this.file),r.append("json",JSON.stringify(this.json));let a=r.get("arquivo").name,i=a.substring(a.length-3);r.set("arquivo",this.file,`${e}.${i}`);try{o=await fetch("https://api.b15.com.br/videos/upload",{mode:"cors",method:"POST",headers:t,body:r});const n=await o.json();n.sucesso&&($q.notifyPositive(n.mensagem),this.titulo="",this.descricao="",this.file="",this.json={}),n.sucesso||$q.notifyError(n.mensagem)}catch(n){$q.notifyError(n.message)}this.fechar()}catch(t){$q.notifyError(t.message)}finally{$q.loading.hide()}},uploadClick(){this.$refs.Upload.click()},abrirVideo(e){const t=this.$refs.Upload.files;if(FileReader&&t&&t.length){var o=new FileReader;o.onload=()=>{this.file=t[0],this.botaoEnviar()},o.readAsDataURL(t[0])}},botaoEnviar(){this.btnDisable=!0,this.titulo&&this.file&&(this.btnDisable=!1)}}},hMe={class:"q-pa-md"},vMe={class:"col-12"},gMe={class:"col-12"},_Me={class:"col-12"};function bMe(e,t,o,r,a,i){const n=Ve("campo"),s=Ve("row");return B(),oe(Ht,{id:"GeeksTubeModal",modelValue:a.visivel,"onUpdate:modelValue":t[3]||(t[3]=l=>a.visivel=l),persistent:"",onKeyup:jr(i.voltar,["esc"])},{default:C(()=>[h(To,{class:"q-layout-modal bg-white",style:{"max-width":"990px"}},{default:C(()=>[h(Je,{class:"bg-primary text-white"},{default:C(()=>[h(lt,null,{default:C(()=>t[4]||(t[4]=[K("Subir v\xEDdeo")])),_:1}),Ee(h(ae,{dense:"",flat:"",icon:"close",round:""},null,512),[[st]])]),_:1}),A("div",hMe,[h(s,null,{default:C(()=>{var l;return[A("p",vMe,[h(n,{modelValue:a.titulo,"onUpdate:modelValue":t[0]||(t[0]=u=>a.titulo=u),tipo:"texto",rotulo:"Titulo do v\xEDdeo",rules:[u=>u&&u.length>0||"Titulo obrigat\xF3rio."],onChange:i.botaoEnviar},null,8,["modelValue","rules","onChange"])]),A("p",gMe,[h(n,{modelValue:a.descricao,"onUpdate:modelValue":t[1]||(t[1]=u=>a.descricao=u),tipo:"textoArea",rotulo:"Descri\xE7\xE3o do v\xEDdeo"},null,8,["modelValue"])]),A("p",_Me,[h(ae,{class:"BtUpload",onClick:i.uploadClick,color:"primary",size:"md",round:"",icon:"attachment"},null,8,["onClick"]),K(" "+le((l=a.file.name)!=null?l:"")+" ",1),A("input",{ref:"Upload",type:"file",id:"Upload",onChange:t[2]||(t[2]=(...u)=>i.abrirVideo&&i.abrirVideo(...u)),style:{visibility:"hidden"}},null,544)]),t[5]||(t[5]=A("br",null,null,-1))]}),_:1}),t[6]||(t[6]=A("p",null,null,-1))]),t[7]||(t[7]=A("p",null,null,-1)),h(Ui,null,{default:C(()=>[h(Je,{class:"bg-light"},{default:C(()=>[Ee(h(ae,{flat:"",size:"md","no-ripple":"",color:"tertiary",label:"Cancelar",class:"q-mr-sm"},null,512),[[st]]),h(ae,{"no-ripple":"",label:"Salvar",color:"primary",unelevated:"",class:"no-shadow",onClick:i.salvar,disabled:a.btnDisable},null,8,["onClick","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","onKeyup"])}var yMe=St(pMe,[["render",bMe]]);const xMe={components:{Arquivo:Zm,CodigoBarras:Jm,ContatoCriar:tA,PromptItemV2:Zd,Receita:LR,Tutorial:$R,Pupilometro:aA,DocumentoCodigo:OR,DocumentoMetas:PR,Faturamento:UR,PromptItemTabelaPrecoNovo:JR,PromptDocumentoOperacao:YR,TitulosPendentesEmAtraso:ZR},computed:{carrinhoSemArmacaoVazia(){return this.carrinho.filter(e=>!(e.tipoItem==="Arma\xE7\xE3o"&&!e.descricaoItem.trim()&&e.total===0&&e.valorItem===0))},erroDataHoraPrevisto(){if(this.campos.dataHoraPrevisto){const e=new Date().setHours(0,0,0,0);if(new Date(this.campos.dataHoraPrevisto)<new Date(e))return"Previs\xE3o de entrega n\xE3o pode ser menor do que a data de hoje"}return""},descricaoClassificacaoDestinatario(){return this.classificacaoDestinatario===0?"PF N\xE3o Contribuinte":this.classificacaoDestinatario===1?"PJ Contribuinte":this.classificacaoDestinatario===2?"PJ N\xE3o Contribuinte":"Sem classifica\xE7\xE3o de destinat\xE1rio"},ehOrcamento(){var e,t,o,r;return["AGUARDANDO LIBERA\xC7\xC3O","AGUARDANDO ESTOQUE","AGUARDANDO FINANCEIRO","OR\xC7AMENTO"].includes((((t=(e=this.envelope)==null?void 0:e.documento)==null?void 0:t.status)||"").toUpperCase())&&(((r=(o=this.envelope)==null?void 0:o.documento)==null?void 0:r.tipo)||"").toUpperCase()==="ENVELOPE"}},data(){return{armacao:{alturaMontagemOD:null,alturaMontagemOE:null,diagonal:null,ponte:null,altura:null,tamanho:"",armacaoMaterial:"",tipoMontagem:""},armacaoMaterialModal:!1,armacaoMaterialDescricao:"",envelope:{},mostrarTitulosPendentesEmAtraso:{},modalCreditoDisponivel:{},modalItensSemEstoque:{data:[],resolve:null,reject:null,visivel:!1},visivel:!1,opcoesArmacaoMaterial:[],tipoMontagemModal:!1,tipoMontagemDescricao:"",opcoesTipoMontagem:[],campos:{totalDesconto:0,totalPercentualDesconto:0,subTotal:0,totalDocumento:0,idContato:"",descricaoContato:"",idDocumentoAdicional:"",dataHoraPrevisto:"",tipoFrete:"CIF",valorFrete:0},tipo:"Envelope",tipoEnvelope:"Oculos",tipoLente:"",tipoOculos:"Vista",carrinho:[],documentoContato:[],documentoStatus:[],duplicarReceita:!1,descricaoReceitaSelecionada:"",modalDescontoMaximo:{},modalItem:{visivel:!1,filtros:{}},modalPupilometro:{},tipoPupilometro:"",permissaoPupilometro:!1,descricaoLaboratorio:"",itensTipo:[],itens:{},tipoDescontoPercentagem:!0,tipoDescontoTotal:!0,pacientes:[{label:"",value:""}],tipoLentes:[],tipoLentesOculos:["","Monofocal (Longe)","Monofocal (M\xE9dio)","Monofocal (Perto)","Bifocal (Longe e Perto)","Multifocal (Longe e Perto)","Intermedi\xE1rio (M\xE9dio e Perto)","Intermedi\xE1rio (Longe e M\xE9dio)"],tipoLentesContato:["","Monofocal (Longe)","Bifocal (Longe e Perto)","Multifocal (Longe e Perto)"],receita:{},receitasDescricao:[],modalReceita:{visivel:!1,id:"",idEmpresa:"",duplicar:!1},arquivo:[],opcoesPacientes:[],filtroAvancado:void 0,dataPrevisaoEntrega:null,horaPrevisaoEntrega:null,classificacaoDestinatario:null,menuVenda:!1,contatoResponsavel:null,contato:{imagem:null},modalAltMontDataPrev:{visivel:!1},exibirCarregando:!1,envelopeEditarNumero:!1,envelopeNumero:null,configImpressosWhatsapp:[],configImpressosEmail:[]}},emits:["atualizar","fechou"],methods:{cortarEspacos(e){const t=e.keyCode||e.which;(t===32||t===13)&&e.preventDefault()},async abrirReceitaAoAbrirEnvelope(){const e=localStorage.getItem("idReceita");e&&(localStorage.removeItem("idReceita"),this.receitas.some(t=>t.id===e)&&await this.abrirModalReceita(e,!1))},async reprovarOrcamento(){try{const e=await new Promise((t,o)=>$q.dialog({message:"Especifique o motivo:",noRefocus:!0,preventClose:!0,prompt:{model:"",type:"text",class:"bg-light"},title:"Reprovar or\xE7amento?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(r=>{t(r.trim())}).onCancel(()=>{o()}));if(e)try{$q.loading.show({message:"Reprovando..."});const t=$utils.dataAtual(),o="N\xE3o Aprovado",a=((await $db.contato.le({numeroDocumentoNacional:$db.usuario.logado.numeroDocumentoNacional}))[0]||{}).id||"";this.envelope.documentoStatus.push({id:$utils.uuid(),idDocumento:this.campos.id,dataHoraEmissao:t,operacao:this.campos.operacao,statusOriginal:this.campos.status,statusFinalizado:o,observacao:e,cpfUsuario:$db.usuario.logado.numeroDocumentoNacional}),this.campos.motivoCancelamento=e,this.campos.status=o,this.campos.dataHoraFinalizado=t;for(const i of this.carrinho)i.status=o,i.dataHoraFinalizado=t;this.$refs.faturamento.condicaoPagamento=[],await this.corrigirValores(),await this.salvar(),$q.notifyPositive("Or\xE7amento reprovado")}catch(t){$q.notifyError("Ocorreu um erro ao reprovar o or\xE7amento.",t)}finally{$q.loading.hide()}else $q.notifyError("Especifique o motivo")}catch(e){console.error(e)}},async retornarOrcamento(){try{$q.loading.show(),await e7({idDocumento:this.campos.id})}catch(e){this.$q.notifyError(e.message);return}finally{$q.loading.hide()}this.$q.dialog({message:"Retornar para or\xE7amento?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(async()=>{try{$q.loading.show({message:"Retornando..."});try{await $db.venda.checarConflitoStatus({id:this.campos.id,status:this.envelopeOriginal.documento.status})}catch(a){return $q.notifyError(a.message),!1}let e=await $db.documentoStatus.le({idDocumento:this.campos.id});if(e=$lodash.orderBy(e,"dataHoraEmissao","desc")[0],["Faturado","Aguardando Pagamento"].includes(this.campos.status))return $q.notifyError("N\xE3o \xE9 poss\xEDvel reabrir envelopes de faturas j\xE1 pagas! Por favor, reabra a fatura."),!1;if(!await $db.permissao.objeto("Diretiva_Vendas_Reabertura")){const a=new Date,i=new Date(this.campos.dataHoraFinalizado);if(i.getFullYear()<a.getFullYear()||i.getMonth()<a.getMonth())return $q.notifyError("N\xE3o \xE9 poss\xEDvel reabrir envelopes de meses passados!"),!1}this.documentoStatus=[];const t=$utils.dataAtual(),r=((await $db.contato.le({numeroDocumentoNacional:$db.usuario.logado.numeroDocumentoNacional}))[0]||{}).id||"";for(const a of this.carrinho)a.status="Or\xE7amento",a.dataHoraFinalizado="";this.campos.idFatura="",this.campos.idContatoFinalizado="",this.campos.status="Or\xE7amento",this.campos.dataHoraFinalizado="",this.campos.dataHoraRealizado="",this.campos.motivoCancelamento="",this.envelope.documentoStatus.push({id:$utils.uuid(),idDocumento:this.campos.id,dataHoraEmissao:t,operacao:this.campos.operacao,statusOriginal:e==null?void 0:e.statusFinalizado,statusFinalizado:"Or\xE7amento",cpfUsuario:$db.usuario.logado.numeroDocumentoNacional}),await this.corrigirValores(),await this.salvar(),$q.notifyPositive("Envelope retornado para or\xE7amento")}catch(e){return $q.notifyError("N\xE3o foi poss\xEDvel retornar para or\xE7amento.",e),!1}finally{$q.loading.hide()}})},async finalizar(){try{await new Promise((e,t)=>{$q.dialog({cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},message:"Esta a\xE7\xE3o ir\xE1 finalizar este or\xE7amento",ok:{label:"Continuar",push:!0,class:"bg-primary",textColor:"white",flat:!0},title:"Tem certeza?"}).onOk(()=>{e()}).onCancel(()=>{t()})})}catch{return}this.erroEncontrado()||(this.modalCreditoDisponivel={permiteFinalizar:!1,resolve:void 0,reject:void 0,visivel:!1},await this.corrigirValores(),await $db.envelope.finalizar({tela:this,dados:this.envelope,dadosOriginal:this.envelopeOriginal}))},ajustarDataHoraPrevisaoEntrega(){let e;e=new Date(this.dataPrevisaoEntrega),e.setHours(this.horaPrevisaoEntrega.slice(0,2)),e.setMinutes(this.horaPrevisaoEntrega.slice(3,5)),this.campos.dataHoraPrevisto=Xo.formatDate(e)},async criarOpcoesPacientes(){try{const e=await $db.hibrido.le({table:"contato",id:this.envelope.documento.idContatoResponsavel}),t=await $db.contato.leFilhos(this.envelope.documento.idContatoResponsavel);t.push(e);const o=t.map(r=>({label:r.nome,value:r.id}));return o.sort((r,a)=>r.label<a.label?1:-1),o}catch(e){this.$q.notifyError("N\xE3o foi poss\xEDvel carregar os dados de pacientes",e)}},filtrarPacientes(e,t){t(async()=>{const o=await this.criarOpcoesPacientes();if(e==="")this.opcoesPacientes=o;else{const r=e.toLowerCase();this.opcoesPacientes=o.filter(a=>a.label.toLowerCase().indexOf(r)>-1)}})},async fecharModalPupilometro(){if(this.modalPupilometro.visivel=!1,$db.pupilometro.fotoOriginal==="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAQAAAAkGDomAAAATklEQVR42u3OMQEAAAgDINc/9Czh4QEJSDuvRVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUPDSAovln7Gzmi7KAAAAAElFTkSuQmCC")return;let e={id:(this.modalPupilometro.pupilometroAtual||{}).id||$utils.uuid(),descricao:"Pupil\xF4metro",referencia:"idEnvelope:"+this.campos.id,json:JSON.stringify({medidas:$db.pupilometro.medidas})};this.modalPupilometro.pupilometroAtual=e,this.modalPupilometro.fotoAtual=$db.pupilometro.foto,this.modalPupilometro.fotoOriginalAtual=$db.pupilometro.fotoOriginal,this.armacao.largura=$db.pupilometro.medidas.tamanhoArmacao,this.armacao.ponte=$db.pupilometro.medidas.ponte,this.armacao.altura=$db.pupilometro.medidas.alturaArmacao,this.armacao.diagonal=$db.pupilometro.medidas.diagonal.distancia,$db.pupilometro.medidas.bifocal?(this.armacao.alturaMontagemOD=$db.pupilometro.medidas.bifocalOlhoDireito,this.armacao.alturaMontagemOE=$db.pupilometro.medidas.bifocalOlhoEsquerdo):(this.armacao.alturaMontagemOD=$db.pupilometro.medidas.dip.od.altura,this.armacao.alturaMontagemOE=$db.pupilometro.medidas.dip.oe.altura),await this.salvarDnp()},async abrirModalPupilometro(e){if(this.modalPupilometro={...this.modalPupilometro,visivel:!1,avancar:this.envelope.somenteLeitura?"Medidas":""},$db.pupilometro.limpar(),$db.pupilometro.medidas.tipo="Presencial",this.armacao.largura&&($db.pupilometro.medidas.tamanhoArmacao=this.armacao.largura),this.armacao.ponte&&($db.pupilometro.medidas.ponte=this.armacao.ponte),this.armacao.diagonal&&($db.pupilometro.medidas.diagonal.distancia=this.armacao.diagonal),this.armacao.altura&&($db.pupilometro.medidas.alturaArmacao=this.armacao.altura),(this.modalPupilometro.pupilometroAtual||{}).json){const t=JSON.parse(this.modalPupilometro.pupilometroAtual.json),o=async r=>{$db.pupilometro[r]=await $db.pupilometro.leFoto({id:this.modalPupilometro.pupilometroAtual.id,tipoFoto:r})};await Promise.all([o("foto"),o("fotoOriginal")]),$db.pupilometro.medidas=t.medidas,this.armacao.largura&&($db.pupilometro.medidas.tamanhoArmacao=this.armacao.largura),this.armacao.ponte&&($db.pupilometro.medidas.ponte=this.armacao.ponte),this.armacao.diagonal&&($db.pupilometro.medidas.diagonal.distancia=this.armacao.diagonal),this.envelope.somenteLeitura||$db.pupilometro.foto!=="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAQAAAAkGDomAAAATklEQVR42u3OMQEAAAgDINc/9Czh4QEJSDuvRVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUPDSAovln7Gzmi7KAAAAAElFTkSuQmCC"?this.modalPupilometro.avancar="Medidas":this.modalPupilometro.avancar="TirarFoto"}if(e==="Cart\xE3o"){$db.pupilometro.medidas.tipo=e,$db.pupilometro.medidas.olhoDireito.centroOlho.top=345,$db.pupilometro.medidas.olhoDireito.centroOlho.left=255,$db.pupilometro.medidas.olhoEsquerdo.centroOlho.top=345,$db.pupilometro.medidas.olhoEsquerdo.centroOlho.left=450,$db.pupilometro.medidas.nariz.top=0,$db.pupilometro.medidas.nariz.left=0,$db.pupilometro.medidas.ponte=23,this.envelope.somenteLeitura||$db.pupilometro.foto!=="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAQAAAAkGDomAAAATklEQVR42u3OMQEAAAgDINc/9Czh4QEJSDuvRVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUPDSAovln7Gzmi7KAAAAAElFTkSuQmCC"?this.modalPupilometro.avancar="CartaoMedidas":this.modalPupilometro.avancar="CartaoFoto",this.modalPupilometro={...this.modalPupilometro,visivel:!0},this.$nextTick(()=>{this.modalPupilometro.avancar==="CartaoFoto"&&this.$refs.pupilometro.cartaoNovo()});return}this.$nextTick(()=>{this.modalPupilometro.visivel=!0})},abrirArmacaoMaterialModal(){this.envelope.somenteLeitura||(this.armacaoMaterialModal=!0)},abrirTipoMontagemModal(){this.envelope.somenteLeitura||(this.tipoMontagemModal=!0)},async atualizarArmacaoMaterial(){let e=[];await $db.item.carregarMemoria();for(const o of $db.item.itens)o.armacaoMaterial&&!e.includes(o.armacaoMaterial)&&e.push(o.armacaoMaterial);await $tryLoading(async()=>{var o,r;if($db.hibrido.isOnline()){const a=await $utils.geeksApi({consultaArmacaoMaterial:{funcao:"6FF4BA1C-F269-4F94-B567-0FA84041B371"}});(o=a==null?void 0:a.data)!=null&&o.consultaArmacaoMaterial&&(e=(r=a.data)==null?void 0:r.consultaArmacaoMaterial.map(i=>i.ArmacaoMaterial))}}),e=e.map(o=>({armacaoMaterial:o,sort:o.toLowerCase()})),e=$lodash.orderBy(e,"sort","asc");const t=[];for(const o of e)t.push({rotulo:o.armacaoMaterial,valor:o.armacaoMaterial});this.opcoesArmacaoMaterial=t},async atualizarTipoMontagem(){let e=[];await $db.item.carregarMemoria();for(const o of $db.item.itens)o.tipoMontagem&&!~e.indexOf(o.tipoMontagem)&&e.push(o.tipoMontagem);e=e.map(o=>({tipoMontagem:o,sort:o.toLowerCase()})),e=$lodash.orderBy(e,"sort","asc");const t=[];for(const o of e)t.push({rotulo:o.tipoMontagem,valor:o.tipoMontagem});this.opcoesTipoMontagem=t},async criarArmacaoMaterial(){this.opcoesArmacaoMaterial=$lodash.orderBy([...this.opcoesArmacaoMaterial,{rotulo:this.armacaoMaterialDescricao,valor:this.armacaoMaterialDescricao,sort:this.armacaoMaterialDescricao.toLowerCase()}],"sort","asc"),this.armacao.armacaoMaterial=this.armacaoMaterialDescricao,this.armacaoMaterialModal=!1},async criarTipoMontagem(){this.opcoesTipoMontagem=$lodash.orderBy([...this.opcoesTipoMontagem,{rotulo:this.tipoMontagemDescricao,valor:this.tipoMontagemDescricao,sort:this.tipoMontagemDescricao.toLowerCase()}],"sort","asc"),this.armacao.tipoMontagem=this.tipoMontagemDescricao,this.tipoMontagemModal=!1},async selecionarEmpresa(){const e=await $erp().empresa.toArray();let t;if(!e.filter(r=>r.ativo).length)throw new Error("Empresa n\xE3o encontrada");if(e.filter(r=>r.ativo).length===1)return e.find(r=>r.ativo);const o=await $g.promptContato.show({filtro:{ativo:!0,empresas:!0},placeholder:"Selecione a empresa"});if((o||{}).id&&(t=(await $db.empresa.le({idContato:o.id})).find(a=>a.id)),!t)throw new Error("Empresa n\xE3o selecionada");return t},async obterContatoVendedor(e){const o=((await $db.configuracoes.le({nome:"vendas.usaCarteira"}))[0]||{}).valor==="1",r=(e||{}).idContatoVendedor;if(r&&o){const n=await $erp().contato.get(r)||{};if(n.id)return n}const a=JSON.parse(localStorage.getItem("usuario"))||{};let i=(await $db.contato.ler({filtros:{ativo:!0,vendedores:!0}})).data;if(i.length===1)return i[0];for(const n of i){if(!(n||{}).numeroDocumentoNacional)continue;const s=(n.numeroDocumentoNacional||"").replace(/\D/g,""),l=(a.numeroDocumentoNacional||"").replace(/\D/g,"");if(s===l)return n}return this.selecionarContato({placeholder:"Selecione o respons\xE1vel",filtro:{ativo:!0,vendedores:!0}})},async mostrar(e){var t;try{$q.loading.show();const{idEnvelope:o,idContato:r}=e!=null?e:{};let a;if(r&&(a=await $db.hibrido.le({table:"contato",id:r})),((a==null?void 0:a.condutaRestricao)||"").trim()){this.$emit("fechar"),$q.notify({message:a.condutaRestricao,timeout:0,type:"negative",closeBtn:!0});return}if(o){const i=await $db.hibrido.le({table:"documento",id:o});i.documentoContato=await $db.hibrido.lista({table:"documentoContato",where:{idDocumento:i.id}}),this.arquivo=[],this.arquivoOriginal=await $db.arquivo.lista({tipoArquivo:"-",idTabelaMaster:i.id}),this.arquivo=$utils.clonarV2(this.arquivoOriginal),i.arquivoOriginal=this.arquivoOriginal,i.arquivo=this.arquivo,this.itensEnvelopeOriginal=[],this.itensEnvelopeOriginal=[...this.itensEnvelopeOriginal,...await $db.hibrido.lista({table:"documentoItem",where:{idDocumento:i.id}})],this.itensEnvelope=$utils.clonarV2(this.itensEnvelopeOriginal);const n=this.itensEnvelope.filter(s=>s.idDocumento===i.id);this.envelope={documento:i,documentoStatus:[],documentoContato:i.documentoContato,documentoItens:n,somenteLeitura:!0,arquivo:i.arquivo,arquivoOriginal:i.arquivoOriginal},this.envelope.somenteLeitura=!this.ehOrcamento,delete this.envelope.documento.arquivo,delete this.envelope.documento.arquivoOriginal,delete this.envelope.documento.documentoContato,this.envelopeOriginal=$utils.clonarV2(this.envelope)}else{this.tipoLente="",this.receita={},this.carrinho=[];const i=await this.selecionarEmpresa();let n;r&&(n=await $db.hibrido.le({table:"contato",id:r})),(!n||await $db.contato.ehContatoConsumidor(n))&&(n=await this.selecionarContato({placeholder:"Selecione o cliente",filtro:{ativo:!0},habilitarBotaoNovoContato:!0}));const s=await this.obterContatoVendedor(n),l=await this.obterContatoUsuario();let u="";if(n.idItemTabelaPreco){const d=await $db.itemTabelaPreco.le({id:n.idItemTabelaPreco});(d==null?void 0:d.id)&&(!d.idEmpresa||d.idEmpresa===i.idContato)&&(u=n.idItemTabelaPreco)}if(!u){const d=await $db.configuracoes.le({nome:"vendas.tabelapadrao"});let f,m;f=d.find(p=>p.idEmpresa===i.idContato),m=Number(f==null?void 0:f.valor),m||(f=d.find(p=>!p.idEmpresa),m=Number(f==null?void 0:f.valor)),m&&(u=(t=(await $erp().itemTabelaPreco.filter(v=>Number(v.codigoItemTabelaPreco)===m).toArray())[0])==null?void 0:t.id)}if(!u){const d=await $erp().itemTabelaPreco.filter(f=>f.tabelaMaster===1&&(!f.idEmpresa||f.idEmpresa===i.idContato)).toArray();if(d.length===1)u=d[0].id;else if(d.length>1)try{u=(await this.selecionarItemTabelaPreco(null,i.idContato)).id}catch(f){$q.notifyError(f)}}let c={id:$utils.uuid(),tipo:"Envelope",documentoId:null,documentoTipo:"Venda",status:"Or\xE7amento",dataHoraEmissao:$utils.dataAtual(),idEmpresa:i.idContato,idItemTabelaPreco:u,descricaoEmpresa:i.nome,numeroDocumentoEmpresa:i.numeroDocumentoNacional,idContato:n.id,descricaoContato:n.nome,numeroDocumentoContato:n.numeroDocumentoNacional,idContatoVendedor:s.id,idContatoDigitador:l.id,idContatoResponsavel:n.id,idContatoIndicacao:null,operacao:"Normal",codigoDocumentoOperacao:1,totalDocumento:0,subTotal:0,totalDesconto:0,totalPercentualDesconto:0,observacao:"",observacaoInterna:"",numeroOrdemCompra:"",tipoFrete:"CIF",valorFrete:0};this.envelope={documento:c,documentoStatus:[],documentoContato:[],documentoItens:[],somenteLeitura:!1,arquivo:[],arquivoOriginal:[]},this.envelopeOriginal={documento:{},documentoStatus:[],documentoContato:[],documentoItens:[],somenteLeitura:!1,arquivo:[],arquivoOriginal:[]}}this.envelope=$utils.clonarV2(this.envelope),this.envelopeOriginal=$utils.clonarV2(this.envelopeOriginal),await this.atualizar()}catch(o){$q.notifyError("Erro ao carregar envelope",o)}finally{$q.loading.hide()}},alterarTipoLente(){for(const e of this.carrinho)e.oculos=this.tipoLente},async selecionarPaciente(e){const t=$utils.clonar(this.envelope.documento);e.value!==t.idDocumentoAdicional&&(t.idDocumentoAdicional=""),t.idContato=e.value,t.descricaoContato=e.label,this.envelope.documento=$utils.clonar(t),this.campos=$utils.clonar(t),await this.filtrarReceitas(),await this.atualizarReceita(),await this.atualizarDocumentoMetas()},async atualizarReceita(e){var t;if(await this.filtrarReceitas(),this.receita={},e||this.receitasDescricao.length&&(e=this.receitasDescricao[0].value),e){this.receita=await $db.receita.le({id:e||this.receita.id}),await this.pacientesAtualizar();const o=$utils.clonar(this.envelope.documento);o.idContato=this.receita.paciente.id,o.descricaoContato=(t=this.pacientes.filter(r=>r.value===this.campos.idContato)[0])==null?void 0:t.label,this.envelope.documento=$utils.clonar(o),this.campos=$utils.clonar(o)}},async atualizarReceitaV2(e){var t;if(this.receita=await $db.receita.le({id:e}),await this.filtrarReceitas(),this.receita.id){const o=$utils.clonar(this.envelope.documento);o.idContato=this.receita.paciente.id,o.descricaoContato=(t=this.pacientes.filter(r=>r.value===this.campos.idContato)[0])==null?void 0:t.label,this.envelope.documento=$utils.clonar(o),this.campos=$utils.clonar(o)}},async calculaTotal(e){await $db.envelope.calculaTotal({envelope:$utils.clonar(this.campos),itensEnvelope:$utils.clonar(this.carrinho),campoAlterado:e}).then(t=>{this.envelope.documento=$utils.clonar(t.envelope),this.campos=$utils.clonar(t.envelope)})},async calculaTotalItem(e,t){const r=(await $db.envelope.calculaTotalItem({envelope:$utils.clonar(this.campos),itemEnvelope:$utils.clonar(this.carrinho[e]),campoAlterado:t})).itemEnvelope;if(t==="valorItem"){const a=$utils.clonarV2(this.carrinho);a[e]={...r,valorItem:0},this.carrinho=a,this.$nextTick(async()=>{const i=$utils.clonarV2(this.carrinho);i[e]=r,this.carrinho=i,await this.calculaTotal()})}else{const a=$utils.clonarV2(this.carrinho);a[e]=r,this.carrinho=a}await this.calculaTotal()},async abrirModalDependente(){const e=await this.$refs.modalDependente.mostrar();(e||{}).id&&(await this.criarDependencia(e),await this.filtrarReceitas())},async abrirModalReceita(e,t){try{this.$refs.modalReceita.mostrar({id:e||$utils.uuid(),idEmpresa:$lodash.get(this.envelope,"documento.idEmpresa",""),duplicar:t,idContato:this.campos.idContato,descricaoContato:this.campos.descricaoContato})}catch(o){this.$q.notifyError("Ocorreu um erro ao carregar a receita.",o)}},limparFiltroAvancado(){this.filtroAvancado={...this.filtroAvancado,cilindrico:{lte:0},esfericoInicial:{lte:0},esfericoFinal:{gte:0},tipo:"Lente"}},abrirModalItem(e,t){var d,f,m,p,v,g,x,b,_,w,S,D,M,O,T,I,N,P,F,L,z,H,X,Y,de,ye,W,re,_e,ve,ke,Ie,he,De,Te,J,q,ne,U,Z,Ce,Q,V,R,ee,ce,se,pe,we,Ne;let o,r,a,i,n,s,l,u,c;switch(e){case"Lentes":this.modalItem.filtros={tipo:"Lente",ativo:!0,bloquearVenda:!1},this.tipoLente&&(~this.tipoLente.indexOf("Monofocal")&&(c="Monofocal"),~this.tipoLente.indexOf("Bifocal")&&(c="Bifocal"),(~this.tipoLente.indexOf("Multifocal")||~this.tipoLente.indexOf("Intermedi\xE1rio"))&&(c="Multifocal")),r=(v=(p=(m=(f=(d=this.receita)==null?void 0:d.prescricao)==null?void 0:f.dioptria)==null?void 0:m.od)==null?void 0:p.longe)==null?void 0:v.cilindrico,a=(w=(_=(b=(x=(g=this.receita)==null?void 0:g.prescricao)==null?void 0:x.dioptria)==null?void 0:b.oe)==null?void 0:_.longe)==null?void 0:w.cilindrico,i=(T=(O=(M=(D=(S=this.receita)==null?void 0:S.prescricao)==null?void 0:D.dioptria)==null?void 0:M.od)==null?void 0:O.longe)==null?void 0:T.esferico,n=(L=(F=(P=(N=(I=this.receita)==null?void 0:I.prescricao)==null?void 0:N.dioptria)==null?void 0:P.oe)==null?void 0:F.longe)==null?void 0:L.esferico,o=(de=(Y=(X=(H=(z=this.receita)==null?void 0:z.prescricao)==null?void 0:H.dioptria)==null?void 0:X.od)==null?void 0:Y.medio)==null?void 0:de.esferico,(!i||o&&o>i)&&(i=o),o=(ve=(_e=(re=(W=(ye=this.receita)==null?void 0:ye.prescricao)==null?void 0:W.dioptria)==null?void 0:re.oe)==null?void 0:_e.medio)==null?void 0:ve.esferico,(!n||o&&o>n)&&(n=o),o=(Te=(De=(he=(Ie=(ke=this.receita)==null?void 0:ke.prescricao)==null?void 0:Ie.dioptria)==null?void 0:he.od)==null?void 0:De.perto)==null?void 0:Te.cilindrico,(!r||o&&o>r)&&(r=o),o=(Z=(U=(ne=(q=(J=this.receita)==null?void 0:J.prescricao)==null?void 0:q.dioptria)==null?void 0:ne.oe)==null?void 0:U.perto)==null?void 0:Z.cilindrico,(!a||o&&o>a)&&(a=o),o=(ee=(R=(V=(Q=(Ce=this.receita)==null?void 0:Ce.prescricao)==null?void 0:Q.dioptria)==null?void 0:V.od)==null?void 0:R.perto)==null?void 0:ee.esferico,(!i||o&&o>i)&&(i=o),o=(Ne=(we=(pe=(se=(ce=this.receita)==null?void 0:ce.prescricao)==null?void 0:se.dioptria)==null?void 0:pe.oe)==null?void 0:we.perto)==null?void 0:Ne.esferico,(!n||o&&o>n)&&(n=o),r=Number(r||void 0),a=Number(a||void 0),i=Number(i||void 0),n=Number(n||void 0),Number.isNaN(r)&&Number.isNaN(a)||(s=r>a?r:a),(Number.isNaN(r)||Number.isNaN(a))&&(s=r||a),Number.isNaN(i)&&Number.isNaN(n)||(l=i<n?i:n,u=i>n?i:n),(Number.isNaN(i)||Number.isNaN(n))&&(l=u=i||n),this.filtroAvancado={cilindrico:{lte:s||0},esfericoInicial:{lte:l||0},esfericoFinal:{gte:u||0},lenteTipo:c,opcoesTiposLente:["","Monofocal","Bifocal","Multifocal"]};break;case"LentesContato":this.modalItem.filtros={tipo:"Lente Contato",ativo:!0,bloquearVenda:!1},this.filtroAvancado=void 0;break;case"Armacao":this.modalItem.filtros={tipo:["Arma\xE7\xE3o","\xD3culos Sol"],ativo:!0,bloquearVenda:!1},this.filtroAvancado=void 0;break;case"Tratamento LOD":this.modalItem.filtros={tipo:"Tratamento",ativo:!0,bloquearVenda:!1},this.filtroAvancado=void 0,this.tipoTratamento="TLOD",this.idDocumentoItemPai=t;break;case"Tratamento LOE":this.modalItem.filtros={tipo:"Tratamento",ativo:!0,bloquearVenda:!1},this.filtroAvancado=void 0,this.tipoTratamento="TLOE",this.idDocumentoItemPai=t;break}this.modalItem.filtros.idEmpresa=this.campos.idEmpresa,this.modalItem.filtros.idTabelaPreco=this.campos.idItemTabelaPreco,this.modalItem.visivel=!0},async alterarTipoEnvelope(){const e=async()=>{this.tipoOculos=this.tipoEnvelope==="Oculos"?"Vista":"",this.carrinho=[],this.tipoEnvelope==="Oculos"?(this.tipoOculos="Vista",this.tipoLentes=this.tipoLentesOculos):(this.tipoOculos="",this.tipoLentes=this.tipoLentesContato)};if(!this.carrinho.length){e();return}$q.dialog({cancel:"Cancelar",message:"Esta a\xE7\xE3o ir\xE1 remover os itens do carrinho.",ok:"Continuar",title:"Tem certeza?"}).onOk(()=>{e()}).onCancel(()=>{this.tipoEnvelope=this.tipoEnvelope==="Oculos"?"Lentes":"Oculos"})},async criarDependencia(e){try{await $db.contato.criarDependenciaContatos({contatoPai:{id:this.campos.idContatoResponsavel},contatoFilho:{id:e.id}}),await $db.contato.criarDependenciaContatos({contatoPai:{id:e.id},contatoFilho:{id:this.campos.idContatoResponsavel}});const t=$utils.clonar(this.envelope.documento);t.idContato=e.id,t.descricaoContato=e.nome,this.receita={},this.envelope.documento=$utils.clonar(t),this.campos=$utils.clonar(t)}catch(t){this.$q.notifyError("Ocorreu um erro ao criar a depend\xEAncia.",t)}},async filtrarReceitas(){var l;let e=[];this.receitas=await $db.hibrido.lista({table:"documento",where:{tipo:"Prescri\xE7\xE3o",idContato:this.campos.idContato}}),this.receitas=$lodash.orderBy(this.receitas,["dataHoraEmissao","numero"],["desc","desc"]);const t=this.receitas.map(({id:u})=>u),o=await $db.hibrido.lista({table:"documentoContato",whereIn:{idDocumento:t},whereFilter:{descricao:"Medico"}}),r=$utils.unicos(o,"idContato").filter(Boolean),a=await $db.hibrido.lista({table:"contato",whereIn:{id:r}}),i={};for(const u of a)i[u.id]=u;const n={};for(const u of o)u.nome=((l=i[u.idContato])==null?void 0:l.nome)||"",n[u.idDocumento]=u;const s=new Date().setHours(0,0,0,0);for(let u of this.receitas){let d=`De ${(n[u.id]||{}).nome}, `;d+=`${this.$filters.data(u.dataHoraEmissao)} `,d+=`v\xE1lido at\xE9 ${this.$filters.data(u.dataHoraFinalizado)}`;let f={};new Date(u.dataHoraFinalizado).setHours(0,0,0,0)<s?f={icon:"alarm_off",color:"negative",stamp:"Vencida"}:f={icon:"alarm",stamp:"\xC0 vencer"};const m={label:d,value:u.id,...f};e.push(m)}this.receitasDescricao=e,!this.receita.id&&this.receitas.length&&(this.receita=await $db.receita.le({id:this.receitas[0].id}))},async fechar(e){e.stopPropagation(),this.visivel=!1},ordenarCarrinho(){const e={LOE:1,TLOE:2,LOD:3,TLOD:4,Arma\u00E7\u00E3o:5};this.carrinho=(this.carrinho||[]).sort((t,o)=>e[t.tipoItem]-e[o.tipoItem])},async removerItem(e){const t=(this.carrinho[e]||{}).id;this.carrinho=this.carrinho.filter(o=>o.id!==t&&o.idDocumentoItemPai!==t),this.envelope.documentoItens=$utils.clonar(this.carrinho),await this.calculaTotal()},async salvarDnp(){var r,a,i,n;const e=JSON.parse((i=(a=(r=this.modalPupilometro)==null?void 0:r.pupilometroAtual)==null?void 0:a.json)!=null?i:null),t=this.receita.id,o=(n=e==null?void 0:e.medidas)==null?void 0:n.dnp;o&&await $db.receita.salvarDnp({idReceita:t,dnp:o}),await this.atualizarReceita(this.receita.id)},async salvar_click(){this.erroEncontrado()||(await this.corrigirValores(),await this.salvar())},async salvar(){try{$q.loading.show({message:"Salvando..."});const e=$utils.clonar(this.envelope),t=$utils.clonar(this.envelopeOriginal);if(await $db.documento.grava({atual:e.documento,original:t.documento}),await $utils.processarFilho("documentoItem",t.documentoItens,e.documentoItens),await $utils.processarFilho("documentoContato",t.documentoContato,e.documentoContato),await $utils.processarFilho("documentoStatus",t.documentoStatus,e.documentoStatus),Object.keys(e.pupilometro.atual).length){const o=e.pupilometro.atual.id;await $db.hibrido.grava("json",{atual:e.pupilometro.atual,original:e.pupilometro.original});try{await Promise.all([$db.pupilometro.gravaFoto({base64:e.pupilometro.fotoAtual,idPupilometro:o,tipoFoto:"foto"}),$db.pupilometro.gravaFoto({base64:e.pupilometro.fotoOriginalAtual,idPupilometro:o,tipoFoto:"fotoOriginal"})])}catch(r){this.$q.notifyError("N\xE3o foi poss\xEDvel salvar a foto",r)}}Object.keys(e.arquivoOriginal).length&&await $db.arquivo.remove(e.arquivoOriginal.filter(o=>!e.arquivo.find(r=>r.id===o.id)));for(const o of e.arquivo){let r={};Object.keys(e.arquivoOriginal).length?r={original:e.arquivoOriginal.find(a=>a.id===o.id)||[{}],atual:o}:r={atual:o},(o==null?void 0:o.name)&&(o==null?void 0:o.editado)&&await $db.arquivo.edita(r),o!=null&&o.name||await $db.arquivo.grava(r)}this.$route.name==="AtendimentoVenda"&&e.documento.idContatoResponsavel!==this.$route.params.id&&$router.push({name:"AtendimentoVenda",params:{id:e.documento.idContatoResponsavel}}),$utils.emitter.emit("atualizarAtendimentoVenda"),this.visivel=!1}catch(e){$q.notifyError("Erro ao salvar: ",e)}finally{$q.loading.hide()}},erroEncontrado(){return this.tipoLente?this.receita.id?this.carrinho.length?this.erroDataHoraPrevisto?(this.$q.notifyError("Erro no preenchimento do formul\xE1rio"),!0):!1:(this.$q.notifyError("N\xE3o h\xE1 itens no carrinho"),!0):(this.$q.notifyError("Selecione uma receita"),!0):(this.$q.notifyError("Selecione o tipo da lente"),!0)},async corrigirValores(){let e={};if(this.tipoEnvelope==="Oculos"){let t=!1;for(const o in this.carrinho)if(this.carrinho[o].tipoItem==="Arma\xE7\xE3o"){this.carrinho[o].alturaMontagemOD=$utils.numberOrNull(this.armacao.alturaMontagemOD),this.carrinho[o].alturaMontagemOE=$utils.numberOrNull(this.armacao.alturaMontagemOE),this.carrinho[o].diagonal=$utils.numberOrNull(this.armacao.diagonal),this.carrinho[o].ponte=$utils.numberOrNull(this.armacao.ponte),this.carrinho[o].altura=$utils.numberOrNull(this.armacao.altura),this.carrinho[o].largura=$utils.numberOrNull(this.armacao.largura),this.carrinho[o].armacaoMaterial=this.armacao.armacaoMaterial,this.carrinho[o].tipoMontagem=this.armacao.tipoMontagem,this.carrinho[o].oculos=this.tipoLente,this.carrinho[o].tipoOculos=this.tipoOculos,this.carrinho[o].idItem&&(e.id=this.carrinho[o].idItem,e.armacaoMaterial=this.armacao.armacaoMaterial,e.tipoMontagem=this.armacao.tipoMontagem,e.diagonal=$utils.numberOrNull(this.armacao.diagonal),e.ponte=$utils.numberOrNull(this.armacao.ponte),e.altura=$utils.numberOrNull(this.armacao.altura),e.largura=$utils.numberOrNull(this.armacao.largura)),t=!0;break}t||this.carrinho.push({id:$utils.uuid(),idDocumento:this.campos.id,dataHoraEmissao:$utils.dataAtual(),descontoItem:0,descontoPercentualItem:0,descontoSubTotal:0,descricaoItem:"",operacaoFator:0,oculos:this.tipoLente,tipoOculos:this.tipoOculos,quantidade:0,status:this.campos.status,subTotal:0,tipoItem:"Arma\xE7\xE3o",total:0,valorCusto:0,valorCustoMedio:0,valorCustoReposicao:0,valorCustoUltimo:0,valorItem:0,valorItemUltimo:0,valorOriginal:0,valorReal:0,alturaMontagemOD:$utils.numberOrNull(this.armacao.alturaMontagemOD),alturaMontagemOE:$utils.numberOrNull(this.armacao.alturaMontagemOE),diagonal:$utils.numberOrNull(this.armacao.diagonal),ponte:$utils.numberOrNull(this.armacao.ponte),altura:$utils.numberOrNull(this.armacao.altura),largura:$utils.numberOrNull(this.armacao.largura),armacaoMaterial:this.armacao.armacaoMaterial,tipoMontagem:this.armacao.tipoMontagem})}this.campos.idDocumentoAdicional=this.receita.id,this.envelopeEditarNumero&&(this.campos.numero=this.envelopeNumero),this.envelope={...this.envelope,documento:$utils.clonar(this.campos),documentoItens:$utils.clonar(this.carrinho),armacao:e,arquivo:this.$refs.arquivo.arquivos.map(t=>({...t,idTabelaMaster:this.campos.id,tabelaMaster:"envelope"})),arquivoOriginal:this.envelope.arquivoOriginal,pupilometro:{original:$utils.clonarV2(this.modalPupilometro.pupilometroOriginal),atual:$utils.clonarV2(this.modalPupilometro.pupilometroAtual),fotoAtual:this.modalPupilometro.fotoAtual,fotoOriginalAtual:this.modalPupilometro.fotoOriginalAtual}},await this.salvarDnp()},async configurarValoresTabelaPreco(e,t){if(!t.idItem)return;let o=this.valoresTabelaPreco.find(a=>a.id===t.id);if(o)return;let r=await $erp().item.get(t.idItem);o=await $db.itemTabelaPreco.obterValores(e,r,4),this.valoresTabelaPreco.push({id:t.id,...o})},adicionarItem(e){const t=this.carrinho.find(a=>a.idItem===e.id);let o=1;e.novoValorVenda=e.valorVenda,t&&(e.novoValorVenda=t.valorReal,o=t.quantidade);const r={};r[e.id]={item:e,quantidade:o},this.selecionarItens(r)},async selecionarItens(e){for(const t in e){const o=e[t].item||{};await this.selecionarItem(t,o)}},async selecionarItem(e,t){var a;let o=[];if(["Arma\xE7\xE3o","\xD3culos Sol"].includes(t.tipo))o=["Arma\xE7\xE3o"];else if(t.tipo==="Tratamento")o=[this.tipoTratamento];else if(["Lente","Lente Contato"].includes(t.tipo))try{if(this.carrinho.reduce((n,s)=>["LOD","LOE"].includes(s.tipoItem)?n+1:n,0)===2&&!await $q.dialogSimNao({title:"Aten\xE7\xE3o",message:"H\xE1 lentes para os dois olhos. Deseja substitu\xED-las pela selecionada?",html:!0}))return;o=["LOD","LOE"];for(const n of this.carrinho){const s=o.indexOf(n.tipoItem);s!==-1&&o.splice(s,1)}o.length===0&&(o=["LOD","LOE"])}catch{return}this.modalItem.visivel=!1;const r=await $utils.selecionarCfop({ncm:t.ncm,idItem:t.id,itemTipo:t.tipo,codigoDocumentoOperacao:this.campos.codigoDocumentoOperacao,idContatoDestinatario:this.campos.idContato,idContatoEmitente:this.campos.idEmpresa,operacaoFator:-1});if(!r){this.$q.notify("N\xE3o foi poss\xEDvel localizar o CFOP.");return}for(const i of o){if(!["TLOD","TLOE"].includes(i))for(const l in this.carrinho)((a=this.carrinho[l])==null?void 0:a.tipoItem)===i&&await this.removerItem(l);const n=(await $db.estoqueSaldoProdutoEmpresa.le({idItem:t.id,idEmpresa:$lodash.get(this.envelope,"documento.idEmpresa",""),tipoEstoque:"Dispon\xEDvel"})).find(l=>l.idItem),s={id:$utils.uuid(),idItem:t.id,idDocumento:this.campos.id,codigoPlanoContaDestino:139,codigoPlanoContaEstoque:146,dataHoraEmissao:$utils.dataAtual(),descontoItem:0,descontoPercentualItem:0,descontoSubTotal:0,descricaoItem:t.descricaoConcatenada,operacao:r==null?void 0:r.operacao,operacaoFator:r==null?void 0:r.fator,idCfop:r==null?void 0:r.id,oculos:this.tipoLente,tipoOculos:i==="Arma\xE7\xE3o"?this.tipoOculos:"",lenteTipo:i!=="Arma\xE7\xE3o"?this.tipoOculos:"",quantidade:1,status:this.campos.status,subTotal:t.valorVenda,tipoItem:i,total:t.valorVenda,valorCusto:0,valorCustoMedio:$lodash.get(n,"valorCustoMedio",0),valorCustoReposicao:t.valorCustoReposicao||0,valorCustoUltimo:$lodash.get(n,"valorCusto",0),valorItem:t.valorVenda,valorItemUltimo:0,valorOriginal:t.valorVenda,valorReal:t.valorVenda,valorRealTotal:t.valorVenda,alturaMontagemOD:null,alturaMontagemOE:null,diagonal:$utils.numberOrNull(t.diagonal),ponte:$utils.numberOrNull(t.ponte),altura:$utils.numberOrNull(t.altura),largura:$utils.numberOrNull(t.largura),armacaoMaterial:t.armacaoMaterial||"",tipoMontagem:t.tipoMontagem||""};["TLOD","TLOE"].includes(i)&&this.idDocumentoItemPai&&(s.idDocumentoItemPai=this.idDocumentoItemPai),i==="Arma\xE7\xE3o"&&(this.armacao.diagonal=$utils.numberOrNull(s.diagonal),this.armacao.ponte=$utils.numberOrNull(s.ponte),this.armacao.altura=$utils.numberOrNull(s.altura),this.armacao.largura=$utils.numberOrNull(s.largura),this.armacao.armacaoMaterial=s.armacaoMaterial,this.armacao.tipoMontagem=s.tipoMontagem),this.carrinho.push(s),this.ordenarCarrinho(),await this.carregarItens(),await this.calculaTotal(),this.carrinho.sort((l,u)=>l.tipoItem==="Arma\xE7\xE3o"||u.tipoItem==="Arma\xE7\xE3o"?l.tipoItem==="Arma\xE7\xE3o"?1:-1:l.tipoItem.localeCompare(u.tipoItem))}},async pacientesAtualizar(){const e=await $db.contato.leFilhos(this.contatoResponsavel.id);e.push({nome:this.contatoResponsavel.nome,id:this.contatoResponsavel.id});const t=[];for(const o of e)t.push({label:o.nome,value:o.id});this.pacientes=$lodash.orderBy(t,"label")},async atualizar(){this.campos=$utils.clonar({...$db.envelope.vazio,...this.envelope.documento}),this.contatoResponsavel=await $db.hibrido.le({table:"contato",id:this.campos.idContatoResponsavel}),this.valoresTabelaPreco=[],this.modalDescontoMaximo={permiteDescontoMaximo:!1,titulo:"",msg:"",itens:[],resolve:void 0,reject:void 0,visivel:!1},this.tipoLente="",this.tipoLentes=this.tipoLentesOculos,this.carrinho=$utils.clonar(this.envelope.documentoItens||[]),this.armacao.alturaMontagemOD=null,this.armacao.alturaMontagemOE=null,this.armacao.diagonal=null,this.armacao.ponte=null,this.armacao.altura=null,this.armacao.largura=null,this.armacao.armacaoMaterial="",this.armacao.tipoMontagem="";const e=[];for(const a in this.carrinho){if(this.carrinho[a].idItem){const i=await $erp().item.get(this.carrinho[a].idItem);e.push(i.tipo||"")}if(this.carrinho[a].tipoItem==="Arma\xE7\xE3o"){this.armacao.alturaMontagemOD=$utils.numberOrNull(this.carrinho[a].alturaMontagemOD),this.armacao.alturaMontagemOE=$utils.numberOrNull(this.carrinho[a].alturaMontagemOE),this.armacao.diagonal=$utils.numberOrNull(this.carrinho[a].diagonal),this.armacao.ponte=$utils.numberOrNull(this.carrinho[a].ponte),this.armacao.altura=$utils.numberOrNull(this.carrinho[a].altura),this.armacao.largura=$utils.numberOrNull(this.carrinho[a].largura),this.armacao.armacaoMaterial=this.carrinho[a].armacaoMaterial,this.armacao.tipoMontagem=this.carrinho[a].tipoMontagem,this.tipoLente=this.carrinho[a].oculos;break}}this.tipoEnvelope="Oculos";const t=new RegExp(/contato/i);for(const a of e)if(t.test(a)){this.tipoEnvelope="Lentes";break}const o=this.envelope.documentoContato.find(a=>a.descricao==="Laborat\xF3rio");if(this.descricaoLaboratorio="",o!=null&&o.idContato){const a=await $db.hibrido.le({table:"contato",id:o.idContato});this.descricaoLaboratorio=a.apelido}if(!this.campos.dataHoraPrevisto){let a="",i=await $db.configuracoes.le({nome:"venda.envelope.previsaoentrega"});i.length&&(i=parseInt(i[0].valor)),Number.isInteger(i)||(i=15);let n=new Date;const s=n.getDate();n.setDate(s+i),a=new Date(n.setHours(0,0,0,0)),this.campos.dataHoraPrevisto=Xo.formatDate(a),this.envelope.documento.dataHoraPrevisto=Xo.formatDate(a)}let r;r=String(new Date(this.campos.dataHoraPrevisto).getHours()).padStart(2,"0"),r+=":",r+=String(new Date(this.campos.dataHoraPrevisto).getMinutes()).padStart(2,"0"),this.dataPrevisaoEntrega=new Date(new Date(this.campos.dataHoraPrevisto).toDateString()),this.horaPrevisaoEntrega=r,await Promise.all([this.pacientesAtualizar(),this.atualizarArmacaoMaterial(),this.atualizarTipoMontagem(),this.atualizarReceitaV2(this.campos.idDocumentoAdicional),this.ordenarCarrinho(),this.carregarItens(),this.carregarPupilometro()]),this.visivel=!0,await this.$nextTick(),this.$refs.arquivo.somenteLeitura=this.envelope.somenteLeitura,await this.obterClassificacaoDestinatario(this.campos.idContato),await this.atualizarDocumentoMetas(),this.$refs.faturamento.atualizar(),await this.abrirReceitaAoAbrirEnvelope(),await this.configuraImpressosWhatsapp(),await this.configuraImpressosEmail(),await this.permissaoEditarNumero()},async carregarItens(){for(const e of this.carrinho)if(!!e.idItem&&!(e.idItem in this.itens)){let t=await $erp().item.get(e.idItem);t={...t,marca:t.marca||"",referencia:t.referencia||"",observacao:t.observacao||"",aplicacao:t.aplicacao||"",imagem:t.imagem||""};const o=$utils.clonarV2(this.itens);o[t.id]=t,this.itens=o}},async carregarPupilometro(){var o,r;$db.permissao.objeto("pupilometro").then(a=>{this.permissaoPupilometro=a});const t=(await $db.hibrido.lista({table:"json",where:{descricao:"Pupil\xF4metro",referencia:"idEnvelope:"+this.campos.id}})).find(a=>a.id);this.modalPupilometro.pupilometroOriginal={},this.modalPupilometro.pupilometroAtual={},t&&(this.modalPupilometro.pupilometroOriginal=$utils.clonarV2(t),this.modalPupilometro.pupilometroAtual=$utils.clonarV2(t)),this.tipoPupilometro="";try{const a=JSON.parse(this.modalPupilometro.pupilometroAtual.json);this.tipoPupilometro=(r=(o=a==null?void 0:a.medidas)==null?void 0:o.tipo)!=null?r:"Presencial"}catch{}},async selecionarContato(e){const{placeholder:t,filtro:o,habilitarBotaoNovoContato:r}={placeholder:"Selecione o contato",filtro:{ativo:!0},...e},a=await $g.promptContato.show({filtro:o,placeholder:t,habilitarBotaoNovoContato:r});if(!a)throw new Error("Contato n\xE3o selecionado");return a},async obterClassificacaoDestinatario(e){if(this.classificacaoDestinatario=null,!e)return;const t=await $erp().contato.get(e);if(!t)return;const o=(t.numeroDocumentoNacional||"").trim().replace(/\D/g,""),r=(t.numeroDocumentoEstadual||"").trim().replace(/\D/g,"");if(o.length===14){this.classificacaoDestinatario=2,r&&(r||"").toLowerCase()!=="isento"&&(this.classificacaoDestinatario=1);return}this.classificacaoDestinatario=0},async obterContatoUsuario(){const e=JSON.parse(localStorage.getItem("usuario"))||{};let t={};return e.codigoUsuario&&(t=(await $erp().contato.where({codigoUsuario:e.codigoUsuario}).toArray()).find(o=>o.id)||{}),t},async atualizarDocumentoMetas(){if(!this.$refs.documentoMetas)return;const e=await $db.contato.leCompleto(this.envelope.documento.idContato);this.contato.imagem=e.imagem;const t=e.endereco.find(i=>i.grupo==="Principal")||e.endereco[0]||"",o=e.telefone.find(i=>i.grupo==="Principal")||e.telefone[0]||"";let r="";r="".concat((t==null?void 0:t.logradouro)||"",", ",(t==null?void 0:t.numero)||""," ",(t==null?void 0:t.complemento)||""," - ",(t==null?void 0:t.bairro)||""," - ",(t==null?void 0:t.cep)||""," - ",(t==null?void 0:t.municipio)||"","/",(t==null?void 0:t.uf)||""),r===",   -  -  - /"&&(r="");const a=await $db.contato.le({id:this.envelope.documento.idEmpresa});this.envelope.documento.numeroDocumentoEmpresa=a.numeroDocumentoNacional,this.envelope.documento.telefoneContato=o.telefone,this.envelope.documento.descricaoContatoEndereco=r,this.envelope.documento.idContatoIndicacao=this.campos.idContatoIndicacao,this.$refs.documentoMetas.documento=$utils.clonar(this.envelope.documento),this.$refs.documentoMetas.documentoContato=$utils.clonar(this.envelope.documentoContato)},async alterarCliente(){var t;const e=await this.selecionarContato({placeholder:"Selecione o cliente",filtro:{ativo:!0,somenteCarteira:!0}});if(e.id){if((await $db.venda.titulosPendentesAtraso({idContato:e.id})).length&&$q.notify({message:"O Cliente possui t\xEDtulo(s) pendente(s) em atraso!",timeout:0,type:"warning",closeBtn:!0}),(e.condutaRestricao||"").trim()){$q.notify({message:e.condutaRestricao,timeout:0,type:"negative",closeBtn:!0});return}this.envelope.documento.idContato===this.envelope.documento.idContatoResponsavel&&(this.envelope.documento.idContato=e.id,this.envelope.documento.descricaoContato=(t=e.nome)!=null?t:""),this.envelope.documento.idContatoResponsavel=e.id,this.contatoResponsavel=$utils.clonar(e),this.campos=$utils.clonar(this.envelope.documento),await this.atualizarDocumentoMetas(),await this.filtrarReceitas()}},async alterarVendedor(){const e=await this.selecionarContato({placeholder:"Selecione o vendedor",filtro:{ativo:!0,vendedores:!0}});e.id&&(this.envelope.documento.idContatoVendedor=e.id,this.campos=$utils.clonar(this.envelope.documento),await this.atualizarDocumentoMetas())},async alterarTabelaPreco(){const e=await this.selecionarItemTabelaPreco(null,this.envelope.documento.idEmpresa);e.id&&(this.envelope.documento.idItemTabelaPreco=e.id,this.campos=$utils.clonar(this.envelope.documento),await this.atualizarDocumentoMetas())},async selecionarItemTabelaPreco(e,t){if(!e)return this.$refs.promptItemTabelaPreco.placeholder="Selecione a tabela de pre\xE7o",this.$refs.promptItemTabelaPreco.filtro={tabelaMaster:!0,idContatoEmpresa:t},this.$refs.promptItemTabelaPreco.mostrar(),new Promise((o,r)=>{this.resolve=o,this.reject=r});e.id||this.reject("Tabela de pre\xE7o n\xE3o selecionada"),this.resolve(e)},async alterarDocumentoOperacao(){try{const e=await this.selecionarDocumentoOperacaoViaPrompt();e.id&&(this.envelope.documento.operacao=e.descricao,this.envelope.documento.codigoDocumentoOperacao=e.codigoDocumentoOperacao,this.finalidadeDestinatario=e.finalidade,this.campos=$utils.clonar(this.envelope.documento),await this.atualizarDocumentoMetas())}catch(e){console.error("alterarDocumentoOperacao: ",e)}},async alterarAltMontDataPrev(){const e={id:this.carrinho.find(({tipoItem:o})=>o==="Arma\xE7\xE3o").id,alturaMontagemOD:this.armacao.alturaMontagemOD,alturaMontagemOE:this.armacao.alturaMontagemOE},t={id:this.campos.id,dataHoraPrevisto:this.campos.dataHoraPrevisto};this.modalAltMontDataPrev={visivel:!0,documentoItemOriginal:e,documentoOriginal:t}},async salvarAltMontDataPrev(){const e={id:this.carrinho.find(({tipoItem:o})=>o==="Arma\xE7\xE3o").id,alturaMontagemOD:this.armacao.alturaMontagemOD,alturaMontagemOE:this.armacao.alturaMontagemOE},t={id:this.campos.id,dataHoraPrevisto:this.campos.dataHoraPrevisto};await $db.hibrido.grava("documentoItem",{atual:e,original:this.modalAltMontDataPrev.documentoItemOriginal}),await $db.hibrido.grava("documento",{atual:t,original:this.modalAltMontDataPrev.documentoOriginal}),this.modalAltMontDataPrev.visivel=!1},async selecionarDocumentoOperacaoViaPrompt(e){if(!e)return this.$refs.promptDocumentoOperacao.placeholder="Selecione a opera\xE7\xE3o",this.$refs.promptDocumentoOperacao.mostrar({classificacaoDestinatario:this.classificacaoDestinatario}),new Promise((t,o)=>{this.resolve=t,this.reject=o});if(!e.id){this.reject("Opera\xE7\xE3o n\xE3o selecionada");return}this.resolve(e)},async selecionarContatoIndicacao(){const e=await this.selecionarContato({placeholder:"Selecione a indica\xE7\xE3o",filtro:{ativo:!0}});e.id&&(this.envelope.documento.idContatoIndicacao=e.id,this.campos=$utils.clonar(this.envelope.documento),await this.atualizarDocumentoMetas())},async removerIndicacao(){this.envelope.documento.idContatoIndicacao="",this.campos=$utils.clonar(this.envelope.documento),await this.atualizarDocumentoMetas()},async selecionarLaboratorio(){const e=await this.selecionarContato({placeholder:"Selecione o laborat\xF3rio",filtro:{ativo:!0,segmento:"Laborat\xF3rio"}});if(!(e!=null&&e.id))return;let t=$utils.clonar(this.envelope.documentoContato);t.some(o=>o.descricao==="Laborat\xF3rio"&&o.idContato===e.id)||(t=t.filter(o=>o.descricao!=="Laborat\xF3rio"),t.push({id:$utils.uuid(),idContato:e.id,idDocumento:this.envelope.documento.id,descricao:"Laborat\xF3rio"}),this.envelope.documentoContato=$utils.clonar(t),this.descricaoLaboratorio=e.apelido,await this.atualizarDocumentoMetas())},async removerLaboratorio(){let e=$utils.clonar(this.envelope.documentoContato);e=e.filter(t=>t.descricao!=="Laborat\xF3rio"),this.envelope.documentoContato=$utils.clonar(e),this.descricaoLaboratorio="",await this.atualizarDocumentoMetas()},async alocarConvenio(){const e=await this.selecionarContato({placeholder:"Selecione o conv\xEAnio",filtro:{convenios:!0,idContato:this.envelope.documento.idContatoResponsavel}});if(!(e!=null&&e.id))return;let t=$utils.clonar(this.envelope.documentoContato);t.some(o=>o.descricao==="Conv\xEAnio"&&o.idContato===e.id)||(t=t.filter(o=>o.descricao!=="Conv\xEAnio"),t.push({id:$utils.uuid(),idContato:e.id,idDocumento:this.envelope.documento.id,descricao:"Conv\xEAnio"}),this.envelope.documentoContato=$utils.clonar(t),await this.atualizarDocumentoMetas())},async removerConvenio(){let e=$utils.clonar(this.envelope.documentoContato);e=e.filter(t=>t.descricao!=="Conv\xEAnio"),this.envelope.documentoContato=$utils.clonar(e),await this.atualizarDocumentoMetas()},async permissaoEditarNumero(){var t;const e=await $db.configuracoes.le({nome:"envelope.editar.numero"});this.envelopeNumero=this.envelope.documento.numero,this.envelopeEditarNumero=((t=e[0])==null?void 0:t.valor)==="1"},async configuraImpressosWhatsapp(){let e=await $db.configuracoes.le({prefixoNome:"envelope.whatsapp.enviar."});e=e.filter(t=>t.idEmpresa===this.envelope.documento.idEmpresa||!t.idEmpresa),this.configImpressosWhatsapp=e.map(t=>({...t,idEnvelope:this.envelope.documento.id}))},async configuraImpressosEmail(){let e=await $db.configuracoes.le({prefixoNome:"envelope.email.enviar."});e=e.filter(t=>t.idEmpresa===this.envelope.documento.idEmpresa||!t.idEmpresa),this.configImpressosEmail=e.map(t=>({...t,idEnvelope:this.envelope.documento.id}))},async enviarImpresso(e,t){var o,r;e==="whatsapp"&&await $utils.enviarWhatsapp({configuracao:$utils.clonar(t),documento:$utils.clonar((o=this.envelope)==null?void 0:o.documento),loading:!0,dialog:!0}),e==="email"&&await $utils.enviarEmail({configuracao:$utils.clonar(t),documento:$utils.clonar((r=this.envelope)==null?void 0:r.documento),loading:!0,dialog:!0})}}},CMe={class:"layout-padding q-pa-none q-pb-md q-mt-md"},wMe={class:"u-container"},EMe={class:"bg-white round-borders q-pa-md q-py-md q-my-md"},SMe={key:0,class:"text-caption q-mb-sm"},IMe={class:"col-12 col-md"},AMe={class:"col-12 col-md-auto"},TMe={class:"col-12 col-md"},DMe={class:"col-12 col-md-auto"},OMe={class:"q-pa-md"},PMe={key:0,class:"q-pa-lg text-center"},FMe={class:"col-12 col-sm-6 col-md-4"},MMe={class:"col-12 col-sm-6 col-md-4"},NMe={class:"col-12 col-sm-6 col-md-2"},kMe={class:"col-12 col-sm-6 col-md-2"},RMe={key:0,class:"col-12"},VMe={class:"col"},BMe={class:"col"},qMe={class:"col"},LMe={class:"col"},$Me={class:"col"},UMe={class:"col"},zMe={class:"col"},HMe={class:"col"},jMe={class:"col"},GMe={class:"col"},WMe={class:"col"},QMe={class:"col"},XMe={class:"col"},KMe={class:"col"},YMe={class:"col"},JMe={class:"col"},ZMe={class:"col-12 col-sm-4"},e6e={class:"col-12 col-sm-4"},t6e={class:"col-12 col-sm-4"},o6e={key:0,class:"text-center"},a6e={class:"col-12 col-md-auto"},r6e={class:"col-12 col-md"},i6e={class:"col-4 col-md"},n6e={class:"col-4 col-md"},s6e={class:"col-4 col-md"},l6e={class:"col-4 col-md"},c6e={class:"q-col-gutter-sm row justify-end q-mt-sm"},u6e={class:"col-12 col-md-4 offset-md-8"},d6e={class:"col-8 text-right"},f6e={class:"col"},m6e={class:"col-8 q-mt-sm text-right",style:{"padding-top":"8px"}},p6e={class:"col-12 col-md-shrink"},h6e={class:"col"},v6e={class:"col-shrink"},g6e={class:"col-xs-6 col-md"},_6e={class:"col-xs-6 col-md"},b6e={class:"col-12 col-lg-3"},y6e={class:"col-xs-6 col-md-shrink"},x6e={class:"col-xs-6 col-md-shrink"},C6e={class:"col-6 col-md"},w6e={class:"col-6 col-md"},E6e={class:"col-6 col-md"},S6e={class:"col-6 col-md"},I6e={class:"col-12 col-lg-3"},A6e={class:"col-12 col-lg-3"},T6e={class:"Fatura-faturamento round-borders q-pa-sm"},D6e={class:"u-container"},O6e={class:"row justify-end"},P6e={class:"row justify-end"},F6e={class:"layout-padding"},M6e={class:"q-pa-sm"},N6e={class:"q-mt-lg text-right"},k6e={class:"layout-padding"},R6e={class:"q-pa-sm"},V6e={key:0},B6e={class:"q-mt-lg text-right"},q6e={class:"layout-padding"},L6e={class:"q-mt-lg text-right"};function $6e(e,t,o,r,a,i){const n=Ve("avatar"),s=Ve("badge"),l=Ve("documento-codigo"),u=Ve("documento-metas"),c=Ve("campo"),d=Ve("row"),f=Ve("Arquivo"),m=Ve("CodigoBarras"),p=Ve("Tutorial"),v=Ve("faturamento"),g=Ve("pupilometro"),x=Ve("g-col"),b=Ve("g-row"),_=Ve("ContatoCriar"),w=Ve("PromptItemV2"),S=Ve("receita"),D=Ve("prompt-item-tabela-preco-novo"),M=Ve("prompt-documento-operacao"),O=Ve("TitulosPendentesEmAtraso");return B(),be("div",null,[h(Ht,{modelValue:a.visivel,"onUpdate:modelValue":t[47]||(t[47]=T=>a.visivel=T),persistent:"",maximized:"",onKeyup:jr(i.fechar,["esc"]),onHide:t[48]||(t[48]=T=>e.$emit("fechou"))},{default:C(()=>[h(To,{view:"hHh LpR fFf",container:"",class:"bg-light"},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,null,{default:C(()=>[Ee(h(ae,{flat:"",round:"",dense:"",icon:"arrow_back"},null,512),[[st]]),h(lt,null,{default:C(()=>t[81]||(t[81]=[K("Envelope")])),_:1}),i.ehOrcamento?(B(),be("form",{key:0,onSubmit:t[0]||(t[0]=rt((...T)=>i.salvar_click&&i.salvar_click(...T),["prevent"]))},[h(ae,{class:"q-ml-sm no-shadow",color:"white","text-color":"primary",unelevated:"",label:"Salvar",type:"submit"})],32)):ie("",!0)]),_:1})]),_:1}),h(Jo,null,{default:C(()=>[A("div",CMe,[A("div",wMe,[A("div",EMe,[h(Je,{class:"Venda-barra bg-transparent q-px-none q-pt-none q-pb-md"},{default:C(()=>[h(n,{imagem:(a.contato||{}).imagem,rotulo:a.campos.descricaoContato,tamanho:"50"},null,8,["imagem","rotulo"]),h(lt,{class:"text-tertiary"},{default:C(()=>{var T;return[A("div",null,le(a.campos.descricaoContato),1),((T=a.contatoResponsavel)==null?void 0:T.id)&&a.contatoResponsavel.id!==a.campos.idContato?(B(),be("div",SMe,le(a.contatoResponsavel.nome),1)):ie("",!0),A("div",null,[h(s,{denso:""},{default:C(()=>[K(le(i.descricaoClassificacaoDestinatario),1)]),_:1})])]}),_:1}),a.envelopeEditarNumero&&i.ehOrcamento?(B(),oe(ma,{key:0,modelValue:a.envelopeNumero,"onUpdate:modelValue":t[1]||(t[1]=T=>a.envelopeNumero=T),borderless:"",dense:"",type:"number",class:"envelopeEditarNumero","bg-color":"light"},{prepend:C(()=>[h(Pe,{name:"tag",size:"xs"})]),_:1},8,["modelValue"])):(B(),oe(l,{key:1,documento:a.envelope.documento},null,8,["documento"])),h(ae,{color:"tertiary",flat:"",icon:"more_vert",round:""},{default:C(()=>[h(aa,{modelValue:a.menuVenda,"onUpdate:modelValue":t[4]||(t[4]=T=>a.menuVenda=T)},{default:C(()=>[Ee((B(),oe(At,{link:"",separator:""},{default:C(()=>[i.ehOrcamento?(B(),be(Qe,{key:0},[(B(!0),be(Qe,null,qt(a.configImpressosWhatsapp.filter(T=>T.valor),T=>(B(),oe(qe,{onClick:I=>i.enviarImpresso("whatsapp",T),clickable:"",key:T.valor},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"mdi-whatsapp"})]),_:1}),h(fe,null,{default:C(()=>[K(le(T.valor),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),(B(!0),be(Qe,null,qt(a.configImpressosEmail.filter(T=>T.valor),T=>(B(),oe(qe,{onClick:I=>i.enviarImpresso("email",T),clickable:"",key:T.valor},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"mail"})]),_:1}),h(fe,null,{default:C(()=>[K(le(T.valor),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),h(qe,{onClick:i.alterarCliente,clickable:""},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"how_to_reg"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[82]||(t[82]=[K("Alterar cliente")])),_:1})]),_:1})]),_:1},8,["onClick"]),h(qe,{onClick:i.alterarVendedor,clickable:""},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"how_to_reg"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[83]||(t[83]=[K("Alterar vendedor")])),_:1})]),_:1})]),_:1},8,["onClick"]),a.envelope.documentoItens.filter(T=>T.idItem).length?ie("",!0):(B(),oe(qe,{key:0,onClick:i.alterarTabelaPreco,clickable:""},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"attach_money"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[84]||(t[84]=[K("Alterar tabela de pre\xE7o")])),_:1})]),_:1})]),_:1},8,["onClick"])),a.envelope.documentoItens.filter(T=>T.idItem).length?ie("",!0):(B(),oe(qe,{key:1,onClick:i.alterarDocumentoOperacao,clickable:""},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"attach_money"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[85]||(t[85]=[K("Alterar Opera\xE7\xE3o")])),_:1})]),_:1})]),_:1},8,["onClick"])),a.envelope.documento.idContatoIndicacao?(B(),oe(qe,{key:2,onClick:t[2]||(t[2]=T=>i.removerIndicacao()),clickable:""},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"how_to_reg"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[86]||(t[86]=[K("Remover indica\xE7\xE3o")])),_:1})]),_:1})]),_:1})):(B(),oe(qe,{key:3,onClick:i.selecionarContatoIndicacao,clickable:""},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"how_to_reg"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[87]||(t[87]=[K("Selecionar indica\xE7\xE3o")])),_:1})]),_:1})]),_:1},8,["onClick"])),a.envelope.documentoContato.some(T=>T.descricao==="Conv\xEAnio")?(B(),oe(qe,{key:4,clickable:"",onClick:i.removerConvenio},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"input"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[88]||(t[88]=[K("Remover conv\xEAnio")])),_:1})]),_:1})]),_:1},8,["onClick"])):(B(),oe(qe,{key:5,clickable:"",onClick:i.alocarConvenio},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"input"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[89]||(t[89]=[K("Alocar conv\xEAnio")])),_:1})]),_:1})]),_:1},8,["onClick"]))],64)):ie("",!0),a.envelope.documentoItens.filter(T=>T.idItem).length?(B(),oe(qe,{key:1,onClick:i.alterarAltMontDataPrev,clickable:""},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"published_with_changes"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[90]||(t[90]=[K("Alterar")])),_:1}),h(Re,{caption:""},{default:C(()=>t[91]||(t[91]=[K("Alt. Montagem e Previs\xE3o")])),_:1})]),_:1})]),_:1},8,["onClick"])):ie("",!0),a.campos.id?Ee((B(),oe(qe,{key:2,clickable:"",onClick:t[3]||(t[3]=T=>e.$db.log.show({documentoId:a.campos.id}))},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"description"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[92]||(t[92]=[K("Ver Log")])),_:1})]),_:1})]),_:1})),[[st]]):ie("",!0)]),_:1})),[[st]])]),_:1},8,["modelValue"])]),_:1})]),_:1}),!i.ehOrcamento&&!a.campos.idFatura&&!~["Cancelado","N\xE3o Aprovado"].indexOf(a.campos.status)?(B(),oe(Je,{key:0,class:"q-px-none q-pt-none q-pb-md"},{default:C(()=>[h(Yp),h(ae,{onClick:i.retornarOrcamento,icon:"undo",color:"primary",label:"Retornar para or\xE7amento"},null,8,["onClick"])]),_:1})):ie("",!0),h(u,{ref:"documentoMetas"},null,512)]),h(Mt,{class:"q-px-md q-pt-none q-pb-md q-mb-md bg-white no-shadow"},{default:C(()=>[h(Je,{class:"q-pa-none"},{default:C(()=>[h(Pe,{name:"person",size:"24px"}),h(lt,null,{default:C(()=>t[93]||(t[93]=[K("Dados Principais")])),_:1})]),_:1}),h(d,{class:"items-center q-col-gutter-md"},{default:C(()=>[A("div",IMe,[h(ii,{modelValue:a.campos.descricaoContato,"onUpdate:modelValue":[t[5]||(t[5]=T=>a.campos.descricaoContato=T),i.selecionarPaciente],"use-input":"","hide-selected":"","fill-input":"","input-debounce":"500","stack-label":"",label:"Paciente",options:a.opcoesPacientes,onFilter:i.filtrarPacientes},{prepend:C(()=>[h(ae,{color:"tertiary",size:"md",icon:"person_add",dense:"",flat:"",round:"",onClick:i.abrirModalDependente},{default:C(()=>[h(Ft,null,{default:C(()=>t[94]||(t[94]=[K("Incluir paciente")])),_:1})]),_:1},8,["onClick"])]),"no-option":C(()=>[h(qe,null,{default:C(()=>[h(fe,{class:"text-grey"},{default:C(()=>t[95]||(t[95]=[K(" Resultado n\xE3o encontrado ")])),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter","onUpdate:modelValue"])]),A("div",AMe,[h(Ri,{readonly:a.envelope.somenteLeitura,modelValue:a.tipoEnvelope,"onUpdate:modelValue":[t[6]||(t[6]=T=>a.tipoEnvelope=T),i.alterarTipoEnvelope],class:"q-mr-sm",label:"\xD3culos",val:"Oculos"},null,8,["readonly","modelValue","onUpdate:modelValue"]),h(Ri,{readonly:a.envelope.somenteLeitura,modelValue:a.tipoEnvelope,"onUpdate:modelValue":[t[7]||(t[7]=T=>a.tipoEnvelope=T),i.alterarTipoEnvelope],label:"LDC",val:"Lentes"},{default:C(()=>[h(Ft,null,{default:C(()=>t[96]||(t[96]=[K("Lentes de Contato")])),_:1})]),_:1},8,["readonly","modelValue","onUpdate:modelValue"])]),A("div",TMe,[h(c,{modelValue:a.tipoLente,"onUpdate:modelValue":[t[8]||(t[8]=T=>a.tipoLente=T),i.alterarTipoLente],class:"col-12 col-lg-4",maxlength:"60",rotulo:"Tipo",tipo:"seletor",opcoes:a.tipoLentes,somenteLeitura:a.envelope.somenteLeitura},null,8,["modelValue","opcoes","somenteLeitura","onUpdate:modelValue"])]),A("div",DMe,[h(Ri,{modelValue:a.tipoOculos,"onUpdate:modelValue":t[9]||(t[9]=T=>a.tipoOculos=T),class:"q-mr-sm",disable:a.envelope.somenteLeitura||a.tipoEnvelope!=="Oculos",label:"Vista",val:"Vista"},null,8,["modelValue","disable"]),h(Ri,{modelValue:a.tipoOculos,"onUpdate:modelValue":t[10]||(t[10]=T=>a.tipoOculos=T),disable:a.envelope.somenteLeitura||a.tipoEnvelope!=="Oculos",label:"Solar",val:"Solar"},null,8,["modelValue","disable"])])]),_:1})]),_:1}),h(Mt,{class:"q-px-md q-pt-none q-pb-md q-mb-md no-shadow"},{default:C(()=>[h(Je,{class:"q-pa-none"},{default:C(()=>[h(Pe,{name:"mdi-file-eye",size:"24px"}),h(lt,null,{default:C(()=>t[97]||(t[97]=[K("Receita")])),_:1}),a.envelope.somenteLeitura?ie("",!0):(B(),oe(ae,{key:0,onClick:i.filtrarReceitas,color:"primary",dense:"",flat:"",icon:"search",round:""},{default:C(()=>[h(aa,null,{default:C(()=>[h(At,{separator:"",link:""},{default:C(()=>[(B(!0),be(Qe,null,qt(a.receitasDescricao,T=>Ee((B(),oe(qe,{clickable:"",key:T.value,onClick:I=>i.atualizarReceita(T.value)},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:T.icon,color:T.color},null,8,["name","color"])]),_:2},1024),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>[K(le(T.label),1)]),_:2},1024),h(Re,{caption:""},{default:C(()=>[A("small",null,le(T.stamp),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[st]])),128))]),_:1})]),_:1}),h(Ft,{anchor:"bottom middle",self:"center middle"},{default:C(()=>t[98]||(t[98]=[K("Selecionar receita")])),_:1})]),_:1},8,["onClick"])),a.envelope.somenteLeitura?ie("",!0):(B(),oe(ae,{key:1,color:"primary",dense:"",flat:"",icon:"add",onClick:t[11]||(t[11]=T=>i.abrirModalReceita("",!1)),round:""},{default:C(()=>[h(Ft,{anchor:"bottom middle",self:"center middle"},{default:C(()=>t[99]||(t[99]=[K("Adicionar")])),_:1})]),_:1})),a.envelope.somenteLeitura?ie("",!0):(B(),oe(ae,{key:2,color:"tertiary",dense:"",flat:"",icon:"more_vert",round:""},{default:C(()=>[h(aa,null,{default:C(()=>[h(At,{link:"",separator:""},{default:C(()=>[a.receitasDescricao.length?Ee((B(),oe(qe,{key:0,clickable:"",onClick:t[12]||(t[12]=T=>i.abrirModalReceita(a.receita.id,!1))},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"edit"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[100]||(t[100]=[K("Editar")])),_:1})]),_:1})]),_:1})),[[st]]):ie("",!0),a.receitasDescricao.length?Ee((B(),oe(qe,{key:1,clickable:"",onClick:t[13]||(t[13]=T=>i.abrirModalReceita(a.receita.id,!0))},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"file_copy"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[101]||(t[101]=[K("Duplicar")])),_:1})]),_:1})]),_:1})),[[st]]):ie("",!0)]),_:1})]),_:1})]),_:1}))]),_:1}),A("div",OMe,[a.receitasDescricao.length?ie("",!0):(B(),be("div",PMe,[A("p",null,"N\xE3o h\xE1 receitas para o paciente "+le(a.campos.descricaoContato)+".",1),t[102]||(t[102]=A("p",{class:"text-caption"},"Para incluir, utilize os bot\xF5es acima ou insira via QR Code.",-1))])),a.receitasDescricao.length?(B(),oe(d,{key:1,class:"q-col-gutter-md"},{default:C(()=>[A("div",FMe,[t[103]||(t[103]=A("span",{class:"text-body2"},"Paciente: ",-1)),A("strong",null,le((a.receita.paciente||{}).nome),1)]),A("div",MMe,[t[104]||(t[104]=A("span",{class:"text-body2"},"M\xE9dico: ",-1)),A("strong",null,le((a.receita.medico||{}).nome),1)]),A("div",NMe,[t[105]||(t[105]=A("span",{class:"text-body2"},"Data: ",-1)),A("strong",null,le(e.$filters.data(a.receita.data)),1)]),A("div",kMe,[t[106]||(t[106]=A("span",{class:"text-body2"},"Validade: ",-1)),A("strong",null,le(e.$filters.data(a.receita.validade)),1)]),a.receita.observacoes?(B(),be("div",RMe,[t[107]||(t[107]=A("strong",{class:"text-body2"},"Observa\xE7\xE3o:",-1)),A("p",null,le(a.receita.observacoes),1)])):ie("",!0)]),_:1})):ie("",!0),a.receitasDescricao.length?(B(),oe(d,{key:2,class:"q-col-gutter-md"},{default:C(()=>[h(At,{class:"col-12 col-lg-6",highlight:"","no-border":""},{default:C(()=>[h(qe,{class:"q-px-none"},{default:C(()=>[h(fe,{avatar:"",class:"mw100"}),h(fe,{class:"text-subtitle1 text-weight-bold"},{default:C(()=>t[108]||(t[108]=[K("Longe")])),_:1})]),_:1}),h(qe,{class:"q-px-none"},{default:C(()=>[h(fe,{avatar:"",class:"mw100"}),h(fe,{class:"text-body2 text-weight-bold"},{default:C(()=>[h(d,null,{default:C(()=>t[109]||(t[109]=[A("div",{class:"col"},"Esf\xE9rico",-1),A("div",{class:"col"},"Cilindrico",-1),A("div",{class:"col"},"Eixo",-1),A("div",{class:"col"},"DNP",-1)])),_:1})]),_:1})]),_:1}),h(qe,{class:"q-px-none"},{default:C(()=>[h(fe,{avatar:"",class:"mw100"},{default:C(()=>[h(fe,null,{default:C(()=>t[110]||(t[110]=[K("OD")])),_:1})]),_:1}),h(fe,null,{default:C(()=>[h(d,null,{default:C(()=>{var T,I,N,P,F,L,z,H,X,Y,de,ye,W,re,_e,ve,ke,Ie,he,De;return[A("div",VMe,le(e.$filters.numeroSinal((F=(P=(N=(I=(T=a.receita)==null?void 0:T.prescricao)==null?void 0:I.dioptria)==null?void 0:N.od)==null?void 0:P.longe)==null?void 0:F.esferico,2)),1),A("div",BMe,le(e.$filters.numeroSinal((Y=(X=(H=(z=(L=a.receita)==null?void 0:L.prescricao)==null?void 0:z.dioptria)==null?void 0:H.od)==null?void 0:X.longe)==null?void 0:Y.cilindrico,2)),1),A("div",qMe,le(e.$filters.numeroOuBranco((_e=(re=(W=(ye=(de=a.receita)==null?void 0:de.prescricao)==null?void 0:ye.dioptria)==null?void 0:W.od)==null?void 0:re.longe)==null?void 0:_e.eixo)),1),A("div",LMe,le(e.$filters.numeroOuBranco((De=(he=(Ie=(ke=(ve=a.receita)==null?void 0:ve.prescricao)==null?void 0:ke.dioptria)==null?void 0:Ie.od)==null?void 0:he.longe)==null?void 0:De.dnp,2)),1)]}),_:1})]),_:1})]),_:1}),h(qe,{class:"q-px-none"},{default:C(()=>[h(fe,{avatar:"",class:"mw100"},{default:C(()=>[h(fe,null,{default:C(()=>t[111]||(t[111]=[K("OE")])),_:1})]),_:1}),h(fe,null,{default:C(()=>[h(d,null,{default:C(()=>{var T,I,N,P,F,L,z,H,X,Y,de,ye,W,re,_e,ve;return[A("div",$Me,le(e.$filters.numeroSinal((P=(N=(I=(T=a.receita.prescricao)==null?void 0:T.dioptria)==null?void 0:I.oe)==null?void 0:N.longe)==null?void 0:P.esferico,2)),1),A("div",UMe,le(e.$filters.numeroSinal((H=(z=(L=(F=a.receita.prescricao)==null?void 0:F.dioptria)==null?void 0:L.oe)==null?void 0:z.longe)==null?void 0:H.cilindrico,2)),1),A("div",zMe,le(e.$filters.numeroOuBranco((ye=(de=(Y=(X=a.receita.prescricao)==null?void 0:X.dioptria)==null?void 0:Y.oe)==null?void 0:de.longe)==null?void 0:ye.eixo)),1),A("div",HMe,le(e.$filters.numeroOuBranco((ve=(_e=(re=(W=a.receita.prescricao)==null?void 0:W.dioptria)==null?void 0:re.oe)==null?void 0:_e.longe)==null?void 0:ve.dnp,2)),1)]}),_:1})]),_:1})]),_:1})]),_:1}),h(At,{class:"col-12 col-lg-6",highlight:"","no-border":""},{default:C(()=>[h(qe,{class:"q-px-none"},{default:C(()=>[h(fe,{avatar:"",class:"mw100"},{default:C(()=>t[112]||(t[112]=[K("\xA0\xA0")])),_:1}),h(fe,{class:"text-subtitle1 text-weight-bold"},{default:C(()=>[h(d,null,{default:C(()=>t[113]||(t[113]=[A("div",{class:"col"},"M\xE9dio",-1),A("div",{class:"col"},"Perto",-1)])),_:1})]),_:1})]),_:1}),h(qe,{class:"q-px-none"},{default:C(()=>[h(fe,{avatar:"",class:"mw100"},{default:C(()=>t[114]||(t[114]=[K("\xA0\xA0")])),_:1}),h(fe,{class:"text-body2 text-weight-bold"},{default:C(()=>[h(d,null,{default:C(()=>t[115]||(t[115]=[A("div",{class:"col"},"Esf\xE9rico",-1),A("div",{class:"col"},"DNP",-1),A("div",{class:"col"},"Esf\xE9rico",-1),A("div",{class:"col"},"DNP",-1)])),_:1})]),_:1})]),_:1}),h(qe,null,{default:C(()=>[h(fe,{avatar:"",class:"mw100"},{default:C(()=>[h(fe,null,{default:C(()=>t[116]||(t[116]=[K("OD")])),_:1})]),_:1}),h(fe,null,{default:C(()=>[h(d,null,{default:C(()=>{var T,I,N,P,F,L,z,H,X,Y,de,ye,W,re,_e,ve;return[A("div",jMe,le(e.$filters.numeroSinal((P=(N=(I=(T=a.receita.prescricao)==null?void 0:T.dioptria)==null?void 0:I.od)==null?void 0:N.medio)==null?void 0:P.esferico,2)),1),A("div",GMe,le(e.$filters.numeroOuBranco((H=(z=(L=(F=a.receita.prescricao)==null?void 0:F.dioptria)==null?void 0:L.od)==null?void 0:z.medio)==null?void 0:H.dnp,2)),1),A("div",WMe,le(e.$filters.numeroSinal((ye=(de=(Y=(X=a.receita.prescricao)==null?void 0:X.dioptria)==null?void 0:Y.od)==null?void 0:de.perto)==null?void 0:ye.esferico,2)),1),A("div",QMe,le(e.$filters.numeroOuBranco((ve=(_e=(re=(W=a.receita.prescricao)==null?void 0:W.dioptria)==null?void 0:re.od)==null?void 0:_e.perto)==null?void 0:ve.dnp,2)),1)]}),_:1})]),_:1})]),_:1}),h(qe,null,{default:C(()=>[h(fe,{avatar:"",class:"mw100"},{default:C(()=>[h(fe,null,{default:C(()=>t[117]||(t[117]=[K("OE")])),_:1})]),_:1}),h(fe,null,{default:C(()=>[h(d,null,{default:C(()=>{var T,I,N,P,F,L,z,H,X,Y,de,ye,W,re,_e,ve;return[A("div",XMe,le(e.$filters.numeroSinal((P=(N=(I=(T=a.receita.prescricao)==null?void 0:T.dioptria)==null?void 0:I.oe)==null?void 0:N.medio)==null?void 0:P.esferico,2)),1),A("div",KMe,le(e.$filters.numeroOuBranco((H=(z=(L=(F=a.receita.prescricao)==null?void 0:F.dioptria)==null?void 0:L.oe)==null?void 0:z.medio)==null?void 0:H.dnp,2)),1),A("div",YMe,le(e.$filters.numeroSinal((ye=(de=(Y=(X=a.receita.prescricao)==null?void 0:X.dioptria)==null?void 0:Y.oe)==null?void 0:de.perto)==null?void 0:ye.esferico,2)),1),A("div",JMe,le(e.$filters.numeroOuBranco((ve=(_e=(re=(W=a.receita.prescricao)==null?void 0:W.dioptria)==null?void 0:re.oe)==null?void 0:_e.perto)==null?void 0:ve.dnp,2)),1)]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):ie("",!0)])]),_:1}),h(Mt,{class:"q-px-md q-pt-none q-pb-md q-mb-md bg-white no-shadow"},{default:C(()=>[h(Je,{class:"q-pa-none"},{default:C(()=>[h(Pe,{name:"attach_file",size:"24px"}),h(lt,null,{default:C(()=>t[118]||(t[118]=[K("Arquivos")])),_:1})]),_:1}),A("div",null,[h(f,{id:a.envelope.documento.id,arquivos:a.envelope.arquivo,edicao:!a.envelope.somenteLeitura,ref:"arquivo",cartao:""},null,8,["id","arquivos","edicao"])])]),_:1}),h(Mt,{class:"q-px-md q-pt-none q-pb-md q-mb-md bg-white no-shadow"},{default:C(()=>[h(Je,{class:"q-pa-none"},{default:C(()=>[h(Pe,{name:"description",size:"24px"}),h(lt,null,{default:C(()=>t[119]||(t[119]=[K("Observa\xE7\xF5es")])),_:1})]),_:1}),h(d,{class:"q-col-gutter-md"},{default:C(()=>[A("div",ZMe,[h(c,{modelValue:a.campos.observacao,"onUpdate:modelValue":t[14]||(t[14]=T=>a.campos.observacao=T),tipo:"textoArea",rotulo:"Observa\xE7\xE3o","somente-leitura":a.envelope.somenteLeitura},null,8,["modelValue","somente-leitura"])]),A("div",e6e,[h(c,{modelValue:a.campos.observacaoInterna,"onUpdate:modelValue":t[15]||(t[15]=T=>a.campos.observacaoInterna=T),tipo:"textoArea",rotulo:"Observa\xE7\xE3o interna","somente-leitura":a.envelope.somenteLeitura},null,8,["modelValue","somente-leitura"])]),A("div",t6e,[h(c,{modelValue:a.campos.numeroOrdemCompra,"onUpdate:modelValue":t[16]||(t[16]=T=>a.campos.numeroOrdemCompra=T),autogrow:"",rotulo:"Ordem de Compra","somente-leitura":a.envelope.somenteLeitura,maxlength:"15",onKeydown:i.cortarEspacos},null,8,["modelValue","somente-leitura","onKeydown"])])]),_:1})]),_:1}),h(Mt,{class:"q-px-md q-pt-none q-pb-md q-mb-md bg-white no-shadow"},{default:C(()=>[h(Je,{class:"q-pa-none"},{default:C(()=>[h(Pe,{name:"shopping_cart",size:"24px"}),h(lt,null,{default:C(()=>t[120]||(t[120]=[K("Carrinho")])),_:1}),h(ae,{class:"hideondesktop",color:"primary",dense:"",flat:"",icon:"add",round:""},{default:C(()=>[h(aa,null,{default:C(()=>[h(At,{link:"",separator:""},{default:C(()=>[!a.envelope.somenteLeitura&&a.tipoEnvelope==="Lentes"?Ee((B(),oe(qe,{key:0,clickable:"",onClick:t[17]||(t[17]=T=>i.abrirModalItem("LentesContato"))},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"add"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[121]||(t[121]=[K("Lentes de Contato")])),_:1})]),_:1})]),_:1})),[[st]]):ie("",!0),!a.envelope.somenteLeitura&&a.tipoEnvelope==="Oculos"&&["Vista","Solar"].includes(a.tipoOculos)?Ee((B(),oe(qe,{key:1,clickable:"",onClick:t[18]||(t[18]=T=>i.abrirModalItem("Lentes"))},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"add"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[122]||(t[122]=[K("Lentes")])),_:1})]),_:1})]),_:1})),[[st]]):ie("",!0),!a.envelope.somenteLeitura&&a.tipoEnvelope==="Oculos"&&["Vista","Solar"].includes(a.tipoOculos)?Ee((B(),oe(qe,{key:2,clickable:"",onClick:t[19]||(t[19]=T=>i.abrirModalItem("Armacao"))},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"add"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[123]||(t[123]=[K("Arma\xE7\xE3o")])),_:1})]),_:1})]),_:1})),[[st]]):ie("",!0)]),_:1})]),_:1})]),_:1}),!a.envelope.somenteLeitura&&a.tipoEnvelope==="Lentes"?(B(),oe(ae,{key:0,onClick:t[20]||(t[20]=T=>i.abrirModalItem("LentesContato")),flat:"",color:"primary",class:"hideonmobile q-pl-xs q-pr-sm"},{default:C(()=>[h(Pe,{name:"add",class:"q-mr-xs"}),t[124]||(t[124]=K(" Lentes de Contato "))]),_:1})):ie("",!0),!a.envelope.somenteLeitura&&a.tipoEnvelope==="Oculos"&&["Vista","Solar"].includes(a.tipoOculos)?(B(),oe(ae,{key:1,onClick:t[21]||(t[21]=T=>i.abrirModalItem("Lentes")),flat:"",color:"primary",class:"hideonmobile q-pl-xs q-pr-sm"},{default:C(()=>[h(Pe,{name:"add",class:"q-mr-xs"}),t[125]||(t[125]=K(" Lentes "))]),_:1})):ie("",!0),!a.envelope.somenteLeitura&&a.tipoEnvelope==="Oculos"&&["Vista","Solar"].includes(a.tipoOculos)?(B(),oe(ae,{key:2,onClick:t[22]||(t[22]=T=>i.abrirModalItem("Armacao")),flat:"",class:"hideonmobile q-pl-xs q-pr-sm",color:"primary"},{default:C(()=>[h(Pe,{name:"add",class:"q-mr-xs"}),t[126]||(t[126]=K(" Arma\xE7\xE3o "))]),_:1})):ie("",!0),!a.envelope.somenteLeitura&&(a.tipoEnvelope==="Lentes"||a.tipoEnvelope==="Oculos"&&["Vista","Solar"].includes(a.tipoOculos))?(B(),oe(m,{key:3,documentoItens:a.carrinho,onAdicionar:i.adicionarItem,onAtualizar:i.selecionarItens,itemFiltros:{ativo:!0,bloquearVenda:!1,idEmpresa:a.campos.idEmpresa,idItemTabelaPreco:a.campos.idItemTabelaPreco}},null,8,["documentoItens","onAdicionar","onAtualizar","itemFiltros"])):ie("",!0)]),_:1}),a.carrinho.length?(B(!0),be(Qe,{key:1},qt(i.carrinhoSemArmacaoVazia,(T,I)=>(B(),oe(d,{key:I,class:"items-start q-col-gutter-md"},{default:C(()=>[A("div",a6e,[h(n,{imagem:(a.itens[T.idItem]||{}).imagem||"",rotulo:T.descricaoItem,tamanho:"120"},null,8,["imagem","rotulo"])]),A("div",r6e,[h(Je,{class:"Venda-itemBarra bg-transparent q-pa-none",color:"black",dark:""},{default:C(()=>[h(lt,{class:"q-pl-none"},{default:C(()=>[K(le(T.descricaoItem),1),A("span",null,le((a.itens[T.idItem]||{}).marca||""),1)]),_:2},1024),h(s,{class:"q-mr-sm"},{default:C(()=>[K(le(T.tipoItem)+" "+le((a.itens[T.idItem]||{}).referencia||""),1)]),_:2},1024),a.envelope.somenteLeitura?ie("",!0):(B(),oe(ae,{key:0,color:"tertiary",dense:"",flat:"",icon:"delete",round:"",onClick:N=>i.removerItem(I)},null,8,["onClick"]))]),_:2},1024),h(d,{class:"q-col-gutter-sm"},{default:C(()=>[A("div",i6e,[h(c,{somenteLeitura:a.envelope.somenteLeitura,modelValue:T.valorItem,"onUpdate:modelValue":N=>T.valorItem=N,dense:"",outlined:"","rotulo-fixo":"Valor",onBlur:N=>i.calculaTotalItem(I,"valorItem"),tipo:"decimal",decimals:"2"},null,8,["somenteLeitura","modelValue","onUpdate:modelValue","onBlur"])]),A("div",n6e,[h(d,{class:"items-center"},{default:C(()=>[h(Pe,{name:"mdi-minus",color:"primary"}),h(c,{somenteLeitura:a.envelope.somenteLeitura,modelValue:T.descontoPercentualItem,"onUpdate:modelValue":N=>T.descontoPercentualItem=N,dense:"",outlined:"",opcoes:{maximumValue:100},"rotulo-fixo":"Desconto",tipo:"decimal",decimals:"2",suffix:"%",onBlur:N=>i.calculaTotalItem(I,"descontoPercentualItem")},null,8,["somenteLeitura","modelValue","onUpdate:modelValue","onBlur"])]),_:2},1024)]),A("div",s6e,[h(c,{somenteLeitura:a.envelope.somenteLeitura,modelValue:T.descontoItem,"onUpdate:modelValue":N=>T.descontoItem=N,dense:"",outlined:"",opcoes:{minimumValue:0},"rotulo-fixo":"Desconto",onBlur:N=>i.calculaTotalItem(I,"descontoItem"),tipo:"decimal",decimals:"2"},null,8,["somenteLeitura","modelValue","onUpdate:modelValue","onBlur"])]),A("div",l6e,[h(d,{class:"items-center"},{default:C(()=>[h(Pe,{name:"mdi-equal",color:"primary",class:"hideonmobile"}),h(c,{modelValue:T.total,"onUpdate:modelValue":N=>T.total=N,dense:"",outlined:"","somente-leitura":"","rotulo-fixo":"Total",tipo:"decimal",decimals:"2"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)])]),_:2},1024),A("div",c6e,[!a.envelope.somenteLeitura&&T.tipoItem==="LOE"?(B(),oe(ae,{key:0,color:"primary",flat:"",icon:"add",label:"Tratamento LOE",onClick:N=>i.abrirModalItem("Tratamento LOE",T.id)},null,8,["onClick"])):ie("",!0),!a.envelope.somenteLeitura&&T.tipoItem==="LOD"?(B(),oe(ae,{key:1,color:"primary",flat:"",icon:"add",label:"Tratamento LOD",onClick:N=>i.abrirModalItem("Tratamento LOD",T.id)},null,8,["onClick"])):ie("",!0)])])]),_:2},1024))),128)):(B(),be("div",o6e,t[127]||(t[127]=[A("p",null,"N\xE3o h\xE1 itens no carrinho",-1),A("p",{class:"text-caption"},"Para adicionar, utilize os bot\xF5es acima ou insira o c\xF3digo de barras",-1)]))),a.carrinho.length?(B(),oe(d,{key:2,class:"q-col-gutter-md q-mt-md"},{default:C(()=>[A("div",u6e,[h(d,{class:"q-col-gutter-md"},{default:C(()=>[t[128]||(t[128]=A("div",{class:"col-4"},"Subtotal",-1)),A("strong",d6e,le(e.$filters.numero(a.campos.subTotal,2)),1),t[129]||(t[129]=A("div",{class:"col-4",style:{"padding-top":"16px"}},"Desconto",-1)),h(c,{"somente-leitura":a.envelope.somenteLeitura,modelValue:a.campos.totalPercentualDesconto,"onUpdate:modelValue":t[23]||(t[23]=T=>a.campos.totalPercentualDesconto=T),class:"col-3",opcoes:{maximumValue:100},tipo:"decimal",decimals:"2",suffix:"%",onBlur:t[24]||(t[24]=T=>i.calculaTotal("descontoPercentual"))},null,8,["somente-leitura","modelValue"]),h(c,{"somente-leitura":a.envelope.somenteLeitura,modelValue:a.campos.totalDesconto,"onUpdate:modelValue":t[25]||(t[25]=T=>a.campos.totalDesconto=T),class:"col-5",opcoes:{minimumValue:0},onBlur:t[26]||(t[26]=T=>i.calculaTotal("desconto")),tipo:"decimal",decimals:"2"},null,8,["somente-leitura","modelValue"]),t[130]||(t[130]=A("div",{class:"col-4",style:{"padding-top":"16px"}},"Frete",-1)),A("div",f6e,[h(Ri,{class:"q-mr-md",label:"CIF",val:"CIF",modelValue:a.campos.tipoFrete,"onUpdate:modelValue":[t[27]||(t[27]=T=>a.campos.tipoFrete=T),t[28]||(t[28]=T=>i.calculaTotal("frete"))],disable:!i.ehOrcamento,dense:""},null,8,["modelValue","disable"]),h(Ri,{label:"FOB",val:"FOB",modelValue:a.campos.tipoFrete,"onUpdate:modelValue":[t[29]||(t[29]=T=>a.campos.tipoFrete=T),t[30]||(t[30]=T=>i.calculaTotal("frete"))],disable:!i.ehOrcamento,dense:""},null,8,["modelValue","disable"])]),h(c,{class:"col-4",opcoes:{maximumValue:a.envelope.subTotal,minimumValue:0},tipo:"decimal",decimals:"2","somente-leitura":!i.ehOrcamento,modelValue:a.campos.valorFrete,"onUpdate:modelValue":t[31]||(t[31]=T=>a.campos.valorFrete=T),onBlur:t[32]||(t[32]=T=>i.calculaTotal("frete"))},null,8,["opcoes","somente-leitura","modelValue"]),t[131]||(t[131]=A("div",{class:"col-4 q-mt-sm",style:{"padding-top":"8px"}},"Total",-1)),A("strong",m6e,le(e.$filters.numero(a.campos.totalDocumento,2)),1)]),_:1})])]),_:1})):ie("",!0)]),_:1}),(B(),oe(Mt,{key:0,class:"q-px-md q-pt-none q-pb-md q-mb-md bg-white no-shadow"},{default:C(()=>[h(Je,{class:"q-pa-none"},{default:C(()=>[h(Pe,{name:"mdi-eye-settings-outline",size:"24px"}),h(lt,null,{default:C(()=>t[132]||(t[132]=[K("Pupil\xF4metro")])),_:1})]),_:1}),h(d,{class:"q-col-gutter-md"},{default:C(()=>[A("div",p6e,[h(d,{class:"q-px-none q-mx-none"},{default:C(()=>[A("div",h6e,[a.permissaoPupilometro&&this.tipoPupilometro?(B(),oe(ae,{key:0,label:"Pupil\xF4metro",unelevated:"",color:"primary",onClick:t[33]||(t[33]=T=>i.abrirModalPupilometro(this.tipoPupilometro))})):ie("",!0),a.permissaoPupilometro&&!this.tipoPupilometro?(B(),oe(ae,{key:1,label:"Pupil\xF4metro",unelevated:"",color:"primary"},{default:C(()=>[h(aa,null,{default:C(()=>[h(At,{link:"","no-border":"",separator:""},{default:C(()=>[Ee((B(),oe(qe,{clickable:"",onClick:t[34]||(t[34]=T=>i.abrirModalPupilometro("Presencial"))},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"add"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[133]||(t[133]=[K("Pupil\xF4metro (Arma\xE7\xE3o)")])),_:1})]),_:1})]),_:1})),[[st]]),Ee((B(),oe(qe,{clickable:"",onClick:t[35]||(t[35]=T=>i.abrirModalPupilometro("Cart\xE3o"))},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"add"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[134]||(t[134]=[K("Pupil\xF4metro (Cart\xE3o)")])),_:1})]),_:1})]),_:1})),[[st]])]),_:1})]),_:1})]),_:1})):ie("",!0)]),A("div",v6e,[h(p,{componente:"Envelope"})])]),_:1})]),A("div",g6e,[h(c,{"somente-leitura":a.envelope.somenteLeitura,modelValue:a.armacao.alturaMontagemOD,"onUpdate:modelValue":t[36]||(t[36]=T=>a.armacao.alturaMontagemOD=T),rotulo:"Alt. Mont. OD",tipo:"decimal",decimals:"2",permiteNull:""},null,8,["somente-leitura","modelValue"])]),A("div",_6e,[h(c,{"somente-leitura":a.envelope.somenteLeitura,modelValue:a.armacao.alturaMontagemOE,"onUpdate:modelValue":t[37]||(t[37]=T=>a.armacao.alturaMontagemOE=T),rotulo:"Alt. Mont. OE",tipo:"decimal",decimals:"2",permiteNull:""},null,8,["somente-leitura","modelValue"])]),A("div",b6e,[h(ii,{dense:"",rounded:"",modelValue:a.descricaoLaboratorio,"onUpdate:modelValue":t[38]||(t[38]=T=>a.descricaoLaboratorio=T),label:"Laborat\xF3rio",options:["a","b"],onFilter:i.selecionarLaboratorio,class:"col-12 col-sm-4"},{append:C(()=>[a.descricaoLaboratorio!==""?(B(),oe(Pe,{key:0,name:"close",onClick:rt(i.removerLaboratorio,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):ie("",!0),h(Pe,{name:"search",onClick:rt(i.selecionarLaboratorio,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onFilter"])]),A("div",y6e,[h(c,{modelValue:a.dataPrevisaoEntrega,"onUpdate:modelValue":[t[39]||(t[39]=T=>a.dataPrevisaoEntrega=T),i.ajustarDataHoraPrevisaoEntrega],rotulo:"Data Previs\xE3o de Entrega",maxlength:"10",tipo:"data",error:!!i.erroDataHoraPrevisto,errorMessage:i.erroDataHoraPrevisto},null,8,["modelValue","error","errorMessage","onUpdate:modelValue"])]),A("div",x6e,[h(c,{modelValue:a.horaPrevisaoEntrega,"onUpdate:modelValue":[t[40]||(t[40]=T=>a.horaPrevisaoEntrega=T),i.ajustarDataHoraPrevisaoEntrega],rotulo:"Hora",maxlength:"4",tipo:"hora"},null,8,["modelValue","onUpdate:modelValue"])])]),_:1})]),_:1})),(B(),oe(Mt,{key:1,class:"q-pa-md q-mb-md bg-white no-shadow"},{default:C(()=>[h(d,{class:"q-col-gutter-md"},{default:C(()=>[A("div",C6e,[h(c,{"somente-leitura":a.envelope.somenteLeitura,modelValue:a.armacao.diagonal,"onUpdate:modelValue":t[41]||(t[41]=T=>a.armacao.diagonal=T),tipo:"decimal",decimals:"2",rotulo:"Diagonal",permiteNull:""},null,8,["somente-leitura","modelValue"])]),A("div",w6e,[h(c,{"somente-leitura":a.envelope.somenteLeitura,modelValue:a.armacao.ponte,"onUpdate:modelValue":t[42]||(t[42]=T=>a.armacao.ponte=T),tipo:"decimal",decimals:"2",rotulo:"Ponte",permiteNull:""},null,8,["somente-leitura","modelValue"])]),A("div",E6e,[h(c,{"somente-leitura":a.envelope.somenteLeitura,modelValue:a.armacao.altura,"onUpdate:modelValue":t[43]||(t[43]=T=>a.armacao.altura=T),tipo:"decimal",decimals:"2",rotulo:"Altura Vertical",permiteNull:""},null,8,["somente-leitura","modelValue"])]),A("div",S6e,[h(c,{"somente-leitura":a.envelope.somenteLeitura,modelValue:a.armacao.largura,"onUpdate:modelValue":t[44]||(t[44]=T=>a.armacao.largura=T),rotulo:"Aro Total",tipo:"decimal",decimals:"2",permiteNull:""},null,8,["somente-leitura","modelValue"])]),A("div",I6e,[h(c,{"somente-leitura":a.envelope.somenteLeitura,modelValue:a.armacao.armacaoMaterial,"onUpdate:modelValue":t[45]||(t[45]=T=>a.armacao.armacaoMaterial=T),after:[{icon:"add_circle",handler(){i.abrirArmacaoMaterialModal()}}],opcoes:a.opcoesArmacaoMaterial,"rotulo-fixo":"Material",tipo:"seletor"},null,8,["somente-leitura","modelValue","after","opcoes"])]),A("div",A6e,[h(c,{"somente-leitura":a.envelope.somenteLeitura,modelValue:a.armacao.tipoMontagem,"onUpdate:modelValue":t[46]||(t[46]=T=>a.armacao.tipoMontagem=T),after:[{icon:"add_circle",handler(){i.abrirTipoMontagemModal()}}],opcoes:a.opcoesTipoMontagem,"rotulo-fixo":"Tipo Montagem",tipo:"seletor"},null,8,["somente-leitura","modelValue","after","opcoes"])])]),_:1})]),_:1})),A("div",T6e,[h(v,{documento:a.campos,ref:"faturamento"},null,8,["documento"])])])])]),_:1}),a.envelope.somenteLeitura?ie("",!0):(B(),oe(Ui,{key:0,bordered:"",class:"bg-light"},{default:C(()=>[A("div",D6e,[h(Je,{class:"bg-light"},{default:C(()=>[h(lt,{class:"text-right"},{default:C(()=>[h(ae,{class:"q-mx-md",color:"negative",flat:"",label:"N\xE3o aprovado",onClick:i.reprovarOrcamento},null,8,["onClick"]),h(ae,{color:"primary",label:"Finalizar",unelevated:"",onClick:i.finalizar},null,8,["onClick"])]),_:1})]),_:1})])]),_:1}))]),_:1})]),_:1},8,["modelValue","onKeyup"]),h(Ht,{modelValue:a.armacaoMaterialModal,"onUpdate:modelValue":t[51]||(t[51]=T=>a.armacaoMaterialModal=T)},{default:C(()=>[h(Mt,null,{default:C(()=>[h(Je,null,{default:C(()=>[h(lt,null,{default:C(()=>t[135]||(t[135]=[K("Cadastrar Material")])),_:1})]),_:1}),h(Ra,null,{default:C(()=>[h(c,{modelValue:a.armacaoMaterialDescricao,"onUpdate:modelValue":t[49]||(t[49]=T=>a.armacaoMaterialDescricao=T),modelModifiers:{trim:!0},class:"row",maxlength:"60",rotulo:"Material"},null,8,["modelValue"])]),_:1}),h(Je,null,{default:C(()=>[h(lt,null,{default:C(()=>[A("div",O6e,[h(ae,{flat:"",color:"tertiary",onClick:t[50]||(t[50]=T=>a.armacaoMaterialModal=!1),label:"Cancelar"}),h(ae,{unelevated:"",color:"primary",onClick:i.criarArmacaoMaterial,label:"Criar"},null,8,["onClick"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),h(Ht,{modelValue:a.tipoMontagemModal,"onUpdate:modelValue":t[54]||(t[54]=T=>a.tipoMontagemModal=T)},{default:C(()=>[h(Mt,null,{default:C(()=>[h(Je,null,{default:C(()=>[h(lt,null,{default:C(()=>t[136]||(t[136]=[K("Cadastrar Tipo Montagem")])),_:1})]),_:1}),h(Ra,null,{default:C(()=>[h(c,{modelValue:a.tipoMontagemDescricao,"onUpdate:modelValue":t[52]||(t[52]=T=>a.tipoMontagemDescricao=T),modelModifiers:{trim:!0},class:"row",maxlength:"60",rotulo:"Tipo Montagem"},null,8,["modelValue"])]),_:1}),h(Je,null,{default:C(()=>[h(lt,null,{default:C(()=>[A("div",P6e,[h(ae,{flat:"",color:"tertiary",onClick:t[53]||(t[53]=T=>a.tipoMontagemModal=!1),label:"Cancelar"}),h(ae,{unelevated:"",color:"primary",onClick:i.criarTipoMontagem,label:"Criar"},null,8,["onClick"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),h(Ht,{modelValue:a.modalPupilometro.visivel,"onUpdate:modelValue":t[56]||(t[56]=T=>a.modalPupilometro.visivel=T),maximized:"",onHide:t[57]||(t[57]=T=>i.fecharModalPupilometro())},{default:C(()=>[h(To,{class:"bg-light"},{default:C(()=>[h(g,{ref:"pupilometro",avancar:a.modalPupilometro.avancar,somenteLeitura:a.envelope.somenteLeitura,onFecharModal:t[55]||(t[55]=T=>i.fecharModalPupilometro())},null,8,["avancar","somenteLeitura"])]),_:1})]),_:1},8,["modelValue"]),h(Ht,{modelValue:a.modalCreditoDisponivel.visivel,"onUpdate:modelValue":t[60]||(t[60]=T=>a.modalCreditoDisponivel.visivel=T),minimized:"",onHide:t[61]||(t[61]=T=>a.modalCreditoDisponivel.reject())},{default:C(()=>[h(Mt,{class:"q-dialog-plugin"},{default:C(()=>[h(Je,{class:"bg-primary text-white"},{default:C(()=>[h(lt,null,{default:C(()=>[K(le(a.modalCreditoDisponivel.title),1)]),_:1}),Ee(h(ae,{dense:"",flat:"",icon:"close",round:""},null,512),[[st]])]),_:1}),A("div",F6e,[A("form",M6e,[h(At,{"no-border":"",dense:""},{default:C(()=>[h(qe,null,{default:C(()=>[h(Re,null,{default:C(()=>[h(Re,{header:""},{default:C(()=>[K(le(a.modalCreditoDisponivel.body),1)]),_:1})]),_:1})]),_:1})]),_:1}),A("div",N6e,[Ee(h(ae,{color:"tertiary",flat:"",label:"Cancelar"},null,512),[[st]]),h(ae,{color:"primary",class:"q-ml-sm no-shadow",label:"Continuar",unelevated:"",onClick:t[58]||(t[58]=T=>a.modalCreditoDisponivel.resolve("continuar"))}),a.modalCreditoDisponivel.permiteFinalizar?(B(),oe(ae,{key:0,color:"primary",class:"q-ml-sm no-shadow",unelevated:"",label:"Aprovar",onClick:t[59]||(t[59]=T=>a.modalCreditoDisponivel.resolve("aprovar"))})):ie("",!0)])])])]),_:1})]),_:1},8,["modelValue"]),h(Ht,{modelValue:a.modalItensSemEstoque.visivel,"onUpdate:modelValue":t[63]||(t[63]=T=>a.modalItensSemEstoque.visivel=T),minimized:"",onShow:t[64]||(t[64]=T=>e.$q.loading.hide()),onHide:t[65]||(t[65]=T=>a.modalItensSemEstoque.reject())},{default:C(()=>[h(Mt,{class:"q-dialog-plugin"},{default:C(()=>[h(Je,{class:"bg-primary text-white"},{default:C(()=>[h(lt,null,{default:C(()=>[K(le(a.modalItensSemEstoque.data.length>1?"Itens":"Item")+" sem estoque ",1)]),_:1}),Ee(h(ae,{dense:"",flat:"",icon:"close",round:""},null,512),[[st]])]),_:1}),A("div",k6e,[A("form",R6e,[h(At,{"no-border":"",dense:""},{default:C(()=>[(B(!0),be(Qe,null,qt(a.modalItensSemEstoque.data,(T,I)=>(B(),be(Qe,{key:I},[I?(B(),oe(No,{key:0})):ie("",!0),h(qe,null,{default:C(()=>[h(Re,null,{default:C(()=>[h(Re,{header:""},{default:C(()=>[K(le(T.itemDescricao),1)]),_:2},1024),h(Re,{caption:""},{default:C(()=>[K(" Estoque: "+le(T.saldo)+" ",1),T.offline?(B(),be("span",V6e,"(Offline)")):ie("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)],64))),128))]),_:1}),A("div",B6e,[Ee(h(ae,{color:"tertiary",flat:"",label:"Cancelar"},null,512),[[st]]),h(ae,{color:"primary",class:"q-ml-sm no-shadow",label:"Finalizar",unelevated:"",onClick:t[62]||(t[62]=T=>a.modalItensSemEstoque.resolve())})])])])]),_:1})]),_:1},8,["modelValue"]),h(Ht,{modelValue:a.modalAltMontDataPrev.visivel,"onUpdate:modelValue":t[70]||(t[70]=T=>a.modalAltMontDataPrev.visivel=T)},{default:C(()=>[h(To,{container:"",view:"hHh LpR fFf",class:"bg-white rounded-borders",style:{height:"100%","max-height":"410px"}},{default:C(()=>[h(cl,{onSubmit:i.salvarAltMontDataPrev,autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false",novalidate:""},{default:C(()=>[h(jo,null,{default:C(()=>[h(Je,null,{default:C(()=>[h(lt,null,{default:C(()=>[h(Pe,{name:"published_with_changes",size:"sm",class:"q-mr-sm"}),t[137]||(t[137]=K(" Alterar "))]),_:1})]),_:1})]),_:1}),h(Jo,null,{default:C(()=>[h(dn,null,{default:C(()=>[h(b,{gutter:"md",items:"center",height:"100%",style:{position:"absolute"}},{default:C(()=>[h(x,{col:"12"},{default:C(()=>[h(b,null,{default:C(()=>[h(x,{col:"12 sm6"},{default:C(()=>[h(c,{modelValue:a.armacao.alturaMontagemOD,"onUpdate:modelValue":t[66]||(t[66]=T=>a.armacao.alturaMontagemOD=T),permiteNull:"",rotulo:"Alt. Mont. OD",tipo:"decimal",decimals:"2",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1}),h(x,{col:"12 sm6"},{default:C(()=>[h(c,{modelValue:a.armacao.alturaMontagemOE,"onUpdate:modelValue":t[67]||(t[67]=T=>a.armacao.alturaMontagemOE=T),permiteNull:"",rotulo:"Alt. Mont. OE",tipo:"decimal",decimals:"2",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1}),h(x,{col:"12 sm6"},{default:C(()=>[h(c,{modelValue:a.dataPrevisaoEntrega,"onUpdate:modelValue":[t[68]||(t[68]=T=>a.dataPrevisaoEntrega=T),i.ajustarDataHoraPrevisaoEntrega],error:!!i.erroDataHoraPrevisto,errorMessage:i.erroDataHoraPrevisto,rotulo:"Data Previs\xE3o de Entrega",maxlength:"10",tipo:"data",class:"q-field--with-bottom"},null,8,["modelValue","onUpdate:modelValue","error","errorMessage"])]),_:1}),h(x,{col:"12 sm6"},{default:C(()=>[h(c,{modelValue:a.horaPrevisaoEntrega,"onUpdate:modelValue":[t[69]||(t[69]=T=>a.horaPrevisaoEntrega=T),i.ajustarDataHoraPrevisaoEntrega],rotulo:"Hora Previs\xE3o de Entrega",maxlength:"4",tipo:"hora",class:"q-field--with-bottom"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),h(Ui,{class:"bg-white text-right border-top q-pa-sm"},{default:C(()=>[Ee(h(ae,{label:"Cancelar",color:"tertiary",flat:"",class:"q-mr-sm"},null,512),[[st]]),h(ae,{type:"submit",unelevated:"",dark:"",label:"Atualizar",color:"primary",class:"q-ml-sm"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),h(_,{ref:"modalDependente","cpf-cnpj":"","data-nascimento":"","msg-erro":"Ocorreu um erro ao incluir o paciente.","msg-sucesso":"Paciente inclu\xEDdo com sucesso.",titulo:"Incluir Paciente",observacao:""},null,512),h(w,{modelValue:a.modalItem.visivel,"onUpdate:modelValue":t[75]||(t[75]=T=>a.modalItem.visivel=T),filtro:a.modalItem.filtros,filtroAvancado:a.filtroAvancado,onSelecionarItens:i.selecionarItens,onLimparFiltroAvancado:i.limparFiltroAvancado},rh({_:2},[a.filtroAvancado?{name:"camposFiltroAvancado",fn:C(()=>[h(c,{modelValue:a.filtroAvancado.lenteTipo,"onUpdate:modelValue":t[71]||(t[71]=T=>a.filtroAvancado.lenteTipo=T),class:"col-12 col-lg-4",maxlength:"60",rotulo:"Tipo",tipo:"seletor",opcoes:a.filtroAvancado.opcoesTiposLente},null,8,["modelValue","opcoes"]),h(c,{modelValue:a.filtroAvancado.esfericoInicial.lte,"onUpdate:modelValue":t[72]||(t[72]=T=>a.filtroAvancado.esfericoInicial.lte=T),prefix:"<=",rotulo:"Esf\xE9rico Inicial",tipo:"decimal",decimals:"2",dense:""},null,8,["modelValue"]),h(c,{modelValue:a.filtroAvancado.esfericoFinal.gte,"onUpdate:modelValue":t[73]||(t[73]=T=>a.filtroAvancado.esfericoFinal.gte=T),prefix:">=",rotulo:"Esf\xE9rico Final",tipo:"decimal",decimals:"2",dense:""},null,8,["modelValue"]),h(c,{modelValue:a.filtroAvancado.cilindrico.lte,"onUpdate:modelValue":t[74]||(t[74]=T=>a.filtroAvancado.cilindrico.lte=T),prefix:"<=",rotulo:"Cil\xEDndrico",tipo:"decimal",decimals:"2",dense:""},null,8,["modelValue"])]),key:"0"}:void 0]),1032,["modelValue","filtro","filtroAvancado","onSelecionarItens","onLimparFiltroAvancado"]),h(Ht,{modelValue:a.modalDescontoMaximo.visivel,"onUpdate:modelValue":t[79]||(t[79]=T=>a.modalDescontoMaximo.visivel=T),minimized:"",onHide:t[80]||(t[80]=T=>a.modalDescontoMaximo.reject())},{default:C(()=>[h(Mt,{class:"q-dialog-plugin"},{default:C(()=>[h(Je,{class:"bg-primary text-white"},{default:C(()=>[h(lt,null,{default:C(()=>[K(le(a.modalDescontoMaximo.titulo),1)]),_:1}),Ee(h(ae,{dense:"",flat:"",icon:"close",round:""},null,512),[[st]])]),_:1}),A("div",q6e,[A("form",{class:"q-pa-sm",onSubmit:t[78]||(t[78]=rt(T=>a.modalDescontoMaximo.resolve(),["prevent"]))},[h(At,{"no-border":"",dense:""},{default:C(()=>[(B(!0),be(Qe,null,qt(a.modalDescontoMaximo.itens,(T,I)=>(B(),be(Qe,{key:I+T.descricao},[I?(B(),oe(No,{key:0})):ie("",!0),h(qe,null,{default:C(()=>[h(Re,null,{default:C(()=>[h(Re,{header:""},{default:C(()=>[K(le(T.descricao)+" ",1),h(Ft,null,{default:C(()=>[K(" M\xE1ximo permitido: "+le(T.maximoDesconto)+"% ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)],64))),128)),a.modalDescontoMaximo.msg?(B(),be(Qe,{key:0},[a.modalDescontoMaximo.itens.length?(B(),oe(No,{key:0})):ie("",!0),h(qe,null,{default:C(()=>[h(Re,null,{default:C(()=>[h(Re,{header:""},{default:C(()=>[K(le(a.modalDescontoMaximo.msg),1)]),_:1})]),_:1})]),_:1})],64)):ie("",!0)]),_:1}),A("div",L6e,[Ee(h(ae,{color:"tertiary",flat:"",label:"Cancelar"},null,512),[[st]]),h(ae,{color:"primary",class:"q-ml-sm no-shadow",label:"Continuar",unelevated:"",onClick:t[76]||(t[76]=T=>a.modalDescontoMaximo.resolve("continuar"))}),a.modalDescontoMaximo.permiteDescontoMaximo?(B(),oe(ae,{key:0,color:"primary",class:"q-ml-sm no-shadow",unelevated:"",label:"Aprovar",onClick:t[77]||(t[77]=T=>a.modalDescontoMaximo.resolve("aprovar"))})):ie("",!0)])],32)])]),_:1})]),_:1},8,["modelValue"]),h(S,{ref:"modalReceita",onAtualizar:i.atualizarReceita},null,8,["onAtualizar"]),h(D,{ref:"promptItemTabelaPreco",onSelecionar:i.selecionarItemTabelaPreco},null,8,["onSelecionar"]),h(M,{ref:"promptDocumentoOperacao",onSelecionar:i.selecionarDocumentoOperacaoViaPrompt},null,8,["onSelecionar"]),h(DR,{color:"primary",size:"50px",visible:a.exibirCarregando},null,8,["visible"]),h(O,{model:a.mostrarTitulosPendentesEmAtraso},null,8,["model"])])}var U6e=St(xMe,[["render",$6e]]),z6e="/assets/b15.db8acdfa.svg",H6e="/assets/optidados.24e06a0a.svg";const j6e={components:{Whats:mMe,PromptBuscaOnline:J5e,UsuarioAlterarSenha:tMe,VendaModal:z5e,ModalGeeksTubeUpload:yMe,Envelope:U6e},computed:{appProximaVersao(){const e=$db.app.proximaVersao.value;return`${e.substr(8,2)}/${e.substr(6,2)}/${e.substr(1,4)} ${e.substr(11,2)}:${e.substr(13,2)}`},iconeNotificacoes(){return this.atualizacaoPendente?"rocket_launch":this.notificacoes.piscar?"notifications_active":"notifications"},corNotificacoes(){return this.atualizacaoPendente||this.notificacoes.piscar?"primary":"tertiary"},chatBotaoCor(){return this.chat?"primary":"tertiary"},config(){return et.configuracoes.valores},statusBanco(){return e=>{const t="";return!t||t==="100"?"":`${this.$filters.numero(t,2)}%`}},iconeHibridoSinal(){return{1:"mdi-signal-cellular-outline",2:"mdi-signal-cellular-1",3:"mdi-signal-cellular-2",4:"mdi-signal-cellular-3"}[this.desempenhoGeeksApi.consolidado.qualidadeSinal]},iconeHibrido(){return this.hibrido==="local"?"mdi-database":this.hibrido==="remoto"?"mdi-cloud-outline":this.iconeHibridoSinal}},data(){return{navegadorCompativel:!0,dbContato:et.contato,dbUsuario:et.usuario,bancos:[],clienteSistema:{sistema:""},clienteSistemaBaixados:[],campos:{},dialogAlterarSenha:!1,chat:!1,permissoes:{},hibrido:null,hibridoSubMenu:!1,desempenhoGeeksApi:et.qualidadeSinal.desempenhoGeeksApi,permissaoHibrido:!1,permissaoHibridoAutomatico:!1,sincronismoStatus:Io.status,sistemaPai:"",online:!0,notificacoes:{lista:[],piscar:!1},atualizacaoPendente:$db.app.atualizacaoPendente}},methods:{modoOffline(){this.hibrido="local",$db.hibrido.set("modoSelecionado",this.hibrido),$db.hibrido.set("mode",this.hibrido),window.location.reload()},modoOnline(){this.hibrido="remoto",$db.hibrido.set("modoSelecionado",this.hibrido),$db.hibrido.set("mode",this.hibrido),window.location.reload()},modoAutomatico(){this.hibrido="automatico",$db.hibrido.set("modoSelecionado",this.hibrido)},abrirEntidadeOnline(e){let t="AtendimentoContato";~this.$route.name.indexOf("Atendimento")&&(t=this.$route.name),this.$router.push({name:t,params:{id:e.id}})},async abrirPromptBuscaOnline(){try{await $utils.geeksApi({hibrido:{funcao:"3A5C566F-9D9C-4516-B049-7CEDA5034CD1"}})}catch(e){$q.notifyError(e.message);return}this.$refs.promptBuscaOnline.mostrar()},adicionarContato(){$utils.emitter.emit("adicionarContato")},adicionarOrcamento(){this.$refs.vendaModal.mostrar()},irPara(e){const t=localStorage.getItem("contatoSelecionado");this.$router.push({name:e,params:{id:t||"0"}})},irParaAtendimento(){const e=localStorage.getItem("contatoSelecionado");this.$router.push({name:"Atendimento",params:{id:e||"0"}})},abrirZap(){const e=encodeURI(`Ol\xE1 sou ${$db.usuario.logado.nome} (${localStorage.getItem("bancoDeDados")}), e preciso de suporte!`);window.open("https://api.whatsapp.com/send?phone=551621116161&text="+e,"_blank")},async sincronizar(){Wt.log("BarraTopo","sincronizar()"),$api.whatsapp.listaPendentes(),Io.descarregarErp(),Io.descarregarPlataforma()},onClickAlterarSenha(){this.dialogAlterarSenha=!0},alternarChat(){this.chat=!this.chat},menuAbrir(){$db.app.menuVisivel.value=!$db.app.menuVisivel.value},desconectar(){et.usuario.desconecta(),window.location.reload()},fecharChat(){this.chat=!1},imprimir:mM,async mostrarTabelas(){let e=await kd.getDatabaseNames();e.splice(e.indexOf("plataforma"),1);const t={};for(const o of e){const r=(await Se(o).tables).sort((a,i)=>a.name.localeCompare(i.name));for(const a of r){const i=await a.count();t.hasOwnProperty(a.name)||(t[a.name]={}),t[a.name][o]=i}}return console.table(t),t},async restaurar(){if(await Gt.sincronismoFila.count()>0){this.$q.notifyError("N\xE3o pode restaurar! H\xE1 dados no dispositivo que n\xE3o foram sincronizados.");return}for(const e of this.bancos)if(await Se(e.bancoDeDados).sincronismoFila.count()>0){this.$q.notifyError(`N\xE3o pode restaurar! H\xE1 dados do banco '${e.bancoDeDados}' no dispositivo que n\xE3o foram sincronizados.`);return}try{await new Promise((e,t)=>{this.$q.dialog({title:"Tem certeza?",message:"Esta opera\xE7\xE3o vai apagar todos os dados de seu dispositivo! Para confirmar digite a palavra 'RESTAURAR'.",prompt:{model:"",isValid:o=>o.toUpperCase()==="RESTAURAR",type:"text",class:"bg-light"},cancel:{label:"CANCELAR",push:!0,color:"tertiary",flat:!0},ok:{label:"RESTAURAR",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(o=>{e()}).onCancel(()=>{t()})})}catch{return}this.$q.loading.show({message:"Restaurando"});try{const e=await kd.getDatabaseNames();for(const o of e)await Se(o,"delete");const t=localStorage.getItem("dispositivoCliente");localStorage.clear(),t&&localStorage.setItem("dispositivoCliente",t),window.location.reload()}catch(e){this.$q.notifyError("Erro na opera\xE7\xE3o de restaurar",e)}finally{this.$q.loading.hide()}},async selecionaBancoDados(e){this.clienteSistema=e||{},et.cache.set("reload","1"),et.cache.set("bancoDeDados",e.bancoDeDados||""),et.cache.setJson("clienteSistema",e),this.$router.push({name:"Home"})},adicionarVideo(){this.$refs.geeksTubeModal.mostrar()},async obtemNotificacoes(){var o,r;if(this.atualizacaoPendente)return;const e=JSON.parse((o=localStorage.getItem("clienteSistema"))!=null?o:null);this.notificacoes.piscar=!1,this.notificacoes.lista=(await $utils.geeksApi({notific:{funcao:"3910BC12-5511-4517-8EB1-EFD4BBD354D9",usuarioCpf:(r=$db.usuario.logado.numeroDocumentoNacional)!=null?r:"",sistema:e==null?void 0:e.sistema}})).data.notific.sort((a,i)=>a.dataHora>i.dataHora?-1:1);const t=new Date;for(let a of this.notificacoes.lista){const i=new Date(a.dataHora),n=Math.abs(i-t)/36e5,s=Math.floor(n/24),l=Math.floor(n%24),u=Math.round(n%1*60);a.publicado=(s>0?s+"d ":"")+(l>0?l+":":"")+(u>0?u:"")+(u>0?"m":l>0?"h":"")}},mensagem_click(e){!e.link||(e.link[0]==="/"?this.$router.push(e.link):window.open(e.link,"_blank"))},async updatePWA(){navigator.serviceWorker.ready.then(e=>{$q.loading.show({message:"Atualizando..."}),e.waiting.postMessage({type:"SKIP_WAITING"})})},async abrirModalEnvelope(){await this.$refs.modalEnvelope.mostrar()}},props:{restricao:Boolean},emits:["menuClick"],beforeMount(){this.hibrido=$db.hibrido.get("modoSelecionado"),$db.configuracoes.le({nome:"hibrido"}).then(e=>{var a,i;const t=(i=(a=e==null?void 0:e[0])==null?void 0:a.valor)!=null?i:"";let o=!1,r=!1;t==="offline"&&(o=!1,this.modoOffline()),t==="online"&&(o=!0,localStorage.getItem("hibridoModoSelecionado")||this.modoOnline()),(t==="automatico"||$db.usuario.logado.desenvolvedor())&&(o=!0,r=!0,localStorage.getItem("hibridoModoSelecionado")||this.modoAutomatico()),this.permissaoHibrido=o,this.permissaoHibridoAutomatico=r}),this.offlineEvent=e=>{this.online=!1,console.log("offline: ",!this.online)},this.onlineEvent=e=>{this.online=!0,console.log("online: ",this.online)},window.addEventListener("offline",this.offlineEvent),window.addEventListener("online",this.onlineEvent)},unmounted(){window.removeEventListener("offline",this.offlineEvent),window.removeEventListener("online",this.onlineEvent)},async mounted(){var e,t;$utils.temaAplicar(),~((t=(e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.toLowerCase())==null?void 0:t.indexOf("samsungbrowser"))&&(this.navegadorCompativel=!1),$db.app.modoOnline.le()||(this.clienteSistemaBaixados=JSON.parse(localStorage.getItem("clienteSistemaBaixados")),this.clienteSistemaBaixados.sort((o,r)=>{const a=$utils.removerAcentos(o.bancoDeDados+o.sistema).toLowerCase(),i=$utils.removerAcentos(r.bancoDeDados+r.sistema).toLowerCase();return a<i?-1:1})),this.clienteSistema=JSON.parse(localStorage.getItem("clienteSistema"))||{},this.bancos=await gr.sincronismo.le(),this.sistemaPai=HE(),this.permissoes={atendimento:await et.permissao.objeto("atendimento"),admCustom:await et.permissao.objeto("admcustom"),admEnvelopes:await et.permissao.objeto("admenvelopes"),admOS:await et.permissao.objeto("admos"),funilVendas:await et.permissao.objeto("crmfunil"),item:await et.permissao.objeto("item"),importarReceita:await et.permissao.objeto("importarReceita"),caixa:await et.permissao.objeto("caixa"),cockpit:await et.permissao.objeto("cockpit"),nfe:await et.permissao.objeto("nfe")},this.notificacoes.piscar=(await $utils.geeksApi({mensagemPiscarLe:{funcao:"F4C89202-5422-456F-95AE-3A18B47FDBB2",usuarioCpf:$db.usuario.logado.numeroDocumentoNacional}})).data.mensagemPiscarLe.piscar}},G6e={class:"BarraTopo"},W6e={class:"q-pa-none q-my-none q-ml-sm items-center justify-center full-height column"};function Q6e(e,t,o,r,a,i){const n=Ve("row"),s=Ve("whats"),l=Ve("avatar"),u=Ve("UsuarioAlterarSenha"),c=Ve("PromptBuscaOnline"),d=Ve("VendaModal"),f=Ve("ModalGeeksTubeUpload"),m=Ve("Envelope");return B(),be("div",G6e,[a.navegadorCompativel?ie("",!0):(B(),oe(Je,{key:0,class:"bg-negative text-white q-px-sm row justify-center"},{default:C(()=>t[14]||(t[14]=[A("span",{class:"text-weight-bold"},"Navegador n\xE3o compat\xEDvel, acione o suporte!",-1)])),_:1})),h(Je,{class:"bg-white text-primary q-pa-sm"},{default:C(()=>[h(ae,{onClick:t[0]||(t[0]=p=>i.menuAbrir()),icon:"menu",round:"",flat:"",dense:"",color:"tertiary",class:"q-mr-sm"}),a.sistemaPai==="b15"?(B(),be("img",{key:0,onClick:t[1]||(t[1]=p=>i.irPara("Home")),src:z6e,alt:"B15",class:"q-mr-sm",style:{height:"30px",cursor:"pointer"}})):ie("",!0),a.sistemaPai==="optisoul"?(B(),be("img",{key:1,onClick:t[2]||(t[2]=p=>i.irPara("Home")),src:H6e,alt:"B15",class:"q-mr-sm",style:{height:"30px",cursor:"pointer"}})):ie("",!0),h(lt,{class:"q-px-sm"},{default:C(()=>[h(n,{class:"hideonmobile items-center busca-header"},{default:C(()=>[a.online?(B(),oe(ae,{key:0,onClick:t[3]||(t[3]=p=>i.abrirPromptBuscaOnline()),icon:"search","no-caps":"",outline:"",dense:"",color:"white","text-color":"grey-7",class:"q-ml-sm q-pa-sm q-pr-sm",style:{"max-height":"40px"},label:"Contato, documento, equipamento..."})):ie("",!0),h(ae,{icon:"add",color:"tertiary",round:"",flat:"",dense:"",class:"q-ml-sm"},{default:C(()=>[h(aa,null,{default:C(()=>[Ee((B(),oe(At,{link:"","no-border":"",separator:""},{default:C(()=>[h(qe,{onClick:i.adicionarContato,clickable:""},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"person_add",size:"sm"})]),_:1}),h(fe,null,{default:C(()=>t[15]||(t[15]=[K("Contato")])),_:1})]),_:1},8,["onClick"]),h(qe,{onClick:i.adicionarOrcamento,clickable:""},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"add_shopping_cart",size:"sm"})]),_:1}),h(fe,null,{default:C(()=>t[16]||(t[16]=[K("Or\xE7amento/Venda")])),_:1})]),_:1},8,["onClick"]),a.sistemaPai==="optisoul"?(B(),oe(qe,{key:0,onClick:t[4]||(t[4]=p=>i.abrirModalEnvelope()),clickable:""},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"mdi-glasses",size:"sm"})]),_:1}),h(fe,null,{default:C(()=>t[17]||(t[17]=[K("Envelope (\xD3culos)")])),_:1})]),_:1})):ie("",!0)]),_:1})),[[st]])]),_:1}),h(Ft,{anchor:"bottom middle",self:"center middle"},{default:C(()=>t[18]||(t[18]=[K("Novo")])),_:1})]),_:1})]),_:1})]),_:1}),a.online?(B(),oe(ae,{key:2,onClick:t[5]||(t[5]=p=>i.abrirPromptBuscaOnline()),icon:"search",round:"",flat:"",dense:"",color:"tertiary",class:"hideondesktop"})):ie("",!0),h(ae,{icon:"add",round:"",flat:"",dense:"",color:"tertiary",class:"hideondesktop"},{default:C(()=>[h(aa,null,{default:C(()=>[Ee((B(),oe(At,{link:"","no-border":"",separator:""},{default:C(()=>[h(qe,{onClick:i.adicionarContato,clickable:""},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"person",size:"sm"})]),_:1}),h(fe,null,{default:C(()=>t[19]||(t[19]=[K(" Contato ")])),_:1})]),_:1},8,["onClick"]),h(qe,{onClick:i.adicionarOrcamento,clickable:""},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"add_shopping_cart",size:"sm"})]),_:1}),h(fe,null,{default:C(()=>t[20]||(t[20]=[K(" Or\xE7amento/Venda ")])),_:1})]),_:1},8,["onClick"]),a.sistemaPai==="optisoul"?(B(),oe(qe,{key:0,onClick:t[6]||(t[6]=p=>i.abrirModalEnvelope()),clickable:""},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"mdi-glasses",size:"sm"})]),_:1}),h(fe,null,{default:C(()=>t[21]||(t[21]=[K("Envelope (\xD3culos)")])),_:1})]),_:1})):ie("",!0)]),_:1})),[[st]])]),_:1})]),_:1}),o.restricao?ie("",!0):(B(),oe(ae,{key:3,onClick:i.irParaAtendimento,flat:"",class:"q-px-sm q-mr-xs hideonmobile"},{default:C(()=>[h(Pe,{name:"mdi-account-switch",class:"q-mr-xs"}),t[22]||(t[22]=A("span",{class:"btn-acessoRapido"},"Atendimento 4.0",-1))]),_:1},8,["onClick"])),!o.restricao&&a.permissoes.caixa?(B(),oe(ae,{key:4,to:{name:"Caixa"},flat:"",class:"q-px-sm q-mr-xs hideonmobile"},{default:C(()=>[h(Pe,{name:"payment",class:"q-mr-xs"}),t[23]||(t[23]=A("span",{class:"btn-acessoRapido"},"Caixa",-1))]),_:1})):ie("",!0),!o.restricao&&a.permissoes.cockpit?(B(),oe(ae,{key:5,to:{name:"Cockpit"},flat:"",class:"q-px-sm q-mr-xs hideonmobile"},{default:C(()=>[h(Pe,{name:"insert_chart",class:"q-mr-xs"}),t[24]||(t[24]=A("span",{class:"btn-acessoRapido"},"Cockpit",-1))]),_:1})):ie("",!0),t[62]||(t[62]=A("div",{class:"BarraTopo-separador hideonmobile"},null,-1)),h(ae,{onClick:i.obtemNotificacoes,icon:i.iconeNotificacoes,color:i.corNotificacoes,round:"",flat:"",dense:""},{default:C(()=>[!a.atualizacaoPendente&&a.notificacoes.piscar?(B(),oe(An,{key:0,color:"red",rounded:"",floating:"",class:"q-mt-xs q-mr-xs"})):ie("",!0),a.atualizacaoPendente?(B(),oe(aa,{key:1,class:"menu-notificacoes"},{default:C(()=>[h(At,{style:{width:"250px"}},{default:C(()=>[h(qe,null,{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,{class:"text-center text-subtitle1 text-weight-medium"},{default:C(()=>[K(" Vers\xE3o "+le(i.appProximaVersao)+" dispon\xEDvel ",1)]),_:1}),h(No,{class:"q-my-sm"}),h(ae,{onClick:t[7]||(t[7]=p=>i.updatePWA()),label:"Atualizar",color:"primary",unelevated:"",dense:""})]),_:1})]),_:1})]),_:1})]),_:1})):(B(),oe(aa,{key:2,class:"menu-notificacoes"},{default:C(()=>[h(At,{style:{"min-width":"320px","max-width":"460px"}},{default:C(()=>[(B(!0),be(Qe,null,qt(a.notificacoes.lista,(p,v)=>(B(),be(Qe,{key:v},[h(qe,{clickable:"",onClick:g=>i.mensagem_click(p)},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:p.icone!==""?p.icone:"info",color:p.iconeCor!==""?p.iconeCor:"tertiary"},null,8,["name","color"])]),_:2},1024),h(fe,null,{default:C(()=>[h(Re,{lines:"2",class:"text-weight-medium"},{default:C(()=>[K(le(p.titulo),1)]),_:2},1024),h(Re,{caption:"",class:"text-weight-regular"},{default:C(()=>[K(le(p.mensagem),1)]),_:2},1024)]),_:2},1024),h(fe,{side:"",top:""},{default:C(()=>[h(Re,{caption:""},{default:C(()=>[K(le(p.publicado),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]),Ee(h(No,{spaced:"",inset:""},null,512),[[Eo,v!==a.notificacoes.lista.length-1]])],64))),128))]),_:1})]),_:1}))]),_:1},8,["onClick","icon","color"]),h(s),h(ae,{class:"hideonmobile",round:"",flat:"",dense:"",color:"tertiary",icon:i.iconeHibrido},{default:C(()=>[h(aa,null,{default:C(()=>[Ee((B(),oe(At,{separator:""},{default:C(()=>[h(qe,{clickable:"",onClick:i.modoOffline},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"mdi-database"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[25]||(t[25]=[K("Offline")])),_:1})]),_:1})]),_:1},8,["onClick"]),Ee((B(),oe(qe,{clickable:"",onClick:i.modoOnline},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"mdi-cloud-outline"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[26]||(t[26]=[K("Online")])),_:1})]),_:1})]),_:1},8,["onClick"])),[[st]]),a.permissaoHibridoAutomatico?(B(),be(Qe,{key:0},[Ee((B(),oe(qe,{clickable:"",onClick:i.modoAutomatico},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:i.iconeHibridoSinal},null,8,["name"])]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[27]||(t[27]=[K("Autom\xE1tico")])),_:1})]),_:1})]),_:1},8,["onClick"])),[[st]]),h(qe,null,{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[28]||(t[28]=[K("Lat\xEAncia")])),_:1})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>[K(le(a.desempenhoGeeksApi.consolidado.tempoMedio.toFixed(0))+" ms",1)]),_:1})]),_:1})]),_:1}),h(qe,null,{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[29]||(t[29]=[K("Velocidade")])),_:1})]),_:1}),h(fe,null,{default:C(()=>[h(Re,{"no-wrap":""},{default:C(()=>[K(le(a.desempenhoGeeksApi.consolidado.velocidade.toFixed(1))+" bytes/ms",1)]),_:1})]),_:1})]),_:1}),h(qe,null,{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[30]||(t[30]=[K("Sinal")])),_:1})]),_:1}),h(fe,null,{default:C(()=>[h(Re,{"no-wrap":""},{default:C(()=>[K(le(a.desempenhoGeeksApi.consolidado.qualidadeSinal)+" - "+le({1:"Sem internet",2:"Baixo",3:"M\xE9dio",4:"Alto"}[a.desempenhoGeeksApi.consolidado.qualidadeSinal]),1)]),_:1})]),_:1})]),_:1})],64)):ie("",!0)]),_:1})),[[st]])]),_:1})]),_:1},8,["icon"]),h(ae,{onClick:i.abrirZap,icon:"contact_support",size:"md",flat:"",rounded:"",color:"tertiary",class:"BarraTopo-botaoTopo hideonmobile"},{default:C(()=>[h(Ft,{anchor:"bottom middle",self:"center middle"},{default:C(()=>t[31]||(t[31]=[K("Ajuste / Suporte")])),_:1})]),_:1},8,["onClick"]),A("div",W6e,[h(l,{imagem:a.dbUsuario.logado.img,color:"#eeeeee",tamanho:"40",onClick:i.sincronizar},null,8,["imagem","onClick"]),h(aa,{class:"BarraTopo-usuarioPopover q-py-sm"},{default:C(()=>[h(At,{"no-border":""},{default:C(()=>[h(qe,null,{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(l,{imagem:a.dbUsuario.logado.img,color:"#eeeeee",tamanho:"38"},null,8,["imagem"])]),_:1}),h(fe,{class:"q-pl-sm"},{default:C(()=>[h(Re,{class:"text-weight-medium"},{default:C(()=>[K(le(a.dbUsuario.logado.nome),1)]),_:1}),h(Re,{caption:""},{default:C(()=>[K(le(a.dbUsuario.logado.cpf),1)]),_:1})]),_:1}),h(fe,{side:""},{default:C(()=>[h(ae,{icon:"palette",color:"select-palette-color",round:"",flat:"",dense:""},{default:C(()=>[h(Ft,null,{default:C(()=>t[32]||(t[32]=[K("Tema")])),_:1}),h(aa,null,{default:C(()=>[h(At,null,{default:C(()=>[Ee((B(),oe(qe,{onClick:t[8]||(t[8]=p=>e.$utils.temaAplicar("padrao")),clickable:""},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"palette",style:{color:"#003fff!important"}})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[33]||(t[33]=[K("Padr\xE3o")])),_:1})]),_:1})]),_:1})),[[st]]),h(No),Ee((B(),oe(qe,{onClick:t[9]||(t[9]=p=>e.$utils.temaAplicar("rosa")),clickable:""},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"palette",style:{color:"#e305ad!important"}})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[34]||(t[34]=[K("Voc\xEA pode tudo")])),_:1})]),_:1})]),_:1})),[[st]]),h(No),Ee((B(),oe(qe,{onClick:t[10]||(t[10]=p=>e.$utils.temaAplicar("brasil")),clickable:""},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"palette",style:{color:"#65bd3c!important"}})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[35]||(t[35]=[K("Brasil")])),_:1})]),_:1})]),_:1})),[[st]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),h(At,{class:"q-ma-md bordered",dense:""},{default:C(()=>[h(qe,{dense:"",class:"text-tertiary",clickable:""},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"storage"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,{class:"text-weight-medium"},{default:C(()=>[K(le(a.clienteSistema.bancoDeDados),1)]),_:1}),h(Re,{caption:"",class:"text-caption"},{default:C(()=>[K(le(a.clienteSistema.sistema),1)]),_:1})]),_:1}),h(fe,{side:""},{default:C(()=>[K(le(i.statusBanco(a.clienteSistema.bancoDeDados)),1)]),_:1}),h(Ft,{anchor:"bottom middle",self:"center middle"},{default:C(()=>t[36]||(t[36]=[K("Base")])),_:1}),h(aa,null,{default:C(()=>[h(At,{link:""},{default:C(()=>[(B(!0),be(Qe,null,qt(a.clienteSistemaBaixados,p=>(B(),be(Qe,{key:p.idClienteSistema},[Ee((B(),oe(qe,{clickable:"",class:"text-tertiary q-py-xs",onClick:v=>i.selecionaBancoDados(p),dense:""},{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>[K(le(p.bancoDeDados),1)]),_:2},1024),h(Re,{caption:"",class:"text-caption"},{default:C(()=>[K(le(p.sistema),1)]),_:2},1024)]),_:2},1024),h(fe,{side:""},{default:C(()=>[K(le(i.statusBanco(p.bancoDeDados)),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[st]]),h(No)],64))),128)),Ee((B(),oe(qe,{to:{name:"AutenticacaoBancos",params:{operacao:"selecionar"}},class:"text-tertiary",clickable:"",dense:""},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"settings"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[37]||(t[37]=[K("Selecionar bases")])),_:1})]),_:1})]),_:1})),[[st]])]),_:1})]),_:1})]),_:1}),h(qe,{onClick:i.mostrarTabelas,dense:"",class:"text-tertiary"},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"data_usage"})]),_:1}),h(fe,null,{default:C(()=>t[38]||(t[38]=[K("0 gb")])),_:1}),h(Ft,{anchor:"bottom middle",self:"center middle"},{default:C(()=>t[39]||(t[39]=[K("Espa\xE7o")])),_:1})]),_:1},8,["onClick"]),h(qe,{dense:"",clickable:"",class:"text-tertiary"},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:i.iconeHibrido},null,8,["name"])]),_:1}),h(fe,null,{default:C(()=>[h(Re,{class:"text-weight-medium"},{default:C(()=>t[40]||(t[40]=[K("H\xEDbrido")])),_:1})]),_:1}),h(aa,null,{default:C(()=>[Ee((B(),oe(At,{separator:""},{default:C(()=>[h(qe,{clickable:"",onClick:i.modoOffline},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"mdi-database"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[41]||(t[41]=[K("Offline")])),_:1})]),_:1})]),_:1},8,["onClick"]),Ee((B(),oe(qe,{clickable:"",onClick:i.modoOnline},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"mdi-cloud-outline"})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[42]||(t[42]=[K("Online")])),_:1})]),_:1})]),_:1},8,["onClick"])),[[st]]),a.permissaoHibridoAutomatico?(B(),be(Qe,{key:0},[Ee((B(),oe(qe,{clickable:"",onClick:i.modoAutomatico},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:i.iconeHibridoSinal},null,8,["name"])]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[43]||(t[43]=[K("Autom\xE1tico")])),_:1})]),_:1})]),_:1},8,["onClick"])),[[st]]),h(qe,null,{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[44]||(t[44]=[K("Lat\xEAncia")])),_:1})]),_:1}),h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>[K(le(a.desempenhoGeeksApi.consolidado.tempoMedio.toFixed(0))+" ms",1)]),_:1})]),_:1})]),_:1}),h(qe,null,{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[45]||(t[45]=[K("Velocidade")])),_:1})]),_:1}),h(fe,null,{default:C(()=>[h(Re,{"no-wrap":""},{default:C(()=>[K(le(a.desempenhoGeeksApi.consolidado.velocidade.toFixed(1))+" bytes/ms",1)]),_:1})]),_:1})]),_:1}),h(qe,null,{default:C(()=>[h(fe,null,{default:C(()=>[h(Re,null,{default:C(()=>t[46]||(t[46]=[K("Sinal")])),_:1})]),_:1}),h(fe,null,{default:C(()=>[h(Re,{"no-wrap":""},{default:C(()=>[K(le(a.desempenhoGeeksApi.consolidado.qualidadeSinal)+" - "+le({1:"Sem internet",2:"Baixo",3:"M\xE9dio",4:"Alto"}[a.desempenhoGeeksApi.consolidado.qualidadeSinal]),1)]),_:1})]),_:1})]),_:1})],64)):ie("",!0)]),_:1})),[[st]])]),_:1})]),_:1}),h(qe,{to:{name:"PainelSincronismo"},dense:"",class:"text-tertiary",clickable:""},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"swap_calls"})]),_:1}),h(fe,null,{default:C(()=>[K(le("Fila enviar: "+String(a.sincronismoStatus.tamanhoFila)),1)]),_:1}),h(Ft,{anchor:"bottom middle",self:"center middle"},{default:C(()=>t[47]||(t[47]=[K("Fila de sincrinismo para enviar")])),_:1})]),_:1})]),_:1}),h(At,null,{default:C(()=>[Ee((B(),oe(qe,{onClick:i.abrirZap,clickable:"",dense:"",class:"text-tertiary"},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"contact_support"})]),_:1}),h(fe,null,{default:C(()=>t[48]||(t[48]=[K("Ajuda / Suporte")])),_:1})]),_:1},8,["onClick"])),[[st]]),Ee((B(),oe(qe,{onClick:i.onClickAlterarSenha,clickable:"",dense:"",class:"text-tertiary"},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"mdi-lock-open-outline"})]),_:1}),h(fe,null,{default:C(()=>t[49]||(t[49]=[K("Alterar senha")])),_:1})]),_:1},8,["onClick"])),[[st]]),o.restricao?ie("",!0):Ee((B(),oe(qe,{key:0,to:{name:"Configuracoes"},clickable:"",dense:"",class:"text-tertiary"},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"settings"})]),_:1}),h(fe,null,{default:C(()=>t[50]||(t[50]=[K("Configura\xE7\xF5es")])),_:1})]),_:1})),[[st]]),a.sistemaPai==="b15"?Ee((B(),oe(qe,{key:1,to:{name:"FaturaB15"},clickable:"",dense:"",class:"text-tertiary"},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"attach_money"})]),_:1}),h(fe,null,{default:C(()=>t[51]||(t[51]=[K("Fatura B-15")])),_:1})]),_:1})),[[st]]):ie("",!0),a.sistemaPai==="optisoul"?Ee((B(),oe(qe,{key:2,to:{name:"FaturaB15Optidados"},clickable:"",dense:"",class:"text-tertiary"},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"attach_money"})]),_:1}),h(fe,null,{default:C(()=>t[52]||(t[52]=[K("Fatura B-15 Optidados")])),_:1})]),_:1})),[[st]]):ie("",!0),Ee((B(),oe(qe,{onClick:i.restaurar,clickable:"",dense:"",class:"text-tertiary"},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"warning"})]),_:1}),h(fe,null,{default:C(()=>t[53]||(t[53]=[K("Restaurar e sair")])),_:1})]),_:1},8,["onClick"])),[[st]]),Ee((B(),oe(qe,{onClick:i.desconectar,clickable:"",dense:"",class:"text-tertiary"},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"exit_to_app"})]),_:1}),h(fe,null,{default:C(()=>t[54]||(t[54]=[K("Sair")])),_:1})]),_:1},8,["onClick"])),[[st]]),h(No,{class:"q-mx-md q-my-sm"}),h(qe,{onClick:t[12]||(t[12]=p=>a.dbUsuario.modoDesenvolvedor()),clickable:"",dense:"",class:"text-tertiary"},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"code"})]),_:1}),h(fe,null,{default:C(()=>t[55]||(t[55]=[K("Modo Desenvolvedor")])),_:1}),h(fe,{side:""},{default:C(()=>[h(ZI,{modelValue:a.dbUsuario.logado.modoDesenvolvedor.status,"onUpdate:modelValue":t[11]||(t[11]=p=>a.dbUsuario.logado.modoDesenvolvedor.status=p),dense:"",disable:"",style:{"z-index":"-1"}},null,8,["modelValue"])]),_:1})]),_:1}),a.dbUsuario.logado.modoDesenvolvedor.status?Ee((B(),oe(qe,{key:3,to:{name:"CriarBanco"},clickable:"",dense:"",class:"text-tertiary"},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"mdi-database-plus"})]),_:1}),h(fe,null,{default:C(()=>t[56]||(t[56]=[K("Criar banco")])),_:1})]),_:1})),[[st]]):ie("",!0),a.dbUsuario.logado.modoDesenvolvedor.status?Ee((B(),oe(qe,{key:4,onClick:i.adicionarVideo,clickable:"",dense:"",class:"text-tertiary"},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"play_circle"})]),_:1}),h(fe,null,{default:C(()=>t[57]||(t[57]=[K("V\xEDdeos")])),_:1})]),_:1},8,["onClick"])),[[st]]):ie("",!0),a.dbUsuario.logado.modoDesenvolvedor.status?Ee((B(),oe(qe,{key:5,to:{name:"Backup"},clickable:"",dense:"",class:"text-tertiary"},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"cloud_download"})]),_:1}),h(fe,null,{default:C(()=>t[58]||(t[58]=[K("Backup")])),_:1})]),_:1})),[[st]]):ie("",!0),a.dbUsuario.logado.modoDesenvolvedor.status&&a.dbUsuario.logado.modoDesenvolvedor.acesso==="desenvolvedor"?Ee((B(),oe(qe,{key:6,to:{name:"Console"},clickable:"",dense:"",class:"text-tertiary"},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"terminal"})]),_:1}),h(fe,null,{default:C(()=>t[59]||(t[59]=[K("Console")])),_:1})]),_:1})),[[st]]):ie("",!0),a.dbUsuario.logado.modoDesenvolvedor.status&&a.dbUsuario.logado.modoDesenvolvedor.acesso==="desenvolvedor"?Ee((B(),oe(qe,{key:7,to:{name:"EditorAPI"},clickable:"",dense:"",class:"text-tertiary"},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"label"})]),_:1}),h(fe,null,{default:C(()=>t[60]||(t[60]=[K("Editor API")])),_:1})]),_:1})),[[st]]):ie("",!0),a.dbUsuario.logado.modoDesenvolvedor.status&&a.dbUsuario.logado.modoDesenvolvedor.acesso==="desenvolvedor"?Ee((B(),oe(qe,{key:8,to:{name:"EditorImpressao"},clickable:"",dense:"",class:"text-tertiary"},{default:C(()=>[h(fe,{avatar:""},{default:C(()=>[h(Pe,{name:"task"})]),_:1}),h(fe,null,{default:C(()=>t[61]||(t[61]=[K("Editor Impress\xE3o")])),_:1})]),_:1})),[[st]]):ie("",!0)]),_:1})]),_:1})])]),_:1}),h(u,{modelValue:a.dialogAlterarSenha,"onUpdate:modelValue":t[13]||(t[13]=p=>a.dialogAlterarSenha=p)},null,8,["modelValue"]),h(c,{ref:"promptBuscaOnline",onSelecionar:i.abrirEntidadeOnline},null,8,["onSelecionar"]),h(d,{ref:"vendaModal"},null,512),h(f,{ref:"geeksTubeModal"},null,512),h(m,{ref:"modalEnvelope"},null,512)])}var X6e=St(j6e,[["render",Q6e]]);const K6e={components:{BarraTopo:X6e},props:{msg:{type:String,required:!0}},methods:{irParaFatura(){if(~["FaturaB15Optidados","FaturaB15"].indexOf(this.$route.name))return;let e;$utils.sistemaPai()==="optisoul"&&(e="FaturaB15Optidados"),$utils.sistemaPai()==="b15"&&(e="FaturaB15"),e&&this.$router.push({name:e})}},watch:{"$route.name"(){this.irParaFatura()}},created(){this.irParaFatura()}};function Y6e(e,t,o,r,a,i){const n=Ve("barra-topo");return B(),oe(To,{class:"Atendimento Layout"},{default:C(()=>[h(jo,null,{default:C(()=>[h(n,{restricao:""})]),_:1}),h(Jo,null,{default:C(()=>[h(dn,{class:"u-container"},{default:C(()=>[h(nw,{"inline-actions":"",class:"text-white text-center bg-red"},{default:C(()=>[K(le(o.msg),1)]),_:1})]),_:1})]),_:1})]),_:1})}var J6e=St(K6e,[["render",Y6e]]);const Z6e={components:{ConfrontoFigurasFiscais:P2e,modalAlerta:N2e,modalSucesso:V2e,ModalLog:L2e,promptCfop:nye,PromptContato:Xye,PromptLogin:Zye,PromptServicoIntegrador:oxe,PromptGrupoUnico:nxe,PromptSegmentoUnico:uxe,PromptOrigemMarketingUnico:pxe,promptFormaPagamento:bxe,promptItem:Zxe,promptItemTabelaPreco:rCe,promptNcm:cCe,PromptCamera:xCe,Restricao:J6e},computed:{rotaPermitida(){return!!~["FaturaB15Optidados","FaturaB15"].indexOf(this.$route.name)}},data(){return{observacao:"",restricao:"",clienteSistema:{}}},methods:{exibirConduta(e){this.observacao!==e.observacao&&(this.observacao=e.observacao,this.observacao&&this.$q.notify({type:"warning",message:e.observacao})),this.restricao=e.restricao},async menuClick(e){this.$refs.Plataforma15.menuClick(e)},async updatePWA(){navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()}),setInterval(()=>{navigator.serviceWorker.ready.then(t=>{!t.waiting||t.waiting.postMessage({type:"WAITING_USER"})})},1e3),setInterval(()=>{navigator.serviceWorker.ready.then(t=>{t.update()})},5*60*1e3);let e=1;setInterval(()=>{navigator.serviceWorker.ready.then(t=>{!t.waiting||(e=e-1,e===0&&(fetch("https://raw.githubusercontent.com/GeeksB15/b15apppublico/refs/heads/main/versao.json").then(async o=>{const r=await o.json();$db.app.proximaVersao.value=r.versao}),$db.app.atualizacaoPendente.value=!0))})},30*1e3)}},created(){this.updatePWA(),this.clienteSistema=JSON.parse(localStorage.getItem("clienteSistema"))||{};let e=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${e}px`),window.addEventListener("resize",()=>{let t=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${t}px`)}),$db.app.modoOnline.le()||(this.sincronismoInterval&&clearInterval(this.sincronismoInterval),localStorage.getItem("sincronismoAtivo")!=="false"&&(this.sincronismoInterval=setInterval(function(){Io.executar(),new Date().getSeconds()<2&&$api.whatsapp.listaPendentes()},2e3))),RCe(),$utils.limpeza(),$utils.emitter.on("exibirConduta",this.exibirConduta),$utils.emitter.on("notifyError",this.$q.notifyError)},async beforeMount(){await $db.usuario.verificaUsuarioClienteSistema()},beforeUnmount(){$utils.emitter.off("exibirConduta"),$utils.emitter.off("notifyError"),this.sincronismoInterval&&clearInterval(this.sincronismoInterval)}},eNe={id:"q-app"};function tNe(e,t,o,r,a,i){const n=Ve("router-view"),s=Ve("ConfrontoFigurasFiscais"),l=Ve("modalAlerta"),u=Ve("modalSucesso"),c=Ve("ModalLog"),d=Ve("promptCfop"),f=Ve("PromptContato"),m=Ve("PromptLogin"),p=Ve("PromptServicoIntegrador"),v=Ve("PromptGrupoUnico"),g=Ve("PromptSegmentoUnico"),x=Ve("PromptOrigemMarketingUnico"),b=Ve("promptFormaPagamento"),_=Ve("promptItem"),w=Ve("promptItemTabelaPreco"),S=Ve("promptNcm"),D=Ve("PromptCamera"),M=Ve("Restricao");return B(),be("div",eNe,[h(To,{view:"hHh LpR lFr",class:"Layout"},{default:C(()=>[a.restricao?ie("",!0):(B(),be(Qe,{key:0},[h(n),h(s),h(l),h(u),h(c),h(d),h(f),h(m),h(p),h(v),h(g),h(x),h(b,{ref:"promptFormaPagamento"},null,512),h(_),h(w,{ref:"PromptItemTabelaPreco"},null,512),h(S),h(D)],64)),a.restricao?(B(),be(Qe,{key:1},[i.rotaPermitida?ie("",!0):(B(),oe(M,{key:0,msg:a.restricao},null,8,["msg"])),i.rotaPermitida?(B(),oe(n,{key:1})):ie("",!0)],64)):ie("",!0)]),_:1})])}var oNe=St(Z6e,[["render",tNe]]),t7={exports:{}},$h={exports:{}};(function(e,t){(function(o,r){e.exports=r(Bo.exports)})(vt,function(o){return function(r){var a=o,i=a.lib,n=i.Base,s=i.WordArray,l=a.x64={};l.Word=n.extend({init:function(u,c){this.high=u,this.low=c}}),l.WordArray=n.extend({init:function(u,c){u=this.words=u||[],c!=r?this.sigBytes=c:this.sigBytes=u.length*8},toX32:function(){for(var u=this.words,c=u.length,d=[],f=0;f<c;f++){var m=u[f];d.push(m.high),d.push(m.low)}return s.create(d,this.sigBytes)},clone:function(){for(var u=n.clone.call(this),c=u.words=this.words.slice(0),d=c.length,f=0;f<d;f++)c[f]=c[f].clone();return u}})}(),o})})($h);var o7={exports:{}};(function(e,t){(function(o,r){e.exports=r(Bo.exports)})(vt,function(o){return function(){if(typeof ArrayBuffer=="function"){var r=o,a=r.lib,i=a.WordArray,n=i.init,s=i.init=function(l){if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),(l instanceof Int8Array||typeof Uint8ClampedArray!="undefined"&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)&&(l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength)),l instanceof Uint8Array){for(var u=l.byteLength,c=[],d=0;d<u;d++)c[d>>>2]|=l[d]<<24-d%4*8;n.call(this,c,u)}else n.apply(this,arguments)};s.prototype=i}}(),o.lib.WordArray})})(o7);var a7={exports:{}};(function(e,t){(function(o,r){e.exports=r(Bo.exports)})(vt,function(o){return function(){var r=o,a=r.lib,i=a.WordArray,n=r.enc;n.Utf16=n.Utf16BE={stringify:function(l){for(var u=l.words,c=l.sigBytes,d=[],f=0;f<c;f+=2){var m=u[f>>>2]>>>16-f%4*8&65535;d.push(String.fromCharCode(m))}return d.join("")},parse:function(l){for(var u=l.length,c=[],d=0;d<u;d++)c[d>>>1]|=l.charCodeAt(d)<<16-d%2*16;return i.create(c,u*2)}},n.Utf16LE={stringify:function(l){for(var u=l.words,c=l.sigBytes,d=[],f=0;f<c;f+=2){var m=s(u[f>>>2]>>>16-f%4*8&65535);d.push(String.fromCharCode(m))}return d.join("")},parse:function(l){for(var u=l.length,c=[],d=0;d<u;d++)c[d>>>1]|=s(l.charCodeAt(d)<<16-d%2*16);return i.create(c,u*2)}};function s(l){return l<<8&4278255360|l>>>8&16711935}}(),o.enc.Utf16})})(a7);var Iu={exports:{}};(function(e,t){(function(o,r){e.exports=r(Bo.exports)})(vt,function(o){return function(){var r=o,a=r.lib,i=a.WordArray,n=r.enc;n.Base64={stringify:function(l){var u=l.words,c=l.sigBytes,d=this._map;l.clamp();for(var f=[],m=0;m<c;m+=3)for(var p=u[m>>>2]>>>24-m%4*8&255,v=u[m+1>>>2]>>>24-(m+1)%4*8&255,g=u[m+2>>>2]>>>24-(m+2)%4*8&255,x=p<<16|v<<8|g,b=0;b<4&&m+b*.75<c;b++)f.push(d.charAt(x>>>6*(3-b)&63));var _=d.charAt(64);if(_)for(;f.length%4;)f.push(_);return f.join("")},parse:function(l){var u=l.length,c=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var f=0;f<c.length;f++)d[c.charCodeAt(f)]=f}var m=c.charAt(64);if(m){var p=l.indexOf(m);p!==-1&&(u=p)}return s(l,u,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function s(l,u,c){for(var d=[],f=0,m=0;m<u;m++)if(m%4){var p=c[l.charCodeAt(m-1)]<<m%4*2,v=c[l.charCodeAt(m)]>>>6-m%4*2,g=p|v;d[f>>>2]|=g<<24-f%4*8,f++}return i.create(d,f)}}(),o.enc.Base64})})(Iu);var r7={exports:{}};(function(e,t){(function(o,r){e.exports=r(Bo.exports)})(vt,function(o){return function(){var r=o,a=r.lib,i=a.WordArray,n=r.enc;n.Base64url={stringify:function(l,u){u===void 0&&(u=!0);var c=l.words,d=l.sigBytes,f=u?this._safe_map:this._map;l.clamp();for(var m=[],p=0;p<d;p+=3)for(var v=c[p>>>2]>>>24-p%4*8&255,g=c[p+1>>>2]>>>24-(p+1)%4*8&255,x=c[p+2>>>2]>>>24-(p+2)%4*8&255,b=v<<16|g<<8|x,_=0;_<4&&p+_*.75<d;_++)m.push(f.charAt(b>>>6*(3-_)&63));var w=f.charAt(64);if(w)for(;m.length%4;)m.push(w);return m.join("")},parse:function(l,u){u===void 0&&(u=!0);var c=l.length,d=u?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var m=0;m<d.length;m++)f[d.charCodeAt(m)]=m}var p=d.charAt(64);if(p){var v=l.indexOf(p);v!==-1&&(c=v)}return s(l,c,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function s(l,u,c){for(var d=[],f=0,m=0;m<u;m++)if(m%4){var p=c[l.charCodeAt(m-1)]<<m%4*2,v=c[l.charCodeAt(m)]>>>6-m%4*2,g=p|v;d[f>>>2]|=g<<24-f%4*8,f++}return i.create(d,f)}}(),o.enc.Base64url})})(r7);var iA={exports:{}};(function(e,t){(function(o,r){e.exports=r(Bo.exports)})(vt,function(o){return function(){var r=o,a=r.lib,i=a.WordArray,n=a.Hasher,s=r.algo,l=[],u=s.SHA1=n.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,d){for(var f=this._hash.words,m=f[0],p=f[1],v=f[2],g=f[3],x=f[4],b=0;b<80;b++){if(b<16)l[b]=c[d+b]|0;else{var _=l[b-3]^l[b-8]^l[b-14]^l[b-16];l[b]=_<<1|_>>>31}var w=(m<<5|m>>>27)+x+l[b];b<20?w+=(p&v|~p&g)+1518500249:b<40?w+=(p^v^g)+1859775393:b<60?w+=(p&v|p&g|v&g)-1894007588:w+=(p^v^g)-899497514,x=g,g=v,v=p<<30|p>>>2,p=m,m=w}f[0]=f[0]+m|0,f[1]=f[1]+p|0,f[2]=f[2]+v|0,f[3]=f[3]+g|0,f[4]=f[4]+x|0},_doFinalize:function(){var c=this._data,d=c.words,f=this._nDataBytes*8,m=c.sigBytes*8;return d[m>>>5]|=128<<24-m%32,d[(m+64>>>9<<4)+14]=Math.floor(f/4294967296),d[(m+64>>>9<<4)+15]=f,c.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var c=n.clone.call(this);return c._hash=this._hash.clone(),c}});r.SHA1=n._createHelper(u),r.HmacSHA1=n._createHmacHelper(u)}(),o.SHA1})})(iA);var Db={exports:{}};(function(e,t){(function(o,r){e.exports=r(Bo.exports)})(vt,function(o){return function(r){var a=o,i=a.lib,n=i.WordArray,s=i.Hasher,l=a.algo,u=[],c=[];(function(){function m(x){for(var b=r.sqrt(x),_=2;_<=b;_++)if(!(x%_))return!1;return!0}function p(x){return(x-(x|0))*4294967296|0}for(var v=2,g=0;g<64;)m(v)&&(g<8&&(u[g]=p(r.pow(v,1/2))),c[g]=p(r.pow(v,1/3)),g++),v++})();var d=[],f=l.SHA256=s.extend({_doReset:function(){this._hash=new n.init(u.slice(0))},_doProcessBlock:function(m,p){for(var v=this._hash.words,g=v[0],x=v[1],b=v[2],_=v[3],w=v[4],S=v[5],D=v[6],M=v[7],O=0;O<64;O++){if(O<16)d[O]=m[p+O]|0;else{var T=d[O-15],I=(T<<25|T>>>7)^(T<<14|T>>>18)^T>>>3,N=d[O-2],P=(N<<15|N>>>17)^(N<<13|N>>>19)^N>>>10;d[O]=I+d[O-7]+P+d[O-16]}var F=w&S^~w&D,L=g&x^g&b^x&b,z=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),H=(w<<26|w>>>6)^(w<<21|w>>>11)^(w<<7|w>>>25),X=M+H+F+c[O]+d[O],Y=z+L;M=D,D=S,S=w,w=_+X|0,_=b,b=x,x=g,g=X+Y|0}v[0]=v[0]+g|0,v[1]=v[1]+x|0,v[2]=v[2]+b|0,v[3]=v[3]+_|0,v[4]=v[4]+w|0,v[5]=v[5]+S|0,v[6]=v[6]+D|0,v[7]=v[7]+M|0},_doFinalize:function(){var m=this._data,p=m.words,v=this._nDataBytes*8,g=m.sigBytes*8;return p[g>>>5]|=128<<24-g%32,p[(g+64>>>9<<4)+14]=r.floor(v/4294967296),p[(g+64>>>9<<4)+15]=v,m.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var m=s.clone.call(this);return m._hash=this._hash.clone(),m}});a.SHA256=s._createHelper(f),a.HmacSHA256=s._createHmacHelper(f)}(Math),o.SHA256})})(Db);var i7={exports:{}};(function(e,t){(function(o,r,a){e.exports=r(Bo.exports,Db.exports)})(vt,function(o){return function(){var r=o,a=r.lib,i=a.WordArray,n=r.algo,s=n.SHA256,l=n.SHA224=s.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var u=s._doFinalize.call(this);return u.sigBytes-=4,u}});r.SHA224=s._createHelper(l),r.HmacSHA224=s._createHmacHelper(l)}(),o.SHA224})})(i7);var nA={exports:{}};(function(e,t){(function(o,r,a){e.exports=r(Bo.exports,$h.exports)})(vt,function(o){return function(){var r=o,a=r.lib,i=a.Hasher,n=r.x64,s=n.Word,l=n.WordArray,u=r.algo;function c(){return s.create.apply(s,arguments)}var d=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],f=[];(function(){for(var p=0;p<80;p++)f[p]=c()})();var m=u.SHA512=i.extend({_doReset:function(){this._hash=new l.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(p,v){for(var g=this._hash.words,x=g[0],b=g[1],_=g[2],w=g[3],S=g[4],D=g[5],M=g[6],O=g[7],T=x.high,I=x.low,N=b.high,P=b.low,F=_.high,L=_.low,z=w.high,H=w.low,X=S.high,Y=S.low,de=D.high,ye=D.low,W=M.high,re=M.low,_e=O.high,ve=O.low,ke=T,Ie=I,he=N,De=P,Te=F,J=L,q=z,ne=H,U=X,Z=Y,Ce=de,Q=ye,V=W,R=re,ee=_e,ce=ve,se=0;se<80;se++){var pe,we,Ne=f[se];if(se<16)we=Ne.high=p[v+se*2]|0,pe=Ne.low=p[v+se*2+1]|0;else{var Ge=f[se-15],Ze=Ge.high,ot=Ge.low,Pt=(Ze>>>1|ot<<31)^(Ze>>>8|ot<<24)^Ze>>>7,$t=(ot>>>1|Ze<<31)^(ot>>>8|Ze<<24)^(ot>>>7|Ze<<25),fo=f[se-2],He=fo.high,tt=fo.low,$e=(He>>>19|tt<<13)^(He<<3|tt>>>29)^He>>>6,dt=(tt>>>19|He<<13)^(tt<<3|He>>>29)^(tt>>>6|He<<26),Rt=f[se-7],Ut=Rt.high,gt=Rt.low,po=f[se-16],Ea=po.high,pr=po.low;pe=$t+gt,we=Pt+Ut+(pe>>>0<$t>>>0?1:0),pe=pe+dt,we=we+$e+(pe>>>0<dt>>>0?1:0),pe=pe+pr,we=we+Ea+(pe>>>0<pr>>>0?1:0),Ne.high=we,Ne.low=pe}var zi=U&Ce^~U&V,ni=Z&Q^~Z&R,ps=ke&he^ke&Te^he&Te,qn=Ie&De^Ie&J^De&J,Xe=(ke>>>28|Ie<<4)^(ke<<30|Ie>>>2)^(ke<<25|Ie>>>7),It=(Ie>>>28|ke<<4)^(Ie<<30|ke>>>2)^(Ie<<25|ke>>>7),Qt=(U>>>14|Z<<18)^(U>>>18|Z<<14)^(U<<23|Z>>>9),Zt=(Z>>>14|U<<18)^(Z>>>18|U<<14)^(Z<<23|U>>>9),ro=d[se],la=ro.high,xe=ro.low,Me=ce+Zt,je=ee+Qt+(Me>>>0<ce>>>0?1:0),Me=Me+ni,je=je+zi+(Me>>>0<ni>>>0?1:0),Me=Me+xe,je=je+la+(Me>>>0<xe>>>0?1:0),Me=Me+pe,je=je+we+(Me>>>0<pe>>>0?1:0),pt=It+qn,ht=Xe+ps+(pt>>>0<It>>>0?1:0);ee=V,ce=R,V=Ce,R=Q,Ce=U,Q=Z,Z=ne+Me|0,U=q+je+(Z>>>0<ne>>>0?1:0)|0,q=Te,ne=J,Te=he,J=De,he=ke,De=Ie,Ie=Me+pt|0,ke=je+ht+(Ie>>>0<Me>>>0?1:0)|0}I=x.low=I+Ie,x.high=T+ke+(I>>>0<Ie>>>0?1:0),P=b.low=P+De,b.high=N+he+(P>>>0<De>>>0?1:0),L=_.low=L+J,_.high=F+Te+(L>>>0<J>>>0?1:0),H=w.low=H+ne,w.high=z+q+(H>>>0<ne>>>0?1:0),Y=S.low=Y+Z,S.high=X+U+(Y>>>0<Z>>>0?1:0),ye=D.low=ye+Q,D.high=de+Ce+(ye>>>0<Q>>>0?1:0),re=M.low=re+R,M.high=W+V+(re>>>0<R>>>0?1:0),ve=O.low=ve+ce,O.high=_e+ee+(ve>>>0<ce>>>0?1:0)},_doFinalize:function(){var p=this._data,v=p.words,g=this._nDataBytes*8,x=p.sigBytes*8;v[x>>>5]|=128<<24-x%32,v[(x+128>>>10<<5)+30]=Math.floor(g/4294967296),v[(x+128>>>10<<5)+31]=g,p.sigBytes=v.length*4,this._process();var b=this._hash.toX32();return b},clone:function(){var p=i.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});r.SHA512=i._createHelper(m),r.HmacSHA512=i._createHmacHelper(m)}(),o.SHA512})})(nA);var n7={exports:{}};(function(e,t){(function(o,r,a){e.exports=r(Bo.exports,$h.exports,nA.exports)})(vt,function(o){return function(){var r=o,a=r.x64,i=a.Word,n=a.WordArray,s=r.algo,l=s.SHA512,u=s.SHA384=l.extend({_doReset:function(){this._hash=new n.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var c=l._doFinalize.call(this);return c.sigBytes-=16,c}});r.SHA384=l._createHelper(u),r.HmacSHA384=l._createHmacHelper(u)}(),o.SHA384})})(n7);var s7={exports:{}};(function(e,t){(function(o,r,a){e.exports=r(Bo.exports,$h.exports)})(vt,function(o){return function(r){var a=o,i=a.lib,n=i.WordArray,s=i.Hasher,l=a.x64,u=l.Word,c=a.algo,d=[],f=[],m=[];(function(){for(var g=1,x=0,b=0;b<24;b++){d[g+5*x]=(b+1)*(b+2)/2%64;var _=x%5,w=(2*g+3*x)%5;g=_,x=w}for(var g=0;g<5;g++)for(var x=0;x<5;x++)f[g+5*x]=x+(2*g+3*x)%5*5;for(var S=1,D=0;D<24;D++){for(var M=0,O=0,T=0;T<7;T++){if(S&1){var I=(1<<T)-1;I<32?O^=1<<I:M^=1<<I-32}S&128?S=S<<1^113:S<<=1}m[D]=u.create(M,O)}})();var p=[];(function(){for(var g=0;g<25;g++)p[g]=u.create()})();var v=c.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){for(var g=this._state=[],x=0;x<25;x++)g[x]=new u.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(g,x){for(var b=this._state,_=this.blockSize/2,w=0;w<_;w++){var S=g[x+2*w],D=g[x+2*w+1];S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,D=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360;var M=b[w];M.high^=D,M.low^=S}for(var O=0;O<24;O++){for(var T=0;T<5;T++){for(var I=0,N=0,P=0;P<5;P++){var M=b[T+5*P];I^=M.high,N^=M.low}var F=p[T];F.high=I,F.low=N}for(var T=0;T<5;T++)for(var L=p[(T+4)%5],z=p[(T+1)%5],H=z.high,X=z.low,I=L.high^(H<<1|X>>>31),N=L.low^(X<<1|H>>>31),P=0;P<5;P++){var M=b[T+5*P];M.high^=I,M.low^=N}for(var Y=1;Y<25;Y++){var I,N,M=b[Y],de=M.high,ye=M.low,W=d[Y];W<32?(I=de<<W|ye>>>32-W,N=ye<<W|de>>>32-W):(I=ye<<W-32|de>>>64-W,N=de<<W-32|ye>>>64-W);var re=p[f[Y]];re.high=I,re.low=N}var _e=p[0],ve=b[0];_e.high=ve.high,_e.low=ve.low;for(var T=0;T<5;T++)for(var P=0;P<5;P++){var Y=T+5*P,M=b[Y],ke=p[Y],Ie=p[(T+1)%5+5*P],he=p[(T+2)%5+5*P];M.high=ke.high^~Ie.high&he.high,M.low=ke.low^~Ie.low&he.low}var M=b[0],De=m[O];M.high^=De.high,M.low^=De.low}},_doFinalize:function(){var g=this._data,x=g.words;this._nDataBytes*8;var b=g.sigBytes*8,_=this.blockSize*32;x[b>>>5]|=1<<24-b%32,x[(r.ceil((b+1)/_)*_>>>5)-1]|=128,g.sigBytes=x.length*4,this._process();for(var w=this._state,S=this.cfg.outputLength/8,D=S/8,M=[],O=0;O<D;O++){var T=w[O],I=T.high,N=T.low;I=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,N=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,M.push(N),M.push(I)}return new n.init(M,S)},clone:function(){for(var g=s.clone.call(this),x=g._state=this._state.slice(0),b=0;b<25;b++)x[b]=x[b].clone();return g}});a.SHA3=s._createHelper(v),a.HmacSHA3=s._createHmacHelper(v)}(Math),o.SHA3})})(s7);var l7={exports:{}};(function(e,t){(function(o,r){e.exports=r(Bo.exports)})(vt,function(o){/** @preserve
	(c) 2012 by Cdric Mesnil. All rights reserved.

	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/return function(r){var a=o,i=a.lib,n=i.WordArray,s=i.Hasher,l=a.algo,u=n.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=n.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=n.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=n.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),m=n.create([0,1518500249,1859775393,2400959708,2840853838]),p=n.create([1352829926,1548603684,1836072691,2053994217,0]),v=l.RIPEMD160=s.extend({_doReset:function(){this._hash=n.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(D,M){for(var O=0;O<16;O++){var T=M+O,I=D[T];D[T]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360}var N=this._hash.words,P=m.words,F=p.words,L=u.words,z=c.words,H=d.words,X=f.words,Y,de,ye,W,re,_e,ve,ke,Ie,he;_e=Y=N[0],ve=de=N[1],ke=ye=N[2],Ie=W=N[3],he=re=N[4];for(var De,O=0;O<80;O+=1)De=Y+D[M+L[O]]|0,O<16?De+=g(de,ye,W)+P[0]:O<32?De+=x(de,ye,W)+P[1]:O<48?De+=b(de,ye,W)+P[2]:O<64?De+=_(de,ye,W)+P[3]:De+=w(de,ye,W)+P[4],De=De|0,De=S(De,H[O]),De=De+re|0,Y=re,re=W,W=S(ye,10),ye=de,de=De,De=_e+D[M+z[O]]|0,O<16?De+=w(ve,ke,Ie)+F[0]:O<32?De+=_(ve,ke,Ie)+F[1]:O<48?De+=b(ve,ke,Ie)+F[2]:O<64?De+=x(ve,ke,Ie)+F[3]:De+=g(ve,ke,Ie)+F[4],De=De|0,De=S(De,X[O]),De=De+he|0,_e=he,he=Ie,Ie=S(ke,10),ke=ve,ve=De;De=N[1]+ye+Ie|0,N[1]=N[2]+W+he|0,N[2]=N[3]+re+_e|0,N[3]=N[4]+Y+ve|0,N[4]=N[0]+de+ke|0,N[0]=De},_doFinalize:function(){var D=this._data,M=D.words,O=this._nDataBytes*8,T=D.sigBytes*8;M[T>>>5]|=128<<24-T%32,M[(T+64>>>9<<4)+14]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,D.sigBytes=(M.length+1)*4,this._process();for(var I=this._hash,N=I.words,P=0;P<5;P++){var F=N[P];N[P]=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360}return I},clone:function(){var D=s.clone.call(this);return D._hash=this._hash.clone(),D}});function g(D,M,O){return D^M^O}function x(D,M,O){return D&M|~D&O}function b(D,M,O){return(D|~M)^O}function _(D,M,O){return D&O|M&~O}function w(D,M,O){return D^(M|~O)}function S(D,M){return D<<M|D>>>32-M}a.RIPEMD160=s._createHelper(v),a.HmacRIPEMD160=s._createHmacHelper(v)}(),o.RIPEMD160})})(l7);var Ob={exports:{}};(function(e,t){(function(o,r){e.exports=r(Bo.exports)})(vt,function(o){(function(){var r=o,a=r.lib,i=a.Base,n=r.enc,s=n.Utf8,l=r.algo;l.HMAC=i.extend({init:function(u,c){u=this._hasher=new u.init,typeof c=="string"&&(c=s.parse(c));var d=u.blockSize,f=d*4;c.sigBytes>f&&(c=u.finalize(c)),c.clamp();for(var m=this._oKey=c.clone(),p=this._iKey=c.clone(),v=m.words,g=p.words,x=0;x<d;x++)v[x]^=1549556828,g[x]^=909522486;m.sigBytes=p.sigBytes=f,this.reset()},reset:function(){var u=this._hasher;u.reset(),u.update(this._iKey)},update:function(u){return this._hasher.update(u),this},finalize:function(u){var c=this._hasher,d=c.finalize(u);c.reset();var f=c.finalize(this._oKey.clone().concat(d));return f}})})()})})(Ob);var c7={exports:{}};(function(e,t){(function(o,r,a){e.exports=r(Bo.exports,Db.exports,Ob.exports)})(vt,function(o){return function(){var r=o,a=r.lib,i=a.Base,n=a.WordArray,s=r.algo,l=s.SHA256,u=s.HMAC,c=s.PBKDF2=i.extend({cfg:i.extend({keySize:128/32,hasher:l,iterations:25e4}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,f){for(var m=this.cfg,p=u.create(m.hasher,d),v=n.create(),g=n.create([1]),x=v.words,b=g.words,_=m.keySize,w=m.iterations;x.length<_;){var S=p.update(f).finalize(g);p.reset();for(var D=S.words,M=D.length,O=S,T=1;T<w;T++){O=p.finalize(O),p.reset();for(var I=O.words,N=0;N<M;N++)D[N]^=I[N]}v.concat(S),b[0]++}return v.sigBytes=_*4,v}});r.PBKDF2=function(d,f,m){return c.create(m).compute(d,f)}}(),o.PBKDF2})})(c7);var lc={exports:{}};(function(e,t){(function(o,r,a){e.exports=r(Bo.exports,iA.exports,Ob.exports)})(vt,function(o){return function(){var r=o,a=r.lib,i=a.Base,n=a.WordArray,s=r.algo,l=s.MD5,u=s.EvpKDF=i.extend({cfg:i.extend({keySize:128/32,hasher:l,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,d){for(var f,m=this.cfg,p=m.hasher.create(),v=n.create(),g=v.words,x=m.keySize,b=m.iterations;g.length<x;){f&&p.update(f),f=p.update(c).finalize(d),p.reset();for(var _=1;_<b;_++)f=p.finalize(f),p.reset();v.concat(f)}return v.sigBytes=x*4,v}});r.EvpKDF=function(c,d,f){return u.create(f).compute(c,d)}}(),o.EvpKDF})})(lc);var Br={exports:{}};(function(e,t){(function(o,r,a){e.exports=r(Bo.exports,lc.exports)})(vt,function(o){o.lib.Cipher||function(r){var a=o,i=a.lib,n=i.Base,s=i.WordArray,l=i.BufferedBlockAlgorithm,u=a.enc;u.Utf8;var c=u.Base64,d=a.algo,f=d.EvpKDF,m=i.Cipher=l.extend({cfg:n.extend(),createEncryptor:function(I,N){return this.create(this._ENC_XFORM_MODE,I,N)},createDecryptor:function(I,N){return this.create(this._DEC_XFORM_MODE,I,N)},init:function(I,N,P){this.cfg=this.cfg.extend(P),this._xformMode=I,this._key=N,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(I){return this._append(I),this._process()},finalize:function(I){I&&this._append(I);var N=this._doFinalize();return N},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function I(N){return typeof N=="string"?T:D}return function(N){return{encrypt:function(P,F,L){return I(F).encrypt(N,P,F,L)},decrypt:function(P,F,L){return I(F).decrypt(N,P,F,L)}}}}()});i.StreamCipher=m.extend({_doFinalize:function(){var I=this._process(!0);return I},blockSize:1});var p=a.mode={},v=i.BlockCipherMode=n.extend({createEncryptor:function(I,N){return this.Encryptor.create(I,N)},createDecryptor:function(I,N){return this.Decryptor.create(I,N)},init:function(I,N){this._cipher=I,this._iv=N}}),g=p.CBC=function(){var I=v.extend();I.Encryptor=I.extend({processBlock:function(P,F){var L=this._cipher,z=L.blockSize;N.call(this,P,F,z),L.encryptBlock(P,F),this._prevBlock=P.slice(F,F+z)}}),I.Decryptor=I.extend({processBlock:function(P,F){var L=this._cipher,z=L.blockSize,H=P.slice(F,F+z);L.decryptBlock(P,F),N.call(this,P,F,z),this._prevBlock=H}});function N(P,F,L){var z,H=this._iv;H?(z=H,this._iv=r):z=this._prevBlock;for(var X=0;X<L;X++)P[F+X]^=z[X]}return I}(),x=a.pad={},b=x.Pkcs7={pad:function(I,N){for(var P=N*4,F=P-I.sigBytes%P,L=F<<24|F<<16|F<<8|F,z=[],H=0;H<F;H+=4)z.push(L);var X=s.create(z,F);I.concat(X)},unpad:function(I){var N=I.words[I.sigBytes-1>>>2]&255;I.sigBytes-=N}};i.BlockCipher=m.extend({cfg:m.cfg.extend({mode:g,padding:b}),reset:function(){var I;m.reset.call(this);var N=this.cfg,P=N.iv,F=N.mode;this._xformMode==this._ENC_XFORM_MODE?I=F.createEncryptor:(I=F.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==I?this._mode.init(this,P&&P.words):(this._mode=I.call(F,this,P&&P.words),this._mode.__creator=I)},_doProcessBlock:function(I,N){this._mode.processBlock(I,N)},_doFinalize:function(){var I,N=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(N.pad(this._data,this.blockSize),I=this._process(!0)):(I=this._process(!0),N.unpad(I)),I},blockSize:128/32});var _=i.CipherParams=n.extend({init:function(I){this.mixIn(I)},toString:function(I){return(I||this.formatter).stringify(this)}}),w=a.format={},S=w.OpenSSL={stringify:function(I){var N,P=I.ciphertext,F=I.salt;return F?N=s.create([1398893684,1701076831]).concat(F).concat(P):N=P,N.toString(c)},parse:function(I){var N,P=c.parse(I),F=P.words;return F[0]==1398893684&&F[1]==1701076831&&(N=s.create(F.slice(2,4)),F.splice(0,4),P.sigBytes-=16),_.create({ciphertext:P,salt:N})}},D=i.SerializableCipher=n.extend({cfg:n.extend({format:S}),encrypt:function(I,N,P,F){F=this.cfg.extend(F);var L=I.createEncryptor(P,F),z=L.finalize(N),H=L.cfg;return _.create({ciphertext:z,key:P,iv:H.iv,algorithm:I,mode:H.mode,padding:H.padding,blockSize:I.blockSize,formatter:F.format})},decrypt:function(I,N,P,F){F=this.cfg.extend(F),N=this._parse(N,F.format);var L=I.createDecryptor(P,F).finalize(N.ciphertext);return L},_parse:function(I,N){return typeof I=="string"?N.parse(I,this):I}}),M=a.kdf={},O=M.OpenSSL={execute:function(I,N,P,F,L){if(F||(F=s.random(64/8)),L)var z=f.create({keySize:N+P,hasher:L}).compute(I,F);else var z=f.create({keySize:N+P}).compute(I,F);var H=s.create(z.words.slice(N),P*4);return z.sigBytes=N*4,_.create({key:z,iv:H,salt:F})}},T=i.PasswordBasedCipher=D.extend({cfg:D.cfg.extend({kdf:O}),encrypt:function(I,N,P,F){F=this.cfg.extend(F);var L=F.kdf.execute(P,I.keySize,I.ivSize,F.salt,F.hasher);F.iv=L.iv;var z=D.encrypt.call(this,I,N,L.key,F);return z.mixIn(L),z},decrypt:function(I,N,P,F){F=this.cfg.extend(F),N=this._parse(N,F.format);var L=F.kdf.execute(P,I.keySize,I.ivSize,N.salt,F.hasher);F.iv=L.iv;var z=D.decrypt.call(this,I,N,L.key,F);return z}})}()})})(Br);var u7={exports:{}};(function(e,t){(function(o,r,a){e.exports=r(Bo.exports,Br.exports)})(vt,function(o){return o.mode.CFB=function(){var r=o.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(i,n){var s=this._cipher,l=s.blockSize;a.call(this,i,n,l,s),this._prevBlock=i.slice(n,n+l)}}),r.Decryptor=r.extend({processBlock:function(i,n){var s=this._cipher,l=s.blockSize,u=i.slice(n,n+l);a.call(this,i,n,l,s),this._prevBlock=u}});function a(i,n,s,l){var u,c=this._iv;c?(u=c.slice(0),this._iv=void 0):u=this._prevBlock,l.encryptBlock(u,0);for(var d=0;d<s;d++)i[n+d]^=u[d]}return r}(),o.mode.CFB})})(u7);var d7={exports:{}};(function(e,t){(function(o,r,a){e.exports=r(Bo.exports,Br.exports)})(vt,function(o){return o.mode.CTR=function(){var r=o.lib.BlockCipherMode.extend(),a=r.Encryptor=r.extend({processBlock:function(i,n){var s=this._cipher,l=s.blockSize,u=this._iv,c=this._counter;u&&(c=this._counter=u.slice(0),this._iv=void 0);var d=c.slice(0);s.encryptBlock(d,0),c[l-1]=c[l-1]+1|0;for(var f=0;f<l;f++)i[n+f]^=d[f]}});return r.Decryptor=a,r}(),o.mode.CTR})})(d7);var f7={exports:{}};(function(e,t){(function(o,r,a){e.exports=r(Bo.exports,Br.exports)})(vt,function(o){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return o.mode.CTRGladman=function(){var r=o.lib.BlockCipherMode.extend();function a(s){if((s>>24&255)===255){var l=s>>16&255,u=s>>8&255,c=s&255;l===255?(l=0,u===255?(u=0,c===255?c=0:++c):++u):++l,s=0,s+=l<<16,s+=u<<8,s+=c}else s+=1<<24;return s}function i(s){return(s[0]=a(s[0]))===0&&(s[1]=a(s[1])),s}var n=r.Encryptor=r.extend({processBlock:function(s,l){var u=this._cipher,c=u.blockSize,d=this._iv,f=this._counter;d&&(f=this._counter=d.slice(0),this._iv=void 0),i(f);var m=f.slice(0);u.encryptBlock(m,0);for(var p=0;p<c;p++)s[l+p]^=m[p]}});return r.Decryptor=n,r}(),o.mode.CTRGladman})})(f7);var m7={exports:{}};(function(e,t){(function(o,r,a){e.exports=r(Bo.exports,Br.exports)})(vt,function(o){return o.mode.OFB=function(){var r=o.lib.BlockCipherMode.extend(),a=r.Encryptor=r.extend({processBlock:function(i,n){var s=this._cipher,l=s.blockSize,u=this._iv,c=this._keystream;u&&(c=this._keystream=u.slice(0),this._iv=void 0),s.encryptBlock(c,0);for(var d=0;d<l;d++)i[n+d]^=c[d]}});return r.Decryptor=a,r}(),o.mode.OFB})})(m7);var p7={exports:{}};(function(e,t){(function(o,r,a){e.exports=r(Bo.exports,Br.exports)})(vt,function(o){return o.mode.ECB=function(){var r=o.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(a,i){this._cipher.encryptBlock(a,i)}}),r.Decryptor=r.extend({processBlock:function(a,i){this._cipher.decryptBlock(a,i)}}),r}(),o.mode.ECB})})(p7);var h7={exports:{}};(function(e,t){(function(o,r,a){e.exports=r(Bo.exports,Br.exports)})(vt,function(o){return o.pad.AnsiX923={pad:function(r,a){var i=r.sigBytes,n=a*4,s=n-i%n,l=i+s-1;r.clamp(),r.words[l>>>2]|=s<<24-l%4*8,r.sigBytes+=s},unpad:function(r){var a=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=a}},o.pad.Ansix923})})(h7);var v7={exports:{}};(function(e,t){(function(o,r,a){e.exports=r(Bo.exports,Br.exports)})(vt,function(o){return o.pad.Iso10126={pad:function(r,a){var i=a*4,n=i-r.sigBytes%i;r.concat(o.lib.WordArray.random(n-1)).concat(o.lib.WordArray.create([n<<24],1))},unpad:function(r){var a=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=a}},o.pad.Iso10126})})(v7);var g7={exports:{}};(function(e,t){(function(o,r,a){e.exports=r(Bo.exports,Br.exports)})(vt,function(o){return o.pad.Iso97971={pad:function(r,a){r.concat(o.lib.WordArray.create([2147483648],1)),o.pad.ZeroPadding.pad(r,a)},unpad:function(r){o.pad.ZeroPadding.unpad(r),r.sigBytes--}},o.pad.Iso97971})})(g7);var _7={exports:{}};(function(e,t){(function(o,r,a){e.exports=r(Bo.exports,Br.exports)})(vt,function(o){return o.pad.ZeroPadding={pad:function(r,a){var i=a*4;r.clamp(),r.sigBytes+=i-(r.sigBytes%i||i)},unpad:function(r){for(var a=r.words,i=r.sigBytes-1,i=r.sigBytes-1;i>=0;i--)if(a[i>>>2]>>>24-i%4*8&255){r.sigBytes=i+1;break}}},o.pad.ZeroPadding})})(_7);var b7={exports:{}};(function(e,t){(function(o,r,a){e.exports=r(Bo.exports,Br.exports)})(vt,function(o){return o.pad.NoPadding={pad:function(){},unpad:function(){}},o.pad.NoPadding})})(b7);var y7={exports:{}};(function(e,t){(function(o,r,a){e.exports=r(Bo.exports,Br.exports)})(vt,function(o){return function(r){var a=o,i=a.lib,n=i.CipherParams,s=a.enc,l=s.Hex,u=a.format;u.Hex={stringify:function(c){return c.ciphertext.toString(l)},parse:function(c){var d=l.parse(c);return n.create({ciphertext:d})}}}(),o.format.Hex})})(y7);var x7={exports:{}};(function(e,t){(function(o,r,a){e.exports=r(Bo.exports,Iu.exports,sc.exports,lc.exports,Br.exports)})(vt,function(o){return function(){var r=o,a=r.lib,i=a.BlockCipher,n=r.algo,s=[],l=[],u=[],c=[],d=[],f=[],m=[],p=[],v=[],g=[];(function(){for(var _=[],w=0;w<256;w++)w<128?_[w]=w<<1:_[w]=w<<1^283;for(var S=0,D=0,w=0;w<256;w++){var M=D^D<<1^D<<2^D<<3^D<<4;M=M>>>8^M&255^99,s[S]=M,l[M]=S;var O=_[S],T=_[O],I=_[T],N=_[M]*257^M*16843008;u[S]=N<<24|N>>>8,c[S]=N<<16|N>>>16,d[S]=N<<8|N>>>24,f[S]=N;var N=I*16843009^T*65537^O*257^S*16843008;m[M]=N<<24|N>>>8,p[M]=N<<16|N>>>16,v[M]=N<<8|N>>>24,g[M]=N,S?(S=O^_[_[_[I^O]]],D^=_[_[D]]):S=D=1}})();var x=[0,1,2,4,8,16,32,64,128,27,54],b=n.AES=i.extend({_doReset:function(){var _;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var w=this._keyPriorReset=this._key,S=w.words,D=w.sigBytes/4,M=this._nRounds=D+6,O=(M+1)*4,T=this._keySchedule=[],I=0;I<O;I++)I<D?T[I]=S[I]:(_=T[I-1],I%D?D>6&&I%D==4&&(_=s[_>>>24]<<24|s[_>>>16&255]<<16|s[_>>>8&255]<<8|s[_&255]):(_=_<<8|_>>>24,_=s[_>>>24]<<24|s[_>>>16&255]<<16|s[_>>>8&255]<<8|s[_&255],_^=x[I/D|0]<<24),T[I]=T[I-D]^_);for(var N=this._invKeySchedule=[],P=0;P<O;P++){var I=O-P;if(P%4)var _=T[I];else var _=T[I-4];P<4||I<=4?N[P]=_:N[P]=m[s[_>>>24]]^p[s[_>>>16&255]]^v[s[_>>>8&255]]^g[s[_&255]]}}},encryptBlock:function(_,w){this._doCryptBlock(_,w,this._keySchedule,u,c,d,f,s)},decryptBlock:function(_,w){var S=_[w+1];_[w+1]=_[w+3],_[w+3]=S,this._doCryptBlock(_,w,this._invKeySchedule,m,p,v,g,l);var S=_[w+1];_[w+1]=_[w+3],_[w+3]=S},_doCryptBlock:function(_,w,S,D,M,O,T,I){for(var N=this._nRounds,P=_[w]^S[0],F=_[w+1]^S[1],L=_[w+2]^S[2],z=_[w+3]^S[3],H=4,X=1;X<N;X++){var Y=D[P>>>24]^M[F>>>16&255]^O[L>>>8&255]^T[z&255]^S[H++],de=D[F>>>24]^M[L>>>16&255]^O[z>>>8&255]^T[P&255]^S[H++],ye=D[L>>>24]^M[z>>>16&255]^O[P>>>8&255]^T[F&255]^S[H++],W=D[z>>>24]^M[P>>>16&255]^O[F>>>8&255]^T[L&255]^S[H++];P=Y,F=de,L=ye,z=W}var Y=(I[P>>>24]<<24|I[F>>>16&255]<<16|I[L>>>8&255]<<8|I[z&255])^S[H++],de=(I[F>>>24]<<24|I[L>>>16&255]<<16|I[z>>>8&255]<<8|I[P&255])^S[H++],ye=(I[L>>>24]<<24|I[z>>>16&255]<<16|I[P>>>8&255]<<8|I[F&255])^S[H++],W=(I[z>>>24]<<24|I[P>>>16&255]<<16|I[F>>>8&255]<<8|I[L&255])^S[H++];_[w]=Y,_[w+1]=de,_[w+2]=ye,_[w+3]=W},keySize:256/32});r.AES=i._createHelper(b)}(),o.AES})})(x7);var C7={exports:{}};(function(e,t){(function(o,r,a){e.exports=r(Bo.exports,Iu.exports,sc.exports,lc.exports,Br.exports)})(vt,function(o){return function(){var r=o,a=r.lib,i=a.WordArray,n=a.BlockCipher,s=r.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],m=s.DES=n.extend({_doReset:function(){for(var x=this._key,b=x.words,_=[],w=0;w<56;w++){var S=l[w]-1;_[w]=b[S>>>5]>>>31-S%32&1}for(var D=this._subKeys=[],M=0;M<16;M++){for(var O=D[M]=[],T=c[M],w=0;w<24;w++)O[w/6|0]|=_[(u[w]-1+T)%28]<<31-w%6,O[4+(w/6|0)]|=_[28+(u[w+24]-1+T)%28]<<31-w%6;O[0]=O[0]<<1|O[0]>>>31;for(var w=1;w<7;w++)O[w]=O[w]>>>(w-1)*4+3;O[7]=O[7]<<5|O[7]>>>27}for(var I=this._invSubKeys=[],w=0;w<16;w++)I[w]=D[15-w]},encryptBlock:function(x,b){this._doCryptBlock(x,b,this._subKeys)},decryptBlock:function(x,b){this._doCryptBlock(x,b,this._invSubKeys)},_doCryptBlock:function(x,b,_){this._lBlock=x[b],this._rBlock=x[b+1],p.call(this,4,252645135),p.call(this,16,65535),v.call(this,2,858993459),v.call(this,8,16711935),p.call(this,1,1431655765);for(var w=0;w<16;w++){for(var S=_[w],D=this._lBlock,M=this._rBlock,O=0,T=0;T<8;T++)O|=d[T][((M^S[T])&f[T])>>>0];this._lBlock=M,this._rBlock=D^O}var I=this._lBlock;this._lBlock=this._rBlock,this._rBlock=I,p.call(this,1,1431655765),v.call(this,8,16711935),v.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),x[b]=this._lBlock,x[b+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(x,b){var _=(this._lBlock>>>x^this._rBlock)&b;this._rBlock^=_,this._lBlock^=_<<x}function v(x,b){var _=(this._rBlock>>>x^this._lBlock)&b;this._lBlock^=_,this._rBlock^=_<<x}r.DES=n._createHelper(m);var g=s.TripleDES=n.extend({_doReset:function(){var x=this._key,b=x.words;if(b.length!==2&&b.length!==4&&b.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var _=b.slice(0,2),w=b.length<4?b.slice(0,2):b.slice(2,4),S=b.length<6?b.slice(0,2):b.slice(4,6);this._des1=m.createEncryptor(i.create(_)),this._des2=m.createEncryptor(i.create(w)),this._des3=m.createEncryptor(i.create(S))},encryptBlock:function(x,b){this._des1.encryptBlock(x,b),this._des2.decryptBlock(x,b),this._des3.encryptBlock(x,b)},decryptBlock:function(x,b){this._des3.decryptBlock(x,b),this._des2.encryptBlock(x,b),this._des1.decryptBlock(x,b)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=n._createHelper(g)}(),o.TripleDES})})(C7);var w7={exports:{}};(function(e,t){(function(o,r,a){e.exports=r(Bo.exports,Iu.exports,sc.exports,lc.exports,Br.exports)})(vt,function(o){return function(){var r=o,a=r.lib,i=a.StreamCipher,n=r.algo,s=n.RC4=i.extend({_doReset:function(){for(var c=this._key,d=c.words,f=c.sigBytes,m=this._S=[],p=0;p<256;p++)m[p]=p;for(var p=0,v=0;p<256;p++){var g=p%f,x=d[g>>>2]>>>24-g%4*8&255;v=(v+m[p]+x)%256;var b=m[p];m[p]=m[v],m[v]=b}this._i=this._j=0},_doProcessBlock:function(c,d){c[d]^=l.call(this)},keySize:256/32,ivSize:0});function l(){for(var c=this._S,d=this._i,f=this._j,m=0,p=0;p<4;p++){d=(d+1)%256,f=(f+c[d])%256;var v=c[d];c[d]=c[f],c[f]=v,m|=c[(c[d]+c[f])%256]<<24-p*8}return this._i=d,this._j=f,m}r.RC4=i._createHelper(s);var u=n.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)l.call(this)}});r.RC4Drop=i._createHelper(u)}(),o.RC4})})(w7);var E7={exports:{}};(function(e,t){(function(o,r,a){e.exports=r(Bo.exports,Iu.exports,sc.exports,lc.exports,Br.exports)})(vt,function(o){return function(){var r=o,a=r.lib,i=a.StreamCipher,n=r.algo,s=[],l=[],u=[],c=n.Rabbit=i.extend({_doReset:function(){for(var f=this._key.words,m=this.cfg.iv,p=0;p<4;p++)f[p]=(f[p]<<8|f[p]>>>24)&16711935|(f[p]<<24|f[p]>>>8)&4278255360;var v=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],g=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var p=0;p<4;p++)d.call(this);for(var p=0;p<8;p++)g[p]^=v[p+4&7];if(m){var x=m.words,b=x[0],_=x[1],w=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,S=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,D=w>>>16|S&4294901760,M=S<<16|w&65535;g[0]^=w,g[1]^=D,g[2]^=S,g[3]^=M,g[4]^=w,g[5]^=D,g[6]^=S,g[7]^=M;for(var p=0;p<4;p++)d.call(this)}},_doProcessBlock:function(f,m){var p=this._X;d.call(this),s[0]=p[0]^p[5]>>>16^p[3]<<16,s[1]=p[2]^p[7]>>>16^p[5]<<16,s[2]=p[4]^p[1]>>>16^p[7]<<16,s[3]=p[6]^p[3]>>>16^p[1]<<16;for(var v=0;v<4;v++)s[v]=(s[v]<<8|s[v]>>>24)&16711935|(s[v]<<24|s[v]>>>8)&4278255360,f[m+v]^=s[v]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,m=this._C,p=0;p<8;p++)l[p]=m[p];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<l[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<l[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<l[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<l[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<l[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<l[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<l[6]>>>0?1:0)|0,this._b=m[7]>>>0<l[7]>>>0?1:0;for(var p=0;p<8;p++){var v=f[p]+m[p],g=v&65535,x=v>>>16,b=((g*g>>>17)+g*x>>>15)+x*x,_=((v&4294901760)*v|0)+((v&65535)*v|0);u[p]=b^_}f[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,f[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,f[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,f[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,f[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,f[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,f[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,f[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}r.Rabbit=i._createHelper(c)}(),o.Rabbit})})(E7);var S7={exports:{}};(function(e,t){(function(o,r,a){e.exports=r(Bo.exports,Iu.exports,sc.exports,lc.exports,Br.exports)})(vt,function(o){return function(){var r=o,a=r.lib,i=a.StreamCipher,n=r.algo,s=[],l=[],u=[],c=n.RabbitLegacy=i.extend({_doReset:function(){var f=this._key.words,m=this.cfg.iv,p=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],v=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var g=0;g<4;g++)d.call(this);for(var g=0;g<8;g++)v[g]^=p[g+4&7];if(m){var x=m.words,b=x[0],_=x[1],w=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,S=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,D=w>>>16|S&4294901760,M=S<<16|w&65535;v[0]^=w,v[1]^=D,v[2]^=S,v[3]^=M,v[4]^=w,v[5]^=D,v[6]^=S,v[7]^=M;for(var g=0;g<4;g++)d.call(this)}},_doProcessBlock:function(f,m){var p=this._X;d.call(this),s[0]=p[0]^p[5]>>>16^p[3]<<16,s[1]=p[2]^p[7]>>>16^p[5]<<16,s[2]=p[4]^p[1]>>>16^p[7]<<16,s[3]=p[6]^p[3]>>>16^p[1]<<16;for(var v=0;v<4;v++)s[v]=(s[v]<<8|s[v]>>>24)&16711935|(s[v]<<24|s[v]>>>8)&4278255360,f[m+v]^=s[v]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,m=this._C,p=0;p<8;p++)l[p]=m[p];m[0]=m[0]+1295307597+this._b|0,m[1]=m[1]+3545052371+(m[0]>>>0<l[0]>>>0?1:0)|0,m[2]=m[2]+886263092+(m[1]>>>0<l[1]>>>0?1:0)|0,m[3]=m[3]+1295307597+(m[2]>>>0<l[2]>>>0?1:0)|0,m[4]=m[4]+3545052371+(m[3]>>>0<l[3]>>>0?1:0)|0,m[5]=m[5]+886263092+(m[4]>>>0<l[4]>>>0?1:0)|0,m[6]=m[6]+1295307597+(m[5]>>>0<l[5]>>>0?1:0)|0,m[7]=m[7]+3545052371+(m[6]>>>0<l[6]>>>0?1:0)|0,this._b=m[7]>>>0<l[7]>>>0?1:0;for(var p=0;p<8;p++){var v=f[p]+m[p],g=v&65535,x=v>>>16,b=((g*g>>>17)+g*x>>>15)+x*x,_=((v&4294901760)*v|0)+((v&65535)*v|0);u[p]=b^_}f[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,f[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,f[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,f[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,f[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,f[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,f[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,f[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}r.RabbitLegacy=i._createHelper(c)}(),o.RabbitLegacy})})(S7);var I7={exports:{}};(function(e,t){(function(o,r,a){e.exports=r(Bo.exports,Iu.exports,sc.exports,lc.exports,Br.exports)})(vt,function(o){return function(){var r=o,a=r.lib,i=a.BlockCipher,n=r.algo;const s=16,l=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],u=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function d(g,x){let b=x>>24&255,_=x>>16&255,w=x>>8&255,S=x&255,D=g.sbox[0][b]+g.sbox[1][_];return D=D^g.sbox[2][w],D=D+g.sbox[3][S],D}function f(g,x,b){let _=x,w=b,S;for(let D=0;D<s;++D)_=_^g.pbox[D],w=d(g,_)^w,S=_,_=w,w=S;return S=_,_=w,w=S,w=w^g.pbox[s],_=_^g.pbox[s+1],{left:_,right:w}}function m(g,x,b){let _=x,w=b,S;for(let D=s+1;D>1;--D)_=_^g.pbox[D],w=d(g,_)^w,S=_,_=w,w=S;return S=_,_=w,w=S,w=w^g.pbox[1],_=_^g.pbox[0],{left:_,right:w}}function p(g,x,b){for(let M=0;M<4;M++){g.sbox[M]=[];for(let O=0;O<256;O++)g.sbox[M][O]=u[M][O]}let _=0;for(let M=0;M<s+2;M++)g.pbox[M]=l[M]^x[_],_++,_>=b&&(_=0);let w=0,S=0,D=0;for(let M=0;M<s+2;M+=2)D=f(g,w,S),w=D.left,S=D.right,g.pbox[M]=w,g.pbox[M+1]=S;for(let M=0;M<4;M++)for(let O=0;O<256;O+=2)D=f(g,w,S),w=D.left,S=D.right,g.sbox[M][O]=w,g.sbox[M][O+1]=S;return!0}var v=n.Blowfish=i.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,x=g.words,b=g.sigBytes/4;p(c,x,b)}},encryptBlock:function(g,x){var b=f(c,g[x],g[x+1]);g[x]=b.left,g[x+1]=b.right},decryptBlock:function(g,x){var b=m(c,g[x],g[x+1]);g[x]=b.left,g[x+1]=b.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=i._createHelper(v)}(),o.Blowfish})})(I7);(function(e,t){(function(o,r,a){e.exports=r(Bo.exports,$h.exports,o7.exports,a7.exports,Iu.exports,r7.exports,sc.exports,iA.exports,Db.exports,i7.exports,nA.exports,n7.exports,s7.exports,l7.exports,Ob.exports,c7.exports,lc.exports,Br.exports,u7.exports,d7.exports,f7.exports,m7.exports,p7.exports,h7.exports,v7.exports,g7.exports,_7.exports,b7.exports,y7.exports,x7.exports,C7.exports,w7.exports,E7.exports,S7.exports,I7.exports)})(vt,function(o){return o})})(t7);var kP=t7.exports;function Zke(e){return e}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Hf=typeof window!="undefined";function aNe(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const fa=Object.assign;function Jy(e,t){const o={};for(const r in t){const a=t[r];o[r]=Vs(a)?a.map(e):e(a)}return o}const fp=()=>{},Vs=Array.isArray,rNe=/\/$/,iNe=e=>e.replace(rNe,"");function Zy(e,t,o="/"){let r,a={},i="",n="";const s=t.indexOf("#");let l=t.indexOf("?");return s<l&&s>=0&&(l=-1),l>-1&&(r=t.slice(0,l),i=t.slice(l+1,s>-1?s:t.length),a=e(i)),s>-1&&(r=r||t.slice(0,s),n=t.slice(s,t.length)),r=cNe(r!=null?r:t,o),{fullPath:r+(i&&"?")+i+n,path:r,query:a,hash:n}}function nNe(e,t){const o=t.query?e(t.query):"";return t.path+(o&&"?")+o+(t.hash||"")}function RP(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function sNe(e,t,o){const r=t.matched.length-1,a=o.matched.length-1;return r>-1&&r===a&&Om(t.matched[r],o.matched[a])&&A7(t.params,o.params)&&e(t.query)===e(o.query)&&t.hash===o.hash}function Om(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function A7(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const o in e)if(!lNe(e[o],t[o]))return!1;return!0}function lNe(e,t){return Vs(e)?VP(e,t):Vs(t)?VP(t,e):e===t}function VP(e,t){return Vs(t)?e.length===t.length&&e.every((o,r)=>o===t[r]):e.length===1&&e[0]===t}function cNe(e,t){if(e.startsWith("/"))return e;if(!e)return t;const o=t.split("/"),r=e.split("/"),a=r[r.length-1];(a===".."||a===".")&&r.push("");let i=o.length-1,n,s;for(n=0;n<r.length;n++)if(s=r[n],s!==".")if(s==="..")i>1&&i--;else break;return o.slice(0,i).join("/")+"/"+r.slice(n-(n===r.length?1:0)).join("/")}var Jp;(function(e){e.pop="pop",e.push="push"})(Jp||(Jp={}));var mp;(function(e){e.back="back",e.forward="forward",e.unknown=""})(mp||(mp={}));function uNe(e){if(!e)if(Hf){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),iNe(e)}const dNe=/^[^#]+#/;function fNe(e,t){return e.replace(dNe,"#")+t}function mNe(e,t){const o=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-o.left-(t.left||0),top:r.top-o.top-(t.top||0)}}const Pb=()=>({left:window.pageXOffset,top:window.pageYOffset});function pNe(e){let t;if("el"in e){const o=e.el,r=typeof o=="string"&&o.startsWith("#"),a=typeof o=="string"?r?document.getElementById(o.slice(1)):document.querySelector(o):o;if(!a)return;t=mNe(a,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function BP(e,t){return(history.state?history.state.position-t:-1)+e}const lw=new Map;function hNe(e,t){lw.set(e,t)}function vNe(e){const t=lw.get(e);return lw.delete(e),t}let gNe=()=>location.protocol+"//"+location.host;function T7(e,t){const{pathname:o,search:r,hash:a}=t,i=e.indexOf("#");if(i>-1){let s=a.includes(e.slice(i))?e.slice(i).length:1,l=a.slice(s);return l[0]!=="/"&&(l="/"+l),RP(l,"")}return RP(o,e)+r+a}function _Ne(e,t,o,r){let a=[],i=[],n=null;const s=({state:f})=>{const m=T7(e,location),p=o.value,v=t.value;let g=0;if(f){if(o.value=m,t.value=f,n&&n===p){n=null;return}g=v?f.position-v.position:0}else r(m);a.forEach(x=>{x(o.value,p,{delta:g,type:Jp.pop,direction:g?g>0?mp.forward:mp.back:mp.unknown})})};function l(){n=o.value}function u(f){a.push(f);const m=()=>{const p=a.indexOf(f);p>-1&&a.splice(p,1)};return i.push(m),m}function c(){const{history:f}=window;!f.state||f.replaceState(fa({},f.state,{scroll:Pb()}),"")}function d(){for(const f of i)f();i=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:u,destroy:d}}function qP(e,t,o,r=!1,a=!1){return{back:e,current:t,forward:o,replaced:r,position:window.history.length,scroll:a?Pb():null}}function bNe(e){const{history:t,location:o}=window,r={value:T7(e,o)},a={value:t.state};a.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(l,u,c){const d=e.indexOf("#"),f=d>-1?(o.host&&document.querySelector("base")?e:e.slice(d))+l:gNe()+e+l;try{t[c?"replaceState":"pushState"](u,"",f),a.value=u}catch(m){console.error(m),o[c?"replace":"assign"](f)}}function n(l,u){const c=fa({},t.state,qP(a.value.back,l,a.value.forward,!0),u,{position:a.value.position});i(l,c,!0),r.value=l}function s(l,u){const c=fa({},a.value,t.state,{forward:l,scroll:Pb()});i(c.current,c,!0);const d=fa({},qP(r.value,l,null),{position:c.position+1},u);i(l,d,!1),r.value=l}return{location:r,state:a,push:s,replace:n}}function yNe(e){e=uNe(e);const t=bNe(e),o=_Ne(e,t.state,t.location,t.replace);function r(i,n=!0){n||o.pauseListeners(),history.go(i)}const a=fa({location:"",base:e,go:r,createHref:fNe.bind(null,e)},t,o);return Object.defineProperty(a,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(a,"state",{enumerable:!0,get:()=>t.state.value}),a}function xNe(e){return typeof e=="string"||e&&typeof e=="object"}function D7(e){return typeof e=="string"||typeof e=="symbol"}const Sc={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},O7=Symbol("");var LP;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(LP||(LP={}));function Pm(e,t){return fa(new Error,{type:e,[O7]:!0},t)}function Dl(e,t){return e instanceof Error&&O7 in e&&(t==null||!!(e.type&t))}const $P="[^/]+?",CNe={sensitive:!1,strict:!1,start:!0,end:!0},wNe=/[.+*?^${}()[\]/\\]/g;function ENe(e,t){const o=fa({},CNe,t),r=[];let a=o.start?"^":"";const i=[];for(const u of e){const c=u.length?[]:[90];o.strict&&!u.length&&(a+="/");for(let d=0;d<u.length;d++){const f=u[d];let m=40+(o.sensitive?.25:0);if(f.type===0)d||(a+="/"),a+=f.value.replace(wNe,"\\$&"),m+=40;else if(f.type===1){const{value:p,repeatable:v,optional:g,regexp:x}=f;i.push({name:p,repeatable:v,optional:g});const b=x||$P;if(b!==$P){m+=10;try{new RegExp(`(${b})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${p}" (${b}): `+w.message)}}let _=v?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;d||(_=g&&u.length<2?`(?:/${_})`:"/"+_),g&&(_+="?"),a+=_,m+=20,g&&(m+=-8),v&&(m+=-20),b===".*"&&(m+=-50)}c.push(m)}r.push(c)}if(o.strict&&o.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}o.strict||(a+="/?"),o.end?a+="$":o.strict&&(a+="(?:/|$)");const n=new RegExp(a,o.sensitive?"":"i");function s(u){const c=u.match(n),d={};if(!c)return null;for(let f=1;f<c.length;f++){const m=c[f]||"",p=i[f-1];d[p.name]=m&&p.repeatable?m.split("/"):m}return d}function l(u){let c="",d=!1;for(const f of e){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const m of f)if(m.type===0)c+=m.value;else if(m.type===1){const{value:p,repeatable:v,optional:g}=m,x=p in u?u[p]:"";if(Vs(x)&&!v)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const b=Vs(x)?x.join("/"):x;if(!b)if(g)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${p}"`);c+=b}}return c||"/"}return{re:n,score:r,keys:i,parse:s,stringify:l}}function SNe(e,t){let o=0;for(;o<e.length&&o<t.length;){const r=t[o]-e[o];if(r)return r;o++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function INe(e,t){let o=0;const r=e.score,a=t.score;for(;o<r.length&&o<a.length;){const i=SNe(r[o],a[o]);if(i)return i;o++}if(Math.abs(a.length-r.length)===1){if(UP(r))return 1;if(UP(a))return-1}return a.length-r.length}function UP(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const ANe={type:0,value:""},TNe=/[a-zA-Z0-9_]/;function DNe(e){if(!e)return[[]];if(e==="/")return[[ANe]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(m){throw new Error(`ERR (${o})/"${u}": ${m}`)}let o=0,r=o;const a=[];let i;function n(){i&&a.push(i),i=[]}let s=0,l,u="",c="";function d(){!u||(o===0?i.push({type:0,value:u}):o===1||o===2||o===3?(i.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function f(){u+=l}for(;s<e.length;){if(l=e[s++],l==="\\"&&o!==2){r=o,o=4;continue}switch(o){case 0:l==="/"?(u&&d(),n()):l===":"?(d(),o=1):f();break;case 4:f(),o=r;break;case 1:l==="("?o=2:TNe.test(l)?f():(d(),o=0,l!=="*"&&l!=="?"&&l!=="+"&&s--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:o=3:c+=l;break;case 3:d(),o=0,l!=="*"&&l!=="?"&&l!=="+"&&s--,c="";break;default:t("Unknown state");break}}return o===2&&t(`Unfinished custom RegExp for param "${u}"`),d(),n(),a}function ONe(e,t,o){const r=ENe(DNe(e.path),o),a=fa(r,{record:e,parent:t,children:[],alias:[]});return t&&!a.record.aliasOf==!t.record.aliasOf&&t.children.push(a),a}function PNe(e,t){const o=[],r=new Map;t=jP({strict:!1,end:!0,sensitive:!1},t);function a(c){return r.get(c)}function i(c,d,f){const m=!f,p=FNe(c);p.aliasOf=f&&f.record;const v=jP(t,c),g=[p];if("alias"in c){const _=typeof c.alias=="string"?[c.alias]:c.alias;for(const w of _)g.push(fa({},p,{components:f?f.record.components:p.components,path:w,aliasOf:f?f.record:p}))}let x,b;for(const _ of g){const{path:w}=_;if(d&&w[0]!=="/"){const S=d.record.path,D=S[S.length-1]==="/"?"":"/";_.path=d.record.path+(w&&D+w)}if(x=ONe(_,d,v),f?f.alias.push(x):(b=b||x,b!==x&&b.alias.push(x),m&&c.name&&!HP(x)&&n(c.name)),p.children){const S=p.children;for(let D=0;D<S.length;D++)i(S[D],x,f&&f.children[D])}f=f||x,(x.record.components&&Object.keys(x.record.components).length||x.record.name||x.record.redirect)&&l(x)}return b?()=>{n(b)}:fp}function n(c){if(D7(c)){const d=r.get(c);d&&(r.delete(c),o.splice(o.indexOf(d),1),d.children.forEach(n),d.alias.forEach(n))}else{const d=o.indexOf(c);d>-1&&(o.splice(d,1),c.record.name&&r.delete(c.record.name),c.children.forEach(n),c.alias.forEach(n))}}function s(){return o}function l(c){let d=0;for(;d<o.length&&INe(c,o[d])>=0&&(c.record.path!==o[d].record.path||!P7(c,o[d]));)d++;o.splice(d,0,c),c.record.name&&!HP(c)&&r.set(c.record.name,c)}function u(c,d){let f,m={},p,v;if("name"in c&&c.name){if(f=r.get(c.name),!f)throw Pm(1,{location:c});v=f.record.name,m=fa(zP(d.params,f.keys.filter(b=>!b.optional).map(b=>b.name)),c.params&&zP(c.params,f.keys.map(b=>b.name))),p=f.stringify(m)}else if("path"in c)p=c.path,f=o.find(b=>b.re.test(p)),f&&(m=f.parse(p),v=f.record.name);else{if(f=d.name?r.get(d.name):o.find(b=>b.re.test(d.path)),!f)throw Pm(1,{location:c,currentLocation:d});v=f.record.name,m=fa({},d.params,c.params),p=f.stringify(m)}const g=[];let x=f;for(;x;)g.unshift(x.record),x=x.parent;return{name:v,path:p,params:m,matched:g,meta:NNe(g)}}return e.forEach(c=>i(c)),{addRoute:i,resolve:u,removeRoute:n,getRoutes:s,getRecordMatcher:a}}function zP(e,t){const o={};for(const r of t)r in e&&(o[r]=e[r]);return o}function FNe(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:MNe(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function MNe(e){const t={},o=e.props||!1;if("component"in e)t.default=o;else for(const r in e.components)t[r]=typeof o=="object"?o[r]:o;return t}function HP(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function NNe(e){return e.reduce((t,o)=>fa(t,o.meta),{})}function jP(e,t){const o={};for(const r in e)o[r]=r in t?t[r]:e[r];return o}function P7(e,t){return t.children.some(o=>o===e||P7(e,o))}const F7=/#/g,kNe=/&/g,RNe=/\//g,VNe=/=/g,BNe=/\?/g,M7=/\+/g,qNe=/%5B/g,LNe=/%5D/g,N7=/%5E/g,$Ne=/%60/g,k7=/%7B/g,UNe=/%7C/g,R7=/%7D/g,zNe=/%20/g;function sA(e){return encodeURI(""+e).replace(UNe,"|").replace(qNe,"[").replace(LNe,"]")}function HNe(e){return sA(e).replace(k7,"{").replace(R7,"}").replace(N7,"^")}function cw(e){return sA(e).replace(M7,"%2B").replace(zNe,"+").replace(F7,"%23").replace(kNe,"%26").replace($Ne,"`").replace(k7,"{").replace(R7,"}").replace(N7,"^")}function jNe(e){return cw(e).replace(VNe,"%3D")}function GNe(e){return sA(e).replace(F7,"%23").replace(BNe,"%3F")}function WNe(e){return e==null?"":GNe(e).replace(RNe,"%2F")}function i_(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function QNe(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let a=0;a<r.length;++a){const i=r[a].replace(M7," "),n=i.indexOf("="),s=i_(n<0?i:i.slice(0,n)),l=n<0?null:i_(i.slice(n+1));if(s in t){let u=t[s];Vs(u)||(u=t[s]=[u]),u.push(l)}else t[s]=l}return t}function GP(e){let t="";for(let o in e){const r=e[o];if(o=jNe(o),r==null){r!==void 0&&(t+=(t.length?"&":"")+o);continue}(Vs(r)?r.map(i=>i&&cw(i)):[r&&cw(r)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+o,i!=null&&(t+="="+i))})}return t}function XNe(e){const t={};for(const o in e){const r=e[o];r!==void 0&&(t[o]=Vs(r)?r.map(a=>a==null?null:""+a):r==null?r:""+r)}return t}const KNe=Symbol(""),WP=Symbol(""),lA=Symbol(""),V7=Symbol(""),uw=Symbol("");function R0(){let e=[];function t(r){return e.push(r),()=>{const a=e.indexOf(r);a>-1&&e.splice(a,1)}}function o(){e=[]}return{add:t,list:()=>e.slice(),reset:o}}function Uc(e,t,o,r,a){const i=r&&(r.enterCallbacks[a]=r.enterCallbacks[a]||[]);return()=>new Promise((n,s)=>{const l=d=>{d===!1?s(Pm(4,{from:o,to:t})):d instanceof Error?s(d):xNe(d)?s(Pm(2,{from:t,to:d})):(i&&r.enterCallbacks[a]===i&&typeof d=="function"&&i.push(d),n())},u=e.call(r&&r.instances[a],t,o,l);let c=Promise.resolve(u);e.length<3&&(c=c.then(l)),c.catch(d=>s(d))})}function ex(e,t,o,r){const a=[];for(const i of e)for(const n in i.components){let s=i.components[n];if(!(t!=="beforeRouteEnter"&&!i.instances[n]))if(YNe(s)){const u=(s.__vccOpts||s)[t];u&&a.push(Uc(u,o,r,i,n))}else{let l=s();a.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${n}" at "${i.path}"`));const c=aNe(u)?u.default:u;i.components[n]=c;const f=(c.__vccOpts||c)[t];return f&&Uc(f,o,r,i,n)()}))}}return a}function YNe(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function QP(e){const t=kr(lA),o=kr(V7),r=j(()=>t.resolve(Ts(e.to))),a=j(()=>{const{matched:l}=r.value,{length:u}=l,c=l[u-1],d=o.matched;if(!c||!d.length)return-1;const f=d.findIndex(Om.bind(null,c));if(f>-1)return f;const m=XP(l[u-2]);return u>1&&XP(c)===m&&d[d.length-1].path!==m?d.findIndex(Om.bind(null,l[u-2])):f}),i=j(()=>a.value>-1&&tke(o.params,r.value.params)),n=j(()=>a.value>-1&&a.value===o.matched.length-1&&A7(o.params,r.value.params));function s(l={}){return eke(l)?t[Ts(e.replace)?"replace":"push"](Ts(e.to)).catch(fp):Promise.resolve()}return{route:r,href:j(()=>r.value.href),isActive:i,isExactActive:n,navigate:s}}const JNe=zd({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:QP,setup(e,{slots:t}){const o=rs(QP(e)),{options:r}=kr(lA),a=j(()=>({[KP(e.activeClass,r.linkActiveClass,"router-link-active")]:o.isActive,[KP(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:o.isExactActive}));return()=>{const i=t.default&&t.default(o);return e.custom?i:G("a",{"aria-current":o.isExactActive?e.ariaCurrentValue:null,href:o.href,onClick:o.navigate,class:a.value},i)}}}),ZNe=JNe;function eke(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function tke(e,t){for(const o in t){const r=t[o],a=e[o];if(typeof r=="string"){if(r!==a)return!1}else if(!Vs(a)||a.length!==r.length||r.some((i,n)=>i!==a[n]))return!1}return!0}function XP(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const KP=(e,t,o)=>e!=null?e:t!=null?t:o,oke=zd({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:o}){const r=kr(uw),a=j(()=>e.route||r.value),i=kr(WP,0),n=j(()=>{let u=Ts(i);const{matched:c}=a.value;let d;for(;(d=c[u])&&!d.components;)u++;return u}),s=j(()=>a.value.matched[n.value]);rl(WP,j(()=>n.value+1)),rl(KNe,s),rl(uw,a);const l=Ue();return ct(()=>[l.value,s.value,e.name],([u,c,d],[f,m,p])=>{c&&(c.instances[d]=u,m&&m!==c&&u&&u===f&&(c.leaveGuards.size||(c.leaveGuards=m.leaveGuards),c.updateGuards.size||(c.updateGuards=m.updateGuards))),u&&c&&(!m||!Om(c,m)||!f)&&(c.enterCallbacks[d]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=a.value,c=e.name,d=s.value,f=d&&d.components[c];if(!f)return YP(o.default,{Component:f,route:u});const m=d.props[c],p=m?m===!0?u.params:typeof m=="function"?m(u):m:null,g=G(f,fa({},p,t,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(d.instances[c]=null)},ref:l}));return YP(o.default,{Component:g,route:u})||g}}});function YP(e,t){if(!e)return null;const o=e(t);return o.length===1?o[0]:o}const ake=oke;function rke(e){const t=PNe(e.routes,e),o=e.parseQuery||QNe,r=e.stringifyQuery||GP,a=e.history,i=R0(),n=R0(),s=R0(),l=__(Sc);let u=Sc;Hf&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Jy.bind(null,he=>""+he),d=Jy.bind(null,WNe),f=Jy.bind(null,i_);function m(he,De){let Te,J;return D7(he)?(Te=t.getRecordMatcher(he),J=De):J=he,t.addRoute(J,Te)}function p(he){const De=t.getRecordMatcher(he);De&&t.removeRoute(De)}function v(){return t.getRoutes().map(he=>he.record)}function g(he){return!!t.getRecordMatcher(he)}function x(he,De){if(De=fa({},De||l.value),typeof he=="string"){const Z=Zy(o,he,De.path),Ce=t.resolve({path:Z.path},De),Q=a.createHref(Z.fullPath);return fa(Z,Ce,{params:f(Ce.params),hash:i_(Z.hash),redirectedFrom:void 0,href:Q})}let Te;if("path"in he)Te=fa({},he,{path:Zy(o,he.path,De.path).path});else{const Z=fa({},he.params);for(const Ce in Z)Z[Ce]==null&&delete Z[Ce];Te=fa({},he,{params:d(Z)}),De.params=d(De.params)}const J=t.resolve(Te,De),q=he.hash||"";J.params=c(f(J.params));const ne=nNe(r,fa({},he,{hash:HNe(q),path:J.path})),U=a.createHref(ne);return fa({fullPath:ne,hash:q,query:r===GP?XNe(he.query):he.query||{}},J,{redirectedFrom:void 0,href:U})}function b(he){return typeof he=="string"?Zy(o,he,l.value.path):fa({},he)}function _(he,De){if(u!==he)return Pm(8,{from:De,to:he})}function w(he){return M(he)}function S(he){return w(fa(b(he),{replace:!0}))}function D(he){const De=he.matched[he.matched.length-1];if(De&&De.redirect){const{redirect:Te}=De;let J=typeof Te=="function"?Te(he):Te;return typeof J=="string"&&(J=J.includes("?")||J.includes("#")?J=b(J):{path:J},J.params={}),fa({query:he.query,hash:he.hash,params:"path"in J?{}:he.params},J)}}function M(he,De){const Te=u=x(he),J=l.value,q=he.state,ne=he.force,U=he.replace===!0,Z=D(Te);if(Z)return M(fa(b(Z),{state:typeof Z=="object"?fa({},q,Z.state):q,force:ne,replace:U}),De||Te);const Ce=Te;Ce.redirectedFrom=De;let Q;return!ne&&sNe(r,J,Te)&&(Q=Pm(16,{to:Ce,from:J}),W(J,J,!0,!1)),(Q?Promise.resolve(Q):I(Ce,J)).catch(V=>Dl(V)?Dl(V,2)?V:ye(V):Y(V,Ce,J)).then(V=>{if(V){if(Dl(V,2))return M(fa({replace:U},b(V.to),{state:typeof V.to=="object"?fa({},q,V.to.state):q,force:ne}),De||Ce)}else V=P(Ce,J,!0,U,q);return N(Ce,J,V),V})}function O(he,De){const Te=_(he,De);return Te?Promise.reject(Te):Promise.resolve()}function T(he){const De=ve.values().next().value;return De&&typeof De.runWithContext=="function"?De.runWithContext(he):he()}function I(he,De){let Te;const[J,q,ne]=ike(he,De);Te=ex(J.reverse(),"beforeRouteLeave",he,De);for(const Z of J)Z.leaveGuards.forEach(Ce=>{Te.push(Uc(Ce,he,De))});const U=O.bind(null,he,De);return Te.push(U),Ie(Te).then(()=>{Te=[];for(const Z of i.list())Te.push(Uc(Z,he,De));return Te.push(U),Ie(Te)}).then(()=>{Te=ex(q,"beforeRouteUpdate",he,De);for(const Z of q)Z.updateGuards.forEach(Ce=>{Te.push(Uc(Ce,he,De))});return Te.push(U),Ie(Te)}).then(()=>{Te=[];for(const Z of ne)if(Z.beforeEnter)if(Vs(Z.beforeEnter))for(const Ce of Z.beforeEnter)Te.push(Uc(Ce,he,De));else Te.push(Uc(Z.beforeEnter,he,De));return Te.push(U),Ie(Te)}).then(()=>(he.matched.forEach(Z=>Z.enterCallbacks={}),Te=ex(ne,"beforeRouteEnter",he,De),Te.push(U),Ie(Te))).then(()=>{Te=[];for(const Z of n.list())Te.push(Uc(Z,he,De));return Te.push(U),Ie(Te)}).catch(Z=>Dl(Z,8)?Z:Promise.reject(Z))}function N(he,De,Te){s.list().forEach(J=>T(()=>J(he,De,Te)))}function P(he,De,Te,J,q){const ne=_(he,De);if(ne)return ne;const U=De===Sc,Z=Hf?history.state:{};Te&&(J||U?a.replace(he.fullPath,fa({scroll:U&&Z&&Z.scroll},q)):a.push(he.fullPath,q)),l.value=he,W(he,De,Te,U),ye()}let F;function L(){F||(F=a.listen((he,De,Te)=>{if(!ke.listening)return;const J=x(he),q=D(J);if(q){M(fa(q,{replace:!0}),J).catch(fp);return}u=J;const ne=l.value;Hf&&hNe(BP(ne.fullPath,Te.delta),Pb()),I(J,ne).catch(U=>Dl(U,12)?U:Dl(U,2)?(M(U.to,J).then(Z=>{Dl(Z,20)&&!Te.delta&&Te.type===Jp.pop&&a.go(-1,!1)}).catch(fp),Promise.reject()):(Te.delta&&a.go(-Te.delta,!1),Y(U,J,ne))).then(U=>{U=U||P(J,ne,!1),U&&(Te.delta&&!Dl(U,8)?a.go(-Te.delta,!1):Te.type===Jp.pop&&Dl(U,20)&&a.go(-1,!1)),N(J,ne,U)}).catch(fp)}))}let z=R0(),H=R0(),X;function Y(he,De,Te){ye(he);const J=H.list();return J.length?J.forEach(q=>q(he,De,Te)):console.error(he),Promise.reject(he)}function de(){return X&&l.value!==Sc?Promise.resolve():new Promise((he,De)=>{z.add([he,De])})}function ye(he){return X||(X=!he,L(),z.list().forEach(([De,Te])=>he?Te(he):De()),z.reset()),he}function W(he,De,Te,J){const{scrollBehavior:q}=e;if(!Hf||!q)return Promise.resolve();const ne=!Te&&vNe(BP(he.fullPath,0))||(J||!Te)&&history.state&&history.state.scroll||null;return Ao().then(()=>q(he,De,ne)).then(U=>U&&pNe(U)).catch(U=>Y(U,he,De))}const re=he=>a.go(he);let _e;const ve=new Set,ke={currentRoute:l,listening:!0,addRoute:m,removeRoute:p,hasRoute:g,getRoutes:v,resolve:x,options:e,push:w,replace:S,go:re,back:()=>re(-1),forward:()=>re(1),beforeEach:i.add,beforeResolve:n.add,afterEach:s.add,onError:H.add,isReady:de,install(he){const De=this;he.component("RouterLink",ZNe),he.component("RouterView",ake),he.config.globalProperties.$router=De,Object.defineProperty(he.config.globalProperties,"$route",{enumerable:!0,get:()=>Ts(l)}),Hf&&!_e&&l.value===Sc&&(_e=!0,w(a.location).catch(q=>{}));const Te={};for(const q in Sc)Object.defineProperty(Te,q,{get:()=>l.value[q],enumerable:!0});he.provide(lA,De),he.provide(V7,Zp(Te)),he.provide(uw,l);const J=he.unmount;ve.add(he),he.unmount=function(){ve.delete(he),ve.size<1&&(u=Sc,F&&F(),F=null,l.value=Sc,_e=!1,X=!1),J()}}};function Ie(he){return he.reduce((De,Te)=>De.then(()=>T(Te)),Promise.resolve())}return ke}function ike(e,t){const o=[],r=[],a=[],i=Math.max(t.matched.length,e.matched.length);for(let n=0;n<i;n++){const s=t.matched[n];s&&(e.matched.find(u=>Om(u,s))?r.push(s):o.push(s));const l=e.matched[n];l&&(t.matched.find(u=>Om(u,l))||a.push(l))}return[o,r,a]}const tx=[{name:"Autenticacao",path:"/autenticacao",component:()=>Ke(()=>import("./AutenticacaoLayout.64b710d1.js"),["assets/AutenticacaoLayout.64b710d1.js","assets/b15-white.58ad6516.js"]),redirect:{name:"AutenticacaoEntrar"},children:[{name:"AutenticacaoBancos",path:"bancos-de-dados/:operacao?",component:()=>Ke(()=>import("./AutenticacaoBancos.7529c3c0.js"),[]),meta:{requiresAuth:!0}},{name:"AutenticacaoEntrar",path:"entrar",component:()=>Ke(()=>import("./AutenticacaoEntrar.3e674a0d.js"),["assets/AutenticacaoEntrar.3e674a0d.js","assets/open-url.b73a87ed.js"])}]},{path:"/",meta:{requiresAuth:!1},redirect:{name:"Home"}},{name:"Geeks",path:"/geeks",component:()=>Ke(()=>import("./ClubSingle.3832cf05.js"),["assets/ClubSingle.3832cf05.js","assets/ClubSingle.4df193ae.css","assets/RodapeSite.1e1f7485.js","assets/RodapeSite.1f78c776.css","assets/open-url.b73a87ed.js"]),meta:{requiresAuth:!1}},{name:"LayoutLogado",component:()=>Ke(()=>import("./LayoutLogado.6d1e035c.js"),["assets/LayoutLogado.6d1e035c.js","assets/LayoutLogado.78e23b66.css"]),redirect:{name:"Home"},children:[{name:"DashboardVarejo",path:"/dashboardvarejo",component:()=>Ke(()=>import("./Varejo.f1dc217e.js"),["assets/Varejo.f1dc217e.js","assets/Varejo.10cb90a3.css","assets/Grafico.19304c2f.js","assets/Chart.6249331b.js","assets/b15-white.58ad6516.js","assets/optidados-white.e4237b1d.js"]),meta:{requiresAuth:!0}},{name:"Dashboards",path:"/dashboards/:id?",component:()=>Ke(()=>import("./Dashboards.bb865cf3.js"),["assets/Dashboards.bb865cf3.js","assets/Dashboards.64aa5af0.css","assets/Grafico.19304c2f.js","assets/Chart.6249331b.js","assets/b15-white.58ad6516.js","assets/optidados-white.e4237b1d.js"]),meta:{requiresAuth:!0}},{name:"DashboardHome",path:"/dashboardhome",component:()=>Ke(()=>import("./DashboardHome.7d2501c8.js"),["assets/DashboardHome.7d2501c8.js","assets/DashboardHome.bf229d5f.css","assets/Grafico.19304c2f.js","assets/Chart.6249331b.js","assets/b15-white.58ad6516.js","assets/optidados-white.e4237b1d.js"]),meta:{requiresAuth:!0}},{name:"NPS",path:"/nps",component:()=>Ke(()=>import("./NPS.016fe5ce.js"),["assets/NPS.016fe5ce.js","assets/NPS.451d776e.css"]),meta:{requiresAuth:!0}},{name:"Agenda",path:"/agenda",component:()=>Ke(()=>import("./Agendas.7aa9588a.js"),["assets/Agendas.7aa9588a.js","assets/Agendas.d37ff54f.css","assets/MultiSelectTree.9125367a.js","assets/typeof.d92a5d4e.js"]),meta:{requiresAuth:!0}},{name:"Home",path:"/home",component:()=>Ke(()=>import("./Home.14518a92.js"),[]),meta:{requiresAuth:!0}},{name:"Registro",path:"/registros/:operacao/:id?",component:()=>Ke(()=>import("./RegistroLista.400fa46f.js"),["assets/RegistroLista.400fa46f.js","assets/listaV2.c0e4880f.js","assets/listaV2.89c1f5c1.css","assets/xlsx.9d3687ca.js","assets/Campo.1e3dd14b.js","assets/PromptContatoV2.a8d05adc.js","assets/emitirNFe.35117289.js","assets/nfePrincipal.61eeee3a.js","assets/nfePrincipal.62b3b046.css","assets/compactarValidarNFe.cfe74738.js","assets/obterItens.021bc38f.js","assets/codigosANP.a6c1a264.js"]),meta:{requiresAuth:!0}},{name:"Backup",path:"/backup/:bancoDeDados?",component:()=>Ke(()=>import("./Backup.071808d7.js"),[]),meta:{requiresAuth:!1}},{name:"consultoroptico",path:"/consultoroptico/:id?",component:()=>Ke(()=>import("./ConsultorOptico.02281fe0.js"),["assets/ConsultorOptico.02281fe0.js","assets/ConsultorOptico.28600eab.css"]),meta:{requiresAuth:!0}},{name:"Jornada",path:"/jornada/:id?",component:()=>Ke(()=>import("./Jornada.c69a9eb1.js"),["assets/Jornada.c69a9eb1.js","assets/Jornada.b86810de.css"]),meta:{requiresAuth:!0}},{name:"Site",path:"/site/:id?",component:()=>Ke(()=>import("./Site.122a6821.js"),[]),meta:{requiresAuth:!0}},{name:"Dev",path:"/dev",component:()=>Ke(()=>import("./Dev.6469d263.js"),[]),meta:{requiresAuth:!1}},{name:"Dev",path:"/dev/campos",component:()=>Ke(()=>import("./TesteCampos.fb6f4e6a.js"),[]),meta:{requiresAuth:!1}},{name:"Console",path:"/plataforma/dev/console",component:()=>Ke(()=>import("./Console.38e29a9f.js"),["assets/Console.38e29a9f.js","assets/MonacoEditor.43ae0879.js","assets/MonacoEditor.3cd6fdad.css"]),meta:{requiresAuth:!0}},{name:"Caixa",path:"/caixa/:id?",component:()=>Ke(()=>import("./CaixaLayout.82e0022a.js"),[]),meta:{requiresAuth:!0},redirect:{name:"CaixaEmpresas"},children:[{name:"CaixaEmpresas",path:"empresas",component:()=>Ke(()=>import("./CaixaEmpresas.8fcf32f7.js"),["assets/CaixaEmpresas.8fcf32f7.js","assets/CaixaFechar.0bfdb272.js","assets/FaturaCard.1c09bc8a.js","assets/emitirNFe.35117289.js","assets/nfePrincipal.61eeee3a.js","assets/nfePrincipal.62b3b046.css","assets/compactarValidarNFe.cfe74738.js","assets/obterItens.021bc38f.js","assets/codigosANP.a6c1a264.js","assets/FaturaModal.eece8ad2.js","assets/FaturaModal.c25c692b.css","assets/DocumentosFiscais.32bb892d.js","assets/Campo.1e3dd14b.js","assets/VendaCard.5a94ab6a.js","assets/ModalHistoricoStatus.1c18a2fc.js","assets/EnvelopeCard.57bdc2f5.js"])},{name:"CaixaTesouraria",path:"tesouraria",component:()=>Ke(()=>import("./CaixaTesouraria.fe5087c7.js"),["assets/CaixaTesouraria.fe5087c7.js","assets/CaixaFechar.0bfdb272.js","assets/GChipsV2.adade47a.js","assets/GChipsV2.73e684f5.css"])}]},{name:"Configuracoes",path:"/configuracoes/:id?",component:()=>Ke(()=>import("./Configuracoes.311d4206.js"),["assets/Configuracoes.311d4206.js","assets/MenuAbas.a57b6b43.js"]),meta:{requiresAuth:!0},children:[{name:"ConfiguracoesEmpresas",path:"empresas",component:()=>Ke(()=>import("./ConfiguracoesEmpresas.7cacbfde.js"),["assets/ConfiguracoesEmpresas.7cacbfde.js","assets/ConfiguracoesEmpresas.b1cb4671.css","assets/QUploader.94d5cdea.js","assets/use-file.7b6c3a95.js","assets/optionsNfse.12d4a18d.js"])},{name:"ConfiguracoesECommerce",path:"ecommerce",component:()=>Ke(()=>import("./ConfiguracoesECommerce.a2a1c237.js"),[])},{name:"ConfiguracoesUsuarios",path:"usuarios",component:()=>Ke(()=>import("./ConfiguracoesUsuarios.b68d0578.js"),["assets/ConfiguracoesUsuarios.b68d0578.js","assets/ConfiguracoesUsuarios.f4a928f7.css","assets/open-url.b73a87ed.js","assets/Lista.05ea21b1.js","assets/Lista.f8a06d80.css"])},{name:"ConfiguracoesDocumentosFiscais",path:"documentos-fiscais",component:()=>Ke(()=>import("./ConfiguracoesDocumentosFiscais.5fd26de6.js"),["assets/ConfiguracoesDocumentosFiscais.5fd26de6.js","assets/nfeInutilizacao.253de2bd.js","assets/compactarValidarNFe.cfe74738.js"])},{name:"ConfiguracoesImpostos",path:"configuracoes-impostos",component:()=>Ke(()=>import("./ConfiguracoesImpostos.792ff7b9.js"),["assets/ConfiguracoesImpostos.792ff7b9.js","assets/Campo.1e3dd14b.js","assets/SeletorCfop.95e0ec39.js"])},{name:"ConfiguracoesSped",path:"sped",component:()=>Ke(()=>import("./ConfiguracoesSped.6c8faec2.js"),[])},{name:"ConfiguracoesVendas",path:"vendas",component:()=>Ke(()=>import("./ConfiguracoesVendas.03212880.js"),["assets/ConfiguracoesVendas.03212880.js","assets/ConfiguracoesVendas.f5cea74a.css","assets/SeletorCfop.95e0ec39.js"])},{name:"ConfiguracoesFinanceiro",path:"financeiro",component:()=>Ke(()=>import("./ConfiguracoesFinanceiro.cbe82237.js"),[])},{name:"ConfiguracoesCampanhas",path:"campanhas",component:()=>Ke(()=>import("./ConfiguracoesCampanhas.4c4a8b16.js"),["assets/ConfiguracoesCampanhas.4c4a8b16.js","assets/ConfiguracoesCampanhas.ccade50b.css","assets/QUploader.94d5cdea.js","assets/use-file.7b6c3a95.js","assets/g-label.38ef6659.js","assets/g-label.52d539d9.css","assets/selecaoContaWhatsapp.8c5347e5.js","assets/selecaoContaWhatsapp.699f39bd.css"])},{name:"ConfiguracoesMetas",path:"metas",component:()=>Ke(()=>import("./ConfiguracoesMetas.cbadc7a7.js"),["assets/ConfiguracoesMetas.cbadc7a7.js","assets/ConfiguracoesMetas.f678260c.css","assets/Lista.05ea21b1.js","assets/Lista.f8a06d80.css"])},{name:"ConfiguracoesBonus",path:"bonus",component:()=>Ke(()=>import("./ConfiguracoesBonus.a06bc278.js"),["assets/ConfiguracoesBonus.a06bc278.js","assets/ConfiguracoesBonus.828f980f.css","assets/Lista.05ea21b1.js","assets/Lista.f8a06d80.css","assets/SeletorEmpresa.c4281b2f.js","assets/SeletorEmpresa.49379218.css"])}]},{name:"Atendimento",path:"/atendimento/:id?",component:()=>Ke(()=>import("./AtendimentoLayout.982fca1c.js"),["assets/AtendimentoLayout.982fca1c.js","assets/ContatoCombinar.c582f0a4.js","assets/QUploader.94d5cdea.js","assets/use-file.7b6c3a95.js","assets/importarArquivoXlsx.d5684549.js","assets/xlsx.9d3687ca.js","assets/MenuAbas.a57b6b43.js"]),meta:{requiresAuth:!0},beforeEnter(e,t,o){if(e.params.id)return o(!0);const r=localStorage.getItem("contatoSelecionado")||"0";o({name:"Atendimento",params:{id:r}})},children:[{name:"AtendimentoAnotacoes",path:"anotacoes",component:()=>Ke(()=>import("./AtendimentoAnotacoes.6b7425e9.js"),[])},{name:"AtendimentoContato",path:"contato",component:()=>Ke(()=>import("./ContatoFicha.f01b3775.js"),["assets/ContatoFicha.f01b3775.js","assets/open-url.b73a87ed.js","assets/Icone.9260bde8.js","assets/SeletorPais.cc26ee71.js"])},{name:"AtendimentoFinanceiro",path:"financeiro",component:()=>Ke(()=>import("./AtendimentoFinanceiro.13f33be1.js"),["assets/AtendimentoFinanceiro.13f33be1.js","assets/FaturaModal.eece8ad2.js","assets/FaturaModal.c25c692b.css","assets/DocumentosFiscais.32bb892d.js","assets/Campo.1e3dd14b.js","assets/compactarValidarNFe.cfe74738.js","assets/obterItens.021bc38f.js","assets/codigosANP.a6c1a264.js","assets/VendaCard.5a94ab6a.js","assets/emitirNFe.35117289.js","assets/ModalHistoricoStatus.1c18a2fc.js","assets/EnvelopeCard.57bdc2f5.js","assets/Grafico.19304c2f.js","assets/Chart.6249331b.js"])},{name:"AtendimentoOticaReceita",path:"otica-receita",component:()=>Ke(()=>import("./AtendimentoOticaReceita.529e3126.js"),["assets/AtendimentoOticaReceita.529e3126.js","assets/EnvelopeCard.57bdc2f5.js","assets/emitirNFe.35117289.js","assets/DocumentosFiscais.32bb892d.js","assets/Campo.1e3dd14b.js","assets/compactarValidarNFe.cfe74738.js","assets/obterItens.021bc38f.js","assets/codigosANP.a6c1a264.js","assets/ModalHistoricoStatus.1c18a2fc.js"])},{name:"AtendimentoVenda",path:"venda",component:()=>Ke(()=>import("./AtendimentoVenda.c443dd60.js"),["assets/AtendimentoVenda.c443dd60.js","assets/QFab.e4392215.js","assets/nfePrincipal.61eeee3a.js","assets/nfePrincipal.62b3b046.css","assets/compactarValidarNFe.cfe74738.js","assets/obterItens.021bc38f.js","assets/codigosANP.a6c1a264.js","assets/EnvelopeCard.57bdc2f5.js","assets/emitirNFe.35117289.js","assets/DocumentosFiscais.32bb892d.js","assets/Campo.1e3dd14b.js","assets/ModalHistoricoStatus.1c18a2fc.js","assets/VendaCard.5a94ab6a.js","assets/GChipsV2.adade47a.js","assets/GChipsV2.73e684f5.css","assets/open-url.b73a87ed.js"])},{name:"AtendimentoFatura",path:"fatura",component:()=>Ke(()=>import("./AtendimentoFatura.f668a3a2.js"),["assets/AtendimentoFatura.f668a3a2.js","assets/FaturaCard.1c09bc8a.js","assets/emitirNFe.35117289.js","assets/nfePrincipal.61eeee3a.js","assets/nfePrincipal.62b3b046.css","assets/compactarValidarNFe.cfe74738.js","assets/obterItens.021bc38f.js","assets/codigosANP.a6c1a264.js","assets/FaturaModal.eece8ad2.js","assets/FaturaModal.c25c692b.css","assets/DocumentosFiscais.32bb892d.js","assets/Campo.1e3dd14b.js","assets/VendaCard.5a94ab6a.js","assets/ModalHistoricoStatus.1c18a2fc.js","assets/EnvelopeCard.57bdc2f5.js","assets/GChipsV2.adade47a.js","assets/GChipsV2.73e684f5.css"])},{name:"AtendimentoEquipamentos",path:"equipamentos",component:()=>Ke(()=>import("./Equipamentos.05eb03f1.js"),[])}]},{name:"EtiquetasLista",path:"/etiquetas",component:()=>Ke(()=>import("./EtiquetaLista.cb9dd0b2.js"),["assets/EtiquetaLista.cb9dd0b2.js","assets/EtiquetaLista.da302798.css","assets/use-file.7b6c3a95.js","assets/xlsx.9d3687ca.js"]),meta:{requiresAuth:!0}},{name:"Qg",path:"/qg/:id?",component:()=>Ke(()=>import("./QgLayout.19906aa3.js"),["assets/QgLayout.19906aa3.js","assets/MenuAbas.a57b6b43.js"]),meta:{requiresAuth:!0},children:[{name:"QgQg",path:"qg",component:()=>Ke(()=>import("./QgQg.bcb4c791.js"),["assets/QgQg.bcb4c791.js","assets/Chart.6249331b.js"])},{name:"QgEquipe",path:"equipe",component:()=>Ke(()=>import("./QgEquipe.e33d2a11.js"),[])},{name:"QgEstoque",path:"estoque",component:()=>Ke(()=>import("./QgEstoque.2aa989e6.js"),[])}]},{name:"Cockpit",path:"/cockpit/:id?",component:()=>Ke(()=>import("./CockpitLayout.a44ba9e0.js"),["assets/CockpitLayout.a44ba9e0.js","assets/MenuAbas.a57b6b43.js","assets/JsonViewer.a7629a3b.js"]),meta:{requiresAuth:!0},children:[{name:"CockpitVendedor",path:"vendedor",component:()=>Ke(()=>import("./CockpitVendedor.0ec205be.js"),["assets/CockpitVendedor.0ec205be.js","assets/CockpitVendedor.67678c34.css","assets/Icone.9260bde8.js","assets/open-url.b73a87ed.js","assets/JsonViewer.a7629a3b.js"])},{name:"CockpitEnvelopes",path:"envelopes",component:()=>Ke(()=>import("./CockpitEnvelopes.9bb54f78.js"),["assets/CockpitEnvelopes.9bb54f78.js","assets/Icone.9260bde8.js","assets/open-url.b73a87ed.js","assets/JsonViewer.a7629a3b.js"]),props:!0},{name:"CockpitPerformance",path:"performance",component:()=>Ke(()=>import("./CockpitPerformance.378c9e6c.js"),["assets/CockpitPerformance.378c9e6c.js","assets/Grafico.19304c2f.js","assets/Chart.6249331b.js"])},{name:"CockpitVendas",path:"vendas",component:()=>Ke(()=>import("./CockpitVendas.38e2832f.js"),["assets/CockpitVendas.38e2832f.js","assets/GChipsV2.adade47a.js","assets/GChipsV2.73e684f5.css","assets/nfePrincipal.61eeee3a.js","assets/nfePrincipal.62b3b046.css","assets/compactarValidarNFe.cfe74738.js","assets/obterItens.021bc38f.js","assets/codigosANP.a6c1a264.js","assets/VendaCard.5a94ab6a.js","assets/emitirNFe.35117289.js","assets/DocumentosFiscais.32bb892d.js","assets/Campo.1e3dd14b.js","assets/ModalHistoricoStatus.1c18a2fc.js","assets/EnvelopeCard.57bdc2f5.js","assets/JsonViewer.a7629a3b.js"]),props:!0},{name:"CockpitFaturas",path:"faturas",component:()=>Ke(()=>import("./CockpitFaturas.458ef47f.js"),["assets/CockpitFaturas.458ef47f.js","assets/FaturaCard.1c09bc8a.js","assets/emitirNFe.35117289.js","assets/nfePrincipal.61eeee3a.js","assets/nfePrincipal.62b3b046.css","assets/compactarValidarNFe.cfe74738.js","assets/obterItens.021bc38f.js","assets/codigosANP.a6c1a264.js","assets/FaturaModal.eece8ad2.js","assets/FaturaModal.c25c692b.css","assets/DocumentosFiscais.32bb892d.js","assets/Campo.1e3dd14b.js","assets/VendaCard.5a94ab6a.js","assets/ModalHistoricoStatus.1c18a2fc.js","assets/EnvelopeCard.57bdc2f5.js","assets/GChipsV2.adade47a.js","assets/GChipsV2.73e684f5.css","assets/JsonViewer.a7629a3b.js"]),props:!0}]},{name:"pdv",path:"/pdv/:id?",component:()=>Ke(()=>import("./Pdv.7df17cd6.js"),["assets/Pdv.7df17cd6.js","assets/Campo.1e3dd14b.js"]),meta:{requiresAuth:!0}},{name:"NFSe",path:"/nfse/:id?",component:()=>Ke(()=>import("./NfseLista.c261dbe7.js"),["assets/NfseLista.c261dbe7.js","assets/xlsx.9d3687ca.js","assets/Lista.05ea21b1.js","assets/Lista.f8a06d80.css","assets/Nfse.39a952b5.js","assets/optionsNfse.12d4a18d.js","assets/JsonViewer.a7629a3b.js"]),meta:{requiresAuth:!0}},{name:"Modelo",path:"/Modelo/:id?",component:()=>Ke(()=>import("./Modelo.abfb611d.js"),["assets/Modelo.abfb611d.js","assets/Modelo.2cce805d.css","assets/open-url.b73a87ed.js","assets/Campo.1e3dd14b.js","assets/OSTrocarStatus.7dae1803.js","assets/ModalHistoricoStatus.1c18a2fc.js","assets/vuedraggable.umd.def05a50.js"]),meta:{requiresAuth:!0}},{name:"Contatos",path:"/contatos/:id?",component:()=>Ke(()=>import("./ContatoLista.343d88a8.js"),["assets/ContatoLista.343d88a8.js","assets/xlsx.9d3687ca.js","assets/Lista.05ea21b1.js","assets/Lista.f8a06d80.css","assets/ContatoModalFicha.7f7a6f0b.js","assets/ContatoFicha.f01b3775.js","assets/open-url.b73a87ed.js","assets/Icone.9260bde8.js","assets/SeletorPais.cc26ee71.js","assets/ContatoCombinar.c582f0a4.js"]),meta:{requiresAuth:!0}},{name:"Financeiro",path:"/financeiro/:id?",component:()=>Ke(()=>import("./ModeloFinanceiro.b41d3235.js"),["assets/ModeloFinanceiro.b41d3235.js","assets/ModeloFinanceiro.5b7618e7.css","assets/QUploader.94d5cdea.js","assets/use-file.7b6c3a95.js","assets/xlsx.9d3687ca.js","assets/Chart.6249331b.js","assets/Campo.1e3dd14b.js"]),meta:{requiresAuth:!0}},{name:"RelatoriosLayout",path:"/relatorios/:id?",component:()=>Ke(()=>import("./Relatorios.43e007c1.js"),["assets/Relatorios.43e007c1.js","assets/Relatorios.3b00d558.css"]),meta:{requiresAuth:!0},children:[{name:"RelatoriosFinanceiro",path:"financeiro",component:()=>Ke(()=>import("./RelatoriosFinanceiro.b556f4ca.js"),["assets/RelatoriosFinanceiro.b556f4ca.js","assets/RelatoriosFinanceiro.715ce943.css"]),children:[{name:"FinanceiroDRE",path:"dre",component:()=>Ke(()=>import("./FinanceiroDRE.5cef1b2c.js"),[])},{name:"FinanceiroBalanco",path:"balanco",component:()=>Ke(()=>import("./FinanceiroBalanco.5d60ea81.js"),[])},{name:"FinanceiroFluxo",path:"fluxo",component:()=>Ke(()=>import("./FinanceiroFluxo.9e897c16.js"),[])},{name:"FinanceiroResultado",path:"resultado",component:()=>Ke(()=>import("./FinanceiroResultado.1d9648df.js"),[])}]},{name:"RelatoriosVendas",path:"vendas",component:()=>Ke(()=>import("./RelatoriosVendas.f0759860.js"),[]),props:!0},{name:"RelatoriosEstoque",path:"estoque",component:()=>Ke(()=>import("./RelatoriosEstoque.bf8472c1.js"),[])},{name:"RelatoriosFaturamento",path:"faturamento",component:()=>Ke(()=>import("./RelatoriosFaturamento.b2e3f890.js"),[]),props:!0},{name:"RelatoriosFiscal",path:"fiscal",component:()=>Ke(()=>import("./RelatoriosFiscal.d3c0934f.js"),[]),props:!0},{name:"RelatoriosCompras",path:"compras",component:()=>Ke(()=>import("./RelatoriosCompras.715233f0.js"),[]),props:!0}]},{name:"RelatorioUsoSistema",path:"/relatoriodinamico/sistemauso",component:()=>Ke(()=>import("./RelatorioUsoSistema.1c40776a.js"),["assets/RelatorioUsoSistema.1c40776a.js","assets/RelatorioUsoSistema.3901c310.css"]),meta:{requiresAuth:!0}},{name:"Desenvolvedor",path:"/desenvolvedor/docs/componentelayout",component:()=>Ke(()=>import("./DocComponenteLayout.a9ac6f21.js"),[]),meta:{requiresAuth:!0}},{name:"Construtor",path:"/Construtor",component:()=>Ke(()=>import("./construtor.916b6424.js"),[]),meta:{requiresAuth:!0}},{name:"AdmEnvelopes",path:"/admenvelopes",component:()=>Ke(()=>import("./AdmEnvelopes.0e32fed5.js"),["assets/AdmEnvelopes.0e32fed5.js","assets/AdmEnvelopes.c44fe010.css","assets/BoxEnvioWhatsapp.ae0013e3.js","assets/open-url.b73a87ed.js","assets/ModalHistoricoStatus.1c18a2fc.js","assets/vuedraggable.umd.def05a50.js"]),meta:{requiresAuth:!0}},{name:"AdmCustom",path:"/admcustom",component:()=>Ke(()=>import("./AdmCustom.698bb6fe.js"),["assets/AdmCustom.698bb6fe.js","assets/AdmCustom.8788b657.css","assets/Campo.1e3dd14b.js","assets/ModalHistoricoStatus.1c18a2fc.js","assets/vuedraggable.umd.def05a50.js"]),meta:{requiresAuth:!0}},{name:"AdmOS",path:"/admos",component:()=>Ke(()=>import("./AdmOS.77efa8f9.js"),["assets/AdmOS.77efa8f9.js","assets/AdmOS.6419f0f3.css","assets/OSTrocarStatus.7dae1803.js","assets/ModalHistoricoStatus.1c18a2fc.js","assets/BoxEnvioWhatsapp.ae0013e3.js","assets/open-url.b73a87ed.js","assets/vuedraggable.umd.def05a50.js"]),meta:{requiresAuth:!0}},{name:"Kanban",path:"/kanban",component:()=>Ke(()=>import("./Kanban.215290b3.js"),["assets/Kanban.215290b3.js","assets/Campo.1e3dd14b.js","assets/vuedraggable.umd.def05a50.js"]),meta:{requiresAuth:!0}},{name:"FunilVendas",path:"/funilvendas",component:()=>Ke(()=>import("./FunilVendas.8d71565c.js"),["assets/FunilVendas.8d71565c.js","assets/FunilVendas.f8a739fd.css","assets/Campo.1e3dd14b.js","assets/ModalHistoricoStatus.1c18a2fc.js","assets/vuedraggable.umd.def05a50.js"]),meta:{requiresAuth:!0}},{name:"NFe",path:"/nfe/:id?",component:()=>Ke(()=>import("./nfeLayout.ce1481eb.js"),["assets/nfeLayout.ce1481eb.js","assets/nfeInutilizacao.253de2bd.js","assets/compactarValidarNFe.cfe74738.js"]),meta:{requiresAuth:!0},redirect:{name:"nfeLista"},children:[{name:"nfeLista",path:"lista",component:()=>Ke(()=>import("./nfeLista.8d64464b.js"),["assets/nfeLista.8d64464b.js","assets/nfePrincipal.61eeee3a.js","assets/nfePrincipal.62b3b046.css","assets/compactarValidarNFe.cfe74738.js","assets/obterItens.021bc38f.js","assets/codigosANP.a6c1a264.js"])}]},{name:"Plataforma15",path:"/plataforma15/:objeto/:id?",component:()=>Ke(()=>import("./Branca.e4ee4a76.js"),[]),meta:{requiresAuth:!0}},{name:"CriarBanco",path:"/criar-banco",component:()=>Ke(()=>import("./CriarBanco.6d98fbfa.js"),["assets/CriarBanco.6d98fbfa.js","assets/SeletorPais.cc26ee71.js"]),meta:{requiresAuth:!0}},{name:"PainelSincronismo",path:"/painel-sincronismo",component:()=>Ke(()=>import("./PainelSincronismo.8154aedd.js"),[]),meta:{requiresAuth:!0}},{name:"Producoes",path:"/producoes/:id?",component:()=>Ke(()=>import("./ItensManipulacaoLista.aecbb0de.js"),["assets/ItensManipulacaoLista.aecbb0de.js","assets/Lista.05ea21b1.js","assets/Lista.f8a06d80.css","assets/ItensManipulacaoApontamento.672f8f6e.js"]),meta:{requiresAuth:!0}},{name:"Expedicao",path:"/expedicao/:id?",component:()=>Ke(()=>import("./ItensLista.2d68402a.js"),["assets/ItensLista.2d68402a.js","assets/listaV2.c0e4880f.js","assets/listaV2.89c1f5c1.css","assets/xlsx.9d3687ca.js","assets/ItensManipulacaoApontamento.672f8f6e.js"]),meta:{requiresAuth:!0}},{name:"FaturaB15",path:"/faturab15",component:()=>Ke(()=>import("./Fatura15Lista.1aa41439.js"),["assets/Fatura15Lista.1aa41439.js","assets/listaV2.c0e4880f.js","assets/listaV2.89c1f5c1.css","assets/xlsx.9d3687ca.js","assets/ContatoModalFicha.7f7a6f0b.js","assets/ContatoFicha.f01b3775.js","assets/open-url.b73a87ed.js","assets/Icone.9260bde8.js","assets/SeletorPais.cc26ee71.js","assets/ContatoCombinar.c582f0a4.js"]),meta:{requiresAuth:!0}},{name:"FaturaB15Optidados",path:"/faturab15optidados",component:()=>Ke(()=>import("./Fatura15Lista.1aa41439.js"),["assets/Fatura15Lista.1aa41439.js","assets/listaV2.c0e4880f.js","assets/listaV2.89c1f5c1.css","assets/xlsx.9d3687ca.js","assets/ContatoModalFicha.7f7a6f0b.js","assets/ContatoFicha.f01b3775.js","assets/open-url.b73a87ed.js","assets/Icone.9260bde8.js","assets/SeletorPais.cc26ee71.js","assets/ContatoCombinar.c582f0a4.js"]),meta:{requiresAuth:!0}},{name:"Vendas",path:"/vendas/:id?",component:()=>Ke(()=>import("./VendaLista.7690e8dc.js"),["assets/VendaLista.7690e8dc.js","assets/xlsx.9d3687ca.js","assets/Lista.05ea21b1.js","assets/Lista.f8a06d80.css","assets/VendaCard.5a94ab6a.js","assets/emitirNFe.35117289.js","assets/DocumentosFiscais.32bb892d.js","assets/Campo.1e3dd14b.js","assets/compactarValidarNFe.cfe74738.js","assets/obterItens.021bc38f.js","assets/codigosANP.a6c1a264.js","assets/ModalHistoricoStatus.1c18a2fc.js"]),meta:{requiresAuth:!0}},{name:"Faturas",path:"/faturas/:id?",component:()=>Ke(()=>import("./FaturaLista.abd3fed9.js"),["assets/FaturaLista.abd3fed9.js","assets/xlsx.9d3687ca.js","assets/Lista.05ea21b1.js","assets/Lista.f8a06d80.css","assets/FaturaCard.1c09bc8a.js","assets/emitirNFe.35117289.js","assets/nfePrincipal.61eeee3a.js","assets/nfePrincipal.62b3b046.css","assets/compactarValidarNFe.cfe74738.js","assets/obterItens.021bc38f.js","assets/codigosANP.a6c1a264.js","assets/FaturaModal.eece8ad2.js","assets/FaturaModal.c25c692b.css","assets/DocumentosFiscais.32bb892d.js","assets/Campo.1e3dd14b.js","assets/VendaCard.5a94ab6a.js","assets/ModalHistoricoStatus.1c18a2fc.js","assets/EnvelopeCard.57bdc2f5.js"]),meta:{requiresAuth:!0}},{name:"Sped",path:"/relatorio/fiscal/sped",component:()=>Ke(()=>import("./spedLista.fb54add3.js"),["assets/spedLista.fb54add3.js","assets/Lista.05ea21b1.js","assets/Lista.f8a06d80.css"]),meta:{requiresAuth:!0}},{name:"Conciliacao",path:"/conciliacao",component:()=>Ke(()=>import("./ConciliacaoLista.abb05059.js"),["assets/ConciliacaoLista.abb05059.js","assets/ConciliacaoLista.4fad8c65.css","assets/Lista.05ea21b1.js","assets/Lista.f8a06d80.css","assets/SeletorEmpresa.c4281b2f.js","assets/SeletorEmpresa.49379218.css"]),meta:{requiresAuth:!0}},{name:"Itens",path:"/itens/:id?",component:()=>Ke(()=>import("./ItemLista.c2688fd9.js").then(function(e){return e.I}),["assets/ItemLista.c2688fd9.js","assets/ItemLista.03533d9e.css","assets/Lista.05ea21b1.js","assets/Lista.f8a06d80.css","assets/QUploader.94d5cdea.js","assets/use-file.7b6c3a95.js","assets/importarArquivoXlsx.d5684549.js","assets/xlsx.9d3687ca.js","assets/g-label.38ef6659.js","assets/g-label.52d539d9.css","assets/codigosANP.a6c1a264.js","assets/SeletorCfop.95e0ec39.js","assets/JsonViewer.a7629a3b.js"]),meta:{requiresAuth:!0}},{name:"Item",path:"/item/:id?",component:()=>Ke(()=>import("./ItemLista.c2688fd9.js").then(function(e){return e.I}),["assets/ItemLista.c2688fd9.js","assets/ItemLista.03533d9e.css","assets/Lista.05ea21b1.js","assets/Lista.f8a06d80.css","assets/QUploader.94d5cdea.js","assets/use-file.7b6c3a95.js","assets/importarArquivoXlsx.d5684549.js","assets/xlsx.9d3687ca.js","assets/g-label.38ef6659.js","assets/g-label.52d539d9.css","assets/codigosANP.a6c1a264.js","assets/SeletorCfop.95e0ec39.js","assets/JsonViewer.a7629a3b.js"]),meta:{requiresAuth:!0}},{name:"ItemFicha",path:"/item/:id?/ficha",component:()=>Ke(()=>import("./ItemLista.c2688fd9.js").then(function(e){return e.I}),["assets/ItemLista.c2688fd9.js","assets/ItemLista.03533d9e.css","assets/Lista.05ea21b1.js","assets/Lista.f8a06d80.css","assets/QUploader.94d5cdea.js","assets/use-file.7b6c3a95.js","assets/importarArquivoXlsx.d5684549.js","assets/xlsx.9d3687ca.js","assets/g-label.38ef6659.js","assets/g-label.52d539d9.css","assets/codigosANP.a6c1a264.js","assets/SeletorCfop.95e0ec39.js","assets/JsonViewer.a7629a3b.js"]),meta:{requiresAuth:!0}},{name:"ItemEstoque",path:"/item/:id?/estoque",component:()=>Ke(()=>import("./ItemLista.c2688fd9.js").then(function(e){return e.I}),["assets/ItemLista.c2688fd9.js","assets/ItemLista.03533d9e.css","assets/Lista.05ea21b1.js","assets/Lista.f8a06d80.css","assets/QUploader.94d5cdea.js","assets/use-file.7b6c3a95.js","assets/importarArquivoXlsx.d5684549.js","assets/xlsx.9d3687ca.js","assets/g-label.38ef6659.js","assets/g-label.52d539d9.css","assets/codigosANP.a6c1a264.js","assets/SeletorCfop.95e0ec39.js","assets/JsonViewer.a7629a3b.js"]),meta:{requiresAuth:!0}},{name:"ItemFicha2",path:"/itemFicha",component:()=>Ke(()=>import("./ItemLista.c2688fd9.js").then(function(e){return e.I}),["assets/ItemLista.c2688fd9.js","assets/ItemLista.03533d9e.css","assets/Lista.05ea21b1.js","assets/Lista.f8a06d80.css","assets/QUploader.94d5cdea.js","assets/use-file.7b6c3a95.js","assets/importarArquivoXlsx.d5684549.js","assets/xlsx.9d3687ca.js","assets/g-label.38ef6659.js","assets/g-label.52d539d9.css","assets/codigosANP.a6c1a264.js","assets/SeletorCfop.95e0ec39.js","assets/JsonViewer.a7629a3b.js"]),meta:{requiresAuth:!0}},{name:"Jornadas",path:"/jornadas/:id?",component:()=>Ke(()=>import("./JornadasLista.6febbb46.js"),["assets/JornadasLista.6febbb46.js","assets/JornadasLista.aee49ba2.css","assets/Lista.05ea21b1.js","assets/Lista.f8a06d80.css","assets/Grafico.19304c2f.js","assets/Chart.6249331b.js"]),meta:{requiresAuth:!0}},{name:"Compras",path:"/compras",component:()=>Ke(()=>import("./ComprasLista.78f64ba2.js"),["assets/ComprasLista.78f64ba2.js","assets/ComprasLista.1cd6b8a2.css","assets/QUploader.94d5cdea.js","assets/use-file.7b6c3a95.js","assets/Lista.05ea21b1.js","assets/Lista.f8a06d80.css","assets/QFab.e4392215.js","assets/SeletorCfop.95e0ec39.js","assets/Campo.1e3dd14b.js","assets/xlsx.9d3687ca.js"]),meta:{requiresAuth:!0}},{name:"Campanhas",path:"/campanhas/:id?",component:()=>Ke(()=>import("./CampanhaLista.3cf90221.js"),["assets/CampanhaLista.3cf90221.js","assets/CampanhaLista.870b4106.css","assets/Lista.05ea21b1.js","assets/Lista.f8a06d80.css","assets/QUploader.94d5cdea.js","assets/use-file.7b6c3a95.js","assets/GChipsV2.adade47a.js","assets/GChipsV2.73e684f5.css","assets/JsonViewer.a7629a3b.js","assets/selecaoContaWhatsapp.8c5347e5.js","assets/selecaoContaWhatsapp.699f39bd.css","assets/xlsx.9d3687ca.js"]),meta:{requiresAuth:!0}},{name:"Logs",path:"/logs",component:()=>Ke(()=>import("./LogLista.07eacc01.js"),["assets/LogLista.07eacc01.js","assets/Lista.05ea21b1.js","assets/Lista.f8a06d80.css","assets/JsonViewer.a7629a3b.js"]),meta:{requiresAuth:!0}},{name:"ListaPupilometros",path:"/pupilometros",component:()=>Ke(()=>import("./PupilometrosLista.4bc46d57.js"),["assets/PupilometrosLista.4bc46d57.js","assets/Lista.05ea21b1.js","assets/Lista.f8a06d80.css"]),meta:{requiresAuth:!0}},{name:"Envelopes",path:"/envelopes/:id?",component:()=>Ke(()=>import("./EnvelopesLista.620c12c2.js"),["assets/EnvelopesLista.620c12c2.js","assets/Lista.05ea21b1.js","assets/Lista.f8a06d80.css","assets/FaturaModal.eece8ad2.js","assets/FaturaModal.c25c692b.css","assets/DocumentosFiscais.32bb892d.js","assets/Campo.1e3dd14b.js","assets/compactarValidarNFe.cfe74738.js","assets/obterItens.021bc38f.js","assets/codigosANP.a6c1a264.js","assets/VendaCard.5a94ab6a.js","assets/emitirNFe.35117289.js","assets/ModalHistoricoStatus.1c18a2fc.js","assets/EnvelopeCard.57bdc2f5.js"]),meta:{requiresAuth:!0}},{name:"Contratos",path:"/contratos/:id?",component:()=>Ke(()=>import("./ContratosLista.5f07aaab.js"),["assets/ContratosLista.5f07aaab.js","assets/Lista.05ea21b1.js","assets/Lista.f8a06d80.css","assets/PromptContatoV2.a8d05adc.js"]),meta:{requiresAuth:!0}},{name:"Bonus",path:"/bonus/:id?",component:()=>Ke(()=>import("./BonusLista.9b55e4ef.js"),["assets/BonusLista.9b55e4ef.js","assets/Lista.05ea21b1.js","assets/Lista.f8a06d80.css","assets/SeletorEmpresa.c4281b2f.js","assets/SeletorEmpresa.49379218.css"]),meta:{requiresAuth:!0}},{name:"Tarefas",path:"/tarefas/:id?",component:()=>Ke(()=>import("./TarefasLista.96f35bfd.js"),["assets/TarefasLista.96f35bfd.js","assets/TarefasLista.415328e1.css","assets/Lista.05ea21b1.js","assets/Lista.f8a06d80.css","assets/open-url.b73a87ed.js"]),meta:{requiresAuth:!0}},{name:"EditorImpressao",path:"/plataforma/dev/editor-impressao/:id?/:versao?",component:()=>Ke(()=>import("./Editor.1a53bf69.js"),["assets/Editor.1a53bf69.js","assets/Editor.01c033d7.css","assets/Visualizador.985a2816.js","assets/MonacoEditor.43ae0879.js","assets/MonacoEditor.3cd6fdad.css"]),meta:{requiresAuth:!0}},{name:"EditorAPI",path:"/plataforma/dev/editor-api",component:()=>Ke(()=>import("./EditorApi.13b507f7.js"),["assets/EditorApi.13b507f7.js","assets/EditorApi.c53705ed.css","assets/MonacoEditor.43ae0879.js","assets/MonacoEditor.3cd6fdad.css","assets/typeof.d92a5d4e.js"]),meta:{requiresAuth:!0}},{name:"Imprimir",path:"/imprimir/:nome/:parametro?",component:()=>Ke(()=>import("./Imprimir.e168ef3a.js"),["assets/Imprimir.e168ef3a.js","assets/Imprimir.42f916d8.css","assets/open-url.b73a87ed.js","assets/Visualizador.985a2816.js"]),meta:{requiresAuth:!0}},{name:"Pupilometro",path:"/pupilometro",component:()=>Ke(()=>Promise.resolve().then(function(){return p3e}),void 0),meta:{requiresAuth:!0}}]},{name:"ClubApp",path:"/clubapp/:id?",component:()=>Ke(()=>import("./ClubApp.a3704378.js"),["assets/ClubApp.a3704378.js","assets/Campo.1e3dd14b.js","assets/b15-white.58ad6516.js","assets/produto2.fe0b4091.js","assets/produto5.08fbeead.js"]),meta:{requiresAuth:!0}},{name:"ClubApp2",path:"/clubapp2/:id?",component:()=>Ke(()=>import("./ClubApp2.069a7208.js"),["assets/ClubApp2.069a7208.js","assets/Campo.1e3dd14b.js","assets/ConfiguracoesEmpresas.7cacbfde.js","assets/ConfiguracoesEmpresas.b1cb4671.css","assets/QUploader.94d5cdea.js","assets/use-file.7b6c3a95.js","assets/optionsNfse.12d4a18d.js","assets/produto5.08fbeead.js","assets/b15-white.58ad6516.js"]),meta:{requiresAuth:!0}},{name:"ClubApp3",path:"/meub15/:id?",component:()=>Ke(()=>import("./ClubApp3.98bcfd3e.js"),["assets/ClubApp3.98bcfd3e.js","assets/ConfiguracoesEmpresas.7cacbfde.js","assets/ConfiguracoesEmpresas.b1cb4671.css","assets/QUploader.94d5cdea.js","assets/use-file.7b6c3a95.js","assets/optionsNfse.12d4a18d.js","assets/produto5.08fbeead.js","assets/b15-white.58ad6516.js"]),meta:{requiresAuth:!0}},{name:"Club",path:"/club/:id?",component:()=>Ke(()=>import("./Club.89514f5b.js"),["assets/Club.89514f5b.js","assets/Campo.1e3dd14b.js","assets/b15-white.58ad6516.js","assets/produto2.fe0b4091.js","assets/produto5.08fbeead.js"]),meta:{requiresAuth:!0}},{name:"ClubProdutoSingle",path:"/clubprodutosingle/:id?",component:()=>Ke(()=>import("./ClubProdutoSingle.032755ef.js"),["assets/ClubProdutoSingle.032755ef.js","assets/Campo.1e3dd14b.js","assets/RodapeSite.1e1f7485.js","assets/RodapeSite.1f78c776.css","assets/open-url.b73a87ed.js","assets/b15-white.58ad6516.js"]),meta:{requiresAuth:!0}},{name:"ClubSingle",path:"/clubsingle/:id?",component:()=>Ke(()=>import("./ClubSingle.3832cf05.js"),["assets/ClubSingle.3832cf05.js","assets/ClubSingle.4df193ae.css","assets/RodapeSite.1e1f7485.js","assets/RodapeSite.1f78c776.css","assets/open-url.b73a87ed.js"]),meta:{requiresAuth:!0}},{name:"Branca",path:"/branca",component:()=>Ke(()=>import("./Branca.e4ee4a76.js"),[]),meta:{requiresAuth:!0}},{path:"/importa-giron",name:"importaGiron",meta:{requiresAuth:!0},beforeEnter:async e=>{let t={};try{t=JSON.parse(Object.keys(e.query))}catch{}const o=await $utils.importaGiron({cpfCnpj:t.cpfCnpj,listaOsPrd:t.listaprd});return o.erro?($q.notify({type:"negative",message:o.erro}),{name:"Home"}):!1}},{name:"TesteComponente",path:"/testecomponente",component:()=>Ke(()=>import("./testComponente.d2d003e6.js"),["assets/testComponente.d2d003e6.js","assets/ContatoFicha.f01b3775.js","assets/open-url.b73a87ed.js","assets/Icone.9260bde8.js","assets/SeletorPais.cc26ee71.js","assets/ItemLista.c2688fd9.js","assets/ItemLista.03533d9e.css","assets/Lista.05ea21b1.js","assets/Lista.f8a06d80.css","assets/QUploader.94d5cdea.js","assets/use-file.7b6c3a95.js","assets/importarArquivoXlsx.d5684549.js","assets/xlsx.9d3687ca.js","assets/g-label.38ef6659.js","assets/g-label.52d539d9.css","assets/codigosANP.a6c1a264.js","assets/SeletorCfop.95e0ec39.js","assets/JsonViewer.a7629a3b.js","assets/Nfse.39a952b5.js","assets/optionsNfse.12d4a18d.js"]),meta:{requiresAuth:!1}}];async function nke(e,t){const o={moduleCache:{vue:EG},getFile:()=>t,addStyle:a=>{const i=document.createElement("style");i.textContent=a;const n=document.head.getElementsByTagName("style")[0]||null;document.head.insertBefore(i,n)}},{loadModule:r}=window["vue3-sfc-loader"];return r(`${e}.vue`,o)}var ox=async function(){const e=yNe,t=await et.vitrine.ler(),o=tx.find(a=>a.path==="/geeks").component;for(const a of t)tx.push({path:"/"+a.url,component:o,meta:{requiresAuth:!1}});const r=rke({scrollBehavior:()=>({y:0}),routes:tx,history:e("/"),mode:"history",base:"/"});return r.beforeEach(async(a,i,n)=>{var p,v,g;window.location.href.search("http://app")!==-1&&(window.location.href=window.location.href.replace("http:","https:"));const s=new URL(location.href);if(["b15.app","app.b15.com.br"].includes(s.hostname)&&/^\/educa(\/|$)/.test(s.pathname)||s.hostname==="educa.b15.app")return s.protocol="https:",s.hostname="b15.com.br",s.pathname="/educa",s.port="",location.href=s.href,n(!0);if(s.hostname==="b15.app"&&s.pathname==="/")return s.protocol="https:",s.hostname="b15.com.br",s.port="",location.href=s.href,n(!0);const l=r.getRoutes().map(({path:x})=>x==null?void 0:x.toLowerCase()).filter(Boolean),u=(p=a.path)==null?void 0:p.toLowerCase().split("/");let c=!1;for(const x of l){const b=x.split("/");let _=!0;for(let w=0;w<b.length;w++)if(!/^:.+/.test(b[w])&&u[w]!==b[w]){_=!1;break}if(_){c=!0;break}}if(!c){try{const x=a.path.toLowerCase(),b=`${$db.app.apiUrl.url.value}/pages${x}.vue`,_=await fetch(b);if(_.status===404&&($q.notify({message:"Recurso n\xE3o encontrado",type:"info"}),!i.name))return n({name:"Home"});if(_.status===200){const w=new Date().toISOString().slice(0,10)+"xpto9999";let S=await _.text();S=kP.Rabbit.decrypt(S,w).toString(kP.enc.Utf8);const D=await nke(x,S),M=r.getRoutes().find(({name:T})=>T===D.layout),O={path:x,component:D,meta:{requiresAuth:!0}};return M?(M.children||(M.children=[]),M.children.push(O),r.addRoute(M)):r.addRoute(O),n(x)}}catch{$q.notify({message:"Recurso indispon\xEDvel no momento",type:"info"})}if(i.name)return n(!1)}const d=a.matched.some(x=>x.meta.requiresAuth),f=JSON.parse(localStorage.getItem("usuario"))||!1,m=f&&typeof f.token=="string";if($utils.gconsole.log("router",`de:${i.name} para:${a.name} requerAutenticacao:${d} possuiToken:${m}`),~["Dev","Backup"].indexOf(a.name)||t.find(x=>a.path===`/${x.url}`))return n(!0);if(!d)return n(m?"/":!0);if(!m)return n({name:"AutenticacaoEntrar"});if(localStorage.getItem("bancoDeDados")&&$db.sistemaUsoLog.registrar({rota:a.path.replace((v=a==null?void 0:a.params)==null?void 0:v.id,"id"),chave:(g=a==null?void 0:a.params)==null?void 0:g.id}),a.matched.some(x=>x.name==="AutenticacaoBancos"))return n(!0);if(!$db.app.modoOnline.le()&&localStorage.getItem("sincronismoPlat")!=="ok")return n({name:"AutenticacaoBancos"});if(!$db.app.modoOnline.le()){const x=new Date($db.cache.get("SincronismoUltimaDataHoraLocal"));if((new Date-x)/36e5>=100&&($db.cache.set("SincronismoBloqueadoPorFalta","1"),Io.status.concluidoErp=!1),(Io.status.carregou&&!Io.status.concluidoErp||$db.cache.get("SincronismoBloqueadoPorFalta")==="1")&&!["CriarBanco","Desenvolvedor","Home","Plataforma15"].includes(a.name))return $db.cache.get("SincronismoBloqueadoPorFalta")==="1"&&$db.app.evento("notifyError","Voce estava h\xE1 mais de 20 horas sem conex\xE3o, aguarde o final do sincronismo"),n({name:"Home"})}return(a==null?void 0:a.name)!=="NPS"&&await $utils.verificarPesquisa()?n({name:"NPS"}):(await $utils.conduta.exibir(),n(!0))}),r};async function ske(e,t){const o=e(oNe);o.use(jG,t);const r=$d(typeof ox=="function"?await ox({}):ox);return{app:o,router:r}}var lke={isoName:"pt-BR",nativeName:"Portugu\xEAs (BR)",label:{clear:"Limpar",ok:"OK",cancel:"Cancelar",close:"Fechar",set:"Escolher",select:"Selecionar",reset:"Redefinir",remove:"Remover",update:"Atualizar",create:"Criar",search:"Buscar",filter:"Filtrar",refresh:"Recarregar",expand:e=>e?`Expandir "${e}"`:"Expandir",collapse:e=>e?`Recolher "${e}"`:"Colapso"},date:{days:"Domingo_Segunda-feira_Ter\xE7a-feira_Quarta-feira_Quinta-feira_Sexta-feira_S\xE1bado".split("_"),daysShort:"Dom_Seg_Ter_Qua_Qui_Sex_S\xE1b".split("_"),months:"Janeiro_Fevereiro_Mar\xE7o_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),firstDayOfWeek:0,format24h:!0,pluralDay:"dias"},table:{noData:"Sem dados dispon\xEDveis",noResults:"Nenhum dado correspondente encontrado",loading:"Carregando...",selectedRecords:e=>e>0?e+" registro"+(e===1?" selecionado":"s selecionados")+".":"Nenhum registro selecionado.",recordsPerPage:"Registros por p\xE1gina:",allRows:"Todos",pagination:(e,t,o)=>e+"-"+t+" de "+o,columns:"Colunas"},editor:{url:"URL",bold:"Negrito",italic:"It\xE1lico",strikethrough:"Riscado",underline:"Sublinhado",unorderedList:"Lista n\xE3o-ordenada",orderedList:"Lista ordenada",subscript:"Subscrito",superscript:"Sobrescrito",hyperlink:"Hyperlink",toggleFullscreen:"Tela cheia",quote:"Cita\xE7\xE3o",left:"Alinhado \xE0 esquerda",center:"Alinhado ao centro",right:"Alinhado \xE0 direita",justify:"Justificado",print:"Imprimir",outdent:"Diminuir indenta\xE7\xE3o",indent:"Aumentar indenta\xE7\xE3o",removeFormat:"Remover formata\xE7\xE3o",formatting:"Formata\xE7\xE3o",fontSize:"Tamanho de fonte",align:"Alinhar",hr:"Inserir divis\xF3ria horizontal",undo:"Desfazer",redo:"Refazer",heading1:"Cabe\xE7alho 1",heading2:"Cabe\xE7alho 2",heading3:"Cabe\xE7alho 3",heading4:"Cabe\xE7alho 4",heading5:"Cabe\xE7alho 5",heading6:"Cabe\xE7alho 6",paragraph:"Par\xE1grafo",code:"C\xF3digo",size1:"Muito pequeno",size2:"Pequeno",size3:"Normal",size4:"M\xE9dio",size5:"Grande",size6:"Enorme",size7:"M\xE1ximo",defaultFont:"Fonte padr\xE3o",viewSource:"Exibir fonte"},tree:{noNodes:"Sem n\xF3s dispon\xEDveis",noResults:"Nenhum n\xF3 correspondente encontrado"}},cke=Ct({name:"QBar",props:{...ya,dense:Boolean},setup(e,{slots:t}){const{proxy:{$q:o}}=xt(),r=xa(e,o),a=j(()=>`q-bar row no-wrap items-center q-bar--${e.dense===!0?"dense":"standard"}  q-bar--${r.value===!0?"dark":"light"}`);return()=>G("div",{class:a.value,role:"toolbar"},uo(t.default))}});const uke=["",!0];var dke=Ct({name:"QBreadcrumbs",props:{...BE,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:e=>["none","xs","sm","md","lg","xl"].includes(e),default:"sm"}},setup(e,{slots:t}){const o=qE(e),r=j(()=>`flex items-center ${o.value}${e.gutter==="none"?"":` q-gutter-${e.gutter}`}`),a=j(()=>e.separatorColor?` text-${e.separatorColor}`:""),i=j(()=>` text-${e.activeColor}`);return()=>{if(t.default===void 0)return;const n=xM(uo(t.default));if(n.length===0)return;let s=1;const l=[],u=n.filter(d=>d.type!==void 0&&d.type.name==="QBreadcrumbsEl").length,c=t.separator!==void 0?t.separator:()=>e.separator;return n.forEach(d=>{if(d.type!==void 0&&d.type.name==="QBreadcrumbsEl"){const f=s<u,m=d.props!==null&&uke.includes(d.props.disable),p=(f===!0?"":" q-breadcrumbs--last")+(m!==!0&&f===!0?i.value:"");s++,l.push(G("div",{class:`flex items-center${p}`},[d])),f===!0&&l.push(G("div",{class:"q-breadcrumbs__separator"+a.value},c()))}else l.push(d)}),G("div",{class:"q-breadcrumbs"},[G("div",{class:r.value},l)])}}}),fke=Ct({name:"QBreadcrumbsEl",props:{...bh,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(e,{slots:t}){const{linkTag:o,linkAttrs:r,linkClass:a,navigateOnClick:i}=U_(),n=j(()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(e.disable!==!0?"q-link--focusable"+a.value:"q-breadcrumbs__el--disable"),...r.value,onClick:i})),s=j(()=>"q-breadcrumbs__el-icon"+(e.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const l=[];return e.icon!==void 0&&l.push(G(Pe,{class:s.value,name:e.icon})),e.label!==void 0&&l.push(e.label),G(o.value,{...n.value},Mr(t.default,l))}}}),cA=Ct({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:t}){const o=j(()=>{const r=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(a=>e[a]===!0).map(a=>`q-btn-group--${a}`).join(" ");return`q-btn-group row no-wrap${r.length!==0?" "+r:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>G("div",{class:o.value},uo(t.default))}});const mke=Object.keys(UE);function pke(e){return mke.reduce((t,o)=>{const r=e[o];return r!==void 0&&(t[o]=r),t},{})}var hke=Ct({name:"QBtnDropdown",props:{...UE,...Ed,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:o}){const{proxy:r}=xt(),a=Ue(e.modelValue),i=Ue(null),n=HI(),s=j(()=>{const w={"aria-expanded":a.value===!0?"true":"false","aria-haspopup":"true","aria-controls":n.value,"aria-label":e.toggleAriaLabel||r.$q.lang.label[a.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(w["aria-disabled"]="true"),w}),l=j(()=>"q-btn-dropdown__arrow"+(a.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),u=j(()=>EM(e)),c=j(()=>pke(e));ct(()=>e.modelValue,w=>{i.value!==null&&i.value[w?"show":"hide"]()}),ct(()=>e.split,_);function d(w){a.value=!0,o("beforeShow",w)}function f(w){o("show",w),o("update:modelValue",!0)}function m(w){a.value=!1,o("beforeHide",w)}function p(w){o("hide",w),o("update:modelValue",!1)}function v(w){o("click",w)}function g(w){en(w),_(),o("click",w)}function x(w){i.value!==null&&i.value.toggle(w)}function b(w){i.value!==null&&i.value.show(w)}function _(w){i.value!==null&&i.value.hide(w)}return Object.assign(r,{show:b,hide:_,toggle:x}),Va(()=>{e.modelValue===!0&&b()}),()=>{const w=[G(Pe,{class:l.value,name:e.dropdownIcon||r.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&w.push(G(aa,{ref:i,id:n.value,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:d,onShow:f,onBeforeHide:m,onHide:p},t.default)),e.split===!1?G(ae,{class:"q-btn-dropdown q-btn-dropdown--simple",...c.value,...s.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:v},{default:()=>uo(t.label,[]).concat(w),loading:t.loading}):G(cA,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...u.value,glossy:e.glossy,stretch:e.stretch},()=>[G(ae,{class:"q-btn-dropdown--current",...c.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:g},{default:t.label,loading:t.loading}),G(ae,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...s.value,...u.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>w)])}}}),vke=Ct({name:"QBtnToggle",props:{...Su,modelValue:{required:!0},options:{type:Array,required:!0,validator:e=>e.every(t=>("label"in t||"icon"in t||"slot"in t)&&"value"in t)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(e,{slots:t,emit:o}){const r=j(()=>e.options.find(f=>f.value===e.modelValue)!==void 0),a=j(()=>({type:"hidden",name:e.name,value:e.modelValue})),i=Ym(a),n=j(()=>EM(e)),s=j(()=>({rounded:e.rounded,dense:e.dense,...n.value})),l=j(()=>e.options.map((f,m)=>{const{attrs:p,value:v,slot:g,...x}=f;return{slot:g,props:{key:m,"aria-pressed":v===e.modelValue?"true":"false",...p,...x,...s.value,disable:e.disable===!0||x.disable===!0,color:v===e.modelValue?c(x,"toggleColor"):c(x,"color"),textColor:v===e.modelValue?c(x,"toggleTextColor"):c(x,"textColor"),noCaps:c(x,"noCaps")===!0,noWrap:c(x,"noWrap")===!0,size:c(x,"size"),padding:c(x,"padding"),ripple:c(x,"ripple"),stack:c(x,"stack")===!0,stretch:c(x,"stretch")===!0,onClick(b){u(v,f,b)}}}}));function u(f,m,p){e.readonly!==!0&&(e.modelValue===f?e.clearable===!0&&(o("update:modelValue",null,null),o("clear")):o("update:modelValue",f,m),o("click",p))}function c(f,m){return f[m]===void 0?e[m]:f[m]}function d(){const f=l.value.map(m=>G(ae,m.props,m.slot!==void 0?t[m.slot]:void 0));return e.name!==void 0&&e.disable!==!0&&r.value===!0&&i(f,"push"),Mr(t.default,f)}return()=>G(cA,{class:"q-btn-toggle",...n.value,rounded:e.rounded,stretch:e.stretch,glossy:e.glossy,spread:e.spread},d)}});const gke=["top","right","bottom","left"],_ke=["regular","flat","outline","push","unelevated"];var bke=Ct({name:"QCarousel",props:{...ya,...VR,...GR,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>_ke.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>gke.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...WR,...BR],setup(e,{slots:t}){const{proxy:{$q:o}}=xt(),r=xa(e,o);let a=null,i;const{updatePanelsList:n,getPanelContent:s,panelDirectives:l,goToPanel:u,previousPanel:c,nextPanel:d,getEnabledPanels:f,panelIndex:m}=qR(),{inFullscreen:p}=QR(),v=j(()=>p.value!==!0&&e.height!==void 0?{height:e.height}:{}),g=j(()=>e.vertical===!0?"vertical":"horizontal"),x=j(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),b=j(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(p.value===!0?" fullscreen":"")+(r.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${g.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${x.value}`:"")),_=j(()=>{const I=[e.prevIcon||o.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||o.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&o.lang.rtl===!0?I.reverse():I}),w=j(()=>e.navigationIcon||o.iconSet.carousel.navigationIcon),S=j(()=>e.navigationActiveIcon||w.value),D=j(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));ct(()=>e.modelValue,()=>{e.autoplay&&M()}),ct(()=>e.autoplay,I=>{I?M():a!==null&&(clearTimeout(a),a=null)});function M(){const I=Ep(e.autoplay)===!0?Math.abs(e.autoplay):5e3;a!==null&&clearTimeout(a),a=setTimeout(()=>{a=null,I>=0?d():c()},I)}Va(()=>{e.autoplay&&M()}),Vo(()=>{a!==null&&clearTimeout(a)});function O(I,N){return G("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${I} q-carousel__navigation--${x.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[G("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},f().map(N))])}function T(){const I=[];if(e.navigation===!0){const N=t["navigation-icon"]!==void 0?t["navigation-icon"]:F=>G(ae,{key:"nav"+F.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${F.active===!0?"":"in"}active`,...F.btnProps,onClick:F.onClick}),P=i-1;I.push(O("buttons",(F,L)=>{const z=F.props.name,H=m.value===L;return N({index:L,maxIndex:P,name:z,active:H,btnProps:{icon:H===!0?S.value:w.value,size:"sm",...D.value},onClick:()=>{u(z)}})}))}else if(e.thumbnails===!0){const N=e.controlColor!==void 0?` text-${e.controlColor}`:"";I.push(O("thumbnails",P=>{const F=P.props;return G("img",{key:"tmb#"+F.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${F.name===e.modelValue?"":"in"}active`+N,src:F.imgSrc||F["img-src"],onClick:()=>{u(F.name)}})}))}return e.arrows===!0&&m.value>=0&&((e.infinite===!0||m.value>0)&&I.push(G("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${g.value} absolute flex flex-center`},[G(ae,{icon:_.value[0],...D.value,onClick:c})])),(e.infinite===!0||m.value<i-1)&&I.push(G("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${g.value} absolute flex flex-center`},[G(ae,{icon:_.value[1],...D.value,onClick:d})]))),Mr(t.control,I)}return()=>(i=n(t),G("div",{class:b.value,style:v.value},[Fd("div",{class:"q-carousel__slides-container"},s(),"sl-cont",e.swipeable,()=>l.value)].concat(T())))}}),yke=Ct({name:"QCarouselSlide",props:{...RR,imgSrc:String},setup(e,{slots:t}){const o=j(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>G("div",{class:"q-carousel__slide",style:o.value},uo(t.default))}});const xke=["gregorian","persian"],n_={mask:{type:String},locale:Object,calendar:{type:String,validator:e=>xke.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},B7=["update:modelValue"];function Pl(e){return e.year+"/"+Qo(e.month)+"/"+Qo(e.day)}function q7(e,t){const o=j(()=>e.disable!==!0&&e.readonly!==!0),r=j(()=>o.value===!0?0:-1),a=j(()=>{const s=[];return e.color!==void 0&&s.push(`bg-${e.color}`),e.textColor!==void 0&&s.push(`text-${e.textColor}`),s.join(" ")});function i(){return e.locale!==void 0?{...t.lang.date,...e.locale}:t.lang.date}function n(s){const l=new Date,u=s===!0?null:0;if(e.calendar==="persian"){const c=xK(l);return{year:c.jy,month:c.jm,day:c.jd}}return{year:l.getFullYear(),month:l.getMonth()+1,day:l.getDate(),hour:u,minute:u,second:u,millisecond:u}}return{editable:o,tabindex:r,headerClass:a,getLocale:i,getCurrentDate:n}}const Xu=20,Cke=["Calendar","Years","Months"],JP=e=>Cke.includes(e),ax=e=>/^-?[\d]+\/[0-1]\d$/.test(e),Vf=" \u2014 ";function Ic(e){return e.year+"/"+Qo(e.month)}var wke=Ct({name:"QDate",props:{...n_,...Su,...ya,modelValue:{required:!0,validator:e=>typeof e=="string"||Array.isArray(e)===!0||Object(e)===e||e===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...n_.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:ax},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:ax},navigationMaxYearMonth:{type:String,validator:ax},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:JP}},emits:[...B7,"rangeStart","rangeEnd","navigation"],setup(e,{slots:t,emit:o}){const{proxy:r}=xt(),{$q:a}=r,i=xa(e,a),{getCache:n}=kR(),{tabindex:s,headerClass:l,getLocale:u,getCurrentDate:c}=q7(e,a);let d;const f=YI(e),m=Ym(f),p=Ue(null),v=Ue(Pt()),g=Ue(u()),x=j(()=>Pt()),b=j(()=>u()),_=j(()=>c()),w=Ue(fo(v.value,g.value)),S=Ue(e.defaultView),D=j(()=>a.lang.rtl===!0?"right":"left"),M=Ue(D.value),O=Ue(D.value),T=w.value.year,I=Ue(T-T%Xu-(T<0?Xu:0)),N=Ue(null),P=j(()=>{const xe=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${xe} q-date--${xe}-${e.minimal===!0?"minimal":"standard"}`+(i.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),F=j(()=>e.color||"primary"),L=j(()=>e.textColor||"white"),z=j(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),H=j(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),X=j(()=>H.value.filter(xe=>typeof xe=="string").map(xe=>$t(xe,v.value,g.value)).filter(xe=>xe.dateHash!==null&&xe.day!==null&&xe.month!==null&&xe.year!==null)),Y=j(()=>{const xe=Me=>$t(Me,v.value,g.value);return H.value.filter(Me=>ei(Me)===!0&&Me.from!==void 0&&Me.to!==void 0).map(Me=>({from:xe(Me.from),to:xe(Me.to)})).filter(Me=>Me.from.dateHash!==null&&Me.to.dateHash!==null&&Me.from.dateHash<Me.to.dateHash)}),de=j(()=>e.calendar!=="persian"?xe=>new Date(xe.year,xe.month-1,xe.day):xe=>{const Me=a3(xe.year,xe.month,xe.day);return new Date(Me.gy,Me.gm-1,Me.gd)}),ye=j(()=>e.calendar==="persian"?Pl:(xe,Me,je)=>DE(new Date(xe.year,xe.month-1,xe.day,xe.hour,xe.minute,xe.second,xe.millisecond),Me===void 0?v.value:Me,je===void 0?g.value:je,xe.year,xe.timezoneOffset)),W=j(()=>X.value.length+Y.value.reduce((xe,Me)=>xe+1+AE(de.value(Me.to),de.value(Me.from)),0)),re=j(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(N.value!==null){const je=N.value.init,pt=de.value(je);return g.value.daysShort[pt.getDay()]+", "+g.value.monthsShort[je.month-1]+" "+je.day+Vf+"?"}if(W.value===0)return Vf;if(W.value>1)return`${W.value} ${g.value.pluralDay}`;const xe=X.value[0],Me=de.value(xe);return isNaN(Me.valueOf())===!0?Vf:g.value.headerTitle!==void 0?g.value.headerTitle(Me,xe):g.value.daysShort[Me.getDay()]+", "+g.value.monthsShort[xe.month-1]+" "+xe.day}),_e=j(()=>X.value.concat(Y.value.map(Me=>Me.from)).sort((Me,je)=>Me.year-je.year||Me.month-je.month)[0]),ve=j(()=>X.value.concat(Y.value.map(Me=>Me.to)).sort((Me,je)=>je.year-Me.year||je.month-Me.month)[0]),ke=j(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(W.value===0)return Vf;if(W.value>1){const xe=_e.value,Me=ve.value,je=g.value.monthsShort;return je[xe.month-1]+(xe.year!==Me.year?" "+xe.year+Vf+je[Me.month-1]+" ":xe.month!==Me.month?Vf+je[Me.month-1]:"")+" "+Me.year}return X.value[0].year}),Ie=j(()=>{const xe=[a.iconSet.datetime.arrowLeft,a.iconSet.datetime.arrowRight];return a.lang.rtl===!0?xe.reverse():xe}),he=j(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):g.value.firstDayOfWeek),De=j(()=>{const xe=g.value.daysShort,Me=he.value;return Me>0?xe.slice(Me,7).concat(xe.slice(0,Me)):xe}),Te=j(()=>{const xe=w.value;return e.calendar!=="persian"?new Date(xe.year,xe.month,0).getDate():Bv(xe.year,xe.month)}),J=j(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),q=j(()=>{if(e.navigationMinYearMonth===void 0)return null;const xe=e.navigationMinYearMonth.split("/");return{year:parseInt(xe[0],10),month:parseInt(xe[1],10)}}),ne=j(()=>{if(e.navigationMaxYearMonth===void 0)return null;const xe=e.navigationMaxYearMonth.split("/");return{year:parseInt(xe[0],10),month:parseInt(xe[1],10)}}),U=j(()=>{const xe={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return q.value!==null&&q.value.year>=w.value.year&&(xe.year.prev=!1,q.value.year===w.value.year&&q.value.month>=w.value.month&&(xe.month.prev=!1)),ne.value!==null&&ne.value.year<=w.value.year&&(xe.year.next=!1,ne.value.year===w.value.year&&ne.value.month<=w.value.month&&(xe.month.next=!1)),xe}),Z=j(()=>{const xe={};return X.value.forEach(Me=>{const je=Ic(Me);xe[je]===void 0&&(xe[je]=[]),xe[je].push(Me.day)}),xe}),Ce=j(()=>{const xe={};return Y.value.forEach(Me=>{const je=Ic(Me.from),pt=Ic(Me.to);if(xe[je]===void 0&&(xe[je]=[]),xe[je].push({from:Me.from.day,to:je===pt?Me.to.day:void 0,range:Me}),je<pt){let ht;const{year:Oo,month:Lt}=Me.from,ho=Lt<12?{year:Oo,month:Lt+1}:{year:Oo+1,month:1};for(;(ht=Ic(ho))<=pt;)xe[ht]===void 0&&(xe[ht]=[]),xe[ht].push({from:void 0,to:ht===pt?Me.to.day:void 0,range:Me}),ho.month++,ho.month>12&&(ho.year++,ho.month=1)}}),xe}),Q=j(()=>{if(N.value===null)return;const{init:xe,initHash:Me,final:je,finalHash:pt}=N.value,[ht,Oo]=Me<=pt?[xe,je]:[je,xe],Lt=Ic(ht),ho=Ic(Oo);if(Lt!==V.value&&ho!==V.value)return;const $o={};return Lt===V.value?($o.from=ht.day,$o.includeFrom=!0):$o.from=1,ho===V.value?($o.to=Oo.day,$o.includeTo=!0):$o.to=Te.value,$o}),V=j(()=>Ic(w.value)),R=j(()=>{const xe={};if(e.options===void 0){for(let je=1;je<=Te.value;je++)xe[je]=!0;return xe}const Me=typeof e.options=="function"?e.options:je=>e.options.includes(je);for(let je=1;je<=Te.value;je++){const pt=V.value+"/"+Qo(je);xe[je]=Me(pt)}return xe}),ee=j(()=>{const xe={};if(e.events===void 0)for(let Me=1;Me<=Te.value;Me++)xe[Me]=!1;else{const Me=typeof e.events=="function"?e.events:je=>e.events.includes(je);for(let je=1;je<=Te.value;je++){const pt=V.value+"/"+Qo(je);xe[je]=Me(pt)===!0&&J.value(pt)}}return xe}),ce=j(()=>{let xe,Me;const{year:je,month:pt}=w.value;if(e.calendar!=="persian")xe=new Date(je,pt-1,1),Me=new Date(je,pt-1,0).getDate();else{const ht=a3(je,pt,1);xe=new Date(ht.gy,ht.gm-1,ht.gd);let Oo=pt-1,Lt=je;Oo===0&&(Oo=12,Lt--),Me=Bv(Lt,Oo)}return{days:xe.getDay()-he.value-1,endDay:Me}}),se=j(()=>{const xe=[],{days:Me,endDay:je}=ce.value,pt=Me<0?Me+7:Me;if(pt<6)for(let Lt=je-pt;Lt<=je;Lt++)xe.push({i:Lt,fill:!0});const ht=xe.length;for(let Lt=1;Lt<=Te.value;Lt++){const ho={i:Lt,event:ee.value[Lt],classes:[]};R.value[Lt]===!0&&(ho.in=!0,ho.flat=!0),xe.push(ho)}if(Z.value[V.value]!==void 0&&Z.value[V.value].forEach(Lt=>{const ho=ht+Lt-1;Object.assign(xe[ho],{selected:!0,unelevated:!0,flat:!1,color:F.value,textColor:L.value})}),Ce.value[V.value]!==void 0&&Ce.value[V.value].forEach(Lt=>{if(Lt.from!==void 0){const ho=ht+Lt.from-1,$o=ht+(Lt.to||Te.value)-1;for(let Hi=ho;Hi<=$o;Hi++)Object.assign(xe[Hi],{range:Lt.range,unelevated:!0,color:F.value,textColor:L.value});Object.assign(xe[ho],{rangeFrom:!0,flat:!1}),Lt.to!==void 0&&Object.assign(xe[$o],{rangeTo:!0,flat:!1})}else if(Lt.to!==void 0){const ho=ht+Lt.to-1;for(let $o=ht;$o<=ho;$o++)Object.assign(xe[$o],{range:Lt.range,unelevated:!0,color:F.value,textColor:L.value});Object.assign(xe[ho],{flat:!1,rangeTo:!0})}else{const ho=ht+Te.value-1;for(let $o=ht;$o<=ho;$o++)Object.assign(xe[$o],{range:Lt.range,unelevated:!0,color:F.value,textColor:L.value})}}),Q.value!==void 0){const Lt=ht+Q.value.from-1,ho=ht+Q.value.to-1;for(let $o=Lt;$o<=ho;$o++)xe[$o].color=F.value,xe[$o].editRange=!0;Q.value.includeFrom===!0&&(xe[Lt].editRangeFrom=!0),Q.value.includeTo===!0&&(xe[ho].editRangeTo=!0)}w.value.year===_.value.year&&w.value.month===_.value.month&&(xe[ht+_.value.day-1].today=!0);const Oo=xe.length%7;if(Oo>0){const Lt=7-Oo;for(let ho=1;ho<=Lt;ho++)xe.push({i:ho,fill:!0})}return xe.forEach(Lt=>{let ho="q-date__calendar-item ";Lt.fill===!0?ho+="q-date__calendar-item--fill":(ho+=`q-date__calendar-item--${Lt.in===!0?"in":"out"}`,Lt.range!==void 0&&(ho+=` q-date__range${Lt.rangeTo===!0?"-to":Lt.rangeFrom===!0?"-from":""}`),Lt.editRange===!0&&(ho+=` q-date__edit-range${Lt.editRangeFrom===!0?"-from":""}${Lt.editRangeTo===!0?"-to":""}`),(Lt.range!==void 0||Lt.editRange===!0)&&(ho+=` text-${Lt.color}`)),Lt.classes=ho}),xe}),pe=j(()=>e.disable===!0?{"aria-disabled":"true"}:{});ct(()=>e.modelValue,xe=>{if(d===xe)d=0;else{const Me=fo(v.value,g.value);po(Me.year,Me.month,Me)}}),ct(S,()=>{p.value!==null&&r.$el.contains(document.activeElement)===!0&&p.value.focus()}),ct(()=>w.value.year+"|"+w.value.month,()=>{o("navigation",{year:w.value.year,month:w.value.month})}),ct(x,xe=>{Xe(xe,g.value,"mask"),v.value=xe}),ct(b,xe=>{Xe(v.value,xe,"locale"),g.value=xe});function we(){const{year:xe,month:Me,day:je}=_.value,pt={...w.value,year:xe,month:Me,day:je},ht=Z.value[Ic(pt)];(ht===void 0||ht.includes(pt.day)===!1)&&ps(pt),Ze(pt.year,pt.month)}function Ne(xe){JP(xe)===!0&&(S.value=xe)}function Ge(xe,Me){["month","year"].includes(xe)&&(xe==="month"?tt:$e)(Me===!0?-1:1)}function Ze(xe,Me){S.value="Calendar",po(xe,Me)}function ot(xe,Me){if(e.range===!1||!xe){N.value=null;return}const je=Object.assign({...w.value},xe),pt=Me!==void 0?Object.assign({...w.value},Me):je;N.value={init:je,initHash:Pl(je),final:pt,finalHash:Pl(pt)},Ze(je.year,je.month)}function Pt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function $t(xe,Me,je){return Gf(xe,Me,je,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function fo(xe,Me){const je=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(je.length===0)return He();const pt=je[je.length-1],ht=$t(pt.from!==void 0?pt.from:pt,xe,Me);return ht.dateHash===null?He():ht}function He(){let xe,Me;if(e.defaultYearMonth!==void 0){const je=e.defaultYearMonth.split("/");xe=parseInt(je[0],10),Me=parseInt(je[1],10)}else{const je=_.value!==void 0?_.value:c();xe=je.year,Me=je.month}return{year:xe,month:Me,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:xe+"/"+Qo(Me)+"/01"}}function tt(xe){let Me=w.value.year,je=Number(w.value.month)+xe;je===13?(je=1,Me++):je===0&&(je=12,Me--),po(Me,je),z.value===!0&&pr("month")}function $e(xe){const Me=Number(w.value.year)+xe;po(Me,w.value.month),z.value===!0&&pr("year")}function dt(xe){po(xe,w.value.month),S.value=e.defaultView==="Years"?"Months":"Calendar",z.value===!0&&pr("year")}function Rt(xe){po(w.value.year,xe),S.value="Calendar",z.value===!0&&pr("month")}function Ut(xe,Me){const je=Z.value[Me];(je!==void 0&&je.includes(xe.day)===!0?qn:ps)(xe)}function gt(xe){return{year:xe.year,month:xe.month,day:xe.day}}function po(xe,Me,je){if(q.value!==null&&xe<=q.value.year&&((Me<q.value.month||xe<q.value.year)&&(Me=q.value.month),xe=q.value.year),ne.value!==null&&xe>=ne.value.year&&((Me>ne.value.month||xe>ne.value.year)&&(Me=ne.value.month),xe=ne.value.year),je!==void 0){const{hour:ht,minute:Oo,second:Lt,millisecond:ho,timezoneOffset:$o,timeHash:Hi}=je;Object.assign(w.value,{hour:ht,minute:Oo,second:Lt,millisecond:ho,timezoneOffset:$o,timeHash:Hi})}const pt=xe+"/"+Qo(Me)+"/01";pt!==w.value.dateHash&&(M.value=w.value.dateHash<pt==(a.lang.rtl!==!0)?"left":"right",xe!==w.value.year&&(O.value=M.value),Ao(()=>{I.value=xe-xe%Xu-(xe<0?Xu:0),Object.assign(w.value,{year:xe,month:Me,day:1,dateHash:pt})}))}function Ea(xe,Me,je){const pt=xe!==null&&xe.length===1&&e.multiple===!1?xe[0]:xe;d=pt;const{reason:ht,details:Oo}=zi(Me,je);o("update:modelValue",pt,ht,Oo)}function pr(xe){const Me=X.value[0]!==void 0&&X.value[0].dateHash!==null?{...X.value[0]}:{...w.value};Ao(()=>{Me.year=w.value.year,Me.month=w.value.month;const je=e.calendar!=="persian"?new Date(Me.year,Me.month,0).getDate():Bv(Me.year,Me.month);Me.day=Math.min(Math.max(1,Me.day),je);const pt=ni(Me);d=pt;const{details:ht}=zi("",Me);o("update:modelValue",pt,xe,ht)})}function zi(xe,Me){return Me.from!==void 0?{reason:`${xe}-range`,details:{...gt(Me.target),from:gt(Me.from),to:gt(Me.to)}}:{reason:`${xe}-day`,details:gt(Me)}}function ni(xe,Me,je){return xe.from!==void 0?{from:ye.value(xe.from,Me,je),to:ye.value(xe.to,Me,je)}:ye.value(xe,Me,je)}function ps(xe){let Me;if(e.multiple===!0)if(xe.from!==void 0){const je=Pl(xe.from),pt=Pl(xe.to),ht=X.value.filter(Lt=>Lt.dateHash<je||Lt.dateHash>pt),Oo=Y.value.filter(({from:Lt,to:ho})=>ho.dateHash<je||Lt.dateHash>pt);Me=ht.concat(Oo).concat(xe).map(Lt=>ni(Lt))}else{const je=H.value.slice();je.push(ni(xe)),Me=je}else Me=ni(xe);Ea(Me,"add",xe)}function qn(xe){if(e.noUnset===!0)return;let Me=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const je=ni(xe);xe.from!==void 0?Me=e.modelValue.filter(pt=>pt.from!==void 0?pt.from!==je.from&&pt.to!==je.to:!0):Me=e.modelValue.filter(pt=>pt!==je),Me.length===0&&(Me=null)}Ea(Me,"remove",xe)}function Xe(xe,Me,je){const pt=X.value.concat(Y.value).map(ht=>ni(ht,xe,Me)).filter(ht=>ht.from!==void 0?ht.from.dateHash!==null&&ht.to.dateHash!==null:ht.dateHash!==null);o("update:modelValue",(e.multiple===!0?pt:pt[0])||null,je)}function It(){if(e.minimal!==!0)return G("div",{class:"q-date__header "+l.value},[G("div",{class:"relative-position"},[G(Or,{name:"q-transition--fade"},()=>G("div",{key:"h-yr-"+ke.value,class:"q-date__header-subtitle q-date__header-link "+(S.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:s.value,...n("vY",{onClick(){S.value="Years"},onKeyup(xe){xe.keyCode===13&&(S.value="Years")}})},[ke.value]))]),G("div",{class:"q-date__header-title relative-position flex no-wrap"},[G("div",{class:"relative-position col"},[G(Or,{name:"q-transition--fade"},()=>G("div",{key:"h-sub"+re.value,class:"q-date__header-title-label q-date__header-link "+(S.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:s.value,...n("vC",{onClick(){S.value="Calendar"},onKeyup(xe){xe.keyCode===13&&(S.value="Calendar")}})},[re.value]))]),e.todayBtn===!0?G(ae,{class:"q-date__header-today self-start",icon:a.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:s.value,onClick:we}):null])])}function Qt({label:xe,type:Me,key:je,dir:pt,goTo:ht,boundaries:Oo,cls:Lt}){return[G("div",{class:"row items-center q-date__arrow"},[G(ae,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ie.value[0],tabindex:s.value,disable:Oo.prev===!1,...n("go-#"+Me,{onClick(){ht(-1)}})})]),G("div",{class:"relative-position overflow-hidden flex flex-center"+Lt},[G(Or,{name:"q-transition--jump-"+pt},()=>G("div",{key:je},[G(ae,{flat:!0,dense:!0,noCaps:!0,label:xe,tabindex:s.value,...n("view#"+Me,{onClick:()=>{S.value=Me}})})]))]),G("div",{class:"row items-center q-date__arrow"},[G(ae,{round:!0,dense:!0,size:"sm",flat:!0,icon:Ie.value[1],tabindex:s.value,disable:Oo.next===!1,...n("go+#"+Me,{onClick(){ht(1)}})})])]}const Zt={Calendar:()=>[G("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[G("div",{class:"q-date__navigation row items-center no-wrap"},Qt({label:g.value.months[w.value.month-1],type:"Months",key:w.value.month,dir:M.value,goTo:tt,boundaries:U.value.month,cls:" col"}).concat(Qt({label:w.value.year,type:"Years",key:w.value.year,dir:O.value,goTo:$e,boundaries:U.value.year,cls:""}))),G("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},De.value.map(xe=>G("div",{class:"q-date__calendar-item"},[G("div",xe)]))),G("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[G(Or,{name:"q-transition--slide-"+M.value},()=>G("div",{key:V.value,class:"q-date__calendar-days fit"},se.value.map(xe=>G("div",{class:xe.classes},[xe.in===!0?G(ae,{class:xe.today===!0?"q-date__today":"",dense:!0,flat:xe.flat,unelevated:xe.unelevated,color:xe.color,textColor:xe.textColor,label:xe.i,tabindex:s.value,...n("day#"+xe.i,{onClick:()=>{ro(xe.i)},onMouseover:()=>{la(xe.i)}})},xe.event!==!1?()=>G("div",{class:"q-date__event bg-"+xe.event}):null):G("div",""+xe.i)]))))])])],Months(){const xe=w.value.year===_.value.year,Me=pt=>q.value!==null&&w.value.year===q.value.year&&q.value.month>pt||ne.value!==null&&w.value.year===ne.value.year&&ne.value.month<pt,je=g.value.monthsShort.map((pt,ht)=>{const Oo=w.value.month===ht+1;return G("div",{class:"q-date__months-item flex flex-center"},[G(ae,{class:xe===!0&&_.value.month===ht+1?"q-date__today":null,flat:Oo!==!0,label:pt,unelevated:Oo,color:Oo===!0?F.value:null,textColor:Oo===!0?L.value:null,tabindex:s.value,disable:Me(ht+1),...n("month#"+ht,{onClick:()=>{Rt(ht+1)}})})])});return e.yearsInMonthView===!0&&je.unshift(G("div",{class:"row no-wrap full-width"},[Qt({label:w.value.year,type:"Years",key:w.value.year,dir:O.value,goTo:$e,boundaries:U.value.year,cls:" col"})])),G("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},je)},Years(){const xe=I.value,Me=xe+Xu,je=[],pt=ht=>q.value!==null&&q.value.year>ht||ne.value!==null&&ne.value.year<ht;for(let ht=xe;ht<=Me;ht++){const Oo=w.value.year===ht;je.push(G("div",{class:"q-date__years-item flex flex-center"},[G(ae,{key:"yr"+ht,class:_.value.year===ht?"q-date__today":null,flat:!Oo,label:ht,dense:!0,unelevated:Oo,color:Oo===!0?F.value:null,textColor:Oo===!0?L.value:null,tabindex:s.value,disable:pt(ht),...n("yr#"+ht,{onClick:()=>{dt(ht)}})})]))}return G("div",{class:"q-date__view q-date__years flex flex-center"},[G("div",{class:"col-auto"},[G(ae,{round:!0,dense:!0,flat:!0,icon:Ie.value[0],tabindex:s.value,disable:pt(xe),...n("y-",{onClick:()=>{I.value-=Xu}})})]),G("div",{class:"q-date__years-content col self-stretch row items-center"},je),G("div",{class:"col-auto"},[G(ae,{round:!0,dense:!0,flat:!0,icon:Ie.value[1],tabindex:s.value,disable:pt(Me),...n("y+",{onClick:()=>{I.value+=Xu}})})])])}};function ro(xe){const Me={...w.value,day:xe};if(e.range===!1){Ut(Me,V.value);return}if(N.value===null){const je=se.value.find(ht=>ht.fill!==!0&&ht.i===xe);if(e.noUnset!==!0&&je.range!==void 0){qn({target:Me,from:je.range.from,to:je.range.to});return}if(je.selected===!0){qn(Me);return}const pt=Pl(Me);N.value={init:Me,initHash:pt,final:Me,finalHash:pt},o("rangeStart",gt(Me))}else{const je=N.value.initHash,pt=Pl(Me),ht=je<=pt?{from:N.value.init,to:Me}:{from:Me,to:N.value.init};N.value=null,ps(je===pt?Me:{target:Me,...ht}),o("rangeEnd",{from:gt(ht.from),to:gt(ht.to)})}}function la(xe){if(N.value!==null){const Me={...w.value,day:xe};Object.assign(N.value,{final:Me,finalHash:Pl(Me)})}}return Object.assign(r,{setToday:we,setView:Ne,offsetCalendar:Ge,setCalendarTo:Ze,setEditingRange:ot}),()=>{const xe=[G("div",{class:"q-date__content col relative-position"},[G(Or,{name:"q-transition--fade"},Zt[S.value])])],Me=uo(t.default);return Me!==void 0&&xe.push(G("div",{class:"q-date__actions"},Me)),e.name!==void 0&&e.disable!==!0&&m(xe,"push"),G("div",{class:P.value,...pe.value},[It(),G("div",{ref:p,class:"q-date__main col column",tabindex:-1},xe)])}}});function pp(e,t=new WeakMap){if(Object(e)!==e)return e;if(t.has(e))return t.get(e);const o=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:typeof e.constructor!="function"?Object.create(null):e.prototype!==void 0&&typeof e.prototype.constructor=="function"?e:new e.constructor;if(typeof e.constructor=="function"&&typeof e.valueOf=="function"){const r=e.valueOf();if(Object(r)!==r){const a=new e.constructor(r);return t.set(e,a),a}}return t.set(e,o),e instanceof Set?e.forEach(r=>{o.add(pp(r,t))}):e instanceof Map&&e.forEach((r,a)=>{o.set(a,pp(r,t))}),Object.assign(o,...Object.keys(e).map(r=>({[r]:pp(e[r],t)})))}var Eke=Ct({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:o}){const{proxy:r}=xt(),{$q:a}=r,i=Ue(null),n=Ue(""),s=Ue("");let l=!1;const u=j(()=>an({initialValue:n.value,validate:e.validate,set:c,cancel:d,updatePosition:f},"value",()=>s.value,w=>{s.value=w}));function c(){e.validate(s.value)!==!1&&(m()===!0&&(o("save",s.value,n.value),o("update:modelValue",s.value)),p())}function d(){m()===!0&&o("cancel",s.value,n.value),p()}function f(){Ao(()=>{i.value.updatePosition()})}function m(){return Ys(s.value,n.value)===!1}function p(){l=!0,i.value.hide()}function v(){l=!1,n.value=pp(e.modelValue),s.value=pp(e.modelValue),o("beforeShow")}function g(){o("show")}function x(){l===!1&&m()===!0&&(e.autoSave===!0&&e.validate(s.value)===!0?(o("save",s.value,n.value),o("update:modelValue",s.value)):o("cancel",s.value,n.value)),o("beforeHide")}function b(){o("hide")}function _(){const w=t.default!==void 0?[].concat(t.default(u.value)):[];return e.title&&w.unshift(G("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),e.buttons===!0&&w.push(G("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[G(ae,{flat:!0,color:e.color,label:e.labelCancel||a.lang.label.cancel,onClick:d}),G(ae,{flat:!0,color:e.color,label:e.labelSet||a.lang.label.set,onClick:c})])),w}return Object.assign(r,{set:c,cancel:d,show(w){i.value!==null&&i.value.show(w)},hide(w){i.value!==null&&i.value.hide(w)},updatePosition:f}),()=>{if(e.disable!==!0)return G(aa,{ref:i,class:"q-popup-edit",cover:e.cover,onBeforeShow:v,onShow:g,onBeforeHide:x,onHide:b,onEscapeKey:d},_)}}}),Ske=Ct({name:"QPopupProxy",props:{...nR,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:t,emit:o,attrs:r}){const{proxy:a}=xt(),{$q:i}=a,n=Ue(!1),s=Ue(null),l=j(()=>parseInt(e.breakpoint,10)),{canShow:u}=GI({showing:n});function c(){return i.screen.width<l.value||i.screen.height<l.value?"dialog":"menu"}const d=Ue(c()),f=j(()=>d.value==="menu"?{maxHeight:"99vh"}:{});ct(()=>c(),v=>{n.value!==!0&&(d.value=v)});function m(v){n.value=!0,o("show",v)}function p(v){n.value=!1,d.value=c(),o("hide",v)}return Object.assign(a,{show(v){u(v)===!0&&s.value.show(v)},hide(v){s.value.hide(v)},toggle(v){s.value.toggle(v)}}),an(a,"currentComponent",()=>({type:d.value,ref:s.value})),()=>{const v={ref:s,...f.value,...r,onShow:m,onHide:p};let g;return d.value==="dialog"?g=Ht:(g=aa,Object.assign(v,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),G(g,v,t.default)}}}),Ike=Ct({name:"QRouteTab",props:{...bh,...MR},emits:FR,setup(e,{slots:t,emit:o}){const r=U_({useDisableForRouterLinkProps:!1}),{renderTab:a,$tabs:i}=NR(e,t,o,{exact:j(()=>e.exact),...r});return ct(()=>`${e.name} | ${e.exact} | ${(r.resolvedLink.value||{}).href}`,()=>{i.verifyRouteModel()}),()=>a(r.linkTag.value,r.linkAttrs.value)}});const ZP=["vertical","horizontal"],rx={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},e8={prevent:!0,mouse:!0,mouseAllDir:!0},t8=e=>e>=250?50:Math.ceil(e/5);var Ake=Ct({name:"QScrollArea",props:{...ya,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(e,{slots:t,emit:o}){const r=Ue(!1),a=Ue(!1),i=Ue(!1),n={vertical:Ue(0),horizontal:Ue(0)},s={vertical:{ref:Ue(null),position:Ue(0),size:Ue(0)},horizontal:{ref:Ue(null),position:Ue(0),size:Ue(0)}},{proxy:l}=xt(),u=xa(e,l.$q);let c=null,d;const f=Ue(null),m=j(()=>"q-scrollarea"+(u.value===!0?" q-scrollarea--dark":""));s.vertical.percentage=j(()=>{const X=s.vertical.size.value-n.vertical.value;if(X<=0)return 0;const Y=qi(s.vertical.position.value/X,0,1);return Math.round(Y*1e4)/1e4}),s.vertical.thumbHidden=j(()=>(e.visible===null?i.value:e.visible)!==!0&&r.value===!1&&a.value===!1||s.vertical.size.value<=n.vertical.value+1),s.vertical.thumbStart=j(()=>s.vertical.percentage.value*(n.vertical.value-s.vertical.thumbSize.value)),s.vertical.thumbSize=j(()=>Math.round(qi(n.vertical.value*n.vertical.value/s.vertical.size.value,t8(n.vertical.value),n.vertical.value))),s.vertical.style=j(()=>({...e.thumbStyle,...e.verticalThumbStyle,top:`${s.vertical.thumbStart.value}px`,height:`${s.vertical.thumbSize.value}px`})),s.vertical.thumbClass=j(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(s.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),s.vertical.barClass=j(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(s.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),s.horizontal.percentage=j(()=>{const X=s.horizontal.size.value-n.horizontal.value;if(X<=0)return 0;const Y=qi(Math.abs(s.horizontal.position.value)/X,0,1);return Math.round(Y*1e4)/1e4}),s.horizontal.thumbHidden=j(()=>(e.visible===null?i.value:e.visible)!==!0&&r.value===!1&&a.value===!1||s.horizontal.size.value<=n.horizontal.value+1),s.horizontal.thumbStart=j(()=>s.horizontal.percentage.value*(n.horizontal.value-s.horizontal.thumbSize.value)),s.horizontal.thumbSize=j(()=>Math.round(qi(n.horizontal.value*n.horizontal.value/s.horizontal.size.value,t8(n.horizontal.value),n.horizontal.value))),s.horizontal.style=j(()=>({...e.thumbStyle,...e.horizontalThumbStyle,[l.$q.lang.rtl===!0?"right":"left"]:`${s.horizontal.thumbStart.value}px`,width:`${s.horizontal.thumbSize.value}px`})),s.horizontal.thumbClass=j(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(s.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),s.horizontal.barClass=j(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(s.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const p=j(()=>s.vertical.thumbHidden.value===!0&&s.horizontal.thumbHidden.value===!0?e.contentStyle:e.contentActiveStyle),v=[[Qa,X=>{M(X,"vertical")},void 0,{vertical:!0,...e8}]],g=[[Qa,X=>{M(X,"horizontal")},void 0,{horizontal:!0,...e8}]];function x(){const X={};return ZP.forEach(Y=>{const de=s[Y];X[Y+"Position"]=de.position.value,X[Y+"Percentage"]=de.percentage.value,X[Y+"Size"]=de.size.value,X[Y+"ContainerSize"]=n[Y].value}),X}const b=A_(()=>{const X=x();X.ref=l,o("scroll",X)},0);function _(X,Y,de){if(ZP.includes(X)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(X==="vertical"?ED:oy)(f.value,Y,de)}function w({height:X,width:Y}){let de=!1;n.vertical.value!==X&&(n.vertical.value=X,de=!0),n.horizontal.value!==Y&&(n.horizontal.value=Y,de=!0),de===!0&&N()}function S({position:X}){let Y=!1;s.vertical.position.value!==X.top&&(s.vertical.position.value=X.top,Y=!0),s.horizontal.position.value!==X.left&&(s.horizontal.position.value=X.left,Y=!0),Y===!0&&N()}function D({height:X,width:Y}){s.horizontal.size.value!==Y&&(s.horizontal.size.value=Y,N()),s.vertical.size.value!==X&&(s.vertical.size.value=X,N())}function M(X,Y){const de=s[Y];if(X.isFirst===!0){if(de.thumbHidden.value===!0)return;d=de.position.value,a.value=!0}else if(a.value!==!0)return;X.isFinal===!0&&(a.value=!1);const ye=rx[Y],W=n[Y].value,re=(de.size.value-W)/(W-de.thumbSize.value),_e=X.distance[ye.dist],ve=d+(X.direction===ye.dir?1:-1)*_e*re;P(ve,Y)}function O(X,Y){const de=s[Y];if(de.thumbHidden.value!==!0){const ye=X[rx[Y].offset];if(ye<de.thumbStart.value||ye>de.thumbStart.value+de.thumbSize.value){const W=ye-de.thumbSize.value/2;P(W/n[Y].value*de.size.value,Y)}de.ref.value!==null&&de.ref.value.dispatchEvent(new MouseEvent(X.type,X))}}function T(X){O(X,"vertical")}function I(X){O(X,"horizontal")}function N(){r.value=!0,c!==null&&clearTimeout(c),c=setTimeout(()=>{c=null,r.value=!1},e.delay),e.onScroll!==void 0&&b()}function P(X,Y){f.value[rx[Y].scroll]=X}let F=null;function L(){F!==null&&clearTimeout(F),F=setTimeout(()=>{F=null,i.value=!0},l.$q.platform.is.ios?50:0)}function z(){F!==null&&(clearTimeout(F),F=null),i.value=!1}let H=null;return ct(()=>l.$q.lang.rtl,X=>{f.value!==null&&oy(f.value,Math.abs(s.horizontal.position.value)*(X===!0?-1:1))}),Bs(()=>{H={top:s.vertical.position.value,left:s.horizontal.position.value}}),ac(()=>{if(H===null)return;const X=f.value;X!==null&&(oy(X,H.left),ED(X,H.top))}),Vo(b.cancel),Object.assign(l,{getScrollTarget:()=>f.value,getScroll:x,getScrollPosition:()=>({top:s.vertical.position.value,left:s.horizontal.position.value}),getScrollPercentage:()=>({top:s.vertical.percentage.value,left:s.horizontal.percentage.value}),setScrollPosition:_,setScrollPercentage(X,Y,de){_(X,Y*(s[X].size.value-n[X].value)*(X==="horizontal"&&l.$q.lang.rtl===!0?-1:1),de)}}),()=>G("div",{class:m.value,onMouseenter:L,onMouseleave:z},[G("div",{ref:f,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:e.tabindex!==void 0?e.tabindex:void 0},[G("div",{class:"q-scrollarea__content absolute",style:p.value},Mr(t.default,[G(fr,{debounce:0,onResize:D})])),G(JF,{axis:"both",onScroll:S})]),G(fr,{debounce:0,onResize:w}),G("div",{class:s.vertical.barClass.value,style:[e.barStyle,e.verticalBarStyle],"aria-hidden":"true",onMousedown:T}),G("div",{class:s.horizontal.barClass.value,style:[e.barStyle,e.horizontalBarStyle],"aria-hidden":"true",onMousedown:I}),Ee(G("div",{ref:s.vertical.ref,class:s.vertical.thumbClass.value,style:s.vertical.style.value,"aria-hidden":"true"}),v),Ee(G("div",{ref:s.horizontal.ref,class:s.horizontal.thumbClass.value,style:s.horizontal.style.value,"aria-hidden":"true"}),g)])}});const Tke=[G("circle",{cx:"15",cy:"15",r:"15"},[G("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),G("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),G("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[G("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),G("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),G("circle",{cx:"105",cy:"15",r:"15"},[G("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),G("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var Dke=Ct({name:"QSpinnerDots",props:q_,setup(e){const{cSize:t,classes:o}=L_(e);return()=>G("svg",{class:o.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},Tke)}});const Oke=[G("g",[G("path",{fill:"none",stroke:"currentColor","stroke-width":"5","stroke-miterlimit":"10",d:"M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"}),G("clipPath",{id:"uil-hourglass-clip1"},[G("rect",{x:"15",y:"20",width:"70",height:"25"},[G("animate",{attributeName:"height",from:"25",to:"0",dur:"1s",repeatCount:"indefinite",values:"25;0;0",keyTimes:"0;0.5;1"}),G("animate",{attributeName:"y",from:"20",to:"45",dur:"1s",repeatCount:"indefinite",values:"20;45;45",keyTimes:"0;0.5;1"})])]),G("clipPath",{id:"uil-hourglass-clip2"},[G("rect",{x:"15",y:"55",width:"70",height:"25"},[G("animate",{attributeName:"height",from:"0",to:"25",dur:"1s",repeatCount:"indefinite",values:"0;25;25",keyTimes:"0;0.5;1"}),G("animate",{attributeName:"y",from:"80",to:"55",dur:"1s",repeatCount:"indefinite",values:"80;55;55",keyTimes:"0;0.5;1"})])]),G("path",{d:"M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z","clip-path":"url(#uil-hourglass-clip1)",fill:"currentColor"}),G("path",{d:"M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z","clip-path":"url(#uil-hourglass-clip2)",fill:"currentColor"}),G("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"180 50 50",repeatCount:"indefinite",dur:"1s",values:"0 50 50;0 50 50;180 50 50",keyTimes:"0;0.7;1"})])];var Pke=Ct({name:"QSpinnerHourglass",props:q_,setup(e){const{cSize:t,classes:o}=L_(e);return()=>G("svg",{class:o.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},Oke)}}),Fke=Ct({name:"QSplitter",props:{...ya,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:e=>["%","px"].includes(e)},limits:{type:Array,validator:e=>e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"?!1:e[0]>=0&&e[0]<=e[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(e,{slots:t,emit:o}){const{proxy:{$q:r}}=xt(),a=xa(e,r),i=Ue(null),n={before:Ue(null),after:Ue(null)},s=j(()=>`q-splitter no-wrap ${e.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${e.disable===!0?"disabled":"workable"}`+(a.value===!0?" q-splitter--dark":"")),l=j(()=>e.horizontal===!0?"height":"width"),u=j(()=>e.reverse!==!0?"before":"after"),c=j(()=>e.limits!==void 0?e.limits:e.unit==="%"?[10,90]:[50,1/0]);function d(S){return(e.unit==="%"?S:Math.round(S))+e.unit}const f=j(()=>({[u.value]:{[l.value]:d(e.modelValue)}}));let m,p,v,g,x;function b(S){if(S.isFirst===!0){const M=i.value.getBoundingClientRect()[l.value];m=e.horizontal===!0?"up":"left",p=e.unit==="%"?100:M,v=Math.min(p,c.value[1],Math.max(c.value[0],e.modelValue)),g=(e.reverse!==!0?1:-1)*(e.horizontal===!0?1:r.lang.rtl===!0?-1:1)*(e.unit==="%"?M===0?0:100/M:1),i.value.classList.add("q-splitter--active");return}if(S.isFinal===!0){x!==e.modelValue&&o("update:modelValue",x),i.value.classList.remove("q-splitter--active");return}const D=v+g*(S.direction===m?-1:1)*S.distance[e.horizontal===!0?"y":"x"];x=Math.min(p,c.value[1],Math.max(c.value[0],D)),n[u.value].value.style[l.value]=d(x),e.emitImmediately===!0&&e.modelValue!==x&&o("update:modelValue",x)}const _=j(()=>[[Qa,b,void 0,{[e.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function w(S,D){S<D[0]?o("update:modelValue",D[0]):S>D[1]&&o("update:modelValue",D[1])}return ct(()=>e.modelValue,S=>{w(S,c.value)}),ct(()=>e.limits,()=>{Ao(()=>{w(e.modelValue,c.value)})}),()=>{const S=[G("div",{ref:n.before,class:["q-splitter__panel q-splitter__before"+(e.reverse===!0?" col":""),e.beforeClass],style:f.value.before},uo(t.before)),G("div",{class:["q-splitter__separator",e.separatorClass],style:e.separatorStyle,"aria-disabled":e.disable===!0?"true":void 0},[Fd("div",{class:"q-splitter__separator-area absolute-full"},uo(t.separator),"sep",e.disable!==!0,()=>_.value)]),G("div",{ref:n.after,class:["q-splitter__panel q-splitter__after"+(e.reverse===!0?"":" col"),e.afterClass],style:f.value.after},uo(t.after))];return G("div",{class:s.value,ref:i},Mr(t.default,S))}}});function Mke(e,t){if(e.hour!==null){if(e.minute===null)return"minute";if(t===!0&&e.second===null)return"second"}return"hour"}function Nke(){const e=new Date;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}}var kke=Ct({name:"QTime",props:{...ya,...Su,...n_,modelValue:{required:!0,validator:e=>typeof e=="string"||e===null},mask:{...n_.mask,default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:B7,setup(e,{slots:t,emit:o}){const r=xt(),{$q:a}=r.proxy,i=xa(e,a),{tabindex:n,headerClass:s,getLocale:l,getCurrentDate:u}=q7(e,a),c=YI(e),d=Ym(c);let f,m;const p=Ue(null),v=j(()=>ke()),g=j(()=>l()),x=j(()=>Ie()),b=Gf(e.modelValue,v.value,g.value,e.calendar,x.value),_=Ue(Mke(b)),w=Ue(b),S=Ue(b.hour===null||b.hour<12),D=j(()=>`q-time q-time--${e.landscape===!0?"landscape":"portrait"}`+(i.value===!0?" q-time--dark q-dark":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-time--readonly":"")+(e.bordered===!0?" q-time--bordered":"")+(e.square===!0?" q-time--square no-border-radius":"")+(e.flat===!0?" q-time--flat no-shadow":"")),M=j(()=>{const He=w.value;return{hour:He.hour===null?"--":O.value===!0?Qo(He.hour):String(S.value===!0?He.hour===0?12:He.hour:He.hour>12?He.hour-12:He.hour),minute:He.minute===null?"--":Qo(He.minute),second:He.second===null?"--":Qo(He.second)}}),O=j(()=>e.format24h!==null?e.format24h:a.lang.date.format24h),T=j(()=>{const He=_.value==="hour",tt=He===!0?12:60,$e=w.value[_.value];let Rt=`rotate(${Math.round($e*(360/tt))-180}deg) translateX(-50%)`;return He===!0&&O.value===!0&&w.value.hour>=12&&(Rt+=" scale(.7)"),{transform:Rt}}),I=j(()=>w.value.hour!==null),N=j(()=>I.value===!0&&w.value.minute!==null),P=j(()=>e.hourOptions!==void 0?He=>e.hourOptions.includes(He):e.options!==void 0?He=>e.options(He,null,null):null),F=j(()=>e.minuteOptions!==void 0?He=>e.minuteOptions.includes(He):e.options!==void 0?He=>e.options(w.value.hour,He,null):null),L=j(()=>e.secondOptions!==void 0?He=>e.secondOptions.includes(He):e.options!==void 0?He=>e.options(w.value.hour,w.value.minute,He):null),z=j(()=>{if(P.value===null)return null;const He=re(0,11,P.value),tt=re(12,11,P.value);return{am:He,pm:tt,values:He.values.concat(tt.values)}}),H=j(()=>F.value!==null?re(0,59,F.value):null),X=j(()=>L.value!==null?re(0,59,L.value):null),Y=j(()=>{switch(_.value){case"hour":return z.value;case"minute":return H.value;case"second":return X.value}}),de=j(()=>{let He,tt,$e=0,dt=1;const Rt=Y.value!==null?Y.value.values:void 0;_.value==="hour"?O.value===!0?(He=0,tt=23):(He=0,tt=11,S.value===!1&&($e=12)):(He=0,tt=55,dt=5);const Ut=[];for(let gt=He,po=He;gt<=tt;gt+=dt,po++){const Ea=gt+$e,pr=Rt!==void 0&&Rt.includes(Ea)===!1,zi=_.value==="hour"&&gt===0?O.value===!0?"00":"12":gt;Ut.push({val:Ea,index:po,disable:pr,label:zi})}return Ut}),ye=j(()=>[[Qa,Te,void 0,{stop:!0,prevent:!0,mouse:!0}]]);ct(()=>e.modelValue,He=>{const tt=Gf(He,v.value,g.value,e.calendar,x.value);(tt.dateHash!==w.value.dateHash||tt.timeHash!==w.value.timeHash)&&(w.value=tt,tt.hour===null?_.value="hour":S.value=tt.hour<12)}),ct([v,g],()=>{Ao(()=>{Pt()})});function W(){const He={...u(),...Nke()};Pt(He),Object.assign(w.value,He),_.value="hour"}function re(He,tt,$e){const dt=Array.apply(null,{length:tt+1}).map((Rt,Ut)=>{const gt=Ut+He;return{index:gt,val:$e(gt)===!0}}).filter(Rt=>Rt.val===!0).map(Rt=>Rt.index);return{min:dt[0],max:dt[dt.length-1],values:dt,threshold:tt+1}}function _e(He,tt,$e){const dt=Math.abs(He-tt);return Math.min(dt,$e-dt)}function ve(He,{min:tt,max:$e,values:dt,threshold:Rt}){if(He===tt)return tt;if(He<tt||He>$e)return _e(He,tt,Rt)<=_e(He,$e,Rt)?tt:$e;const Ut=dt.findIndex(Ea=>He<=Ea),gt=dt[Ut-1],po=dt[Ut];return He-gt<=po-He?gt:po}function ke(){return e.calendar!=="persian"&&e.mask!==null?e.mask:`HH:mm${e.withSeconds===!0?":ss":""}`}function Ie(){if(typeof e.defaultDate!="string"){const He=u(!0);return He.dateHash=Pl(He),He}return Gf(e.defaultDate,"YYYY/MM/DD",void 0,e.calendar)}function he(){return _d(r)===!0||Y.value!==null&&(Y.value.values.length===0||_.value==="hour"&&O.value!==!0&&z.value[S.value===!0?"am":"pm"].values.length===0)}function De(){const He=p.value,{top:tt,left:$e,width:dt}=He.getBoundingClientRect(),Rt=dt/2;return{top:tt+Rt,left:$e+Rt,dist:Rt*.7}}function Te(He){if(he()!==!0){if(He.isFirst===!0){f=De(),m=q(He.evt,f);return}m=q(He.evt,f,m),He.isFinal===!0&&(f=!1,m=null,J())}}function J(){_.value==="hour"?_.value="minute":e.withSeconds&&_.value==="minute"&&(_.value="second")}function q(He,tt,$e){const dt=ls(He),Rt=Math.abs(dt.top-tt.top),Ut=Math.sqrt(Math.pow(Math.abs(dt.top-tt.top),2)+Math.pow(Math.abs(dt.left-tt.left),2));let gt,po=Math.asin(Rt/Ut)*(180/Math.PI);if(dt.top<tt.top?po=tt.left<dt.left?90-po:270+po:po=tt.left<dt.left?po+90:270-po,_.value==="hour"){if(gt=po/30,z.value!==null){const Ea=O.value!==!0?S.value===!0:z.value.am.values.length!==0&&z.value.pm.values.length!==0?Ut>=tt.dist:z.value.am.values.length!==0;gt=ve(gt+(Ea===!0?0:12),z.value[Ea===!0?"am":"pm"])}else gt=Math.round(gt),O.value===!0?Ut<tt.dist?gt<12&&(gt+=12):gt===12&&(gt=0):S.value===!0&&gt===12?gt=0:S.value===!1&&gt!==12&&(gt+=12);O.value===!0&&(S.value=gt<12)}else gt=Math.round(po/6)%60,_.value==="minute"&&H.value!==null?gt=ve(gt,H.value):_.value==="second"&&X.value!==null&&(gt=ve(gt,X.value));return $e!==gt&&we[_.value](gt),gt}const ne={hour(){_.value="hour"},minute(){_.value="minute"},second(){_.value="second"}};function U(He){He.keyCode===13&&Ne()}function Z(He){He.keyCode===13&&Ge()}function Ce(He){he()!==!0&&(a.platform.is.desktop!==!0&&q(He,De()),J())}function Q(He){he()!==!0&&q(He,De())}function V(He){if(He.keyCode===13)_.value="hour";else if([37,39].includes(He.keyCode)){const tt=He.keyCode===37?-1:1;if(z.value!==null){const $e=O.value===!0?z.value.values:z.value[S.value===!0?"am":"pm"].values;if($e.length===0)return;if(w.value.hour===null)ce($e[0]);else{const dt=($e.length+$e.indexOf(w.value.hour)+tt)%$e.length;ce($e[dt])}}else{const $e=O.value===!0?24:12,dt=O.value!==!0&&S.value===!1?12:0,Rt=w.value.hour===null?-tt:w.value.hour;ce(dt+(24+Rt+tt)%$e)}}}function R(He){if(He.keyCode===13)_.value="minute";else if([37,39].includes(He.keyCode)){const tt=He.keyCode===37?-1:1;if(H.value!==null){const $e=H.value.values;if($e.length===0)return;if(w.value.minute===null)se($e[0]);else{const dt=($e.length+$e.indexOf(w.value.minute)+tt)%$e.length;se($e[dt])}}else{const $e=w.value.minute===null?-tt:w.value.minute;se((60+$e+tt)%60)}}}function ee(He){if(He.keyCode===13)_.value="second";else if([37,39].includes(He.keyCode)){const tt=He.keyCode===37?-1:1;if(X.value!==null){const $e=X.value.values;if($e.length===0)return;if(w.value.seconds===null)pe($e[0]);else{const dt=($e.length+$e.indexOf(w.value.second)+tt)%$e.length;pe($e[dt])}}else{const $e=w.value.second===null?-tt:w.value.second;pe((60+$e+tt)%60)}}}function ce(He){w.value.hour!==He&&(w.value.hour=He,ot())}function se(He){w.value.minute!==He&&(w.value.minute=He,ot())}function pe(He){w.value.second!==He&&(w.value.second=He,ot())}const we={hour:ce,minute:se,second:pe};function Ne(){S.value===!1&&(S.value=!0,w.value.hour!==null&&(w.value.hour-=12,ot()))}function Ge(){S.value===!0&&(S.value=!1,w.value.hour!==null&&(w.value.hour+=12,ot()))}function Ze(He){const tt=e.modelValue;_.value!==He&&tt!==void 0&&tt!==null&&tt!==""&&typeof tt!="string"&&(_.value=He)}function ot(){if(P.value!==null&&P.value(w.value.hour)!==!0){w.value=Gf(),Ze("hour");return}if(F.value!==null&&F.value(w.value.minute)!==!0){w.value.minute=null,w.value.second=null,Ze("minute");return}if(e.withSeconds===!0&&L.value!==null&&L.value(w.value.second)!==!0){w.value.second=null,Ze("second");return}w.value.hour===null||w.value.minute===null||e.withSeconds===!0&&w.value.second===null||Pt()}function Pt(He){const tt=Object.assign({...w.value},He),$e=e.calendar==="persian"?Qo(tt.hour)+":"+Qo(tt.minute)+(e.withSeconds===!0?":"+Qo(tt.second):""):DE(new Date(tt.year,tt.month===null?null:tt.month-1,tt.day,tt.hour,tt.minute,tt.second,tt.millisecond),v.value,g.value,tt.year,tt.timezoneOffset);tt.changed=$e!==e.modelValue,o("update:modelValue",$e,tt)}function $t(){const He=[G("div",{class:"q-time__link "+(_.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:n.value,onClick:ne.hour,onKeyup:V},M.value.hour),G("div",":"),G("div",I.value===!0?{class:"q-time__link "+(_.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:n.value,onKeyup:R,onClick:ne.minute}:{class:"q-time__link"},M.value.minute)];e.withSeconds===!0&&He.push(G("div",":"),G("div",N.value===!0?{class:"q-time__link "+(_.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:n.value,onKeyup:ee,onClick:ne.second}:{class:"q-time__link"},M.value.second));const tt=[G("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},He)];return O.value===!1&&tt.push(G("div",{class:"q-time__header-ampm column items-between no-wrap"},[G("div",{class:"q-time__link "+(S.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:n.value,onClick:Ne,onKeyup:U},"AM"),G("div",{class:"q-time__link "+(S.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:n.value,onClick:Ge,onKeyup:Z},"PM")])),G("div",{class:"q-time__header flex flex-center no-wrap "+s.value},tt)}function fo(){const He=w.value[_.value];return G("div",{class:"q-time__content col relative-position"},[G(Or,{name:"q-transition--scale"},()=>G("div",{key:"clock"+_.value,class:"q-time__container-parent absolute-full"},[G("div",{ref:p,class:"q-time__container-child fit overflow-hidden"},[Ee(G("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:Ce,onMousedown:Q},[G("div",{class:"q-time__clock-circle fit"},[G("div",{class:"q-time__clock-pointer"+(w.value[_.value]===null?" hidden":e.color!==void 0?` text-${e.color}`:""),style:T.value}),de.value.map(tt=>G("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${tt.index}`+(tt.val===He?" q-time__clock-position--active "+s.value:tt.disable===!0?" q-time__clock-position--disable":"")},[G("span",tt.label)]))])]),ye.value)])])),e.nowBtn===!0?G(ae,{class:"q-time__now-button absolute",icon:a.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:e.color,textColor:e.textColor,tabindex:n.value,onClick:W}):null])}return r.proxy.setNow=W,()=>{const He=[fo()],tt=uo(t.default);return tt!==void 0&&He.push(G("div",{class:"q-time__actions"},tt)),e.name!==void 0&&e.disable!==!0&&d(He,"push"),G("div",{class:D.value,tabindex:-1},[$t(),G("div",{class:"q-time__main col overflow-auto"},He)])}}}),Rke=Ct({name:"BottomSheetComponent",props:{...ya,title:String,message:String,actions:Array,grid:Boolean,cardClass:[String,Array,Object],cardStyle:[String,Array,Object]},emits:["ok","hide"],setup(e,{emit:t}){const{proxy:o}=xt(),r=xa(e,o.$q),a=Ue(null);function i(){a.value.show()}function n(){a.value.hide()}function s(m){t("ok",m),n()}function l(){t("hide")}function u(){return e.actions.map(m=>{const p=m.avatar||m.img;return m.label===void 0?G(No,{class:"col-all",dark:r.value}):G("div",{class:["q-bottom-sheet__item q-hoverable q-focusable cursor-pointer relative-position",m.class],style:m.style,tabindex:0,role:"listitem",onClick(){s(m)},onKeyup(v){v.keyCode===13&&s(m)}},[G("div",{class:"q-focus-helper"}),m.icon?G(Pe,{name:m.icon,color:m.color}):p?G("img",{class:m.avatar?"q-bottom-sheet__avatar":"",src:p}):G("div",{class:"q-bottom-sheet__empty-icon"}),G("div",m.label)])})}function c(){return e.actions.map(m=>{const p=m.avatar||m.img;return m.label===void 0?G(No,{spaced:!0,dark:r.value}):G(qe,{class:["q-bottom-sheet__item",m.classes],style:m.style,tabindex:0,clickable:!0,dark:r.value,onClick(){s(m)}},()=>[G(fe,{avatar:!0},()=>m.icon?G(Pe,{name:m.icon,color:m.color}):p?G("img",{class:m.avatar?"q-bottom-sheet__avatar":"",src:p}):null),G(fe,()=>m.label)])})}function d(){const m=[];return e.title&&m.push(G(Ra,{class:"q-dialog__title"},()=>e.title)),e.message&&m.push(G(Ra,{class:"q-dialog__message"},()=>e.message)),m.push(e.grid===!0?G("div",{class:"row items-stretch justify-start",role:"list"},u()):G("div",{role:"list"},c())),m}function f(){return[G(Mt,{class:[`q-bottom-sheet q-bottom-sheet--${e.grid===!0?"grid":"list"}`+(r.value===!0?" q-bottom-sheet--dark q-dark":""),e.cardClass],style:e.cardStyle},d)]}return Object.assign(o,{show:i,hide:n}),()=>G(Ht,{ref:a,position:"bottom",onHide:l},f)}});function L7(e,t){for(const o in t)o!=="spinner"&&Object(t[o])===t[o]?(e[o]=Object(e[o])!==e[o]?{}:{...e[o]},L7(e[o],t[o])):e[o]=t[o]}function $7(e,t,o){return r=>{let a,i;const n=t===!0&&r.component!==void 0;if(n===!0){const{component:b,componentProps:_}=r;a=typeof b=="string"?o.component(b):b,i=_||{}}else{const{class:b,style:_,...w}=r;a=e,i=w,b!==void 0&&(w.cardClass=b),_!==void 0&&(w.cardStyle=_)}let s,l=!1;const u=Ue(null),c=$_(!1,"dialog"),d=b=>{if(u.value!==null&&u.value[b]!==void 0){u.value[b]();return}const _=s.$.subTree;if(_&&_.component){if(_.component.proxy&&_.component.proxy[b]){_.component.proxy[b]();return}if(_.component.subTree&&_.component.subTree.component&&_.component.subTree.component.proxy&&_.component.subTree.component.proxy[b]){_.component.subTree.component.proxy[b]();return}}console.error("[Quasar] Incorrectly defined Dialog component")},f=[],m=[],p={onOk(b){return f.push(b),p},onCancel(b){return m.push(b),p},onDismiss(b){return f.push(b),m.push(b),p},hide(){return d("hide"),p},update(b){if(s!==null){if(n===!0)Object.assign(i,b);else{const{class:_,style:w,...S}=b;_!==void 0&&(S.cardClass=_),w!==void 0&&(S.cardStyle=w),L7(i,S)}s.$forceUpdate()}return p}},v=b=>{l=!0,f.forEach(_=>{_(b)})},g=()=>{x.unmount(c),ME(c),x=null,s=null,l!==!0&&m.forEach(b=>{b()})};let x=Zw({name:"QGlobalDialog",setup:()=>()=>G(a,{...i,ref:u,onOk:v,onHide:g,onVnodeMounted(...b){typeof i.onVnodeMounted=="function"&&i.onVnodeMounted(...b),Ao(()=>d("show"))}})},o);return s=x.mount(c),p}}var Vke={install({$q:e,parentApp:t}){e.bottomSheet=this.create=$7(Rke,!1,t)}};const U7={radio:Ri,checkbox:hm,toggle:ZI},Bke=Object.keys(U7);var qke=Ct({name:"QOptionGroup",props:{...ya,modelValue:{required:!0},options:{type:Array,validator:e=>e.every(t=>"value"in t&&"label"in t)},name:String,type:{type:String,default:"radio",validator:e=>Bke.includes(e)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(e,{emit:t,slots:o}){const{proxy:{$q:r}}=xt(),a=Array.isArray(e.modelValue);e.type==="radio"?a===!0&&console.error("q-option-group: model should not be array"):a===!1&&console.error("q-option-group: model should be array in your case");const i=xa(e,r),n=j(()=>U7[e.type]),s=j(()=>"q-option-group q-gutter-x-sm"+(e.inline===!0?" q-option-group--inline":"")),l=j(()=>{const c={role:"group"};return e.type==="radio"&&(c.role="radiogroup",e.disable===!0&&(c["aria-disabled"]="true")),c});function u(c){t("update:modelValue",c)}return()=>G("div",{class:s.value,...l.value},e.options.map((c,d)=>{const f=o["label-"+d]!==void 0?()=>o["label-"+d](c):o.label!==void 0?()=>o.label(c):void 0;return G("div",[G(n.value,{modelValue:e.modelValue,val:c.value,name:c.name===void 0?e.name:c.name,disable:e.disable||c.disable,label:f===void 0?c.label:null,leftLabel:c.leftLabel===void 0?e.leftLabel:c.leftLabel,color:c.color===void 0?e.color:c.color,checkedIcon:c.checkedIcon,uncheckedIcon:c.uncheckedIcon,dark:c.dark||i.value,size:c.size===void 0?e.size:c.size,dense:e.dense,keepColor:c.keepColor===void 0?e.keepColor:c.keepColor,"onUpdate:modelValue":u},f)])}))}}),Lke=Ct({name:"DialogPluginComponent",props:{...ya,title:String,message:String,prompt:Object,options:Object,progress:[Boolean,Object],html:Boolean,ok:{type:[String,Object,Boolean],default:!0},cancel:[String,Object,Boolean],focus:{type:String,default:"ok",validator:e=>["ok","cancel","none"].includes(e)},stackButtons:Boolean,color:String,cardClass:[String,Array,Object],cardStyle:[String,Array,Object]},emits:["ok","hide"],setup(e,{emit:t}){const{proxy:o}=xt(),{$q:r}=o,a=xa(e,r),i=Ue(null),n=Ue(e.prompt!==void 0?e.prompt.model:e.options!==void 0?e.options.model:void 0),s=j(()=>"q-dialog-plugin"+(a.value===!0?" q-dialog-plugin--dark q-dark":"")+(e.progress!==!1?" q-dialog-plugin--progress":"")),l=j(()=>e.color||(a.value===!0?"amber":"primary")),u=j(()=>e.progress===!1?null:ei(e.progress)===!0?{component:e.progress.spinner||Ns,props:{color:e.progress.color||l.value}}:{component:Ns,props:{color:l.value}}),c=j(()=>e.prompt!==void 0||e.options!==void 0),d=j(()=>{if(c.value!==!0)return{};const{model:L,isValid:z,items:H,...X}=e.prompt!==void 0?e.prompt:e.options;return X}),f=j(()=>ei(e.ok)===!0||e.ok===!0?r.lang.label.ok:e.ok),m=j(()=>ei(e.cancel)===!0||e.cancel===!0?r.lang.label.cancel:e.cancel),p=j(()=>e.prompt!==void 0?e.prompt.isValid!==void 0&&e.prompt.isValid(n.value)!==!0:e.options!==void 0?e.options.isValid!==void 0&&e.options.isValid(n.value)!==!0:!1),v=j(()=>({color:l.value,label:f.value,ripple:!1,disable:p.value,...ei(e.ok)===!0?e.ok:{flat:!0},"data-autofocus":e.focus==="ok"&&c.value!==!0||void 0,onClick:_})),g=j(()=>({color:l.value,label:m.value,ripple:!1,...ei(e.cancel)===!0?e.cancel:{flat:!0},"data-autofocus":e.focus==="cancel"&&c.value!==!0||void 0,onClick:w}));ct(()=>e.prompt&&e.prompt.model,D),ct(()=>e.options&&e.options.model,D);function x(){i.value.show()}function b(){i.value.hide()}function _(){t("ok",go(n.value)),b()}function w(){b()}function S(){t("hide")}function D(L){n.value=L}function M(L){p.value!==!0&&e.prompt.type!=="textarea"&&cs(L,13)===!0&&_()}function O(L,z){return e.html===!0?G(Ra,{class:L,innerHTML:z}):G(Ra,{class:L},()=>z)}function T(){return[G(ma,{color:l.value,dense:!0,autofocus:!0,dark:a.value,...d.value,modelValue:n.value,"onUpdate:modelValue":D,onKeyup:M})]}function I(){return[G(qke,{color:l.value,options:e.options.items,dark:a.value,...d.value,modelValue:n.value,"onUpdate:modelValue":D})]}function N(){const L=[];return e.cancel&&L.push(G(ae,g.value)),e.ok&&L.push(G(ae,v.value)),G(Sb,{class:e.stackButtons===!0?"items-end":"",vertical:e.stackButtons,align:"right"},()=>L)}function P(){const L=[];return e.title&&L.push(O("q-dialog__title",e.title)),e.progress!==!1&&L.push(G(Ra,{class:"q-dialog__progress"},()=>G(u.value.component,u.value.props))),e.message&&L.push(O("q-dialog__message",e.message)),e.prompt!==void 0?L.push(G(Ra,{class:"scroll q-dialog-plugin__form"},T)):e.options!==void 0&&L.push(G(No,{dark:a.value}),G(Ra,{class:"scroll q-dialog-plugin__form"},I),G(No,{dark:a.value})),(e.ok||e.cancel)&&L.push(N()),L}function F(){return[G(Mt,{class:[s.value,e.cardClass],style:e.cardStyle,dark:a.value},P)]}return Object.assign(o,{show:x,hide:b}),()=>G(Ht,{ref:i,onHide:S},F)}}),$ke={install({$q:e,parentApp:t}){e.dialog=this.create=$7(Lke,!0,t)}},Uke={config:{notify:{position:"top"}},lang:lke,components:{QBar:cke,QBreadcrumbs:dke,QBreadcrumbsEl:fke,QBtn:ae,QBtnDropdown:hke,QBtnGroup:cA,QBtnToggle:vke,QCard:Mt,QCheckbox:hm,QCardSection:Ra,QCarousel:bke,QCarouselSlide:yke,QDate:wke,QDialog:Ht,QExpansionItem:Yr,QHeader:jo,QItem:qe,QItemLabel:Re,QItemSection:fe,QLayout:To,QLinearProgress:jR,QList:At,QMenu:aa,QPage:dn,QPageContainer:Jo,QDrawer:TR,QFooter:Ui,QPopupEdit:Eke,QPopupProxy:Ske,QRouteTab:Ike,QScrollArea:Ake,QSelect:ii,QSpinnerDots:Dke,QSpinnerHourglass:Pke,QSplitter:Fke,QTab:Jc,QTabPanel:fd,QTabPanels:oA,QTable:sw,QTabs:Ab,QTime:kke,QToolbar:Je,QToolbarTitle:lt,QResizeObserver:fr,QIcon:Pe},directives:{ClosePopup:st},plugins:{BottomSheet:Vke,Dialog:$ke,Loading:En,Notify:TM,Screen:$F}};const zke="/";async function Hke({app:e,router:t},o){let r=!1;const a=s=>{try{return t.resolve(s).href}catch{}return Object(s)===s?null:s},i=s=>{if(r=!0,typeof s=="string"&&/^https?:\/\//.test(s)){window.location.href=s;return}const l=a(s);l!==null&&(window.location.href=l)},n=window.location.href.replace(window.location.origin,"");for(let s=0;r===!1&&s<o.length;s++)try{await o[s]({app:e,router:t,ssrContext:null,redirect:i,urlPath:n,publicPath:zke})}catch(l){if(l&&l.url){i(l.url);return}console.error("[Quasar] boot error:",l);return}r!==!0&&(e.use(t),e.mount("#q-app"))}ske(Pd,Uke).then(e=>{const[t,o]=Promise.allSettled!==void 0?["allSettled",r=>r.map(a=>{if(a.status==="rejected"){console.error("[Quasar] boot error:",a.reason);return}return a.value.default})]:["all",r=>r.map(a=>a.default)];return Promise[t]([Ke(()=>import("./g.8cfa27bc.js"),[]),Ke(()=>import("./router.70f1cc25.js"),[]),Ke(()=>import("./axios.612c54ad.js"),[]),Ke(()=>import("./components-global.35b2e752.js"),["assets/components-global.35b2e752.js","assets/components-global.614dcce9.css","assets/MultiSelectTree.9125367a.js","assets/Campo.1e3dd14b.js","assets/SeletorCfop.95e0ec39.js","assets/g-label.38ef6659.js","assets/g-label.52d539d9.css"]),Ke(()=>import("./db.0eb54755.js"),[]),Ke(()=>import("./filtros.3ff53137.js"),[]),Ke(()=>import("./imprimir.0f57eaac.js"),[]),Ke(()=>import("./lodash.cef3a2bf.js"),[]),Ke(()=>import("./mixin-global.a2c40edf.js"),[]),Ke(()=>import("./quasar-extends.74f7a462.js"),["assets/quasar-extends.74f7a462.js","assets/quasar-extends.3b04a69d.css"]),Ke(()=>import("./utils.c21b127a.js"),[]),Ke(()=>import("./api.1c29632d.js"),[]),Ke(()=>import("./tryLoading.ad86421d.js"),[]),Ke(()=>import("./router-redirect.39cb1399.js"),[])]).then(r=>{const a=o(r).filter(i=>typeof i=="function");Hke(e,a)})});export{cMe as $,Mt as A,Yr as B,A as C,Ht as D,cl as E,Qe as F,jo as G,Ee as H,Jo as I,dn as J,Ui as K,_u as L,To as M,st as N,Ra as O,At as P,ae as Q,Sb as R,qe as S,fe as T,Re as U,EG as V,ZI as W,VE as X,bR as Y,Lh as Z,St as _,Rd as a,Jc as a$,X6e as a0,hPe as a1,o8e as a2,_Pe as a3,Fs as a4,uo as a5,G as a6,en as a7,T_ as a8,Vi as a9,NQ as aA,Xke as aB,dC as aC,rs as aD,zd as aE,Nm as aF,Or as aG,Yke as aH,zr as aI,kd as aJ,Io as aK,nw as aL,uye as aM,hm as aN,Ri as aO,Ns as aP,vg as aQ,Ep as aR,bke as aS,yke as aT,Yp as aU,q_ as aV,L_ as aW,Aa as aX,Qc as aY,Dke as aZ,Ab as a_,hke as aa,Ct as ab,ya as ac,GR as ad,WR as ae,xa as af,QR as ag,$2e as ah,Ue as ai,j as aj,ct as ak,Va as al,Vo as am,xt as an,zo as ao,Ao as ap,qh as aq,Xo as ar,ii as as,rt as at,ah as au,u_ as av,et as aw,Se as ax,Gt as ay,tZ as az,Zke as b,IQ as b$,TR as b0,cA as b1,z6e as b2,HE as b3,Eo as b4,oA as b5,fd as b6,sw as b7,sh as b8,tMe as b9,OM as bA,pM as bB,PM as bC,mu as bD,pu as bE,sm as bF,lM as bG,VQ as bH,cye as bI,fr as bJ,Tt as bK,Qa as bL,Rf as bM,Fke as bN,SP as bO,Zm as bP,Do as bQ,BC as bR,nve as bS,Et as bT,oN as bU,ud as bV,Cm as bW,E6 as bX,Nl as bY,$f as bZ,F5 as b_,z5e as ba,J5e as bb,Wt as bc,mM as bd,gr as be,aa as bf,Ake as bg,Wke as bh,Zd as bi,Kt as bj,sa as bk,Tn as bl,Vd as bm,lr as bn,dke as bo,fke as bp,kCe as bq,jr as br,Zn as bs,sC as bt,En as bu,FJ as bv,zs as bw,NJ as bx,Na as by,fC as bz,vt as c,Axe as c$,TQ as c0,Zx as c1,cre as c2,PQ as c3,kJ as c4,RJ as c5,VJ as c6,Pr as c7,Fp as c8,Vr as c9,xre as cA,Cre as cB,ire as cC,YZ as cD,rre as cE,Ke as cF,$R as cG,Ike as cH,OOe as cI,wv as cJ,Pke as cK,DR as cL,POe as cM,OR as cN,PR as cO,UR as cP,e7 as cQ,m3 as cR,sp as cS,U6e as cT,An as cU,Su as cV,Dxe as cW,Gy as cX,vu as cY,Ib as cZ,Jke as c_,BJ as ca,uC as cb,NE as cc,cn as cd,Ja as ce,eZ as cf,S6 as cg,I6 as ch,oZ as ci,cZ as cj,mZ as ck,bre as cl,pZ as cm,fre as cn,_Z as co,DM as cp,Mp as cq,zZ as cr,lo as cs,HZ as ct,jZ as cu,ut as cv,Bp as cw,io as cx,Bt as cy,jE as cz,oe as d,Kbe as d$,IZ as d0,Ym as d1,Ixe as d2,Fd as d3,kR as d4,_R as d5,TP as d6,Ec as d7,jR as d8,Wd as d9,LR as dA,HOe as dB,kr as dC,jke as dD,Mr as dE,Rh as dF,Vh as dG,HI as dH,Bh as dI,KR as dJ,w8e as dK,G2e as dL,QI as dM,XI as dN,dR as dO,K2e as dP,Xp as dQ,KI as dR,VCe as dS,MCe as dT,d9 as dU,Hd as dV,Ts as dW,_M as dX,wke as dY,uh as dZ,WZ as d_,Qd as da,qi as db,e5 as dc,_d as dd,Qke as de,rl as df,Gke as dg,br as dh,an as di,SG as dj,ei as dk,Ho as dl,JR as dm,YR as dn,Eke as dp,Qhe as dq,vke as dr,E9 as ds,j9 as dt,Mm as du,Cp as dv,xM as dw,UCe as dx,tA as dy,nxe as dz,ie as e,GOe as e0,Jm as e1,qke as e2,kke as e3,Wwe as e4,mi as e5,HR as e6,Oc as e7,uxe as e8,pxe as e9,aA as ea,Pd as eb,rR as ec,aw as ed,Kke as ee,JF as ef,h as f,RQ as g,Je as h,lt as i,Pe as j,K as k,No as l,Ft as m,Ske as n,B as o,be as p,Li as q,Ve as r,ih as s,le as t,rh as u,ma as v,C as w,qt as x,fye as y,ou as z};
