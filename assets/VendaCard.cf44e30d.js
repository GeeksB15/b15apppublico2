import{_ as ke,b9 as _e,r as J,o as r,p as H,f as o,bI as Ce,F as A,d as l,w as e,k as i,t as m,e as f,l as Z,x as G,j as V,Q as j,be as te,P as de,S as I,T as v,H as K,N as U,C as R,A as he,U as D,m as X,b3 as be}from"./index.48857978.js";import{e as xe}from"./emitirNFe.35117289.js";import{D as we}from"./DocumentosFiscais.0fafce55.js";import{M as qe}from"./ModalHistoricoStatus.81962db6.js";const Ve={components:{DocumentosFiscais:we,ModalHistoricoStatus:qe,VendaModal:_e},computed:{config(){return $db.configuracoes.valores},podeMigrarFatura(){return!~["Aguardando Estoque","Aguardando Financeiro","Aguardando Aprova\xE7\xE3o","Aguardando Pagamento","Cancelado","N\xE3o Aprovado","Or\xE7amento","Faturado"].indexOf(this.dados.venda.status)}},data(){return{dbUsuario:$db.usuario,width:0,dados:{venda:{}},fatura:{},status:{"Aguardando Confer\xEAncia":"orange","Aguardando Embalagem":"orange","Aguardando Entrega":"orange","Aguardando Libera\xE7\xE3o":"orange","Aguardando Separa\xE7\xE3o":"orange","Aguardando Estoque":"orange","Aguardando Financeiro":"orange","Aguardando Aprova\xE7\xE3o":"orange","Aguardando Pagamento":"tertiary","Aguardando Faturamento":"tertiary","Em Confer\xEAncia":"orange","Em Separa\xE7\xE3o":"orange",Faturado:"positive",Entregue:"positive",Cancelado:"red","N\xE3o Aprovado":"amber",Or\u00E7amento:"orange"},contatos:{},faturasAbertas:[],detalhesVisivel:!1,visibilidade:{botao:{editar:!1,remover:!1}},modalDevolucaoGarantia:{visivel:!1,item:{},orcamento:{}},sistemaPai:"",configImpressaoOrcamento:[],configImpressosWhatsapp:[],documentoItemKit:{},quantidadeProdutos:0}},emits:["executar","carregou","verificarListaLayout"],mixins:[xe],props:{id:{type:String,required:!0},dadosVenda:{type:Object,required:!1},vendasCompletas:{type:Object,required:!1},resetarEnvio:{type:Function,required:!1},layout:{type:String,default:"card"}},methods:{async duplicarVenda(){try{await new Promise((d,t)=>{this.$q.dialog({message:"Duplicar este pedido?",cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(()=>{d()}).onCancel(()=>{t()})})}catch{return}try{const d=await $db.venda.duplicarVenda(this.id);this.$refs.vendaModal.mostrar({id:d}),this.$q.notify({type:"positive",message:"Pedido duplicado"})}catch(d){let t="N\xE3o foi poss\xEDvel realizar a opera\xE7\xE3o";/^GError:.+/.test(d.message)&&(t=d.message.slice(7)),this.$q.notify({type:"negative",message:t}),console.error(d)}},irParaAtendimentoFatura(d){this.$router.push({name:"AtendimentoFatura",params:{id:d}})},async migrarFatura(d){try{await new Promise((t,E)=>{this.$q.dialog({message:"Esta a\xE7\xE3o ir\xE1 migrar esta venda para outra fatura.",noRefocus:!0,preventClose:!0,title:"Tem certeza?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(()=>{t()}).onCancel(()=>{E()})})}catch{return}d||(d=$db.fatura.criar(this.dados.venda),await $db.fatura.grava({fatura:d})),d.id?(await $db.documento.grava({atual:{id:this.dados.venda.id,idFatura:d.id},original:{id:this.dados.venda.id}}),localStorage.setItem("idFatura",d.id),this.dados.venda.idContato&&(this.$emit("executar","atualizar"),this.irParaAtendimentoFatura(this.dados.venda.idContato))):this.$q.notify("N\xE3o foi poss\xEDvel realizar a opera\xE7\xE3o")},alternarDetalhes(d){this.detalhesVisivel=!this.detalhesVisivel,this.layout==="lista"&&this.$emit("verificarListaLayout",{id:d,acao:"detalhes",estado:this.detalhesVisivel})},async atualizar(){var E;const d=await $db.venda.leCompleto(this.id);d.carrinho.sort((u,a)=>new Date(u.dataHoraEmissao)<new Date(a.dataHoraEmissao)?-1:1),d.oss.sort((u,a)=>new Date(u.documento.dataHoraEmissao)<new Date(a.documento.dataHoraEmissao)?-1:1),d.customs.sort((u,a)=>new Date(u.documento.dataHoraEmissao)<new Date(a.documento.dataHoraEmissao)?-1:1),d.kits.sort((u,a)=>new Date(u.documento.dataHoraEmissao)<new Date(a.documento.dataHoraEmissao)?-1:1),(E=d.venda)!=null&&E.idFatura&&(this.fatura=await $db.hibrido.le({table:"documento",id:d.venda.idFatura}));for(const u of d.kits){const a=u.documentosItem.find(g=>g.operacaoFator===-1&&g.operacao!=="Manipula\xE7\xE3o");this.documentoItemKit[u.documento.id]=a}if((d.venda||{}).idContato&&(d.venda||{}).idEmpresa){let u=[];u=await $db.fatura.obterAbertas(d.venda.idContato,d.venda.idEmpresa),this.faturasAbertas=u.sort((a,g)=>!a.numero||a.numero<g.numero?-1:1)}const t={};if(d.venda.idContato){const u=d.venda.idContato;t[u]||(t[u]=await $db.contato.le({id:u}))}if(d.venda.idContatoVendedor){const u=d.venda.idContatoVendedor;t[u]||(t[u]=await $db.contato.le({id:u}))}this.configuraImpressaoOrcamento(d.venda.idEmpresa),this.configuraImpressosWhatsapp(d.venda),this.contatos=t,this.dados=d,await this.$nextTick(),d.venda.id===localStorage.getItem("idVenda")&&(this.$refs.vendaModal.mostrar({id:d.venda.id}),localStorage.removeItem("idVenda"))},async atualizarComDados(){var t,E,u,a;const d=await $db.venda.preparaDados(this.dadosVenda);d.carrinho.sort((g,F)=>new Date(g.dataHoraEmissao)<new Date(F.dataHoraEmissao)?-1:1),d.oss.sort((g,F)=>new Date(g.documento.dataHoraEmissao)<new Date(F.documento.dataHoraEmissao)?-1:1),d.customs.sort((g,F)=>new Date(g.documento.dataHoraEmissao)<new Date(F.documento.dataHoraEmissao)?-1:1),d.kits.sort((g,F)=>new Date(g.documento.dataHoraEmissao)<new Date(F.documento.dataHoraEmissao)?-1:1),(t=d.venda)!=null&&t.idFatura&&(this.fatura=await $db.hibrido.le({table:"documento",id:d.venda.idFatura}));for(const g of d.kits){const F=g.documentosItem.find(B=>B.operacaoFator===-1&&B.operacao!=="Manipula\xE7\xE3o");this.documentoItemKit[g.documento.id]=F}this.faturasAbertas=((u=(E=this.vendasCompletas)==null?void 0:E.faturasAbertas)==null?void 0:u.filter(g=>g.idEmpresa===d.venda.idEmpresa))||[],this.configuraImpressaoOrcamento(d.venda.idEmpresa),this.configuraImpressosWhatsapp(d.venda),this.contatos=((a=this.vendasCompletas)==null?void 0:a.dadosContatos)||{},this.dados=d,await this.$nextTick(),d.venda.id===localStorage.getItem("idVenda")&&(this.$refs.vendaModal.mostrar({id:d.venda.id}),localStorage.removeItem("idVenda"))},async configuraImpressaoOrcamento(d){const t=await $db.configuracoes.porNome("impressao.venda",d),E=[{valor:"invoice",texto:"Or\xE7amento/Venda (Invoice)"}];this.sistemaPai==="optisoul"&&E.push({valor:"orcamento",texto:"Or\xE7amento (Antigo)"},{valor:"termoGarantia",texto:"Termo de Garantia"}),this.configImpressaoOrcamento=[...t.length?t.map(u=>({texto:"Imprimir Or\xE7amento",...u})):E]},async configuraImpressosWhatsapp(d){const t=await $db.configuracoes.le({prefixoNome:"venda.whatsapp.enviar.",idEmpresa:d.idEmpresa});this.configImpressosWhatsapp=t.map(E=>({...E,idVenda:d.id}))},async dialogEnviar(d){var t,E;try{const u=await $db.hibrido.le({table:"documento",id:d.idVenda});$utils.verificarErro(!(u!=null&&u.id),"Erro ao obter dados");const a=await $db.contato.leCompleto(u.idContato),g=(((t=a==null?void 0:a.telefone)==null?void 0:t.find(F=>F.tipoTelefone==="WhatsApp"))||((E=a==null?void 0:a.telefone)==null?void 0:E.find(F=>F.tipoTelefone==="Principal"))||(a==null?void 0:a.telefone[0])||{}).telefone.trim()||"";$q.dialog({title:"Enviar impresso pelo Whatsapp?",preventClose:!0,prompt:{label:"Enviar para este n\xFAmero:",model:g||"",hint:"Ou adicione um novo n\xFAmero, ex: 19988776655",isValid:F=>F.length>0,type:"text"},cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(async F=>{var C;u.telefoneContato=F.replace(/\D/g,"");const B=await $db.venda.enviaImpressaoPdfwhatsapp({documento:u,nomeImpresso:d.nome.replace("venda.whatsapp.enviar.",""),mensagem:(C=d.texto)!=null?C:`Voc\xEA est\xE1 recebendo o ${d.valor} da empresa ${u.descricaoEmpresa} (${u.numeroDocumentoEmpresa}).`})})}catch{$q.notifyError("Erro ao enviar.",erro)}},copiarUid(){const d=this.$refs.uid;d.type="text";try{d.select(),document.execCommand("copy"),this.$q.notify({message:"UID copiado para a \xE1rea de transfer\xEAncia.",type:"info"})}catch{this.$q.notify("Erro ao copiar.")}d.type="hidden",window.getSelection().removeAllRanges()},async devolucaoGarantia(d){let t=await $db.hibrido.lista({table:"documento",where:{idContato:$db.contato.selecionado.id,tipo:"Venda",status:"Or\xE7amento"}});if(t=$lodash.orderBy(t,"dataHoraEmissao","desc"),!t.length){this.$q.notify({message:"Crie um or\xE7amento para inclus\xE3o de devolu\xE7\xE3o/garantia.",type:"info"});return}this.modalDevolucaoGarantia={visivel:!0,item:d,orcamento:t[0]}},editar(){this.$refs.vendaModal.mostrar({id:this.dados.venda.id})},executar(d){switch(d){case"atualizar":this.atualizar();break;case"cancelar":case"finalizar":case"reprovar":this.$emit("executar","atualizar");break;case"retornarOrcamento":this.$emit("executar",d);break}},async finalizaDevolucaoGarantia(d,t,E){const u=$utils.clonar(d);t==="devolucao"&&(u.operacao="Devolu\xE7\xE3o de Venda"),t==="garantia"&&(u.operacao="Garantia de Venda",u.motivo=E),u.idDocumentoItemVenda=u.id,u.idDocumentoVenda=u.idDocumento,u.id=$utils.uuid(),u.idDocumento=this.modalDevolucaoGarantia.orcamento.id,u.status="Or\xE7amento",u.operacaoFator=1,u.codigoCfop=20,u.idCfop=(await $db.cfop.le({codigoCfop:20}))[0].id,u.dataHoraEmissao=$utils.dataAtual(),u.dataHoraFinalizado="",u.subTotal=u.subTotal*-1,u.total=u.total*-1,u.valorItem=u.valorItem*-1,u.descontoSubTotal=0,delete u.codigoCfop,delete u.codigoDocumento,delete u.codigoDocumentoItem,delete u.codigoItem,delete u.codigoPlanoContaDestino,delete u.codigoPlanoContaEstoque,await $db.documentoItem.grava({atual:u}),this.$q.notify({message:"Item adicionado ao or\xE7amento.",type:"positive"}),localStorage.setItem("idVenda",this.modalDevolucaoGarantia.orcamento.id),this.$emit("executar","atualizar")},async remover(){this.$q.dialog({message:"Esta a\xE7\xE3o ir\xE1 remover esta venda da fatura",title:"Tem certeza?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(async()=>{try{await $db.venda.checarConflitoStatus({id:this.dados.venda.id,status:this.dados.venda.status})}catch(d){return $q.notifyError(d.message),!1}await $db.documento.grava({atual:{id:this.dados.venda.id,idFatura:""},original:{id:this.dados.venda.id}}),this.$emit("executar","remover")})},onResize(){this.width=window.innerWidth}},watch:{async dados(d){var E;this.visibilidade.botao.editar=!1,this.visibilidade.botao.visualizar=!1,this.visibilidade.botao.remover=!1;let t=(E=this.vendasCompletas)==null?void 0:E.contatosEmpresa;if(!t){const a=(await $db.hibrido.lista({table:"empresa",columns:["idContato"],whereFilter:{ativo:!0}})).map(({idContato:g})=>g);t=await $db.hibrido.lista({table:"contato",columns:["id"],whereIn:{id:a},whereFilter:{ativo:!0}})}!t.find(u=>u.id===d.venda.idEmpresa)||(d.venda.idFatura&&this.faturasAbertas.find(u=>u.id===d.venda.idFatura)&&(this.visibilidade.botao.remover=await $db.permissao.objeto("Diretiva_Vendas_RemoverVendaFatura")),!~["Cancelado","N\xE3o Aprovado"].indexOf(d.venda.status)&&!d.venda.idFatura&&(this.visibilidade.botao.editar=!0),this.visibilidade.botao.editar||(this.visibilidade.botao.visualizar=!0))}},async mounted(){var d,t,E,u,a,g,F,B;this.sistemaPai=$utils.sistemaPai(),this.dadosVenda&&this.vendasCompletas?await this.atualizarComDados():await this.atualizar(),this.quantidadeProdutos=(((t=(d=this.dados)==null?void 0:d.carrinho)==null?void 0:t.length)||0)+(((u=(E=this.dados)==null?void 0:E.customs)==null?void 0:u.length)||0)+(((g=(a=this.dados)==null?void 0:a.oss)==null?void 0:g.length)||0)+(((B=(F=this.dados)==null?void 0:F.kits)==null?void 0:B.length)||0)||0,this.$emit("carregou")}},De={id:"VendaCard"},Ee={key:0,class:"bg-dark text-white q-px-xs"},Fe={class:"mw80 text-center"},Ie={key:0},ze={key:1},Oe={style:{"margin-left":"14px"}},He={style:{"margin-left":"14px"}},Se={class:"float-right text-weight-medium text-right q-ml-sm",style:{"min-width":"70px"}};function Ae(d,t,E,u,a,g){var ie,se,le,ue,me,ce,fe,ve;const F=J("badge"),B=J("BadgeCopiarUid"),C=J("g-col"),ne=J("avatar"),_=J("g-label"),Q=J("g-row"),re=J("DocumentosFiscais"),ge=J("VendaModal"),ye=J("ModalHistoricoStatus");return r(),H("div",De,[o(Ce,{onResize:g.onResize},null,8,["onResize"]),E.layout==="card"?(r(),H(A,{key:0},[a.dados.venda.id?(r(),l(he,{key:0,class:"extratoItem bg-white no-shadow"},{default:e(()=>[o(Q,{gutter:"sm",items:"center",justify:"between"},{default:e(()=>[o(C,{col:"12",text:"right",class:"hideondesktop"},{default:e(()=>{var n,b,p,y;return[o(F,{rotulo:a.dados.venda.status,escuro:"",cor:"tertiary"},null,8,["rotulo"]),o(B,{numero:(b=(n=a.dados)==null?void 0:n.venda)==null?void 0:b.numero,escuro:"",class:"q-mx-xs",id:(y=(p=a.dados)==null?void 0:p.venda)==null?void 0:y.id,icone:"shopping_cart",cor:"positive"},null,8,["numero","id"])]}),_:1}),o(C,{col:"12 sm5"},{default:e(()=>[o(Q,{items:"center"},{default:e(()=>[o(C,{col:"shrink",self:a.width<=992?"start":"center"},{default:e(()=>{var n;return[o(ne,{imagem:(n=a.contatos[a.dados.venda.idContato])==null?void 0:n.imagem,rotulo:a.dados.venda.descricaoContato,tamanho:"40"},null,8,["imagem","rotulo"])]}),_:1},8,["self"]),o(C,null,{default:e(()=>{var n,b;return[o(_,{text:"body1 medium"},{default:e(()=>{var p,y,h;return[i(m((h=a.contatos[(y=(p=a.dados)==null?void 0:p.venda)==null?void 0:y.idContato])==null?void 0:h.apelido)+" ",1),o(_,{caption:""},{default:e(()=>{var q,z,O;return[i(m((O=a.contatos[(z=(q=a.dados)==null?void 0:q.venda)==null?void 0:z.idContato])==null?void 0:O.nome),1)]}),_:1})]}),_:1}),a.contatos[(b=(n=a.dados)==null?void 0:n.venda)==null?void 0:b.idContatoVendedor]?(r(),l(_,{key:0,icon:"mdi-account-tie",tip:"Vendedor(a)",class:"hideondesktop"},{default:e(()=>{var p,y,h;return[i(m((h=a.contatos[(y=(p=a.dados)==null?void 0:p.venda)==null?void 0:y.idContatoVendedor])==null?void 0:h.apelido),1)]}),_:1})):f("",!0)]}),_:1})]),_:1})]),_:1}),o(C,{col:"sm3",class:"hideonmobile"},{default:e(()=>{var n,b,p,y,h,q;return[o(B,{numero:(b=(n=a.dados)==null?void 0:n.venda)==null?void 0:b.numero,escuro:"",class:"q-mr-xs",id:(y=(p=a.dados)==null?void 0:p.venda)==null?void 0:y.id,icone:"shopping_cart",cor:"positive"},null,8,["numero","id"]),o(F,{rotulo:a.dados.venda.status,escuro:"",cor:"tertiary"},null,8,["rotulo"]),a.contatos[(q=(h=a.dados)==null?void 0:h.venda)==null?void 0:q.idContatoVendedor]?(r(),l(_,{key:0,icon:"mdi-account-tie",tip:"Vendedor(a)",class:"q-mt-xs"},{default:e(()=>{var z,O,N;return[i(m((N=a.contatos[(O=(z=a.dados)==null?void 0:z.venda)==null?void 0:O.idContatoVendedor])==null?void 0:N.apelido),1)]}),_:1})):f("",!0)]}),_:1}),o(C,{col:"5 sm-shrink md2"},{default:e(()=>[a.dados.venda.dataHoraEmissao?(r(),l(_,{key:0,icon:"mdi-calendar-today",tip:"Emiss\xE3o"},{default:e(()=>[i(m(d.$filters.data(a.dados.venda.dataHoraEmissao)),1)]),_:1})):f("",!0),a.dados.venda.dataHoraFinalizado?(r(),l(_,{key:1,icon:"mdi-calendar-check",tip:"Finalizado"},{default:e(()=>[i(m(d.$filters.data(a.dados.venda.dataHoraFinalizado)),1)]),_:1})):f("",!0)]),_:1}),o(C,{col:"7 sm md2"},{default:e(()=>[o(_,{text:"h5 right bold",color:"text-positive"},{default:e(()=>[i(m(d.$filters.numero(a.dados.venda.totalDocumento,2)),1)]),_:1}),o(_,{text:"body right medium"},{default:e(()=>[i(m(d.$filters.numero(a.dados.venda.subTotal,2)),1)]),_:1})]),_:1})]),_:1}),o(Z,{class:"q-mx-sm q-mb-xs"}),o(Q,{gutter:"sm",items:"center"},{default:e(()=>[o(C,{col:"12 md"},{default:e(()=>{var n,b,p,y,h,q,z,O,N,L,P,M;return[(b=(n=a.dados)==null?void 0:n.carrinho)!=null&&b.length?(r(!0),H(A,{key:0},G((p=a.dados)==null?void 0:p.carrinho,s=>(r(),l(Q,{gutter:"none",key:s==null?void 0:s.id},{default:e(()=>[o(C,{col:"12"},{default:e(()=>[o(_,{inline:"",class:"q-mr-sm"},{default:e(()=>[i(m(s==null?void 0:s.quantidade)+m(s!=null&&s.quantidade?"x":"")+" "+m(s==null?void 0:s.descricaoItem),1)]),_:2},1024),o(_,{inline:"",class:"float-right",text:"medium"},{default:e(()=>[i(m(d.$filters.numero(s==null?void 0:s.total,2)),1)]),_:2},1024)]),_:2},1024),o(C,{col:"12",class:"hideondesktop"},{default:e(()=>[o(Z,{class:"q-my-xs"})]),_:1})]),_:2},1024))),128)):f("",!0),(h=(y=a.dados)==null?void 0:y.customs)!=null&&h.length?(r(!0),H(A,{key:1},G((q=a.dados)==null?void 0:q.customs,s=>{var c;return r(),l(Q,{gutter:"none",key:(c=s==null?void 0:s.documento)==null?void 0:c.id},{default:e(()=>[o(C,{col:"12"},{default:e(()=>[o(_,{inline:"",class:"q-mr-sm"},{default:e(()=>{var k,x,w;return[i(m((k=s==null?void 0:s.documento)==null?void 0:k.numero)+m((x=s==null?void 0:s.documento)!=null&&x.numero?"x":"")+" "+m((w=s==null?void 0:s.documento)==null?void 0:w.descricao),1)]}),_:2},1024),o(_,{inline:"",class:"float-right",text:"medium"},{default:e(()=>{var k;return[i(m(d.$filters.numero((k=s==null?void 0:s.documento)==null?void 0:k.totalDocumento,2)),1)]}),_:2},1024)]),_:2},1024),o(C,{col:"12",class:"hideondesktop"},{default:e(()=>[o(Z,{class:"q-my-xs"})]),_:1})]),_:2},1024)}),128)):f("",!0),(O=(z=a.dados)==null?void 0:z.oss)!=null&&O.length?(r(!0),H(A,{key:2},G((N=a.dados)==null?void 0:N.oss,s=>{var c;return r(),l(Q,{gutter:"none",key:(c=s==null?void 0:s.documento)==null?void 0:c.id},{default:e(()=>[o(C,{col:"12"},{default:e(()=>[o(_,{inline:"",class:"q-mr-sm"},{default:e(()=>{var k,x,w,S,T;return[o(V,{name:"mdi-tools"}),t[18]||(t[18]=i(" OS ")),o(B,{numero:(k=s==null?void 0:s.documento)==null?void 0:k.numero,escuro:"",id:(x=s==null?void 0:s.documento)==null?void 0:x.id,cor:"positive",class:"q-mr-xs"},null,8,["numero","id"]),((w=s==null?void 0:s.documento)==null?void 0:w.status)!=="Or\xE7amento"?(r(),H("span",Ee,m((S=s==null?void 0:s.documento)==null?void 0:S.status),1)):f("",!0),i(" "+m((T=s==null?void 0:s.documento)==null?void 0:T.descricao),1)]}),_:2},1024),o(_,{inline:"",class:"float-right",text:"medium"},{default:e(()=>{var k;return[i(m(d.$filters.numero((k=s==null?void 0:s.documento)==null?void 0:k.totalDocumento,2)),1)]}),_:2},1024)]),_:2},1024),o(C,{col:"12",class:"hideondesktop"},{default:e(()=>[o(Z,{class:"q-my-xs"})]),_:1})]),_:2},1024)}),128)):f("",!0),(P=(L=a.dados)==null?void 0:L.kits)!=null&&P.length?(r(!0),H(A,{key:3},G((M=a.dados)==null?void 0:M.kits,s=>{var c;return r(),l(Q,{gutter:"none",key:(c=s==null?void 0:s.documento)==null?void 0:c.id},{default:e(()=>[o(C,{col:"12"},{default:e(()=>[o(_,{inline:"",class:"q-mr-sm"},{default:e(()=>{var k,x,w,S,T,W;return[i(m(d.$filters.numero((x=a.documentoItemKit[(k=s==null?void 0:s.documento)==null?void 0:k.id])==null?void 0:x.quantidade,4))+" "+m((S=a.documentoItemKit[(w=s==null?void 0:s.documento)==null?void 0:w.id])!=null&&S.quantidade?"x":"")+" "+m((W=a.documentoItemKit[(T=s==null?void 0:s.documento)==null?void 0:T.id])==null?void 0:W.descricaoItem),1)]}),_:2},1024),o(_,{inline:"",class:"float-right",text:"medium"},{default:e(()=>{var k,x;return[i(m(d.$filters.numero((x=a.documentoItemKit[(k=s==null?void 0:s.documento)==null?void 0:k.id])==null?void 0:x.total,2)),1)]}),_:2},1024)]),_:2},1024),o(C,{col:"12",class:"hideondesktop"},{default:e(()=>[o(Z,{class:"q-my-xs"})]),_:1})]),_:2},1024)}),128)):f("",!0)]}),_:1}),o(C,{col:"12 md3",text:"right",self:"end"},{default:e(()=>[o(j,{onClick:g.alternarDetalhes,size:"md",color:"tertiary",dense:"",class:"q-mr-sm",rounded:"",flat:"",icon:a.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"]),a.visibilidade.botao.editar?(r(),l(j,{key:0,onClick:g.editar,rounded:"",flat:"",dense:"",icon:"edit",size:"md",color:"primary",class:"q-mr-sm"},null,8,["onClick"])):f("",!0),o(j,{icon:"print",size:"md",color:"primary",rounded:"",dense:"",flat:"",class:"q-mr-sm"},{default:e(()=>[o(te,null,{default:e(()=>[o(de,{link:"",separator:""},{default:e(()=>[(r(!0),H(A,null,G(a.configImpressaoOrcamento.filter(n=>n.valor),n=>(r(),l(I,{key:n.valor,onClick:b=>d.$imprimir(n.valor,{id:(a.dados.venda||{}).id||"0",Oculto:"0"}),clickable:""},{default:e(()=>[o(v,{avatar:""},{default:e(()=>[o(V,{name:"print"})]),_:1}),o(v,null,{default:e(()=>[i(m(n.texto),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),a.visibilidade.botao.visualizar?(r(),l(j,{key:1,onClick:g.editar,rounded:"",flat:"",dense:"",icon:"remove_red_eye",size:"md",color:"primary",class:"q-mr-sm"},null,8,["onClick"])):f("",!0),a.visibilidade.botao.remover?(r(),l(j,{key:2,onClick:g.remover,rounded:"",flat:"",dense:"",icon:"clear",size:"md",color:"tertiary"},null,8,["onClick"])):f("",!0),o(j,{icon:"more_vert",size:"md",color:"tertiary",rounded:"",dense:"",flat:""},{default:e(()=>[o(te,null,{default:e(()=>[K((r(),l(de,{link:"",separator:""},{default:e(()=>[d.$utils.mapearStatus(a.dados.venda).permiteNota?(r(),H(A,{key:0},[K((r(),l(I,{onClick:t[0]||(t[0]=n=>d.emitirNFeV2({idVenda:a.dados.venda.id},1,"Venda")),clickable:""},{default:e(()=>[o(v,{avatar:""},{default:e(()=>[o(V,{name:"account_balance"})]),_:1}),o(v,null,{default:e(()=>t[19]||(t[19]=[i("NFe de Sa\xEDda/Venda")])),_:1})]),_:1})),[[U]]),K((r(),l(I,{onClick:t[1]||(t[1]=n=>d.emitirNFeV2({idVenda:a.dados.venda.id},0,"Devolu\xE7\xE3o")),clickable:""},{default:e(()=>[o(v,{avatar:""},{default:e(()=>[o(V,{name:"account_balance"})]),_:1}),o(v,null,{default:e(()=>t[20]||(t[20]=[i("NFe de Entrada/Devolu\xE7\xE3o")])),_:1})]),_:1})),[[U]]),K((r(),l(I,{onClick:t[2]||(t[2]=n=>d.emitirNFeV2({idVenda:a.dados.venda.id},1,"Remessa")),clickable:""},{default:e(()=>[o(v,{avatar:""},{default:e(()=>[o(V,{name:"account_balance"})]),_:1}),o(v,null,{default:e(()=>t[21]||(t[21]=[i("NFe de Remessa")])),_:1})]),_:1})),[[U]])],64)):f("",!0),g.podeMigrarFatura?(r(),H(A,{key:1},[(r(!0),H(A,null,G(a.faturasAbertas.filter(n=>n.id!==a.dados.venda.idFatura),n=>K((r(),l(I,{key:n.id,onClick:b=>g.migrarFatura(n),clickable:""},{default:e(()=>[o(v,{avatar:""},{default:e(()=>[o(V,{name:"mdi-folder-move"})]),_:1}),o(v,null,{default:e(()=>[i(m("Migrar para fatura #"+(n.numero||n.id.slice(-6))),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[U]])),128)),K((r(),l(I,{onClick:t[3]||(t[3]=n=>g.migrarFatura()),clickable:""},{default:e(()=>[o(v,{avatar:""},{default:e(()=>[o(V,{name:"mdi-folder-move"})]),_:1}),o(v,null,{default:e(()=>t[22]||(t[22]=[i("Migrar para nova fatura")])),_:1})]),_:1})),[[U]])],64)):f("",!0),o(I,{onClick:t[4]||(t[4]=n=>d.$refs.modalHistoricoStatus.mostrar({idDocumento:a.dados.venda.id})),clickable:""},{default:e(()=>[o(v,{avatar:""},{default:e(()=>[o(V,{name:"history"})]),_:1}),o(v,null,{default:e(()=>t[23]||(t[23]=[i("Hist\xF3rico do Status")])),_:1})]),_:1}),o(I,{onClick:g.duplicarVenda,clickable:""},{default:e(()=>[o(v,{avatar:""},{default:e(()=>[o(V,{name:"mdi-content-duplicate"})]),_:1}),o(v,null,{default:e(()=>t[24]||(t[24]=[i("Duplicar Pedido")])),_:1})]),_:1},8,["onClick"]),(r(!0),H(A,null,G(a.configImpressosWhatsapp.filter(n=>n.valor),n=>(r(),l(I,{key:n.valor,onClick:b=>g.dialogEnviar(n),clickable:""},{default:e(()=>[o(v,{avatar:""},{default:e(()=>[o(V,{name:"mdi-whatsapp"})]),_:1}),o(v,null,{default:e(()=>[i(m(n.valor),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),E.resetarEnvio&&a.dados.venda.rotaJson&&a.dados.venda.rotaJson.length>0?(r(),l(I,{key:2,onClick:t[5]||(t[5]=n=>E.resetarEnvio(a.dados.venda)),clickable:""},{default:e(()=>[o(v,{avatar:""},{default:e(()=>[o(V,{name:"restart_alt"})]),_:1}),o(v,null,{default:e(()=>t[25]||(t[25]=[i("Resetar Envio")])),_:1})]),_:1})):f("",!0)]),_:1})),[[U]])]),_:1})]),_:1})]),_:1})]),_:1}),a.detalhesVisivel?(r(),l(Z,{key:0,class:"q-mx-sm q-mb-xs"})):f("",!0),a.detalhesVisivel?(r(),l(Q,{key:1,gutter:"sm",items:"start"},{default:e(()=>[o(C,null,{default:e(()=>[o(Q,null,{default:e(()=>{var n;return[o(C,{col:"12 sm"},{default:e(()=>{var b,p;return[(p=(b=a.dados)==null?void 0:b.venda)!=null&&p.descricaoEmpresa?(r(),l(_,{key:0,text:"sub2 medium",inline:"",class:"q-mb-sm",icon:`business ${a.width<=992?"15px":"xs"} tertiary left`},{default:e(()=>{var y,h;return[i(m((h=(y=a.dados)==null?void 0:y.venda)==null?void 0:h.descricaoEmpresa),1)]}),_:1},8,["icon"])):f("",!0)]}),_:1}),(n=a.fatura)!=null&&n.id?(r(),l(C,{key:0,col:"12 sm"},{default:e(()=>{var b,p,y;return[o(_,{text:"sub2 medium",inline:"",class:"q-mb-sm",icon:`request_quote ${a.width<=992?"15px":"xs"} tertiary left`},{default:e(()=>t[26]||(t[26]=[i(" Fatura ")])),_:1},8,["icon"]),o(B,{id:(b=a.fatura)==null?void 0:b.id,escuro:"",numero:(p=a.fatura)==null?void 0:p.numero,cor:"positive",class:"q-mx-sm q-mb-sm"},null,8,["id","numero"]),o(F,{rotulo:(y=a.fatura)==null?void 0:y.status,class:"q-mb-sm",escuro:"",dica:"Status",cor:"tertiary"},null,8,["rotulo"])]}),_:1})):f("",!0),o(C,{col:"12 sm-shrink"},{default:e(()=>[o(_,{text:"sub2 medium",class:"q-pr-sm q-mb-sm"},{default:e(()=>[t[27]||(t[27]=i(" Desconto: ")),o(_,{text:"right bold",class:"q-ml-sm float-right",style:{"min-width":"70px"}},{default:e(()=>{var b,p;return[i(m(d.$filters.numero((p=(b=a.dados)==null?void 0:b.venda)==null?void 0:p.totalDesconto,2)),1)]}),_:1})]),_:1})]),_:1})]}),_:1}),o(Q,null,{default:e(()=>{var n,b,p,y,h,q,z,O;return[o(C,{col:"12 md6",bordered:""},{default:e(()=>[o(re,{idVenda:a.dados.venda.id},null,8,["idVenda"])]),_:1}),o(C,{col:"12 md6",bordered:""},{default:e(()=>[o(_,{icon:`attach_money ${a.width<=992?"15px":"xs"} tertiary left`,text:"sub2 medium"},{default:e(()=>t[28]||(t[28]=[i(" Faturamento ")])),_:1},8,["icon"]),a.dados.venda.observacaoFaturamento?(r(),l(_,{key:0,text:"sub2 medium"},{default:e(()=>[i(m(a.dados.venda.observacaoFaturamento),1)]),_:1})):f("",!0)]),_:1}),((b=(n=a.dados)==null?void 0:n.venda)==null?void 0:b.observacao)||((y=(p=a.dados)==null?void 0:p.venda)==null?void 0:y.observacaoInterna)||((q=(h=a.dados)==null?void 0:h.venda)==null?void 0:q.motivoCancelamento)||((O=(z=a.dados)==null?void 0:z.venda)==null?void 0:O.observacaoCancelamento)?(r(),H(A,{key:0},[o(C,{col:"12 md6",bordered:""},{default:e(()=>{var N,L;return[o(_,{text:"sub2 regular"},{default:e(()=>{var P,M;return[t[29]||(t[29]=R("span",{class:"text-weight-medium q-mr-sm"},"Obs.:",-1)),i(" "+m((M=(P=a.dados)==null?void 0:P.venda)==null?void 0:M.observacao),1)]}),_:1}),(L=(N=a.dados)==null?void 0:N.venda)!=null&&L.motivoCancelamento?(r(),l(_,{key:0,text:"sub2 regular"},{default:e(()=>{var P,M;return[t[30]||(t[30]=R("span",{class:"text-weight-medium q-mr-sm"},"Obs. Motivo Cancelamento:",-1)),i(" "+m((M=(P=a.dados)==null?void 0:P.venda)==null?void 0:M.motivoCancelamento),1)]}),_:1})):f("",!0)]}),_:1}),o(C,{col:"12 md6",bordered:""},{default:e(()=>{var N,L;return[o(_,{text:"sub2 regular"},{default:e(()=>{var P,M;return[t[31]||(t[31]=R("span",{class:"text-weight-medium q-mr-sm"},"Obs. Interna:",-1)),i(" "+m((M=(P=a.dados)==null?void 0:P.venda)==null?void 0:M.observacaoInterna),1)]}),_:1}),(L=(N=a.dados)==null?void 0:N.venda)!=null&&L.observacaoCancelamento?(r(),l(_,{key:0,text:"sub2 regular"},{default:e(()=>{var P,M;return[t[32]||(t[32]=R("span",{class:"text-weight-medium q-mr-sm"},"Obs. Cancelamento:",-1)),i(" "+m((M=(P=a.dados)==null?void 0:P.venda)==null?void 0:M.observacaoCancelamento),1)]}),_:1})):f("",!0)]}),_:1})],64)):f("",!0)]}),_:1})]),_:1})]),_:1})):f("",!0)]),_:1})):f("",!0)],64)):f("",!0),E.layout==="lista"?(r(),H(A,{key:1},[(se=(ie=a.dados)==null?void 0:ie.venda)!=null&&se.id?(r(),l(I,{key:0,clickable:"","manual-focus":"",class:"q-py-sm q-px-xs items-center"},{default:e(()=>[o(v,{class:"hideonmobile col-auto no-margin"},{default:e(()=>{var n,b,p,y;return[R("div",Fe,[o(B,{numero:(b=(n=a.dados)==null?void 0:n.venda)==null?void 0:b.numero,id:(y=(p=a.dados)==null?void 0:p.venda)==null?void 0:y.id,cor:"positive"},null,8,["numero","id"])])]}),_:1}),o(v,{onClick:t[6]||(t[6]=n=>g.editar()),class:"col-md col-lg col-xl no-margin"},{default:e(()=>[o(I,{class:"q-pa-none"},{default:e(()=>[o(v,{class:"col-auto items-center"},{default:e(()=>{var n,b,p,y,h;return[o(ne,{imagem:(p=a.contatos[(b=(n=a.dados)==null?void 0:n.venda)==null?void 0:b.idContato]||{})==null?void 0:p.imagem,tamanho:"40",rotulo:(h=(y=a.dados)==null?void 0:y.venda)==null?void 0:h.descricaoContato,style:{display:"flex","align-self":"center"}},null,8,["imagem","rotulo"])]}),_:1}),o(v,{class:"col"},{default:e(()=>{var n,b,p,y,h,q,z,O,N,L,P,M;return[o(D,{lines:"2",class:"text-weight-bold"},{default:e(()=>{var s,c,k;return[R("span",null,[i(m((k=a.contatos[(c=(s=a.dados)==null?void 0:s.venda)==null?void 0:c.idContato])==null?void 0:k.apelido)+" ",1),o(X,{anchor:"bottom middle",self:"center middle"},{default:e(()=>t[33]||(t[33]=[i("Nome Fantasia")])),_:1})])]}),_:1}),((p=a.contatos[(b=(n=a.dados)==null?void 0:n.venda)==null?void 0:b.idContato])==null?void 0:p.nome)!==((q=a.contatos[(h=(y=a.dados)==null?void 0:y.venda)==null?void 0:h.idContato])==null?void 0:q.apelido)?(r(),l(D,{key:0,caption:"",lines:"2"},{default:e(()=>{var s,c,k;return[R("span",null,[i(m((k=a.contatos[(c=(s=a.dados)==null?void 0:s.venda)==null?void 0:c.idContato])==null?void 0:k.nome)+" ",1),o(X,{anchor:"bottom middle",self:"center middle"},{default:e(()=>t[34]||(t[34]=[i("Raz\xE3o Social")])),_:1})])]}),_:1})):f("",!0),o(D,{caption:"",class:"hideondesktop"},{default:e(()=>{var s,c,k,x,w,S,T,W,Y,$,ee,ae,oe;return[o(B,{id:(c=(s=a.dados)==null?void 0:s.venda)==null?void 0:c.id,numero:(x=(k=a.dados)==null?void 0:k.venda)==null?void 0:x.numero,cor:"positive",escuro:"",class:"q-mr-sm"},null,8,["id","numero"]),(S=(w=a.dados)==null?void 0:w.venda)!=null&&S.status?(r(),l(F,{key:0,escuro:"",dica:"Status",class:"col-auto q-mx-auto",rotulo:(Y=((W=(T=a.dados)==null?void 0:T.venda)==null?void 0:W.status)||"")==null?void 0:Y.replace("Aguardando ","Ag. "),cor:(ee=($=a.dados)==null?void 0:$.venda)!=null&&ee.status?a.status[(oe=(ae=a.dados)==null?void 0:ae.venda)==null?void 0:oe.status]:"tertiary"},null,8,["rotulo","cor"])):f("",!0)]}),_:1}),(O=(z=a.dados)==null?void 0:z.venda)!=null&&O.descricaoEmpresa?(r(),l(D,{key:1,caption:"",lines:"2"},{default:e(()=>{var s,c;return[R("span",null,[o(V,{name:"business"}),i(" "+m((c=(s=a.dados)==null?void 0:s.venda)==null?void 0:c.descricaoEmpresa)+" ",1),o(X,{anchor:"bottom middle",self:"center middle"},{default:e(()=>t[35]||(t[35]=[i(" Empresa ")])),_:1})])]}),_:1})):f("",!0),a.contatos[(L=(N=a.dados)==null?void 0:N.venda)==null?void 0:L.idContatoVendedor]||a.contatos[(M=(P=a.dados)==null?void 0:P.venda)==null?void 0:M.idContatoDigitador]?(r(),l(D,{key:2,caption:"",lines:"2"},{default:e(()=>{var s,c,k,x,w,S,T,W,Y,$,ee,ae,oe,pe;return[o(V,{name:"mdi-account-tie",style:{"margin-right":"2px"}}),a.contatos[(c=(s=a.dados)==null?void 0:s.venda)==null?void 0:c.idContatoVendedor]?(r(),H("span",Ie,[i(m((w=a.contatos[(x=(k=a.dados)==null?void 0:k.venda)==null?void 0:x.idContatoVendedor])==null?void 0:w.apelido)+" ",1),o(X,{anchor:"bottom middle",self:"center middle"},{default:e(()=>t[36]||(t[36]=[i(" Vendedor ")])),_:1})])):f("",!0),a.contatos[(T=(S=a.dados)==null?void 0:S.venda)==null?void 0:T.idContatoDigitador]&&a.contatos[(Y=(W=a.dados)==null?void 0:W.venda)==null?void 0:Y.idContatoDigitador]!==a.contatos[(ee=($=a.dados)==null?void 0:$.venda)==null?void 0:ee.idContatoVendedor]?(r(),H("span",ze,[i(" | "+m((pe=a.contatos[(oe=(ae=a.dados)==null?void 0:ae.venda)==null?void 0:oe.idContatoDigitador])==null?void 0:pe.apelido)+" ",1),o(X,{anchor:"bottom middle",self:"center middle"},{default:e(()=>t[37]||(t[37]=[i(" Digitador ")])),_:1})])):f("",!0)]}),_:1})):f("",!0),o(v,{class:"hideondesktop q-mt-sm"},{default:e(()=>[o(I,{class:"q-pa-none",style:{"min-height":"36px!important"}},{default:e(()=>[o(v,{top:"",class:"col-5 no-margin"},{default:e(()=>{var s,c,k,x;return[(c=(s=a.dados)==null?void 0:s.venda)!=null&&c.dataHoraEmissao?(r(),l(D,{key:0,caption:""},{default:e(()=>{var w,S;return[o(V,{name:"mdi-calendar-today",style:{position:"absolute","margin-top":"2px"}}),R("span",Oe,m(d.$filters.data((S=(w=a.dados)==null?void 0:w.venda)==null?void 0:S.dataHoraEmissao)),1)]}),_:1})):f("",!0),(x=(k=a.dados)==null?void 0:k.venda)!=null&&x.dataHoraFinalizado?(r(),l(D,{key:1,caption:""},{default:e(()=>{var w,S;return[o(V,{name:"mdi-calendar",style:{position:"absolute","margin-top":"2px"}}),R("span",He,m(d.$filters.data((S=(w=a.dados)==null?void 0:w.venda)==null?void 0:S.dataHoraFinalizado)),1)]}),_:1})):f("",!0)]}),_:1}),o(v,{top:"",class:"col-7 no-margin text-right"},{default:e(()=>{var s,c,k,x,w,S;return[(c=(s=a.dados)==null?void 0:s.venda)!=null&&c.totalDocumento?(r(),l(D,{key:0,caption:"",class:"text-weight-bold"},{default:e(()=>{var T,W;return[i(m(d.$filters.numero((W=(T=a.dados)==null?void 0:T.venda)==null?void 0:W.totalDocumento,2)),1)]}),_:1})):f("",!0),((x=(k=a.dados)==null?void 0:k.venda)==null?void 0:x.subTotal)!==((S=(w=a.dados)==null?void 0:w.venda)==null?void 0:S.totalDocumento)?(r(),l(D,{key:1,caption:""},{default:e(()=>{var T,W;return[i(m(d.$filters.numero((W=(T=a.dados)==null?void 0:T.venda)==null?void 0:W.subTotal,2)),1)]}),_:1})):f("",!0)]}),_:1})]),_:1})]),_:1})]}),_:1})]),_:1})]),_:1}),o(v,{onClick:t[7]||(t[7]=n=>g.editar()),class:"hideonmobile maxw100 q-pl-sm no-margin"},{default:e(()=>{var n,b,p,y;return[(b=(n=a.dados)==null?void 0:n.venda)!=null&&b.dataHoraEmissao?(r(),l(D,{key:0,caption:"",lines:"2",class:"text-weight-medium"},{default:e(()=>{var h,q;return[R("span",null,[o(V,{name:"mdi-calendar-today"}),i(" "+m(d.$filters.data((q=(h=a.dados)==null?void 0:h.venda)==null?void 0:q.dataHoraEmissao))+" ",1),o(X,{anchor:"bottom middle",self:"center middle"},{default:e(()=>{var z,O;return[i(" Emitido \xE0s "+m(d.$filters.hora((O=(z=a.dados)==null?void 0:z.venda)==null?void 0:O.dataHoraEmissao)),1)]}),_:1})])]}),_:1})):f("",!0),(y=(p=a.dados)==null?void 0:p.venda)!=null&&y.dataHoraFinalizado?(r(),l(D,{key:1,caption:"",lines:"2",class:"text-weight-medium"},{default:e(()=>{var h,q;return[R("span",null,[o(V,{name:"mdi-calendar"}),i(" "+m(d.$filters.data((q=(h=a.dados)==null?void 0:h.venda)==null?void 0:q.dataHoraFinalizado))+" ",1),o(X,{anchor:"bottom middle",self:"center middle"},{default:e(()=>{var z,O;return[i(" Finalizado \xE1s "+m(d.$filters.hora((O=(z=a.dados)==null?void 0:z.venda)==null?void 0:O.dataHoraFinalizado)),1)]}),_:1})])]}),_:1})):f("",!0)]}),_:1}),o(v,{onClick:t[8]||(t[8]=n=>g.editar()),class:"hideonmobile maxw120 q-pl-sm no-margin"},{default:e(()=>{var n,b,p,y,h,q,z,O,N;return[(b=(n=a.dados)==null?void 0:n.venda)!=null&&b.status?(r(),l(F,{key:0,escuro:"",dica:"Status",class:"col-auto q-mx-auto",rotulo:(h=((y=(p=a.dados)==null?void 0:p.venda)==null?void 0:y.status)||"")==null?void 0:h.replace("Aguardando ","Ag. "),cor:(z=(q=a.dados)==null?void 0:q.venda)!=null&&z.status?a.status[(N=(O=a.dados)==null?void 0:O.venda)==null?void 0:N.status]:"tertiary"},null,8,["rotulo","cor"])):f("",!0)]}),_:1}),o(v,{onClick:t[9]||(t[9]=n=>g.editar()),class:"hideonmobile maxw120 q-pl-sm no-margin"},{default:e(()=>{var n,b,p,y;return[(b=(n=a.dados)==null?void 0:n.venda)!=null&&b.totalDocumento?(r(),l(D,{key:0,class:"text-weight-bold text-right"},{default:e(()=>{var h,q;return[R("span",null,[i(m(d.$filters.numero((q=(h=a.dados)==null?void 0:h.venda)==null?void 0:q.totalDocumento,2))+" ",1),o(X,{anchor:"bottom middle",self:"center middle"},{default:e(()=>t[38]||(t[38]=[i(" Total ")])),_:1})])]}),_:1})):f("",!0),(y=(p=a.dados)==null?void 0:p.venda)!=null&&y.subTotal?(r(),l(D,{key:1,class:"text-caption text-right"},{default:e(()=>{var h,q;return[R("span",null,[i(m(d.$filters.numero((q=(h=a.dados)==null?void 0:h.venda)==null?void 0:q.subTotal,2))+" ",1),o(X,{anchor:"bottom middle",self:"center middle"},{default:e(()=>t[39]||(t[39]=[i(" Subtotal ")])),_:1})])]}),_:1})):f("",!0)]}),_:1}),o(v,{class:"col-auto q-pl-sm no-margin"},{default:e(()=>[o(I,{class:"q-pa-none"},{default:e(()=>[o(v,{class:"no-margin hideonmobile",style:{width:"32px"}},{default:e(()=>[o(j,{onClick:t[10]||(t[10]=n=>{var b,p;return g.alternarDetalhes((p=(b=a.dados)==null?void 0:b.venda)==null?void 0:p.id)}),icon:a.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down",rounded:"",dense:"",flat:"",size:"md",color:"tertiary"},null,8,["icon"])]),_:1}),o(v,{class:"no-margin hideonmobile",style:{width:"32px"}},{default:e(()=>[a.visibilidade.botao.editar?(r(),l(j,{key:0,onClick:g.editar,rounded:"",dense:"",flat:"",icon:"edit",size:"md",color:"primary"},null,8,["onClick"])):f("",!0),a.visibilidade.botao.visualizar?(r(),l(j,{key:1,onClick:g.editar,rounded:"",dense:"",flat:"",icon:"remove_red_eye",size:"md",color:"primary"},null,8,["onClick"])):f("",!0)]),_:1}),o(v,{class:"no-margin hideonmobile",style:{width:"32px"}},{default:e(()=>[o(j,{icon:"print",size:"md",round:"",flat:"",dense:""},{default:e(()=>[o(te,null,{default:e(()=>[K((r(),l(de,{link:"","no-border":"",separator:""},{default:e(()=>[(r(!0),H(A,null,G(a.configImpressaoOrcamento.filter(n=>n.valor),n=>(r(),l(I,{onClick:b=>{var p,y;return d.$imprimir(n.valor,{id:((y=(p=a.dados)==null?void 0:p.venda)==null?void 0:y.id)||"0",Oculto:"0"})},key:n.valor,clickable:""},{default:e(()=>[o(v,{avatar:""},{default:e(()=>[o(V,{name:"print"})]),_:1}),o(v,null,{default:e(()=>[i(m(n.texto),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})),[[U]])]),_:1})]),_:1})]),_:1}),o(v,{class:"no-margin",style:{width:"32px"}},{default:e(()=>[o(j,{icon:"more_vert",size:"md",round:"",flat:"",dense:""},{default:e(()=>[o(te,null,{default:e(()=>[K((r(),l(de,{link:"","no-border":"",separator:""},{default:e(()=>[a.visibilidade.botao.remover?(r(),l(I,{key:0,onClick:g.remover,clickable:""},{default:e(()=>[o(v,{avatar:""},{default:e(()=>[o(V,{name:"delete"})]),_:1}),o(v,null,{default:e(()=>[o(D,null,{default:e(()=>t[40]||(t[40]=[i("Remover")])),_:1}),o(D,{caption:""},{default:e(()=>t[41]||(t[41]=[i("Venda")])),_:1})]),_:1})]),_:1},8,["onClick"])):f("",!0),a.visibilidade.botao.editar||a.visibilidade.botao.visualizar?(r(),l(I,{key:1,onClick:g.editar,clickable:"",class:"hideondesktop"},{default:e(()=>[o(v,{avatar:""},{default:e(()=>[a.visibilidade.botao.editar?(r(),l(V,{key:0,name:"edit"})):f("",!0),a.visibilidade.botao.visualizar?(r(),l(V,{key:1,name:"remove_red_eye"})):f("",!0)]),_:1}),o(v,null,{default:e(()=>[a.visibilidade.botao.editar?(r(),l(D,{key:0},{default:e(()=>t[42]||(t[42]=[i(" Editar ")])),_:1})):f("",!0),a.visibilidade.botao.visualizar?(r(),l(D,{key:1},{default:e(()=>t[43]||(t[43]=[i(" Visualizar ")])),_:1})):f("",!0),o(D,{caption:""},{default:e(()=>t[44]||(t[44]=[i("Venda")])),_:1})]),_:1})]),_:1},8,["onClick"])):f("",!0),o(I,{onClick:t[11]||(t[11]=n=>{var b,p;return g.alternarDetalhes((p=(b=a.dados)==null?void 0:b.venda)==null?void 0:p.id)}),clickable:"",class:"hideondesktop"},{default:e(()=>[o(v,{avatar:""},{default:e(()=>[o(V,{name:a.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])]),_:1}),o(v,null,{default:e(()=>[o(D,null,{default:e(()=>t[45]||(t[45]=[i("Ver Detalhes")])),_:1}),o(D,{caption:""},{default:e(()=>t[46]||(t[46]=[i("Venda")])),_:1})]),_:1})]),_:1}),d.$utils.mapearStatus(a.dados.venda).permiteNota?(r(),H(A,{key:2},[K((r(),l(I,{onClick:t[12]||(t[12]=n=>d.emitirNFeV2({idVenda:a.dados.venda.id},1,"Venda")),clickable:""},{default:e(()=>[o(v,{avatar:""},{default:e(()=>[o(V,{name:"account_balance"})]),_:1}),o(v,null,{default:e(()=>[o(D,null,{default:e(()=>t[47]||(t[47]=[i("NFe")])),_:1}),o(D,{caption:""},{default:e(()=>t[48]||(t[48]=[i("Sa\xEDda/Venda")])),_:1})]),_:1})]),_:1})),[[U]]),K((r(),l(I,{onClick:t[13]||(t[13]=n=>d.emitirNFeV2({idVenda:a.dados.venda.id},0,"Devolu\xE7\xE3o")),clickable:""},{default:e(()=>[o(v,{avatar:""},{default:e(()=>[o(V,{name:"account_balance"})]),_:1}),o(v,null,{default:e(()=>[o(D,null,{default:e(()=>t[49]||(t[49]=[i("NFe")])),_:1}),o(D,{caption:""},{default:e(()=>t[50]||(t[50]=[i("Entrada/Devolu\xE7\xE3o")])),_:1})]),_:1})]),_:1})),[[U]]),K((r(),l(I,{onClick:t[14]||(t[14]=n=>d.emitirNFeV2({idVenda:a.dados.venda.id},1,"Remessa")),clickable:""},{default:e(()=>[o(v,{avatar:""},{default:e(()=>[o(V,{name:"account_balance"})]),_:1}),o(v,null,{default:e(()=>[o(D,null,{default:e(()=>t[51]||(t[51]=[i("NFe")])),_:1}),o(D,{caption:""},{default:e(()=>t[52]||(t[52]=[i("Remessa")])),_:1})]),_:1})]),_:1})),[[U]])],64)):f("",!0),g.podeMigrarFatura?(r(),H(A,{key:3},[(r(!0),H(A,null,G(a.faturasAbertas.filter(n=>{var b,p;return n.id!==((p=(b=a.dados)==null?void 0:b.venda)==null?void 0:p.idFatura)}),n=>K((r(),l(I,{key:n.id,onClick:b=>g.migrarFatura(n),clickable:""},{default:e(()=>[o(v,{avatar:""},{default:e(()=>[o(V,{name:"mdi-folder-move"})]),_:1}),o(v,null,{default:e(()=>[o(D,null,{default:e(()=>[i(m("#"+(n.numero||n.id.slice(-6))),1)]),_:2},1024),o(D,{caption:""},{default:e(()=>t[53]||(t[53]=[i("Migrar para fatura")])),_:1})]),_:2},1024)]),_:2},1032,["onClick"])),[[U]])),128)),K((r(),l(I,{onClick:t[15]||(t[15]=n=>g.migrarFatura()),clickable:""},{default:e(()=>[o(v,{avatar:""},{default:e(()=>[o(V,{name:"mdi-folder-move"})]),_:1}),o(v,null,{default:e(()=>[o(D,null,{default:e(()=>t[54]||(t[54]=[i("Migrar")])),_:1}),o(D,{caption:""},{default:e(()=>t[55]||(t[55]=[i("Para nova fatura")])),_:1})]),_:1})]),_:1})),[[U]])],64)):f("",!0),o(I,{onClick:t[16]||(t[16]=n=>d.$refs.modalHistoricoStatus.mostrar({idDocumento:a.dados.venda.id})),clickable:""},{default:e(()=>[o(v,{avatar:""},{default:e(()=>[o(V,{name:"history"})]),_:1}),o(v,null,{default:e(()=>[o(D,null,{default:e(()=>t[56]||(t[56]=[i("Hist\xF3rico")])),_:1}),o(D,{caption:""},{default:e(()=>t[57]||(t[57]=[i("De Status")])),_:1})]),_:1})]),_:1}),o(I,{onClick:g.duplicarVenda,clickable:""},{default:e(()=>[o(v,{avatar:""},{default:e(()=>[o(V,{name:"mdi-content-duplicate"})]),_:1}),o(v,null,{default:e(()=>t[58]||(t[58]=[i("Duplicar Pedido")])),_:1})]),_:1},8,["onClick"]),(r(!0),H(A,null,G(a.configImpressosWhatsapp.filter(n=>n.valor),n=>(r(),l(I,{key:n.valor,onClick:b=>g.dialogEnviar(n),clickable:""},{default:e(()=>[o(v,{avatar:""},{default:e(()=>[o(V,{name:"mdi-whatsapp"})]),_:1}),o(v,null,{default:e(()=>[i(m(n.valor),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),E.resetarEnvio&&a.dados.venda.rotaJson&&a.dados.venda.rotaJson.length>0?(r(),l(I,{key:4,onClick:t[17]||(t[17]=n=>E.resetarEnvio(a.dados.venda)),clickable:""},{default:e(()=>[o(v,{avatar:""},{default:e(()=>[o(V,{name:"restart_alt"})]),_:1}),o(v,null,{default:e(()=>t[59]||(t[59]=[i("Resetar Envio")])),_:1})]),_:1})):f("",!0),(r(!0),H(A,null,G(a.configImpressaoOrcamento.filter(n=>n.valor),n=>(r(),l(I,{onClick:b=>{var p,y;return d.$imprimir(n.valor,{id:((y=(p=a.dados)==null?void 0:p.venda)==null?void 0:y.id)||"0",Oculto:"0"})},key:n.valor,clickable:"",class:"hideondesktop"},{default:e(()=>[o(v,{avatar:""},{default:e(()=>[o(V,{name:"print"})]),_:1}),o(v,null,{default:e(()=>[i(m(n.texto),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})),[[U]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):f("",!0),K(o(Z,{class:"q-ma-sm"},null,512),[[be,((ue=(le=a.dados)==null?void 0:le.venda)==null?void 0:ue.id)&&a.detalhesVisivel]]),K(o(Q,null,{default:e(()=>[o(C,null,{default:e(()=>{var n,b,p,y,h,q,z,O,N,L,P,M,s;return[((n=a.fatura)==null?void 0:n.id)||((p=(b=a.dados)==null?void 0:b.venda)==null?void 0:p.totalDesconto)?(r(),l(Q,{key:0,gutter:"md-x"},{default:e(()=>{var c,k;return[o(C,{col:"xs12 sm"},{default:e(()=>{var x,w,S,T,W,Y;return[(x=a.fatura)!=null&&x.id?(r(),l(_,{key:0,text:"sub2 medium",inline:"",icon:`request_quote ${a.width<=992?"15px":"xs"} tertiary left`},{default:e(()=>t[60]||(t[60]=[i(" Fatura ")])),_:1},8,["icon"])):f("",!0),(w=a.fatura)!=null&&w.id?(r(),l(F,{key:1,rotulo:(S=a.fatura)==null?void 0:S.status,escuro:"",dica:"Status",cor:"tertiary",class:"q-mx-sm"},null,8,["rotulo"])):f("",!0),(T=a.fatura)!=null&&T.id?(r(),l(B,{key:2,id:(W=a.fatura)==null?void 0:W.id,escuro:"",numero:(Y=a.fatura)==null?void 0:Y.numero,cor:"positive"},null,8,["id","numero"])):f("",!0)]}),_:1}),(k=(c=a.dados)==null?void 0:c.venda)!=null&&k.totalDesconto?(r(),l(C,{key:0,col:"xs12 sm-shrink"},{default:e(()=>[o(_,{text:"sub2 regular",class:"q-pr-sm"},{default:e(()=>{var x,w;return[t[61]||(t[61]=i(" Desconto: ")),R("span",Se,m(d.$filters.numero((w=(x=a.dados)==null?void 0:x.venda)==null?void 0:w.totalDesconto,2)),1)]}),_:1})]),_:1})):f("",!0)]}),_:1})):f("",!0),o(Q,{gutter:"md"},{default:e(()=>[o(C,{col:"xs12 md6",bordered:""},{default:e(()=>[o(_,{icon:`extension ${a.width<=992?"14px":"xs"} tertiary left`,text:"sub2 medium",class:"q-mb-md"},{default:e(()=>t[62]||(t[62]=[i(" Itens ")])),_:1},8,["icon"]),(r(!0),H(A,null,G(a.dados.carrinho,c=>(r(),l(Q,{key:c.id,gutter:"none",bordered:`${a.quantidadeProdutos>1?"bottom":!1}`},{default:e(()=>[o(C,null,{default:e(()=>[o(_,{lines:"1"},{default:e(()=>[o(_,{inline:"",text:"medium",class:"q-mr-xs"},{default:e(()=>[i(m(c.quantidade)+"x ",1)]),_:2},1024),i(" "+m(c.descricaoItem),1)]),_:2},1024)]),_:2},1024),o(C,{col:"auto",class:"mw120"},{default:e(()=>[o(_,{text:"medium right"},{default:e(()=>[i(m(d.$filters.numero(c.total,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["bordered"]))),128)),(r(!0),H(A,null,G(a.dados.customs,c=>(r(),l(Q,{key:c.documento.id,gutter:"none",bordered:`${a.quantidadeProdutos>1?"bottom":!1}`},{default:e(()=>[o(C,null,{default:e(()=>[o(_,{lines:"1"},{default:e(()=>[o(_,{inline:"",text:"medium",class:"q-mr-xs"},{default:e(()=>[i(m(c.documento.numero)+"x ",1)]),_:2},1024),i(" "+m(c.documento.descricao),1)]),_:2},1024)]),_:2},1024),o(C,{col:"auto",class:"mw120"},{default:e(()=>[o(_,{text:"medium right"},{default:e(()=>[i(m(d.$filters.numero(c.documento.totalDocumento,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["bordered"]))),128)),(r(!0),H(A,null,G(a.dados.oss,c=>(r(),l(Q,{key:c.documento.id,gutter:"none",bordered:`${a.quantidadeProdutos>1?"bottom":!1}`},{default:e(()=>[o(C,null,{default:e(()=>[o(_,{lines:"1"},{default:e(()=>[o(F,{rotulo:"OS #"+c.documento.numero,dica:"O.S.",escuro:"",cor:"tertiary",class:"q-mr-xs"},null,8,["rotulo"]),c.documento.status!=="Or\xE7amento"?(r(),l(F,{key:0,rotulo:c.documento.status,cor:"positive",escuro:"",class:"q-mr-xs"},null,8,["rotulo"])):f("",!0),i(" "+m(c.documento.descricao),1)]),_:2},1024)]),_:2},1024),o(C,{col:"auto",class:"mw120"},{default:e(()=>[o(_,{text:"medium right"},{default:e(()=>[i(m(d.$filters.numero(c.documento.totalDocumento,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["bordered"]))),128)),(r(!0),H(A,null,G(a.dados.kits,c=>(r(),l(Q,{key:c.documento.id,gutter:"none",bordered:`${a.quantidadeProdutos>1?"bottom":!1}`},{default:e(()=>[o(C,null,{default:e(()=>[o(_,{lines:"1"},{default:e(()=>[o(_,{inline:"",text:"medium",class:"q-mr-xs"},{default:e(()=>[i(m(d.$filters.numero(a.documentoItemKit[c.documento.id].quantidade,4))+"x ",1)]),_:2},1024),i(" "+m(a.documentoItemKit[c.documento.id].descricaoItem),1)]),_:2},1024)]),_:2},1024),o(C,{col:"auto",class:"mw120"},{default:e(()=>[o(_,{text:"medium right"},{default:e(()=>[i(m(d.$filters.numero(a.documentoItemKit[c.documento.id].total,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["bordered"]))),128))]),_:1}),o(C,{col:"xs12 md6",bordered:""},{default:e(()=>{var c;return[o(re,{idFatura:(c=a.fatura)==null?void 0:c.id,ref:"documentosFiscais"},null,8,["idFatura"])]}),_:1})]),_:1}),((h=(y=a.dados)==null?void 0:y.venda)==null?void 0:h.observacaoFaturamento)||((z=(q=a.dados)==null?void 0:q.venda)==null?void 0:z.observacao)||((N=(O=a.dados)==null?void 0:O.venda)==null?void 0:N.observacaoInterna)||((P=(L=a.dados)==null?void 0:L.venda)==null?void 0:P.motivoCancelamento)||((s=(M=a.dados)==null?void 0:M.venda)==null?void 0:s.observacaoCancelamento)?(r(),l(Q,{key:1,gutter:"md"},{default:e(()=>[o(C,{col:"xs12 md4",bordered:""},{default:e(()=>{var c,k;return[o(_,{text:"sub2 regular"},{default:e(()=>{var x,w;return[t[63]||(t[63]=R("span",{class:"text-weight-medium q-mr-sm"},"Obs.:",-1)),i(" "+m((w=(x=a.dados)==null?void 0:x.venda)==null?void 0:w.observacao),1)]}),_:1}),(k=(c=a.dados)==null?void 0:c.venda)!=null&&k.motivoCancelamento?(r(),l(_,{key:0,text:"sub2 regular"},{default:e(()=>{var x,w;return[t[64]||(t[64]=R("span",{class:"text-weight-medium q-mr-sm"},"Obs. Motivo Cancelamento:",-1)),i(" "+m((w=(x=a.dados)==null?void 0:x.venda)==null?void 0:w.motivoCancelamento),1)]}),_:1})):f("",!0)]}),_:1}),o(C,{col:"xs12 md4",bordered:""},{default:e(()=>{var c,k;return[o(_,{text:"sub2 regular"},{default:e(()=>{var x,w;return[t[65]||(t[65]=R("span",{class:"text-weight-medium q-mr-sm"},"Obs. Interna:",-1)),i(" "+m((w=(x=a.dados)==null?void 0:x.venda)==null?void 0:w.observacaoInterna),1)]}),_:1}),(k=(c=a.dados)==null?void 0:c.venda)!=null&&k.observacaoCancelamento?(r(),l(_,{key:0,text:"sub2 regular"},{default:e(()=>{var x,w;return[t[66]||(t[66]=R("span",{class:"text-weight-medium q-mr-sm"},"Obs. Cancelamento:",-1)),i(" "+m((w=(x=a.dados)==null?void 0:x.venda)==null?void 0:w.observacaoCancelamento),1)]}),_:1})):f("",!0)]}),_:1}),o(C,{col:"xs12 md4",bordered:""},{default:e(()=>[o(_,{text:"sub2 regular"},{default:e(()=>{var c,k;return[t[67]||(t[67]=R("span",{class:"text-weight-medium q-mr-sm"},"Obs. Faturamento:",-1)),i(" "+m((k=(c=a.dados)==null?void 0:c.venda)==null?void 0:k.observacaoFaturamento),1)]}),_:1})]),_:1})]),_:1})):f("",!0)]}),_:1})]),_:1},512),[[be,((ce=(me=a.dados)==null?void 0:me.venda)==null?void 0:ce.id)&&a.detalhesVisivel]]),(ve=(fe=a.dados)==null?void 0:fe.venda)!=null&&ve.id?(r(),l(Z,{key:1})):f("",!0)],64)):f("",!0),o(ge,{onExecutar:g.executar,ref:"vendaModal"},null,8,["onExecutar"]),o(ye,{ref:"modalHistoricoStatus"},null,512)])}var Re=ke(Ve,[["render",Ae]]);export{Re as V};
