import{_ as _e,b9 as he,r as B,o as l,p as w,F as V,d as u,w as e,f as a,C as p,h as Ce,i as we,U as b,k as i,t as m,cL as X,j as k,H,cM as pe,e as v,m as W,l as j,P as J,u as M,S as _,T as n,Q as T,be as Y,N,z as xe,bJ as qe,b3 as be}from"./index.4c3e70b2.js";import{e as Ve}from"./emitirNFe.35117289.js";import{D as Fe}from"./DocumentosFiscais.6242a3e3.js";import{M as Ee}from"./ModalHistoricoStatus.3e0e57c6.js";const De={components:{DocumentosFiscais:Fe,ModalHistoricoStatus:Ee,VendaModal:he},computed:{config(){return $db.configuracoes.valores},podeMigrarFatura(){return!~["Aguardando Estoque","Aguardando Financeiro","Aguardando Aprova\xE7\xE3o","Aguardando Pagamento","Cancelado","N\xE3o Aprovado","Or\xE7amento","Faturado"].indexOf(this.dados.venda.status)}},data(){return{dbUsuario:$db.usuario,width:0,dados:{venda:{}},fatura:{},status:{"Aguardando Confer\xEAncia":"orange","Aguardando Embalagem":"orange","Aguardando Entrega":"orange","Aguardando Libera\xE7\xE3o":"orange","Aguardando Separa\xE7\xE3o":"orange","Aguardando Estoque":"orange","Aguardando Financeiro":"orange","Aguardando Aprova\xE7\xE3o":"orange","Aguardando Pagamento":"tertiary","Aguardando Faturamento":"tertiary","Em Confer\xEAncia":"orange","Em Separa\xE7\xE3o":"orange",Faturado:"positive",Entregue:"positive",Cancelado:"red","N\xE3o Aprovado":"amber",Or\u00E7amento:"orange"},contatos:{},faturasAbertas:[],detalhesVisivel:!1,visibilidade:{botao:{editar:!1,remover:!1}},modalDevolucaoGarantia:{visivel:!1,item:{},orcamento:{}},sistemaPai:"",configImpressaoOrcamento:[],configImpressosWhatsapp:[],documentoItemKit:{},quantidadeProdutos:0}},emits:["executar","carregou","verificarListaLayout"],mixins:[Ve],props:{id:{type:String,required:!0},dadosVenda:{type:Object,required:!1},vendasCompletas:{type:Object,required:!1},resetarEnvio:{type:Function,required:!1},layout:{type:String,default:"card"}},methods:{async duplicarVenda(){try{await new Promise((d,o)=>{this.$q.dialog({message:"Duplicar este pedido?",cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(()=>{d()}).onCancel(()=>{o()})})}catch{return}try{const d=await $db.venda.duplicarVenda(this.id);this.$refs.vendaModal.mostrar({id:d}),this.$q.notify({type:"positive",message:"Pedido duplicado"})}catch(d){let o="N\xE3o foi poss\xEDvel realizar a opera\xE7\xE3o";/^GError:.+/.test(d.message)&&(o=d.message.slice(7)),this.$q.notify({type:"negative",message:o}),console.error(d)}},irParaAtendimentoFatura(d){this.$router.push({name:"AtendimentoFatura",params:{id:d}})},async migrarFatura(d){try{await new Promise((o,h)=>{this.$q.dialog({message:"Esta a\xE7\xE3o ir\xE1 migrar esta venda para outra fatura.",noRefocus:!0,preventClose:!0,title:"Tem certeza?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(()=>{o()}).onCancel(()=>{h()})})}catch{return}d||(d=$db.fatura.criar(this.dados.venda),await $db.fatura.grava({fatura:d})),d.id?(await $db.documento.grava({atual:{id:this.dados.venda.id,idFatura:d.id},original:{id:this.dados.venda.id}}),localStorage.setItem("idFatura",d.id),this.dados.venda.idContato&&(this.$emit("executar","atualizar"),this.irParaAtendimentoFatura(this.dados.venda.idContato))):this.$q.notify("N\xE3o foi poss\xEDvel realizar a opera\xE7\xE3o")},alternarDetalhes(d){this.detalhesVisivel=!this.detalhesVisivel,this.layout==="lista"&&this.$emit("verificarListaLayout",{id:d,acao:"detalhes",estado:this.detalhesVisivel})},async atualizar(){var h;const d=await $db.venda.leCompleto(this.id);d.carrinho.sort((c,t)=>new Date(c.dataHoraEmissao)<new Date(t.dataHoraEmissao)?-1:1),d.oss.sort((c,t)=>new Date(c.documento.dataHoraEmissao)<new Date(t.documento.dataHoraEmissao)?-1:1),d.customs.sort((c,t)=>new Date(c.documento.dataHoraEmissao)<new Date(t.documento.dataHoraEmissao)?-1:1),d.kits.sort((c,t)=>new Date(c.documento.dataHoraEmissao)<new Date(t.documento.dataHoraEmissao)?-1:1),(h=d.venda)!=null&&h.idFatura&&(this.fatura=await $db.hibrido.le({table:"documento",id:d.venda.idFatura}));for(const c of d.kits){const t=c.documentosItem.find(f=>f.operacaoFator===-1&&f.operacao!=="Manipula\xE7\xE3o");this.documentoItemKit[c.documento.id]=t}if((d.venda||{}).idContato&&(d.venda||{}).idEmpresa){let c=[];c=await $db.fatura.obterAbertas(d.venda.idContato,d.venda.idEmpresa),this.faturasAbertas=c.sort((t,f)=>!t.numero||t.numero<f.numero?-1:1)}const o={};if(d.venda.idContato){const c=d.venda.idContato;o[c]||(o[c]=await $db.contato.le({id:c}))}if(d.venda.idContatoVendedor){const c=d.venda.idContatoVendedor;o[c]||(o[c]=await $db.contato.le({id:c}))}this.configuraImpressaoOrcamento(d.venda.idEmpresa),this.configuraImpressosWhatsapp(d.venda),this.contatos=o,this.dados=d,await this.$nextTick(),d.venda.id===localStorage.getItem("idVenda")&&(this.$refs.vendaModal.mostrar({id:d.venda.id}),localStorage.removeItem("idVenda"))},async atualizarComDados(){var o,h,c,t;const d=await $db.venda.preparaDados(this.dadosVenda);d.carrinho.sort((f,F)=>new Date(f.dataHoraEmissao)<new Date(F.dataHoraEmissao)?-1:1),d.oss.sort((f,F)=>new Date(f.documento.dataHoraEmissao)<new Date(F.documento.dataHoraEmissao)?-1:1),d.customs.sort((f,F)=>new Date(f.documento.dataHoraEmissao)<new Date(F.documento.dataHoraEmissao)?-1:1),d.kits.sort((f,F)=>new Date(f.documento.dataHoraEmissao)<new Date(F.documento.dataHoraEmissao)?-1:1),(o=d.venda)!=null&&o.idFatura&&(this.fatura=await $db.hibrido.le({table:"documento",id:d.venda.idFatura}));for(const f of d.kits){const F=f.documentosItem.find(G=>G.operacaoFator===-1&&G.operacao!=="Manipula\xE7\xE3o");this.documentoItemKit[f.documento.id]=F}this.faturasAbertas=((c=(h=this.vendasCompletas)==null?void 0:h.faturasAbertas)==null?void 0:c.filter(f=>f.idEmpresa===d.venda.idEmpresa))||[],this.configuraImpressaoOrcamento(d.venda.idEmpresa),this.configuraImpressosWhatsapp(d.venda),this.contatos=((t=this.vendasCompletas)==null?void 0:t.dadosContatos)||{},this.dados=d,await this.$nextTick(),d.venda.id===localStorage.getItem("idVenda")&&(this.$refs.vendaModal.mostrar({id:d.venda.id}),localStorage.removeItem("idVenda"))},async configuraImpressaoOrcamento(d){const o=await $db.configuracoes.porNome("impressao.venda",d),h=[{valor:"invoice",texto:"Or\xE7amento/Venda (Invoice)"}];this.sistemaPai==="optisoul"&&h.push({valor:"orcamento",texto:"Or\xE7amento (Antigo)"},{valor:"termoGarantia",texto:"Termo de Garantia"}),this.configImpressaoOrcamento=[...o.length?o.map(c=>({texto:"Imprimir Or\xE7amento",...c})):h]},async configuraImpressosWhatsapp(d){const o=await $db.configuracoes.le({prefixoNome:"venda.whatsapp.enviar.",idEmpresa:d.idEmpresa});this.configImpressosWhatsapp=o.map(h=>({...h,idVenda:d.id}))},async dialogEnviar(d){var o,h;try{const c=await $db.hibrido.le({table:"documento",id:d.idVenda});$utils.verificarErro(!(c!=null&&c.id),"Erro ao obter dados");const t=await $db.contato.leCompleto(c.idContato),f=(((o=t==null?void 0:t.telefone)==null?void 0:o.find(F=>F.tipoTelefone==="WhatsApp"))||((h=t==null?void 0:t.telefone)==null?void 0:h.find(F=>F.tipoTelefone==="Principal"))||(t==null?void 0:t.telefone[0])||{}).telefone.trim()||"";$q.dialog({title:"Enviar impresso pelo Whatsapp?",preventClose:!0,prompt:{label:"Enviar para este n\xFAmero:",model:f||"",hint:"Ou adicione um novo n\xFAmero, ex: 19988776655",isValid:F=>F.length>0,type:"text"},cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(async F=>{var oe;c.telefoneContato=F.replace(/\D/g,"");const G=await $db.venda.enviaImpressaoPdfwhatsapp({documento:c,nomeImpresso:d.nome.replace("venda.whatsapp.enviar.",""),mensagem:(oe=d.texto)!=null?oe:`Voc\xEA est\xE1 recebendo o ${d.valor} da empresa ${c.descricaoEmpresa} (${c.numeroDocumentoEmpresa}).`})})}catch{$q.notifyError("Erro ao enviar.",erro)}},copiarUid(){const d=this.$refs.uid;d.type="text";try{d.select(),document.execCommand("copy"),this.$q.notify({message:"UID copiado para a \xE1rea de transfer\xEAncia.",type:"info"})}catch{this.$q.notify("Erro ao copiar.")}d.type="hidden",window.getSelection().removeAllRanges()},async devolucaoGarantia(d){let o=await $db.hibrido.lista({table:"documento",where:{idContato:$db.contato.selecionado.id,tipo:"Venda",status:"Or\xE7amento"}});if(o=$lodash.orderBy(o,"dataHoraEmissao","desc"),!o.length){this.$q.notify({message:"Crie um or\xE7amento para inclus\xE3o de devolu\xE7\xE3o/garantia.",type:"info"});return}this.modalDevolucaoGarantia={visivel:!0,item:d,orcamento:o[0]}},editar(){this.$refs.vendaModal.mostrar({id:this.dados.venda.id})},executar(d){switch(d){case"atualizar":this.atualizar();break;case"cancelar":case"finalizar":case"reprovar":this.$emit("executar","atualizar");break;case"retornarOrcamento":this.$emit("executar",d);break}},async finalizaDevolucaoGarantia(d,o,h){const c=$utils.clonar(d);o==="devolucao"&&(c.operacao="Devolu\xE7\xE3o de Venda"),o==="garantia"&&(c.operacao="Garantia de Venda",c.motivo=h),c.idDocumentoItemVenda=c.id,c.idDocumentoVenda=c.idDocumento,c.id=$utils.uuid(),c.idDocumento=this.modalDevolucaoGarantia.orcamento.id,c.status="Or\xE7amento",c.operacaoFator=1,c.codigoCfop=20,c.idCfop=(await $db.cfop.le({codigoCfop:20}))[0].id,c.dataHoraEmissao=$utils.dataAtual(),c.dataHoraFinalizado="",c.subTotal=c.subTotal*-1,c.total=c.total*-1,c.valorItem=c.valorItem*-1,c.descontoSubTotal=0,delete c.codigoCfop,delete c.codigoDocumento,delete c.codigoDocumentoItem,delete c.codigoItem,delete c.codigoPlanoContaDestino,delete c.codigoPlanoContaEstoque,await $db.documentoItem.grava({atual:c}),this.$q.notify({message:"Item adicionado ao or\xE7amento.",type:"positive"}),localStorage.setItem("idVenda",this.modalDevolucaoGarantia.orcamento.id),this.$emit("executar","atualizar")},async remover(){this.$q.dialog({message:"Esta a\xE7\xE3o ir\xE1 remover esta venda da fatura",title:"Tem certeza?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(async()=>{try{await $db.venda.checarConflitoStatus({id:this.dados.venda.id,status:this.dados.venda.status})}catch(d){return $q.notifyError(d.message),!1}await $db.documento.grava({atual:{id:this.dados.venda.id,idFatura:""},original:{id:this.dados.venda.id}}),this.$emit("executar","remover")})},onResize(){this.width=window.innerWidth}},watch:{async dados(d){var h;this.visibilidade.botao.editar=!1,this.visibilidade.botao.visualizar=!1,this.visibilidade.botao.remover=!1;let o=(h=this.vendasCompletas)==null?void 0:h.contatosEmpresa;if(!o){const t=(await $db.hibrido.lista({table:"empresa",columns:["idContato"],whereFilter:{ativo:!0}})).map(({idContato:f})=>f);o=await $db.hibrido.lista({table:"contato",columns:["id"],whereIn:{id:t},whereFilter:{ativo:!0}})}!o.find(c=>c.id===d.venda.idEmpresa)||(d.venda.idFatura&&this.faturasAbertas.find(c=>c.id===d.venda.idFatura)&&(this.visibilidade.botao.remover=await $db.permissao.objeto("Diretiva_Vendas_RemoverVendaFatura")),!~["Cancelado","N\xE3o Aprovado"].indexOf(d.venda.status)&&!d.venda.idFatura&&(this.visibilidade.botao.editar=!0),this.visibilidade.botao.editar||(this.visibilidade.botao.visualizar=!0))}},async mounted(){var d,o,h,c,t,f,F,G;this.sistemaPai=$utils.sistemaPai(),this.dadosVenda&&this.vendasCompletas?await this.atualizarComDados():await this.atualizar(),this.quantidadeProdutos=(((o=(d=this.dados)==null?void 0:d.carrinho)==null?void 0:o.length)||0)+(((c=(h=this.dados)==null?void 0:h.customs)==null?void 0:c.length)||0)+(((f=(t=this.dados)==null?void 0:t.oss)==null?void 0:f.length)||0)+(((G=(F=this.dados)==null?void 0:F.kits)==null?void 0:G.length)||0)||0,this.$emit("carregou")}},Ie={id:"VendaCard"},ze={class:"col-12 col-md-6 q-pl-none"},He={class:"q-item-section"},Se={class:"col-6 col-md hideonmobile"},Oe={class:"text-left q-my-none"},Ae={class:"col-4 col-md hideonmobile"},Ne={class:"text-left q-my-none"},Me={class:"col-4 col-md hideonmobile"},Pe={class:"text-left q-my-none"},Te={class:"col-6 col-md hideonmobile"},Re={class:"text-right text-h5 text-positive text-weight-bold q-my-none"},Qe={class:"text-right text-weight-normal text-tertiary text-body2 q-my-none"},We={class:"col-12 hideondesktop"},Ge={class:"text-left q-my-none"},Ue={class:"col-12 col-md-6"},Be={class:"col-12 col-md-6 full-height items-end hideonmobile"},Ke={class:"col-6"},Le={class:"text-left q-my-none"},je={class:"text-left q-my-none"},Je={class:"col-6"},Xe={class:"text-right text-weight-normal text-tertiary text-body2 q-my-none"},Ye={class:"text-right text-h5 text-positive text-weight-bold q-my-none"},Ze={class:"col-12 full-height items-end"},$e={class:"col-12 col-md-6"},ea={class:"text-subtitle1 text-weight-bold q-ma-none items-center"},aa={class:"q-ma-none"},ta={key:0},oa={class:"col-6 col-md-4"},da={class:"q-ma-none"},la={class:"col-6 col-md-2 text-right"},ia={class:"q-ma-none"},na={class:"mw80 text-center"},sa={style:{"margin-left":"14px"}},ra={style:{"margin-left":"14px"}},ua={class:"float-right text-weight-medium text-right q-ml-sm",style:{"min-width":"70px"}};function ma(d,o,h,c,t,f){var le,ie,ne,se,re,ue,me,ce;const F=B("avatar"),G=B("row"),oe=B("documentos-fiscais"),de=B("BadgeCopiarUid"),Z=B("badge"),A=B("g-label"),P=B("g-col"),K=B("g-row"),ke=B("DocumentosFiscais"),ge=B("VendaModal"),ye=B("ModalHistoricoStatus");return l(),w("div",Ie,[h.layout==="card"?(l(),w(V,{key:0},[t.dados.venda.id?(l(),u(xe,{key:0,class:"extratoItem bg-white q-pa-sm no-shadow"},{default:e(()=>[a(G,{class:"items-center justify-between q-mx-none q-px-none q-mb-sm"},{default:e(()=>{var s;return[p("div",ze,[a(Ce,{class:"q-pa-none"},{default:e(()=>{var r;return[a(F,{imagem:(r=t.contatos[t.dados.venda.idContato])==null?void 0:r.imagem,rotulo:t.dados.venda.descricaoContato,tamanho:"40",style:{float:"left"}},null,8,["imagem","rotulo"]),a(we,null,{default:e(()=>[p("div",He,[a(b,null,{default:e(()=>{var g;return[i(m((g=t.contatos[t.dados.venda.idContato])==null?void 0:g.apelido),1)]}),_:1}),a(b,{caption:""},{default:e(()=>{var g;return[i(m((g=t.contatos[t.dados.venda.idContato])==null?void 0:g.nome),1)]}),_:1})])]),_:1}),a(X,{rounded:"",color:"tertiary",small:""},{default:e(()=>[i(m(t.dados.venda.status),1)]),_:1}),a(X,{class:"q-ml-sm",color:"positive",escuro:"",onClick:f.copiarUid},{default:e(()=>[i(" #"+m(parseInt(t.dados.venda.numero)||(t.dados.venda.id||"").slice(-6))+" ",1),a(k,{class:"q-ml-sm",name:"shopping_cart"}),H(p("input",{type:"hidden","onUpdate:modelValue":o[0]||(o[0]=g=>t.dados.venda.id=g),ref:"uid"},null,512),[[pe,t.dados.venda.id]])]),_:1},8,["onClick"])]}),_:1})]),p("div",Se,[p("p",Oe,[t.contatos[t.dados.venda.idContatoVendedor]?(l(),u(k,{key:0,name:"mdi-account-tie"})):v("",!0),i(" "+m((s=t.contatos[t.dados.venda.idContatoVendedor])==null?void 0:s.apelido)+" ",1),a(W,null,{default:e(()=>o[25]||(o[25]=[i(" Vendedor(a) ")])),_:1})])]),p("div",Ae,[p("p",Ne,[t.dados.venda.dataHoraEmissao?(l(),u(k,{key:0,name:"mdi-calendar-today "})):v("",!0),i(" "+m(d.$filters.data(t.dados.venda.dataHoraEmissao))+" ",1),a(W,null,{default:e(()=>o[26]||(o[26]=[i(" Emiss\xE3o ")])),_:1})])]),p("div",Me,[p("p",Pe,[t.dados.venda.dataHoraFinalizado?(l(),u(k,{key:0,name:"mdi-calendar-check"})):v("",!0),i(" "+m(d.$filters.data(t.dados.venda.dataHoraFinalizado))+" ",1),t.dados.venda.dataHoraFinalizado?(l(),u(W,{key:1},{default:e(()=>o[27]||(o[27]=[i(" Finalizado ")])),_:1})):v("",!0)])]),p("div",Te,[p("p",Re,m(d.$filters.numero(t.dados.venda.totalDocumento,2)),1),p("p",Qe,m(d.$filters.numero(t.dados.venda.subTotal,2)),1)])]}),_:1}),a(j,{class:"hideondesktop q-mb-sm"}),a(G,{class:"q-mx-none q-px-none items-center"},{default:e(()=>{var s;return[p("div",We,[p("p",Ge,[t.contatos[t.dados.venda.idContatoVendedor]?(l(),u(k,{key:0,name:"mdi-account-tie"})):v("",!0),i(" "+m((s=t.contatos[t.dados.venda.idContatoVendedor])==null?void 0:s.apelido)+" ",1),a(W,null,{default:e(()=>o[28]||(o[28]=[i(" Vendedor(a) ")])),_:1})])]),p("div",Ue,[a(J,{class:"no-border text-tertiary"},{default:e(()=>[(l(!0),w(V,null,M(t.dados.carrinho,r=>(l(),u(_,{key:r.id,class:"q-pa-none q-mb-xs",style:{"min-height":"auto"}},{default:e(()=>[a(n,{avatar:"",class:"mw80"},{default:e(()=>[a(b,null,{default:e(()=>[i(m(r.quantidade)+"x",1)]),_:2},1024)]),_:2},1024),a(n,null,{default:e(()=>[a(b,null,{default:e(()=>[i(m(r.descricaoItem),1)]),_:2},1024)]),_:2},1024),a(n,{side:"",top:""},{default:e(()=>[a(b,null,{default:e(()=>[i(m(d.$filters.numero(r.total,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),(l(!0),w(V,null,M(t.dados.customs,r=>(l(),u(_,{key:r.documento.id,class:"q-pa-none q-mb-xs",style:{"min-height":"auto"}},{default:e(()=>[a(n,{avatar:"",class:"mw80"},{default:e(()=>[a(b,null,{default:e(()=>[i(m(r.documento.numero)+"x ",1)]),_:2},1024)]),_:2},1024),a(n,null,{default:e(()=>[a(b,null,{default:e(()=>[i(m(r.documento.descricao),1)]),_:2},1024)]),_:2},1024),a(n,{side:"",top:""},{default:e(()=>[a(b,null,{default:e(()=>[i(m(d.$filters.numero(r.documento.totalDocumento,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),(l(!0),w(V,null,M(t.dados.oss,r=>(l(),u(_,{key:r.documento.id,class:"q-pa-none q-mb-xs",style:{"min-height":"auto"}},{default:e(()=>[a(n,{avatar:"",class:"mw80"},{default:e(()=>[a(b,null,{default:e(()=>[o[29]||(o[29]=i(" OS ")),a(X,{color:"tertiary",small:""},{default:e(()=>[i("#"+m(r.documento.numero),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),a(n,null,{default:e(()=>[a(b,null,{default:e(()=>[i(m(r.documento.descricao),1)]),_:2},1024)]),_:2},1024),a(n,{avatar:"",class:"mw50"},{default:e(()=>[r.documento.status!=="Or\xE7amento"?(l(),u(X,{key:0,rounded:"",color:"tertiary",small:""},{default:e(()=>[i(m(r.documento.status),1)]),_:2},1024)):v("",!0)]),_:2},1024),a(n,{right:"",top:""},{default:e(()=>[a(b,null,{default:e(()=>[i(m(d.$filters.numero(r.documento.totalDocumento,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),(l(!0),w(V,null,M(t.dados.kits,r=>(l(),u(_,{key:r.documento.id,class:"q-pa-none q-mb-xs",style:{"min-height":"auto"}},{default:e(()=>[a(n,{avatar:"",class:"mw80"},{default:e(()=>[a(b,null,{default:e(()=>[i(m(d.$filters.numero(t.documentoItemKit[r.documento.id].quantidade,4))+"x",1)]),_:2},1024)]),_:2},1024),a(n,null,{default:e(()=>[a(b,null,{default:e(()=>[i(m(t.documentoItemKit[r.documento.id].descricaoItem),1)]),_:2},1024)]),_:2},1024),a(n,{side:"",top:""},{default:e(()=>[a(b,null,{default:e(()=>[i(m(d.$filters.numero(t.documentoItemKit[r.documento.id].total,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),p("div",Be,[a(j,{class:"hideondesktop q-mb-sm q-mt-xs"}),a(T,{rounded:"",dense:"",flat:"",icon:"more_vert",color:"tertiary",class:"no-shadow q-mx-xs",size:"md",style:{float:"right"}},{default:e(()=>[a(Y,null,{default:e(()=>[H((l(),u(J,{link:"",separator:""},{default:e(()=>[d.$utils.mapearStatus(t.dados.venda).permiteNota?(l(),w(V,{key:0},[H((l(),u(_,{clickable:"",onClick:o[1]||(o[1]=r=>d.emitirNFeV2({idVenda:t.dados.venda.id},1,"Venda"))},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"account_balance"})]),_:1}),a(n,null,{default:e(()=>o[30]||(o[30]=[i("NFe de Sa\xEDda/Venda")])),_:1})]),_:1})),[[N]]),H((l(),u(_,{clickable:"",onClick:o[2]||(o[2]=r=>d.emitirNFeV2({idVenda:t.dados.venda.id},0,"Devolu\xE7\xE3o"))},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"account_balance"})]),_:1}),a(n,null,{default:e(()=>o[31]||(o[31]=[i("NFe de Entrada/Devolu\xE7\xE3o")])),_:1})]),_:1})),[[N]]),H((l(),u(_,{clickable:"",onClick:o[3]||(o[3]=r=>d.emitirNFeV2({idVenda:t.dados.venda.id},1,"Remessa"))},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"account_balance"})]),_:1}),a(n,null,{default:e(()=>o[32]||(o[32]=[i("NFe de Remessa")])),_:1})]),_:1})),[[N]])],64)):v("",!0),f.podeMigrarFatura?(l(),w(V,{key:1},[(l(!0),w(V,null,M(t.faturasAbertas.filter(r=>r.id!==t.dados.venda.idFatura),r=>H((l(),u(_,{clickable:"",key:r.id,onClick:g=>f.migrarFatura(r)},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"mdi-folder-move"})]),_:1}),a(n,null,{default:e(()=>[i(m("Migrar para fatura #"+(r.numero||r.id.slice(-6))),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[N]])),128)),H((l(),u(_,{clickable:"",onClick:o[4]||(o[4]=r=>f.migrarFatura())},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"mdi-folder-move"})]),_:1}),a(n,null,{default:e(()=>o[33]||(o[33]=[i("Migrar para nova fatura")])),_:1})]),_:1})),[[N]])],64)):v("",!0),a(_,{clickable:"",onClick:o[5]||(o[5]=r=>d.$refs.modalHistoricoStatus.mostrar({idDocumento:t.dados.venda.id}))},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"history"})]),_:1}),a(n,null,{default:e(()=>o[34]||(o[34]=[i("Hist\xF3rico do Status")])),_:1})]),_:1}),a(_,{clickable:"",onClick:f.duplicarVenda},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"mdi-content-duplicate"})]),_:1}),a(n,null,{default:e(()=>o[35]||(o[35]=[i("Duplicar Pedido")])),_:1})]),_:1},8,["onClick"]),(l(!0),w(V,null,M(t.configImpressosWhatsapp.filter(r=>r.valor),r=>(l(),u(_,{clickable:"",key:r.valor,onClick:g=>f.dialogEnviar(r)},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"mdi-whatsapp"})]),_:1}),a(n,null,{default:e(()=>[i(m(r.valor),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),h.resetarEnvio&&t.dados.venda.rotaJson&&t.dados.venda.rotaJson.length>0?(l(),u(_,{key:2,clickable:"",onClick:o[6]||(o[6]=r=>h.resetarEnvio(t.dados.venda))},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"restart_alt"})]),_:1}),a(n,null,{default:e(()=>o[36]||(o[36]=[i("Resetar Envio")])),_:1})]),_:1})):v("",!0)]),_:1})),[[N]])]),_:1})]),_:1}),t.visibilidade.botao.remover?(l(),u(T,{key:0,rounded:"",dense:"",flat:"",icon:"clear",color:"tertiary",class:"no-shadow q-mx-xs",size:"md",onClick:f.remover,style:{float:"right"}},null,8,["onClick"])):v("",!0),t.visibilidade.botao.editar?(l(),u(T,{key:1,rounded:"",dense:"",flat:"",icon:"edit",color:"primary",class:"no-shadow q-mx-xs",size:"md",onClick:f.editar,style:{float:"right"}},null,8,["onClick"])):v("",!0),t.visibilidade.botao.visualizar?(l(),u(T,{key:2,rounded:"",dense:"",flat:"",icon:"remove_red_eye",color:"primary",class:"no-shadow q-mx-xs",size:"md",onClick:f.editar,style:{float:"right"}},null,8,["onClick"])):v("",!0),a(T,{rounded:"",dense:"",flat:"",icon:"print",color:"primary",class:"no-shadow q-mx-xs",size:"md",style:{float:"right"}},{default:e(()=>[a(Y,null,{default:e(()=>[a(J,{link:"",separator:""},{default:e(()=>[(l(!0),w(V,null,M(t.configImpressaoOrcamento.filter(r=>r.valor),r=>(l(),u(_,{clickable:"",key:r.valor,onClick:g=>d.$imprimir(r.valor,{id:(t.dados.venda||{}).id||"0",Oculto:"0"})},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"print"})]),_:1}),a(n,null,{default:e(()=>[a(b,null,{default:e(()=>[i(m(r.texto),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),a(T,{rounded:"",dense:"",flat:"",icon:t.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down",size:"md",class:"no-shadow q-mx-xs",color:"tertiary",style:{float:"right"},onClick:f.alternarDetalhes},null,8,["icon","onClick"])])]}),_:1}),a(j,{class:"hideondesktop q-mb-sm q-mt-xs"}),a(G,{class:"q-mx-none q-px-none hideondesktop"},{default:e(()=>[p("div",Ke,[p("p",Le,[t.dados.venda.dataHoraEmissao?(l(),u(k,{key:0,name:"mdi-calendar-today"})):v("",!0),i(" "+m(d.$filters.data(t.dados.venda.dataHoraEmissao))+" ",1),a(W,null,{default:e(()=>o[37]||(o[37]=[i(" Emiss\xE3o ")])),_:1})]),p("p",je,[t.dados.venda.dataHoraFinalizado?(l(),u(k,{key:0,name:"mdi-calendar-check"})):v("",!0),i(" "+m(d.$filters.data(t.dados.venda.dataHoraFinalizado))+" ",1),t.dados.venda.dataHoraFinalizado?(l(),u(W,{key:1},{default:e(()=>o[38]||(o[38]=[i(" Finalizado ")])),_:1})):v("",!0)])]),p("div",Je,[p("p",Xe,m(d.$filters.numero(t.dados.venda.subTotal,2)),1),p("p",Ye,m(d.$filters.numero(t.dados.venda.totalDocumento,2)),1)]),p("div",Ze,[a(j,{class:"hideondesktop q-mb-sm q-mt-xs"}),a(T,{rounded:"",dense:"",flat:"",icon:"more_vert",color:"tertiary",class:"no-shadow q-mx-xs",size:"md",style:{float:"right"}},{default:e(()=>[a(Y,null,{default:e(()=>[H((l(),u(J,{link:"",separator:""},{default:e(()=>[d.$utils.mapearStatus(t.dados.venda).permiteNota?(l(),w(V,{key:0},[H((l(),u(_,{clickable:"",onClick:o[7]||(o[7]=s=>d.emitirNFeV2({idVenda:t.dados.venda.id},1,"Venda"))},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"account_balance"})]),_:1}),a(n,null,{default:e(()=>o[39]||(o[39]=[i("NFe de Sa\xEDda/Venda")])),_:1})]),_:1})),[[N]]),H((l(),u(_,{clickable:"",onClick:o[8]||(o[8]=s=>d.emitirNFeV2({idVenda:t.dados.venda.id},0,"Devolu\xE7\xE3o"))},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"account_balance"})]),_:1}),a(n,null,{default:e(()=>o[40]||(o[40]=[i("NFe de Entrada/Devolu\xE7\xE3o")])),_:1})]),_:1})),[[N]]),H((l(),u(_,{clickable:"",onClick:o[9]||(o[9]=s=>d.emitirNFeV2({idVenda:t.dados.venda.id},1,"Remessa"))},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"account_balance"})]),_:1}),a(n,null,{default:e(()=>o[41]||(o[41]=[i("NFe de Remessa")])),_:1})]),_:1})),[[N]])],64)):v("",!0),f.podeMigrarFatura?(l(),w(V,{key:1},[(l(!0),w(V,null,M(t.faturasAbertas.filter(s=>s.id!==t.dados.venda.idFatura),s=>H((l(),u(_,{key:s.id,onClick:r=>f.migrarFatura(s)},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"mdi-folder-move"})]),_:1}),a(n,null,{default:e(()=>[i(m("Migrar para fatura #"+(s.numero||s.id.slice(-6))),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[N]])),128)),H((l(),u(_,{onClick:o[10]||(o[10]=s=>f.migrarFatura())},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"mdi-folder-move"})]),_:1}),a(n,null,{default:e(()=>o[42]||(o[42]=[i("Migrar para nova fatura")])),_:1})]),_:1})),[[N]])],64)):v("",!0),a(_,{clickable:"",onClick:o[11]||(o[11]=s=>d.$refs.modalHistoricoStatus.mostrar({idDocumento:t.dados.venda.id}))},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"history"})]),_:1}),a(n,null,{default:e(()=>o[43]||(o[43]=[i("Hist\xF3rico do Status")])),_:1})]),_:1}),(l(!0),w(V,null,M(t.configImpressosWhatsapp.filter(s=>s.valor),s=>(l(),u(_,{clickable:"",key:s.valor,onClick:r=>f.dialogEnviar(s)},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"mdi-whatsapp"})]),_:1}),a(n,null,{default:e(()=>[i(m(s.valor),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})),[[N]])]),_:1})]),_:1}),t.visibilidade.botao.remover?(l(),u(T,{key:0,rounded:"",dense:"",flat:"",icon:"clear",color:"tertiary",class:"no-shadow q-mx-xs",size:"md",onClick:f.remover,style:{float:"right"}},null,8,["onClick"])):v("",!0),t.visibilidade.botao.editar?(l(),u(T,{key:1,rounded:"",dense:"",flat:"",icon:"edit",color:"primary",class:"no-shadow q-mx-xs",size:"md",onClick:f.editar,style:{float:"right"}},null,8,["onClick"])):v("",!0),a(T,{rounded:"",dense:"",flat:"",icon:"print",color:"primary",class:"no-shadow q-mx-xs",size:"md",style:{float:"right"}},{default:e(()=>[a(Y,null,{default:e(()=>[a(J,{link:"",separator:""},{default:e(()=>[(l(!0),w(V,null,M(t.configImpressaoOrcamento.filter(s=>s.valor),s=>(l(),u(_,{clickable:"",key:s.valor,onClick:r=>d.$imprimir(s.valor,{id:(t.dados.venda||{}).id||"0",Oculto:"0"})},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"print"})]),_:1}),a(n,null,{default:e(()=>[a(b,null,{default:e(()=>[i(m(s.texto),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),a(T,{rounded:"",dense:"",flat:"",icon:t.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down",size:"md",class:"no-shadow q-mx-xs",color:"tertiary",style:{float:"right"},onClick:f.alternarDetalhes},null,8,["icon","onClick"])])]),_:1}),t.detalhesVisivel?(l(),u(j,{key:0,class:"hideondesktop q-my-sm"})):v("",!0),t.detalhesVisivel?(l(),u(G,{key:1,class:"items-start q-mx-none q-px-none q-mt-md"},{default:e(()=>[p("div",$e,[p("p",ea,[a(k,{name:"business"}),i(" "+m(t.dados.venda.descricaoEmpresa),1)]),p("div",aa,[t.fatura.id?(l(),w("div",ta,[o[44]||(o[44]=i(" Fatura ")),a(X,{color:"positive",escuro:"",onClick:f.copiarUid},{default:e(()=>[i(" #"+m(parseInt(t.fatura.numero)||(t.fatura.id||"").slice(-6))+" ",1),a(k,{class:"q-ml-sm",name:"mdi-glasses"}),H(p("input",{type:"hidden","onUpdate:modelValue":o[12]||(o[12]=s=>t.fatura.id=s),ref:"uid"},null,512),[[pe,t.fatura.id]])]),_:1},8,["onClick"]),a(X,{class:"q-ml-sm",rounded:"",color:"tertiary",small:""},{default:e(()=>[i(m(t.fatura.status),1)]),_:1})])):v("",!0),p("div",null,m(t.dados.venda.observacao),1),p("div",null,m(t.dados.venda.observacaoInterna),1),p("div",null,m(t.dados.venda.motivoCancelamento),1),p("div",null,m(t.dados.venda.observacaoCancelamento),1)]),a(oe,{idVenda:t.dados.venda.id},null,8,["idVenda"])]),p("div",oa,[o[45]||(o[45]=p("p",{class:"text-subtitle1 text-weight-bold q-ma-none"}," Faturamento ",-1)),p("div",da,m(t.dados.venda.observacaoFaturamento),1)]),p("div",la,[o[46]||(o[46]=p("p",{class:"text-subtitle1 text-weight-bold q-ma-none"}," Desconto ",-1)),p("p",ia,m(d.$filters.numero(t.dados.venda.totalDesconto,2)),1)])]),_:1})):v("",!0)]),_:1})):v("",!0)],64)):v("",!0),h.layout==="lista"?(l(),w(V,{key:1},[a(qe,{onResize:f.onResize},null,8,["onResize"]),(ie=(le=t.dados)==null?void 0:le.venda)!=null&&ie.id?(l(),u(_,{key:0,clickable:"","manual-focus":"",class:"q-py-sm q-px-xs items-center"},{default:e(()=>[a(n,{class:"hideonmobile col-auto q-pr-sm no-margin"},{default:e(()=>{var s,r,g,x;return[p("div",na,[a(de,{id:(r=(s=t.dados)==null?void 0:s.venda)==null?void 0:r.id,numero:(x=(g=t.dados)==null?void 0:g.venda)==null?void 0:x.numero,cor:"positive",escuro:""},null,8,["id","numero"])])]}),_:1}),a(n,{onClick:o[13]||(o[13]=s=>f.editar()),class:"col-md col-lg col-xl no-margin"},{default:e(()=>[a(_,{class:"q-pa-none"},{default:e(()=>[a(n,{class:"col-auto items-center"},{default:e(()=>{var s,r,g,x,E;return[a(F,{imagem:(g=t.contatos[(r=(s=t.dados)==null?void 0:s.venda)==null?void 0:r.idContato]||{})==null?void 0:g.imagem,tamanho:"40",rotulo:(E=(x=t.dados)==null?void 0:x.venda)==null?void 0:E.descricaoContato,style:{display:"flex","align-self":"center"}},null,8,["imagem","rotulo"])]}),_:1}),a(n,{class:"col"},{default:e(()=>{var s,r,g,x,E,S,R,Q,L,$;return[a(b,{lines:"2",class:"text-weight-bold"},{default:e(()=>{var D,I,O;return[p("span",null,[i(m((O=t.contatos[(I=(D=t.dados)==null?void 0:D.venda)==null?void 0:I.idContato])==null?void 0:O.apelido)+" ",1),a(W,{anchor:"bottom middle",self:"center middle"},{default:e(()=>o[47]||(o[47]=[i("Nome Fantasia")])),_:1})])]}),_:1}),((g=t.contatos[(r=(s=t.dados)==null?void 0:s.venda)==null?void 0:r.idContato])==null?void 0:g.nome)!==((S=t.contatos[(E=(x=t.dados)==null?void 0:x.venda)==null?void 0:E.idContato])==null?void 0:S.apelido)?(l(),u(b,{key:0,caption:"",lines:"2"},{default:e(()=>{var D,I,O;return[p("span",null,[i(m((O=t.contatos[(I=(D=t.dados)==null?void 0:D.venda)==null?void 0:I.idContato])==null?void 0:O.nome)+" ",1),a(W,{anchor:"bottom middle",self:"center middle"},{default:e(()=>o[48]||(o[48]=[i("Raz\xE3o Social")])),_:1})])]}),_:1})):v("",!0),a(b,{caption:"",class:"hideondesktop"},{default:e(()=>{var D,I,O,y,z,C,q,U,ee,ae,te,fe,ve;return[a(de,{id:(I=(D=t.dados)==null?void 0:D.venda)==null?void 0:I.id,numero:(y=(O=t.dados)==null?void 0:O.venda)==null?void 0:y.numero,cor:"positive",escuro:"",class:"q-mr-sm"},null,8,["id","numero"]),(C=(z=t.dados)==null?void 0:z.venda)!=null&&C.status?(l(),u(Z,{key:0,escuro:"",dica:"Status",class:"col-auto q-mx-auto",rotulo:(ee=((U=(q=t.dados)==null?void 0:q.venda)==null?void 0:U.status)||"")==null?void 0:ee.replace("Aguardando ","Ag. "),cor:(te=(ae=t.dados)==null?void 0:ae.venda)!=null&&te.status?t.status[(ve=(fe=t.dados)==null?void 0:fe.venda)==null?void 0:ve.status]:"tertiary"},null,8,["rotulo","cor"])):v("",!0)]}),_:1}),(Q=(R=t.dados)==null?void 0:R.venda)!=null&&Q.descricaoEmpresa?(l(),u(b,{key:1,caption:"",lines:"2"},{default:e(()=>{var D,I;return[p("span",null,[a(k,{name:"business"}),i(" "+m((I=(D=t.dados)==null?void 0:D.venda)==null?void 0:I.descricaoEmpresa)+" ",1),a(W,{anchor:"bottom middle",self:"center middle"},{default:e(()=>o[49]||(o[49]=[i(" Empresa ")])),_:1})])]}),_:1})):v("",!0),t.contatos[($=(L=t.dados)==null?void 0:L.venda)==null?void 0:$.idContatoVendedor]?(l(),u(b,{key:2,caption:"",lines:"2"},{default:e(()=>{var D,I,O;return[p("span",null,[a(k,{name:"mdi-account-tie"}),i(" "+m((O=t.contatos[(I=(D=t.dados)==null?void 0:D.venda)==null?void 0:I.idContatoVendedor])==null?void 0:O.apelido)+" ",1),a(W,{anchor:"bottom middle",self:"center middle"},{default:e(()=>o[50]||(o[50]=[i(" Vendedor(a) ")])),_:1})])]}),_:1})):v("",!0),a(n,{class:"hideondesktop q-mt-sm"},{default:e(()=>[a(_,{class:"q-pa-none",style:{"min-height":"36px!important"}},{default:e(()=>[a(n,{top:"",class:"col-5 no-margin"},{default:e(()=>{var D,I,O,y;return[(I=(D=t.dados)==null?void 0:D.venda)!=null&&I.dataHoraEmissao?(l(),u(b,{key:0,caption:""},{default:e(()=>{var z,C;return[a(k,{name:"mdi-calendar-today",style:{position:"absolute","margin-top":"2px"}}),p("span",sa,m(d.$filters.data((C=(z=t.dados)==null?void 0:z.venda)==null?void 0:C.dataHoraEmissao)),1)]}),_:1})):v("",!0),(y=(O=t.dados)==null?void 0:O.venda)!=null&&y.dataHoraFinalizado?(l(),u(b,{key:1,caption:""},{default:e(()=>{var z,C;return[a(k,{name:"mdi-calendar",style:{position:"absolute","margin-top":"2px"}}),p("span",ra,m(d.$filters.data((C=(z=t.dados)==null?void 0:z.venda)==null?void 0:C.dataHoraFinalizado)),1)]}),_:1})):v("",!0)]}),_:1}),a(n,{top:"",class:"col-7 no-margin text-right"},{default:e(()=>{var D,I,O,y,z,C;return[(I=(D=t.dados)==null?void 0:D.venda)!=null&&I.totalDocumento?(l(),u(b,{key:0,caption:"",class:"text-weight-bold"},{default:e(()=>{var q,U;return[i(m(d.$filters.numero((U=(q=t.dados)==null?void 0:q.venda)==null?void 0:U.totalDocumento,2)),1)]}),_:1})):v("",!0),((y=(O=t.dados)==null?void 0:O.venda)==null?void 0:y.subTotal)!==((C=(z=t.dados)==null?void 0:z.venda)==null?void 0:C.totalDocumento)?(l(),u(b,{key:1,caption:""},{default:e(()=>{var q,U;return[i(m(d.$filters.numero((U=(q=t.dados)==null?void 0:q.venda)==null?void 0:U.subTotal,2)),1)]}),_:1})):v("",!0)]}),_:1})]),_:1})]),_:1})]}),_:1})]),_:1})]),_:1}),a(n,{onClick:o[14]||(o[14]=s=>f.editar()),class:"hideonmobile maxw110 q-pl-sm no-margin"},{default:e(()=>{var s,r,g,x;return[(r=(s=t.dados)==null?void 0:s.venda)!=null&&r.dataHoraEmissao?(l(),u(b,{key:0,lines:"2",class:"ellipsis"},{default:e(()=>{var E,S;return[p("span",null,[a(k,{name:"mdi-calendar-today"}),i(" "+m(d.$filters.data((S=(E=t.dados)==null?void 0:E.venda)==null?void 0:S.dataHoraEmissao))+" ",1),a(W,{anchor:"bottom middle",self:"center middle"},{default:e(()=>{var R,Q;return[i(" Emitido \xE0s "+m(d.$filters.hora((Q=(R=t.dados)==null?void 0:R.venda)==null?void 0:Q.dataHoraEmissao)),1)]}),_:1})])]}),_:1})):v("",!0),(x=(g=t.dados)==null?void 0:g.venda)!=null&&x.dataHoraFinalizado?(l(),u(b,{key:1,lines:"2",class:"ellipsis"},{default:e(()=>{var E,S;return[p("span",null,[a(k,{name:"mdi-calendar"}),i(" "+m(d.$filters.data((S=(E=t.dados)==null?void 0:E.venda)==null?void 0:S.dataHoraFinalizado))+" ",1),a(W,{anchor:"bottom middle",self:"center middle"},{default:e(()=>{var R,Q;return[i(" Finalizado \xE1s "+m(d.$filters.hora((Q=(R=t.dados)==null?void 0:R.venda)==null?void 0:Q.dataHoraFinalizado)),1)]}),_:1})])]}),_:1})):v("",!0)]}),_:1}),a(n,{onClick:o[15]||(o[15]=s=>f.editar()),class:"hideonmobile maxw120 q-pl-sm no-margin"},{default:e(()=>{var s,r,g,x,E,S,R,Q,L;return[(r=(s=t.dados)==null?void 0:s.venda)!=null&&r.status?(l(),u(Z,{key:0,escuro:"",dica:"Status",class:"col-auto q-mx-auto",rotulo:(E=((x=(g=t.dados)==null?void 0:g.venda)==null?void 0:x.status)||"")==null?void 0:E.replace("Aguardando ","Ag. "),cor:(R=(S=t.dados)==null?void 0:S.venda)!=null&&R.status?t.status[(L=(Q=t.dados)==null?void 0:Q.venda)==null?void 0:L.status]:"tertiary"},null,8,["rotulo","cor"])):v("",!0)]}),_:1}),a(n,{onClick:o[16]||(o[16]=s=>f.editar()),class:"hideonmobile maxw120 q-pl-sm no-margin"},{default:e(()=>{var s,r,g,x;return[(r=(s=t.dados)==null?void 0:s.venda)!=null&&r.totalDocumento?(l(),u(b,{key:0,class:"text-weight-bold text-right"},{default:e(()=>{var E,S;return[p("span",null,[i(m(d.$filters.numero((S=(E=t.dados)==null?void 0:E.venda)==null?void 0:S.totalDocumento,2))+" ",1),a(W,{anchor:"bottom middle",self:"center middle"},{default:e(()=>o[51]||(o[51]=[i(" Total ")])),_:1})])]}),_:1})):v("",!0),(x=(g=t.dados)==null?void 0:g.venda)!=null&&x.subTotal?(l(),u(b,{key:1,class:"text-caption text-right"},{default:e(()=>{var E,S;return[p("span",null,[i(m(d.$filters.numero((S=(E=t.dados)==null?void 0:E.venda)==null?void 0:S.subTotal,2))+" ",1),a(W,{anchor:"bottom middle",self:"center middle"},{default:e(()=>o[52]||(o[52]=[i(" Subtotal ")])),_:1})])]}),_:1})):v("",!0)]}),_:1}),a(n,{class:"col-auto q-pl-sm no-margin"},{default:e(()=>[a(_,{class:"q-pa-none"},{default:e(()=>[a(n,{class:"no-margin hideonmobile",style:{width:"32px"}},{default:e(()=>[a(T,{onClick:o[17]||(o[17]=s=>{var r,g;return f.alternarDetalhes((g=(r=t.dados)==null?void 0:r.venda)==null?void 0:g.id)}),icon:t.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down",rounded:"",dense:"",flat:"",size:"md",color:"tertiary"},null,8,["icon"])]),_:1}),a(n,{class:"no-margin hideonmobile",style:{width:"32px"}},{default:e(()=>[t.visibilidade.botao.editar?(l(),u(T,{key:0,onClick:f.editar,rounded:"",dense:"",flat:"",icon:"edit",size:"md",color:"primary"},null,8,["onClick"])):v("",!0),t.visibilidade.botao.visualizar?(l(),u(T,{key:1,onClick:f.editar,rounded:"",dense:"",flat:"",icon:"remove_red_eye",size:"md",color:"primary"},null,8,["onClick"])):v("",!0)]),_:1}),a(n,{class:"no-margin hideonmobile",style:{width:"32px"}},{default:e(()=>[a(T,{icon:"print",size:"md",round:"",flat:"",dense:""},{default:e(()=>[a(Y,null,{default:e(()=>[H((l(),u(J,{link:"","no-border":"",separator:""},{default:e(()=>[(l(!0),w(V,null,M(t.configImpressaoOrcamento.filter(s=>s.valor),s=>(l(),u(_,{onClick:r=>{var g,x;return d.$imprimir(s.valor,{id:((x=(g=t.dados)==null?void 0:g.venda)==null?void 0:x.id)||"0",Oculto:"0"})},key:s.valor,clickable:""},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"print"})]),_:1}),a(n,null,{default:e(()=>[i(m(s.texto),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})),[[N]])]),_:1})]),_:1})]),_:1}),a(n,{class:"no-margin",style:{width:"32px"}},{default:e(()=>[a(T,{icon:"more_vert",size:"md",round:"",flat:"",dense:""},{default:e(()=>[a(Y,null,{default:e(()=>[H((l(),u(J,{link:"","no-border":"",separator:""},{default:e(()=>[t.visibilidade.botao.remover?(l(),u(_,{key:0,onClick:f.remover,clickable:""},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"delete"})]),_:1}),a(n,null,{default:e(()=>[a(b,null,{default:e(()=>o[53]||(o[53]=[i("Remover")])),_:1}),a(b,{caption:""},{default:e(()=>o[54]||(o[54]=[i("Venda")])),_:1})]),_:1})]),_:1},8,["onClick"])):v("",!0),t.visibilidade.botao.editar||t.visibilidade.botao.visualizar?(l(),u(_,{key:1,onClick:f.editar,clickable:"",class:"hideondesktop"},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[t.visibilidade.botao.editar?(l(),u(k,{key:0,name:"edit"})):v("",!0),t.visibilidade.botao.visualizar?(l(),u(k,{key:1,name:"remove_red_eye"})):v("",!0)]),_:1}),a(n,null,{default:e(()=>[t.visibilidade.botao.editar?(l(),u(b,{key:0},{default:e(()=>o[55]||(o[55]=[i(" Editar ")])),_:1})):v("",!0),t.visibilidade.botao.visualizar?(l(),u(b,{key:1},{default:e(()=>o[56]||(o[56]=[i(" Visualizar ")])),_:1})):v("",!0),a(b,{caption:""},{default:e(()=>o[57]||(o[57]=[i("Venda")])),_:1})]),_:1})]),_:1},8,["onClick"])):v("",!0),a(_,{onClick:o[18]||(o[18]=s=>{var r,g;return f.alternarDetalhes((g=(r=t.dados)==null?void 0:r.venda)==null?void 0:g.id)}),clickable:"",class:"hideondesktop"},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:t.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])]),_:1}),a(n,null,{default:e(()=>[a(b,null,{default:e(()=>o[58]||(o[58]=[i("Ver Detalhes")])),_:1}),a(b,{caption:""},{default:e(()=>o[59]||(o[59]=[i("Venda")])),_:1})]),_:1})]),_:1}),d.$utils.mapearStatus(t.dados.venda).permiteNota?(l(),w(V,{key:2},[H((l(),u(_,{onClick:o[19]||(o[19]=s=>d.emitirNFeV2({idVenda:t.dados.venda.id},1,"Venda")),clickable:""},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"account_balance"})]),_:1}),a(n,null,{default:e(()=>[a(b,null,{default:e(()=>o[60]||(o[60]=[i("NFe")])),_:1}),a(b,{caption:""},{default:e(()=>o[61]||(o[61]=[i("Sa\xEDda/Venda")])),_:1})]),_:1})]),_:1})),[[N]]),H((l(),u(_,{onClick:o[20]||(o[20]=s=>d.emitirNFeV2({idVenda:t.dados.venda.id},0,"Devolu\xE7\xE3o")),clickable:""},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"account_balance"})]),_:1}),a(n,null,{default:e(()=>[a(b,null,{default:e(()=>o[62]||(o[62]=[i("NFe")])),_:1}),a(b,{caption:""},{default:e(()=>o[63]||(o[63]=[i("Entrada/Devolu\xE7\xE3o")])),_:1})]),_:1})]),_:1})),[[N]]),H((l(),u(_,{onClick:o[21]||(o[21]=s=>d.emitirNFeV2({idVenda:t.dados.venda.id},1,"Remessa")),clickable:""},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"account_balance"})]),_:1}),a(n,null,{default:e(()=>[a(b,null,{default:e(()=>o[64]||(o[64]=[i("NFe")])),_:1}),a(b,{caption:""},{default:e(()=>o[65]||(o[65]=[i("Remessa")])),_:1})]),_:1})]),_:1})),[[N]])],64)):v("",!0),f.podeMigrarFatura?(l(),w(V,{key:3},[(l(!0),w(V,null,M(t.faturasAbertas.filter(s=>{var r,g;return s.id!==((g=(r=t.dados)==null?void 0:r.venda)==null?void 0:g.idFatura)}),s=>H((l(),u(_,{key:s.id,onClick:r=>f.migrarFatura(s),clickable:""},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"mdi-folder-move"})]),_:1}),a(n,null,{default:e(()=>[a(b,null,{default:e(()=>[i(m("#"+(s.numero||s.id.slice(-6))),1)]),_:2},1024),a(b,{caption:""},{default:e(()=>o[66]||(o[66]=[i("Migrar para fatura")])),_:1})]),_:2},1024)]),_:2},1032,["onClick"])),[[N]])),128)),H((l(),u(_,{onClick:o[22]||(o[22]=s=>f.migrarFatura()),clickable:""},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"mdi-folder-move"})]),_:1}),a(n,null,{default:e(()=>[a(b,null,{default:e(()=>o[67]||(o[67]=[i("Migrar")])),_:1}),a(b,{caption:""},{default:e(()=>o[68]||(o[68]=[i("Para nova fatura")])),_:1})]),_:1})]),_:1})),[[N]])],64)):v("",!0),a(_,{onClick:o[23]||(o[23]=s=>d.$refs.modalHistoricoStatus.mostrar({idDocumento:t.dados.venda.id})),clickable:""},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"history"})]),_:1}),a(n,null,{default:e(()=>[a(b,null,{default:e(()=>o[69]||(o[69]=[i("Hist\xF3rico")])),_:1}),a(b,{caption:""},{default:e(()=>o[70]||(o[70]=[i("De Status")])),_:1})]),_:1})]),_:1}),a(_,{onClick:f.duplicarVenda,clickable:""},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"mdi-content-duplicate"})]),_:1}),a(n,null,{default:e(()=>o[71]||(o[71]=[i("Duplicar Pedido")])),_:1})]),_:1},8,["onClick"]),(l(!0),w(V,null,M(t.configImpressosWhatsapp.filter(s=>s.valor),s=>(l(),u(_,{key:s.valor,onClick:r=>f.dialogEnviar(s),clickable:""},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"mdi-whatsapp"})]),_:1}),a(n,null,{default:e(()=>[i(m(s.valor),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),h.resetarEnvio&&t.dados.venda.rotaJson&&t.dados.venda.rotaJson.length>0?(l(),u(_,{key:4,onClick:o[24]||(o[24]=s=>h.resetarEnvio(t.dados.venda)),clickable:""},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"restart_alt"})]),_:1}),a(n,null,{default:e(()=>o[72]||(o[72]=[i("Resetar Envio")])),_:1})]),_:1})):v("",!0),(l(!0),w(V,null,M(t.configImpressaoOrcamento.filter(s=>s.valor),s=>(l(),u(_,{onClick:r=>{var g,x;return d.$imprimir(s.valor,{id:((x=(g=t.dados)==null?void 0:g.venda)==null?void 0:x.id)||"0",Oculto:"0"})},key:s.valor,clickable:"",class:"hideondesktop"},{default:e(()=>[a(n,{avatar:""},{default:e(()=>[a(k,{name:"print"})]),_:1}),a(n,null,{default:e(()=>[i(m(s.texto),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})),[[N]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):v("",!0),H(a(j,{class:"q-ma-sm"},null,512),[[be,((se=(ne=t.dados)==null?void 0:ne.venda)==null?void 0:se.id)&&t.detalhesVisivel]]),H(a(K,null,{default:e(()=>[a(P,null,{default:e(()=>{var s,r,g,x,E,S,R,Q,L,$,D,I,O;return[((s=t.fatura)==null?void 0:s.id)||((g=(r=t.dados)==null?void 0:r.venda)==null?void 0:g.totalDesconto)?(l(),u(K,{key:0,gutter:"md-x"},{default:e(()=>{var y,z;return[a(P,{col:"xs12 sm"},{default:e(()=>{var C,q,U,ee,ae,te;return[(C=t.fatura)!=null&&C.id?(l(),u(A,{key:0,text:"sub2 medium",inline:"",icon:`request_quote ${t.width<=992?"15px":"xs"} tertiary`,caption:t.width<=992},{default:e(()=>o[73]||(o[73]=[i(" Fatura ")])),_:1},8,["icon","caption"])):v("",!0),(q=t.fatura)!=null&&q.id?(l(),u(de,{key:1,id:(U=t.fatura)==null?void 0:U.id,escuro:"",numero:(ee=t.fatura)==null?void 0:ee.numero,cor:"positive",class:"q-mx-sm"},null,8,["id","numero"])):v("",!0),(ae=t.fatura)!=null&&ae.id?(l(),u(Z,{key:2,rotulo:(te=t.fatura)==null?void 0:te.status,escuro:"",dica:"Status",cor:"tertiary"},null,8,["rotulo"])):v("",!0)]}),_:1}),(z=(y=t.dados)==null?void 0:y.venda)!=null&&z.totalDesconto?(l(),u(P,{key:0,col:"xs12 sm-shrink"},{default:e(()=>[a(A,{text:"sub2 regular",class:"q-pr-sm",caption:t.width<=992},{default:e(()=>{var C,q;return[o[74]||(o[74]=i(" Desconto: ")),p("span",ua,m(d.$filters.numero((q=(C=t.dados)==null?void 0:C.venda)==null?void 0:q.totalDesconto,2)),1)]}),_:1},8,["caption"])]),_:1})):v("",!0)]}),_:1})):v("",!0),a(K,{gutter:"md"},{default:e(()=>[a(P,{col:"xs12 md6",bordered:""},{default:e(()=>[a(A,{icon:`extension ${t.width<=992?"14px":"xs"} tertiary`,caption:t.width<=992,text:"sub2 medium",class:"q-mb-md"},{default:e(()=>o[75]||(o[75]=[i(" Itens ")])),_:1},8,["icon","caption"]),(l(!0),w(V,null,M(t.dados.carrinho,y=>(l(),u(K,{key:y.id,gutter:"none",bordered:`${t.quantidadeProdutos>1?"bottom":!1}`},{default:e(()=>[a(P,null,{default:e(()=>[a(A,{lines:"1",caption:t.width<=992},{default:e(()=>[a(A,{inline:"",text:"medium",class:"q-mr-xs"},{default:e(()=>[i(m(y.quantidade)+"x ",1)]),_:2},1024),i(" "+m(y.descricaoItem),1)]),_:2},1032,["caption"])]),_:2},1024),a(P,{col:"auto",class:"mw120"},{default:e(()=>[a(A,{text:"medium right",caption:t.width<=992},{default:e(()=>[i(m(d.$filters.numero(y.total,2)),1)]),_:2},1032,["caption"])]),_:2},1024)]),_:2},1032,["bordered"]))),128)),(l(!0),w(V,null,M(t.dados.customs,y=>(l(),u(K,{key:y.documento.id,gutter:"none",bordered:`${t.quantidadeProdutos>1?"bottom":!1}`},{default:e(()=>[a(P,null,{default:e(()=>[a(A,{lines:"1",caption:t.width<=992},{default:e(()=>[a(A,{inline:"",text:"medium",class:"q-mr-xs"},{default:e(()=>[i(m(y.documento.numero)+"x ",1)]),_:2},1024),i(" "+m(y.documento.descricao),1)]),_:2},1032,["caption"])]),_:2},1024),a(P,{col:"auto",class:"mw120"},{default:e(()=>[a(A,{text:"medium right",caption:t.width<=992},{default:e(()=>[i(m(d.$filters.numero(y.documento.totalDocumento,2)),1)]),_:2},1032,["caption"])]),_:2},1024)]),_:2},1032,["bordered"]))),128)),(l(!0),w(V,null,M(t.dados.oss,y=>(l(),u(K,{key:y.documento.id,gutter:"none",bordered:`${t.quantidadeProdutos>1?"bottom":!1}`},{default:e(()=>[a(P,null,{default:e(()=>[a(A,{lines:"1",caption:t.width<=992},{default:e(()=>[a(Z,{rotulo:"OS #"+y.documento.numero,dica:"O.S.",escuro:"",cor:"tertiary",class:"q-mr-xs"},null,8,["rotulo"]),y.documento.status!=="Or\xE7amento"?(l(),u(Z,{key:0,rotulo:y.documento.status,cor:"positive",escuro:"",class:"q-mr-xs"},null,8,["rotulo"])):v("",!0),i(" "+m(y.documento.descricao),1)]),_:2},1032,["caption"])]),_:2},1024),a(P,{col:"auto",class:"mw120"},{default:e(()=>[a(A,{text:"medium right",caption:t.width<=992},{default:e(()=>[i(m(d.$filters.numero(y.documento.totalDocumento,2)),1)]),_:2},1032,["caption"])]),_:2},1024)]),_:2},1032,["bordered"]))),128)),(l(!0),w(V,null,M(t.dados.kits,y=>(l(),u(K,{key:y.documento.id,gutter:"none",bordered:`${t.quantidadeProdutos>1?"bottom":!1}`},{default:e(()=>[a(P,null,{default:e(()=>[a(A,{lines:"1",caption:t.width<=992},{default:e(()=>[a(A,{inline:"",text:"medium",class:"q-mr-xs"},{default:e(()=>[i(m(d.$filters.numero(t.documentoItemKit[y.documento.id].quantidade,4))+"x ",1)]),_:2},1024),i(" "+m(t.documentoItemKit[y.documento.id].descricaoItem),1)]),_:2},1032,["caption"])]),_:2},1024),a(P,{col:"auto",class:"mw120"},{default:e(()=>[a(A,{text:"medium right",caption:t.width<=992},{default:e(()=>[i(m(d.$filters.numero(t.documentoItemKit[y.documento.id].total,2)),1)]),_:2},1032,["caption"])]),_:2},1024)]),_:2},1032,["bordered"]))),128))]),_:1}),a(P,{col:"xs12 md6",bordered:""},{default:e(()=>{var y;return[a(ke,{idFatura:(y=t.fatura)==null?void 0:y.id,ref:"documentosFiscais"},null,8,["idFatura"])]}),_:1})]),_:1}),((E=(x=t.dados)==null?void 0:x.venda)==null?void 0:E.observacaoFaturamento)||((R=(S=t.dados)==null?void 0:S.venda)==null?void 0:R.observacao)||((L=(Q=t.dados)==null?void 0:Q.venda)==null?void 0:L.observacaoInterna)||((D=($=t.dados)==null?void 0:$.venda)==null?void 0:D.motivoCancelamento)||((O=(I=t.dados)==null?void 0:I.venda)==null?void 0:O.observacaoCancelamento)?(l(),u(K,{key:1,gutter:"md"},{default:e(()=>[a(P,{col:"xs12 md4",bordered:""},{default:e(()=>{var y,z;return[a(A,{text:"sub2 regular",caption:t.width<=992},{default:e(()=>{var C,q;return[o[76]||(o[76]=p("span",{class:"text-weight-medium q-mr-sm"},"Obs.:",-1)),i(" "+m((q=(C=t.dados)==null?void 0:C.venda)==null?void 0:q.observacao),1)]}),_:1},8,["caption"]),(z=(y=t.dados)==null?void 0:y.venda)!=null&&z.motivoCancelamento?(l(),u(A,{key:0,caption:t.width<=992,text:"sub2 regular"},{default:e(()=>{var C,q;return[o[77]||(o[77]=p("span",{class:"text-weight-medium q-mr-sm"},"Obs. Motivo Cancelamento:",-1)),i(" "+m((q=(C=t.dados)==null?void 0:C.venda)==null?void 0:q.motivoCancelamento),1)]}),_:1},8,["caption"])):v("",!0)]}),_:1}),a(P,{col:"xs12 md4",bordered:""},{default:e(()=>{var y,z;return[a(A,{text:"sub2 regular",caption:t.width<=992},{default:e(()=>{var C,q;return[o[78]||(o[78]=p("span",{class:"text-weight-medium q-mr-sm"},"Obs. Interna:",-1)),i(" "+m((q=(C=t.dados)==null?void 0:C.venda)==null?void 0:q.observacaoInterna),1)]}),_:1},8,["caption"]),(z=(y=t.dados)==null?void 0:y.venda)!=null&&z.observacaoCancelamento?(l(),u(A,{key:0,caption:t.width<=992,text:"sub2 regular"},{default:e(()=>{var C,q;return[o[79]||(o[79]=p("span",{class:"text-weight-medium q-mr-sm"},"Obs. Cancelamento:",-1)),i(" "+m((q=(C=t.dados)==null?void 0:C.venda)==null?void 0:q.observacaoCancelamento),1)]}),_:1},8,["caption"])):v("",!0)]}),_:1}),a(P,{col:"xs12 md4",bordered:""},{default:e(()=>[a(A,{text:"sub2 regular",caption:t.width<=992},{default:e(()=>{var y,z;return[o[80]||(o[80]=p("span",{class:"text-weight-medium q-mr-sm"},"Obs. Faturamento:",-1)),i(" "+m((z=(y=t.dados)==null?void 0:y.venda)==null?void 0:z.observacaoFaturamento),1)]}),_:1},8,["caption"])]),_:1})]),_:1})):v("",!0)]}),_:1})]),_:1},512),[[be,((ue=(re=t.dados)==null?void 0:re.venda)==null?void 0:ue.id)&&t.detalhesVisivel]]),(ce=(me=t.dados)==null?void 0:me.venda)!=null&&ce.id?(l(),u(j,{key:1})):v("",!0)],64)):v("",!0),a(ge,{onExecutar:f.executar,ref:"vendaModal"},null,8,["onExecutar"]),a(ye,{ref:"modalHistoricoStatus"},null,512)])}var ba=_e(De,[["render",ma]]);export{ba as V};
