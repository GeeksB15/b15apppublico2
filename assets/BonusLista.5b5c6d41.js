import{_ as oa,ar as A,r as h,o as V,p as F,f as a,bI as la,w as l,P as $,F as _,u as ta,d as D,S as y,T as m,C as g,U as p,k as n,t as c,m as k,j as C,e as x,Q as S,be as ia,H as sa,N as na,l as ra,M as da,L as ua,E as ma,G as ca,h as fa,i as pa,I as ba,J as Va,K as ga,bq as va,D as Ca}from"./index.7fffe8c0.js";import{L as ha}from"./Lista.304cfc8a.js";import{S as xa}from"./SeletorEmpresa.61078266.js";const wa=()=>{const e=new Date;e.setDate(e.getDate()+1),e.setHours(0,0,0,0);const d=60,b=new Date;return b.setDate(b.getDate()+d),b.setHours(0,0,0,0),{visivel:!0,dadosEmpresa:{},id:$utils.uuid(),nomeCliente:"",cpfCliente:"",whatsappCliente:"",diasMinimoUso:1,dataInicioValidade:A.formatDate(e),diasExpiracao:d,dataVencimento:A.formatDate(b),valor:1,valorMinimoVenda:10,observacao:"",textoRegras:`[NomeEmpresa] tem um presente para voc\xEA [PrimeiroNome].
\xC9 um super b\xF4nus de R$ [Valor] para usar na pr\xF3xima compra acima de R$ [ValorMinimoCompra], mas corra, pois \xE9 v\xE1lido de [DataInicioValidade] at\xE9 [DataVencimento]!`}},Da={components:{Lista:ha,SeletorEmpresa:xa},data(){return{usuario:"",lista:[],mostrar:{header:!0,barraTopo:!0,toolbarTitulo:!0,icone:"",titulo:"",buscar:!0,filtroAvancado:!0,btnAjuda:!0,btnAtualizar:!0,btnNovo:!0,toolbarAcoes:!0,checkBox:!1,btnRemover:!1,btnRestaurar:!1,centralizaTabs:!1,btnDetalhes:!0,btnExportaXLS:!1,btnMenuMais:!1,toolbarAdicao:!1,bannerMsg:""},busca:"",contatoEmpresas:[],filtrosOriginal:{},filtros:{tokenBonus:"",cliente:"",cpfCliente:"",whatsappCliente:"",idEmpresa:"",idVendedor:"",idDocumentoOrigem:"",dataVencimento:{ini:"",fim:""},dataHoraCriacao:{ini:"",fim:""},dataInicioValidade:{ini:"",fim:""},dataHoraFinalizado:{ini:"",fim:""},valor:0,valorMinimoVenda:0,ordenacao:"dataHoraCriacao",direcao:"desc"},opcoesVendedores:[],ordenacaoOpcoes:[{value:"dataHoraCriacao",label:"Data Cria\xE7\xE3o"},{value:"dataInicioValidade",label:"Data Cria\xE7\xE3o"},{value:"dataHoraFinalizado",label:"Data Finalizado"},{value:"dataVencimento",label:"Data Vencimento"}],direcaoOpcoes:[{value:"asc",label:"Crescente"},{value:"desc",label:"Decrescente"}],detalhes:!1,tabSelecionada:{valor:"Ativo"},tabs:[{valor:"Ativo",rotulo:"Ativos"},{valor:"Utilizado",rotulo:"Utilizados"},{valor:"Vencido",rotulo:"Vencidos"},{valor:"Cancelado",rotulo:"Cancelados"},{valor:"Todos",rotulo:"Todos"}],paginacao:{atual:1,maximo:1,total:1,limite:25},bonus:{},tela:{width:0,heihgt:0}}},methods:{async atualizar(s){var e,d,b,t,u,r,E,w,z,U,v,f,q,M,o,B,L,N,Q,T,P,j,W,K,J,G,X,Y,Z;try{$q.loading.show(),this.lista=[],this.tabSelecionadaAnt!==this.tabSelecionada.valor&&(this.paginacao.atual=1),this.tabSelecionadaAnt=this.tabSelecionada.valor;let{buscarDadosRecentes:O}=s!=null?s:{},i={},I={};O&&(i=await $utils.localIDB.getItem({objectStore:"dadosRecentes",id:"BonusLista_"+((e=this.usuario)==null?void 0:e.id)}),i!=null&&i._id&&(this.tabSelecionada.valor=(i==null?void 0:i.tabSelecionada)||"Ativo",this.busca=(i==null?void 0:i.busca)||"",this.filtros={tokenBonus:((d=i==null?void 0:i.filtros)==null?void 0:d.tokenBonus)||"",cliente:((b=i==null?void 0:i.filtros)==null?void 0:b.cliente)||"",cpfCliente:((t=i==null?void 0:i.filtros)==null?void 0:t.cpfCliente)||"",whatsappCliente:((u=i==null?void 0:i.filtros)==null?void 0:u.whatsappCliente)||"",idEmpresa:((r=i==null?void 0:i.filtros)==null?void 0:r.idEmpresa)||"",idVendedor:((E=i==null?void 0:i.filtros)==null?void 0:E.idVendedor)||"",idDocumentoOrigem:((w=i==null?void 0:i.filtros)==null?void 0:w.idDocumentoOrigem)||"",dataVencimento:{ini:((U=(z=i==null?void 0:i.filtros)==null?void 0:z.dataVencimento)==null?void 0:U.ini)||"",fim:((f=(v=i==null?void 0:i.filtros)==null?void 0:v.dataVencimento)==null?void 0:f.fim)||""},dataHoraCriacao:{ini:((M=(q=i==null?void 0:i.filtros)==null?void 0:q.dataHoraCriacao)==null?void 0:M.ini)||"",fim:((B=(o=i==null?void 0:i.filtros)==null?void 0:o.dataHoraCriacao)==null?void 0:B.fim)||""},dataInicioValidade:{ini:((N=(L=i==null?void 0:i.filtros)==null?void 0:L.dataInicioValidade)==null?void 0:N.ini)||"",fim:((T=(Q=i==null?void 0:i.filtros)==null?void 0:Q.dataInicioValidade)==null?void 0:T.fim)||""},dataHoraFinalizado:{ini:((j=(P=i==null?void 0:i.filtros)==null?void 0:P.dataHoraFinalizado)==null?void 0:j.ini)||"",fim:((K=(W=i==null?void 0:i.filtros)==null?void 0:W.dataHoraFinalizado)==null?void 0:K.fim)||""},valor:((J=i==null?void 0:i.filtros)==null?void 0:J.idEmpresa)||0,valorMinimoVenda:((G=i==null?void 0:i.filtros)==null?void 0:G.idEmpresa)||0,ordenacao:((X=i==null?void 0:i.filtros)==null?void 0:X.ordenacao)||"dataHoraCriacao",direcao:((Y=i==null?void 0:i.filtros)==null?void 0:Y.direcao)||"desc"},this.compareObject(this.filtrosOriginal,this.filtros,["ordenacao","direcao"])&&(this.$refs.bonusLista.filtros=!0))),I=$utils.eliminarVazios(this.filtros),delete I.status,this.tabSelecionada.valor!=="Todos"&&(I.status=this.tabSelecionada.valor);const aa=[this.filtros.ordenacao],ea=[this.filtros.direcao],H=await $db.bonus.leListaCompleta({filtros:I,limit:this.paginacao.limite,page:this.paginacao.atual,sort:aa,dir:ea});for(const R of H.data)R.detalhes=!1;this.$refs.bonusLista.detalhes=!1,this.lista=H.data,this.paginacao.total=H.total,this.paginacao.maximo=H.totalPages,i={_id:"BonusLista_"+((Z=this.usuario)==null?void 0:Z.id),tabSelecionada:this.tabSelecionada.valor,busca:this.busca,filtros:$utils.clonar(this.filtros)},await $utils.localIDB.setItem({objectStore:"dadosRecentes",data:i})}catch(O){$q.notifyError("Erro iniciar",O)}finally{$q.loading.hide()}},async contatoEmpresasCarregar(){this.contatoEmpresas=await $db.contatoEmpresa.listaCache()},async criarClick(){this.bonus=wa(),this.bonus.dadosEmpresa=this.contatoEmpresas[0]},fecharBonus(){this.bonus={}},async salvarBonus(){await $tryLoading("Salvando...",async()=>{await $utils.geeksApi({geraBonusManual:{funcao:"8FC942DF-1793-48EA-8DEE-9D19909EF233",valor:this.bonus.valor,funcao:"8FC942DF-1793-48EA-8DEE-9D19909EF233",dataInicioValidade:this.bonus.dataInicioValidade,dataVencimento:this.bonus.dataVencimento,cnpjEmissor:this.bonus.dadosEmpresa.numeroDocumentoNacional,nomeEmissor:this.bonus.dadosEmpresa.nome,cpfCliente:this.bonus.cpfCliente,nomeCliente:this.bonus.nomeCliente,whatsappCliente:this.bonus.whatsappCliente,valor:this.bonus.valor,valorMinimoVenda:this.bonus.valorMinimoVenda,observacao:this.bonus.observacao,textoRegras:this.bonus.textoRegras}}),this.bonus={},await this.atualizar(),$q.notifyPositive("B\xF4nus criado com sucesso")})},async cancelarBonus(s){!await $q.dialogSimNao({title:"Cancelar B\xF4nus",message:`Deseja cancelar o B\xF4nus de R$ ${$filters.numero(s.valor,2)} para ${s.nomeCliente}?`})||await $tryLoading("Cancelando...",async()=>{var d,b;const e=await $utils.geeksApi({cancelaBonus:{funcao:"459C0A26-6F81-4B5D-B427-B915142C6283",id:s.id}});$q.notifyPositive(((b=(d=e.data)==null?void 0:d.cancelaBonus)==null?void 0:b.mensagem)||"B\xF4nus cancelado com sucesso"),await this.atualizar()})},detalhesClick(){this.detalhes=!this.detalhes,this.lista.forEach(s=>{s.detalhes=this.detalhes})},abrirFecharDetalhes(s){s.detalhes=!s.detalhes},async limparFiltrosClick(){this.filtros=$utils.clonar(this.filtrosOriginal),await this.atualizar()},async abrirModalCliente(){var e,d;const s=await $g.promptContato.show({filtro:{ativo:!0}});!(s!=null&&s.id)||(this.bonus.cpfCliente=s.numeroDocumentoNacional,this.bonus.nomeCliente=s.nome,this.bonus.whatsappCliente=(d=(e=await $db.hibrido.lista({table:"contatoTelefone",where:{idContato:s==null?void 0:s.id},whereFilter:{tipoTelefone:"WhatsApp"}}))==null?void 0:e[0])==null?void 0:d.telefone)},async abrirModalContatoFiltro(){const s=await $g.promptContato.show({filtro:{ativo:!0}});!(s!=null&&s.id)||(this.filtros.cliente=s.nome)},recalcularDiasExpiracao(s){const e=new Date(s.dataVencimento);if(!e||isNaN(e))return;const d=e-new Date;s.diasExpiracao=Math.ceil(d/1e3/60/60/24)},recalcularVencimento(s){const e=Number(s.diasExpiracao),d=new Date;d.setDate(d.getDate()+e),d.setHours(0,0,0,0),s.dataVencimento=A.formatDate(d)},recalcularDiasMinimoUso(s){const e=new Date(s.dataInicioValidade);if(!e||isNaN(e))return;const d=e-new Date;s.diasMinimoUso=Math.ceil(d/1e3/60/60/24)},recalcularInicioValidade(s){const e=Number(s.diasMinimoUso),d=new Date;d.setDate(d.getDate()+e),d.setHours(0,0,0,0),s.dataInicioValidade=A.formatDate(d)},compareObject(s,e,d=[]){const b=Object.keys(s);for(const t of b)if(!d.includes(t)){if(typeof s[t]=="object"&&s[t]!==null){if(!this.compareObject(s[t],e[t],d))continue;return!0}else if(s[t]!==e[t])return!0}return!1},resize(){const s=document.getElementById("BonusLista");s&&(this.tela={width:s.offsetWidth,height:s.offsetHeight})}},async mounted(){this.usuario=JSON.parse(localStorage.getItem("usuario")),this.filtrosOriginal=$utils.clonar(this.filtros),this.contatoEmpresasCarregar(),await this.atualizar({buscarDadosRecentes:!0})}},ya={id:"BonusLista"},ka={class:"mw80 text-center"},qa={class:"text-weight-medium q-pl-xs"},Ea={class:"text-weight-medium q-px-sm"},Ua={class:"text-center"};function Ba(s,e,d,b,t,u){const r=h("campo"),E=h("SeletorEmpresa"),w=h("BadgeCopiarUid"),z=h("avatar"),U=h("badge"),v=h("g-label"),f=h("g-col"),q=h("g-row"),M=h("Lista");return V(),F("div",ya,[a(la,{onResize:e[0]||(e[0]=o=>u.resize())}),a(M,{ref:"bonusLista",busca:t.busca,"onUpdate:busca":e[20]||(e[20]=o=>t.busca=o),onAtualizar:u.atualizar,onCriarClick:u.criarClick,onDetalhesClick:u.detalhesClick,onLimparFiltrosClick:u.limparFiltrosClick,lista:t.lista,tabSelecionada:t.tabSelecionada,tabs:t.tabs,paginacao:t.paginacao,mostrar:t.mostrar},{filtroCampos:l(()=>[a(r,{modelValue:t.filtros.tokenBonus,"onUpdate:modelValue":e[1]||(e[1]=o=>t.filtros.tokenBonus=o),clearable:"",dense:"",tipo:"texto",rotulo:"Token do B\xF4nus",class:"q-mt-sm q-mb-md"},null,8,["modelValue"]),a(r,{modelValue:t.filtros.cliente,"onUpdate:modelValue":e[2]||(e[2]=o=>t.filtros.cliente=o),debounce:500,dense:"",before:[{icon:"search",handler:u.abrirModalContatoFiltro}],rotulo:"Cliente",class:"col-12 q-mt-md"},null,8,["modelValue","before"]),a(r,{modelValue:t.filtros.whatsappCliente,"onUpdate:modelValue":e[3]||(e[3]=o=>t.filtros.whatsappCliente=o),clearable:"",dense:"",tipo:"numero",rotulo:"WhatsApp",class:"q-mt-lg"},null,8,["modelValue"]),a(E,{modelValue:t.filtros.dadosEmpresa,"onUpdate:modelValue":e[4]||(e[4]=o=>t.filtros.dadosEmpresa=o),rotulo:"Por empresa",chaves:["id","nome","apelido","numeroDocumentoNacional"],class:"q-mt-md"},null,8,["modelValue"]),a(r,{modelValue:t.filtros.idVendedor,"onUpdate:modelValue":e[5]||(e[5]=o=>t.filtros.idVendedor=o),options:t.opcoesVendedores,clearable:"",dense:"",tipo:"seletor",rotulo:"Vendedor"},null,8,["modelValue","options"]),a(r,{modelValue:t.filtros.idDocumentoOrigem,"onUpdate:modelValue":e[6]||(e[6]=o=>t.filtros.idDocumentoOrigem=o),clearable:"",dense:"",tipo:"texto",rotulo:"ID Doc. Origem",class:"q-mt-md"},null,8,["modelValue"]),a(r,{modelValue:t.filtros.dataVencimento.ini,"onUpdate:modelValue":e[7]||(e[7]=o=>t.filtros.dataVencimento.ini=o),clearable:"",dense:"",tipo:"data",rotulo:"Vencimento de",class:"col-12 q-mt-xl"},null,8,["modelValue"]),a(r,{modelValue:t.filtros.dataVencimento.fim,"onUpdate:modelValue":e[8]||(e[8]=o=>t.filtros.dataVencimento.fim=o),clearable:"",dense:"",tipo:"data",rotulo:"at\xE9",class:"col-12 q-mt-xs"},null,8,["modelValue"]),a(r,{modelValue:t.filtros.dataHoraCriacao.ini,"onUpdate:modelValue":e[9]||(e[9]=o=>t.filtros.dataHoraCriacao.ini=o),clearable:"",dense:"",tipo:"data",rotulo:"Emiss\xE3o de",class:"col-12 q-mt-xl"},null,8,["modelValue"]),a(r,{modelValue:t.filtros.dataHoraCriacao.fim,"onUpdate:modelValue":e[10]||(e[10]=o=>t.filtros.dataHoraCriacao.fim=o),clearable:"",dense:"",tipo:"data",rotulo:"at\xE9",class:"col-12 q-mt-xs"},null,8,["modelValue"]),a(r,{modelValue:t.filtros.dataInicioValidade.ini,"onUpdate:modelValue":e[11]||(e[11]=o=>t.filtros.dataInicioValidade.ini=o),clearable:"",dense:"",tipo:"data",rotulo:"Emiss\xE3o de",class:"col-12 q-mt-xl"},null,8,["modelValue"]),a(r,{modelValue:t.filtros.dataInicioValidade.fim,"onUpdate:modelValue":e[12]||(e[12]=o=>t.filtros.dataInicioValidade.fim=o),clearable:"",dense:"",tipo:"data",rotulo:"at\xE9",class:"col-12 q-mt-xs"},null,8,["modelValue"]),a(r,{modelValue:t.filtros.dataHoraFinalizado.ini,"onUpdate:modelValue":e[13]||(e[13]=o=>t.filtros.dataHoraFinalizado.ini=o),clearable:"",dense:"",tipo:"data",rotulo:"Finalizado de",class:"col-12 q-mt-xl"},null,8,["modelValue"]),a(r,{modelValue:t.filtros.dataHoraFinalizado.fim,"onUpdate:modelValue":e[14]||(e[14]=o=>t.filtros.dataHoraFinalizado.fim=o),clearable:"",dense:"",tipo:"data",rotulo:"at\xE9",class:"col-12 q-mt-xs"},null,8,["modelValue"]),a(r,{modelValue:t.filtros.valor,"onUpdate:modelValue":e[15]||(e[15]=o=>t.filtros.valor=o),dense:"",tipo:"decimal",min:"0",decimals:"4",zerosDireita:"2",rotulo:"Valor venda",class:"col-12 q-mt-xl"},null,8,["modelValue"]),a(r,{modelValue:t.filtros.valorMinimoVenda,"onUpdate:modelValue":e[16]||(e[16]=o=>t.filtros.valorMinimoVenda=o),dense:"",tipo:"decimal",min:"0",decimals:"4",zerosDireita:"2",rotulo:"Valor min\xEDmo",class:"col-12 q-mt-sm"},null,8,["modelValue"]),a(r,{modelValue:t.filtros.ordenacao,"onUpdate:modelValue":e[17]||(e[17]=o=>t.filtros.ordenacao=o),options:t.ordenacaoOpcoes,dense:"",rotuloFixo:"Ordenar por",tipo:"seletor",class:"q-mt-xl"},null,8,["modelValue","options"]),a(r,{modelValue:t.filtros.direcao,"onUpdate:modelValue":e[18]||(e[18]=o=>t.filtros.direcao=o),options:t.direcaoOpcoes,dense:"",rotuloFixo:"Dire\xE7\xE3o",tipo:"seletor",class:"q-mt-sm"},null,8,["modelValue","options"]),a(r,{modelValue:t.paginacao.limite,"onUpdate:modelValue":e[19]||(e[19]=o=>t.paginacao.limite=o),tipo:"quantidade",min:"1",dense:"",rotulo:"Quantidade por p\xE1gina",class:"q-mt-xl q-mb-md"},null,8,["modelValue"])]),itemLista:l(()=>[a($,{bordered:"",class:"bg-white q-mb-xs rounded-borders"},{default:l(()=>[(V(!0),F(_,null,ta(t.lista,o=>(V(),F("div",{key:o.id,class:"itemHover"},[o.id?(V(),D(y,{key:0,"manual-focus":"",class:"q-py-sm q-px-xs items-center"},{default:l(()=>[a(m,{class:"hideonmobile col-auto no-margin"},{default:l(()=>[a(y,{class:"q-pa-none"},{default:l(()=>[a(m,{side:"",class:"col-auto q-pa-none"},{default:l(()=>[g("div",ka,[a(w,{cor:o.status==="Ativo"?"positive":"tertiary",id:o.id,escuro:"",dica:"ID B\xF4nus"},null,8,["cor","id"])])]),_:2},1024)]),_:2},1024)]),_:2},1024),a(m,{class:"col-xs col-sm no-margin"},{default:l(()=>[a(y,{class:"q-pa-none"},{default:l(()=>[a(m,{class:"col-auto items-center cursor-pointer"},{default:l(()=>[a(z,{rotulo:o.nomeCliente,tamanho:"40",style:{display:"flex","align-self":"center"}},null,8,["rotulo"])]),_:2},1024),a(m,{class:"col"},{default:l(()=>[a(p,{lines:"3",class:"text-weight-bold cursor-pointer"},{default:l(()=>[g("span",null,[n(c(o.nomeCliente)+" ",1),a(k,{anchor:"bottom middle",self:"center middle"},{default:l(()=>e[40]||(e[40]=[n("Cliente")])),_:1})])]),_:2},1024),a(p,{caption:"",lines:"3",class:"cursor-pointer"},{default:l(()=>[g("span",null,[a(C,{name:"business",class:"q-mr-xs"}),n(" "+c(o.nomeEmissor)+" ",1),g("span",qa,"("+c(o.cnpjEmissor)+")",1),a(k,{anchor:"bottom middle",self:"center middle"},{default:l(()=>e[41]||(e[41]=[n("Emissor")])),_:1})])]),_:2},1024),a(p,{caption:"",lines:"3"},{default:l(()=>[g("span",null,[a(C,{name:"person"}),g("span",Ea,c(o.nomeUsuarioEmissor),1),a(k,{anchor:"bottom start",self:"center start"},{default:l(()=>e[42]||(e[42]=[n("Usuario")])),_:1})])]),_:2},1024),a(m,{class:"hideondesktop"},{default:l(()=>[a(p,{caption:"",class:"q-my-sm"},{default:l(()=>[a(w,{id:o.id,escuro:"",cor:o.status==="Ativo"?"positive":"tertiary",class:"col-auto q-mr-sm"},null,8,["id","cor"]),a(w,{id:o.tokenBonus,escuro:"",cor:o.status==="Ativo"?"positive":"tertiary",dica:"Token do B\xF4nus",class:"col-auto q-mr-auto"},null,8,["id","cor"]),a(U,{cor:o.status==="Ativo"?"positive":"tertiary",rotulo:o.status,escuro:""},null,8,["cor","rotulo"])]),_:2},1024),a(y,{class:"no-padding no-margin",style:{"min-height":"15px"}},{default:l(()=>[a(m,{class:"col no-margin text-weight-medium"},{default:l(()=>[a(p,{caption:""},{default:l(()=>[a(C,{name:"mdi-calendar-today"}),n(" "+c(s.$filters.data(o.dataInicioValidade)),1)]),_:2},1024),a(p,{caption:""},{default:l(()=>[a(C,{name:"mdi-calendar-today"}),n(" "+c(s.$filters.data(o.dataVencimento)),1)]),_:2},1024)]),_:2},1024),a(m,{top:"",class:"col no-margin text-weight-medium"},{default:l(()=>[o.dataHoraFinalizado?(V(),D(p,{key:0,caption:""},{default:l(()=>[a(C,{name:"mdi-calendar"}),n(" "+c(s.$filters.data(o.dataHoraFinalizado)),1)]),_:2},1024)):x("",!0)]),_:2},1024)]),_:2},1024),a(y,{class:"no-padding no-margin",style:{"min-height":"32px"}},{default:l(()=>[a(m,{class:"col no-margin"},{default:l(()=>[o.valor?(V(),F(_,{key:0},[a(p,{caption:""},{default:l(()=>e[43]||(e[43]=[n(" Valor B\xF4nus ")])),_:1}),a(p,{caption:"",class:"text-weight-bold"},{default:l(()=>[n(c(s.$filters.numero(o.valor,2)),1)]),_:2},1024)],64)):x("",!0)]),_:2},1024),a(m,{class:"col no-margin"},{default:l(()=>[o.valorMinimoVenda?(V(),F(_,{key:0},[a(p,{caption:""},{default:l(()=>e[44]||(e[44]=[n(" Venda m\xEDnima ")])),_:1}),a(p,{caption:"",class:"text-weight-medium"},{default:l(()=>[n(c(s.$filters.numero(o.valorMinimoVenda,2)),1)]),_:2},1024)],64)):x("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),a(m,{class:"hideonmobile maxw80 no-margin cursor-pointer"},{default:l(()=>[g("div",Ua,[a(w,{id:o.tokenBonus,dica:"Token do B\xF4nus",escuro:"",cor:o.status==="Ativo"?"positive":"tertiary"},null,8,["id","cor"]),a(U,{cor:o.status==="Ativo"?"positive":"tertiary",rotulo:o.status,escuro:""},null,8,["cor","rotulo"])])]),_:2},1024),a(m,{class:"hideonmobile maxw100 no-margin cursor-pointer"},{default:l(()=>[a(p,{caption:"",class:"text-center text-weight-medium"},{default:l(()=>[g("span",null,[a(C,{name:"mdi-calendar-today"}),n(" "+c(s.$filters.data(o.dataInicioValidade))+" ",1),a(k,{anchor:"bottom middle",self:"center middle"},{default:l(()=>e[45]||(e[45]=[n(" V\xE1lido de ")])),_:1})])]),_:2},1024),a(p,{caption:"",class:"text-center text-weight-medium"},{default:l(()=>[g("span",null,[a(C,{name:"mdi-calendar"}),n(" "+c(s.$filters.data(o.dataVencimento))+" ",1),a(k,{anchor:"bottom middle",self:"center middle"},{default:l(()=>e[46]||(e[46]=[n(" V\xE1lido at\xE9 ")])),_:1})])]),_:2},1024)]),_:2},1024),a(m,{class:"hideonmobile maxw100 no-margin cursor-pointer"},{default:l(()=>[o.dataHoraFinalizado?(V(),D(p,{key:0,caption:"",class:"text-center text-weight-medium"},{default:l(()=>[g("span",null,[a(C,{name:"mdi-calendar"}),n(" "+c(s.$filters.data(o.dataHoraFinalizado))+" ",1),a(k,{anchor:"bottom middle",self:"center middle"},{default:l(()=>[n(c(o.status)+" \xE0s "+c(s.$filters.hora(o.dataHoraFinalizado)),1)]),_:2},1024)])]),_:2},1024)):x("",!0)]),_:2},1024),a(m,{class:"hideonmobile maxw100 q-pl-sm no-margin cursor-pointer"},{default:l(()=>[o.valor?(V(),D(p,{key:0,class:"text-weight-bold text-right"},{default:l(()=>[g("span",null,[n(c(s.$filters.numero(o.valor,2))+" ",1),a(k,{anchor:"bottom middle",self:"center middle"},{default:l(()=>e[47]||(e[47]=[n(" Valor B\xF4nus ")])),_:1})])]),_:2},1024)):x("",!0),o.valorMinimoVenda?(V(),D(p,{key:1,caption:"",class:"text-weight-medium text-right"},{default:l(()=>[g("span",null,[n(c(s.$filters.numero(o.valorMinimoVenda,2))+" ",1),a(k,{anchor:"bottom middle",self:"center middle"},{default:l(()=>e[48]||(e[48]=[n(" Venda m\xEDnima ")])),_:1})])]),_:2},1024)):x("",!0)]),_:2},1024),a(m,{class:"col-auto no-margin"},{default:l(()=>[a(y,{class:"q-pa-none"},{default:l(()=>[a(m,{class:"hideonmobile no-margin",style:{"max-width":"32px"}},{default:l(()=>[a(S,{onClick:B=>u.abrirFecharDetalhes(o),size:"md",color:"tertiary",round:"",flat:"",dense:"",icon:o.detalhes?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"])]),_:2},1024),a(m,{class:"no-margin"},{default:l(()=>[a(S,{icon:"more_vert",size:"md",round:"",flat:"",dense:""},{default:l(()=>[a(ia,null,{default:l(()=>[sa((V(),D($,{link:"","no-border":"",separator:""},{default:l(()=>[a(y,{onClick:B=>u.cancelarBonus(o),clickable:""},{default:l(()=>[a(m,{avatar:""},{default:l(()=>[a(C,{name:"delete"})]),_:1}),a(m,null,{default:l(()=>[a(p,null,{default:l(()=>e[49]||(e[49]=[n(" Cancelar ")])),_:1})]),_:1})]),_:2},1032,["onClick"]),a(y,{onClick:B=>u.abrirFecharDetalhes(o),clickable:"",class:"hideondesktop"},{default:l(()=>[a(m,{avatar:""},{default:l(()=>[a(C,{name:o.detalhes?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])]),_:2},1024),a(m,null,{default:l(()=>e[50]||(e[50]=[n("Mais Detalhes")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)),[[na]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):x("",!0),o.detalhes?(V(),D(q,{key:1,gutter:"md-x lg-y"},{default:l(()=>[a(f,{col:"12 sm5 md3",bordered:""},{default:l(()=>[a(v,{icon:"description xs tertiary left",text:"medium"},{default:l(()=>e[51]||(e[51]=[n("CPF")])),_:1}),a(v,{class:"q-pl-lg"},{default:l(()=>[n(c(o.cpfCliente),1)]),_:2},1024),a(v,{icon:"mdi-whatsapp xs tertiary left",text:"medium"},{default:l(()=>e[52]||(e[52]=[n("WhatsApp")])),_:1}),a(v,{class:"q-pl-lg"},{default:l(()=>[n(c(o.whatsappCliente),1)]),_:2},1024)]),_:2},1024),a(f,{col:"12 sm7 md9",bordered:""},{default:l(()=>[a(v,{icon:"description xs tertiary left",text:"medium"},{default:l(()=>e[53]||(e[53]=[n("Regras")])),_:1}),a(v,{class:"q-pl-lg"},{default:l(()=>[n(c(o.textoRegras),1)]),_:2},1024),a(v,{icon:"description xs tertiary left",text:"medium"},{default:l(()=>e[54]||(e[54]=[n("Observa\xE7\xE3o")])),_:1}),a(v,{class:"q-pl-lg"},{default:l(()=>[n(c(o.observacao),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)):x("",!0),o.id?(V(),D(ra,{key:2})):x("",!0)]))),128))]),_:1})]),_:1},8,["busca","onAtualizar","onCriarClick","onDetalhesClick","onLimparFiltrosClick","lista","tabSelecionada","tabs","paginacao","mostrar"]),a(Ca,{modelValue:t.bonus.visivel,"onUpdate:modelValue":e[38]||(e[38]=o=>t.bonus.visivel=o),onKeyup:e[39]||(e[39]=va(o=>u.fecharBonus(),["esc"])),maximized:t.tela.width<=992},{default:l(()=>[a(da,{container:"",view:"hHh LpR fFf",class:"bg-white rounded-borders",style:ua(t.tela.width<=992?"":"max-width:600px;height:100%;max-height:600px;")},{default:l(()=>[a(ma,{onSubmit:u.salvarBonus,autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false",novalidate:""},{default:l(()=>[a(ca,null,{default:l(()=>[a(fa,null,{default:l(()=>[a(C,{name:"edit_note",size:"md"}),a(pa,null,{default:l(()=>e[55]||(e[55]=[n("Novo B\xF4nus")])),_:1}),a(w,{id:t.bonus.id,cor:"positive",class:"float-right"},null,8,["id"])]),_:1})]),_:1}),a(ba,null,{default:l(()=>[a(Va,null,{default:l(()=>[a(q,{gutter:"md",items:"center",justify:"center"},{default:l(()=>[a(f,{col:"12"},{default:l(()=>[a(q,{items:"center"},{default:l(()=>[a(f,{col:"xs"},{default:l(()=>[a(r,{modelValue:t.bonus.nomeCliente,"onUpdate:modelValue":e[21]||(e[21]=o=>t.bonus.nomeCliente=o),debounce:500,dense:"",filled:"",before:[{icon:"person",handler:u.abrirModalCliente}],after:[{icon:"search",handler:u.abrirModalCliente}],rotulo:"Cliente","input-class":"cursor-pointer"},null,8,["modelValue","before","after"])]),_:1})]),_:1}),a(q,{items:"center"},{default:l(()=>[a(f,{col:"xs"},{default:l(()=>[a(r,{modelValue:t.bonus.cpfCliente,"onUpdate:modelValue":e[22]||(e[22]=o=>t.bonus.cpfCliente=o),dense:"",filled:"",rotulo:"CPF"},null,8,["modelValue"])]),_:1}),a(f,{col:"xs"},{default:l(()=>[a(r,{modelValue:t.bonus.whatsappCliente,"onUpdate:modelValue":e[23]||(e[23]=o=>t.bonus.whatsappCliente=o),dense:"",filled:"",rotulo:"WhatsApp"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(f,{col:"12"},{default:l(()=>[a(E,{modelValue:t.bonus.dadosEmpresa,"onUpdate:modelValue":e[24]||(e[24]=o=>t.bonus.dadosEmpresa=o),filled:"",dense:"",chaves:["id","nome","apelido","numeroDocumentoNacional"]},null,8,["modelValue"])]),_:1}),a(f,{col:"6"},{default:l(()=>[a(r,{modelValue:t.bonus.diasMinimoUso,"onUpdate:modelValue":[e[25]||(e[25]=o=>t.bonus.diasMinimoUso=o),e[26]||(e[26]=o=>u.recalcularInicioValidade(t.bonus))],filled:"",dense:"",tipo:"quantidade",rotulo:"Dias m\xEDnimos para uso",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1}),a(f,{col:"6"},{default:l(()=>[a(r,{modelValue:t.bonus.dataInicioValidade,"onUpdate:modelValue":[e[27]||(e[27]=o=>t.bonus.dataInicioValidade=o),e[28]||(e[28]=o=>u.recalcularDiasMinimoUso(t.bonus))],filled:"",dense:"",tipo:"data",rotulo:"Data de in\xEDcio da Validade",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1}),a(f,{col:"6"},{default:l(()=>[a(r,{modelValue:t.bonus.diasExpiracao,"onUpdate:modelValue":[e[29]||(e[29]=o=>t.bonus.diasExpiracao=o),e[30]||(e[30]=o=>u.recalcularVencimento(t.bonus))],filled:"",dense:"",rotulo:"Expira em (dias)",tipo:"quantidade",rules:[o=>o&&parseFloat(o)>0||"Obrigat\xF3rio (maior que 0)"]},null,8,["modelValue","rules"])]),_:1}),a(f,{col:"6"},{default:l(()=>[a(r,{modelValue:t.bonus.dataVencimento,"onUpdate:modelValue":[e[31]||(e[31]=o=>t.bonus.dataVencimento=o),e[32]||(e[32]=o=>u.recalcularDiasExpiracao(t.bonus))],filled:"",dense:"",tipo:"data",rotulo:"Data de Vencimento",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1}),a(f,{col:"12 sm"},{default:l(()=>[a(r,{modelValue:t.bonus.valor,"onUpdate:modelValue":e[33]||(e[33]=o=>t.bonus.valor=o),filled:"",dense:"",prefix:"R$",rotulo:"Valor",tipo:"decimal",rules:[o=>o&&parseFloat(o)>0||"Obrigat\xF3rio (maior que 0)"]},null,8,["modelValue","rules"])]),_:1}),a(f,{col:"12 sm"},{default:l(()=>[a(r,{modelValue:t.bonus.valorMinimoVenda,"onUpdate:modelValue":e[34]||(e[34]=o=>t.bonus.valorMinimoVenda=o),prefix:"R$",rotulo:"Valor m\xEDnimo",tipo:"decimal",filled:"",dense:"",rules:[o=>o&&parseFloat(o)>0||"Obrigat\xF3rio (maior que 0)"]},null,8,["modelValue","rules"])]),_:1}),a(f,{col:"12"},{default:l(()=>[a(r,{modelValue:t.bonus.textoRegras,"onUpdate:modelValue":e[35]||(e[35]=o=>t.bonus.textoRegras=o),filled:"",dense:"",rotulo:"Regras:",tipo:"textoArea",class:"q-mb-lg"},null,8,["modelValue"])]),_:1}),a(f,{col:"12"},{default:l(()=>[a(r,{modelValue:t.bonus.observacao,"onUpdate:modelValue":e[36]||(e[36]=o=>t.bonus.observacao=o),filled:"",dense:"",rotulo:"Observa\xE7\xE3o:",tipo:"textoArea",class:"q-mb-lg"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(ga,{class:"bg-light border-top q-px-md q-py-sm text-right"},{default:l(()=>[a(S,{onClick:e[37]||(e[37]=o=>u.fecharBonus()),flat:"",label:"Cancelar",color:"tertiary"}),a(S,{type:"submit",unelevated:"",dark:"",color:"primary",label:"Salvar",class:"q-ml-sm"})]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["style"])]),_:1},8,["modelValue","maximized"])])}var Ia=oa(Da,[["render",Ba]]);export{Ia as default};
