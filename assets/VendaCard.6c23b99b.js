import{_ as ge,bb as ye,r as B,o as d,p as w,F as V,d as r,w as e,f as a,C as p,h as Ce,i as we,U as _,k as l,t as c,cN as X,j as h,H,cO as pe,e as v,m as W,l as L,P as J,u as M,S as g,T as i,Q as T,bg as Y,N,z as xe,bL as qe,b5 as _e}from"./index.b40e8c41.js";import{e as Ve}from"./emitirNFe.35117289.js";import{D as Fe}from"./DocumentosFiscais.c0ab5665.js";import{M as Ee}from"./ModalHistoricoStatus.71df534c.js";const De={components:{DocumentosFiscais:Fe,ModalHistoricoStatus:Ee,VendaModal:ye},computed:{config(){return $db.configuracoes.valores},podeMigrarFatura(){return!~["Aguardando Estoque","Aguardando Financeiro","Aguardando Aprova\xE7\xE3o","Aguardando Pagamento","Cancelado","N\xE3o Aprovado","Or\xE7amento","Faturado"].indexOf(this.dados.venda.status)}},data(){return{dbUsuario:$db.usuario,width:0,dados:{venda:{}},fatura:{},status:{"Aguardando Confer\xEAncia":"orange","Aguardando Embalagem":"orange","Aguardando Entrega":"orange","Aguardando Libera\xE7\xE3o":"orange","Aguardando Separa\xE7\xE3o":"orange","Aguardando Estoque":"orange","Aguardando Financeiro":"orange","Aguardando Aprova\xE7\xE3o":"orange","Aguardando Pagamento":"tertiary","Aguardando Faturamento":"tertiary","Em Confer\xEAncia":"orange","Em Separa\xE7\xE3o":"orange",Faturado:"positive",Entregue:"positive",Cancelado:"red","N\xE3o Aprovado":"amber",Or\u00E7amento:"orange"},contatos:{},faturasAbertas:[],detalhesVisivel:!1,visibilidade:{botao:{editar:!1,remover:!1}},modalDevolucaoGarantia:{visivel:!1,item:{},orcamento:{}},sistemaPai:"",configImpressaoOrcamento:[],configImpressosWhatsapp:[],documentoItemKit:{},quantidadeProdutos:0}},emits:["executar","carregou"],mixins:[Ve],props:{id:{type:String,required:!0},dadosVenda:{type:Object,required:!1},vendasCompletas:{type:Object,required:!1},resetarEnvio:{type:Function,required:!1},layout:{type:String,default:"card"}},methods:{async duplicarVenda(){try{await new Promise((o,n)=>{this.$q.dialog({message:"Duplicar este pedido?",cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(()=>{o()}).onCancel(()=>{n()})})}catch{return}try{const o=await $db.venda.duplicarVenda(this.id);this.$refs.vendaModal.mostrar({id:o}),this.$q.notify({type:"positive",message:"Pedido duplicado"})}catch(o){let n="N\xE3o foi poss\xEDvel realizar a opera\xE7\xE3o";/^GError:.+/.test(o.message)&&(n=o.message.slice(7)),this.$q.notify({type:"negative",message:n}),console.error(o)}},irParaAtendimentoFatura(o){this.$router.push({name:"AtendimentoFatura",params:{id:o}})},async migrarFatura(o){try{await new Promise((n,y)=>{this.$q.dialog({message:"Esta a\xE7\xE3o ir\xE1 migrar esta venda para outra fatura.",noRefocus:!0,preventClose:!0,title:"Tem certeza?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(()=>{n()}).onCancel(()=>{y()})})}catch{return}o||(o=$db.fatura.criar(this.dados.venda),await $db.fatura.grava({fatura:o})),o.id?(await $db.documento.grava({atual:{id:this.dados.venda.id,idFatura:o.id},original:{id:this.dados.venda.id}}),localStorage.setItem("idFatura",o.id),this.dados.venda.idContato&&(this.$emit("executar","atualizar"),this.irParaAtendimentoFatura(this.dados.venda.idContato))):this.$q.notify("N\xE3o foi poss\xEDvel realizar a opera\xE7\xE3o")},alternarDetalhes(){this.detalhesVisivel=!this.detalhesVisivel},async atualizar(){var y;const o=await $db.venda.leCompleto(this.id);o.carrinho.sort((m,t)=>new Date(m.dataHoraEmissao)<new Date(t.dataHoraEmissao)?-1:1),o.oss.sort((m,t)=>new Date(m.documento.dataHoraEmissao)<new Date(t.documento.dataHoraEmissao)?-1:1),o.customs.sort((m,t)=>new Date(m.documento.dataHoraEmissao)<new Date(t.documento.dataHoraEmissao)?-1:1),o.kits.sort((m,t)=>new Date(m.documento.dataHoraEmissao)<new Date(t.documento.dataHoraEmissao)?-1:1),(y=o.venda)!=null&&y.idFatura&&(this.fatura=await $db.hibrido.le({table:"documento",id:o.venda.idFatura}));for(const m of o.kits){const t=m.documentosItem.find(f=>f.operacaoFator===-1&&f.operacao!=="Manipula\xE7\xE3o");this.documentoItemKit[m.documento.id]=t}if((o.venda||{}).idContato&&(o.venda||{}).idEmpresa){let m=[];m=await $db.fatura.obterAbertas(o.venda.idContato,o.venda.idEmpresa),this.faturasAbertas=m.sort((t,f)=>!t.numero||t.numero<f.numero?-1:1)}const n={};if(o.venda.idContato){const m=o.venda.idContato;n[m]||(n[m]=await $db.contato.le({id:m}))}if(o.venda.idContatoVendedor){const m=o.venda.idContatoVendedor;n[m]||(n[m]=await $db.contato.le({id:m}))}this.configuraImpressaoOrcamento(o.venda.idEmpresa),this.configuraImpressosWhatsapp(o.venda),this.contatos=n,this.dados=o,await this.$nextTick(),o.venda.id===localStorage.getItem("idVenda")&&(this.$refs.vendaModal.mostrar({id:o.venda.id}),localStorage.removeItem("idVenda"))},async atualizarComDados(){var n,y,m,t;const o=await $db.venda.preparaDados(this.dadosVenda);o.carrinho.sort((f,F)=>new Date(f.dataHoraEmissao)<new Date(F.dataHoraEmissao)?-1:1),o.oss.sort((f,F)=>new Date(f.documento.dataHoraEmissao)<new Date(F.documento.dataHoraEmissao)?-1:1),o.customs.sort((f,F)=>new Date(f.documento.dataHoraEmissao)<new Date(F.documento.dataHoraEmissao)?-1:1),o.kits.sort((f,F)=>new Date(f.documento.dataHoraEmissao)<new Date(F.documento.dataHoraEmissao)?-1:1),(n=o.venda)!=null&&n.idFatura&&(this.fatura=await $db.hibrido.le({table:"documento",id:o.venda.idFatura}));for(const f of o.kits){const F=f.documentosItem.find(G=>G.operacaoFator===-1&&G.operacao!=="Manipula\xE7\xE3o");this.documentoItemKit[f.documento.id]=F}this.faturasAbertas=((m=(y=this.vendasCompletas)==null?void 0:y.faturasAbertas)==null?void 0:m.filter(f=>f.idEmpresa===o.venda.idEmpresa))||[],this.configuraImpressaoOrcamento(o.venda.idEmpresa),this.configuraImpressosWhatsapp(o.venda),this.contatos=((t=this.vendasCompletas)==null?void 0:t.dadosContatos)||{},this.dados=o,await this.$nextTick(),o.venda.id===localStorage.getItem("idVenda")&&(this.$refs.vendaModal.mostrar({id:o.venda.id}),localStorage.removeItem("idVenda"))},async configuraImpressaoOrcamento(o){const n=await $db.configuracoes.porNome("impressao.venda",o);this.configImpressaoOrcamento=[...n.length?n.map(y=>({texto:"Imprimir Or\xE7amento",...y})):[{valor:"invoice",texto:"Or\xE7amento/Venda (Invoice)"},this.sistemaPai==="optisoul"?{valor:"orcamento",texto:"Or\xE7amento (Antigo)"}:{},this.sistemaPai==="optisoul"?{valor:"termoGarantia",texto:"Termo de Garantia"}:{}]]},async configuraImpressosWhatsapp(o){const n=await $db.configuracoes.le({prefixoNome:"venda.whatsapp.enviar.",idEmpresa:o.idEmpresa});this.configImpressosWhatsapp=n.map(y=>({...y,idVenda:o.id}))},async dialogEnviar(o){var n,y;try{const m=await $db.hibrido.le({table:"documento",id:o.idVenda});$utils.verificarErro(!(m!=null&&m.id),"Erro ao obter dados");const t=await $db.contato.leCompleto(m.idContato),f=(((n=t==null?void 0:t.telefone)==null?void 0:n.find(F=>F.tipoTelefone==="WhatsApp"))||((y=t==null?void 0:t.telefone)==null?void 0:y.find(F=>F.tipoTelefone==="Principal"))||(t==null?void 0:t.telefone[0])||{}).telefone.trim()||"";$q.dialog({title:"Enviar impresso pelo Whatsapp?",preventClose:!0,prompt:{label:"Enviar para este n\xFAmero:",model:f||"",hint:"Ou adicione um novo n\xFAmero, ex: 19988776655",isValid:F=>F.length>0,type:"text"},cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(async F=>{var oe;m.telefoneContato=F.replace(/\D/g,"");const G=await $db.venda.enviaImpressaoPdfwhatsapp({documento:m,nomeImpresso:o.nome.replace("venda.whatsapp.enviar.",""),mensagem:(oe=o.texto)!=null?oe:`Voc\xEA est\xE1 recebendo o ${o.valor} da empresa ${m.descricaoEmpresa} (${m.numeroDocumentoEmpresa}).`})})}catch{$q.notifyError("Erro ao enviar.",erro)}},copiarUid(){const o=this.$refs.uid;o.type="text";try{o.select(),document.execCommand("copy"),this.$q.notify({message:"UID copiado para a \xE1rea de transfer\xEAncia.",type:"info"})}catch{this.$q.notify("Erro ao copiar.")}o.type="hidden",window.getSelection().removeAllRanges()},async devolucaoGarantia(o){let n=await $db.hibrido.lista({table:"documento",where:{idContato:$db.contato.selecionado.id,tipo:"Venda",status:"Or\xE7amento"}});if(n=$lodash.orderBy(n,"dataHoraEmissao","desc"),!n.length){this.$q.notify({message:"Crie um or\xE7amento para inclus\xE3o de devolu\xE7\xE3o/garantia.",type:"info"});return}this.modalDevolucaoGarantia={visivel:!0,item:o,orcamento:n[0]}},editar(){this.$refs.vendaModal.mostrar({id:this.dados.venda.id})},executar(o){switch(o){case"atualizar":this.atualizar();break;case"cancelar":case"finalizar":case"reprovar":this.$emit("executar","atualizar");break;case"retornarOrcamento":this.$emit("executar",o);break}},async finalizaDevolucaoGarantia(o,n,y){const m=$utils.clonar(o);n==="devolucao"&&(m.operacao="Devolu\xE7\xE3o de Venda"),n==="garantia"&&(m.operacao="Garantia de Venda",m.motivo=y),m.idDocumentoItemVenda=m.id,m.idDocumentoVenda=m.idDocumento,m.id=$utils.uuid(),m.idDocumento=this.modalDevolucaoGarantia.orcamento.id,m.status="Or\xE7amento",m.operacaoFator=1,m.codigoCfop=20,m.idCfop=(await $db.cfop.le({codigoCfop:20}))[0].id,m.dataHoraEmissao=$utils.dataAtual(),m.dataHoraFinalizado="",m.subTotal=m.subTotal*-1,m.total=m.total*-1,m.valorItem=m.valorItem*-1,m.descontoSubTotal=0,delete m.codigoCfop,delete m.codigoDocumento,delete m.codigoDocumentoItem,delete m.codigoItem,delete m.codigoPlanoContaDestino,delete m.codigoPlanoContaEstoque,await $db.documentoItem.grava({atual:m}),this.$q.notify({message:"Item adicionado ao or\xE7amento.",type:"positive"}),localStorage.setItem("idVenda",this.modalDevolucaoGarantia.orcamento.id),this.$emit("executar","atualizar")},async remover(){this.$q.dialog({message:"Esta a\xE7\xE3o ir\xE1 remover esta venda da fatura",title:"Tem certeza?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(async()=>{try{await $db.venda.checarConflitoStatus({id:this.dados.venda.id,status:this.dados.venda.status})}catch(o){return $q.notifyError(o.message),!1}await $db.documento.grava({atual:{id:this.dados.venda.id,idFatura:""},original:{id:this.dados.venda.id}}),this.$emit("executar","remover")})},onResize(){this.width=window.innerWidth}},watch:{async dados(o){var y;this.visibilidade.botao.editar=!1,this.visibilidade.botao.visualizar=!1,this.visibilidade.botao.remover=!1;let n=(y=this.vendasCompletas)==null?void 0:y.contatosEmpresa;if(!n){const t=(await $db.hibrido.lista({table:"empresa",columns:["idContato"],whereFilter:{ativo:!0}})).map(({idContato:f})=>f);n=await $db.hibrido.lista({table:"contato",columns:["id"],whereIn:{id:t},whereFilter:{ativo:!0}})}!n.find(m=>m.id===o.venda.idEmpresa)||(o.venda.idFatura&&this.faturasAbertas.find(m=>m.id===o.venda.idFatura)&&(this.visibilidade.botao.remover=await $db.permissao.objeto("Diretiva_Vendas_RemoverVendaFatura")),!~["Cancelado","N\xE3o Aprovado"].indexOf(o.venda.status)&&!o.venda.idFatura&&(this.visibilidade.botao.editar=!0),this.visibilidade.botao.editar||(this.visibilidade.botao.visualizar=!0))}},async mounted(){var o,n,y,m,t,f,F,G;this.sistemaPai=$utils.sistemaPai(),this.dadosVenda&&this.vendasCompletas?await this.atualizarComDados():await this.atualizar(),this.$emit("carregou",this.id),this.quantidadeProdutos=(((n=(o=this.dados)==null?void 0:o.carrinho)==null?void 0:n.length)||0)+(((m=(y=this.dados)==null?void 0:y.customs)==null?void 0:m.length)||0)+(((f=(t=this.dados)==null?void 0:t.oss)==null?void 0:f.length)||0)+(((G=(F=this.dados)==null?void 0:F.kits)==null?void 0:G.length)||0)||0}},Ie={id:"VendaCard"},ze={class:"col-12 col-md-6 q-pl-none"},He={class:"q-item-section"},Se={class:"col-6 col-md hideonmobile"},Oe={class:"text-left q-my-none"},Ae={class:"col-4 col-md hideonmobile"},Ne={class:"text-left q-my-none"},Me={class:"col-4 col-md hideonmobile"},Pe={class:"text-left q-my-none"},Te={class:"col-6 col-md hideonmobile"},Re={class:"text-right text-h5 text-positive text-weight-bold q-my-none"},Qe={class:"text-right text-weight-normal text-tertiary text-body2 q-my-none"},We={class:"col-12 hideondesktop"},Ge={class:"text-left q-my-none"},Ue={class:"col-12 col-md-6"},Be={class:"col-12 col-md-6 full-height items-end hideonmobile"},Ke={class:"col-6"},je={class:"text-left q-my-none"},Le={class:"text-left q-my-none"},Je={class:"col-6"},Xe={class:"text-right text-weight-normal text-tertiary text-body2 q-my-none"},Ye={class:"text-right text-h5 text-positive text-weight-bold q-my-none"},Ze={class:"col-12 full-height items-end"},$e={class:"col-12 col-md-6"},ea={class:"text-subtitle1 text-weight-bold q-ma-none items-center"},aa={class:"q-ma-none"},ta={key:0},oa={class:"col-6 col-md-4"},da=p("p",{class:"text-subtitle1 text-weight-bold q-ma-none"}," Faturamento ",-1),la={class:"q-ma-none"},ia={class:"col-6 col-md-2 text-right"},na=p("p",{class:"text-subtitle1 text-weight-bold q-ma-none"}," Desconto ",-1),sa={class:"q-ma-none"},ra={class:"mw80 text-center"},ua={style:{"margin-left":"14px"}},ca={style:{"margin-left":"14px"}},ma={class:"float-right text-weight-medium text-right q-ml-sm",style:{"min-width":"70px"}},fa=p("span",{class:"text-weight-medium q-mr-sm"},"Obs.:",-1),va=p("span",{class:"text-weight-medium q-mr-sm"},"Obs. Motivo Cancelamento:",-1),pa=p("span",{class:"text-weight-medium q-mr-sm"},"Obs. Interna:",-1),_a=p("span",{class:"text-weight-medium q-mr-sm"},"Obs. Cancelamento:",-1),ha=p("span",{class:"text-weight-medium q-mr-sm"},"Obs. Faturamento:",-1);function ba(o,n,y,m,t,f){var le,ie,ne,se,re,ue,ce,me;const F=B("avatar"),G=B("row"),oe=B("documentos-fiscais"),de=B("BadgeCopiarUid"),Z=B("badge"),A=B("g-label"),P=B("g-col"),K=B("g-row"),he=B("DocumentosFiscais"),be=B("VendaModal"),ke=B("ModalHistoricoStatus");return d(),w("div",Ie,[y.layout==="card"?(d(),w(V,{key:0},[t.dados.venda.id?(d(),r(xe,{key:0,class:"extratoItem bg-white q-pa-sm no-shadow"},{default:e(()=>[a(G,{class:"items-center justify-between q-mx-none q-px-none q-mb-sm"},{default:e(()=>{var s;return[p("div",ze,[a(Ce,{class:"q-pa-none"},{default:e(()=>{var u;return[a(F,{imagem:(u=t.contatos[t.dados.venda.idContato])==null?void 0:u.imagem,rotulo:t.dados.venda.descricaoContato,tamanho:"40",style:{float:"left"}},null,8,["imagem","rotulo"]),a(we,null,{default:e(()=>[p("div",He,[a(_,null,{default:e(()=>{var k;return[l(c((k=t.contatos[t.dados.venda.idContato])==null?void 0:k.apelido),1)]}),_:1}),a(_,{caption:""},{default:e(()=>{var k;return[l(c((k=t.contatos[t.dados.venda.idContato])==null?void 0:k.nome),1)]}),_:1})])]),_:1}),a(X,{rounded:"",color:"tertiary",small:""},{default:e(()=>[l(c(t.dados.venda.status),1)]),_:1}),a(X,{class:"q-ml-sm",color:"positive",escuro:"",onClick:f.copiarUid},{default:e(()=>[l(" #"+c(parseInt(t.dados.venda.numero)||(t.dados.venda.id||"").slice(-6))+" ",1),a(h,{class:"q-ml-sm",name:"shopping_cart"}),H(p("input",{type:"hidden","onUpdate:modelValue":n[0]||(n[0]=k=>t.dados.venda.id=k),ref:"uid"},null,512),[[pe,t.dados.venda.id]])]),_:1},8,["onClick"])]}),_:1})]),p("div",Se,[p("p",Oe,[t.contatos[t.dados.venda.idContatoVendedor]?(d(),r(h,{key:0,name:"mdi-account-tie"})):v("",!0),l(" "+c((s=t.contatos[t.dados.venda.idContatoVendedor])==null?void 0:s.apelido)+" ",1),a(W,null,{default:e(()=>[l(" Vendedor(a) ")]),_:1})])]),p("div",Ae,[p("p",Ne,[t.dados.venda.dataHoraEmissao?(d(),r(h,{key:0,name:"mdi-calendar-today "})):v("",!0),l(" "+c(o.$filters.data(t.dados.venda.dataHoraEmissao))+" ",1),a(W,null,{default:e(()=>[l(" Emiss\xE3o ")]),_:1})])]),p("div",Me,[p("p",Pe,[t.dados.venda.dataHoraFinalizado?(d(),r(h,{key:0,name:"mdi-calendar-check"})):v("",!0),l(" "+c(o.$filters.data(t.dados.venda.dataHoraFinalizado))+" ",1),t.dados.venda.dataHoraFinalizado?(d(),r(W,{key:1},{default:e(()=>[l(" Finalizado ")]),_:1})):v("",!0)])]),p("div",Te,[p("p",Re,c(o.$filters.numero(t.dados.venda.totalDocumento,2)),1),p("p",Qe,c(o.$filters.numero(t.dados.venda.subTotal,2)),1)])]}),_:1}),a(L,{class:"hideondesktop q-mb-sm"}),a(G,{class:"q-mx-none q-px-none items-center"},{default:e(()=>{var s;return[p("div",We,[p("p",Ge,[t.contatos[t.dados.venda.idContatoVendedor]?(d(),r(h,{key:0,name:"mdi-account-tie"})):v("",!0),l(" "+c((s=t.contatos[t.dados.venda.idContatoVendedor])==null?void 0:s.apelido)+" ",1),a(W,null,{default:e(()=>[l(" Vendedor(a) ")]),_:1})])]),p("div",Ue,[a(J,{class:"no-border text-tertiary"},{default:e(()=>[(d(!0),w(V,null,M(t.dados.carrinho,u=>(d(),r(g,{key:u.id,class:"q-pa-none q-mb-xs",style:{"min-height":"auto"}},{default:e(()=>[a(i,{avatar:"",class:"mw80"},{default:e(()=>[a(_,null,{default:e(()=>[l(c(u.quantidade)+"x",1)]),_:2},1024)]),_:2},1024),a(i,null,{default:e(()=>[a(_,null,{default:e(()=>[l(c(u.descricaoItem),1)]),_:2},1024)]),_:2},1024),a(i,{side:"",top:""},{default:e(()=>[a(_,null,{default:e(()=>[l(c(o.$filters.numero(u.total,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),(d(!0),w(V,null,M(t.dados.customs,u=>(d(),r(g,{key:u.documento.id,class:"q-pa-none q-mb-xs",style:{"min-height":"auto"}},{default:e(()=>[a(i,{avatar:"",class:"mw80"},{default:e(()=>[a(_,null,{default:e(()=>[l(c(u.documento.numero)+"x ",1)]),_:2},1024)]),_:2},1024),a(i,null,{default:e(()=>[a(_,null,{default:e(()=>[l(c(u.documento.descricao),1)]),_:2},1024)]),_:2},1024),a(i,{side:"",top:""},{default:e(()=>[a(_,null,{default:e(()=>[l(c(o.$filters.numero(u.documento.totalDocumento,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),(d(!0),w(V,null,M(t.dados.oss,u=>(d(),r(g,{key:u.documento.id,class:"q-pa-none q-mb-xs",style:{"min-height":"auto"}},{default:e(()=>[a(i,{avatar:"",class:"mw80"},{default:e(()=>[a(_,null,{default:e(()=>[l(" OS "),a(X,{color:"tertiary",small:""},{default:e(()=>[l("#"+c(u.documento.numero),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),a(i,null,{default:e(()=>[a(_,null,{default:e(()=>[l(c(u.documento.descricao),1)]),_:2},1024)]),_:2},1024),a(i,{avatar:"",class:"mw50"},{default:e(()=>[u.documento.status!=="Or\xE7amento"?(d(),r(X,{key:0,rounded:"",color:"tertiary",small:""},{default:e(()=>[l(c(u.documento.status),1)]),_:2},1024)):v("",!0)]),_:2},1024),a(i,{right:"",top:""},{default:e(()=>[a(_,null,{default:e(()=>[l(c(o.$filters.numero(u.documento.totalDocumento,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),(d(!0),w(V,null,M(t.dados.kits,u=>(d(),r(g,{key:u.documento.id,class:"q-pa-none q-mb-xs",style:{"min-height":"auto"}},{default:e(()=>[a(i,{avatar:"",class:"mw80"},{default:e(()=>[a(_,null,{default:e(()=>[l(c(o.$filters.numero(t.documentoItemKit[u.documento.id].quantidade,4))+"x",1)]),_:2},1024)]),_:2},1024),a(i,null,{default:e(()=>[a(_,null,{default:e(()=>[l(c(t.documentoItemKit[u.documento.id].descricaoItem),1)]),_:2},1024)]),_:2},1024),a(i,{side:"",top:""},{default:e(()=>[a(_,null,{default:e(()=>[l(c(o.$filters.numero(t.documentoItemKit[u.documento.id].total,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),p("div",Be,[a(L,{class:"hideondesktop q-mb-sm q-mt-xs"}),a(T,{rounded:"",dense:"",flat:"",icon:"more_vert",color:"tertiary",class:"no-shadow q-mx-xs",size:"md",style:{float:"right"}},{default:e(()=>[a(Y,null,{default:e(()=>[H((d(),r(J,{link:"",separator:""},{default:e(()=>[o.$utils.mapearStatus(t.dados.venda).permiteNota?(d(),w(V,{key:0},[H((d(),r(g,{clickable:"",onClick:n[1]||(n[1]=u=>o.emitirNFeV2({idVenda:t.dados.venda.id},1,"Venda"))},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"account_balance"})]),_:1}),a(i,null,{default:e(()=>[l("NFe de Sa\xEDda/Venda")]),_:1})]),_:1})),[[N]]),H((d(),r(g,{clickable:"",onClick:n[2]||(n[2]=u=>o.emitirNFeV2({idVenda:t.dados.venda.id},0,"Devolu\xE7\xE3o"))},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"account_balance"})]),_:1}),a(i,null,{default:e(()=>[l("NFe de Entrada/Devolu\xE7\xE3o")]),_:1})]),_:1})),[[N]]),H((d(),r(g,{clickable:"",onClick:n[3]||(n[3]=u=>o.emitirNFeV2({idVenda:t.dados.venda.id},1,"Remessa"))},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"account_balance"})]),_:1}),a(i,null,{default:e(()=>[l("NFe de Remessa")]),_:1})]),_:1})),[[N]])],64)):v("",!0),f.podeMigrarFatura?(d(),w(V,{key:1},[(d(!0),w(V,null,M(t.faturasAbertas.filter(u=>u.id!==t.dados.venda.idFatura),u=>H((d(),r(g,{clickable:"",key:u.id,onClick:k=>f.migrarFatura(u)},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"mdi-folder-move"})]),_:1}),a(i,null,{default:e(()=>[l(c("Migrar para fatura #"+(u.numero||u.id.slice(-6))),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[N]])),128)),H((d(),r(g,{clickable:"",onClick:n[4]||(n[4]=u=>f.migrarFatura())},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"mdi-folder-move"})]),_:1}),a(i,null,{default:e(()=>[l("Migrar para nova fatura")]),_:1})]),_:1})),[[N]])],64)):v("",!0),a(g,{clickable:"",onClick:n[5]||(n[5]=u=>o.$refs.modalHistoricoStatus.mostrar({idDocumento:t.dados.venda.id}))},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"history"})]),_:1}),a(i,null,{default:e(()=>[l("Hist\xF3rico do Status")]),_:1})]),_:1}),a(g,{clickable:"",onClick:f.duplicarVenda},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"mdi-content-duplicate"})]),_:1}),a(i,null,{default:e(()=>[l("Duplicar Pedido")]),_:1})]),_:1},8,["onClick"]),(d(!0),w(V,null,M(t.configImpressosWhatsapp.filter(u=>u.valor),u=>(d(),r(g,{clickable:"",key:u.valor,onClick:k=>f.dialogEnviar(u)},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"mdi-whatsapp"})]),_:1}),a(i,null,{default:e(()=>[l(c(u.valor),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),y.resetarEnvio&&t.dados.venda.rotaJson&&t.dados.venda.rotaJson.length>0?(d(),r(g,{key:2,clickable:"",onClick:n[6]||(n[6]=u=>y.resetarEnvio(t.dados.venda))},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"restart_alt"})]),_:1}),a(i,null,{default:e(()=>[l("Resetar Envio")]),_:1})]),_:1})):v("",!0)]),_:1})),[[N]])]),_:1})]),_:1}),t.visibilidade.botao.remover?(d(),r(T,{key:0,rounded:"",dense:"",flat:"",icon:"clear",color:"tertiary",class:"no-shadow q-mx-xs",size:"md",onClick:f.remover,style:{float:"right"}},null,8,["onClick"])):v("",!0),t.visibilidade.botao.editar?(d(),r(T,{key:1,rounded:"",dense:"",flat:"",icon:"edit",color:"primary",class:"no-shadow q-mx-xs",size:"md",onClick:f.editar,style:{float:"right"}},null,8,["onClick"])):v("",!0),t.visibilidade.botao.visualizar?(d(),r(T,{key:2,rounded:"",dense:"",flat:"",icon:"remove_red_eye",color:"primary",class:"no-shadow q-mx-xs",size:"md",onClick:f.editar,style:{float:"right"}},null,8,["onClick"])):v("",!0),a(T,{rounded:"",dense:"",flat:"",icon:"print",color:"primary",class:"no-shadow q-mx-xs",size:"md",style:{float:"right"}},{default:e(()=>[a(Y,null,{default:e(()=>[a(J,{link:"",separator:""},{default:e(()=>[(d(!0),w(V,null,M(t.configImpressaoOrcamento.filter(u=>u.valor),u=>(d(),r(g,{clickable:"",key:u.valor,onClick:k=>o.$imprimir(u.valor,{id:(t.dados.venda||{}).id||"0",Oculto:"0"})},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"print"})]),_:1}),a(i,null,{default:e(()=>[a(_,null,{default:e(()=>[l(c(u.texto),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),a(T,{rounded:"",dense:"",flat:"",icon:t.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down",size:"md",class:"no-shadow q-mx-xs",color:"tertiary",style:{float:"right"},onClick:f.alternarDetalhes},null,8,["icon","onClick"])])]}),_:1}),a(L,{class:"hideondesktop q-mb-sm q-mt-xs"}),a(G,{class:"q-mx-none q-px-none hideondesktop"},{default:e(()=>[p("div",Ke,[p("p",je,[t.dados.venda.dataHoraEmissao?(d(),r(h,{key:0,name:"mdi-calendar-today"})):v("",!0),l(" "+c(o.$filters.data(t.dados.venda.dataHoraEmissao))+" ",1),a(W,null,{default:e(()=>[l(" Emiss\xE3o ")]),_:1})]),p("p",Le,[t.dados.venda.dataHoraFinalizado?(d(),r(h,{key:0,name:"mdi-calendar-check"})):v("",!0),l(" "+c(o.$filters.data(t.dados.venda.dataHoraFinalizado))+" ",1),t.dados.venda.dataHoraFinalizado?(d(),r(W,{key:1},{default:e(()=>[l(" Finalizado ")]),_:1})):v("",!0)])]),p("div",Je,[p("p",Xe,c(o.$filters.numero(t.dados.venda.subTotal,2)),1),p("p",Ye,c(o.$filters.numero(t.dados.venda.totalDocumento,2)),1)]),p("div",Ze,[a(L,{class:"hideondesktop q-mb-sm q-mt-xs"}),a(T,{rounded:"",dense:"",flat:"",icon:"more_vert",color:"tertiary",class:"no-shadow q-mx-xs",size:"md",style:{float:"right"}},{default:e(()=>[a(Y,null,{default:e(()=>[H((d(),r(J,{link:"",separator:""},{default:e(()=>[o.$utils.mapearStatus(t.dados.venda).permiteNota?(d(),w(V,{key:0},[H((d(),r(g,{clickable:"",onClick:n[7]||(n[7]=s=>o.emitirNFeV2({idVenda:t.dados.venda.id},1,"Venda"))},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"account_balance"})]),_:1}),a(i,null,{default:e(()=>[l("NFe de Sa\xEDda/Venda")]),_:1})]),_:1})),[[N]]),H((d(),r(g,{clickable:"",onClick:n[8]||(n[8]=s=>o.emitirNFeV2({idVenda:t.dados.venda.id},0,"Devolu\xE7\xE3o"))},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"account_balance"})]),_:1}),a(i,null,{default:e(()=>[l("NFe de Entrada/Devolu\xE7\xE3o")]),_:1})]),_:1})),[[N]]),H((d(),r(g,{clickable:"",onClick:n[9]||(n[9]=s=>o.emitirNFeV2({idVenda:t.dados.venda.id},1,"Remessa"))},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"account_balance"})]),_:1}),a(i,null,{default:e(()=>[l("NFe de Remessa")]),_:1})]),_:1})),[[N]])],64)):v("",!0),f.podeMigrarFatura?(d(),w(V,{key:1},[(d(!0),w(V,null,M(t.faturasAbertas.filter(s=>s.id!==t.dados.venda.idFatura),s=>H((d(),r(g,{key:s.id,onClick:u=>f.migrarFatura(s)},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"mdi-folder-move"})]),_:1}),a(i,null,{default:e(()=>[l(c("Migrar para fatura #"+(s.numero||s.id.slice(-6))),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[N]])),128)),H((d(),r(g,{onClick:n[10]||(n[10]=s=>f.migrarFatura())},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"mdi-folder-move"})]),_:1}),a(i,null,{default:e(()=>[l("Migrar para nova fatura")]),_:1})]),_:1})),[[N]])],64)):v("",!0),a(g,{clickable:"",onClick:n[11]||(n[11]=s=>o.$refs.modalHistoricoStatus.mostrar({idDocumento:t.dados.venda.id}))},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"history"})]),_:1}),a(i,null,{default:e(()=>[l("Hist\xF3rico do Status")]),_:1})]),_:1}),(d(!0),w(V,null,M(t.configImpressosWhatsapp.filter(s=>s.valor),s=>(d(),r(g,{clickable:"",key:s.valor,onClick:u=>f.dialogEnviar(s)},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"mdi-whatsapp"})]),_:1}),a(i,null,{default:e(()=>[l(c(s.valor),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})),[[N]])]),_:1})]),_:1}),t.visibilidade.botao.remover?(d(),r(T,{key:0,rounded:"",dense:"",flat:"",icon:"clear",color:"tertiary",class:"no-shadow q-mx-xs",size:"md",onClick:f.remover,style:{float:"right"}},null,8,["onClick"])):v("",!0),t.visibilidade.botao.editar?(d(),r(T,{key:1,rounded:"",dense:"",flat:"",icon:"edit",color:"primary",class:"no-shadow q-mx-xs",size:"md",onClick:f.editar,style:{float:"right"}},null,8,["onClick"])):v("",!0),a(T,{rounded:"",dense:"",flat:"",icon:"print",color:"primary",class:"no-shadow q-mx-xs",size:"md",style:{float:"right"}},{default:e(()=>[a(Y,null,{default:e(()=>[a(J,{link:"",separator:""},{default:e(()=>[(d(!0),w(V,null,M(t.configImpressaoOrcamento.filter(s=>s.valor),s=>(d(),r(g,{clickable:"",key:s.valor,onClick:u=>o.$imprimir(s.valor,{id:(t.dados.venda||{}).id||"0",Oculto:"0"})},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"print"})]),_:1}),a(i,null,{default:e(()=>[a(_,null,{default:e(()=>[l(c(s.texto),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),a(T,{rounded:"",dense:"",flat:"",icon:t.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down",size:"md",class:"no-shadow q-mx-xs",color:"tertiary",style:{float:"right"},onClick:f.alternarDetalhes},null,8,["icon","onClick"])])]),_:1}),t.detalhesVisivel?(d(),r(L,{key:0,class:"hideondesktop q-my-sm"})):v("",!0),t.detalhesVisivel?(d(),r(G,{key:1,class:"items-start q-mx-none q-px-none q-mt-md"},{default:e(()=>[p("div",$e,[p("p",ea,[a(h,{name:"business"}),l(" "+c(t.dados.venda.descricaoEmpresa),1)]),p("div",aa,[t.fatura.id?(d(),w("div",ta,[l(" Fatura "),a(X,{color:"positive",escuro:"",onClick:f.copiarUid},{default:e(()=>[l(" #"+c(parseInt(t.fatura.numero)||(t.fatura.id||"").slice(-6))+" ",1),a(h,{class:"q-ml-sm",name:"mdi-glasses"}),H(p("input",{type:"hidden","onUpdate:modelValue":n[12]||(n[12]=s=>t.fatura.id=s),ref:"uid"},null,512),[[pe,t.fatura.id]])]),_:1},8,["onClick"]),a(X,{class:"q-ml-sm",rounded:"",color:"tertiary",small:""},{default:e(()=>[l(c(t.fatura.status),1)]),_:1})])):v("",!0),p("div",null,c(t.dados.venda.observacao),1),p("div",null,c(t.dados.venda.observacaoInterna),1),p("div",null,c(t.dados.venda.motivoCancelamento),1),p("div",null,c(t.dados.venda.observacaoCancelamento),1)]),a(oe,{idVenda:t.dados.venda.id},null,8,["idVenda"])]),p("div",oa,[da,p("div",la,c(t.dados.venda.observacaoFaturamento),1)]),p("div",ia,[na,p("p",sa,c(o.$filters.numero(t.dados.venda.totalDesconto,2)),1)])]),_:1})):v("",!0)]),_:1})):v("",!0)],64)):v("",!0),y.layout==="lista"?(d(),w(V,{key:1},[a(qe,{onResize:f.onResize},null,8,["onResize"]),(ie=(le=t.dados)==null?void 0:le.venda)!=null&&ie.id?(d(),r(g,{key:0,clickable:"","manual-focus":"",class:"q-py-sm q-px-xs items-center"},{default:e(()=>[a(i,{class:"hideonmobile col-auto q-pr-sm no-margin"},{default:e(()=>{var s,u,k,x;return[p("div",ra,[a(de,{id:(u=(s=t.dados)==null?void 0:s.venda)==null?void 0:u.id,numero:(x=(k=t.dados)==null?void 0:k.venda)==null?void 0:x.numero,cor:"positive",escuro:""},null,8,["id","numero"])])]}),_:1}),a(i,{onClick:n[13]||(n[13]=s=>f.editar()),class:"col-md col-lg col-xl no-margin"},{default:e(()=>[a(g,{class:"q-pa-none"},{default:e(()=>[a(i,{class:"col-auto items-center"},{default:e(()=>{var s,u,k,x,E;return[a(F,{imagem:(k=t.contatos[(u=(s=t.dados)==null?void 0:s.venda)==null?void 0:u.idContato]||{})==null?void 0:k.imagem,tamanho:"40",rotulo:(E=(x=t.dados)==null?void 0:x.venda)==null?void 0:E.descricaoContato,style:{display:"flex","align-self":"center"}},null,8,["imagem","rotulo"])]}),_:1}),a(i,{class:"col"},{default:e(()=>{var s,u,k,x,E,S,R,Q,j,$;return[a(_,{lines:"2",class:"text-weight-bold"},{default:e(()=>{var D,I,O;return[p("span",null,[l(c((O=t.contatos[(I=(D=t.dados)==null?void 0:D.venda)==null?void 0:I.idContato])==null?void 0:O.apelido)+" ",1),a(W,{anchor:"bottom middle",self:"center middle"},{default:e(()=>[l("Nome Fantasia")]),_:1})])]}),_:1}),((k=t.contatos[(u=(s=t.dados)==null?void 0:s.venda)==null?void 0:u.idContato])==null?void 0:k.nome)!==((S=t.contatos[(E=(x=t.dados)==null?void 0:x.venda)==null?void 0:E.idContato])==null?void 0:S.apelido)?(d(),r(_,{key:0,caption:"",lines:"2"},{default:e(()=>{var D,I,O;return[p("span",null,[l(c((O=t.contatos[(I=(D=t.dados)==null?void 0:D.venda)==null?void 0:I.idContato])==null?void 0:O.nome)+" ",1),a(W,{anchor:"bottom middle",self:"center middle"},{default:e(()=>[l("Raz\xE3o Social")]),_:1})])]}),_:1})):v("",!0),a(_,{caption:"",class:"hideondesktop"},{default:e(()=>{var D,I,O,b,z,C,q,U,ee,ae,te,fe,ve;return[a(de,{id:(I=(D=t.dados)==null?void 0:D.venda)==null?void 0:I.id,numero:(b=(O=t.dados)==null?void 0:O.venda)==null?void 0:b.numero,cor:"positive",escuro:"",class:"q-mr-sm"},null,8,["id","numero"]),(C=(z=t.dados)==null?void 0:z.venda)!=null&&C.status?(d(),r(Z,{key:0,escuro:"",dica:"Status",class:"col-auto q-mx-auto",rotulo:(ee=((U=(q=t.dados)==null?void 0:q.venda)==null?void 0:U.status)||"")==null?void 0:ee.replace("Aguardando ","Ag. "),cor:(te=(ae=t.dados)==null?void 0:ae.venda)!=null&&te.status?t.status[(ve=(fe=t.dados)==null?void 0:fe.venda)==null?void 0:ve.status]:"tertiary"},null,8,["rotulo","cor"])):v("",!0)]}),_:1}),(Q=(R=t.dados)==null?void 0:R.venda)!=null&&Q.descricaoEmpresa?(d(),r(_,{key:1,caption:"",lines:"2"},{default:e(()=>{var D,I;return[p("span",null,[a(h,{name:"business"}),l(" "+c((I=(D=t.dados)==null?void 0:D.venda)==null?void 0:I.descricaoEmpresa)+" ",1),a(W,{anchor:"bottom middle",self:"center middle"},{default:e(()=>[l(" Empresa ")]),_:1})])]}),_:1})):v("",!0),t.contatos[($=(j=t.dados)==null?void 0:j.venda)==null?void 0:$.idContatoVendedor]?(d(),r(_,{key:2,caption:"",lines:"2"},{default:e(()=>{var D,I,O;return[p("span",null,[a(h,{name:"mdi-account-tie"}),l(" "+c((O=t.contatos[(I=(D=t.dados)==null?void 0:D.venda)==null?void 0:I.idContatoVendedor])==null?void 0:O.apelido)+" ",1),a(W,{anchor:"bottom middle",self:"center middle"},{default:e(()=>[l(" Vendedor(a) ")]),_:1})])]}),_:1})):v("",!0),a(i,{class:"hideondesktop q-mt-sm"},{default:e(()=>[a(g,{class:"q-pa-none",style:{"min-height":"36px!important"}},{default:e(()=>[a(i,{top:"",class:"col-5 no-margin"},{default:e(()=>{var D,I,O,b;return[(I=(D=t.dados)==null?void 0:D.venda)!=null&&I.dataHoraEmissao?(d(),r(_,{key:0,caption:""},{default:e(()=>{var z,C;return[a(h,{name:"mdi-calendar-today",style:{position:"absolute","margin-top":"2px"}}),p("span",ua,c(o.$filters.data((C=(z=t.dados)==null?void 0:z.venda)==null?void 0:C.dataHoraEmissao)),1)]}),_:1})):v("",!0),(b=(O=t.dados)==null?void 0:O.venda)!=null&&b.dataHoraFinalizado?(d(),r(_,{key:1,caption:""},{default:e(()=>{var z,C;return[a(h,{name:"mdi-calendar",style:{position:"absolute","margin-top":"2px"}}),p("span",ca,c(o.$filters.data((C=(z=t.dados)==null?void 0:z.venda)==null?void 0:C.dataHoraFinalizado)),1)]}),_:1})):v("",!0)]}),_:1}),a(i,{top:"",class:"col-7 no-margin text-right"},{default:e(()=>{var D,I,O,b,z,C;return[(I=(D=t.dados)==null?void 0:D.venda)!=null&&I.totalDocumento?(d(),r(_,{key:0,caption:"",class:"text-weight-bold"},{default:e(()=>{var q,U;return[l(c(o.$filters.numero((U=(q=t.dados)==null?void 0:q.venda)==null?void 0:U.totalDocumento,2)),1)]}),_:1})):v("",!0),((b=(O=t.dados)==null?void 0:O.venda)==null?void 0:b.subTotal)!==((C=(z=t.dados)==null?void 0:z.venda)==null?void 0:C.totalDocumento)?(d(),r(_,{key:1,caption:""},{default:e(()=>{var q,U;return[l(c(o.$filters.numero((U=(q=t.dados)==null?void 0:q.venda)==null?void 0:U.subTotal,2)),1)]}),_:1})):v("",!0)]}),_:1})]),_:1})]),_:1})]}),_:1})]),_:1})]),_:1}),a(i,{onClick:n[14]||(n[14]=s=>f.editar()),class:"hideonmobile maxw110 q-pl-sm no-margin"},{default:e(()=>{var s,u,k,x;return[(u=(s=t.dados)==null?void 0:s.venda)!=null&&u.dataHoraEmissao?(d(),r(_,{key:0,lines:"2",class:"ellipsis"},{default:e(()=>{var E,S;return[p("span",null,[a(h,{name:"mdi-calendar-today"}),l(" "+c(o.$filters.data((S=(E=t.dados)==null?void 0:E.venda)==null?void 0:S.dataHoraEmissao))+" ",1),a(W,{anchor:"bottom middle",self:"center middle"},{default:e(()=>{var R,Q;return[l(" Emitido \xE0s "+c(o.$filters.hora((Q=(R=t.dados)==null?void 0:R.venda)==null?void 0:Q.dataHoraEmissao)),1)]}),_:1})])]}),_:1})):v("",!0),(x=(k=t.dados)==null?void 0:k.venda)!=null&&x.dataHoraFinalizado?(d(),r(_,{key:1,lines:"2",class:"ellipsis"},{default:e(()=>{var E,S;return[p("span",null,[a(h,{name:"mdi-calendar"}),l(" "+c(o.$filters.data((S=(E=t.dados)==null?void 0:E.venda)==null?void 0:S.dataHoraFinalizado))+" ",1),a(W,{anchor:"bottom middle",self:"center middle"},{default:e(()=>{var R,Q;return[l(" Finalizado \xE1s "+c(o.$filters.hora((Q=(R=t.dados)==null?void 0:R.venda)==null?void 0:Q.dataHoraFinalizado)),1)]}),_:1})])]}),_:1})):v("",!0)]}),_:1}),a(i,{onClick:n[15]||(n[15]=s=>f.editar()),class:"hideonmobile maxw120 q-pl-sm no-margin"},{default:e(()=>{var s,u,k,x,E,S,R,Q,j;return[(u=(s=t.dados)==null?void 0:s.venda)!=null&&u.status?(d(),r(Z,{key:0,escuro:"",dica:"Status",class:"col-auto q-mx-auto",rotulo:(E=((x=(k=t.dados)==null?void 0:k.venda)==null?void 0:x.status)||"")==null?void 0:E.replace("Aguardando ","Ag. "),cor:(R=(S=t.dados)==null?void 0:S.venda)!=null&&R.status?t.status[(j=(Q=t.dados)==null?void 0:Q.venda)==null?void 0:j.status]:"tertiary"},null,8,["rotulo","cor"])):v("",!0)]}),_:1}),a(i,{onClick:n[16]||(n[16]=s=>f.editar()),class:"hideonmobile maxw120 q-pl-sm no-margin"},{default:e(()=>{var s,u,k,x;return[(u=(s=t.dados)==null?void 0:s.venda)!=null&&u.totalDocumento?(d(),r(_,{key:0,class:"text-weight-bold text-right"},{default:e(()=>{var E,S;return[p("span",null,[l(c(o.$filters.numero((S=(E=t.dados)==null?void 0:E.venda)==null?void 0:S.totalDocumento,2))+" ",1),a(W,{anchor:"bottom middle",self:"center middle"},{default:e(()=>[l(" Total ")]),_:1})])]}),_:1})):v("",!0),(x=(k=t.dados)==null?void 0:k.venda)!=null&&x.subTotal?(d(),r(_,{key:1,class:"text-caption text-right"},{default:e(()=>{var E,S;return[p("span",null,[l(c(o.$filters.numero((S=(E=t.dados)==null?void 0:E.venda)==null?void 0:S.subTotal,2))+" ",1),a(W,{anchor:"bottom middle",self:"center middle"},{default:e(()=>[l(" Subtotal ")]),_:1})])]}),_:1})):v("",!0)]}),_:1}),a(i,{class:"col-auto q-pl-sm no-margin"},{default:e(()=>[a(g,{class:"q-pa-none"},{default:e(()=>[a(i,{class:"no-margin hideonmobile",style:{width:"32px"}},{default:e(()=>[a(T,{onClick:f.alternarDetalhes,rounded:"",dense:"",flat:"",size:"md",color:"tertiary",icon:t.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"])]),_:1}),a(i,{class:"no-margin hideonmobile",style:{width:"32px"}},{default:e(()=>[t.visibilidade.botao.editar?(d(),r(T,{key:0,onClick:f.editar,rounded:"",dense:"",flat:"",icon:"edit",size:"md",color:"primary"},null,8,["onClick"])):v("",!0),t.visibilidade.botao.visualizar?(d(),r(T,{key:1,onClick:f.editar,rounded:"",dense:"",flat:"",icon:"remove_red_eye",size:"md",color:"primary"},null,8,["onClick"])):v("",!0)]),_:1}),a(i,{class:"no-margin hideonmobile",style:{width:"32px"}},{default:e(()=>[a(T,{icon:"print",size:"md",round:"",flat:"",dense:""},{default:e(()=>[a(Y,null,{default:e(()=>[H((d(),r(J,{link:"","no-border":"",separator:""},{default:e(()=>[(d(!0),w(V,null,M(t.configImpressaoOrcamento.filter(s=>s.valor),s=>(d(),r(g,{onClick:u=>{var k,x;return o.$imprimir(s.valor,{id:((x=(k=t.dados)==null?void 0:k.venda)==null?void 0:x.id)||"0",Oculto:"0"})},key:s.valor,clickable:""},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"print"})]),_:1}),a(i,null,{default:e(()=>[l(c(s.texto),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})),[[N]])]),_:1})]),_:1})]),_:1}),a(i,{class:"no-margin",style:{width:"32px"}},{default:e(()=>[a(T,{icon:"more_vert",size:"md",round:"",flat:"",dense:""},{default:e(()=>[a(Y,null,{default:e(()=>[H((d(),r(J,{link:"","no-border":"",separator:""},{default:e(()=>[t.visibilidade.botao.remover?(d(),r(g,{key:0,onClick:f.remover,clickable:""},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"delete"})]),_:1}),a(i,null,{default:e(()=>[a(_,null,{default:e(()=>[l("Remover")]),_:1}),a(_,{caption:""},{default:e(()=>[l("Venda")]),_:1})]),_:1})]),_:1},8,["onClick"])):v("",!0),t.visibilidade.botao.editar||t.visibilidade.botao.visualizar?(d(),r(g,{key:1,onClick:f.editar,clickable:"",class:"hideondesktop"},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[t.visibilidade.botao.editar?(d(),r(h,{key:0,name:"edit"})):v("",!0),t.visibilidade.botao.visualizar?(d(),r(h,{key:1,name:"remove_red_eye"})):v("",!0)]),_:1}),a(i,null,{default:e(()=>[t.visibilidade.botao.editar?(d(),r(_,{key:0},{default:e(()=>[l(" Editar ")]),_:1})):v("",!0),t.visibilidade.botao.visualizar?(d(),r(_,{key:1},{default:e(()=>[l(" Visualizar ")]),_:1})):v("",!0),a(_,{caption:""},{default:e(()=>[l("Venda")]),_:1})]),_:1})]),_:1},8,["onClick"])):v("",!0),a(g,{onClick:f.alternarDetalhes,clickable:"",class:"hideondesktop"},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:t.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])]),_:1}),a(i,null,{default:e(()=>[a(_,null,{default:e(()=>[l("Ver Detalhes")]),_:1}),a(_,{caption:""},{default:e(()=>[l("Venda")]),_:1})]),_:1})]),_:1},8,["onClick"]),o.$utils.mapearStatus(t.dados.venda).permiteNota?(d(),w(V,{key:2},[H((d(),r(g,{onClick:n[17]||(n[17]=s=>o.emitirNFeV2({idVenda:t.dados.venda.id},1,"Venda")),clickable:""},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"account_balance"})]),_:1}),a(i,null,{default:e(()=>[a(_,null,{default:e(()=>[l("NFe")]),_:1}),a(_,{caption:""},{default:e(()=>[l("Sa\xEDda/Venda")]),_:1})]),_:1})]),_:1})),[[N]]),H((d(),r(g,{onClick:n[18]||(n[18]=s=>o.emitirNFeV2({idVenda:t.dados.venda.id},0,"Devolu\xE7\xE3o")),clickable:""},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"account_balance"})]),_:1}),a(i,null,{default:e(()=>[a(_,null,{default:e(()=>[l("NFe")]),_:1}),a(_,{caption:""},{default:e(()=>[l("Entrada/Devolu\xE7\xE3o")]),_:1})]),_:1})]),_:1})),[[N]]),H((d(),r(g,{onClick:n[19]||(n[19]=s=>o.emitirNFeV2({idVenda:t.dados.venda.id},1,"Remessa")),clickable:""},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"account_balance"})]),_:1}),a(i,null,{default:e(()=>[a(_,null,{default:e(()=>[l("NFe")]),_:1}),a(_,{caption:""},{default:e(()=>[l("Remessa")]),_:1})]),_:1})]),_:1})),[[N]])],64)):v("",!0),f.podeMigrarFatura?(d(),w(V,{key:3},[(d(!0),w(V,null,M(t.faturasAbertas.filter(s=>{var u,k;return s.id!==((k=(u=t.dados)==null?void 0:u.venda)==null?void 0:k.idFatura)}),s=>H((d(),r(g,{key:s.id,onClick:u=>f.migrarFatura(s),clickable:""},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"mdi-folder-move"})]),_:1}),a(i,null,{default:e(()=>[a(_,null,{default:e(()=>[l(c("#"+(s.numero||s.id.slice(-6))),1)]),_:2},1024),a(_,{caption:""},{default:e(()=>[l("Migrar para fatura")]),_:1})]),_:2},1024)]),_:2},1032,["onClick"])),[[N]])),128)),H((d(),r(g,{onClick:n[20]||(n[20]=s=>f.migrarFatura()),clickable:""},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"mdi-folder-move"})]),_:1}),a(i,null,{default:e(()=>[a(_,null,{default:e(()=>[l("Migrar")]),_:1}),a(_,{caption:""},{default:e(()=>[l("Para nova fatura")]),_:1})]),_:1})]),_:1})),[[N]])],64)):v("",!0),a(g,{onClick:n[21]||(n[21]=s=>o.$refs.modalHistoricoStatus.mostrar({idDocumento:t.dados.venda.id})),clickable:""},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"history"})]),_:1}),a(i,null,{default:e(()=>[a(_,null,{default:e(()=>[l("Hist\xF3rico")]),_:1}),a(_,{caption:""},{default:e(()=>[l("De Status")]),_:1})]),_:1})]),_:1}),a(g,{onClick:f.duplicarVenda,clickable:""},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"mdi-content-duplicate"})]),_:1}),a(i,null,{default:e(()=>[l("Duplicar Pedido")]),_:1})]),_:1},8,["onClick"]),(d(!0),w(V,null,M(t.configImpressosWhatsapp.filter(s=>s.valor),s=>(d(),r(g,{key:s.valor,onClick:u=>f.dialogEnviar(s),clickable:""},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"mdi-whatsapp"})]),_:1}),a(i,null,{default:e(()=>[l(c(s.valor),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),y.resetarEnvio&&t.dados.venda.rotaJson&&t.dados.venda.rotaJson.length>0?(d(),r(g,{key:4,onClick:n[22]||(n[22]=s=>y.resetarEnvio(t.dados.venda)),clickable:""},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"restart_alt"})]),_:1}),a(i,null,{default:e(()=>[l("Resetar Envio")]),_:1})]),_:1})):v("",!0),(d(!0),w(V,null,M(t.configImpressaoOrcamento.filter(s=>s.valor),s=>(d(),r(g,{onClick:u=>{var k,x;return o.$imprimir(s.valor,{id:((x=(k=t.dados)==null?void 0:k.venda)==null?void 0:x.id)||"0",Oculto:"0"})},key:s.valor,clickable:"",class:"hideondesktop"},{default:e(()=>[a(i,{avatar:""},{default:e(()=>[a(h,{name:"print"})]),_:1}),a(i,null,{default:e(()=>[l(c(s.texto),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})),[[N]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):v("",!0),H(a(L,{class:"q-ma-sm"},null,512),[[_e,((se=(ne=t.dados)==null?void 0:ne.venda)==null?void 0:se.id)&&t.detalhesVisivel]]),H(a(K,null,{default:e(()=>[a(P,null,{default:e(()=>{var s,u,k,x,E,S,R,Q,j,$,D,I,O;return[((s=t.fatura)==null?void 0:s.id)||((k=(u=t.dados)==null?void 0:u.venda)==null?void 0:k.totalDesconto)?(d(),r(K,{key:0,gutter:"md-x"},{default:e(()=>{var b,z;return[a(P,{col:"xs12 sm"},{default:e(()=>{var C,q,U,ee,ae,te;return[(C=t.fatura)!=null&&C.id?(d(),r(A,{key:0,text:"sub2 medium",inline:"",icon:`request_quote ${t.width<=992?"15px":"xs"} tertiary`,caption:t.width<=992},{default:e(()=>[l(" Fatura ")]),_:1},8,["icon","caption"])):v("",!0),(q=t.fatura)!=null&&q.id?(d(),r(de,{key:1,id:(U=t.fatura)==null?void 0:U.id,escuro:"",numero:(ee=t.fatura)==null?void 0:ee.numero,cor:"positive",class:"q-mx-sm"},null,8,["id","numero"])):v("",!0),(ae=t.fatura)!=null&&ae.id?(d(),r(Z,{key:2,rotulo:(te=t.fatura)==null?void 0:te.status,escuro:"",dica:"Status",cor:"tertiary"},null,8,["rotulo"])):v("",!0)]}),_:1}),(z=(b=t.dados)==null?void 0:b.venda)!=null&&z.totalDesconto?(d(),r(P,{key:0,col:"xs12 sm-shrink"},{default:e(()=>[a(A,{text:"sub2 regular",class:"q-pr-sm",caption:t.width<=992},{default:e(()=>{var C,q;return[l(" Desconto: "),p("span",ma,c(o.$filters.numero((q=(C=t.dados)==null?void 0:C.venda)==null?void 0:q.totalDesconto,2)),1)]}),_:1},8,["caption"])]),_:1})):v("",!0)]}),_:1})):v("",!0),a(K,{gutter:"md"},{default:e(()=>[a(P,{col:"xs12 md6",bordered:""},{default:e(()=>[a(A,{icon:`extension ${t.width<=992?"14px":"xs"} tertiary`,caption:t.width<=992,text:"sub2 medium",class:"q-mb-md"},{default:e(()=>[l(" Itens ")]),_:1},8,["icon","caption"]),(d(!0),w(V,null,M(t.dados.carrinho,b=>(d(),r(K,{key:b.id,gutter:"none",bordered:`${t.quantidadeProdutos>1?"bottom":!1}`},{default:e(()=>[a(P,null,{default:e(()=>[a(A,{lines:"1",caption:t.width<=992},{default:e(()=>[a(A,{inline:"",text:"medium",class:"q-mr-xs"},{default:e(()=>[l(c(b.quantidade)+"x ",1)]),_:2},1024),l(" "+c(b.descricaoItem),1)]),_:2},1032,["caption"])]),_:2},1024),a(P,{col:"auto",class:"mw120"},{default:e(()=>[a(A,{text:"medium right",caption:t.width<=992},{default:e(()=>[l(c(o.$filters.numero(b.total,2)),1)]),_:2},1032,["caption"])]),_:2},1024)]),_:2},1032,["bordered"]))),128)),(d(!0),w(V,null,M(t.dados.customs,b=>(d(),r(K,{key:b.documento.id,gutter:"none",bordered:`${t.quantidadeProdutos>1?"bottom":!1}`},{default:e(()=>[a(P,null,{default:e(()=>[a(A,{lines:"1",caption:t.width<=992},{default:e(()=>[a(A,{inline:"",text:"medium",class:"q-mr-xs"},{default:e(()=>[l(c(b.documento.numero)+"x ",1)]),_:2},1024),l(" "+c(b.documento.descricao),1)]),_:2},1032,["caption"])]),_:2},1024),a(P,{col:"auto",class:"mw120"},{default:e(()=>[a(A,{text:"medium right",caption:t.width<=992},{default:e(()=>[l(c(o.$filters.numero(b.documento.totalDocumento,2)),1)]),_:2},1032,["caption"])]),_:2},1024)]),_:2},1032,["bordered"]))),128)),(d(!0),w(V,null,M(t.dados.oss,b=>(d(),r(K,{key:b.documento.id,gutter:"none",bordered:`${t.quantidadeProdutos>1?"bottom":!1}`},{default:e(()=>[a(P,null,{default:e(()=>[a(A,{lines:"1",caption:t.width<=992},{default:e(()=>[a(Z,{rotulo:"OS #"+b.documento.numero,dica:"O.S.",escuro:"",cor:"tertiary",class:"q-mr-xs"},null,8,["rotulo"]),b.documento.status!=="Or\xE7amento"?(d(),r(Z,{key:0,rotulo:b.documento.status,cor:"positive",escuro:"",class:"q-mr-xs"},null,8,["rotulo"])):v("",!0),l(" "+c(b.documento.descricao),1)]),_:2},1032,["caption"])]),_:2},1024),a(P,{col:"auto",class:"mw120"},{default:e(()=>[a(A,{text:"medium right",caption:t.width<=992},{default:e(()=>[l(c(o.$filters.numero(b.documento.totalDocumento,2)),1)]),_:2},1032,["caption"])]),_:2},1024)]),_:2},1032,["bordered"]))),128)),(d(!0),w(V,null,M(t.dados.kits,b=>(d(),r(K,{key:b.documento.id,gutter:"none",bordered:`${t.quantidadeProdutos>1?"bottom":!1}`},{default:e(()=>[a(P,null,{default:e(()=>[a(A,{lines:"1",caption:t.width<=992},{default:e(()=>[a(A,{inline:"",text:"medium",class:"q-mr-xs"},{default:e(()=>[l(c(o.$filters.numero(t.documentoItemKit[b.documento.id].quantidade,4))+"x ",1)]),_:2},1024),l(" "+c(t.documentoItemKit[b.documento.id].descricaoItem),1)]),_:2},1032,["caption"])]),_:2},1024),a(P,{col:"auto",class:"mw120"},{default:e(()=>[a(A,{text:"medium right",caption:t.width<=992},{default:e(()=>[l(c(o.$filters.numero(t.documentoItemKit[b.documento.id].total,2)),1)]),_:2},1032,["caption"])]),_:2},1024)]),_:2},1032,["bordered"]))),128))]),_:1}),a(P,{col:"xs12 md6",bordered:""},{default:e(()=>{var b;return[a(he,{idFatura:(b=t.fatura)==null?void 0:b.id,ref:"documentosFiscais"},null,8,["idFatura"])]}),_:1})]),_:1}),((E=(x=t.dados)==null?void 0:x.venda)==null?void 0:E.observacaoFaturamento)||((R=(S=t.dados)==null?void 0:S.venda)==null?void 0:R.observacao)||((j=(Q=t.dados)==null?void 0:Q.venda)==null?void 0:j.observacaoInterna)||((D=($=t.dados)==null?void 0:$.venda)==null?void 0:D.motivoCancelamento)||((O=(I=t.dados)==null?void 0:I.venda)==null?void 0:O.observacaoCancelamento)?(d(),r(K,{key:1,gutter:"md"},{default:e(()=>[a(P,{col:"xs12 md4",bordered:""},{default:e(()=>{var b,z;return[a(A,{text:"sub2 regular",caption:t.width<=992},{default:e(()=>{var C,q;return[fa,l(" "+c((q=(C=t.dados)==null?void 0:C.venda)==null?void 0:q.observacao),1)]}),_:1},8,["caption"]),(z=(b=t.dados)==null?void 0:b.venda)!=null&&z.motivoCancelamento?(d(),r(A,{key:0,caption:t.width<=992,text:"sub2 regular"},{default:e(()=>{var C,q;return[va,l(" "+c((q=(C=t.dados)==null?void 0:C.venda)==null?void 0:q.motivoCancelamento),1)]}),_:1},8,["caption"])):v("",!0)]}),_:1}),a(P,{col:"xs12 md4",bordered:""},{default:e(()=>{var b,z;return[a(A,{text:"sub2 regular",caption:t.width<=992},{default:e(()=>{var C,q;return[pa,l(" "+c((q=(C=t.dados)==null?void 0:C.venda)==null?void 0:q.observacaoInterna),1)]}),_:1},8,["caption"]),(z=(b=t.dados)==null?void 0:b.venda)!=null&&z.observacaoCancelamento?(d(),r(A,{key:0,caption:t.width<=992,text:"sub2 regular"},{default:e(()=>{var C,q;return[_a,l(" "+c((q=(C=t.dados)==null?void 0:C.venda)==null?void 0:q.observacaoCancelamento),1)]}),_:1},8,["caption"])):v("",!0)]}),_:1}),a(P,{col:"xs12 md4",bordered:""},{default:e(()=>[a(A,{text:"sub2 regular",caption:t.width<=992},{default:e(()=>{var b,z;return[ha,l(" "+c((z=(b=t.dados)==null?void 0:b.venda)==null?void 0:z.observacaoFaturamento),1)]}),_:1},8,["caption"])]),_:1})]),_:1})):v("",!0)]}),_:1})]),_:1},512),[[_e,((ue=(re=t.dados)==null?void 0:re.venda)==null?void 0:ue.id)&&t.detalhesVisivel]]),(me=(ce=t.dados)==null?void 0:ce.venda)!=null&&me.id?(d(),r(L,{key:1})):v("",!0)],64)):v("",!0),a(be,{onExecutar:f.executar,ref:"vendaModal"},null,8,["onExecutar"]),a(ke,{ref:"modalHistoricoStatus"},null,512)])}var wa=ge(De,[["render",ba]]);export{wa as V};
