import{_ as z,r,o as l,p as m,f as a,w as e,P as C,F as S,x as A,S as w,T as i,e as f,U as p,C as u,k as c,t as d,m as L,d as _,j as B,l as H}from"./index.9b7f635b.js";import{L as Q}from"./Lista.1ee62c47.js";import{J as T}from"./JsonViewer.eaad63e0.js";const $={components:{Lista:Q,JsonViewer:T},data(){return{lista:[],mostrar:{header:!0,barraTopo:!0,toolbarTitulo:!0,icone:"analytics",titulo:"Logs",filtroAvancado:!0,buscar:!0,btnAjuda:!0,btnAtualizar:!0,btnNovo:!1,toolbarAcoes:!0,checkBox:!1,btnRemover:!1,btnRestaurar:!1,centralizaTabs:!1,btnDetalhes:!1,btnExportaXLS:!1,btnMenuMais:!1,toolbarAdicao:!1,bannerMsg:"",conexao:{icone:"online",iconeTamanho:"xs",cor:"grey-5",rotulo:null,dica:"Online",denso:!0,flat:!0,escuro:!1}},busca:"",paginacao:{atual:1,maximo:1,total:1,limite:25}}},methods:{async abrir(t){const o=$utils.clonar(this.lista[t]);if(typeof o.dados=="string")try{o.dados=JSON.parse(o.dados)}catch(g){console.error("Erro ao fazer um parse da string JSON",g)}await this.$refs.jsonViewer.show(o)},async atualizar(){try{$q.loading.show(),this.lista=await $db.log.ler()}catch(t){$q.notifyError(t.message)}finally{$q.loading.hide()}}},async mounted(){this.atualizar()}},J={id:"LogLista"},I={key:0,class:"mw80 text-center"},U={class:"text-weight-medium q-mr-xs"},j={class:"text-weight-medium"};function E(t,o,g,M,n,b){const h=r("BadgeCopiarUid"),q=r("avatar"),x=r("g-col"),k=r("g-label"),v=r("g-row"),N=r("Lista"),V=r("JsonViewer");return l(),m("div",J,[a(N,{ref:"logLista",busca:n.busca,"onUpdate:busca":o[0]||(o[0]=s=>n.busca=s),lista:n.lista,paginacao:n.paginacao,mostrar:n.mostrar,onAtualizar:b.atualizar},{itemLista:e(()=>[a(C,{bordered:"",class:"bg-white q-mb-xs rounded-borders"},{default:e(()=>[(l(!0),m(S,null,A(n.lista,(s,y)=>(l(),m("div",{key:y,class:"itemHover"},[a(w,{onClick:D=>b.abrir(y),clickable:"","manual-focus":"",class:"q-py-sm q-px-xs items-center"},{default:e(()=>[a(i,{class:"hideonmobile col-auto q-pr-sm no-margin"},{default:e(()=>[s.id?(l(),m("div",I,[a(h,{id:s.id,numero:s.id.slice(-8),cor:"positive",dica:"ID Log"},null,8,["id","numero"])])):f("",!0)]),_:2},1024),a(i,{class:"col no-margin"},{default:e(()=>[a(w,{class:"q-pa-none"},{default:e(()=>[a(i,{class:"col-auto items-center"},{default:e(()=>[a(q,{rotulo:s.usuarioNome,tamanho:"40",style:{display:"flex","align-self":"center"}},null,8,["rotulo"])]),_:2},1024),a(i,{class:"col"},{default:e(()=>[a(p,{lines:"2",class:"text-weight-bold ellipsis-2-lines"},{default:e(()=>[u("span",null,[c(d(s.mensagem||"Sem mensagem")+" ",1),a(L,{anchor:"bottom middle",self:"center middle"},{default:e(()=>o[1]||(o[1]=[c("Mensagem")])),_:1})])]),_:2},1024),a(p,{caption:""},{default:e(()=>[u("span",null,[c(d(s.usuarioNome)+" ",1),a(L,{anchor:"bottom middle",self:"center middle"},{default:e(()=>o[2]||(o[2]=[c("Usu\xE1rio")])),_:1})])]),_:2},1024),a(i,{class:"hideondesktop q-mt-sm"},{default:e(()=>[a(v,{mg:"xs-b"},{default:e(()=>[s.id?(l(),_(x,{key:0,col:"12",class:"q-mt-xs"},{default:e(()=>[a(h,{id:s.id,escuro:"",cor:"positive",numero:s.id.slice(-8),class:"q-mr-sm"},null,8,["id","numero"])]),_:2},1024)):f("",!0),s.dataHora?(l(),_(x,{key:1,col:"12",class:"q-mt-xs"},{default:e(()=>[a(k,null,{default:e(()=>[u("span",U,d(t.$filters.data(s.dataHora)),1),c(" "+d(t.$filters.hora(s.dataHora)),1)]),_:2},1024)]),_:2},1024)):f("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),a(i,{class:"hideonmobile maxw150 q-pl-sm no-margin cursor-pointer"},{default:e(()=>[s.dataHora?(l(),_(p,{key:0,caption:"",lines:"1",class:"ellipsis"},{default:e(()=>[u("span",null,[a(B,{name:"mdi-calendar-today",class:"q-mr-xs"}),u("span",j,d(t.$filters.data(s.dataHora)),1),c(" "+d(t.$filters.hora(s.dataHora)),1)])]),_:2},1024)):f("",!0)]),_:2},1024)]),_:2},1032,["onClick"]),a(H)]))),128))]),_:1})]),_:1},8,["busca","lista","paginacao","mostrar","onAtualizar"]),a(V,{ref:"jsonViewer"},null,512)])}var P=z($,[["render",E]]);export{P as default};
