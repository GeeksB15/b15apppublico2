import{_ as S,ar as p,r as H,o,p as d,d as s,w as r,z as m,W as B,u as E,as as A,v as I,q as N,m as h,k as b,t as f,e as v,F as y,x,C as D,f as _,j as V,at as k}from"./index.a174ab57.js";const F={computed:{classCol(){return{0:"col-auto",1:"col-6 col-sm-3 col-md-1",2:"col-12 col-sm-6 col-md-2",3:"col-12 col-sm-6 col-md-3",4:"col-12 col-sm-6 col-md-4",5:"col-12 col-md-5",6:"col-12 col-md-6",7:"col-12 col-md-7",8:"col-12 col-md-8",9:"col-12 col-md-9",10:"col-12 col-md-10",11:"col-12 col-md-11",12:"col-12"}[String(this.col)]||"col"},atributos(){const e={...this.$attrs,hint:this.aviso?this.avisoRotulo:this.ajuda};this.classCampo?e.class=this.classCampo:delete e.class;const n=this.rotulo||void 0,t=this.rotuloFixo||void 0;switch(e.label=t||n,e.readonly=this.somenteLeitura,e.dense=!this.noDense,this.prefix&&(e.prefix=this.prefix),this.tipo){case"quantidade":e.type="tel",e.align="center",e.inputClass="text-center";break;case"decimal":e.label=t||n,e.type="tel",e.align="right",e.inputClass="text-right";break;case"data":e.type="date",e.stackLabel=!0;break;case"dataHora":e.type="date",e.stackLabel=!0;break;case"hora":e.type="time",e.stackLabel=!0;break;case"logico":break;case"seletor":Array.isArray(this.opcoes)&&(e.options=this.opcoes.map(l=>typeof l=="object"?{...l,label:l.rotulo,value:l.valor}:{label:l,value:l}));break;case"senha":e.type="password";break;case"texto":break;case"textoArea":e.type="textarea",e.filled=!0;break;default:e.label=n,e.stackLabel=!0}return e},atributosHora(){const e={...this.$attrs,dense:!this.noDense,label:"Hora",readonly:this.somenteLeitura,rules:[],stackLabel:!0,type:"time"};return this.classCampo?e.class=this.classCampo:delete e.class,e},slotAfter(){return this.tipo==="quantidade"?[{handler:this.somar,icon:"mdi-plus-box"}]:this.after},slotBefore(){return this.tipo==="quantidade"?[{handler:this.subtrair,icon:"mdi-minus-box"}]:this.before}},data(){return{estaFocado:!1,valorExibicao:"",valorInterno:void 0}},emits:["update:modelValue","click"],methods:{resolveHandler(e){e&&e()},eventoClick(e,n,t){n(),this.$emit("click")},eventoBlur(e){this.estaFocado=!1,this.numerico&&!this.somenteLeitura&&(this.permiteNull&&this.valorInterno===null?this.acertaValores(null):(this.atributos.min||this.atributos.min===0)&&this.valorInterno<Number(this.atributos.min)?this.acertaValores(Number(this.atributos.min)):this.atributos.max&&this.valorInterno>Number(this.atributos.max)?this.acertaValores(Number(this.atributos.max)):this.atributos.passo?this.acertaValores(Math.round(this.valorInterno/Number(this.atributos.passo))*Number(this.atributos.passo)):this.acertaValores(this.valorInterno)),this.$emit("update:modelValue",this.valorInterno)},eventoFocus(e){this.estaFocado=!0,this.numerico&&!this.somenteLeitura&&this.acertaValores(this.valorInterno),typeof this.$attrs.focus=="function"&&this.$attrs.focus(),this.tipo==="decimal"&&e.target._value&&e.target._value.length>0&&e.target.setSelectionRange(0,e.target._value.length)},acertaValores(e){if(this.numerico){if(e==="-"){this.valorExibicao=e;return}const n=Number(typeof e=="string"?(e.match(/(^-)|(\d)|(,)/g)||[]).join("").replace(",",".").replace(/,/g,""):e),t=Number(this.atributos.decimals||0),l=this.permiteNull&&e===null?null:Number.isNaN(n)?0:$utils.arredondar(n,t);if(this.valorInterno=l,this.estaFocado){if(Number(this.valorExibicao.replace(",","."))!==l){let u="";this.valorExibicao==="-"&&l===0&&(u="-"),this.valorExibicao=this.permiteNull&&e===null?"":u+l.toString().replace(".",",")}}else{let u=this.zerosDireita;this.tipo==="quantidade"&&u===void 0&&(u=0),this.valorExibicao=this.permiteNull&&e===null?"":(this.atributos.sinalPositivo&&l>0?"+":"")+$filters.numeroZerosDireita(l,this.atributos.decimals,u)}}else if(this.tipo==="data"||this.tipo==="dataHora")if(e){const n=$filters.converterData(e),t=p.formatDate(n)||"";t.length===29&&(this.valorInterno=t,this.valorExibicao=t.substr(0,10),this.valorExibicaoData=this.valorExibicao,this.valorExibicaoHora=t.substr(11,8))}else this.valorInterno=e,this.valorExibicao="",this.valorExibicaoData="",this.valorExibicaoHora="";else this.tipo==="hora"?(this.valorInterno=e,this.valorExibicao=this.valorInterno):(this.valorInterno=e,this.valorExibicao=e)},emitirValor(e){this.acertaValores(this.permiteNull&&e===""?null:e),this.modelValue!==this.valorInterno&&this.$emit("update:modelValue",this.valorInterno)},emitirValorData(e){this.valorExibicaoData=e,this.valorExibicaoHora=this.valorExibicaoHora||"00:00:00",this.valorInterno=p.formatDate(this.valorExibicaoData+"T"+this.valorExibicaoHora),this.modelValue!==this.valorInterno&&this.$emit("update:modelValue",this.valorInterno)},emitirValorHora(e){this.valorExibicaoData=this.valorExibicaoData||p.formatDate(new Date,"YYYY-MM-DD"),this.valorExibicaoHora=e||"00:00:00",this.valorInterno=p.formatDate(this.valorExibicaoData+"T"+this.valorExibicaoHora),this.modelValue!==this.valorInterno&&this.$emit("update:modelValue",this.valorInterno)},emitirModelValue(e){this.valorInterno=e,this.$emit("update:modelValue",this.valorInterno)},emitirValorSeletor(e){this.valorInterno=e?e.value:"",this.$emit("update:modelValue",this.valorInterno)},focus(){this.$nextTick(()=>this.$refs.campo.focus())},somar(){const e=this.valorInterno+Number(this.step);this.max&&e>Number(this.max)?this.valorInterno=this.max:this.valorInterno=e,this.emitirValor(this.valorInterno)},subtrair(){const e=this.valorInterno-Number(this.step);(this.min||this.min===0)&&e<Number(this.min)?this.valorInterno=this.min:this.valorInterno=e,this.emitirValor(this.valorInterno)}},props:{after:{type:Array,default:()=>[]},ajuda:{type:String},ocultarAjuda:{type:Boolean,default:!1},aviso:{type:Boolean},avisoRotulo:{type:String},before:{type:Array,default:()=>[]},classCampo:{type:[Array,Object,String]},col:{type:[Number,String]},dica:{type:String},modelo:{type:String},min:{type:[Number,String]},max:{type:[Number,String]},noDense:{type:Boolean},opcoes:{type:[Array,Object]},permiteNull:{default:!1,type:Boolean},prefix:{type:String},rotulo:{type:String},rotuloFixo:{type:String},somenteLeitura:{default:!1,type:Boolean},step:{default:1,type:[Number,String]},tipo:{default:"texto",type:String},zerosDireita:{type:[Number,String]},modelValue:{type:[Number,String,Boolean,Date]},multiple:{type:Boolean,default:!1},onFocus:{type:Function,required:!1,default:()=>!1},debounce:{type:[Number,String],required:!1,default:null}},watch:{modelValue(e){e!==this.valorInterno&&this.acertaValores(e)}},created(){this.numerico=["quantidade","decimal"].includes(this.tipo),this.acertaValores(this.modelValue)}},j={class:"col-6 bg-transparent"},L={class:"col-6 bg-transparent"};function U(e,n,t,l,u,a){const C=H("row");return o(),d("div",{class:N(a.classCol)},[t.tipo==="logico"?(o(),s(B,m({key:0,ref:"campo","model-value":t.modelValue},a.atributos,{"onUpdate:modelValue":a.emitirModelValue,"hide-bottom-space":t.ocultarAjuda}),{default:r(()=>[t.dica?(o(),s(h,{key:0,anchor:"bottom middle",self:"center middle"},{default:r(()=>[b(f(t.dica),1)]),_:1})):v("",!0)]),_:1},16,["model-value","onUpdate:modelValue","hide-bottom-space"])):t.tipo==="seletor"?(o(),s(A,m({key:1,ref:"campo","onUpdate:modelValue":a.emitirValorSeletor,onFilter:a.eventoClick,"map-options":"",multiple:t.multiple,"model-value":t.modelValue,"hide-bottom-space":t.ocultarAjuda},a.atributos),E({default:r(()=>[t.dica?(o(),s(h,{key:0,anchor:"bottom middle",self:"center middle"},{default:r(()=>[b(f(t.dica),1)]),_:1})):v("",!0)]),_:2},[a.slotBefore?{name:"prepend",fn:r(()=>[(o(!0),d(y,null,x(a.slotBefore,(i,c)=>(o(),s(V,{key:c,name:i.icon,onClick:k(g=>a.resolveHandler(i.handler),["stop"]),class:"cursor-pointer"},null,8,["name","onClick"]))),128))]),key:"0"}:void 0,a.slotAfter?{name:"append",fn:r(()=>[(o(!0),d(y,null,x(a.slotAfter,(i,c)=>(o(),s(V,{key:c,name:i.icon,onClick:k(g=>a.resolveHandler(i.handler),["stop"]),class:"cursor-pointer"},null,8,["name","onClick"]))),128))]),key:"1"}:void 0]),1040,["onUpdate:modelValue","onFilter","multiple","model-value","hide-bottom-space"])):t.tipo==="dataHora"?(o(),s(C,{key:2},{default:r(()=>[D("div",j,[_(I,m({ref:"campo","model-value":e.valorExibicaoData},a.atributos,{"onUpdate:modelValue":a.emitirValorData,"hide-bottom-space":t.ocultarAjuda}),{default:r(()=>[t.dica?(o(),s(h,{key:0,anchor:"bottom middle",self:"center middle"},{default:r(()=>[b(f(t.dica),1)]),_:1})):v("",!0)]),_:1},16,["model-value","onUpdate:modelValue","hide-bottom-space"])]),D("div",L,[_(I,m({"model-value":e.valorExibicaoHora},a.atributosHora,{"onUpdate:modelValue":a.emitirValorHora,"hide-bottom-space":t.ocultarAjuda}),{default:r(()=>[t.dica?(o(),s(h,{key:0,anchor:"bottom middle",self:"center middle"},{default:r(()=>[b(f(t.dica),1)]),_:1})):v("",!0)]),_:1},16,["model-value","onUpdate:modelValue","hide-bottom-space"])])]),_:1})):(o(),s(I,m({key:3,"model-value":u.valorExibicao},a.atributos,{debounce:t.debounce,onBlur:a.eventoBlur,onFocus:a.eventoFocus,"onUpdate:modelValue":a.emitirValor,"hide-bottom-space":t.ocultarAjuda,ref:"campo"}),E({default:r(()=>[t.dica?(o(),s(h,{key:0,anchor:"bottom middle",self:"center middle"},{default:r(()=>[b(f(t.dica),1)]),_:1})):v("",!0)]),_:2},[a.slotBefore?{name:"prepend",fn:r(()=>[(o(!0),d(y,null,x(a.slotBefore,(i,c)=>(o(),s(V,{name:i.icon,onClick:k(g=>a.resolveHandler(i.handler),["stop"]),color:i.color,class:N(i.handler?"cursor-pointer":""),key:c},null,8,["name","onClick","color","class"]))),128))]),key:"0"}:void 0,a.slotAfter?{name:"append",fn:r(()=>[(o(!0),d(y,null,x(a.slotAfter,(i,c)=>(o(),s(V,{name:i.icon,onClick:k(g=>a.resolveHandler(i.handler),["stop"]),color:i.color,class:N(i.handler?"cursor-pointer":""),key:c},null,8,["name","onClick","color","class"]))),128))]),key:"1"}:void 0]),1040,["model-value","debounce","onBlur","onFocus","onUpdate:modelValue","hide-bottom-space"]))],2)}var q=S(F,[["render",U]]);export{q as C};
