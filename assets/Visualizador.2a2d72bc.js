import{a8 as n,e5 as c,aG as p,bR as l,bU as m,b_ as d,bo as h,bl as u,bn as f,az as b,ch as g,bd as y,cp as E,bD as $,cg as q,cz as C,bk as v,bz as z,aE as D}from"./index.a5f5d5a1.js";const P={BrowserQRCodeSvgWriter:l,JsBarcode:m,agrupar:d,arredondar:h,dataAtual:u,dormir:f,erp:b,fbarcode:g,gconsole:y,mostrarErro:E,somar:$,sql:q,unicos:C,uuid:v,verificarErro:z,_:D};var x={name:"Visualizador",data(){return{}},props:{componente:{type:Object}},render(){if(!this.componente||!this.componente.template)return n("div","Carregando...");const o=n("iframe",{onLoad:this.atualizar,style:{border:"0",display:"block",height:"100%",width:"100%"}});return this.$el&&this.atualizar(),o},emits:["mounted"],methods:{atualizar(o){let s,i,t;if(!this.componente)return;const e=this.$el||(o||{}).target;if(!(!e||!e.contentDocument||!e.contentDocument.body)){try{const r={...P,parametro:this.componente.parametro};s=new Function(...Object.keys(r),`return ${this.componente.script.trim()}`)(...Object.values(r))}catch(r){t=[$q.notifyError("Erro ao mostrar relat\xF3rio (script)",r),String(r)]}try{this.app}catch(r){console.error("Erro ao limpar relat\xF3rio (app.unmount)",r)}try{if(!t){const r=e.contentDocument.body;for(;r.firstChild;)r.removeChild(r.firstChild);i=document.createElement("div"),r.appendChild(i);const a=document.createElement("style");a.innerHTML=this.componente.estilo.trim(),r.appendChild(a)}}catch(r){t=[$q.notifyError("Erro ao mostrar relat\xF3rio (style)",r),String(r)]}try{if(!t){const r=this.componente.template.trim();this.app=c({name:"quadroVue",render(){return n(p({name:"RelatorioDinamico",template:r,...s}))}}),this.app.config.globalProperties.$filters=this.$filters,this.app.config.globalProperties.$get=this.$get,this.app.config.globalProperties.$lodash=this.$lodash,this.app.config.globalProperties.$q=this.$q}}catch(r){t=[$q.notifyError("Erro ao mostrar relat\xF3rio (createApp)",r),String(r)]}try{t||(this.app.mount(i),this.$nextTick().then(()=>{this.$emit("mounted")}))}catch(r){t=[$q.notifyError("Erro ao mostrar relat\xF3rio (app.mount)",r),String(r)]}try{if(t){const r=e.contentDocument.body;r.innerHTML=t.map(a=>"<p>"+a+"</p>").join("")}}catch(r){$q.notifyError("Erro ao mostrar relat\xF3rio (mostrar erros)",r)}}}},unmounted(){try{this.app&&this.app.unmount()}catch(o){console.error("Erro ao limpar relat\xF3rio (app.unmount)",o)}}};export{x as V};
