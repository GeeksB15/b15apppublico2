import{_ as te,r as q,o as n,p as F,f as e,bJ as se,w as o,S as k,T as r,j as _,U as d,k as i,P as Q,F as R,u as H,d as u,C as f,t as p,m as w,e as c,Q as S,be as ie,H as J,N as K,l as W,M as G,L as re,E as ne,G as X,h as Y,i as T,I as Z,J as $,W as ue,K as de,bq as ce,D as ee}from"./index.4ec51216.js";import{L as me}from"./Lista.f4ae669d.js";import{S as fe}from"./SeletorFinanceiroPlanoContas.2490c0e9.js";import{S as pe}from"./SeletorEmpresa.f871dfde.js";const N={visivel:!1,dadosEmpresa:null,id:"",ativo:1,removido:0,empresa:"",cnpjEmpresa:"00.000.000/000-00",vigenciaDe:null,vigenciaAte:null,idFinanceiroPlanoConta:null,percentual:0,valorMinimo:0,valorMaximo:0,diasMinimoUso:0,diasExpiracao:0,textoRegras:"",observacao:""},ge={components:{Lista:me,SeletorPlanoContas:fe,SeletorEmpresa:pe},data(){return{usuario:"",listaLayout:{},lista:[],listaRemovidos:[],mostrar:{header:!1,barraTopo:!1,toolbarTitulo:!0,icone:"",titulo:"",buscar:!0,filtroAvancado:!0,btnAjuda:!0,btnAtualizar:!0,btnNovo:!0,toolbarAcoes:!0,checkBox:!1,btnRemover:!1,btnRestaurar:!1,centralizaTabs:!1,btnDetalhes:!0,btnExportaXLS:!1,btnMenuMais:!0,toolbarAdicao:!1,bannerMsg:""},busca:"",filtrosOriginal:{},filtros:{cnpjEmpresa:null,vigenciaDe:"",vigenciaAte:"",ordenacao:"vigenciaDe",direcao:"desc"},ordenacaoOpcoes:[{value:"vigenciaDe",label:"Vig\xEAncia De"},{value:"vigenciaAte",label:"Vig\xEAncia At\xE9"},{value:"descricao",label:"Descri\xE7\xE3o"}],direcaoOpcoes:[{value:"asc",label:"Crescente"},{value:"desc",label:"Decrescente"}],detalhes:!1,tabSelecionada:{valor:"Ativos"},tabs:[{valor:"Ativos",rotulo:"Ativos"},{valor:"Inativos",rotulo:"Inativos"},{valor:"Todos",rotulo:"Todos"}],paginacao:{atual:1,maximo:1,total:1,limite:25},voucherOriginal:{},voucher:{},removidos:!1,tela:{width:0,heihgt:0}}},methods:{async atualizar(s){var l,V,D,t,m,C,h,M,O,U;try{$q.loading.show(),this.lista=[],this.listaRemovidos=[];let v=[];this.tabSelecionadaAnt!==this.tabSelecionada.valor&&(this.paginacao.atual=1),this.tabSelecionadaAnt=this.tabSelecionada.valor;let{buscarDadosRecentes:x}=s!=null?s:{},g={};x&&(g=await $utils.localIDB.getItem({objectStore:"dadosRecentes",id:"ConfiguracoesVouchers_"+((l=this.usuario)==null?void 0:l.id)}),g!=null&&g._id&&(this.tabSelecionada.valor=(g==null?void 0:g.tabSelecionada)||"Ativos",this.busca=(g==null?void 0:g.busca)||"",this.filtros={cnpjEmpresa:((V=g==null?void 0:g.filtros)==null?void 0:V.cnpjEmpresa)||null,vigenciaDe:((D=g==null?void 0:g.filtros)==null?void 0:D.vigenciaDe)||"",vigenciaAte:((t=g==null?void 0:g.filtros)==null?void 0:t.vigenciaAte)||"",ordenacao:((m=g==null?void 0:g.filtros)==null?void 0:m.ordenacao)||"vigenciaDe",direcao:((C=g==null?void 0:g.filtros)==null?void 0:C.direcao)||"desc"},this.compareObject(this.filtrosOriginal,this.filtros,["ordenacao","direcao"])&&(this.$refs.configuracoesVouchers.filtros=!0)));const L=await $utils.geeksApi({return:{funcao:"2CB180A6-5464-4D30-AF0F-82C897831886"}}),P=(O=JSON.parse((M=(h=L==null?void 0:L.data)==null?void 0:h.return[0].json)!=null?M:null))!=null?O:[];if(v=this.ordenarDados(P,{ordenacao:this.filtros.ordenacao,direcao:this.filtros.direcao}),this.listaRemovidos=v.filter(y=>y.removido===1)||[],v=v.filter(y=>y.removido===0)||[],this.filtros.cnpjEmpresa){const y=this.filtros.cnpjEmpresa.numeroDocumentoNacional;v=v.filter(E=>E.cnpjEmpresa===y)}if(this.filtros.vigenciaDe||this.filtros.vigenciaAte){const y=this.filtros.vigenciaDe?new Date(this.filtros.vigenciaDe).setHours(0,0,0,0):null,E=this.filtros.vigenciaAte?new Date(this.filtros.vigenciaAte).setHours(0,0,0,0):null;v=v.filter(z=>{const j=new Date(z.vigenciaDe).setHours(0,0,0,0),A=new Date(z.vigenciaAte).setHours(0,0,0,0);return y!==null&&E!==null?j>=y&&j<=E||A>=E&&A<=y:y!==null?j>=y&&j<=y:E!==null?A>=E&&A<=E:!0})}if(this.busca)if(this.paginacao.atual=1,/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test(this.busca))this.tabSelecionada.valor="Todos",v=v.filter(E=>E.id===this.busca);else{const z=$utils.removerAcentos(this.busca.toUpperCase()).split(" ").filter(Boolean).filter(A=>!A.match(/^\d+$/)),j=[];v=v.filter(A=>{const oe=$utils.removerAcentos([(A.empresa||"Todas as empresas")+" - "+A.percentual+"%",A.cnpjEmpresa].join(" ").toUpperCase());let I=!0;for(const le of z)I=I&&oe.includes(le);return I})}this.tabSelecionada.valor==="Ativos"&&(v=v.filter(y=>y.ativo===1)),this.tabSelecionada.valor==="Inativos"&&(v=v.filter(y=>y.ativo===0));const a=Math.ceil(v.length/this.paginacao.limite);this.paginacao.atual=this.paginacao.atual>a?a:this.paginacao.atual,this.paginacao.total=v.length,this.paginacao.maximo=a;const b=this.paginacao.atual*this.paginacao.limite-this.paginacao.limite,ae=this.paginacao.atual*this.paginacao.limite;this.lista=v.slice(b,ae);let B=!0;for(const y of this.lista)this.listaLayout.hasOwnProperty(y.id)||(this.listaLayout[y.id]={detalhes:!1}),this.listaLayout[y.id].detalhes||(B=!1);this.$refs.configuracoesVouchers.detalhes=B,g={_id:"ConfiguracoesVouchers_"+((U=this.usuario)==null?void 0:U.id),tabSelecionada:this.tabSelecionada.valor,busca:this.busca,filtros:$utils.clonar(this.filtros)},await $utils.localIDB.setItem({objectStore:"dadosRecentes",data:g})}catch(v){$q.notifyError("Erro iniciar",v)}finally{$q.loading.hide()}},ordenarDados(s,l){return s.sort((V,D)=>{let t=l.ordenacao,m=l.direcao==="desc"?-1:1,C="",h="";return t.includes("vigencia")&&(C=new Date(V[t]),h=new Date(D[t])),t.includes("descricao")?(C=`${V.empresa?V.empresa:"Todas as empresas"} - ${V.percentual}%`,h=`${D.empresa?D.empresa:"Todas as empresas"} - ${D.percentual}%`):typeof C=="string"&&typeof h=="string"&&(C=C.trim().toLowerCase(),h=h.trim().toLowerCase()),C<h?-1*m:C>h?1*m:0})},async abrirVoucher(s){if(s!=null&&s.id){const l=await this.buscarEmpresa(s.cnpjEmpresa);this.voucher={...s,dadosEmpresa:l,visivel:!0},this.voucherOriginal=$utils.clonar(this.voucher)}else this.voucher={...N,id:$utils.uuid(),vigenciaDe:$utils.dataAtual(),vigenciaAte:$utils.dataAtual(),visivel:!0}},fecharVoucher(){this.voucher=$utils.clonar(N)},async salvarVoucher(){try{$q.loading.show();const s=$utils.clonar(this.voucher),l=$utils.diferencaObjetos(this.voucherOriginal,s);Object.keys(l).length>0?(s.dadosEmpresa?(s.empresa=s.dadosEmpresa.nome||s.dadosEmpresa.apelido,s.cnpjEmpresa=s.dadosEmpresa.numeroDocumentoNacional):(s.empresa="",s.cnpjEmpresa=""),delete s.visivel,delete s.dadosEmpresa,await $utils.geeksApi({salvarVoucher:{funcao:"A288EBE9-B138-4D5D-A185-2F68BDDBB3F9",...s}}),this.voucher=$utils.clonar(N),await this.atualizar(),$q.notifyPositive("Configura\xE7\xF5es de voucher cadastrada com sucesso!")):$q.notify("Configura\xE7\xF5es de voucher sem altera\xE7\xF5es a serem salvas.")}catch{$q.notifyError("Erro ao cadastrar configura\xE7\xF5es de voucher.")}finally{$q.loading.hide()}},async duplicarVoucher(s){$q.dialog({title:"Duplicar Configura\xE7\xF5es do Voucher",message:`Ao continuar voc\xEA ir\xE1 duplicar as configura\xE7\xF5es do voucher: ${s.empresa||"Todas as empresas"} - ${s.percentual+"%"}.`,cancel:{label:"N\xE3o",push:!0,color:"textiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(async()=>{const l=await this.buscarEmpresa(s.cnpjEmpresa);this.voucher={...s,id:$utils.uuid(),vigenciaDe:$utils.dataAtual(),vigenciaAte:$utils.dataAtual(),dadosEmpresa:l,visivel:!0}})},removerVoucher(s){$q.dialog({title:"Remover Configura\xE7\xF5es do Voucher",message:`Ao continuar voc\xEA ir\xE1 remover as configura\xE7\xF5es do voucher: ${s.empresa||"Todas as empresas"} - ${s.percentual+"%"}.`,cancel:{label:"N\xE3o",push:!0,color:"textiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(async()=>{const l=await this.buscarEmpresa(s.cnpjEmpresa);this.voucher={...s,ativo:0,removido:1,dadosEmpresa:l,visivel:!1},await this.salvarVoucher()})},restaurarVoucher(s){$q.dialog({title:"Restaurar Configura\xE7\xF5es do Voucher",message:`Ao continuar voc\xEA ir\xE1 restaurar as configura\xE7\xF5es do voucher: ${s.empresa||"Todas as empresas"} - ${s.percentual+"%"}.`,cancel:{label:"N\xE3o",push:!0,color:"textiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(async()=>{const l=await this.buscarEmpresa(s.cnpjEmpresa);this.removidos=!1,this.voucher={...s,ativo:1,removido:0,dadosEmpresa:l,visivel:!0}})},async buscarEmpresa(s){try{if(s){const l=(await $db.hibrido.lista({table:"empresa",whereFilter:{numeroDocumentoNacional:s}}))[0];return{id:l.idContato,nome:l.nome,apelido:l.apelido,numeroDocumentoNacional:s}}return null}catch(l){$q.notifyError("Empresa n\xE3o localizada",l)}},detalhesClick(){this.detalhes=!this.detalhes,this.lista.forEach(s=>{this.abrirDetalhes(s,this.detalhes)})},async abrirDetalhes(s,l){this.listaLayout[s.id].detalhes=l||!this.listaLayout[s.id].detalhes,this.verificarListaLayout("detalhes")},verificarListaLayout(s){{let l=!0;for(const V of this.lista)this.listaLayout[V.id].detalhes||(l=!1);this.detalhes=l,this.$refs.configuracoesVouchers.detalhes=l}},async limparFiltrosClick(){this.filtros=$utils.clonar(this.filtrosOriginal),await this.atualizar()},compareObject(s,l,V=[]){const D=Object.keys(s);for(const t of D)if(!V.includes(t)){if(typeof s[t]=="object"&&s[t]!==null){if(!this.compareObject(s[t],l[t],V))continue;return!0}else if(s[t]!==l[t])return!0}return!1},resize(){const s=document.getElementById("ConfiguracoesVouchers");s&&(this.tela={width:s.offsetWidth,height:s.offsetHeight})}},async mounted(){this.usuario=JSON.parse(localStorage.getItem("usuario")),this.filtrosOriginal=$utils.clonar(this.filtros),await this.atualizar({buscarDadosRecentes:!0})}},ve={id:"ConfiguracoesVouchers"},he={class:"mw80 text-center"},be={class:"text-weight-bold"},ye={class:"text-weight-bold"},xe={class:"text-weight-bold"},ke={class:"text-weight-bold"},Ve={class:"text-weight-medium"},_e={class:"text-weight-bold"},Ce={class:"text-weight-bold"},we={key:0},Ee={key:1},De={class:"mw80 text-center"},Ae={class:"text-weight-bold"},qe={class:"text-weight-bold"},Me={class:"text-weight-bold"},Se={class:"text-weight-bold"},Ue={class:"text-weight-medium"},Fe={class:"text-weight-bold"},Oe={class:"text-weight-bold"};function Le(s,l,V,D,t,m){const C=q("SeletorEmpresa"),h=q("campo"),M=q("BadgeCopiarUid"),O=q("avatar"),U=q("badge"),v=q("g-label"),x=q("g-col"),g=q("g-row"),L=q("Lista"),P=q("SeletorPlanoContas");return n(),F("div",ve,[e(se,{onResize:l[0]||(l[0]=a=>m.resize())}),e(L,{ref:"configuracoesVouchers",busca:t.busca,"onUpdate:busca":l[8]||(l[8]=a=>t.busca=a),onAtualizar:m.atualizar,onCriarClick:m.abrirVoucher,onDetalhesClick:m.detalhesClick,onLimparFiltrosClick:m.limparFiltrosClick,lista:t.lista,tabSelecionada:t.tabSelecionada,tabs:t.tabs,paginacao:t.paginacao,mostrar:t.mostrar,style:{"margin-top":"-16px"}},{menuExtras:o(()=>[e(k,{onClick:l[1]||(l[1]=()=>{t.removidos=!t.removidos}),clickable:""},{default:o(()=>[e(r,{avatar:""},{default:o(()=>[e(_,{name:"restore_from_trash",size:"sm"})]),_:1}),e(r,null,{default:o(()=>[e(d,null,{default:o(()=>l[26]||(l[26]=[i("Restaurar")])),_:1}),e(d,{caption:""},{default:o(()=>l[27]||(l[27]=[i("Vouchers removidos")])),_:1})]),_:1})]),_:1})]),filtroCampos:o(()=>[e(C,{modelValue:t.filtros.cnpjEmpresa,"onUpdate:modelValue":l[2]||(l[2]=a=>t.filtros.cnpjEmpresa=a),rotulo:"Por empresa",dense:"",chaves:["id","numeroDocumentoNacional"]},null,8,["modelValue"]),e(h,{modelValue:t.filtros.vigenciaDe,"onUpdate:modelValue":l[3]||(l[3]=a=>t.filtros.vigenciaDe=a),tipo:"data",dense:"",rotulo:"Vig\xEAncia de",class:"q-mt-lg"},null,8,["modelValue"]),e(h,{modelValue:t.filtros.vigenciaAte,"onUpdate:modelValue":l[4]||(l[4]=a=>t.filtros.vigenciaAte=a),tipo:"data",dense:"",rotulo:"at\xE9",class:"q-mt-sm"},null,8,["modelValue"]),e(h,{modelValue:t.filtros.ordenacao,"onUpdate:modelValue":l[5]||(l[5]=a=>t.filtros.ordenacao=a),options:t.ordenacaoOpcoes,dense:"",rotuloFixo:"Ordenar por",tipo:"seletor",class:"q-mt-xl"},null,8,["modelValue","options"]),e(h,{modelValue:t.filtros.direcao,"onUpdate:modelValue":l[6]||(l[6]=a=>t.filtros.direcao=a),options:t.direcaoOpcoes,dense:"",rotuloFixo:"Dire\xE7\xE3o",tipo:"seletor",class:"q-mt-sm"},null,8,["modelValue","options"]),e(h,{modelValue:t.paginacao.limite,"onUpdate:modelValue":l[7]||(l[7]=a=>t.paginacao.limite=a),tipo:"quantidade",min:"1",dense:"",rotulo:"Quantidade por p\xE1gina",class:"q-mt-xl q-mb-md"},null,8,["modelValue"])]),itemLista:o(()=>[e(Q,{bordered:"",class:"bg-white q-mb-xs rounded-borders"},{default:o(()=>[(n(!0),F(R,null,H(t.lista,a=>(n(),F("div",{key:a.id,class:"itemHover"},[a.id?(n(),u(k,{key:0,"manual-focus":"",class:"q-py-sm q-px-xs items-center"},{default:o(()=>[e(r,{class:"hideonmobile col-auto no-margin"},{default:o(()=>[f("div",he,[e(M,{id:a.id,numero:a.id.slice(-8),escuro:"",cor:a.ativo?"positive":"tertiary",dica:"C\xF3digo Item"},null,8,["id","numero","cor"])])]),_:2},1024),e(r,{class:"col-xs col-sm no-margin"},{default:o(()=>[e(k,{class:"q-pa-none"},{default:o(()=>[e(r,{onClick:b=>m.abrirVoucher(a),class:"col-auto items-center cursor-pointer"},{default:o(()=>[e(O,{rotulo:`${a.empresa||"Todas as empresas"}`,tamanho:"40",style:{display:"flex","align-self":"center"}},null,8,["rotulo"])]),_:2},1032,["onClick"]),e(r,{class:"col"},{default:o(()=>[e(d,{onClick:b=>m.abrirVoucher(a),lines:"2",class:"cursor-pointer"},{default:o(()=>[f("span",null,[f("span",be,p(a.empresa||"Todas as empresas"),1),l[29]||(l[29]=f("span",{class:"q-px-sm"},"-",-1)),f("span",null,p(a.percentual)+"%",1),e(w,{anchor:"bottom start",self:"center start"},{default:o(()=>l[28]||(l[28]=[i("Descri\xE7\xE3o")])),_:1})])]),_:2},1032,["onClick"]),a.cnpjEmpresa?(n(),u(d,{key:0,onClick:b=>m.abrirVoucher(a),caption:"",class:"cursor-pointer"},{default:o(()=>[f("span",null,[i(p(a.cnpjEmpresa)+" ",1),e(w,{anchor:"bottom start",self:"center start"},{default:o(()=>l[30]||(l[30]=[i("CNPJ")])),_:1})])]),_:2},1032,["onClick"])):c("",!0),e(r,{class:"hideondesktop q-mt-xs"},{default:o(()=>[e(M,{id:a.id,numero:a.id.slice(-8),escuro:"",cor:a.ativo?"positive":"tertiary",dica:"C\xF3digo Item",class:"col-auto q-mr-auto"},null,8,["id","numero","cor"]),e(k,{class:"no-padding no-margin",style:{"min-height":"20px"}},{default:o(()=>[e(r,{onClick:b=>m.abrirVoucher(a),class:"no-margin text-weight-medium"},{default:o(()=>[a.vigenciaDe?(n(),u(d,{key:0,caption:""},{default:o(()=>[e(_,{name:"mdi-calendar-today"}),i(" "+p(s.$filters.data(a.vigenciaDe)),1)]),_:2},1024)):c("",!0)]),_:2},1032,["onClick"]),e(r,{onClick:b=>m.abrirVoucher(a),class:"no-margin text-weight-medium"},{default:o(()=>[a.vigenciaAte?(n(),u(d,{key:0,caption:""},{default:o(()=>[e(_,{name:"mdi-calendar"}),i(" "+p(s.$filters.data(a.vigenciaAte)),1)]),_:2},1024)):c("",!0)]),_:2},1032,["onClick"])]),_:2},1024),e(k,{class:"no-padding no-margin",style:{"min-height":"10px"}},{default:o(()=>[e(r,{onClick:b=>m.abrirVoucher(a),class:"no-margin"},{default:o(()=>[a.diasExpiracao?(n(),u(d,{key:0,caption:""},{default:o(()=>[l[31]||(l[31]=i(" Expira em: ")),f("span",ye,p(a.diasExpiracao),1)]),_:2},1024)):c("",!0)]),_:2},1032,["onClick"]),e(r,{onClick:b=>m.abrirVoucher(a),class:"no-margin"},{default:o(()=>[a.diasMinimoUso?(n(),u(d,{key:0,caption:""},{default:o(()=>[l[32]||(l[32]=i(" Dias m\xEDnimo: ")),f("span",xe,p(a.diasMinimoUso),1)]),_:2},1024)):c("",!0)]),_:2},1032,["onClick"])]),_:2},1024),e(k,{class:"no-padding no-margin",style:{"min-height":"32px"}},{default:o(()=>[e(r,{onClick:b=>m.abrirVoucher(a),class:"maxw50 no-margin"},{default:o(()=>[a.percentual?(n(),u(d,{key:0},{default:o(()=>[e(U,{rotulo:"%"+a.percentual,escuro:"",dica:"Percentual da venda",cor:"tertiary"},null,8,["rotulo"])]),_:2},1024)):c("",!0)]),_:2},1032,["onClick"]),e(r,{onClick:b=>m.abrirVoucher(a),class:"col-auto no-margin"},{default:o(()=>[a.valorMaximo?(n(),u(d,{key:0,caption:"",class:"text-right"},{default:o(()=>[l[33]||(l[33]=i(" Valor m\xE1ximo: ")),f("span",ke,p(s.$filters.numero(a.valorMaximo,2)),1)]),_:2},1024)):c("",!0),a.valorMinimo?(n(),u(d,{key:1,caption:"",class:"text-right"},{default:o(()=>[l[34]||(l[34]=i(" Valor m\xEDnimo: ")),f("span",Ve,p(s.$filters.numero(a.valorMinimo,2)),1)]),_:2},1024)):c("",!0)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(r,{onClick:b=>m.abrirVoucher(a),class:"hideonmobile maxw100 no-margin cursor-pointer"},{default:o(()=>[a.vigenciaDe?(n(),u(d,{key:0,caption:"",class:"text-center text-weight-medium"},{default:o(()=>[f("span",null,[e(_,{name:"mdi-calendar-today"}),i(" "+p(s.$filters.data(a.vigenciaDe))+" ",1),e(w,{anchor:"bottom middle",self:"center middle"},{default:o(()=>l[35]||(l[35]=[i("Vig\xEAncia de")])),_:1})])]),_:2},1024)):c("",!0),a.vigenciaAte?(n(),u(d,{key:1,caption:"",class:"text-center text-weight-medium"},{default:o(()=>[f("span",null,[e(_,{name:"mdi-calendar"}),i(" "+p(s.$filters.data(a.vigenciaAte))+" ",1),e(w,{anchor:"bottom middle",self:"center middle"},{default:o(()=>l[36]||(l[36]=[i("Vig\xEAncia at\xE9")])),_:1})])]),_:2},1024)):c("",!0)]),_:2},1032,["onClick"]),e(r,{onClick:b=>m.abrirVoucher(a),class:"hideonmobile maxw120 q-pl-sm no-margin cursor-pointer"},{default:o(()=>[a.diasExpiracao?(n(),u(d,{key:0,caption:""},{default:o(()=>[l[37]||(l[37]=i(" Expira em: ")),f("span",_e,p(a.diasExpiracao),1)]),_:2},1024)):c("",!0),a.diasMinimoUso?(n(),u(d,{key:1,caption:""},{default:o(()=>[l[38]||(l[38]=i(" Dias m\xEDnimo: ")),f("span",Ce,p(a.diasMinimoUso),1)]),_:2},1024)):c("",!0)]),_:2},1032,["onClick"]),e(r,{onClick:b=>m.abrirVoucher(a),class:"hideonmobile maxw50 q-pl-sm no-margin"},{default:o(()=>[a.percentual?(n(),u(d,{key:0},{default:o(()=>[e(U,{rotulo:"%"+a.percentual,escuro:"",dica:"Percentual da venda",cor:"tertiary"},null,8,["rotulo"])]),_:2},1024)):c("",!0)]),_:2},1032,["onClick"]),e(r,{onClick:b=>m.abrirVoucher(a),class:"hideonmobile maxw100 q-pl-sm no-margin"},{default:o(()=>[a.valorMaximo?(n(),u(d,{key:0,caption:"",class:"text-weight-bold text-right"},{default:o(()=>[f("span",null,[i(p(s.$filters.numero(a.valorMaximo,2))+" ",1),e(w,{anchor:"bottom middle",self:"center middle"},{default:o(()=>l[39]||(l[39]=[i(" Valor m\xE1ximo ")])),_:1})])]),_:2},1024)):c("",!0),a.valorMinimo?(n(),u(d,{key:1,caption:"",class:"text-weight-medium text-right"},{default:o(()=>[f("span",null,[i(p(s.$filters.numero(a.valorMinimo,2))+" ",1),e(w,{anchor:"bottom middle",self:"center middle"},{default:o(()=>l[40]||(l[40]=[i(" Valor m\xEDnimo ")])),_:1})])]),_:2},1024)):c("",!0)]),_:2},1032,["onClick"]),e(r,{class:"col-auto no-margin"},{default:o(()=>[e(k,{class:"q-pa-none"},{default:o(()=>[e(r,{class:"hideonmobile no-margin",style:{"max-width":"32px"}},{default:o(()=>[e(S,{onClick:b=>m.abrirDetalhes(a),size:"md",color:"tertiary",round:"",flat:"",dense:"",icon:t.listaLayout[a.id].detalhes?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"])]),_:2},1024),e(r,{class:"hideonmobile no-margin"},{default:o(()=>[e(S,{onClick:b=>m.abrirVoucher(a),icon:"edit",size:"md",color:"primary",round:"",flat:"",dense:""},null,8,["onClick"])]),_:2},1024),e(r,{class:"no-margin"},{default:o(()=>[e(S,{icon:"more_vert",size:"md",round:"",flat:"",dense:""},{default:o(()=>[e(ie,null,{default:o(()=>[J((n(),u(Q,{link:"","no-border":"",separator:""},{default:o(()=>[e(k,{onClick:b=>m.abrirVoucher(a),clickable:"",class:"hideondesktop"},{default:o(()=>[e(r,{avatar:""},{default:o(()=>[e(_,{name:"edit"})]),_:1}),e(r,null,{default:o(()=>l[41]||(l[41]=[i(" Editar ")])),_:1})]),_:2},1032,["onClick"]),e(k,{onClick:b=>m.duplicarVoucher(a),clickable:""},{default:o(()=>[e(r,{avatar:""},{default:o(()=>[e(_,{name:"file_copy"})]),_:1}),e(r,null,{default:o(()=>[e(d,null,{default:o(()=>l[42]||(l[42]=[i(" Duplicar ")])),_:1})]),_:1})]),_:2},1032,["onClick"]),e(k,{onClick:b=>m.removerVoucher(a),clickable:""},{default:o(()=>[e(r,{avatar:""},{default:o(()=>[e(_,{name:"delete"})]),_:1}),e(r,null,{default:o(()=>[e(d,null,{default:o(()=>l[43]||(l[43]=[i(" Apagar ")])),_:1})]),_:1})]),_:2},1032,["onClick"]),e(k,{onClick:b=>m.abrirDetalhes(a),clickable:"",class:"hideondesktop"},{default:o(()=>[e(r,{avatar:""},{default:o(()=>[e(_,{name:t.listaLayout[a.id].detalhes?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])]),_:2},1024),e(r,null,{default:o(()=>l[44]||(l[44]=[i("Mais Detalhes")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)),[[K]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):c("",!0),t.listaLayout[a.id].detalhes?(n(),u(g,{key:1,gutter:"md-x lg-y"},{default:o(()=>[e(x,{col:"12 sm6",bordered:""},{default:o(()=>[e(v,{icon:"description xs tertiary left",text:"medium"},{default:o(()=>l[45]||(l[45]=[i("Regras para uso")])),_:1}),e(v,{class:"q-pl-lg"},{default:o(()=>[i(p(a.textoRegras),1)]),_:2},1024)]),_:2},1024),e(x,{col:"12 sm6",bordered:""},{default:o(()=>[e(v,{icon:"description xs tertiary left",text:"medium"},{default:o(()=>l[46]||(l[46]=[i("Observa\xE7\xE3o")])),_:1}),e(v,{class:"q-pl-lg"},{default:o(()=>[i(p(a.observacao),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)):c("",!0),a.id?(n(),u(W,{key:2})):c("",!0)]))),128))]),_:1})]),_:1},8,["busca","onAtualizar","onCriarClick","onDetalhesClick","onLimparFiltrosClick","lista","tabSelecionada","tabs","paginacao","mostrar"]),e(ee,{modelValue:t.voucher.visivel,"onUpdate:modelValue":l[23]||(l[23]=a=>t.voucher.visivel=a),onKeyup:l[24]||(l[24]=ce(a=>m.fecharVoucher(),["esc"])),maximized:t.tela.width<=992},{default:o(()=>[e(G,{container:"",view:"hHh LpR fFf",class:"bg-white rounded-borders",style:re(t.tela.width<=992?"":"max-width:600px;height:100%;max-height:600px;")},{default:o(()=>[e(ne,{onSubmit:m.salvarVoucher,autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false",novalidate:""},{default:o(()=>[e(X,null,{default:o(()=>[e(Y,null,{default:o(()=>[e(_,{name:"edit_note",size:"md"}),e(T,{class:"hideonmobile"},{default:o(()=>l[47]||(l[47]=[i("Configura\xE7\xF5es do Voucher")])),_:1}),e(T,{class:"hideondesktop"},{default:o(()=>l[48]||(l[48]=[i("Config. Voucher")])),_:1}),t.voucher.id?(n(),u(M,{key:0,id:t.voucher.id||"0000",numero:(t.voucher.id||"0000").slice(-8),cor:"positive",class:"float-right"},null,8,["id","numero"])):c("",!0)]),_:1})]),_:1}),e(Z,null,{default:o(()=>[e($,null,{default:o(()=>[e(g,{gutter:"md",items:"center",justify:"center"},{default:o(()=>[e(x,{col:"12"},{default:o(()=>[e(g,{items:"center"},{default:o(()=>[e(x,{col:"shrink"},{default:o(()=>[f("span",null,[e(ue,{modelValue:t.voucher.ativo,"onUpdate:modelValue":l[9]||(l[9]=a=>t.voucher.ativo=a),dense:"","true-value":1,"false-value":0,class:"q-mb-md"},null,8,["modelValue"]),e(w,{anchor:"bottom start",self:"center start"},{default:o(()=>[i(p(t.voucher.ativo===1?"Ativo":"Inativo"),1)]),_:1})])]),_:1}),e(x,{col:"xs"},{default:o(()=>[e(v,{text:"medium",bg:"bg-light",class:"q-py-sm q-px-md q-mb-md disabled"},{default:o(()=>[t.voucher.dadosEmpresa?(n(),F("span",we,p(t.voucher.dadosEmpresa.nome||t.voucher.dadosEmpresa.apelido||t.voucher.empresa),1)):(n(),F("span",Ee," Todas as empresas ")),l[49]||(l[49]=f("span",{class:"q-px-sm"},"-",-1)),f("span",null,p(t.voucher.percentual)+"%",1)]),_:1})]),_:1})]),_:1})]),_:1}),e(x,{col:"12 md6"},{default:o(()=>[e(C,{modelValue:t.voucher.dadosEmpresa,"onUpdate:modelValue":l[10]||(l[10]=a=>t.voucher.dadosEmpresa=a),filled:"",dense:"",chaves:["id","nome","apelido","numeroDocumentoNacional"]},null,8,["modelValue"])]),_:1}),e(x,{col:"12 md6"},{default:o(()=>[e(P,{modelValue:t.voucher.idFinanceiroPlanoConta,"onUpdate:modelValue":l[11]||(l[11]=a=>t.voucher.idFinanceiroPlanoConta=a),rules:[a=>a&&a.length>2||"Obrigat\xF3rio"],filled:"",dense:"",rotulo:"Plano de contas"},null,8,["modelValue","rules"])]),_:1}),e(x,{col:"6"},{default:o(()=>[e(h,{modelValue:t.voucher.vigenciaDe,"onUpdate:modelValue":l[12]||(l[12]=a=>t.voucher.vigenciaDe=a),filled:"",dense:"",tipo:"data",rotulo:"Vig\xEAncia de",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1}),e(x,{col:"6"},{default:o(()=>[e(h,{modelValue:t.voucher.vigenciaAte,"onUpdate:modelValue":l[13]||(l[13]=a=>t.voucher.vigenciaAte=a),filled:"",dense:"",tipo:"data",rotulo:"Vig\xEAncia at\xE9",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1}),e(x,{col:"6"},{default:o(()=>[e(h,{modelValue:t.voucher.diasMinimoUso,"onUpdate:modelValue":l[14]||(l[14]=a=>t.voucher.diasMinimoUso=a),filled:"",dense:"",tipo:"quantidade",rotulo:"Dias m\xEDnimos para uso",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1}),e(x,{col:"6"},{default:o(()=>[e(h,{modelValue:t.voucher.diasExpiracao,"onUpdate:modelValue":l[15]||(l[15]=a=>t.voucher.diasExpiracao=a),filled:"",dense:"",rotulo:"Expira em (dias)",tipo:"quantidade",rules:[a=>a&&parseFloat(a)>0||"Obrigat\xF3rio (maior que 0)"]},null,8,["modelValue","rules"])]),_:1}),e(x,{col:"12 sm3"},{default:o(()=>[e(h,{modelValue:t.voucher.percentual,"onUpdate:modelValue":l[16]||(l[16]=a=>t.voucher.percentual=a),filled:"",dense:"",prefix:"%",rotulo:"Perc. Venda",tipo:"decimal",rules:[a=>a&&parseFloat(a)>0||"Obrigat\xF3rio (maior que 0)"]},null,8,["modelValue","rules"])]),_:1}),e(x,{col:"12 sm"},{default:o(()=>[e(h,{modelValue:t.voucher.valorMinimo,"onUpdate:modelValue":l[17]||(l[17]=a=>t.voucher.valorMinimo=a),filled:"",dense:"",prefix:"R$",rotulo:"Valor m\xEDnimo",tipo:"decimal",rules:[a=>a&&parseFloat(a)>0||"Obrigat\xF3rio (maior que 0)"]},null,8,["modelValue","rules"])]),_:1}),e(x,{col:"12 sm"},{default:o(()=>[e(h,{modelValue:t.voucher.valorMaximo,"onUpdate:modelValue":l[18]||(l[18]=a=>t.voucher.valorMaximo=a),prefix:"R$",rotulo:"Valor m\xE1ximo",tipo:"decimal",filled:"",dense:"",rules:[a=>a&&parseFloat(a)>0||"Obrigat\xF3rio (maior que 0)"]},null,8,["modelValue","rules"])]),_:1}),e(x,{col:"12"},{default:o(()=>[e(h,{modelValue:t.voucher.textoRegras,"onUpdate:modelValue":l[19]||(l[19]=a=>t.voucher.textoRegras=a),filled:"",dense:"",rotulo:"Regras para uso:",tipo:"textoArea",class:"q-field--with-bottom"},null,8,["modelValue"])]),_:1}),e(x,{col:"12"},{default:o(()=>[e(h,{modelValue:t.voucher.observacao,"onUpdate:modelValue":l[20]||(l[20]=a=>t.voucher.observacao=a),filled:"",dense:"",rotulo:"Observa\xE7\xE3o:",tipo:"textoArea",class:"q-mb-lg"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(de,{class:"bg-light border-top q-px-md q-py-sm text-right"},{default:o(()=>{var a;return[((a=t.voucher)==null?void 0:a.removido)===0?(n(),u(S,{key:0,onClick:l[21]||(l[21]=b=>m.removerVoucher(t.voucher)),flat:"",round:"",dense:"",icon:"delete",color:"tertiary",class:"float-left"})):c("",!0),e(S,{onClick:l[22]||(l[22]=b=>m.fecharVoucher()),flat:"",label:"Cancelar",color:"tertiary"}),e(S,{type:"submit",unelevated:"",dark:"",color:"primary",label:"Salvar",class:"q-ml-sm"})]}),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["style"])]),_:1},8,["modelValue","maximized"]),e(ee,{modelValue:t.removidos,"onUpdate:modelValue":l[25]||(l[25]=a=>t.removidos=a),maximized:""},{default:o(()=>[e(G,{container:"",view:"hHh LpR fFf",class:"bg-white rounded-borders"},{default:o(()=>[e(X,null,{default:o(()=>[e(Y,{class:"q-px-sm"},{default:o(()=>[J(e(S,{icon:"arrow_back",dense:"",flat:"",round:""},null,512),[[K]]),e(T,{class:"hideonmobile"},{default:o(()=>l[50]||(l[50]=[i("Configura\xE7\xF5es de Vouchers Removidos")])),_:1}),e(T,{class:"hideondesktop"},{default:o(()=>l[51]||(l[51]=[i("Config. Vouchers Removidos")])),_:1})]),_:1})]),_:1}),e(Z,null,{default:o(()=>[e($,null,{default:o(()=>[e(Q,{bordered:"",class:"bg-white q-mb-xs rounded-borders"},{default:o(()=>[t.listaRemovidos.length?(n(!0),F(R,{key:0},H(t.listaRemovidos,a=>(n(),F("div",{key:a.id,class:"itemHover"},[a.id?(n(),u(k,{key:0,"manual-focus":"",class:"q-py-sm q-px-xs items-center"},{default:o(()=>[e(r,{class:"hideonmobile col-auto no-margin"},{default:o(()=>[f("div",De,[e(M,{id:a.id,numero:a.id.slice(-8),escuro:"",cor:a.ativo?"positive":"tertiary",dica:"C\xF3digo Item"},null,8,["id","numero","cor"])])]),_:2},1024),e(r,{class:"col-xs col-sm no-margin"},{default:o(()=>[e(k,{class:"q-pa-none"},{default:o(()=>[e(r,{class:"col-auto items-center cursor-pointer"},{default:o(()=>[e(O,{rotulo:`${a.empresa||"Todas as empresas"}`,tamanho:"40",style:{display:"flex","align-self":"center"}},null,8,["rotulo"])]),_:2},1024),e(r,{class:"col"},{default:o(()=>[e(d,{lines:"2",class:"cursor-pointer"},{default:o(()=>[f("span",null,[f("span",Ae,p(a.empresa||"Todas as empresas"),1),l[53]||(l[53]=f("span",{class:"q-px-sm"},"-",-1)),f("span",null,p(a.percentual)+"%",1),e(w,{anchor:"bottom start",self:"center start"},{default:o(()=>l[52]||(l[52]=[i("Descri\xE7\xE3o")])),_:1})])]),_:2},1024),a.cnpjEmpresa?(n(),u(d,{key:0,caption:"",class:"cursor-pointer"},{default:o(()=>[f("span",null,[i(p(a.cnpjEmpresa)+" ",1),e(w,{anchor:"bottom start",self:"center start"},{default:o(()=>l[54]||(l[54]=[i("CNPJ")])),_:1})])]),_:2},1024)):c("",!0),e(r,{class:"hideondesktop q-mt-xs"},{default:o(()=>[e(M,{id:a.id,numero:a.id.slice(-8),escuro:"",cor:a.ativo?"positive":"tertiary",dica:"C\xF3digo Item",class:"col-auto q-mr-auto"},null,8,["id","numero","cor"]),e(k,{class:"no-padding no-margin",style:{"min-height":"20px"}},{default:o(()=>[e(r,{class:"no-margin text-weight-medium"},{default:o(()=>[a.vigenciaDe?(n(),u(d,{key:0,caption:""},{default:o(()=>[e(_,{name:"mdi-calendar-today"}),i(" "+p(s.$filters.data(a.vigenciaDe)),1)]),_:2},1024)):c("",!0)]),_:2},1024),e(r,{class:"no-margin text-weight-medium"},{default:o(()=>[a.vigenciaAte?(n(),u(d,{key:0,caption:""},{default:o(()=>[e(_,{name:"mdi-calendar"}),i(" "+p(s.$filters.data(a.vigenciaAte)),1)]),_:2},1024)):c("",!0)]),_:2},1024)]),_:2},1024),e(k,{class:"no-padding no-margin",style:{"min-height":"10px"}},{default:o(()=>[e(r,{class:"no-margin"},{default:o(()=>[a.diasExpiracao?(n(),u(d,{key:0,caption:""},{default:o(()=>[l[55]||(l[55]=i(" Expira em: ")),f("span",qe,p(a.diasExpiracao),1)]),_:2},1024)):c("",!0)]),_:2},1024),e(r,{class:"no-margin"},{default:o(()=>[a.diasMinimoUso?(n(),u(d,{key:0,caption:""},{default:o(()=>[l[56]||(l[56]=i(" Dias m\xEDnimo: ")),f("span",Me,p(a.diasMinimoUso),1)]),_:2},1024)):c("",!0)]),_:2},1024)]),_:2},1024),e(k,{class:"no-padding no-margin",style:{"min-height":"32px"}},{default:o(()=>[e(r,{class:"maxw50 no-margin"},{default:o(()=>[a.percentual?(n(),u(d,{key:0},{default:o(()=>[e(U,{rotulo:"%"+a.percentual,escuro:"",dica:"Percentual da venda",cor:"tertiary"},null,8,["rotulo"])]),_:2},1024)):c("",!0)]),_:2},1024),e(r,{class:"col-auto no-margin"},{default:o(()=>[a.valorMaximo?(n(),u(d,{key:0,caption:"",class:"text-right"},{default:o(()=>[l[57]||(l[57]=i(" Valor m\xE1ximo: ")),f("span",Se,p(s.$filters.numero(a.valorMaximo,2)),1)]),_:2},1024)):c("",!0),a.valorMinimo?(n(),u(d,{key:1,caption:"",class:"text-right"},{default:o(()=>[l[58]||(l[58]=i(" Valor m\xEDnimo: ")),f("span",Ue,p(s.$filters.numero(a.valorMinimo,2)),1)]),_:2},1024)):c("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(r,{class:"hideonmobile maxw100 no-margin cursor-pointer"},{default:o(()=>[a.vigenciaDe?(n(),u(d,{key:0,caption:"",class:"text-center text-weight-medium"},{default:o(()=>[f("span",null,[e(_,{name:"mdi-calendar-today"}),i(" "+p(s.$filters.data(a.vigenciaDe))+" ",1),e(w,{anchor:"bottom middle",self:"center middle"},{default:o(()=>l[59]||(l[59]=[i("Vig\xEAncia de")])),_:1})])]),_:2},1024)):c("",!0),a.vigenciaAte?(n(),u(d,{key:1,caption:"",class:"text-center text-weight-medium"},{default:o(()=>[f("span",null,[e(_,{name:"mdi-calendar"}),i(" "+p(s.$filters.data(a.vigenciaAte))+" ",1),e(w,{anchor:"bottom middle",self:"center middle"},{default:o(()=>l[60]||(l[60]=[i("Vig\xEAncia at\xE9")])),_:1})])]),_:2},1024)):c("",!0)]),_:2},1024),e(r,{class:"hideonmobile maxw110 q-pl-sm no-margin cursor-pointer"},{default:o(()=>[a.diasExpiracao?(n(),u(d,{key:0,caption:""},{default:o(()=>[l[61]||(l[61]=i(" Expira em: ")),f("span",Fe,p(a.diasExpiracao),1)]),_:2},1024)):c("",!0),a.diasMinimoUso?(n(),u(d,{key:1,caption:""},{default:o(()=>[l[62]||(l[62]=i(" Dias m\xEDnimo: ")),f("span",Oe,p(a.diasMinimoUso),1)]),_:2},1024)):c("",!0)]),_:2},1024),e(r,{class:"hideonmobile maxw50 q-pl-sm no-margin"},{default:o(()=>[a.percentual?(n(),u(d,{key:0},{default:o(()=>[e(U,{rotulo:"%"+a.percentual,escuro:"",dica:"Percentual da venda",cor:"tertiary"},null,8,["rotulo"])]),_:2},1024)):c("",!0)]),_:2},1024),e(r,{class:"hideonmobile maxw100 q-pl-sm no-margin"},{default:o(()=>[a.valorMaximo?(n(),u(d,{key:0,caption:"",class:"text-weight-bold text-right"},{default:o(()=>[f("span",null,[i(p(s.$filters.numero(a.valorMaximo,2))+" ",1),e(w,{anchor:"bottom middle",self:"center middle"},{default:o(()=>l[63]||(l[63]=[i(" Valor m\xE1ximo ")])),_:1})])]),_:2},1024)):c("",!0),a.valorMinimo?(n(),u(d,{key:1,caption:"",class:"text-weight-medium text-right"},{default:o(()=>[f("span",null,[i(p(s.$filters.numero(a.valorMinimo,2))+" ",1),e(w,{anchor:"bottom middle",self:"center middle"},{default:o(()=>l[64]||(l[64]=[i(" Valor m\xEDnimo ")])),_:1})])]),_:2},1024)):c("",!0)]),_:2},1024),e(r,{class:"col-auto no-margin"},{default:o(()=>[e(k,{class:"q-pa-none"},{default:o(()=>[e(r,{class:"no-margin"},{default:o(()=>[e(S,{onClick:b=>m.restaurarVoucher(a),round:"",flat:"",dense:"",icon:"restore_from_trash",size:"md",color:"primary"},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):c("",!0),a.id?(n(),u(W,{key:1})):c("",!0)]))),128)):(n(),u(k,{key:1},{default:o(()=>[e(r,null,{default:o(()=>[e(d,{class:"text-center"},{default:o(()=>l[65]||(l[65]=[i(" N\xE3o h\xE1 configura\xE7\xF5es de voucher removidas. ")])),_:1})]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var Ie=te(ge,[["render",Le]]);export{Ie as default};
