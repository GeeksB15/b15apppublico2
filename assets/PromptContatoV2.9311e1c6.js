import{_ as h,bH as p,r as g,o as c,d as f,w as s,f as a,M as v,G as _,h as C,H as b,Q as y,N as w,i as x,v as k,I as V,C as Q,p as u,P as N,F as B,x as T,e as m,D as H}from"./index.1d0d850c.js";const D={components:{ContatoCard:p},computed:{contatosEncontrados(){return this.contatos.length}},data(){return{carregando:!1,contatos:[],contato:{},filtro:{},placeholder:"Buscar",termo:"",visivel:!1}},emits:["selecionar"],methods:{async filtrar(){let n;try{if(this.carregando=!0,n=setTimeout(()=>{$q.loading.show({message:"Carregando informa\xE7\xF5es...",boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary"})},500),this.filtro.idContato){let i=[];if(this.filtro.compradores&&(i=await $db.contato.leCompradores(this.filtro.idContato)),this.filtro.convenios&&(i=await $db.contato.leConvenios(this.filtro.idContato)),this.termo){let l=new Set(this.termo.toLowerCase().replace(/\s+/g," ").normalize("NFD").replace(/[\u0300-\u036f]/g,"").split(" "));l=Array.from(l),l.sort((e,t)=>e<t?1:-1),i=i.filter(e=>{let t=(e.nome||"")+" "+(e.apelido||"");t=t.toLowerCase().replace(/\s+/g," ").normalize("NFD").replace(/[\u0300-\u036f]/g,"");for(const d of l)if(t.indexOf(d)===-1)return!1;return!0})}this.contatos=i;return}const o=await $db.contato.ler({filtros:{termoBusca:this.termo,...this.filtro},limit:30,page:1,sort:["apelido"],dir:["asc"]});this.contatos=o.data}finally{this.carregando=!1,clearTimeout(n),$q.loading.hide()}},limpar(){this.carregando=!1,this.contatos=[],this.contato={},this.filtro={},this.placeholder="Buscar",this.termo=""},mostrar(){this.filtrar(),this.visivel=!0},onHide(){this.$emit("selecionar",JSON.parse(JSON.stringify(this.contato))),this.limpar()},selecionar(n={}){this.contato=n,this.visivel=!1}},updated(){this.$nextTick(function(){this.$refs.search&&this.$refs.search.focus()})}},L={class:"layout-padding",container:""},P={key:0},S={key:1,class:"bg-light q-pa-lg q-mt-lg round-borders text-black text-center"};function q(n,o,i,l,e,t){const d=g("contato-card");return c(),f(H,{modelValue:e.visivel,"onUpdate:modelValue":o[1]||(o[1]=r=>e.visivel=r),maximized:"",onHide:o[2]||(o[2]=r=>t.onHide())},{default:s(()=>[a(v,{class:"bg-white",container:""},{default:s(()=>[a(_,null,{default:s(()=>[a(C,null,{default:s(()=>[b(a(y,{dense:"",flat:"",icon:"arrow_back",round:""},null,512),[[w]]),a(x,null,{default:s(()=>[a(k,{modelValue:e.termo,"onUpdate:modelValue":[o[0]||(o[0]=r=>e.termo=r),t.filtrar],color:"none",ref:"search",dark:"",placeholder:e.placeholder,debounce:"1500"},null,8,["modelValue","placeholder","onUpdate:modelValue"])]),_:1})]),_:1})]),_:1}),a(V,null,{default:s(()=>[Q("div",L,[t.contatosEncontrados?(c(),u("div",P,[a(N,{link:"","no-border":"",separator:""},{default:s(()=>[(c(!0),u(B,null,T(e.contatos,r=>(c(),f(d,{key:r.id,contato:r,modo:"lista",onSelecionar:t.selecionar},null,8,["contato","onSelecionar"]))),128))]),_:1})])):m("",!0),!e.carregando&&!t.contatosEncontrados?(c(),u("div",S," Nenhum resultado encontrado ")):m("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var F=h(D,[["render",q]]);export{F as P};
