import{_ as B,dd as f,ai as v,de as I,ak as M,df as Q,o as j,d as k,w as l,f as s,j as _,S as z,av as L,b7 as N,T as b,U as y,k as h,t as E,as as O}from"./index.f13aeeb6.js";const P={__name:"SeletorEmpresa",props:f({chaves:Array,desabilitado:{type:Boolean,default:!1},rotulo:{type:String,default:"Empresa"},somenteLeitura:{type:Boolean,default:!1}},{modelValue:{type:[Object,null]},modelModifiers:{}}),emits:f(["update:modelValue"],["update:modelValue"]),setup(r,{emit:S}){const n=v(null),d=v(null),u=I(r,"modelValue"),x=S,o=r;let i=[];function g(t){let e=null;t&&(e=i.find(a=>a.id===t.value),o.chaves&&Object.keys(e).forEach(a=>{o.chaves.includes(a)||delete e[a]})),x("update:modelValue",e)}function V(t,e,a){if(d.value!==null){e();return}e(m)}function c(t){let e;if(t&&(e=i.find(a=>a.id===t)),!e){n.value=null;return}n.value={label:e.nome,value:e.id}}async function m(){var t;if(i=(await $db.contato.ler({filtros:{ativo:!0,empresas:!0}})).data,o.chaves)for(const e of i)Object.keys(e).forEach(a=>{["id","nome",...o.chaves].includes(a)||delete e[a]});d.value=i.map(e=>{var a,p;return{value:e.id,label:(a=e.apelido)!=null?a:e.nome,description:(p=e.numeroDocumentoNacional)!=null?p:""}}),c((t=u.value)==null?void 0:t.id)}return M(u,t=>{var a;const e=t==null?void 0:t.id;e!==((a=n.value)==null?void 0:a.value)&&c(e)}),Q(m),(t,e)=>(j(),k(O,{modelValue:n.value,"onUpdate:modelValue":[e[0]||(e[0]=a=>n.value=a),g],options:d.value,onFilter:V,label:o.rotulo,readonly:o.somenteLeitura,disable:o.desabilitado,clearable:"",dense:"","hide-bottom-space":"","input-class":"no-wrap",class:"q-field--with-bottom"},{prepend:l(()=>[s(_,{name:"business",size:"20px"})]),option:l(a=>[s(z,L(N(a.itemProps)),{default:l(()=>[s(b,{avatar:"",class:"no-margin"},{default:l(()=>[s(_,{name:"business",size:"20px"})]),_:1}),s(b,{class:"no-margin"},{default:l(()=>[s(y,null,{default:l(()=>[h(E(a.opt.label),1)]),_:2},1024),s(y,{caption:""},{default:l(()=>[h(E(a.opt.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","label","readonly","disable"]))}};var w=B(P,[["__scopeId","data-v-23c3d3d6"]]);export{w as S};
