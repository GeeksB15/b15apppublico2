import{_ as ke,ba as _e,r as J,o as n,p as F,f as a,bJ as Ce,F as O,d as l,w as e,k as r,t as u,e as v,l as Z,x as K,j as E,Q as j,bf as oe,P as de,S as I,T as m,H as L,N as U,C as R,A as he,U as D,m as X,b4 as be}from"./index.79e95fd1.js";import{e as we}from"./emitirNFe.35117289.js";import{D as xe}from"./DocumentosFiscais.ab7ff4cd.js";import{M as qe}from"./ModalHistoricoStatus.49a2485a.js";const Ee={components:{DocumentosFiscais:xe,ModalHistoricoStatus:qe,VendaModal:_e},computed:{config(){return $db.configuracoes.valores},podeMigrarFatura(){return!~["Aguardando Estoque","Aguardando Financeiro","Aguardando Aprova\xE7\xE3o","Aguardando Pagamento","Cancelado","N\xE3o Aprovado","Or\xE7amento","Faturado"].indexOf(this.dados.venda.status)}},data(){return{dbUsuario:$db.usuario,width:0,dados:{venda:{}},fatura:{},status:{"Aguardando Confer\xEAncia":"orange","Aguardando Embalagem":"orange","Aguardando Entrega":"orange","Aguardando Libera\xE7\xE3o":"orange","Aguardando Separa\xE7\xE3o":"orange","Aguardando Estoque":"orange","Aguardando Financeiro":"orange","Aguardando Aprova\xE7\xE3o":"orange","Aguardando Pagamento":"tertiary","Aguardando Faturamento":"tertiary","Em Confer\xEAncia":"orange","Em Separa\xE7\xE3o":"orange",Faturado:"positive",Entregue:"positive",Cancelado:"red","N\xE3o Aprovado":"amber",Or\u00E7amento:"orange"},contatos:{},faturasAbertas:[],detalhesVisivel:!1,visibilidade:{botao:{editar:!1,remover:!1}},modalDevolucaoGarantia:{visivel:!1,item:{},orcamento:{}},sistemaPai:"",configImpressaoOrcamento:[],configImpressosWhatsapp:[],configImpressosEmail:[],documentoItemKit:{},quantidadeProdutos:0}},emits:["executar","carregou","verificarListaLayout"],mixins:[we],props:{id:{type:String,required:!0},dadosVenda:{type:Object,required:!1},vendasCompletas:{type:Object,required:!1},resetarEnvio:{type:Function,required:!1},layout:{type:String,default:"card"}},methods:{async duplicarVenda(){try{await new Promise((d,o)=>{this.$q.dialog({message:"Duplicar este pedido?",cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(()=>{d()}).onCancel(()=>{o()})})}catch{return}try{const d=await $db.venda.duplicarVenda(this.id);this.$refs.vendaModal.mostrar({id:d}),this.$q.notify({type:"positive",message:"Pedido duplicado"})}catch(d){let o="N\xE3o foi poss\xEDvel realizar a opera\xE7\xE3o";/^GError:.+/.test(d.message)&&(o=d.message.slice(7)),this.$q.notify({type:"negative",message:o}),console.error(d)}},irParaAtendimentoFatura(d){this.$router.push({name:"AtendimentoFatura",params:{id:d}})},async migrarFatura(d){try{await new Promise((o,q)=>{this.$q.dialog({message:"Esta a\xE7\xE3o ir\xE1 migrar esta venda para outra fatura.",noRefocus:!0,preventClose:!0,title:"Tem certeza?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk(()=>{o()}).onCancel(()=>{q()})})}catch{return}d||(d=$db.fatura.criar(this.dados.venda),await $db.fatura.grava({fatura:d})),d.id?(await $db.documento.grava({atual:{id:this.dados.venda.id,idFatura:d.id},original:{id:this.dados.venda.id}}),localStorage.setItem("idFatura",d.id),this.dados.venda.idContato&&(this.$emit("executar","atualizar"),this.irParaAtendimentoFatura(this.dados.venda.idContato))):this.$q.notify("N\xE3o foi poss\xEDvel realizar a opera\xE7\xE3o")},alternarDetalhes(d){this.detalhesVisivel=!this.detalhesVisivel,this.layout==="lista"&&this.$emit("verificarListaLayout",{id:d,acao:"detalhes",estado:this.detalhesVisivel})},async atualizar(){var q;const d=await $db.venda.leCompleto(this.id);d.carrinho.sort((f,t)=>new Date(f.dataHoraEmissao)<new Date(t.dataHoraEmissao)?-1:1),d.oss.sort((f,t)=>new Date(f.documento.dataHoraEmissao)<new Date(t.documento.dataHoraEmissao)?-1:1),d.customs.sort((f,t)=>new Date(f.documento.dataHoraEmissao)<new Date(t.documento.dataHoraEmissao)?-1:1),d.kits.sort((f,t)=>new Date(f.documento.dataHoraEmissao)<new Date(t.documento.dataHoraEmissao)?-1:1),(q=d.venda)!=null&&q.idFatura&&(this.fatura=await $db.hibrido.le({table:"documento",id:d.venda.idFatura}));for(const f of d.kits){const t=f.documentosItem.find(g=>g.operacaoFator===-1&&g.operacao!=="Manipula\xE7\xE3o");this.documentoItemKit[f.documento.id]=t}if((d.venda||{}).idContato&&(d.venda||{}).idEmpresa){let f=[];f=await $db.fatura.obterAbertas(d.venda.idContato,d.venda.idEmpresa),this.faturasAbertas=f.sort((t,g)=>!t.numero||t.numero<g.numero?-1:1)}const o={};if(d.venda.idContato){const f=d.venda.idContato;o[f]||(o[f]=await $db.contato.le({id:f}))}if(d.venda.idContatoVendedor){const f=d.venda.idContatoVendedor;o[f]||(o[f]=await $db.contato.le({id:f}))}this.configuraImpressaoOrcamento(d.venda.idEmpresa),this.configuraImpressosWhatsapp(d.venda),this.configuraImpressosEmail(d.venda),this.contatos=o,this.dados=d,await this.$nextTick(),d.venda.id===localStorage.getItem("idVenda")&&(this.$refs.vendaModal.mostrar({id:d.venda.id}),localStorage.removeItem("idVenda"))},async atualizarComDados(){var o,q,f,t;const d=await $db.venda.preparaDados(this.dadosVenda);d.carrinho.sort((g,A)=>new Date(g.dataHoraEmissao)<new Date(A.dataHoraEmissao)?-1:1),d.oss.sort((g,A)=>new Date(g.documento.dataHoraEmissao)<new Date(A.documento.dataHoraEmissao)?-1:1),d.customs.sort((g,A)=>new Date(g.documento.dataHoraEmissao)<new Date(A.documento.dataHoraEmissao)?-1:1),d.kits.sort((g,A)=>new Date(g.documento.dataHoraEmissao)<new Date(A.documento.dataHoraEmissao)?-1:1),(o=d.venda)!=null&&o.idFatura&&(this.fatura=await $db.hibrido.le({table:"documento",id:d.venda.idFatura}));for(const g of d.kits){const A=g.documentosItem.find(B=>B.operacaoFator===-1&&B.operacao!=="Manipula\xE7\xE3o");this.documentoItemKit[g.documento.id]=A}this.faturasAbertas=((f=(q=this.vendasCompletas)==null?void 0:q.faturasAbertas)==null?void 0:f.filter(g=>g.idEmpresa===d.venda.idEmpresa))||[],this.configuraImpressaoOrcamento(d.venda.idEmpresa),this.configuraImpressosWhatsapp(d.venda),this.configuraImpressosEmail(d.venda),this.contatos=((t=this.vendasCompletas)==null?void 0:t.dadosContatos)||{},this.dados=d,await this.$nextTick(),d.venda.id===localStorage.getItem("idVenda")&&(this.$refs.vendaModal.mostrar({id:d.venda.id}),localStorage.removeItem("idVenda"))},async configuraImpressaoOrcamento(d){const o=await $db.configuracoes.porNome("impressao.venda",d),q=[{valor:"invoice",texto:"Or\xE7amento/Venda (Invoice)"}];this.sistemaPai==="optisoul"&&q.push({valor:"orcamento",texto:"Or\xE7amento (Antigo)"},{valor:"termoGarantia",texto:"Termo de Garantia"}),this.configImpressaoOrcamento=[...o.length?o.map(f=>({texto:"Imprimir Or\xE7amento",...f})):q]},async configuraImpressosWhatsapp(d){let o=await $db.configuracoes.le({prefixoNome:"venda.whatsapp.enviar."});o=o.filter(q=>q.idEmpresa===d.idEmpresa||!q.idEmpresa),this.configImpressosWhatsapp=o.map(q=>({...q,idVenda:d.id}))},async configuraImpressosEmail(d){let o=await $db.configuracoes.le({prefixoNome:"venda.email.enviar."});o=o.filter(q=>q.idEmpresa===d.idEmpresa||!q.idEmpresa),this.configImpressosEmail=o.map(q=>({...q,idVenda:d.id}))},async enviarImpresso(d,o){d==="whatsapp"&&await $utils.enviarWhatsapp({configuracao:$utils.clonar(o),documento:$utils.clonar(this.dados.venda),loading:!0,dialog:!0}),d==="email"&&await $utils.enviarEmail({configuracao:$utils.clonar(o),documento:$utils.clonar(this.dados.venda),loading:!0,dialog:!0})},copiarUid(){const d=this.$refs.uid;d.type="text";try{d.select(),document.execCommand("copy"),this.$q.notify({message:"UID copiado para a \xE1rea de transfer\xEAncia.",type:"info"})}catch{this.$q.notify("Erro ao copiar.")}d.type="hidden",window.getSelection().removeAllRanges()},async devolucaoGarantia(d){let o=await $db.hibrido.lista({table:"documento",where:{idContato:$db.contato.selecionado.id,tipo:"Venda",status:"Or\xE7amento"}});if(o=$lodash.orderBy(o,"dataHoraEmissao","desc"),!o.length){this.$q.notify({message:"Crie um or\xE7amento para inclus\xE3o de devolu\xE7\xE3o/garantia.",type:"info"});return}this.modalDevolucaoGarantia={visivel:!0,item:d,orcamento:o[0]}},editar(){this.$refs.vendaModal.mostrar({id:this.dados.venda.id})},executar(d){switch(d){case"atualizar":this.atualizar();break;case"cancelar":case"finalizar":case"reprovar":this.$emit("executar","atualizar");break;case"retornarOrcamento":this.$emit("executar",d);break}},async finalizaDevolucaoGarantia(d,o,q){const f=$utils.clonar(d);o==="devolucao"&&(f.operacao="Devolu\xE7\xE3o de Venda"),o==="garantia"&&(f.operacao="Garantia de Venda",f.motivo=q),f.idDocumentoItemVenda=f.id,f.idDocumentoVenda=f.idDocumento,f.id=$utils.uuid(),f.idDocumento=this.modalDevolucaoGarantia.orcamento.id,f.status="Or\xE7amento",f.operacaoFator=1,f.codigoCfop=20,f.idCfop=(await $db.cfop.le({codigoCfop:20}))[0].id,f.dataHoraEmissao=$utils.dataAtual(),f.dataHoraFinalizado="",f.subTotal=f.subTotal*-1,f.total=f.total*-1,f.valorItem=f.valorItem*-1,f.descontoSubTotal=0,delete f.codigoCfop,delete f.codigoDocumento,delete f.codigoDocumentoItem,delete f.codigoItem,delete f.codigoPlanoContaDestino,delete f.codigoPlanoContaEstoque,await $db.documentoItem.grava({atual:f}),this.$q.notify({message:"Item adicionado ao or\xE7amento.",type:"positive"}),localStorage.setItem("idVenda",this.modalDevolucaoGarantia.orcamento.id),this.$emit("executar","atualizar")},async remover(){this.$q.dialog({message:"Esta a\xE7\xE3o ir\xE1 remover esta venda da fatura",title:"Tem certeza?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(async()=>{try{await $db.venda.checarConflitoStatus({id:this.dados.venda.id,status:this.dados.venda.status})}catch(d){return $q.notifyError(d.message),!1}await $db.documento.grava({atual:{id:this.dados.venda.id,idFatura:""},original:{id:this.dados.venda.id}}),this.$emit("executar","remover")})},onResize(){this.width=window.innerWidth}},watch:{async dados(d){var q;this.visibilidade.botao.editar=!1,this.visibilidade.botao.visualizar=!1,this.visibilidade.botao.remover=!1;let o=(q=this.vendasCompletas)==null?void 0:q.contatosEmpresa;if(!o){const t=(await $db.hibrido.lista({table:"empresa",columns:["idContato"],whereFilter:{ativo:!0}})).map(({idContato:g})=>g);o=await $db.hibrido.lista({table:"contato",columns:["id"],whereIn:{id:t},whereFilter:{ativo:!0}})}!o.find(f=>f.id===d.venda.idEmpresa)||(d.venda.idFatura&&this.faturasAbertas.find(f=>f.id===d.venda.idFatura)&&(this.visibilidade.botao.remover=await $db.permissao.objeto("Diretiva_Vendas_RemoverVendaFatura")),!~["Cancelado","N\xE3o Aprovado"].indexOf(d.venda.status)&&!d.venda.idFatura&&(this.visibilidade.botao.editar=!0),this.visibilidade.botao.editar||(this.visibilidade.botao.visualizar=!0))}},async mounted(){var d,o,q,f,t,g,A,B;this.sistemaPai=$utils.sistemaPai(),this.dadosVenda&&this.vendasCompletas?await this.atualizarComDados():await this.atualizar(),this.quantidadeProdutos=(((o=(d=this.dados)==null?void 0:d.carrinho)==null?void 0:o.length)||0)+(((f=(q=this.dados)==null?void 0:q.customs)==null?void 0:f.length)||0)+(((g=(t=this.dados)==null?void 0:t.oss)==null?void 0:g.length)||0)+(((B=(A=this.dados)==null?void 0:A.kits)==null?void 0:B.length)||0)||0,this.$emit("carregou")}},Ve={id:"VendaCard"},De={key:0,class:"bg-dark text-white q-px-xs"},Ie={class:"mw80 text-center"},Fe={key:0},ze={key:1},He={style:{"margin-left":"14px"}},Oe={style:{"margin-left":"14px"}},Se={class:"float-right text-weight-medium text-right q-ml-sm",style:{"min-width":"70px"}};function Ae(d,o,q,f,t,g){var re,se,le,ue,me,ce,fe,ve;const A=J("badge"),B=J("BadgeCopiarUid"),C=J("g-col"),ie=J("avatar"),_=J("g-label"),Q=J("g-row"),ne=J("DocumentosFiscais"),ge=J("VendaModal"),ye=J("ModalHistoricoStatus");return n(),F("div",Ve,[a(Ce,{onResize:g.onResize},null,8,["onResize"]),q.layout==="card"?(n(),F(O,{key:0},[t.dados.venda.id?(n(),l(he,{key:0,class:"extratoItem bg-white no-shadow"},{default:e(()=>[a(Q,{gutter:"sm",items:"center",justify:"between"},{default:e(()=>[a(C,{col:"12",text:"right",class:"hideondesktop"},{default:e(()=>{var i,p,b,y;return[a(A,{rotulo:t.dados.venda.status,escuro:"",cor:"tertiary"},null,8,["rotulo"]),a(B,{numero:(p=(i=t.dados)==null?void 0:i.venda)==null?void 0:p.numero,escuro:"",class:"q-mx-xs",id:(y=(b=t.dados)==null?void 0:b.venda)==null?void 0:y.id,icone:"shopping_cart",cor:"positive"},null,8,["numero","id"])]}),_:1}),a(C,{col:"12 sm5"},{default:e(()=>[a(Q,{items:"center"},{default:e(()=>[a(C,{col:"shrink",self:t.width<=992?"start":"center"},{default:e(()=>{var i;return[a(ie,{imagem:(i=t.contatos[t.dados.venda.idContato])==null?void 0:i.imagem,rotulo:t.dados.venda.descricaoContato,tamanho:"40"},null,8,["imagem","rotulo"])]}),_:1},8,["self"]),a(C,null,{default:e(()=>{var i,p;return[a(_,{text:"body1 medium"},{default:e(()=>{var b,y,h;return[r(u((h=t.contatos[(y=(b=t.dados)==null?void 0:b.venda)==null?void 0:y.idContato])==null?void 0:h.apelido)+" ",1),a(_,{caption:""},{default:e(()=>{var V,z,H;return[r(u((H=t.contatos[(z=(V=t.dados)==null?void 0:V.venda)==null?void 0:z.idContato])==null?void 0:H.nome),1)]}),_:1})]}),_:1}),t.contatos[(p=(i=t.dados)==null?void 0:i.venda)==null?void 0:p.idContatoVendedor]?(n(),l(_,{key:0,icon:"mdi-account-tie",tip:"Vendedor(a)",class:"hideondesktop"},{default:e(()=>{var b,y,h;return[r(u((h=t.contatos[(y=(b=t.dados)==null?void 0:b.venda)==null?void 0:y.idContatoVendedor])==null?void 0:h.apelido),1)]}),_:1})):v("",!0)]}),_:1})]),_:1})]),_:1}),a(C,{col:"sm3",class:"hideonmobile"},{default:e(()=>{var i,p,b,y,h,V;return[a(B,{numero:(p=(i=t.dados)==null?void 0:i.venda)==null?void 0:p.numero,escuro:"",class:"q-mr-xs",id:(y=(b=t.dados)==null?void 0:b.venda)==null?void 0:y.id,icone:"shopping_cart",cor:"positive"},null,8,["numero","id"]),a(A,{rotulo:t.dados.venda.status,escuro:"",cor:"tertiary"},null,8,["rotulo"]),t.contatos[(V=(h=t.dados)==null?void 0:h.venda)==null?void 0:V.idContatoVendedor]?(n(),l(_,{key:0,icon:"mdi-account-tie",tip:"Vendedor(a)",class:"q-mt-xs"},{default:e(()=>{var z,H,N;return[r(u((N=t.contatos[(H=(z=t.dados)==null?void 0:z.venda)==null?void 0:H.idContatoVendedor])==null?void 0:N.apelido),1)]}),_:1})):v("",!0)]}),_:1}),a(C,{col:"5 sm-shrink md2"},{default:e(()=>[t.dados.venda.dataHoraEmissao?(n(),l(_,{key:0,icon:"mdi-calendar-today",tip:"Emiss\xE3o"},{default:e(()=>[r(u(d.$filters.data(t.dados.venda.dataHoraEmissao)),1)]),_:1})):v("",!0),t.dados.venda.dataHoraFinalizado?(n(),l(_,{key:1,icon:"mdi-calendar-check",tip:"Finalizado"},{default:e(()=>[r(u(d.$filters.data(t.dados.venda.dataHoraFinalizado)),1)]),_:1})):v("",!0)]),_:1}),a(C,{col:"7 sm md2"},{default:e(()=>[a(_,{text:"h5 right bold",color:"text-positive"},{default:e(()=>[r(u(d.$filters.numero(t.dados.venda.totalDocumento,2)),1)]),_:1}),a(_,{text:"body right medium"},{default:e(()=>[r(u(d.$filters.numero(t.dados.venda.subTotal,2)),1)]),_:1})]),_:1})]),_:1}),a(Z,{class:"q-mx-sm q-mb-xs"}),a(Q,{gutter:"sm",items:"center"},{default:e(()=>[a(C,{col:"12 md"},{default:e(()=>{var i,p,b,y,h,V,z,H,N,W,P,M;return[(p=(i=t.dados)==null?void 0:i.carrinho)!=null&&p.length?(n(!0),F(O,{key:0},K((b=t.dados)==null?void 0:b.carrinho,s=>(n(),l(Q,{gutter:"none",key:s==null?void 0:s.id},{default:e(()=>[a(C,{col:"12"},{default:e(()=>[a(_,{inline:"",class:"q-mr-sm"},{default:e(()=>[r(u(s==null?void 0:s.quantidade)+u(s!=null&&s.quantidade?"x":"")+" "+u(s==null?void 0:s.descricaoItem),1)]),_:2},1024),a(_,{inline:"",class:"float-right",text:"medium"},{default:e(()=>[r(u(d.$filters.numero(s==null?void 0:s.total,2)),1)]),_:2},1024)]),_:2},1024),a(C,{col:"12",class:"hideondesktop"},{default:e(()=>[a(Z,{class:"q-my-xs"})]),_:1})]),_:2},1024))),128)):v("",!0),(h=(y=t.dados)==null?void 0:y.customs)!=null&&h.length?(n(!0),F(O,{key:1},K((V=t.dados)==null?void 0:V.customs,s=>{var c;return n(),l(Q,{gutter:"none",key:(c=s==null?void 0:s.documento)==null?void 0:c.id},{default:e(()=>[a(C,{col:"12"},{default:e(()=>[a(_,{inline:"",class:"q-mr-sm"},{default:e(()=>{var k,w,x;return[r(u((k=s==null?void 0:s.documento)==null?void 0:k.numero)+u((w=s==null?void 0:s.documento)!=null&&w.numero?"x":"")+" "+u((x=s==null?void 0:s.documento)==null?void 0:x.descricao),1)]}),_:2},1024),a(_,{inline:"",class:"float-right",text:"medium"},{default:e(()=>{var k;return[r(u(d.$filters.numero((k=s==null?void 0:s.documento)==null?void 0:k.totalDocumento,2)),1)]}),_:2},1024)]),_:2},1024),a(C,{col:"12",class:"hideondesktop"},{default:e(()=>[a(Z,{class:"q-my-xs"})]),_:1})]),_:2},1024)}),128)):v("",!0),(H=(z=t.dados)==null?void 0:z.oss)!=null&&H.length?(n(!0),F(O,{key:2},K((N=t.dados)==null?void 0:N.oss,s=>{var c;return n(),l(Q,{gutter:"none",key:(c=s==null?void 0:s.documento)==null?void 0:c.id},{default:e(()=>[a(C,{col:"12"},{default:e(()=>[a(_,{inline:"",class:"q-mr-sm"},{default:e(()=>{var k,w,x,S,T;return[a(E,{name:"mdi-tools"}),o[18]||(o[18]=r(" OS ")),a(B,{numero:(k=s==null?void 0:s.documento)==null?void 0:k.numero,escuro:"",id:(w=s==null?void 0:s.documento)==null?void 0:w.id,cor:"positive",class:"q-mr-xs"},null,8,["numero","id"]),((x=s==null?void 0:s.documento)==null?void 0:x.status)!=="Or\xE7amento"?(n(),F("span",De,u((S=s==null?void 0:s.documento)==null?void 0:S.status),1)):v("",!0),r(" "+u((T=s==null?void 0:s.documento)==null?void 0:T.descricao),1)]}),_:2},1024),a(_,{inline:"",class:"float-right",text:"medium"},{default:e(()=>{var k;return[r(u(d.$filters.numero((k=s==null?void 0:s.documento)==null?void 0:k.totalDocumento,2)),1)]}),_:2},1024)]),_:2},1024),a(C,{col:"12",class:"hideondesktop"},{default:e(()=>[a(Z,{class:"q-my-xs"})]),_:1})]),_:2},1024)}),128)):v("",!0),(P=(W=t.dados)==null?void 0:W.kits)!=null&&P.length?(n(!0),F(O,{key:3},K((M=t.dados)==null?void 0:M.kits,s=>{var c;return n(),l(Q,{gutter:"none",key:(c=s==null?void 0:s.documento)==null?void 0:c.id},{default:e(()=>[a(C,{col:"12"},{default:e(()=>[a(_,{inline:"",class:"q-mr-sm"},{default:e(()=>{var k,w,x,S,T,G;return[r(u(d.$filters.numero((w=t.documentoItemKit[(k=s==null?void 0:s.documento)==null?void 0:k.id])==null?void 0:w.quantidade,4))+" "+u((S=t.documentoItemKit[(x=s==null?void 0:s.documento)==null?void 0:x.id])!=null&&S.quantidade?"x":"")+" "+u((G=t.documentoItemKit[(T=s==null?void 0:s.documento)==null?void 0:T.id])==null?void 0:G.descricaoItem),1)]}),_:2},1024),a(_,{inline:"",class:"float-right",text:"medium"},{default:e(()=>{var k,w;return[r(u(d.$filters.numero((w=t.documentoItemKit[(k=s==null?void 0:s.documento)==null?void 0:k.id])==null?void 0:w.total,2)),1)]}),_:2},1024)]),_:2},1024),a(C,{col:"12",class:"hideondesktop"},{default:e(()=>[a(Z,{class:"q-my-xs"})]),_:1})]),_:2},1024)}),128)):v("",!0)]}),_:1}),a(C,{col:"12 md3",text:"right",self:"end"},{default:e(()=>[a(j,{onClick:g.alternarDetalhes,size:"md",color:"tertiary",dense:"",class:"q-mr-sm",rounded:"",flat:"",icon:t.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["onClick","icon"]),t.visibilidade.botao.editar?(n(),l(j,{key:0,onClick:g.editar,rounded:"",flat:"",dense:"",icon:"edit",size:"md",color:"primary",class:"q-mr-sm"},null,8,["onClick"])):v("",!0),a(j,{icon:"print",size:"md",color:"primary",rounded:"",dense:"",flat:"",class:"q-mr-sm"},{default:e(()=>[a(oe,null,{default:e(()=>[a(de,{link:"",separator:""},{default:e(()=>[(n(!0),F(O,null,K(t.configImpressaoOrcamento.filter(i=>i.valor),i=>(n(),l(I,{key:i.valor,onClick:p=>d.$imprimir(i.valor,{id:(t.dados.venda||{}).id||"0",Oculto:"0"}),clickable:""},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(E,{name:"print"})]),_:1}),a(m,null,{default:e(()=>[r(u(i.texto),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),t.visibilidade.botao.visualizar?(n(),l(j,{key:1,onClick:g.editar,rounded:"",flat:"",dense:"",icon:"remove_red_eye",size:"md",color:"primary",class:"q-mr-sm"},null,8,["onClick"])):v("",!0),t.visibilidade.botao.remover?(n(),l(j,{key:2,onClick:g.remover,rounded:"",flat:"",dense:"",icon:"clear",size:"md",color:"tertiary"},null,8,["onClick"])):v("",!0),a(j,{icon:"more_vert",size:"md",color:"tertiary",rounded:"",dense:"",flat:""},{default:e(()=>[a(oe,null,{default:e(()=>[L((n(),l(de,{link:"",separator:""},{default:e(()=>[d.$utils.mapearStatus(t.dados.venda).permiteNota?(n(),F(O,{key:0},[L((n(),l(I,{onClick:o[0]||(o[0]=i=>d.emitirNFeV2({idVenda:t.dados.venda.id},1,"Venda")),clickable:""},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(E,{name:"account_balance"})]),_:1}),a(m,null,{default:e(()=>o[19]||(o[19]=[r("NFe de Sa\xEDda/Venda")])),_:1})]),_:1})),[[U]]),L((n(),l(I,{onClick:o[1]||(o[1]=i=>d.emitirNFeV2({idVenda:t.dados.venda.id},0,"Devolu\xE7\xE3o")),clickable:""},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(E,{name:"account_balance"})]),_:1}),a(m,null,{default:e(()=>o[20]||(o[20]=[r("NFe de Entrada/Devolu\xE7\xE3o")])),_:1})]),_:1})),[[U]]),L((n(),l(I,{onClick:o[2]||(o[2]=i=>d.emitirNFeV2({idVenda:t.dados.venda.id},1,"Remessa")),clickable:""},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(E,{name:"account_balance"})]),_:1}),a(m,null,{default:e(()=>o[21]||(o[21]=[r("NFe de Remessa")])),_:1})]),_:1})),[[U]])],64)):v("",!0),g.podeMigrarFatura?(n(),F(O,{key:1},[(n(!0),F(O,null,K(t.faturasAbertas.filter(i=>i.id!==t.dados.venda.idFatura),i=>L((n(),l(I,{key:i.id,onClick:p=>g.migrarFatura(i),clickable:""},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(E,{name:"mdi-folder-move"})]),_:1}),a(m,null,{default:e(()=>[r(u("Migrar para fatura #"+(i.numero||i.id.slice(-6))),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[U]])),128)),L((n(),l(I,{onClick:o[3]||(o[3]=i=>g.migrarFatura()),clickable:""},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(E,{name:"mdi-folder-move"})]),_:1}),a(m,null,{default:e(()=>o[22]||(o[22]=[r("Migrar para nova fatura")])),_:1})]),_:1})),[[U]])],64)):v("",!0),a(I,{onClick:o[4]||(o[4]=i=>d.$refs.modalHistoricoStatus.mostrar({idDocumento:t.dados.venda.id})),clickable:""},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(E,{name:"history"})]),_:1}),a(m,null,{default:e(()=>o[23]||(o[23]=[r("Hist\xF3rico do Status")])),_:1})]),_:1}),a(I,{onClick:g.duplicarVenda,clickable:""},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(E,{name:"mdi-content-duplicate"})]),_:1}),a(m,null,{default:e(()=>o[24]||(o[24]=[r("Duplicar Pedido")])),_:1})]),_:1},8,["onClick"]),(n(!0),F(O,null,K(t.configImpressosWhatsapp.filter(i=>i.valor),i=>(n(),l(I,{key:i.valor,onClick:p=>g.enviarImpresso("whatsapp",i),clickable:""},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(E,{name:"mdi-whatsapp"})]),_:1}),a(m,null,{default:e(()=>[r(u(i.valor),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),(n(!0),F(O,null,K(t.configImpressosEmail.filter(i=>i.valor),i=>(n(),l(I,{key:i.valor,onClick:p=>g.enviarImpresso("email",i),clickable:""},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(E,{name:"mail"})]),_:1}),a(m,null,{default:e(()=>[r(u(i.valor),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),q.resetarEnvio&&t.dados.venda.rotaJson&&t.dados.venda.rotaJson.length>0?(n(),l(I,{key:2,onClick:o[5]||(o[5]=i=>q.resetarEnvio(t.dados.venda)),clickable:""},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(E,{name:"restart_alt"})]),_:1}),a(m,null,{default:e(()=>o[25]||(o[25]=[r("Resetar Envio")])),_:1})]),_:1})):v("",!0)]),_:1})),[[U]])]),_:1})]),_:1})]),_:1})]),_:1}),t.detalhesVisivel?(n(),l(Z,{key:0,class:"q-mx-sm q-mb-xs"})):v("",!0),t.detalhesVisivel?(n(),l(Q,{key:1,gutter:"sm",items:"start"},{default:e(()=>[a(C,null,{default:e(()=>[a(Q,null,{default:e(()=>{var i;return[a(C,{col:"12 sm"},{default:e(()=>{var p,b;return[(b=(p=t.dados)==null?void 0:p.venda)!=null&&b.descricaoEmpresa?(n(),l(_,{key:0,text:"sub2 medium",inline:"",class:"q-mb-sm",icon:`business ${t.width<=992?"15px":"xs"} tertiary left`},{default:e(()=>{var y,h;return[r(u((h=(y=t.dados)==null?void 0:y.venda)==null?void 0:h.descricaoEmpresa),1)]}),_:1},8,["icon"])):v("",!0)]}),_:1}),(i=t.fatura)!=null&&i.id?(n(),l(C,{key:0,col:"12 sm"},{default:e(()=>{var p,b,y;return[a(_,{text:"sub2 medium",inline:"",class:"q-mb-sm",icon:`request_quote ${t.width<=992?"15px":"xs"} tertiary left`},{default:e(()=>o[26]||(o[26]=[r(" Fatura ")])),_:1},8,["icon"]),a(B,{id:(p=t.fatura)==null?void 0:p.id,escuro:"",numero:(b=t.fatura)==null?void 0:b.numero,cor:"positive",class:"q-mx-sm q-mb-sm"},null,8,["id","numero"]),a(A,{rotulo:(y=t.fatura)==null?void 0:y.status,class:"q-mb-sm",escuro:"",dica:"Status",cor:"tertiary"},null,8,["rotulo"])]}),_:1})):v("",!0),a(C,{col:"12 sm-shrink"},{default:e(()=>[a(_,{text:"sub2 medium",class:"q-pr-sm q-mb-sm"},{default:e(()=>[o[27]||(o[27]=r(" Desconto: ")),a(_,{text:"right bold",class:"q-ml-sm float-right",style:{"min-width":"70px"}},{default:e(()=>{var p,b;return[r(u(d.$filters.numero((b=(p=t.dados)==null?void 0:p.venda)==null?void 0:b.totalDesconto,2)),1)]}),_:1})]),_:1})]),_:1})]}),_:1}),a(Q,null,{default:e(()=>{var i,p,b,y,h,V,z,H;return[a(C,{col:"12 md6",bordered:""},{default:e(()=>[a(ne,{idVenda:t.dados.venda.id},null,8,["idVenda"])]),_:1}),a(C,{col:"12 md6",bordered:""},{default:e(()=>[a(_,{icon:`attach_money ${t.width<=992?"15px":"xs"} tertiary left`,text:"sub2 medium"},{default:e(()=>o[28]||(o[28]=[r(" Faturamento ")])),_:1},8,["icon"]),t.dados.venda.observacaoFaturamento?(n(),l(_,{key:0,text:"sub2 medium"},{default:e(()=>[r(u(t.dados.venda.observacaoFaturamento),1)]),_:1})):v("",!0)]),_:1}),((p=(i=t.dados)==null?void 0:i.venda)==null?void 0:p.observacao)||((y=(b=t.dados)==null?void 0:b.venda)==null?void 0:y.observacaoInterna)||((V=(h=t.dados)==null?void 0:h.venda)==null?void 0:V.motivoCancelamento)||((H=(z=t.dados)==null?void 0:z.venda)==null?void 0:H.observacaoCancelamento)?(n(),F(O,{key:0},[a(C,{col:"12 md6",bordered:""},{default:e(()=>{var N,W;return[a(_,{text:"sub2 regular"},{default:e(()=>{var P,M;return[o[29]||(o[29]=R("span",{class:"text-weight-medium q-mr-sm"},"Obs.:",-1)),r(" "+u((M=(P=t.dados)==null?void 0:P.venda)==null?void 0:M.observacao),1)]}),_:1}),(W=(N=t.dados)==null?void 0:N.venda)!=null&&W.motivoCancelamento?(n(),l(_,{key:0,text:"sub2 regular"},{default:e(()=>{var P,M;return[o[30]||(o[30]=R("span",{class:"text-weight-medium q-mr-sm"},"Obs. Motivo Cancelamento:",-1)),r(" "+u((M=(P=t.dados)==null?void 0:P.venda)==null?void 0:M.motivoCancelamento),1)]}),_:1})):v("",!0)]}),_:1}),a(C,{col:"12 md6",bordered:""},{default:e(()=>{var N,W;return[a(_,{text:"sub2 regular"},{default:e(()=>{var P,M;return[o[31]||(o[31]=R("span",{class:"text-weight-medium q-mr-sm"},"Obs. Interna:",-1)),r(" "+u((M=(P=t.dados)==null?void 0:P.venda)==null?void 0:M.observacaoInterna),1)]}),_:1}),(W=(N=t.dados)==null?void 0:N.venda)!=null&&W.observacaoCancelamento?(n(),l(_,{key:0,text:"sub2 regular"},{default:e(()=>{var P,M;return[o[32]||(o[32]=R("span",{class:"text-weight-medium q-mr-sm"},"Obs. Cancelamento:",-1)),r(" "+u((M=(P=t.dados)==null?void 0:P.venda)==null?void 0:M.observacaoCancelamento),1)]}),_:1})):v("",!0)]}),_:1})],64)):v("",!0)]}),_:1})]),_:1})]),_:1})):v("",!0)]),_:1})):v("",!0)],64)):v("",!0),q.layout==="lista"?(n(),F(O,{key:1},[(se=(re=t.dados)==null?void 0:re.venda)!=null&&se.id?(n(),l(I,{key:0,clickable:"","manual-focus":"",class:"q-py-sm q-px-xs items-center"},{default:e(()=>[a(m,{class:"hideonmobile col-auto no-margin"},{default:e(()=>{var i,p,b,y;return[R("div",Ie,[a(B,{numero:(p=(i=t.dados)==null?void 0:i.venda)==null?void 0:p.numero,id:(y=(b=t.dados)==null?void 0:b.venda)==null?void 0:y.id,cor:"positive"},null,8,["numero","id"])])]}),_:1}),a(m,{onClick:o[6]||(o[6]=i=>g.editar()),class:"col-md col-lg col-xl no-margin"},{default:e(()=>[a(I,{class:"q-pa-none"},{default:e(()=>[a(m,{class:"col-auto items-center"},{default:e(()=>{var i,p,b,y,h;return[a(ie,{imagem:(b=t.contatos[(p=(i=t.dados)==null?void 0:i.venda)==null?void 0:p.idContato]||{})==null?void 0:b.imagem,tamanho:"40",rotulo:(h=(y=t.dados)==null?void 0:y.venda)==null?void 0:h.descricaoContato,style:{display:"flex","align-self":"center"}},null,8,["imagem","rotulo"])]}),_:1}),a(m,{class:"col"},{default:e(()=>{var i,p,b,y,h,V,z,H,N,W,P,M;return[a(D,{lines:"2",class:"text-weight-bold"},{default:e(()=>{var s,c,k;return[R("span",null,[r(u((k=t.contatos[(c=(s=t.dados)==null?void 0:s.venda)==null?void 0:c.idContato])==null?void 0:k.apelido)+" ",1),a(X,{anchor:"bottom middle",self:"center middle"},{default:e(()=>o[33]||(o[33]=[r("Nome Fantasia")])),_:1})])]}),_:1}),((b=t.contatos[(p=(i=t.dados)==null?void 0:i.venda)==null?void 0:p.idContato])==null?void 0:b.nome)!==((V=t.contatos[(h=(y=t.dados)==null?void 0:y.venda)==null?void 0:h.idContato])==null?void 0:V.apelido)?(n(),l(D,{key:0,caption:"",lines:"2"},{default:e(()=>{var s,c,k;return[R("span",null,[r(u((k=t.contatos[(c=(s=t.dados)==null?void 0:s.venda)==null?void 0:c.idContato])==null?void 0:k.nome)+" ",1),a(X,{anchor:"bottom middle",self:"center middle"},{default:e(()=>o[34]||(o[34]=[r("Raz\xE3o Social")])),_:1})])]}),_:1})):v("",!0),a(D,{caption:"",class:"hideondesktop"},{default:e(()=>{var s,c,k,w,x,S,T,G,Y,$,ee,ae,te;return[a(B,{id:(c=(s=t.dados)==null?void 0:s.venda)==null?void 0:c.id,numero:(w=(k=t.dados)==null?void 0:k.venda)==null?void 0:w.numero,cor:"positive",escuro:"",class:"q-mr-sm"},null,8,["id","numero"]),(S=(x=t.dados)==null?void 0:x.venda)!=null&&S.status?(n(),l(A,{key:0,escuro:"",dica:"Status",class:"col-auto q-mx-auto",rotulo:(Y=((G=(T=t.dados)==null?void 0:T.venda)==null?void 0:G.status)||"")==null?void 0:Y.replace("Aguardando ","Ag. "),cor:(ee=($=t.dados)==null?void 0:$.venda)!=null&&ee.status?t.status[(te=(ae=t.dados)==null?void 0:ae.venda)==null?void 0:te.status]:"tertiary"},null,8,["rotulo","cor"])):v("",!0)]}),_:1}),(H=(z=t.dados)==null?void 0:z.venda)!=null&&H.descricaoEmpresa?(n(),l(D,{key:1,caption:"",lines:"2"},{default:e(()=>{var s,c;return[R("span",null,[a(E,{name:"business"}),r(" "+u((c=(s=t.dados)==null?void 0:s.venda)==null?void 0:c.descricaoEmpresa)+" ",1),a(X,{anchor:"bottom middle",self:"center middle"},{default:e(()=>o[35]||(o[35]=[r(" Empresa ")])),_:1})])]}),_:1})):v("",!0),t.contatos[(W=(N=t.dados)==null?void 0:N.venda)==null?void 0:W.idContatoVendedor]||t.contatos[(M=(P=t.dados)==null?void 0:P.venda)==null?void 0:M.idContatoDigitador]?(n(),l(D,{key:2,caption:"",lines:"2"},{default:e(()=>{var s,c,k,w,x,S,T,G,Y,$,ee,ae,te,pe;return[a(E,{name:"mdi-account-tie",style:{"margin-right":"2px"}}),t.contatos[(c=(s=t.dados)==null?void 0:s.venda)==null?void 0:c.idContatoVendedor]?(n(),F("span",Fe,[r(u((x=t.contatos[(w=(k=t.dados)==null?void 0:k.venda)==null?void 0:w.idContatoVendedor])==null?void 0:x.apelido)+" ",1),a(X,{anchor:"bottom middle",self:"center middle"},{default:e(()=>o[36]||(o[36]=[r(" Vendedor ")])),_:1})])):v("",!0),t.contatos[(T=(S=t.dados)==null?void 0:S.venda)==null?void 0:T.idContatoDigitador]&&t.contatos[(Y=(G=t.dados)==null?void 0:G.venda)==null?void 0:Y.idContatoDigitador]!==t.contatos[(ee=($=t.dados)==null?void 0:$.venda)==null?void 0:ee.idContatoVendedor]?(n(),F("span",ze,[r(" | "+u((pe=t.contatos[(te=(ae=t.dados)==null?void 0:ae.venda)==null?void 0:te.idContatoDigitador])==null?void 0:pe.apelido)+" ",1),a(X,{anchor:"bottom middle",self:"center middle"},{default:e(()=>o[37]||(o[37]=[r(" Digitador ")])),_:1})])):v("",!0)]}),_:1})):v("",!0),a(m,{class:"hideondesktop q-mt-sm"},{default:e(()=>[a(I,{class:"q-pa-none",style:{"min-height":"36px!important"}},{default:e(()=>[a(m,{top:"",class:"col-5 no-margin"},{default:e(()=>{var s,c,k,w;return[(c=(s=t.dados)==null?void 0:s.venda)!=null&&c.dataHoraEmissao?(n(),l(D,{key:0,caption:""},{default:e(()=>{var x,S;return[a(E,{name:"mdi-calendar-today",style:{position:"absolute","margin-top":"2px"}}),R("span",He,u(d.$filters.data((S=(x=t.dados)==null?void 0:x.venda)==null?void 0:S.dataHoraEmissao)),1)]}),_:1})):v("",!0),(w=(k=t.dados)==null?void 0:k.venda)!=null&&w.dataHoraFinalizado?(n(),l(D,{key:1,caption:""},{default:e(()=>{var x,S;return[a(E,{name:"mdi-calendar",style:{position:"absolute","margin-top":"2px"}}),R("span",Oe,u(d.$filters.data((S=(x=t.dados)==null?void 0:x.venda)==null?void 0:S.dataHoraFinalizado)),1)]}),_:1})):v("",!0)]}),_:1}),a(m,{top:"",class:"col-7 no-margin text-right"},{default:e(()=>{var s,c,k,w,x,S;return[(c=(s=t.dados)==null?void 0:s.venda)!=null&&c.totalDocumento?(n(),l(D,{key:0,caption:"",class:"text-weight-bold"},{default:e(()=>{var T,G;return[r(u(d.$filters.numero((G=(T=t.dados)==null?void 0:T.venda)==null?void 0:G.totalDocumento,2)),1)]}),_:1})):v("",!0),((w=(k=t.dados)==null?void 0:k.venda)==null?void 0:w.subTotal)!==((S=(x=t.dados)==null?void 0:x.venda)==null?void 0:S.totalDocumento)?(n(),l(D,{key:1,caption:""},{default:e(()=>{var T,G;return[r(u(d.$filters.numero((G=(T=t.dados)==null?void 0:T.venda)==null?void 0:G.subTotal,2)),1)]}),_:1})):v("",!0)]}),_:1})]),_:1})]),_:1})]}),_:1})]),_:1})]),_:1}),a(m,{onClick:o[7]||(o[7]=i=>g.editar()),class:"hideonmobile maxw100 q-pl-sm no-margin"},{default:e(()=>{var i,p,b,y;return[(p=(i=t.dados)==null?void 0:i.venda)!=null&&p.dataHoraEmissao?(n(),l(D,{key:0,caption:"",lines:"2",class:"text-weight-medium"},{default:e(()=>{var h,V;return[R("span",null,[a(E,{name:"mdi-calendar-today"}),r(" "+u(d.$filters.data((V=(h=t.dados)==null?void 0:h.venda)==null?void 0:V.dataHoraEmissao))+" ",1),a(X,{anchor:"bottom middle",self:"center middle"},{default:e(()=>{var z,H;return[r(" Emitido \xE0s "+u(d.$filters.hora((H=(z=t.dados)==null?void 0:z.venda)==null?void 0:H.dataHoraEmissao)),1)]}),_:1})])]}),_:1})):v("",!0),(y=(b=t.dados)==null?void 0:b.venda)!=null&&y.dataHoraFinalizado?(n(),l(D,{key:1,caption:"",lines:"2",class:"text-weight-medium"},{default:e(()=>{var h,V;return[R("span",null,[a(E,{name:"mdi-calendar"}),r(" "+u(d.$filters.data((V=(h=t.dados)==null?void 0:h.venda)==null?void 0:V.dataHoraFinalizado))+" ",1),a(X,{anchor:"bottom middle",self:"center middle"},{default:e(()=>{var z,H;return[r(" Finalizado \xE1s "+u(d.$filters.hora((H=(z=t.dados)==null?void 0:z.venda)==null?void 0:H.dataHoraFinalizado)),1)]}),_:1})])]}),_:1})):v("",!0)]}),_:1}),a(m,{onClick:o[8]||(o[8]=i=>g.editar()),class:"hideonmobile maxw120 q-pl-sm no-margin"},{default:e(()=>{var i,p,b,y,h,V,z,H,N;return[(p=(i=t.dados)==null?void 0:i.venda)!=null&&p.status?(n(),l(A,{key:0,escuro:"",dica:"Status",class:"col-auto q-mx-auto",rotulo:(h=((y=(b=t.dados)==null?void 0:b.venda)==null?void 0:y.status)||"")==null?void 0:h.replace("Aguardando ","Ag. "),cor:(z=(V=t.dados)==null?void 0:V.venda)!=null&&z.status?t.status[(N=(H=t.dados)==null?void 0:H.venda)==null?void 0:N.status]:"tertiary"},null,8,["rotulo","cor"])):v("",!0)]}),_:1}),a(m,{onClick:o[9]||(o[9]=i=>g.editar()),class:"hideonmobile maxw120 q-pl-sm no-margin"},{default:e(()=>{var i,p,b,y;return[(p=(i=t.dados)==null?void 0:i.venda)!=null&&p.totalDocumento?(n(),l(D,{key:0,class:"text-weight-bold text-right"},{default:e(()=>{var h,V;return[R("span",null,[r(u(d.$filters.numero((V=(h=t.dados)==null?void 0:h.venda)==null?void 0:V.totalDocumento,2))+" ",1),a(X,{anchor:"bottom middle",self:"center middle"},{default:e(()=>o[38]||(o[38]=[r(" Total ")])),_:1})])]}),_:1})):v("",!0),(y=(b=t.dados)==null?void 0:b.venda)!=null&&y.subTotal?(n(),l(D,{key:1,class:"text-caption text-right"},{default:e(()=>{var h,V;return[R("span",null,[r(u(d.$filters.numero((V=(h=t.dados)==null?void 0:h.venda)==null?void 0:V.subTotal,2))+" ",1),a(X,{anchor:"bottom middle",self:"center middle"},{default:e(()=>o[39]||(o[39]=[r(" Subtotal ")])),_:1})])]}),_:1})):v("",!0)]}),_:1}),a(m,{class:"col-auto q-pl-sm no-margin"},{default:e(()=>[a(I,{class:"q-pa-none"},{default:e(()=>[a(m,{class:"no-margin hideonmobile",style:{width:"32px"}},{default:e(()=>[a(j,{onClick:o[10]||(o[10]=i=>{var p,b;return g.alternarDetalhes((b=(p=t.dados)==null?void 0:p.venda)==null?void 0:b.id)}),icon:t.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down",rounded:"",dense:"",flat:"",size:"md",color:"tertiary"},null,8,["icon"])]),_:1}),a(m,{class:"no-margin hideonmobile",style:{width:"32px"}},{default:e(()=>[t.visibilidade.botao.editar?(n(),l(j,{key:0,onClick:g.editar,rounded:"",dense:"",flat:"",icon:"edit",size:"md",color:"primary"},null,8,["onClick"])):v("",!0),t.visibilidade.botao.visualizar?(n(),l(j,{key:1,onClick:g.editar,rounded:"",dense:"",flat:"",icon:"remove_red_eye",size:"md",color:"primary"},null,8,["onClick"])):v("",!0)]),_:1}),a(m,{class:"no-margin hideonmobile",style:{width:"32px"}},{default:e(()=>[a(j,{icon:"print",size:"md",round:"",flat:"",dense:""},{default:e(()=>[a(oe,null,{default:e(()=>[L((n(),l(de,{link:"","no-border":"",separator:""},{default:e(()=>[(n(!0),F(O,null,K(t.configImpressaoOrcamento.filter(i=>i.valor),i=>(n(),l(I,{onClick:p=>{var b,y;return d.$imprimir(i.valor,{id:((y=(b=t.dados)==null?void 0:b.venda)==null?void 0:y.id)||"0",Oculto:"0"})},key:i.valor,clickable:""},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(E,{name:"print"})]),_:1}),a(m,null,{default:e(()=>[r(u(i.texto),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})),[[U]])]),_:1})]),_:1})]),_:1}),a(m,{class:"no-margin",style:{width:"32px"}},{default:e(()=>[a(j,{icon:"more_vert",size:"md",round:"",flat:"",dense:""},{default:e(()=>[a(oe,null,{default:e(()=>[L((n(),l(de,{link:"","no-border":"",separator:""},{default:e(()=>[t.visibilidade.botao.remover?(n(),l(I,{key:0,onClick:g.remover,clickable:""},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(E,{name:"delete"})]),_:1}),a(m,null,{default:e(()=>[a(D,null,{default:e(()=>o[40]||(o[40]=[r("Remover")])),_:1}),a(D,{caption:""},{default:e(()=>o[41]||(o[41]=[r("Venda")])),_:1})]),_:1})]),_:1},8,["onClick"])):v("",!0),t.visibilidade.botao.editar||t.visibilidade.botao.visualizar?(n(),l(I,{key:1,onClick:g.editar,clickable:"",class:"hideondesktop"},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[t.visibilidade.botao.editar?(n(),l(E,{key:0,name:"edit"})):v("",!0),t.visibilidade.botao.visualizar?(n(),l(E,{key:1,name:"remove_red_eye"})):v("",!0)]),_:1}),a(m,null,{default:e(()=>[t.visibilidade.botao.editar?(n(),l(D,{key:0},{default:e(()=>o[42]||(o[42]=[r(" Editar ")])),_:1})):v("",!0),t.visibilidade.botao.visualizar?(n(),l(D,{key:1},{default:e(()=>o[43]||(o[43]=[r(" Visualizar ")])),_:1})):v("",!0),a(D,{caption:""},{default:e(()=>o[44]||(o[44]=[r("Venda")])),_:1})]),_:1})]),_:1},8,["onClick"])):v("",!0),a(I,{onClick:o[11]||(o[11]=i=>{var p,b;return g.alternarDetalhes((b=(p=t.dados)==null?void 0:p.venda)==null?void 0:b.id)}),clickable:"",class:"hideondesktop"},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(E,{name:t.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down"},null,8,["name"])]),_:1}),a(m,null,{default:e(()=>[a(D,null,{default:e(()=>o[45]||(o[45]=[r("Ver Detalhes")])),_:1}),a(D,{caption:""},{default:e(()=>o[46]||(o[46]=[r("Venda")])),_:1})]),_:1})]),_:1}),d.$utils.mapearStatus(t.dados.venda).permiteNota?(n(),F(O,{key:2},[L((n(),l(I,{onClick:o[12]||(o[12]=i=>d.emitirNFeV2({idVenda:t.dados.venda.id},1,"Venda")),clickable:""},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(E,{name:"account_balance"})]),_:1}),a(m,null,{default:e(()=>[a(D,null,{default:e(()=>o[47]||(o[47]=[r("NFe")])),_:1}),a(D,{caption:""},{default:e(()=>o[48]||(o[48]=[r("Sa\xEDda/Venda")])),_:1})]),_:1})]),_:1})),[[U]]),L((n(),l(I,{onClick:o[13]||(o[13]=i=>d.emitirNFeV2({idVenda:t.dados.venda.id},0,"Devolu\xE7\xE3o")),clickable:""},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(E,{name:"account_balance"})]),_:1}),a(m,null,{default:e(()=>[a(D,null,{default:e(()=>o[49]||(o[49]=[r("NFe")])),_:1}),a(D,{caption:""},{default:e(()=>o[50]||(o[50]=[r("Entrada/Devolu\xE7\xE3o")])),_:1})]),_:1})]),_:1})),[[U]]),L((n(),l(I,{onClick:o[14]||(o[14]=i=>d.emitirNFeV2({idVenda:t.dados.venda.id},1,"Remessa")),clickable:""},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(E,{name:"account_balance"})]),_:1}),a(m,null,{default:e(()=>[a(D,null,{default:e(()=>o[51]||(o[51]=[r("NFe")])),_:1}),a(D,{caption:""},{default:e(()=>o[52]||(o[52]=[r("Remessa")])),_:1})]),_:1})]),_:1})),[[U]])],64)):v("",!0),g.podeMigrarFatura?(n(),F(O,{key:3},[(n(!0),F(O,null,K(t.faturasAbertas.filter(i=>{var p,b;return i.id!==((b=(p=t.dados)==null?void 0:p.venda)==null?void 0:b.idFatura)}),i=>L((n(),l(I,{key:i.id,onClick:p=>g.migrarFatura(i),clickable:""},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(E,{name:"mdi-folder-move"})]),_:1}),a(m,null,{default:e(()=>[a(D,null,{default:e(()=>[r(u("#"+(i.numero||i.id.slice(-6))),1)]),_:2},1024),a(D,{caption:""},{default:e(()=>o[53]||(o[53]=[r("Migrar para fatura")])),_:1})]),_:2},1024)]),_:2},1032,["onClick"])),[[U]])),128)),L((n(),l(I,{onClick:o[15]||(o[15]=i=>g.migrarFatura()),clickable:""},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(E,{name:"mdi-folder-move"})]),_:1}),a(m,null,{default:e(()=>[a(D,null,{default:e(()=>o[54]||(o[54]=[r("Migrar")])),_:1}),a(D,{caption:""},{default:e(()=>o[55]||(o[55]=[r("Para nova fatura")])),_:1})]),_:1})]),_:1})),[[U]])],64)):v("",!0),a(I,{onClick:o[16]||(o[16]=i=>d.$refs.modalHistoricoStatus.mostrar({idDocumento:t.dados.venda.id})),clickable:""},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(E,{name:"history"})]),_:1}),a(m,null,{default:e(()=>[a(D,null,{default:e(()=>o[56]||(o[56]=[r("Hist\xF3rico")])),_:1}),a(D,{caption:""},{default:e(()=>o[57]||(o[57]=[r("De Status")])),_:1})]),_:1})]),_:1}),a(I,{onClick:g.duplicarVenda,clickable:""},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(E,{name:"mdi-content-duplicate"})]),_:1}),a(m,null,{default:e(()=>o[58]||(o[58]=[r("Duplicar Pedido")])),_:1})]),_:1},8,["onClick"]),(n(!0),F(O,null,K(t.configImpressosWhatsapp.filter(i=>i.valor),i=>(n(),l(I,{key:i.valor,onClick:p=>g.enviarImpresso("whatsapp",i),clickable:""},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(E,{name:"mdi-whatsapp"})]),_:1}),a(m,null,{default:e(()=>[r(u(i.valor),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),(n(!0),F(O,null,K(t.configImpressosEmail.filter(i=>i.valor),i=>(n(),l(I,{key:i.valor,onClick:p=>g.enviarImpresso("email",i),clickable:""},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(E,{name:"email"})]),_:1}),a(m,null,{default:e(()=>[r(u(i.valor),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),q.resetarEnvio&&t.dados.venda.rotaJson&&t.dados.venda.rotaJson.length>0?(n(),l(I,{key:4,onClick:o[17]||(o[17]=i=>q.resetarEnvio(t.dados.venda)),clickable:""},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(E,{name:"restart_alt"})]),_:1}),a(m,null,{default:e(()=>o[59]||(o[59]=[r("Resetar Envio")])),_:1})]),_:1})):v("",!0),(n(!0),F(O,null,K(t.configImpressaoOrcamento.filter(i=>i.valor),i=>(n(),l(I,{onClick:p=>{var b,y;return d.$imprimir(i.valor,{id:((y=(b=t.dados)==null?void 0:b.venda)==null?void 0:y.id)||"0",Oculto:"0"})},key:i.valor,clickable:"",class:"hideondesktop"},{default:e(()=>[a(m,{avatar:""},{default:e(()=>[a(E,{name:"print"})]),_:1}),a(m,null,{default:e(()=>[r(u(i.texto),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})),[[U]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):v("",!0),L(a(Z,{class:"q-ma-sm"},null,512),[[be,((ue=(le=t.dados)==null?void 0:le.venda)==null?void 0:ue.id)&&t.detalhesVisivel]]),L(a(Q,null,{default:e(()=>[a(C,null,{default:e(()=>{var i,p,b,y,h,V,z,H,N,W,P,M,s;return[((i=t.fatura)==null?void 0:i.id)||((b=(p=t.dados)==null?void 0:p.venda)==null?void 0:b.totalDesconto)?(n(),l(Q,{key:0,gutter:"md-x"},{default:e(()=>{var c,k;return[a(C,{col:"xs12 sm"},{default:e(()=>{var w,x,S,T,G,Y;return[(w=t.fatura)!=null&&w.id?(n(),l(_,{key:0,text:"sub2 medium",inline:"",icon:`request_quote ${t.width<=992?"15px":"xs"} tertiary left`},{default:e(()=>o[60]||(o[60]=[r(" Fatura ")])),_:1},8,["icon"])):v("",!0),(x=t.fatura)!=null&&x.id?(n(),l(A,{key:1,rotulo:(S=t.fatura)==null?void 0:S.status,escuro:"",dica:"Status",cor:"tertiary",class:"q-mx-sm"},null,8,["rotulo"])):v("",!0),(T=t.fatura)!=null&&T.id?(n(),l(B,{key:2,id:(G=t.fatura)==null?void 0:G.id,escuro:"",numero:(Y=t.fatura)==null?void 0:Y.numero,cor:"positive"},null,8,["id","numero"])):v("",!0)]}),_:1}),(k=(c=t.dados)==null?void 0:c.venda)!=null&&k.totalDesconto?(n(),l(C,{key:0,col:"xs12 sm-shrink"},{default:e(()=>[a(_,{text:"sub2 regular",class:"q-pr-sm"},{default:e(()=>{var w,x;return[o[61]||(o[61]=r(" Desconto: ")),R("span",Se,u(d.$filters.numero((x=(w=t.dados)==null?void 0:w.venda)==null?void 0:x.totalDesconto,2)),1)]}),_:1})]),_:1})):v("",!0)]}),_:1})):v("",!0),a(Q,{gutter:"md"},{default:e(()=>[a(C,{col:"xs12 md6",bordered:""},{default:e(()=>[a(_,{icon:`extension ${t.width<=992?"14px":"xs"} tertiary left`,text:"sub2 medium",class:"q-mb-md"},{default:e(()=>o[62]||(o[62]=[r(" Itens ")])),_:1},8,["icon"]),(n(!0),F(O,null,K(t.dados.carrinho,c=>(n(),l(Q,{key:c.id,gutter:"none",bordered:`${t.quantidadeProdutos>1?"bottom":!1}`},{default:e(()=>[a(C,null,{default:e(()=>[a(_,{lines:"1"},{default:e(()=>[a(_,{inline:"",text:"medium",class:"q-mr-xs"},{default:e(()=>[r(u(c.quantidade)+"x ",1)]),_:2},1024),r(" "+u(c.descricaoItem),1)]),_:2},1024)]),_:2},1024),a(C,{col:"auto",class:"mw120"},{default:e(()=>[a(_,{text:"medium right"},{default:e(()=>[r(u(d.$filters.numero(c.total,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["bordered"]))),128)),(n(!0),F(O,null,K(t.dados.customs,c=>(n(),l(Q,{key:c.documento.id,gutter:"none",bordered:`${t.quantidadeProdutos>1?"bottom":!1}`},{default:e(()=>[a(C,null,{default:e(()=>[a(_,{lines:"1"},{default:e(()=>[a(_,{inline:"",text:"medium",class:"q-mr-xs"},{default:e(()=>[r(u(c.documento.numero)+"x ",1)]),_:2},1024),r(" "+u(c.documento.descricao),1)]),_:2},1024)]),_:2},1024),a(C,{col:"auto",class:"mw120"},{default:e(()=>[a(_,{text:"medium right"},{default:e(()=>[r(u(d.$filters.numero(c.documento.totalDocumento,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["bordered"]))),128)),(n(!0),F(O,null,K(t.dados.oss,c=>(n(),l(Q,{key:c.documento.id,gutter:"none",bordered:`${t.quantidadeProdutos>1?"bottom":!1}`},{default:e(()=>[a(C,null,{default:e(()=>[a(_,{lines:"1"},{default:e(()=>[a(A,{rotulo:"OS #"+c.documento.numero,dica:"O.S.",escuro:"",cor:"tertiary",class:"q-mr-xs"},null,8,["rotulo"]),c.documento.status!=="Or\xE7amento"?(n(),l(A,{key:0,rotulo:c.documento.status,cor:"positive",escuro:"",class:"q-mr-xs"},null,8,["rotulo"])):v("",!0),r(" "+u(c.documento.descricao),1)]),_:2},1024)]),_:2},1024),a(C,{col:"auto",class:"mw120"},{default:e(()=>[a(_,{text:"medium right"},{default:e(()=>[r(u(d.$filters.numero(c.documento.totalDocumento,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["bordered"]))),128)),(n(!0),F(O,null,K(t.dados.kits,c=>(n(),l(Q,{key:c.documento.id,gutter:"none",bordered:`${t.quantidadeProdutos>1?"bottom":!1}`},{default:e(()=>[a(C,null,{default:e(()=>[a(_,{lines:"1"},{default:e(()=>[a(_,{inline:"",text:"medium",class:"q-mr-xs"},{default:e(()=>[r(u(d.$filters.numero(t.documentoItemKit[c.documento.id].quantidade,4))+"x ",1)]),_:2},1024),r(" "+u(t.documentoItemKit[c.documento.id].descricaoItem),1)]),_:2},1024)]),_:2},1024),a(C,{col:"auto",class:"mw120"},{default:e(()=>[a(_,{text:"medium right"},{default:e(()=>[r(u(d.$filters.numero(t.documentoItemKit[c.documento.id].total,2)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["bordered"]))),128))]),_:1}),a(C,{col:"xs12 md6",bordered:""},{default:e(()=>{var c;return[a(ne,{idFatura:(c=t.fatura)==null?void 0:c.id,ref:"documentosFiscais"},null,8,["idFatura"])]}),_:1})]),_:1}),((h=(y=t.dados)==null?void 0:y.venda)==null?void 0:h.observacaoFaturamento)||((z=(V=t.dados)==null?void 0:V.venda)==null?void 0:z.observacao)||((N=(H=t.dados)==null?void 0:H.venda)==null?void 0:N.observacaoInterna)||((P=(W=t.dados)==null?void 0:W.venda)==null?void 0:P.motivoCancelamento)||((s=(M=t.dados)==null?void 0:M.venda)==null?void 0:s.observacaoCancelamento)?(n(),l(Q,{key:1,gutter:"md"},{default:e(()=>[a(C,{col:"xs12 md4",bordered:""},{default:e(()=>{var c,k;return[a(_,{text:"sub2 regular"},{default:e(()=>{var w,x;return[o[63]||(o[63]=R("span",{class:"text-weight-medium q-mr-sm"},"Obs.:",-1)),r(" "+u((x=(w=t.dados)==null?void 0:w.venda)==null?void 0:x.observacao),1)]}),_:1}),(k=(c=t.dados)==null?void 0:c.venda)!=null&&k.motivoCancelamento?(n(),l(_,{key:0,text:"sub2 regular"},{default:e(()=>{var w,x;return[o[64]||(o[64]=R("span",{class:"text-weight-medium q-mr-sm"},"Obs. Motivo Cancelamento:",-1)),r(" "+u((x=(w=t.dados)==null?void 0:w.venda)==null?void 0:x.motivoCancelamento),1)]}),_:1})):v("",!0)]}),_:1}),a(C,{col:"xs12 md4",bordered:""},{default:e(()=>{var c,k;return[a(_,{text:"sub2 regular"},{default:e(()=>{var w,x;return[o[65]||(o[65]=R("span",{class:"text-weight-medium q-mr-sm"},"Obs. Interna:",-1)),r(" "+u((x=(w=t.dados)==null?void 0:w.venda)==null?void 0:x.observacaoInterna),1)]}),_:1}),(k=(c=t.dados)==null?void 0:c.venda)!=null&&k.observacaoCancelamento?(n(),l(_,{key:0,text:"sub2 regular"},{default:e(()=>{var w,x;return[o[66]||(o[66]=R("span",{class:"text-weight-medium q-mr-sm"},"Obs. Cancelamento:",-1)),r(" "+u((x=(w=t.dados)==null?void 0:w.venda)==null?void 0:x.observacaoCancelamento),1)]}),_:1})):v("",!0)]}),_:1}),a(C,{col:"xs12 md4",bordered:""},{default:e(()=>[a(_,{text:"sub2 regular"},{default:e(()=>{var c,k;return[o[67]||(o[67]=R("span",{class:"text-weight-medium q-mr-sm"},"Obs. Faturamento:",-1)),r(" "+u((k=(c=t.dados)==null?void 0:c.venda)==null?void 0:k.observacaoFaturamento),1)]}),_:1})]),_:1})]),_:1})):v("",!0)]}),_:1})]),_:1},512),[[be,((ce=(me=t.dados)==null?void 0:me.venda)==null?void 0:ce.id)&&t.detalhesVisivel]]),(ve=(fe=t.dados)==null?void 0:fe.venda)!=null&&ve.id?(n(),l(Z,{key:1})):v("",!0)],64)):v("",!0),a(ge,{onExecutar:g.executar,ref:"vendaModal"},null,8,["onExecutar"]),a(ye,{ref:"modalHistoricoStatus"},null,512)])}var Re=ke(Ee,[["render",Ae]]);export{Re as V};
