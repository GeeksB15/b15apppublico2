import{_ as p,aE as h,p as f,o as i,i as c,w as n,a4 as b,l as _,f as r,P as v,a9 as g,bj as S,R as u,j as y,S as x,e as D,t as w,a6 as N}from"./index.15b86ac9.js";const W={data(){return{contaWhats:null,lista:[],dbUsuario:h.usuario,clienteSistema:{}}},props:{standard:{type:Boolean,default:!0},filled:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},conta:{type:String,default:null}},methods:{async whatsListaConexoes(){this.lista.push({icon:"storage",label:this.clienteSistema.bancoDeDados,value:this.clienteSistema.bancoDeDados});let t;const e=await $db.empresa.ler({filtro:{ativo:!0}});for(const a of e)a.numeroDocumentoNacional&&(t?this.lista.push({icon:"business",label:(a==null?void 0:a.sigla)||(a==null?void 0:a.apelido),value:`cnpj${a.numeroDocumentoNacional.replace("/","_")||null}`}):(t="empresa",this.lista.push({icon:"business",label:(a==null?void 0:a.sigla)||(a==null?void 0:a.apelido),tipo:t,value:`cnpj${a.numeroDocumentoNacional.replace("/","_")||null}`})));const l=(await $db.contato.ler({filtros:{ativo:!0,usuario:!0}})).data;l.sort((a,s)=>a.nome.localeCompare(s.nome)),t="";for(const a of l)a!=null&&a.numeroDocumentoNacional&&(t?this.lista.push({avatar:(a==null?void 0:a.imagem)||"",label:a.nome,value:`cpf${a.numeroDocumentoNacional}`}):(t="usuario",this.lista.push({avatar:(a==null?void 0:a.imagem)||"",label:a.nome,tipo:t,value:`cpf${a.numeroDocumentoNacional}`})));this.lista=Array.from(new Set(this.lista.map(JSON.stringify))).map(JSON.parse)},emitirValorSeletor(t){this.contaWhats=t||"",this.$emit("atualizarConexao",this.contaWhats.value)}},async mounted(){if(this.clienteSistema=JSON.parse(await localStorage.getItem("clienteSistema"))||{},await this.whatsListaConexoes(),this.conta,this.conta.substring(0,3)==="cpf"){const t=this.conta.substring(3),e=(await $db.hibrido.lista({table:"contato",where:{numeroDocumentoNacional:t}}))[0];this.contaWhats={label:e.nome}}else if(this.conta.substring(0,4)==="cnpj"){const t=this.conta.substring(4).replace("_","/"),e=(await $db.hibrido.lista({table:"empresa",whereFilter:{numeroDocumentoNacional:t}}))[0];this.contaWhats={label:(e==null?void 0:e.sigla)||(e==null?void 0:e.apelido)}}else this.contaWhats={label:this.clienteSistema.bancoDeDados}}};function C(t,e,l,a,s,m){const d=f("avatar");return i(),c(N,{modelValue:s.contaWhats,"onUpdate:modelValue":[e[0]||(e[0]=o=>s.contaWhats=o),m.emitirValorSeletor],"option-label":"label","option-value":"value",options:s.lista,clearable:"",standard:l.standard,filled:l.filled,outlined:l.outlined,dense:"",label:"Conex\xE3o Whatsapp",color:"primary","options-selected-class":"text-primary","popup-content-class":"conexoesDropdown"},{option:n(o=>[o.opt.tipo?(i(),c(b,{key:0,class:"q-mx-xl q-my-xs"})):_("",!0),r(v,g(S(o.itemProps)),{default:n(()=>[r(u,{avatar:""},{default:n(()=>[o.opt.icon?(i(),c(y,{key:0,name:o.opt.icon,size:"sm"},null,8,["name"])):(i(),c(d,{key:1,imagem:o.opt.avatar,color:"#eeeeee",tamanho:"24"},null,8,["imagem"]))]),_:2},1024),r(u,null,{default:n(()=>[r(x,{class:"text-weight-medium",lines:"1"},{default:n(()=>[D(w(o.opt.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","standard","filled","outlined","onUpdate:modelValue"])}var j=p(W,[["render",C]]);export{j as s};
